var xJ=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var lje=xJ((Uje,Qb)=>{function HL(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Zb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ec(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wS={exports:{}},kx={},bS={exports:{}},Tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j9;function yJ(){if(j9)return Tn;j9=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(z){return z===null||typeof z!="object"?null:(z=f&&z[f]||z["@@iterator"],typeof z=="function"?z:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,y={};function v(z,I,W){this.props=z,this.context=I,this.refs=y,this.updater=W||g}v.prototype.isReactComponent={},v.prototype.setState=function(z,I){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,I,"setState")},v.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function T(){}T.prototype=v.prototype;function k(z,I,W){this.props=z,this.context=I,this.refs=y,this.updater=W||g}var b=k.prototype=new T;b.constructor=k,x(b,v.prototype),b.isPureReactComponent=!0;var E=Array.isArray,N=Object.prototype.hasOwnProperty,P={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function j(z,I,W){var K,ee={},oe=null,Z=null;if(I!=null)for(K in I.ref!==void 0&&(Z=I.ref),I.key!==void 0&&(oe=""+I.key),I)N.call(I,K)&&!M.hasOwnProperty(K)&&(ee[K]=I[K]);var le=arguments.length-2;if(le===1)ee.children=W;else if(1<le){for(var ue=Array(le),de=0;de<le;de++)ue[de]=arguments[de+2];ee.children=ue}if(z&&z.defaultProps)for(K in le=z.defaultProps,le)ee[K]===void 0&&(ee[K]=le[K]);return{$$typeof:e,type:z,key:oe,ref:Z,props:ee,_owner:P.current}}function A(z,I){return{$$typeof:e,type:z.type,key:I,ref:z.ref,props:z.props,_owner:z._owner}}function D(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function L(z){var I={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(W){return I[W]})}var G=/\/+/g;function X(z,I){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):I.toString(36)}function se(z,I,W,K,ee){var oe=typeof z;(oe==="undefined"||oe==="boolean")&&(z=null);var Z=!1;if(z===null)Z=!0;else switch(oe){case"string":case"number":Z=!0;break;case"object":switch(z.$$typeof){case e:case t:Z=!0}}if(Z)return Z=z,ee=ee(Z),z=K===""?"."+X(Z,0):K,E(ee)?(W="",z!=null&&(W=z.replace(G,"$&/")+"/"),se(ee,I,W,"",function(de){return de})):ee!=null&&(D(ee)&&(ee=A(ee,W+(!ee.key||Z&&Z.key===ee.key?"":(""+ee.key).replace(G,"$&/")+"/")+z)),I.push(ee)),1;if(Z=0,K=K===""?".":K+":",E(z))for(var le=0;le<z.length;le++){oe=z[le];var ue=K+X(oe,le);Z+=se(oe,I,W,ue,ee)}else if(ue=h(z),typeof ue=="function")for(z=ue.call(z),le=0;!(oe=z.next()).done;)oe=oe.value,ue=K+X(oe,le++),Z+=se(oe,I,W,ue,ee);else if(oe==="object")throw I=String(z),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return Z}function Q(z,I,W){if(z==null)return z;var K=[],ee=0;return se(z,K,"","",function(oe){return I.call(W,oe,ee++)}),K}function re(z){if(z._status===-1){var I=z._result;I=I(),I.then(function(W){(z._status===0||z._status===-1)&&(z._status=1,z._result=W)},function(W){(z._status===0||z._status===-1)&&(z._status=2,z._result=W)}),z._status===-1&&(z._status=0,z._result=I)}if(z._status===1)return z._result.default;throw z._result}var B={current:null},V={transition:null},R={ReactCurrentDispatcher:B,ReactCurrentBatchConfig:V,ReactCurrentOwner:P};function H(){throw Error("act(...) is not supported in production builds of React.")}return Tn.Children={map:Q,forEach:function(z,I,W){Q(z,function(){I.apply(this,arguments)},W)},count:function(z){var I=0;return Q(z,function(){I++}),I},toArray:function(z){return Q(z,function(I){return I})||[]},only:function(z){if(!D(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Tn.Component=v,Tn.Fragment=r,Tn.Profiler=s,Tn.PureComponent=k,Tn.StrictMode=n,Tn.Suspense=l,Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,Tn.act=H,Tn.cloneElement=function(z,I,W){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var K=x({},z.props),ee=z.key,oe=z.ref,Z=z._owner;if(I!=null){if(I.ref!==void 0&&(oe=I.ref,Z=P.current),I.key!==void 0&&(ee=""+I.key),z.type&&z.type.defaultProps)var le=z.type.defaultProps;for(ue in I)N.call(I,ue)&&!M.hasOwnProperty(ue)&&(K[ue]=I[ue]===void 0&&le!==void 0?le[ue]:I[ue])}var ue=arguments.length-2;if(ue===1)K.children=W;else if(1<ue){le=Array(ue);for(var de=0;de<ue;de++)le[de]=arguments[de+2];K.children=le}return{$$typeof:e,type:z.type,key:ee,ref:oe,props:K,_owner:Z}},Tn.createContext=function(z){return z={$$typeof:i,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:a,_context:z},z.Consumer=z},Tn.createElement=j,Tn.createFactory=function(z){var I=j.bind(null,z);return I.type=z,I},Tn.createRef=function(){return{current:null}},Tn.forwardRef=function(z){return{$$typeof:o,render:z}},Tn.isValidElement=D,Tn.lazy=function(z){return{$$typeof:d,_payload:{_status:-1,_result:z},_init:re}},Tn.memo=function(z,I){return{$$typeof:u,type:z,compare:I===void 0?null:I}},Tn.startTransition=function(z){var I=V.transition;V.transition={};try{z()}finally{V.transition=I}},Tn.unstable_act=H,Tn.useCallback=function(z,I){return B.current.useCallback(z,I)},Tn.useContext=function(z){return B.current.useContext(z)},Tn.useDebugValue=function(){},Tn.useDeferredValue=function(z){return B.current.useDeferredValue(z)},Tn.useEffect=function(z,I){return B.current.useEffect(z,I)},Tn.useId=function(){return B.current.useId()},Tn.useImperativeHandle=function(z,I,W){return B.current.useImperativeHandle(z,I,W)},Tn.useInsertionEffect=function(z,I){return B.current.useInsertionEffect(z,I)},Tn.useLayoutEffect=function(z,I){return B.current.useLayoutEffect(z,I)},Tn.useMemo=function(z,I){return B.current.useMemo(z,I)},Tn.useReducer=function(z,I,W){return B.current.useReducer(z,I,W)},Tn.useRef=function(z){return B.current.useRef(z)},Tn.useState=function(z){return B.current.useState(z)},Tn.useSyncExternalStore=function(z,I,W){return B.current.useSyncExternalStore(z,I,W)},Tn.useTransition=function(){return B.current.useTransition()},Tn.version="18.3.1",Tn}var P9;function Wm(){return P9||(P9=1,bS.exports=yJ()),bS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M9;function vJ(){if(M9)return kx;M9=1;var e=Wm(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(o,l,u){var d,f={},h=null,g=null;u!==void 0&&(h=""+u),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(g=l.ref);for(d in l)n.call(l,d)&&!a.hasOwnProperty(d)&&(f[d]=l[d]);if(o&&o.defaultProps)for(d in l=o.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:t,type:o,key:h,ref:g,props:f,_owner:s.current}}return kx.Fragment=r,kx.jsx=i,kx.jsxs=i,kx}var F9;function wJ(){return F9||(F9=1,wS.exports=vJ()),wS.exports}var c=wJ(),_=Wm();const Gs=Ec(_),GL=HL({__proto__:null,default:Gs},[_]);var Lw={},_S={exports:{}},el={},SS={exports:{}},kS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D9;function bJ(){return D9||(D9=1,(function(e){function t(V,R){var H=V.length;V.push(R);e:for(;0<H;){var z=H-1>>>1,I=V[z];if(0<s(I,R))V[z]=R,V[H]=I,H=z;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var R=V[0],H=V.pop();if(H!==R){V[0]=H;e:for(var z=0,I=V.length,W=I>>>1;z<W;){var K=2*(z+1)-1,ee=V[K],oe=K+1,Z=V[oe];if(0>s(ee,H))oe<I&&0>s(Z,ee)?(V[z]=Z,V[oe]=H,z=oe):(V[z]=ee,V[K]=H,z=K);else if(oe<I&&0>s(Z,H))V[z]=Z,V[oe]=H,z=oe;else break e}}return R}function s(V,R){var H=V.sortIndex-R.sortIndex;return H!==0?H:V.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,f=null,h=3,g=!1,x=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=V)n(u),R.sortIndex=R.expirationTime,t(l,R);else break;R=r(u)}}function E(V){if(y=!1,b(V),!x)if(r(l)!==null)x=!0,re(N);else{var R=r(u);R!==null&&B(E,R.startTime-V)}}function N(V,R){x=!1,y&&(y=!1,T(j),j=-1),g=!0;var H=h;try{for(b(R),f=r(l);f!==null&&(!(f.expirationTime>R)||V&&!L());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var I=z(f.expirationTime<=R);R=e.unstable_now(),typeof I=="function"?f.callback=I:f===r(l)&&n(l),b(R)}else n(l);f=r(l)}if(f!==null)var W=!0;else{var K=r(u);K!==null&&B(E,K.startTime-R),W=!1}return W}finally{f=null,h=H,g=!1}}var P=!1,M=null,j=-1,A=5,D=-1;function L(){return!(e.unstable_now()-D<A)}function G(){if(M!==null){var V=e.unstable_now();D=V;var R=!0;try{R=M(!0,V)}finally{R?X():(P=!1,M=null)}}else P=!1}var X;if(typeof k=="function")X=function(){k(G)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Q=se.port2;se.port1.onmessage=G,X=function(){Q.postMessage(null)}}else X=function(){v(G,0)};function re(V){M=V,P||(P=!0,X())}function B(V,R){j=v(function(){V(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,re(N))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(V){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var H=h;h=R;try{return V()}finally{h=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,R){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var H=h;h=V;try{return R()}finally{h=H}},e.unstable_scheduleCallback=function(V,R,H){var z=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?z+H:z):H=z,V){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=H+I,V={id:d++,callback:R,priorityLevel:V,startTime:H,expirationTime:I,sortIndex:-1},H>z?(V.sortIndex=H,t(u,V),r(l)===null&&V===r(u)&&(y?(T(j),j=-1):y=!0,B(E,H-z))):(V.sortIndex=I,t(l,V),x||g||(x=!0,re(N))),V},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(V){var R=h;return function(){var H=h;h=R;try{return V.apply(this,arguments)}finally{h=H}}}})(kS)),kS}var O9;function $T(){return O9||(O9=1,SS.exports=bJ()),SS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I9;function _J(){if(I9)return el;I9=1;var e=Wm(),t=$T();function r(m){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+m,C=1;C<arguments.length;C++)p+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(m,p){i(m,p),i(m+"Capture",p)}function i(m,p){for(s[m]=p,m=0;m<p.length;m++)n.add(p[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function h(m){return l.call(f,m)?!0:l.call(d,m)?!1:u.test(m)?f[m]=!0:(d[m]=!0,!1)}function g(m,p,C,O){if(C!==null&&C.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return O?!1:C!==null?!C.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function x(m,p,C,O){if(p===null||typeof p>"u"||g(m,p,C,O))return!0;if(O)return!1;if(C!==null)switch(C.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function y(m,p,C,O,q,te,me){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=O,this.attributeNamespace=q,this.mustUseProperty=C,this.propertyName=m,this.type=p,this.sanitizeURL=te,this.removeEmptyString=me}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){v[m]=new y(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var p=m[0];v[p]=new y(p,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){v[m]=new y(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){v[m]=new y(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){v[m]=new y(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){v[m]=new y(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){v[m]=new y(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){v[m]=new y(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){v[m]=new y(m,5,!1,m.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function k(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var p=m.replace(T,k);v[p]=new y(p,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!0,!0)});function b(m,p,C,O){var q=v.hasOwnProperty(p)?v[p]:null;(q!==null?q.type!==0:O||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(x(p,C,q,O)&&(C=null),O||q===null?h(p)&&(C===null?m.removeAttribute(p):m.setAttribute(p,""+C)):q.mustUseProperty?m[q.propertyName]=C===null?q.type===3?!1:"":C:(p=q.attributeName,O=q.attributeNamespace,C===null?m.removeAttribute(p):(q=q.type,C=q===3||q===4&&C===!0?"":""+C,O?m.setAttributeNS(O,p,C):m.setAttribute(p,C))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),P=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),L=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),re=Symbol.for("react.lazy"),B=Symbol.for("react.offscreen"),V=Symbol.iterator;function R(m){return m===null||typeof m!="object"?null:(m=V&&m[V]||m["@@iterator"],typeof m=="function"?m:null)}var H=Object.assign,z;function I(m){if(z===void 0)try{throw Error()}catch(C){var p=C.stack.trim().match(/\n( *(at )?)/);z=p&&p[1]||""}return`
`+z+m}var W=!1;function K(m,p){if(!m||W)return"";W=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(St){var O=St}Reflect.construct(m,[],p)}else{try{p.call()}catch(St){O=St}m.call(p.prototype)}else{try{throw Error()}catch(St){O=St}m()}}catch(St){if(St&&O&&typeof St.stack=="string"){for(var q=St.stack.split(`
`),te=O.stack.split(`
`),me=q.length-1,De=te.length-1;1<=me&&0<=De&&q[me]!==te[De];)De--;for(;1<=me&&0<=De;me--,De--)if(q[me]!==te[De]){if(me!==1||De!==1)do if(me--,De--,0>De||q[me]!==te[De]){var Ge=`
`+q[me].replace(" at new "," at ");return m.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",m.displayName)),Ge}while(1<=me&&0<=De);break}}}finally{W=!1,Error.prepareStackTrace=C}return(m=m?m.displayName||m.name:"")?I(m):""}function ee(m){switch(m.tag){case 5:return I(m.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return m=K(m.type,!1),m;case 11:return m=K(m.type.render,!1),m;case 1:return m=K(m.type,!0),m;default:return""}}function oe(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case M:return"Fragment";case P:return"Portal";case A:return"Profiler";case j:return"StrictMode";case X:return"Suspense";case se:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case L:return(m.displayName||"Context")+".Consumer";case D:return(m._context.displayName||"Context")+".Provider";case G:var p=m.render;return m=m.displayName,m||(m=p.displayName||p.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case Q:return p=m.displayName||null,p!==null?p:oe(m.type)||"Memo";case re:p=m._payload,m=m._init;try{return oe(m(p))}catch{}}return null}function Z(m){var p=m.type;switch(m.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=p.render,m=m.displayName||m.name||"",p.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oe(p);case 8:return p===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function le(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function ue(m){var p=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function de(m){var p=ue(m)?"checked":"value",C=Object.getOwnPropertyDescriptor(m.constructor.prototype,p),O=""+m[p];if(!m.hasOwnProperty(p)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var q=C.get,te=C.set;return Object.defineProperty(m,p,{configurable:!0,get:function(){return q.call(this)},set:function(me){O=""+me,te.call(this,me)}}),Object.defineProperty(m,p,{enumerable:C.enumerable}),{getValue:function(){return O},setValue:function(me){O=""+me},stopTracking:function(){m._valueTracker=null,delete m[p]}}}}function Te(m){m._valueTracker||(m._valueTracker=de(m))}function ie(m){if(!m)return!1;var p=m._valueTracker;if(!p)return!0;var C=p.getValue(),O="";return m&&(O=ue(m)?m.checked?"true":"false":m.value),m=O,m!==C?(p.setValue(m),!0):!1}function pe(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Ae(m,p){var C=p.checked;return H({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??m._wrapperState.initialChecked})}function Me(m,p){var C=p.defaultValue==null?"":p.defaultValue,O=p.checked!=null?p.checked:p.defaultChecked;C=le(p.value!=null?p.value:C),m._wrapperState={initialChecked:O,initialValue:C,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Je(m,p){p=p.checked,p!=null&&b(m,"checked",p,!1)}function Ve(m,p){Je(m,p);var C=le(p.value),O=p.type;if(C!=null)O==="number"?(C===0&&m.value===""||m.value!=C)&&(m.value=""+C):m.value!==""+C&&(m.value=""+C);else if(O==="submit"||O==="reset"){m.removeAttribute("value");return}p.hasOwnProperty("value")?lt(m,p.type,C):p.hasOwnProperty("defaultValue")&&lt(m,p.type,le(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(m.defaultChecked=!!p.defaultChecked)}function Dt(m,p,C){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var O=p.type;if(!(O!=="submit"&&O!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+m._wrapperState.initialValue,C||p===m.value||(m.value=p),m.defaultValue=p}C=m.name,C!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,C!==""&&(m.name=C)}function lt(m,p,C){(p!=="number"||pe(m.ownerDocument)!==m)&&(C==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+C&&(m.defaultValue=""+C))}var At=Array.isArray;function vt(m,p,C,O){if(m=m.options,p){p={};for(var q=0;q<C.length;q++)p["$"+C[q]]=!0;for(C=0;C<m.length;C++)q=p.hasOwnProperty("$"+m[C].value),m[C].selected!==q&&(m[C].selected=q),q&&O&&(m[C].defaultSelected=!0)}else{for(C=""+le(C),p=null,q=0;q<m.length;q++){if(m[q].value===C){m[q].selected=!0,O&&(m[q].defaultSelected=!0);return}p!==null||m[q].disabled||(p=m[q])}p!==null&&(p.selected=!0)}}function ct(m,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return H({},p,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function bt(m,p){var C=p.value;if(C==null){if(C=p.children,p=p.defaultValue,C!=null){if(p!=null)throw Error(r(92));if(At(C)){if(1<C.length)throw Error(r(93));C=C[0]}p=C}p==null&&(p=""),C=p}m._wrapperState={initialValue:le(C)}}function Ut(m,p){var C=le(p.value),O=le(p.defaultValue);C!=null&&(C=""+C,C!==m.value&&(m.value=C),p.defaultValue==null&&m.defaultValue!==C&&(m.defaultValue=C)),O!=null&&(m.defaultValue=""+O)}function Bt(m){var p=m.textContent;p===m._wrapperState.initialValue&&p!==""&&p!==null&&(m.value=p)}function Vt(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function We(m,p){return m==null||m==="http://www.w3.org/1999/xhtml"?Vt(p):m==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var Ue,tt=(function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,C,O,q){MSApp.execUnsafeLocalFunction(function(){return m(p,C,O,q)})}:m})(function(m,p){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=p;else{for(Ue=Ue||document.createElement("div"),Ue.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=Ue.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;p.firstChild;)m.appendChild(p.firstChild)}});function nt(m,p){if(p){var C=m.firstChild;if(C&&C===m.lastChild&&C.nodeType===3){C.nodeValue=p;return}}m.textContent=p}var at={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},It=["Webkit","ms","Moz","O"];Object.keys(at).forEach(function(m){It.forEach(function(p){p=p+m.charAt(0).toUpperCase()+m.substring(1),at[p]=at[m]})});function Lt(m,p,C){return p==null||typeof p=="boolean"||p===""?"":C||typeof p!="number"||p===0||at.hasOwnProperty(m)&&at[m]?(""+p).trim():p+"px"}function Xt(m,p){m=m.style;for(var C in p)if(p.hasOwnProperty(C)){var O=C.indexOf("--")===0,q=Lt(C,p[C],O);C==="float"&&(C="cssFloat"),O?m.setProperty(C,q):m[C]=q}}var vr=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function br(m,p){if(p){if(vr[m]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,m));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function Dr(m,p){if(m.indexOf("-")===-1)return typeof p.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sr=null;function pr(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var ye=null,Fe=null,Be=null;function He(m){if(m=bh(m)){if(typeof ye!="function")throw Error(r(280));var p=m.stateNode;p&&(p=Ma(p),ye(m.stateNode,m.type,p))}}function Pt(m){Fe?Be?Be.push(m):Be=[m]:Fe=m}function Ie(){if(Fe){var m=Fe,p=Be;if(Be=Fe=null,He(m),p)for(m=0;m<p.length;m++)He(p[m])}}function Qe(m,p){return m(p)}function Ne(){}var Ke=!1;function qe(m,p,C){if(Ke)return m(p,C);Ke=!0;try{return Qe(m,p,C)}finally{Ke=!1,(Fe!==null||Be!==null)&&(Ne(),Ie())}}function Rt(m,p){var C=m.stateNode;if(C===null)return null;var O=Ma(C);if(O===null)return null;C=O[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(m=m.type,O=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!O;break e;default:m=!1}if(m)return null;if(C&&typeof C!="function")throw Error(r(231,p,typeof C));return C}var zt=!1;if(o)try{var rr={};Object.defineProperty(rr,"passive",{get:function(){zt=!0}}),window.addEventListener("test",rr,rr),window.removeEventListener("test",rr,rr)}catch{zt=!1}function Ir(m,p,C,O,q,te,me,De,Ge){var St=Array.prototype.slice.call(arguments,3);try{p.apply(C,St)}catch(Yt){this.onError(Yt)}}var wr=!1,Wr=null,he=!1,Ee=null,we={onError:function(m){wr=!0,Wr=m}};function _e(m,p,C,O,q,te,me,De,Ge){wr=!1,Wr=null,Ir.apply(we,arguments)}function ke(m,p,C,O,q,te,me,De,Ge){if(_e.apply(this,arguments),wr){if(wr){var St=Wr;wr=!1,Wr=null}else throw Error(r(198));he||(he=!0,Ee=St)}}function Ce(m){var p=m,C=m;if(m.alternate)for(;p.return;)p=p.return;else{m=p;do p=m,(p.flags&4098)!==0&&(C=p.return),m=p.return;while(m)}return p.tag===3?C:null}function rt(m){if(m.tag===13){var p=m.memoizedState;if(p===null&&(m=m.alternate,m!==null&&(p=m.memoizedState)),p!==null)return p.dehydrated}return null}function xt(m){if(Ce(m)!==m)throw Error(r(188))}function ut(m){var p=m.alternate;if(!p){if(p=Ce(m),p===null)throw Error(r(188));return p!==m?null:m}for(var C=m,O=p;;){var q=C.return;if(q===null)break;var te=q.alternate;if(te===null){if(O=q.return,O!==null){C=O;continue}break}if(q.child===te.child){for(te=q.child;te;){if(te===C)return xt(q),m;if(te===O)return xt(q),p;te=te.sibling}throw Error(r(188))}if(C.return!==O.return)C=q,O=te;else{for(var me=!1,De=q.child;De;){if(De===C){me=!0,C=q,O=te;break}if(De===O){me=!0,O=q,C=te;break}De=De.sibling}if(!me){for(De=te.child;De;){if(De===C){me=!0,C=te,O=q;break}if(De===O){me=!0,O=te,C=q;break}De=De.sibling}if(!me)throw Error(r(189))}}if(C.alternate!==O)throw Error(r(190))}if(C.tag!==3)throw Error(r(188));return C.stateNode.current===C?m:p}function ce(m){return m=ut(m),m!==null?ge(m):null}function ge(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var p=ge(m);if(p!==null)return p;m=m.sibling}return null}var Pe=t.unstable_scheduleCallback,je=t.unstable_cancelCallback,Ze=t.unstable_shouldYield,dt=t.unstable_requestPaint,_t=t.unstable_now,ir=t.unstable_getCurrentPriorityLevel,Ot=t.unstable_ImmediatePriority,Qt=t.unstable_UserBlockingPriority,Cr=t.unstable_NormalPriority,Br=t.unstable_LowPriority,Rr=t.unstable_IdlePriority,tn=null,mn=null;function dn(m){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(tn,m,void 0,(m.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:Qs,li=Math.log,gn=Math.LN2;function Qs(m){return m>>>=0,m===0?32:31-(li(m)/gn|0)|0}var _s=64,Ha=4194304;function Bn(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function be(m,p){var C=m.pendingLanes;if(C===0)return 0;var O=0,q=m.suspendedLanes,te=m.pingedLanes,me=C&268435455;if(me!==0){var De=me&~q;De!==0?O=Bn(De):(te&=me,te!==0&&(O=Bn(te)))}else me=C&~q,me!==0?O=Bn(me):te!==0&&(O=Bn(te));if(O===0)return 0;if(p!==0&&p!==O&&(p&q)===0&&(q=O&-O,te=p&-p,q>=te||q===16&&(te&4194240)!==0))return p;if((O&4)!==0&&(O|=C&16),p=m.entangledLanes,p!==0)for(m=m.entanglements,p&=O;0<p;)C=31-Fr(p),q=1<<C,O|=m[C],p&=~q;return O}function Ct(m,p){switch(m){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jr(m,p){for(var C=m.suspendedLanes,O=m.pingedLanes,q=m.expirationTimes,te=m.pendingLanes;0<te;){var me=31-Fr(te),De=1<<me,Ge=q[me];Ge===-1?((De&C)===0||(De&O)!==0)&&(q[me]=Ct(De,p)):Ge<=p&&(m.expiredLanes|=De),te&=~De}}function Ur(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Xn(){var m=_s;return _s<<=1,(_s&4194240)===0&&(_s=64),m}function Fn(m){for(var p=[],C=0;31>C;C++)p.push(m);return p}function as(m,p,C){m.pendingLanes|=p,p!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,p=31-Fr(p),m[p]=C}function $s(m,p){var C=m.pendingLanes&~p;m.pendingLanes=p,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=p,m.mutableReadLanes&=p,m.entangledLanes&=p,p=m.entanglements;var O=m.eventTimes;for(m=m.expirationTimes;0<C;){var q=31-Fr(C),te=1<<q;p[q]=0,O[q]=-1,m[q]=-1,C&=~te}}function ci(m,p){var C=m.entangledLanes|=p;for(m=m.entanglements;C;){var O=31-Fr(C),q=1<<O;q&p|m[O]&p&&(m[O]|=p),C&=~q}}var on=0;function Re(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var yt,tr,$e,ft,Wt,kt=!1,Pr=[],Et=null,rn=null,An=null,ze=new Map,ur=new Map,sr=[],ds="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pn(m,p){switch(m){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":ze.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":ur.delete(p.pointerId)}}function nn(m,p,C,O,q,te){return m===null||m.nativeEvent!==te?(m={blockedOn:p,domEventName:C,eventSystemFlags:O,nativeEvent:te,targetContainers:[q]},p!==null&&(p=bh(p),p!==null&&tr(p)),m):(m.eventSystemFlags|=O,p=m.targetContainers,q!==null&&p.indexOf(q)===-1&&p.push(q),m)}function xn(m,p,C,O,q){switch(p){case"focusin":return Et=nn(Et,m,p,C,O,q),!0;case"dragenter":return rn=nn(rn,m,p,C,O,q),!0;case"mouseover":return An=nn(An,m,p,C,O,q),!0;case"pointerover":var te=q.pointerId;return ze.set(te,nn(ze.get(te)||null,m,p,C,O,q)),!0;case"gotpointercapture":return te=q.pointerId,ur.set(te,nn(ur.get(te)||null,m,p,C,O,q)),!0}return!1}function _n(m){var p=wu(m.target);if(p!==null){var C=Ce(p);if(C!==null){if(p=C.tag,p===13){if(p=rt(C),p!==null){m.blockedOn=p,Wt(m.priority,function(){$e(C)});return}}else if(p===3&&C.stateNode.current.memoizedState.isDehydrated){m.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Wl(m){if(m.blockedOn!==null)return!1;for(var p=m.targetContainers;0<p.length;){var C=ig(m.domEventName,m.eventSystemFlags,p[0],m.nativeEvent);if(C===null){C=m.nativeEvent;var O=new C.constructor(C.type,C);Sr=O,C.target.dispatchEvent(O),Sr=null}else return p=bh(C),p!==null&&tr(p),m.blockedOn=C,!1;p.shift()}return!0}function Ai(m,p,C){Wl(m)&&C.delete(p)}function oh(){kt=!1,Et!==null&&Wl(Et)&&(Et=null),rn!==null&&Wl(rn)&&(rn=null),An!==null&&Wl(An)&&(An=null),ze.forEach(Ai),ur.forEach(Ai)}function du(m,p){m.blockedOn===p&&(m.blockedOn=null,kt||(kt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oh)))}function eo(m){function p(q){return du(q,m)}if(0<Pr.length){du(Pr[0],m);for(var C=1;C<Pr.length;C++){var O=Pr[C];O.blockedOn===m&&(O.blockedOn=null)}}for(Et!==null&&du(Et,m),rn!==null&&du(rn,m),An!==null&&du(An,m),ze.forEach(p),ur.forEach(p),C=0;C<sr.length;C++)O=sr[C],O.blockedOn===m&&(O.blockedOn=null);for(;0<sr.length&&(C=sr[0],C.blockedOn===null);)_n(C),C.blockedOn===null&&sr.shift()}var N0=E.ReactCurrentBatchConfig,ag=!0;function pl(m,p,C,O){var q=on,te=N0.transition;N0.transition=null;try{on=1,A0(m,p,C,O)}finally{on=q,N0.transition=te}}function Mc(m,p,C,O){var q=on,te=N0.transition;N0.transition=null;try{on=4,A0(m,p,C,O)}finally{on=q,N0.transition=te}}function A0(m,p,C,O){if(ag){var q=ig(m,p,C,O);if(q===null)_g(m,p,O,j0,C),pn(m,O);else if(xn(q,m,p,C,O))O.stopPropagation();else if(pn(m,O),p&4&&-1<ds.indexOf(m)){for(;q!==null;){var te=bh(q);if(te!==null&&yt(te),te=ig(m,p,C,O),te===null&&_g(m,p,O,j0,C),te===q)break;q=te}q!==null&&O.stopPropagation()}else _g(m,p,O,null,C)}}var j0=null;function ig(m,p,C,O){if(j0=null,m=pr(O),m=wu(m),m!==null)if(p=Ce(m),p===null)m=null;else if(C=p.tag,C===13){if(m=rt(p),m!==null)return m;m=null}else if(C===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;m=null}else p!==m&&(m=null);return j0=m,null}function U2(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ir()){case Ot:return 1;case Qt:return 4;case Cr:case Br:return 16;case Rr:return 536870912;default:return 16}default:return 16}}var Ga=null,fu=null,Fc=null;function lh(){if(Fc)return Fc;var m,p=fu,C=p.length,O,q="value"in Ga?Ga.value:Ga.textContent,te=q.length;for(m=0;m<C&&p[m]===q[m];m++);var me=C-m;for(O=1;O<=me&&p[C-O]===q[te-O];O++);return Fc=q.slice(m,1<O?1-O:void 0)}function id(m){var p=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&p===13&&(m=13)):m=p,m===10&&(m=13),32<=m||m===13?m:0}function ji(){return!0}function _o(){return!1}function pa(m){function p(C,O,q,te,me){this._reactName=C,this._targetInst=q,this.type=O,this.nativeEvent=te,this.target=me,this.currentTarget=null;for(var De in m)m.hasOwnProperty(De)&&(C=m[De],this[De]=C?C(te):te[De]);return this.isDefaultPrevented=(te.defaultPrevented!=null?te.defaultPrevented:te.returnValue===!1)?ji:_o,this.isPropagationStopped=_o,this}return H(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),p}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=pa(to),yl=H({},to,{view:0,detail:0}),W2=pa(yl),ch,uh,Va,Pi=H({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ld,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Va&&(Va&&m.type==="mousemove"?(ch=m.screenX-Va.screenX,uh=m.screenY-Va.screenY):uh=ch=0,Va=m),ch)},movementY:function(m){return"movementY"in m?m.movementY:uh}}),fs=pa(Pi),dh=H({},Pi,{dataTransfer:0}),vl=pa(dh),H2=H({},yl,{relatedTarget:0}),og=pa(H2),O1=H({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),I1=pa(O1),G2=H({},to,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),lg=pa(G2),V2=H({},to,{data:0}),od=pa(V2),R1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V3(m){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(m):(m=cg[m])?!!p[m]:!1}function ld(){return V3}var ug=H({},yl,{key:function(m){if(m.key){var p=R1[m.key]||m.key;if(p!=="Unidentified")return p}return m.type==="keypress"?(m=id(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?G3[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ld,charCode:function(m){return m.type==="keypress"?id(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?id(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),q2=pa(ug),K2=H({},Pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cd=pa(K2),Y2=H({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ld}),dg=pa(Y2),fg=H({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),P0=pa(fg),L1=H({},Pi,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),B1=pa(L1),X2=[9,13,27,32],fh=o&&"CompositionEvent"in window,ud=null;o&&"documentMode"in document&&(ud=document.documentMode);var M0=o&&"TextEvent"in window&&!ud,So=o&&(!fh||ud&&8<ud&&11>=ud),hu=" ",hg=!1;function $1(m,p){switch(m){case"keyup":return X2.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wl(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var ko=!1;function z1(m,p){switch(m){case"compositionend":return wl(p);case"keypress":return p.which!==32?null:(hg=!0,hu);case"textInput":return m=p.data,m===hu&&hg?null:m;default:return null}}function J2(m,p){if(ko)return m==="compositionend"||!fh&&$1(m,p)?(m=lh(),Fc=fu=Ga=null,ko=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return So&&p.locale!=="ko"?null:p.data;default:return null}}var Dc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oc(m){var p=m&&m.nodeName&&m.nodeName.toLowerCase();return p==="input"?!!Dc[m.type]:p==="textarea"}function hh(m,p,C,O){Pt(O),p=Sg(p,"onChange"),0<p.length&&(C=new xl("onChange","change",null,C,O),m.push({event:C,listeners:p}))}var F0=null,mu=null;function Q2(m){Q1(m,0)}function gu(m){var p=ya(m);if(ie(p))return m}function qo(m,p){if(m==="change")return p}var D0=!1;if(o){var pu;if(o){var Ko="oninput"in document;if(!Ko){var mg=document.createElement("div");mg.setAttribute("oninput","return;"),Ko=typeof mg.oninput=="function"}pu=Ko}else pu=!1;D0=pu&&(!document.documentMode||9<document.documentMode)}function dd(){F0&&(F0.detachEvent("onpropertychange",U1),mu=F0=null)}function U1(m){if(m.propertyName==="value"&&gu(mu)){var p=[];hh(p,mu,m,pr(m)),qe(Q2,p)}}function W1(m,p,C){m==="focusin"?(dd(),F0=p,mu=C,F0.attachEvent("onpropertychange",U1)):m==="focusout"&&dd()}function Ss(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return gu(mu)}function gg(m,p){if(m==="click")return gu(p)}function H1(m,p){if(m==="input"||m==="change")return gu(p)}function G1(m,p){return m===p&&(m!==0||1/m===1/p)||m!==m&&p!==p}var ro=typeof Object.is=="function"?Object.is:G1;function fd(m,p){if(ro(m,p))return!0;if(typeof m!="object"||m===null||typeof p!="object"||p===null)return!1;var C=Object.keys(m),O=Object.keys(p);if(C.length!==O.length)return!1;for(O=0;O<C.length;O++){var q=C[O];if(!l.call(p,q)||!ro(m[q],p[q]))return!1}return!0}function xu(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function xs(m,p){var C=xu(m);m=0;for(var O;C;){if(C.nodeType===3){if(O=m+C.textContent.length,m<=p&&O>=p)return{node:C,offset:p-m};m=O}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=xu(C)}}function Zs(m,p){return m&&p?m===p?!0:m&&m.nodeType===3?!1:p&&p.nodeType===3?Zs(m,p.parentNode):"contains"in m?m.contains(p):m.compareDocumentPosition?!!(m.compareDocumentPosition(p)&16):!1:!1}function xa(){for(var m=window,p=pe();p instanceof m.HTMLIFrameElement;){try{var C=typeof p.contentWindow.location.href=="string"}catch{C=!1}if(C)m=p.contentWindow;else break;p=pe(m.document)}return p}function O0(m){var p=m&&m.nodeName&&m.nodeName.toLowerCase();return p&&(p==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||p==="textarea"||m.contentEditable==="true")}function mh(m){var p=xa(),C=m.focusedElem,O=m.selectionRange;if(p!==C&&C&&C.ownerDocument&&Zs(C.ownerDocument.documentElement,C)){if(O!==null&&O0(C)){if(p=O.start,m=O.end,m===void 0&&(m=p),"selectionStart"in C)C.selectionStart=p,C.selectionEnd=Math.min(m,C.value.length);else if(m=(p=C.ownerDocument||document)&&p.defaultView||window,m.getSelection){m=m.getSelection();var q=C.textContent.length,te=Math.min(O.start,q);O=O.end===void 0?te:Math.min(O.end,q),!m.extend&&te>O&&(q=O,O=te,te=q),q=xs(C,te);var me=xs(C,O);q&&me&&(m.rangeCount!==1||m.anchorNode!==q.node||m.anchorOffset!==q.offset||m.focusNode!==me.node||m.focusOffset!==me.offset)&&(p=p.createRange(),p.setStart(q.node,q.offset),m.removeAllRanges(),te>O?(m.addRange(p),m.extend(me.node,me.offset)):(p.setEnd(me.node,me.offset),m.addRange(p)))}}for(p=[],m=C;m=m.parentNode;)m.nodeType===1&&p.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<p.length;C++)m=p[C],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var gh=o&&"documentMode"in document&&11>=document.documentMode,I0=null,Pa=null,hd=null,ph=!1;function pg(m,p,C){var O=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;ph||I0==null||I0!==pe(O)||(O=I0,"selectionStart"in O&&O0(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),hd&&fd(hd,O)||(hd=O,O=Sg(Pa,"onSelect"),0<O.length&&(p=new xl("onSelect","select",null,p,C),m.push({event:p,listeners:O}),p.target=I0)))}function To(m,p){var C={};return C[m.toLowerCase()]=p.toLowerCase(),C["Webkit"+m]="webkit"+p,C["Moz"+m]="moz"+p,C}var qa={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionend:To("Transition","TransitionEnd")},md={},xg={};o&&(xg=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function R0(m){if(md[m])return md[m];if(!qa[m])return m;var p=qa[m],C;for(C in p)if(p.hasOwnProperty(C)&&C in xg)return md[m]=p[C];return m}var V1=R0("animationend"),q1=R0("animationiteration"),K1=R0("animationstart"),Y1=R0("transitionend"),X1=new Map,J1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ic(m,p){X1.set(m,p),a(p,[m])}for(var yg=0;yg<J1.length;yg++){var gd=J1[yg],Z2=gd.toLowerCase(),vg=gd[0].toUpperCase()+gd.slice(1);Ic(Z2,"on"+vg)}Ic(V1,"onAnimationEnd"),Ic(q1,"onAnimationIteration"),Ic(K1,"onAnimationStart"),Ic("dblclick","onDoubleClick"),Ic("focusin","onFocus"),Ic("focusout","onBlur"),Ic(Y1,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ew=new Set("cancel close invalid load scroll toggle".split(" ").concat(yu));function wg(m,p,C){var O=m.type||"unknown-event";m.currentTarget=C,ke(O,p,void 0,m),m.currentTarget=null}function Q1(m,p){p=(p&4)!==0;for(var C=0;C<m.length;C++){var O=m[C],q=O.event;O=O.listeners;e:{var te=void 0;if(p)for(var me=O.length-1;0<=me;me--){var De=O[me],Ge=De.instance,St=De.currentTarget;if(De=De.listener,Ge!==te&&q.isPropagationStopped())break e;wg(q,De,St),te=Ge}else for(me=0;me<O.length;me++){if(De=O[me],Ge=De.instance,St=De.currentTarget,De=De.listener,Ge!==te&&q.isPropagationStopped())break e;wg(q,De,St),te=Ge}}}if(he)throw m=Ee,he=!1,Ee=null,m}function is(m,p){var C=p[Tg];C===void 0&&(C=p[Tg]=new Set);var O=m+"__bubble";C.has(O)||(Z1(p,m,2,!1),C.add(O))}function bg(m,p,C){var O=0;p&&(O|=4),Z1(C,m,O,p)}var xh="_reactListening"+Math.random().toString(36).slice(2);function pd(m){if(!m[xh]){m[xh]=!0,n.forEach(function(C){C!=="selectionchange"&&(ew.has(C)||bg(C,!1,m),bg(C,!0,m))});var p=m.nodeType===9?m:m.ownerDocument;p===null||p[xh]||(p[xh]=!0,bg("selectionchange",!1,p))}}function Z1(m,p,C,O){switch(U2(p)){case 1:var q=pl;break;case 4:q=Mc;break;default:q=A0}C=q.bind(null,p,C,m),q=void 0,!zt||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(q=!0),O?q!==void 0?m.addEventListener(p,C,{capture:!0,passive:q}):m.addEventListener(p,C,!0):q!==void 0?m.addEventListener(p,C,{passive:q}):m.addEventListener(p,C,!1)}function _g(m,p,C,O,q){var te=O;if((p&1)===0&&(p&2)===0&&O!==null)e:for(;;){if(O===null)return;var me=O.tag;if(me===3||me===4){var De=O.stateNode.containerInfo;if(De===q||De.nodeType===8&&De.parentNode===q)break;if(me===4)for(me=O.return;me!==null;){var Ge=me.tag;if((Ge===3||Ge===4)&&(Ge=me.stateNode.containerInfo,Ge===q||Ge.nodeType===8&&Ge.parentNode===q))return;me=me.return}for(;De!==null;){if(me=wu(De),me===null)return;if(Ge=me.tag,Ge===5||Ge===6){O=te=me;continue e}De=De.parentNode}}O=O.return}qe(function(){var St=te,Yt=pr(C),Zt=[];e:{var qt=X1.get(m);if(qt!==void 0){var _r=xl,Mr=m;switch(m){case"keypress":if(id(C)===0)break e;case"keydown":case"keyup":_r=q2;break;case"focusin":Mr="focus",_r=og;break;case"focusout":Mr="blur",_r=og;break;case"beforeblur":case"afterblur":_r=og;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_r=fs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_r=vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_r=dg;break;case V1:case q1:case K1:_r=I1;break;case Y1:_r=P0;break;case"scroll":_r=W2;break;case"wheel":_r=B1;break;case"copy":case"cut":case"paste":_r=lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_r=cd}var Or=(p&4)!==0,_a=!Or&&m==="scroll",ht=Or?qt!==null?qt+"Capture":null:qt;Or=[];for(var et=St,pt;et!==null;){pt=et;var or=pt.stateNode;if(pt.tag===5&&or!==null&&(pt=or,ht!==null&&(or=Rt(et,ht),or!=null&&Or.push(L0(et,or,pt)))),_a)break;et=et.return}0<Or.length&&(qt=new _r(qt,Mr,null,C,Yt),Zt.push({event:qt,listeners:Or}))}}if((p&7)===0){e:{if(qt=m==="mouseover"||m==="pointerover",_r=m==="mouseout"||m==="pointerout",qt&&C!==Sr&&(Mr=C.relatedTarget||C.fromElement)&&(wu(Mr)||Mr[Gl]))break e;if((_r||qt)&&(qt=Yt.window===Yt?Yt:(qt=Yt.ownerDocument)?qt.defaultView||qt.parentWindow:window,_r?(Mr=C.relatedTarget||C.toElement,_r=St,Mr=Mr?wu(Mr):null,Mr!==null&&(_a=Ce(Mr),Mr!==_a||Mr.tag!==5&&Mr.tag!==6)&&(Mr=null)):(_r=null,Mr=St),_r!==Mr)){if(Or=fs,or="onMouseLeave",ht="onMouseEnter",et="mouse",(m==="pointerout"||m==="pointerover")&&(Or=cd,or="onPointerLeave",ht="onPointerEnter",et="pointer"),_a=_r==null?qt:ya(_r),pt=Mr==null?qt:ya(Mr),qt=new Or(or,et+"leave",_r,C,Yt),qt.target=_a,qt.relatedTarget=pt,or=null,wu(Yt)===St&&(Or=new Or(ht,et+"enter",Mr,C,Yt),Or.target=pt,Or.relatedTarget=_a,or=Or),_a=or,_r&&Mr)t:{for(Or=_r,ht=Mr,et=0,pt=Or;pt;pt=xd(pt))et++;for(pt=0,or=ht;or;or=xd(or))pt++;for(;0<et-pt;)Or=xd(Or),et--;for(;0<pt-et;)ht=xd(ht),pt--;for(;et--;){if(Or===ht||ht!==null&&Or===ht.alternate)break t;Or=xd(Or),ht=xd(ht)}Or=null}else Or=null;_r!==null&&tw(Zt,qt,_r,Or,!1),Mr!==null&&_a!==null&&tw(Zt,_a,Mr,Or,!0)}}e:{if(qt=St?ya(St):window,_r=qt.nodeName&&qt.nodeName.toLowerCase(),_r==="select"||_r==="input"&&qt.type==="file")var Lr=qo;else if(Oc(qt))if(D0)Lr=H1;else{Lr=Ss;var Hr=W1}else(_r=qt.nodeName)&&_r.toLowerCase()==="input"&&(qt.type==="checkbox"||qt.type==="radio")&&(Lr=gg);if(Lr&&(Lr=Lr(m,St))){hh(Zt,Lr,C,Yt);break e}Hr&&Hr(m,qt,St),m==="focusout"&&(Hr=qt._wrapperState)&&Hr.controlled&&qt.type==="number"&&lt(qt,"number",qt.value)}switch(Hr=St?ya(St):window,m){case"focusin":(Oc(Hr)||Hr.contentEditable==="true")&&(I0=Hr,Pa=St,hd=null);break;case"focusout":hd=Pa=I0=null;break;case"mousedown":ph=!0;break;case"contextmenu":case"mouseup":case"dragend":ph=!1,pg(Zt,C,Yt);break;case"selectionchange":if(gh)break;case"keydown":case"keyup":pg(Zt,C,Yt)}var Gr;if(fh)e:{switch(m){case"compositionstart":var sn="onCompositionStart";break e;case"compositionend":sn="onCompositionEnd";break e;case"compositionupdate":sn="onCompositionUpdate";break e}sn=void 0}else ko?$1(m,C)&&(sn="onCompositionEnd"):m==="keydown"&&C.keyCode===229&&(sn="onCompositionStart");sn&&(So&&C.locale!=="ko"&&(ko||sn!=="onCompositionStart"?sn==="onCompositionEnd"&&ko&&(Gr=lh()):(Ga=Yt,fu="value"in Ga?Ga.value:Ga.textContent,ko=!0)),Hr=Sg(St,sn),0<Hr.length&&(sn=new od(sn,m,null,C,Yt),Zt.push({event:sn,listeners:Hr}),Gr?sn.data=Gr:(Gr=wl(C),Gr!==null&&(sn.data=Gr)))),(Gr=M0?z1(m,C):J2(m,C))&&(St=Sg(St,"onBeforeInput"),0<St.length&&(Yt=new od("onBeforeInput","beforeinput",null,C,Yt),Zt.push({event:Yt,listeners:St}),Yt.data=Gr))}Q1(Zt,p)})}function L0(m,p,C){return{instance:m,listener:p,currentTarget:C}}function Sg(m,p){for(var C=p+"Capture",O=[];m!==null;){var q=m,te=q.stateNode;q.tag===5&&te!==null&&(q=te,te=Rt(m,C),te!=null&&O.unshift(L0(m,te,q)),te=Rt(m,p),te!=null&&O.push(L0(m,te,q))),m=m.return}return O}function xd(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function tw(m,p,C,O,q){for(var te=p._reactName,me=[];C!==null&&C!==O;){var De=C,Ge=De.alternate,St=De.stateNode;if(Ge!==null&&Ge===O)break;De.tag===5&&St!==null&&(De=St,q?(Ge=Rt(C,te),Ge!=null&&me.unshift(L0(C,Ge,De))):q||(Ge=Rt(C,te),Ge!=null&&me.push(L0(C,Ge,De)))),C=C.return}me.length!==0&&m.push({event:p,listeners:me})}var q3=/\r\n?/g,rw=/\u0000|\uFFFD/g;function ex(m){return(typeof m=="string"?m:""+m).replace(q3,`
`).replace(rw,"")}function yh(m,p,C){if(p=ex(p),ex(m)!==p&&C)throw Error(r(425))}function yd(){}var tx=null,rx=null;function nx(m,p){return m==="textarea"||m==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var Co=typeof setTimeout=="function"?setTimeout:void 0,sx=typeof clearTimeout=="function"?clearTimeout:void 0,vh=typeof Promise=="function"?Promise:void 0,nw=typeof queueMicrotask=="function"?queueMicrotask:typeof vh<"u"?function(m){return vh.resolve(null).then(m).catch(sw)}:Co;function sw(m){setTimeout(function(){throw m})}function kg(m,p){var C=p,O=0;do{var q=C.nextSibling;if(m.removeChild(C),q&&q.nodeType===8)if(C=q.data,C==="/$"){if(O===0){m.removeChild(q),eo(p);return}O--}else C!=="$"&&C!=="$?"&&C!=="$!"||O++;C=q}while(C);eo(p)}function Hl(m){for(;m!=null;m=m.nextSibling){var p=m.nodeType;if(p===1||p===3)break;if(p===8){if(p=m.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return m}function vd(m){m=m.previousSibling;for(var p=0;m;){if(m.nodeType===8){var C=m.data;if(C==="$"||C==="$!"||C==="$?"){if(p===0)return m;p--}else C==="/$"&&p++}m=m.previousSibling}return null}var vu=Math.random().toString(36).slice(2),Yo="__reactFiber$"+vu,wh="__reactProps$"+vu,Gl="__reactContainer$"+vu,Tg="__reactEvents$"+vu,aw="__reactListeners$"+vu,iw="__reactHandles$"+vu;function wu(m){var p=m[Yo];if(p)return p;for(var C=m.parentNode;C;){if(p=C[Gl]||C[Yo]){if(C=p.alternate,p.child!==null||C!==null&&C.child!==null)for(m=vd(m);m!==null;){if(C=m[Yo])return C;m=vd(m)}return p}m=C,C=m.parentNode}return null}function bh(m){return m=m[Yo]||m[Gl],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function ya(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(r(33))}function Ma(m){return m[wh]||null}var Cg=[],wd=-1;function Rc(m){return{current:m}}function os(m){0>wd||(m.current=Cg[wd],Cg[wd]=null,wd--)}function Jn(m,p){wd++,Cg[wd]=m.current,m.current=p}var Vl={},Ka=Rc(Vl),ui=Rc(!1),bu=Vl;function bd(m,p){var C=m.type.contextTypes;if(!C)return Vl;var O=m.stateNode;if(O&&O.__reactInternalMemoizedUnmaskedChildContext===p)return O.__reactInternalMemoizedMaskedChildContext;var q={},te;for(te in C)q[te]=p[te];return O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=p,m.__reactInternalMemoizedMaskedChildContext=q),q}function di(m){return m=m.childContextTypes,m!=null}function B0(){os(ui),os(Ka)}function ax(m,p,C){if(Ka.current!==Vl)throw Error(r(168));Jn(Ka,p),Jn(ui,C)}function Eg(m,p,C){var O=m.stateNode;if(p=p.childContextTypes,typeof O.getChildContext!="function")return C;O=O.getChildContext();for(var q in O)if(!(q in p))throw Error(r(108,Z(m)||"Unknown",q));return H({},C,O)}function _d(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Vl,bu=Ka.current,Jn(Ka,m),Jn(ui,ui.current),!0}function ow(m,p,C){var O=m.stateNode;if(!O)throw Error(r(169));C?(m=Eg(m,p,bu),O.__reactInternalMemoizedMergedChildContext=m,os(ui),os(Ka),Jn(Ka,m)):os(ui),Jn(ui,C)}var ql=null,$0=!1,Ng=!1;function _h(m){ql===null?ql=[m]:ql.push(m)}function Lc(m){$0=!0,_h(m)}function _u(){if(!Ng&&ql!==null){Ng=!0;var m=0,p=on;try{var C=ql;for(on=1;m<C.length;m++){var O=C[m];do O=O(!0);while(O!==null)}ql=null,$0=!1}catch(q){throw ql!==null&&(ql=ql.slice(m+1)),Pe(Ot,_u),q}finally{on=p,Ng=!1}}return null}var Mi=[],Sd=0,Su=null,ku=0,Fi=[],Di=0,Tu=null,Eo=1,ys="";function kd(m,p){Mi[Sd++]=ku,Mi[Sd++]=Su,Su=m,ku=p}function lw(m,p,C){Fi[Di++]=Eo,Fi[Di++]=ys,Fi[Di++]=Tu,Tu=m;var O=Eo;m=ys;var q=32-Fr(O)-1;O&=~(1<<q),C+=1;var te=32-Fr(p)+q;if(30<te){var me=q-q%5;te=(O&(1<<me)-1).toString(32),O>>=me,q-=me,Eo=1<<32-Fr(p)+q|C<<q|O,ys=te+m}else Eo=1<<te|C<<q|O,ys=m}function z0(m){m.return!==null&&(kd(m,1),lw(m,1,0))}function Fa(m){for(;m===Su;)Su=Mi[--Sd],Mi[Sd]=null,ku=Mi[--Sd],Mi[Sd]=null;for(;m===Tu;)Tu=Fi[--Di],Fi[Di]=null,ys=Fi[--Di],Fi[Di]=null,Eo=Fi[--Di],Fi[Di]=null}var No=null,mr=null,Gn=!1,Ao=null;function ix(m,p){var C=ec(5,null,null,0);C.elementType="DELETED",C.stateNode=p,C.return=m,p=m.deletions,p===null?(m.deletions=[C],m.flags|=16):p.push(C)}function cw(m,p){switch(m.tag){case 5:var C=m.type;return p=p.nodeType!==1||C.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(m.stateNode=p,No=m,mr=Hl(p.firstChild),!0):!1;case 6:return p=m.pendingProps===""||p.nodeType!==3?null:p,p!==null?(m.stateNode=p,No=m,mr=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(C=Tu!==null?{id:Eo,overflow:ys}:null,m.memoizedState={dehydrated:p,treeContext:C,retryLane:1073741824},C=ec(18,null,null,0),C.stateNode=p,C.return=m,m.child=C,No=m,mr=null,!0):!1;default:return!1}}function Td(m){return(m.mode&1)!==0&&(m.flags&128)===0}function U0(m){if(Gn){var p=mr;if(p){var C=p;if(!cw(m,p)){if(Td(m))throw Error(r(418));p=Hl(C.nextSibling);var O=No;p&&cw(m,p)?ix(O,C):(m.flags=m.flags&-4097|2,Gn=!1,No=m)}}else{if(Td(m))throw Error(r(418));m.flags=m.flags&-4097|2,Gn=!1,No=m}}}function Ag(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;No=m}function Sh(m){if(m!==No)return!1;if(!Gn)return Ag(m),Gn=!0,!1;var p;if((p=m.tag!==3)&&!(p=m.tag!==5)&&(p=m.type,p=p!=="head"&&p!=="body"&&!nx(m.type,m.memoizedProps)),p&&(p=mr)){if(Td(m))throw ox(),Error(r(418));for(;p;)ix(m,p),p=Hl(p.nextSibling)}if(Ag(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));e:{for(m=m.nextSibling,p=0;m;){if(m.nodeType===8){var C=m.data;if(C==="/$"){if(p===0){mr=Hl(m.nextSibling);break e}p--}else C!=="$"&&C!=="$!"&&C!=="$?"||p++}m=m.nextSibling}mr=null}}else mr=No?Hl(m.stateNode.nextSibling):null;return!0}function ox(){for(var m=mr;m;)m=Hl(m.nextSibling)}function Cd(){mr=No=null,Gn=!1}function kh(m){Ao===null?Ao=[m]:Ao.push(m)}var lx=E.ReactCurrentBatchConfig;function zs(m,p,C){if(m=C.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(r(309));var O=C.stateNode}if(!O)throw Error(r(147,m));var q=O,te=""+m;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===te?p.ref:(p=function(me){var De=q.refs;me===null?delete De[te]:De[te]=me},p._stringRef=te,p)}if(typeof m!="string")throw Error(r(284));if(!C._owner)throw Error(r(290,m))}return m}function no(m,p){throw m=Object.prototype.toString.call(p),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":m))}function bl(m){var p=m._init;return p(m._payload)}function jg(m){function p(ht,et){if(m){var pt=ht.deletions;pt===null?(ht.deletions=[et],ht.flags|=16):pt.push(et)}}function C(ht,et){if(!m)return null;for(;et!==null;)p(ht,et),et=et.sibling;return null}function O(ht,et){for(ht=new Map;et!==null;)et.key!==null?ht.set(et.key,et):ht.set(et.index,et),et=et.sibling;return ht}function q(ht,et){return ht=cf(ht,et),ht.index=0,ht.sibling=null,ht}function te(ht,et,pt){return ht.index=pt,m?(pt=ht.alternate,pt!==null?(pt=pt.index,pt<et?(ht.flags|=2,et):pt):(ht.flags|=2,et)):(ht.flags|=1048576,et)}function me(ht){return m&&ht.alternate===null&&(ht.flags|=2),ht}function De(ht,et,pt,or){return et===null||et.tag!==6?(et=mS(pt,ht.mode,or),et.return=ht,et):(et=q(et,pt),et.return=ht,et)}function Ge(ht,et,pt,or){var Lr=pt.type;return Lr===M?Yt(ht,et,pt.props.children,or,pt.key):et!==null&&(et.elementType===Lr||typeof Lr=="object"&&Lr!==null&&Lr.$$typeof===re&&bl(Lr)===et.type)?(or=q(et,pt.props),or.ref=zs(ht,et,pt),or.return=ht,or):(or=jw(pt.type,pt.key,pt.props,null,ht.mode,or),or.ref=zs(ht,et,pt),or.return=ht,or)}function St(ht,et,pt,or){return et===null||et.tag!==4||et.stateNode.containerInfo!==pt.containerInfo||et.stateNode.implementation!==pt.implementation?(et=gS(pt,ht.mode,or),et.return=ht,et):(et=q(et,pt.children||[]),et.return=ht,et)}function Yt(ht,et,pt,or,Lr){return et===null||et.tag!==7?(et=Oh(pt,ht.mode,or,Lr),et.return=ht,et):(et=q(et,pt),et.return=ht,et)}function Zt(ht,et,pt){if(typeof et=="string"&&et!==""||typeof et=="number")return et=mS(""+et,ht.mode,pt),et.return=ht,et;if(typeof et=="object"&&et!==null){switch(et.$$typeof){case N:return pt=jw(et.type,et.key,et.props,null,ht.mode,pt),pt.ref=zs(ht,null,et),pt.return=ht,pt;case P:return et=gS(et,ht.mode,pt),et.return=ht,et;case re:var or=et._init;return Zt(ht,or(et._payload),pt)}if(At(et)||R(et))return et=Oh(et,ht.mode,pt,null),et.return=ht,et;no(ht,et)}return null}function qt(ht,et,pt,or){var Lr=et!==null?et.key:null;if(typeof pt=="string"&&pt!==""||typeof pt=="number")return Lr!==null?null:De(ht,et,""+pt,or);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case N:return pt.key===Lr?Ge(ht,et,pt,or):null;case P:return pt.key===Lr?St(ht,et,pt,or):null;case re:return Lr=pt._init,qt(ht,et,Lr(pt._payload),or)}if(At(pt)||R(pt))return Lr!==null?null:Yt(ht,et,pt,or,null);no(ht,pt)}return null}function _r(ht,et,pt,or,Lr){if(typeof or=="string"&&or!==""||typeof or=="number")return ht=ht.get(pt)||null,De(et,ht,""+or,Lr);if(typeof or=="object"&&or!==null){switch(or.$$typeof){case N:return ht=ht.get(or.key===null?pt:or.key)||null,Ge(et,ht,or,Lr);case P:return ht=ht.get(or.key===null?pt:or.key)||null,St(et,ht,or,Lr);case re:var Hr=or._init;return _r(ht,et,pt,Hr(or._payload),Lr)}if(At(or)||R(or))return ht=ht.get(pt)||null,Yt(et,ht,or,Lr,null);no(et,or)}return null}function Mr(ht,et,pt,or){for(var Lr=null,Hr=null,Gr=et,sn=et=0,xi=null;Gr!==null&&sn<pt.length;sn++){Gr.index>sn?(xi=Gr,Gr=null):xi=Gr.sibling;var $n=qt(ht,Gr,pt[sn],or);if($n===null){Gr===null&&(Gr=xi);break}m&&Gr&&$n.alternate===null&&p(ht,Gr),et=te($n,et,sn),Hr===null?Lr=$n:Hr.sibling=$n,Hr=$n,Gr=xi}if(sn===pt.length)return C(ht,Gr),Gn&&kd(ht,sn),Lr;if(Gr===null){for(;sn<pt.length;sn++)Gr=Zt(ht,pt[sn],or),Gr!==null&&(et=te(Gr,et,sn),Hr===null?Lr=Gr:Hr.sibling=Gr,Hr=Gr);return Gn&&kd(ht,sn),Lr}for(Gr=O(ht,Gr);sn<pt.length;sn++)xi=_r(Gr,ht,sn,pt[sn],or),xi!==null&&(m&&xi.alternate!==null&&Gr.delete(xi.key===null?sn:xi.key),et=te(xi,et,sn),Hr===null?Lr=xi:Hr.sibling=xi,Hr=xi);return m&&Gr.forEach(function(uf){return p(ht,uf)}),Gn&&kd(ht,sn),Lr}function Or(ht,et,pt,or){var Lr=R(pt);if(typeof Lr!="function")throw Error(r(150));if(pt=Lr.call(pt),pt==null)throw Error(r(151));for(var Hr=Lr=null,Gr=et,sn=et=0,xi=null,$n=pt.next();Gr!==null&&!$n.done;sn++,$n=pt.next()){Gr.index>sn?(xi=Gr,Gr=null):xi=Gr.sibling;var uf=qt(ht,Gr,$n.value,or);if(uf===null){Gr===null&&(Gr=xi);break}m&&Gr&&uf.alternate===null&&p(ht,Gr),et=te(uf,et,sn),Hr===null?Lr=uf:Hr.sibling=uf,Hr=uf,Gr=xi}if($n.done)return C(ht,Gr),Gn&&kd(ht,sn),Lr;if(Gr===null){for(;!$n.done;sn++,$n=pt.next())$n=Zt(ht,$n.value,or),$n!==null&&(et=te($n,et,sn),Hr===null?Lr=$n:Hr.sibling=$n,Hr=$n);return Gn&&kd(ht,sn),Lr}for(Gr=O(ht,Gr);!$n.done;sn++,$n=pt.next())$n=_r(Gr,ht,sn,$n.value,or),$n!==null&&(m&&$n.alternate!==null&&Gr.delete($n.key===null?sn:$n.key),et=te($n,et,sn),Hr===null?Lr=$n:Hr.sibling=$n,Hr=$n);return m&&Gr.forEach(function(pJ){return p(ht,pJ)}),Gn&&kd(ht,sn),Lr}function _a(ht,et,pt,or){if(typeof pt=="object"&&pt!==null&&pt.type===M&&pt.key===null&&(pt=pt.props.children),typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case N:e:{for(var Lr=pt.key,Hr=et;Hr!==null;){if(Hr.key===Lr){if(Lr=pt.type,Lr===M){if(Hr.tag===7){C(ht,Hr.sibling),et=q(Hr,pt.props.children),et.return=ht,ht=et;break e}}else if(Hr.elementType===Lr||typeof Lr=="object"&&Lr!==null&&Lr.$$typeof===re&&bl(Lr)===Hr.type){C(ht,Hr.sibling),et=q(Hr,pt.props),et.ref=zs(ht,Hr,pt),et.return=ht,ht=et;break e}C(ht,Hr);break}else p(ht,Hr);Hr=Hr.sibling}pt.type===M?(et=Oh(pt.props.children,ht.mode,or,pt.key),et.return=ht,ht=et):(or=jw(pt.type,pt.key,pt.props,null,ht.mode,or),or.ref=zs(ht,et,pt),or.return=ht,ht=or)}return me(ht);case P:e:{for(Hr=pt.key;et!==null;){if(et.key===Hr)if(et.tag===4&&et.stateNode.containerInfo===pt.containerInfo&&et.stateNode.implementation===pt.implementation){C(ht,et.sibling),et=q(et,pt.children||[]),et.return=ht,ht=et;break e}else{C(ht,et);break}else p(ht,et);et=et.sibling}et=gS(pt,ht.mode,or),et.return=ht,ht=et}return me(ht);case re:return Hr=pt._init,_a(ht,et,Hr(pt._payload),or)}if(At(pt))return Mr(ht,et,pt,or);if(R(pt))return Or(ht,et,pt,or);no(ht,pt)}return typeof pt=="string"&&pt!==""||typeof pt=="number"?(pt=""+pt,et!==null&&et.tag===6?(C(ht,et.sibling),et=q(et,pt),et.return=ht,ht=et):(C(ht,et),et=mS(pt,ht.mode,or),et.return=ht,ht=et),me(ht)):C(ht,et)}return _a}var Ed=jg(!0),Xo=jg(!1),Th=Rc(null),jo=null,W0=null,Pg=null;function Mg(){Pg=W0=jo=null}function Fg(m){var p=Th.current;os(Th),m._currentValue=p}function Dg(m,p,C){for(;m!==null;){var O=m.alternate;if((m.childLanes&p)!==p?(m.childLanes|=p,O!==null&&(O.childLanes|=p)):O!==null&&(O.childLanes&p)!==p&&(O.childLanes|=p),m===C)break;m=m.return}}function Bc(m,p){jo=m,Pg=W0=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&p)!==0&&(ae=!0),m.firstContext=null)}function Oi(m){var p=m._currentValue;if(Pg!==m)if(m={context:m,memoizedValue:p,next:null},W0===null){if(jo===null)throw Error(r(308));W0=m,jo.dependencies={lanes:0,firstContext:m}}else W0=W0.next=m;return p}var Kl=null;function H0(m){Kl===null?Kl=[m]:Kl.push(m)}function Ch(m,p,C,O){var q=p.interleaved;return q===null?(C.next=C,H0(p)):(C.next=q.next,q.next=C),p.interleaved=C,Po(m,O)}function Po(m,p){m.lanes|=p;var C=m.alternate;for(C!==null&&(C.lanes|=p),C=m,m=m.return;m!==null;)m.childLanes|=p,C=m.alternate,C!==null&&(C.childLanes|=p),C=m,m=m.return;return C.tag===3?C.stateNode:null}var Yl=!1;function Eh(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Og(m,p){m=m.updateQueue,p.updateQueue===m&&(p.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Xl(m,p){return{eventTime:m,lane:p,tag:0,payload:null,callback:null,next:null}}function Jl(m,p,C){var O=m.updateQueue;if(O===null)return null;if(O=O.shared,(On&2)!==0){var q=O.pending;return q===null?p.next=p:(p.next=q.next,q.next=p),O.pending=p,Po(m,C)}return q=O.interleaved,q===null?(p.next=p,H0(O)):(p.next=q.next,q.next=p),O.interleaved=p,Po(m,C)}function Ig(m,p,C){if(p=p.updateQueue,p!==null&&(p=p.shared,(C&4194240)!==0)){var O=p.lanes;O&=m.pendingLanes,C|=O,p.lanes=C,ci(m,C)}}function Nh(m,p){var C=m.updateQueue,O=m.alternate;if(O!==null&&(O=O.updateQueue,C===O)){var q=null,te=null;if(C=C.firstBaseUpdate,C!==null){do{var me={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};te===null?q=te=me:te=te.next=me,C=C.next}while(C!==null);te===null?q=te=p:te=te.next=p}else q=te=p;C={baseState:O.baseState,firstBaseUpdate:q,lastBaseUpdate:te,shared:O.shared,effects:O.effects},m.updateQueue=C;return}m=C.lastBaseUpdate,m===null?C.firstBaseUpdate=p:m.next=p,C.lastBaseUpdate=p}function G0(m,p,C,O){var q=m.updateQueue;Yl=!1;var te=q.firstBaseUpdate,me=q.lastBaseUpdate,De=q.shared.pending;if(De!==null){q.shared.pending=null;var Ge=De,St=Ge.next;Ge.next=null,me===null?te=St:me.next=St,me=Ge;var Yt=m.alternate;Yt!==null&&(Yt=Yt.updateQueue,De=Yt.lastBaseUpdate,De!==me&&(De===null?Yt.firstBaseUpdate=St:De.next=St,Yt.lastBaseUpdate=Ge))}if(te!==null){var Zt=q.baseState;me=0,Yt=St=Ge=null,De=te;do{var qt=De.lane,_r=De.eventTime;if((O&qt)===qt){Yt!==null&&(Yt=Yt.next={eventTime:_r,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var Mr=m,Or=De;switch(qt=p,_r=C,Or.tag){case 1:if(Mr=Or.payload,typeof Mr=="function"){Zt=Mr.call(_r,Zt,qt);break e}Zt=Mr;break e;case 3:Mr.flags=Mr.flags&-65537|128;case 0:if(Mr=Or.payload,qt=typeof Mr=="function"?Mr.call(_r,Zt,qt):Mr,qt==null)break e;Zt=H({},Zt,qt);break e;case 2:Yl=!0}}De.callback!==null&&De.lane!==0&&(m.flags|=64,qt=q.effects,qt===null?q.effects=[De]:qt.push(De))}else _r={eventTime:_r,lane:qt,tag:De.tag,payload:De.payload,callback:De.callback,next:null},Yt===null?(St=Yt=_r,Ge=Zt):Yt=Yt.next=_r,me|=qt;if(De=De.next,De===null){if(De=q.shared.pending,De===null)break;qt=De,De=qt.next,qt.next=null,q.lastBaseUpdate=qt,q.shared.pending=null}}while(!0);if(Yt===null&&(Ge=Zt),q.baseState=Ge,q.firstBaseUpdate=St,q.lastBaseUpdate=Yt,p=q.shared.interleaved,p!==null){q=p;do me|=q.lane,q=q.next;while(q!==p)}else te===null&&(q.shared.lanes=0);Ph|=me,m.lanes=me,m.memoizedState=Zt}}function Fs(m,p,C){if(m=p.effects,p.effects=null,m!==null)for(p=0;p<m.length;p++){var O=m[p],q=O.callback;if(q!==null){if(O.callback=null,O=C,typeof q!="function")throw Error(r(191,q));q.call(O)}}}var fn={},Qn=Rc(fn),vs=Rc(fn),Us=Rc(fn);function va(m){if(m===fn)throw Error(r(174));return m}function Cu(m,p){switch(Jn(Us,p),Jn(vs,m),Jn(Qn,fn),m=p.nodeType,m){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:We(null,"");break;default:m=m===8?p.parentNode:p,p=m.namespaceURI||null,m=m.tagName,p=We(p,m)}os(Qn),Jn(Qn,p)}function ws(){os(Qn),os(vs),os(Us)}function V0(m){va(Us.current);var p=va(Qn.current),C=We(p,m.type);p!==C&&(Jn(vs,m),Jn(Qn,C))}function $c(m){vs.current===m&&(os(Qn),os(vs))}var ls=Rc(0);function q0(m){for(var p=m;p!==null;){if(p.tag===13){var C=p.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break;for(;p.sibling===null;){if(p.return===null||p.return===m)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Nd=[];function fi(){for(var m=0;m<Nd.length;m++)Nd[m]._workInProgressVersionPrimary=null;Nd.length=0}var K0=E.ReactCurrentDispatcher,Ah=E.ReactCurrentBatchConfig,Ii=0,Kn=null,Ds=null,ea=null,_l=!1,Eu=!1,Jo=0,Rg=0;function ta(){throw Error(r(321))}function jh(m,p){if(p===null)return!1;for(var C=0;C<p.length&&C<m.length;C++)if(!ro(m[C],p[C]))return!1;return!0}function Y0(m,p,C,O,q,te){if(Ii=te,Kn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,K0.current=m===null||m.memoizedState===null?Y3:ju,m=C(O,q),Eu){te=0;do{if(Eu=!1,Jo=0,25<=te)throw Error(r(301));te+=1,ea=Ds=null,p.updateQueue=null,K0.current=Ug,m=C(O,q)}while(Eu)}if(K0.current=Z0,p=Ds!==null&&Ds.next!==null,Ii=0,ea=Ds=Kn=null,_l=!1,p)throw Error(r(300));return m}function X0(){var m=Jo!==0;return Jo=0,m}function hs(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ea===null?Kn.memoizedState=ea=m:ea=ea.next=m,ea}function wa(){if(Ds===null){var m=Kn.alternate;m=m!==null?m.memoizedState:null}else m=Ds.next;var p=ea===null?Kn.memoizedState:ea.next;if(p!==null)ea=p,Ds=m;else{if(m===null)throw Error(r(310));Ds=m,m={memoizedState:Ds.memoizedState,baseState:Ds.baseState,baseQueue:Ds.baseQueue,queue:Ds.queue,next:null},ea===null?Kn.memoizedState=ea=m:ea=ea.next=m}return ea}function hi(m,p){return typeof p=="function"?p(m):p}function mi(m){var p=wa(),C=p.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=m;var O=Ds,q=O.baseQueue,te=C.pending;if(te!==null){if(q!==null){var me=q.next;q.next=te.next,te.next=me}O.baseQueue=q=te,C.pending=null}if(q!==null){te=q.next,O=O.baseState;var De=me=null,Ge=null,St=te;do{var Yt=St.lane;if((Ii&Yt)===Yt)Ge!==null&&(Ge=Ge.next={lane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),O=St.hasEagerState?St.eagerState:m(O,St.action);else{var Zt={lane:Yt,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null};Ge===null?(De=Ge=Zt,me=O):Ge=Ge.next=Zt,Kn.lanes|=Yt,Ph|=Yt}St=St.next}while(St!==null&&St!==te);Ge===null?me=O:Ge.next=De,ro(O,p.memoizedState)||(ae=!0),p.memoizedState=O,p.baseState=me,p.baseQueue=Ge,C.lastRenderedState=O}if(m=C.interleaved,m!==null){q=m;do te=q.lane,Kn.lanes|=te,Ph|=te,q=q.next;while(q!==m)}else q===null&&(C.lanes=0);return[p.memoizedState,C.dispatch]}function Lg(m){var p=wa(),C=p.queue;if(C===null)throw Error(r(311));C.lastRenderedReducer=m;var O=C.dispatch,q=C.pending,te=p.memoizedState;if(q!==null){C.pending=null;var me=q=q.next;do te=m(te,me.action),me=me.next;while(me!==q);ro(te,p.memoizedState)||(ae=!0),p.memoizedState=te,p.baseQueue===null&&(p.baseState=te),C.lastRenderedState=te}return[te,O]}function Bg(){}function $g(m,p){var C=Kn,O=wa(),q=p(),te=!ro(O.memoizedState,q);if(te&&(O.memoizedState=q,ae=!0),O=O.queue,fx(cx.bind(null,C,O,m),[m]),O.getSnapshot!==p||te||ea!==null&&ea.memoizedState.tag&1){if(C.flags|=2048,J0(9,zc.bind(null,C,O,q,p),void 0,null),pi===null)throw Error(r(349));(Ii&30)!==0||uw(C,p,q)}return q}function uw(m,p,C){m.flags|=16384,m={getSnapshot:p,value:C},p=Kn.updateQueue,p===null?(p={lastEffect:null,stores:null},Kn.updateQueue=p,p.stores=[m]):(C=p.stores,C===null?p.stores=[m]:C.push(m))}function zc(m,p,C,O){p.value=C,p.getSnapshot=O,ux(p)&&zg(m)}function cx(m,p,C){return C(function(){ux(p)&&zg(m)})}function ux(m){var p=m.getSnapshot;m=m.value;try{var C=p();return!ro(m,C)}catch{return!0}}function zg(m){var p=Po(m,1);p!==null&&Gc(p,m,1,-1)}function Nu(m){var p=hs();return typeof m=="function"&&(m=m()),p.memoizedState=p.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:m},p.queue=m,m=m.dispatch=pw.bind(null,Kn,m),[p.memoizedState,m]}function J0(m,p,C,O){return m={tag:m,create:p,destroy:C,deps:O,next:null},p=Kn.updateQueue,p===null?(p={lastEffect:null,stores:null},Kn.updateQueue=p,p.lastEffect=m.next=m):(C=p.lastEffect,C===null?p.lastEffect=m.next=m:(O=C.next,C.next=m,m.next=O,p.lastEffect=m)),m}function dx(){return wa().memoizedState}function Q0(m,p,C,O){var q=hs();Kn.flags|=m,q.memoizedState=J0(1|p,C,void 0,O===void 0?null:O)}function Ad(m,p,C,O){var q=wa();O=O===void 0?null:O;var te=void 0;if(Ds!==null){var me=Ds.memoizedState;if(te=me.destroy,O!==null&&jh(O,me.deps)){q.memoizedState=J0(p,C,te,O);return}}Kn.flags|=m,q.memoizedState=J0(1|p,C,te,O)}function dw(m,p){return Q0(8390656,8,m,p)}function fx(m,p){return Ad(2048,8,m,p)}function hx(m,p){return Ad(4,2,m,p)}function mx(m,p){return Ad(4,4,m,p)}function Au(m,p){if(typeof p=="function")return m=m(),p(m),function(){p(null)};if(p!=null)return m=m(),p.current=m,function(){p.current=null}}function fw(m,p,C){return C=C!=null?C.concat([m]):null,Ad(4,4,Au.bind(null,p,m),C)}function Uc(){}function gx(m,p){var C=wa();p=p===void 0?null:p;var O=C.memoizedState;return O!==null&&p!==null&&jh(p,O[1])?O[0]:(C.memoizedState=[m,p],m)}function ms(m,p){var C=wa();p=p===void 0?null:p;var O=C.memoizedState;return O!==null&&p!==null&&jh(p,O[1])?O[0]:(m=m(),C.memoizedState=[m,p],m)}function hw(m,p,C){return(Ii&21)===0?(m.baseState&&(m.baseState=!1,ae=!0),m.memoizedState=C):(ro(C,p)||(C=Xn(),Kn.lanes|=C,Ph|=C,m.baseState=!0),p)}function mw(m,p){var C=on;on=C!==0&&4>C?C:4,m(!0);var O=Ah.transition;Ah.transition={};try{m(!1),p()}finally{on=C,Ah.transition=O}}function gw(){return wa().memoizedState}function K3(m,p,C){var O=of(m);if(C={lane:O,action:C,hasEagerState:!1,eagerState:null,next:null},px(m))xw(p,C);else if(C=Ch(m,p,C,O),C!==null){var q=Fo();Gc(C,m,O,q),Mo(C,p,O)}}function pw(m,p,C){var O=of(m),q={lane:O,action:C,hasEagerState:!1,eagerState:null,next:null};if(px(m))xw(p,q);else{var te=m.alternate;if(m.lanes===0&&(te===null||te.lanes===0)&&(te=p.lastRenderedReducer,te!==null))try{var me=p.lastRenderedState,De=te(me,C);if(q.hasEagerState=!0,q.eagerState=De,ro(De,me)){var Ge=p.interleaved;Ge===null?(q.next=q,H0(p)):(q.next=Ge.next,Ge.next=q),p.interleaved=q;return}}catch{}finally{}C=Ch(m,p,q,O),C!==null&&(q=Fo(),Gc(C,m,O,q),Mo(C,p,O))}}function px(m){var p=m.alternate;return m===Kn||p!==null&&p===Kn}function xw(m,p){Eu=_l=!0;var C=m.pending;C===null?p.next=p:(p.next=C.next,C.next=p),m.pending=p}function Mo(m,p,C){if((C&4194240)!==0){var O=p.lanes;O&=m.pendingLanes,C|=O,p.lanes=C,ci(m,C)}}var Z0={readContext:Oi,useCallback:ta,useContext:ta,useEffect:ta,useImperativeHandle:ta,useInsertionEffect:ta,useLayoutEffect:ta,useMemo:ta,useReducer:ta,useRef:ta,useState:ta,useDebugValue:ta,useDeferredValue:ta,useTransition:ta,useMutableSource:ta,useSyncExternalStore:ta,useId:ta,unstable_isNewReconciler:!1},Y3={readContext:Oi,useCallback:function(m,p){return hs().memoizedState=[m,p===void 0?null:p],m},useContext:Oi,useEffect:dw,useImperativeHandle:function(m,p,C){return C=C!=null?C.concat([m]):null,Q0(4194308,4,Au.bind(null,p,m),C)},useLayoutEffect:function(m,p){return Q0(4194308,4,m,p)},useInsertionEffect:function(m,p){return Q0(4,2,m,p)},useMemo:function(m,p){var C=hs();return p=p===void 0?null:p,m=m(),C.memoizedState=[m,p],m},useReducer:function(m,p,C){var O=hs();return p=C!==void 0?C(p):p,O.memoizedState=O.baseState=p,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:p},O.queue=m,m=m.dispatch=K3.bind(null,Kn,m),[O.memoizedState,m]},useRef:function(m){var p=hs();return m={current:m},p.memoizedState=m},useState:Nu,useDebugValue:Uc,useDeferredValue:function(m){return hs().memoizedState=m},useTransition:function(){var m=Nu(!1),p=m[0];return m=mw.bind(null,m[1]),hs().memoizedState=m,[p,m]},useMutableSource:function(){},useSyncExternalStore:function(m,p,C){var O=Kn,q=hs();if(Gn){if(C===void 0)throw Error(r(407));C=C()}else{if(C=p(),pi===null)throw Error(r(349));(Ii&30)!==0||uw(O,p,C)}q.memoizedState=C;var te={value:C,getSnapshot:p};return q.queue=te,dw(cx.bind(null,O,te,m),[m]),O.flags|=2048,J0(9,zc.bind(null,O,te,C,p),void 0,null),C},useId:function(){var m=hs(),p=pi.identifierPrefix;if(Gn){var C=ys,O=Eo;C=(O&~(1<<32-Fr(O)-1)).toString(32)+C,p=":"+p+"R"+C,C=Jo++,0<C&&(p+="H"+C.toString(32)),p+=":"}else C=Rg++,p=":"+p+"r"+C.toString(32)+":";return m.memoizedState=p},unstable_isNewReconciler:!1},ju={readContext:Oi,useCallback:gx,useContext:Oi,useEffect:fx,useImperativeHandle:fw,useInsertionEffect:hx,useLayoutEffect:mx,useMemo:ms,useReducer:mi,useRef:dx,useState:function(){return mi(hi)},useDebugValue:Uc,useDeferredValue:function(m){var p=wa();return hw(p,Ds.memoizedState,m)},useTransition:function(){var m=mi(hi)[0],p=wa().memoizedState;return[m,p]},useMutableSource:Bg,useSyncExternalStore:$g,useId:gw,unstable_isNewReconciler:!1},Ug={readContext:Oi,useCallback:gx,useContext:Oi,useEffect:fx,useImperativeHandle:fw,useInsertionEffect:hx,useLayoutEffect:mx,useMemo:ms,useReducer:Lg,useRef:dx,useState:function(){return Lg(hi)},useDebugValue:Uc,useDeferredValue:function(m){var p=wa();return Ds===null?p.memoizedState=m:hw(p,Ds.memoizedState,m)},useTransition:function(){var m=Lg(hi)[0],p=wa().memoizedState;return[m,p]},useMutableSource:Bg,useSyncExternalStore:$g,useId:gw,unstable_isNewReconciler:!1};function Ya(m,p){if(m&&m.defaultProps){p=H({},p),m=m.defaultProps;for(var C in m)p[C]===void 0&&(p[C]=m[C]);return p}return p}function ef(m,p,C,O){p=m.memoizedState,C=C(O,p),C=C==null?p:H({},p,C),m.memoizedState=C,m.lanes===0&&(m.updateQueue.baseState=C)}var tf={isMounted:function(m){return(m=m._reactInternals)?Ce(m)===m:!1},enqueueSetState:function(m,p,C){m=m._reactInternals;var O=Fo(),q=of(m),te=Xl(O,q);te.payload=p,C!=null&&(te.callback=C),p=Jl(m,te,q),p!==null&&(Gc(p,m,q,O),Ig(p,m,q))},enqueueReplaceState:function(m,p,C){m=m._reactInternals;var O=Fo(),q=of(m),te=Xl(O,q);te.tag=1,te.payload=p,C!=null&&(te.callback=C),p=Jl(m,te,q),p!==null&&(Gc(p,m,q,O),Ig(p,m,q))},enqueueForceUpdate:function(m,p){m=m._reactInternals;var C=Fo(),O=of(m),q=Xl(C,O);q.tag=2,p!=null&&(q.callback=p),p=Jl(m,q,O),p!==null&&(Gc(p,m,O,C),Ig(p,m,O))}};function Wg(m,p,C,O,q,te,me){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(O,te,me):p.prototype&&p.prototype.isPureReactComponent?!fd(C,O)||!fd(q,te):!0}function yw(m,p,C){var O=!1,q=Vl,te=p.contextType;return typeof te=="object"&&te!==null?te=Oi(te):(q=di(p)?bu:Ka.current,O=p.contextTypes,te=(O=O!=null)?bd(m,q):Vl),p=new p(C,te),m.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=tf,m.stateNode=p,p._reactInternals=m,O&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=q,m.__reactInternalMemoizedMaskedChildContext=te),p}function xx(m,p,C,O){m=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(C,O),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(C,O),p.state!==m&&tf.enqueueReplaceState(p,p.state,null)}function Hg(m,p,C,O){var q=m.stateNode;q.props=C,q.state=m.memoizedState,q.refs={},Eh(m);var te=p.contextType;typeof te=="object"&&te!==null?q.context=Oi(te):(te=di(p)?bu:Ka.current,q.context=bd(m,te)),q.state=m.memoizedState,te=p.getDerivedStateFromProps,typeof te=="function"&&(ef(m,p,te,C),q.state=m.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(p=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),p!==q.state&&tf.enqueueReplaceState(q,q.state,null),G0(m,C,q,O),q.state=m.memoizedState),typeof q.componentDidMount=="function"&&(m.flags|=4194308)}function jd(m,p){try{var C="",O=p;do C+=ee(O),O=O.return;while(O);var q=C}catch(te){q=`
Error generating stack: `+te.message+`
`+te.stack}return{value:m,source:p,stack:q,digest:null}}function Gg(m,p,C){return{value:m,source:null,stack:C??null,digest:p??null}}function rf(m,p){try{console.error(p.value)}catch(C){setTimeout(function(){throw C})}}var X3=typeof WeakMap=="function"?WeakMap:Map;function vw(m,p,C){C=Xl(-1,C),C.tag=3,C.payload={element:null};var O=p.value;return C.callback=function(){kw||(kw=!0,iS=O),rf(m,p)},C}function w(m,p,C){C=Xl(-1,C),C.tag=3;var O=m.type.getDerivedStateFromError;if(typeof O=="function"){var q=p.value;C.payload=function(){return O(q)},C.callback=function(){rf(m,p)}}var te=m.stateNode;return te!==null&&typeof te.componentDidCatch=="function"&&(C.callback=function(){rf(m,p),typeof O!="function"&&(sf===null?sf=new Set([this]):sf.add(this));var me=p.stack;this.componentDidCatch(p.value,{componentStack:me!==null?me:""})}),C}function S(m,p,C){var O=m.pingCache;if(O===null){O=m.pingCache=new X3;var q=new Set;O.set(p,q)}else q=O.get(p),q===void 0&&(q=new Set,O.set(p,q));q.has(C)||(q.add(C),m=aJ.bind(null,m,p,C),p.then(m,m))}function F(m){do{var p;if((p=m.tag===13)&&(p=m.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return m;m=m.return}while(m!==null);return null}function U(m,p,C,O,q){return(m.mode&1)===0?(m===p?m.flags|=65536:(m.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(p=Xl(-1,1),p.tag=2,Jl(C,p,1))),C.lanes|=1),m):(m.flags|=65536,m.lanes=q,m)}var Y=E.ReactCurrentOwner,ae=!1;function Se(m,p,C,O){p.child=m===null?Xo(p,null,C,O):Ed(p,m.child,C,O)}function st(m,p,C,O,q){C=C.render;var te=p.ref;return Bc(p,q),O=Y0(m,p,C,O,te,q),C=X0(),m!==null&&!ae?(p.updateQueue=m.updateQueue,p.flags&=-2053,m.lanes&=~q,gi(m,p,q)):(Gn&&C&&z0(p),p.flags|=1,Se(m,p,O,q),p.child)}function Tt(m,p,C,O,q){if(m===null){var te=C.type;return typeof te=="function"&&!hS(te)&&te.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(p.tag=15,p.type=te,ar(m,p,te,O,q)):(m=jw(C.type,null,O,p,p.mode,q),m.ref=p.ref,m.return=p,p.child=m)}if(te=m.child,(m.lanes&q)===0){var me=te.memoizedProps;if(C=C.compare,C=C!==null?C:fd,C(me,O)&&m.ref===p.ref)return gi(m,p,q)}return p.flags|=1,m=cf(te,O),m.ref=p.ref,m.return=p,p.child=m}function ar(m,p,C,O,q){if(m!==null){var te=m.memoizedProps;if(fd(te,O)&&m.ref===p.ref)if(ae=!1,p.pendingProps=O=te,(m.lanes&q)!==0)(m.flags&131072)!==0&&(ae=!0);else return p.lanes=m.lanes,gi(m,p,q)}return gr(m,p,C,O,q)}function Er(m,p,C){var O=p.pendingProps,q=O.children,te=m!==null?m.memoizedState:null;if(O.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jn(qg,Sl),Sl|=C;else{if((C&1073741824)===0)return m=te!==null?te.baseLanes|C:C,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:m,cachePool:null,transitions:null},p.updateQueue=null,Jn(qg,Sl),Sl|=m,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},O=te!==null?te.baseLanes:C,Jn(qg,Sl),Sl|=O}else te!==null?(O=te.baseLanes|C,p.memoizedState=null):O=C,Jn(qg,Sl),Sl|=O;return Se(m,p,q,C),p.child}function ln(m,p){var C=p.ref;(m===null&&C!==null||m!==null&&m.ref!==C)&&(p.flags|=512,p.flags|=2097152)}function gr(m,p,C,O,q){var te=di(C)?bu:Ka.current;return te=bd(p,te),Bc(p,q),C=Y0(m,p,C,O,te,q),O=X0(),m!==null&&!ae?(p.updateQueue=m.updateQueue,p.flags&=-2053,m.lanes&=~q,gi(m,p,q)):(Gn&&O&&z0(p),p.flags|=1,Se(m,p,C,q),p.child)}function cs(m,p,C,O,q){if(di(C)){var te=!0;_d(p)}else te=!1;if(Bc(p,q),p.stateNode===null)En(m,p),yw(p,C,O),Hg(p,C,O,q),O=!0;else if(m===null){var me=p.stateNode,De=p.memoizedProps;me.props=De;var Ge=me.context,St=C.contextType;typeof St=="object"&&St!==null?St=Oi(St):(St=di(C)?bu:Ka.current,St=bd(p,St));var Yt=C.getDerivedStateFromProps,Zt=typeof Yt=="function"||typeof me.getSnapshotBeforeUpdate=="function";Zt||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(De!==O||Ge!==St)&&xx(p,me,O,St),Yl=!1;var qt=p.memoizedState;me.state=qt,G0(p,O,me,q),Ge=p.memoizedState,De!==O||qt!==Ge||ui.current||Yl?(typeof Yt=="function"&&(ef(p,C,Yt,O),Ge=p.memoizedState),(De=Yl||Wg(p,C,De,O,qt,Ge,St))?(Zt||typeof me.UNSAFE_componentWillMount!="function"&&typeof me.componentWillMount!="function"||(typeof me.componentWillMount=="function"&&me.componentWillMount(),typeof me.UNSAFE_componentWillMount=="function"&&me.UNSAFE_componentWillMount()),typeof me.componentDidMount=="function"&&(p.flags|=4194308)):(typeof me.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=O,p.memoizedState=Ge),me.props=O,me.state=Ge,me.context=St,O=De):(typeof me.componentDidMount=="function"&&(p.flags|=4194308),O=!1)}else{me=p.stateNode,Og(m,p),De=p.memoizedProps,St=p.type===p.elementType?De:Ya(p.type,De),me.props=St,Zt=p.pendingProps,qt=me.context,Ge=C.contextType,typeof Ge=="object"&&Ge!==null?Ge=Oi(Ge):(Ge=di(C)?bu:Ka.current,Ge=bd(p,Ge));var _r=C.getDerivedStateFromProps;(Yt=typeof _r=="function"||typeof me.getSnapshotBeforeUpdate=="function")||typeof me.UNSAFE_componentWillReceiveProps!="function"&&typeof me.componentWillReceiveProps!="function"||(De!==Zt||qt!==Ge)&&xx(p,me,O,Ge),Yl=!1,qt=p.memoizedState,me.state=qt,G0(p,O,me,q);var Mr=p.memoizedState;De!==Zt||qt!==Mr||ui.current||Yl?(typeof _r=="function"&&(ef(p,C,_r,O),Mr=p.memoizedState),(St=Yl||Wg(p,C,St,O,qt,Mr,Ge)||!1)?(Yt||typeof me.UNSAFE_componentWillUpdate!="function"&&typeof me.componentWillUpdate!="function"||(typeof me.componentWillUpdate=="function"&&me.componentWillUpdate(O,Mr,Ge),typeof me.UNSAFE_componentWillUpdate=="function"&&me.UNSAFE_componentWillUpdate(O,Mr,Ge)),typeof me.componentDidUpdate=="function"&&(p.flags|=4),typeof me.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof me.componentDidUpdate!="function"||De===m.memoizedProps&&qt===m.memoizedState||(p.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||De===m.memoizedProps&&qt===m.memoizedState||(p.flags|=1024),p.memoizedProps=O,p.memoizedState=Mr),me.props=O,me.state=Mr,me.context=Ge,O=St):(typeof me.componentDidUpdate!="function"||De===m.memoizedProps&&qt===m.memoizedState||(p.flags|=4),typeof me.getSnapshotBeforeUpdate!="function"||De===m.memoizedProps&&qt===m.memoizedState||(p.flags|=1024),O=!1)}return Vn(m,p,C,O,te,q)}function Vn(m,p,C,O,q,te){ln(m,p);var me=(p.flags&128)!==0;if(!O&&!me)return q&&ow(p,C,!1),gi(m,p,te);O=p.stateNode,Y.current=p;var De=me&&typeof C.getDerivedStateFromError!="function"?null:O.render();return p.flags|=1,m!==null&&me?(p.child=Ed(p,m.child,null,te),p.child=Ed(p,null,De,te)):Se(m,p,De,te),p.memoizedState=O.state,q&&ow(p,C,!0),p.child}function Ri(m){var p=m.stateNode;p.pendingContext?ax(m,p.pendingContext,p.pendingContext!==p.context):p.context&&ax(m,p.context,!1),Cu(m,p.containerInfo)}function Ql(m,p,C,O,q){return Cd(),kh(q),p.flags|=256,Se(m,p,C,O),p.child}var wt={dehydrated:null,treeContext:null,retryLane:0};function it(m){return{baseLanes:m,cachePool:null,transitions:null}}function Nt(m,p,C){var O=p.pendingProps,q=ls.current,te=!1,me=(p.flags&128)!==0,De;if((De=me)||(De=m!==null&&m.memoizedState===null?!1:(q&2)!==0),De?(te=!0,p.flags&=-129):(m===null||m.memoizedState!==null)&&(q|=1),Jn(ls,q&1),m===null)return U0(p),m=p.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((p.mode&1)===0?p.lanes=1:m.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(me=O.children,m=O.fallback,te?(O=p.mode,te=p.child,me={mode:"hidden",children:me},(O&1)===0&&te!==null?(te.childLanes=0,te.pendingProps=me):te=Pw(me,O,0,null),m=Oh(m,O,C,null),te.return=p,m.return=p,te.sibling=m,p.child=te,p.child.memoizedState=it(C),p.memoizedState=wt,m):xr(p,me));if(q=m.memoizedState,q!==null&&(De=q.dehydrated,De!==null))return yn(m,p,me,O,De,q,C);if(te){te=O.fallback,me=p.mode,q=m.child,De=q.sibling;var Ge={mode:"hidden",children:O.children};return(me&1)===0&&p.child!==q?(O=p.child,O.childLanes=0,O.pendingProps=Ge,p.deletions=null):(O=cf(q,Ge),O.subtreeFlags=q.subtreeFlags&14680064),De!==null?te=cf(De,te):(te=Oh(te,me,C,null),te.flags|=2),te.return=p,O.return=p,O.sibling=te,p.child=O,O=te,te=p.child,me=m.child.memoizedState,me=me===null?it(C):{baseLanes:me.baseLanes|C,cachePool:null,transitions:me.transitions},te.memoizedState=me,te.childLanes=m.childLanes&~C,p.memoizedState=wt,O}return te=m.child,m=te.sibling,O=cf(te,{mode:"visible",children:O.children}),(p.mode&1)===0&&(O.lanes=C),O.return=p,O.sibling=null,m!==null&&(C=p.deletions,C===null?(p.deletions=[m],p.flags|=16):C.push(m)),p.child=O,p.memoizedState=null,O}function xr(m,p){return p=Pw({mode:"visible",children:p},m.mode,0,null),p.return=m,m.child=p}function $r(m,p,C,O){return O!==null&&kh(O),Ed(p,m.child,null,C),m=xr(p,p.pendingProps.children),m.flags|=2,p.memoizedState=null,m}function yn(m,p,C,O,q,te,me){if(C)return p.flags&256?(p.flags&=-257,O=Gg(Error(r(422))),$r(m,p,me,O)):p.memoizedState!==null?(p.child=m.child,p.flags|=128,null):(te=O.fallback,q=p.mode,O=Pw({mode:"visible",children:O.children},q,0,null),te=Oh(te,q,me,null),te.flags|=2,O.return=p,te.return=p,O.sibling=te,p.child=O,(p.mode&1)!==0&&Ed(p,m.child,null,me),p.child.memoizedState=it(me),p.memoizedState=wt,te);if((p.mode&1)===0)return $r(m,p,me,null);if(q.data==="$!"){if(O=q.nextSibling&&q.nextSibling.dataset,O)var De=O.dgst;return O=De,te=Error(r(419)),O=Gg(te,O,void 0),$r(m,p,me,O)}if(De=(me&m.childLanes)!==0,ae||De){if(O=pi,O!==null){switch(me&-me){case 4:q=2;break;case 16:q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:q=32;break;case 536870912:q=268435456;break;default:q=0}q=(q&(O.suspendedLanes|me))!==0?0:q,q!==0&&q!==te.retryLane&&(te.retryLane=q,Po(m,q),Gc(O,m,q,-1))}return fS(),O=Gg(Error(r(421))),$r(m,p,me,O)}return q.data==="$?"?(p.flags|=128,p.child=m.child,p=iJ.bind(null,m),q._reactRetry=p,null):(m=te.treeContext,mr=Hl(q.nextSibling),No=p,Gn=!0,Ao=null,m!==null&&(Fi[Di++]=Eo,Fi[Di++]=ys,Fi[Di++]=Tu,Eo=m.id,ys=m.overflow,Tu=p),p=xr(p,O.children),p.flags|=4096,p)}function cn(m,p,C){m.lanes|=p;var O=m.alternate;O!==null&&(O.lanes|=p),Dg(m.return,p,C)}function jn(m,p,C,O,q){var te=m.memoizedState;te===null?m.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:O,tail:C,tailMode:q}:(te.isBackwards=p,te.rendering=null,te.renderingStartTime=0,te.last=O,te.tail=C,te.tailMode=q)}function ba(m,p,C){var O=p.pendingProps,q=O.revealOrder,te=O.tail;if(Se(m,p,O.children,C),O=ls.current,(O&2)!==0)O=O&1|2,p.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=p.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&cn(m,C,p);else if(m.tag===19)cn(m,C,p);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break e;for(;m.sibling===null;){if(m.return===null||m.return===p)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}O&=1}if(Jn(ls,O),(p.mode&1)===0)p.memoizedState=null;else switch(q){case"forwards":for(C=p.child,q=null;C!==null;)m=C.alternate,m!==null&&q0(m)===null&&(q=C),C=C.sibling;C=q,C===null?(q=p.child,p.child=null):(q=C.sibling,C.sibling=null),jn(p,!1,q,C,te);break;case"backwards":for(C=null,q=p.child,p.child=null;q!==null;){if(m=q.alternate,m!==null&&q0(m)===null){p.child=q;break}m=q.sibling,q.sibling=C,C=q,q=m}jn(p,!0,C,null,te);break;case"together":jn(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function En(m,p){(p.mode&1)===0&&m!==null&&(m.alternate=null,p.alternate=null,p.flags|=2)}function gi(m,p,C){if(m!==null&&(p.dependencies=m.dependencies),Ph|=p.lanes,(C&p.childLanes)===0)return null;if(m!==null&&p.child!==m.child)throw Error(r(153));if(p.child!==null){for(m=p.child,C=cf(m,m.pendingProps),p.child=C,C.return=p;m.sibling!==null;)m=m.sibling,C=C.sibling=cf(m,m.pendingProps),C.return=p;C.sibling=null}return p.child}function J3(m,p,C){switch(p.tag){case 3:Ri(p),Cd();break;case 5:V0(p);break;case 1:di(p.type)&&_d(p);break;case 4:Cu(p,p.stateNode.containerInfo);break;case 10:var O=p.type._context,q=p.memoizedProps.value;Jn(Th,O._currentValue),O._currentValue=q;break;case 13:if(O=p.memoizedState,O!==null)return O.dehydrated!==null?(Jn(ls,ls.current&1),p.flags|=128,null):(C&p.child.childLanes)!==0?Nt(m,p,C):(Jn(ls,ls.current&1),m=gi(m,p,C),m!==null?m.sibling:null);Jn(ls,ls.current&1);break;case 19:if(O=(C&p.childLanes)!==0,(m.flags&128)!==0){if(O)return ba(m,p,C);p.flags|=128}if(q=p.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),Jn(ls,ls.current),O)break;return null;case 22:case 23:return p.lanes=0,Er(m,p,C)}return gi(m,p,C)}var t9,Q3,r9,n9;t9=function(m,p){for(var C=p.child;C!==null;){if(C.tag===5||C.tag===6)m.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===p)break;for(;C.sibling===null;){if(C.return===null||C.return===p)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Q3=function(){},r9=function(m,p,C,O){var q=m.memoizedProps;if(q!==O){m=p.stateNode,va(Qn.current);var te=null;switch(C){case"input":q=Ae(m,q),O=Ae(m,O),te=[];break;case"select":q=H({},q,{value:void 0}),O=H({},O,{value:void 0}),te=[];break;case"textarea":q=ct(m,q),O=ct(m,O),te=[];break;default:typeof q.onClick!="function"&&typeof O.onClick=="function"&&(m.onclick=yd)}br(C,O);var me;C=null;for(St in q)if(!O.hasOwnProperty(St)&&q.hasOwnProperty(St)&&q[St]!=null)if(St==="style"){var De=q[St];for(me in De)De.hasOwnProperty(me)&&(C||(C={}),C[me]="")}else St!=="dangerouslySetInnerHTML"&&St!=="children"&&St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&St!=="autoFocus"&&(s.hasOwnProperty(St)?te||(te=[]):(te=te||[]).push(St,null));for(St in O){var Ge=O[St];if(De=q?.[St],O.hasOwnProperty(St)&&Ge!==De&&(Ge!=null||De!=null))if(St==="style")if(De){for(me in De)!De.hasOwnProperty(me)||Ge&&Ge.hasOwnProperty(me)||(C||(C={}),C[me]="");for(me in Ge)Ge.hasOwnProperty(me)&&De[me]!==Ge[me]&&(C||(C={}),C[me]=Ge[me])}else C||(te||(te=[]),te.push(St,C)),C=Ge;else St==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,De=De?De.__html:void 0,Ge!=null&&De!==Ge&&(te=te||[]).push(St,Ge)):St==="children"?typeof Ge!="string"&&typeof Ge!="number"||(te=te||[]).push(St,""+Ge):St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&(s.hasOwnProperty(St)?(Ge!=null&&St==="onScroll"&&is("scroll",m),te||De===Ge||(te=[])):(te=te||[]).push(St,Ge))}C&&(te=te||[]).push("style",C);var St=te;(p.updateQueue=St)&&(p.flags|=4)}},n9=function(m,p,C,O){C!==O&&(p.flags|=4)};function yx(m,p){if(!Gn)switch(m.tailMode){case"hidden":p=m.tail;for(var C=null;p!==null;)p.alternate!==null&&(C=p),p=p.sibling;C===null?m.tail=null:C.sibling=null;break;case"collapsed":C=m.tail;for(var O=null;C!==null;)C.alternate!==null&&(O=C),C=C.sibling;O===null?p||m.tail===null?m.tail=null:m.tail.sibling=null:O.sibling=null}}function so(m){var p=m.alternate!==null&&m.alternate.child===m.child,C=0,O=0;if(p)for(var q=m.child;q!==null;)C|=q.lanes|q.childLanes,O|=q.subtreeFlags&14680064,O|=q.flags&14680064,q.return=m,q=q.sibling;else for(q=m.child;q!==null;)C|=q.lanes|q.childLanes,O|=q.subtreeFlags,O|=q.flags,q.return=m,q=q.sibling;return m.subtreeFlags|=O,m.childLanes=C,p}function YX(m,p,C){var O=p.pendingProps;switch(Fa(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return so(p),null;case 1:return di(p.type)&&B0(),so(p),null;case 3:return O=p.stateNode,ws(),os(ui),os(Ka),fi(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(m===null||m.child===null)&&(Sh(p)?p.flags|=4:m===null||m.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,Ao!==null&&(cS(Ao),Ao=null))),Q3(m,p),so(p),null;case 5:$c(p);var q=va(Us.current);if(C=p.type,m!==null&&p.stateNode!=null)r9(m,p,C,O,q),m.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!O){if(p.stateNode===null)throw Error(r(166));return so(p),null}if(m=va(Qn.current),Sh(p)){O=p.stateNode,C=p.type;var te=p.memoizedProps;switch(O[Yo]=p,O[wh]=te,m=(p.mode&1)!==0,C){case"dialog":is("cancel",O),is("close",O);break;case"iframe":case"object":case"embed":is("load",O);break;case"video":case"audio":for(q=0;q<yu.length;q++)is(yu[q],O);break;case"source":is("error",O);break;case"img":case"image":case"link":is("error",O),is("load",O);break;case"details":is("toggle",O);break;case"input":Me(O,te),is("invalid",O);break;case"select":O._wrapperState={wasMultiple:!!te.multiple},is("invalid",O);break;case"textarea":bt(O,te),is("invalid",O)}br(C,te),q=null;for(var me in te)if(te.hasOwnProperty(me)){var De=te[me];me==="children"?typeof De=="string"?O.textContent!==De&&(te.suppressHydrationWarning!==!0&&yh(O.textContent,De,m),q=["children",De]):typeof De=="number"&&O.textContent!==""+De&&(te.suppressHydrationWarning!==!0&&yh(O.textContent,De,m),q=["children",""+De]):s.hasOwnProperty(me)&&De!=null&&me==="onScroll"&&is("scroll",O)}switch(C){case"input":Te(O),Dt(O,te,!0);break;case"textarea":Te(O),Bt(O);break;case"select":case"option":break;default:typeof te.onClick=="function"&&(O.onclick=yd)}O=q,p.updateQueue=O,O!==null&&(p.flags|=4)}else{me=q.nodeType===9?q:q.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Vt(C)),m==="http://www.w3.org/1999/xhtml"?C==="script"?(m=me.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof O.is=="string"?m=me.createElement(C,{is:O.is}):(m=me.createElement(C),C==="select"&&(me=m,O.multiple?me.multiple=!0:O.size&&(me.size=O.size))):m=me.createElementNS(m,C),m[Yo]=p,m[wh]=O,t9(m,p,!1,!1),p.stateNode=m;e:{switch(me=Dr(C,O),C){case"dialog":is("cancel",m),is("close",m),q=O;break;case"iframe":case"object":case"embed":is("load",m),q=O;break;case"video":case"audio":for(q=0;q<yu.length;q++)is(yu[q],m);q=O;break;case"source":is("error",m),q=O;break;case"img":case"image":case"link":is("error",m),is("load",m),q=O;break;case"details":is("toggle",m),q=O;break;case"input":Me(m,O),q=Ae(m,O),is("invalid",m);break;case"option":q=O;break;case"select":m._wrapperState={wasMultiple:!!O.multiple},q=H({},O,{value:void 0}),is("invalid",m);break;case"textarea":bt(m,O),q=ct(m,O),is("invalid",m);break;default:q=O}br(C,q),De=q;for(te in De)if(De.hasOwnProperty(te)){var Ge=De[te];te==="style"?Xt(m,Ge):te==="dangerouslySetInnerHTML"?(Ge=Ge?Ge.__html:void 0,Ge!=null&&tt(m,Ge)):te==="children"?typeof Ge=="string"?(C!=="textarea"||Ge!=="")&&nt(m,Ge):typeof Ge=="number"&&nt(m,""+Ge):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(s.hasOwnProperty(te)?Ge!=null&&te==="onScroll"&&is("scroll",m):Ge!=null&&b(m,te,Ge,me))}switch(C){case"input":Te(m),Dt(m,O,!1);break;case"textarea":Te(m),Bt(m);break;case"option":O.value!=null&&m.setAttribute("value",""+le(O.value));break;case"select":m.multiple=!!O.multiple,te=O.value,te!=null?vt(m,!!O.multiple,te,!1):O.defaultValue!=null&&vt(m,!!O.multiple,O.defaultValue,!0);break;default:typeof q.onClick=="function"&&(m.onclick=yd)}switch(C){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}}O&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return so(p),null;case 6:if(m&&p.stateNode!=null)n9(m,p,m.memoizedProps,O);else{if(typeof O!="string"&&p.stateNode===null)throw Error(r(166));if(C=va(Us.current),va(Qn.current),Sh(p)){if(O=p.stateNode,C=p.memoizedProps,O[Yo]=p,(te=O.nodeValue!==C)&&(m=No,m!==null))switch(m.tag){case 3:yh(O.nodeValue,C,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&yh(O.nodeValue,C,(m.mode&1)!==0)}te&&(p.flags|=4)}else O=(C.nodeType===9?C:C.ownerDocument).createTextNode(O),O[Yo]=p,p.stateNode=O}return so(p),null;case 13:if(os(ls),O=p.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Gn&&mr!==null&&(p.mode&1)!==0&&(p.flags&128)===0)ox(),Cd(),p.flags|=98560,te=!1;else if(te=Sh(p),O!==null&&O.dehydrated!==null){if(m===null){if(!te)throw Error(r(318));if(te=p.memoizedState,te=te!==null?te.dehydrated:null,!te)throw Error(r(317));te[Yo]=p}else Cd(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;so(p),te=!1}else Ao!==null&&(cS(Ao),Ao=null),te=!0;if(!te)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=C,p):(O=O!==null,O!==(m!==null&&m.memoizedState!==null)&&O&&(p.child.flags|=8192,(p.mode&1)!==0&&(m===null||(ls.current&1)!==0?Xa===0&&(Xa=3):fS())),p.updateQueue!==null&&(p.flags|=4),so(p),null);case 4:return ws(),Q3(m,p),m===null&&pd(p.stateNode.containerInfo),so(p),null;case 10:return Fg(p.type._context),so(p),null;case 17:return di(p.type)&&B0(),so(p),null;case 19:if(os(ls),te=p.memoizedState,te===null)return so(p),null;if(O=(p.flags&128)!==0,me=te.rendering,me===null)if(O)yx(te,!1);else{if(Xa!==0||m!==null&&(m.flags&128)!==0)for(m=p.child;m!==null;){if(me=q0(m),me!==null){for(p.flags|=128,yx(te,!1),O=me.updateQueue,O!==null&&(p.updateQueue=O,p.flags|=4),p.subtreeFlags=0,O=C,C=p.child;C!==null;)te=C,m=O,te.flags&=14680066,me=te.alternate,me===null?(te.childLanes=0,te.lanes=m,te.child=null,te.subtreeFlags=0,te.memoizedProps=null,te.memoizedState=null,te.updateQueue=null,te.dependencies=null,te.stateNode=null):(te.childLanes=me.childLanes,te.lanes=me.lanes,te.child=me.child,te.subtreeFlags=0,te.deletions=null,te.memoizedProps=me.memoizedProps,te.memoizedState=me.memoizedState,te.updateQueue=me.updateQueue,te.type=me.type,m=me.dependencies,te.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),C=C.sibling;return Jn(ls,ls.current&1|2),p.child}m=m.sibling}te.tail!==null&&_t()>Kg&&(p.flags|=128,O=!0,yx(te,!1),p.lanes=4194304)}else{if(!O)if(m=q0(me),m!==null){if(p.flags|=128,O=!0,C=m.updateQueue,C!==null&&(p.updateQueue=C,p.flags|=4),yx(te,!0),te.tail===null&&te.tailMode==="hidden"&&!me.alternate&&!Gn)return so(p),null}else 2*_t()-te.renderingStartTime>Kg&&C!==1073741824&&(p.flags|=128,O=!0,yx(te,!1),p.lanes=4194304);te.isBackwards?(me.sibling=p.child,p.child=me):(C=te.last,C!==null?C.sibling=me:p.child=me,te.last=me)}return te.tail!==null?(p=te.tail,te.rendering=p,te.tail=p.sibling,te.renderingStartTime=_t(),p.sibling=null,C=ls.current,Jn(ls,O?C&1|2:C&1),p):(so(p),null);case 22:case 23:return dS(),O=p.memoizedState!==null,m!==null&&m.memoizedState!==null!==O&&(p.flags|=8192),O&&(p.mode&1)!==0?(Sl&1073741824)!==0&&(so(p),p.subtreeFlags&6&&(p.flags|=8192)):so(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function XX(m,p){switch(Fa(p),p.tag){case 1:return di(p.type)&&B0(),m=p.flags,m&65536?(p.flags=m&-65537|128,p):null;case 3:return ws(),os(ui),os(Ka),fi(),m=p.flags,(m&65536)!==0&&(m&128)===0?(p.flags=m&-65537|128,p):null;case 5:return $c(p),null;case 13:if(os(ls),m=p.memoizedState,m!==null&&m.dehydrated!==null){if(p.alternate===null)throw Error(r(340));Cd()}return m=p.flags,m&65536?(p.flags=m&-65537|128,p):null;case 19:return os(ls),null;case 4:return ws(),null;case 10:return Fg(p.type._context),null;case 22:case 23:return dS(),null;case 24:return null;default:return null}}var ww=!1,ao=!1,JX=typeof WeakSet=="function"?WeakSet:Set,Nr=null;function Vg(m,p){var C=m.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(O){ra(m,p,O)}else C.current=null}function Z3(m,p,C){try{C()}catch(O){ra(m,p,O)}}var s9=!1;function QX(m,p){if(tx=ag,m=xa(),O0(m)){if("selectionStart"in m)var C={start:m.selectionStart,end:m.selectionEnd};else e:{C=(C=m.ownerDocument)&&C.defaultView||window;var O=C.getSelection&&C.getSelection();if(O&&O.rangeCount!==0){C=O.anchorNode;var q=O.anchorOffset,te=O.focusNode;O=O.focusOffset;try{C.nodeType,te.nodeType}catch{C=null;break e}var me=0,De=-1,Ge=-1,St=0,Yt=0,Zt=m,qt=null;t:for(;;){for(var _r;Zt!==C||q!==0&&Zt.nodeType!==3||(De=me+q),Zt!==te||O!==0&&Zt.nodeType!==3||(Ge=me+O),Zt.nodeType===3&&(me+=Zt.nodeValue.length),(_r=Zt.firstChild)!==null;)qt=Zt,Zt=_r;for(;;){if(Zt===m)break t;if(qt===C&&++St===q&&(De=me),qt===te&&++Yt===O&&(Ge=me),(_r=Zt.nextSibling)!==null)break;Zt=qt,qt=Zt.parentNode}Zt=_r}C=De===-1||Ge===-1?null:{start:De,end:Ge}}else C=null}C=C||{start:0,end:0}}else C=null;for(rx={focusedElem:m,selectionRange:C},ag=!1,Nr=p;Nr!==null;)if(p=Nr,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,Nr=m;else for(;Nr!==null;){p=Nr;try{var Mr=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Mr!==null){var Or=Mr.memoizedProps,_a=Mr.memoizedState,ht=p.stateNode,et=ht.getSnapshotBeforeUpdate(p.elementType===p.type?Or:Ya(p.type,Or),_a);ht.__reactInternalSnapshotBeforeUpdate=et}break;case 3:var pt=p.stateNode.containerInfo;pt.nodeType===1?pt.textContent="":pt.nodeType===9&&pt.documentElement&&pt.removeChild(pt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(or){ra(p,p.return,or)}if(m=p.sibling,m!==null){m.return=p.return,Nr=m;break}Nr=p.return}return Mr=s9,s9=!1,Mr}function vx(m,p,C){var O=p.updateQueue;if(O=O!==null?O.lastEffect:null,O!==null){var q=O=O.next;do{if((q.tag&m)===m){var te=q.destroy;q.destroy=void 0,te!==void 0&&Z3(p,C,te)}q=q.next}while(q!==O)}}function bw(m,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var C=p=p.next;do{if((C.tag&m)===m){var O=C.create;C.destroy=O()}C=C.next}while(C!==p)}}function eS(m){var p=m.ref;if(p!==null){var C=m.stateNode;switch(m.tag){case 5:m=C;break;default:m=C}typeof p=="function"?p(m):p.current=m}}function a9(m){var p=m.alternate;p!==null&&(m.alternate=null,a9(p)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(p=m.stateNode,p!==null&&(delete p[Yo],delete p[wh],delete p[Tg],delete p[aw],delete p[iw])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function i9(m){return m.tag===5||m.tag===3||m.tag===4}function o9(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||i9(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function tS(m,p,C){var O=m.tag;if(O===5||O===6)m=m.stateNode,p?C.nodeType===8?C.parentNode.insertBefore(m,p):C.insertBefore(m,p):(C.nodeType===8?(p=C.parentNode,p.insertBefore(m,C)):(p=C,p.appendChild(m)),C=C._reactRootContainer,C!=null||p.onclick!==null||(p.onclick=yd));else if(O!==4&&(m=m.child,m!==null))for(tS(m,p,C),m=m.sibling;m!==null;)tS(m,p,C),m=m.sibling}function rS(m,p,C){var O=m.tag;if(O===5||O===6)m=m.stateNode,p?C.insertBefore(m,p):C.appendChild(m);else if(O!==4&&(m=m.child,m!==null))for(rS(m,p,C),m=m.sibling;m!==null;)rS(m,p,C),m=m.sibling}var Li=null,Wc=!1;function nf(m,p,C){for(C=C.child;C!==null;)l9(m,p,C),C=C.sibling}function l9(m,p,C){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(tn,C)}catch{}switch(C.tag){case 5:ao||Vg(C,p);case 6:var O=Li,q=Wc;Li=null,nf(m,p,C),Li=O,Wc=q,Li!==null&&(Wc?(m=Li,C=C.stateNode,m.nodeType===8?m.parentNode.removeChild(C):m.removeChild(C)):Li.removeChild(C.stateNode));break;case 18:Li!==null&&(Wc?(m=Li,C=C.stateNode,m.nodeType===8?kg(m.parentNode,C):m.nodeType===1&&kg(m,C),eo(m)):kg(Li,C.stateNode));break;case 4:O=Li,q=Wc,Li=C.stateNode.containerInfo,Wc=!0,nf(m,p,C),Li=O,Wc=q;break;case 0:case 11:case 14:case 15:if(!ao&&(O=C.updateQueue,O!==null&&(O=O.lastEffect,O!==null))){q=O=O.next;do{var te=q,me=te.destroy;te=te.tag,me!==void 0&&((te&2)!==0||(te&4)!==0)&&Z3(C,p,me),q=q.next}while(q!==O)}nf(m,p,C);break;case 1:if(!ao&&(Vg(C,p),O=C.stateNode,typeof O.componentWillUnmount=="function"))try{O.props=C.memoizedProps,O.state=C.memoizedState,O.componentWillUnmount()}catch(De){ra(C,p,De)}nf(m,p,C);break;case 21:nf(m,p,C);break;case 22:C.mode&1?(ao=(O=ao)||C.memoizedState!==null,nf(m,p,C),ao=O):nf(m,p,C);break;default:nf(m,p,C)}}function c9(m){var p=m.updateQueue;if(p!==null){m.updateQueue=null;var C=m.stateNode;C===null&&(C=m.stateNode=new JX),p.forEach(function(O){var q=oJ.bind(null,m,O);C.has(O)||(C.add(O),O.then(q,q))})}}function Hc(m,p){var C=p.deletions;if(C!==null)for(var O=0;O<C.length;O++){var q=C[O];try{var te=m,me=p,De=me;e:for(;De!==null;){switch(De.tag){case 5:Li=De.stateNode,Wc=!1;break e;case 3:Li=De.stateNode.containerInfo,Wc=!0;break e;case 4:Li=De.stateNode.containerInfo,Wc=!0;break e}De=De.return}if(Li===null)throw Error(r(160));l9(te,me,q),Li=null,Wc=!1;var Ge=q.alternate;Ge!==null&&(Ge.return=null),q.return=null}catch(St){ra(q,p,St)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)u9(p,m),p=p.sibling}function u9(m,p){var C=m.alternate,O=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Hc(p,m),Pu(m),O&4){try{vx(3,m,m.return),bw(3,m)}catch(Or){ra(m,m.return,Or)}try{vx(5,m,m.return)}catch(Or){ra(m,m.return,Or)}}break;case 1:Hc(p,m),Pu(m),O&512&&C!==null&&Vg(C,C.return);break;case 5:if(Hc(p,m),Pu(m),O&512&&C!==null&&Vg(C,C.return),m.flags&32){var q=m.stateNode;try{nt(q,"")}catch(Or){ra(m,m.return,Or)}}if(O&4&&(q=m.stateNode,q!=null)){var te=m.memoizedProps,me=C!==null?C.memoizedProps:te,De=m.type,Ge=m.updateQueue;if(m.updateQueue=null,Ge!==null)try{De==="input"&&te.type==="radio"&&te.name!=null&&Je(q,te),Dr(De,me);var St=Dr(De,te);for(me=0;me<Ge.length;me+=2){var Yt=Ge[me],Zt=Ge[me+1];Yt==="style"?Xt(q,Zt):Yt==="dangerouslySetInnerHTML"?tt(q,Zt):Yt==="children"?nt(q,Zt):b(q,Yt,Zt,St)}switch(De){case"input":Ve(q,te);break;case"textarea":Ut(q,te);break;case"select":var qt=q._wrapperState.wasMultiple;q._wrapperState.wasMultiple=!!te.multiple;var _r=te.value;_r!=null?vt(q,!!te.multiple,_r,!1):qt!==!!te.multiple&&(te.defaultValue!=null?vt(q,!!te.multiple,te.defaultValue,!0):vt(q,!!te.multiple,te.multiple?[]:"",!1))}q[wh]=te}catch(Or){ra(m,m.return,Or)}}break;case 6:if(Hc(p,m),Pu(m),O&4){if(m.stateNode===null)throw Error(r(162));q=m.stateNode,te=m.memoizedProps;try{q.nodeValue=te}catch(Or){ra(m,m.return,Or)}}break;case 3:if(Hc(p,m),Pu(m),O&4&&C!==null&&C.memoizedState.isDehydrated)try{eo(p.containerInfo)}catch(Or){ra(m,m.return,Or)}break;case 4:Hc(p,m),Pu(m);break;case 13:Hc(p,m),Pu(m),q=m.child,q.flags&8192&&(te=q.memoizedState!==null,q.stateNode.isHidden=te,!te||q.alternate!==null&&q.alternate.memoizedState!==null||(aS=_t())),O&4&&c9(m);break;case 22:if(Yt=C!==null&&C.memoizedState!==null,m.mode&1?(ao=(St=ao)||Yt,Hc(p,m),ao=St):Hc(p,m),Pu(m),O&8192){if(St=m.memoizedState!==null,(m.stateNode.isHidden=St)&&!Yt&&(m.mode&1)!==0)for(Nr=m,Yt=m.child;Yt!==null;){for(Zt=Nr=Yt;Nr!==null;){switch(qt=Nr,_r=qt.child,qt.tag){case 0:case 11:case 14:case 15:vx(4,qt,qt.return);break;case 1:Vg(qt,qt.return);var Mr=qt.stateNode;if(typeof Mr.componentWillUnmount=="function"){O=qt,C=qt.return;try{p=O,Mr.props=p.memoizedProps,Mr.state=p.memoizedState,Mr.componentWillUnmount()}catch(Or){ra(O,C,Or)}}break;case 5:Vg(qt,qt.return);break;case 22:if(qt.memoizedState!==null){h9(Zt);continue}}_r!==null?(_r.return=qt,Nr=_r):h9(Zt)}Yt=Yt.sibling}e:for(Yt=null,Zt=m;;){if(Zt.tag===5){if(Yt===null){Yt=Zt;try{q=Zt.stateNode,St?(te=q.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none"):(De=Zt.stateNode,Ge=Zt.memoizedProps.style,me=Ge!=null&&Ge.hasOwnProperty("display")?Ge.display:null,De.style.display=Lt("display",me))}catch(Or){ra(m,m.return,Or)}}}else if(Zt.tag===6){if(Yt===null)try{Zt.stateNode.nodeValue=St?"":Zt.memoizedProps}catch(Or){ra(m,m.return,Or)}}else if((Zt.tag!==22&&Zt.tag!==23||Zt.memoizedState===null||Zt===m)&&Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}if(Zt===m)break e;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===m)break e;Yt===Zt&&(Yt=null),Zt=Zt.return}Yt===Zt&&(Yt=null),Zt.sibling.return=Zt.return,Zt=Zt.sibling}}break;case 19:Hc(p,m),Pu(m),O&4&&c9(m);break;case 21:break;default:Hc(p,m),Pu(m)}}function Pu(m){var p=m.flags;if(p&2){try{e:{for(var C=m.return;C!==null;){if(i9(C)){var O=C;break e}C=C.return}throw Error(r(160))}switch(O.tag){case 5:var q=O.stateNode;O.flags&32&&(nt(q,""),O.flags&=-33);var te=o9(m);rS(m,te,q);break;case 3:case 4:var me=O.stateNode.containerInfo,De=o9(m);tS(m,De,me);break;default:throw Error(r(161))}}catch(Ge){ra(m,m.return,Ge)}m.flags&=-3}p&4096&&(m.flags&=-4097)}function ZX(m,p,C){Nr=m,d9(m)}function d9(m,p,C){for(var O=(m.mode&1)!==0;Nr!==null;){var q=Nr,te=q.child;if(q.tag===22&&O){var me=q.memoizedState!==null||ww;if(!me){var De=q.alternate,Ge=De!==null&&De.memoizedState!==null||ao;De=ww;var St=ao;if(ww=me,(ao=Ge)&&!St)for(Nr=q;Nr!==null;)me=Nr,Ge=me.child,me.tag===22&&me.memoizedState!==null?m9(q):Ge!==null?(Ge.return=me,Nr=Ge):m9(q);for(;te!==null;)Nr=te,d9(te),te=te.sibling;Nr=q,ww=De,ao=St}f9(m)}else(q.subtreeFlags&8772)!==0&&te!==null?(te.return=q,Nr=te):f9(m)}}function f9(m){for(;Nr!==null;){var p=Nr;if((p.flags&8772)!==0){var C=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:ao||bw(5,p);break;case 1:var O=p.stateNode;if(p.flags&4&&!ao)if(C===null)O.componentDidMount();else{var q=p.elementType===p.type?C.memoizedProps:Ya(p.type,C.memoizedProps);O.componentDidUpdate(q,C.memoizedState,O.__reactInternalSnapshotBeforeUpdate)}var te=p.updateQueue;te!==null&&Fs(p,te,O);break;case 3:var me=p.updateQueue;if(me!==null){if(C=null,p.child!==null)switch(p.child.tag){case 5:C=p.child.stateNode;break;case 1:C=p.child.stateNode}Fs(p,me,C)}break;case 5:var De=p.stateNode;if(C===null&&p.flags&4){C=De;var Ge=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ge.autoFocus&&C.focus();break;case"img":Ge.src&&(C.src=Ge.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var St=p.alternate;if(St!==null){var Yt=St.memoizedState;if(Yt!==null){var Zt=Yt.dehydrated;Zt!==null&&eo(Zt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ao||p.flags&512&&eS(p)}catch(qt){ra(p,p.return,qt)}}if(p===m){Nr=null;break}if(C=p.sibling,C!==null){C.return=p.return,Nr=C;break}Nr=p.return}}function h9(m){for(;Nr!==null;){var p=Nr;if(p===m){Nr=null;break}var C=p.sibling;if(C!==null){C.return=p.return,Nr=C;break}Nr=p.return}}function m9(m){for(;Nr!==null;){var p=Nr;try{switch(p.tag){case 0:case 11:case 15:var C=p.return;try{bw(4,p)}catch(Ge){ra(p,C,Ge)}break;case 1:var O=p.stateNode;if(typeof O.componentDidMount=="function"){var q=p.return;try{O.componentDidMount()}catch(Ge){ra(p,q,Ge)}}var te=p.return;try{eS(p)}catch(Ge){ra(p,te,Ge)}break;case 5:var me=p.return;try{eS(p)}catch(Ge){ra(p,me,Ge)}}}catch(Ge){ra(p,p.return,Ge)}if(p===m){Nr=null;break}var De=p.sibling;if(De!==null){De.return=p.return,Nr=De;break}Nr=p.return}}var eJ=Math.ceil,_w=E.ReactCurrentDispatcher,nS=E.ReactCurrentOwner,Zl=E.ReactCurrentBatchConfig,On=0,pi=null,Da=null,Bi=0,Sl=0,qg=Rc(0),Xa=0,wx=null,Ph=0,Sw=0,sS=0,bx=null,Qo=null,aS=0,Kg=1/0,Pd=null,kw=!1,iS=null,sf=null,Tw=!1,af=null,Cw=0,_x=0,oS=null,Ew=-1,Nw=0;function Fo(){return(On&6)!==0?_t():Ew!==-1?Ew:Ew=_t()}function of(m){return(m.mode&1)===0?1:(On&2)!==0&&Bi!==0?Bi&-Bi:lx.transition!==null?(Nw===0&&(Nw=Xn()),Nw):(m=on,m!==0||(m=window.event,m=m===void 0?16:U2(m.type)),m)}function Gc(m,p,C,O){if(50<_x)throw _x=0,oS=null,Error(r(185));as(m,C,O),((On&2)===0||m!==pi)&&(m===pi&&((On&2)===0&&(Sw|=C),Xa===4&&lf(m,Bi)),Zo(m,O),C===1&&On===0&&(p.mode&1)===0&&(Kg=_t()+500,$0&&_u()))}function Zo(m,p){var C=m.callbackNode;jr(m,p);var O=be(m,m===pi?Bi:0);if(O===0)C!==null&&je(C),m.callbackNode=null,m.callbackPriority=0;else if(p=O&-O,m.callbackPriority!==p){if(C!=null&&je(C),p===1)m.tag===0?Lc(p9.bind(null,m)):_h(p9.bind(null,m)),nw(function(){(On&6)===0&&_u()}),C=null;else{switch(Re(O)){case 1:C=Ot;break;case 4:C=Qt;break;case 16:C=Cr;break;case 536870912:C=Rr;break;default:C=Cr}C=k9(C,g9.bind(null,m))}m.callbackPriority=p,m.callbackNode=C}}function g9(m,p){if(Ew=-1,Nw=0,(On&6)!==0)throw Error(r(327));var C=m.callbackNode;if(Yg()&&m.callbackNode!==C)return null;var O=be(m,m===pi?Bi:0);if(O===0)return null;if((O&30)!==0||(O&m.expiredLanes)!==0||p)p=Aw(m,O);else{p=O;var q=On;On|=2;var te=y9();(pi!==m||Bi!==p)&&(Pd=null,Kg=_t()+500,Fh(m,p));do try{nJ();break}catch(De){x9(m,De)}while(!0);Mg(),_w.current=te,On=q,Da!==null?p=0:(pi=null,Bi=0,p=Xa)}if(p!==0){if(p===2&&(q=Ur(m),q!==0&&(O=q,p=lS(m,q))),p===1)throw C=wx,Fh(m,0),lf(m,O),Zo(m,_t()),C;if(p===6)lf(m,O);else{if(q=m.current.alternate,(O&30)===0&&!tJ(q)&&(p=Aw(m,O),p===2&&(te=Ur(m),te!==0&&(O=te,p=lS(m,te))),p===1))throw C=wx,Fh(m,0),lf(m,O),Zo(m,_t()),C;switch(m.finishedWork=q,m.finishedLanes=O,p){case 0:case 1:throw Error(r(345));case 2:Dh(m,Qo,Pd);break;case 3:if(lf(m,O),(O&130023424)===O&&(p=aS+500-_t(),10<p)){if(be(m,0)!==0)break;if(q=m.suspendedLanes,(q&O)!==O){Fo(),m.pingedLanes|=m.suspendedLanes&q;break}m.timeoutHandle=Co(Dh.bind(null,m,Qo,Pd),p);break}Dh(m,Qo,Pd);break;case 4:if(lf(m,O),(O&4194240)===O)break;for(p=m.eventTimes,q=-1;0<O;){var me=31-Fr(O);te=1<<me,me=p[me],me>q&&(q=me),O&=~te}if(O=q,O=_t()-O,O=(120>O?120:480>O?480:1080>O?1080:1920>O?1920:3e3>O?3e3:4320>O?4320:1960*eJ(O/1960))-O,10<O){m.timeoutHandle=Co(Dh.bind(null,m,Qo,Pd),O);break}Dh(m,Qo,Pd);break;case 5:Dh(m,Qo,Pd);break;default:throw Error(r(329))}}}return Zo(m,_t()),m.callbackNode===C?g9.bind(null,m):null}function lS(m,p){var C=bx;return m.current.memoizedState.isDehydrated&&(Fh(m,p).flags|=256),m=Aw(m,p),m!==2&&(p=Qo,Qo=C,p!==null&&cS(p)),m}function cS(m){Qo===null?Qo=m:Qo.push.apply(Qo,m)}function tJ(m){for(var p=m;;){if(p.flags&16384){var C=p.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var O=0;O<C.length;O++){var q=C[O],te=q.getSnapshot;q=q.value;try{if(!ro(te(),q))return!1}catch{return!1}}}if(C=p.child,p.subtreeFlags&16384&&C!==null)C.return=p,p=C;else{if(p===m)break;for(;p.sibling===null;){if(p.return===null||p.return===m)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function lf(m,p){for(p&=~sS,p&=~Sw,m.suspendedLanes|=p,m.pingedLanes&=~p,m=m.expirationTimes;0<p;){var C=31-Fr(p),O=1<<C;m[C]=-1,p&=~O}}function p9(m){if((On&6)!==0)throw Error(r(327));Yg();var p=be(m,0);if((p&1)===0)return Zo(m,_t()),null;var C=Aw(m,p);if(m.tag!==0&&C===2){var O=Ur(m);O!==0&&(p=O,C=lS(m,O))}if(C===1)throw C=wx,Fh(m,0),lf(m,p),Zo(m,_t()),C;if(C===6)throw Error(r(345));return m.finishedWork=m.current.alternate,m.finishedLanes=p,Dh(m,Qo,Pd),Zo(m,_t()),null}function uS(m,p){var C=On;On|=1;try{return m(p)}finally{On=C,On===0&&(Kg=_t()+500,$0&&_u())}}function Mh(m){af!==null&&af.tag===0&&(On&6)===0&&Yg();var p=On;On|=1;var C=Zl.transition,O=on;try{if(Zl.transition=null,on=1,m)return m()}finally{on=O,Zl.transition=C,On=p,(On&6)===0&&_u()}}function dS(){Sl=qg.current,os(qg)}function Fh(m,p){m.finishedWork=null,m.finishedLanes=0;var C=m.timeoutHandle;if(C!==-1&&(m.timeoutHandle=-1,sx(C)),Da!==null)for(C=Da.return;C!==null;){var O=C;switch(Fa(O),O.tag){case 1:O=O.type.childContextTypes,O!=null&&B0();break;case 3:ws(),os(ui),os(Ka),fi();break;case 5:$c(O);break;case 4:ws();break;case 13:os(ls);break;case 19:os(ls);break;case 10:Fg(O.type._context);break;case 22:case 23:dS()}C=C.return}if(pi=m,Da=m=cf(m.current,null),Bi=Sl=p,Xa=0,wx=null,sS=Sw=Ph=0,Qo=bx=null,Kl!==null){for(p=0;p<Kl.length;p++)if(C=Kl[p],O=C.interleaved,O!==null){C.interleaved=null;var q=O.next,te=C.pending;if(te!==null){var me=te.next;te.next=q,O.next=me}C.pending=O}Kl=null}return m}function x9(m,p){do{var C=Da;try{if(Mg(),K0.current=Z0,_l){for(var O=Kn.memoizedState;O!==null;){var q=O.queue;q!==null&&(q.pending=null),O=O.next}_l=!1}if(Ii=0,ea=Ds=Kn=null,Eu=!1,Jo=0,nS.current=null,C===null||C.return===null){Xa=1,wx=p,Da=null;break}e:{var te=m,me=C.return,De=C,Ge=p;if(p=Bi,De.flags|=32768,Ge!==null&&typeof Ge=="object"&&typeof Ge.then=="function"){var St=Ge,Yt=De,Zt=Yt.tag;if((Yt.mode&1)===0&&(Zt===0||Zt===11||Zt===15)){var qt=Yt.alternate;qt?(Yt.updateQueue=qt.updateQueue,Yt.memoizedState=qt.memoizedState,Yt.lanes=qt.lanes):(Yt.updateQueue=null,Yt.memoizedState=null)}var _r=F(me);if(_r!==null){_r.flags&=-257,U(_r,me,De,te,p),_r.mode&1&&S(te,St,p),p=_r,Ge=St;var Mr=p.updateQueue;if(Mr===null){var Or=new Set;Or.add(Ge),p.updateQueue=Or}else Mr.add(Ge);break e}else{if((p&1)===0){S(te,St,p),fS();break e}Ge=Error(r(426))}}else if(Gn&&De.mode&1){var _a=F(me);if(_a!==null){(_a.flags&65536)===0&&(_a.flags|=256),U(_a,me,De,te,p),kh(jd(Ge,De));break e}}te=Ge=jd(Ge,De),Xa!==4&&(Xa=2),bx===null?bx=[te]:bx.push(te),te=me;do{switch(te.tag){case 3:te.flags|=65536,p&=-p,te.lanes|=p;var ht=vw(te,Ge,p);Nh(te,ht);break e;case 1:De=Ge;var et=te.type,pt=te.stateNode;if((te.flags&128)===0&&(typeof et.getDerivedStateFromError=="function"||pt!==null&&typeof pt.componentDidCatch=="function"&&(sf===null||!sf.has(pt)))){te.flags|=65536,p&=-p,te.lanes|=p;var or=w(te,De,p);Nh(te,or);break e}}te=te.return}while(te!==null)}w9(C)}catch(Lr){p=Lr,Da===C&&C!==null&&(Da=C=C.return);continue}break}while(!0)}function y9(){var m=_w.current;return _w.current=Z0,m===null?Z0:m}function fS(){(Xa===0||Xa===3||Xa===2)&&(Xa=4),pi===null||(Ph&268435455)===0&&(Sw&268435455)===0||lf(pi,Bi)}function Aw(m,p){var C=On;On|=2;var O=y9();(pi!==m||Bi!==p)&&(Pd=null,Fh(m,p));do try{rJ();break}catch(q){x9(m,q)}while(!0);if(Mg(),On=C,_w.current=O,Da!==null)throw Error(r(261));return pi=null,Bi=0,Xa}function rJ(){for(;Da!==null;)v9(Da)}function nJ(){for(;Da!==null&&!Ze();)v9(Da)}function v9(m){var p=S9(m.alternate,m,Sl);m.memoizedProps=m.pendingProps,p===null?w9(m):Da=p,nS.current=null}function w9(m){var p=m;do{var C=p.alternate;if(m=p.return,(p.flags&32768)===0){if(C=YX(C,p,Sl),C!==null){Da=C;return}}else{if(C=XX(C,p),C!==null){C.flags&=32767,Da=C;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Xa=6,Da=null;return}}if(p=p.sibling,p!==null){Da=p;return}Da=p=m}while(p!==null);Xa===0&&(Xa=5)}function Dh(m,p,C){var O=on,q=Zl.transition;try{Zl.transition=null,on=1,sJ(m,p,C,O)}finally{Zl.transition=q,on=O}return null}function sJ(m,p,C,O){do Yg();while(af!==null);if((On&6)!==0)throw Error(r(327));C=m.finishedWork;var q=m.finishedLanes;if(C===null)return null;if(m.finishedWork=null,m.finishedLanes=0,C===m.current)throw Error(r(177));m.callbackNode=null,m.callbackPriority=0;var te=C.lanes|C.childLanes;if($s(m,te),m===pi&&(Da=pi=null,Bi=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||Tw||(Tw=!0,k9(Cr,function(){return Yg(),null})),te=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||te){te=Zl.transition,Zl.transition=null;var me=on;on=1;var De=On;On|=4,nS.current=null,QX(m,C),u9(C,m),mh(rx),ag=!!tx,rx=tx=null,m.current=C,ZX(C),dt(),On=De,on=me,Zl.transition=te}else m.current=C;if(Tw&&(Tw=!1,af=m,Cw=q),te=m.pendingLanes,te===0&&(sf=null),dn(C.stateNode),Zo(m,_t()),p!==null)for(O=m.onRecoverableError,C=0;C<p.length;C++)q=p[C],O(q.value,{componentStack:q.stack,digest:q.digest});if(kw)throw kw=!1,m=iS,iS=null,m;return(Cw&1)!==0&&m.tag!==0&&Yg(),te=m.pendingLanes,(te&1)!==0?m===oS?_x++:(_x=0,oS=m):_x=0,_u(),null}function Yg(){if(af!==null){var m=Re(Cw),p=Zl.transition,C=on;try{if(Zl.transition=null,on=16>m?16:m,af===null)var O=!1;else{if(m=af,af=null,Cw=0,(On&6)!==0)throw Error(r(331));var q=On;for(On|=4,Nr=m.current;Nr!==null;){var te=Nr,me=te.child;if((Nr.flags&16)!==0){var De=te.deletions;if(De!==null){for(var Ge=0;Ge<De.length;Ge++){var St=De[Ge];for(Nr=St;Nr!==null;){var Yt=Nr;switch(Yt.tag){case 0:case 11:case 15:vx(8,Yt,te)}var Zt=Yt.child;if(Zt!==null)Zt.return=Yt,Nr=Zt;else for(;Nr!==null;){Yt=Nr;var qt=Yt.sibling,_r=Yt.return;if(a9(Yt),Yt===St){Nr=null;break}if(qt!==null){qt.return=_r,Nr=qt;break}Nr=_r}}}var Mr=te.alternate;if(Mr!==null){var Or=Mr.child;if(Or!==null){Mr.child=null;do{var _a=Or.sibling;Or.sibling=null,Or=_a}while(Or!==null)}}Nr=te}}if((te.subtreeFlags&2064)!==0&&me!==null)me.return=te,Nr=me;else e:for(;Nr!==null;){if(te=Nr,(te.flags&2048)!==0)switch(te.tag){case 0:case 11:case 15:vx(9,te,te.return)}var ht=te.sibling;if(ht!==null){ht.return=te.return,Nr=ht;break e}Nr=te.return}}var et=m.current;for(Nr=et;Nr!==null;){me=Nr;var pt=me.child;if((me.subtreeFlags&2064)!==0&&pt!==null)pt.return=me,Nr=pt;else e:for(me=et;Nr!==null;){if(De=Nr,(De.flags&2048)!==0)try{switch(De.tag){case 0:case 11:case 15:bw(9,De)}}catch(Lr){ra(De,De.return,Lr)}if(De===me){Nr=null;break e}var or=De.sibling;if(or!==null){or.return=De.return,Nr=or;break e}Nr=De.return}}if(On=q,_u(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(tn,m)}catch{}O=!0}return O}finally{on=C,Zl.transition=p}}return!1}function b9(m,p,C){p=jd(C,p),p=vw(m,p,1),m=Jl(m,p,1),p=Fo(),m!==null&&(as(m,1,p),Zo(m,p))}function ra(m,p,C){if(m.tag===3)b9(m,m,C);else for(;p!==null;){if(p.tag===3){b9(p,m,C);break}else if(p.tag===1){var O=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(sf===null||!sf.has(O))){m=jd(C,m),m=w(p,m,1),p=Jl(p,m,1),m=Fo(),p!==null&&(as(p,1,m),Zo(p,m));break}}p=p.return}}function aJ(m,p,C){var O=m.pingCache;O!==null&&O.delete(p),p=Fo(),m.pingedLanes|=m.suspendedLanes&C,pi===m&&(Bi&C)===C&&(Xa===4||Xa===3&&(Bi&130023424)===Bi&&500>_t()-aS?Fh(m,0):sS|=C),Zo(m,p)}function _9(m,p){p===0&&((m.mode&1)===0?p=1:(p=Ha,Ha<<=1,(Ha&130023424)===0&&(Ha=4194304)));var C=Fo();m=Po(m,p),m!==null&&(as(m,p,C),Zo(m,C))}function iJ(m){var p=m.memoizedState,C=0;p!==null&&(C=p.retryLane),_9(m,C)}function oJ(m,p){var C=0;switch(m.tag){case 13:var O=m.stateNode,q=m.memoizedState;q!==null&&(C=q.retryLane);break;case 19:O=m.stateNode;break;default:throw Error(r(314))}O!==null&&O.delete(p),_9(m,C)}var S9;S9=function(m,p,C){if(m!==null)if(m.memoizedProps!==p.pendingProps||ui.current)ae=!0;else{if((m.lanes&C)===0&&(p.flags&128)===0)return ae=!1,J3(m,p,C);ae=(m.flags&131072)!==0}else ae=!1,Gn&&(p.flags&1048576)!==0&&lw(p,ku,p.index);switch(p.lanes=0,p.tag){case 2:var O=p.type;En(m,p),m=p.pendingProps;var q=bd(p,Ka.current);Bc(p,C),q=Y0(null,p,O,m,q,C);var te=X0();return p.flags|=1,typeof q=="object"&&q!==null&&typeof q.render=="function"&&q.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,di(O)?(te=!0,_d(p)):te=!1,p.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,Eh(p),q.updater=tf,p.stateNode=q,q._reactInternals=p,Hg(p,O,m,C),p=Vn(null,p,O,!0,te,C)):(p.tag=0,Gn&&te&&z0(p),Se(null,p,q,C),p=p.child),p;case 16:O=p.elementType;e:{switch(En(m,p),m=p.pendingProps,q=O._init,O=q(O._payload),p.type=O,q=p.tag=cJ(O),m=Ya(O,m),q){case 0:p=gr(null,p,O,m,C);break e;case 1:p=cs(null,p,O,m,C);break e;case 11:p=st(null,p,O,m,C);break e;case 14:p=Tt(null,p,O,Ya(O.type,m),C);break e}throw Error(r(306,O,""))}return p;case 0:return O=p.type,q=p.pendingProps,q=p.elementType===O?q:Ya(O,q),gr(m,p,O,q,C);case 1:return O=p.type,q=p.pendingProps,q=p.elementType===O?q:Ya(O,q),cs(m,p,O,q,C);case 3:e:{if(Ri(p),m===null)throw Error(r(387));O=p.pendingProps,te=p.memoizedState,q=te.element,Og(m,p),G0(p,O,null,C);var me=p.memoizedState;if(O=me.element,te.isDehydrated)if(te={element:O,isDehydrated:!1,cache:me.cache,pendingSuspenseBoundaries:me.pendingSuspenseBoundaries,transitions:me.transitions},p.updateQueue.baseState=te,p.memoizedState=te,p.flags&256){q=jd(Error(r(423)),p),p=Ql(m,p,O,C,q);break e}else if(O!==q){q=jd(Error(r(424)),p),p=Ql(m,p,O,C,q);break e}else for(mr=Hl(p.stateNode.containerInfo.firstChild),No=p,Gn=!0,Ao=null,C=Xo(p,null,O,C),p.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Cd(),O===q){p=gi(m,p,C);break e}Se(m,p,O,C)}p=p.child}return p;case 5:return V0(p),m===null&&U0(p),O=p.type,q=p.pendingProps,te=m!==null?m.memoizedProps:null,me=q.children,nx(O,q)?me=null:te!==null&&nx(O,te)&&(p.flags|=32),ln(m,p),Se(m,p,me,C),p.child;case 6:return m===null&&U0(p),null;case 13:return Nt(m,p,C);case 4:return Cu(p,p.stateNode.containerInfo),O=p.pendingProps,m===null?p.child=Ed(p,null,O,C):Se(m,p,O,C),p.child;case 11:return O=p.type,q=p.pendingProps,q=p.elementType===O?q:Ya(O,q),st(m,p,O,q,C);case 7:return Se(m,p,p.pendingProps,C),p.child;case 8:return Se(m,p,p.pendingProps.children,C),p.child;case 12:return Se(m,p,p.pendingProps.children,C),p.child;case 10:e:{if(O=p.type._context,q=p.pendingProps,te=p.memoizedProps,me=q.value,Jn(Th,O._currentValue),O._currentValue=me,te!==null)if(ro(te.value,me)){if(te.children===q.children&&!ui.current){p=gi(m,p,C);break e}}else for(te=p.child,te!==null&&(te.return=p);te!==null;){var De=te.dependencies;if(De!==null){me=te.child;for(var Ge=De.firstContext;Ge!==null;){if(Ge.context===O){if(te.tag===1){Ge=Xl(-1,C&-C),Ge.tag=2;var St=te.updateQueue;if(St!==null){St=St.shared;var Yt=St.pending;Yt===null?Ge.next=Ge:(Ge.next=Yt.next,Yt.next=Ge),St.pending=Ge}}te.lanes|=C,Ge=te.alternate,Ge!==null&&(Ge.lanes|=C),Dg(te.return,C,p),De.lanes|=C;break}Ge=Ge.next}}else if(te.tag===10)me=te.type===p.type?null:te.child;else if(te.tag===18){if(me=te.return,me===null)throw Error(r(341));me.lanes|=C,De=me.alternate,De!==null&&(De.lanes|=C),Dg(me,C,p),me=te.sibling}else me=te.child;if(me!==null)me.return=te;else for(me=te;me!==null;){if(me===p){me=null;break}if(te=me.sibling,te!==null){te.return=me.return,me=te;break}me=me.return}te=me}Se(m,p,q.children,C),p=p.child}return p;case 9:return q=p.type,O=p.pendingProps.children,Bc(p,C),q=Oi(q),O=O(q),p.flags|=1,Se(m,p,O,C),p.child;case 14:return O=p.type,q=Ya(O,p.pendingProps),q=Ya(O.type,q),Tt(m,p,O,q,C);case 15:return ar(m,p,p.type,p.pendingProps,C);case 17:return O=p.type,q=p.pendingProps,q=p.elementType===O?q:Ya(O,q),En(m,p),p.tag=1,di(O)?(m=!0,_d(p)):m=!1,Bc(p,C),yw(p,O,q),Hg(p,O,q,C),Vn(null,p,O,!0,m,C);case 19:return ba(m,p,C);case 22:return Er(m,p,C)}throw Error(r(156,p.tag))};function k9(m,p){return Pe(m,p)}function lJ(m,p,C,O){this.tag=m,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ec(m,p,C,O){return new lJ(m,p,C,O)}function hS(m){return m=m.prototype,!(!m||!m.isReactComponent)}function cJ(m){if(typeof m=="function")return hS(m)?1:0;if(m!=null){if(m=m.$$typeof,m===G)return 11;if(m===Q)return 14}return 2}function cf(m,p){var C=m.alternate;return C===null?(C=ec(m.tag,p,m.key,m.mode),C.elementType=m.elementType,C.type=m.type,C.stateNode=m.stateNode,C.alternate=m,m.alternate=C):(C.pendingProps=p,C.type=m.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=m.flags&14680064,C.childLanes=m.childLanes,C.lanes=m.lanes,C.child=m.child,C.memoizedProps=m.memoizedProps,C.memoizedState=m.memoizedState,C.updateQueue=m.updateQueue,p=m.dependencies,C.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},C.sibling=m.sibling,C.index=m.index,C.ref=m.ref,C}function jw(m,p,C,O,q,te){var me=2;if(O=m,typeof m=="function")hS(m)&&(me=1);else if(typeof m=="string")me=5;else e:switch(m){case M:return Oh(C.children,q,te,p);case j:me=8,q|=8;break;case A:return m=ec(12,C,p,q|2),m.elementType=A,m.lanes=te,m;case X:return m=ec(13,C,p,q),m.elementType=X,m.lanes=te,m;case se:return m=ec(19,C,p,q),m.elementType=se,m.lanes=te,m;case B:return Pw(C,q,te,p);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case D:me=10;break e;case L:me=9;break e;case G:me=11;break e;case Q:me=14;break e;case re:me=16,O=null;break e}throw Error(r(130,m==null?m:typeof m,""))}return p=ec(me,C,p,q),p.elementType=m,p.type=O,p.lanes=te,p}function Oh(m,p,C,O){return m=ec(7,m,O,p),m.lanes=C,m}function Pw(m,p,C,O){return m=ec(22,m,O,p),m.elementType=B,m.lanes=C,m.stateNode={isHidden:!1},m}function mS(m,p,C){return m=ec(6,m,null,p),m.lanes=C,m}function gS(m,p,C){return p=ec(4,m.children!==null?m.children:[],m.key,p),p.lanes=C,p.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},p}function uJ(m,p,C,O,q){this.tag=p,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fn(0),this.expirationTimes=Fn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.identifierPrefix=O,this.onRecoverableError=q,this.mutableSourceEagerHydrationData=null}function pS(m,p,C,O,q,te,me,De,Ge){return m=new uJ(m,p,C,De,Ge),p===1?(p=1,te===!0&&(p|=8)):p=0,te=ec(3,null,null,p),m.current=te,te.stateNode=m,te.memoizedState={element:O,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eh(te),m}function dJ(m,p,C){var O=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:O==null?null:""+O,children:m,containerInfo:p,implementation:C}}function T9(m){if(!m)return Vl;m=m._reactInternals;e:{if(Ce(m)!==m||m.tag!==1)throw Error(r(170));var p=m;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(di(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(m.tag===1){var C=m.type;if(di(C))return Eg(m,C,p)}return p}function C9(m,p,C,O,q,te,me,De,Ge){return m=pS(C,O,!0,m,q,te,me,De,Ge),m.context=T9(null),C=m.current,O=Fo(),q=of(C),te=Xl(O,q),te.callback=p??null,Jl(C,te,q),m.current.lanes=q,as(m,q,O),Zo(m,O),m}function Mw(m,p,C,O){var q=p.current,te=Fo(),me=of(q);return C=T9(C),p.context===null?p.context=C:p.pendingContext=C,p=Xl(te,me),p.payload={element:m},O=O===void 0?null:O,O!==null&&(p.callback=O),m=Jl(q,p,me),m!==null&&(Gc(m,q,me,te),Ig(m,q,me)),me}function Fw(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function E9(m,p){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var C=m.retryLane;m.retryLane=C!==0&&C<p?C:p}}function xS(m,p){E9(m,p),(m=m.alternate)&&E9(m,p)}function fJ(){return null}var N9=typeof reportError=="function"?reportError:function(m){console.error(m)};function yS(m){this._internalRoot=m}Dw.prototype.render=yS.prototype.render=function(m){var p=this._internalRoot;if(p===null)throw Error(r(409));Mw(m,p,null,null)},Dw.prototype.unmount=yS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var p=m.containerInfo;Mh(function(){Mw(null,m,null,null)}),p[Gl]=null}};function Dw(m){this._internalRoot=m}Dw.prototype.unstable_scheduleHydration=function(m){if(m){var p=ft();m={blockedOn:null,target:m,priority:p};for(var C=0;C<sr.length&&p!==0&&p<sr[C].priority;C++);sr.splice(C,0,m),C===0&&_n(m)}};function vS(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Ow(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function A9(){}function hJ(m,p,C,O,q){if(q){if(typeof O=="function"){var te=O;O=function(){var St=Fw(me);te.call(St)}}var me=C9(p,O,m,0,null,!1,!1,"",A9);return m._reactRootContainer=me,m[Gl]=me.current,pd(m.nodeType===8?m.parentNode:m),Mh(),me}for(;q=m.lastChild;)m.removeChild(q);if(typeof O=="function"){var De=O;O=function(){var St=Fw(Ge);De.call(St)}}var Ge=pS(m,0,!1,null,null,!1,!1,"",A9);return m._reactRootContainer=Ge,m[Gl]=Ge.current,pd(m.nodeType===8?m.parentNode:m),Mh(function(){Mw(p,Ge,C,O)}),Ge}function Iw(m,p,C,O,q){var te=C._reactRootContainer;if(te){var me=te;if(typeof q=="function"){var De=q;q=function(){var Ge=Fw(me);De.call(Ge)}}Mw(p,me,m,q)}else me=hJ(C,p,m,q,O);return Fw(me)}yt=function(m){switch(m.tag){case 3:var p=m.stateNode;if(p.current.memoizedState.isDehydrated){var C=Bn(p.pendingLanes);C!==0&&(ci(p,C|1),Zo(p,_t()),(On&6)===0&&(Kg=_t()+500,_u()))}break;case 13:Mh(function(){var O=Po(m,1);if(O!==null){var q=Fo();Gc(O,m,1,q)}}),xS(m,1)}},tr=function(m){if(m.tag===13){var p=Po(m,134217728);if(p!==null){var C=Fo();Gc(p,m,134217728,C)}xS(m,134217728)}},$e=function(m){if(m.tag===13){var p=of(m),C=Po(m,p);if(C!==null){var O=Fo();Gc(C,m,p,O)}xS(m,p)}},ft=function(){return on},Wt=function(m,p){var C=on;try{return on=m,p()}finally{on=C}},ye=function(m,p,C){switch(p){case"input":if(Ve(m,C),p=C.name,C.type==="radio"&&p!=null){for(C=m;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<C.length;p++){var O=C[p];if(O!==m&&O.form===m.form){var q=Ma(O);if(!q)throw Error(r(90));ie(O),Ve(O,q)}}}break;case"textarea":Ut(m,C);break;case"select":p=C.value,p!=null&&vt(m,!!C.multiple,p,!1)}},Qe=uS,Ne=Mh;var mJ={usingClientEntryPoint:!1,Events:[bh,ya,Ma,Pt,Ie,uS]},Sx={findFiberByHostInstance:wu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gJ={bundleType:Sx.bundleType,version:Sx.version,rendererPackageName:Sx.rendererPackageName,rendererConfig:Sx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=ce(m),m===null?null:m.stateNode},findFiberByHostInstance:Sx.findFiberByHostInstance||fJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rw=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rw.isDisabled&&Rw.supportsFiber)try{tn=Rw.inject(gJ),mn=Rw}catch{}}return el.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mJ,el.createPortal=function(m,p){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vS(p))throw Error(r(200));return dJ(m,p,null,C)},el.createRoot=function(m,p){if(!vS(m))throw Error(r(299));var C=!1,O="",q=N9;return p!=null&&(p.unstable_strictMode===!0&&(C=!0),p.identifierPrefix!==void 0&&(O=p.identifierPrefix),p.onRecoverableError!==void 0&&(q=p.onRecoverableError)),p=pS(m,1,!1,null,null,C,!1,O,q),m[Gl]=p.current,pd(m.nodeType===8?m.parentNode:m),new yS(p)},el.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var p=m._reactInternals;if(p===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=ce(p),m=m===null?null:m.stateNode,m},el.flushSync=function(m){return Mh(m)},el.hydrate=function(m,p,C){if(!Ow(p))throw Error(r(200));return Iw(null,m,p,!0,C)},el.hydrateRoot=function(m,p,C){if(!vS(m))throw Error(r(405));var O=C!=null&&C.hydratedSources||null,q=!1,te="",me=N9;if(C!=null&&(C.unstable_strictMode===!0&&(q=!0),C.identifierPrefix!==void 0&&(te=C.identifierPrefix),C.onRecoverableError!==void 0&&(me=C.onRecoverableError)),p=C9(p,null,m,1,C??null,q,!1,te,me),m[Gl]=p.current,pd(m),O)for(m=0;m<O.length;m++)C=O[m],q=C._getVersion,q=q(C._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[C,q]:p.mutableSourceEagerHydrationData.push(C,q);return new Dw(p)},el.render=function(m,p,C){if(!Ow(p))throw Error(r(200));return Iw(null,m,p,!1,C)},el.unmountComponentAtNode=function(m){if(!Ow(m))throw Error(r(40));return m._reactRootContainer?(Mh(function(){Iw(null,null,m,!1,function(){m._reactRootContainer=null,m[Gl]=null})}),!0):!1},el.unstable_batchedUpdates=uS,el.unstable_renderSubtreeIntoContainer=function(m,p,C,O){if(!Ow(C))throw Error(r(200));if(m==null||m._reactInternals===void 0)throw Error(r(38));return Iw(m,p,C,!1,O)},el.version="18.3.1-next-f1338f8080-20240426",el}var R9;function VL(){if(R9)return _S.exports;R9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_S.exports=_J(),_S.exports}var L9;function SJ(){if(L9)return Lw;L9=1;var e=VL();return Lw.createRoot=e.createRoot,Lw.hydrateRoot=e.hydrateRoot,Lw}var kJ=SJ();const TJ=Ec(kJ);var Sk=VL();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},av.apply(this,arguments)}var bf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(bf||(bf={}));const B9="popstate";function CJ(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:o}=n.location;return kk("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:KL(s)}return NJ(t,r,null,e)}function $a(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qL(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EJ(){return Math.random().toString(36).substr(2,8)}function $9(e,t){return{usr:e.state,key:e.key,idx:t}}function kk(e,t,r,n){return r===void 0&&(r=null),av({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?r1(t):t,{state:r,key:t&&t.key||n||EJ()})}function KL(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function r1(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function NJ(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=bf.Pop,l=null,u=d();u==null&&(u=0,i.replaceState(av({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){o=bf.Pop;let v=d(),T=v==null?null:v-u;u=v,l&&l({action:o,location:y.location,delta:T})}function h(v,T){o=bf.Push;let k=kk(y.location,v,T);u=d()+1;let b=$9(k,u),E=y.createHref(k);try{i.pushState(b,"",E)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(E)}a&&l&&l({action:o,location:y.location,delta:1})}function g(v,T){o=bf.Replace;let k=kk(y.location,v,T);u=d();let b=$9(k,u),E=y.createHref(k);i.replaceState(b,"",E),a&&l&&l({action:o,location:y.location,delta:0})}function x(v){let T=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof v=="string"?v:KL(v);return k=k.replace(/ $/,"%20"),$a(T,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,T)}let y={get action(){return o},get location(){return e(s,i)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(B9,f),l=v,()=>{s.removeEventListener(B9,f),l=null}},createHref(v){return t(s,v)},createURL:x,encodeLocation(v){let T=x(v);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:h,replace:g,go(v){return i.go(v)}};return y}var z9;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(z9||(z9={}));function AJ(e,t,r){return r===void 0&&(r="/"),jJ(e,t,r)}function jJ(e,t,r,n){let s=typeof t=="string"?r1(t):t,a=JL(s.pathname||"/",r);if(a==null)return null;let i=YL(e);PJ(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let u=WJ(a);o=$J(i[l],u)}return o}function YL(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let l={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};l.relativePath.startsWith("/")&&($a(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=sm([n,l.relativePath]),d=r.concat(l);a.children&&a.children.length>0&&($a(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),YL(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:LJ(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let l of XL(a.path))s(a,i,l)}),t}function XL(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=XL(n.join("/")),o=[];return o.push(...i.map(l=>l===""?a:[a,l].join("/"))),s&&o.push(...i),o.map(l=>e.startsWith("/")&&l===""?"/":l)}function PJ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:BJ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const MJ=/^:[\w-]+$/,FJ=3,DJ=2,OJ=1,IJ=10,RJ=-2,U9=e=>e==="*";function LJ(e,t){let r=e.split("/"),n=r.length;return r.some(U9)&&(n+=RJ),t&&(n+=DJ),r.filter(s=>!U9(s)).reduce((s,a)=>s+(MJ.test(a)?FJ:a===""?OJ:IJ),n)}function BJ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function $J(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=zJ({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:sm([a,f.pathname]),pathnameBase:qJ(sm([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=sm([a,f.pathnameBase]))}return i}function zJ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=UJ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let y=o[f]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=o[f];return g&&!x?u[h]=void 0:u[h]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function UJ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),qL(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function WJ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qL(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function JL(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function HJ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?r1(e):e;return{pathname:r?r.startsWith("/")?r:GJ(r,t):t,search:KJ(n),hash:YJ(s)}}function GJ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function TS(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VJ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function QL(e,t){let r=VJ(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ZL(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=r1(e):(s=av({},e),$a(!s.pathname||!s.pathname.includes("?"),TS("?","pathname","search",s)),$a(!s.pathname||!s.pathname.includes("#"),TS("#","pathname","hash",s)),$a(!s.search||!s.search.includes("#"),TS("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}o=f>=0?t[f]:"/"}let l=HJ(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const sm=e=>e.join("/").replace(/\/\/+/g,"/"),qJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),KJ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,YJ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function XJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const eB=["post","put","patch","delete"];new Set(eB);const JJ=["get",...eB];new Set(JJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(this,arguments)}const zT=_.createContext(null),QJ=_.createContext(null),Jv=_.createContext(null),C_=_.createContext(null),Vf=_.createContext({outlet:null,matches:[],isDataRoute:!1}),tB=_.createContext(null);function Qv(){return _.useContext(C_)!=null}function E_(){return Qv()||$a(!1),_.useContext(C_).location}function rB(e){_.useContext(Jv).static||_.useLayoutEffect(e)}function hl(){let{isDataRoute:e}=_.useContext(Vf);return e?dQ():ZJ()}function ZJ(){Qv()||$a(!1);let e=_.useContext(zT),{basename:t,future:r,navigator:n}=_.useContext(Jv),{matches:s}=_.useContext(Vf),{pathname:a}=E_(),i=JSON.stringify(QL(s,r.v7_relativeSplatPath)),o=_.useRef(!1);return rB(()=>{o.current=!0}),_.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=ZL(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:sm([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,a,e])}function N_(){let{matches:e}=_.useContext(Vf),t=e[e.length-1];return t?t.params:{}}function eQ(e,t){return tQ(e,t)}function tQ(e,t,r,n){Qv()||$a(!1);let{navigator:s}=_.useContext(Jv),{matches:a}=_.useContext(Vf),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let l=i?i.pathnameBase:"/";i&&i.route;let u=E_(),d;if(t){var f;let v=typeof t=="string"?r1(t):t;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||$a(!1),d=v}else d=u;let h=d.pathname||"/",g=h;if(l!=="/"){let v=l.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=AJ(e,{pathname:g}),y=iQ(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:sm([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:sm([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&y?_.createElement(C_.Provider,{value:{location:iv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:bf.Pop}},y):y}function rQ(){let e=uQ(),t=XJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return _.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:s},r):null,null)}const nQ=_.createElement(rQ,null);class sQ extends _.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?_.createElement(Vf.Provider,{value:this.props.routeContext},_.createElement(tB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aQ(e){let{routeContext:t,match:r,children:n}=e,s=_.useContext(zT);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),_.createElement(Vf.Provider,{value:t},n)}function iQ(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);d>=0||$a(!1),i=i.slice(0,Math.min(i.length,d+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:g}=r,x=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,h)=>{let g,x=!1,y=null,v=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||nQ,l&&(u<0&&h===0?(fQ("route-fallback"),x=!0,v=null):u===h&&(x=!0,v=f.route.hydrateFallbackElement||null)));let T=t.concat(i.slice(0,h+1)),k=()=>{let b;return g?b=y:x?b=v:f.route.Component?b=_.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,_.createElement(aQ,{match:f,routeContext:{outlet:d,matches:T,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?_.createElement(sQ,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:k(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):k()},null)}var nB=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(nB||{}),sB=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(sB||{});function oQ(e){let t=_.useContext(zT);return t||$a(!1),t}function lQ(e){let t=_.useContext(QJ);return t||$a(!1),t}function cQ(e){let t=_.useContext(Vf);return t||$a(!1),t}function aB(e){let t=cQ(),r=t.matches[t.matches.length-1];return r.route.id||$a(!1),r.route.id}function uQ(){var e;let t=_.useContext(tB),r=lQ(),n=aB();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function dQ(){let{router:e}=oQ(nB.UseNavigateStable),t=aB(sB.UseNavigateStable),r=_.useRef(!1);return rB(()=>{r.current=!0}),_.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,iv({fromRouteId:t},a)))},[e,t])}const W9={};function fQ(e,t,r){W9[e]||(W9[e]=!0)}function hQ(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Ip(e){let{to:t,replace:r,state:n,relative:s}=e;Qv()||$a(!1);let{future:a,static:i}=_.useContext(Jv),{matches:o}=_.useContext(Vf),{pathname:l}=E_(),u=hl(),d=ZL(t,QL(o,a.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return _.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function ca(e){$a(!1)}function mQ(e){let{basename:t="/",children:r=null,location:n,navigationType:s=bf.Pop,navigator:a,static:i=!1,future:o}=e;Qv()&&$a(!1);let l=t.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:l,navigator:a,static:i,future:iv({v7_relativeSplatPath:!1},o)}),[l,o,a,i]);typeof n=="string"&&(n=r1(n));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:x="default"}=n,y=_.useMemo(()=>{let v=JL(d,l);return v==null?null:{location:{pathname:v,search:f,hash:h,state:g,key:x},navigationType:s}},[l,d,f,h,g,x,s]);return y==null?null:_.createElement(Jv.Provider,{value:u},_.createElement(C_.Provider,{children:r,value:y}))}function UT(e){let{children:t,location:r}=e;return eQ(Tk(t),r)}new Promise(()=>{});function Tk(e,t){t===void 0&&(t=[]);let r=[];return _.Children.forEach(e,(n,s)=>{if(!_.isValidElement(n))return;let a=[...t,s];if(n.type===_.Fragment){r.push.apply(r,Tk(n.props.children,a));return}n.type!==ca&&$a(!1),!n.props.index||!n.props.children||$a(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Tk(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const gQ="6";try{window.__reactRouterVersion=gQ}catch{}const pQ="startTransition",H9=GL[pQ];function xQ(e){let{basename:t,children:r,future:n,window:s}=e,a=_.useRef();a.current==null&&(a.current=CJ({window:s,v5Compat:!0}));let i=a.current,[o,l]=_.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=_.useCallback(f=>{u&&H9?H9(()=>l(f)):l(f)},[l,u]);return _.useLayoutEffect(()=>i.listen(d),[i,d]),_.useEffect(()=>hQ(n),[n]),_.createElement(mQ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}var G9;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(G9||(G9={}));var V9;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(V9||(V9={}));const da={student_subjects:1800*1e3,student_active_tests:600*1e3,student_results_table:600*1e3,teacher_subjects:900*1e3,teacher_classes:900*1e3,teacher_tests:600*1e3,teacher_results_table:600*1e3,admin_users:1200*1e3,admin_teachers:1200*1e3,admin_subjects:1800*1e3,admin_academic_years:3600*1e3,admin_tests:900*1e3,admin_results_table:null,admin_teacher_id:3600*1e3,all_tests:1200*1e3,subjects_dropdown:1800*1e3,grades_classes:3600*1e3,test_progress:120*1e3,anti_cheating:120*1e3,word_matching_test:600*1e3,speaking_test_data:3600*1e3},fa=e=>{try{const t=localStorage.getItem(e);if(!t)return console.log(" Cache: No data found for key:",e),null;const{data:r,timestamp:n,ttl:s}=JSON.parse(t),a=Date.now()-n;return a>s?(console.log(" Cache: Data expired for key:",e,"age:",a,"ttl:",s),localStorage.removeItem(e),null):(console.log(" Cache: Data found for key:",e,"age:",a,"ttl:",s),r)}catch(t){return console.log(" Cache: Corrupted data for key:",e,t),localStorage.removeItem(e),null}},qs=(e,t,r)=>{try{console.log(" Cache: Setting data for key:",e,"ttl:",r),localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:r})),console.log(" Cache: Data cached successfully for key:",e)}catch{console.log(" Cache: Storage full, cleaning old data for key:",e),iB();try{localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:r})),console.log(" Cache: Data cached after cleanup for key:",e)}catch{console.warn("Storage full, cannot cache data")}}},iB=()=>{const e=Date.now(),t=Object.keys(localStorage);t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i,ttl:o}=JSON.parse(a);e-i>o&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const r=e-10080*60*1e3;t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i}=JSON.parse(a);i<r&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const n=Object.keys(localStorage);if(n.length>0){const s=n.map(i=>{try{const o=localStorage.getItem(i);if(o){const{timestamp:l}=JSON.parse(o);return{key:i,timestamp:l}}}catch{return{key:i,timestamp:0}}return{key:i,timestamp:0}}),a=Math.ceil(s.length*.25);s.sort((i,o)=>i.timestamp-o.timestamp).slice(0,a).forEach(({key:i})=>localStorage.removeItem(i))}},WT=e=>{Object.keys(localStorage).forEach(r=>{r.includes(e)&&localStorage.removeItem(r)})},n1=(e,t,r)=>{const n=`test_progress_${e}_${t}_${r}`,s=`anti_cheating_${e}_${t}_${r}`;if(localStorage.removeItem(n),localStorage.removeItem(s),t==="speaking_test_data"){const a=`speaking_test_data_${e}_${r}`;localStorage.removeItem(a),console.log(`Cleared speaking test data cache for ${r}`)}console.log(`Cleared test data for ${t}_${r}`)},dp=Object.freeze(Object.defineProperty({__proto__:null,CACHE_TTL:da,cleanupOldData:iB,clearTestData:n1,clearUserData:WT,getCachedData:fa,setCachedData:qs},Symbol.toStringTag,{value:"Module"}));let Vc=null,Tx=null;function Rb(){if(Tx!==null)return Tx;try{const e="_test";localStorage.setItem(e,"test");const t=localStorage.getItem(e);localStorage.removeItem(e),Tx=t==="test"}catch(e){console.warn("localStorage unavailable, falling back to sessionStorage",e),Tx=!1}return Tx}function ov(){return Rb()?localStorage:sessionStorage}async function HT(e){try{const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}catch(t){return console.warn("Hash computation failed",t),btoa(e).replace(/[^a-zA-Z0-9]/g,"").substring(0,64)}}async function yQ(e,t){try{const r=ov();return r.setItem(e,t),r.getItem(e)===t}catch(r){return console.warn("Storage write failed",r),!1}}async function vQ(e,t){try{const r=ov(),n=await HT(t);return r.setItem(`${e}_hash`,n),await yQ(e,t)}catch(r){return console.warn("Failed to store with hash",r),!1}}async function wQ(e){try{const t=ov(),r=t.getItem(e),n=t.getItem(`${e}_hash`);return!r||!n?!1:await HT(r)===n}catch(t){return console.warn("Hash verification failed",t),!1}}async function bQ(e,t=3,r=200){for(let n=0;n<t;n++){if(await e())return!0;await new Promise(a=>setTimeout(a,r))}return!1}const ia={async set(e){const t=Rb(),r=ov();if(!t){console.warn(" localStorage unavailable - using sessionStorage (less persistent)");try{r.setItem("auth_token",e);const a=r.getItem("auth_token")===e;return a&&(Vc=e),a}catch(s){return console.error("sessionStorage fallback failed",s),!1}}const n=await bQ(()=>vQ("auth_token",e));return n&&(Vc=e),n},async get(){if(Vc)return Vc;const e=ov();if(!Rb())try{const t=e.getItem("auth_token");return Vc=t,t}catch(t){return console.error("sessionStorage fallback read failed",t),null}try{const t=e.getItem("auth_token");if(!t)return Vc=null,null;if(e.getItem("auth_token_hash")){if(!await wQ("auth_token"))return Vc=null,null}else{console.log("Migrating legacy token to secure storage format...");try{const n=await HT(t);if(e.setItem("auth_token_hash",n),e.getItem("auth_token_hash")!==n)return console.warn("Failed to store hash during migration"),t}catch(n){console.warn("Failed to migrate token hash:",n)}}return Vc=t,t}catch(t){return console.warn("Failed to get token",t),Vc=null,null}},async clear(){try{Rb()&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_token_hash"))}catch{}try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token_hash")}catch{}Vc=null},clearCache(){Vc=null}},e4=Object.freeze(Object.defineProperty({__proto__:null,SecureToken:ia},Symbol.toStringTag,{value:"Module"})),oB=_.createContext(),lB=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState(null),[a,i]=_.useState(null),[o,l]=_.useState(!1),[u,d]=_.useState(!0),[f,h]=_.useState(null);_.useEffect(()=>{console.log("[AUTH] Initializing application session..."),v()},[]),_.useEffect(()=>{if(o&&a){console.log("[AUTH] Setting up proactive token refresh...");let z=!1;const I=setInterval(async()=>{if(o&&a&&!z){z=!0;try{const W=a||await(window.tokenManager?.getToken()||ia.get());if(W&&g(W))console.log("[AUTH] Token expired, attempting refresh..."),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in");else if(W)try{const ee=JSON.parse(atob(W.split(".")[1])).exp*1e3,oe=Date.now(),Z=ee-oe;Z<300*1e3&&Z>0&&(console.log(`[AUTH] Token expires in ${Math.round(Z/1e3)} seconds, refreshing...`),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in"))}catch(K){console.error("[AUTH] Error parsing token for expiration check:",K)}}catch(W){console.error("[AUTH] Error in proactive refresh:",W)}finally{z=!1}}},300*1e3);return()=>{console.log("[AUTH] Clearing proactive token refresh interval"),clearInterval(I)}}},[o,a]);const g=z=>{if(!z)return!0;try{if(typeof z!="string"||!z.includes("."))return console.warn("[AUTH] Invalid token format - not a JWT"),!0;const I=z.split(".");if(I.length!==3)return console.warn("[AUTH] Invalid token format - not 3 parts"),!0;const W=JSON.parse(atob(I[1])),K=Date.now()/1e3;return W.exp<=K}catch(I){if(console.error("[AUTH] Error decoding token:",I),console.warn("[AUTH] Token appears to be corrupted - clearing authentication"),ia.clear().catch(()=>{}),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("userData"),window.tokenManager)try{window.tokenManager.clearAuth()}catch(W){console.warn("[AUTH] Error clearing token manager:",W)}return!0}},x=async()=>{const z=localStorage.getItem("refresh_token");if(!z)return console.log("[AUTH] No refresh token found"),!1;try{const I=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:z})});if(I.ok){const W=await I.json();console.log("[AUTH] Token refresh successful"),await ia.set(W.accessToken),localStorage.setItem("refresh_token",W.refreshToken),localStorage.setItem("accessToken",W.accessToken);try{window.tokenManager&&(await window.tokenManager.setToken(W.accessToken),W.refreshToken&&window.tokenManager.setRefreshToken(W.refreshToken))}catch{}return i(W.accessToken),!0}else return console.error("[AUTH] Token refresh failed:",I.status),!1}catch(I){return console.error("[AUTH] Token refresh error:",I),!1}},y=async(z,I={})=>{const W=a||await(window.tokenManager?.getToken()||ia.get());if(!W)throw new Error("No authentication token found");const K={"Content-Type":"application/json",Authorization:`Bearer ${W}`,...I.headers},ee=await fetch(z,{...I,headers:K});if(ee.status===401)if(console.log("[AUTH] 401 error, attempting token refresh..."),await x()){const Z=await(window.tokenManager?.getToken()||ia.get());return K.Authorization=`Bearer ${Z}`,fetch(z,{...I,headers:K})}else throw console.log("[AUTH] Token refresh failed, returning 401 response"),new Error("Authentication failed - please login again");return ee},v=async()=>{try{console.log("[AUTH] Starting session initialization..."),d(!0);const z=await(window.tokenManager?.getToken()||ia.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),I=localStorage.getItem("user_data")||localStorage.getItem("userData"),W=I?JSON.parse(I).role:null;if(console.log("[AUTH] Found stored data:",{hasToken:!!z,hasUser:!!I,role:W}),z&&W&&I)try{const K=JSON.parse(I);if(g(z))if(console.log("[AUTH] Token expired, attempting refresh..."),await x()){console.log("[AUTH] Token refreshed successfully");const oe=await(window.tokenManager?.getToken()||ia.get());i(oe)}else console.log("[AUTH] Token refresh failed, but continuing with existing token..."),i(z);else i(z);s(W),r(K);try{if(window.tokenManager&&z){await window.tokenManager.setToken(z);const ee=localStorage.getItem("refresh_token");ee&&window.tokenManager.setRefreshToken(ee)}}catch{}l(!0),await b(K,W)}catch(K){console.error("[AUTH] Error parsing stored user data:",K),console.log("[AUTH] Invalid user data, but not forcing logout - continuing with empty state"),l(!1)}}catch(z){console.error("[AUTH] Session initialization error:",z),console.log("[AUTH] Initialization error, but not forcing logout - continuing with empty state"),l(!1)}finally{console.log("[AUTH] Session initialization complete"),d(!1)}},T=async z=>{try{if(d(!0),h(null),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),h("Please wait for the logout process to complete.");return}console.log("Attempting login with:",z.username);let I,W;z.username==="admin"?(I={ok:!0,json:()=>({success:!0,token:"test-token"})},W="admin"):(I=await authService.teacherLogin(z),W="teacher");const K=await I.json();await k(I,W,K)}catch(I){j(I)}finally{d(!1)}},k=async(z,I,W)=>{try{if(z.ok&&W.success&&W.token){i(W.token),s(I),r(W),l(!0);const K=W.accessToken||W.token;await ia.set(K),localStorage.setItem("refresh_token",W.refreshToken),localStorage.setItem("user_data",JSON.stringify(W)),localStorage.setItem("accessToken",K);try{window.tokenManager&&(await window.tokenManager.setToken(K),W.refreshToken&&window.tokenManager.setRefreshToken(W.refreshToken))}catch{}try{const ee=Date.now(),oe=10080*60*1e3,Z=[];for(let le=0;le<localStorage.length;le++){const ue=localStorage.key(le);if(!(!ue||!(ue.startsWith("test_progress_")||ue.startsWith("test_timer_")||ue.startsWith("test_shuffle_order_")||ue.startsWith("student_results_table_")||ue.startsWith("anti_cheating_"))))try{const Te=localStorage.getItem(ue);if(!Te){Z.push(ue);continue}let ie=null;if(Te.startsWith("{")||Te.startsWith("[")){const pe=JSON.parse(Te),Ae=pe.timestamp||pe.lastSaved||pe.lastTickAt||pe.createdAt||pe.updatedAt||pe.startedAt||pe.started_at;Ae&&(ie=new Date(Ae).getTime())}if(!ie){const pe=`${ue}__ts`,Ae=localStorage.getItem(pe);Ae&&(ie=parseInt(Ae)||null)}if(!ie)continue;ee-ie>oe&&Z.push(ue)}catch{}}Z.forEach(le=>{try{localStorage.removeItem(le)}catch{}})}catch(ee){console.warn("LocalStorage cleanup skipped:",ee)}return await b(W,I),!0}else{const K=W.message||z.statusText||"Login failed";return j(new Error(K)),!1}}catch(K){return j(K),!1}},b=async(z,I)=>{try{switch(I){case"admin":console.log("Admin login successful, role:",z.role),console.log("Admin logged in:",z);break;case"teacher":console.log("Teacher login successful, role:",z.role),console.log("Teacher data:",z.teacher),await N(z),await M();break;case"student":console.log("Student login successful"),E(z);break;default:console.warn("Unknown user role:",I)}}catch(W){console.error("Post-login actions error:",W)}},E=z=>{r(z),console.log("Student info populated:",z)},N=async z=>{r(z),console.log("Teacher info populated:",z)},P=async()=>{try{console.log("Initializing teacher cabinet...")}catch(z){console.error("Error initializing teacher cabinet:",z)}},M=async()=>{try{console.log("Checking teacher subjects...")}catch(z){console.error("Error checking teacher subjects:",z)}},j=z=>{h(z.message||"Login failed"),A()},A=()=>{h(null),d(!1)},D=_.useCallback(()=>{L()},[]),L=async()=>{r(null),s(null),i(null),l(!1),h(null);const z=t?.student_id||t?.teacher_id||t?.admin_id||t?.id;z&&WT(z),await ia.clear(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("user_data"),localStorage.removeItem("user_role"),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("testProgress"),localStorage.removeItem("formData"),window.tokenManager&&await window.tokenManager.clearAuth(),setTimeout(()=>{G()},100)},G=()=>{console.log("Interface reset after session clear - redirecting to login"),window.location.replace("/login")},X=()=>t?.id||null,se=()=>n==="admin"?t:null,Q=()=>n==="admin",re=()=>Q()?t?.admin_id:null,B=()=>n==="teacher"?t?.username:null,V=()=>{console.log("Auth functions available:",{handleUnifiedLogin:typeof T,logout:typeof D,getCurrentTeacherId:typeof X,isAdmin:typeof Q,getCurrentAdmin:typeof se,getCurrentAdminId:typeof re,getCurrentTeacherUsername:typeof B})};_.useEffect(()=>(window.logout=D,window.getCurrentTeacherId=X,window.getCurrentAdmin=se,window.isAdmin=Q,window.getCurrentAdminId=re,window.getCurrentTeacherUsername=B,window.checkFunctionAvailability=V,()=>{delete window.logout,delete window.getCurrentTeacherId,delete window.getCurrentAdmin,delete window.isAdmin,delete window.getCurrentAdminId,delete window.getCurrentTeacherUsername,delete window.checkFunctionAvailability}),[D]);const R=_.useCallback(z=>{console.log("Setting user data from external auth:",z),r(z),s(z.role),i(z.token),l(!0),d(!1),h(null),ia.set(z.token).catch(I=>{console.error("[AUTH] Failed to store token securely:",I)}),localStorage.setItem("user_data",JSON.stringify(z)),localStorage.setItem("accessToken",z.token),window.tokenManager&&window.tokenManager.setToken(z.token).catch(()=>{})},[]),H={user:t,role:n,token:a,isAuthenticated:o,isLoading:u,error:f,login:T,setUserData:R,logout:D,resetLoginForm:A,forceCompleteLogout:L,initializeApplicationSession:v,makeAuthenticatedRequest:y,populateStudentInfo:E,populateTeacherInfo:N,initializeTeacherCabinet:P,checkTeacherSubjects:M,getCurrentTeacherId:X,getCurrentAdmin:se,isAdmin:Q,getCurrentAdminId:re,getCurrentTeacherUsername:B,handleLoginResponse:k,handlePostLoginActions:b,handleLoginFailure:j,resetInterfaceAfterSessionClear:G,checkFunctionAvailability:V};return c.jsx(oB.Provider,{value:H,children:e})},Ps=()=>{const e=_.useContext(oB);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class _Q{constructor(){this.baseURL="http://localhost:8888/.netlify/functions",this.timeout=1e4,this.retryCount=3,this.retryDelay=1e3}async getHeaders(){const t=await(window.tokenManager?.getToken()||ia.get())||localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async sendRequest(t,r){try{return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(n){throw console.error(" Network error:",n),n}}async request(t,r={}){const n=`${this.baseURL}${t}`,a={method:"GET",headers:await this.getHeaders(),timeout:this.timeout,...r};let i;for(let o=0;o<this.retryCount;o++)try{const l=new AbortController,u=setTimeout(()=>l.abort(),this.timeout),d=await fetch(n,{...a,signal:l.signal});if(clearTimeout(u),!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return await d.json()}catch(l){if(i=l,l.name==="AbortError")throw new Error("Request timeout");o<this.retryCount-1&&(console.warn(`Request failed, retrying in ${this.retryDelay}ms... (attempt ${o+1}/${this.retryCount})`),await new Promise(u=>setTimeout(u,this.retryDelay*Math.pow(2,o))))}throw i}async get(t,r={}){return this.request(t,{...r,method:"GET"})}async post(t,r,n={}){return this.request(t,{...n,method:"POST",body:JSON.stringify(r)})}async put(t,r,n={}){return this.request(t,{...n,method:"PUT",body:JSON.stringify(r)})}async delete(t,r={}){return this.request(t,{...r,method:"DELETE"})}async patch(t,r,n={}){return this.request(t,{...n,method:"PATCH",body:JSON.stringify(r)})}async uploadFile(t,r,n={}){const s=new FormData;s.append("file",r);const a=`${this.baseURL}${t}`,i=await(window.tokenManager?.getToken()||ia.get())||localStorage.getItem("token"),o={method:"POST",headers:{...i&&{Authorization:`Bearer ${i}`}},body:s,...n};try{const l=await fetch(a,o);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){throw l}}async downloadFile(t,r,n={}){const s=`${this.baseURL}${t}`,i={method:"GET",headers:await this.getHeaders(),...n};try{const o=await fetch(s,i);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.blob(),u=window.URL.createObjectURL(l),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)}catch(o){throw o}}ensureDebugOutput(){let t=document.getElementById("debug-output");return t||(t=document.createElement("div"),t.id="debug-output",t.className="fixed top-4 right-4 w-96 max-h-96 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 overflow-auto",t.innerHTML='<div class="text-sm font-mono text-gray-800">Debug Output</div>',document.body.appendChild(t)),t}async testDbConnection(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/test-db-connection")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Database Connection Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,message:"Database connection successful",data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Database Connection Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,message:"Database connection failed",error:t.message}}}async testStudentLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:"51706",password:"1"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Student Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Student Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testTeacherLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"Aleksandr_Petrov",password:"465"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Teacher Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Teacher Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testAdminLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Admin Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Admin Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetTeacherSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-teacher-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Teacher Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Teacher Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetClassResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-class-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Class Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Class Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentTestResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-test-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Test Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Test Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testEndpoints(){const t=["/debug/test-student-login","/debug/test-teacher-login","/debug/test-admin-login","/debug/test-get-subjects","/debug/test-get-teacher-subjects","/debug/test-get-class-results","/debug/test-get-student-subjects","/debug/test-get-student-test-results"],r={};for(const n of t)try{const s=await this.get(n);r[n]={success:!0,data:s}}catch(s){r[n]={success:!1,error:s.message}}return r}async debugFunction(t){const r=this.ensureDebugOutput();try{let n;switch(t){case"testDbConnection":n=await this.testDbConnection();break;case"testStudentLogin":n=await this.testStudentLogin();break;case"testTeacherLogin":n=await this.testTeacherLogin();break;case"testAdminLogin":n=await this.testAdminLogin();break;case"testGetSubjects":n=await this.testGetSubjects();break;case"testGetTeacherSubjects":n=await this.testGetTeacherSubjects();break;case"testGetClassResults":n=await this.testGetClassResults();break;case"testGetStudentSubjects":n=await this.testGetStudentSubjects();break;case"testGetStudentTestResults":n=await this.testGetStudentTestResults();break;default:throw new Error(`Unknown debug function: ${t}`)}return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Debug Function: ${t}</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),n}catch(n){throw r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Debug Function Error: ${t}</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${n.message}</pre>
        `),n}}showDebugFunctions(){const t=this.ensureDebugOutput(),r=`
      <div class="text-sm font-mono text-gray-800 mb-4">Debug Functions</div>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <button onclick="apiClient.testDbConnection()" class="px-3 py-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors">
          Test DB Connection
        </button>
        <button onclick="apiClient.testStudentLogin()" class="px-3 py-2 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors">
          Test Student Login
        </button>
        <button onclick="apiClient.testTeacherLogin()" class="px-3 py-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 transition-colors">
          Test Teacher Login
        </button>
        <button onclick="apiClient.testAdminLogin()" class="px-3 py-2 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors">
          Test Admin Login
        </button>
        <button onclick="apiClient.testGetSubjects()" class="px-3 py-2 bg-purple-500 text-white text-xs rounded hover:bg-purple-600 transition-colors">
          Test Get Subjects
        </button>
        <button onclick="apiClient.testGetTeacherSubjects()" class="px-3 py-2 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600 transition-colors">
          Test Get Teacher Subjects
        </button>
        <button onclick="apiClient.testGetClassResults()" class="px-3 py-2 bg-pink-500 text-white text-xs rounded hover:bg-pink-600 transition-colors">
          Test Get Class Results
        </button>
        <button onclick="apiClient.testGetStudentSubjects()" class="px-3 py-2 bg-teal-500 text-white text-xs rounded hover:bg-teal-600 transition-colors">
          Test Get Student Subjects
        </button>
        <button onclick="apiClient.testGetStudentTestResults()" class="px-3 py-2 bg-orange-500 text-white text-xs rounded hover:bg-orange-600 transition-colors">
          Test Get Student Test Results
        </button>
        <button onclick="apiClient.testEndpoints()" class="px-3 py-2 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 transition-colors">
          Test All Endpoints
        </button>
      </div>
    `;t.innerHTML=r}}const sa=new _Q,GT=_.createContext({});function VT(e){const t=_.useRef(null);return t.current===null&&(t.current=e()),t.current}const qT=typeof window<"u",cB=qT?_.useLayoutEffect:_.useEffect,A_=_.createContext(null);function KT(e,t){e.indexOf(t)===-1&&e.push(t)}function YT(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const s0=(e,t,r)=>r>t?t:r<e?e:r;let XT=()=>{};const a0={},uB=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function dB(e){return typeof e=="object"&&e!==null}const fB=e=>/^0[^.\s]+$/u.test(e);function JT(e){let t;return()=>(t===void 0&&(t=e()),t)}const xc=e=>e,SQ=(e,t)=>r=>t(e(r)),Zv=(...e)=>e.reduce(SQ),lv=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class QT{constructor(){this.subscriptions=[]}add(t){return KT(this.subscriptions,t),()=>YT(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gu=e=>e*1e3,Vu=e=>e/1e3;function hB(e,t){return t?e*(1e3/t):0}const mB=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,kQ=1e-7,TQ=12;function CQ(e,t,r,n,s){let a,i,o=0;do i=t+(r-t)/2,a=mB(i,n,s)-e,a>0?r=i:t=i;while(Math.abs(a)>kQ&&++o<TQ);return i}function e2(e,t,r,n){if(e===t&&r===n)return xc;const s=a=>CQ(a,0,1,e,r);return a=>a===0||a===1?a:mB(s(a),t,n)}const gB=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,pB=e=>t=>1-e(1-t),xB=e2(.33,1.53,.69,.99),ZT=pB(xB),yB=gB(ZT),vB=e=>(e*=2)<1?.5*ZT(e):.5*(2-Math.pow(2,-10*(e-1))),e7=e=>1-Math.sin(Math.acos(e)),wB=pB(e7),bB=gB(e7),EQ=e2(.42,0,1,1),NQ=e2(0,0,.58,1),_B=e2(.42,0,.58,1),AQ=e=>Array.isArray(e)&&typeof e[0]!="number",SB=e=>Array.isArray(e)&&typeof e[0]=="number",jQ={linear:xc,easeIn:EQ,easeInOut:_B,easeOut:NQ,circIn:e7,circInOut:bB,circOut:wB,backIn:ZT,backInOut:yB,backOut:xB,anticipate:vB},PQ=e=>typeof e=="string",q9=e=>{if(SB(e)){XT(e.length===4);const[t,r,n,s]=e;return e2(t,r,n,s)}else if(PQ(e))return jQ[e];return e},Bw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function MQ(e,t){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,h=!1)=>{const x=h&&s?r:n;return f&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(l),r.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const FQ=40;function kB(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=Bw.reduce((b,E)=>(b[E]=MQ(a),b),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:g,postRender:x}=i,y=()=>{const b=a0.useManualTiming?s.timestamp:performance.now();r=!1,a0.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(b-s.timestamp,FQ),1)),s.timestamp=b,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),d.process(s),f.process(s),h.process(s),g.process(s),x.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(y))},v=()=>{r=!0,n=!0,s.isProcessing||e(y)};return{schedule:Bw.reduce((b,E)=>{const N=i[E];return b[E]=(P,M=!1,j=!1)=>(r||v(),N.schedule(P,M,j)),b},{}),cancel:b=>{for(let E=0;E<Bw.length;E++)i[Bw[E]].cancel(b)},state:s,steps:i}}const{schedule:Is,cancel:Df,state:Ui,steps:CS}=kB(typeof requestAnimationFrame<"u"?requestAnimationFrame:xc,!0);let Lb;function DQ(){Lb=void 0}const ol={now:()=>(Lb===void 0&&ol.set(Ui.isProcessing||a0.useManualTiming?Ui.timestamp:performance.now()),Lb),set:e=>{Lb=e,queueMicrotask(DQ)}},TB=e=>t=>typeof t=="string"&&t.startsWith(e),t7=TB("--"),OQ=TB("var(--"),r7=e=>OQ(e)?IQ.test(e.split("/*")[0].trim()):!1,IQ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,s1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},cv={...s1,transform:e=>s0(0,1,e)},$w={...s1,default:1},Ly=e=>Math.round(e*1e5)/1e5,n7=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function RQ(e){return e==null}const LQ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,s7=(e,t)=>r=>!!(typeof r=="string"&&LQ.test(r)&&r.startsWith(e)||t&&!RQ(r)&&Object.prototype.hasOwnProperty.call(r,t)),CB=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,o]=n.match(n7);return{[e]:parseFloat(s),[t]:parseFloat(a),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},BQ=e=>s0(0,255,e),ES={...s1,transform:e=>Math.round(BQ(e))},Yh={test:s7("rgb","red"),parse:CB("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+ES.transform(e)+", "+ES.transform(t)+", "+ES.transform(r)+", "+Ly(cv.transform(n))+")"};function $Q(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Ck={test:s7("#"),parse:$Q,transform:Yh.transform},t2=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),pf=t2("deg"),qu=t2("%"),Zr=t2("px"),zQ=t2("vh"),UQ=t2("vw"),K9={...qu,parse:e=>qu.parse(e)/100,transform:e=>qu.transform(e*100)},fp={test:s7("hsl","hue"),parse:CB("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+qu.transform(Ly(t))+", "+qu.transform(Ly(r))+", "+Ly(cv.transform(n))+")"},La={test:e=>Yh.test(e)||Ck.test(e)||fp.test(e),parse:e=>Yh.test(e)?Yh.parse(e):fp.test(e)?fp.parse(e):Ck.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Yh.transform(e):fp.transform(e),getAnimatableNone:e=>{const t=La.parse(e);return t.alpha=0,La.transform(t)}},WQ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function HQ(e){return isNaN(e)&&typeof e=="string"&&(e.match(n7)?.length||0)+(e.match(WQ)?.length||0)>0}const EB="number",NB="color",GQ="var",VQ="var(",Y9="${}",qQ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function uv(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(qQ,l=>(La.test(l)?(n.color.push(a),s.push(NB),r.push(La.parse(l))):l.startsWith(VQ)?(n.var.push(a),s.push(GQ),r.push(l)):(n.number.push(a),s.push(EB),r.push(parseFloat(l))),++a,Y9)).split(Y9);return{values:r,split:o,indexes:n,types:s}}function AB(e){return uv(e).values}function jB(e){const{split:t,types:r}=uv(e),n=t.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=t[i],s[i]!==void 0){const o=r[i];o===EB?a+=Ly(s[i]):o===NB?a+=La.transform(s[i]):a+=s[i]}return a}}const KQ=e=>typeof e=="number"?0:La.test(e)?La.getAnimatableNone(e):e;function YQ(e){const t=AB(e);return jB(e)(t.map(KQ))}const Of={test:HQ,parse:AB,createTransformer:jB,getAnimatableNone:YQ};function NS(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function XQ({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,a=0,i=0;if(!t)s=a=i=r;else{const o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;s=NS(l,o,e+1/3),a=NS(l,o,e),i=NS(l,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function t4(e,t){return r=>r>0?t:e}const Ks=(e,t,r)=>e+(t-e)*r,AS=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},JQ=[Ck,Yh,fp],QQ=e=>JQ.find(t=>t.test(e));function X9(e){const t=QQ(e);if(!t)return!1;let r=t.parse(e);return t===fp&&(r=XQ(r)),r}const J9=(e,t)=>{const r=X9(e),n=X9(t);if(!r||!n)return t4(e,t);const s={...r};return a=>(s.red=AS(r.red,n.red,a),s.green=AS(r.green,n.green,a),s.blue=AS(r.blue,n.blue,a),s.alpha=Ks(r.alpha,n.alpha,a),Yh.transform(s))},Ek=new Set(["none","hidden"]);function ZQ(e,t){return Ek.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function eZ(e,t){return r=>Ks(e,t,r)}function a7(e){return typeof e=="number"?eZ:typeof e=="string"?r7(e)?t4:La.test(e)?J9:nZ:Array.isArray(e)?PB:typeof e=="object"?La.test(e)?J9:tZ:t4}function PB(e,t){const r=[...e],n=r.length,s=e.map((a,i)=>a7(a)(a,t[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function tZ(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=a7(e[s])(e[s],t[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function rZ(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][n[a]],o=e.values[i]??0;r[s]=o,n[a]++}return r}const nZ=(e,t)=>{const r=Of.createTransformer(t),n=uv(e),s=uv(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Ek.has(e)&&!s.values.length||Ek.has(t)&&!n.values.length?ZQ(e,t):Zv(PB(rZ(n,s),s.values),r):t4(e,t)};function MB(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ks(e,t,r):a7(e)(e,t)}const sZ=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Is.update(t,r),stop:()=>Df(t),now:()=>Ui.isProcessing?Ui.timestamp:ol.now()}},FB=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let a=0;a<s;a++)n+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},r4=2e4;function i7(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<r4;)t+=r,n=e.next(t);return t>=r4?1/0:t}function aZ(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(i7(n),r4);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:Vu(s)}}const iZ=5;function DB(e,t,r){const n=Math.max(t-iZ,0);return hB(r-e(n),t-n)}const oa={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jS=.001;function oZ({duration:e=oa.duration,bounce:t=oa.bounce,velocity:r=oa.velocity,mass:n=oa.mass}){let s,a,i=1-t;i=s0(oa.minDamping,oa.maxDamping,i),e=s0(oa.minDuration,oa.maxDuration,Vu(e)),i<1?(s=u=>{const d=u*i,f=d*e,h=d-r,g=Nk(u,i),x=Math.exp(-f);return jS-h/g*x},a=u=>{const f=u*i*e,h=f*r+r,g=Math.pow(i,2)*Math.pow(u,2)*e,x=Math.exp(-f),y=Nk(Math.pow(u,2),i);return(-s(u)+jS>0?-1:1)*((h-g)*x)/y}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-jS+d*f},a=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const o=5/e,l=cZ(s,a,o);if(e=Gu(e),isNaN(l))return{stiffness:oa.stiffness,damping:oa.damping,duration:e};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:e}}}const lZ=12;function cZ(e,t,r){let n=r;for(let s=1;s<lZ;s++)n=n-e(n)/t(n);return n}function Nk(e,t){return e*Math.sqrt(1-t*t)}const uZ=["duration","bounce"],dZ=["stiffness","damping","mass"];function Q9(e,t){return t.some(r=>e[r]!==void 0)}function fZ(e){let t={velocity:oa.velocity,stiffness:oa.stiffness,damping:oa.damping,mass:oa.mass,isResolvedFromDuration:!1,...e};if(!Q9(e,dZ)&&Q9(e,uZ))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*s0(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:oa.mass,stiffness:s,damping:a}}else{const r=oZ(e);t={...t,...r,mass:oa.mass},t.isResolvedFromDuration=!0}return t}function n4(e=oa.visualDuration,t=oa.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:l,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:g}=fZ({...r,velocity:-Vu(r.velocity||0)}),x=h||0,y=u/(2*Math.sqrt(l*d)),v=i-a,T=Vu(Math.sqrt(l/d)),k=Math.abs(v)<5;n||(n=k?oa.restSpeed.granular:oa.restSpeed.default),s||(s=k?oa.restDelta.granular:oa.restDelta.default);let b;if(y<1){const N=Nk(T,y);b=P=>{const M=Math.exp(-y*T*P);return i-M*((x+y*T*v)/N*Math.sin(N*P)+v*Math.cos(N*P))}}else if(y===1)b=N=>i-Math.exp(-T*N)*(v+(x+T*v)*N);else{const N=T*Math.sqrt(y*y-1);b=P=>{const M=Math.exp(-y*T*P),j=Math.min(N*P,300);return i-M*((x+y*T*v)*Math.sinh(j)+N*v*Math.cosh(j))/N}}const E={calculatedDuration:g&&f||null,next:N=>{const P=b(N);if(g)o.done=N>=f;else{let M=N===0?x:0;y<1&&(M=N===0?Gu(x):DB(b,N,P));const j=Math.abs(M)<=n,A=Math.abs(i-P)<=s;o.done=j&&A}return o.value=o.done?i:P,o},toString:()=>{const N=Math.min(i7(E),r4),P=FB(M=>E.next(N*M).value,N,30);return N+"ms "+P},toTransition:()=>{}};return E}n4.applyToOptions=e=>{const t=aZ(e,100,n4);return e.ease=t.ease,e.duration=Gu(t.duration),e.type="keyframes",e};function Ak({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:l,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},g=j=>o!==void 0&&j<o||l!==void 0&&j>l,x=j=>o===void 0?l:l===void 0||Math.abs(o-j)<Math.abs(l-j)?o:l;let y=r*t;const v=f+y,T=i===void 0?v:i(v);T!==v&&(y=T-f);const k=j=>-y*Math.exp(-j/n),b=j=>T+k(j),E=j=>{const A=k(j),D=b(j);h.done=Math.abs(A)<=u,h.value=h.done?T:D};let N,P;const M=j=>{g(h.value)&&(N=j,P=n4({keyframes:[h.value,x(h.value)],velocity:DB(b,j,h.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return M(0),{calculatedDuration:null,next:j=>{let A=!1;return!P&&N===void 0&&(A=!0,E(j),M(j)),N!==void 0&&j>=N?P.next(j-N):(!A&&E(j),h)}}}function hZ(e,t,r){const n=[],s=r||a0.mix||MB,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const l=Array.isArray(t)?t[i]||xc:t;o=Zv(l,o)}n.push(o)}return n}function mZ(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const a=e.length;if(XT(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=hZ(t,n,s),l=o.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(l>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=lv(e[f],e[f+1],d);return o[f](h)};return r?d=>u(s0(e[0],e[a-1],d)):u}function gZ(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=lv(0,t,n);e.push(Ks(r,1,s))}}function pZ(e){const t=[0];return gZ(t,e.length-1),t}function xZ(e,t){return e.map(r=>r*t)}function yZ(e,t){return e.map(()=>t||_B).splice(0,e.length-1)}function By({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=AQ(n)?n.map(q9):q9(n),a={done:!1,value:t[0]},i=xZ(r&&r.length===t.length?r:pZ(t),e),o=mZ(i,t,{ease:Array.isArray(s)?s:yZ(t,s)});return{calculatedDuration:e,next:l=>(a.value=o(l),a.done=l>=e,a)}}const vZ=e=>e!==null;function o7(e,{repeat:t,repeatType:r="loop"},n,s=1){const a=e.filter(vZ),o=s<0||t&&r!=="loop"&&t%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const wZ={decay:Ak,inertia:Ak,tween:By,keyframes:By,spring:n4};function OB(e){typeof e.type=="string"&&(e.type=wZ[e.type])}class l7{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const bZ=e=>e/100;class c7 extends l7{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==ol.now()&&this.tick(ol.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;OB(t);const{type:r=By,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:o}=t;const l=r||By;l!==By&&typeof o[0]!="number"&&(this.mixKeyframes=Zv(bZ,MB(o[0],o[1])),o=[0,100]);const u=l({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=i7(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:g,type:x,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const T=this.currentTime-u*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?T<0:T>s;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,E=n;if(f){const j=Math.min(this.currentTime,s)/o;let A=Math.floor(j),D=j%1;!D&&j>=1&&(D=1),D===1&&A--,A=Math.min(A,f+1),!!(A%2)&&(h==="reverse"?(D=1-D,g&&(D-=g/o)):h==="mirror"&&(E=i)),b=s0(0,1,D)*o}const N=k?{done:!1,value:d[0]}:E.next(b);a&&(N.value=a(N.value));let{done:P}=N;!k&&l!==null&&(P=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return M&&x!==Ak&&(N.value=o7(d,this.options,v,this.speed)),y&&y(N.value),M&&this.finish(),N}then(t,r){return this.finished.then(t,r)}get duration(){return Vu(this.calculatedDuration)}get time(){return Vu(this.currentTime)}set time(t){t=Gu(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(ol.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Vu(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=sZ,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ol.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function _Z(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Xh=e=>e*180/Math.PI,jk=e=>{const t=Xh(Math.atan2(e[1],e[0]));return Pk(t)},SZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:jk,rotateZ:jk,skewX:e=>Xh(Math.atan(e[1])),skewY:e=>Xh(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Pk=e=>(e=e%360,e<0&&(e+=360),e),Z9=jk,eA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),tA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),kZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eA,scaleY:tA,scale:e=>(eA(e)+tA(e))/2,rotateX:e=>Pk(Xh(Math.atan2(e[6],e[5]))),rotateY:e=>Pk(Xh(Math.atan2(-e[2],e[0]))),rotateZ:Z9,rotate:Z9,skewX:e=>Xh(Math.atan(e[4])),skewY:e=>Xh(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Mk(e){return e.includes("scale")?1:0}function Fk(e,t){if(!e||e==="none")return Mk(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=kZ,s=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=SZ,s=o}if(!s)return Mk(t);const a=n[t],i=s[1].split(",").map(CZ);return typeof a=="function"?a(i):i[a]}const TZ=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Fk(r,t)};function CZ(e){return parseFloat(e.trim())}const a1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],i1=new Set(a1),rA=e=>e===s1||e===Zr,EZ=new Set(["x","y","z"]),NZ=a1.filter(e=>!EZ.has(e));function AZ(e){const t=[];return NZ.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const am={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Fk(t,"x"),y:(e,{transform:t})=>Fk(t,"y")};am.translateX=am.x;am.translateY=am.y;const im=new Set;let Dk=!1,Ok=!1,Ik=!1;function IB(){if(Ok){const e=Array.from(im).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=AZ(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{n.getValue(a)?.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ok=!1,Dk=!1,im.forEach(e=>e.complete(Ik)),im.clear()}function RB(){im.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ok=!0)})}function jZ(){Ik=!0,RB(),IB(),Ik=!1}class u7{constructor(t,r,n,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(im.add(this),Dk||(Dk=!0,Is.read(RB),Is.resolveKeyframes(IB))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const o=n.readValue(r,i);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}_Z(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),im.delete(this)}cancel(){this.state==="scheduled"&&(im.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const PZ=e=>e.startsWith("--");function MZ(e,t,r){PZ(t)?e.style.setProperty(t,r):e.style[t]=r}const FZ=JT(()=>window.ScrollTimeline!==void 0),DZ={};function OZ(e,t){const r=JT(e);return()=>DZ[t]??r()}const LB=OZ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ny=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,nA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ny([0,.65,.55,1]),circOut:Ny([.55,0,1,.45]),backIn:Ny([.31,.01,.66,-.59]),backOut:Ny([.33,1.53,.69,.99])};function BB(e,t){if(e)return typeof e=="function"?LB()?FB(e,t):"ease-out":SB(e)?Ny(e):Array.isArray(e)?e.map(r=>BB(r,t)||nA.easeOut):nA[e]}function IZ(e,t,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[t]:r};l&&(d.offset=l);const f=BB(o,s);Array.isArray(f)&&(d.easing=f);const h={delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function $B(e){return typeof e=="function"&&"applyToOptions"in e}function RZ({type:e,...t}){return $B(e)&&LB()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class LZ extends l7{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,XT(typeof t.type!="string");const u=RZ(t);this.animation=IZ(r,n,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=o7(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):MZ(r,n,d),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Vu(Number(t))}get time(){return Vu(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Gu(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&FZ()?(this.animation.timeline=t,xc):r(this)}}const zB={anticipate:vB,backInOut:yB,circInOut:bB};function BZ(e){return e in zB}function $Z(e){typeof e.ease=="string"&&BZ(e.ease)&&(e.ease=zB[e.ease])}const sA=10;class zZ extends LZ{constructor(t){$Z(t),OB(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...i}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new c7({...i,autoplay:!1}),l=Gu(this.finishedTime??this.time);r.setWithVelocity(o.sample(l-sA).value,o.sample(l).value,sA),o.stop()}}const aA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Of.test(e)||e==="0")&&!e.startsWith("url("));function UZ(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function WZ(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=aA(s,t),o=aA(a,t);return!i||!o?!1:UZ(e)||(r==="spring"||$B(r))&&n}function Rk(e){e.duration=0,e.type}const HZ=new Set(["opacity","clipPath","filter","transform"]),GZ=JT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function VZ(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=t.owner.getProps();return GZ()&&r&&HZ.has(r)&&(r!=="transform"||!u)&&!l&&!n&&s!=="mirror"&&a!==0&&i!=="inertia"}const qZ=40;class KZ extends l7{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:l,motionValue:u,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ol.now();const h={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,name:l,motionValue:u,element:d,...f},g=d?.KeyframeResolver||u7;this.keyframeResolver=new g(o,(x,y,v)=>this.onKeyframesResolved(x,y,h,!v),l,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:l,isHandoff:u,onUpdate:d}=n;this.resolvedAt=ol.now(),WZ(t,a,i,o)||((a0.instantAnimations||!l)&&d?.(o7(t,n,r)),t[0]=t[t.length-1],Rk(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>qZ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},g=!u&&VZ(h)?new zZ({...h,element:h.motionValue.owner.current}):new c7(h);g.finished.then(()=>this.notifyFinished()).catch(xc),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),jZ()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const YZ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function XZ(e){const t=YZ.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function UB(e,t,r=1){const[n,s]=XZ(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const i=a.trim();return uB(i)?parseFloat(i):i}return r7(s)?UB(s,t,r+1):s}function d7(e,t){return e?.[t]??e?.default??e}const WB=new Set(["width","height","top","left","right","bottom",...a1]),JZ={test:e=>e==="auto",parse:e=>e},HB=e=>t=>t.test(e),GB=[s1,Zr,qu,pf,UQ,zQ,JZ],iA=e=>GB.find(HB(e));function QZ(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||fB(e):!0}const ZZ=new Set(["brightness","contrast","saturate","opacity"]);function eee(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(n7)||[];if(!n)return e;const s=r.replace(n,"");let a=ZZ.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+s+")"}const tee=/\b([a-z-]*)\(.*?\)/gu,Lk={...Of,getAnimatableNone:e=>{const t=e.match(tee);return t?t.map(eee).join(" "):e}},oA={...s1,transform:Math.round},ree={rotate:pf,rotateX:pf,rotateY:pf,rotateZ:pf,scale:$w,scaleX:$w,scaleY:$w,scaleZ:$w,skew:pf,skewX:pf,skewY:pf,distance:Zr,translateX:Zr,translateY:Zr,translateZ:Zr,x:Zr,y:Zr,z:Zr,perspective:Zr,transformPerspective:Zr,opacity:cv,originX:K9,originY:K9,originZ:Zr},f7={borderWidth:Zr,borderTopWidth:Zr,borderRightWidth:Zr,borderBottomWidth:Zr,borderLeftWidth:Zr,borderRadius:Zr,radius:Zr,borderTopLeftRadius:Zr,borderTopRightRadius:Zr,borderBottomRightRadius:Zr,borderBottomLeftRadius:Zr,width:Zr,maxWidth:Zr,height:Zr,maxHeight:Zr,top:Zr,right:Zr,bottom:Zr,left:Zr,padding:Zr,paddingTop:Zr,paddingRight:Zr,paddingBottom:Zr,paddingLeft:Zr,margin:Zr,marginTop:Zr,marginRight:Zr,marginBottom:Zr,marginLeft:Zr,backgroundPositionX:Zr,backgroundPositionY:Zr,...ree,zIndex:oA,fillOpacity:cv,strokeOpacity:cv,numOctaves:oA},nee={...f7,color:La,backgroundColor:La,outlineColor:La,fill:La,stroke:La,borderColor:La,borderTopColor:La,borderRightColor:La,borderBottomColor:La,borderLeftColor:La,filter:Lk,WebkitFilter:Lk},VB=e=>nee[e];function qB(e,t){let r=VB(e);return r!==Lk&&(r=Of),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const see=new Set(["auto","none","0"]);function aee(e,t,r){let n=0,s;for(;n<e.length&&!s;){const a=e[n];typeof a=="string"&&!see.has(a)&&uv(a).values.length&&(s=e[n]),n++}if(s&&r)for(const a of t)e[a]=qB(r,s)}class iee extends u7{constructor(t,r,n,s,a){super(t,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),r7(u))){const d=UB(u,r.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!WB.has(n)||t.length!==2)return;const[s,a]=t,i=iA(s),o=iA(a);if(i!==o)if(rA(i)&&rA(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else am[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||QZ(t[s]))&&n.push(s);n.length&&aee(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=am[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=am[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{t.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function oee(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=r?.[e]??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const KB=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function YB(e){return dB(e)&&"offsetHeight"in e}const lA=30,lee=e=>!isNaN(parseFloat(e));class cee{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=ol.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=ol.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=lee(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new QT);const n=this.events[t].add(r);return t==="change"?()=>{n(),Is.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=ol.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>lA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,lA);return hB(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rp(e,t){return new cee(e,t)}const{schedule:h7}=kB(queueMicrotask,!1),Yc={x:!1,y:!1};function XB(){return Yc.x||Yc.y}function uee(e){return e==="x"||e==="y"?Yc[e]?null:(Yc[e]=!0,()=>{Yc[e]=!1}):Yc.x||Yc.y?null:(Yc.x=Yc.y=!0,()=>{Yc.x=Yc.y=!1})}function JB(e,t){const r=oee(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function cA(e){return!(e.pointerType==="touch"||XB())}function dee(e,t,r={}){const[n,s,a]=JB(e,r),i=o=>{if(!cA(o))return;const{target:l}=o,u=t(l,o);if(typeof u!="function"||!l)return;const d=f=>{cA(f)&&(u(f),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const QB=(e,t)=>t?e===t?!0:QB(e,t.parentElement):!1,m7=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,fee=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function hee(e){return fee.has(e.tagName)||e.tabIndex!==-1}const Bb=new WeakSet;function uA(e){return t=>{t.key==="Enter"&&e(t)}}function PS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const mee=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=uA(()=>{if(Bb.has(r))return;PS(r,"down");const s=uA(()=>{PS(r,"up")}),a=()=>PS(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function dA(e){return m7(e)&&!XB()}function gee(e,t,r={}){const[n,s,a]=JB(e,r),i=o=>{const l=o.currentTarget;if(!dA(o))return;Bb.add(l);const u=t(l,o),d=(g,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),Bb.has(l)&&Bb.delete(l),dA(g)&&typeof u=="function"&&u(g,{success:x})},f=g=>{d(g,l===window||l===document||r.useGlobalTarget||QB(l,g.target))},h=g=>{d(g,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),YB(o)&&(o.addEventListener("focus",u=>mee(u,s)),!hee(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function ZB(e){return dB(e)&&"ownerSVGElement"in e}function pee(e){return ZB(e)&&e.tagName==="svg"}const go=e=>!!(e&&e.getVelocity),xee=[...GB,La,Of],yee=e=>xee.find(HB(e)),g7=_.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class vee extends _.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=YB(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function wee({children:e,isPresent:t,anchorX:r,root:n}){const s=_.useId(),a=_.useRef(null),i=_.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=_.useContext(g7);return _.useInsertionEffect(()=>{const{width:l,height:u,top:d,left:f,right:h}=i.current;if(t||!a.current||!l||!u)return;const g=r==="left"?`left: ${f}`:`right: ${h}`;a.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const y=n??document.head;return y.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(x)&&y.removeChild(x)}},[t]),c.jsx(vee,{isPresent:t,childRef:a,sizeRef:i,children:_.cloneElement(e,{ref:a})})}const bee=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:l})=>{const u=VT(_ee),d=_.useId();let f=!0,h=_.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:g=>{u.set(g,!0);for(const x of u.values())if(!x)return;n&&n()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[r,u,n]);return a&&f&&(h={...h}),_.useMemo(()=>{u.forEach((g,x)=>u.set(x,!1))},[r]),_.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),i==="popLayout"&&(e=c.jsx(wee,{isPresent:r,anchorX:o,root:l,children:e})),c.jsx(A_.Provider,{value:h,children:e})};function _ee(){return new Map}function e$(e=!0){const t=_.useContext(A_);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,a=_.useId();_.useEffect(()=>{if(e)return s(a)},[e]);const i=_.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,i]:[!0]}const zw=e=>e.key||"";function fA(e){const t=[];return _.Children.forEach(e,r=>{_.isValidElement(r)&&t.push(r)}),t}const il=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:l})=>{const[u,d]=e$(i),f=_.useMemo(()=>fA(e),[e]),h=i&&!u?[]:f.map(zw),g=_.useRef(!0),x=_.useRef(f),y=VT(()=>new Map),[v,T]=_.useState(f),[k,b]=_.useState(f);cB(()=>{g.current=!1,x.current=f;for(let P=0;P<k.length;P++){const M=zw(k[P]);h.includes(M)?y.delete(M):y.get(M)!==!0&&y.set(M,!1)}},[k,h.length,h.join("-")]);const E=[];if(f!==v){let P=[...f];for(let M=0;M<k.length;M++){const j=k[M],A=zw(j);h.includes(A)||(P.splice(M,0,j),E.push(j))}return a==="wait"&&E.length&&(P=E),b(fA(P)),T(f),null}const{forceRender:N}=_.useContext(GT);return c.jsx(c.Fragment,{children:k.map(P=>{const M=zw(P),j=i&&!u?!1:f===k||h.includes(M),A=()=>{if(y.has(M))y.set(M,!0);else return;let D=!0;y.forEach(L=>{L||(D=!1)}),D&&(N?.(),b(x.current),i&&d?.(),n&&n())};return c.jsx(bee,{isPresent:j,initial:!g.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:l,onExitComplete:j?void 0:A,anchorX:o,children:P},M)})})},t$=_.createContext({strict:!1}),hA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Lp={};for(const e in hA)Lp[e]={isEnabled:t=>hA[e].some(r=>!!t[r])};function See(e){for(const t in e)Lp[t]={...Lp[t],...e[t]}}const kee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function s4(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||kee.has(e)}let r$=e=>!s4(e);function Tee(e){typeof e=="function"&&(r$=t=>t.startsWith("on")?!s4(t):e(t))}try{Tee(require("@emotion/is-prop-valid").default)}catch{}function Cee(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(r$(s)||r===!0&&s4(s)||!t&&!s4(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const j_=_.createContext({});function P_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function dv(e){return typeof e=="string"||Array.isArray(e)}const p7=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],x7=["initial",...p7];function M_(e){return P_(e.animate)||x7.some(t=>dv(e[t]))}function n$(e){return!!(M_(e)||e.variants)}function Eee(e,t){if(M_(e)){const{initial:r,animate:n}=e;return{initial:r===!1||dv(r)?r:void 0,animate:dv(n)?n:void 0}}return e.inherit!==!1?t:{}}function Nee(e){const{initial:t,animate:r}=Eee(e,_.useContext(j_));return _.useMemo(()=>({initial:t,animate:r}),[mA(t),mA(r)])}function mA(e){return Array.isArray(e)?e.join(" "):e}const fv={};function Aee(e){for(const t in e)fv[t]=e[t],t7(t)&&(fv[t].isCSSVariable=!0)}function s$(e,{layout:t,layoutId:r}){return i1.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!fv[e]||e==="opacity")}const jee={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Pee=a1.length;function Mee(e,t,r){let n="",s=!0;for(let a=0;a<Pee;a++){const i=a1[a],o=e[i];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(i.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||r){const u=KB(o,f7[i]);if(!l){s=!1;const d=jee[i]||i;n+=`${d}(${u}) `}r&&(t[i]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function y7(e,t,r){const{style:n,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const l in t){const u=t[l];if(i1.has(l)){i=!0;continue}else if(t7(l)){s[l]=u;continue}else{const d=KB(u,f7[l]);l.startsWith("origin")?(o=!0,a[l]=d):n[l]=d}}if(t.transform||(i||r?n.transform=Mee(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${l} ${u} ${d}`}}const v7=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function a$(e,t,r){for(const n in t)!go(t[n])&&!s$(n,r)&&(e[n]=t[n])}function Fee({transformTemplate:e},t){return _.useMemo(()=>{const r=v7();return y7(r,t,e),Object.assign({},r.vars,r.style)},[t])}function Dee(e,t){const r=e.style||{},n={};return a$(n,r,e),Object.assign(n,Fee(e,t)),n}function Oee(e,t){const r={},n=Dee(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const Iee={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ree={offset:"strokeDashoffset",array:"strokeDasharray"};function Lee(e,t,r=1,n=0,s=!0){e.pathLength=1;const a=s?Iee:Ree;e[a.offset]=Zr.transform(-n);const i=Zr.transform(t),o=Zr.transform(r);e[a.array]=`${i} ${o}`}function i$(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},l,u,d){if(y7(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=d?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),s!==void 0&&Lee(f,s,a,i,!1)}const o$=()=>({...v7(),attrs:{}}),l$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Bee(e,t,r,n){const s=_.useMemo(()=>{const a=o$();return i$(a,t,l$(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};a$(a,e.style,e),s.style={...a,...s.style}}return s}const $ee=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function w7(e){return typeof e!="string"||e.includes("-")?!1:!!($ee.indexOf(e)>-1||/[A-Z]/u.test(e))}function zee(e,t,r,{latestValues:n},s,a=!1){const o=(w7(e)?Bee:Oee)(t,n,s,e),l=Cee(t,typeof e=="string",a),u=e!==_.Fragment?{...l,...o,ref:r}:{},{children:d}=t,f=_.useMemo(()=>go(d)?d.get():d,[d]);return _.createElement(e,{...u,children:f})}function gA(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function b7(e,t,r,n){if(typeof t=="function"){const[s,a]=gA(n);t=t(r!==void 0?r:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=gA(n);t=t(r!==void 0?r:e.custom,s,a)}return t}function $b(e){return go(e)?e.get():e}function Uee({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:Wee(r,n,s,e),renderState:t()}}function Wee(e,t,r,n){const s={},a=n(e,{});for(const h in a)s[h]=$b(a[h]);let{initial:i,animate:o}=e;const l=M_(e),u=n$(e);t&&u&&!l&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const f=d?o:i;if(f&&typeof f!="boolean"&&!P_(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const x=b7(e,h[g]);if(x){const{transitionEnd:y,transition:v,...T}=x;for(const k in T){let b=T[k];if(Array.isArray(b)){const E=d?b.length-1:0;b=b[E]}b!==null&&(s[k]=b)}for(const k in y)s[k]=y[k]}}}return s}const c$=e=>(t,r)=>{const n=_.useContext(j_),s=_.useContext(A_),a=()=>Uee(e,t,n,s);return r?a():VT(a)};function _7(e,t,r){const{style:n}=e,s={};for(const a in n)(go(n[a])||t.style&&go(t.style[a])||s$(a,e)||r?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const Hee=c$({scrapeMotionValuesFromProps:_7,createRenderState:v7});function u$(e,t,r){const n=_7(e,t,r);for(const s in e)if(go(e[s])||go(t[s])){const a=a1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=e[s]}return n}const Gee=c$({scrapeMotionValuesFromProps:u$,createRenderState:o$}),Vee=Symbol.for("motionComponentSymbol");function hp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function qee(e,t,r){return _.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):hp(r)&&(r.current=n))},[t])}const S7=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Kee="framerAppearId",d$="data-"+S7(Kee),f$=_.createContext({});function Yee(e,t,r,n,s){const{visualElement:a}=_.useContext(j_),i=_.useContext(t$),o=_.useContext(A_),l=_.useContext(g7).reducedMotion,u=_.useRef(null);n=n||i.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,f=_.useContext(f$);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&Xee(u.current,r,s,f);const h=_.useRef(!1);_.useInsertionEffect(()=>{d&&h.current&&d.update(r,o)});const g=r[d$],x=_.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return cB(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),_.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),x.current=!1),d.enteringChildren=void 0)}),d}function Xee(e,t,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:h$(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&hp(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:l,layoutRoot:u})}function h$(e){if(e)return e.options.allowProjection!==!1?e.projection:h$(e.parent)}function MS(e,{forwardMotionProps:t=!1}={},r,n){r&&See(r);const s=w7(e)?Gee:Hee;function a(o,l){let u;const d={..._.useContext(g7),...o,layoutId:Jee(o)},{isStatic:f}=d,h=Nee(o),g=s(o,f);if(!f&&qT){Qee();const x=Zee(d);u=x.MeasureLayout,h.visualElement=Yee(e,g,d,n,x.ProjectionNode)}return c.jsxs(j_.Provider,{value:h,children:[u&&h.visualElement?c.jsx(u,{visualElement:h.visualElement,...d}):null,zee(e,o,qee(g,h.visualElement,l),g,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=_.forwardRef(a);return i[Vee]=e,i}function Jee({layoutId:e}){const t=_.useContext(GT).id;return t&&e!==void 0?t+"-"+e:e}function Qee(e,t){_.useContext(t$).strict}function Zee(e){const{drag:t,layout:r}=Lp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function ete(e,t){if(typeof Proxy>"u")return MS;const r=new Map,n=(a,i)=>MS(a,i,e,t),s=(a,i)=>n(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?n:(r.has(i)||r.set(i,MS(i,void 0,e,t)),r.get(i))})}function m$({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function tte({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function rte(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function FS(e){return e===void 0||e===1}function Bk({scale:e,scaleX:t,scaleY:r}){return!FS(e)||!FS(t)||!FS(r)}function Wh(e){return Bk(e)||g$(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function g$(e){return pA(e.x)||pA(e.y)}function pA(e){return e&&e!=="0%"}function a4(e,t,r){const n=e-r,s=t*n;return r+s}function xA(e,t,r,n,s){return s!==void 0&&(e=a4(e,s,n)),a4(e,r,n)+t}function $k(e,t=0,r=1,n,s){e.min=xA(e.min,t,r,n,s),e.max=xA(e.max,t,r,n,s)}function p$(e,{x:t,y:r}){$k(e.x,t.translate,t.scale,t.originPoint),$k(e.y,r.translate,r.scale,r.originPoint)}const yA=.999999999999,vA=1.0000000000001;function nte(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&gp(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,p$(e,i)),n&&Wh(a.latestValues)&&gp(e,a.latestValues))}t.x<vA&&t.x>yA&&(t.x=1),t.y<vA&&t.y>yA&&(t.y=1)}function mp(e,t){e.min=e.min+t,e.max=e.max+t}function wA(e,t,r,n,s=.5){const a=Ks(e.min,e.max,s);$k(e,t,r,a,n)}function gp(e,t){wA(e.x,t.x,t.scaleX,t.scale,t.originX),wA(e.y,t.y,t.scaleY,t.scale,t.originY)}function x$(e,t){return m$(rte(e.getBoundingClientRect(),t))}function ste(e,t,r){const n=x$(e,r),{scroll:s}=t;return s&&(mp(n.x,s.offset.x),mp(n.y,s.offset.y)),n}const bA=()=>({translate:0,scale:1,origin:0,originPoint:0}),pp=()=>({x:bA(),y:bA()}),_A=()=>({min:0,max:0}),Ta=()=>({x:_A(),y:_A()}),zk={current:null},y$={current:!1};function ate(){if(y$.current=!0,!!qT)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>zk.current=e.matches;e.addEventListener("change",t),t()}else zk.current=!1}const ite=new WeakMap;function ote(e,t,r){for(const n in t){const s=t[n],a=r[n];if(go(s))e.addValue(n,s);else if(go(a))e.addValue(n,Rp(s,{owner:e}));else if(a!==s)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(n);e.addValue(n,Rp(i!==void 0?i:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const SA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lte{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=u7,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=ol.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Is.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=M_(r),this.isVariantNode=n$(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const g=f[h];l[h]!==void 0&&go(g)&&g.set(l[h])}}mount(t){this.current=t,ite.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),y$.current||ate(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:zk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Df(this.notifyUpdate),Df(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=i1.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Is.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Lp){const r=Lp[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ta()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<SA.length;n++){const s=SA[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=ote(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Rp(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(uB(n)||fB(n))?n=parseFloat(n):!yee(n)&&Of.test(r)&&(n=qB(t,r)),this.setBaseTarget(t,go(n)?n.get():n)),go(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=b7(this.props,r,this.presenceContext?.custom);a&&(n=a[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!go(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new QT),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){h7.render(this.render)}}class v$ extends lte{constructor(){super(...arguments),this.KeyframeResolver=iee}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;go(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function w$(e,{style:t,vars:r},n,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,n);for(i in r)a.setProperty(i,r[i])}function cte(e){return window.getComputedStyle(e)}class ute extends v${constructor(){super(...arguments),this.type="html",this.renderInstance=w$}readValueFromInstance(t,r){if(i1.has(r))return this.projection?.isProjecting?Mk(r):TZ(t,r);{const n=cte(t),s=(t7(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return x$(t,r)}build(t,r,n){y7(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return _7(t,r,n)}}const b$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function dte(e,t,r,n){w$(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(b$.has(s)?s:S7(s),t.attrs[s])}class fte extends v${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ta}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(i1.has(r)){const n=VB(r);return n&&n.default||0}return r=b$.has(r)?r:S7(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return u$(t,r,n)}build(t,r,n){i$(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){dte(t,r,n,s)}mount(t){this.isSVGTag=l$(t.tagName),super.mount(t)}}const hte=(e,t)=>w7(e)?new fte(t):new ute(t,{allowProjection:e!==_.Fragment});function _p(e,t,r){const n=e.getProps();return b7(n,t,r!==void 0?r:n.custom,e)}const Uk=e=>Array.isArray(e);function mte(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Rp(r))}function gte(e){return Uk(e)?e[e.length-1]||0:e}function pte(e,t){const r=_p(e,t);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const o=gte(a[i]);mte(e,i,o)}}function xte(e){return!!(go(e)&&e.add)}function Wk(e,t){const r=e.getValue("willChange");if(xte(r))return r.add(t);if(!r&&a0.WillChange){const n=new a0.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function _$(e){return e.props[d$]}const yte=e=>e!==null;function vte(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(yte),a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const wte={type:"spring",stiffness:500,damping:25,restSpeed:10},bte=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),_te={type:"keyframes",duration:.8},Ste={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kte=(e,{keyframes:t})=>t.length>2?_te:i1.has(e)?e.startsWith("scale")?bte(t[1]):wte:Ste;function Tte({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}const k7=(e,t,r,n={},s,a)=>i=>{const o=d7(n,e)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Gu(l);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};Tte(o)||Object.assign(d,kte(e,d)),d.duration&&(d.duration=Gu(d.duration)),d.repeatDelay&&(d.repeatDelay=Gu(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Rk(d),d.delay===0&&(f=!0)),(a0.instantAnimations||a0.skipAnimations)&&(f=!0,Rk(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!a&&t.get()!==void 0){const h=vte(d.keyframes,o);if(h!==void 0){Is.update(()=>{d.onUpdate(h),d.onComplete()});return}}return o.isSync?new c7(d):new KZ(d)};function Cte({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function S$(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const l=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),h=o[d];if(h===void 0||u&&Cte(u,d))continue;const g={delay:r,...d7(a||{},d)},x=f.get();if(x!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===x&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const T=_$(e);if(T){const k=window.MotionHandoffAnimation(T,d,Is);k!==null&&(g.startTime=k,y=!0)}}Wk(e,d),f.start(k7(d,f,h,e.shouldReduceMotion&&WB.has(d)?{type:!1}:g,e,y));const v=f.animation;v&&l.push(v)}return i&&Promise.all(l).then(()=>{Is.update(()=>{i&&pte(e,i)})}),l}function k$(e,t,r,n=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,o=(i-1)*n;return typeof r=="function"?r(a,i):s===1?a*n:o-a*n}function Hk(e,t,r={}){const n=_p(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(S$(e,n,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return Ete(e,t,l,u,d,f,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[l,u]=o==="beforeChildren"?[a,i]:[i,a];return l().then(()=>u())}else return Promise.all([a(),i(r.delay)])}function Ete(e,t,r=0,n=0,s=0,a=1,i){const o=[];for(const l of e.variantChildren)l.notify("AnimationStart",t),o.push(Hk(l,t,{...i,delay:r+(typeof n=="function"?0:n)+k$(e.variantChildren,l,n,s,a)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}function Nte(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>Hk(e,a,r));n=Promise.all(s)}else if(typeof t=="string")n=Hk(e,t,r);else{const s=typeof t=="function"?_p(e,t,r.custom):t;n=Promise.all(S$(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function T$(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Ate=x7.length;function C$(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?C$(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Ate;r++){const n=x7[r],s=e.props[n];(dv(s)||s===!1)&&(t[n]=s)}return t}const jte=[...p7].reverse(),Pte=p7.length;function Mte(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Nte(e,r,n)))}function Fte(e){let t=Mte(e),r=kA(),n=!0;const s=l=>(u,d)=>{const f=_p(e,d,l==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:g,...x}=f;u={...u,...x,...g}}return u};function a(l){t=l(e)}function i(l){const{props:u}=e,d=C$(e.parent)||{},f=[],h=new Set;let g={},x=1/0;for(let v=0;v<Pte;v++){const T=jte[v],k=r[T],b=u[T]!==void 0?u[T]:d[T],E=dv(b),N=T===l?k.isActive:null;N===!1&&(x=v);let P=b===d[T]&&b!==u[T]&&E;if(P&&n&&e.manuallyAnimateOnMount&&(P=!1),k.protectedKeys={...g},!k.isActive&&N===null||!b&&!k.prevProp||P_(b)||typeof b=="boolean")continue;const M=Dte(k.prevProp,b);let j=M||T===l&&k.isActive&&!P&&E||v>x&&E,A=!1;const D=Array.isArray(b)?b:[b];let L=D.reduce(s(T),{});N===!1&&(L={});const{prevResolvedValues:G={}}=k,X={...G,...L},se=B=>{j=!0,h.has(B)&&(A=!0,h.delete(B)),k.needsAnimating[B]=!0;const V=e.getValue(B);V&&(V.liveStyle=!1)};for(const B in X){const V=L[B],R=G[B];if(g.hasOwnProperty(B))continue;let H=!1;Uk(V)&&Uk(R)?H=!T$(V,R):H=V!==R,H?V!=null?se(B):h.add(B):V!==void 0&&h.has(B)?se(B):k.protectedKeys[B]=!0}k.prevProp=b,k.prevResolvedValues=L,k.isActive&&(g={...g,...L}),n&&e.blockInitialAnimation&&(j=!1);const Q=P&&M;j&&(!Q||A)&&f.push(...D.map(B=>{const V={type:T};if(typeof B=="string"&&n&&!Q&&e.manuallyAnimateOnMount&&e.parent){const{parent:R}=e,H=_p(R,B);if(R.enteringChildren&&H){const{delayChildren:z}=H.transition||{};V.delay=k$(R.enteringChildren,e,z)}}return{animation:B,options:V}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const T=_p(e,Array.isArray(u.initial)?u.initial[0]:u.initial);T&&T.transition&&(v.transition=T.transition)}h.forEach(T=>{const k=e.getBaseTarget(T),b=e.getValue(T);b&&(b.liveStyle=!0),v[T]=k??null}),f.push({animation:v})}let y=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(f):Promise.resolve()}function o(l,u){if(r[l].isActive===u)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(l,u)),r[l].isActive=u;const d=i(l);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=kA(),n=!0}}}function Dte(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!T$(t,e):!1}function Ih(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kA(){return{animate:Ih(!0),whileInView:Ih(),whileHover:Ih(),whileTap:Ih(),whileDrag:Ih(),whileFocus:Ih(),exit:Ih()}}class qf{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Ote extends qf{constructor(t){super(t),t.animationState||(t.animationState=Fte(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();P_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Ite=0;class Rte extends qf{constructor(){super(...arguments),this.id=Ite++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Lte={animation:{Feature:Ote},exit:{Feature:Rte}};function hv(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function r2(e){return{point:{x:e.pageX,y:e.pageY}}}const Bte=e=>t=>m7(t)&&e(t,r2(t));function $y(e,t,r,n){return hv(e,t,Bte(r),n)}const E$=1e-4,$te=1-E$,zte=1+E$,N$=.01,Ute=0-N$,Wte=0+N$;function Lo(e){return e.max-e.min}function Hte(e,t,r){return Math.abs(e-t)<=r}function TA(e,t,r,n=.5){e.origin=n,e.originPoint=Ks(t.min,t.max,e.origin),e.scale=Lo(r)/Lo(t),e.translate=Ks(r.min,r.max,e.origin)-e.originPoint,(e.scale>=$te&&e.scale<=zte||isNaN(e.scale))&&(e.scale=1),(e.translate>=Ute&&e.translate<=Wte||isNaN(e.translate))&&(e.translate=0)}function zy(e,t,r,n){TA(e.x,t.x,r.x,n?n.originX:void 0),TA(e.y,t.y,r.y,n?n.originY:void 0)}function CA(e,t,r){e.min=r.min+t.min,e.max=e.min+Lo(t)}function Gte(e,t,r){CA(e.x,t.x,r.x),CA(e.y,t.y,r.y)}function EA(e,t,r){e.min=t.min-r.min,e.max=e.min+Lo(t)}function Uy(e,t,r){EA(e.x,t.x,r.x),EA(e.y,t.y,r.y)}function lc(e){return[e("x"),e("y")]}const A$=({current:e})=>e?e.ownerDocument.defaultView:null,NA=(e,t)=>Math.abs(e-t);function Vte(e,t){const r=NA(e.x,t.x),n=NA(e.y,t.y);return Math.sqrt(r**2+n**2)}class j${constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=OS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=Vte(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:y}=h,{timestamp:v}=Ui;this.history.push({...y,timestamp:v});const{onStart:T,onMove:k}=this.handlers;g||(T&&T(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,h)},this.handlePointerMove=(h,g)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=DS(g,this.transformPagePoint),Is.update(this.updatePoint,!0)},this.handlePointerUp=(h,g)=>{this.end();const{onEnd:x,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=OS(h.type==="pointercancel"?this.lastMoveEventInfo:DS(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(h,T),y&&y(h,T)},!m7(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=r2(t),l=DS(o,this.transformPagePoint),{point:u}=l,{timestamp:d}=Ui;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,OS(l,this.history)),this.removeListeners=Zv($y(this.contextWindow,"pointermove",this.handlePointerMove),$y(this.contextWindow,"pointerup",this.handlePointerUp),$y(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Df(this.updatePoint)}}function DS(e,t){return t?{point:t(e.point)}:e}function AA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function OS({point:e},t){return{point:e,delta:AA(e,P$(t)),offset:AA(e,qte(t)),velocity:Kte(t,.1)}}function qte(e){return e[0]}function P$(e){return e[e.length-1]}function Kte(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=P$(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Gu(t)));)r--;if(!n)return{x:0,y:0};const a=Vu(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function Yte(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ks(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ks(r,e,n.max):Math.min(e,r)),e}function jA(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Xte(e,{top:t,left:r,bottom:n,right:s}){return{x:jA(e.x,r,s),y:jA(e.y,t,n)}}function PA(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function Jte(e,t){return{x:PA(e.x,t.x),y:PA(e.y,t.y)}}function Qte(e,t){let r=.5;const n=Lo(e),s=Lo(t);return s>n?r=lv(t.min,t.max-n,e.min):n>s&&(r=lv(e.min,e.max-s,t.min)),s0(0,1,r)}function Zte(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Gk=.35;function ere(e=Gk){return e===!1?e=0:e===!0&&(e=Gk),{x:MA(e,"left","right"),y:MA(e,"top","bottom")}}function MA(e,t,r){return{min:FA(e,t),max:FA(e,r)}}function FA(e,t){return typeof e=="number"?e:e[t]||0}const tre=new WeakMap;class rre{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ta(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(r2(f).point)},i=(f,h)=>{const{drag:g,dragPropagation:x,onDragStart:y}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uee(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lc(T=>{let k=this.getAxisMotionValue(T).get()||0;if(qu.test(k)){const{projection:b}=this.visualElement;if(b&&b.layout){const E=b.layout.layoutBox[T];E&&(k=Lo(E)*(parseFloat(k)/100))}}this.originPoint[T]=k}),y&&Is.postRender(()=>y(f,h)),Wk(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:y,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:T}=h;if(x&&this.currentDirection===null){this.currentDirection=nre(T),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,T),this.updateAxis("y",h.point,T),this.visualElement.render(),v&&v(f,h)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>lc(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new j$(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:A$(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Is.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Uw(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=Yte(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&hp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=Xte(n.layoutBox,t):this.constraints=!1,this.elastic=ere(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&lc(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Zte(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!hp(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=ste(n,s.root,this.visualElement.getTransformPagePoint());let i=Jte(s.layout.layoutBox,a);if(r){const o=r(tte(i));this.hasMutatedConstraints=!!o,o&&(i=m$(o))}return i}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=lc(d=>{if(!Uw(d,r,this.currentDirection))return;let f=l&&l[d]||{};i&&(f={min:0,max:0});const h=s?200:1e6,g=s?40:1e7,x={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Wk(this.visualElement,t),n.start(k7(t,n,0,r,this.visualElement,!1))}stopAnimation(){lc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){lc(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){lc(r=>{const{drag:n}=this.getProps();if(!Uw(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[r];a.set(t[r]-Ks(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!hp(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};lc(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const l=o.get();s[i]=Qte({min:l,max:l},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),lc(i=>{if(!Uw(i,t,null))return;const o=this.getAxisMotionValue(i),{min:l,max:u}=this.constraints[i];o.set(Ks(l,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;tre.set(this.visualElement,this);const t=this.visualElement.current,r=$y(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();hp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Is.read(n);const i=hv(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(lc(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())}));return()=>{i(),r(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=Gk,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function Uw(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function nre(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class sre extends qf{constructor(t){super(t),this.removeGroupControls=xc,this.removeListeners=xc,this.controls=new rre(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||xc}unmount(){this.removeGroupControls(),this.removeListeners()}}const DA=e=>(t,r)=>{e&&Is.postRender(()=>e(t,r))};class are extends qf{constructor(){super(...arguments),this.removePointerDownListener=xc}onPointerDown(t){this.session=new j$(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:A$(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:DA(t),onStart:DA(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&Is.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=$y(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const zb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Cx={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Zr.test(e))e=parseFloat(e);else return e;const r=OA(e,t.target.x),n=OA(e,t.target.y);return`${r}% ${n}%`}},ire={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Of.parse(e);if(s.length>5)return n;const a=Of.createTransformer(e),i=typeof s[0]!="number"?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;s[0+i]/=o,s[1+i]/=l;const u=Ks(o,l,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let IS=!1;class ore extends _.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;Aee(lre),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),IS&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),zb.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:i}=n;return i&&(i.isPresent=a,IS=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||Is.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),h7.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;IS=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function M$(e){const[t,r]=e$(),n=_.useContext(GT);return c.jsx(ore,{...e,layoutGroup:n,switchLayoutGroup:_.useContext(f$),isPresent:t,safeToRemove:r})}const lre={borderRadius:{...Cx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Cx,borderTopRightRadius:Cx,borderBottomLeftRadius:Cx,borderBottomRightRadius:Cx,boxShadow:ire};function cre(e,t,r){const n=go(e)?e:Rp(e);return n.start(k7("",n,t,r)),n.animation}const ure=(e,t)=>e.depth-t.depth;class dre{constructor(){this.children=[],this.isDirty=!1}add(t){KT(this.children,t),this.isDirty=!0}remove(t){YT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(ure),this.isDirty=!1,this.children.forEach(t)}}function fre(e,t){const r=ol.now(),n=({timestamp:s})=>{const a=s-r;a>=t&&(Df(n),e(a-t))};return Is.setup(n,!0),()=>Df(n)}const F$=["TopLeft","TopRight","BottomLeft","BottomRight"],hre=F$.length,IA=e=>typeof e=="string"?parseFloat(e):e,RA=e=>typeof e=="number"||Zr.test(e);function mre(e,t,r,n,s,a){s?(e.opacity=Ks(0,r.opacity??1,gre(n)),e.opacityExit=Ks(t.opacity??1,0,pre(n))):a&&(e.opacity=Ks(t.opacity??1,r.opacity??1,n));for(let i=0;i<hre;i++){const o=`border${F$[i]}Radius`;let l=LA(t,o),u=LA(r,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||RA(l)===RA(u)?(e[o]=Math.max(Ks(IA(l),IA(u),n),0),(qu.test(u)||qu.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||r.rotate)&&(e.rotate=Ks(t.rotate||0,r.rotate||0,n))}function LA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const gre=D$(0,.5,wB),pre=D$(.5,.95,xc);function D$(e,t,r){return n=>n<e?0:n>t?1:r(lv(e,t,n))}function BA(e,t){e.min=t.min,e.max=t.max}function tc(e,t){BA(e.x,t.x),BA(e.y,t.y)}function $A(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function zA(e,t,r,n,s){return e-=t,e=a4(e,1/r,n),s!==void 0&&(e=a4(e,1/s,n)),e}function xre(e,t=0,r=1,n=.5,s,a=e,i=e){if(qu.test(t)&&(t=parseFloat(t),t=Ks(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=Ks(a.min,a.max,n);e===a&&(o-=t),e.min=zA(e.min,t,r,o,s),e.max=zA(e.max,t,r,o,s)}function UA(e,t,[r,n,s],a,i){xre(e,t[r],t[n],t[s],t.scale,a,i)}const yre=["x","scaleX","originX"],vre=["y","scaleY","originY"];function WA(e,t,r,n){UA(e.x,t,yre,r?r.x:void 0,n?n.x:void 0),UA(e.y,t,vre,r?r.y:void 0,n?n.y:void 0)}function HA(e){return e.translate===0&&e.scale===1}function O$(e){return HA(e.x)&&HA(e.y)}function GA(e,t){return e.min===t.min&&e.max===t.max}function wre(e,t){return GA(e.x,t.x)&&GA(e.y,t.y)}function VA(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function I$(e,t){return VA(e.x,t.x)&&VA(e.y,t.y)}function qA(e){return Lo(e.x)/Lo(e.y)}function KA(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class bre{constructor(){this.members=[]}add(t){KT(this.members,t),t.scheduleRender()}remove(t){if(YT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function _re(e,t,r){let n="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=r?.z||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:g,skewY:x}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),g&&(n+=`skewX(${g}deg) `),x&&(n+=`skewY(${x}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const RS=["","X","Y","Z"],Sre=1e3;let kre=0;function LS(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function R$(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=_$(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Is,!(s||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&R$(n)}function L$({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t?.()){this.id=kre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ere),this.nodes.forEach(Pre),this.nodes.forEach(Mre),this.nodes.forEach(Nre)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new dre)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new QT),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const l=this.eventHandlers.get(i);l&&l.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=ZB(i)&&!pee(i),this.instance=i;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;Is.read(()=>{f=window.innerWidth}),e(i,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,d&&d(),d=fre(h,250),zb.hasAnimatedSinceResize&&(zb.hasAnimatedSinceResize=!1,this.nodes.forEach(JA)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||Rre,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),T=!this.targetLayout||!I$(this.targetLayout,g),k=!f&&h;if(this.options.layoutRoot||this.resumeFrom||k||f&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...d7(x,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,k)}else f||JA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Df(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Fre),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&R$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YA);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(XA);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(jre),this.nodes.forEach(Tre),this.nodes.forEach(Cre)):this.nodes.forEach(XA),this.clearAllSnapshots();const o=ol.now();Ui.delta=s0(0,1e3/60,o-Ui.timestamp),Ui.timestamp=o,Ui.isProcessing=!0,CS.update.process(Ui),CS.preRender.process(Ui),CS.render.process(Ui),Ui.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,h7.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Are),this.sharedNodes.forEach(Dre)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Is.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Is.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Lo(this.snapshot.measuredBox.x)&&!Lo(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ta(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:l,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!O$(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||Wh(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return i&&(l=this.removeTransform(l)),Lre(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Ta();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Bre))){const{scroll:u}=this.root;u&&(mp(o.x,u.offset.x),mp(o.y,u.offset.y))}return o}removeElementScroll(i){const o=Ta();if(tc(o,i),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&tc(o,i),mp(o.x,d.offset.x),mp(o.y,d.offset.y))}return o}applyTransform(i,o=!1){const l=Ta();tc(l,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&gp(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Wh(d.latestValues)&&gp(l,d.latestValues)}return Wh(this.latestValues)&&gp(l,this.latestValues),l}removeTransform(i){const o=Ta();tc(o,i);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Wh(u.latestValues))continue;Bk(u.latestValues)&&u.updateSnapshot();const d=Ta(),f=u.measurePageBox();tc(d,f),WA(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Wh(this.latestValues)&&WA(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ui.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(i||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Ui.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ta(),this.relativeTargetOrigin=Ta(),Uy(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),tc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ta(),this.targetWithTransforms=Ta()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Gte(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tc(this.target,this.layout.layoutBox),p$(this.target,this.targetDelta)):tc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ta(),this.relativeTargetOrigin=Ta(),Uy(this.relativeTargetOrigin,this.target,h.target),tc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Bk(this.parent.latestValues)||g$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ui.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;tc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;nte(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Ta());const{target:g}=i;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($A(this.prevProjectionDelta.x,this.projectionDelta.x),$A(this.prevProjectionDelta.y,this.projectionDelta.y)),zy(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!KA(this.projectionDelta.x,this.prevProjectionDelta.x)||!KA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pp(),this.projectionDelta=pp(),this.projectionDeltaWithTransform=pp()}setAnimationOrigin(i,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},f=pp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Ta(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,y=g!==x,v=this.getStack(),T=!v||v.members.length<=1,k=!!(y&&!T&&this.options.crossfade===!0&&!this.path.some(Ire));this.animationProgress=0;let b;this.mixTargetDelta=E=>{const N=E/1e3;QA(f.x,i.x,N),QA(f.y,i.y,N),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Uy(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Ore(this.relativeTarget,this.relativeTargetOrigin,h,N),b&&wre(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=Ta()),tc(b,this.relativeTarget)),y&&(this.animationValues=d,mre(d,u,this.latestValues,N,k,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Df(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Is.update(()=>{zb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Rp(0)),this.currentAnimation=cre(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Sre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=i;if(!(!o||!l||!u)){if(this!==i&&this.layout&&u&&B$(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Ta();const f=Lo(this.layout.layoutBox.x);l.x.min=i.target.x.min,l.x.max=l.x.min+f;const h=Lo(this.layout.layoutBox.y);l.y.min=i.target.y.min,l.y.max=l.y.min+h}tc(o,l),gp(o,d),zy(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new bre),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:l}=i;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&LS("z",i,u,this.animationValues);for(let d=0;d<RS.length;d++)LS(`rotate${RS[d]}`,i,u,this.animationValues),LS(`skew${RS[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=$b(o?.pointerEvents)||"",i.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=$b(o?.pointerEvents)||""),this.hasProjected&&!Wh(this.latestValues)&&(i.transform=l?l({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=_re(this.projectionDeltaWithTransform,this.treeScale,d);l&&(f=l(d,f)),i.transform=f;const{x:h,y:g}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in fv){if(d[x]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:T}=fv[x],k=f==="none"?d[x]:y(d[x],u);if(v){const b=v.length;for(let E=0;E<b;E++)i[v[E]]=k}else T?this.options.visualElement.renderState.vars[x]=k:i[x]=k}this.options.layoutId&&(i.pointerEvents=u===this?$b(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(YA),this.root.sharedNodes.clear()}}}function Tre(e){e.updateLayout()}function Cre(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?lc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Lo(f);f.min=r[d].min,f.max=f.min+h}):B$(s,t.layoutBox,r)&&lc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Lo(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const i=pp();zy(i,r,t.layoutBox);const o=pp();a?zy(o,e.applyTransform(n,!0),t.measuredBox):zy(o,r,t.layoutBox);const l=!O$(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const g=Ta();Uy(g,t.layoutBox,f.layoutBox);const x=Ta();Uy(x,r,h.layoutBox),I$(g,x)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Ere(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Nre(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Are(e){e.clearSnapshot()}function YA(e){e.clearMeasurements()}function XA(e){e.isLayoutDirty=!1}function jre(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function JA(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Pre(e){e.resolveTargetDelta()}function Mre(e){e.calcProjection()}function Fre(e){e.resetSkewAndRotation()}function Dre(e){e.removeLeadSnapshot()}function QA(e,t,r){e.translate=Ks(t.translate,0,r),e.scale=Ks(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function ZA(e,t,r,n){e.min=Ks(t.min,r.min,n),e.max=Ks(t.max,r.max,n)}function Ore(e,t,r,n){ZA(e.x,t.x,r.x,n),ZA(e.y,t.y,r.y,n)}function Ire(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Rre={duration:.45,ease:[.4,0,.1,1]},ej=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),tj=ej("applewebkit/")&&!ej("chrome/")?Math.round:xc;function rj(e){e.min=tj(e.min),e.max=tj(e.max)}function Lre(e){rj(e.x),rj(e.y)}function B$(e,t,r){return e==="position"||e==="preserve-aspect"&&!Hte(qA(t),qA(r),.2)}function Bre(e){return e!==e.root&&e.scroll?.wasRoot}const $re=L$({attachResizeListener:(e,t)=>hv(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),BS={current:void 0},$$=L$({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!BS.current){const e=new $re({});e.mount(window),e.setOptions({layoutScroll:!0}),BS.current=e}return BS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),zre={pan:{Feature:are},drag:{Feature:sre,ProjectionNode:$$,MeasureLayout:M$}};function nj(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&Is.postRender(()=>a(t,r2(t)))}class Ure extends qf{mount(){const{current:t}=this.node;t&&(this.unmount=dee(t,(r,n)=>(nj(this.node,n,"Start"),s=>nj(this.node,s,"End"))))}unmount(){}}class Wre extends qf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zv(hv(this.node.current,"focus",()=>this.onFocus()),hv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function sj(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&Is.postRender(()=>a(t,r2(t)))}class Hre extends qf{mount(){const{current:t}=this.node;t&&(this.unmount=gee(t,(r,n)=>(sj(this.node,n,"Start"),(s,{success:a})=>sj(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vk=new WeakMap,$S=new WeakMap,Gre=e=>{const t=Vk.get(e.target);t&&t(e)},Vre=e=>{e.forEach(Gre)};function qre({root:e,...t}){const r=e||document;$S.has(r)||$S.set(r,{});const n=$S.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(Vre,{root:e,...t})),n[s]}function Kre(e,t,r){const n=qre(t);return Vk.set(e,r),n.observe(e),()=>{Vk.delete(e),n.unobserve(e)}}const Yre={some:0,all:1};class Xre extends qf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=t,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:Yre[s]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(l)};return Kre(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(Jre(t,r))&&this.startObserver()}unmount(){}}function Jre({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const Qre={inView:{Feature:Xre},tap:{Feature:Hre},focus:{Feature:Wre},hover:{Feature:Ure}},Zre={layout:{ProjectionNode:$$,MeasureLayout:M$}},ene={...Lte,...Qre,...zre,...Zre},gt=ete(ene,hte),ot=({children:e,variant:t="primary",size:r="md",onClick:n,disabled:s=!1,className:a="",...i})=>{const o="font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer",l={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",outline:"bg-transparent text-blue-600 border-2 border-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-700 focus:ring-gray-500"},u={xs:"px-2 py-1 text-xs",sm:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm",md:"px-3 py-1.5 text-sm sm:px-4 sm:py-2 sm:text-base",lg:"px-4 py-2 text-base sm:px-6 sm:py-3 sm:text-lg",icon:"p-0 flex items-center justify-center"},d=s?"opacity-50 cursor-not-allowed":"";return c.jsx(gt.button,{className:`${o} ${l[t]} ${u[r]} ${d} ${a}`,onClick:n,disabled:s,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},...i,children:e})},un=({size:e="md",color:t="blue",className:r=""})=>{const n={sm:"w-4 h-4",small:"w-4 h-4",md:"w-6 h-6",medium:"w-6 h-6",lg:"w-8 h-8",large:"w-8 h-8",xl:"w-12 h-12"},s={blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",gray:"border-gray-600"};return c.jsx(gt.div,{className:`
        inline-block border-2 border-gray-300 border-t-current rounded-full animate-spin
        ${n[e]} ${s[t]} ${r}
      `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},iu=({type:e="info",message:t="",duration:r=3e3,closable:n=!0,onClose:s,className:a="",...i})=>{const[o,l]=_.useState(!0),[u,d]=_.useState(!1),f=_.useRef(null),h=_.useRef(null);_.useEffect(()=>{if(r>0)return h.current=setTimeout(()=>{g()},r),()=>{h.current&&clearTimeout(h.current)}},[r]);const g=_.useCallback(()=>{u||(d(!0),h.current&&clearTimeout(h.current),setTimeout(()=>{l(!1),s&&s()},300))},[u,s]),x=_.useCallback(T=>{T.key==="Escape"&&g()},[g]);if(!o)return null;const y=["notification",`notification-${e}`,o?"notification-visible":"",u?"notification-exiting":"",a].filter(Boolean).join(" "),v=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return c.jsx("div",{ref:f,className:y,role:"alert","aria-live":"polite",onKeyDown:x,tabIndex:-1,...i,children:c.jsxs("div",{className:"notification-content",children:[c.jsx("div",{className:"notification-icon","aria-hidden":"true",children:v()}),c.jsx("div",{className:"notification-body",children:c.jsx("div",{className:"notification-message",children:t})}),n&&c.jsx("button",{className:"notification-close",onClick:g,type:"button","aria-label":"Close notification",children:""})]})})},ai=()=>{const[e,t]=_.useState([]),r=_.useCallback((a,i="info",o={})=>{const l=Date.now()+Math.random(),u={id:l,message:a,type:i,...o};return t(d=>[...d,u]),o.duration!==0&&setTimeout(()=>{n(l)},o.duration||3e3),l},[]),n=_.useCallback(a=>{t(i=>i.filter(o=>o.id!==a))},[]),s=_.useCallback(()=>{t([])},[]);return{notifications:e,showNotification:r,removeNotification:n,clearAllNotifications:s}},$l=()=>{const[e,t]=_.useState(!1),[r,n]=_.useState(null),[s,a]=_.useState(null),i=_.useRef(null);_.useRef(new Map);const o=_.useRef(0),l=3,u=1e3,d=_.useCallback(()=>{i.current&&(i.current.abort(),i.current=null)},[]);_.useEffect(()=>d,[d]);const f=_.useCallback(async(I,W={})=>{try{t(!0),n(null),i.current=new AbortController;const K=W.method||"POST",ee={method:K,headers:{"Content-Type":"application/json",...W.headers},signal:i.current.signal,...W};K!=="GET"&&K!=="HEAD"&&(ee.body=JSON.stringify(W.data||{})),console.log(`[API] Making request to: ${I}`,ee);const oe=await fetch(I,ee);if(!oe.ok)throw new Error(`HTTP error! status: ${oe.status}`);const Z=await oe.json();if(console.log("[API] Response received:",Z),Z.success)return a(Z),o.current=0,Z;throw new Error(Z.error||Z.message||"Request failed")}catch(K){if(K.name==="AbortError")return console.log("[API] Request was aborted"),null;if(console.error("[API] Request failed:",K),n(K.message||"Request failed"),o.current<l){o.current++;const ee=u*Math.pow(2,o.current-1);return console.log(`[API] Retrying in ${ee}ms (attempt ${o.current}/${l})`),await new Promise(oe=>setTimeout(oe,ee)),f(I,W)}throw K}finally{t(!1),i.current=null}},[]),h=_.useCallback(async(I,W={})=>{try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())throw new Error("No valid authentication token found");return await window.tokenManager.makeAuthenticatedRequest(I,W)}catch(K){throw console.error("[API] Authenticated request failed:",K),K}},[]),g=_.useCallback(async(I,W)=>{try{const K=`/.netlify/functions/get-test-questions?test_type=${I}&test_id=${W}`;console.log(`[API] Getting test info for ${I}_${W}`);const oe=await(await h(K)).json();if(oe.success)return console.log("[API] Test info retrieved successfully:",oe.test_info),oe.test_info;throw new Error(oe.error||"Failed to get test info")}catch(K){throw console.error("[API] Failed to get test info:",K),K}},[h]),x=_.useCallback(async(I,W)=>{try{const K=`/.netlify/functions/get-test-questions?test_type=${I}&test_id=${W}`;console.log(`[API] Getting test questions for ${I}_${W}`);const oe=await(await h(K)).json();if(oe.success)return console.log("[API] Test questions retrieved successfully:",oe.questions),oe.questions;throw new Error(oe.error||"Failed to get test questions")}catch(K){throw console.error("[API] Failed to get test questions:",K),K}},[h]),y=_.useCallback(async()=>{try{const I="/.netlify/functions/get-student-active-tests";console.log("[API] Loading student active tests");const K=await(await h(I)).json();if(K.success)return console.log("[API] Student active tests loaded successfully:",K.tests),K.tests;throw new Error(K.error||"Failed to load student active tests")}catch(I){throw console.error("[API] Failed to load student active tests:",I),I}},[h]),v=_.useCallback(async(I,W,K)=>{try{let ee;switch(I){case"true_false":ee="/.netlify/functions/submit-true-false-test";break;case"multiple_choice":ee="/.netlify/functions/submit-multiple-choice-test";break;case"input":ee="/.netlify/functions/submit-input-test";break;case"matching_type":ee="/.netlify/functions/submit-matching-type-test";break;case"speaking":ee="/.netlify/functions/submit-speaking-test";break;default:throw new Error(`Unknown test type: ${I}`)}console.log(`[API] Submitting ${I} test:`,K);const Z=await(await h(ee,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})).json();if(Z.success)return console.log("[API] Test submitted successfully:",Z),Z;throw new Error(Z.error||"Failed to submit test")}catch(ee){throw console.error("[API] Failed to submit test:",ee),ee}},[h]),T=_.useCallback(async I=>{try{const W="/.netlify/functions/save-multiple-choice-test";console.log("[API] Saving multiple choice test:",I);const ee=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(ee.success)return console.log("[API] Multiple choice test saved successfully:",ee),ee;throw new Error(ee.error||"Failed to save multiple choice test")}catch(W){throw console.error("[API] Failed to save multiple choice test:",W),W}},[h]),k=_.useCallback(async I=>{try{const W="/.netlify/functions/save-true-false-test";console.log("[API] Saving true/false test:",I);const ee=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(ee.success)return console.log("[API] True/false test saved successfully:",ee),ee;throw new Error(ee.error||"Failed to save true/false test")}catch(W){throw console.error("[API] Failed to save true/false test:",W),W}},[h]),b=_.useCallback(async I=>{try{const W="/.netlify/functions/save-input-test";console.log("[API] Saving input test:",I);const ee=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(ee.success)return console.log("[API] Input test saved successfully:",ee),ee;throw new Error(ee.error||"Failed to save input test")}catch(W){throw console.error("[API] Failed to save input test:",W),W}},[h]),E=_.useCallback(async I=>{try{const W="/.netlify/functions/assign-test";console.log("[API] Assigning test to classes:",I);const ee=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(ee.success)return console.log("[API] Test assigned successfully:",ee),ee;throw new Error(ee.error||"Failed to assign test")}catch(W){throw console.error("[API] Failed to assign test:",W),W}},[h]),N=_.useCallback(async()=>{try{const I="/.netlify/functions/get-teacher-active-tests";console.log("[API] Loading teacher active tests");const K=await(await h(I)).json();if(K.success)return console.log("[API] Teacher active tests loaded successfully:",K.tests),K.tests;throw new Error(K.error||"Failed to load teacher active tests")}catch(I){throw console.error("[API] Failed to load teacher active tests:",I),I}},[h]),P=_.useCallback(async()=>{try{const I="/.netlify/functions/get-all-users";console.log("[API] Getting all users");const K=await(await h(I)).json();if(K.success)return console.log("[API] All users loaded successfully:",K.users),K.users;throw new Error(K.error||"Failed to get all users")}catch(I){throw console.error("[API] Failed to get all users:",I),I}},[h]),M=_.useCallback(async()=>{try{const I="/.netlify/functions/get-all-teachers";console.log("[API] Getting all teachers");const K=await(await h(I)).json();if(K.success)return console.log("[API] All teachers loaded successfully:",K.teachers),K.teachers;throw new Error(K.error||"Failed to get all teachers")}catch(I){throw console.error("[API] Failed to get all teachers:",I),I}},[h]),j=_.useCallback(async()=>{try{const I="/.netlify/functions/get-all-subjects";console.log("[API] Getting all subjects");const K=await(await h(I)).json();if(K.success)return console.log("[API] All subjects loaded successfully:",K.subjects),K.subjects;throw new Error(K.error||"Failed to get all subjects")}catch(I){throw console.error("[API] Failed to get all subjects:",I),I}},[h]),A=_.useCallback(()=>{n(null)},[]),D=_.useCallback(()=>{a(null)},[]),L=_.useCallback(()=>{t(!1),n(null),a(null),o.current=0,d()},[d]),G=_.useCallback(async(I,W={})=>{const ee=await(await h(I,{...W,method:"GET"})).json();if(ee.success)return ee;throw new Error(ee.error||"Request failed")},[h]),X=_.useCallback(async(I,W,K={})=>{const oe=await(await h(I,{...K,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).json();if(oe.success)return oe;throw new Error(oe.error||"Request failed")},[h]),se=_.useCallback(async(I,W,K={})=>{const oe=await(await h(I,{...K,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).json();if(oe.success)return oe;throw new Error(oe.error||"Request failed")},[h]),Q=_.useCallback(async(I,W={})=>{const ee=await(await h(I,{...W,method:"DELETE"})).json();if(ee.success)return ee;throw new Error(ee.error||"Request failed")},[h]),re=_.useCallback(async I=>{try{const W="/.netlify/functions/submit-speaking-test";console.log("[API] Submitting speaking test:",I);const ee=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(ee.success)return console.log("[API] Speaking test submitted successfully:",ee),ee;throw new Error(ee.error||"Failed to submit speaking test")}catch(W){throw console.error("[API] Failed to submit speaking test:",W),W}},[h]),B=_.useCallback(async I=>{try{const W=`/.netlify/functions/get-speaking-test-new?action=test&test_id=${I}`;console.log("[API] Getting speaking test:",I);const ee=await(await h(W,{method:"GET"})).json();if(ee.success)return console.log("[API] Speaking test loaded successfully:",ee),ee;throw new Error(ee.error||"Failed to load speaking test")}catch(W){throw console.error("[API] Failed to load speaking test:",W),W}},[h]),V=_.useCallback(async I=>{try{const W=`/.netlify/functions/get-speaking-test-new?action=questions&test_id=${I}`;console.log("[API] Getting speaking test questions:",I);const ee=await(await h(W,{method:"GET"})).json();if(ee.success)return console.log("[API] Speaking test questions loaded successfully:",ee),ee;throw new Error(ee.error||"Failed to load speaking test questions")}catch(W){throw console.error("[API] Failed to load speaking test questions:",W),W}},[h]),R=_.useCallback(async I=>{try{const W="/.netlify/functions/upload-speaking-audio";console.log("[API] Uploading speaking audio");const ee=await(await h(W,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(ee.success)return console.log("[API] Audio uploaded successfully:",ee),ee;throw new Error(ee.error||"Failed to upload audio")}catch(W){throw console.error("[API] Failed to upload audio:",W),W}},[h]),H=_.useCallback(async I=>{try{const W=`/.netlify/functions/get-speaking-test-new?action=audio&file_path=${encodeURIComponent(I)}`;console.log("[API] Getting speaking audio:",I);const ee=await(await h(W,{method:"GET"})).json();if(ee.success)return console.log("[API] Audio URL retrieved successfully:",ee),ee;throw new Error(ee.error||"Failed to get audio")}catch(W){throw console.error("[API] Failed to get audio:",W),W}},[h]),z=_.useCallback(async(I,W)=>{try{const K=`/.netlify/functions/check-test-completion?test_id=${I}&test_type=${W}`;console.log("[API] Checking test completion:",I,W);const oe=await(await h(K,{method:"GET"})).json();if(oe.success)return console.log("[API] Test completion status:",oe),oe;throw new Error(oe.error||"Failed to check test completion")}catch(K){throw console.error("[API] Failed to check test completion:",K),K}},[h]);return{loading:e,error:r,data:s,sendRequest:f,makeAuthenticatedRequest:h,get:G,post:X,put:se,delete:Q,getTestInfo:g,getTestQuestions:x,loadStudentActiveTests:y,submitTest:v,submitSpeakingTest:re,getSpeakingTest:B,getSpeakingTestQuestions:V,uploadSpeakingAudio:R,getSpeakingAudio:H,checkTestCompletion:z,saveMultipleChoiceTest:T,saveTrueFalseTest:k,saveInputTest:b,assignTestToClasses:E,loadTeacherActiveTests:N,getAllUsers:P,getAllTeachers:M,getAllSubjects:j,clearError:A,clearData:D,reset:L,cleanup:d}},tne="modulepreload",rne=function(e){return"/"+e},aj={},Za=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var i=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=u(r.map(d=>{if(d=rne(d),d in aj)return;aj[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":tne,f||(g.as="script"),g.crossOrigin="",g.href=d,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((x,y)=>{g.addEventListener("load",x),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};var Ub={exports:{}},Ex={},zS={},US={},ij;function kn(){return ij||(ij=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof Zb<"u"?Zb:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:r(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(US)),US}var WS={},oj;function ga(){return oj||(oj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=kn();class r{constructor(E=[1,0,0,1,0,0]){this.dirty=!1,this.m=E&&E.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(E){E.m[0]=this.m[0],E.m[1]=this.m[1],E.m[2]=this.m[2],E.m[3]=this.m[3],E.m[4]=this.m[4],E.m[5]=this.m[5]}point(E){const N=this.m;return{x:N[0]*E.x+N[2]*E.y+N[4],y:N[1]*E.x+N[3]*E.y+N[5]}}translate(E,N){return this.m[4]+=this.m[0]*E+this.m[2]*N,this.m[5]+=this.m[1]*E+this.m[3]*N,this}scale(E,N){return this.m[0]*=E,this.m[1]*=E,this.m[2]*=N,this.m[3]*=N,this}rotate(E){const N=Math.cos(E),P=Math.sin(E),M=this.m[0]*N+this.m[2]*P,j=this.m[1]*N+this.m[3]*P,A=this.m[0]*-P+this.m[2]*N,D=this.m[1]*-P+this.m[3]*N;return this.m[0]=M,this.m[1]=j,this.m[2]=A,this.m[3]=D,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(E,N){const P=this.m[0]+this.m[2]*N,M=this.m[1]+this.m[3]*N,j=this.m[2]+this.m[0]*E,A=this.m[3]+this.m[1]*E;return this.m[0]=P,this.m[1]=M,this.m[2]=j,this.m[3]=A,this}multiply(E){const N=this.m[0]*E.m[0]+this.m[2]*E.m[1],P=this.m[1]*E.m[0]+this.m[3]*E.m[1],M=this.m[0]*E.m[2]+this.m[2]*E.m[3],j=this.m[1]*E.m[2]+this.m[3]*E.m[3],A=this.m[0]*E.m[4]+this.m[2]*E.m[5]+this.m[4],D=this.m[1]*E.m[4]+this.m[3]*E.m[5]+this.m[5];return this.m[0]=N,this.m[1]=P,this.m[2]=M,this.m[3]=j,this.m[4]=A,this.m[5]=D,this}invert(){const E=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),N=this.m[3]*E,P=-this.m[1]*E,M=-this.m[2]*E,j=this.m[0]*E,A=E*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),D=E*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=N,this.m[1]=P,this.m[2]=M,this.m[3]=j,this.m[4]=A,this.m[5]=D,this}getMatrix(){return this.m}decompose(){const E=this.m[0],N=this.m[1],P=this.m[2],M=this.m[3],j=this.m[4],A=this.m[5],D=E*M-N*P,L={x:j,y:A,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(E!=0||N!=0){const G=Math.sqrt(E*E+N*N);L.rotation=N>0?Math.acos(E/G):-Math.acos(E/G),L.scaleX=G,L.scaleY=D/G,L.skewX=(E*P+N*M)/D,L.skewY=0}else if(P!=0||M!=0){const G=Math.sqrt(P*P+M*M);L.rotation=Math.PI/2-(M>0?Math.acos(-P/G):-Math.acos(P/G)),L.scaleX=D/G,L.scaleY=G,L.skewX=0,L.skewY=(E*P+N*M)/D}return L.rotation=e.Util._getRotation(L.rotation),L}}e.Transform=r;const n="[object Array]",s="[object Number]",a="[object String]",i="[object Boolean]",o=Math.PI/180,l=180/Math.PI,u="#",d="",f="0",h="Konva warning: ",g="Konva error: ",x="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let T=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(b){setTimeout(b,60)};e.Util={_isElement(b){return!!(b&&b.nodeType==1)},_isFunction(b){return!!(b&&b.constructor&&b.call&&b.apply)},_isPlainObject(b){return!!b&&b.constructor===Object},_isArray(b){return Object.prototype.toString.call(b)===n},_isNumber(b){return Object.prototype.toString.call(b)===s&&!isNaN(b)&&isFinite(b)},_isString(b){return Object.prototype.toString.call(b)===a},_isBoolean(b){return Object.prototype.toString.call(b)===i},isObject(b){return b instanceof Object},isValidSelector(b){if(typeof b!="string")return!1;const E=b[0];return E==="#"||E==="."||E===E.toUpperCase()},_sign(b){return b===0||b>0?1:-1},requestAnimFrame(b){T.push(b),T.length===1&&k(function(){const E=T;T=[],E.forEach(function(N){N()})})},createCanvasElement(){const b=document.createElement("canvas");try{b.style=b.style||{}}catch{}return b},createImageElement(){return document.createElement("img")},_isInDocument(b){for(;b=b.parentNode;)if(b==document)return!0;return!1},_urlToImage(b,E){const N=e.Util.createImageElement();N.onload=function(){E(N)},N.src=b},_rgbToHex(b,E,N){return((1<<24)+(b<<16)+(E<<8)+N).toString(16).slice(1)},_hexToRgb(b){b=b.replace(u,d);const E=parseInt(b,16);return{r:E>>16&255,g:E>>8&255,b:E&255}},getRandomColor(){let b=(Math.random()*16777215<<0).toString(16);for(;b.length<6;)b=f+b;return u+b},getRGB(b){let E;return b in y?(E=y[b],{r:E[0],g:E[1],b:E[2]}):b[0]===u?this._hexToRgb(b.substring(1)):b.substr(0,4)===x?(E=v.exec(b.replace(/ /g,"")),{r:parseInt(E[1],10),g:parseInt(E[2],10),b:parseInt(E[3],10)}):{r:0,g:0,b:0}},colorToRGBA(b){return b=b||"black",e.Util._namedColorToRBA(b)||e.Util._hex3ColorToRGBA(b)||e.Util._hex4ColorToRGBA(b)||e.Util._hex6ColorToRGBA(b)||e.Util._hex8ColorToRGBA(b)||e.Util._rgbColorToRGBA(b)||e.Util._rgbaColorToRGBA(b)||e.Util._hslColorToRGBA(b)},_namedColorToRBA(b){const E=y[b.toLowerCase()];return E?{r:E[0],g:E[1],b:E[2],a:1}:null},_rgbColorToRGBA(b){if(b.indexOf("rgb(")===0){b=b.match(/rgb\(([^)]+)\)/)[1];const E=b.split(/ *, */).map(Number);return{r:E[0],g:E[1],b:E[2],a:1}}},_rgbaColorToRGBA(b){if(b.indexOf("rgba(")===0){b=b.match(/rgba\(([^)]+)\)/)[1];const E=b.split(/ *, */).map((N,P)=>N.slice(-1)==="%"?P===3?parseInt(N)/100:parseInt(N)/100*255:Number(N));return{r:E[0],g:E[1],b:E[2],a:E[3]}}},_hex8ColorToRGBA(b){if(b[0]==="#"&&b.length===9)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:parseInt(b.slice(7,9),16)/255}},_hex6ColorToRGBA(b){if(b[0]==="#"&&b.length===7)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:1}},_hex4ColorToRGBA(b){if(b[0]==="#"&&b.length===5)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:parseInt(b[4]+b[4],16)/255}},_hex3ColorToRGBA(b){if(b[0]==="#"&&b.length===4)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:1}},_hslColorToRGBA(b){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(b)){const[E,...N]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b),P=Number(N[0])/360,M=Number(N[1])/100,j=Number(N[2])/100;let A,D,L;if(M===0)return L=j*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};j<.5?A=j*(1+M):A=j+M-j*M;const G=2*j-A,X=[0,0,0];for(let se=0;se<3;se++)D=P+1/3*-(se-1),D<0&&D++,D>1&&D--,6*D<1?L=G+(A-G)*6*D:2*D<1?L=A:3*D<2?L=G+(A-G)*(2/3-D)*6:L=G,X[se]=L*255;return{r:Math.round(X[0]),g:Math.round(X[1]),b:Math.round(X[2]),a:1}}},haveIntersection(b,E){return!(E.x>b.x+b.width||E.x+E.width<b.x||E.y>b.y+b.height||E.y+E.height<b.y)},cloneObject(b){const E={};for(const N in b)this._isPlainObject(b[N])?E[N]=this.cloneObject(b[N]):this._isArray(b[N])?E[N]=this.cloneArray(b[N]):E[N]=b[N];return E},cloneArray(b){return b.slice(0)},degToRad(b){return b*o},radToDeg(b){return b*l},_degToRad(b){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(b)},_radToDeg(b){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(b)},_getRotation(b){return t.Konva.angleDeg?e.Util.radToDeg(b):b},_capitalize(b){return b.charAt(0).toUpperCase()+b.slice(1)},throw(b){throw new Error(g+b)},error(b){console.error(g+b)},warn(b){t.Konva.showWarnings&&console.warn(h+b)},each(b,E){for(const N in b)E(N,b[N])},_inRange(b,E,N){return E<=b&&b<N},_getProjectionToSegment(b,E,N,P,M,j){let A,D,L;const G=(b-N)*(b-N)+(E-P)*(E-P);if(G==0)A=b,D=E,L=(M-N)*(M-N)+(j-P)*(j-P);else{const X=((M-b)*(N-b)+(j-E)*(P-E))/G;X<0?(A=b,D=E,L=(b-M)*(b-M)+(E-j)*(E-j)):X>1?(A=N,D=P,L=(N-M)*(N-M)+(P-j)*(P-j)):(A=b+X*(N-b),D=E+X*(P-E),L=(A-M)*(A-M)+(D-j)*(D-j))}return[A,D,L]},_getProjectionToLine(b,E,N){const P=e.Util.cloneObject(b);let M=Number.MAX_VALUE;return E.forEach(function(j,A){if(!N&&A===E.length-1)return;const D=E[(A+1)%E.length],L=e.Util._getProjectionToSegment(j.x,j.y,D.x,D.y,b.x,b.y),G=L[0],X=L[1],se=L[2];se<M&&(P.x=G,P.y=X,M=se)}),P},_prepareArrayForTween(b,E,N){const P=[],M=[];if(b.length>E.length){const A=E;E=b,b=A}for(let A=0;A<b.length;A+=2)P.push({x:b[A],y:b[A+1]});for(let A=0;A<E.length;A+=2)M.push({x:E[A],y:E[A+1]});const j=[];return M.forEach(function(A){const D=e.Util._getProjectionToLine(A,P,N);j.push(D.x),j.push(D.y)}),j},_prepareToStringify(b){let E;b.visitedByCircularReferenceRemoval=!0;for(const N in b)if(b.hasOwnProperty(N)&&b[N]&&typeof b[N]=="object"){if(E=Object.getOwnPropertyDescriptor(b,N),b[N].visitedByCircularReferenceRemoval||e.Util._isElement(b[N]))if(E.configurable)delete b[N];else return null;else if(e.Util._prepareToStringify(b[N])===null)if(E.configurable)delete b[N];else return null}return delete b.visitedByCircularReferenceRemoval,b},_assign(b,E){for(const N in E)b[N]=E[N];return b},_getFirstPointerId(b){return b.touches?b.changedTouches[0].identifier:b.pointerId||999},releaseCanvas(...b){t.Konva.releaseCanvasOnDestroy&&b.forEach(E=>{E.width=0,E.height=0})},drawRoundedRectPath(b,E,N,P){let M=0,j=0,A=0,D=0;typeof P=="number"?M=j=A=D=Math.min(P,E/2,N/2):(M=Math.min(P[0]||0,E/2,N/2),j=Math.min(P[1]||0,E/2,N/2),D=Math.min(P[2]||0,E/2,N/2),A=Math.min(P[3]||0,E/2,N/2)),b.moveTo(M,0),b.lineTo(E-j,0),b.arc(E-j,j,j,Math.PI*3/2,0,!1),b.lineTo(E,N-D),b.arc(E-D,N-D,D,0,Math.PI/2,!1),b.lineTo(A,N),b.arc(A,N-A,A,Math.PI/2,Math.PI,!1),b.lineTo(0,M),b.arc(M,M,M,Math.PI,Math.PI*3/2,!1)}}})(WS)),WS}var Nx={},Md={},Fd={},lj;function z$(){if(lj)return Fd;lj=1,Object.defineProperty(Fd,"__esModule",{value:!0}),Fd.HitContext=Fd.SceneContext=Fd.Context=void 0;const e=ga(),t=kn();function r(T){const k=[],b=T.length,E=e.Util;for(let N=0;N<b;N++){let P=T[N];E._isNumber(P)?P=Math.round(P*1e3)/1e3:E._isString(P)||(P=P+""),k.push(P)}return k}const n=",",s="(",a=")",i="([",o="])",l=";",u="()",d="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],h=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],g=100;let x=class{constructor(k){this.canvas=k,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(k){k.fillEnabled()&&this._fill(k)}_fill(k){}strokeShape(k){k.hasStroke()&&this._stroke(k)}_stroke(k){}fillStrokeShape(k){k.attrs.fillAfterStrokeEnabled?(this.strokeShape(k),this.fillShape(k)):(this.fillShape(k),this.strokeShape(k))}getTrace(k,b){let E=this.traceArr,N=E.length,P="",M,j,A,D;for(M=0;M<N;M++)j=E[M],A=j.method,A?(D=j.args,P+=A,k?P+=u:e.Util._isArray(D[0])?P+=i+D.join(n)+o:(b&&(D=D.map(L=>typeof L=="number"?Math.floor(L):L)),P+=s+D.join(n)+a)):(P+=j.property,k||(P+=d+j.val)),P+=l;return P}clearTrace(){this.traceArr=[]}_trace(k){let b=this.traceArr,E;b.push(k),E=b.length,E>=g&&b.shift()}reset(){const k=this.getCanvas().getPixelRatio();this.setTransform(1*k,0,0,1*k,0,0)}getCanvas(){return this.canvas}clear(k){const b=this.getCanvas();k?this.clearRect(k.x||0,k.y||0,k.width||0,k.height||0):this.clearRect(0,0,b.getWidth()/b.pixelRatio,b.getHeight()/b.pixelRatio)}_applyLineCap(k){const b=k.attrs.lineCap;b&&this.setAttr("lineCap",b)}_applyOpacity(k){const b=k.getAbsoluteOpacity();b!==1&&this.setAttr("globalAlpha",b)}_applyLineJoin(k){const b=k.attrs.lineJoin;b&&this.setAttr("lineJoin",b)}setAttr(k,b){this._context[k]=b}arc(k,b,E,N,P,M){this._context.arc(k,b,E,N,P,M)}arcTo(k,b,E,N,P){this._context.arcTo(k,b,E,N,P)}beginPath(){this._context.beginPath()}bezierCurveTo(k,b,E,N,P,M){this._context.bezierCurveTo(k,b,E,N,P,M)}clearRect(k,b,E,N){this._context.clearRect(k,b,E,N)}clip(...k){this._context.clip.apply(this._context,k)}closePath(){this._context.closePath()}createImageData(k,b){const E=arguments;if(E.length===2)return this._context.createImageData(k,b);if(E.length===1)return this._context.createImageData(k)}createLinearGradient(k,b,E,N){return this._context.createLinearGradient(k,b,E,N)}createPattern(k,b){return this._context.createPattern(k,b)}createRadialGradient(k,b,E,N,P,M){return this._context.createRadialGradient(k,b,E,N,P,M)}drawImage(k,b,E,N,P,M,j,A,D){const L=arguments,G=this._context;L.length===3?G.drawImage(k,b,E):L.length===5?G.drawImage(k,b,E,N,P):L.length===9&&G.drawImage(k,b,E,N,P,M,j,A,D)}ellipse(k,b,E,N,P,M,j,A){this._context.ellipse(k,b,E,N,P,M,j,A)}isPointInPath(k,b,E,N){return E?this._context.isPointInPath(E,k,b,N):this._context.isPointInPath(k,b,N)}fill(...k){this._context.fill.apply(this._context,k)}fillRect(k,b,E,N){this._context.fillRect(k,b,E,N)}strokeRect(k,b,E,N){this._context.strokeRect(k,b,E,N)}fillText(k,b,E,N){N?this._context.fillText(k,b,E,N):this._context.fillText(k,b,E)}measureText(k){return this._context.measureText(k)}getImageData(k,b,E,N){return this._context.getImageData(k,b,E,N)}lineTo(k,b){this._context.lineTo(k,b)}moveTo(k,b){this._context.moveTo(k,b)}rect(k,b,E,N){this._context.rect(k,b,E,N)}roundRect(k,b,E,N,P){this._context.roundRect(k,b,E,N,P)}putImageData(k,b,E){this._context.putImageData(k,b,E)}quadraticCurveTo(k,b,E,N){this._context.quadraticCurveTo(k,b,E,N)}restore(){this._context.restore()}rotate(k){this._context.rotate(k)}save(){this._context.save()}scale(k,b){this._context.scale(k,b)}setLineDash(k){this._context.setLineDash?this._context.setLineDash(k):"mozDash"in this._context?this._context.mozDash=k:"webkitLineDash"in this._context&&(this._context.webkitLineDash=k)}getLineDash(){return this._context.getLineDash()}setTransform(k,b,E,N,P,M){this._context.setTransform(k,b,E,N,P,M)}stroke(k){k?this._context.stroke(k):this._context.stroke()}strokeText(k,b,E,N){this._context.strokeText(k,b,E,N)}transform(k,b,E,N,P,M){this._context.transform(k,b,E,N,P,M)}translate(k,b){this._context.translate(k,b)}_enableTrace(){let k=this,b=f.length,E=this.setAttr,N,P;const M=function(j){let A=k[j],D;k[j]=function(){return P=r(Array.prototype.slice.call(arguments,0)),D=A.apply(k,arguments),k._trace({method:j,args:P}),D}};for(N=0;N<b;N++)M(f[N]);k.setAttr=function(){E.apply(k,arguments);const j=arguments[0];let A=arguments[1];(j==="shadowOffsetX"||j==="shadowOffsetY"||j==="shadowBlur")&&(A=A/this.canvas.getPixelRatio()),k._trace({property:j,val:A})}}_applyGlobalCompositeOperation(k){const b=k.attrs.globalCompositeOperation;!b||b==="source-over"||this.setAttr("globalCompositeOperation",b)}};Fd.Context=x,h.forEach(function(T){Object.defineProperty(x.prototype,T,{get(){return this._context[T]},set(k){this._context[T]=k}})});class y extends x{constructor(k,{willReadFrequently:b=!1}={}){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:b})}_fillColor(k){const b=k.fill();this.setAttr("fillStyle",b),k._fillFunc(this)}_fillPattern(k){this.setAttr("fillStyle",k._getFillPattern()),k._fillFunc(this)}_fillLinearGradient(k){const b=k._getLinearGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fillRadialGradient(k){const b=k._getRadialGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fill(k){const b=k.fill(),E=k.getFillPriority();if(b&&E==="color"){this._fillColor(k);return}const N=k.getFillPatternImage();if(N&&E==="pattern"){this._fillPattern(k);return}const P=k.getFillLinearGradientColorStops();if(P&&E==="linear-gradient"){this._fillLinearGradient(k);return}const M=k.getFillRadialGradientColorStops();if(M&&E==="radial-gradient"){this._fillRadialGradient(k);return}b?this._fillColor(k):N?this._fillPattern(k):P?this._fillLinearGradient(k):M&&this._fillRadialGradient(k)}_strokeLinearGradient(k){const b=k.getStrokeLinearGradientStartPoint(),E=k.getStrokeLinearGradientEndPoint(),N=k.getStrokeLinearGradientColorStops(),P=this.createLinearGradient(b.x,b.y,E.x,E.y);if(N){for(let M=0;M<N.length;M+=2)P.addColorStop(N[M],N[M+1]);this.setAttr("strokeStyle",P)}}_stroke(k){const b=k.dash(),E=k.getStrokeScaleEnabled();if(k.hasStroke()){if(!E){this.save();const P=this.getCanvas().getPixelRatio();this.setTransform(P,0,0,P,0,0)}this._applyLineCap(k),b&&k.dashEnabled()&&(this.setLineDash(b),this.setAttr("lineDashOffset",k.dashOffset())),this.setAttr("lineWidth",k.strokeWidth()),k.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),k.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(k):this.setAttr("strokeStyle",k.stroke()),k._strokeFunc(this),E||this.restore()}}_applyShadow(k){var b,E,N;const P=(b=k.getShadowRGBA())!==null&&b!==void 0?b:"black",M=(E=k.getShadowBlur())!==null&&E!==void 0?E:5,j=(N=k.getShadowOffset())!==null&&N!==void 0?N:{x:0,y:0},A=k.getAbsoluteScale(),D=this.canvas.getPixelRatio(),L=A.x*D,G=A.y*D;this.setAttr("shadowColor",P),this.setAttr("shadowBlur",M*Math.min(Math.abs(L),Math.abs(G))),this.setAttr("shadowOffsetX",j.x*L),this.setAttr("shadowOffsetY",j.y*G)}}Fd.SceneContext=y;class v extends x{constructor(k){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:!0})}_fill(k){this.save(),this.setAttr("fillStyle",k.colorKey),k._fillFuncHit(this),this.restore()}strokeShape(k){k.hasHitStroke()&&this._stroke(k)}_stroke(k){if(k.hasHitStroke()){const b=k.getStrokeScaleEnabled();if(!b){this.save();const P=this.getCanvas().getPixelRatio();this.setTransform(P,0,0,P,0,0)}this._applyLineCap(k);const E=k.hitStrokeWidth(),N=E==="auto"?k.strokeWidth():E;this.setAttr("lineWidth",N),this.setAttr("strokeStyle",k.colorKey),k._strokeFuncHit(this),b||this.restore()}}}return Fd.HitContext=v,Fd}var cj;function F_(){if(cj)return Md;cj=1,Object.defineProperty(Md,"__esModule",{value:!0}),Md.HitCanvas=Md.SceneCanvas=Md.Canvas=void 0;const e=ga(),t=z$(),r=kn();let n;function s(){if(n)return n;const l=e.Util.createCanvasElement(),u=l.getContext("2d");return n=(function(){const d=r.Konva._global.devicePixelRatio||1,f=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return d/f})(),e.Util.releaseCanvas(l),n}let a=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const f=(u||{}).pixelRatio||r.Konva.pixelRatio||s();this.pixelRatio=f,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const d=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,d){this.setWidth(u||0),this.setHeight(d||0)}toDataURL(u,d){try{return this._canvas.toDataURL(u,d)}catch{try{return this._canvas.toDataURL()}catch(h){return e.Util.error("Unable to get data URL. "+h.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};Md.Canvas=a;class i extends a{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new t.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}Md.SceneCanvas=i;class o extends a{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(u.width,u.height)}}return Md.HitCanvas=o,Md}var HS={},uj;function T7(){return uj||(uj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=kn(),r=ga();e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((a,i)=>{const{node:o}=a,l=o.getStage();l.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=r.Util._getFirstPointerId(n));const u=l._changedPointerPositions.find(d=>d.id===a.pointerId);if(u){if(a.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(u.x-a.startPointerPos.x),Math.abs(u.y-a.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,a),s.push(o)}}),s.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(a=>{const{node:i}=a,o=i.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const u=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;u&&s.indexOf(u)===-1&&s.push(u)}),s.forEach(a=>{a.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,a)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(HS)),HS}var GS={},tl={},dj;function Mn(){if(dj)return tl;dj=1,Object.defineProperty(tl,"__esModule",{value:!0}),tl.RGBComponent=n,tl.alphaComponent=s,tl.getNumberValidator=a,tl.getNumberOrArrayOfNumbersValidator=i,tl.getNumberOrAutoValidator=o,tl.getStringValidator=l,tl.getStringOrGradientValidator=u,tl.getFunctionValidator=d,tl.getNumberArrayValidator=f,tl.getBooleanValidator=h,tl.getComponentValidator=g;const e=kn(),t=ga();function r(x){return t.Util._isString(x)?'"'+x+'"':Object.prototype.toString.call(x)==="[object Number]"||t.Util._isBoolean(x)?x:Object.prototype.toString.call(x)}function n(x){return x>255?255:x<0?0:Math.round(x)}function s(x){return x>1?1:x<1e-4?1e-4:x}function a(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),x}}function i(x){if(e.Konva.isUnminified)return function(y,v){let T=t.Util._isNumber(y),k=t.Util._isArray(y)&&y.length==x;return!T&&!k&&t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+x+")"),y}}function o(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isNumber(x)||x==="auto"||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),x}}function l(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isString(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),x}}function u(){if(e.Konva.isUnminified)return function(x,y){const v=t.Util._isString(x),T=Object.prototype.toString.call(x)==="[object CanvasGradient]"||x&&x.addColorStop;return v||T||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),x}}function d(){if(e.Konva.isUnminified)return function(x,y){return t.Util._isFunction(x)||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),x}}function f(){if(e.Konva.isUnminified)return function(x,y){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&x instanceof v||(t.Util._isArray(x)?x.forEach(function(T){t.Util._isNumber(T)||t.Util.warn('"'+y+'" attribute has non numeric element '+T+". Make sure that all elements are numbers.")}):t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),x}}function h(){if(e.Konva.isUnminified)return function(x,y){return x===!0||x===!1||t.Util.warn(r(x)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),x}}function g(x){if(e.Konva.isUnminified)return function(y,v){return y==null||t.Util.isObject(y)||t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+x),y}}return tl}var fj;function Nn(){return fj||(fj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=ga(),r=Mn(),n="get",s="set";e.Factory={addGetterSetter(a,i,o,l,u){e.Factory.addGetter(a,i,o),e.Factory.addSetter(a,i,l,u),e.Factory.addOverloadedGetterSetter(a,i)},addGetter(a,i,o){const l=n+t.Util._capitalize(i);a.prototype[l]=a.prototype[l]||function(){const u=this.attrs[i];return u===void 0?o:u}},addSetter(a,i,o,l){const u=s+t.Util._capitalize(i);a.prototype[u]||e.Factory.overWriteSetter(a,i,o,l)},overWriteSetter(a,i,o,l){const u=s+t.Util._capitalize(i);a.prototype[u]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,i)),this._setAttr(i,d),l&&l.call(this),this}},addComponentsGetterSetter(a,i,o,l,u){const d=o.length,f=t.Util._capitalize,h=n+f(i),g=s+f(i);a.prototype[h]=function(){const y={};for(let v=0;v<d;v++){const T=o[v];y[T]=this.getAttr(i+f(T))}return y};const x=(0,r.getComponentValidator)(o);a.prototype[g]=function(y){const v=this.attrs[i];l&&(y=l.call(this,y,i)),x&&x.call(this,y,i);for(const T in y)y.hasOwnProperty(T)&&this._setAttr(i+f(T),y[T]);return y||o.forEach(T=>{this._setAttr(i+f(T),void 0)}),this._fireChangeEvent(i,v,y),u&&u.call(this),this},e.Factory.addOverloadedGetterSetter(a,i)},addOverloadedGetterSetter(a,i){const o=t.Util._capitalize(i),l=s+o,u=n+o;a.prototype[i]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(a,i,o,l){t.Util.error("Adding deprecated "+i);const u=n+t.Util._capitalize(i),d=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[u]=function(){t.Util.error(d);const f=this.attrs[i];return f===void 0?o:f},e.Factory.addSetter(a,i,l,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(a,i)},backCompat(a,i){t.Util.each(i,function(o,l){const u=a.prototype[l],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function h(){u.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}a.prototype[o]=h,a.prototype[d]=h,a.prototype[f]=h})},afterSetFilter(){this._filterUpToDate=!1}}})(GS)),GS}var hj;function Aa(){if(hj)return Nx;hj=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.Node=void 0;const e=F_(),t=T7(),r=Nn(),n=kn(),s=ga(),a=Mn(),i="absoluteOpacity",o="allEventListeners",l="absoluteTransform",u="absoluteScale",d="canvas",f="Change",h="children",g="konva",x="listening",y="mouseenter",v="mouseleave",T="pointerenter",k="pointerleave",b="touchenter",E="touchleave",N="set",P="Shape",M=" ",j="stage",A="transform",D="Stage",L="visible",G=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(M);let X=1,se=class qk{constructor(B){this._id=X++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(B),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(B){(B===A||B===l)&&this._cache.get(B)?this._cache.get(B).dirty=!0:B?this._cache.delete(B):this._cache.clear()}_getCache(B,V){let R=this._cache.get(B);return(R===void 0||(B===A||B===l)&&R.dirty===!0)&&(R=V.call(this),this._cache.set(B,R)),R}_calculate(B,V,R){if(!this._attachedDepsListeners.get(B)){const H=V.map(z=>z+"Change.konva").join(M);this.on(H,()=>{this._clearCache(B)}),this._attachedDepsListeners.set(B,!0)}return this._getCache(B,R)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(B){this._clearCache(B),B===l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:B,filter:V,hit:R,buffer:H}=this._cache.get(d);s.Util.releaseCanvas(B,V,R,H),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(B){const V=B||{};let R={};(V.x===void 0||V.y===void 0||V.width===void 0||V.height===void 0)&&(R=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let H=Math.ceil(V.width||R.width),z=Math.ceil(V.height||R.height),I=V.pixelRatio,W=V.x===void 0?Math.floor(R.x):V.x,K=V.y===void 0?Math.floor(R.y):V.y,ee=V.offset||0,oe=V.drawBorder||!1,Z=V.hitCanvasPixelRatio||1;if(!H||!z){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const le=Math.abs(Math.round(R.x)-W)>.5?1:0,ue=Math.abs(Math.round(R.y)-K)>.5?1:0;H+=ee*2+le,z+=ee*2+ue,W-=ee,K-=ee;const de=new e.SceneCanvas({pixelRatio:I,width:H,height:z}),Te=new e.SceneCanvas({pixelRatio:I,width:0,height:0,willReadFrequently:!0}),ie=new e.HitCanvas({pixelRatio:Z,width:H,height:z}),pe=de.getContext(),Ae=ie.getContext(),Me=new e.SceneCanvas({width:de.width/de.pixelRatio+Math.abs(W),height:de.height/de.pixelRatio+Math.abs(K),pixelRatio:de.pixelRatio}),Je=Me.getContext();return ie.isCache=!0,de.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,V.imageSmoothingEnabled===!1&&(de.getContext()._context.imageSmoothingEnabled=!1,Te.getContext()._context.imageSmoothingEnabled=!1),pe.save(),Ae.save(),Je.save(),pe.translate(-W,-K),Ae.translate(-W,-K),Je.translate(-W,-K),Me.x=W,Me.y=K,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this.drawScene(de,this,Me),this.drawHit(ie,this),this._isUnderCache=!1,pe.restore(),Ae.restore(),oe&&(pe.save(),pe.beginPath(),pe.rect(0,0,H,z),pe.closePath(),pe.setAttr("strokeStyle","red"),pe.setAttr("lineWidth",5),pe.stroke(),pe.restore()),this._cache.set(d,{scene:de,filter:Te,hit:ie,buffer:Me,x:W,y:K}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(B){throw new Error('abstract "getClientRect" method call')}_transformedRect(B,V){const R=[{x:B.x,y:B.y},{x:B.x+B.width,y:B.y},{x:B.x+B.width,y:B.y+B.height},{x:B.x,y:B.y+B.height}];let H=1/0,z=1/0,I=-1/0,W=-1/0;const K=this.getAbsoluteTransform(V);return R.forEach(function(ee){const oe=K.point(ee);H===void 0&&(H=I=oe.x,z=W=oe.y),H=Math.min(H,oe.x),z=Math.min(z,oe.y),I=Math.max(I,oe.x),W=Math.max(W,oe.y)}),{x:H,y:z,width:I-H,height:W-z}}_drawCachedSceneCanvas(B){B.save(),B._applyOpacity(this),B._applyGlobalCompositeOperation(this);const V=this._getCanvasCache();B.translate(V.x,V.y);const R=this._getCachedSceneCanvas(),H=R.pixelRatio;B.drawImage(R._canvas,0,0,R.width/H,R.height/H),B.restore()}_drawCachedHitCanvas(B){const V=this._getCanvasCache(),R=V.hit;B.save(),B.translate(V.x,V.y),B.drawImage(R._canvas,0,0,R.width/R.pixelRatio,R.height/R.pixelRatio),B.restore()}_getCachedSceneCanvas(){let B=this.filters(),V=this._getCanvasCache(),R=V.scene,H=V.filter,z=H.getContext(),I,W,K,ee;if(B){if(!this._filterUpToDate){const oe=R.pixelRatio;H.setSize(R.width/R.pixelRatio,R.height/R.pixelRatio);try{for(I=B.length,z.clear(),z.drawImage(R._canvas,0,0,R.getWidth()/oe,R.getHeight()/oe),W=z.getImageData(0,0,H.getWidth(),H.getHeight()),K=0;K<I;K++){if(ee=B[K],typeof ee!="function"){s.Util.error("Filter should be type of function, but got "+typeof ee+" instead. Please check correct filters");continue}ee.call(this,W),z.putImageData(W,0,0)}}catch(Z){s.Util.error("Unable to apply filter. "+Z.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return H}return R}on(B,V){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const R=B.split(M);for(let H=0;H<R.length;H++){const I=R[H].split("."),W=I[0],K=I[1]||"";this.eventListeners[W]||(this.eventListeners[W]=[]),this.eventListeners[W].push({name:K,handler:V})}return this}off(B,V){let R=(B||"").split(M),H=R.length,z,I,W,K,ee,oe;if(this._cache&&this._cache.delete(o),!B)for(I in this.eventListeners)this._off(I);for(z=0;z<H;z++)if(W=R[z],K=W.split("."),ee=K[0],oe=K[1],ee)this.eventListeners[ee]&&this._off(ee,oe,V);else for(I in this.eventListeners)this._off(I,oe,V);return this}dispatchEvent(B){const V={target:this,type:B.type,evt:B};return this.fire(B.type,V),this}addEventListener(B,V){return this.on(B,function(R){V.call(this,R.evt)}),this}removeEventListener(B){return this.off(B),this}_delegate(B,V,R){const H=this;this.on(B,function(z){const I=z.target.findAncestors(V,!0,H);for(let W=0;W<I.length;W++)z=s.Util.cloneObject(z),z.currentTarget=I[W],R.call(I[W],z)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(L),this._clearSelfAndDescendantCache(x)}_remove(){this._clearCaches();const B=this.getParent();B&&B.children&&(B.children.splice(this.index,1),B._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(B){const V="get"+s.Util._capitalize(B);return s.Util._isFunction(this[V])?this[V]():this.attrs[B]}getAncestors(){let B=this.getParent(),V=[];for(;B;)V.push(B),B=B.getParent();return V}getAttrs(){return this.attrs||{}}setAttrs(B){return this._batchTransformChanges(()=>{let V,R;if(!B)return this;for(V in B)V!==h&&(R=N+s.Util._capitalize(V),s.Util._isFunction(this[R])?this[R](B[V]):this._setAttr(V,B[V]))}),this}isListening(){return this._getCache(x,this._isListening)}_isListening(B){if(!this.listening())return!1;const R=this.getParent();return R&&R!==B&&this!==B?R._isListening(B):!0}isVisible(){return this._getCache(L,this._isVisible)}_isVisible(B){if(!this.visible())return!1;const R=this.getParent();return R&&R!==B&&this!==B?R._isVisible(B):!0}shouldDrawHit(B,V=!1){if(B)return this._isVisible(B)&&this._isListening(B);const R=this.getLayer();let H=!1;t.DD._dragElements.forEach(I=>{I.dragStatus==="dragging"&&(I.node.nodeType==="Stage"||I.node.getLayer()===R)&&(H=!0)});const z=!V&&!n.Konva.hitOnDragEnabled&&(H||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!z}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let B=this.getDepth(),V=this,R=0,H,z,I,W;function K(oe){for(H=[],z=oe.length,I=0;I<z;I++)W=oe[I],R++,W.nodeType!==P&&(H=H.concat(W.getChildren().slice())),W._id===V._id&&(I=z);H.length>0&&H[0].getDepth()<=B&&K(H)}const ee=this.getStage();return V.nodeType!==D&&ee&&K(ee.getChildren()),R}getDepth(){let B=0,V=this.parent;for(;V;)B++,V=V.parent;return B}_batchTransformChanges(B){this._batchingTransformChange=!0,B(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(A),this._clearSelfAndDescendantCache(l)),this._needClearTransformCache=!1}setPosition(B){return this._batchTransformChanges(()=>{this.x(B.x),this.y(B.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const B=this.getStage();if(!B)return null;const V=B.getPointerPosition();if(!V)return null;const R=this.getAbsoluteTransform().copy();return R.invert(),R.point(V)}getAbsolutePosition(B){let V=!1,R=this.parent;for(;R;){if(R.isCached()){V=!0;break}R=R.parent}V&&!B&&(B=!0);const H=this.getAbsoluteTransform(B).getMatrix(),z=new s.Transform,I=this.offset();return z.m=H.slice(),z.translate(I.x,I.y),z.getTranslation()}setAbsolutePosition(B){const{x:V,y:R,...H}=this._clearTransform();this.attrs.x=V,this.attrs.y=R,this._clearCache(A);const z=this._getAbsoluteTransform().copy();return z.invert(),z.translate(B.x,B.y),B={x:this.attrs.x+z.getTranslation().x,y:this.attrs.y+z.getTranslation().y},this._setTransform(H),this.setPosition({x:B.x,y:B.y}),this._clearCache(A),this._clearSelfAndDescendantCache(l),this}_setTransform(B){let V;for(V in B)this.attrs[V]=B[V]}_clearTransform(){const B={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,B}move(B){let V=B.x,R=B.y,H=this.x(),z=this.y();return V!==void 0&&(H+=V),R!==void 0&&(z+=R),this.setPosition({x:H,y:z}),this}_eachAncestorReverse(B,V){let R=[],H=this.getParent(),z,I;if(!(V&&V._id===this._id)){for(R.unshift(this);H&&(!V||H._id!==V._id);)R.unshift(H),H=H.parent;for(z=R.length,I=0;I<z;I++)B(R[I])}}rotate(B){return this.rotation(this.rotation()+B),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const B=this.index,V=this.parent.getChildren().length;return B<V-1?(this.parent.children.splice(B,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const B=this.index,V=this.parent.getChildren().length;return B<V-1?(this.parent.children.splice(B,1),this.parent.children.splice(B+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.splice(B-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const B=this.index;return B>0?(this.parent.children.splice(B,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(B){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(B<0||B>=this.parent.children.length)&&s.Util.warn("Unexpected value "+B+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const V=this.index;return this.parent.children.splice(V,1),this.parent.children.splice(B,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let B=this.opacity();const V=this.getParent();return V&&!V._isUnderCache&&(B*=V.getAbsoluteOpacity()),B}moveTo(B){return this.getParent()!==B&&(this._remove(),B.add(this)),this}toObject(){let B=this.getAttrs(),V,R,H,z,I;const W={attrs:{},className:this.getClassName()};for(V in B)R=B[V],I=s.Util.isObject(R)&&!s.Util._isPlainObject(R)&&!s.Util._isArray(R),!I&&(H=typeof this[V]=="function"&&this[V],delete B[V],z=H?H.call(this):null,B[V]=R,z!==R&&(W.attrs[V]=R));return s.Util._prepareToStringify(W)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(B,V,R){const H=[];V&&this._isMatch(B)&&H.push(this);let z=this.parent;for(;z;){if(z===R)return H;z._isMatch(B)&&H.push(z),z=z.parent}return H}isAncestorOf(B){return!1}findAncestor(B,V,R){return this.findAncestors(B,V,R)[0]}_isMatch(B){if(!B)return!1;if(typeof B=="function")return B(this);let V=B.replace(/ /g,"").split(","),R=V.length,H,z;for(H=0;H<R;H++)if(z=V[H],s.Util.isValidSelector(z)||(s.Util.warn('Selector "'+z+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),z.charAt(0)==="#"){if(this.id()===z.slice(1))return!0}else if(z.charAt(0)==="."){if(this.hasName(z.slice(1)))return!0}else if(this.className===z||this.nodeType===z)return!0;return!1}getLayer(){const B=this.getParent();return B?B.getLayer():null}getStage(){return this._getCache(j,this._getStage)}_getStage(){const B=this.getParent();return B?B.getStage():null}fire(B,V={},R){return V.target=V.target||this,R?this._fireAndBubble(B,V):this._fire(B,V),this}getAbsoluteTransform(B){return B?this._getAbsoluteTransform(B):this._getCache(l,this._getAbsoluteTransform)}_getAbsoluteTransform(B){let V;if(B)return V=new s.Transform,this._eachAncestorReverse(function(R){const H=R.transformsEnabled();H==="all"?V.multiply(R.getTransform()):H==="position"&&V.translate(R.x()-R.offsetX(),R.y()-R.offsetY())},B),V;{V=this._cache.get(l)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(V):V.reset();const R=this.transformsEnabled();if(R==="all")V.multiply(this.getTransform());else if(R==="position"){const H=this.attrs.x||0,z=this.attrs.y||0,I=this.attrs.offsetX||0,W=this.attrs.offsetY||0;V.translate(H-I,z-W)}return V.dirty=!1,V}}getAbsoluteScale(B){let V=this;for(;V;)V._isUnderCache&&(B=V),V=V.getParent();const H=this.getAbsoluteTransform(B).decompose();return{x:H.scaleX,y:H.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(A,this._getTransform)}_getTransform(){var B,V;const R=this._cache.get(A)||new s.Transform;R.reset();const H=this.x(),z=this.y(),I=n.Konva.getAngle(this.rotation()),W=(B=this.attrs.scaleX)!==null&&B!==void 0?B:1,K=(V=this.attrs.scaleY)!==null&&V!==void 0?V:1,ee=this.attrs.skewX||0,oe=this.attrs.skewY||0,Z=this.attrs.offsetX||0,le=this.attrs.offsetY||0;return(H!==0||z!==0)&&R.translate(H,z),I!==0&&R.rotate(I),(ee!==0||oe!==0)&&R.skew(ee,oe),(W!==1||K!==1)&&R.scale(W,K),(Z!==0||le!==0)&&R.translate(-1*Z,-1*le),R.dirty=!1,R}clone(B){let V=s.Util.cloneObject(this.attrs),R,H,z,I,W;for(R in B)V[R]=B[R];const K=new this.constructor(V);for(R in this.eventListeners)for(H=this.eventListeners[R],z=H.length,I=0;I<z;I++)W=H[I],W.name.indexOf(g)<0&&(K.eventListeners[R]||(K.eventListeners[R]=[]),K.eventListeners[R].push(W));return K}_toKonvaCanvas(B){B=B||{};const V=this.getClientRect(),R=this.getStage(),H=B.x!==void 0?B.x:Math.floor(V.x),z=B.y!==void 0?B.y:Math.floor(V.y),I=B.pixelRatio||1,W=new e.SceneCanvas({width:B.width||Math.ceil(V.width)||(R?R.width():0),height:B.height||Math.ceil(V.height)||(R?R.height():0),pixelRatio:I}),K=W.getContext(),ee=new e.SceneCanvas({width:W.width/W.pixelRatio+Math.abs(H),height:W.height/W.pixelRatio+Math.abs(z),pixelRatio:W.pixelRatio});return B.imageSmoothingEnabled===!1&&(K._context.imageSmoothingEnabled=!1),K.save(),(H||z)&&K.translate(-1*H,-1*z),this.drawScene(W,void 0,ee),K.restore(),W}toCanvas(B){return this._toKonvaCanvas(B)._canvas}toDataURL(B){B=B||{};const V=B.mimeType||null,R=B.quality||null,H=this._toKonvaCanvas(B).toDataURL(V,R);return B.callback&&B.callback(H),H}toImage(B){return new Promise((V,R)=>{try{const H=B?.callback;H&&delete B.callback,s.Util._urlToImage(this.toDataURL(B),function(z){V(z),H?.(z)})}catch(H){R(H)}})}toBlob(B){return new Promise((V,R)=>{try{const H=B?.callback;H&&delete B.callback,this.toCanvas(B).toBlob(z=>{V(z),H?.(z)},B?.mimeType,B?.quality)}catch(H){R(H)}})}setSize(B){return this.width(B.width),this.height(B.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(B,V,R){let H=this.eventListeners[B],z,I,W;for(z=0;z<H.length;z++)if(I=H[z].name,W=H[z].handler,(I!=="konva"||V==="konva")&&(!V||I===V)&&(!R||R===W)){if(H.splice(z,1),H.length===0){delete this.eventListeners[B];break}z--}}_fireChangeEvent(B,V,R){this._fire(B+f,{oldVal:V,newVal:R})}addName(B){if(!this.hasName(B)){const V=this.name(),R=V?V+" "+B:B;this.name(R)}return this}hasName(B){if(!B)return!1;const V=this.name();return V?(V||"").split(/\s/g).indexOf(B)!==-1:!1}removeName(B){const V=(this.name()||"").split(/\s/g),R=V.indexOf(B);return R!==-1&&(V.splice(R,1),this.name(V.join(" "))),this}setAttr(B,V){const R=this[N+s.Util._capitalize(B)];return s.Util._isFunction(R)?R.call(this,V):this._setAttr(B,V),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const B=this.getLayer()||this.getStage();B?.batchDraw()}}_setAttr(B,V){const R=this.attrs[B];R===V&&!s.Util.isObject(V)||(V==null?delete this.attrs[B]:this.attrs[B]=V,this._shouldFireChangeEvents&&this._fireChangeEvent(B,R,V),this._requestDraw())}_setComponentAttr(B,V,R){let H;R!==void 0&&(H=this.attrs[B],H||(this.attrs[B]=this.getAttr(B)),this.attrs[B][V]=R,this._fireChangeEvent(B,H,R))}_fireAndBubble(B,V,R){V&&this.nodeType===P&&(V.target=this);const H=[y,v,T,k,b,E];if(!(H.indexOf(B)!==-1&&(R&&(this===R||this.isAncestorOf&&this.isAncestorOf(R))||this.nodeType==="Stage"&&!R))){this._fire(B,V);const I=H.indexOf(B)!==-1&&R&&R.isAncestorOf&&R.isAncestorOf(this)&&!R.isAncestorOf(this.parent);(V&&!V.cancelBubble||!V)&&this.parent&&this.parent.isListening()&&!I&&(R&&R.parent?this._fireAndBubble.call(this.parent,B,V,R):this._fireAndBubble.call(this.parent,B,V))}}_getProtoListeners(B){var V,R,H;const z=(V=this._cache.get(o))!==null&&V!==void 0?V:{};let I=z?.[B];if(I===void 0){I=[];let W=Object.getPrototypeOf(this);for(;W;){const K=(H=(R=W.eventListeners)===null||R===void 0?void 0:R[B])!==null&&H!==void 0?H:[];I.push(...K),W=Object.getPrototypeOf(W)}z[B]=I,this._cache.set(o,z)}return I}_fire(B,V){V=V||{},V.currentTarget=this,V.type=B;const R=this._getProtoListeners(B);if(R)for(let z=0;z<R.length;z++)R[z].handler.call(this,V);const H=this.eventListeners[B];if(H)for(let z=0;z<H.length;z++)H[z].handler.call(this,V)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(B){const V=B?B.pointerId:void 0,R=this.getStage(),H=this.getAbsolutePosition();if(!R)return;const z=R._getPointerById(V)||R._changedPointerPositions[0]||H;t.DD._dragElements.set(this._id,{node:this,startPointerPos:z,offset:{x:z.x-H.x,y:z.y-H.y},dragStatus:"ready",pointerId:V})}startDrag(B,V=!0){t.DD._dragElements.has(this._id)||this._createDragElement(B);const R=t.DD._dragElements.get(this._id);R.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:B&&B.evt},V)}_setDragPosition(B,V){const R=this.getStage()._getPointerById(V.pointerId);if(!R)return;let H={x:R.x-V.offset.x,y:R.y-V.offset.y};const z=this.dragBoundFunc();if(z!==void 0){const I=z.call(this,H,B);I?H=I:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==H.x||this._lastPos.y!==H.y)&&(this.setAbsolutePosition(H),this._requestDraw()),this._lastPos=H}stopDrag(B){const V=t.DD._dragElements.get(this._id);V&&(V.dragStatus="stopped"),t.DD._endDragBefore(B),t.DD._endDragAfter(B)}setDraggable(B){this._setAttr("draggable",B),this._dragChange()}isDragging(){const B=t.DD._dragElements.get(this._id);return B?B.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(B){if(!(!(B.evt.button!==void 0)||n.Konva.dragButtons.indexOf(B.evt.button)>=0)||this.isDragging())return;let H=!1;t.DD._dragElements.forEach(z=>{this.isAncestorOf(z.node)&&(H=!0)}),H||this._createDragElement(B)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const V=t.DD._dragElements.get(this._id),R=V&&V.dragStatus==="dragging",H=V&&V.dragStatus==="ready";R?this.stopDrag():H&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(B={x:0,y:0}){const V=this.getStage();if(!V)return!1;const R={x:-B.x,y:-B.y,width:V.width()+2*B.x,height:V.height()+2*B.y};return s.Util.haveIntersection(R,this.getClientRect())}static create(B,V){return s.Util._isString(B)&&(B=JSON.parse(B)),this._createNode(B,V)}static _createNode(B,V){let R=qk.prototype.getClassName.call(B),H=B.children,z,I,W;V&&(B.attrs.container=V),n.Konva[R]||(s.Util.warn('Can not find a node with class name "'+R+'". Fallback to "Shape".'),R="Shape");const K=n.Konva[R];if(z=new K(B.attrs),H)for(I=H.length,W=0;W<I;W++)z.add(qk._createNode(H[W]));return z}};Nx.Node=se,se.prototype.nodeType="Node",se.prototype._attrsAffectingSize=[],se.prototype.eventListeners={},se.prototype.on.call(se.prototype,G,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(A),this._clearSelfAndDescendantCache(l)}),se.prototype.on.call(se.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(L)}),se.prototype.on.call(se.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(x)}),se.prototype.on.call(se.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const Q=r.Factory.addGetterSetter;return Q(se,"zIndex"),Q(se,"absolutePosition"),Q(se,"position"),Q(se,"x",0,(0,a.getNumberValidator)()),Q(se,"y",0,(0,a.getNumberValidator)()),Q(se,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),Q(se,"opacity",1,(0,a.getNumberValidator)()),Q(se,"name","",(0,a.getStringValidator)()),Q(se,"id","",(0,a.getStringValidator)()),Q(se,"rotation",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(se,"scale",["x","y"]),Q(se,"scaleX",1,(0,a.getNumberValidator)()),Q(se,"scaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(se,"skew",["x","y"]),Q(se,"skewX",0,(0,a.getNumberValidator)()),Q(se,"skewY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(se,"offset",["x","y"]),Q(se,"offsetX",0,(0,a.getNumberValidator)()),Q(se,"offsetY",0,(0,a.getNumberValidator)()),Q(se,"dragDistance",void 0,(0,a.getNumberValidator)()),Q(se,"width",0,(0,a.getNumberValidator)()),Q(se,"height",0,(0,a.getNumberValidator)()),Q(se,"listening",!0,(0,a.getBooleanValidator)()),Q(se,"preventDefault",!0,(0,a.getBooleanValidator)()),Q(se,"filters",void 0,function(re){return this._filterUpToDate=!1,re}),Q(se,"visible",!0,(0,a.getBooleanValidator)()),Q(se,"transformsEnabled","all",(0,a.getStringValidator)()),Q(se,"size"),Q(se,"dragBoundFunc"),Q(se,"draggable",!1,(0,a.getBooleanValidator)()),r.Factory.backCompat(se,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Nx}var Ax={},mj;function D_(){if(mj)return Ax;mj=1,Object.defineProperty(Ax,"__esModule",{value:!0}),Ax.Container=void 0;const e=Nn(),t=Aa(),r=Mn();let n=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){const i=this.children||[];return a?i.filter(a):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let o=0;o<a.length;o++)this.add(a[o]);return this}const i=a[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const i=this._generalFind(a,!0);return i.length>0?i[0]:void 0}_generalFind(a,i){const o=[];return this._descendants(l=>{const u=l._isMatch(a);return u&&o.push(l),!!(u&&i)}),o}_descendants(a){let i=!1;const o=this.getChildren();for(const l of o){if(i=a(l),i)return!0;if(l.hasChildren()&&(i=l._descendants(a),i))return!0}return!1}toObject(){const a=t.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(i=>{a.children.push(i.toObject())}),a}isAncestorOf(a){let i=a.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(a){const i=t.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(o){i.add(o.clone())}),i}getAllIntersections(a){const i=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(a)&&i.push(o)}),i}_clearSelfAndDescendantCache(a){var i;super._clearSelfAndDescendantCache(a),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(o){o._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(i,o){i.index=o}),this._requestDraw()}drawScene(a,i,o){const l=this.getLayer(),u=a||l&&l.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),h=f&&f.scene,g=u&&u.isCache;if(!this.isVisible()&&!g)return this;if(h){d.save();const x=this.getAbsoluteTransform(i).getMatrix();d.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,i,o);return this}drawHit(a,i){if(!this.shouldDrawHit(i))return this;const o=this.getLayer(),l=a||o&&o.hitCanvas,u=l&&l.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const h=this.getAbsoluteTransform(i).getMatrix();u.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",l,i);return this}_drawChildren(a,i,o,l){var u;const d=i&&i.getContext(),f=this.clipWidth(),h=this.clipHeight(),g=this.clipFunc(),x=typeof f=="number"&&typeof h=="number"||g,y=o===this;if(x){d.save();const T=this.getAbsoluteTransform(o);let k=T.getMatrix();d.transform(k[0],k[1],k[2],k[3],k[4],k[5]),d.beginPath();let b;if(g)b=g.call(this,d,this);else{const E=this.clipX(),N=this.clipY();d.rect(E||0,N||0,f,h)}d.clip.apply(d,b),k=T.copy().invert().getMatrix(),d.transform(k[0],k[1],k[2],k[3],k[4],k[5])}const v=!y&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";v&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(T){T[a](i,o,l)}),v&&d.restore(),x&&d.restore()}getClientRect(a={}){var i;const o=a.skipTransform,l=a.relativeTo;let u,d,f,h,g={x:1/0,y:1/0,width:0,height:0};const x=this;(i=this.children)===null||i===void 0||i.forEach(function(T){if(!T.visible())return;const k=T.getClientRect({relativeTo:x,skipShadow:a.skipShadow,skipStroke:a.skipStroke});k.width===0&&k.height===0||(u===void 0?(u=k.x,d=k.y,f=k.x+k.width,h=k.y+k.height):(u=Math.min(u,k.x),d=Math.min(d,k.y),f=Math.max(f,k.x+k.width),h=Math.max(h,k.y+k.height)))});const y=this.find("Shape");let v=!1;for(let T=0;T<y.length;T++)if(y[T]._isVisible(this)){v=!0;break}return v&&u!==void 0?g={x:u,y:d,width:f-u,height:h-d}:g={x:0,y:0,width:0,height:0},o?g:this._transformedRect(g,l)}};return Ax.Container=n,e.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(n,"clipX",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipY",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipWidth",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipHeight",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipFunc"),Ax}var VS={},df={},gj;function U$(){if(gj)return df;gj=1,Object.defineProperty(df,"__esModule",{value:!0}),df.getCapturedShape=n,df.createEvent=s,df.hasPointerCapture=a,df.setPointerCapture=i,df.releaseCapture=o;const e=kn(),t=new Map,r=e.Konva._global.PointerEvent!==void 0;function n(l){return t.get(l)}function s(l){return{evt:l,pointerId:l.pointerId}}function a(l,u){return t.get(l)===u}function i(l,u){o(l),u.getStage()&&(t.set(l,u),r&&u._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function o(l,u){const d=t.get(l);if(!d)return;const f=d.getStage();f&&f.content,t.delete(l),r&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return df}var pj;function nne(){return pj||(pj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=ga(),r=Nn(),n=D_(),s=kn(),a=F_(),i=T7(),o=kn(),l=U$(),u="Stage",d="string",f="px",h="mouseout",g="mouseleave",x="mouseover",y="mouseenter",v="mousemove",T="mousedown",k="mouseup",b="pointermove",E="pointerdown",N="pointerup",P="pointercancel",M="lostpointercapture",j="pointerout",A="pointerleave",D="pointerover",L="pointerenter",G="contextmenu",X="touchstart",se="touchend",Q="touchmove",re="touchcancel",B="wheel",V=5,R=[[y,"_pointerenter"],[T,"_pointerdown"],[v,"_pointermove"],[k,"_pointerup"],[g,"_pointerleave"],[X,"_pointerdown"],[Q,"_pointermove"],[se,"_pointerup"],[re,"_pointercancel"],[x,"_pointerover"],[B,"_wheel"],[G,"_contextmenu"],[E,"_pointerdown"],[b,"_pointermove"],[N,"_pointerup"],[P,"_pointercancel"],[A,"_pointerleave"],[M,"_lostpointercapture"]],H={mouse:{[j]:h,[A]:g,[D]:x,[L]:y,[b]:v,[E]:T,[N]:k,[P]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[j]:"touchout",[A]:"touchleave",[D]:"touchover",[L]:"touchenter",[b]:Q,[E]:X,[N]:se,[P]:re,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[j]:j,[A]:A,[D]:D,[L]:L,[b]:b,[E]:E,[N]:N,[P]:P,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},z=oe=>oe.indexOf("pointer")>=0?"pointer":oe.indexOf("touch")>=0?"touch":"mouse",I=oe=>{const Z=z(oe);if(Z==="pointer")return s.Konva.pointerEventsEnabled&&H.pointer;if(Z==="touch")return H.touch;if(Z==="mouse")return H.mouse};function W(oe={}){return(oe.clipFunc||oe.clipWidth||oe.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),oe}const K="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class ee extends n.Container{constructor(Z){super(W(Z)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{W(this.attrs)}),this._checkVisibility()}_validateAdd(Z){const le=Z.getType()==="Layer",ue=Z.getType()==="FastLayer";le||ue||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const Z=this.visible()?"":"none";this.content.style.display=Z}setContainer(Z){if(typeof Z===d){let le;if(Z.charAt(0)==="."){const ue=Z.slice(1);Z=document.getElementsByClassName(ue)[0]}else Z.charAt(0)!=="#"?le=Z:le=Z.slice(1),Z=document.getElementById(le);if(!Z)throw"Can not find container in document with id "+le}return this._setAttr("container",Z),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),Z.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const Z=this.children,le=Z.length;for(let ue=0;ue<le;ue++)Z[ue].clear();return this}clone(Z){return Z||(Z={}),Z.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,Z)}destroy(){super.destroy();const Z=this.content;Z&&t.Util._isInDocument(Z)&&this.container().removeChild(Z);const le=e.stages.indexOf(this);return le>-1&&e.stages.splice(le,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const Z=this._pointerPositions[0]||this._changedPointerPositions[0];return Z?{x:Z.x,y:Z.y}:(t.Util.warn(K),null)}_getPointerById(Z){return this._pointerPositions.find(le=>le.id===Z)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(Z){Z=Z||{},Z.x=Z.x||0,Z.y=Z.y||0,Z.width=Z.width||this.width(),Z.height=Z.height||this.height();const le=new a.SceneCanvas({width:Z.width,height:Z.height,pixelRatio:Z.pixelRatio||1}),ue=le.getContext()._context,de=this.children;return(Z.x||Z.y)&&ue.translate(-1*Z.x,-1*Z.y),de.forEach(function(Te){if(!Te.isVisible())return;const ie=Te._toKonvaCanvas(Z);ue.drawImage(ie._canvas,Z.x,Z.y,ie.getWidth()/ie.getPixelRatio(),ie.getHeight()/ie.getPixelRatio())}),le}getIntersection(Z){if(!Z)return null;const le=this.children,ue=le.length,de=ue-1;for(let Te=de;Te>=0;Te--){const ie=le[Te].getIntersection(Z);if(ie)return ie}return null}_resizeDOM(){const Z=this.width(),le=this.height();this.content&&(this.content.style.width=Z+f,this.content.style.height=le+f),this.bufferCanvas.setSize(Z,le),this.bufferHitCanvas.setSize(Z,le),this.children.forEach(ue=>{ue.setSize({width:Z,height:le}),ue.draw()})}add(Z,...le){if(arguments.length>1){for(let de=0;de<arguments.length;de++)this.add(arguments[de]);return this}super.add(Z);const ue=this.children.length;return ue>V&&t.Util.warn("The stage has "+ue+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),Z.setSize({width:this.width(),height:this.height()}),Z.draw(),s.Konva.isBrowser&&this.content.appendChild(Z.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(Z){return l.hasPointerCapture(Z,this)}setPointerCapture(Z){l.setPointerCapture(Z,this)}releaseCapture(Z){l.releaseCapture(Z,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&R.forEach(([Z,le])=>{this.content.addEventListener(Z,ue=>{this[le](ue)},{passive:!1})})}_pointerenter(Z){this.setPointersPositions(Z);const le=I(Z.type);le&&this._fire(le.pointerenter,{evt:Z,target:this,currentTarget:this})}_pointerover(Z){this.setPointersPositions(Z);const le=I(Z.type);le&&this._fire(le.pointerover,{evt:Z,target:this,currentTarget:this})}_getTargetShape(Z){let le=this[Z+"targetShape"];return le&&!le.getStage()&&(le=null),le}_pointerleave(Z){const le=I(Z.type),ue=z(Z.type);if(!le)return;this.setPointersPositions(Z);const de=this._getTargetShape(ue),Te=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;de&&Te?(de._fireAndBubble(le.pointerout,{evt:Z}),de._fireAndBubble(le.pointerleave,{evt:Z}),this._fire(le.pointerleave,{evt:Z,target:this,currentTarget:this}),this[ue+"targetShape"]=null):Te&&(this._fire(le.pointerleave,{evt:Z,target:this,currentTarget:this}),this._fire(le.pointerout,{evt:Z,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(Z){const le=I(Z.type),ue=z(Z.type);if(!le)return;this.setPointersPositions(Z);let de=!1;this._changedPointerPositions.forEach(Te=>{const ie=this.getIntersection(Te);if(i.DD.justDragged=!1,s.Konva["_"+ue+"ListenClick"]=!0,!ie||!ie.isListening()){this[ue+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&ie.setPointerCapture(Te.id),this[ue+"ClickStartShape"]=ie,ie._fireAndBubble(le.pointerdown,{evt:Z,pointerId:Te.id}),de=!0;const pe=Z.type.indexOf("touch")>=0;ie.preventDefault()&&Z.cancelable&&pe&&Z.preventDefault()}),de||this._fire(le.pointerdown,{evt:Z,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(Z){const le=I(Z.type),ue=z(Z.type);if(!le||(s.Konva.isDragging()&&i.DD.node.preventDefault()&&Z.cancelable&&Z.preventDefault(),this.setPointersPositions(Z),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const Te={};let ie=!1;const pe=this._getTargetShape(ue);this._changedPointerPositions.forEach(Ae=>{const Me=l.getCapturedShape(Ae.id)||this.getIntersection(Ae),Je=Ae.id,Ve={evt:Z,pointerId:Je},Dt=pe!==Me;if(Dt&&pe&&(pe._fireAndBubble(le.pointerout,{...Ve},Me),pe._fireAndBubble(le.pointerleave,{...Ve},Me)),Me){if(Te[Me._id])return;Te[Me._id]=!0}Me&&Me.isListening()?(ie=!0,Dt&&(Me._fireAndBubble(le.pointerover,{...Ve},pe),Me._fireAndBubble(le.pointerenter,{...Ve},pe),this[ue+"targetShape"]=Me),Me._fireAndBubble(le.pointermove,{...Ve})):pe&&(this._fire(le.pointerover,{evt:Z,target:this,currentTarget:this,pointerId:Je}),this[ue+"targetShape"]=null)}),ie||this._fire(le.pointermove,{evt:Z,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(Z){const le=I(Z.type),ue=z(Z.type);if(!le)return;this.setPointersPositions(Z);const de=this[ue+"ClickStartShape"],Te=this[ue+"ClickEndShape"],ie={};let pe=!1;this._changedPointerPositions.forEach(Ae=>{const Me=l.getCapturedShape(Ae.id)||this.getIntersection(Ae);if(Me){if(Me.releaseCapture(Ae.id),ie[Me._id])return;ie[Me._id]=!0}const Je=Ae.id,Ve={evt:Z,pointerId:Je};let Dt=!1;s.Konva["_"+ue+"InDblClickWindow"]?(Dt=!0,clearTimeout(this[ue+"DblTimeout"])):i.DD.justDragged||(s.Konva["_"+ue+"InDblClickWindow"]=!0,clearTimeout(this[ue+"DblTimeout"])),this[ue+"DblTimeout"]=setTimeout(function(){s.Konva["_"+ue+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),Me&&Me.isListening()?(pe=!0,this[ue+"ClickEndShape"]=Me,Me._fireAndBubble(le.pointerup,{...Ve}),s.Konva["_"+ue+"ListenClick"]&&de&&de===Me&&(Me._fireAndBubble(le.pointerclick,{...Ve}),Dt&&Te&&Te===Me&&Me._fireAndBubble(le.pointerdblclick,{...Ve}))):(this[ue+"ClickEndShape"]=null,s.Konva["_"+ue+"ListenClick"]&&this._fire(le.pointerclick,{evt:Z,target:this,currentTarget:this,pointerId:Je}),Dt&&this._fire(le.pointerdblclick,{evt:Z,target:this,currentTarget:this,pointerId:Je}))}),pe||this._fire(le.pointerup,{evt:Z,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+ue+"ListenClick"]=!1,Z.cancelable&&ue!=="touch"&&ue!=="pointer"&&Z.preventDefault()}_contextmenu(Z){this.setPointersPositions(Z);const le=this.getIntersection(this.getPointerPosition());le&&le.isListening()?le._fireAndBubble(G,{evt:Z}):this._fire(G,{evt:Z,target:this,currentTarget:this})}_wheel(Z){this.setPointersPositions(Z);const le=this.getIntersection(this.getPointerPosition());le&&le.isListening()?le._fireAndBubble(B,{evt:Z}):this._fire(B,{evt:Z,target:this,currentTarget:this})}_pointercancel(Z){this.setPointersPositions(Z);const le=l.getCapturedShape(Z.pointerId)||this.getIntersection(this.getPointerPosition());le&&le._fireAndBubble(N,l.createEvent(Z)),l.releaseCapture(Z.pointerId)}_lostpointercapture(Z){l.releaseCapture(Z.pointerId)}setPointersPositions(Z){const le=this._getContentPosition();let ue=null,de=null;Z=Z||window.event,Z.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(Z.touches,Te=>{this._pointerPositions.push({id:Te.identifier,x:(Te.clientX-le.left)/le.scaleX,y:(Te.clientY-le.top)/le.scaleY})}),Array.prototype.forEach.call(Z.changedTouches||Z.touches,Te=>{this._changedPointerPositions.push({id:Te.identifier,x:(Te.clientX-le.left)/le.scaleX,y:(Te.clientY-le.top)/le.scaleY})})):(ue=(Z.clientX-le.left)/le.scaleX,de=(Z.clientY-le.top)/le.scaleY,this.pointerPos={x:ue,y:de},this._pointerPositions=[{x:ue,y:de,id:t.Util._getFirstPointerId(Z)}],this._changedPointerPositions=[{x:ue,y:de,id:t.Util._getFirstPointerId(Z)}])}_setPointerPosition(Z){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(Z)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const Z=this.content.getBoundingClientRect();return{top:Z.top,left:Z.left,scaleX:Z.width/this.content.clientWidth||1,scaleY:Z.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const Z=this.container();if(!Z)throw"Stage has no container. A container is required.";Z.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),Z.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(Z){Z.batchDraw()}),this}}e.Stage=ee,ee.prototype.nodeType=u,(0,o._registerNode)(ee),r.Factory.addGetterSetter(ee,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(oe=>{oe.batchDraw()})})})(VS)),VS}var jx={},qS={},xj;function Ci(){return xj||(xj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=kn(),r=ga(),n=Nn(),s=Aa(),a=Mn(),i=kn(),o=U$(),l="hasShadow",u="shadowRGBA",d="patternImage",f="linearGradient",h="radialGradient";let g;function x(){return g||(g=r.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function y(A){const D=this.attrs.fillRule;D?A.fill(D):A.fill()}function v(A){A.stroke()}function T(A){const D=this.attrs.fillRule;D?A.fill(D):A.fill()}function k(A){A.stroke()}function b(){this._clearCache(l)}function E(){this._clearCache(u)}function N(){this._clearCache(d)}function P(){this._clearCache(f)}function M(){this._clearCache(h)}class j extends s.Node{constructor(D){super(D);let L;for(;L=r.Util.getRandomColor(),!(L&&!(L in e.shapes)););this.colorKey=L,e.shapes[L]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=x().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const G=new r.Transform;G.translate(this.fillPatternX(),this.fillPatternY()),G.rotate(t.Konva.getAngle(this.fillPatternRotation())),G.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),G.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const X=G.getMatrix(),se=typeof DOMMatrix>"u"?{a:X[0],b:X[1],c:X[2],d:X[3],e:X[4],f:X[5]}:new DOMMatrix(X);L.setTransform(se)}return L}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const D=this.fillLinearGradientColorStops();if(D){const L=x(),G=this.fillLinearGradientStartPoint(),X=this.fillLinearGradientEndPoint(),se=L.createLinearGradient(G.x,G.y,X.x,X.y);for(let Q=0;Q<D.length;Q+=2)se.addColorStop(D[Q],D[Q+1]);return se}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const D=this.fillRadialGradientColorStops();if(D){const L=x(),G=this.fillRadialGradientStartPoint(),X=this.fillRadialGradientEndPoint(),se=L.createRadialGradient(G.x,G.y,this.fillRadialGradientStartRadius(),X.x,X.y,this.fillRadialGradientEndRadius());for(let Q=0;Q<D.length;Q+=2)se.addColorStop(D[Q],D[Q+1]);return se}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const D=r.Util.colorToRGBA(this.shadowColor());if(D)return"rgba("+D.r+","+D.g+","+D.b+","+D.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const D=this.hitStrokeWidth();return D==="auto"?this.hasStroke():this.strokeEnabled()&&!!D}intersects(D){const L=this.getStage();if(!L)return!1;const G=L.bufferHitCanvas;return G.getContext().clear(),this.drawHit(G,void 0,!0),G.context.getImageData(Math.round(D.x),Math.round(D.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(D){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const X=D||this.hasFill(),se=this.hasStroke(),Q=this.getAbsoluteOpacity()!==1;if(X&&se&&Q)return!0;const re=this.hasShadow(),B=this.shadowForStrokeEnabled();return!!(X&&se&&re&&B)}setStrokeHitEnabled(D){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),D?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const D=this.size();return{x:this._centroid?-D.width/2:0,y:this._centroid?-D.height/2:0,width:D.width,height:D.height}}getClientRect(D={}){let L=!1,G=this.getParent();for(;G;){if(G.isCached()){L=!0;break}G=G.getParent()}const X=D.skipTransform,se=D.relativeTo||L&&this.getStage()||void 0,Q=this.getSelfRect(),B=!D.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,V=Q.width+B,R=Q.height+B,H=!D.skipShadow&&this.hasShadow(),z=H?this.shadowOffsetX():0,I=H?this.shadowOffsetY():0,W=V+Math.abs(z),K=R+Math.abs(I),ee=H&&this.shadowBlur()||0,oe=W+ee*2,Z=K+ee*2,le={width:oe,height:Z,x:-(B/2+ee)+Math.min(z,0)+Q.x,y:-(B/2+ee)+Math.min(I,0)+Q.y};return X?le:this._transformedRect(le,se)}drawScene(D,L,G){const X=this.getLayer(),se=D||X.getCanvas(),Q=se.getContext(),re=this._getCanvasCache(),B=this.getSceneFunc(),V=this.hasShadow();let R;const H=L===this;if(!this.isVisible()&&!H)return this;if(re){Q.save();const z=this.getAbsoluteTransform(L).getMatrix();return Q.transform(z[0],z[1],z[2],z[3],z[4],z[5]),this._drawCachedSceneCanvas(Q),Q.restore(),this}if(!B)return this;if(Q.save(),this._useBufferCanvas()){R=this.getStage();const z=G||R.bufferCanvas,I=z.getContext();I.clear(),I.save(),I._applyLineJoin(this);const W=this.getAbsoluteTransform(L).getMatrix();I.transform(W[0],W[1],W[2],W[3],W[4],W[5]),B.call(this,I,this),I.restore();const K=z.pixelRatio;V&&Q._applyShadow(this),Q._applyOpacity(this),Q._applyGlobalCompositeOperation(this),Q.drawImage(z._canvas,z.x||0,z.y||0,z.width/K,z.height/K)}else{if(Q._applyLineJoin(this),!H){const z=this.getAbsoluteTransform(L).getMatrix();Q.transform(z[0],z[1],z[2],z[3],z[4],z[5]),Q._applyOpacity(this),Q._applyGlobalCompositeOperation(this)}V&&Q._applyShadow(this),B.call(this,Q,this)}return Q.restore(),this}drawHit(D,L,G=!1){if(!this.shouldDrawHit(L,G))return this;const X=this.getLayer(),se=D||X.hitCanvas,Q=se&&se.getContext(),re=this.hitFunc()||this.sceneFunc(),B=this._getCanvasCache(),V=B&&B.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),V){Q.save();const H=this.getAbsoluteTransform(L).getMatrix();return Q.transform(H[0],H[1],H[2],H[3],H[4],H[5]),this._drawCachedHitCanvas(Q),Q.restore(),this}if(!re)return this;if(Q.save(),Q._applyLineJoin(this),!(this===L)){const H=this.getAbsoluteTransform(L).getMatrix();Q.transform(H[0],H[1],H[2],H[3],H[4],H[5])}return re.call(this,Q,this),Q.restore(),this}drawHitFromCache(D=0){const L=this._getCanvasCache(),G=this._getCachedSceneCanvas(),X=L.hit,se=X.getContext(),Q=X.getWidth(),re=X.getHeight();se.clear(),se.drawImage(G._canvas,0,0,Q,re);try{const B=se.getImageData(0,0,Q,re),V=B.data,R=V.length,H=r.Util._hexToRgb(this.colorKey);for(let z=0;z<R;z+=4)V[z+3]>D?(V[z]=H.r,V[z+1]=H.g,V[z+2]=H.b,V[z+3]=255):V[z+3]=0;se.putImageData(B,0,0)}catch(B){r.Util.error("Unable to draw hit graph from cached scene canvas. "+B.message)}return this}hasPointerCapture(D){return o.hasPointerCapture(D,this)}setPointerCapture(D){o.setPointerCapture(D,this)}releaseCapture(D){o.releaseCapture(D,this)}}e.Shape=j,j.prototype._fillFunc=y,j.prototype._strokeFunc=v,j.prototype._fillFuncHit=T,j.prototype._strokeFuncHit=k,j.prototype._centroid=!1,j.prototype.nodeType="Shape",(0,i._registerNode)(j),j.prototype.eventListeners={},j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",E),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",N),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",P),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",M),n.Factory.addGetterSetter(j,"stroke",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"strokeWidth",2,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(j,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(j,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"lineJoin"),n.Factory.addGetterSetter(j,"lineCap"),n.Factory.addGetterSetter(j,"sceneFunc"),n.Factory.addGetterSetter(j,"hitFunc"),n.Factory.addGetterSetter(j,"dash"),n.Factory.addGetterSetter(j,"dashOffset",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowColor",void 0,(0,a.getStringValidator)()),n.Factory.addGetterSetter(j,"shadowBlur",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOpacity",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(j,"shadowOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternImage"),n.Factory.addGetterSetter(j,"fill",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"fillPatternX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(j,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(j,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(j,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(j,"fillEnabled",!0),n.Factory.addGetterSetter(j,"strokeEnabled",!0),n.Factory.addGetterSetter(j,"shadowEnabled",!0),n.Factory.addGetterSetter(j,"dashEnabled",!0),n.Factory.addGetterSetter(j,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(j,"fillPriority","color"),n.Factory.addComponentsGetterSetter(j,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternScaleX",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternScaleY",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(j,"fillPatternRotation",0),n.Factory.addGetterSetter(j,"fillRule",void 0,(0,a.getStringValidator)()),n.Factory.backCompat(j,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(qS)),qS}var yj;function W$(){if(yj)return jx;yj=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.Layer=void 0;const e=ga(),t=D_(),r=Aa(),n=Nn(),s=F_(),a=Mn(),i=Ci(),o=kn(),l="#",u="beforeDraw",d="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],h=f.length;class g extends t.Container{constructor(y){super(y),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),y<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[y+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),y&&y.parentNode&&e.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:v}){return this.canvas.setSize(y,v),this.hitCanvas.setSize(y,v),this._setSmoothEnabled(),this}_validateAdd(y){const v=y.getType();v!=="Group"&&v!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let v=1,T=!1;for(;;){for(let k=0;k<h;k++){const b=f[k],E=this._getIntersection({x:y.x+b.x*v,y:y.y+b.y*v}),N=E.shape;if(N)return N;if(T=!!E.antialiased,!E.antialiased)break}if(T)v+=1;else return null}}_getIntersection(y){const v=this.hitCanvas.pixelRatio,T=this.hitCanvas.context.getImageData(Math.round(y.x*v),Math.round(y.y*v),1,1).data,k=T[3];if(k===255){const b=e.Util._rgbToHex(T[0],T[1],T[2]),E=i.shapes[l+b];return E?{shape:E}:{antialiased:!0}}else if(k>0)return{antialiased:!0};return{}}drawScene(y,v,T){const k=this.getLayer(),b=y||k&&k.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&b.getContext().clear(),t.Container.prototype.drawScene.call(this,b,v,T),this._fire(d,{node:this}),this}drawHit(y,v){const T=this.getLayer(),k=y||T&&T.hitCanvas;return T&&T.clearBeforeDraw()&&T.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,k,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return jx.Layer=g,g.prototype.nodeType="Layer",(0,o._registerNode)(g),n.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(g,"clearBeforeDraw",!0),n.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),jx}var Px={},vj;function sne(){if(vj)return Px;vj=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.FastLayer=void 0;const e=ga(),t=W$(),r=kn();class n extends t.Layer{constructor(a){super(a),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}return Px.FastLayer=n,n.prototype.nodeType="FastLayer",(0,r._registerNode)(n),Px}var Mx={},wj;function C7(){if(wj)return Mx;wj=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.Group=void 0;const e=ga(),t=D_(),r=kn();class n extends t.Container{_validateAdd(a){const i=a.getType();i!=="Group"&&i!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return Mx.Group=n,n.prototype.nodeType="Group",(0,r._registerNode)(n),Mx}var Fx={},bj;function E7(){if(bj)return Fx;bj=1,Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.Animation=void 0;const e=kn(),t=ga(),r=(function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}})();let n=class sp{constructor(a,i){this.id=sp.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=a,this.setLayers(i)}setLayers(a){let i=[];return a&&(i=Array.isArray(a)?a:[a]),this.layers=i,this}getLayers(){return this.layers}addLayer(a){const i=this.layers,o=i.length;for(let l=0;l<o;l++)if(i[l]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const i=sp.animations,o=i.length;for(let l=0;l<o;l++)if(i[l].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),sp._addAnimation(this),this}stop(){return sp._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const i=a.id,o=this.animations,l=o.length;for(let u=0;u<l;u++)if(o[u].id===i){this.animations.splice(u,1);break}}static _runFrames(){const a={},i=this.animations;for(let o=0;o<i.length;o++){const l=i[o],u=l.layers,d=l.func;l._updateFrameObject(r());const f=u.length;let h;if(d?h=d.call(l,l.frame)!==!1:h=!0,!!h)for(let g=0;g<f;g++){const x=u[g];x._id!==void 0&&(a[x._id]=x)}}for(const o in a)a.hasOwnProperty(o)&&a[o].batchDraw()}static _animationLoop(){const a=sp;a.animations.length?(a._runFrames(),t.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return Fx.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,Fx}var KS={},_j;function ane(){return _j||(_j=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=ga(),r=E7(),n=Aa(),s=kn(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=1,o=2,l=3,u=["fill","stroke","shadowColor"];let d=0;class f{constructor(x,y,v,T,k,b,E){this.prop=x,this.propFunc=y,this.begin=T,this._pos=T,this.duration=b,this._change=0,this.prevPos=0,this.yoyo=E,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=k-this.begin,this.pause()}fire(x){const y=this[x];y&&y()}setTime(x){x>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():x<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=x,this.update())}getTime(){return this._time}setPosition(x){this.prevPos=this._pos,this.propFunc(x),this._pos=x}getPosition(x){return x===void 0&&(x=this._time),this.func(x,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(x){this.pause(),this._time=x,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const x=this.getTimer()-this._startTime;this.state===o?this.setTime(x):this.state===l&&this.setTime(this.duration-x)}pause(){this.state=i,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(x){const y=this,v=x.node,T=v._id,k=x.easing||e.Easings.Linear,b=!!x.yoyo;let E,N;typeof x.duration>"u"?E=.3:x.duration===0?E=.001:E=x.duration,this.node=v,this._id=d++;const P=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);P||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){y.tween.onEnterFrame()},P),this.tween=new f(N,function(M){y._tweenFunc(M)},k,0,1,E*1e3,b),this._addListeners(),h.attrs[T]||(h.attrs[T]={}),h.attrs[T][this._id]||(h.attrs[T][this._id]={}),h.tweens[T]||(h.tweens[T]={});for(N in x)a[N]===void 0&&this._addAttr(N,x[N]);this.reset(),this.onFinish=x.onFinish,this.onReset=x.onReset,this.onUpdate=x.onUpdate}_addAttr(x,y){const v=this.node,T=v._id;let k,b,E,N,P;const M=h.tweens[T][x];M&&delete h.attrs[T][M][x];let j=v.getAttr(x);if(t.Util._isArray(y))if(k=[],b=Math.max(y.length,j.length),x==="points"&&y.length!==j.length&&(y.length>j.length?(N=j,j=t.Util._prepareArrayForTween(j,y,v.closed())):(E=y,y=t.Util._prepareArrayForTween(y,j,v.closed()))),x.indexOf("fill")===0)for(let A=0;A<b;A++)if(A%2===0)k.push(y[A]-j[A]);else{const D=t.Util.colorToRGBA(j[A]);P=t.Util.colorToRGBA(y[A]),j[A]=D,k.push({r:P.r-D.r,g:P.g-D.g,b:P.b-D.b,a:P.a-D.a})}else for(let A=0;A<b;A++)k.push(y[A]-j[A]);else u.indexOf(x)!==-1?(j=t.Util.colorToRGBA(j),P=t.Util.colorToRGBA(y),k={r:P.r-j.r,g:P.g-j.g,b:P.b-j.b,a:P.a-j.a}):k=y-j;h.attrs[T][this._id][x]={start:j,diff:k,end:y,trueEnd:E,trueStart:N},h.tweens[T][x]=this._id}_tweenFunc(x){const y=this.node,v=h.attrs[y._id][this._id];let T,k,b,E,N,P,M,j;for(T in v){if(k=v[T],b=k.start,E=k.diff,j=k.end,t.Util._isArray(b))if(N=[],M=Math.max(b.length,j.length),T.indexOf("fill")===0)for(P=0;P<M;P++)P%2===0?N.push((b[P]||0)+E[P]*x):N.push("rgba("+Math.round(b[P].r+E[P].r*x)+","+Math.round(b[P].g+E[P].g*x)+","+Math.round(b[P].b+E[P].b*x)+","+(b[P].a+E[P].a*x)+")");else for(P=0;P<M;P++)N.push((b[P]||0)+E[P]*x);else u.indexOf(T)!==-1?N="rgba("+Math.round(b.r+E.r*x)+","+Math.round(b.g+E.g*x)+","+Math.round(b.b+E.b*x)+","+(b.a+E.a*x)+")":N=b+E*x;y.setAttr(T,N)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const x=this.node,y=h.attrs[x._id][this._id];y.points&&y.points.trueEnd&&x.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const x=this.node,y=h.attrs[x._id][this._id];y.points&&y.points.trueStart&&x.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(x){return this.tween.seek(x*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const x=this.node._id,y=this._id,v=h.tweens[x];this.pause(),this.anim&&this.anim.stop();for(const T in v)delete h.tweens[x][T];delete h.attrs[x][y],h.tweens[x]&&(Object.keys(h.tweens[x]).length===0&&delete h.tweens[x],Object.keys(h.attrs[x]).length===0&&delete h.attrs[x])}}e.Tween=h,h.attrs={},h.tweens={},n.Node.prototype.to=function(g){const x=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),x&&x()},new h(g).play()},e.Easings={BackEaseIn(g,x,y,v){return y*(g/=v)*g*((1.70158+1)*g-1.70158)+x},BackEaseOut(g,x,y,v){return y*((g=g/v-1)*g*((1.70158+1)*g+1.70158)+1)+x},BackEaseInOut(g,x,y,v){let T=1.70158;return(g/=v/2)<1?y/2*(g*g*(((T*=1.525)+1)*g-T))+x:y/2*((g-=2)*g*(((T*=1.525)+1)*g+T)+2)+x},ElasticEaseIn(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v)===1?x+y:(k||(k=v*.3),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),-(T*Math.pow(2,10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k))+x)},ElasticEaseOut(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v)===1?x+y:(k||(k=v*.3),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),T*Math.pow(2,-10*g)*Math.sin((g*v-b)*(2*Math.PI)/k)+y+x)},ElasticEaseInOut(g,x,y,v,T,k){let b=0;return g===0?x:(g/=v/2)===2?x+y:(k||(k=v*(.3*1.5)),!T||T<Math.abs(y)?(T=y,b=k/4):b=k/(2*Math.PI)*Math.asin(y/T),g<1?-.5*(T*Math.pow(2,10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k))+x:T*Math.pow(2,-10*(g-=1))*Math.sin((g*v-b)*(2*Math.PI)/k)*.5+y+x)},BounceEaseOut(g,x,y,v){return(g/=v)<1/2.75?y*(7.5625*g*g)+x:g<2/2.75?y*(7.5625*(g-=1.5/2.75)*g+.75)+x:g<2.5/2.75?y*(7.5625*(g-=2.25/2.75)*g+.9375)+x:y*(7.5625*(g-=2.625/2.75)*g+.984375)+x},BounceEaseIn(g,x,y,v){return y-e.Easings.BounceEaseOut(v-g,0,y,v)+x},BounceEaseInOut(g,x,y,v){return g<v/2?e.Easings.BounceEaseIn(g*2,0,y,v)*.5+x:e.Easings.BounceEaseOut(g*2-v,0,y,v)*.5+y*.5+x},EaseIn(g,x,y,v){return y*(g/=v)*g+x},EaseOut(g,x,y,v){return-y*(g/=v)*(g-2)+x},EaseInOut(g,x,y,v){return(g/=v/2)<1?y/2*g*g+x:-y/2*(--g*(g-2)-1)+x},StrongEaseIn(g,x,y,v){return y*(g/=v)*g*g*g*g+x},StrongEaseOut(g,x,y,v){return y*((g=g/v-1)*g*g*g*g+1)+x},StrongEaseInOut(g,x,y,v){return(g/=v/2)<1?y/2*g*g*g*g*g+x:y/2*((g-=2)*g*g*g*g+2)+x},Linear(g,x,y,v){return y*g/v+x}}})(KS)),KS}var Sj;function Kk(){return Sj||(Sj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=kn(),r=ga(),n=Aa(),s=D_(),a=nne(),i=W$(),o=sne(),l=C7(),u=T7(),d=Ci(),f=E7(),h=ane(),g=z$(),x=F_();e.Konva=r.Util._assign(t.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:l.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:h.Tween,Easings:h.Easings,Context:g.Context,Canvas:x.Canvas}),e.default=e.Konva})(zS)),zS}var Dx={},kj;function ine(){if(kj)return Dx;kj=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.Arc=void 0;const e=Nn(),t=Ci(),r=kn(),n=Mn(),s=kn();class a extends t.Shape{_sceneFunc(o){const l=r.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,u),o.arc(0,0,this.innerRadius(),l,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),u=this.clockwise(),d=r.Konva.getAngle(u?360-this.angle():this.angle()),f=Math.cos(Math.min(d,Math.PI)),h=1,g=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),x=Math.sin(Math.min(d,Math.PI/2)),y=f*(f>0?o:l),v=h*l,T=g*(g>0?o:l),k=x*(x>0?l:o);return{x:y,y:u?-1*k:T,width:v-y,height:k-T}}}return Dx.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1,(0,n.getBooleanValidator)()),Dx}var Ox={},Ix={},Tj;function H$(){if(Tj)return Ix;Tj=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.Line=void 0;const e=Nn(),t=kn(),r=Ci(),n=Mn();function s(o,l,u,d,f,h,g){const x=Math.sqrt(Math.pow(u-o,2)+Math.pow(d-l,2)),y=Math.sqrt(Math.pow(f-u,2)+Math.pow(h-d,2)),v=g*x/(x+y),T=g*y/(x+y),k=u-v*(f-o),b=d-v*(h-l),E=u+T*(f-o),N=d+T*(h-l);return[k,b,E,N]}function a(o,l){const u=o.length,d=[];for(let f=2;f<u-2;f+=2){const h=s(o[f-2],o[f-1],o[f],o[f+1],o[f+2],o[f+3],l);isNaN(h[0])||(d.push(h[0]),d.push(h[1]),d.push(o[f]),d.push(o[f+1]),d.push(h[2]),d.push(h[3]))}return d}class i extends r.Shape{constructor(l){super(l),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(l){const u=this.points(),d=u.length,f=this.tension(),h=this.closed(),g=this.bezier();if(!d)return;let x=0;if(l.beginPath(),l.moveTo(u[0],u[1]),f!==0&&d>4){const y=this.getTensionPoints(),v=y.length;for(x=h?0:4,h||l.quadraticCurveTo(y[0],y[1],y[2],y[3]);x<v-2;)l.bezierCurveTo(y[x++],y[x++],y[x++],y[x++],y[x++],y[x++]);h||l.quadraticCurveTo(y[v-2],y[v-1],u[d-2],u[d-1])}else if(g)for(x=2;x<d;)l.bezierCurveTo(u[x++],u[x++],u[x++],u[x++],u[x++],u[x++]);else for(x=2;x<d;x+=2)l.lineTo(u[x],u[x+1]);h?(l.closePath(),l.fillStrokeShape(this)):l.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const l=this.points(),u=l.length,d=this.tension(),f=s(l[u-2],l[u-1],l[0],l[1],l[2],l[3],d),h=s(l[u-4],l[u-3],l[u-2],l[u-1],l[0],l[1],d),g=a(l,d);return[f[2],f[3]].concat(g).concat([h[0],h[1],l[u-2],l[u-1],h[2],h[3],f[0],f[1],l[0],l[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let l=this.points();if(l.length<4)return{x:l[0]||0,y:l[1]||0,width:0,height:0};this.tension()!==0?l=[l[0],l[1],...this._getTensionPoints(),l[l.length-2],l[l.length-1]]:l=this.points();let u=l[0],d=l[0],f=l[1],h=l[1],g,x;for(let y=0;y<l.length/2;y++)g=l[y*2],x=l[y*2+1],u=Math.min(u,g),d=Math.max(d,g),f=Math.min(f,x),h=Math.max(h,x);return{x:u,y:f,width:d-u,height:h-f}}}return Ix.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,n.getNumberArrayValidator)()),Ix}var Rx={},YS={},Cj;function one(){return Cj||(Cj=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(i,o,l)=>{let u,d;const h=l/2;u=0;for(let g=0;g<20;g++)d=h*e.tValues[20][g]+h,u+=e.cValues[20][g]*n(i,o,d);return h*u};e.getCubicArcLength=t;const r=(i,o,l)=>{l===void 0&&(l=1);const u=i[0]-2*i[1]+i[2],d=o[0]-2*o[1]+o[2],f=2*i[1]-2*i[0],h=2*o[1]-2*o[0],g=4*(u*u+d*d),x=4*(u*f+d*h),y=f*f+h*h;if(g===0)return l*Math.sqrt(Math.pow(i[2]-i[0],2)+Math.pow(o[2]-o[0],2));const v=x/(2*g),T=y/g,k=l+v,b=T-v*v,E=k*k+b>0?Math.sqrt(k*k+b):0,N=v*v+b>0?Math.sqrt(v*v+b):0,P=v+Math.sqrt(v*v+b)!==0?b*Math.log(Math.abs((k+E)/(v+N))):0;return Math.sqrt(g)/2*(k*E-v*N+P)};e.getQuadraticArcLength=r;function n(i,o,l){const u=s(1,l,i),d=s(1,l,o),f=u*u+d*d;return Math.sqrt(f)}const s=(i,o,l)=>{const u=l.length-1;let d,f;if(u===0)return 0;if(i===0){f=0;for(let h=0;h<=u;h++)f+=e.binomialCoefficients[u][h]*Math.pow(1-o,u-h)*Math.pow(o,h)*l[h];return f}else{d=new Array(u);for(let h=0;h<u;h++)d[h]=u*(l[h+1]-l[h]);return s(i-1,o,d)}},a=(i,o,l)=>{let u=1,d=i/o,f=(i-l(d))/o,h=0;for(;u>.001;){const g=l(d+f),x=Math.abs(i-g)/o;if(x<u)u=x,d+=f;else{const y=l(d-f),v=Math.abs(i-y)/o;v<u?(u=v,d-=f):f/=2}if(h++,h>500)break}return d};e.t2length=a})(YS)),YS}var Ej;function N7(){if(Ej)return Rx;Ej=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.Path=void 0;const e=Nn(),t=kn(),r=Ci(),n=one();class s extends r.Shape{constructor(i){super(i),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=s.parsePathData(this.data()),this.pathLength=s.getPathLength(this.dataArray)}_sceneFunc(i){const o=this.dataArray;i.beginPath();let l=!1;for(let u=0;u<o.length;u++){const d=o[u].command,f=o[u].points;switch(d){case"L":i.lineTo(f[0],f[1]);break;case"M":i.moveTo(f[0],f[1]);break;case"C":i.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":i.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const h=f[0],g=f[1],x=f[2],y=f[3],v=f[4],T=f[5],k=f[6],b=f[7],E=x>y?x:y,N=x>y?1:x/y,P=x>y?y/x:1;i.translate(h,g),i.rotate(k),i.scale(N,P),i.arc(0,0,E,v,v+T,1-b),i.scale(1/N,1/P),i.rotate(-k),i.translate(-h,-g);break;case"z":l=!0,i.closePath();break}}!l&&!this.hasFill()?i.strokeShape(this):i.fillStrokeShape(this)}getSelfRect(){let i=[];this.dataArray.forEach(function(g){if(g.command==="A"){const x=g.points[4],y=g.points[5],v=g.points[4]+y;let T=Math.PI/180;if(Math.abs(x-v)<T&&(T=Math.abs(x-v)),y<0)for(let k=x-T;k>v;k-=T){const b=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],k,0);i.push(b.x,b.y)}else for(let k=x+T;k<v;k+=T){const b=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],k,0);i.push(b.x,b.y)}}else if(g.command==="C")for(let x=0;x<=1;x+=.01){const y=s.getPointOnCubicBezier(x,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);i.push(y.x,y.y)}else i=i.concat(g.points)});let o=i[0],l=i[0],u=i[1],d=i[1],f,h;for(let g=0;g<i.length/2;g++)f=i[g*2],h=i[g*2+1],isNaN(f)||(o=Math.min(o,f),l=Math.max(l,f)),isNaN(h)||(u=Math.min(u,h),d=Math.max(d,h));return{x:o,y:u,width:l-o,height:d-u}}getLength(){return this.pathLength}getPointAtLength(i){return s.getPointAtLengthOfDataArray(i,this.dataArray)}static getLineLength(i,o,l,u){return Math.sqrt((l-i)*(l-i)+(u-o)*(u-o))}static getPathLength(i){let o=0;for(let l=0;l<i.length;++l)o+=i[l].pathLength;return o}static getPointAtLengthOfDataArray(i,o){let l,u=0,d=o.length;if(!d)return null;for(;u<d&&i>o[u].pathLength;)i-=o[u].pathLength,++u;if(u===d)return l=o[u-1].points.slice(-2),{x:l[0],y:l[1]};if(i<.01)return o[u].command==="M"?(l=o[u].points.slice(0,2),{x:l[0],y:l[1]}):{x:o[u].start.x,y:o[u].start.y};const f=o[u],h=f.points;switch(f.command){case"L":return s.getPointOnLine(i,f.start.x,f.start.y,h[0],h[1]);case"C":return s.getPointOnCubicBezier((0,n.t2length)(i,s.getPathLength(o),E=>(0,n.getCubicArcLength)([f.start.x,h[0],h[2],h[4]],[f.start.y,h[1],h[3],h[5]],E)),f.start.x,f.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return s.getPointOnQuadraticBezier((0,n.t2length)(i,s.getPathLength(o),E=>(0,n.getQuadraticArcLength)([f.start.x,h[0],h[2]],[f.start.y,h[1],h[3]],E)),f.start.x,f.start.y,h[0],h[1],h[2],h[3]);case"A":const g=h[0],x=h[1],y=h[2],v=h[3],T=h[5],k=h[6];let b=h[4];return b+=T*i/f.pathLength,s.getPointOnEllipticalArc(g,x,y,v,b,k)}return null}static getPointOnLine(i,o,l,u,d,f,h){f=f??o,h=h??l;const g=this.getLineLength(o,l,u,d);if(g<1e-10)return{x:o,y:l};if(u===o)return{x:f,y:h+(d>l?i:-i)};const x=(d-l)/(u-o),y=Math.sqrt(i*i/(1+x*x))*(u<o?-1:1),v=x*y;if(Math.abs(h-l-x*(f-o))<1e-10)return{x:f+y,y:h+v};const T=((f-o)*(u-o)+(h-l)*(d-l))/(g*g),k=o+T*(u-o),b=l+T*(d-l),E=this.getLineLength(f,h,k,b),N=Math.sqrt(i*i-E*E),P=Math.sqrt(N*N/(1+x*x))*(u<o?-1:1),M=x*P;return{x:k+P,y:b+M}}static getPointOnCubicBezier(i,o,l,u,d,f,h,g,x){function y(N){return N*N*N}function v(N){return 3*N*N*(1-N)}function T(N){return 3*N*(1-N)*(1-N)}function k(N){return(1-N)*(1-N)*(1-N)}const b=g*y(i)+f*v(i)+u*T(i)+o*k(i),E=x*y(i)+h*v(i)+d*T(i)+l*k(i);return{x:b,y:E}}static getPointOnQuadraticBezier(i,o,l,u,d,f,h){function g(k){return k*k}function x(k){return 2*k*(1-k)}function y(k){return(1-k)*(1-k)}const v=f*g(i)+u*x(i)+o*y(i),T=h*g(i)+d*x(i)+l*y(i);return{x:v,y:T}}static getPointOnEllipticalArc(i,o,l,u,d,f){const h=Math.cos(f),g=Math.sin(f),x={x:l*Math.cos(d),y:u*Math.sin(d)};return{x:i+(x.x*h-x.y*g),y:o+(x.x*g+x.y*h)}}static parsePathData(i){if(!i)return[];let o=i;const l=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let v=0;v<l.length;v++)o=o.replace(new RegExp(l[v],"g"),"|"+l[v]);const u=o.split("|"),d=[],f=[];let h=0,g=0;const x=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let v=1;v<u.length;v++){let T=u[v],k=T.charAt(0);for(T=T.slice(1),f.length=0;y=x.exec(T);)f.push(y[0]);const b=[];for(let E=0,N=f.length;E<N;E++){if(f[E]==="00"){b.push(0,0);continue}const P=parseFloat(f[E]);isNaN(P)?b.push(0):b.push(P)}for(;b.length>0&&!isNaN(b[0]);){let E="",N=[];const P=h,M=g;let j,A,D,L,G,X,se,Q,re,B;switch(k){case"l":h+=b.shift(),g+=b.shift(),E="L",N.push(h,g);break;case"L":h=b.shift(),g=b.shift(),N.push(h,g);break;case"m":const V=b.shift(),R=b.shift();if(h+=V,g+=R,E="M",d.length>2&&d[d.length-1].command==="z"){for(let H=d.length-2;H>=0;H--)if(d[H].command==="M"){h=d[H].points[0]+V,g=d[H].points[1]+R;break}}N.push(h,g),k="l";break;case"M":h=b.shift(),g=b.shift(),E="M",N.push(h,g),k="L";break;case"h":h+=b.shift(),E="L",N.push(h,g);break;case"H":h=b.shift(),E="L",N.push(h,g);break;case"v":g+=b.shift(),E="L",N.push(h,g);break;case"V":g=b.shift(),E="L",N.push(h,g);break;case"C":N.push(b.shift(),b.shift(),b.shift(),b.shift()),h=b.shift(),g=b.shift(),N.push(h,g);break;case"c":N.push(h+b.shift(),g+b.shift(),h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),E="C",N.push(h,g);break;case"S":A=h,D=g,j=d[d.length-1],j.command==="C"&&(A=h+(h-j.points[2]),D=g+(g-j.points[3])),N.push(A,D,b.shift(),b.shift()),h=b.shift(),g=b.shift(),E="C",N.push(h,g);break;case"s":A=h,D=g,j=d[d.length-1],j.command==="C"&&(A=h+(h-j.points[2]),D=g+(g-j.points[3])),N.push(A,D,h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),E="C",N.push(h,g);break;case"Q":N.push(b.shift(),b.shift()),h=b.shift(),g=b.shift(),N.push(h,g);break;case"q":N.push(h+b.shift(),g+b.shift()),h+=b.shift(),g+=b.shift(),E="Q",N.push(h,g);break;case"T":A=h,D=g,j=d[d.length-1],j.command==="Q"&&(A=h+(h-j.points[0]),D=g+(g-j.points[1])),h=b.shift(),g=b.shift(),E="Q",N.push(A,D,h,g);break;case"t":A=h,D=g,j=d[d.length-1],j.command==="Q"&&(A=h+(h-j.points[0]),D=g+(g-j.points[1])),h+=b.shift(),g+=b.shift(),E="Q",N.push(A,D,h,g);break;case"A":L=b.shift(),G=b.shift(),X=b.shift(),se=b.shift(),Q=b.shift(),re=h,B=g,h=b.shift(),g=b.shift(),E="A",N=this.convertEndpointToCenterParameterization(re,B,h,g,se,Q,L,G,X);break;case"a":L=b.shift(),G=b.shift(),X=b.shift(),se=b.shift(),Q=b.shift(),re=h,B=g,h+=b.shift(),g+=b.shift(),E="A",N=this.convertEndpointToCenterParameterization(re,B,h,g,se,Q,L,G,X);break}d.push({command:E||k,points:N,start:{x:P,y:M},pathLength:this.calcLength(P,M,E||k,N)})}(k==="z"||k==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(i,o,l,u){let d,f,h,g;const x=s;switch(l){case"L":return x.getLineLength(i,o,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([i,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([i,u[0],u[2]],[o,u[1],u[3]],1);case"A":d=0;const y=u[4],v=u[5],T=u[4]+v;let k=Math.PI/180;if(Math.abs(y-T)<k&&(k=Math.abs(y-T)),f=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],y,0),v<0)for(g=y-k;g>T;g-=k)h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),f=h;else for(g=y+k;g<T;g+=k)h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),f=h;return h=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],T,0),d+=x.getLineLength(f.x,f.y,h.x,h.y),d}return 0}static convertEndpointToCenterParameterization(i,o,l,u,d,f,h,g,x){const y=x*(Math.PI/180),v=Math.cos(y)*(i-l)/2+Math.sin(y)*(o-u)/2,T=-1*Math.sin(y)*(i-l)/2+Math.cos(y)*(o-u)/2,k=v*v/(h*h)+T*T/(g*g);k>1&&(h*=Math.sqrt(k),g*=Math.sqrt(k));let b=Math.sqrt((h*h*(g*g)-h*h*(T*T)-g*g*(v*v))/(h*h*(T*T)+g*g*(v*v)));d===f&&(b*=-1),isNaN(b)&&(b=0);const E=b*h*T/g,N=b*-g*v/h,P=(i+l)/2+Math.cos(y)*E-Math.sin(y)*N,M=(o+u)/2+Math.sin(y)*E+Math.cos(y)*N,j=function(Q){return Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1])},A=function(Q,re){return(Q[0]*re[0]+Q[1]*re[1])/(j(Q)*j(re))},D=function(Q,re){return(Q[0]*re[1]<Q[1]*re[0]?-1:1)*Math.acos(A(Q,re))},L=D([1,0],[(v-E)/h,(T-N)/g]),G=[(v-E)/h,(T-N)/g],X=[(-1*v-E)/h,(-1*T-N)/g];let se=D(G,X);return A(G,X)<=-1&&(se=Math.PI),A(G,X)>=1&&(se=0),f===0&&se>0&&(se=se-2*Math.PI),f===1&&se<0&&(se=se+2*Math.PI),[P,M,h,g,L,se,y,f]}}return Rx.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"data"),Rx}var Nj;function lne(){if(Nj)return Ox;Nj=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.Arrow=void 0;const e=Nn(),t=H$(),r=Mn(),n=kn(),s=N7();class a extends t.Line{_sceneFunc(o){super._sceneFunc(o);const l=Math.PI*2,u=this.points();let d=u;const f=this.tension()!==0&&u.length>4;f&&(d=this.getTensionPoints());const h=this.pointerLength(),g=u.length;let x,y;if(f){const k=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[g-2],u[g-1]],b=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",k),E=s.Path.getPointOnQuadraticBezier(Math.min(1,1-h/b),k[0],k[1],k[2],k[3],k[4],k[5]);x=u[g-2]-E.x,y=u[g-1]-E.y}else x=u[g-2]-u[g-4],y=u[g-1]-u[g-3];const v=(Math.atan2(y,x)+l)%l,T=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[g-2],u[g-1]),o.rotate(v),o.moveTo(0,0),o.lineTo(-h,T/2),o.lineTo(-h,-T/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),f?(x=(d[0]+d[2])/2-u[0],y=(d[1]+d[3])/2-u[1]):(x=u[2]-u[0],y=u[3]-u[1]),o.rotate((Math.atan2(-y,-x)+l)%l),o.moveTo(0,0),o.lineTo(-h,T/2),o.lineTo(-h,-T/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x,y:o.y-l,width:o.width,height:o.height+l*2}}}return Ox.Arrow=a,a.prototype.className="Arrow",(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"pointerLength",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerWidth",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerAtBeginning",!1),e.Factory.addGetterSetter(a,"pointerAtEnding",!0),Ox}var Lx={},Aj;function cne(){if(Aj)return Lx;Aj=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.Circle=void 0;const e=Nn(),t=Ci(),r=Mn(),n=kn();class s extends t.Shape{_sceneFunc(i){i.beginPath(),i.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius()!==i/2&&this.radius(i/2)}setHeight(i){this.radius()!==i/2&&this.radius(i/2)}}return Lx.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),Lx}var Bx={},jj;function une(){if(jj)return Bx;jj=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.Ellipse=void 0;const e=Nn(),t=Ci(),r=Mn(),n=kn();class s extends t.Shape{_sceneFunc(i){const o=this.radiusX(),l=this.radiusY();i.beginPath(),i.save(),o!==l&&i.scale(1,l/o),i.arc(0,0,o,0,Math.PI*2,!1),i.restore(),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(i){this.radiusX(i/2)}setHeight(i){this.radiusY(i/2)}}return Bx.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),e.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),e.Factory.addGetterSetter(s,"radiusX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"radiusY",0,(0,r.getNumberValidator)()),Bx}var $x={},Pj;function dne(){if(Pj)return $x;Pj=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.Image=void 0;const e=ga(),t=Nn(),r=Ci(),n=kn(),s=Mn();class a extends r.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",l=>{this._removeImageLoad(l.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),l=this.hasShadow();return o&&l?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),f=this.attrs.image;let h;if(f){const g=this.attrs.cropWidth,x=this.attrs.cropHeight;g&&x?h=[f,this.cropX(),this.cropY(),g,x,0,0,l,u]:h=[f,0,0,l,u]}(this.hasFill()||this.hasStroke()||d)&&(o.beginPath(),d?e.Util.drawRoundedRectPath(o,l,u,d):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)),f&&(d&&o.clip(),o.drawImage.apply(o,h))}_hitFunc(o){const l=this.width(),u=this.height(),d=this.cornerRadius();o.beginPath(),d?e.Util.drawRoundedRectPath(o,l,u,d):o.rect(0,0,l,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return(o=this.attrs.width)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.width}getHeight(){var o,l;return(o=this.attrs.height)!==null&&o!==void 0?o:(l=this.image())===null||l===void 0?void 0:l.height}static fromURL(o,l,u=null){const d=e.Util.createImageElement();d.onload=function(){const f=new a({image:d});l(f)},d.onerror=u,d.crossOrigin="Anonymous",d.src=o}}return $x.Image=a,a.prototype.className="Image",(0,n._registerNode)(a),t.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(a,"image"),t.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(a,"cropX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropHeight",0,(0,s.getNumberValidator)()),$x}var Rh={},Mj;function fne(){if(Mj)return Rh;Mj=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.Tag=Rh.Label=void 0;const e=Nn(),t=Ci(),r=C7(),n=Mn(),s=kn(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="Change.konva",o="none",l="up",u="right",d="down",f="left",h=a.length;class g extends r.Group{constructor(v){super(v),this.on("add.konva",function(T){this._addListeners(T.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let T=this,k;const b=function(){T._sync()};for(k=0;k<h;k++)v.on(a[k]+i,b)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),T=this.getTag(),k,b,E,N,P,M,j;if(v&&T){switch(k=v.width(),b=v.height(),E=T.pointerDirection(),N=T.pointerWidth(),j=T.pointerHeight(),P=0,M=0,E){case l:P=k/2,M=-1*j;break;case u:P=k+N,M=b/2;break;case d:P=k/2,M=b+j;break;case f:P=-1*N,M=b/2;break}T.setAttrs({x:-1*P,y:-1*M,width:k,height:b}),v.setAttrs({x:-1*P,y:-1*M})}}}Rh.Label=g,g.prototype.className="Label",(0,s._registerNode)(g);class x extends t.Shape{_sceneFunc(v){const T=this.width(),k=this.height(),b=this.pointerDirection(),E=this.pointerWidth(),N=this.pointerHeight(),P=this.cornerRadius();let M=0,j=0,A=0,D=0;typeof P=="number"?M=j=A=D=Math.min(P,T/2,k/2):(M=Math.min(P[0]||0,T/2,k/2),j=Math.min(P[1]||0,T/2,k/2),D=Math.min(P[2]||0,T/2,k/2),A=Math.min(P[3]||0,T/2,k/2)),v.beginPath(),v.moveTo(M,0),b===l&&(v.lineTo((T-E)/2,0),v.lineTo(T/2,-1*N),v.lineTo((T+E)/2,0)),v.lineTo(T-j,0),v.arc(T-j,j,j,Math.PI*3/2,0,!1),b===u&&(v.lineTo(T,(k-N)/2),v.lineTo(T+E,k/2),v.lineTo(T,(k+N)/2)),v.lineTo(T,k-D),v.arc(T-D,k-D,D,0,Math.PI/2,!1),b===d&&(v.lineTo((T+E)/2,k),v.lineTo(T/2,k+N),v.lineTo((T-E)/2,k)),v.lineTo(A,k),v.arc(A,k-A,A,Math.PI/2,Math.PI,!1),b===f&&(v.lineTo(0,(k+N)/2),v.lineTo(-1*E,k/2),v.lineTo(0,(k-N)/2)),v.lineTo(0,M),v.arc(M,M,M,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,T=0,k=this.pointerWidth(),b=this.pointerHeight(),E=this.pointerDirection(),N=this.width(),P=this.height();return E===l?(T-=b,P+=b):E===d?P+=b:E===f?(v-=k*1.5,N+=k):E===u&&(N+=k*1.5),{x:v,y:T,width:N,height:P}}}return Rh.Tag=x,x.prototype.className="Tag",(0,s._registerNode)(x),e.Factory.addGetterSetter(x,"pointerDirection",o),e.Factory.addGetterSetter(x,"pointerWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"pointerHeight",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),Rh}var zx={},Fj;function G$(){if(Fj)return zx;Fj=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.Rect=void 0;const e=Nn(),t=Ci(),r=kn(),n=ga(),s=Mn();class a extends t.Shape{_sceneFunc(o){const l=this.cornerRadius(),u=this.width(),d=this.height();o.beginPath(),l?n.Util.drawRoundedRectPath(o,u,d,l):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}}return zx.Rect=a,a.prototype.className="Rect",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),zx}var Ux={},Dj;function hne(){if(Dj)return Ux;Dj=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.RegularPolygon=void 0;const e=Nn(),t=Ci(),r=Mn(),n=kn();class s extends t.Shape{_sceneFunc(i){const o=this._getPoints();i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let l=1;l<o.length;l++)i.lineTo(o[l].x,o[l].y);i.closePath(),i.fillStrokeShape(this)}_getPoints(){const i=this.attrs.sides,o=this.attrs.radius||0,l=[];for(let u=0;u<i;u++)l.push({x:o*Math.sin(u*2*Math.PI/i),y:-1*o*Math.cos(u*2*Math.PI/i)});return l}getSelfRect(){const i=this._getPoints();let o=i[0].x,l=i[0].y,u=i[0].x,d=i[0].y;return i.forEach(f=>{o=Math.min(o,f.x),l=Math.max(l,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:o,y:u,width:l-o,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius(i/2)}setHeight(i){this.radius(i/2)}}return Ux.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"sides",0,(0,r.getNumberValidator)()),Ux}var Wx={},Oj;function mne(){if(Oj)return Wx;Oj=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.Ring=void 0;const e=Nn(),t=Ci(),r=Mn(),n=kn(),s=Math.PI*2;class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,s,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),s,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}return Wx.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),Wx}var Hx={},Ij;function gne(){if(Ij)return Hx;Ij=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.Sprite=void 0;const e=Nn(),t=Ci(),r=E7(),n=Mn(),s=kn();class a extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new r.Animation(()=>{const l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const l=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[l],h=this.frameOffsets(),g=f[d+0],x=f[d+1],y=f[d+2],v=f[d+3],T=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,v),o.closePath(),o.fillStrokeShape(this)),T)if(h){const k=h[l],b=u*2;o.drawImage(T,g,x,y,v,k[b+0],k[b+1],y,v)}else o.drawImage(T,g,x,y,v,0,0,y,v)}_hitFunc(o){const l=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[l],h=this.frameOffsets(),g=f[d+2],x=f[d+3];if(o.beginPath(),h){const y=h[l],v=u*2;o.rect(y[v+0],y[v+1],g,x)}else o.rect(0,0,g,x);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),l=this.animation(),u=this.animations(),d=u[l],f=d.length/4;o<f-1?this.frameIndex(o+1):this.frameIndex(0)}}return Hx.Sprite=a,a.prototype.className="Sprite",(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"animation"),e.Factory.addGetterSetter(a,"animations"),e.Factory.addGetterSetter(a,"frameOffsets"),e.Factory.addGetterSetter(a,"image"),e.Factory.addGetterSetter(a,"frameIndex",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"frameRate",17,(0,n.getNumberValidator)()),e.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Hx}var Gx={},Rj;function pne(){if(Rj)return Gx;Rj=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.Star=void 0;const e=Nn(),t=Ci(),r=Mn(),n=kn();class s extends t.Shape{_sceneFunc(i){const o=this.innerRadius(),l=this.outerRadius(),u=this.numPoints();i.beginPath(),i.moveTo(0,0-l);for(let d=1;d<u*2;d++){const f=d%2===0?l:o,h=f*Math.sin(d*Math.PI/u),g=-1*f*Math.cos(d*Math.PI/u);i.lineTo(h,g)}i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(i){this.outerRadius(i/2)}setHeight(i){this.outerRadius(i/2)}}return Gx.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"numPoints",5,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),Gx}var Xg={},Lj;function V$(){if(Lj)return Xg;Lj=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.Text=void 0,Xg.stringToArray=i;const e=ga(),t=Nn(),r=Ci(),n=kn(),s=Mn(),a=kn();function i(I){return[...I].reduce((W,K,ee,oe)=>{if(new RegExp("\\p{Emoji}","u").test(K)){const Z=oe[ee+1];Z&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(Z)?(W.push(K+Z),oe[ee+1]=""):W.push(K)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(K+(oe[ee+1]||""))?W.push(K+oe[ee+1]):ee>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(K)?W[W.length-1]+=K:K&&W.push(K);return W},[])}const o="auto",l="center",u="inherit",d="justify",f="Change.konva",h="2d",g="-",x="left",y="text",v="Text",T="top",k="bottom",b="middle",E="normal",N="px ",P=" ",M="right",j="rtl",A="word",D="char",L="none",G="",X=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],se=X.length;function Q(I){return I.split(",").map(W=>{W=W.trim();const K=W.indexOf(" ")>=0,ee=W.indexOf('"')>=0||W.indexOf("'")>=0;return K&&!ee&&(W=`"${W}"`),W}).join(", ")}let re;function B(){return re||(re=e.Util.createCanvasElement().getContext(h),re)}function V(I){I.fillText(this._partialText,this._partialTextX,this._partialTextY)}function R(I){I.setAttr("miterLimit",2),I.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function H(I){return I=I||{},!I.fillLinearGradientColorStops&&!I.fillRadialGradientColorStops&&!I.fillPatternImage&&(I.fill=I.fill||"black"),I}class z extends r.Shape{constructor(W){super(H(W)),this._partialTextX=0,this._partialTextY=0;for(let K=0;K<se;K++)this.on(X[K]+f,this._setTextData);this._setTextData()}_sceneFunc(W){const K=this.textArr,ee=K.length;if(!this.text())return;let oe=this.padding(),Z=this.fontSize(),le=this.lineHeight()*Z,ue=this.verticalAlign(),de=this.direction(),Te=0,ie=this.align(),pe=this.getWidth(),Ae=this.letterSpacing(),Me=this.fill(),Je=this.textDecoration(),Ve=Je.indexOf("underline")!==-1,Dt=Je.indexOf("line-through")!==-1,lt;de=de===u?W.direction:de;let At=le/2,vt=b;if(n.Konva._fixTextRendering){const ct=this.measureSize("M");vt="alphabetic",At=(ct.fontBoundingBoxAscent-ct.fontBoundingBoxDescent)/2+le/2}for(de===j&&W.setAttr("direction",de),W.setAttr("font",this._getContextFont()),W.setAttr("textBaseline",vt),W.setAttr("textAlign",x),ue===b?Te=(this.getHeight()-ee*le-oe*2)/2:ue===k&&(Te=this.getHeight()-ee*le-oe*2),W.translate(oe,Te+oe),lt=0;lt<ee;lt++){let ct=0,bt=0;const Ut=K[lt],Bt=Ut.text,Vt=Ut.width,We=Ut.lastInParagraph;if(W.save(),ie===M?ct+=pe-Vt-oe*2:ie===l&&(ct+=(pe-Vt-oe*2)/2),Ve){W.save(),W.beginPath();const Ue=n.Konva._fixTextRendering?Math.round(Z/4):Math.round(Z/2),tt=ct,nt=At+bt+Ue;W.moveTo(tt,nt);const at=ie===d&&!We?pe-oe*2:Vt;W.lineTo(tt+Math.round(at),nt),W.lineWidth=Z/15;const It=this._getLinearGradient();W.strokeStyle=It||Me,W.stroke(),W.restore()}if(Dt){W.save(),W.beginPath();const Ue=n.Konva._fixTextRendering?-Math.round(Z/4):0;W.moveTo(ct,At+bt+Ue);const tt=ie===d&&!We?pe-oe*2:Vt;W.lineTo(ct+Math.round(tt),At+bt+Ue),W.lineWidth=Z/15;const nt=this._getLinearGradient();W.strokeStyle=nt||Me,W.stroke(),W.restore()}if(de!==j&&(Ae!==0||ie===d)){const Ue=Bt.split(" ").length-1,tt=i(Bt);for(let nt=0;nt<tt.length;nt++){const at=tt[nt];at===" "&&!We&&ie===d&&(ct+=(pe-oe*2-Vt)/Ue),this._partialTextX=ct,this._partialTextY=At+bt,this._partialText=at,W.fillStrokeShape(this),ct+=this.measureSize(at).width+Ae}}else Ae!==0&&W.setAttr("letterSpacing",`${Ae}px`),this._partialTextX=ct,this._partialTextY=At+bt,this._partialText=Bt,W.fillStrokeShape(this);W.restore(),ee>1&&(At+=le)}}_hitFunc(W){const K=this.getWidth(),ee=this.getHeight();W.beginPath(),W.rect(0,0,K,ee),W.closePath(),W.fillStrokeShape(this)}setText(W){const K=e.Util._isString(W)?W:W==null?"":W+"";return this._setAttr(y,K),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(W){var K,ee,oe,Z,le,ue,de,Te,ie,pe,Ae;let Me=B(),Je=this.fontSize(),Ve;Me.save(),Me.font=this._getContextFont(),Ve=Me.measureText(W),Me.restore();const Dt=Je/100;return{actualBoundingBoxAscent:(K=Ve.actualBoundingBoxAscent)!==null&&K!==void 0?K:71.58203125*Dt,actualBoundingBoxDescent:(ee=Ve.actualBoundingBoxDescent)!==null&&ee!==void 0?ee:0,actualBoundingBoxLeft:(oe=Ve.actualBoundingBoxLeft)!==null&&oe!==void 0?oe:-7.421875*Dt,actualBoundingBoxRight:(Z=Ve.actualBoundingBoxRight)!==null&&Z!==void 0?Z:75.732421875*Dt,alphabeticBaseline:(le=Ve.alphabeticBaseline)!==null&&le!==void 0?le:0,emHeightAscent:(ue=Ve.emHeightAscent)!==null&&ue!==void 0?ue:100*Dt,emHeightDescent:(de=Ve.emHeightDescent)!==null&&de!==void 0?de:-20*Dt,fontBoundingBoxAscent:(Te=Ve.fontBoundingBoxAscent)!==null&&Te!==void 0?Te:91*Dt,fontBoundingBoxDescent:(ie=Ve.fontBoundingBoxDescent)!==null&&ie!==void 0?ie:21*Dt,hangingBaseline:(pe=Ve.hangingBaseline)!==null&&pe!==void 0?pe:72.80000305175781*Dt,ideographicBaseline:(Ae=Ve.ideographicBaseline)!==null&&Ae!==void 0?Ae:-21*Dt,width:Ve.width,height:Je}}_getContextFont(){return this.fontStyle()+P+this.fontVariant()+P+(this.fontSize()+N)+Q(this.fontFamily())}_addTextLine(W){this.align()===d&&(W=W.trim());const ee=this._getTextWidth(W);return this.textArr.push({text:W,width:ee,lastInParagraph:!1})}_getTextWidth(W){const K=this.letterSpacing(),ee=W.length;return B().measureText(W).width+K*ee}_setTextData(){let W=this.text().split(`
`),K=+this.fontSize(),ee=0,oe=this.lineHeight()*K,Z=this.attrs.width,le=this.attrs.height,ue=Z!==o&&Z!==void 0,de=le!==o&&le!==void 0,Te=this.padding(),ie=Z-Te*2,pe=le-Te*2,Ae=0,Me=this.wrap(),Je=Me!==L,Ve=Me!==D&&Je,Dt=this.ellipsis();this.textArr=[],B().font=this._getContextFont();const lt=Dt?this._getTextWidth(G):0;for(let At=0,vt=W.length;At<vt;++At){let ct=W[At],bt=this._getTextWidth(ct);if(ue&&bt>ie)for(;ct.length>0;){let Ut=0,Bt=i(ct).length,Vt="",We=0;for(;Ut<Bt;){const Ue=Ut+Bt>>>1,tt=i(ct),nt=tt.slice(0,Ue+1).join(""),at=this._getTextWidth(nt);(Dt&&de&&Ae+oe>pe?at+lt:at)<=ie?(Ut=Ue+1,Vt=nt,We=at):Bt=Ue}if(Vt){if(Ve){const nt=i(ct),at=i(Vt),It=nt[at.length],Lt=It===P||It===g;let Xt;if(Lt&&We<=ie)Xt=at.length;else{const vr=at.lastIndexOf(P),br=at.lastIndexOf(g);Xt=Math.max(vr,br)+1}Xt>0&&(Ut=Xt,Vt=nt.slice(0,Ut).join(""),We=this._getTextWidth(Vt))}if(Vt=Vt.trimRight(),this._addTextLine(Vt),ee=Math.max(ee,We),Ae+=oe,this._shouldHandleEllipsis(Ae)){this._tryToAddEllipsisToLastLine();break}if(ct=i(ct).slice(Ut).join("").trimLeft(),ct.length>0&&(bt=this._getTextWidth(ct),bt<=ie)){this._addTextLine(ct),Ae+=oe,ee=Math.max(ee,bt);break}}else break}else this._addTextLine(ct),Ae+=oe,ee=Math.max(ee,bt),this._shouldHandleEllipsis(Ae)&&At<vt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),de&&Ae+oe>pe)break}this.textHeight=K,this.textWidth=ee}_shouldHandleEllipsis(W){const K=+this.fontSize(),ee=this.lineHeight()*K,oe=this.attrs.height,Z=oe!==o&&oe!==void 0,le=this.padding(),ue=oe-le*2;return!(this.wrap()!==L)||Z&&W+ee>ue}_tryToAddEllipsisToLastLine(){const W=this.attrs.width,K=W!==o&&W!==void 0,ee=this.padding(),oe=W-ee*2,Z=this.ellipsis(),le=this.textArr[this.textArr.length-1];!le||!Z||(K&&(this._getTextWidth(le.text+G)<oe||(le.text=le.text.slice(0,le.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(le.text+G))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const W=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,K=this.hasShadow();return W&&K?!0:super._useBufferCanvas()}}return Xg.Text=z,z.prototype._fillFunc=V,z.prototype._strokeFunc=R,z.prototype.className=v,z.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(z),t.Factory.overWriteSetter(z,"width",(0,s.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(z,"height",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(z,"direction",u),t.Factory.addGetterSetter(z,"fontFamily","Arial"),t.Factory.addGetterSetter(z,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(z,"fontStyle",E),t.Factory.addGetterSetter(z,"fontVariant",E),t.Factory.addGetterSetter(z,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(z,"align",x),t.Factory.addGetterSetter(z,"verticalAlign",T),t.Factory.addGetterSetter(z,"lineHeight",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(z,"wrap",A),t.Factory.addGetterSetter(z,"ellipsis",!1,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(z,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(z,"text","",(0,s.getStringValidator)()),t.Factory.addGetterSetter(z,"textDecoration",""),Xg}var Vx={},Bj;function xne(){if(Bj)return Vx;Bj=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.TextPath=void 0;const e=ga(),t=Nn(),r=Ci(),n=N7(),s=V$(),a=Mn(),i=kn(),o="",l="normal";function u(h){h.fillText(this.partialText,0,0)}function d(h){h.strokeText(this.partialText,0,0)}class f extends r.Shape{constructor(g){super(g),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const x=this.pathLength;return g-1>x?null:n.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const x=this.textDecoration(),y=this.fill(),v=this.fontSize(),T=this.glyphInfo;x==="underline"&&g.beginPath();for(let k=0;k<T.length;k++){g.save();const b=T[k].p0;g.translate(b.x,b.y),g.rotate(T[k].rotation),this.partialText=T[k].text,g.fillStrokeShape(this),x==="underline"&&(k===0&&g.moveTo(0,v/2+1),g.lineTo(v,v/2+1)),g.restore()}x==="underline"&&(g.strokeStyle=y,g.lineWidth=v/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();const x=this.glyphInfo;if(x.length>=1){const y=x[0].p0;g.moveTo(y.x,y.y)}for(let y=0;y<x.length;y++){const v=x[y].p1;g.lineTo(v.x,v.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return s.Text.prototype.setText.call(this,g)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(g){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const v=y.measureText(g);return y.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:x}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=x,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),v=this.align(),T=this.kerningFunc(),k=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let b=0;v==="center"&&(b=Math.max(0,this.pathLength/2-k/2)),v==="right"&&(b=Math.max(0,this.pathLength-k));const E=(0,s.stringToArray)(this.text());let N=b;for(let P=0;P<E.length;P++){const M=this._getPointAtLength(N);if(!M)return;let j=this._getTextSize(E[P]).width+y;if(E[P]===" "&&v==="justify"){const se=this.text().split(" ").length-1;j+=(this.pathLength-k)/se}const A=this._getPointAtLength(N+j);if(!A)return;const D=n.Path.getLineLength(M.x,M.y,A.x,A.y);let L=0;if(T)try{L=T(E[P-1],E[P])*this.fontSize()}catch{L=0}M.x+=L,A.x+=L,this.textWidth+=L;const G=n.Path.getPointOnLine(L+D/2,M.x,M.y,A.x,A.y),X=Math.atan2(A.y-M.y,A.x-M.x);this.glyphInfo.push({transposeX:G.x,transposeY:G.y,text:E[P],rotation:X,p0:M,p1:A}),N+=j}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(N){g.push(N.p0.x),g.push(N.p0.y),g.push(N.p1.x),g.push(N.p1.y)});let x=g[0]||0,y=g[0]||0,v=g[1]||0,T=g[1]||0,k,b;for(let N=0;N<g.length/2;N++)k=g[N*2],b=g[N*2+1],x=Math.min(x,k),y=Math.max(y,k),v=Math.min(v,b),T=Math.max(T,b);const E=this.fontSize();return{x:x-E/2,y:v-E/2,width:y-x+E,height:T-v+E}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}return Vx.TextPath=f,f.prototype._fillFunc=u,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=u,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",l),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",l),t.Factory.addGetterSetter(f,"text",o),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),Vx}var qx={},$j;function yne(){if($j)return qx;$j=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.Transformer=void 0;const e=ga(),t=Nn(),r=Aa(),n=Ci(),s=G$(),a=C7(),i=kn(),o=Mn(),l=kn(),u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(j=>j+`.${u}`).join(" "),f="nodesRect",h=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},x="ontouchstart"in i.Konva._global;function y(j,A,D){if(j==="rotater")return D;A+=e.Util.degToRad(g[j]||0);const L=(e.Util.radToDeg(A)%360+360)%360;return e.Util._inRange(L,315+22.5,360)||e.Util._inRange(L,0,22.5)?"ns-resize":e.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function T(j){return{x:j.x+j.width/2*Math.cos(j.rotation)+j.height/2*Math.sin(-j.rotation),y:j.y+j.height/2*Math.cos(j.rotation)+j.width/2*Math.sin(j.rotation)}}function k(j,A,D){const L=D.x+(j.x-D.x)*Math.cos(A)-(j.y-D.y)*Math.sin(A),G=D.y+(j.x-D.x)*Math.sin(A)+(j.y-D.y)*Math.cos(A);return{...j,rotation:j.rotation+A,x:L,y:G}}function b(j,A){const D=T(j);return k(j,A,D)}function E(j,A,D){let L=A;for(let G=0;G<j.length;G++){const X=i.Konva.getAngle(j[G]),se=Math.abs(X-A)%(Math.PI*2);Math.min(se,Math.PI*2-se)<D&&(L=X)}return L}let N=0;class P extends a.Group{constructor(A){super(A),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(A){return this.setNode(A),this}setNode(A){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([A])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(A=[]){this._nodes&&this._nodes.length&&this.detach();const D=A.filter(G=>G.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=A=D,A.length===1&&this.useSingleNodeRotation()?this.rotation(A[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(G=>{const X=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(G._attrsAffectingSize.length){const se=G._attrsAffectingSize.map(Q=>Q+"Change."+this._getEventNamespace()).join(" ");G.on(se,X)}G.on(h.map(se=>se+`.${this._getEventNamespace()}`).join(" "),X),G.on(`absoluteTransformChange.${this._getEventNamespace()}`,X),this._proxyDrag(G)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(A){let D;A.on(`dragstart.${this._getEventNamespace()}`,L=>{D=A.getAbsolutePosition(),!this.isDragging()&&A!==this.findOne(".back")&&this.startDrag(L,!1)}),A.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!D)return;const G=A.getAbsolutePosition(),X=G.x-D.x,se=G.y-D.y;this.nodes().forEach(Q=>{if(Q===A||Q.isDragging())return;const re=Q.getAbsolutePosition();Q.setAbsolutePosition({x:re.x+X,y:re.y+se}),Q.startDrag(L)}),D=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(A=>{A.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(A,D=this.rotation(),L){const G=A.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),X=A.getAbsoluteScale(L),se=A.getAbsolutePosition(L),Q=G.x*X.x-A.offsetX()*X.x,re=G.y*X.y-A.offsetY()*X.y,B=(i.Konva.getAngle(A.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),V={x:se.x+Q*Math.cos(B)+re*Math.sin(-B),y:se.y+re*Math.cos(B)+Q*Math.sin(B),width:G.width*X.x,height:G.height*X.y,rotation:B};return k(V,-i.Konva.getAngle(D),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const D=[];this.nodes().map(B=>{const V=B.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),R=[{x:V.x,y:V.y},{x:V.x+V.width,y:V.y},{x:V.x+V.width,y:V.y+V.height},{x:V.x,y:V.y+V.height}],H=B.getAbsoluteTransform();R.forEach(function(z){const I=H.point(z);D.push(I)})});const L=new e.Transform;L.rotate(-i.Konva.getAngle(this.rotation()));let G=1/0,X=1/0,se=-1/0,Q=-1/0;D.forEach(function(B){const V=L.point(B);G===void 0&&(G=se=V.x,X=Q=V.y),G=Math.min(G,V.x),X=Math.min(X,V.y),se=Math.max(se,V.x),Q=Math.max(Q,V.y)}),L.invert();const re=L.point({x:G,y:X});return{x:re.x,y:re.y,width:se-G,height:Q-X,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(A=>{this._createAnchor(A)}),this._createAnchor("rotater")}_createAnchor(A){const D=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:A+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:x?10:"auto"}),L=this;D.on("mousedown touchstart",function(G){L._handleMouseDown(G)}),D.on("dragstart",G=>{D.stopDrag(),G.cancelBubble=!0}),D.on("dragend",G=>{G.cancelBubble=!0}),D.on("mouseenter",()=>{const G=i.Konva.getAngle(this.rotation()),X=this.rotateAnchorCursor(),se=y(A,G,X);D.getStage().content&&(D.getStage().content.style.cursor=se),this._cursorChange=!0}),D.on("mouseout",()=>{D.getStage().content&&(D.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(D)}_createBack(){const A=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(D,L){const G=L.getParent(),X=G.padding();D.beginPath(),D.rect(-X,-X,L.width()+X*2,L.height()+X*2),D.moveTo(L.width()/2,-X),G.rotateEnabled()&&G.rotateLineVisible()&&D.lineTo(L.width()/2,-G.rotateAnchorOffset()*e.Util._sign(L.height())-X),D.fillStrokeShape(L)},hitFunc:(D,L)=>{if(!this.shouldOverdrawWholeArea())return;const G=this.padding();D.beginPath(),D.rect(-G,-G,L.width()+G*2,L.height()+G*2),D.fillStrokeShape(L)}});this.add(A),this._proxyDrag(A),A.on("dragstart",D=>{D.cancelBubble=!0}),A.on("dragmove",D=>{D.cancelBubble=!0}),A.on("dragend",D=>{D.cancelBubble=!0}),this.on("dragmove",D=>{this.update()})}_handleMouseDown(A){if(this._transforming)return;this._movingAnchorName=A.target.name().split(" ")[0];const D=this._getNodeRect(),L=D.width,G=D.height,X=Math.sqrt(Math.pow(L,2)+Math.pow(G,2));this.sin=Math.abs(G/X),this.cos=Math.abs(L/X),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const se=A.target.getAbsolutePosition(),Q=A.target.getStage().getPointerPosition();this._anchorDragOffset={x:Q.x-se.x,y:Q.y-se.y},N++,this._fire("transformstart",{evt:A.evt,target:this.getNode()}),this._nodes.forEach(re=>{re._fire("transformstart",{evt:A.evt,target:re})})}_handleMouseMove(A){let D,L,G;const X=this.findOne("."+this._movingAnchorName),se=X.getStage();se.setPointersPositions(A);const Q=se.getPointerPosition();let re={x:Q.x-this._anchorDragOffset.x,y:Q.y-this._anchorDragOffset.y};const B=X.getAbsolutePosition();this.anchorDragBoundFunc()&&(re=this.anchorDragBoundFunc()(B,re,A)),X.setAbsolutePosition(re);const V=X.getAbsolutePosition();if(B.x===V.x&&B.y===V.y)return;if(this._movingAnchorName==="rotater"){const oe=this._getNodeRect();D=X.x()-oe.width/2,L=-X.y()+oe.height/2;let Z=Math.atan2(-L,D)+Math.PI/2;oe.height<0&&(Z-=Math.PI);const ue=i.Konva.getAngle(this.rotation())+Z,de=i.Konva.getAngle(this.rotationSnapTolerance()),ie=E(this.rotationSnaps(),ue,de)-oe.rotation,pe=b(oe,ie);this._fitNodesInto(pe,A);return}const R=this.shiftBehavior();let H;R==="inverted"?H=this.keepRatio()&&!A.shiftKey:R==="none"?H=this.keepRatio():H=this.keepRatio()||A.shiftKey;let z=this.centeredScaling()||A.altKey;if(this._movingAnchorName==="top-left"){if(H){const oe=z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};G=Math.sqrt(Math.pow(oe.x-X.x(),2)+Math.pow(oe.y-X.y(),2));const Z=this.findOne(".top-left").x()>oe.x?-1:1,le=this.findOne(".top-left").y()>oe.y?-1:1;D=G*this.cos*Z,L=G*this.sin*le,this.findOne(".top-left").x(oe.x-D),this.findOne(".top-left").y(oe.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(X.y());else if(this._movingAnchorName==="top-right"){if(H){const oe=z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};G=Math.sqrt(Math.pow(X.x()-oe.x,2)+Math.pow(oe.y-X.y(),2));const Z=this.findOne(".top-right").x()<oe.x?-1:1,le=this.findOne(".top-right").y()>oe.y?-1:1;D=G*this.cos*Z,L=G*this.sin*le,this.findOne(".top-right").x(oe.x+D),this.findOne(".top-right").y(oe.y-L)}var I=X.position();this.findOne(".top-left").y(I.y),this.findOne(".bottom-right").x(I.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(X.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(X.x());else if(this._movingAnchorName==="bottom-left"){if(H){const oe=z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};G=Math.sqrt(Math.pow(oe.x-X.x(),2)+Math.pow(X.y()-oe.y,2));const Z=oe.x<X.x()?-1:1,le=X.y()<oe.y?-1:1;D=G*this.cos*Z,L=G*this.sin*le,X.x(oe.x-D),X.y(oe.y+L)}I=X.position(),this.findOne(".top-left").x(I.x),this.findOne(".bottom-right").y(I.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(X.y());else if(this._movingAnchorName==="bottom-right"){if(H){const oe=z?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};G=Math.sqrt(Math.pow(X.x()-oe.x,2)+Math.pow(X.y()-oe.y,2));const Z=this.findOne(".bottom-right").x()<oe.x?-1:1,le=this.findOne(".bottom-right").y()<oe.y?-1:1;D=G*this.cos*Z,L=G*this.sin*le,this.findOne(".bottom-right").x(oe.x+D),this.findOne(".bottom-right").y(oe.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(z=this.centeredScaling()||A.altKey,z){const oe=this.findOne(".top-left"),Z=this.findOne(".bottom-right"),le=oe.x(),ue=oe.y(),de=this.getWidth()-Z.x(),Te=this.getHeight()-Z.y();Z.move({x:-le,y:-ue}),oe.move({x:de,y:Te})}const W=this.findOne(".top-left").getAbsolutePosition();D=W.x,L=W.y;const K=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),ee=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:D,y:L,width:K,height:ee,rotation:i.Konva.getAngle(this.rotation())},A)}_handleMouseUp(A){this._removeEvents(A)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(A){var D;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const L=this.getNode();N--,this._fire("transformend",{evt:A,target:L}),(D=this.getLayer())===null||D===void 0||D.batchDraw(),L&&this._nodes.forEach(G=>{var X;G._fire("transformend",{evt:A,target:G}),(X=G.getLayer())===null||X===void 0||X.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(A,D){const L=this._getNodeRect(),G=1;if(e.Util._inRange(A.width,-this.padding()*2-G,G)){this.update();return}if(e.Util._inRange(A.height,-this.padding()*2-G,G)){this.update();return}const X=new e.Transform;if(X.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&A.width<0&&this._movingAnchorName.indexOf("left")>=0){const H=X.point({x:-this.padding()*2,y:0});A.x+=H.x,A.y+=H.y,A.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y}else if(this._movingAnchorName&&A.width<0&&this._movingAnchorName.indexOf("right")>=0){const H=X.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,A.width+=this.padding()*2}if(this._movingAnchorName&&A.height<0&&this._movingAnchorName.indexOf("top")>=0){const H=X.point({x:0,y:-this.padding()*2});A.x+=H.x,A.y+=H.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,A.height+=this.padding()*2}else if(this._movingAnchorName&&A.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const H=X.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=H.x,this._anchorDragOffset.y-=H.y,A.height+=this.padding()*2}if(this.boundBoxFunc()){const H=this.boundBoxFunc()(L,A);H?A=H:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const se=1e7,Q=new e.Transform;Q.translate(L.x,L.y),Q.rotate(L.rotation),Q.scale(L.width/se,L.height/se);const re=new e.Transform,B=A.width/se,V=A.height/se;this.flipEnabled()===!1?(re.translate(A.x,A.y),re.rotate(A.rotation),re.translate(A.width<0?A.width:0,A.height<0?A.height:0),re.scale(Math.abs(B),Math.abs(V))):(re.translate(A.x,A.y),re.rotate(A.rotation),re.scale(B,V));const R=re.multiply(Q.invert());this._nodes.forEach(H=>{var z;const I=H.getParent().getAbsoluteTransform(),W=H.getTransform().copy();W.translate(H.offsetX(),H.offsetY());const K=new e.Transform;K.multiply(I.copy().invert()).multiply(R).multiply(I).multiply(W);const ee=K.decompose();H.setAttrs(ee),(z=H.getLayer())===null||z===void 0||z.batchDraw()}),this.rotation(e.Util._getRotation(A.rotation)),this._nodes.forEach(H=>{this._fire("transform",{evt:D,target:H}),H._fire("transform",{evt:D,target:H})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(A,D){this.findOne(A).setAttrs(D)}update(){var A;const D=this._getNodeRect();this.rotation(e.Util._getRotation(D.rotation));const L=D.width,G=D.height,X=this.enabledAnchors(),se=this.resizeEnabled(),Q=this.padding(),re=this.anchorSize(),B=this.find("._anchor");B.forEach(R=>{R.setAttrs({width:re,height:re,offsetX:re/2,offsetY:re/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:re/2+Q,offsetY:re/2+Q,visible:se&&X.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:re/2+Q,visible:se&&X.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:re/2-Q,offsetY:re/2+Q,visible:se&&X.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:G/2,offsetX:re/2+Q,visible:se&&X.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:G/2,offsetX:re/2-Q,visible:se&&X.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:G,offsetX:re/2+Q,offsetY:re/2-Q,visible:se&&X.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:G,offsetY:re/2-Q,visible:se&&X.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:G,offsetX:re/2-Q,offsetY:re/2-Q,visible:se&&X.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*e.Util._sign(G)-Q,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:G,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const V=this.anchorStyleFunc();V&&B.forEach(R=>{V(R)}),(A=this.getLayer())===null||A===void 0||A.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const A=this.findOne("."+this._movingAnchorName);A&&A.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(A){return r.Node.prototype.clone.call(this,A)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}qx.Transformer=P,P.isTransforming=()=>N>0;function M(j){return j instanceof Array||e.Util.warn("enabledAnchors value should be an array"),j instanceof Array&&j.forEach(function(A){v.indexOf(A)===-1&&e.Util.warn("Unknown anchor name: "+A+". Available names are: "+v.join(", "))}),j||[]}return P.prototype.className="Transformer",(0,l._registerNode)(P),t.Factory.addGetterSetter(P,"enabledAnchors",v,M),t.Factory.addGetterSetter(P,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(P,"resizeEnabled",!0),t.Factory.addGetterSetter(P,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"rotateEnabled",!0),t.Factory.addGetterSetter(P,"rotateLineVisible",!0),t.Factory.addGetterSetter(P,"rotationSnaps",[]),t.Factory.addGetterSetter(P,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(P,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"borderEnabled",!0),t.Factory.addGetterSetter(P,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(P,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"anchorFill","white"),t.Factory.addGetterSetter(P,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(P,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"borderDash"),t.Factory.addGetterSetter(P,"keepRatio",!0),t.Factory.addGetterSetter(P,"shiftBehavior","default"),t.Factory.addGetterSetter(P,"centeredScaling",!1),t.Factory.addGetterSetter(P,"ignoreStroke",!1),t.Factory.addGetterSetter(P,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(P,"nodes"),t.Factory.addGetterSetter(P,"node"),t.Factory.addGetterSetter(P,"boundBoxFunc"),t.Factory.addGetterSetter(P,"anchorDragBoundFunc"),t.Factory.addGetterSetter(P,"anchorStyleFunc"),t.Factory.addGetterSetter(P,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(P,"useSingleNodeRotation",!0),t.Factory.backCompat(P,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),qx}var Kx={},zj;function vne(){if(zj)return Kx;zj=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.Wedge=void 0;const e=Nn(),t=Ci(),r=kn(),n=Mn(),s=kn();class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}return Kx.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1),e.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kx}var Yx={},Uj;function wne(){if(Uj)return Yx;Uj=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.Blur=void 0;const e=Nn(),t=Aa(),r=Mn();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(l,u){const d=l.data,f=l.width,h=l.height;let g,x,y,v,T,k,b,E,N,P,M,j,A,D,L,G,X,se,Q,re;const B=u+u+1,V=f-1,R=h-1,H=u+1,z=H*(H+1)/2,I=new n,W=s[u],K=a[u];let ee=null,oe=I,Z=null,le=null;for(let ue=1;ue<B;ue++)oe=oe.next=new n,ue===H&&(ee=oe);oe.next=I,y=x=0;for(let ue=0;ue<h;ue++){j=A=D=L=v=T=k=b=0,E=H*(G=d[x]),N=H*(X=d[x+1]),P=H*(se=d[x+2]),M=H*(Q=d[x+3]),v+=z*G,T+=z*X,k+=z*se,b+=z*Q,oe=I;for(let de=0;de<H;de++)oe.r=G,oe.g=X,oe.b=se,oe.a=Q,oe=oe.next;for(let de=1;de<H;de++)g=x+((V<de?V:de)<<2),v+=(oe.r=G=d[g])*(re=H-de),T+=(oe.g=X=d[g+1])*re,k+=(oe.b=se=d[g+2])*re,b+=(oe.a=Q=d[g+3])*re,j+=G,A+=X,D+=se,L+=Q,oe=oe.next;Z=I,le=ee;for(let de=0;de<f;de++)d[x+3]=Q=b*W>>K,Q!==0?(Q=255/Q,d[x]=(v*W>>K)*Q,d[x+1]=(T*W>>K)*Q,d[x+2]=(k*W>>K)*Q):d[x]=d[x+1]=d[x+2]=0,v-=E,T-=N,k-=P,b-=M,E-=Z.r,N-=Z.g,P-=Z.b,M-=Z.a,g=y+((g=de+u+1)<V?g:V)<<2,j+=Z.r=d[g],A+=Z.g=d[g+1],D+=Z.b=d[g+2],L+=Z.a=d[g+3],v+=j,T+=A,k+=D,b+=L,Z=Z.next,E+=G=le.r,N+=X=le.g,P+=se=le.b,M+=Q=le.a,j-=G,A-=X,D-=se,L-=Q,le=le.next,x+=4;y+=f}for(let ue=0;ue<f;ue++){A=D=L=j=T=k=b=v=0,x=ue<<2,E=H*(G=d[x]),N=H*(X=d[x+1]),P=H*(se=d[x+2]),M=H*(Q=d[x+3]),v+=z*G,T+=z*X,k+=z*se,b+=z*Q,oe=I;for(let Te=0;Te<H;Te++)oe.r=G,oe.g=X,oe.b=se,oe.a=Q,oe=oe.next;let de=f;for(let Te=1;Te<=u;Te++)x=de+ue<<2,v+=(oe.r=G=d[x])*(re=H-Te),T+=(oe.g=X=d[x+1])*re,k+=(oe.b=se=d[x+2])*re,b+=(oe.a=Q=d[x+3])*re,j+=G,A+=X,D+=se,L+=Q,oe=oe.next,Te<R&&(de+=f);x=ue,Z=I,le=ee;for(let Te=0;Te<h;Te++)g=x<<2,d[g+3]=Q=b*W>>K,Q>0?(Q=255/Q,d[g]=(v*W>>K)*Q,d[g+1]=(T*W>>K)*Q,d[g+2]=(k*W>>K)*Q):d[g]=d[g+1]=d[g+2]=0,v-=E,T-=N,k-=P,b-=M,E-=Z.r,N-=Z.g,P-=Z.b,M-=Z.a,g=ue+((g=Te+H)<R?g:R)*f<<2,v+=j+=Z.r=d[g],T+=A+=Z.g=d[g+1],k+=D+=Z.b=d[g+2],b+=L+=Z.a=d[g+3],Z=Z.next,E+=G=le.r,N+=X=le.g,P+=se=le.b,M+=Q=le.a,j-=G,A-=X,D-=se,L-=Q,le=le.next,x+=f}}const o=function(u){const d=Math.round(this.blurRadius());d>0&&i(u,d)};return Yx.Blur=o,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Yx}var Xx={},Wj;function bne(){if(Wj)return Xx;Wj=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.Brighten=void 0;const e=Nn(),t=Aa(),r=Mn(),n=function(s){const a=this.brightness()*255,i=s.data,o=i.length;for(let l=0;l<o;l+=4)i[l]+=a,i[l+1]+=a,i[l+2]+=a};return Xx.Brighten=n,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Xx}var Jx={},Hj;function _ne(){if(Hj)return Jx;Hj=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.Contrast=void 0;const e=Nn(),t=Aa(),r=Mn(),n=function(s){const a=Math.pow((this.contrast()+100)/100,2),i=s.data,o=i.length;let l=150,u=150,d=150;for(let f=0;f<o;f+=4)l=i[f],u=i[f+1],d=i[f+2],l/=255,l-=.5,l*=a,l+=.5,l*=255,u/=255,u-=.5,u*=a,u+=.5,u*=255,d/=255,d-=.5,d*=a,d+=.5,d*=255,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,i[f]=l,i[f+1]=u,i[f+2]=d};return Jx.Contrast=n,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Jx}var Qx={},Gj;function Sne(){if(Gj)return Qx;Gj=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.Emboss=void 0;const e=Nn(),t=Aa(),r=ga(),n=Mn(),s=function(a){const i=this.embossStrength()*10,o=this.embossWhiteLevel()*255,l=this.embossDirection(),u=this.embossBlend(),d=a.data,f=a.width,h=a.height,g=f*4;let x=0,y=0,v=h;switch(l){case"top-left":x=-1,y=-1;break;case"top":x=-1,y=0;break;case"top-right":x=-1,y=1;break;case"right":x=0,y=1;break;case"bottom-right":x=1,y=1;break;case"bottom":x=1,y=0;break;case"bottom-left":x=1,y=-1;break;case"left":x=0,y=-1;break;default:r.Util.error("Unknown emboss direction: "+l)}do{const T=(v-1)*g;let k=x;v+k<1&&(k=0),v+k>h&&(k=0);const b=(v-1+k)*f*4;let E=f;do{const N=T+(E-1)*4;let P=y;E+P<1&&(P=0),E+P>f&&(P=0);const M=b+(E-1+P)*4,j=d[N]-d[M],A=d[N+1]-d[M+1],D=d[N+2]-d[M+2];let L=j;const G=L>0?L:-L,X=A>0?A:-A,se=D>0?D:-D;if(X>G&&(L=A),se>G&&(L=D),L*=i,u){const Q=d[N]+L,re=d[N+1]+L,B=d[N+2]+L;d[N]=Q>255?255:Q<0?0:Q,d[N+1]=re>255?255:re<0?0:re,d[N+2]=B>255?255:B<0?0:B}else{let Q=o-L;Q<0?Q=0:Q>255&&(Q=255),d[N]=d[N+1]=d[N+2]=Q}}while(--E)}while(--v)};return Qx.Emboss=s,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),Qx}var Zx={},Vj;function kne(){if(Vj)return Zx;Vj=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.Enhance=void 0;const e=Nn(),t=Aa(),r=Mn();function n(a,i,o,l,u){const d=o-i,f=u-l;if(d===0)return l+f/2;if(f===0)return l;let h=(a-i)/d;return h=f*h+l,h}const s=function(a){const i=a.data,o=i.length;let l=i[0],u=l,d,f=i[1],h=f,g,x=i[2],y=x,v;const T=this.enhance();if(T===0)return;for(let j=0;j<o;j+=4)d=i[j+0],d<l?l=d:d>u&&(u=d),g=i[j+1],g<f?f=g:g>h&&(h=g),v=i[j+2],v<x?x=v:v>y&&(y=v);u===l&&(u=255,l=0),h===f&&(h=255,f=0),y===x&&(y=255,x=0);let k,b,E,N,P,M;if(T>0)k=u+T*(255-u),b=l-T*(l-0),E=h+T*(255-h),N=f-T*(f-0),P=y+T*(255-y),M=x-T*(x-0);else{const j=(u+l)*.5;k=u+T*(u-j),b=l+T*(l-j);const A=(h+f)*.5;E=h+T*(h-A),N=f+T*(f-A);const D=(y+x)*.5;P=y+T*(y-D),M=x+T*(x-D)}for(let j=0;j<o;j+=4)i[j+0]=n(i[j+0],l,u,b,k),i[j+1]=n(i[j+1],f,h,N,E),i[j+2]=n(i[j+2],x,y,M,P)};return Zx.Enhance=s,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),Zx}var ey={},qj;function Tne(){if(qj)return ey;qj=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.Grayscale=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=.34*r[s]+.5*r[s+1]+.16*r[s+2];r[s]=a,r[s+1]=a,r[s+2]=a}};return ey.Grayscale=e,ey}var ty={},Kj;function Cne(){if(Kj)return ty;Kj=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.HSL=void 0;const e=Nn(),t=Aa(),r=Mn();e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter);const n=function(s){const a=s.data,i=a.length,o=1,l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=o*l*Math.cos(u*Math.PI/180),h=o*l*Math.sin(u*Math.PI/180),g=.299*o+.701*f+.167*h,x=.587*o-.587*f+.33*h,y=.114*o-.114*f-.497*h,v=.299*o-.299*f-.328*h,T=.587*o+.413*f+.035*h,k=.114*o-.114*f+.293*h,b=.299*o-.3*f+1.25*h,E=.587*o-.586*f-1.05*h,N=.114*o+.886*f-.2*h;let P,M,j,A;for(let D=0;D<i;D+=4)P=a[D+0],M=a[D+1],j=a[D+2],A=a[D+3],a[D+0]=g*P+x*M+y*j+d,a[D+1]=v*P+T*M+k*j+d,a[D+2]=b*P+E*M+N*j+d,a[D+3]=A};return ty.HSL=n,ty}var ry={},Yj;function Ene(){if(Yj)return ry;Yj=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.HSV=void 0;const e=Nn(),t=Aa(),r=Mn(),n=function(s){const a=s.data,i=a.length,o=Math.pow(2,this.value()),l=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=o*l*Math.cos(u*Math.PI/180),f=o*l*Math.sin(u*Math.PI/180),h=.299*o+.701*d+.167*f,g=.587*o-.587*d+.33*f,x=.114*o-.114*d-.497*f,y=.299*o-.299*d-.328*f,v=.587*o+.413*d+.035*f,T=.114*o-.114*d+.293*f,k=.299*o-.3*d+1.25*f,b=.587*o-.586*d-1.05*f,E=.114*o+.886*d-.2*f;for(let N=0;N<i;N+=4){const P=a[N+0],M=a[N+1],j=a[N+2],A=a[N+3];a[N+0]=h*P+g*M+x*j,a[N+1]=y*P+v*M+T*j,a[N+2]=k*P+b*M+E*j,a[N+3]=A}};return ry.HSV=n,e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ry}var ny={},Xj;function Nne(){if(Xj)return ny;Xj=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.Invert=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2]};return ny.Invert=e,ny}var sy={},Jj;function Ane(){if(Jj)return sy;Jj=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.Kaleidoscope=void 0;const e=Nn(),t=Aa(),r=ga(),n=Mn(),s=function(o,l,u){const d=o.data,f=l.data,h=o.width,g=o.height,x=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(x*x+y*y),T=h-x,k=g-y;const b=Math.sqrt(T*T+k*k);v=b>v?b:v;const E=g,N=h,P=360/N*Math.PI/180;for(let M=0;M<N;M+=1){const j=Math.sin(M*P),A=Math.cos(M*P);for(let D=0;D<E;D+=1){T=Math.floor(x+v*D/E*A),k=Math.floor(y+v*D/E*j);let L=(k*h+T)*4;const G=d[L+0],X=d[L+1],se=d[L+2],Q=d[L+3];L=(M+D*h)*4,f[L+0]=G,f[L+1]=X,f[L+2]=se,f[L+3]=Q}}},a=function(o,l,u){const d=o.data,f=l.data,h=o.width,g=o.height,x=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(x*x+y*y),T=h-x,k=g-y;const b=Math.sqrt(T*T+k*k);v=b>v?b:v;const E=g,N=h,P=0;let M,j;for(T=0;T<h;T+=1)for(k=0;k<g;k+=1){const A=T-x,D=k-y,L=Math.sqrt(A*A+D*D)*E/v;let G=(Math.atan2(D,A)*180/Math.PI+360+P)%360;G=G*N/360,M=Math.floor(G),j=Math.floor(L);let X=(j*h+M)*4;const se=d[X+0],Q=d[X+1],re=d[X+2],B=d[X+3];X=(k*h+T)*4,f[X+0]=se,f[X+1]=Q,f[X+2]=re,f[X+3]=B}},i=function(o){const l=o.width,u=o.height;let d,f,h,g,x,y,v,T,k,b,E=Math.round(this.kaleidoscopePower());const N=Math.round(this.kaleidoscopeAngle()),P=Math.floor(l*(N%360)/360);if(E<1)return;const M=r.Util.createCanvasElement();M.width=l,M.height=u;const j=M.getContext("2d").getImageData(0,0,l,u);r.Util.releaseCanvas(M),s(o,j,{polarCenterX:l/2,polarCenterY:u/2});let A=l/Math.pow(2,E);for(;A<=8;)A=A*2,E-=1;A=Math.ceil(A);let D=A,L=0,G=D,X=1;for(P+A>l&&(L=D,G=0,X=-1),f=0;f<u;f+=1)for(d=L;d!==G;d+=X)h=Math.round(d+P)%l,k=(l*f+h)*4,x=j.data[k+0],y=j.data[k+1],v=j.data[k+2],T=j.data[k+3],b=(l*f+d)*4,j.data[b+0]=x,j.data[b+1]=y,j.data[b+2]=v,j.data[b+3]=T;for(f=0;f<u;f+=1)for(D=Math.floor(A),g=0;g<E;g+=1){for(d=0;d<D+1;d+=1)k=(l*f+d)*4,x=j.data[k+0],y=j.data[k+1],v=j.data[k+2],T=j.data[k+3],b=(l*f+D*2-d-1)*4,j.data[b+0]=x,j.data[b+1]=y,j.data[b+2]=v,j.data[b+3]=T;D*=2}a(j,o,{})};return sy.Kaleidoscope=i,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),sy}var ay={},Qj;function jne(){if(Qj)return ay;Qj=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.Mask=void 0;const e=Nn(),t=Aa(),r=Mn();function n(h,g,x){let y=(x*h.width+g)*4;const v=[];return v.push(h.data[y++],h.data[y++],h.data[y++],h.data[y++]),v}function s(h,g){return Math.sqrt(Math.pow(h[0]-g[0],2)+Math.pow(h[1]-g[1],2)+Math.pow(h[2]-g[2],2))}function a(h){const g=[0,0,0];for(let x=0;x<h.length;x++)g[0]+=h[x][0],g[1]+=h[x][1],g[2]+=h[x][2];return g[0]/=h.length,g[1]/=h.length,g[2]/=h.length,g}function i(h,g){const x=n(h,0,0),y=n(h,h.width-1,0),v=n(h,0,h.height-1),T=n(h,h.width-1,h.height-1),k=g||10;if(s(x,y)<k&&s(y,T)<k&&s(T,v)<k&&s(v,x)<k){const b=a([y,x,T,v]),E=[];for(let N=0;N<h.width*h.height;N++){const P=s(b,[h.data[N*4],h.data[N*4+1],h.data[N*4+2]]);E[N]=P<k?0:255}return E}}function o(h,g){for(let x=0;x<h.width*h.height;x++)h.data[4*x+3]=g[x]}function l(h,g,x){const y=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let E=0;E<g;E++){const N=b*g+E;let P=0;for(let M=0;M<v;M++)for(let j=0;j<v;j++){const A=b+M-T,D=E+j-T;if(A>=0&&A<x&&D>=0&&D<g){const L=A*g+D,G=y[M*v+j];P+=h[L]*G}}k[N]=P===2040?255:0}return k}function u(h,g,x){const y=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let E=0;E<g;E++){const N=b*g+E;let P=0;for(let M=0;M<v;M++)for(let j=0;j<v;j++){const A=b+M-T,D=E+j-T;if(A>=0&&A<x&&D>=0&&D<g){const L=A*g+D,G=y[M*v+j];P+=h[L]*G}}k[N]=P>=1020?255:0}return k}function d(h,g,x){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(y.length)),T=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let E=0;E<g;E++){const N=b*g+E;let P=0;for(let M=0;M<v;M++)for(let j=0;j<v;j++){const A=b+M-T,D=E+j-T;if(A>=0&&A<x&&D>=0&&D<g){const L=A*g+D,G=y[M*v+j];P+=h[L]*G}}k[N]=P}return k}const f=function(h){const g=this.threshold();let x=i(h,g);return x&&(x=l(x,h.width,h.height),x=u(x,h.width,h.height),x=d(x,h.width,h.height),o(h,x)),h};return ay.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ay}var iy={},Zj;function Pne(){if(Zj)return iy;Zj=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.Noise=void 0;const e=Nn(),t=Aa(),r=Mn(),n=function(s){const a=this.noise()*255,i=s.data,o=i.length,l=a/2;for(let u=0;u<o;u+=4)i[u+0]+=l-2*l*Math.random(),i[u+1]+=l-2*l*Math.random(),i[u+2]+=l-2*l*Math.random()};return iy.Noise=n,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),iy}var oy={},eP;function Mne(){if(eP)return oy;eP=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.Pixelate=void 0;const e=Nn(),t=ga(),r=Aa(),n=Mn(),s=function(a){let i=Math.ceil(this.pixelSize()),o=a.width,l=a.height,u=Math.ceil(o/i),d=Math.ceil(l/i),f=a.data;if(i<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let h=0;h<u;h+=1)for(let g=0;g<d;g+=1){let x=0,y=0,v=0,T=0;const k=h*i,b=k+i,E=g*i,N=E+i;let P=0;for(let M=k;M<b;M+=1)if(!(M>=o))for(let j=E;j<N;j+=1){if(j>=l)continue;const A=(o*j+M)*4;x+=f[A+0],y+=f[A+1],v+=f[A+2],T+=f[A+3],P+=1}x=x/P,y=y/P,v=v/P,T=T/P;for(let M=k;M<b;M+=1)if(!(M>=o))for(let j=E;j<N;j+=1){if(j>=l)continue;const A=(o*j+M)*4;f[A+0]=x,f[A+1]=y,f[A+2]=v,f[A+3]=T}}};return oy.Pixelate=s,e.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),oy}var ly={},tP;function Fne(){if(tP)return ly;tP=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.Posterize=void 0;const e=Nn(),t=Aa(),r=Mn(),n=function(s){const a=Math.round(this.levels()*254)+1,i=s.data,o=i.length,l=255/a;for(let u=0;u<o;u+=1)i[u]=Math.floor(i[u]/l)*l};return ly.Posterize=n,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ly}var cy={},rP;function Dne(){if(rP)return cy;rP=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.RGB=void 0;const e=Nn(),t=Aa(),r=Mn(),n=function(s){const a=s.data,i=a.length,o=this.red(),l=this.green(),u=this.blue();for(let d=0;d<i;d+=4){const f=(.34*a[d]+.5*a[d+1]+.16*a[d+2])/255;a[d]=f*o,a[d+1]=f*l,a[d+2]=f*u,a[d+3]=a[d+3]}};return cy.RGB=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),cy}var uy={},nP;function One(){if(nP)return uy;nP=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.RGBA=void 0;const e=Nn(),t=Aa(),r=Mn(),n=function(s){const a=s.data,i=a.length,o=this.red(),l=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<i;f+=4){const h=1-d;a[f]=o*d+a[f]*h,a[f+1]=l*d+a[f+1]*h,a[f+2]=u*d+a[f+2]*h}};return uy.RGBA=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),uy}var dy={},sP;function Ine(){if(sP)return dy;sP=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.Sepia=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=r[s+0],i=r[s+1],o=r[s+2];r[s+0]=Math.min(255,a*.393+i*.769+o*.189),r[s+1]=Math.min(255,a*.349+i*.686+o*.168),r[s+2]=Math.min(255,a*.272+i*.534+o*.131)}};return dy.Sepia=e,dy}var fy={},aP;function Rne(){if(aP)return fy;aP=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.Solarize=void 0;const e=function(t){const r=t.data,n=t.width,s=t.height,a=n*4;let i=s;do{const o=(i-1)*a;let l=n;do{const u=o+(l-1)*4;let d=r[u],f=r[u+1],h=r[u+2];d>127&&(d=255-d),f>127&&(f=255-f),h>127&&(h=255-h),r[u]=d,r[u+1]=f,r[u+2]=h}while(--l)}while(--i)};return fy.Solarize=e,fy}var hy={},iP;function Lne(){if(iP)return hy;iP=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.Threshold=void 0;const e=Nn(),t=Aa(),r=Mn(),n=function(s){const a=this.threshold()*255,i=s.data,o=i.length;for(let l=0;l<o;l+=1)i[l]=i[l]<a?0:255};return hy.Threshold=n,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),hy}var oP;function Bne(){if(oP)return Ex;oP=1,Object.defineProperty(Ex,"__esModule",{value:!0}),Ex.Konva=void 0;const e=Kk(),t=ine(),r=lne(),n=cne(),s=une(),a=dne(),i=fne(),o=H$(),l=N7(),u=G$(),d=hne(),f=mne(),h=gne(),g=pne(),x=V$(),y=xne(),v=yne(),T=vne(),k=wne(),b=bne(),E=_ne(),N=Sne(),P=kne(),M=Tne(),j=Cne(),A=Ene(),D=Nne(),L=Ane(),G=jne(),X=Pne(),se=Mne(),Q=Fne(),re=Dne(),B=One(),V=Ine(),R=Rne(),H=Lne();return Ex.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:r.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:a.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:l.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:h.Sprite,Star:g.Star,Text:x.Text,TextPath:y.TextPath,Transformer:v.Transformer,Wedge:T.Wedge,Filters:{Blur:k.Blur,Brighten:b.Brighten,Contrast:E.Contrast,Emboss:N.Emboss,Enhance:P.Enhance,Grayscale:M.Grayscale,HSL:j.HSL,HSV:A.HSV,Invert:D.Invert,Kaleidoscope:L.Kaleidoscope,Mask:G.Mask,Noise:X.Noise,Pixelate:se.Pixelate,Posterize:Q.Posterize,RGB:re.RGB,RGBA:B.RGBA,Sepia:V.Sepia,Solarize:R.Solarize,Threshold:H.Threshold}}),Ex}var $ne=Ub.exports,lP;function zne(){if(lP)return Ub.exports;lP=1,Object.defineProperty($ne,"__esModule",{value:!0});const e=Bne();return Ub.exports=e.Konva,Ub.exports}var q$=zne();const Une=Ec(q$),Wne=HL({__proto__:null,default:Une},[q$]);var Ww={exports:{}},cP;function Hne(){return cP||(cP=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var r=Kk();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return r.Konva}});const n=Kk();e.exports=n.Konva})(Ww,Ww.exports)),Ww.exports}var Gne=Hne();const mv=Ec(Gne);var XS={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JS,uP;function Vne(){return uP||(uP=1,JS=function(t){var r={},n=Wm(),s=$T(),a=Object.assign;function i(w){for(var S="https://reactjs.org/docs/error-decoder.html?invariant="+w,F=1;F<arguments.length;F++)S+="&args[]="+encodeURIComponent(arguments[F]);return"Minified React error #"+w+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),N=Symbol.iterator;function P(w){return w===null||typeof w!="object"?null:(w=N&&w[N]||w["@@iterator"],typeof w=="function"?w:null)}function M(w){if(w==null)return null;if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w;switch(w){case d:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case T:return"SuspenseList"}if(typeof w=="object")switch(w.$$typeof){case x:return(w.displayName||"Context")+".Consumer";case g:return(w._context.displayName||"Context")+".Provider";case y:var S=w.render;return w=w.displayName,w||(w=S.displayName||S.name||"",w=w!==""?"ForwardRef("+w+")":"ForwardRef"),w;case k:return S=w.displayName||null,S!==null?S:M(w.type)||"Memo";case b:S=w._payload,w=w._init;try{return M(w(S))}catch{}}return null}function j(w){var S=w.type;switch(w.tag){case 24:return"Cache";case 9:return(S.displayName||"Context")+".Consumer";case 10:return(S._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return w=S.render,w=w.displayName||w.name||"",S.displayName||(w!==""?"ForwardRef("+w+")":"ForwardRef");case 7:return"Fragment";case 5:return S;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(S);case 8:return S===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof S=="function")return S.displayName||S.name||null;if(typeof S=="string")return S}return null}function A(w){var S=w,F=w;if(w.alternate)for(;S.return;)S=S.return;else{w=S;do S=w,(S.flags&4098)!==0&&(F=S.return),w=S.return;while(w)}return S.tag===3?F:null}function D(w){if(A(w)!==w)throw Error(i(188))}function L(w){var S=w.alternate;if(!S){if(S=A(w),S===null)throw Error(i(188));return S!==w?null:w}for(var F=w,U=S;;){var Y=F.return;if(Y===null)break;var ae=Y.alternate;if(ae===null){if(U=Y.return,U!==null){F=U;continue}break}if(Y.child===ae.child){for(ae=Y.child;ae;){if(ae===F)return D(Y),w;if(ae===U)return D(Y),S;ae=ae.sibling}throw Error(i(188))}if(F.return!==U.return)F=Y,U=ae;else{for(var Se=!1,st=Y.child;st;){if(st===F){Se=!0,F=Y,U=ae;break}if(st===U){Se=!0,U=Y,F=ae;break}st=st.sibling}if(!Se){for(st=ae.child;st;){if(st===F){Se=!0,F=ae,U=Y;break}if(st===U){Se=!0,U=ae,F=Y;break}st=st.sibling}if(!Se)throw Error(i(189))}}if(F.alternate!==U)throw Error(i(190))}if(F.tag!==3)throw Error(i(188));return F.stateNode.current===F?w:S}function G(w){return w=L(w),w!==null?X(w):null}function X(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){var S=X(w);if(S!==null)return S;w=w.sibling}return null}function se(w){if(w.tag===5||w.tag===6)return w;for(w=w.child;w!==null;){if(w.tag!==4){var S=se(w);if(S!==null)return S}w=w.sibling}return null}var Q=Array.isArray,re=t.getPublicInstance,B=t.getRootHostContext,V=t.getChildHostContext,R=t.prepareForCommit,H=t.resetAfterCommit,z=t.createInstance,I=t.appendInitialChild,W=t.finalizeInitialChildren,K=t.prepareUpdate,ee=t.shouldSetTextContent,oe=t.createTextInstance,Z=t.scheduleTimeout,le=t.cancelTimeout,ue=t.noTimeout,de=t.isPrimaryRenderer,Te=t.supportsMutation,ie=t.supportsPersistence,pe=t.supportsHydration,Ae=t.getInstanceFromNode,Me=t.preparePortalMount,Je=t.getCurrentEventPriority,Ve=t.detachDeletedInstance,Dt=t.supportsMicrotasks,lt=t.scheduleMicrotask,At=t.supportsTestSelectors,vt=t.findFiberRoot,ct=t.getBoundingRect,bt=t.getTextContent,Ut=t.isHiddenSubtree,Bt=t.matchAccessibilityRole,Vt=t.setFocusIfFocusable,We=t.setupIntersectionObserver,Ue=t.appendChild,tt=t.appendChildToContainer,nt=t.commitTextUpdate,at=t.commitMount,It=t.commitUpdate,Lt=t.insertBefore,Xt=t.insertInContainerBefore,vr=t.removeChild,br=t.removeChildFromContainer,Dr=t.resetTextContent,Sr=t.hideInstance,pr=t.hideTextInstance,ye=t.unhideInstance,Fe=t.unhideTextInstance,Be=t.clearContainer,He=t.cloneInstance,Pt=t.createContainerChildSet,Ie=t.appendChildToContainerChildSet,Qe=t.finalizeContainerChildren,Ne=t.replaceContainerChildren,Ke=t.cloneHiddenInstance,qe=t.cloneHiddenTextInstance,Rt=t.canHydrateInstance,zt=t.canHydrateTextInstance,rr=t.canHydrateSuspenseInstance,Ir=t.isSuspenseInstancePending,wr=t.isSuspenseInstanceFallback,Wr=t.getSuspenseInstanceFallbackErrorDetails,he=t.registerSuspenseInstanceRetry,Ee=t.getNextHydratableSibling,we=t.getFirstHydratableChild,_e=t.getFirstHydratableChildWithinContainer,ke=t.getFirstHydratableChildWithinSuspenseInstance,Ce=t.hydrateInstance,rt=t.hydrateTextInstance,xt=t.hydrateSuspenseInstance,ut=t.getNextHydratableInstanceAfterSuspenseInstance,ce=t.commitHydratedContainer,ge=t.commitHydratedSuspenseInstance,Pe=t.clearSuspenseBoundary,je=t.clearSuspenseBoundaryFromContainer,Ze=t.shouldDeleteUnhydratedTailInstances,dt=t.didNotMatchHydratedContainerTextInstance,_t=t.didNotMatchHydratedTextInstance,ir;function Ot(w){if(ir===void 0)try{throw Error()}catch(F){var S=F.stack.trim().match(/\n( *(at )?)/);ir=S&&S[1]||""}return`
`+ir+w}var Qt=!1;function Cr(w,S){if(!w||Qt)return"";Qt=!0;var F=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(S)if(S=function(){throw Error()},Object.defineProperty(S.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(S,[])}catch(ar){var U=ar}Reflect.construct(w,[],S)}else{try{S.call()}catch(ar){U=ar}w.call(S.prototype)}else{try{throw Error()}catch(ar){U=ar}w()}}catch(ar){if(ar&&U&&typeof ar.stack=="string"){for(var Y=ar.stack.split(`
`),ae=U.stack.split(`
`),Se=Y.length-1,st=ae.length-1;1<=Se&&0<=st&&Y[Se]!==ae[st];)st--;for(;1<=Se&&0<=st;Se--,st--)if(Y[Se]!==ae[st]){if(Se!==1||st!==1)do if(Se--,st--,0>st||Y[Se]!==ae[st]){var Tt=`
`+Y[Se].replace(" at new "," at ");return w.displayName&&Tt.includes("<anonymous>")&&(Tt=Tt.replace("<anonymous>",w.displayName)),Tt}while(1<=Se&&0<=st);break}}}finally{Qt=!1,Error.prepareStackTrace=F}return(w=w?w.displayName||w.name:"")?Ot(w):""}var Br=Object.prototype.hasOwnProperty,Rr=[],tn=-1;function mn(w){return{current:w}}function dn(w){0>tn||(w.current=Rr[tn],Rr[tn]=null,tn--)}function Fr(w,S){tn++,Rr[tn]=w.current,w.current=S}var li={},gn=mn(li),Qs=mn(!1),_s=li;function Ha(w,S){var F=w.type.contextTypes;if(!F)return li;var U=w.stateNode;if(U&&U.__reactInternalMemoizedUnmaskedChildContext===S)return U.__reactInternalMemoizedMaskedChildContext;var Y={},ae;for(ae in F)Y[ae]=S[ae];return U&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=S,w.__reactInternalMemoizedMaskedChildContext=Y),Y}function Bn(w){return w=w.childContextTypes,w!=null}function be(){dn(Qs),dn(gn)}function Ct(w,S,F){if(gn.current!==li)throw Error(i(168));Fr(gn,S),Fr(Qs,F)}function jr(w,S,F){var U=w.stateNode;if(S=S.childContextTypes,typeof U.getChildContext!="function")return F;U=U.getChildContext();for(var Y in U)if(!(Y in S))throw Error(i(108,j(w)||"Unknown",Y));return a({},F,U)}function Ur(w){return w=(w=w.stateNode)&&w.__reactInternalMemoizedMergedChildContext||li,_s=gn.current,Fr(gn,w),Fr(Qs,Qs.current),!0}function Xn(w,S,F){var U=w.stateNode;if(!U)throw Error(i(169));F?(w=jr(w,S,_s),U.__reactInternalMemoizedMergedChildContext=w,dn(Qs),dn(gn),Fr(gn,w)):dn(Qs),Fr(Qs,F)}var Fn=Math.clz32?Math.clz32:ci,as=Math.log,$s=Math.LN2;function ci(w){return w>>>=0,w===0?32:31-(as(w)/$s|0)|0}var on=64,Re=4194304;function yt(w){switch(w&-w){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return w&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return w}}function tr(w,S){var F=w.pendingLanes;if(F===0)return 0;var U=0,Y=w.suspendedLanes,ae=w.pingedLanes,Se=F&268435455;if(Se!==0){var st=Se&~Y;st!==0?U=yt(st):(ae&=Se,ae!==0&&(U=yt(ae)))}else Se=F&~Y,Se!==0?U=yt(Se):ae!==0&&(U=yt(ae));if(U===0)return 0;if(S!==0&&S!==U&&(S&Y)===0&&(Y=U&-U,ae=S&-S,Y>=ae||Y===16&&(ae&4194240)!==0))return S;if((U&4)!==0&&(U|=F&16),S=w.entangledLanes,S!==0)for(w=w.entanglements,S&=U;0<S;)F=31-Fn(S),Y=1<<F,U|=w[F],S&=~Y;return U}function $e(w,S){switch(w){case 1:case 2:case 4:return S+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ft(w,S){for(var F=w.suspendedLanes,U=w.pingedLanes,Y=w.expirationTimes,ae=w.pendingLanes;0<ae;){var Se=31-Fn(ae),st=1<<Se,Tt=Y[Se];Tt===-1?((st&F)===0||(st&U)!==0)&&(Y[Se]=$e(st,S)):Tt<=S&&(w.expiredLanes|=st),ae&=~st}}function Wt(w){return w=w.pendingLanes&-1073741825,w!==0?w:w&1073741824?1073741824:0}function kt(){var w=on;return on<<=1,(on&4194240)===0&&(on=64),w}function Pr(w){for(var S=[],F=0;31>F;F++)S.push(w);return S}function Et(w,S,F){w.pendingLanes|=S,S!==536870912&&(w.suspendedLanes=0,w.pingedLanes=0),w=w.eventTimes,S=31-Fn(S),w[S]=F}function rn(w,S){var F=w.pendingLanes&~S;w.pendingLanes=S,w.suspendedLanes=0,w.pingedLanes=0,w.expiredLanes&=S,w.mutableReadLanes&=S,w.entangledLanes&=S,S=w.entanglements;var U=w.eventTimes;for(w=w.expirationTimes;0<F;){var Y=31-Fn(F),ae=1<<Y;S[Y]=0,U[Y]=-1,w[Y]=-1,F&=~ae}}function An(w,S){var F=w.entangledLanes|=S;for(w=w.entanglements;F;){var U=31-Fn(F),Y=1<<U;Y&S|w[U]&S&&(w[U]|=S),F&=~Y}}var ze=0;function ur(w){return w&=-w,1<w?4<w?(w&268435455)!==0?16:536870912:4:1}var sr=s.unstable_scheduleCallback,ds=s.unstable_cancelCallback,pn=s.unstable_shouldYield,nn=s.unstable_requestPaint,xn=s.unstable_now,_n=s.unstable_ImmediatePriority,Wl=s.unstable_UserBlockingPriority,Ai=s.unstable_NormalPriority,oh=s.unstable_IdlePriority,du=null,eo=null;function N0(w){if(eo&&typeof eo.onCommitFiberRoot=="function")try{eo.onCommitFiberRoot(du,w,void 0,(w.current.flags&128)===128)}catch{}}function ag(w,S){return w===S&&(w!==0||1/w===1/S)||w!==w&&S!==S}var pl=typeof Object.is=="function"?Object.is:ag,Mc=null,A0=!1,j0=!1;function ig(w){Mc===null?Mc=[w]:Mc.push(w)}function U2(w){A0=!0,ig(w)}function Ga(){if(!j0&&Mc!==null){j0=!0;var w=0,S=ze;try{var F=Mc;for(ze=1;w<F.length;w++){var U=F[w];do U=U(!0);while(U!==null)}Mc=null,A0=!1}catch(Y){throw Mc!==null&&(Mc=Mc.slice(w+1)),sr(_n,Ga),Y}finally{ze=S,j0=!1}}return null}var fu=[],Fc=0,lh=null,id=0,ji=[],_o=0,pa=null,to=1,xl="";function yl(w,S){fu[Fc++]=id,fu[Fc++]=lh,lh=w,id=S}function W2(w,S,F){ji[_o++]=to,ji[_o++]=xl,ji[_o++]=pa,pa=w;var U=to;w=xl;var Y=32-Fn(U)-1;U&=~(1<<Y),F+=1;var ae=32-Fn(S)+Y;if(30<ae){var Se=Y-Y%5;ae=(U&(1<<Se)-1).toString(32),U>>=Se,Y-=Se,to=1<<32-Fn(S)+Y|F<<Y|U,xl=ae+w}else to=1<<ae|F<<Y|U,xl=w}function ch(w){w.return!==null&&(yl(w,1),W2(w,1,0))}function uh(w){for(;w===lh;)lh=fu[--Fc],fu[Fc]=null,id=fu[--Fc],fu[Fc]=null;for(;w===pa;)pa=ji[--_o],ji[_o]=null,xl=ji[--_o],ji[_o]=null,to=ji[--_o],ji[_o]=null}var Va=null,Pi=null,fs=!1,dh=!1,vl=null;function H2(w,S){var F=Mo(5,null,null,0);F.elementType="DELETED",F.stateNode=S,F.return=w,S=w.deletions,S===null?(w.deletions=[F],w.flags|=16):S.push(F)}function og(w,S){switch(w.tag){case 5:return S=Rt(S,w.type,w.pendingProps),S!==null?(w.stateNode=S,Va=w,Pi=we(S),!0):!1;case 6:return S=zt(S,w.pendingProps),S!==null?(w.stateNode=S,Va=w,Pi=null,!0):!1;case 13:if(S=rr(S),S!==null){var F=pa!==null?{id:to,overflow:xl}:null;return w.memoizedState={dehydrated:S,treeContext:F,retryLane:1073741824},F=Mo(18,null,null,0),F.stateNode=S,F.return=w,w.child=F,Va=w,Pi=null,!0}return!1;default:return!1}}function O1(w){return(w.mode&1)!==0&&(w.flags&128)===0}function I1(w){if(fs){var S=Pi;if(S){var F=S;if(!og(w,S)){if(O1(w))throw Error(i(418));S=Ee(F);var U=Va;S&&og(w,S)?H2(U,F):(w.flags=w.flags&-4097|2,fs=!1,Va=w)}}else{if(O1(w))throw Error(i(418));w.flags=w.flags&-4097|2,fs=!1,Va=w}}}function G2(w){for(w=w.return;w!==null&&w.tag!==5&&w.tag!==3&&w.tag!==13;)w=w.return;Va=w}function lg(w){if(!pe||w!==Va)return!1;if(!fs)return G2(w),fs=!0,!1;if(w.tag!==3&&(w.tag!==5||Ze(w.type)&&!ee(w.type,w.memoizedProps))){var S=Pi;if(S){if(O1(w))throw V2(),Error(i(418));for(;S;)H2(w,S),S=Ee(S)}}if(G2(w),w.tag===13){if(!pe)throw Error(i(316));if(w=w.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(i(317));Pi=ut(w)}else Pi=Va?Ee(w.stateNode):null;return!0}function V2(){for(var w=Pi;w;)w=Ee(w)}function od(){pe&&(Pi=Va=null,dh=fs=!1)}function R1(w){vl===null?vl=[w]:vl.push(w)}var G3=o.ReactCurrentBatchConfig;function cg(w,S){if(pl(w,S))return!0;if(typeof w!="object"||w===null||typeof S!="object"||S===null)return!1;var F=Object.keys(w),U=Object.keys(S);if(F.length!==U.length)return!1;for(U=0;U<F.length;U++){var Y=F[U];if(!Br.call(S,Y)||!pl(w[Y],S[Y]))return!1}return!0}function V3(w){switch(w.tag){case 5:return Ot(w.type);case 16:return Ot("Lazy");case 13:return Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 2:case 15:return w=Cr(w.type,!1),w;case 11:return w=Cr(w.type.render,!1),w;case 1:return w=Cr(w.type,!0),w;default:return""}}function ld(w,S,F){if(w=F.ref,w!==null&&typeof w!="function"&&typeof w!="object"){if(F._owner){if(F=F._owner,F){if(F.tag!==1)throw Error(i(309));var U=F.stateNode}if(!U)throw Error(i(147,w));var Y=U,ae=""+w;return S!==null&&S.ref!==null&&typeof S.ref=="function"&&S.ref._stringRef===ae?S.ref:(S=function(Se){var st=Y.refs;Se===null?delete st[ae]:st[ae]=Se},S._stringRef=ae,S)}if(typeof w!="string")throw Error(i(284));if(!F._owner)throw Error(i(290,w))}return w}function ug(w,S){throw w=Object.prototype.toString.call(S),Error(i(31,w==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":w))}function q2(w){var S=w._init;return S(w._payload)}function K2(w){function S(wt,it){if(w){var Nt=wt.deletions;Nt===null?(wt.deletions=[it],wt.flags|=16):Nt.push(it)}}function F(wt,it){if(!w)return null;for(;it!==null;)S(wt,it),it=it.sibling;return null}function U(wt,it){for(wt=new Map;it!==null;)it.key!==null?wt.set(it.key,it):wt.set(it.index,it),it=it.sibling;return wt}function Y(wt,it){return wt=ju(wt,it),wt.index=0,wt.sibling=null,wt}function ae(wt,it,Nt){return wt.index=Nt,w?(Nt=wt.alternate,Nt!==null?(Nt=Nt.index,Nt<it?(wt.flags|=2,it):Nt):(wt.flags|=2,it)):(wt.flags|=1048576,it)}function Se(wt){return w&&wt.alternate===null&&(wt.flags|=2),wt}function st(wt,it,Nt,xr){return it===null||it.tag!==6?(it=tf(Nt,wt.mode,xr),it.return=wt,it):(it=Y(it,Nt),it.return=wt,it)}function Tt(wt,it,Nt,xr){var $r=Nt.type;return $r===d?Er(wt,it,Nt.props.children,xr,Nt.key):it!==null&&(it.elementType===$r||typeof $r=="object"&&$r!==null&&$r.$$typeof===b&&q2($r)===it.type)?(xr=Y(it,Nt.props),xr.ref=ld(wt,it,Nt),xr.return=wt,xr):(xr=Ug(Nt.type,Nt.key,Nt.props,null,wt.mode,xr),xr.ref=ld(wt,it,Nt),xr.return=wt,xr)}function ar(wt,it,Nt,xr){return it===null||it.tag!==4||it.stateNode.containerInfo!==Nt.containerInfo||it.stateNode.implementation!==Nt.implementation?(it=Wg(Nt,wt.mode,xr),it.return=wt,it):(it=Y(it,Nt.children||[]),it.return=wt,it)}function Er(wt,it,Nt,xr,$r){return it===null||it.tag!==7?(it=Ya(Nt,wt.mode,xr,$r),it.return=wt,it):(it=Y(it,Nt),it.return=wt,it)}function ln(wt,it,Nt){if(typeof it=="string"&&it!==""||typeof it=="number")return it=tf(""+it,wt.mode,Nt),it.return=wt,it;if(typeof it=="object"&&it!==null){switch(it.$$typeof){case l:return Nt=Ug(it.type,it.key,it.props,null,wt.mode,Nt),Nt.ref=ld(wt,null,it),Nt.return=wt,Nt;case u:return it=Wg(it,wt.mode,Nt),it.return=wt,it;case b:var xr=it._init;return ln(wt,xr(it._payload),Nt)}if(Q(it)||P(it))return it=Ya(it,wt.mode,Nt,null),it.return=wt,it;ug(wt,it)}return null}function gr(wt,it,Nt,xr){var $r=it!==null?it.key:null;if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return $r!==null?null:st(wt,it,""+Nt,xr);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case l:return Nt.key===$r?Tt(wt,it,Nt,xr):null;case u:return Nt.key===$r?ar(wt,it,Nt,xr):null;case b:return $r=Nt._init,gr(wt,it,$r(Nt._payload),xr)}if(Q(Nt)||P(Nt))return $r!==null?null:Er(wt,it,Nt,xr,null);ug(wt,Nt)}return null}function cs(wt,it,Nt,xr,$r){if(typeof xr=="string"&&xr!==""||typeof xr=="number")return wt=wt.get(Nt)||null,st(it,wt,""+xr,$r);if(typeof xr=="object"&&xr!==null){switch(xr.$$typeof){case l:return wt=wt.get(xr.key===null?Nt:xr.key)||null,Tt(it,wt,xr,$r);case u:return wt=wt.get(xr.key===null?Nt:xr.key)||null,ar(it,wt,xr,$r);case b:var yn=xr._init;return cs(wt,it,Nt,yn(xr._payload),$r)}if(Q(xr)||P(xr))return wt=wt.get(Nt)||null,Er(it,wt,xr,$r,null);ug(it,xr)}return null}function Vn(wt,it,Nt,xr){for(var $r=null,yn=null,cn=it,jn=it=0,ba=null;cn!==null&&jn<Nt.length;jn++){cn.index>jn?(ba=cn,cn=null):ba=cn.sibling;var En=gr(wt,cn,Nt[jn],xr);if(En===null){cn===null&&(cn=ba);break}w&&cn&&En.alternate===null&&S(wt,cn),it=ae(En,it,jn),yn===null?$r=En:yn.sibling=En,yn=En,cn=ba}if(jn===Nt.length)return F(wt,cn),fs&&yl(wt,jn),$r;if(cn===null){for(;jn<Nt.length;jn++)cn=ln(wt,Nt[jn],xr),cn!==null&&(it=ae(cn,it,jn),yn===null?$r=cn:yn.sibling=cn,yn=cn);return fs&&yl(wt,jn),$r}for(cn=U(wt,cn);jn<Nt.length;jn++)ba=cs(cn,wt,jn,Nt[jn],xr),ba!==null&&(w&&ba.alternate!==null&&cn.delete(ba.key===null?jn:ba.key),it=ae(ba,it,jn),yn===null?$r=ba:yn.sibling=ba,yn=ba);return w&&cn.forEach(function(gi){return S(wt,gi)}),fs&&yl(wt,jn),$r}function Ri(wt,it,Nt,xr){var $r=P(Nt);if(typeof $r!="function")throw Error(i(150));if(Nt=$r.call(Nt),Nt==null)throw Error(i(151));for(var yn=$r=null,cn=it,jn=it=0,ba=null,En=Nt.next();cn!==null&&!En.done;jn++,En=Nt.next()){cn.index>jn?(ba=cn,cn=null):ba=cn.sibling;var gi=gr(wt,cn,En.value,xr);if(gi===null){cn===null&&(cn=ba);break}w&&cn&&gi.alternate===null&&S(wt,cn),it=ae(gi,it,jn),yn===null?$r=gi:yn.sibling=gi,yn=gi,cn=ba}if(En.done)return F(wt,cn),fs&&yl(wt,jn),$r;if(cn===null){for(;!En.done;jn++,En=Nt.next())En=ln(wt,En.value,xr),En!==null&&(it=ae(En,it,jn),yn===null?$r=En:yn.sibling=En,yn=En);return fs&&yl(wt,jn),$r}for(cn=U(wt,cn);!En.done;jn++,En=Nt.next())En=cs(cn,wt,jn,En.value,xr),En!==null&&(w&&En.alternate!==null&&cn.delete(En.key===null?jn:En.key),it=ae(En,it,jn),yn===null?$r=En:yn.sibling=En,yn=En);return w&&cn.forEach(function(J3){return S(wt,J3)}),fs&&yl(wt,jn),$r}function Ql(wt,it,Nt,xr){if(typeof Nt=="object"&&Nt!==null&&Nt.type===d&&Nt.key===null&&(Nt=Nt.props.children),typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case l:e:{for(var $r=Nt.key,yn=it;yn!==null;){if(yn.key===$r){if($r=Nt.type,$r===d){if(yn.tag===7){F(wt,yn.sibling),it=Y(yn,Nt.props.children),it.return=wt,wt=it;break e}}else if(yn.elementType===$r||typeof $r=="object"&&$r!==null&&$r.$$typeof===b&&q2($r)===yn.type){F(wt,yn.sibling),it=Y(yn,Nt.props),it.ref=ld(wt,yn,Nt),it.return=wt,wt=it;break e}F(wt,yn);break}else S(wt,yn);yn=yn.sibling}Nt.type===d?(it=Ya(Nt.props.children,wt.mode,xr,Nt.key),it.return=wt,wt=it):(xr=Ug(Nt.type,Nt.key,Nt.props,null,wt.mode,xr),xr.ref=ld(wt,it,Nt),xr.return=wt,wt=xr)}return Se(wt);case u:e:{for(yn=Nt.key;it!==null;){if(it.key===yn)if(it.tag===4&&it.stateNode.containerInfo===Nt.containerInfo&&it.stateNode.implementation===Nt.implementation){F(wt,it.sibling),it=Y(it,Nt.children||[]),it.return=wt,wt=it;break e}else{F(wt,it);break}else S(wt,it);it=it.sibling}it=Wg(Nt,wt.mode,xr),it.return=wt,wt=it}return Se(wt);case b:return yn=Nt._init,Ql(wt,it,yn(Nt._payload),xr)}if(Q(Nt))return Vn(wt,it,Nt,xr);if(P(Nt))return Ri(wt,it,Nt,xr);ug(wt,Nt)}return typeof Nt=="string"&&Nt!==""||typeof Nt=="number"?(Nt=""+Nt,it!==null&&it.tag===6?(F(wt,it.sibling),it=Y(it,Nt),it.return=wt,wt=it):(F(wt,it),it=tf(Nt,wt.mode,xr),it.return=wt,wt=it),Se(wt)):F(wt,it)}return Ql}var cd=K2(!0),Y2=K2(!1),dg=mn(null),fg=null,P0=null,L1=null;function B1(){L1=P0=fg=null}function X2(w,S,F){de?(Fr(dg,S._currentValue),S._currentValue=F):(Fr(dg,S._currentValue2),S._currentValue2=F)}function fh(w){var S=dg.current;dn(dg),de?w._currentValue=S:w._currentValue2=S}function ud(w,S,F){for(;w!==null;){var U=w.alternate;if((w.childLanes&S)!==S?(w.childLanes|=S,U!==null&&(U.childLanes|=S)):U!==null&&(U.childLanes&S)!==S&&(U.childLanes|=S),w===F)break;w=w.return}}function M0(w,S){fg=w,L1=P0=null,w=w.dependencies,w!==null&&w.firstContext!==null&&((w.lanes&S)!==0&&(ya=!0),w.firstContext=null)}function So(w){var S=de?w._currentValue:w._currentValue2;if(L1!==w)if(w={context:w,memoizedValue:S,next:null},P0===null){if(fg===null)throw Error(i(308));P0=w,fg.dependencies={lanes:0,firstContext:w}}else P0=P0.next=w;return S}var hu=null;function hg(w){hu===null?hu=[w]:hu.push(w)}function $1(w,S,F,U){var Y=S.interleaved;return Y===null?(F.next=F,hg(S)):(F.next=Y.next,Y.next=F),S.interleaved=F,wl(w,U)}function wl(w,S){w.lanes|=S;var F=w.alternate;for(F!==null&&(F.lanes|=S),F=w,w=w.return;w!==null;)w.childLanes|=S,F=w.alternate,F!==null&&(F.childLanes|=S),F=w,w=w.return;return F.tag===3?F.stateNode:null}var ko=!1;function z1(w){w.updateQueue={baseState:w.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J2(w,S){w=w.updateQueue,S.updateQueue===w&&(S.updateQueue={baseState:w.baseState,firstBaseUpdate:w.firstBaseUpdate,lastBaseUpdate:w.lastBaseUpdate,shared:w.shared,effects:w.effects})}function Dc(w,S){return{eventTime:w,lane:S,tag:0,payload:null,callback:null,next:null}}function Oc(w,S,F){var U=w.updateQueue;if(U===null)return null;if(U=U.shared,(fn&2)!==0){var Y=U.pending;return Y===null?S.next=S:(S.next=Y.next,Y.next=S),U.pending=S,wl(w,F)}return Y=U.interleaved,Y===null?(S.next=S,hg(U)):(S.next=Y.next,Y.next=S),U.interleaved=S,wl(w,F)}function hh(w,S,F){if(S=S.updateQueue,S!==null&&(S=S.shared,(F&4194240)!==0)){var U=S.lanes;U&=w.pendingLanes,F|=U,S.lanes=F,An(w,F)}}function F0(w,S){var F=w.updateQueue,U=w.alternate;if(U!==null&&(U=U.updateQueue,F===U)){var Y=null,ae=null;if(F=F.firstBaseUpdate,F!==null){do{var Se={eventTime:F.eventTime,lane:F.lane,tag:F.tag,payload:F.payload,callback:F.callback,next:null};ae===null?Y=ae=Se:ae=ae.next=Se,F=F.next}while(F!==null);ae===null?Y=ae=S:ae=ae.next=S}else Y=ae=S;F={baseState:U.baseState,firstBaseUpdate:Y,lastBaseUpdate:ae,shared:U.shared,effects:U.effects},w.updateQueue=F;return}w=F.lastBaseUpdate,w===null?F.firstBaseUpdate=S:w.next=S,F.lastBaseUpdate=S}function mu(w,S,F,U){var Y=w.updateQueue;ko=!1;var ae=Y.firstBaseUpdate,Se=Y.lastBaseUpdate,st=Y.shared.pending;if(st!==null){Y.shared.pending=null;var Tt=st,ar=Tt.next;Tt.next=null,Se===null?ae=ar:Se.next=ar,Se=Tt;var Er=w.alternate;Er!==null&&(Er=Er.updateQueue,st=Er.lastBaseUpdate,st!==Se&&(st===null?Er.firstBaseUpdate=ar:st.next=ar,Er.lastBaseUpdate=Tt))}if(ae!==null){var ln=Y.baseState;Se=0,Er=ar=Tt=null,st=ae;do{var gr=st.lane,cs=st.eventTime;if((U&gr)===gr){Er!==null&&(Er=Er.next={eventTime:cs,lane:0,tag:st.tag,payload:st.payload,callback:st.callback,next:null});e:{var Vn=w,Ri=st;switch(gr=S,cs=F,Ri.tag){case 1:if(Vn=Ri.payload,typeof Vn=="function"){ln=Vn.call(cs,ln,gr);break e}ln=Vn;break e;case 3:Vn.flags=Vn.flags&-65537|128;case 0:if(Vn=Ri.payload,gr=typeof Vn=="function"?Vn.call(cs,ln,gr):Vn,gr==null)break e;ln=a({},ln,gr);break e;case 2:ko=!0}}st.callback!==null&&st.lane!==0&&(w.flags|=64,gr=Y.effects,gr===null?Y.effects=[st]:gr.push(st))}else cs={eventTime:cs,lane:gr,tag:st.tag,payload:st.payload,callback:st.callback,next:null},Er===null?(ar=Er=cs,Tt=ln):Er=Er.next=cs,Se|=gr;if(st=st.next,st===null){if(st=Y.shared.pending,st===null)break;gr=st,st=gr.next,gr.next=null,Y.lastBaseUpdate=gr,Y.shared.pending=null}}while(!0);if(Er===null&&(Tt=ln),Y.baseState=Tt,Y.firstBaseUpdate=ar,Y.lastBaseUpdate=Er,S=Y.shared.interleaved,S!==null){Y=S;do Se|=Y.lane,Y=Y.next;while(Y!==S)}else ae===null&&(Y.shared.lanes=0);$c|=Se,w.lanes=Se,w.memoizedState=ln}}function Q2(w,S,F){if(w=S.effects,S.effects=null,w!==null)for(S=0;S<w.length;S++){var U=w[S],Y=U.callback;if(Y!==null){if(U.callback=null,U=F,typeof Y!="function")throw Error(i(191,Y));Y.call(U)}}}var gu={},qo=mn(gu),D0=mn(gu),pu=mn(gu);function Ko(w){if(w===gu)throw Error(i(174));return w}function mg(w,S){Fr(pu,S),Fr(D0,w),Fr(qo,gu),w=B(S),dn(qo),Fr(qo,w)}function dd(){dn(qo),dn(D0),dn(pu)}function U1(w){var S=Ko(pu.current),F=Ko(qo.current);S=V(F,w.type,S),F!==S&&(Fr(D0,w),Fr(qo,S))}function W1(w){D0.current===w&&(dn(qo),dn(D0))}var Ss=mn(0);function gg(w){for(var S=w;S!==null;){if(S.tag===13){var F=S.memoizedState;if(F!==null&&(F=F.dehydrated,F===null||Ir(F)||wr(F)))return S}else if(S.tag===19&&S.memoizedProps.revealOrder!==void 0){if((S.flags&128)!==0)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var H1=[];function G1(){for(var w=0;w<H1.length;w++){var S=H1[w];de?S._workInProgressVersionPrimary=null:S._workInProgressVersionSecondary=null}H1.length=0}var ro=o.ReactCurrentDispatcher,fd=o.ReactCurrentBatchConfig,xu=0,xs=null,Zs=null,xa=null,O0=!1,mh=!1,gh=0,I0=0;function Pa(){throw Error(i(321))}function hd(w,S){if(S===null)return!1;for(var F=0;F<S.length&&F<w.length;F++)if(!pl(w[F],S[F]))return!1;return!0}function ph(w,S,F,U,Y,ae){if(xu=ae,xs=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,ro.current=w===null||w.memoizedState===null?tx:rx,w=F(U,Y),mh){ae=0;do{if(mh=!1,gh=0,25<=ae)throw Error(i(301));ae+=1,xa=Zs=null,S.updateQueue=null,ro.current=nx,w=F(U,Y)}while(mh)}if(ro.current=yd,S=Zs!==null&&Zs.next!==null,xu=0,xa=Zs=xs=null,O0=!1,S)throw Error(i(300));return w}function pg(){var w=gh!==0;return gh=0,w}function To(){var w={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xa===null?xs.memoizedState=xa=w:xa=xa.next=w,xa}function qa(){if(Zs===null){var w=xs.alternate;w=w!==null?w.memoizedState:null}else w=Zs.next;var S=xa===null?xs.memoizedState:xa.next;if(S!==null)xa=S,Zs=w;else{if(w===null)throw Error(i(310));Zs=w,w={memoizedState:Zs.memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},xa===null?xs.memoizedState=xa=w:xa=xa.next=w}return xa}function md(w,S){return typeof S=="function"?S(w):S}function xg(w){var S=qa(),F=S.queue;if(F===null)throw Error(i(311));F.lastRenderedReducer=w;var U=Zs,Y=U.baseQueue,ae=F.pending;if(ae!==null){if(Y!==null){var Se=Y.next;Y.next=ae.next,ae.next=Se}U.baseQueue=Y=ae,F.pending=null}if(Y!==null){ae=Y.next,U=U.baseState;var st=Se=null,Tt=null,ar=ae;do{var Er=ar.lane;if((xu&Er)===Er)Tt!==null&&(Tt=Tt.next={lane:0,action:ar.action,hasEagerState:ar.hasEagerState,eagerState:ar.eagerState,next:null}),U=ar.hasEagerState?ar.eagerState:w(U,ar.action);else{var ln={lane:Er,action:ar.action,hasEagerState:ar.hasEagerState,eagerState:ar.eagerState,next:null};Tt===null?(st=Tt=ln,Se=U):Tt=Tt.next=ln,xs.lanes|=Er,$c|=Er}ar=ar.next}while(ar!==null&&ar!==ae);Tt===null?Se=U:Tt.next=st,pl(U,S.memoizedState)||(ya=!0),S.memoizedState=U,S.baseState=Se,S.baseQueue=Tt,F.lastRenderedState=U}if(w=F.interleaved,w!==null){Y=w;do ae=Y.lane,xs.lanes|=ae,$c|=ae,Y=Y.next;while(Y!==w)}else Y===null&&(F.lanes=0);return[S.memoizedState,F.dispatch]}function R0(w){var S=qa(),F=S.queue;if(F===null)throw Error(i(311));F.lastRenderedReducer=w;var U=F.dispatch,Y=F.pending,ae=S.memoizedState;if(Y!==null){F.pending=null;var Se=Y=Y.next;do ae=w(ae,Se.action),Se=Se.next;while(Se!==Y);pl(ae,S.memoizedState)||(ya=!0),S.memoizedState=ae,S.baseQueue===null&&(S.baseState=ae),F.lastRenderedState=ae}return[ae,U]}function V1(){}function q1(w,S){var F=xs,U=qa(),Y=S(),ae=!pl(U.memoizedState,Y);if(ae&&(U.memoizedState=Y,ya=!0),U=U.queue,wg(X1.bind(null,F,U,w),[w]),U.getSnapshot!==S||ae||xa!==null&&xa.memoizedState.tag&1){if(F.flags|=2048,gd(9,Y1.bind(null,F,U,Y,S),void 0,null),Qn===null)throw Error(i(349));(xu&30)!==0||K1(F,S,Y)}return Y}function K1(w,S,F){w.flags|=16384,w={getSnapshot:S,value:F},S=xs.updateQueue,S===null?(S={lastEffect:null,stores:null},xs.updateQueue=S,S.stores=[w]):(F=S.stores,F===null?S.stores=[w]:F.push(w))}function Y1(w,S,F,U){S.value=F,S.getSnapshot=U,J1(S)&&Ic(w)}function X1(w,S,F){return F(function(){J1(S)&&Ic(w)})}function J1(w){var S=w.getSnapshot;w=w.value;try{var F=S();return!pl(w,F)}catch{return!0}}function Ic(w){var S=wl(w,1);S!==null&&hi(S,w,1,-1)}function yg(w){var S=To();return typeof w=="function"&&(w=w()),S.memoizedState=S.baseState=w,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:md,lastRenderedState:w},S.queue=w,w=w.dispatch=q3.bind(null,xs,w),[S.memoizedState,w]}function gd(w,S,F,U){return w={tag:w,create:S,destroy:F,deps:U,next:null},S=xs.updateQueue,S===null?(S={lastEffect:null,stores:null},xs.updateQueue=S,S.lastEffect=w.next=w):(F=S.lastEffect,F===null?S.lastEffect=w.next=w:(U=F.next,F.next=w,w.next=U,S.lastEffect=w)),w}function Z2(){return qa().memoizedState}function vg(w,S,F,U){var Y=To();xs.flags|=w,Y.memoizedState=gd(1|S,F,void 0,U===void 0?null:U)}function yu(w,S,F,U){var Y=qa();U=U===void 0?null:U;var ae=void 0;if(Zs!==null){var Se=Zs.memoizedState;if(ae=Se.destroy,U!==null&&hd(U,Se.deps)){Y.memoizedState=gd(S,F,ae,U);return}}xs.flags|=w,Y.memoizedState=gd(1|S,F,ae,U)}function ew(w,S){return vg(8390656,8,w,S)}function wg(w,S){return yu(2048,8,w,S)}function Q1(w,S){return yu(4,2,w,S)}function is(w,S){return yu(4,4,w,S)}function bg(w,S){if(typeof S=="function")return w=w(),S(w),function(){S(null)};if(S!=null)return w=w(),S.current=w,function(){S.current=null}}function xh(w,S,F){return F=F!=null?F.concat([w]):null,yu(4,4,bg.bind(null,S,w),F)}function pd(){}function Z1(w,S){var F=qa();S=S===void 0?null:S;var U=F.memoizedState;return U!==null&&S!==null&&hd(S,U[1])?U[0]:(F.memoizedState=[w,S],w)}function _g(w,S){var F=qa();S=S===void 0?null:S;var U=F.memoizedState;return U!==null&&S!==null&&hd(S,U[1])?U[0]:(w=w(),F.memoizedState=[w,S],w)}function L0(w,S,F){return(xu&21)===0?(w.baseState&&(w.baseState=!1,ya=!0),w.memoizedState=F):(pl(F,S)||(F=kt(),xs.lanes|=F,$c|=F,w.baseState=!0),S)}function Sg(w,S){var F=ze;ze=F!==0&&4>F?F:4,w(!0);var U=fd.transition;fd.transition={};try{w(!1),S()}finally{ze=F,fd.transition=U}}function xd(){return qa().memoizedState}function tw(w,S,F){var U=wa(w);if(F={lane:U,action:F,hasEagerState:!1,eagerState:null,next:null},rw(w))ex(S,F);else if(F=$1(w,S,F,U),F!==null){var Y=hs();hi(F,w,U,Y),yh(F,S,U)}}function q3(w,S,F){var U=wa(w),Y={lane:U,action:F,hasEagerState:!1,eagerState:null,next:null};if(rw(w))ex(S,Y);else{var ae=w.alternate;if(w.lanes===0&&(ae===null||ae.lanes===0)&&(ae=S.lastRenderedReducer,ae!==null))try{var Se=S.lastRenderedState,st=ae(Se,F);if(Y.hasEagerState=!0,Y.eagerState=st,pl(st,Se)){var Tt=S.interleaved;Tt===null?(Y.next=Y,hg(S)):(Y.next=Tt.next,Tt.next=Y),S.interleaved=Y;return}}catch{}finally{}F=$1(w,S,Y,U),F!==null&&(Y=hs(),hi(F,w,U,Y),yh(F,S,U))}}function rw(w){var S=w.alternate;return w===xs||S!==null&&S===xs}function ex(w,S){mh=O0=!0;var F=w.pending;F===null?S.next=S:(S.next=F.next,F.next=S),w.pending=S}function yh(w,S,F){if((F&4194240)!==0){var U=S.lanes;U&=w.pendingLanes,F|=U,S.lanes=F,An(w,F)}}var yd={readContext:So,useCallback:Pa,useContext:Pa,useEffect:Pa,useImperativeHandle:Pa,useInsertionEffect:Pa,useLayoutEffect:Pa,useMemo:Pa,useReducer:Pa,useRef:Pa,useState:Pa,useDebugValue:Pa,useDeferredValue:Pa,useTransition:Pa,useMutableSource:Pa,useSyncExternalStore:Pa,useId:Pa,unstable_isNewReconciler:!1},tx={readContext:So,useCallback:function(w,S){return To().memoizedState=[w,S===void 0?null:S],w},useContext:So,useEffect:ew,useImperativeHandle:function(w,S,F){return F=F!=null?F.concat([w]):null,vg(4194308,4,bg.bind(null,S,w),F)},useLayoutEffect:function(w,S){return vg(4194308,4,w,S)},useInsertionEffect:function(w,S){return vg(4,2,w,S)},useMemo:function(w,S){var F=To();return S=S===void 0?null:S,w=w(),F.memoizedState=[w,S],w},useReducer:function(w,S,F){var U=To();return S=F!==void 0?F(S):S,U.memoizedState=U.baseState=S,w={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w,lastRenderedState:S},U.queue=w,w=w.dispatch=tw.bind(null,xs,w),[U.memoizedState,w]},useRef:function(w){var S=To();return w={current:w},S.memoizedState=w},useState:yg,useDebugValue:pd,useDeferredValue:function(w){return To().memoizedState=w},useTransition:function(){var w=yg(!1),S=w[0];return w=Sg.bind(null,w[1]),To().memoizedState=w,[S,w]},useMutableSource:function(){},useSyncExternalStore:function(w,S,F){var U=xs,Y=To();if(fs){if(F===void 0)throw Error(i(407));F=F()}else{if(F=S(),Qn===null)throw Error(i(349));(xu&30)!==0||K1(U,S,F)}Y.memoizedState=F;var ae={value:F,getSnapshot:S};return Y.queue=ae,ew(X1.bind(null,U,ae,w),[w]),U.flags|=2048,gd(9,Y1.bind(null,U,ae,F,S),void 0,null),F},useId:function(){var w=To(),S=Qn.identifierPrefix;if(fs){var F=xl,U=to;F=(U&~(1<<32-Fn(U)-1)).toString(32)+F,S=":"+S+"R"+F,F=gh++,0<F&&(S+="H"+F.toString(32)),S+=":"}else F=I0++,S=":"+S+"r"+F.toString(32)+":";return w.memoizedState=S},unstable_isNewReconciler:!1},rx={readContext:So,useCallback:Z1,useContext:So,useEffect:wg,useImperativeHandle:xh,useInsertionEffect:Q1,useLayoutEffect:is,useMemo:_g,useReducer:xg,useRef:Z2,useState:function(){return xg(md)},useDebugValue:pd,useDeferredValue:function(w){var S=qa();return L0(S,Zs.memoizedState,w)},useTransition:function(){var w=xg(md)[0],S=qa().memoizedState;return[w,S]},useMutableSource:V1,useSyncExternalStore:q1,useId:xd,unstable_isNewReconciler:!1},nx={readContext:So,useCallback:Z1,useContext:So,useEffect:wg,useImperativeHandle:xh,useInsertionEffect:Q1,useLayoutEffect:is,useMemo:_g,useReducer:R0,useRef:Z2,useState:function(){return R0(md)},useDebugValue:pd,useDeferredValue:function(w){var S=qa();return Zs===null?S.memoizedState=w:L0(S,Zs.memoizedState,w)},useTransition:function(){var w=R0(md)[0],S=qa().memoizedState;return[w,S]},useMutableSource:V1,useSyncExternalStore:q1,useId:xd,unstable_isNewReconciler:!1};function Co(w,S){if(w&&w.defaultProps){S=a({},S),w=w.defaultProps;for(var F in w)S[F]===void 0&&(S[F]=w[F]);return S}return S}function sx(w,S,F,U){S=w.memoizedState,F=F(U,S),F=F==null?S:a({},S,F),w.memoizedState=F,w.lanes===0&&(w.updateQueue.baseState=F)}var vh={isMounted:function(w){return(w=w._reactInternals)?A(w)===w:!1},enqueueSetState:function(w,S,F){w=w._reactInternals;var U=hs(),Y=wa(w),ae=Dc(U,Y);ae.payload=S,F!=null&&(ae.callback=F),S=Oc(w,ae,Y),S!==null&&(hi(S,w,Y,U),hh(S,w,Y))},enqueueReplaceState:function(w,S,F){w=w._reactInternals;var U=hs(),Y=wa(w),ae=Dc(U,Y);ae.tag=1,ae.payload=S,F!=null&&(ae.callback=F),S=Oc(w,ae,Y),S!==null&&(hi(S,w,Y,U),hh(S,w,Y))},enqueueForceUpdate:function(w,S){w=w._reactInternals;var F=hs(),U=wa(w),Y=Dc(F,U);Y.tag=2,S!=null&&(Y.callback=S),S=Oc(w,Y,U),S!==null&&(hi(S,w,U,F),hh(S,w,U))}};function nw(w,S,F,U,Y,ae,Se){return w=w.stateNode,typeof w.shouldComponentUpdate=="function"?w.shouldComponentUpdate(U,ae,Se):S.prototype&&S.prototype.isPureReactComponent?!cg(F,U)||!cg(Y,ae):!0}function sw(w,S,F){var U=!1,Y=li,ae=S.contextType;return typeof ae=="object"&&ae!==null?ae=So(ae):(Y=Bn(S)?_s:gn.current,U=S.contextTypes,ae=(U=U!=null)?Ha(w,Y):li),S=new S(F,ae),w.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=vh,w.stateNode=S,S._reactInternals=w,U&&(w=w.stateNode,w.__reactInternalMemoizedUnmaskedChildContext=Y,w.__reactInternalMemoizedMaskedChildContext=ae),S}function kg(w,S,F,U){w=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(F,U),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(F,U),S.state!==w&&vh.enqueueReplaceState(S,S.state,null)}function Hl(w,S,F,U){var Y=w.stateNode;Y.props=F,Y.state=w.memoizedState,Y.refs={},z1(w);var ae=S.contextType;typeof ae=="object"&&ae!==null?Y.context=So(ae):(ae=Bn(S)?_s:gn.current,Y.context=Ha(w,ae)),Y.state=w.memoizedState,ae=S.getDerivedStateFromProps,typeof ae=="function"&&(sx(w,S,ae,F),Y.state=w.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(S=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),S!==Y.state&&vh.enqueueReplaceState(Y,Y.state,null),mu(w,F,Y,U),Y.state=w.memoizedState),typeof Y.componentDidMount=="function"&&(w.flags|=4194308)}function vd(w,S){try{var F="",U=S;do F+=V3(U),U=U.return;while(U);var Y=F}catch(ae){Y=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:w,source:S,stack:Y,digest:null}}function vu(w,S,F){return{value:w,source:null,stack:F??null,digest:S??null}}function Yo(w,S){try{console.error(S.value)}catch(F){setTimeout(function(){throw F})}}var wh=typeof WeakMap=="function"?WeakMap:Map;function Gl(w,S,F){F=Dc(-1,F),F.tag=3,F.payload={element:null};var U=S.value;return F.callback=function(){Ds||(Ds=!0,ea=U),Yo(w,S)},F}function Tg(w,S,F){F=Dc(-1,F),F.tag=3;var U=w.type.getDerivedStateFromError;if(typeof U=="function"){var Y=S.value;F.payload=function(){return U(Y)},F.callback=function(){Yo(w,S)}}var ae=w.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&(F.callback=function(){Yo(w,S),typeof U!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var Se=S.stack;this.componentDidCatch(S.value,{componentStack:Se!==null?Se:""})}),F}function aw(w,S,F){var U=w.pingCache;if(U===null){U=w.pingCache=new wh;var Y=new Set;U.set(S,Y)}else Y=U.get(S),Y===void 0&&(Y=new Set,U.set(S,Y));Y.has(F)||(Y.add(F),w=hw.bind(null,w,S,F),S.then(w,w))}function iw(w){do{var S;if((S=w.tag===13)&&(S=w.memoizedState,S=S!==null?S.dehydrated!==null:!0),S)return w;w=w.return}while(w!==null);return null}function wu(w,S,F,U,Y){return(w.mode&1)===0?(w===S?w.flags|=65536:(w.flags|=128,F.flags|=131072,F.flags&=-52805,F.tag===1&&(F.alternate===null?F.tag=17:(S=Dc(-1,1),S.tag=2,Oc(F,S,1))),F.lanes|=1),w):(w.flags|=65536,w.lanes=Y,w)}var bh=o.ReactCurrentOwner,ya=!1;function Ma(w,S,F,U){S.child=w===null?Y2(S,null,F,U):cd(S,w.child,F,U)}function Cg(w,S,F,U,Y){F=F.render;var ae=S.ref;return M0(S,Y),U=ph(w,S,F,U,ae,Y),F=pg(),w!==null&&!ya?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~Y,Lc(w,S,Y)):(fs&&F&&ch(S),S.flags|=1,Ma(w,S,U,Y),S.child)}function wd(w,S,F,U,Y){if(w===null){var ae=F.type;return typeof ae=="function"&&!Z0(ae)&&ae.defaultProps===void 0&&F.compare===null&&F.defaultProps===void 0?(S.tag=15,S.type=ae,Rc(w,S,ae,U,Y)):(w=Ug(F.type,null,U,S,S.mode,Y),w.ref=S.ref,w.return=S,S.child=w)}if(ae=w.child,(w.lanes&Y)===0){var Se=ae.memoizedProps;if(F=F.compare,F=F!==null?F:cg,F(Se,U)&&w.ref===S.ref)return Lc(w,S,Y)}return S.flags|=1,w=ju(ae,U),w.ref=S.ref,w.return=S,S.child=w}function Rc(w,S,F,U,Y){if(w!==null){var ae=w.memoizedProps;if(cg(ae,U)&&w.ref===S.ref)if(ya=!1,S.pendingProps=U=ae,(w.lanes&Y)!==0)(w.flags&131072)!==0&&(ya=!0);else return S.lanes=w.lanes,Lc(w,S,Y)}return Vl(w,S,F,U,Y)}function os(w,S,F){var U=S.pendingProps,Y=U.children,ae=w!==null?w.memoizedState:null;if(U.mode==="hidden")if((S.mode&1)===0)S.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fr(Cu,va),va|=F;else{if((F&1073741824)===0)return w=ae!==null?ae.baseLanes|F:F,S.lanes=S.childLanes=1073741824,S.memoizedState={baseLanes:w,cachePool:null,transitions:null},S.updateQueue=null,Fr(Cu,va),va|=w,null;S.memoizedState={baseLanes:0,cachePool:null,transitions:null},U=ae!==null?ae.baseLanes:F,Fr(Cu,va),va|=U}else ae!==null?(U=ae.baseLanes|F,S.memoizedState=null):U=F,Fr(Cu,va),va|=U;return Ma(w,S,Y,F),S.child}function Jn(w,S){var F=S.ref;(w===null&&F!==null||w!==null&&w.ref!==F)&&(S.flags|=512,S.flags|=2097152)}function Vl(w,S,F,U,Y){var ae=Bn(F)?_s:gn.current;return ae=Ha(S,ae),M0(S,Y),F=ph(w,S,F,U,ae,Y),U=pg(),w!==null&&!ya?(S.updateQueue=w.updateQueue,S.flags&=-2053,w.lanes&=~Y,Lc(w,S,Y)):(fs&&U&&ch(S),S.flags|=1,Ma(w,S,F,Y),S.child)}function Ka(w,S,F,U,Y){if(Bn(F)){var ae=!0;Ur(S)}else ae=!1;if(M0(S,Y),S.stateNode===null)_h(w,S),sw(S,F,U),Hl(S,F,U,Y),U=!0;else if(w===null){var Se=S.stateNode,st=S.memoizedProps;Se.props=st;var Tt=Se.context,ar=F.contextType;typeof ar=="object"&&ar!==null?ar=So(ar):(ar=Bn(F)?_s:gn.current,ar=Ha(S,ar));var Er=F.getDerivedStateFromProps,ln=typeof Er=="function"||typeof Se.getSnapshotBeforeUpdate=="function";ln||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(st!==U||Tt!==ar)&&kg(S,Se,U,ar),ko=!1;var gr=S.memoizedState;Se.state=gr,mu(S,U,Se,Y),Tt=S.memoizedState,st!==U||gr!==Tt||Qs.current||ko?(typeof Er=="function"&&(sx(S,F,Er,U),Tt=S.memoizedState),(st=ko||nw(S,F,st,U,gr,Tt,ar))?(ln||typeof Se.UNSAFE_componentWillMount!="function"&&typeof Se.componentWillMount!="function"||(typeof Se.componentWillMount=="function"&&Se.componentWillMount(),typeof Se.UNSAFE_componentWillMount=="function"&&Se.UNSAFE_componentWillMount()),typeof Se.componentDidMount=="function"&&(S.flags|=4194308)):(typeof Se.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=U,S.memoizedState=Tt),Se.props=U,Se.state=Tt,Se.context=ar,U=st):(typeof Se.componentDidMount=="function"&&(S.flags|=4194308),U=!1)}else{Se=S.stateNode,J2(w,S),st=S.memoizedProps,ar=S.type===S.elementType?st:Co(S.type,st),Se.props=ar,ln=S.pendingProps,gr=Se.context,Tt=F.contextType,typeof Tt=="object"&&Tt!==null?Tt=So(Tt):(Tt=Bn(F)?_s:gn.current,Tt=Ha(S,Tt));var cs=F.getDerivedStateFromProps;(Er=typeof cs=="function"||typeof Se.getSnapshotBeforeUpdate=="function")||typeof Se.UNSAFE_componentWillReceiveProps!="function"&&typeof Se.componentWillReceiveProps!="function"||(st!==ln||gr!==Tt)&&kg(S,Se,U,Tt),ko=!1,gr=S.memoizedState,Se.state=gr,mu(S,U,Se,Y);var Vn=S.memoizedState;st!==ln||gr!==Vn||Qs.current||ko?(typeof cs=="function"&&(sx(S,F,cs,U),Vn=S.memoizedState),(ar=ko||nw(S,F,ar,U,gr,Vn,Tt)||!1)?(Er||typeof Se.UNSAFE_componentWillUpdate!="function"&&typeof Se.componentWillUpdate!="function"||(typeof Se.componentWillUpdate=="function"&&Se.componentWillUpdate(U,Vn,Tt),typeof Se.UNSAFE_componentWillUpdate=="function"&&Se.UNSAFE_componentWillUpdate(U,Vn,Tt)),typeof Se.componentDidUpdate=="function"&&(S.flags|=4),typeof Se.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof Se.componentDidUpdate!="function"||st===w.memoizedProps&&gr===w.memoizedState||(S.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||st===w.memoizedProps&&gr===w.memoizedState||(S.flags|=1024),S.memoizedProps=U,S.memoizedState=Vn),Se.props=U,Se.state=Vn,Se.context=Tt,U=ar):(typeof Se.componentDidUpdate!="function"||st===w.memoizedProps&&gr===w.memoizedState||(S.flags|=4),typeof Se.getSnapshotBeforeUpdate!="function"||st===w.memoizedProps&&gr===w.memoizedState||(S.flags|=1024),U=!1)}return ui(w,S,F,U,ae,Y)}function ui(w,S,F,U,Y,ae){Jn(w,S);var Se=(S.flags&128)!==0;if(!U&&!Se)return Y&&Xn(S,F,!1),Lc(w,S,ae);U=S.stateNode,bh.current=S;var st=Se&&typeof F.getDerivedStateFromError!="function"?null:U.render();return S.flags|=1,w!==null&&Se?(S.child=cd(S,w.child,null,ae),S.child=cd(S,null,st,ae)):Ma(w,S,st,ae),S.memoizedState=U.state,Y&&Xn(S,F,!0),S.child}function bu(w){var S=w.stateNode;S.pendingContext?Ct(w,S.pendingContext,S.pendingContext!==S.context):S.context&&Ct(w,S.context,!1),mg(w,S.containerInfo)}function bd(w,S,F,U,Y){return od(),R1(Y),S.flags|=256,Ma(w,S,F,U),S.child}var di={dehydrated:null,treeContext:null,retryLane:0};function B0(w){return{baseLanes:w,cachePool:null,transitions:null}}function ax(w,S,F){var U=S.pendingProps,Y=Ss.current,ae=!1,Se=(S.flags&128)!==0,st;if((st=Se)||(st=w!==null&&w.memoizedState===null?!1:(Y&2)!==0),st?(ae=!0,S.flags&=-129):(w===null||w.memoizedState!==null)&&(Y|=1),Fr(Ss,Y&1),w===null)return I1(S),w=S.memoizedState,w!==null&&(w=w.dehydrated,w!==null)?((S.mode&1)===0?S.lanes=1:wr(w)?S.lanes=8:S.lanes=1073741824,null):(Se=U.children,w=U.fallback,ae?(U=S.mode,ae=S.child,Se={mode:"hidden",children:Se},(U&1)===0&&ae!==null?(ae.childLanes=0,ae.pendingProps=Se):ae=ef(Se,U,0,null),w=Ya(w,U,F,null),ae.return=S,w.return=S,ae.sibling=w,S.child=ae,S.child.memoizedState=B0(F),S.memoizedState=di,w):Eg(S,Se));if(Y=w.memoizedState,Y!==null&&(st=Y.dehydrated,st!==null))return ow(w,S,Se,U,st,Y,F);if(ae){ae=U.fallback,Se=S.mode,Y=w.child,st=Y.sibling;var Tt={mode:"hidden",children:U.children};return(Se&1)===0&&S.child!==Y?(U=S.child,U.childLanes=0,U.pendingProps=Tt,S.deletions=null):(U=ju(Y,Tt),U.subtreeFlags=Y.subtreeFlags&14680064),st!==null?ae=ju(st,ae):(ae=Ya(ae,Se,F,null),ae.flags|=2),ae.return=S,U.return=S,U.sibling=ae,S.child=U,U=ae,ae=S.child,Se=w.child.memoizedState,Se=Se===null?B0(F):{baseLanes:Se.baseLanes|F,cachePool:null,transitions:Se.transitions},ae.memoizedState=Se,ae.childLanes=w.childLanes&~F,S.memoizedState=di,U}return ae=w.child,w=ae.sibling,U=ju(ae,{mode:"visible",children:U.children}),(S.mode&1)===0&&(U.lanes=F),U.return=S,U.sibling=null,w!==null&&(F=S.deletions,F===null?(S.deletions=[w],S.flags|=16):F.push(w)),S.child=U,S.memoizedState=null,U}function Eg(w,S){return S=ef({mode:"visible",children:S},w.mode,0,null),S.return=w,w.child=S}function _d(w,S,F,U){return U!==null&&R1(U),cd(S,w.child,null,F),w=Eg(S,S.pendingProps.children),w.flags|=2,S.memoizedState=null,w}function ow(w,S,F,U,Y,ae,Se){if(F)return S.flags&256?(S.flags&=-257,U=vu(Error(i(422))),_d(w,S,Se,U)):S.memoizedState!==null?(S.child=w.child,S.flags|=128,null):(ae=U.fallback,Y=S.mode,U=ef({mode:"visible",children:U.children},Y,0,null),ae=Ya(ae,Y,Se,null),ae.flags|=2,U.return=S,ae.return=S,U.sibling=ae,S.child=U,(S.mode&1)!==0&&cd(S,w.child,null,Se),S.child.memoizedState=B0(Se),S.memoizedState=di,ae);if((S.mode&1)===0)return _d(w,S,Se,null);if(wr(Y))return U=Wr(Y).digest,ae=Error(i(419)),U=vu(ae,U,void 0),_d(w,S,Se,U);if(F=(Se&w.childLanes)!==0,ya||F){if(U=Qn,U!==null){switch(Se&-Se){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}Y=(Y&(U.suspendedLanes|Se))!==0?0:Y,Y!==0&&Y!==ae.retryLane&&(ae.retryLane=Y,wl(w,Y),hi(U,w,Y,-1))}return Q0(),U=vu(Error(i(421))),_d(w,S,Se,U)}return Ir(Y)?(S.flags|=128,S.child=w.child,S=gw.bind(null,w),he(Y,S),null):(w=ae.treeContext,pe&&(Pi=ke(Y),Va=S,fs=!0,vl=null,dh=!1,w!==null&&(ji[_o++]=to,ji[_o++]=xl,ji[_o++]=pa,to=w.id,xl=w.overflow,pa=S)),S=Eg(S,U.children),S.flags|=4096,S)}function ql(w,S,F){w.lanes|=S;var U=w.alternate;U!==null&&(U.lanes|=S),ud(w.return,S,F)}function $0(w,S,F,U,Y){var ae=w.memoizedState;ae===null?w.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:U,tail:F,tailMode:Y}:(ae.isBackwards=S,ae.rendering=null,ae.renderingStartTime=0,ae.last=U,ae.tail=F,ae.tailMode=Y)}function Ng(w,S,F){var U=S.pendingProps,Y=U.revealOrder,ae=U.tail;if(Ma(w,S,U.children,F),U=Ss.current,(U&2)!==0)U=U&1|2,S.flags|=128;else{if(w!==null&&(w.flags&128)!==0)e:for(w=S.child;w!==null;){if(w.tag===13)w.memoizedState!==null&&ql(w,F,S);else if(w.tag===19)ql(w,F,S);else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===S)break e;for(;w.sibling===null;){if(w.return===null||w.return===S)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}U&=1}if(Fr(Ss,U),(S.mode&1)===0)S.memoizedState=null;else switch(Y){case"forwards":for(F=S.child,Y=null;F!==null;)w=F.alternate,w!==null&&gg(w)===null&&(Y=F),F=F.sibling;F=Y,F===null?(Y=S.child,S.child=null):(Y=F.sibling,F.sibling=null),$0(S,!1,Y,F,ae);break;case"backwards":for(F=null,Y=S.child,S.child=null;Y!==null;){if(w=Y.alternate,w!==null&&gg(w)===null){S.child=Y;break}w=Y.sibling,Y.sibling=F,F=Y,Y=w}$0(S,!0,F,null,ae);break;case"together":$0(S,!1,null,null,void 0);break;default:S.memoizedState=null}return S.child}function _h(w,S){(S.mode&1)===0&&w!==null&&(w.alternate=null,S.alternate=null,S.flags|=2)}function Lc(w,S,F){if(w!==null&&(S.dependencies=w.dependencies),$c|=S.lanes,(F&S.childLanes)===0)return null;if(w!==null&&S.child!==w.child)throw Error(i(153));if(S.child!==null){for(w=S.child,F=ju(w,w.pendingProps),S.child=F,F.return=S;w.sibling!==null;)w=w.sibling,F=F.sibling=ju(w,w.pendingProps),F.return=S;F.sibling=null}return S.child}function _u(w,S,F){switch(S.tag){case 3:bu(S),od();break;case 5:U1(S);break;case 1:Bn(S.type)&&Ur(S);break;case 4:mg(S,S.stateNode.containerInfo);break;case 10:X2(S,S.type._context,S.memoizedProps.value);break;case 13:var U=S.memoizedState;if(U!==null)return U.dehydrated!==null?(Fr(Ss,Ss.current&1),S.flags|=128,null):(F&S.child.childLanes)!==0?ax(w,S,F):(Fr(Ss,Ss.current&1),w=Lc(w,S,F),w!==null?w.sibling:null);Fr(Ss,Ss.current&1);break;case 19:if(U=(F&S.childLanes)!==0,(w.flags&128)!==0){if(U)return Ng(w,S,F);S.flags|=128}var Y=S.memoizedState;if(Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),Fr(Ss,Ss.current),U)break;return null;case 22:case 23:return S.lanes=0,os(w,S,F)}return Lc(w,S,F)}function Mi(w){w.flags|=4}function Sd(w,S){if(w!==null&&w.child===S.child)return!0;if((S.flags&16)!==0)return!1;for(w=S.child;w!==null;){if((w.flags&12854)!==0||(w.subtreeFlags&12854)!==0)return!1;w=w.sibling}return!0}var Su,ku,Fi,Di;if(Te)Su=function(w,S){for(var F=S.child;F!==null;){if(F.tag===5||F.tag===6)I(w,F.stateNode);else if(F.tag!==4&&F.child!==null){F.child.return=F,F=F.child;continue}if(F===S)break;for(;F.sibling===null;){if(F.return===null||F.return===S)return;F=F.return}F.sibling.return=F.return,F=F.sibling}},ku=function(){},Fi=function(w,S,F,U,Y){if(w=w.memoizedProps,w!==U){var ae=S.stateNode,Se=Ko(qo.current);F=K(ae,F,w,U,Y,Se),(S.updateQueue=F)&&Mi(S)}},Di=function(w,S,F,U){F!==U&&Mi(S)};else if(ie){Su=function(w,S,F,U){for(var Y=S.child;Y!==null;){if(Y.tag===5){var ae=Y.stateNode;F&&U&&(ae=Ke(ae,Y.type,Y.memoizedProps,Y)),I(w,ae)}else if(Y.tag===6)ae=Y.stateNode,F&&U&&(ae=qe(ae,Y.memoizedProps,Y)),I(w,ae);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)ae=Y.child,ae!==null&&(ae.return=Y),Su(w,Y,!0,!0);else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===S)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===S)return;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}};var Tu=function(w,S,F,U){for(var Y=S.child;Y!==null;){if(Y.tag===5){var ae=Y.stateNode;F&&U&&(ae=Ke(ae,Y.type,Y.memoizedProps,Y)),Ie(w,ae)}else if(Y.tag===6)ae=Y.stateNode,F&&U&&(ae=qe(ae,Y.memoizedProps,Y)),Ie(w,ae);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)ae=Y.child,ae!==null&&(ae.return=Y),Tu(w,Y,!0,!0);else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===S)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===S)return;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}};ku=function(w,S){var F=S.stateNode;if(!Sd(w,S)){w=F.containerInfo;var U=Pt(w);Tu(U,S,!1,!1),F.pendingChildren=U,Mi(S),Qe(w,U)}},Fi=function(w,S,F,U,Y){var ae=w.stateNode,Se=w.memoizedProps;if((w=Sd(w,S))&&Se===U)S.stateNode=ae;else{var st=S.stateNode,Tt=Ko(qo.current),ar=null;Se!==U&&(ar=K(st,F,Se,U,Y,Tt)),w&&ar===null?S.stateNode=ae:(ae=He(ae,ar,F,Se,U,S,w,st),W(ae,F,U,Y,Tt)&&Mi(S),S.stateNode=ae,w?Mi(S):Su(ae,S,!1,!1))}},Di=function(w,S,F,U){F!==U?(w=Ko(pu.current),F=Ko(qo.current),S.stateNode=oe(U,w,F,S),Mi(S)):S.stateNode=w.stateNode}}else ku=function(){},Fi=function(){},Di=function(){};function Eo(w,S){if(!fs)switch(w.tailMode){case"hidden":S=w.tail;for(var F=null;S!==null;)S.alternate!==null&&(F=S),S=S.sibling;F===null?w.tail=null:F.sibling=null;break;case"collapsed":F=w.tail;for(var U=null;F!==null;)F.alternate!==null&&(U=F),F=F.sibling;U===null?S||w.tail===null?w.tail=null:w.tail.sibling=null:U.sibling=null}}function ys(w){var S=w.alternate!==null&&w.alternate.child===w.child,F=0,U=0;if(S)for(var Y=w.child;Y!==null;)F|=Y.lanes|Y.childLanes,U|=Y.subtreeFlags&14680064,U|=Y.flags&14680064,Y.return=w,Y=Y.sibling;else for(Y=w.child;Y!==null;)F|=Y.lanes|Y.childLanes,U|=Y.subtreeFlags,U|=Y.flags,Y.return=w,Y=Y.sibling;return w.subtreeFlags|=U,w.childLanes=F,S}function kd(w,S,F){var U=S.pendingProps;switch(uh(S),S.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(S),null;case 1:return Bn(S.type)&&be(),ys(S),null;case 3:return F=S.stateNode,dd(),dn(Qs),dn(gn),G1(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(w===null||w.child===null)&&(lg(S)?Mi(S):w===null||w.memoizedState.isDehydrated&&(S.flags&256)===0||(S.flags|=1024,vl!==null&&($g(vl),vl=null))),ku(w,S),ys(S),null;case 5:W1(S),F=Ko(pu.current);var Y=S.type;if(w!==null&&S.stateNode!=null)Fi(w,S,Y,U,F),w.ref!==S.ref&&(S.flags|=512,S.flags|=2097152);else{if(!U){if(S.stateNode===null)throw Error(i(166));return ys(S),null}if(w=Ko(qo.current),lg(S)){if(!pe)throw Error(i(175));w=Ce(S.stateNode,S.type,S.memoizedProps,F,w,S,!dh),S.updateQueue=w,w!==null&&Mi(S)}else{var ae=z(Y,U,F,w,S);Su(ae,S,!1,!1),S.stateNode=ae,W(ae,Y,U,F,w)&&Mi(S)}S.ref!==null&&(S.flags|=512,S.flags|=2097152)}return ys(S),null;case 6:if(w&&S.stateNode!=null)Di(w,S,w.memoizedProps,U);else{if(typeof U!="string"&&S.stateNode===null)throw Error(i(166));if(w=Ko(pu.current),F=Ko(qo.current),lg(S)){if(!pe)throw Error(i(176));if(w=S.stateNode,F=S.memoizedProps,(U=rt(w,F,S,!dh))&&(Y=Va,Y!==null))switch(Y.tag){case 3:dt(Y.stateNode.containerInfo,w,F,(Y.mode&1)!==0);break;case 5:_t(Y.type,Y.memoizedProps,Y.stateNode,w,F,(Y.mode&1)!==0)}U&&Mi(S)}else S.stateNode=oe(U,w,F,S)}return ys(S),null;case 13:if(dn(Ss),U=S.memoizedState,w===null||w.memoizedState!==null&&w.memoizedState.dehydrated!==null){if(fs&&Pi!==null&&(S.mode&1)!==0&&(S.flags&128)===0)V2(),od(),S.flags|=98560,Y=!1;else if(Y=lg(S),U!==null&&U.dehydrated!==null){if(w===null){if(!Y)throw Error(i(318));if(!pe)throw Error(i(344));if(Y=S.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(i(317));xt(Y,S)}else od(),(S.flags&128)===0&&(S.memoizedState=null),S.flags|=4;ys(S),Y=!1}else vl!==null&&($g(vl),vl=null),Y=!0;if(!Y)return S.flags&65536?S:null}return(S.flags&128)!==0?(S.lanes=F,S):(F=U!==null,F!==(w!==null&&w.memoizedState!==null)&&F&&(S.child.flags|=8192,(S.mode&1)!==0&&(w===null||(Ss.current&1)!==0?ws===0&&(ws=3):Q0())),S.updateQueue!==null&&(S.flags|=4),ys(S),null);case 4:return dd(),ku(w,S),w===null&&Me(S.stateNode.containerInfo),ys(S),null;case 10:return fh(S.type._context),ys(S),null;case 17:return Bn(S.type)&&be(),ys(S),null;case 19:if(dn(Ss),Y=S.memoizedState,Y===null)return ys(S),null;if(U=(S.flags&128)!==0,ae=Y.rendering,ae===null)if(U)Eo(Y,!1);else{if(ws!==0||w!==null&&(w.flags&128)!==0)for(w=S.child;w!==null;){if(ae=gg(w),ae!==null){for(S.flags|=128,Eo(Y,!1),w=ae.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),S.subtreeFlags=0,w=F,F=S.child;F!==null;)U=F,Y=w,U.flags&=14680066,ae=U.alternate,ae===null?(U.childLanes=0,U.lanes=Y,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=ae.childLanes,U.lanes=ae.lanes,U.child=ae.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=ae.memoizedProps,U.memoizedState=ae.memoizedState,U.updateQueue=ae.updateQueue,U.type=ae.type,Y=ae.dependencies,U.dependencies=Y===null?null:{lanes:Y.lanes,firstContext:Y.firstContext}),F=F.sibling;return Fr(Ss,Ss.current&1|2),S.child}w=w.sibling}Y.tail!==null&&xn()>Ah&&(S.flags|=128,U=!0,Eo(Y,!1),S.lanes=4194304)}else{if(!U)if(w=gg(ae),w!==null){if(S.flags|=128,U=!0,w=w.updateQueue,w!==null&&(S.updateQueue=w,S.flags|=4),Eo(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!ae.alternate&&!fs)return ys(S),null}else 2*xn()-Y.renderingStartTime>Ah&&F!==1073741824&&(S.flags|=128,U=!0,Eo(Y,!1),S.lanes=4194304);Y.isBackwards?(ae.sibling=S.child,S.child=ae):(w=Y.last,w!==null?w.sibling=ae:S.child=ae,Y.last=ae)}return Y.tail!==null?(S=Y.tail,Y.rendering=S,Y.tail=S.sibling,Y.renderingStartTime=xn(),S.sibling=null,w=Ss.current,Fr(Ss,U?w&1|2:w&1),S):(ys(S),null);case 22:case 23:return zg(),F=S.memoizedState!==null,w!==null&&w.memoizedState!==null!==F&&(S.flags|=8192),F&&(S.mode&1)!==0?(va&1073741824)!==0&&(ys(S),Te&&S.subtreeFlags&6&&(S.flags|=8192)):ys(S),null;case 24:return null;case 25:return null}throw Error(i(156,S.tag))}function lw(w,S){switch(uh(S),S.tag){case 1:return Bn(S.type)&&be(),w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 3:return dd(),dn(Qs),dn(gn),G1(),w=S.flags,(w&65536)!==0&&(w&128)===0?(S.flags=w&-65537|128,S):null;case 5:return W1(S),null;case 13:if(dn(Ss),w=S.memoizedState,w!==null&&w.dehydrated!==null){if(S.alternate===null)throw Error(i(340));od()}return w=S.flags,w&65536?(S.flags=w&-65537|128,S):null;case 19:return dn(Ss),null;case 4:return dd(),null;case 10:return fh(S.type._context),null;case 22:case 23:return zg(),null;case 24:return null;default:return null}}var z0=!1,Fa=!1,No=typeof WeakSet=="function"?WeakSet:Set,mr=null;function Gn(w,S){var F=w.ref;if(F!==null)if(typeof F=="function")try{F(null)}catch(U){ms(w,S,U)}else F.current=null}function Ao(w,S,F){try{F()}catch(U){ms(w,S,U)}}var ix=!1;function cw(w,S){for(R(w.containerInfo),mr=S;mr!==null;)if(w=mr,S=w.child,(w.subtreeFlags&1028)!==0&&S!==null)S.return=w,mr=S;else for(;mr!==null;){w=mr;try{var F=w.alternate;if((w.flags&1024)!==0)switch(w.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var U=F.memoizedProps,Y=F.memoizedState,ae=w.stateNode,Se=ae.getSnapshotBeforeUpdate(w.elementType===w.type?U:Co(w.type,U),Y);ae.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:Te&&Be(w.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(st){ms(w,w.return,st)}if(S=w.sibling,S!==null){S.return=w.return,mr=S;break}mr=w.return}return F=ix,ix=!1,F}function Td(w,S,F){var U=S.updateQueue;if(U=U!==null?U.lastEffect:null,U!==null){var Y=U=U.next;do{if((Y.tag&w)===w){var ae=Y.destroy;Y.destroy=void 0,ae!==void 0&&Ao(S,F,ae)}Y=Y.next}while(Y!==U)}}function U0(w,S){if(S=S.updateQueue,S=S!==null?S.lastEffect:null,S!==null){var F=S=S.next;do{if((F.tag&w)===w){var U=F.create;F.destroy=U()}F=F.next}while(F!==S)}}function Ag(w){var S=w.ref;if(S!==null){var F=w.stateNode;switch(w.tag){case 5:w=re(F);break;default:w=F}typeof S=="function"?S(w):S.current=w}}function Sh(w){var S=w.alternate;S!==null&&(w.alternate=null,Sh(S)),w.child=null,w.deletions=null,w.sibling=null,w.tag===5&&(S=w.stateNode,S!==null&&Ve(S)),w.stateNode=null,w.return=null,w.dependencies=null,w.memoizedProps=null,w.memoizedState=null,w.pendingProps=null,w.stateNode=null,w.updateQueue=null}function ox(w){return w.tag===5||w.tag===3||w.tag===4}function Cd(w){e:for(;;){for(;w.sibling===null;){if(w.return===null||ox(w.return))return null;w=w.return}for(w.sibling.return=w.return,w=w.sibling;w.tag!==5&&w.tag!==6&&w.tag!==18;){if(w.flags&2||w.child===null||w.tag===4)continue e;w.child.return=w,w=w.child}if(!(w.flags&2))return w.stateNode}}function kh(w,S,F){var U=w.tag;if(U===5||U===6)w=w.stateNode,S?Xt(F,w,S):tt(F,w);else if(U!==4&&(w=w.child,w!==null))for(kh(w,S,F),w=w.sibling;w!==null;)kh(w,S,F),w=w.sibling}function lx(w,S,F){var U=w.tag;if(U===5||U===6)w=w.stateNode,S?Lt(F,w,S):Ue(F,w);else if(U!==4&&(w=w.child,w!==null))for(lx(w,S,F),w=w.sibling;w!==null;)lx(w,S,F),w=w.sibling}var zs=null,no=!1;function bl(w,S,F){for(F=F.child;F!==null;)jg(w,S,F),F=F.sibling}function jg(w,S,F){if(eo&&typeof eo.onCommitFiberUnmount=="function")try{eo.onCommitFiberUnmount(du,F)}catch{}switch(F.tag){case 5:Fa||Gn(F,S);case 6:if(Te){var U=zs,Y=no;zs=null,bl(w,S,F),zs=U,no=Y,zs!==null&&(no?br(zs,F.stateNode):vr(zs,F.stateNode))}else bl(w,S,F);break;case 18:Te&&zs!==null&&(no?je(zs,F.stateNode):Pe(zs,F.stateNode));break;case 4:Te?(U=zs,Y=no,zs=F.stateNode.containerInfo,no=!0,bl(w,S,F),zs=U,no=Y):(ie&&(U=F.stateNode.containerInfo,Y=Pt(U),Ne(U,Y)),bl(w,S,F));break;case 0:case 11:case 14:case 15:if(!Fa&&(U=F.updateQueue,U!==null&&(U=U.lastEffect,U!==null))){Y=U=U.next;do{var ae=Y,Se=ae.destroy;ae=ae.tag,Se!==void 0&&((ae&2)!==0||(ae&4)!==0)&&Ao(F,S,Se),Y=Y.next}while(Y!==U)}bl(w,S,F);break;case 1:if(!Fa&&(Gn(F,S),U=F.stateNode,typeof U.componentWillUnmount=="function"))try{U.props=F.memoizedProps,U.state=F.memoizedState,U.componentWillUnmount()}catch(st){ms(F,S,st)}bl(w,S,F);break;case 21:bl(w,S,F);break;case 22:F.mode&1?(Fa=(U=Fa)||F.memoizedState!==null,bl(w,S,F),Fa=U):bl(w,S,F);break;default:bl(w,S,F)}}function Ed(w){var S=w.updateQueue;if(S!==null){w.updateQueue=null;var F=w.stateNode;F===null&&(F=w.stateNode=new No),S.forEach(function(U){var Y=K3.bind(null,w,U);F.has(U)||(F.add(U),U.then(Y,Y))})}}function Xo(w,S){var F=S.deletions;if(F!==null)for(var U=0;U<F.length;U++){var Y=F[U];try{var ae=w,Se=S;if(Te){var st=Se;e:for(;st!==null;){switch(st.tag){case 5:zs=st.stateNode,no=!1;break e;case 3:zs=st.stateNode.containerInfo,no=!0;break e;case 4:zs=st.stateNode.containerInfo,no=!0;break e}st=st.return}if(zs===null)throw Error(i(160));jg(ae,Se,Y),zs=null,no=!1}else jg(ae,Se,Y);var Tt=Y.alternate;Tt!==null&&(Tt.return=null),Y.return=null}catch(ar){ms(Y,S,ar)}}if(S.subtreeFlags&12854)for(S=S.child;S!==null;)Th(S,w),S=S.sibling}function Th(w,S){var F=w.alternate,U=w.flags;switch(w.tag){case 0:case 11:case 14:case 15:if(Xo(S,w),jo(w),U&4){try{Td(3,w,w.return),U0(3,w)}catch(gr){ms(w,w.return,gr)}try{Td(5,w,w.return)}catch(gr){ms(w,w.return,gr)}}break;case 1:Xo(S,w),jo(w),U&512&&F!==null&&Gn(F,F.return);break;case 5:if(Xo(S,w),jo(w),U&512&&F!==null&&Gn(F,F.return),Te){if(w.flags&32){var Y=w.stateNode;try{Dr(Y)}catch(gr){ms(w,w.return,gr)}}if(U&4&&(Y=w.stateNode,Y!=null)){var ae=w.memoizedProps;if(F=F!==null?F.memoizedProps:ae,U=w.type,S=w.updateQueue,w.updateQueue=null,S!==null)try{It(Y,S,U,F,ae,w)}catch(gr){ms(w,w.return,gr)}}}break;case 6:if(Xo(S,w),jo(w),U&4&&Te){if(w.stateNode===null)throw Error(i(162));Y=w.stateNode,ae=w.memoizedProps,F=F!==null?F.memoizedProps:ae;try{nt(Y,F,ae)}catch(gr){ms(w,w.return,gr)}}break;case 3:if(Xo(S,w),jo(w),U&4){if(Te&&pe&&F!==null&&F.memoizedState.isDehydrated)try{ce(S.containerInfo)}catch(gr){ms(w,w.return,gr)}if(ie){Y=S.containerInfo,ae=S.pendingChildren;try{Ne(Y,ae)}catch(gr){ms(w,w.return,gr)}}}break;case 4:if(Xo(S,w),jo(w),U&4&&ie){ae=w.stateNode,Y=ae.containerInfo,ae=ae.pendingChildren;try{Ne(Y,ae)}catch(gr){ms(w,w.return,gr)}}break;case 13:Xo(S,w),jo(w),Y=w.child,Y.flags&8192&&(ae=Y.memoizedState!==null,Y.stateNode.isHidden=ae,!ae||Y.alternate!==null&&Y.alternate.memoizedState!==null||(K0=xn())),U&4&&Ed(w);break;case 22:var Se=F!==null&&F.memoizedState!==null;if(w.mode&1?(Fa=(F=Fa)||Se,Xo(S,w),Fa=F):Xo(S,w),jo(w),U&8192){if(F=w.memoizedState!==null,(w.stateNode.isHidden=F)&&!Se&&(w.mode&1)!==0)for(mr=w,U=w.child;U!==null;){for(S=mr=U;mr!==null;){Se=mr;var st=Se.child;switch(Se.tag){case 0:case 11:case 14:case 15:Td(4,Se,Se.return);break;case 1:Gn(Se,Se.return);var Tt=Se.stateNode;if(typeof Tt.componentWillUnmount=="function"){var ar=Se,Er=Se.return;try{var ln=ar;Tt.props=ln.memoizedProps,Tt.state=ln.memoizedState,Tt.componentWillUnmount()}catch(gr){ms(ar,Er,gr)}}break;case 5:Gn(Se,Se.return);break;case 22:if(Se.memoizedState!==null){Fg(S);continue}}st!==null?(st.return=Se,mr=st):Fg(S)}U=U.sibling}if(Te){e:if(U=null,Te)for(S=w;;){if(S.tag===5){if(U===null){U=S;try{Y=S.stateNode,F?Sr(Y):ye(S.stateNode,S.memoizedProps)}catch(gr){ms(w,w.return,gr)}}}else if(S.tag===6){if(U===null)try{ae=S.stateNode,F?pr(ae):Fe(ae,S.memoizedProps)}catch(gr){ms(w,w.return,gr)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===w)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===w)break e;for(;S.sibling===null;){if(S.return===null||S.return===w)break e;U===S&&(U=null),S=S.return}U===S&&(U=null),S.sibling.return=S.return,S=S.sibling}}}break;case 19:Xo(S,w),jo(w),U&4&&Ed(w);break;case 21:break;default:Xo(S,w),jo(w)}}function jo(w){var S=w.flags;if(S&2){try{if(Te){e:{for(var F=w.return;F!==null;){if(ox(F)){var U=F;break e}F=F.return}throw Error(i(160))}switch(U.tag){case 5:var Y=U.stateNode;U.flags&32&&(Dr(Y),U.flags&=-33);var ae=Cd(w);lx(w,ae,Y);break;case 3:case 4:var Se=U.stateNode.containerInfo,st=Cd(w);kh(w,st,Se);break;default:throw Error(i(161))}}}catch(Tt){ms(w,w.return,Tt)}w.flags&=-3}S&4096&&(w.flags&=-4097)}function W0(w,S,F){mr=w,Pg(w)}function Pg(w,S,F){for(var U=(w.mode&1)!==0;mr!==null;){var Y=mr,ae=Y.child;if(Y.tag===22&&U){var Se=Y.memoizedState!==null||z0;if(!Se){var st=Y.alternate,Tt=st!==null&&st.memoizedState!==null||Fa;st=z0;var ar=Fa;if(z0=Se,(Fa=Tt)&&!ar)for(mr=Y;mr!==null;)Se=mr,Tt=Se.child,Se.tag===22&&Se.memoizedState!==null?Dg(Y):Tt!==null?(Tt.return=Se,mr=Tt):Dg(Y);for(;ae!==null;)mr=ae,Pg(ae),ae=ae.sibling;mr=Y,z0=st,Fa=ar}Mg(w)}else(Y.subtreeFlags&8772)!==0&&ae!==null?(ae.return=Y,mr=ae):Mg(w)}}function Mg(w){for(;mr!==null;){var S=mr;if((S.flags&8772)!==0){var F=S.alternate;try{if((S.flags&8772)!==0)switch(S.tag){case 0:case 11:case 15:Fa||U0(5,S);break;case 1:var U=S.stateNode;if(S.flags&4&&!Fa)if(F===null)U.componentDidMount();else{var Y=S.elementType===S.type?F.memoizedProps:Co(S.type,F.memoizedProps);U.componentDidUpdate(Y,F.memoizedState,U.__reactInternalSnapshotBeforeUpdate)}var ae=S.updateQueue;ae!==null&&Q2(S,ae,U);break;case 3:var Se=S.updateQueue;if(Se!==null){if(F=null,S.child!==null)switch(S.child.tag){case 5:F=re(S.child.stateNode);break;case 1:F=S.child.stateNode}Q2(S,Se,F)}break;case 5:var st=S.stateNode;F===null&&S.flags&4&&at(st,S.type,S.memoizedProps,S);break;case 6:break;case 4:break;case 12:break;case 13:if(pe&&S.memoizedState===null){var Tt=S.alternate;if(Tt!==null){var ar=Tt.memoizedState;if(ar!==null){var Er=ar.dehydrated;Er!==null&&ge(Er)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Fa||S.flags&512&&Ag(S)}catch(ln){ms(S,S.return,ln)}}if(S===w){mr=null;break}if(F=S.sibling,F!==null){F.return=S.return,mr=F;break}mr=S.return}}function Fg(w){for(;mr!==null;){var S=mr;if(S===w){mr=null;break}var F=S.sibling;if(F!==null){F.return=S.return,mr=F;break}mr=S.return}}function Dg(w){for(;mr!==null;){var S=mr;try{switch(S.tag){case 0:case 11:case 15:var F=S.return;try{U0(4,S)}catch(Tt){ms(S,F,Tt)}break;case 1:var U=S.stateNode;if(typeof U.componentDidMount=="function"){var Y=S.return;try{U.componentDidMount()}catch(Tt){ms(S,Y,Tt)}}var ae=S.return;try{Ag(S)}catch(Tt){ms(S,ae,Tt)}break;case 5:var Se=S.return;try{Ag(S)}catch(Tt){ms(S,Se,Tt)}}}catch(Tt){ms(S,S.return,Tt)}if(S===w){mr=null;break}var st=S.sibling;if(st!==null){st.return=S.return,mr=st;break}mr=S.return}}var Bc=0,Oi=1,Kl=2,H0=3,Ch=4;if(typeof Symbol=="function"&&Symbol.for){var Po=Symbol.for;Bc=Po("selector.component"),Oi=Po("selector.has_pseudo_class"),Kl=Po("selector.role"),H0=Po("selector.test_id"),Ch=Po("selector.text")}function Yl(w){var S=Ae(w);if(S!=null){if(typeof S.memoizedProps["data-testname"]!="string")throw Error(i(364));return S}if(w=vt(w),w===null)throw Error(i(362));return w.stateNode.current}function Eh(w,S){switch(S.$$typeof){case Bc:if(w.type===S.value)return!0;break;case Oi:e:{S=S.value,w=[w,0];for(var F=0;F<w.length;){var U=w[F++],Y=w[F++],ae=S[Y];if(U.tag!==5||!Ut(U)){for(;ae!=null&&Eh(U,ae);)Y++,ae=S[Y];if(Y===S.length){S=!0;break e}else for(U=U.child;U!==null;)w.push(U,Y),U=U.sibling}}S=!1}return S;case Kl:if(w.tag===5&&Bt(w.stateNode,S.value))return!0;break;case Ch:if((w.tag===5||w.tag===6)&&(w=bt(w),w!==null&&0<=w.indexOf(S.value)))return!0;break;case H0:if(w.tag===5&&(w=w.memoizedProps["data-testname"],typeof w=="string"&&w.toLowerCase()===S.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Og(w){switch(w.$$typeof){case Bc:return"<"+(M(w.value)||"Unknown")+">";case Oi:return":has("+(Og(w)||"")+")";case Kl:return'[role="'+w.value+'"]';case Ch:return'"'+w.value+'"';case H0:return'[data-testname="'+w.value+'"]';default:throw Error(i(365))}}function Xl(w,S){var F=[];w=[w,0];for(var U=0;U<w.length;){var Y=w[U++],ae=w[U++],Se=S[ae];if(Y.tag!==5||!Ut(Y)){for(;Se!=null&&Eh(Y,Se);)ae++,Se=S[ae];if(ae===S.length)F.push(Y);else for(Y=Y.child;Y!==null;)w.push(Y,ae),Y=Y.sibling}}return F}function Jl(w,S){if(!At)throw Error(i(363));w=Yl(w),w=Xl(w,S),S=[],w=Array.from(w);for(var F=0;F<w.length;){var U=w[F++];if(U.tag===5)Ut(U)||S.push(U.stateNode);else for(U=U.child;U!==null;)w.push(U),U=U.sibling}return S}var Ig=Math.ceil,Nh=o.ReactCurrentDispatcher,G0=o.ReactCurrentOwner,Fs=o.ReactCurrentBatchConfig,fn=0,Qn=null,vs=null,Us=0,va=0,Cu=mn(0),ws=0,V0=null,$c=0,ls=0,q0=0,Nd=null,fi=null,K0=0,Ah=1/0,Ii=null;function Kn(){Ah=xn()+500}var Ds=!1,ea=null,_l=null,Eu=!1,Jo=null,Rg=0,ta=0,jh=null,Y0=-1,X0=0;function hs(){return(fn&6)!==0?xn():Y0!==-1?Y0:Y0=xn()}function wa(w){return(w.mode&1)===0?1:(fn&2)!==0&&Us!==0?Us&-Us:G3.transition!==null?(X0===0&&(X0=kt()),X0):(w=ze,w!==0?w:Je())}function hi(w,S,F,U){if(50<ta)throw ta=0,jh=null,Error(i(185));Et(w,F,U),((fn&2)===0||w!==Qn)&&(w===Qn&&((fn&2)===0&&(ls|=F),ws===4&&zc(w,Us)),mi(w,U),F===1&&fn===0&&(S.mode&1)===0&&(Kn(),A0&&Ga()))}function mi(w,S){var F=w.callbackNode;ft(w,S);var U=tr(w,w===Qn?Us:0);if(U===0)F!==null&&ds(F),w.callbackNode=null,w.callbackPriority=0;else if(S=U&-U,w.callbackPriority!==S){if(F!=null&&ds(F),S===1)w.tag===0?U2(cx.bind(null,w)):ig(cx.bind(null,w)),Dt?lt(function(){(fn&6)===0&&Ga()}):sr(_n,Ga),F=null;else{switch(ur(U)){case 1:F=_n;break;case 4:F=Wl;break;case 16:F=Ai;break;case 536870912:F=oh;break;default:F=Ai}F=px(F,Lg.bind(null,w))}w.callbackPriority=S,w.callbackNode=F}}function Lg(w,S){if(Y0=-1,X0=0,(fn&6)!==0)throw Error(i(327));var F=w.callbackNode;if(Uc()&&w.callbackNode!==F)return null;var U=tr(w,w===Qn?Us:0);if(U===0)return null;if((U&30)!==0||(U&w.expiredLanes)!==0||S)S=Ad(w,U);else{S=U;var Y=fn;fn|=2;var ae=dx();(Qn!==w||Us!==S)&&(Ii=null,Kn(),Nu(w,S));do try{fx();break}catch(st){J0(w,st)}while(!0);B1(),Nh.current=ae,fn=Y,vs!==null?S=0:(Qn=null,Us=0,S=ws)}if(S!==0){if(S===2&&(Y=Wt(w),Y!==0&&(U=Y,S=Bg(w,Y))),S===1)throw F=V0,Nu(w,0),zc(w,U),mi(w,xn()),F;if(S===6)zc(w,U);else{if(Y=w.current.alternate,(U&30)===0&&!uw(Y)&&(S=Ad(w,U),S===2&&(ae=Wt(w),ae!==0&&(U=ae,S=Bg(w,ae))),S===1))throw F=V0,Nu(w,0),zc(w,U),mi(w,xn()),F;switch(w.finishedWork=Y,w.finishedLanes=U,S){case 0:case 1:throw Error(i(345));case 2:Au(w,fi,Ii);break;case 3:if(zc(w,U),(U&130023424)===U&&(S=K0+500-xn(),10<S)){if(tr(w,0)!==0)break;if(Y=w.suspendedLanes,(Y&U)!==U){hs(),w.pingedLanes|=w.suspendedLanes&Y;break}w.timeoutHandle=Z(Au.bind(null,w,fi,Ii),S);break}Au(w,fi,Ii);break;case 4:if(zc(w,U),(U&4194240)===U)break;for(S=w.eventTimes,Y=-1;0<U;){var Se=31-Fn(U);ae=1<<Se,Se=S[Se],Se>Y&&(Y=Se),U&=~ae}if(U=Y,U=xn()-U,U=(120>U?120:480>U?480:1080>U?1080:1920>U?1920:3e3>U?3e3:4320>U?4320:1960*Ig(U/1960))-U,10<U){w.timeoutHandle=Z(Au.bind(null,w,fi,Ii),U);break}Au(w,fi,Ii);break;case 5:Au(w,fi,Ii);break;default:throw Error(i(329))}}}return mi(w,xn()),w.callbackNode===F?Lg.bind(null,w):null}function Bg(w,S){var F=Nd;return w.current.memoizedState.isDehydrated&&(Nu(w,S).flags|=256),w=Ad(w,S),w!==2&&(S=fi,fi=F,S!==null&&$g(S)),w}function $g(w){fi===null?fi=w:fi.push.apply(fi,w)}function uw(w){for(var S=w;;){if(S.flags&16384){var F=S.updateQueue;if(F!==null&&(F=F.stores,F!==null))for(var U=0;U<F.length;U++){var Y=F[U],ae=Y.getSnapshot;Y=Y.value;try{if(!pl(ae(),Y))return!1}catch{return!1}}}if(F=S.child,S.subtreeFlags&16384&&F!==null)F.return=S,S=F;else{if(S===w)break;for(;S.sibling===null;){if(S.return===null||S.return===w)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function zc(w,S){for(S&=~q0,S&=~ls,w.suspendedLanes|=S,w.pingedLanes&=~S,w=w.expirationTimes;0<S;){var F=31-Fn(S),U=1<<F;w[F]=-1,S&=~U}}function cx(w){if((fn&6)!==0)throw Error(i(327));Uc();var S=tr(w,0);if((S&1)===0)return mi(w,xn()),null;var F=Ad(w,S);if(w.tag!==0&&F===2){var U=Wt(w);U!==0&&(S=U,F=Bg(w,U))}if(F===1)throw F=V0,Nu(w,0),zc(w,S),mi(w,xn()),F;if(F===6)throw Error(i(345));return w.finishedWork=w.current.alternate,w.finishedLanes=S,Au(w,fi,Ii),mi(w,xn()),null}function ux(w){Jo!==null&&Jo.tag===0&&(fn&6)===0&&Uc();var S=fn;fn|=1;var F=Fs.transition,U=ze;try{if(Fs.transition=null,ze=1,w)return w()}finally{ze=U,Fs.transition=F,fn=S,(fn&6)===0&&Ga()}}function zg(){va=Cu.current,dn(Cu)}function Nu(w,S){w.finishedWork=null,w.finishedLanes=0;var F=w.timeoutHandle;if(F!==ue&&(w.timeoutHandle=ue,le(F)),vs!==null)for(F=vs.return;F!==null;){var U=F;switch(uh(U),U.tag){case 1:U=U.type.childContextTypes,U!=null&&be();break;case 3:dd(),dn(Qs),dn(gn),G1();break;case 5:W1(U);break;case 4:dd();break;case 13:dn(Ss);break;case 19:dn(Ss);break;case 10:fh(U.type._context);break;case 22:case 23:zg()}F=F.return}if(Qn=w,vs=w=ju(w.current,null),Us=va=S,ws=0,V0=null,q0=ls=$c=0,fi=Nd=null,hu!==null){for(S=0;S<hu.length;S++)if(F=hu[S],U=F.interleaved,U!==null){F.interleaved=null;var Y=U.next,ae=F.pending;if(ae!==null){var Se=ae.next;ae.next=Y,U.next=Se}F.pending=U}hu=null}return w}function J0(w,S){do{var F=vs;try{if(B1(),ro.current=yd,O0){for(var U=xs.memoizedState;U!==null;){var Y=U.queue;Y!==null&&(Y.pending=null),U=U.next}O0=!1}if(xu=0,xa=Zs=xs=null,mh=!1,gh=0,G0.current=null,F===null||F.return===null){ws=1,V0=S,vs=null;break}e:{var ae=w,Se=F.return,st=F,Tt=S;if(S=Us,st.flags|=32768,Tt!==null&&typeof Tt=="object"&&typeof Tt.then=="function"){var ar=Tt,Er=st,ln=Er.tag;if((Er.mode&1)===0&&(ln===0||ln===11||ln===15)){var gr=Er.alternate;gr?(Er.updateQueue=gr.updateQueue,Er.memoizedState=gr.memoizedState,Er.lanes=gr.lanes):(Er.updateQueue=null,Er.memoizedState=null)}var cs=iw(Se);if(cs!==null){cs.flags&=-257,wu(cs,Se,st,ae,S),cs.mode&1&&aw(ae,ar,S),S=cs,Tt=ar;var Vn=S.updateQueue;if(Vn===null){var Ri=new Set;Ri.add(Tt),S.updateQueue=Ri}else Vn.add(Tt);break e}else{if((S&1)===0){aw(ae,ar,S),Q0();break e}Tt=Error(i(426))}}else if(fs&&st.mode&1){var Ql=iw(Se);if(Ql!==null){(Ql.flags&65536)===0&&(Ql.flags|=256),wu(Ql,Se,st,ae,S),R1(vd(Tt,st));break e}}ae=Tt=vd(Tt,st),ws!==4&&(ws=2),Nd===null?Nd=[ae]:Nd.push(ae),ae=Se;do{switch(ae.tag){case 3:ae.flags|=65536,S&=-S,ae.lanes|=S;var wt=Gl(ae,Tt,S);F0(ae,wt);break e;case 1:st=Tt;var it=ae.type,Nt=ae.stateNode;if((ae.flags&128)===0&&(typeof it.getDerivedStateFromError=="function"||Nt!==null&&typeof Nt.componentDidCatch=="function"&&(_l===null||!_l.has(Nt)))){ae.flags|=65536,S&=-S,ae.lanes|=S;var xr=Tg(ae,st,S);F0(ae,xr);break e}}ae=ae.return}while(ae!==null)}mx(F)}catch($r){S=$r,vs===F&&F!==null&&(vs=F=F.return);continue}break}while(!0)}function dx(){var w=Nh.current;return Nh.current=yd,w===null?yd:w}function Q0(){(ws===0||ws===3||ws===2)&&(ws=4),Qn===null||($c&268435455)===0&&(ls&268435455)===0||zc(Qn,Us)}function Ad(w,S){var F=fn;fn|=2;var U=dx();(Qn!==w||Us!==S)&&(Ii=null,Nu(w,S));do try{dw();break}catch(Y){J0(w,Y)}while(!0);if(B1(),fn=F,Nh.current=U,vs!==null)throw Error(i(261));return Qn=null,Us=0,ws}function dw(){for(;vs!==null;)hx(vs)}function fx(){for(;vs!==null&&!pn();)hx(vs)}function hx(w){var S=pw(w.alternate,w,va);w.memoizedProps=w.pendingProps,S===null?mx(w):vs=S,G0.current=null}function mx(w){var S=w;do{var F=S.alternate;if(w=S.return,(S.flags&32768)===0){if(F=kd(F,S,va),F!==null){vs=F;return}}else{if(F=lw(F,S),F!==null){F.flags&=32767,vs=F;return}if(w!==null)w.flags|=32768,w.subtreeFlags=0,w.deletions=null;else{ws=6,vs=null;return}}if(S=S.sibling,S!==null){vs=S;return}vs=S=w}while(S!==null);ws===0&&(ws=5)}function Au(w,S,F){var U=ze,Y=Fs.transition;try{Fs.transition=null,ze=1,fw(w,S,F,U)}finally{Fs.transition=Y,ze=U}return null}function fw(w,S,F,U){do Uc();while(Jo!==null);if((fn&6)!==0)throw Error(i(327));F=w.finishedWork;var Y=w.finishedLanes;if(F===null)return null;if(w.finishedWork=null,w.finishedLanes=0,F===w.current)throw Error(i(177));w.callbackNode=null,w.callbackPriority=0;var ae=F.lanes|F.childLanes;if(rn(w,ae),w===Qn&&(vs=Qn=null,Us=0),(F.subtreeFlags&2064)===0&&(F.flags&2064)===0||Eu||(Eu=!0,px(Ai,function(){return Uc(),null})),ae=(F.flags&15990)!==0,(F.subtreeFlags&15990)!==0||ae){ae=Fs.transition,Fs.transition=null;var Se=ze;ze=1;var st=fn;fn|=4,G0.current=null,cw(w,F),Th(F,w),H(w.containerInfo),w.current=F,W0(F),nn(),fn=st,ze=Se,Fs.transition=ae}else w.current=F;if(Eu&&(Eu=!1,Jo=w,Rg=Y),ae=w.pendingLanes,ae===0&&(_l=null),N0(F.stateNode),mi(w,xn()),S!==null)for(U=w.onRecoverableError,F=0;F<S.length;F++)Y=S[F],U(Y.value,{componentStack:Y.stack,digest:Y.digest});if(Ds)throw Ds=!1,w=ea,ea=null,w;return(Rg&1)!==0&&w.tag!==0&&Uc(),ae=w.pendingLanes,(ae&1)!==0?w===jh?ta++:(ta=0,jh=w):ta=0,Ga(),null}function Uc(){if(Jo!==null){var w=ur(Rg),S=Fs.transition,F=ze;try{if(Fs.transition=null,ze=16>w?16:w,Jo===null)var U=!1;else{if(w=Jo,Jo=null,Rg=0,(fn&6)!==0)throw Error(i(331));var Y=fn;for(fn|=4,mr=w.current;mr!==null;){var ae=mr,Se=ae.child;if((mr.flags&16)!==0){var st=ae.deletions;if(st!==null){for(var Tt=0;Tt<st.length;Tt++){var ar=st[Tt];for(mr=ar;mr!==null;){var Er=mr;switch(Er.tag){case 0:case 11:case 15:Td(8,Er,ae)}var ln=Er.child;if(ln!==null)ln.return=Er,mr=ln;else for(;mr!==null;){Er=mr;var gr=Er.sibling,cs=Er.return;if(Sh(Er),Er===ar){mr=null;break}if(gr!==null){gr.return=cs,mr=gr;break}mr=cs}}}var Vn=ae.alternate;if(Vn!==null){var Ri=Vn.child;if(Ri!==null){Vn.child=null;do{var Ql=Ri.sibling;Ri.sibling=null,Ri=Ql}while(Ri!==null)}}mr=ae}}if((ae.subtreeFlags&2064)!==0&&Se!==null)Se.return=ae,mr=Se;else e:for(;mr!==null;){if(ae=mr,(ae.flags&2048)!==0)switch(ae.tag){case 0:case 11:case 15:Td(9,ae,ae.return)}var wt=ae.sibling;if(wt!==null){wt.return=ae.return,mr=wt;break e}mr=ae.return}}var it=w.current;for(mr=it;mr!==null;){Se=mr;var Nt=Se.child;if((Se.subtreeFlags&2064)!==0&&Nt!==null)Nt.return=Se,mr=Nt;else e:for(Se=it;mr!==null;){if(st=mr,(st.flags&2048)!==0)try{switch(st.tag){case 0:case 11:case 15:U0(9,st)}}catch($r){ms(st,st.return,$r)}if(st===Se){mr=null;break e}var xr=st.sibling;if(xr!==null){xr.return=st.return,mr=xr;break e}mr=st.return}}if(fn=Y,Ga(),eo&&typeof eo.onPostCommitFiberRoot=="function")try{eo.onPostCommitFiberRoot(du,w)}catch{}U=!0}return U}finally{ze=F,Fs.transition=S}}return!1}function gx(w,S,F){S=vd(F,S),S=Gl(w,S,1),w=Oc(w,S,1),S=hs(),w!==null&&(Et(w,1,S),mi(w,S))}function ms(w,S,F){if(w.tag===3)gx(w,w,F);else for(;S!==null;){if(S.tag===3){gx(S,w,F);break}else if(S.tag===1){var U=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof U.componentDidCatch=="function"&&(_l===null||!_l.has(U))){w=vd(F,w),w=Tg(S,w,1),S=Oc(S,w,1),w=hs(),S!==null&&(Et(S,1,w),mi(S,w));break}}S=S.return}}function hw(w,S,F){var U=w.pingCache;U!==null&&U.delete(S),S=hs(),w.pingedLanes|=w.suspendedLanes&F,Qn===w&&(Us&F)===F&&(ws===4||ws===3&&(Us&130023424)===Us&&500>xn()-K0?Nu(w,0):q0|=F),mi(w,S)}function mw(w,S){S===0&&((w.mode&1)===0?S=1:(S=Re,Re<<=1,(Re&130023424)===0&&(Re=4194304)));var F=hs();w=wl(w,S),w!==null&&(Et(w,S,F),mi(w,F))}function gw(w){var S=w.memoizedState,F=0;S!==null&&(F=S.retryLane),mw(w,F)}function K3(w,S){var F=0;switch(w.tag){case 13:var U=w.stateNode,Y=w.memoizedState;Y!==null&&(F=Y.retryLane);break;case 19:U=w.stateNode;break;default:throw Error(i(314))}U!==null&&U.delete(S),mw(w,F)}var pw;pw=function(w,S,F){if(w!==null)if(w.memoizedProps!==S.pendingProps||Qs.current)ya=!0;else{if((w.lanes&F)===0&&(S.flags&128)===0)return ya=!1,_u(w,S,F);ya=(w.flags&131072)!==0}else ya=!1,fs&&(S.flags&1048576)!==0&&W2(S,id,S.index);switch(S.lanes=0,S.tag){case 2:var U=S.type;_h(w,S),w=S.pendingProps;var Y=Ha(S,gn.current);M0(S,F),Y=ph(null,S,U,w,Y,F);var ae=pg();return S.flags|=1,typeof Y=="object"&&Y!==null&&typeof Y.render=="function"&&Y.$$typeof===void 0?(S.tag=1,S.memoizedState=null,S.updateQueue=null,Bn(U)?(ae=!0,Ur(S)):ae=!1,S.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,z1(S),Y.updater=vh,S.stateNode=Y,Y._reactInternals=S,Hl(S,U,w,F),S=ui(null,S,U,!0,ae,F)):(S.tag=0,fs&&ae&&ch(S),Ma(null,S,Y,F),S=S.child),S;case 16:U=S.elementType;e:{switch(_h(w,S),w=S.pendingProps,Y=U._init,U=Y(U._payload),S.type=U,Y=S.tag=Y3(U),w=Co(U,w),Y){case 0:S=Vl(null,S,U,w,F);break e;case 1:S=Ka(null,S,U,w,F);break e;case 11:S=Cg(null,S,U,w,F);break e;case 14:S=wd(null,S,U,Co(U.type,w),F);break e}throw Error(i(306,U,""))}return S;case 0:return U=S.type,Y=S.pendingProps,Y=S.elementType===U?Y:Co(U,Y),Vl(w,S,U,Y,F);case 1:return U=S.type,Y=S.pendingProps,Y=S.elementType===U?Y:Co(U,Y),Ka(w,S,U,Y,F);case 3:e:{if(bu(S),w===null)throw Error(i(387));U=S.pendingProps,ae=S.memoizedState,Y=ae.element,J2(w,S),mu(S,U,null,F);var Se=S.memoizedState;if(U=Se.element,pe&&ae.isDehydrated)if(ae={element:U,isDehydrated:!1,cache:Se.cache,pendingSuspenseBoundaries:Se.pendingSuspenseBoundaries,transitions:Se.transitions},S.updateQueue.baseState=ae,S.memoizedState=ae,S.flags&256){Y=vd(Error(i(423)),S),S=bd(w,S,U,F,Y);break e}else if(U!==Y){Y=vd(Error(i(424)),S),S=bd(w,S,U,F,Y);break e}else for(pe&&(Pi=_e(S.stateNode.containerInfo),Va=S,fs=!0,vl=null,dh=!1),F=Y2(S,null,U,F),S.child=F;F;)F.flags=F.flags&-3|4096,F=F.sibling;else{if(od(),U===Y){S=Lc(w,S,F);break e}Ma(w,S,U,F)}S=S.child}return S;case 5:return U1(S),w===null&&I1(S),U=S.type,Y=S.pendingProps,ae=w!==null?w.memoizedProps:null,Se=Y.children,ee(U,Y)?Se=null:ae!==null&&ee(U,ae)&&(S.flags|=32),Jn(w,S),Ma(w,S,Se,F),S.child;case 6:return w===null&&I1(S),null;case 13:return ax(w,S,F);case 4:return mg(S,S.stateNode.containerInfo),U=S.pendingProps,w===null?S.child=cd(S,null,U,F):Ma(w,S,U,F),S.child;case 11:return U=S.type,Y=S.pendingProps,Y=S.elementType===U?Y:Co(U,Y),Cg(w,S,U,Y,F);case 7:return Ma(w,S,S.pendingProps,F),S.child;case 8:return Ma(w,S,S.pendingProps.children,F),S.child;case 12:return Ma(w,S,S.pendingProps.children,F),S.child;case 10:e:{if(U=S.type._context,Y=S.pendingProps,ae=S.memoizedProps,Se=Y.value,X2(S,U,Se),ae!==null)if(pl(ae.value,Se)){if(ae.children===Y.children&&!Qs.current){S=Lc(w,S,F);break e}}else for(ae=S.child,ae!==null&&(ae.return=S);ae!==null;){var st=ae.dependencies;if(st!==null){Se=ae.child;for(var Tt=st.firstContext;Tt!==null;){if(Tt.context===U){if(ae.tag===1){Tt=Dc(-1,F&-F),Tt.tag=2;var ar=ae.updateQueue;if(ar!==null){ar=ar.shared;var Er=ar.pending;Er===null?Tt.next=Tt:(Tt.next=Er.next,Er.next=Tt),ar.pending=Tt}}ae.lanes|=F,Tt=ae.alternate,Tt!==null&&(Tt.lanes|=F),ud(ae.return,F,S),st.lanes|=F;break}Tt=Tt.next}}else if(ae.tag===10)Se=ae.type===S.type?null:ae.child;else if(ae.tag===18){if(Se=ae.return,Se===null)throw Error(i(341));Se.lanes|=F,st=Se.alternate,st!==null&&(st.lanes|=F),ud(Se,F,S),Se=ae.sibling}else Se=ae.child;if(Se!==null)Se.return=ae;else for(Se=ae;Se!==null;){if(Se===S){Se=null;break}if(ae=Se.sibling,ae!==null){ae.return=Se.return,Se=ae;break}Se=Se.return}ae=Se}Ma(w,S,Y.children,F),S=S.child}return S;case 9:return Y=S.type,U=S.pendingProps.children,M0(S,F),Y=So(Y),U=U(Y),S.flags|=1,Ma(w,S,U,F),S.child;case 14:return U=S.type,Y=Co(U,S.pendingProps),Y=Co(U.type,Y),wd(w,S,U,Y,F);case 15:return Rc(w,S,S.type,S.pendingProps,F);case 17:return U=S.type,Y=S.pendingProps,Y=S.elementType===U?Y:Co(U,Y),_h(w,S),S.tag=1,Bn(U)?(w=!0,Ur(S)):w=!1,M0(S,F),sw(S,U,Y),Hl(S,U,Y,F),ui(null,S,U,!0,w,F);case 19:return Ng(w,S,F);case 22:return os(w,S,F)}throw Error(i(156,S.tag))};function px(w,S){return sr(w,S)}function xw(w,S,F,U){this.tag=w,this.key=F,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=U,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mo(w,S,F,U){return new xw(w,S,F,U)}function Z0(w){return w=w.prototype,!(!w||!w.isReactComponent)}function Y3(w){if(typeof w=="function")return Z0(w)?1:0;if(w!=null){if(w=w.$$typeof,w===y)return 11;if(w===k)return 14}return 2}function ju(w,S){var F=w.alternate;return F===null?(F=Mo(w.tag,S,w.key,w.mode),F.elementType=w.elementType,F.type=w.type,F.stateNode=w.stateNode,F.alternate=w,w.alternate=F):(F.pendingProps=S,F.type=w.type,F.flags=0,F.subtreeFlags=0,F.deletions=null),F.flags=w.flags&14680064,F.childLanes=w.childLanes,F.lanes=w.lanes,F.child=w.child,F.memoizedProps=w.memoizedProps,F.memoizedState=w.memoizedState,F.updateQueue=w.updateQueue,S=w.dependencies,F.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},F.sibling=w.sibling,F.index=w.index,F.ref=w.ref,F}function Ug(w,S,F,U,Y,ae){var Se=2;if(U=w,typeof w=="function")Z0(w)&&(Se=1);else if(typeof w=="string")Se=5;else e:switch(w){case d:return Ya(F.children,Y,ae,S);case f:Se=8,Y|=8;break;case h:return w=Mo(12,F,S,Y|2),w.elementType=h,w.lanes=ae,w;case v:return w=Mo(13,F,S,Y),w.elementType=v,w.lanes=ae,w;case T:return w=Mo(19,F,S,Y),w.elementType=T,w.lanes=ae,w;case E:return ef(F,Y,ae,S);default:if(typeof w=="object"&&w!==null)switch(w.$$typeof){case g:Se=10;break e;case x:Se=9;break e;case y:Se=11;break e;case k:Se=14;break e;case b:Se=16,U=null;break e}throw Error(i(130,w==null?w:typeof w,""))}return S=Mo(Se,F,S,Y),S.elementType=w,S.type=U,S.lanes=ae,S}function Ya(w,S,F,U){return w=Mo(7,w,U,S),w.lanes=F,w}function ef(w,S,F,U){return w=Mo(22,w,U,S),w.elementType=E,w.lanes=F,w.stateNode={isHidden:!1},w}function tf(w,S,F){return w=Mo(6,w,null,S),w.lanes=F,w}function Wg(w,S,F){return S=Mo(4,w.children!==null?w.children:[],w.key,S),S.lanes=F,S.stateNode={containerInfo:w.containerInfo,pendingChildren:null,implementation:w.implementation},S}function yw(w,S,F,U,Y){this.tag=S,this.containerInfo=w,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ue,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pr(0),this.expirationTimes=Pr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pr(0),this.identifierPrefix=U,this.onRecoverableError=Y,pe&&(this.mutableSourceEagerHydrationData=null)}function xx(w,S,F,U,Y,ae,Se,st,Tt){return w=new yw(w,S,F,st,Tt),S===1?(S=1,ae===!0&&(S|=8)):S=0,ae=Mo(3,null,null,S),w.current=ae,ae.stateNode=w,ae.memoizedState={element:U,isDehydrated:F,cache:null,transitions:null,pendingSuspenseBoundaries:null},z1(ae),w}function Hg(w){if(!w)return li;w=w._reactInternals;e:{if(A(w)!==w||w.tag!==1)throw Error(i(170));var S=w;do{switch(S.tag){case 3:S=S.stateNode.context;break e;case 1:if(Bn(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break e}}S=S.return}while(S!==null);throw Error(i(171))}if(w.tag===1){var F=w.type;if(Bn(F))return jr(w,F,S)}return S}function jd(w){var S=w._reactInternals;if(S===void 0)throw typeof w.render=="function"?Error(i(188)):(w=Object.keys(w).join(","),Error(i(268,w)));return w=G(S),w===null?null:w.stateNode}function Gg(w,S){if(w=w.memoizedState,w!==null&&w.dehydrated!==null){var F=w.retryLane;w.retryLane=F!==0&&F<S?F:S}}function rf(w,S){Gg(w,S),(w=w.alternate)&&Gg(w,S)}function X3(w){return w=G(w),w===null?null:w.stateNode}function vw(){return null}return r.attemptContinuousHydration=function(w){if(w.tag===13){var S=wl(w,134217728);if(S!==null){var F=hs();hi(S,w,134217728,F)}rf(w,134217728)}},r.attemptDiscreteHydration=function(w){if(w.tag===13){var S=wl(w,1);if(S!==null){var F=hs();hi(S,w,1,F)}rf(w,1)}},r.attemptHydrationAtCurrentPriority=function(w){if(w.tag===13){var S=wa(w),F=wl(w,S);if(F!==null){var U=hs();hi(F,w,S,U)}rf(w,S)}},r.attemptSynchronousHydration=function(w){switch(w.tag){case 3:var S=w.stateNode;if(S.current.memoizedState.isDehydrated){var F=yt(S.pendingLanes);F!==0&&(An(S,F|1),mi(S,xn()),(fn&6)===0&&(Kn(),Ga()))}break;case 13:ux(function(){var U=wl(w,1);if(U!==null){var Y=hs();hi(U,w,1,Y)}}),rf(w,1)}},r.batchedUpdates=function(w,S){var F=fn;fn|=1;try{return w(S)}finally{fn=F,fn===0&&(Kn(),A0&&Ga())}},r.createComponentSelector=function(w){return{$$typeof:Bc,value:w}},r.createContainer=function(w,S,F,U,Y,ae,Se){return xx(w,S,!1,null,F,U,Y,ae,Se)},r.createHasPseudoClassSelector=function(w){return{$$typeof:Oi,value:w}},r.createHydrationContainer=function(w,S,F,U,Y,ae,Se,st,Tt){return w=xx(F,U,!0,w,Y,ae,Se,st,Tt),w.context=Hg(null),F=w.current,U=hs(),Y=wa(F),ae=Dc(U,Y),ae.callback=S??null,Oc(F,ae,Y),w.current.lanes=Y,Et(w,Y,U),mi(w,U),w},r.createPortal=function(w,S,F){var U=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:U==null?null:""+U,children:w,containerInfo:S,implementation:F}},r.createRoleSelector=function(w){return{$$typeof:Kl,value:w}},r.createTestNameSelector=function(w){return{$$typeof:H0,value:w}},r.createTextSelector=function(w){return{$$typeof:Ch,value:w}},r.deferredUpdates=function(w){var S=ze,F=Fs.transition;try{return Fs.transition=null,ze=16,w()}finally{ze=S,Fs.transition=F}},r.discreteUpdates=function(w,S,F,U,Y){var ae=ze,Se=Fs.transition;try{return Fs.transition=null,ze=1,w(S,F,U,Y)}finally{ze=ae,Fs.transition=Se,fn===0&&Kn()}},r.findAllNodes=Jl,r.findBoundingRects=function(w,S){if(!At)throw Error(i(363));S=Jl(w,S),w=[];for(var F=0;F<S.length;F++)w.push(ct(S[F]));for(S=w.length-1;0<S;S--){F=w[S];for(var U=F.x,Y=U+F.width,ae=F.y,Se=ae+F.height,st=S-1;0<=st;st--)if(S!==st){var Tt=w[st],ar=Tt.x,Er=ar+Tt.width,ln=Tt.y,gr=ln+Tt.height;if(U>=ar&&ae>=ln&&Y<=Er&&Se<=gr){w.splice(S,1);break}else if(U!==ar||F.width!==Tt.width||gr<ae||ln>Se){if(!(ae!==ln||F.height!==Tt.height||Er<U||ar>Y)){ar>U&&(Tt.width+=ar-U,Tt.x=U),Er<Y&&(Tt.width=Y-ar),w.splice(S,1);break}}else{ln>ae&&(Tt.height+=ln-ae,Tt.y=ae),gr<Se&&(Tt.height=Se-ln),w.splice(S,1);break}}}return w},r.findHostInstance=jd,r.findHostInstanceWithNoPortals=function(w){return w=L(w),w=w!==null?se(w):null,w===null?null:w.stateNode},r.findHostInstanceWithWarning=function(w){return jd(w)},r.flushControlled=function(w){var S=fn;fn|=1;var F=Fs.transition,U=ze;try{Fs.transition=null,ze=1,w()}finally{ze=U,Fs.transition=F,fn=S,fn===0&&(Kn(),Ga())}},r.flushPassiveEffects=Uc,r.flushSync=ux,r.focusWithin=function(w,S){if(!At)throw Error(i(363));for(w=Yl(w),S=Xl(w,S),S=Array.from(S),w=0;w<S.length;){var F=S[w++];if(!Ut(F)){if(F.tag===5&&Vt(F.stateNode))return!0;for(F=F.child;F!==null;)S.push(F),F=F.sibling}}return!1},r.getCurrentUpdatePriority=function(){return ze},r.getFindAllNodesFailureDescription=function(w,S){if(!At)throw Error(i(363));var F=0,U=[];w=[Yl(w),0];for(var Y=0;Y<w.length;){var ae=w[Y++],Se=w[Y++],st=S[Se];if((ae.tag!==5||!Ut(ae))&&(Eh(ae,st)&&(U.push(Og(st)),Se++,Se>F&&(F=Se)),Se<S.length))for(ae=ae.child;ae!==null;)w.push(ae,Se),ae=ae.sibling}if(F<S.length){for(w=[];F<S.length;F++)w.push(Og(S[F]));return`findAllNodes was able to match part of the selector:
  `+(U.join(" > ")+`

No matching component was found for:
  `)+w.join(" > ")}return null},r.getPublicRootInstance=function(w){if(w=w.current,!w.child)return null;switch(w.child.tag){case 5:return re(w.child.stateNode);default:return w.child.stateNode}},r.injectIntoDevTools=function(w){if(w={bundleType:w.bundleType,version:w.version,rendererPackageName:w.rendererPackageName,rendererConfig:w.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:X3,findFiberByHostInstance:w.findFiberByHostInstance||vw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")w=!1;else{var S=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(S.isDisabled||!S.supportsFiber)w=!0;else{try{du=S.inject(w),eo=S}catch{}w=!!S.checkDCE}}return w},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(w,S,F,U){if(!At)throw Error(i(363));w=Jl(w,S);var Y=We(w,F,U).disconnect;return{disconnect:function(){Y()}}},r.registerMutableSourceForHydration=function(w,S){var F=S._getVersion;F=F(S._source),w.mutableSourceEagerHydrationData==null?w.mutableSourceEagerHydrationData=[S,F]:w.mutableSourceEagerHydrationData.push(S,F)},r.runWithPriority=function(w,S){var F=ze;try{return ze=w,S()}finally{ze=F}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(w,S,F,U){var Y=S.current,ae=hs(),Se=wa(Y);return F=Hg(F),S.context===null?S.context=F:S.pendingContext=F,S=Dc(ae,Se),S.payload={element:w},U=U===void 0?null:U,U!==null&&(S.callback=U),w=Oc(Y,S,Se),w!==null&&(hi(w,Y,Se,ae),hh(w,Y,Se)),Se},r}),JS}var dP;function qne(){return dP||(dP=1,XS.exports=Vne()),XS.exports}var Kne=qne();const Yne=Ec(Kne);var QS={exports:{}},ff={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fP;function Xne(){return fP||(fP=1,ff.ConcurrentRoot=1,ff.ContinuousEventPriority=4,ff.DefaultEventPriority=16,ff.DiscreteEventPriority=1,ff.IdleEventPriority=536870912,ff.LegacyRoot=0),ff}var hP;function Jne(){return hP||(hP=1,QS.exports=Xne()),QS.exports}var K$=Jne(),Qne=kn();const mP={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let gP=!1,pP=!1;const A7=".react-konva-event";let Y$=!1;function Zne(e){Y$=e}const ese=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,tse=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,rse={};function O_(e,t,r=rse){if(!gP&&"zIndex"in t&&(console.warn(tse),gP=!0),!pP&&t.draggable){var n=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;n&&!s&&(console.warn(ese),pP=!0)}for(var a in r)if(!mP[a]){var i=a.slice(0,2)==="on",o=r[a]!==t[a];if(i&&o){var l=a.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e.off(l,r[a])}var u=!t.hasOwnProperty(a);u&&e.setAttr(a,void 0)}var d=Y$||t._useStrictMode,f={},h=!1;const g={};for(var a in t)if(!mP[a]){var i=a.slice(0,2)==="on",x=r[a]!==t[a];if(i&&x){var l=a.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t[a]&&(g[l]=t[a])}!i&&(t[a]!==r[a]||d&&t[a]!==e.getAttr(a))&&(h=!0,f[a]=t[a])}h&&(e.setAttrs(f),Kf(e));for(var l in g)e.on(l+A7,g[l])}function Kf(e){if(!Qne.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var ZS=$T();const X$={},nse={};mv.Node.prototype._applyProps=O_;function sse(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),Kf(e)}function ase(e,t,r){let n=mv[e];n||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=mv.Group);const s={},a={};for(var i in t){var o=i.slice(0,2)==="on";o?a[i]=t[i]:s[i]=t[i]}const l=new n(s);return O_(l,a),l}function ise(e,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function ose(e,t,r){return!1}function lse(e){return e}function cse(){return null}function use(){return null}function dse(e,t,r,n){return nse}function fse(){}function hse(e){}function mse(e,t){return!1}function gse(){return X$}function pse(){return X$}const xse=setTimeout,yse=clearTimeout,vse=-1;function wse(e,t){return!1}const bse=!1,_se=!0,Sse=!0;function kse(e,t){t.parent===e?t.moveToTop():e.add(t),Kf(e)}function Tse(e,t){t.parent===e?t.moveToTop():e.add(t),Kf(e)}function J$(e,t,r){t._remove(),e.add(t),t.setZIndex(r.getZIndex()),Kf(e)}function Cse(e,t,r){J$(e,t,r)}function Ese(e,t){t.destroy(),t.off(A7),Kf(e)}function Nse(e,t){t.destroy(),t.off(A7),Kf(e)}function Ase(e,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function jse(e,t,r){}function Pse(e,t,r,n,s){O_(e,s,n)}function Mse(e){e.hide(),Kf(e)}function Fse(e){}function Dse(e,t){(t.visible==null||t.visible)&&e.show()}function Ose(e,t){}function Ise(e){}function Rse(){}const Lse=()=>K$.DefaultEventPriority,Bse=Object.freeze(Object.defineProperty({__proto__:null,appendChild:kse,appendChildToContainer:Tse,appendInitialChild:sse,cancelTimeout:yse,clearContainer:Ise,commitMount:jse,commitTextUpdate:Ase,commitUpdate:Pse,createInstance:ase,createTextInstance:ise,detachDeletedInstance:Rse,finalizeInitialChildren:ose,getChildHostContext:pse,getCurrentEventPriority:Lse,getPublicInstance:lse,getRootHostContext:gse,hideInstance:Mse,hideTextInstance:Fse,idlePriority:ZS.unstable_IdlePriority,insertBefore:J$,insertInContainerBefore:Cse,isPrimaryRenderer:bse,noTimeout:vse,now:ZS.unstable_now,prepareForCommit:cse,preparePortalMount:use,prepareUpdate:dse,removeChild:Ese,removeChildFromContainer:Nse,resetAfterCommit:fse,resetTextContent:hse,run:ZS.unstable_runWithPriority,scheduleTimeout:xse,shouldDeprioritizeSubtree:mse,shouldSetTextContent:wse,supportsMutation:Sse,unhideInstance:Dse,unhideTextInstance:Ose,warnsIfNotActing:_se},Symbol.toStringTag,{value:"Module"}));var $se=Object.defineProperty,zse=Object.defineProperties,Use=Object.getOwnPropertyDescriptors,xP=Object.getOwnPropertySymbols,Wse=Object.prototype.hasOwnProperty,Hse=Object.prototype.propertyIsEnumerable,yP=(e,t,r)=>t in e?$se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,vP=(e,t)=>{for(var r in t||(t={}))Wse.call(t,r)&&yP(e,r,t[r]);if(xP)for(var r of xP(t))Hse.call(t,r)&&yP(e,r,t[r]);return e},Gse=(e,t)=>zse(e,Use(t)),wP,bP;typeof window<"u"&&((wP=window.document)!=null&&wP.createElement||((bP=window.navigator)==null?void 0:bP.product)==="ReactNative")?_.useLayoutEffect:_.useEffect;function Q$(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=e.child;for(;n;){const s=Q$(n,t,r);if(s)return s;n=n.sibling}}function Z$(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const _P=console.error;console.error=function(){const e=[...arguments].join("");if(e?.startsWith("Warning:")&&e.includes("useContext")){console.error=_P;return}return _P.apply(this,arguments)};const j7=Z$(_.createContext(null));class ez extends _.Component{render(){return _.createElement(j7.Provider,{value:this._reactInternals},this.props.children)}}function Vse(){const e=_.useContext(j7);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=_.useId();return _.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const s=Q$(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}});if(s)return s}},[e,t])}function qse(){const e=Vse(),[t]=_.useState(()=>new Map);t.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const s=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;s&&s!==j7&&!t.has(s)&&t.set(s,_.useContext(Z$(s)))}r=r.return}return t}function tz(){const e=qse();return _.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>_.createElement(t,null,_.createElement(r.Provider,Gse(vP({},n),{value:e.get(r)}))),t=>_.createElement(ez,vP({},t))),[e])}function Kse(e){const t=Gs.useRef({});return Gs.useLayoutEffect(()=>{t.current=e}),Gs.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Yse=e=>{const t=Gs.useRef(null),r=Gs.useRef(null),n=Gs.useRef(null),s=Kse(e),a=tz(),i=o=>{const{forwardedRef:l}=e;l&&(typeof l=="function"?l(o):l.current=o)};return Gs.useLayoutEffect(()=>(r.current=new mv.Stage({width:e.width,height:e.height,container:t.current}),i(r.current),n.current=xp.createContainer(r.current,K$.LegacyRoot,!1,null),xp.updateContainer(Gs.createElement(a,{},e.children),n.current),()=>{mv.isBrowser&&(i(null),xp.updateContainer(null,n.current,null),r.current.destroy())}),[]),Gs.useLayoutEffect(()=>{i(r.current),O_(r.current,e,s),xp.updateContainer(Gs.createElement(a,{},e.children),n.current,null)}),Gs.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},ym="Layer",Xse="FastLayer",eu="Group",Jse="Label",Si="Rect",Nf="Circle",Qse="Ellipse",Zse="Wedge",Wi="Line",eae="Sprite",rz="Image",Bu="Text",tae="TextPath",rae="Star",nae="Ring",sae="Arc",aae="Tag",iae="Path",oae="RegularPolygon",Yk="Arrow",lae="Shape",nz="Transformer",cae="18.2.13",xp=Yne(Bse);xp.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Gs.version,rendererPackageName:"react-konva"});const vm=Gs.forwardRef((e,t)=>Gs.createElement(ez,{},Gs.createElement(Yse,{...e,forwardedRef:t}))),uae=Zne,dae=Object.freeze(Object.defineProperty({__proto__:null,Arc:sae,Arrow:Yk,Circle:Nf,Ellipse:Qse,FastLayer:Xse,Group:eu,Image:rz,KonvaRenderer:xp,Label:Jse,Layer:ym,Line:Wi,Path:iae,Rect:Si,RegularPolygon:oae,Ring:nae,Shape:lae,Sprite:eae,Stage:vm,Star:rae,Tag:aae,Text:Bu,TextPath:tae,Transformer:nz,Wedge:Zse,useContextBridge:tz,useStrictMode:uae,version:cae},Symbol.toStringTag,{value:"Module"})),$t=({children:e,hover:t=!0,className:r="",paddingClass:n="p-6",...s})=>{const a=`
    bg-white rounded-xl shadow-md border border-gray-200 ${n}
    ${t?"hover:shadow-lg hover:-translate-y-1 transition-all duration-200":""}
    ${r}
  `;return c.jsx(gt.div,{className:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},...s,children:e})},fae=({children:e,className:t=""})=>c.jsx("div",{className:`border-b border-gray-200 pb-4 mb-4 ${t}`,children:e}),hae=({children:e,className:t=""})=>c.jsx("h3",{className:`text-xl font-semibold text-gray-800 ${t}`,children:e}),mae=({children:e,className:t=""})=>c.jsx("div",{className:`py-4 ${t}`,children:e}),gae=({children:e,className:t=""})=>c.jsx("div",{className:`border-t border-gray-200 pt-4 mt-4 ${t}`,children:e});$t.Header=fae;$t.Title=hae;$t.Body=mae;$t.Footer=gae;const Ca=({isOpen:e=!1,onClose:t,title:r="",children:n,size:s="medium",showCloseButton:a=!0,closeOnBackdropClick:i=!0,className:o="",...l})=>{const u=f=>{i&&f.target===f.currentTarget&&t()};Gs.useEffect(()=>{const f=x=>{x.key==="Escape"&&t()},h=window;h.__modalOpenCount||(h.__modalOpenCount=0);let g;return e&&(document.addEventListener("keydown",f),g=document.body.style.overflow,h.__modalOpenCount===0&&(document.body.style.overflow="hidden"),h.__modalOpenCount+=1),()=>{document.removeEventListener("keydown",f),h.__modalOpenCount&&h.__modalOpenCount>0&&(h.__modalOpenCount-=1),h.__modalOpenCount===0&&(g!==void 0?document.body.style.overflow=g||"":document.body.style.overflow="")}},[e,t]);const d={small:"max-w-md",medium:"max-w-lg",large:"max-w-4xl"};return e?c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:u,role:"dialog","aria-modal":"true","aria-label":r,...l,children:c.jsxs("div",{className:`
          bg-white rounded-xl shadow-md border border-gray-200 p-8
          hover:shadow-lg hover:-translate-y-1 transition-all duration-200
          w-full ${d[s]} mx-auto
          ${o}
        `,onClick:f=>f.stopPropagation(),children:[(r||a)&&c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r&&c.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:r}),a&&c.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-all duration-200 rounded-full p-2 text-2xl font-bold leading-none","aria-label":"Close modal",children:""})]}),c.jsx("div",{className:"space-y-6",children:n})]})}):null},pae=e=>{const[t,r]=_.useState({width:800,height:600}),n=_.useRef(null),s=_.useCallback(()=>{if(e.current){e.current.getBoundingClientRect();const a=Math.min(1200,window.innerWidth*.8),i=Math.min(800,window.innerHeight*.6),o=4/3;let l=a,u=l/o;u>i&&(u=i,l=u*o),r({width:l,height:u})}},[e]);return _.useEffect(()=>(s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[s]),{canvasSize:t,stageRef:n,updateCanvasSize:s}},xae=e=>{const[t,r]=_.useState({width:800,height:600}),[n,s]=_.useState({}),a=_.useCallback(()=>{if(e.current){const o=e.current.getBoundingClientRect();r({width:o.width,height:Math.max(400,o.height)})}},[e]),i=_.useCallback(o=>o<480?{stageHeight:300,blockMinSize:50,fontSize:12,padding:10,touchTargetSize:44,arrowThickness:4}:o<768?{stageHeight:400,blockMinSize:60,fontSize:14,padding:15,touchTargetSize:44,arrowThickness:4}:o<1024?{stageHeight:500,blockMinSize:70,fontSize:16,padding:20,touchTargetSize:40,arrowThickness:3}:{stageHeight:600,blockMinSize:80,fontSize:18,padding:25,touchTargetSize:32,arrowThickness:2},[]);return _.useEffect(()=>{const o=i(t.width);s(o)},[t.width,i]),_.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[a]),{containerSize:t,responsiveSettings:n,updateSize:a}},SP={convertToOriginal:(e,t,r)=>r?{x:Number(((e-r.x)/r.scale).toFixed(4)),y:Number(((t-r.y)/r.scale).toFixed(4))}:{x:e,y:t},convertToCanvas:(e,t,r)=>r?{x:Number((r.x+e*r.scale).toFixed(4)),y:Number((r.y+t*r.scale).toFixed(4))}:{x:e,y:t},isPointInImage:(e,t)=>t?e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height:!1,calculateImageScale:(e,t)=>{if(!e||!t)return 1;const r=40,n=t.width-r,s=t.height-r;return Math.min(n/e.width,s/e.height)},calculateImageInfo:(e,t)=>{if(!e||!t)return null;const r=40,n=t.width-r,s=t.height-r,a=Math.min(n/e.width,s/e.height),i=e.width*a,o=e.height*a,l=(t.width-i)/2,u=(t.height-o)/2;return{x:l,y:u,width:i,height:o,scale:a,originalWidth:e.width,originalHeight:e.height}}},yae=e=>{const t=_.useCallback((n,s)=>SP.convertToOriginal(n,s,e),[e]),r=_.useCallback((n,s)=>SP.convertToCanvas(n,s,e),[e]);return{convertToOriginal:t,convertToCanvas:r}},my={create:(e,t,r,n,s)=>({id:s,x:e-r/2,y:t-n/2,width:Math.max(r,30),height:Math.max(n,10),fill:"rgba(0, 123, 255, 0.15)",stroke:"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),validate:e=>e.width>0&&e.height>0,findAtPosition:(e,t,r)=>e.find(n=>t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height),generateId:()=>`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},ap={create:(e,t,r,n,s,a,i)=>({id:i,startX:e,startY:t,endX:r,endY:n,startBlock:s,endBlock:a,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,pointerLength:10,pointerWidth:10}),snapToNearestBlock:(e,t,r,n=60)=>{let s=null,a=1/0;for(const i of r){const o=i.x+i.width/2,l=i.y+i.height/2,u=Math.sqrt(Math.pow(e-o,2)+Math.pow(t-l,2));u<=n&&u<a&&(a=u,s=i)}return s?{x:s.x+s.width/2,y:s.y+s.height/2,blockId:s.id,block:s,distance:a}:null},validate:(e,t,r,n,s)=>ap.snapToNearestBlock(e,t,s)!==null,generateId:()=>`arrow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},e5={create:(e,t,r)=>({id:r,blockId:e,word:t}),update:(e,t,r)=>e.map(n=>n.blockId===t?{...n,word:r}:n),delete:(e,t)=>e.filter(r=>r.blockId!==t),generateId:e=>`word_${e}`,validate:e=>e&&e.trim().length>0},vae=async e=>{const t=[];if(e.size>512e3){const n=(e.size/1024).toFixed(1);t.push(`Image is too large (${n}KB). Maximum allowed size is 500KB. Please compress or resize your image.`)}return new Promise(n=>{const s=new Image;s.onload=()=>{(s.width>4e3||s.height>4e3)&&t.push(`Image is too large (${s.width}x${s.height} pixels). Maximum allowed dimensions are 4000x4000 pixels. Please resize your image.`),n({valid:t.length===0,errors:t,dimensions:{width:s.width,height:s.height}})},s.onerror=()=>{t.push("Invalid image file"),n({valid:!1,errors:t})},s.src=URL.createObjectURL(e)})},wae=(e,t=500)=>new Promise(r=>{const n=document.createElement("canvas"),s=n.getContext("2d"),a=new Image;a.onload=()=>{let{width:i,height:o}=a;const l=2e3;if(i>l||o>l){const f=Math.min(l/i,l/o);i*=f,o*=f}n.width=i,n.height=o,s.drawImage(a,0,0,i,o);let u=.8;const d=()=>{n.toBlob(f=>{f.size<=t*1024||u<=.1?r(f):(u-=.1,d())},"image/jpeg",u)};d()},a.onerror=()=>{r(e)},a.src=URL.createObjectURL(e)}),bae=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=s=>t(s.target.result),n.onerror=s=>r(s),n.readAsDataURL(e)}),_ae=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return{blockMinSize:e?60:40,arrowThickness:e?4:2,touchTargetSize:e?44:32,doubleTapDelay:e?300:200,isMobile:e}},Sae={testData:{blocks:[],words:[],arrows:[],imageUrl:null},canvas:{size:{width:800,height:600},image:null,imageInfo:null,selectedTool:"edit"},creation:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null},ui:{selectedBlock:null,showWordPanel:!1,isLoading:!1,error:null,showImageSizeModal:!1,imageSizeError:null}},kae=(e,t)=>{switch(t.type){case"SET_CANVAS_SIZE":return{...e,canvas:{...e.canvas,size:t.payload}};case"SET_IMAGE":return{...e,canvas:{...e.canvas,image:t.payload}};case"SET_IMAGE_INFO":return{...e,canvas:{...e.canvas,imageInfo:t.payload}};case"SET_SELECTED_TOOL":return{...e,canvas:{...e.canvas,selectedTool:t.payload}};case"ADD_BLOCK":return{...e,testData:{...e.testData,blocks:[...e.testData.blocks,t.payload]}};case"ADD_WORD":return{...e,testData:{...e.testData,words:[...e.testData.words,t.payload]}};case"ADD_ARROW":return{...e,testData:{...e.testData,arrows:[...e.testData.arrows,t.payload]}};case"UPDATE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.map(r=>r.id===t.payload.id?{...r,...t.payload.updates}:r)}};case"DELETE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.filter(r=>r.id!==t.payload),words:e.testData.words.filter(r=>r.blockId!==t.payload),arrows:e.testData.arrows.filter(r=>r.startBlock!==t.payload&&r.endBlock!==t.payload)}};case"UPDATE_WORDS":return{...e,testData:{...e.testData,words:t.payload}};case"SET_CREATION_STATE":return{...e,creation:{...e.creation,...t.payload}};case"SET_UI_STATE":return{...e,ui:{...e.ui,...t.payload}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:t.payload}};case"SET_ERROR":return{...e,ui:{...e.ui,error:t.payload}};case"SHOW_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!0,imageSizeError:t.payload}};case"HIDE_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!1,imageSizeError:null}};case"RESET_TESTDATA":return{...e,testData:{blocks:[],words:[],arrows:[],imageUrl:e.testData.imageUrl}};default:return e}},Tae=({testName:e="",showQuestionCount:t=!0,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const[o,l]=_.useReducer(kae,Sae),{showNotification:u}=ai(),{makeAuthenticatedRequest:d}=$l(),{user:f}=Ps(),h=_.useRef(null),g=_.useRef(null),x=_.useRef(null),y=_.useRef({}),v=_.useRef({}),{canvasSize:T,stageRef:k}=pae(h),{containerSize:b,responsiveSettings:E}=xae(h),[N,P]=_.useState(null);_.useEffect(()=>{if(!o.canvas.image||!h.current)return;const z=h.current?.clientWidth||800,I=h.current?.clientHeight||600,W=z/o.canvas.image.width,K=I/o.canvas.image.height,ee=Math.min(W,K,1),oe=o.canvas.image.width*ee,Z=o.canvas.image.height*ee,le=(z-oe)/2,ue=(I-Z)/2;P({x:le,y:ue,width:oe,height:Z,scaleX:ee,scaleY:ee,scale:ee,image:o.canvas.image})},[o.canvas.image,h.current?.clientWidth,h.current?.clientHeight]);const{convertToOriginal:M}=yae(N);_.useEffect(()=>{l({type:"SET_CANVAS_SIZE",payload:T})},[T]),_.useEffect(()=>{N&&l({type:"SET_IMAGE_INFO",payload:N})},[N]),_.useEffect(()=>{const z=x.current;if(!z)return;const I=o.ui.selectedBlock?.id?y.current[o.ui.selectedBlock.id]:null;I?(z.nodes([I]),z.getLayer()?.batchDraw()):(z.nodes([]),z.getLayer()?.batchDraw())},[o.ui.selectedBlock]);const j=_.useCallback(()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:null}}),l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null}}),l({type:"RESET_TESTDATA"}),l({type:"SET_ERROR",payload:null})},[]),A=_.useCallback(async z=>{const I=z.target.files[0];if(!I){u("Please select a file","error");return}try{l({type:"SET_LOADING",payload:!0});const W=await vae(I);if(!W.valid){l({type:"SHOW_IMAGE_SIZE_MODAL",payload:{errors:W.errors,fileSize:(I.size/1024).toFixed(1),dimensions:W.dimensions}});return}let K=I;if(I.size>500*1024){u("Image is large, compressing to meet size requirements...","info");try{K=await wae(I,500);const Z=(I.size/1024).toFixed(1),le=(K.size/1024).toFixed(1);u(`Image compressed from ${Z}KB to ${le}KB`,"success")}catch{u("Failed to compress image. Please try a smaller image.","error");return}}const ee=await bae(K),oe=new Image;oe.crossOrigin="anonymous",oe.onload=()=>{l({type:"SET_IMAGE",payload:oe}),l({type:"SET_UI_STATE",payload:{imageUrl:ee}}),u("Image uploaded successfully!","success")},oe.onerror=()=>{u("Failed to load image","error")},oe.src=ee}catch(W){console.error("Image upload error:",W),u("Error processing image","error")}finally{l({type:"SET_LOADING",payload:!1})}},[u]),D=_.useCallback(z=>{const I=k.current;if(!I)return;const W=I.getPointerPosition();if(W){if(o.canvas.selectedTool==="create"){const K=my.findAtPosition(o.testData.blocks,W.x,W.y);if(K){l({type:"SET_UI_STATE",payload:{selectedBlock:K}});return}l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!0,blockCreationStart:{x:W.x,y:W.y}}})}else if(o.canvas.selectedTool==="edit"){const K=my.findAtPosition(o.testData.blocks,W.x,W.y);l(K?{type:"SET_UI_STATE",payload:{selectedBlock:K}}:{type:"SET_UI_STATE",payload:{selectedBlock:null}})}else if(o.canvas.selectedTool==="arrow"){const K=z.target===I,ee=my.findAtPosition(o.testData.blocks,W.x,W.y);(K||!ee)&&l({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!0,arrowStart:{x:W.x,y:W.y}}})}}},[o.canvas.selectedTool,N,o.testData.blocks]),L=_.useCallback(z=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const I=k.current;if(!I)return;const W=I.getPointerPosition();if(!W)return;const K=Math.abs(W.x-o.creation.blockCreationStart.x),ee=Math.abs(W.y-o.creation.blockCreationStart.y),oe=10,Z=Math.max(K,oe),le=Math.max(ee,oe);l({type:"SET_CREATION_STATE",payload:{previewBlock:{x:Math.min(W.x,o.creation.blockCreationStart.x),y:Math.min(W.y,o.creation.blockCreationStart.y),width:Z,height:le,fill:"rgba(0, 123, 255, 0.3)",stroke:"#007bff",strokeWidth:2,dash:[5,5],opacity:.7}}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const I=k.current;if(!I)return;const W=I.getPointerPosition();if(!W)return;l({type:"SET_CREATION_STATE",payload:{previewArrow:{startX:o.creation.arrowStart.x,startY:o.creation.arrowStart.y,endX:W.x,endY:W.y,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,dash:[5,5],opacity:.7}}})}},[o.creation]),G=_.useCallback(z=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const I=k.current;if(!I)return;const W=I.getPointerPosition();if(!W)return;const K=Math.abs(W.x-o.creation.blockCreationStart.x),ee=Math.abs(W.y-o.creation.blockCreationStart.y),oe=10,Z=Math.max(K,oe),le=Math.max(ee,oe),ue=Math.min(W.x,o.creation.blockCreationStart.x)+Z/2,de=Math.min(W.y,o.creation.blockCreationStart.y)+le/2,Te=my.generateId(),ie=my.create(ue,de,Z,le,Te),pe=e5.create(Te,`Word ${o.testData.blocks.length+1}`,e5.generateId(Te));l({type:"ADD_BLOCK",payload:ie}),l({type:"ADD_WORD",payload:pe}),l({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,blockCreationStart:null,previewBlock:null}}),o.testData.blocks.length===0&&l({type:"SET_UI_STATE",payload:{showWordPanel:!0}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const I=k.current;if(!I)return;const W=I.getPointerPosition();if(!W)return;if(ap.validate(o.creation.arrowStart.x,o.creation.arrowStart.y,W.x,W.y,o.testData.blocks)){const K=ap.snapToNearestBlock(o.creation.arrowStart.x,o.creation.arrowStart.y,o.testData.blocks),ee=ap.snapToNearestBlock(W.x,W.y,o.testData.blocks),oe=K?K.x:o.creation.arrowStart.x,Z=K?K.y:o.creation.arrowStart.y,le=ee?ee.x:W.x,ue=ee?ee.y:W.y,de=ap.generateId(),Te=_ae(),ie=ap.create(oe,Z,le,ue,K?K.blockId:null,ee?ee.blockId:null,de,{strokeWidth:Te.arrowThickness,isMobile:Te.isMobile});l({type:"ADD_ARROW",payload:ie}),u("Arrow created successfully!","success")}else u("Arrow must start near a block!","error");l({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!1,arrowStart:null,previewArrow:null}})}},[o.creation,o.testData.blocks,u]),X=_.useCallback(z=>{z.evt.preventDefault(),D(z)},[D]),se=_.useCallback(z=>{z.evt.preventDefault(),L(z)},[L]),Q=_.useCallback(z=>{z.evt.preventDefault(),G(z)},[G]),re=_.useCallback(async()=>{console.log(" [MatchingTestCreator] handleSaveTest clicked");const z=B();if(Object.keys(z).length>0){console.warn(" [MatchingTestCreator] Validation errors:",z),u("Please fix validation errors before saving","error");return}try{console.log(" [MatchingTestCreator] Preparing data to save...",{blocks:o.testData.blocks.length,words:o.testData.words.length,arrows:o.testData.arrows.length,imageUrl:o.ui.imageUrl?"present":"missing"}),l({type:"SET_LOADING",payload:!0});let I=o.ui.imageUrl;if(o.ui.imageUrl&&o.ui.imageUrl.startsWith("data:")){const K=await d("/.netlify/functions/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:o.ui.imageUrl,folder:"matching_tests"})}),ee=await K.json();if(K.ok&&ee.success&&ee.url)I=ee.url;else throw new Error(ee.message||"Upload failed")}const W=o.testData.blocks.map((K,ee)=>{let oe;if(N){const ue=M(K.x,K.y),de=M(K.x+K.width,K.y+K.height);oe={x:ue.x,y:ue.y,width:Number((de.x-ue.x).toFixed(4)),height:Number((de.y-ue.y).toFixed(4))}}else oe={x:Number(K.x.toFixed(4)),y:Number(K.y.toFixed(4)),width:Number(K.width.toFixed(4)),height:Number(K.height.toFixed(4))};const Z=o.testData.words.find(ue=>ue.blockId===K.id),le=o.testData.arrows.find(ue=>ue.startBlock===K.id);return{question_id:ee+1,word:Z?.word||`Word ${ee+1}`,block_coordinates:oe,has_arrow:!!le,arrow:le&&N?(()=>{const ue=M(le.startX,le.startY),de=M(le.endX,le.endY),Te=ue.x/N.originalWidth*100,ie=ue.y/N.originalHeight*100,pe=de.x/N.originalWidth*100,Ae=de.y/N.originalHeight*100;return{start_x:Number(ue.x.toFixed(4)),start_y:Number(ue.y.toFixed(4)),end_x:Number(de.x.toFixed(4)),end_y:Number(de.y.toFixed(4)),rel_start_x:Number(Te.toFixed(4)),rel_start_y:Number(ie.toFixed(4)),rel_end_x:Number(pe.toFixed(4)),rel_end_y:Number(Ae.toFixed(4)),image_width:N.originalWidth,image_height:N.originalHeight,style:le.style||{color:"#dc3545",thickness:3}}})():null}});r&&(console.log(" [MatchingTestCreator] Calling onTestSaved with processed data"),r({success:!0,message:"Test data prepared for assignment",blocks:o.testData.blocks,words:o.testData.words,arrows:o.testData.arrows,imageUrl:I,processedQuestions:W}))}catch(I){console.error("Save error:",I),u(`Error saving test: ${I.message}`,"error")}finally{l({type:"SET_LOADING",payload:!1})}},[o.testData,o.ui.imageUrl,N,M,d,r,u,e,f]),B=_.useCallback(()=>{const z={};return e.trim()||(z.testName="Test name is required"),o.testData.blocks.length===0&&(z.blocks="At least one block is required"),z},[e,o.testData.blocks.length]),V=()=>c.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border-b",children:[c.jsx(ot,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"create"}),variant:o.canvas.selectedTool==="create"?"primary":"secondary",size:"sm",children:" Create Blocks"}),c.jsx(ot,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"edit"}),variant:o.canvas.selectedTool==="edit"?"primary":"secondary",size:"sm",children:" Edit Blocks"}),c.jsx(ot,{onClick:()=>l({type:"SET_SELECTED_TOOL",payload:"arrow"}),variant:o.canvas.selectedTool==="arrow"?"primary":"secondary",size:"sm",children:" Draw Arrows"}),c.jsx(ot,{onClick:j,variant:"secondary",size:"sm",children:" Reset"}),c.jsx(ot,{onClick:()=>g.current?.click(),variant:"secondary",size:"sm",children:" Upload Image"}),c.jsx("div",{className:"text-xs text-gray-500 text-center col-span-full",children:"Max size: 500KB  Max dimensions: 4000x4000px"})]}),R=()=>c.jsx(vm,{width:b.width,height:E.stageHeight,ref:k,onMouseDown:D,onMouseMove:L,onMouseUp:G,onTouchStart:X,onTouchMove:se,onTouchEnd:Q,className:o.canvas.selectedTool==="arrow"||o.canvas.selectedTool==="create"?"cursor-crosshair":"cursor-default",children:c.jsxs(ym,{children:[o.canvas.image&&N&&c.jsx(rz,{image:o.canvas.image,x:N.x,y:N.y,width:N.width,height:N.height}),o.testData.blocks.map(z=>c.jsxs(eu,{ref:I=>{I&&(v.current[z.id]=I)},draggable:o.canvas.selectedTool==="edit",x:z.x,y:z.y,onMouseEnter:I=>{const W=I.target.getStage()?.container();W&&(W.style.cursor=o.ui.selectedBlock?.id===z.id?"nwse-resize":"move")},onMouseLeave:I=>{const W=I.target.getStage()?.container();W&&(W.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onDragStart:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:z}})},onDragEnd:I=>{const{x:W,y:K}=I.target.position();l({type:"UPDATE_BLOCK",payload:{id:z.id,updates:{x:W,y:K}}})},onClick:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:z}})},onTap:()=>{l({type:"SET_UI_STATE",payload:{selectedBlock:z}})},children:[c.jsx(Si,{ref:I=>{I&&(y.current[z.id]=I)},width:z.width,height:z.height,fill:z.fill,stroke:z.stroke,strokeWidth:z.strokeWidth,cornerRadius:z.cornerRadius,shadowColor:z.shadowColor,shadowBlur:z.shadowBlur,shadowOffset:z.shadowOffset,shadowOpacity:z.shadowOpacity,draggable:o.canvas.selectedTool==="edit",onDragEnd:I=>{const{x:W,y:K}=I.target.getParent().position();l({type:"UPDATE_BLOCK",payload:{id:z.id,updates:{x:W,y:K}}})},onMouseEnter:I=>{const W=I.target.getStage()?.container();W&&(W.style.cursor=o.ui.selectedBlock?.id===z.id?"nwse-resize":"move")},onMouseLeave:I=>{const W=I.target.getStage()?.container();W&&(W.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onTransformEnd:I=>{const W=y.current[z.id];if(!W)return;const K=Math.max(10,W.width()*W.scaleX()),ee=Math.max(10,W.height()*W.scaleY());W.scaleX(1),W.scaleY(1),l({type:"UPDATE_BLOCK",payload:{id:z.id,updates:{width:K,height:ee}}})}}),c.jsx(Bu,{x:2,y:2,text:`${o.testData.blocks.indexOf(z)+1}`,fontSize:Math.min(E.fontSize,Math.max(8,z.width/4)),fontFamily:"Arial",fill:"#333",fontStyle:"bold",listening:!1})]},z.id)),c.jsx(nz,{ref:x,rotateEnabled:!1,flipEnabled:!1,boundBoxFunc:(z,I)=>({...I,width:Math.max(I.width,10),height:Math.max(I.height,10)})}),o.testData.arrows.map(z=>c.jsx(Yk,{points:[z.startX,z.startY,z.endX,z.endY],stroke:z.stroke,fill:z.fill,strokeWidth:z.strokeWidth||E.arrowThickness,pointerLength:z.pointerLength,pointerWidth:z.pointerWidth},z.id)),o.creation.previewBlock&&c.jsx(Si,{x:o.creation.previewBlock.x,y:o.creation.previewBlock.y,width:o.creation.previewBlock.width,height:o.creation.previewBlock.height,fill:o.creation.previewBlock.fill,stroke:o.creation.previewBlock.stroke,strokeWidth:o.creation.previewBlock.strokeWidth,dash:o.creation.previewBlock.dash,opacity:o.creation.previewBlock.opacity}),o.creation.previewArrow&&c.jsx(Yk,{points:[o.creation.previewArrow.startX,o.creation.previewArrow.startY,o.creation.previewArrow.endX,o.creation.previewArrow.endY],stroke:o.creation.previewArrow.stroke,fill:o.creation.previewArrow.fill,strokeWidth:o.creation.previewArrow.strokeWidth,dash:o.creation.previewArrow.dash,opacity:o.creation.previewArrow.opacity})]})}),H=_.useMemo(()=>o.testData.blocks.length===0?null:c.jsxs("div",{className:"word-panel bg-gray-50 border-t border-gray-200 p-4 w-full",style:{height:"min(400px, 40vh)",overflowY:"auto"},children:[c.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Words (Auto-created with blocks)"}),c.jsx("div",{className:"space-y-2",children:o.testData.words.map(z=>{const I=o.testData.blocks.find(W=>W.id===z.blockId);return c.jsxs("div",{className:"p-2 bg-white rounded border",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsxs("span",{className:"text-xs text-gray-500",children:["Block ",o.testData.blocks.indexOf(I)+1]}),c.jsx("button",{onClick:()=>l({type:"DELETE_BLOCK",payload:I.id}),className:"text-red-500 hover:text-red-700 text-xs",children:""})]}),c.jsx("input",{type:"text",value:z.word,onChange:W=>{const K=e5.update(o.testData.words,z.blockId,W.target.value);l({type:"UPDATE_WORDS",payload:K})},className:"w-full text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter word text"})]},z.blockId)})})]}),[o.testData.words,o.testData.blocks]);return c.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col h-screen bg-gray-100",children:[c.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsx("div",{children:c.jsx("div",{className:"mt-2 text-sm text-gray-600",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Test Name:"})," ",e||"Untitled Test"]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Questions:"})," ",o.testData.blocks.length," (auto-generated from blocks)"]})]})})})})}),V(),c.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[c.jsx("div",{ref:h,className:"bg-white border overflow-auto",style:{minHeight:`${E.stageHeight}px`,maxHeight:"calc(100vh - 200px)",height:"auto",padding:`${E.padding}px`},children:R()}),H]}),c.jsx("div",{className:"bg-white border-t p-4",children:c.jsx("div",{className:"flex justify-center",children:c.jsx(ot,{onClick:re,disabled:a||o.ui.isLoading,variant:"primary",size:"lg",children:a||o.ui.isLoading?c.jsx(un,{size:"sm"}):"Save Test"})})}),c.jsx("input",{ref:g,type:"file",accept:"image/*,application/pdf",onChange:A,className:"hidden"}),c.jsx(Ca,{isOpen:o.ui.showImageSizeModal,onClose:()=>l({type:"HIDE_IMAGE_SIZE_MODAL"}),title:" Image Too Large",size:"medium",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("span",{className:"text-red-600 text-2xl mr-2",children:""}),c.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Image Size Issues"})]}),c.jsx("div",{className:"text-red-700",children:o.ui.imageSizeError?.errors.map((z,I)=>c.jsxs("div",{className:"mb-2",children:[" ",z]},I))})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Current Image Details:"}),c.jsxs("div",{className:"text-blue-700 space-y-1",children:[c.jsxs("div",{children:[" File size: ",o.ui.imageSizeError?.fileSize,"KB"]}),o.ui.imageSizeError?.dimensions&&c.jsxs("div",{children:[" Dimensions: ",o.ui.imageSizeError.dimensions.width,"  ",o.ui.imageSizeError.dimensions.height," pixels"]})]})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:" Requirements:"}),c.jsxs("div",{className:"text-green-700 space-y-1",children:[c.jsx("div",{children:" Maximum file size: 500KB"}),c.jsx("div",{children:" Maximum dimensions: 4000  4000 pixels"}),c.jsx("div",{children:" Supported formats: All image formats (JPEG, PNG, WebP, etc.)"})]})]}),c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:" How to Fix:"}),c.jsxs("div",{className:"text-yellow-700 space-y-1",children:[c.jsx("div",{children:" Use an image editor to resize your image"}),c.jsx("div",{children:" Compress the image using online tools"}),c.jsx("div",{children:" Try a different image with smaller dimensions"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx(ot,{onClick:()=>l({type:"HIDE_IMAGE_SIZE_MODAL"}),variant:"secondary",children:"Close"}),c.jsx(ot,{onClick:()=>{l({type:"HIDE_IMAGE_SIZE_MODAL"}),g.current?.click()},variant:"primary",children:"Try Another Image"})]})]})})]})},o1=_.createContext(null);function Cae(e,t){return{getTheme:function(){return t??null}}}function ed(){const e=_.useContext(o1);return e==null&&(function(t,...r){const n=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of r)s.append("v",a);throw n.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),e}function Jt(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const uu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Eae=uu&&"documentMode"in document?document.documentMode:null,Ru=uu&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),wm=uu&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),i4=!(!uu||!("InputEvent"in window)||Eae)&&"getTargetRanges"in new window.InputEvent("input"),gv=uu&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Bp=uu&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Nae=uu&&/Android/.test(navigator.userAgent),sz=uu&&/^(?=.*Chrome).*/i.test(navigator.userAgent),kP=uu&&Nae&&sz,o4=uu&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!sz;function az(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const Aae=1,jae=3,Pae=9,Mae=11,bm=0,iz=1,$p=2,Fae=0,Dae=1,Oae=2,l4=4,c4=8,P7=128,Iae=1792|(112|(3|l4|c4)|P7),M7=1,F7=2,D7=3,O7=4,I7=5,R7=6,I_=gv||Bp||o4?"":"",i0=`

`,Rae=wm?"":I_,_m={bold:1,capitalize:1024,code:16,highlight:P7,italic:2,lowercase:256,strikethrough:l4,subscript:32,superscript:64,underline:c4,uppercase:512},Lae={directionless:1,unmergeable:2},TP={center:F7,end:R7,justify:O7,left:M7,right:D7,start:I7},Bae={[F7]:"center",[R7]:"end",[O7]:"justify",[M7]:"left",[D7]:"right",[I7]:"start"},$ae={normal:0,segmented:2,token:1},zae={[Fae]:"normal",[Oae]:"segmented",[Dae]:"token"},CP="$config";function oz(e,t,r,n,s,a){let i=e.getFirstChild();for(;i!==null;){const o=i.__key;i.__parent===t&&(jt(i)&&oz(i,o,r,n,s,a),r.has(o)||a.delete(o),s.push(o)),i=i.getNextSibling()}}const Uae=100;let Xk=!1,L7=0;function Wae(e){L7=e.timeStamp}function t5(e,t,r){const n=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||n&&e.previousSibling===s)||n&&V_(e,r)!==void 0}function Hae(e,t,r){const n=ou(vc(r));let s=null,a=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,a=n.focusOffset);const i=e.nodeValue;i!==null&&sC(t,i,s,a,!1)}function Gae(e,t,r){if(Gt(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return p0(t)&&r.isAttached()}function Vae(e,t,r,n){for(let s=e;s&&!Vie(s);s=c2(s)){const a=V_(s,t);if(a!==void 0){const i=Ba(a,r);if(i)return Un(i)||!Es(s)?void 0:[s,i]}else if(s===n)return[n,nU(r)]}}function lz(e,t,r){Xk=!0;const n=performance.now()-L7>Uae;try{El(e,(()=>{const s=dr()||(function(h){return h.getEditorState().read((()=>{const g=dr();return g!==null?g.clone():null}))})(e),a=new Map,i=e.getRootElement(),o=e._editorState,l=e._blockCursorElement;let u=!1,d="";for(let h=0;h<t.length;h++){const g=t[h],x=g.type,y=g.target,v=Vae(y,e,o,i);if(!v)continue;const[T,k]=v;if(x==="characterData")n&&fr(k)&&p0(y)&&Gae(s,y,k)&&Hae(y,k,e);else if(x==="childList"){u=!0;const b=g.addedNodes;for(let P=0;P<b.length;P++){const M=b[P],j=tU(M),A=M.parentNode;if(A!=null&&M!==l&&j===null&&!t5(M,A,e)){if(wm){const D=(Es(M)?M.innerText:null)||M.nodeValue;D&&(d+=D)}A.removeChild(M)}}const E=g.removedNodes,N=E.length;if(N>0){let P=0;for(let M=0;M<N;M++){const j=E[M];(t5(j,y,e)||l===j)&&(y.appendChild(j),P++)}N!==P&&a.set(T,k)}}}if(a.size>0)for(const[h,g]of a)g.reconcileObservedMutation(h,e);const f=r.takeRecords();if(f.length>0){for(let h=0;h<f.length;h++){const g=f[h],x=g.addedNodes,y=g.target;for(let v=0;v<x.length;v++){const T=x[v],k=T.parentNode;k==null||T.nodeName!=="BR"||t5(T,y,e)||k.removeChild(T)}}r.takeRecords()}s!==null&&(u&&Ji(s),wm&&oU(e)&&s.insertRawText(d))}))}finally{Xk=!1}}function cz(e){const t=e._observer;t!==null&&lz(e,t.takeRecords(),t)}function uz(e){(function(t){L7===0&&vc(t).addEventListener("textInput",Wae,!0)})(e),e._observer=new MutationObserver(((t,r)=>{lz(e,t,r)}))}function qae(e){const t=new Map,r=new Set;for(let n=typeof e=="function"?e:e.replace;n.prototype&&n.prototype.getType!==void 0;n=Object.getPrototypeOf(n)){const{ownNodeConfig:s}=cC(n);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&r.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:r,sharedConfigMap:t}}let Kae=class dz{constructor(t,r,n=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=r,this.unknownState=n,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,o=a!==void 0?a:(function(l,u,d){let f=d.size;if(u)for(const h in u){const g=l.get(h);g&&d.has(g)||f++}return f})(i,n,s);this.size=o}getValue(t){const r=this.knownState.get(t);if(r!==void 0)return r;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(n=t.parse(s)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},r={};for(const[n,s]of this.knownState)n.isEqual(s,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(s);for(const n of this.sharedNodeState.flatKeys)n in t&&(r[n]=t[n],delete t[n]);return EP(t)&&(r.$=t),r}getWritable(t){if(this.node===t)return this;const{sharedNodeState:r,unknownState:n}=this,s=new Map(this.knownState);return new dz(t,r,(function(a,i,o){let l;if(o)for(const[u,d]of Object.entries(o)){const f=a.get(u);f?i.has(f)||i.set(f,f.parse(d)):(l=l||{},l[u]=d)}return l})(r.sharedConfigMap,s,n),s,this.size)}updateFromKnown(t,r){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&n in a||(a&&(delete a[n],this.unknownState=EP(a)),this.size++),s.set(t,r)}updateFromUnknown(t,r){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(r)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=r)}updateFromJSON(t){const{knownState:r}=this;for(const n of r.keys())r.set(n,n.defaultValue);if(this.size=r.size,this.unknownState=void 0,t)for(const[n,s]of Object.entries(t))this.updateFromUnknown(n,s)}};function Yae(e){const t=e.getWritable(),r=t.__state?t.__state.getWritable(t):new Kae(t,fz(t));return t.__state=r,r}function fz(e){return e.__state?e.__state.sharedNodeState:Qz(u2(),e.getType()).sharedNodeState}function EP(e){if(e)for(const t in e)return e}function NP(e,t,r){for(const[n,s]of t.knownState){if(e.has(n.key))continue;e.add(n.key);const a=r?r.getValue(n):n.defaultValue;if(a!==s&&!n.isEqual(a,s))return!0}return!1}function AP(e,t,r){const{unknownState:n}=t,s=r?r.unknownState:void 0;if(n){for(const[a,i]of Object.entries(n))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function jP(e,t){const r=e.__state;return r&&r.node===e?r.getWritable(t):r}function PP(e,t){const r=e.__mode,n=e.__format,s=e.__style,a=t.__mode,i=t.__format,o=t.__style,l=e.__state,u=t.__state;return(r===null||r===a)&&(n===null||n===i)&&(s===null||s===o)&&(e.__state===null||l===u||(function(d,f){if(d===f)return!0;if(d&&f&&d.size!==f.size)return!1;const h=new Set;return!(d&&NP(h,d,f)||f&&NP(h,f,d)||d&&AP(h,d,f)||f&&AP(h,f,d))})(l,u))}function MP(e,t){const r=e.mergeWithSibling(t),n=Js()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function FP(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&fr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(PP(t,n)){n=MP(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&fr(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(PP(n,r)){n=MP(n,r);break}break}r.remove()}}else n.remove()}function u4(e){return DP(e.anchor),DP(e.focus),e}function DP(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),fr(n)){e.set(n.__key,s?n.getTextContentSize():0,"text",!0);break}if(!jt(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element",!0)}}let Sm,xo,pv,R_,Jk,Qk,km,nu,Zk,xv,Qa="",Ou=null,Iu="",Bd="",ip=!1,d4=!1;function f4(e,t){const r=km.get(e);if(t!==null){const n=n8(e);n.parentNode===t&&t.removeChild(n)}if(nu.has(e)||xo._keyToDOMMap.delete(e),jt(r)){const n=m4(r,km);e8(n,0,n.length-1,null)}r!==void 0&&aC(xv,pv,R_,r,"destroyed")}function e8(e,t,r,n){let s=t;for(;s<=r;++s){const a=e[s];a!==void 0&&f4(a,n)}}function Lh(e,t){e.setProperty("text-align",t)}const Xae="40px";function hz(e,t){const r=Sm.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||Xae;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function mz(e,t){const r=e.style;t===0?Lh(r,""):t===M7?Lh(r,"left"):t===F7?Lh(r,"center"):t===D7?Lh(r,"right"):t===O7?Lh(r,"justify"):t===I7?Lh(r,"start"):t===R7&&Lh(r,"end")}function t8(e,t){const r=(function(n){const s=n.__dir;if(s!==null)return s;if(ri(n))return null;const a=n.getParentOrThrow();return ri(a)&&a.__dir===null?"auto":null})(t);r!==null?e.dir=r:e.removeAttribute("dir")}function h4(e,t){const r=nu.get(e);r===void 0&&Jt(60);const n=r.createDOM(Sm,xo);if((function(s,a,i){const o=i._keyToDOMMap;(function(l,u,d){const f=`__lexicalKey_${u._key}`;l[f]=d})(a,i,s),o.set(s,a)})(e,n,xo),fr(r)?n.setAttribute("data-lexical-text","true"):Un(r)&&n.setAttribute("data-lexical-decorator","true"),jt(r)){const s=r.__indent,a=r.__size;if(t8(n,r),s!==0&&hz(n,s),a!==0){const o=a-1;r8(m4(r,nu),r,0,o,r.getDOMSlot(n))}const i=r.__format;i!==0&&mz(n,i),r.isInline()||gz(null,r,n),q_(r)&&(Qa+=i0,Bd+=i0)}else{const s=r.getTextContent();if(Un(r)){const a=r.decorate(xo,Sm);a!==null&&pz(e,a),n.contentEditable="false"}Qa+=s,Bd+=s}return t!==null&&t.insertChild(n),aC(xv,pv,R_,r,"created"),n}function r8(e,t,r,n,s){const a=Qa;Qa="";let i=r;for(;i<=n;++i){h4(e[i],s);const o=nu.get(e[i]);o!==null&&fr(o)&&(Ou===null&&(Ou=o.getFormat()),Iu===""&&(Iu=o.getStyle()))}q_(t)&&(Qa+=i0),s.element.__lexicalTextContent=Qa,Qa=a+Qa}function OP(e,t){if(e){const r=e.__last;if(r){const n=t.get(r);if(n)return Xd(n)?"line-break":Un(n)&&n.isInline()?"decorator":null}return"empty"}return null}function gz(e,t,r){const n=OP(e,km),s=OP(t,nu);n!==s&&t.getDOMSlot(r).setManagedLineBreak(s)}function Jae(e,t,r){var n;Ou=null,Iu="",(function(s,a,i){const o=Qa,l=s.__size,u=a.__size;Qa="";const d=i.element;if(l===1&&u===1){const f=s.__first,h=a.__first;if(f===h)Ay(f,d);else{const x=n8(f),y=h4(h,null);try{d.replaceChild(y,x)}catch(v){if(typeof v=="object"&&v!=null){const T=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${h}}, old child: {tag: ${x.tagName}, key: ${f}}.`;throw new Error(T)}throw v}f4(f,null)}const g=nu.get(h);fr(g)&&(Ou===null&&(Ou=g.getFormat()),Iu===""&&(Iu=g.getStyle()))}else{const f=m4(s,km),h=m4(a,nu);if(f.length!==l&&Jt(227),h.length!==u&&Jt(228),l===0)u!==0&&r8(h,a,0,u-1,i);else if(u===0){if(l!==0){const g=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;e8(f,0,l-1,g?null:d),g&&(d.textContent="")}}else(function(g,x,y,v,T,k){const b=v-1,E=T-1;let N,P,M=k.getFirstChild(),j=0,A=0;for(;j<=b&&A<=E;){const G=x[j],X=y[A];if(G===X)M=r5(Ay(X,k.element)),j++,A++;else{N===void 0&&(N=new Set(x)),P===void 0&&(P=new Set(y));const Q=P.has(G),re=N.has(X);if(Q)if(re){const B=Tm(xo,X);B===M?M=r5(Ay(X,k.element)):(k.withBefore(M).insertChild(B),Ay(X,k.element)),j++,A++}else h4(X,k.withBefore(M)),A++;else M=r5(n8(G)),f4(G,k.element),j++}const se=nu.get(X);se!==null&&fr(se)&&(Ou===null&&(Ou=se.getFormat()),Iu===""&&(Iu=se.getStyle()))}const D=j>b,L=A>E;if(D&&!L){const G=y[E+1],X=G===void 0?null:xo.getElementByKey(G);r8(y,g,A,E,k.withBefore(X))}else L&&!D&&e8(x,j,b,k.element)})(a,f,h,l,u,i)}q_(a)&&(Qa+=i0),d.__lexicalTextContent=Qa,Qa=o+Qa})(e,t,t.getDOMSlot(r)),n=t,Ou==null||Ou===n.__textFormat||d4||n.setTextFormat(Ou),(function(s){Iu===""||Iu===s.__textStyle||d4||s.setTextStyle(Iu)})(t)}function m4(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&Jt(101),r.push(n),n=s.__next}return r}function Ay(e,t){const r=km.get(e);let n=nu.get(e);r!==void 0&&n!==void 0||Jt(61);const s=ip||Qk.has(e)||Jk.has(e),a=Tm(xo,e);if(r===n&&!s){if(jt(r)){const i=a.__lexicalTextContent;i!==void 0&&(Qa+=i,Bd+=i)}else{const i=r.getTextContent();Bd+=i,Qa+=i}return a}if(r!==n&&s&&aC(xv,pv,R_,n,"updated"),n.updateDOM(r,a,Sm)){const i=h4(e,null);return t===null&&Jt(62),t.replaceChild(i,a),f4(e,null),i}if(jt(r)&&jt(n)){const i=n.__indent;(ip||i!==r.__indent)&&hz(a,i);const o=n.__format;if((ip||o!==r.__format)&&mz(a,o),s&&(Jae(r,n,a),ri(n)||n.isInline()||gz(r,n,a)),q_(n)&&(Qa+=i0,Bd+=i0),(ip||n.__dir!==r.__dir)&&(t8(a,n),ri(n)&&!ip))for(const l of n.getChildren())jt(l)&&t8(Tm(xo,l.getKey()),l)}else{const i=n.getTextContent();if(Un(n)){const o=n.decorate(xo,Sm);o!==null&&pz(e,o)}Qa+=i,Bd+=i}if(!d4&&ri(n)&&n.__cachedText!==Bd){const i=n.getWritable();i.__cachedText=Bd,n=i}return a}function pz(e,t){let r=xo._pendingDecorators;const n=xo._decorators;if(r===null){if(n[e]===t)return;r=rU(xo)}r[e]=t}function r5(e){let t=e.nextSibling;return t!==null&&t===xo._blockCursorElement&&(t=t.nextSibling),t}function Qae(e,t,r,n,s,a){Qa="",Bd="",ip=n===$p,xo=r,Sm=r._config,pv=r._nodes,R_=xo._listeners.mutation,Jk=s,Qk=a,km=e._nodeMap,nu=t._nodeMap,d4=t._readOnly,Zk=new Map(r._keyToDOMMap);const i=new Map;return xv=i,Ay("root",null),xo=void 0,pv=void 0,Jk=void 0,Qk=void 0,km=void 0,nu=void 0,Sm=void 0,Zk=void 0,xv=void 0,i}function n8(e){const t=Zk.get(e);return t===void 0&&Jt(75,e),t}function Xr(e){return{type:e}}const xz=Xr("SELECTION_CHANGE_COMMAND"),Zae=Xr("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),B7=Xr("CLICK_COMMAND"),om=Xr("DELETE_CHARACTER_COMMAND"),Sp=Xr("INSERT_LINE_BREAK_COMMAND"),yv=Xr("INSERT_PARAGRAPH_COMMAND"),kp=Xr("CONTROLLED_TEXT_INSERTION_COMMAND"),$7=Xr("PASTE_COMMAND"),s8=Xr("REMOVE_TEXT_COMMAND"),vv=Xr("DELETE_WORD_COMMAND"),wv=Xr("DELETE_LINE_COMMAND"),po=Xr("FORMAT_TEXT_COMMAND"),z7=Xr("UNDO_COMMAND"),U7=Xr("REDO_COMMAND"),eie=Xr("KEYDOWN_COMMAND"),yz=Xr("KEY_ARROW_RIGHT_COMMAND"),tie=Xr("MOVE_TO_END"),vz=Xr("KEY_ARROW_LEFT_COMMAND"),rie=Xr("MOVE_TO_START"),wz=Xr("KEY_ARROW_UP_COMMAND"),bz=Xr("KEY_ARROW_DOWN_COMMAND"),g4=Xr("KEY_ENTER_COMMAND"),_z=Xr("KEY_SPACE_COMMAND"),Sz=Xr("KEY_BACKSPACE_COMMAND"),kz=Xr("KEY_ESCAPE_COMMAND"),Tz=Xr("KEY_DELETE_COMMAND"),Cz=Xr("KEY_TAB_COMMAND"),nie=Xr("INSERT_TAB_COMMAND"),sie=Xr("INDENT_CONTENT_COMMAND"),IP=Xr("OUTDENT_CONTENT_COMMAND"),Ez=Xr("DROP_COMMAND"),Nz=Xr("FORMAT_ELEMENT_COMMAND"),Az=Xr("DRAGSTART_COMMAND"),jz=Xr("DRAGOVER_COMMAND"),aie=Xr("DRAGEND_COMMAND"),L_=Xr("COPY_COMMAND"),W7=Xr("CUT_COMMAND"),a8=Xr("SELECT_ALL_COMMAND"),iie=Xr("CLEAR_EDITOR_COMMAND"),oie=Xr("CLEAR_HISTORY_COMMAND"),Hw=Xr("CAN_REDO_COMMAND"),Gw=Xr("CAN_UNDO_COMMAND"),lie=Xr("FOCUS_COMMAND"),cie=Xr("BLUR_COMMAND"),uie=Xr("KEY_MODIFIER_COMMAND"),Dd=Object.freeze({}),i8=30,o8=[["keydown",function(e,t){if(Wy=e.timeStamp,Pz=e.key,!t.isComposing()&&!kr(t,eie,e)&&e.key!=null){if(n5&&uM(e))return El(t,(()=>{Vw(t,s5)})),n5=!1,void(s5="");if((function(r){return Zn(r,"ArrowRight",{shiftKey:"any"})})(e))kr(t,yz,e);else if((function(r){return Zn(r,"ArrowRight",Rd)})(e))kr(t,tie,e);else if((function(r){return Zn(r,"ArrowLeft",{shiftKey:"any"})})(e))kr(t,vz,e);else if((function(r){return Zn(r,"ArrowLeft",Rd)})(e))kr(t,rie,e);else if((function(r){return Zn(r,"ArrowUp",{altKey:"any",shiftKey:"any"})})(e))kr(t,wz,e);else if((function(r){return Zn(r,"ArrowDown",{altKey:"any",shiftKey:"any"})})(e))kr(t,bz,e);else if((function(r){return Zn(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(e))Hy=!0,kr(t,g4,e);else if((function(r){return r.key===" "})(e))kr(t,_z,e);else if((function(r){return Ru&&Zn(r,"o",{ctrlKey:!0})})(e))e.preventDefault(),Hy=!0,kr(t,Sp,!0);else if((function(r){return Zn(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(e))Hy=!1,kr(t,g4,e);else if((function(r){return Zn(r,"Backspace",{shiftKey:"any"})||Ru&&Zn(r,"h",{ctrlKey:!0})})(e))uM(e)?kr(t,Sz,e):(e.preventDefault(),kr(t,om,!0));else if((function(r){return r.key==="Escape"})(e))kr(t,kz,e);else if((function(r){return Zn(r,"Delete",{})||Ru&&Zn(r,"d",{ctrlKey:!0})})(e))(function(r){return r.key==="Delete"})(e)?kr(t,Tz,e):(e.preventDefault(),kr(t,om,!1));else if((function(r){return Zn(r,"Backspace",cM)})(e))e.preventDefault(),kr(t,vv,!0);else if((function(r){return Zn(r,"Delete",cM)})(e))e.preventDefault(),kr(t,vv,!1);else if((function(r){return Ru&&Zn(r,"Backspace",{metaKey:!0})})(e))e.preventDefault(),kr(t,wv,!0);else if((function(r){return Ru&&(Zn(r,"Delete",{metaKey:!0})||Zn(r,"k",{ctrlKey:!0}))})(e))e.preventDefault(),kr(t,wv,!1);else if((function(r){return Zn(r,"b",Rd)})(e))e.preventDefault(),kr(t,po,"bold");else if((function(r){return Zn(r,"u",Rd)})(e))e.preventDefault(),kr(t,po,"underline");else if((function(r){return Zn(r,"i",Rd)})(e))e.preventDefault(),kr(t,po,"italic");else if((function(r){return Zn(r,"Tab",{shiftKey:"any"})})(e))kr(t,Cz,e);else if((function(r){return Zn(r,"z",Rd)})(e))e.preventDefault(),kr(t,z7,void 0);else if((function(r){return Ru?Zn(r,"z",{metaKey:!0,shiftKey:!0}):Zn(r,"y",{ctrlKey:!0})||Zn(r,"z",{ctrlKey:!0,shiftKey:!0})})(e))e.preventDefault(),kr(t,U7,void 0);else{const r=t._editorState._selection;r===null||Gt(r)?dM(e)&&(e.preventDefault(),kr(t,a8,e)):(function(n){return Zn(n,"c",Rd)})(e)?(e.preventDefault(),kr(t,L_,e)):(function(n){return Zn(n,"x",Rd)})(e)?(e.preventDefault(),kr(t,W7,e)):dM(e)&&(e.preventDefault(),kr(t,a8,e))}(function(r){return r.ctrlKey||r.shiftKey||r.altKey||r.metaKey})(e)&&kr(t,uie,e)}}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;d1(r)&&n!=="touch"&&n!=="pen"&&e.button===0&&El(t,(()=>{iM(r)||(c8=!0)}))}],["compositionstart",function(e,t){El(t,(()=>{const r=dr();if(Gt(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();qi(n.key),(e.timeStamp<Wy+i8||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||fr(s)&&s.getStyle()!==r.style)&&kr(t,kp,Rae)}}))}],["compositionend",function(e,t){wm?gy=!0:Bp||!gv&&!o4?El(t,(()=>{Vw(t,e.data)})):(n5=!0,s5=e.data)}],["input",function(e,t){e.stopPropagation(),El(t,(()=>{if(Es(e.target)&&iM(e.target))return;const r=dr(),n=e.data,s=Iz(e);if(n!=null&&Gt(r)&&Dz(r,s,n,e.timeStamp,!1)){gy&&(Vw(t,n),gy=!1);const a=r.anchor.getNode(),i=ou(vc(t));if(i===null)return;const o=r.isBackward(),l=o?r.anchor.offset:r.focus.offset,u=o?r.focus.offset:r.anchor.offset;i4&&!r.isCollapsed()&&fr(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,l)+n+a.getTextContent().slice(l+u)===iU(i.anchorNode)||kr(t,kp,n);const d=n.length;wm&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=d),gv||Bp||o4||!t.isComposing()||(Wy=0,qi(null))}else nC(!1,t,n!==null?n:void 0),gy&&(Vw(t,n||void 0),gy=!1);(function(){Vi();const a=Js();cz(a)})()}),{event:e}),op=null}],["click",function(e,t){El(t,(()=>{const r=dr(),n=ou(vc(t)),s=u1();if(n){if(Gt(r)){const a=r.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&r.isCollapsed()&&!ri(i)&&Ls().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s))n.removeAllRanges(),r.dirty=!0;else if(e.detail===3&&!r.isCollapsed()&&i!==r.focus.getNode()){const o=(function(l,u){let d=l;for(;d!==Ls()&&d!=null;){if(u(d))return d;d=d.getParent()}return null})(i,(l=>jt(l)&&!l.isInline()));jt(o)&&o.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=n.anchorNode;(Es(a)||p0(a))&&Ji(V7(s,n,t,e))}}kr(t,B7,e)}))}],["cut",Dd],["copy",Dd],["dragstart",Dd],["dragover",Dd],["dragend",Dd],["paste",Dd],["focus",Dd],["blur",Dd],["drop",Dd]];i4&&o8.push(["beforeinput",(e,t)=>(function(r,n){const s=r.inputType,a=Iz(r);s==="deleteCompositionText"||wm&&oU(n)||s!=="insertCompositionText"&&El(n,(()=>{const i=dr();if(s==="deleteContentBackward"){if(i===null){const g=u1();if(!Gt(g))return;Ji(g.clone())}if(Gt(i)){const g=i.anchor.key===i.focus.key;if(o=r.timeStamp,Pz==="MediaLast"&&o<Wy+i8&&n.isComposing()&&g){if(qi(null),Wy=0,setTimeout((()=>{El(n,(()=>{qi(null)}))}),i8),Gt(i)){const x=i.anchor.getNode();x.markDirty(),fr(x)||Jt(142),Oz(i,x)}}else{qi(null),r.preventDefault();const x=i.anchor.getNode(),y=x.getTextContent(),v=x.canInsertTextAfter(),T=i.anchor.offset===0&&i.focus.offset===y.length;let k=kP&&g&&!T&&v;if(k&&i.isCollapsed()&&(k=!Un(m8(i.anchor,!0))),!k){kr(n,om,!0);const b=dr();kP&&Gt(b)&&b.isCollapsed()&&(qh=b,setTimeout((()=>qh=null)))}}return}}var o;if(!Gt(i))return;const l=r.data;op!==null&&nC(!1,n,op),i.dirty&&op===null||!i.isCollapsed()||ri(i.anchor.getNode())||a===null||i.applyDOMRange(a),op=null;const u=i.anchor,d=i.focus,f=u.getNode(),h=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":kr(n,kp,r);break;case"insertFromComposition":qi(null),kr(n,kp,r);break;case"insertLineBreak":qi(null),kr(n,Sp,!1);break;case"insertParagraph":qi(null),Hy&&!Bp?(Hy=!1,kr(n,Sp,!1)):kr(n,yv,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":kr(n,$7,r);break;case"deleteByComposition":(function(g,x){return g!==x||jt(g)||jt(x)||!lm(g)||!lm(x)})(f,h)&&kr(n,s8,r);break;case"deleteByDrag":case"deleteByCut":kr(n,s8,r);break;case"deleteContent":kr(n,om,!1);break;case"deleteWordBackward":kr(n,vv,!0);break;case"deleteWordForward":kr(n,vv,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":kr(n,wv,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":kr(n,wv,!1);break;case"formatStrikeThrough":kr(n,po,"strikethrough");break;case"formatBold":kr(n,po,"bold");break;case"formatItalic":kr(n,po,"italic");break;case"formatUnderline":kr(n,po,"underline");break;case"historyUndo":kr(n,z7,void 0);break;case"historyRedo":kr(n,U7,void 0)}else{if(l===`
`)r.preventDefault(),kr(n,Sp,!1);else if(l===i0)r.preventDefault(),kr(n,yv,void 0);else if(l==null&&r.dataTransfer){const g=r.dataTransfer.getData("text/plain");r.preventDefault(),i.insertRawText(g)}else l!=null&&Dz(i,a,l,r.timeStamp,!0)?(r.preventDefault(),kr(n,kp,l)):op=l;Mz=r.timeStamp}}))})(e,t)]);let Wy=0,Pz=null,Mz=0,op=null;const p4=new WeakMap;let l8=!1,c8=!1,Hy=!1,gy=!1,n5=!1,s5="",qh=null,Fz=[0,"",0,"root",0];function Dz(e,t,r,n,s){const a=e.anchor,i=e.focus,o=a.getNode(),l=Js(),u=ou(vc(l)),d=u!==null?u.anchorNode:null,f=a.key,h=l.getElementByKey(f),g=r.length;return f!==i.key||!fr(o)||(!s&&(!i4||Mz<n+50)||o.isDirty()&&g<2||sU(r))&&a.offset!==i.offset&&!o.isComposing()||Ld(o)||o.isDirty()&&g>1||(s||!i4)&&h!==null&&!o.isComposing()&&d!==zp(h)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||(function(x,y){if(y.isSegmented())return!0;if(!x.isCollapsed())return!1;const v=x.anchor.offset,T=y.getParentOrThrow(),k=lm(y);return v===0?!y.canInsertTextBefore()||!T.canInsertTextBefore()&&!y.isComposing()||k||(function(b){const E=b.getPreviousSibling();return(fr(E)||jt(E)&&E.isInline())&&!E.canInsertTextAfter()})(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!T.canInsertTextAfter()&&!y.isComposing()||k)})(e,o)}function RP(e,t){return p0(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function LP(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:i}=e;l8&&(l8=!1,RP(n,s)&&RP(a,i)&&!qh)||El(t,(()=>{if(!r)return void Ji(null);if(!l2(t,n,a))return;let o=dr();if(qh&&Gt(o)&&o.isCollapsed()){const l=o.anchor,u=qh.anchor;(l.key===u.key&&l.offset===u.offset+1||l.offset===1&&u.getNode().is(l.getNode().getPreviousSibling()))&&(o=qh.clone(),Ji(o))}if(qh=null,Gt(o)){const l=o.anchor,u=l.getNode();if(o.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(o.dirty=!0);const d=vc(t).event,f=d?d.timeStamp:performance.now(),[h,g,x,y,v]=Fz,T=Ls(),k=t.isComposing()===!1&&T.getTextContent()==="";if(f<v+200&&l.offset===x&&l.key===y)Wb(o,h,g);else if(l.type==="text")fr(u)||Jt(141),Oz(o,u);else if(l.type==="element"&&!k){jt(u)||Jt(259);const b=l.getNode();b.isEmpty()?(function(E,N){const P=N.getTextFormat(),M=N.getTextStyle();Wb(E,P,M)})(o,b):Wb(o,0,"")}}else{const d=l.key,f=o.focus.key,h=o.getNodes(),g=h.length,x=o.isBackward(),y=x?i:s,v=x?s:i,T=x?f:d,k=x?d:f;let b=Iae,E=!1;for(let N=0;N<g;N++){const P=h[N],M=P.getTextContentSize();if(fr(P)&&M!==0&&!(N===0&&P.__key===T&&y===M||N===g-1&&P.__key===k&&v===0)&&(E=!0,b&=P.getFormat(),b===0))break}o.format=E?b:0}}kr(t,xz,void 0)}))}function Wb(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function Oz(e,t){Wb(e,t.getFormat(),t.getStyle())}function Iz(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function Vw(e,t){const r=e._compositionKey;if(qi(null),r!==null&&t!=null){if(t===""){const n=Ba(r),s=zp(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&fr(n)&&sC(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=dr();if(Gt(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void kr(e,g4,null)}}}nC(!0,e,t)}function Rz(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Tp=new Map;function Lz(e){const t=Wie(e.target);if(t===null)return;const r=Zz(t.anchorNode);if(r===null)return;c8&&(c8=!1,El(r,(()=>{const l=u1(),u=t.anchorNode;(Es(u)||p0(u))&&Ji(V7(l,t,r,e))})));const n=rC(r),s=n[n.length-1],a=s._key,i=Tp.get(a),o=i||s;o!==r&&LP(t,o,!1),LP(t,r,!0),r!==s?Tp.set(a,r):i&&Tp.delete(a)}function BP(e){e._lexicalHandled=!0}function $P(e){return e._lexicalHandled===!0}function die(e){const t=e.ownerDocument,r=p4.get(t);if(r===void 0)return;const n=r-1;n>=0||Jt(164),p4.set(t,n),n===0&&t.removeEventListener("selectionchange",Lz);const s=G_(e);tC(s)?((function(i){if(i._parentEditor!==null){const o=rC(i),l=o[o.length-1]._key;Tp.get(l)===i&&Tp.delete(l)}else Tp.delete(i._key)})(s),e.__lexicalEditor=null):s&&Jt(198);const a=Rz(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function u8(e,t,r){Vi();const n=e.__key,s=e.getParent();if(s===null)return;const a=(function(o){const l=dr();if(!Gt(l)||!jt(o))return l;const{anchor:u,focus:d}=l,f=u.getNode(),h=d.getNode();return g8(f,o)&&u.set(o.__key,0,"element"),g8(h,o)&&d.set(o.__key,0,"element"),l})(e);let i=!1;if(Gt(a)&&t){const o=a.anchor,l=a.focus;o.key===n&&(y4(o,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),l.key===n&&(y4(l,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else oo(a)&&t&&e.isSelected()&&e.selectPrevious();if(Gt(a)&&t&&!i){const o=e.getIndexWithinParent();cm(e),x4(a,s,o,-1)}else cm(e);r||zo(s)||s.canBeEmpty()||!s.isEmpty()||u8(s,t),t&&a&&ri(s)&&s.isEmpty()&&s.selectEnd()}class l1{static getType(){const{ownNodeType:t}=cC(this);return t===void 0&&Jt(64,this.name),t}static clone(t){Jt(65,this.name)}$config(){return{}}config(t,r){const n=r.extends||Object.getPrototypeOf(this.constructor);return Object.assign(r,{extends:n,type:t}),{[t]:r}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Oie(this,t)}getType(){return this.__type}isInline(){Jt(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=Ba(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||dr();if(r==null)return!1;const n=r.getNodes().some((s=>s.__key===this.__key));if(fr(this))return n;if(Gt(r)&&r.anchor.type==="element"&&r.focus.type==="element"){if(r.isCollapsed())return!1;const s=this.getParent();if(Un(this)&&this.isInline()&&s){const a=r.isBackward()?r.focus:r.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:Ba(t)}getParentOrThrow(){const t=this.getParent();return t===null&&Jt(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if(zo(r))return jt(t)||t===this&&Un(t)||Jt(194),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&Jt(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:Ba(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:Ba(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=jt(this)?this:this.getParent(),n=jt(t)?t:t.getParent(),s=r&&n?Gb(r,n):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const r=Gb(this,t);return r!==null&&(r.type==="descendant"||(r.type==="branch"?dU(r)===-1:(r.type!=="same"&&r.type!=="ancestor"&&Jt(279),!1)))}isParentOf(t){const r=Gb(this,t);return r!==null&&r.type==="ancestor"}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),n.push(a)),a===t)break;const o=jt(a)?r?a.getFirstChild():a.getLastChild():null;if(o!==null){a=o;continue}const l=r?a.getNextSibling():a.getPreviousSibling();if(l!==null){a=l;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||n.push(u),u===t)break;let d=null,f=u;do{if(f===null&&Jt(68),d=r?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;d!==null||s.has(f.__key)||n.push(f)}while(d===null);a=d}return r||n.reverse(),n}isDirty(){const t=Js()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=Ba(this.__key);return t===null&&Jt(113),t}getWritable(){Vi();const t=Xf(),r=Js(),n=t._nodeMap,s=this.__key,a=this.getLatest(),i=r._cloneNotNeeded,o=dr();if(o!==null&&o.setCachedNodes(null),i.has(s))return b4(a),a;const l=oC(a);return i.add(s),b4(l),n.set(s,l),l}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){Jt(70)}updateDOM(t,r,n){Jt(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){Jt(18,this.name)}updateFromJSON(t){return(function(r,n){const s=r.getWritable(),a=n.$;let i=a;for(const o of fz(s).flatKeys)o in n&&(i!==void 0&&i!==a||(i={...a}),i[o]=n[o]);return(s.__state||i)&&Yae(r).updateFromJSON(i),s})(this,t)}static transform(){return null}remove(t){u8(this,!0,t)}replace(t,r){Vi();let n=dr();n!==null&&(n=n.clone()),u5(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,o=t.getWritable(),l=this.getParentOrThrow().getWritable(),u=l.__size;cm(o);const d=s.getPreviousSibling(),f=s.getNextSibling(),h=s.__prev,g=s.__next,x=s.__parent;if(u8(s,!1,!0),d===null?l.__first=i:d.getWritable().__next=i,o.__prev=h,f===null?l.__last=i:f.getWritable().__prev=i,o.__next=g,o.__parent=x,l.__size=u,r&&(jt(this)&&jt(o)||Jt(139),this.getChildren().forEach((y=>{o.append(y)}))),Gt(n)){Ji(n);const y=n.anchor,v=n.focus;y.key===a&&HP(y,o),v.key===a&&HP(v,o)}return _f()===a&&qi(i),o}insertAfter(t,r=!0){Vi(),u5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=dr();let o=!1,l=!1;if(a!==null){const g=t.getIndexWithinParent();if(cm(s),Gt(i)){const x=a.__key,y=i.anchor,v=i.focus;o=y.type==="element"&&y.key===x&&y.offset===g+1,l=v.type==="element"&&v.key===x&&v.offset===g+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),f=s.__key,h=n.__next;if(u===null?d.__last=f:u.getWritable().__prev=f,d.__size++,n.__next=f,s.__next=h,s.__prev=n.__key,s.__parent=n.__parent,r&&Gt(i)){const g=this.getIndexWithinParent();x4(i,d,g+1);const x=d.__key;o&&i.anchor.set(x,g+2,"element"),l&&i.focus.set(x,g+2,"element")}return t}insertBefore(t,r=!0){Vi(),u5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.__key;cm(s);const i=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),l=n.__prev,u=this.getIndexWithinParent();i===null?o.__first=a:i.getWritable().__next=a,o.__size++,n.__prev=a,s.__prev=l,s.__next=n.__key,s.__parent=n.__parent;const d=dr();return r&&Gt(d)&&x4(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return Cs()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){Vi();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(jt(n))return n.select();if(!fr(n)){const a=n.getIndexWithinParent()+1;return s.select(a,a)}return n.select(t,r)}selectNext(t,r){Vi();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(jt(n))return n.select(0,0);if(!fr(n)){const a=n.getIndexWithinParent();return s.select(a,a)}return n.select(t,r)}markDirty(){this.getWritable()}reconcileObservedMutation(t,r){this.markDirty()}}class n2 extends l1{static getType(){return"linebreak"}static clone(t){return new n2(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(r){const n=r.parentElement;if(n!==null&&_4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&qw(s)){const a=n.lastChild;if(a===r||a.previousSibling===r&&qw(a))return!0}}return!1})(t)||(function(r){const n=r.parentElement;if(n!==null&&_4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&qw(s))return!1;const a=n.lastChild;if(a===r||a.previousSibling===r&&qw(a))return!0}return!1})(t)?null:{conversion:fie,priority:0}}}static importJSON(t){return Xu().updateFromJSON(t)}}function fie(e){return{node:Xu()}}function Xu(){return Ho(new n2)}function Xd(e){return e instanceof n2}function qw(e){return p0(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function a5(e,t){return 16&t?"code":t&P7?"mark":32&t?"sub":64&t?"sup":null}function i5(e,t){return 1&t?"strong":2&t?"em":"span"}function Bz(e,t,r,n,s){const a=n.classList;let i=Cp(s,"base");i!==void 0&&a.add(...i),i=Cp(s,"underlineStrikethrough");let o=!1;const l=t&c4&&t&l4;i!==void 0&&(r&c4&&r&l4?(o=!0,l||a.add(...i)):l&&a.remove(...i));for(const u in _m){const d=_m[u];if(i=Cp(s,u),i!==void 0)if(r&d){if(o&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!l||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function $z(e,t,r){const n=t.firstChild,s=r.isComposing(),a=e+(s?I_:"");if(n==null)t.textContent=a;else{const i=n.nodeValue;if(i!==a)if(s||wm){const[o,l,u]=(function(d,f){const h=d.length,g=f.length;let x=0,y=0;for(;x<h&&x<g&&d[x]===f[x];)x++;for(;y+x<h&&y+x<g&&d[h-y-1]===f[g-y-1];)y++;return[x,h-x-y,f.slice(x,g-y)]})(i,a);l!==0&&n.deleteData(o,l),n.insertData(o,u)}else n.nodeValue=a}}function zP(e,t,r,n,s,a){$z(s,e,t);const i=a.theme.text;i!==void 0&&Bz(0,0,n,e,i)}function Kw(e,t){const r=document.createElement(t);return r.appendChild(e),r}class Yf extends l1{static getType(){return"text"}static clone(t){return new Yf(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return zae[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===_f()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=_m[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return w4(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const n=this.__format,s=a5(0,n),a=i5(0,n),i=s===null?a:s,o=document.createElement(i);let l=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),s!==null&&(l=document.createElement(a),o.appendChild(l)),zP(l,this,0,n,this.__text,t);const u=this.__style;return u!==""&&(o.style.cssText=u),o}updateDOM(t,r,n){const s=this.__text,a=t.__format,i=this.__format,o=a5(0,a),l=a5(0,i),u=i5(0,a),d=i5(0,i);if((o===null?u:o)!==(l===null?d:l))return!0;if(o===l&&u!==d){const y=r.firstChild;y==null&&Jt(48);const v=document.createElement(d);return zP(v,this,0,i,s,n),r.replaceChild(v,y),!1}let f=r;l!==null&&o!==null&&(f=r.firstChild,f==null&&Jt(49)),$z(s,f,this);const h=n.theme.text;h!==void 0&&a!==i&&Bz(0,a,i,f,h);const g=t.__style,x=this.__style;return g!==x&&(r.style.cssText=x),!1}static importDOM(){return{"#text":()=>({conversion:pie,priority:0}),b:()=>({conversion:mie,priority:0}),code:()=>({conversion:Od,priority:0}),em:()=>({conversion:Od,priority:0}),i:()=>({conversion:Od,priority:0}),mark:()=>({conversion:Od,priority:0}),s:()=>({conversion:Od,priority:0}),span:()=>({conversion:hie,priority:0}),strong:()=>({conversion:Od,priority:0}),sub:()=>({conversion:Od,priority:0}),sup:()=>({conversion:Od,priority:0}),u:()=>({conversion:Od,priority:0})}}static importJSON(t){return la().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return Es(r)||Jt(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=Kw(r,"b")),this.hasFormat("italic")&&(r=Kw(r,"i")),this.hasFormat("strikethrough")&&(r=Kw(r,"s")),this.hasFormat("underline")&&(r=Kw(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?_m[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?Lae[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=w4(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=$ae[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){Vi();let n=t,s=r;const a=dr(),i=this.getTextContent(),o=this.__key;if(typeof i=="string"){const l=i.length;n===void 0&&(n=l),s===void 0&&(s=l)}else n=0,s=0;if(!Gt(a))return Wz(o,n,o,s,"text","text");{const l=_f();l!==a.anchor.key&&l!==a.focus.key||qi(o),a.setTextNodeRange(this,n,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const a=this.getWritable(),i=a.__text,o=n.length;let l=t;l<0&&(l=o+l,l<0&&(l=0));const u=dr();if(s&&Gt(u)){const f=t+o;u.setTextNodeRange(a,f,a,f)}const d=i.slice(0,l)+n+i.slice(l+r);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Vi();const r=this.getLatest(),n=r.getTextContent();if(n==="")return[];const s=r.__key,a=_f(),i=n.length;t.sort(((j,A)=>j-A)),t.push(i);const o=[],l=t.length;for(let j=0,A=0;j<i&&A<=l;A++){const D=t[A];D>j&&(o.push(n.slice(j,D)),j=D)}const u=o.length;if(u===1)return[r];const d=o[0],f=r.getParent();let h;const g=r.getFormat(),x=r.getStyle(),y=r.__detail;let v=!1,T=null,k=null;const b=dr();if(Gt(b)){const[j,A]=b.isBackward()?[b.focus,b.anchor]:[b.anchor,b.focus];j.type==="text"&&j.key===s&&(T=j),A.type==="text"&&A.key===s&&(k=A)}r.isSegmented()?(h=la(d),h.__format=g,h.__style=x,h.__detail=y,h.__state=jP(r,h),v=!0):h=r.setTextContent(d);const E=[h];for(let j=1;j<u;j++){const A=la(o[j]);A.__format=g,A.__style=x,A.__detail=y,A.__state=jP(r,A);const D=A.__key;a===s&&qi(D),E.push(A)}const N=T?T.offset:null,P=k?k.offset:null;let M=0;for(const j of E){if(!T&&!k)break;const A=M+j.getTextContentSize();if(T!==null&&N!==null&&N<=A&&N>=M&&(T.set(j.getKey(),N-M,"text"),N<A&&(T=null)),k!==null&&P!==null&&P<=A&&P>=M){k.set(j.getKey(),P-M,"text");break}M=A}if(f!==null){(function(D){const L=D.getPreviousSibling(),G=D.getNextSibling();L!==null&&b4(L),G!==null&&b4(G)})(this);const j=f.getWritable(),A=this.getIndexWithinParent();v?(j.splice(A,0,E),this.remove()):j.splice(A,1,E),Gt(b)&&x4(b,f,A,u-1)}return E}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||Jt(50);const n=this.__key,s=t.__key,a=this.__text,i=a.length;_f()===s&&qi(n);const o=dr();if(Gt(o)){const f=o.anchor,h=o.focus;f!==null&&f.key===s&&JP(f,r,n,t,i),h!==null&&h.key===s&&JP(h,r,n,t,i)}const l=t.__text,u=r?l+a:a+l;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function hie(e){return{forChild:H7(e.style),node:null}}function mie(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:H7(t.style,r?void 0:"bold"),node:null}}const UP=new WeakMap;function gie(e){if(!Es(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function pie(e){const t=e;e.parentElement===null&&Jt(129);let r=t.textContent||"";if((function(n){let s,a=n.parentNode;const i=[n];for(;a!==null&&(s=UP.get(a))===void 0&&!gie(a);)i.push(a),a=a.parentNode;const o=s===void 0?a:s;for(let l=0;l<i.length;l++)UP.set(i[l],o);return o})(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],a=n.length;for(let i=0;i<a;i++){const o=n[i];o===`
`||o===`\r
`?s.push(Xu()):o==="	"?s.push(c1()):o!==""&&s.push(la(o))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=WP(n,!1))!==null;){const a=n.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=WP(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:la(r)}}function WP(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const a=r.parentElement;if(a===null)return null;r=a}if(r=n,Es(r)){const a=r.style.display;if(a===""&&!y8(r)||a!==""&&!a.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(p0(r))return r;if(r.nodeName==="BR")return null}}const xie={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Od(e){const t=xie[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:H7(e.style,t),node:null}}function la(e=""){return Ho(new Yf(e))}function fr(e){return e instanceof Yf}function H7(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",a=n.includes("line-through"),i=e.fontStyle==="italic",o=n.includes("underline"),l=e.verticalAlign;return u=>(fr(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),o&&!u.hasFormat("underline")&&u.toggleFormat("underline"),l!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),l!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class s2 extends Yf{static getType(){return"tab"}static clone(t){return new s2(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const r=super.createDOM(t),n=Cp(t.theme,"tab");return n!==void 0&&r.classList.add(...n),r}static importJSON(t){return c1().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&Jt(126),super.setTextContent("	")}spliceText(t,r,n,s){return n===""&&r===0||n==="	"&&r===1||Jt(286),this}setDetail(t){return t!==2&&Jt(127),this}setMode(t){return t!=="normal"&&Jt(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function c1(){return Ho(new s2)}function B_(e){return e instanceof s2}class yie{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:uU(hc(o0(this,"next")),hc(o0(t,"next")))<0}getNode(){const t=Ba(this.key);return t===null&&Jt(20),t}set(t,r,n,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===r&&this.type===n||(this.key=t,this.offset=r,this.type=n,a2()||(_f()===i&&qi(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function Ju(e,t,r){return new yie(e,t,r)}function o5(e,t){let r=t.__key,n=e.offset,s="element";if(fr(t)){s="text";const a=t.getTextContentSize();n>a&&(n=a)}else if(!jt(t)){const a=t.getNextSibling();if(fr(a))r=a.__key,n=0,s="text";else{const i=t.getParent();i&&(r=i.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function HP(e,t){if(jt(t)){const r=t.getLastDescendant();jt(r)||fr(r)?o5(e,r):o5(e,t)}else o5(e,t)}class $_{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!oo(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every((s=>n.has(s)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new $_(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let a;if(fr(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<n;i++)r[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const a=Ba(s);a!==null&&n.push(a)}return a2()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}deleteNodes(){const t=this.getNodes();if((dr()||u1())===this&&t[0]){const r=Xi(t[0],"next");roe(Rf(r,r))}for(const r of t)r.remove()}}function Gt(e){return e instanceof Hm}class Hm{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Gt(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=(function(n){const s=[],[a,i]=n.getTextSlices();a&&s.push(a.caret.origin);const o=new Set,l=new Set;for(const u of n)if(Ku(u)){const{origin:d}=u;s.length===0?o.add(d):(l.add(d),s.push(d))}else{const{origin:d}=u;jt(d)&&l.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),Nm(n.focus)&&jt(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=wc(n.focus.origin,"previous");Ku(u)&&o.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=fC(u))o.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!jt(u)||l.has(u)||u.isEmpty()||o.has(u))break;s.pop()}if(s.length===0&&n.isCollapsed()){const u=hc(n.anchor),d=hc(n.anchor.getFlipped()),f=g=>Af(g)?g.origin:g.getNodeAtCaret(),h=f(u)||f(d)||(n.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(h)}return s})(hU(xM(this),"next"));return a2()||(this._cachedNodes=r),r}setTextNodeRange(t,r,n,s){this.anchor.set(t.__key,r,"text"),this.focus.set(n.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[o,l]=d8(this);let u="",d=!0;for(let f=0;f<t.length;f++){const h=t[f];if(jt(h)&&!h.isInline())d||(u+=`
`),d=!h.isEmpty();else if(d=!1,fr(h)){let g=h.getTextContent();h===r?h===n?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(g=o<l?g.slice(o,l):g.slice(l,o)):g=i?g.slice(o):g.slice(l):h===n&&(g=i?g.slice(0,l):g.slice(0,o)),u+=g}else!Un(h)&&!Xd(h)||h===n&&this.isCollapsed()||(u+=h.getTextContent())}return u}applyDOMRange(t){const r=Js(),n=r.getEditorState()._selection,s=Uz(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),u4(this)}clone(){const t=this.anchor,r=this.focus;return new Hm(Ju(t.key,t.offset,t.type),Ju(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=w4(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=_m[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let a=0;a<s;a++){const i=r[a];i===`
`||i===`\r
`?n.push(Xu()):i==="	"?n.push(c1()):n.push(la(i))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,a=this.style;let i=r,o=n;!this.isCollapsed()&&n.isBefore(r)&&(i=n,o=r),i.type==="element"&&(function(v,T,k,b){const E=v.getNode(),N=E.getChildAtIndex(v.offset),P=la();if(P.setFormat(k),P.setStyle(b),J7(N))N.splice(0,0,[P]);else{const M=ri(E)?Cs().append(P):P;N===null?E.append(M):N.insertBefore(M)}v.is(T)&&T.set(P.__key,0,"text"),v.set(P.__key,0,"text")})(i,o,s,a),o.type==="element"&&jm(o,hc(o0(o,"next")));const l=i.offset;let u=o.offset;const d=this.getNodes(),f=d.length;let h=d[0];fr(h)||Jt(26);const g=h.getTextContent().length,x=h.getParentOrThrow();let y=d[f-1];if(f===1&&o.type==="element"&&(u=g,o.set(i.key,u,"text")),this.isCollapsed()&&l===g&&(Ld(h)||!h.canInsertTextAfter()||!x.canInsertTextAfter()&&h.getNextSibling()===null)){let v=h.getNextSibling();if(fr(v)&&v.canInsertTextBefore()&&!Ld(v)||(v=la(),v.setFormat(s),v.setStyle(a),x.canInsertTextAfter()?h.insertAfter(v):x.insertAfter(v)),v.select(0,0),h=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&l===0&&(Ld(h)||!h.canInsertTextBefore()||!x.canInsertTextBefore()&&h.getPreviousSibling()===null)){let v=h.getPreviousSibling();if(fr(v)&&!Ld(v)||(v=la(),v.setFormat(s),x.canInsertTextBefore()?h.insertBefore(v):x.insertBefore(v)),v.select(),h=v,t!=="")return void this.insertText(t)}else if(h.isSegmented()&&l!==g){const v=la(h.getTextContent());v.setFormat(s),h.replace(v),h=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!x.canInsertTextBefore()||!x.canInsertTextAfter()||jt(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),zz(this.anchor,this.focus,null),void this.insertText(t)}if(f===1){if(lm(h)){const b=la(t);return b.select(),void h.replace(b)}const v=h.getFormat(),T=h.getStyle();if(l!==u||v===s&&T===a){if(B_(h)){const b=la(t);return b.setFormat(s),b.setStyle(a),b.select(),void h.replace(b)}}else{if(h.getTextContent()!==""){const b=la(t);if(b.setFormat(s),b.setStyle(a),b.select(),l===0)h.insertBefore(b,!1);else{const[E]=h.splitText(l);E.insertAfter(b,!1)}return void(b.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}h.setFormat(s),h.setStyle(a)}const k=u-l;h=h.spliceText(l,k,t,!0),h.getTextContent()===""?h.remove():this.anchor.type==="text"&&(h.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=T))}else{const v=new Set([...h.getParentKeys(),...y.getParentKeys()]),T=jt(h)?h:h.getParentOrThrow();let k=jt(y)?y:y.getParentOrThrow(),b=y;if(!T.is(k)&&k.isInline())do b=k,k=k.getParentOrThrow();while(k.isInline());if(o.type==="text"&&(u!==0||y.getTextContent()==="")||o.type==="element"&&y.getIndexWithinParent()<u)if(fr(y)&&!lm(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const j=la(y.getTextContent());y.replace(j),y=j}ri(o.getNode())||o.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const j=y.getParentOrThrow();j.canBeEmpty()||j.getChildrenSize()!==1?y.remove():j.remove()}else v.add(y.__key);const E=k.getChildren(),N=new Set(d),P=T.is(k),M=T.isInline()&&h.getNextSibling()===null?T:h;for(let j=E.length-1;j>=0;j--){const A=E[j];if(A.is(h)||jt(A)&&A.isParentOf(h))break;A.isAttached()&&(!N.has(A)||A.is(b)?P||M.insertAfter(A,!1):A.remove())}if(!P){let j=k,A=null;for(;j!==null;){const D=j.getChildren(),L=D.length;(L===0||D[L-1].is(A))&&(v.delete(j.__key),A=j),j=j.getParent()}}if(lm(h))if(l===g)h.select();else{const j=la(t);j.select(),h.replace(j)}else h=h.spliceText(l,g-l,t,!0),h.getTextContent()===""?h.remove():h.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let j=1;j<f;j++){const A=d[j],D=A.__key;v.has(D)||A.remove()}}}removeText(){const t=dr()===this;Vb(this,noe(xM(this))),t&&dr()!==this&&Ji(this)}formatText(t,r=null){if(this.isCollapsed())return this.toggleFormat(t),void qi(null);const n=this.getNodes(),s=[];for(const E of n)fr(E)&&s.push(E);const a=E=>{n.forEach((N=>{if(jt(N)){const P=N.getFormatFlags(t,E);N.setTextFormat(P)}}))},i=s.length;if(i===0)return this.toggleFormat(t),qi(null),void a(r);const o=this.anchor,l=this.focus,u=this.isBackward(),d=u?l:o,f=u?o:l;let h=0,g=s[0],x=d.type==="element"?0:d.offset;if(d.type==="text"&&x===g.getTextContentSize()&&(h=1,g=s[1],x=0),g==null)return;const y=g.getFormatFlags(t,r);a(y);const v=i-1;let T=s[v];const k=f.type==="text"?f.offset:T.getTextContentSize();if(g.is(T)){if(x===k)return;if(Ld(g)||x===0&&k===g.getTextContentSize())g.setFormat(y);else{const E=g.splitText(x,k),N=x===0?E[0]:E[1];N.setFormat(y),d.type==="text"&&d.set(N.__key,0,"text"),f.type==="text"&&f.set(N.__key,k-x,"text")}return void(this.format=y)}x===0||Ld(g)||([,g]=g.splitText(x),x=0),g.setFormat(y);const b=T.getFormatFlags(t,y);k>0&&(k===T.getTextContentSize()||Ld(T)||([T]=T.splitText(k)),T.setFormat(b));for(let E=h+1;E<v;E++){const N=s[E],P=N.getFormatFlags(t,b);N.setFormat(P)}d.type==="text"&&d.set(g.__key,x,"text"),f.type==="text"&&f.set(T.__key,k,"text"),this.format=y|b}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const x=dr();return Gt(x)||Jt(134),x.insertNodes(t)}const r=(this.isBackward()?this.focus:this.anchor).getNode(),n=f5(r,fc),s=t[t.length-1];if(jt(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const x=l5(this);n.splice(x,0,t),s.selectEnd()}return}if(!t.some((x=>(jt(x)||Un(x))&&!x.isInline()))){jt(n)||Jt(211,r.constructor.name,r.getType());const x=l5(this);return n.splice(x,0,t),void s.selectEnd()}const a=(function(x){const y=Cs();let v=null;for(let T=0;T<x.length;T++){const k=x[T],b=Xd(k);if(b||Un(k)&&k.isInline()||jt(k)&&k.isInline()||fr(k)||k.isParentRequired()){if(v===null&&(v=k.createParentElementNode(),y.append(v),b))continue;v!==null&&v.append(k)}else y.append(k),v=null}return y})(t),i=a.getLastDescendant(),o=a.getChildren(),l=!jt(n)||!n.isEmpty()?this.insertParagraph():null,u=o[o.length-1];let d=o[0];var f;jt(f=d)&&fc(f)&&!f.isEmpty()&&jt(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(jt(n)||Jt(211,r.constructor.name,r.getType()),n.append(...d.getChildren()),d=o[1]),d&&(n===null&&Jt(212,r.constructor.name,r.getType()),(function(x,y,v){const T=y.getParentOrThrow().getLastChild();let k=y;const b=[y];for(;k!==T;)k.getNextSibling()||Jt(140),k=k.getNextSibling(),b.push(k);let E=x;for(const N of b)E=E.insertAfter(N)})(n,d));const h=f5(i,fc);l&&jt(h)&&(l.canMergeWhenEmpty()||fc(u))&&(h.append(...l.getChildren()),l.remove()),jt(n)&&n.isEmpty()&&n.remove(),i.selectEnd();const g=jt(n)?n.getLastChild():null;Xd(g)&&h!==n&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=Cs();return Ls().splice(this.anchor.offset,0,[i]),i.select(),i}const t=l5(this),r=f5(this.anchor.getNode(),fc);jt(r)||Jt(213);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],a=r.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const r=Xu();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,a=this.focus;let i=t[0],o=t[n];const[l,u]=d8(this);if(r===0)return[];if(r===1){if(fr(i)&&!this.isCollapsed()){const f=l>u?u:l,h=l>u?l:u,g=i.splitText(f,h),x=f===0?g[0]:g[1];return x!=null?[x]:[]}return[i]}const d=s.isBefore(a);if(fr(i)){const f=d?l:u;f===i.getTextContentSize()?t.shift():f!==0&&([,i]=i.splitText(f),t[0]=i)}if(fr(o)){const f=o.getTextContent().length,h=d?u:l;h===0?t.pop():h!==f&&([o]=o.splitText(h),t[n]=o)}return t}modify(t,r,n){if(QP(this,t,r,n))return;const s=t==="move",a=Js(),i=ou(vc(a));if(!i)return;const o=a._blockCursorElement,l=a._rootElement,u=this.focus.getNode();if(l===null||o===null||!jt(u)||u.isInline()||u.canBeEmpty()||p8(o,a,l),this.dirty){let d=Tm(a,this.anchor.key),f=Tm(a,this.focus.key);this.anchor.type==="text"&&(d=zp(d)),this.focus.type==="text"&&(f=zp(f)),d&&f&&Hz(i,d,this.anchor.offset,f,this.focus.offset)}if((function(d,f,h,g){d.modify(f,h,g)})(i,t,r?"backward":"forward",n),i.rangeCount>0){const d=i.getRangeAt(0),f=this.anchor.getNode(),h=ri(f)?f:zie(f);if(this.applyDOMRange(d),this.dirty=!0,!s){const g=this.getNodes(),x=[];let y=!1;for(let v=0;v<g.length;v++){const T=g[v];g8(T,h)?x.push(T):y=!0}if(y&&x.length>0)if(r){const v=x[0];jt(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=x[x.length-1];jt(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||(function(v){const T=v.focus,k=v.anchor,b=k.key,E=k.offset,N=k.type;k.set(T.key,T.offset,T.type,!0),T.set(b,E,N,!0)})(this)}}n==="lineboundary"&&QP(this,t,r,n,"decorators")}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&jt(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),a=r.getNextSibling()||(s===null?null:s.getNextSibling());if(jt(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const a=mC(o0(n,t?"previous":"next"));if(a.getTextSlices().every((o=>o===null||o.distance===0))){let o={type:"initial"};for(const l of a.iterNodeCarets("shadowRoot"))if(Ku(l)){if(!l.origin.isInline()){if(l.origin.isShadowRoot()){if(o.type==="merge-block")break;if(jt(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=hc(l);Vb(this,Rf(u,u)),a.anchor.origin.remove()}return}o.type!=="merge-next-block"&&o.type!=="merge-block"||(o={block:o.block,caret:l,type:"merge-block"})}}else{if(o.type==="merge-block")break;if(Nm(l)){if(jt(l.origin)){if(l.origin.isInline()){if(!l.origin.isParentOf(a.anchor.origin))break}else o={block:l.origin,type:"merge-next-block"};continue}if(Un(l.origin)){if(!l.origin.isIsolated())if(o.type==="merge-next-block"&&(l.origin.isKeyboardSelectable()||!l.origin.isInline())&&jt(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=G7();u.add(l.origin.getKey()),Ji(u)}else l.origin.remove();return}break}}if(o.type==="merge-block"){const{caret:l,block:u}=o;return Vb(this,Rf(!l.origin.isEmpty()&&u.isEmpty()?pC(Xi(u,l.direction)):a.anchor,l)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&VP(this,n.getNode()))return}else{const o=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,o!==null&&o.isSegmented()){const l=i.offset,u=o.getTextContentSize();if(o.is(s)||t&&l!==u||!t&&l!==0)return void qP(o,t,l)}else if(s!==null&&s.isSegmented()){const l=n.offset,u=s.getTextContentSize();if(s.is(o)||t&&l!==0||!t&&l!==u)return void qP(s,t,l)}(function(l,u){const d=l.anchor,f=l.focus,h=d.getNode(),g=f.getNode();if(h===g&&d.type==="text"&&f.type==="text"){const x=d.offset,y=f.offset,v=x<y,T=v?x:y,k=v?y:x,b=k-1;T!==b&&(function(E){return!(sU(E)||vie(E))})(h.getTextContent().slice(T,k))&&(u?f.set(f.key,b,f.type):d.set(d.key,b,d.type))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&ri(n.getParent())&&n.getPreviousSibling()===null&&VP(this,n)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function oo(e){return e instanceof $_}function GP(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function d8(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[GP(r),GP(n)]}function VP(e,t){for(let r=t;r;r=r.getParent()){if(jt(r)){if(r.collapseAtStart(e))return!0;if(zo(r))break}if(r.getPreviousSibling())break}return!1}const vie=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function qP(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,o=0;for(let u=0;u<a;u++){const d=u===a-1;if(o=i,i+=s[u].length,t&&i===r||i>r||d){s.splice(u,1),d&&(o=void 0);break}}const l=s.join("").trim();l===""?n.remove():(n.setTextContent(l),n.select(o,o))}function KP(e,t,r,n){let s,a=t;if(Es(e)){let i=!1;const o=e.childNodes,l=o.length,u=n._blockCursorElement;a===l&&(i=!0,a=l-1);let d=o[a],f=!1;if(d===u)d=o[a+1],f=!0;else if(u!==null){const h=u.parentNode;e===h&&t>Array.prototype.indexOf.call(h.children,u)&&a--}if(s=yp(d),fr(s))a=jf(s,i?"next":"previous");else{let h=yp(e);if(h===null)return null;if(jt(h)){const g=n.getElementByKey(h.getKey());g===null&&Jt(214),[h,a]=h.getDOMSlot(g).resolveChildIndex(h,g,e,t),jt(h)||Jt(215),i&&a>=h.getChildrenSize()&&(a=Math.max(0,h.getChildrenSize()-1));let y=h.getChildAtIndex(a);if(jt(y)&&(function(v,T,k){const b=v.getParent();return k===null||b===null||!b.canBeEmpty()||b!==k.getNode()})(y,0,r)){const v=i?y.getLastDescendant():y.getFirstDescendant();v===null?h=y:(y=v,h=jt(y)?y:y.getParentOrThrow()),a=0}fr(y)?(s=y,h=null,a=jf(y,i?"next":"previous")):y!==h&&i&&!f&&(jt(h)||Jt(216),a=Math.min(h.getChildrenSize(),a+1))}else{const g=h.getIndexWithinParent();a=t===0&&Un(h)&&yp(e)===h?g:g+1,h=h.getParentOrThrow()}if(jt(h))return Ju(h.__key,a,"element")}}else s=yp(e);return fr(s)?Ju(s.__key,jf(s,a,"clamp"),"text"):null}function YP(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((r||!t)&&a===null&&jt(i)&&i.isInline()){const o=i.getPreviousSibling();fr(o)&&e.set(o.__key,o.getTextContent().length,"text")}}else jt(a)&&!r&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):fr(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(n===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&jt(a)&&a.isInline())e.set(a.__key,0,"element");else if((r||t)&&a===null&&jt(i)&&i.isInline()&&!i.canInsertTextAfter()){const o=i.getNextSibling();fr(o)&&e.set(o.__key,0,"text")}}}function zz(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);YP(e,n,s),YP(t,!n,s),s&&t.set(e.key,e.offset,e.type);const a=Js();if(a.isComposing()&&a._compositionKey!==e.key&&Gt(r)){const i=r.anchor,o=r.focus;e.set(i.key,i.offset,i.type,!0),t.set(o.key,o.offset,o.type,!0)}}}function Uz(e,t,r,n,s,a){if(e===null||r===null||!l2(s,e,r))return null;const i=KP(e,t,Gt(a)?a.anchor:null,s);if(i===null)return null;const o=KP(r,n,Gt(a)?a.focus:null,s);if(o===null)return null;if(i.type==="element"&&o.type==="element"){const l=yp(e),u=yp(r);if(Un(l)&&Un(u))return null}return zz(i,o,a),[i,o]}function f8(e){return jt(e)&&!e.isInline()}function Wz(e,t,r,n,s,a){const i=Xf(),o=new Hm(Ju(e,t,s),Ju(r,n,a),0,"");return o.dirty=!0,i._selection=o,o}function z_(){const e=Ju("root",0,"element"),t=Ju("root",0,"element");return new Hm(e,t,0,"")}function G7(){return new $_(new Set)}function V7(e,t,r,n){const s=r._window;if(s===null)return null;const a=n||s.event,i=a?a.type:void 0,o=i==="selectionchange",l=!Xk&&(o||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,f,h;if(Gt(e)&&!l)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,f=t.anchorOffset,h=t.focusOffset,o&&Gt(e)&&!l2(r,u,d))return e.clone();const g=Uz(u,f,d,h,r,e);if(g===null)return null;const[x,y]=g;return new Hm(x,y,Gt(e)?e.format:0,Gt(e)?e.style:"")}function dr(){return Xf()._selection}function u1(){return Js()._editorState._selection}function x4(e,t,r,n=1){const s=e.anchor,a=e.focus,i=s.getNode(),o=a.getNode();if(!t.is(i)&&!t.is(o))return;const l=t.__key;if(e.isCollapsed()){const u=s.offset;if(r<=u&&n>0||r<u&&n<0){const d=Math.max(0,u+n);s.set(l,d,"element"),a.set(l,d,"element"),XP(e)}}else{const u=e.isBackward(),d=u?a:s,f=d.getNode(),h=u?s:a,g=h.getNode();if(t.is(f)){const x=d.offset;(r<=x&&n>0||r<x&&n<0)&&d.set(l,Math.max(0,x+n),"element")}if(t.is(g)){const x=h.offset;(r<=x&&n>0||r<x&&n<0)&&h.set(l,Math.max(0,x+n),"element")}}XP(e)}function XP(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,a=t.getNode(),i=n.getNode();if(e.isCollapsed()){if(!jt(a))return;const o=a.getChildrenSize(),l=r>=o,u=l?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(fr(u)){let d=0;l&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),n.set(u.__key,d,"text")}}else{if(jt(a)){const o=a.getChildrenSize(),l=r>=o,u=l?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(fr(u)){let d=0;l&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(jt(i)){const o=i.getChildrenSize(),l=s>=o,u=l?i.getChildAtIndex(o-1):i.getChildAtIndex(s);if(fr(u)){let d=0;l&&(d=u.getTextContentSize()),n.set(u.__key,d,"text")}}}}function y4(e,t,r,n,s){let a=null,i=0,o=null;n!==null?(a=n.__key,fr(n)?(i=n.getTextContentSize(),o="text"):jt(n)&&(i=n.getChildrenSize(),o="element")):s!==null&&(a=s.__key,fr(s)?o="text":jt(s)&&(o="element")),a!==null&&o!==null?e.set(a,i,o):(i=t.getIndexWithinParent(),i===-1&&(i=r.getChildrenSize()),e.set(r.__key,i,"element"))}function JP(e,t,r,n,s){e.type==="text"?e.set(r,e.offset+(t?0:s),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function Hz(e,t,r,n,s){try{e.setBaseAndExtent(t,r,n,s)}catch{}}function wie(e,t,r,n,s,a,i){const o=n.anchorNode,l=n.focusNode,u=n.anchorOffset,d=n.focusOffset,f=document.activeElement;if(s.has(Xz)&&f!==a||f!==null&&eC(f))return;if(!Gt(t))return void(e!==null&&l2(r,o,l)&&n.removeAllRanges());const h=t.anchor,g=t.focus,x=h.key,y=g.key,v=Tm(r,x),T=Tm(r,y),k=h.offset,b=g.offset,E=t.format,N=t.style,P=t.isCollapsed();let M=v,j=T,A=!1;if(h.type==="text"){M=zp(v);const Q=h.getNode();A=Q.getFormat()!==E||Q.getStyle()!==N}else Gt(e)&&e.anchor.type==="text"&&(A=!0);var D,L,G,X,se;if(g.type==="text"&&(j=zp(T)),M!==null&&j!==null&&(P&&(e===null||A||Gt(e)&&(e.format!==E||e.style!==N))&&(D=E,L=N,G=k,X=x,se=performance.now(),Fz=[D,L,G,X,se]),u!==k||d!==b||o!==M||l!==j||n.type==="Range"&&P||(f!==null&&a.contains(f)||a.focus({preventScroll:!0}),h.type==="element"))){if(Hz(n,M,k,j,b),!s.has(Eie)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const Q=Gt(t)&&t.anchor.type==="element"?M.childNodes[k]||null:n.rangeCount>0?n.getRangeAt(0):null;if(Q!==null){let re;if(Q instanceof Text){const B=document.createRange();B.selectNode(Q),re=B.getBoundingClientRect()}else re=Q.getBoundingClientRect();(function(B,V,R){const H=lU(R),z=iC(H);if(H===null||z===null)return;let{top:I,bottom:W}=V,K=0,ee=0,oe=R;for(;oe!==null;){const Z=oe===H.body;if(Z)K=0,ee=vc(B).innerHeight;else{const ue=oe.getBoundingClientRect();K=ue.top,ee=ue.bottom}let le=0;if(I<K?le=-(K-I):W>ee&&(le=W-ee),le!==0)if(Z)z.scrollBy(0,le);else{const ue=oe.scrollTop;oe.scrollTop+=le;const de=oe.scrollTop-ue;I-=de,W-=de}if(Z)break;oe=c2(oe)}})(r,re,a)}}l8=!0}}function bie(e){let t=dr()||u1();t===null&&(t=Ls().selectEnd()),t.insertNodes(e)}function l5(e){let t=e;e.isCollapsed()||t.removeText();const r=dr();Gt(r)&&(t=r),Gt(t)||Jt(161);const n=t.anchor;let s=n.getNode(),a=n.offset;for(;!fc(s);){const i=s;if([s,a]=_ie(s,a),i.is(s))break}return a}function _ie(e,t){const r=e.getParent();if(!r){const s=Cs();return Ls().append(s),s.select(),[Ls(),0]}if(fr(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const a=t===0?0:1;return[r,s[0].getIndexWithinParent()+a]}if(!jt(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new Hm(Ju(e.__key,t,"element"),Ju(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}function QP(e,t,r,n,s="decorators-and-blocks"){if(t==="move"&&n==="character"&&!e.isCollapsed()){const[d,f]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return f.set(d.key,d.offset,d.type),!0}const a=o0(e.focus,r?"previous":"next"),i=n==="lineboundary",o=t==="move";let l=a,u=s==="decorators-and-blocks";if(!fU(l)){for(const d of l){u=!1;const{origin:f}=d;if(!Un(f)||f.isIsolated()||(l=d,!i||!f.isInline()))break}if(u)for(const d of mC(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(Ku(d))d.origin.isInline()||(l=d);else{if(jt(d.origin))continue;Un(d.origin)&&!d.origin.isInline()&&(l=d)}break}}if(l===a)return!1;if(o&&!i&&Un(l.origin)&&l.origin.isKeyboardSelectable()){const d=G7();return d.add(l.origin.getKey()),Ji(d),!0}return l=hc(l),o&&jm(e.anchor,l),jm(e.focus,l),u||!i}let wi=null,bi=null,cl=!1,c5=!1,Hb=0;const ZP={characterData:!0,childList:!0,subtree:!0};function a2(){return cl||wi!==null&&wi._readOnly}function Vi(){cl&&Jt(13)}function Gz(){Hb>99&&Jt(14)}function Xf(){return wi===null&&Jt(195,Vz()),wi}function Js(){return bi===null&&Jt(196,Vz()),bi}function Vz(){let e=0;const t=new Set,r=H_.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=G_(s);if(tC(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===r&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function Sie(){return bi}function eM(e,t,r){const n=t.__type,s=Qz(e,n);let a=r.get(n);a===void 0&&(a=Array.from(s.transforms),r.set(n,a));const i=a.length;for(let o=0;o<i&&(a[o](t),t.isAttached());o++);}function tM(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function qz(e,t){if(!t)return;const r=e._updateTags;let n=t;Array.isArray(t)||(n=[t]);for(const s of n)r.add(s)}function kie(e){return q7(e,Js()._nodes)}function q7(e,t){const r=e.type,n=t.get(r);n===void 0&&Jt(17,r);const s=n.klass;e.type!==s.getType()&&Jt(18,s.name);const a=s.importJSON(e),i=e.children;if(jt(a)&&Array.isArray(i))for(let o=0;o<i.length;o++){const l=q7(i[o],t);a.append(l)}return a}function rM(e,t,r){const n=wi,s=cl,a=bi;wi=t,cl=!0,bi=e;try{return r()}finally{wi=n,cl=s,bi=a}}function zd(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const a=e._editorState,i=a._selection,o=r._selection,l=e._dirtyType!==bm,u=wi,d=cl,f=bi,h=e._updating,g=e._observer;let x=null;if(e._pendingEditorState=null,e._editorState=r,!s&&l&&g!==null){bi=e,wi=r,cl=!1,e._updating=!0;try{const P=e._dirtyType,M=e._dirtyElements,j=e._dirtyLeaves;g.disconnect(),x=Qae(a,r,e,P,M,j)}catch(P){if(P instanceof Error&&e._onError(P),c5)throw P;return Jz(e,null,n,r),uz(e),e._dirtyType=$p,c5=!0,zd(e,a),void(c5=!1)}finally{g.observe(n,ZP),e._updating=h,wi=u,cl=d,bi=f}}r._readOnly||(r._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,T=e._normalizedNodes,k=e._updateTags,b=e._deferred;l&&(e._dirtyType=bm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),(function(P,M){const j=P._decorators;let A=P._pendingDecorators||j;const D=M._nodeMap;let L;for(L in A)D.has(L)||(A===j&&(A=rU(P)),delete A[L])})(e,r);const E=s?null:ou(vc(e));if(e._editable&&E!==null&&(l||o===null||o.dirty)&&n!==null&&!k.has(Nie)){bi=e,wi=r;try{if(g!==null&&g.disconnect(),l||o===null||o.dirty){const P=e._blockCursorElement;P!==null&&p8(P,e,n),wie(i,o,e,E,k,n)}(function(P,M,j){let A=P._blockCursorElement;if(Gt(j)&&j.isCollapsed()&&j.anchor.type==="element"&&M.contains(document.activeElement)){const D=j.anchor,L=D.getNode(),G=D.offset;let X=!1,se=null;if(G===L.getChildrenSize())d5(L.getChildAtIndex(G-1))&&(X=!0);else{const Q=L.getChildAtIndex(G);if(Q!==null&&d5(Q)){const re=Q.getPreviousSibling();(re===null||d5(re))&&(X=!0,se=P.getElementByKey(Q.__key))}}if(X){const Q=P.getElementByKey(L.__key);return A===null&&(P._blockCursorElement=A=(function(re){const B=re.theme,V=document.createElement("div");V.contentEditable="false",V.setAttribute("data-lexical-cursor","true");let R=B.blockCursor;if(R!==void 0){if(typeof R=="string"){const H=az(R);R=B.blockCursor=H}R!==void 0&&V.classList.add(...R)}return V})(P._config)),M.style.caretColor="transparent",void(se===null?Q.appendChild(A):Q.insertBefore(A,se))}}A!==null&&p8(A,P,M)})(e,n,o)}finally{g!==null&&g.observe(n,ZP),bi=f,wi=u}}x!==null&&(function(P,M,j,A,D){const L=Array.from(P._listeners.mutation),G=L.length;for(let X=0;X<G;X++){const[se,Q]=L[X];for(const re of Q){const B=M.get(re);B!==void 0&&se(B,{dirtyLeaves:A,prevEditorState:D,updateTags:j})}}})(e,x,k,y,a),Gt(o)||o===null||i!==null&&i.is(o)||e.dispatchCommand(xz,void 0);const N=e._pendingDecorators;N!==null&&(e._decorators=N,e._pendingDecorators=null,Gy("decorator",e,!0,N)),(function(P,M,j){const A=oM(M),D=oM(j);A!==D&&Gy("textcontent",P,!0,D)})(e,t||a,r),Gy("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:r,mutatedNodes:x,normalizedNodes:T,prevEditorState:t||a,tags:k}),(function(P,M){if(P._deferred=[],M.length!==0){const j=P._updating;P._updating=!0;try{for(let A=0;A<M.length;A++)M[A]()}finally{P._updating=j}}})(e,b),(function(P){const M=P._updates;if(M.length!==0){const j=M.shift();if(j){const[A,D]=j;U_(P,A,D)}}})(e)}function Gy(e,t,r,...n){const s=t._updating;t._updating=r;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,n)}finally{t._updating=s}}function nM(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[a,i]=s,o=e._pendingEditorState;let l;i!==void 0&&(l=i.onUpdate,i.skipTransforms&&(n=!0),i.discrete&&(o===null&&Jt(191),o._flushSync=!0),l&&e._deferred.push(l),qz(e,i.tag)),o==null?U_(e,a,i):a()}}return n}function U_(e,t,r){const n=e._updateTags;let s,a=!1,i=!1;r!==void 0&&(s=r.onUpdate,qz(e,r.tag),a=r.skipTransforms||!1,i=r.discrete||!1),s&&e._deferred.push(s);const o=e._editorState;let l=e._pendingEditorState,u=!1;(l===null||l._readOnly)&&(l=e._pendingEditorState=Kz(l||o),u=!0),l._flushSync=i;const d=wi,f=cl,h=bi,g=e._updating;wi=l,cl=!1,e._updating=!0,bi=e;const x=e._headless||e.getRootElement()===null;Q7(null);try{u&&(x?o._selection!==null&&(l._selection=o._selection.clone()):l._selection=(function(k,b){const E=k.getEditorState()._selection,N=ou(vc(k));return Gt(E)||E==null?V7(E,N,k,b):E.clone()})(e,r&&r.event||null));const v=e._compositionKey;t(),a=nM(e,a),(function(k,b){const E=b.getEditorState()._selection,N=k._selection;if(Gt(N)){const P=N.anchor,M=N.focus;let j;if(P.type==="text"&&(j=P.getNode(),j.selectionTransform(E,N)),M.type==="text"){const A=M.getNode();j!==A&&A.selectionTransform(E,N)}}})(l,e),e._dirtyType!==bm&&(a?(function(k,b){const E=b._dirtyLeaves,N=k._nodeMap;for(const P of E){const M=N.get(P);fr(M)&&M.isAttached()&&M.isSimpleText()&&!M.isUnmergeable()&&FP(M)}})(l,e):(function(k,b){const E=b._dirtyLeaves,N=b._dirtyElements,P=k._nodeMap,M=_f(),j=new Map;let A=E,D=A.size,L=N,G=L.size;for(;D>0||G>0;){if(D>0){b._dirtyLeaves=new Set;for(const X of A){const se=P.get(X);fr(se)&&se.isAttached()&&se.isSimpleText()&&!se.isUnmergeable()&&FP(se),se!==void 0&&tM(se,M)&&eM(b,se,j),E.add(X)}if(A=b._dirtyLeaves,D=A.size,D>0){Hb++;continue}}b._dirtyLeaves=new Set,b._dirtyElements=new Map,L.delete("root")&&L.set("root",!0);for(const X of L){const se=X[0],Q=X[1];if(N.set(se,Q),!Q)continue;const re=P.get(se);re!==void 0&&tM(re,M)&&eM(b,re,j)}A=b._dirtyLeaves,D=A.size,L=b._dirtyElements,G=L.size,Hb++}b._dirtyLeaves=E,b._dirtyElements=N})(l,e),nM(e),(function(k,b,E,N){const P=k._nodeMap,M=b._nodeMap,j=[];for(const[A]of N){const D=M.get(A);D!==void 0&&(D.isAttached()||(jt(D)&&oz(D,A,P,M,j,N),P.has(A)||N.delete(A),j.push(A)))}for(const A of j)M.delete(A);for(const A of E){const D=M.get(A);D===void 0||D.isAttached()||(P.has(A)||E.delete(A),M.delete(A))}})(o,l,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(l._flushSync=!0);const T=l._selection;if(Gt(T)){const k=l._nodeMap,b=T.anchor.key,E=T.focus.key;k.get(b)!==void 0&&k.get(E)!==void 0||Jt(19)}else oo(T)&&T._nodes.size===0&&(l._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=o,e._dirtyType=$p,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void zd(e)}finally{wi=d,cl=f,bi=h,e._updating=g,Hb=0}e._dirtyType!==bm||e._deferred.length>0||(function(v,T){const k=T.getEditorState()._selection,b=v._selection;if(b!==null){if(b.dirty||!b.is(k))return!0}else if(k!==null)return!0;return!1})(l,e)?l._flushSync?(l._flushSync=!1,zd(e)):u&&Fie((()=>{zd(e)})):(l._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function El(e,t,r){bi===e&&r===void 0?t():U_(e,t,r)}class Vy{constructor(t,r,n){this.element=t,this.before=r||null,this.after=n||null}withBefore(t){return new Vy(this.element,t,this.after)}withAfter(t){return new Vy(this.element,this.before,t)}withElement(t){return this.element===t?this:new Vy(t,this.before,this.after)}insertChild(t){const r=this.before||this.getManagedLineBreak();return r!==null&&r.parentElement!==this.element&&Jt(222),this.element.insertBefore(t,r),this}removeChild(t){return t.parentElement!==this.element&&Jt(223),this.element.removeChild(t),this}replaceChild(t,r){return r.parentElement!==this.element&&Jt(224),this.element.replaceChild(t,r),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const r=t==="decorator"&&(Bp||gv);this.insertManagedLineBreak(r)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const r=this.element,n=t.nodeName==="IMG"?t.nextSibling:null;n&&r.removeChild(n),r.removeChild(t),r.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const r=this.getManagedLineBreak();if(r){if(t===(r.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,s=this.before,a=document.createElement("br");if(n.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",n.insertBefore(i,a),n.__lexicalLineBreak=i}else n.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let r=this.after;r!==null;r=r.previousSibling)t++;return t}resolveChildIndex(t,r,n,s){if(n===this.element){const l=this.getFirstChildOffset();return[t,Math.min(l+t.getChildrenSize(),Math.max(l,s))]}const a=sM(r,n);a.push(s);const i=sM(r,this.element);let o=t.getIndexWithinParent();for(let l=0;l<i.length;l++){const u=a[l],d=i[l];if(u===void 0||u<d)break;if(u>d){o+=1;break}}return[t.getParentOrThrow(),o]}}function sM(e,t){const r=[];let n=t;for(;n!==e&&n!==null;n=n.parentNode){let s=0;for(let a=n.previousSibling;a!==null;a=a.previousSibling)s++;r.push(s)}return n!==e&&Jt(225),r.reverse()}class vo extends l1{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return Bae[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=Js()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(fr(r)&&t.push(r),jt(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;jt(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;jt(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const a=r[n-1];return jt(a)&&a.getLastDescendant()||a||null}const s=r[t];return jt(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Ba(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&Jt(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Ba(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&Jt(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContent(),jt(a)&&s!==n-1&&!a.isInline()&&(t+=i0)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContentSize(),jt(a)&&s!==n-1&&!a.isInline()&&(t+=i0.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=TP[t];return!!(this.getFormat()&r)}return!1}hasTextFormat(t){const r=_m[t];return!!(this.getTextFormat()&r)}getFormatFlags(t,r){return w4(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){Vi();const n=dr();let s=t,a=r;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const l=this.getFirstChild();if(fr(l)||jt(l))return l.select(0,0)}else if(!(t!==void 0&&t!==i||r!==void 0&&r!==i)){const l=this.getLastChild();if(fr(l)||jt(l))return l.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const o=this.__key;return Gt(n)?(n.anchor.set(o,s,"element"),n.focus.set(o,a,"element"),n.dirty=!0,n):Wz(o,s,o,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((r=>r.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?TP[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,a=this.getChildrenSize(),i=this.getWritable();t+r<=a||Jt(226,String(t),String(r),String(a));const o=i.__key,l=[],u=[],d=this.getChildAtIndex(t+r);let f=null,h=a-r+s;if(t!==0)if(t===a)f=this.getLastChild();else{const x=this.getChildAtIndex(t);x!==null&&(f=x.getPreviousSibling())}if(r>0){let x=f===null?this.getFirstChild():f.getNextSibling();for(let y=0;y<r;y++){x===null&&Jt(100);const v=x.getNextSibling(),T=x.__key;cm(x.getWritable()),u.push(T),x=v}}let g=f;for(let x=0;x<s;x++){const y=n[x];g!==null&&y.is(g)&&(f=g=g.getPreviousSibling());const v=y.getWritable();v.__parent===o&&h--,cm(v);const T=y.__key;if(g===null)i.__first=T,v.__prev=null;else{const k=g.getWritable();k.__next=T,v.__prev=k.__key}y.__key===o&&Jt(76),v.__parent=o,l.push(T),g=y}if(t+r===a)g!==null&&(g.getWritable().__next=null,i.__last=g.__key);else if(d!==null){const x=d.getWritable();if(g!==null){const y=g.getWritable();x.__prev=g.__key,y.__next=d.__key}else x.__prev=null}if(i.__size=h,u.length){const x=dr();if(Gt(x)){const y=new Set(u),v=new Set(l),{anchor:T,focus:k}=x;aM(T,y,v)&&y4(T,T.getNode(),this,f,d),aM(k,y,v)&&y4(k,k.getNode(),this,f,d),h!==0||this.canBeEmpty()||zo(this)||this.remove()}}return i}getDOMSlot(t){return new Vy(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(Es(r)){const n=this.getIndent();n>0&&(r.style.paddingInlineStart=40*n+"px");const s=this.getDirection();s&&(r.dir=s)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),n=this.getTextStyle();return r!==0&&(t.textFormat=r),n!==""&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const n=this.getDOMSlot(t);let s=n.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=r.getElementByKey(a.getKey());i!==null&&(s==null?(n.insertChild(i),s=i):s!==i&&n.replaceChild(i,s),s=s.nextSibling)}}}function jt(e){return e instanceof vo}function aM(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}let K7=class extends l1{decorate(t,r){Jt(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}};function Un(e){return e instanceof K7}class i2 extends vo{static getType(){return"root"}static clone(){return new i2}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){Jt(51)}getTextContent(){const t=this.__cachedText;return!a2()&&Js()._dirtyType!==bm||t===null?super.getTextContent():t}remove(){Jt(52)}replace(t){Jt(53)}insertBefore(t){Jt(54)}insertAfter(t){Jt(55)}updateDOM(t,r){return!1}splice(t,r,n){for(const s of n)jt(s)||Un(s)||Jt(282);return super.splice(t,r,n)}static importJSON(t){return Ls().updateFromJSON(t)}collapseAtStart(){return!0}}function ri(e){return e instanceof i2}function Kz(e){return new W_(new Map(e._nodeMap))}function Y7(){return new W_(new Map([["root",new i2]]))}function Yz(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&Jt(130,r.name),jt(e)){const n=t.children;Array.isArray(n)||Jt(59,r.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=Yz(s[a]);n.push(i)}}return t}class W_{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,r){return rM(r&&r.editor||null,this,t)}clone(t){const r=new W_(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return rM(null,this,(()=>({root:Yz(Ls())})))}}const v4="historic",Tie="history-push",qy="history-merge",Cie="paste",Xz="collaboration",Eie="skip-scroll-into-view",Nie="skip-dom-selection";class X7 extends vo{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class o2 extends vo{static getType(){return"paragraph"}static clone(t){return new o2(t.__key)}createDOM(t){const r=document.createElement("p"),n=Cp(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:Aie,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Es(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n)}return{element:r}}static importJSON(t){return Cs().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,r){const n=Cs();n.setTextFormat(t.format),n.setTextStyle(t.style);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||fr(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Aie(e){const t=Cs();return e.style&&(t.setFormat(e.style.textAlign),lC(e,t)),{node:t}}function Cs(){return Ho(new o2)}function J7(e){return e instanceof o2}const Dn=0,lp=1,jie=4;function Jz(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=Y7(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=bm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function Pie(e){const t=e||{},r=Sie(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,a=t.disableEvents||!1,i=Y7(),o=t.namespace||(s!==null?s._config.namespace:aU()),l=t.editorState,u=[i2,Yf,n2,s2,o2,X7,...t.nodes||[]],{onError:d,html:f}=t,h=t.editable===void 0||t.editable;let g;if(e===void 0&&r!==null)g=r._nodes;else{g=new Map;for(let y=0;y<u.length;y++){let v=u[y],T=null,k=null;if(typeof v!="function"){const M=v;v=M.replace,T=M.with,k=M.withKlass||null}const{ownNodeConfig:b}=cC(v),E=v.getType(),N=v.transform(),P=new Set;b&&b.$transform&&P.add(b.$transform),N!==null&&P.add(N),g.set(E,{exportDOM:f&&f.export?f.export.get(v):void 0,klass:v,replace:T,replaceWithKlass:k,sharedNodeState:qae(u[y]),transforms:P})}}const x=new H_(i,s,g,{disableEvents:a,namespace:o,theme:n},d||console.error,(function(y,v){const T=new Map,k=new Set,b=E=>{Object.keys(E).forEach((N=>{let P=T.get(N);P===void 0&&(P=[],T.set(N,P)),P.push(E[N])}))};return y.forEach((E=>{const N=E.klass.importDOM;if(N==null||k.has(N))return;k.add(N);const P=N.call(E.klass);P!==null&&b(P)})),v&&b(v),T})(g,f?f.import:void 0),h,e);return l!==void 0&&(x._pendingEditorState=l,x._dirtyType=$p),x}class H_{constructor(t,r,n,s,a,i,o,l){this._createEditorArgs=l,this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=bm,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=aU(),this._onError=a,this._htmlConversions=i,this._editable=o,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&Jt(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&Jt(36,String(t));const i=a[n];return i.add(r),()=>{i.delete(r),a.every((o=>o.size===0))&&s.delete(t)}}registerMutationListener(t,r,n){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(r);i===void 0&&(i=new Set,a.set(r,i)),i.add(s);const o=n&&n.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(r,s),()=>{i.delete(s),i.size===0&&a.delete(r)}}getRegisteredNode(t){const r=this._nodes.get(t.getType());return r===void 0&&Jt(37,t.name),r}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,r){const n=this._editorState,s=mM(n).get(r.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,r){const n=this.getRegisteredNode(t);return n.transforms.add(r),n}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],a=n.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,r);s.push(i)}return(function(i,o){const l=mM(i.getEditorState()),u=[];for(const d of o){const f=l.get(d);f&&u.push(f)}u.length!==0&&i.update((()=>{for(const d of u)for(const f of d.keys()){const h=Ba(f);h&&h.markDirty()}}),i._pendingEditorState===null?{tag:qy}:void 0)})(this,s.map((i=>i.klass.getType()))),()=>{s.forEach((i=>i.transforms.delete(r)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return kr(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=Cp(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,Jz(this,r,t,s),r!==null&&(this._config.disableEvents||die(r),n!=null&&r.classList.remove(...n)),t!==null){const a=iC(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=$p,uz(this),this._updateTags.add(qy),zd(this),this._config.disableEvents||(function(o,l){const u=o.ownerDocument,d=p4.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",Lz),p4.set(u,(d||0)+1),o.__lexicalEditor=l;const f=Rz(o);for(let h=0;h<o8.length;h++){const[g,x]=o8[h],y=typeof x=="function"?v=>{$P(v)||(BP(v),(l.isEditable()||g==="click")&&x(v,l))}:v=>{if($P(v))return;BP(v);const T=l.isEditable();switch(g){case"cut":return T&&kr(l,W7,v);case"copy":return kr(l,L_,v);case"paste":return T&&kr(l,$7,v);case"dragstart":return T&&kr(l,Az,v);case"dragover":return T&&kr(l,jz,v);case"dragend":return T&&kr(l,aie,v);case"focus":return T&&kr(l,lie,v);case"blur":return T&&kr(l,cie,v);case"drop":return T&&kr(l,Ez,v)}};o.addEventListener(g,y),f.push((()=>{o.removeEventListener(g,y)}))}})(t,this),n!=null&&t.classList.add(...n)}else this._window=null,this._updateTags.add(qy),zd(this);Gy("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&Jt(38);let n=t;n._readOnly&&(n=Kz(t),n._selection=t._selection?t._selection.clone():null),cz(this);const s=this._pendingEditorState,a=this._updateTags,i=r!==void 0?r.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),zd(this)),this._pendingEditorState=n,this._dirtyType=$p,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||zd(this)}parseEditorState(t,r){return(function(n,s,a){const i=Y7(),o=wi,l=cl,u=bi,d=s._dirtyElements,f=s._dirtyLeaves,h=s._cloneNotNeeded,g=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,wi=i,cl=!1,bi=s,Q7(null);try{const x=s._nodes;q7(n.root,x),a&&a(),i._readOnly=!0}catch(x){x instanceof Error&&s._onError(x)}finally{s._dirtyElements=d,s._dirtyLeaves=f,s._cloneNotNeeded=h,s._dirtyType=g,wi=o,cl=l,bi=u}return i})(typeof t=="string"?JSON.parse(t):t,this,r)}read(t){return zd(this),this.getEditorState().read(t,{editor:this})}update(t,r){(function(n,s,a){n._updating?n._updates.push([s,a]):U_(n,s,a)})(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),El(this,(()=>{const s=dr(),a=Ls();s!==null?s.dirty||Ji(s.clone()):a.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),Lie("focus"),Bie((()=>{n.removeAttribute("autocapitalize"),t&&t()}))})),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=ou(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Gy("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}H_.version="0.35.0+prod.esm";let h8=null;function Q7(e){h8=e}let Mie=1;function Qz(e,t){const r=Z7(e,t);return r===void 0&&Jt(30,t),r}function Z7(e,t){return e._nodes.get(t)}const Fie=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function iM(e){return Un(If(e))}function eC(e){const t=document.activeElement;if(!Es(t))return!1;const r=t.nodeName;return Un(If(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&G_(t)==null)}function l2(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!eC(t)&&Zz(t)===e}catch{return!1}}function tC(e){return e instanceof H_}function Zz(e){let t=e;for(;t!=null;){const r=G_(t);if(tC(r))return r;t=c2(t)}return null}function G_(e){return e?e.__lexicalEditor:null}function lm(e){return B_(e)||e.isToken()}function Ld(e){return lm(e)||e.isSegmented()}function p0(e){return d1(e)&&e.nodeType===jae}function Die(e){return d1(e)&&e.nodeType===Pae}function zp(e){let t=e;for(;t!=null;){if(p0(t))return t;t=t.firstChild}return null}function w4(e,t,r){const n=_m[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function eU(e){return fr(e)||Xd(e)||Un(e)}function Oie(e,t){const r=(function(){const i=h8;return h8=null,i})();if((t=t||r&&r.__key)!=null)return void(e.__key=t);Vi(),Gz();const n=Js(),s=Xf(),a=""+Mie++;s._nodeMap.set(a,e),jt(e)?n._dirtyElements.set(a,!0):n._dirtyLeaves.add(a),n._cloneNotNeeded.add(a),n._dirtyType=iz,e.__key=a}function cm(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,o=s!==null?s.__key:null,l=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(n.__first=i),a===null&&(n.__last=o),l!==null&&(l.__next=i),u!==null&&(u.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function b4(e){Gz();const t=e.getLatest(),r=t.__parent,n=Xf(),s=Js(),a=n._nodeMap,i=s._dirtyElements;r!==null&&(function(l,u,d){let f=l;for(;f!==null;){if(d.has(f))return;const h=u.get(f);if(h===void 0)break;d.set(f,!1),f=h.__parent}})(r,a,i);const o=t.__key;s._dirtyType=iz,jt(e)?i.set(o,!0):s._dirtyLeaves.add(o)}function qi(e){Vi();const t=Js(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=Ba(r);n!==null&&n.getWritable()}if(e!==null){const n=Ba(e);n!==null&&n.getWritable()}}}function _f(){return a2()?null:Js()._compositionKey}function Ba(e,t){const r=(t||Xf())._nodeMap.get(e);return r===void 0?null:r}function tU(e,t){const r=V_(e,Js());return r!==void 0?Ba(r,t):null}function V_(e,t){return e[`__lexicalKey_${t._key}`]}function If(e,t){let r=e;for(;r!=null;){const n=tU(r,t);if(n!==null)return n;r=c2(r)}return null}function rU(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function oM(e){return e.read((()=>Ls().getTextContent()))}function Ls(){return nU(Xf())}function nU(e){return e._nodeMap.get("root")}function Ji(e){Vi();const t=Xf();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function yp(e){const t=Js(),r=(function(n,s){let a=n;for(;a!=null;){const i=V_(a,s);if(i!==void 0)return i;a=c2(a)}return null})(e,t);return r===null?e===t.getRootElement()?Ba("root"):null:Ba(r)}function sU(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function rC(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function aU(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function iU(e){return p0(e)?e.nodeValue:null}function nC(e,t,r){const n=ou(vc(t));if(n===null)return;const s=n.anchorNode;let{anchorOffset:a,focusOffset:i}=n;if(s!==null){let o=iU(s);const l=If(s);if(o!==null&&fr(l)){if(o===I_&&r){const u=r.length;o=r,a=u,i=u}o!==null&&sC(l,o,a,i,e)}}}function sC(e,t,r,n,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let o=t;(i||s)&&t[t.length-1]===I_&&(o=t.slice(0,-1));const l=a.getTextContent();if(s||o!==l){if(o===""){if(qi(null),gv||Bp||o4)a.remove();else{const y=Js();setTimeout((()=>{y.update((()=>{a.isAttached()&&a.remove()}))}),20)}return}const u=a.getParent(),d=u1(),f=a.getTextContentSize(),h=_f(),g=a.getKey();if(a.isToken()||h!==null&&g===h&&!i||Gt(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===f&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const x=dr();if(!Gt(x)||r===null||n===null)return void lM(a,o,x);if(x.setTextNodeRange(a,r,a,n),a.isSegmented()){const y=la(a.getTextContent());a.replace(y),a=y}lM(a,o,x)}}}function lM(e,t,r){if(e.setTextContent(t),Gt(r)){const n=e.getKey();for(const s of["anchor","focus"]){const a=r[s];a.type==="text"&&a.key===n&&(a.offset=jf(e,a.offset,"clamp"))}}}function Yw(e,t,r){const n=t[r]||!1;return n==="any"||n===e[r]}function Iie(e,t){return Yw(e,t,"altKey")&&Yw(e,t,"ctrlKey")&&Yw(e,t,"shiftKey")&&Yw(e,t,"metaKey")}function Zn(e,t,r){return Iie(e,r)&&e.key.toLowerCase()===t.toLowerCase()}const Rd={ctrlKey:!Ru,metaKey:Ru},cM={altKey:Ru,ctrlKey:!Ru};function uM(e){return e.key==="Backspace"}function dM(e){return Zn(e,"a",Rd)}function Rie(e){const t=Ls();if(Gt(e)){const r=e.anchor,n=e.focus,s=r.getNode().getTopLevelElementOrThrow().getParentOrThrow();return r.set(s.getKey(),0,"element"),n.set(s.getKey(),s.getChildrenSize(),"element"),u4(e),e}{const r=t.select(0,t.getChildrenSize());return Ji(u4(r)),r}}function Cp(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const a=az(s);return r[t]=a,a}return s}function aC(e,t,r,n,s){if(r.size===0)return;const a=n.__type,i=n.__key,o=t.get(a);o===void 0&&Jt(33,a);const l=o.klass;let u=e.get(l);u===void 0&&(u=new Map,e.set(l,u));const d=u.get(i),f=d==="destroyed"&&s==="created";(d===void 0||f)&&u.set(i,f?"updated":s)}function fM(e,t,r){const n=e.getParent();let s=r,a=e;return n!==null&&(t&&r===0?(s=a.getIndexWithinParent(),a=n):t||r!==a.getChildrenSize()||(s=a.getIndexWithinParent()+1,a=n)),a.getChildAtIndex(t?s-1:s)}function m8(e,t){const r=e.offset;if(e.type==="element")return fM(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?fM(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function oU(e){const t=vc(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function kr(e,t,r){return(function(n,s,a){const i=rC(n);for(let o=4;o>=0;o--)for(let l=0;l<i.length;l++){const u=i[l],d=u._commands.get(s);if(d!==void 0){const f=d[o];if(f!==void 0){const h=Array.from(f),g=h.length;let x=!1;if(El(u,(()=>{for(let y=0;y<g;y++)if(h[y](a,n))return void(x=!0)})),x)return x}}}return!1})(e,t,r)}function q_(e){return!ri(e)&&!e.isLastChild()&&!e.isInline()}function Tm(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&Jt(75,t),r}function c2(e){const t=e.assignedSlot||e.parentElement;return x8(t)?t.host:t}function lU(e){return Die(e)?e:Es(e)?e.ownerDocument:null}function Lie(e){Vi(),Js()._updateTags.add(e)}function Bie(e){Vi(),Js()._deferred.push(e)}function g8(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function iC(e){const t=lU(e);return t?t.defaultView:null}function vc(e){const t=e._window;return t===null&&Jt(78),t}function $ie(e){return jt(e)&&e.isInline()||Un(e)&&e.isInline()}function zie(e){let t=e.getParentOrThrow();for(;t!==null;){if(zo(t))return t;t=t.getParentOrThrow()}return t}function zo(e){return ri(e)||jt(e)&&e.isShadowRoot()}function Ho(e){const t=Js(),r=e.getType(),n=Z7(t,r);n===void 0&&Jt(200,e.constructor.name,r);const{replace:s,replaceWithKlass:a}=n;if(s!==null){const i=s(e),o=i.constructor;return a!==null?i instanceof a||Jt(201,a.name,a.getType(),o.name,o.getType(),e.constructor.name,r):i instanceof e.constructor&&o!==e.constructor||Jt(202,o.name,o.getType(),e.constructor.name,r),i.__key===e.__key&&Jt(203,e.constructor.name,r,o.name,o.getType()),i}return e}function u5(e,t){!ri(e.getParent())||jt(t)||Un(t)||Jt(99)}function Uie(e){const t=Ba(e);return t===null&&Jt(63,e),t}function d5(e){return(Un(e)||jt(e)&&!e.canBeEmpty())&&!e.isInline()}function p8(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function ou(e){return uu?(e||window).getSelection():null}function Wie(e){const t=iC(e);return t?t.getSelection():null}function cU(e){return Es(e)&&e.tagName==="A"}function Es(e){return d1(e)&&e.nodeType===Aae}function d1(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function x8(e){return d1(e)&&e.nodeType===Mae}function y8(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function _4(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function fc(e){if(Un(e)&&!e.isInline())return!0;if(!jt(e)||zo(e))return!1;const t=e.getFirstChild(),r=t===null||Xd(t)||fr(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function f5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function u2(){return Js()}const hM=new WeakMap,Hie=new Map;function mM(e){if(!e._readOnly&&e.isEmpty())return Hie;e._readOnly||Jt(192);let t=hM.get(e);return t||(t=(function(r){const n=new Map;for(const[s,a]of r._nodeMap){const i=a.__type;let o=n.get(i);o||(o=new Map,n.set(i,o)),o.set(s,a)}return n})(e),hM.set(e,t)),t}function oC(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function lC(e,t){const r=parseInt(e.style.paddingInlineStart,10)||0,n=Math.round(r/40);t.setIndent(n)}function Gie(e){e.__lexicalUnmanaged=!0}function Vie(e){return e.__lexicalUnmanaged===!0}function py(e,t){return(function(r,n){return Object.prototype.hasOwnProperty.call(r,n)})(e,t)&&e[t]!==l1[t]}function cC(e){const t=CP in e.prototype?e.prototype[CP]():void 0,r=(function(i){return i===K7||i===vo||i===l1})(e),n=!r&&py(e,"getType")?e.getType():void 0;let s,a=n;if(t)if(n)s=t[n];else for(const[i,o]of Object.entries(t))a=i,s=o;if(!r&&a&&(py(e,"getType")||(e.getType=()=>a),py(e,"clone")||(e.clone=i=>(Q7(i),new e)),py(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!py(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function qie(e){const t=u2();return Vi(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const Kie={next:"previous",previous:"next"};class uC{constructor(t){this.origin=t}[Symbol.iterator](){return gC({hasNext:Nm,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return Xi(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Xi(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,r){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(n===null?this.insert(t):n.replace(t,r)),this}splice(t,r,n="next"){const s=n===this.direction?r:Array.from(r).reverse();let a=this;const i=this.getParentAtCaret(),o=new Map;for(let l=a.getAdjacentCaret();l!==null&&o.size<t;l=l.getAdjacentCaret()){const u=l.origin.getWritable();o.set(u.getKey(),u)}for(const l of s){if(o.size>0){const u=a.getNodeAtCaret();if(u){if(o.delete(u.getKey()),o.delete(l.getKey()),!(u.is(l)||a.origin.is(l))){const d=l.getParent();d&&d.is(i)&&l.remove(),u.replace(l)}}else u===null&&Jt(263,Array.from(o).join(" "))}else a.insert(l);a=Xi(l,this.direction)}for(const l of o.values())l.remove();return this}}class bv extends uC{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:wc(t,this.direction)}getParentCaret(t="root"){return Xi(dC(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=f1(this.direction);return Xi(this.getNodeAtCaret(),t)||wc(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof bv&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const Yie={root:ri,shadowRoot:zo};function f1(e){return Kie[e]}function dC(e,t="root"){return Yie[t](e)?null:e}class Cm extends uC{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Xi(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return jt(this.origin)?wc(this.origin,this.direction):null}getParentCaret(t="root"){return Xi(dC(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=f1(this.direction);return Xi(this.getNodeAtCaret(),t)||wc(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof Cm&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof Cm||t instanceof Em)&&this.direction===t.direction&&this.origin.is(t.origin)}}class Em extends uC{type="text";constructor(t,r){super(t),this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Am(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Xi(dC(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Am(this.origin,f1(this.direction),this.offset)}isSamePointCaret(t){return t instanceof Em&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof Cm||t instanceof Em)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Xi(this.origin,this.direction)}}function Af(e){return e instanceof Em}function Nm(e){return e instanceof Cm}function Ku(e){return e instanceof bv}const Xie={next:class extends Em{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Em{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Jie={next:class extends Cm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Cm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Qie={next:class extends bv{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends bv{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Xi(e,t){return e?new Jie[t](e):null}function Am(e,t,r){return e?new Xie[t](e,jf(e,r)):null}function jf(e,t,r="error"){const n=e.getTextContentSize();let s=t==="next"?n:t==="previous"?0:t;return(s<0||s>n)&&(r!=="clamp"&&(function(a,...i){const o=new URL("https://lexical.dev/docs/error"),l=new URLSearchParams;l.append("code",a);for(const u of i)l.append("v",u);o.search=l.toString(),console.warn(`Minified Lexical warning #${a}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(t),String(n),e.getKey()),s=s<0?0:n),s}function gM(e,t){return new eoe(e,t)}function wc(e,t){return jt(e)?new Qie[t](e):null}function Zie(e){return e&&e.getChildCaret()||e}function fC(e){return e&&Zie(e.getAdjacentCaret())}class hC{type="node-caret-range";constructor(t,r,n){this.anchor=t,this.focus=r,this.direction=n}getLatest(){const t=this.anchor.getLatest(),r=this.focus.getLatest();return t===this.anchor&&r===this.focus?this:new hC(t,r,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return Af(a)?(function(i,o){const{direction:l,origin:u}=i,d=jf(u,o==="focus"?f1(l):l);return gM(i,d-i.offset)})(a,s):null},r=t("anchor"),n=t("focus");if(r&&n){const{caret:s}=r,{caret:a}=n;if(s.isSameNodeCaret(a))return[gM(s,a.offset-s.offset),null]}return[r,n]}iterNodeCarets(t="root"){const r=Af(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),s=Af(n),a=i=>i.isSameNodeCaret(n)?null:fC(i)||i.getParentCaret(t);return gC({hasNext:i=>i!==null&&!(s&&n.isSameNodeCaret(i)),initial:r.isSameNodeCaret(n)?null:a(r),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class eoe{type="slice";constructor(t,r){this.caret=t,this.distance=r}getSliceIndices(){const{distance:t,caret:{offset:r}}=this,n=r+t;return n<r?[n,r]:[r,n]}getTextContent(){const[t,r]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,r)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:r}}=this,[n,s]=this.getSliceIndices(),a=t.getTextContent();return Am(t.setTextContent(a.slice(0,n)+a.slice(s)),r,n)}}function mC(e){return Rf(e,Xi(Ls(),e.direction))}function toe(e){return Rf(e,e)}function Rf(e,t){return e.direction!==t.direction&&Jt(265),new hC(e,t,e.direction)}function gC(e){const{initial:t,hasNext:r,step:n,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!r(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=n(a),i}}}function uU(e,t){const r=Gb(e.origin,t.origin);switch(r===null&&Jt(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{const n=e.type==="text",s=t.type==="text";return n&&s?(function(a,i){return Math.sign(a-i)})(e.offset,t.offset):e.type===t.type?0:n?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return dU(r)}}function dU(e){const{a:t,b:r}=e,n=t.__key,s=r.__key;let a=t,i=r;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===n)return 1}return a===null?1:-1}function Xw(e,t){return t.is(e)}function pM(e){return jt(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function Gb(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const r=new Map;for(let[n,s]=pM(e);n;s=n,n=n.getParent())r.set(n,s);for(let[n,s]=pM(t);n;s=n,n=n.getParent()){const a=r.get(n);if(a!==void 0)return a===null?(Xw(e,n)||Jt(276),{commonAncestor:n,type:"ancestor"}):s===null?(Xw(t,n)||Jt(277),{commonAncestor:n,type:"descendant"}):((jt(a)||Xw(e,a))&&(jt(s)||Xw(t,s))&&n.is(a.getParent())&&n.is(s.getParent())||Jt(278),{a,b:s,commonAncestor:n,type:"branch"})}return null}function o0(e,t){const{type:r,key:n,offset:s}=e,a=Uie(e.key);return r==="text"?(fr(a)||Jt(266,a.getType(),n),Am(a,t,s)):(jt(a)||Jt(267,a.getType(),n),soe(a,e.offset,t))}function jm(e,t){const{origin:r,direction:n}=t,s=n==="next";Af(t)?e.set(r.getKey(),t.offset,"text"):Nm(t)?fr(r)?e.set(r.getKey(),jf(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(s?1:0),"element"):(Ku(t)&&jt(r)||Jt(268),e.set(r.getKey(),s?0:r.getChildrenSize(),"element"))}function roe(e){const t=dr(),r=Gt(t)?t:z_();return Vb(r,e),Ji(r),r}function Vb(e,t){jm(e.anchor,t.anchor),jm(e.focus,t.focus)}function xM(e){const{anchor:t,focus:r}=e,n=o0(t,"next"),s=o0(r,"next"),a=uU(n,s)<=0?"next":"previous";return Rf(Up(n,a),Up(s,a))}function pC(e){const{direction:t,origin:r}=e,n=Xi(r,f1(t)).getNodeAtCaret();return n?Xi(n,t):wc(r.getParentOrThrow(),t)}function yM(e,t="root"){const r=[e];for(let n=Ku(e)?e.getParentCaret(t):e.getSiblingCaret();n!==null;n=n.getParentCaret(t))r.push(pC(n));return r}function h5(e){return!!e&&e.origin.isAttached()}function noe(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const r="root",n="next";let s=t;const a=hU(e,n),i=yM(a.anchor,r),o=yM(a.focus.getFlipped(),r),l=new Set,u=[];for(const x of a.iterNodeCarets(r))if(Ku(x))l.add(x.origin.getKey());else if(Nm(x)){const{origin:y}=x;jt(y)&&!l.has(y.getKey())||u.push(y)}for(const x of u)x.remove();for(const x of a.getTextSlices()){if(!x)continue;const{origin:y}=x.caret,v=y.getTextContentSize(),T=pC(Xi(y,n)),k=y.getMode();if(Math.abs(x.distance)===v&&s==="removeEmptySlices"||k==="token"&&x.distance!==0)T.remove();else if(x.distance!==0){s="removeEmptySlices";let b=x.removeTextSlice();const E=x.caret.origin;if(k==="segmented"){const N=b.origin,P=la(N.getTextContent()).setStyle(N.getStyle()).setFormat(N.getFormat());T.replaceOrInsert(P),b=Am(P,n,b.offset)}E.is(i[0].origin)&&(i[0]=b),E.is(o[0].origin)&&(o[0]=b.getFlipped())}}let d,f;for(const x of i)if(h5(x)){d=hc(x);break}for(const x of o)if(h5(x)){f=hc(x);break}const h=(function(x,y,v){if(!x||!y)return null;const T=x.getParentAtCaret(),k=y.getParentAtCaret();if(!T||!k)return null;const b=T.getParents().reverse();b.push(T);const E=k.getParents().reverse();E.push(k);const N=Math.min(b.length,E.length);let P;for(P=0;P<N&&b[P]===E[P];P++);const M=(D,L)=>{let G;for(let X=P;X<D.length;X++){const se=D[X];if(zo(se))return;!G&&L(se)&&(G=se)}return G},j=M(b,fc),A=j&&M(E,(D=>v.has(D.getKey())&&fc(D)));return j&&A?[j,A]:null})(d,f,l);if(h){const[x,y]=h;wc(x,"previous").splice(0,y.getChildren()),y.remove()}const g=[d,f,...i,...o].find(h5);if(g)return toe(Up(hc(g),e.direction));Jt(269,JSON.stringify(i.map((x=>x.origin.__key))))}function hc(e){const t=(function(s){let a=s;for(;Ku(a);){const i=fC(a);if(!Ku(i))break;a=i}return a})(e.getLatest()),{direction:r}=t;if(fr(t.origin))return Af(t)?t:Am(t.origin,r,r);const n=t.getAdjacentCaret();return Nm(n)&&fr(n.origin)?Am(n.origin,r,f1(r)):t}function fU(e){return Af(e)&&e.offset!==jf(e.origin,e.direction)}function Up(e,t){return e.direction===t?e:e.getFlipped()}function hU(e,t){return e.direction===t?e:Rf(Up(e.focus,t),Up(e.anchor,t))}function soe(e,t,r){let n=wc(e,"next");for(let s=0;s<t;s++){const a=n.getAdjacentCaret();if(a===null)break;n=a}return Up(n,r)}const mU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,aoe=mU?_.useLayoutEffect:_.useEffect,Jw={tag:qy};function gU({initialConfig:e,children:t}){const r=_.useMemo((()=>{const{theme:n,namespace:s,nodes:a,onError:i,editorState:o,html:l}=e,u=Cae(null,n),d=Pie({editable:e.editable,html:l,namespace:s,nodes:a,onError:f=>i(f,d),theme:n});return(function(f,h){if(h!==null){if(h===void 0)f.update((()=>{const g=Ls();if(g.isEmpty()){const x=Cs();g.append(x);const y=mU?document.activeElement:null;(dr()!==null||y!==null&&y===f.getRootElement())&&x.select()}}),Jw);else if(h!==null)switch(typeof h){case"string":{const g=f.parseEditorState(h);f.setEditorState(g,Jw);break}case"object":f.setEditorState(h,Jw);break;case"function":f.update((()=>{Ls().isEmpty()&&h(f)}),Jw)}}})(d,o),[d,u]}),[]);return aoe((()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)}),[]),c.jsx(o1.Provider,{value:r,children:t})}const ioe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function ooe(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function loe(){return(function(e){const[t]=ed(),r=_.useMemo((()=>e(t)),[t,e]),[n,s]=_.useState((()=>r.initialValueFn())),a=_.useRef(n);return ioe((()=>{const{initialValueFn:i,subscribe:o}=r,l=i();return a.current!==l&&(a.current=l,s(l)),o((u=>{a.current=u,s(u)}))}),[r,e]),n})(ooe)}function coe(){return Ls().getTextContent()}function uoe(e,t=!0){if(e)return!1;let r=coe();return t&&(r=r.trim()),r===""}function doe(e){if(!uoe(e,!1))return!1;const t=Ls().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(Un(s))return!1;if(jt(s)){if(!J7(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let o=0;o<i;o++){const l=a[n];if(!fr(l))return!1}}}return!0}function pU(e){return()=>doe(e)}const v8=new Map;function xU(e){const t={};if(!e)return t;const r=e.split(";");for(const n of r)if(n!==""){const[s,a]=n.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function vM(e){let t=v8.get(e);return t===void 0&&(t=xU(e),v8.set(e,t)),t}function yU(e){const t=u2().getElementByKey(e.getKey());if(t===null)return null;const r=t.ownerDocument.defaultView;return r===null?null:r.getComputedStyle(t)}function vU(e){return yU(ri(e)?e:e.getParentOrThrow())}function wM(e){const t=vU(e);return t!==null&&t.direction==="rtl"}function wU(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!Ld(t)&&r!==null){const[n,s]=r,a=e.isBackward(),i=n.getNode(),o=s.getNode(),l=t.is(i),u=t.is(o);if(l||u){const[d,f]=d8(e),h=i.is(o),g=t.is(a?o:i),x=t.is(a?i:o);let y,v=0;h?(v=d>f?f:d,y=d>f?d:f):g?(v=a?f:d,y=void 0):x&&(v=0,y=a?d:f),t.__text=t.__text.slice(v,y)}}return t}function foe(e){const t=e.getStyle(),r=xU(t);v8.set(t,r)}function hoe(e,t){const r=e.getFormatType(),n=e.getIndent();r!==t.getFormatType()&&t.setFormat(r),n!==t.getIndent()&&t.setIndent(n)}function Ep(e,t,r=hoe){if(e===null)return;const n=e.getStartEndPoints(),s=new Map;let a=null;if(n){const[i,o]=n;a=z_(),a.anchor.set(i.key,i.offset,i.type),a.focus.set(o.key,o.offset,o.type);const l=m5(i.getNode(),fc),u=m5(o.getNode(),fc);jt(l)&&s.set(l.getKey(),l),jt(u)&&s.set(u.getKey(),u)}for(const i of e.getNodes())if(jt(i)&&fc(i))s.set(i.getKey(),i);else if(n===null){const o=m5(i,fc);jt(o)&&s.set(o.getKey(),o)}for(const[i,o]of s){const l=t();r(o,l),o.replace(l,!0),a&&(i===a.anchor.key&&a.anchor.set(l.getKey(),a.anchor.offset,a.anchor.type),i===a.focus.key&&a.focus.set(l.getKey(),a.focus.offset,a.focus.type))}a&&e.is(dr())&&Ji(a)}function bU(e){const t=_U(e);return t!==null&&t.writingMode==="vertical-rl"}function _U(e){const t=e.anchor.getNode();return jt(t)?yU(t):vU(t)}function bM(e,t){let r=bU(e)?!t:t;SU(e)&&(r=!r);const n=o0(e.focus,r?"previous":"next");if(fU(n))return!1;for(const s of mC(n)){if(Ku(s))return!s.origin.isInline();if(!jt(s.origin)){if(Un(s.origin))return!0;break}}return!1}function moe(e,t,r,n){e.modify(t?"extend":"move",r,n)}function SU(e){const t=_U(e);return t!==null&&t.direction==="rtl"}function _M(e,t,r){const n=SU(e);let s;s=bU(e)||n?!r:r,moe(e,t,s,"character")}function m5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function goe(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const kU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,poe=kU&&"documentMode"in document?document.documentMode:null;!(!kU||!("InputEvent"in window)||poe)&&"getTargetRanges"in new window.InputEvent("input");function TU(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}function Gm(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function ei(e,...t){const r=TU(...t);r.length>0&&e.classList.add(...r)}function Pf(e,...t){const r=TU(...t);r.length>0&&e.classList.remove(...r)}function xoe(e){return e?e.getAdjacentCaret():null}function yoe(e,t){let r=e;for(;r!=null;){if(r instanceof t)return r;r=r.getParent()}return null}function voe(e){const t=K_(e,(r=>jt(r)&&!r.isInline()));return jt(t)||goe(4,e.__key),t}const K_=(e,t)=>{let r=e;for(;r!==Ls()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function Jh(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function CU(e,t){const r=[],n=Array.from(e).reverse();for(let s=n.pop();s!==void 0;s=n.pop())if(t(s))r.push(s);else if(jt(s))for(const a of woe(s))n.push(a);return r}function woe(e){return boe(wc(e,"previous"))}function boe(e){return gC({hasNext:Nm,initial:e.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function _oe(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=n.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const o=i.payload;if(o&&o.functionId==="makeChanges"){const l=o.args;if(l){const[u,d,f,h,g,x]=l;e.update((()=>{const y=dr();if(Gt(y)){const v=y.anchor;let T=v.getNode(),k=0,b=0;if(fr(T)&&u>=0&&d>=0&&(k=u,b=u+d,y.setTextNodeRange(T,k,T,b)),k===b&&f===""||(y.insertRawText(f),T=v.getNode()),fr(T)){k=h,b=h+g;const E=T.getTextContentSize();k=k>E?E:k,b=b>E?E:b,y.setTextNodeRange(T,k,T,b)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function Soe(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let a=0;a<r.length;a++){const i=r[a];if(!NU.has(i.nodeName)){const o=AU(i,e,s,!1);o!==null&&(n=n.concat(o))}}return(function(a){for(const i of a)i.getNextSibling()instanceof X7&&i.insertAfter(Xu());for(const i of a){const o=i.getChildren();for(const l of o)i.insertBefore(l);i.remove()}})(s),n}function koe(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=Ls().getChildren();for(let s=0;s<n.length;s++)EU(e,n[s],r,t);return r.innerHTML}function EU(e,t,r,n=null){let s=n===null||t.isSelected(n);const a=jt(t)&&t.excludeFromCopy("html");let i=t;if(n!==null){let g=oC(t);g=fr(g)&&n!==null?wU(n,g):g,i=g}const o=jt(i)?i.getChildren():[],l=Z7(e,i.getType());let u;u=l&&l.exportDOM!==void 0?l.exportDOM(e,i):i.exportDOM(e);const{element:d,after:f}=u;if(!d)return!1;const h=document.createDocumentFragment();for(let g=0;g<o.length;g++){const x=o[g],y=EU(e,x,h,n);!s&&jt(t)&&y&&t.extractWithChild(x,n,"html")&&(s=!0)}if(s&&!a){if((Es(d)||x8(d))&&d.append(h),r.append(d),f){const g=f.call(i,d);g&&(x8(d)?d.replaceChildren(g):d.replaceWith(g))}}else r.append(h);return s}const NU=new Set(["STYLE","SCRIPT"]);function AU(e,t,r,n,s=new Map,a){let i=[];if(NU.has(e.nodeName))return i;let o=null;const l=(function(x,y){const{nodeName:v}=x,T=y._htmlConversions.get(v.toLowerCase());let k=null;if(T!==void 0)for(const b of T){const E=b(x);E!==null&&(k===null||(k.priority||0)<=(E.priority||0))&&(k=E)}return k!==null?k.conversion:null})(e,t),u=l?l(e):null;let d=null;if(u!==null){d=u.after;const x=u.node;if(o=Array.isArray(x)?x[x.length-1]:x,o!==null){for(const[,y]of s)if(o=y(o,a),!o)break;o&&i.push(...Array.isArray(x)?x:[o])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const f=e.childNodes;let h=[];const g=(o==null||!zo(o))&&(o!=null&&f8(o)||n);for(let x=0;x<f.length;x++)h.push(...AU(f[x],t,r,g,new Map(s),o));return d!=null&&(h=d(h)),_4(e)&&(h=Toe(e,h,g?()=>{const x=new X7;return r.push(x),x}:Cs)),o==null?h.length>0?i=i.concat(h):_4(e)&&(function(x){return x.nextSibling==null||x.previousSibling==null?!1:y8(x.nextSibling)&&y8(x.previousSibling)})(e)&&(i=i.concat(Xu())):jt(o)&&o.append(...h),i}function Toe(e,t,r){const n=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const o=t[i];if(f8(o))n&&!o.getFormat()&&o.setFormat(n),s.push(o);else if(a.push(o),i===t.length-1||i<t.length-1&&f8(t[i+1])){const l=r();l.setFormat(n),l.append(...a),s.push(l),a=[]}}return s}function S4(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Coe(e,t=dr()){return t==null&&S4(166),Gt(t)&&t.isCollapsed()||t.getNodes().length===0?"":koe(e,t)}function Eoe(e,t=dr()){return t==null&&S4(166),Gt(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(Noe(e,t))}function SM(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return kM(r,Aoe(o.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const o=new DOMParser().parseFromString((function(l){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(l):l})(s),"text/html");return kM(r,Soe(r,o),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(Gt(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let l=0;l<o.length;l++){const u=dr();if(Gt(u)){const d=o[l];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([c1()]):u.insertText(d)}}}else t.insertRawText(i)}function kM(e,t,r){e.dispatchCommand(Zae,{nodes:t,selection:r})||(r.insertNodes(t),(function(n){if(Gt(n)&&n.isCollapsed()){const s=n.anchor;let a=null;const i=o0(s,"previous");if(i)if(Af(i))a=i.origin;else{const o=Rf(i,wc(Ls(),"next").getFlipped());for(const l of o){if(fr(l.origin)){a=l.origin;break}if(jt(l.origin)&&!l.origin.isInline())break}}if(a&&fr(a)){const o=a.getFormat(),l=a.getStyle();n.format===o&&n.style===l||(n.format=o,n.style=l,n.dirty=!0)}}})(r))}function jU(e,t,r,n=[]){let s=t===null||r.isSelected(t);const a=jt(r)&&r.excludeFromCopy("html");let i=r;if(t!==null){let u=oC(r);u=fr(u)&&t!==null?wU(t,u):u,i=u}const o=jt(i)?i.getChildren():[],l=(function(u){const d=u.exportJSON(),f=u.constructor;if(d.type!==f.getType()&&S4(58,f.name),jt(u)){const h=d.children;Array.isArray(h)||S4(59,f.name)}return d})(i);if(fr(i)){const u=i.__text;u.length>0?l.text=u:s=!1}for(let u=0;u<o.length;u++){const d=o[u],f=jU(e,t,d,l.children);!s&&jt(r)&&f&&r.extractWithChild(d,t,"clone")&&(s=!0)}if(s&&!a)n.push(l);else if(Array.isArray(l.children))for(let u=0;u<l.children.length;u++){const d=l.children[u];n.push(d)}return s}function Noe(e,t){const r=[],n=Ls().getChildren();for(let s=0;s<n.length;s++)jU(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function Aoe(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=kie(n);fr(s)&&foe(s),t.push(s)}return t}let Jg=null;async function TM(e,t,r){if(Jg!==null)return!1;if(t!==null)return new Promise(((u,d)=>{e.update((()=>{u(CM(e,t,r))}))}));const n=e.getRootElement(),s=e._window||window,a=window.document,i=ou(s);if(n===null||i===null)return!1;const o=a.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(a.createTextNode("#")),n.append(o);const l=new Range;return l.setStart(o,0),l.setEnd(o,1),i.removeAllRanges(),i.addRange(l),new Promise(((u,d)=>{const f=e.registerCommand(L_,(h=>(Jh(h,ClipboardEvent)&&(f(),Jg!==null&&(window.clearTimeout(Jg),Jg=null),u(CM(e,h,r))),!0)),jie);Jg=window.setTimeout((()=>{f(),Jg=null,u(!1)}),50),a.execCommand("copy"),o.remove()}))}function CM(e,t,r){if(r===void 0){const s=ou(e._window);if(!s)return!1;const a=s.anchorNode,i=s.focusNode;if(a!==null&&i!==null&&!l2(e,a,i))return!1;const o=dr();if(o===null)return!1;r=Poe(o)}t.preventDefault();const n=t.clipboardData;return n!==null&&(Moe(n,r),!0)}const joe=[["text/html",Coe],["application/x-lexical-editor",Eoe]];function Poe(e=dr()){const t={"text/plain":e?e.getTextContent():""};if(e){const r=u2();for(const[n,s]of joe){const a=s(r,e);a!==null&&(t[n]=a)}}return t}function Moe(e,t){for(const r in t){const n=t[r];n!==void 0&&e.setData(r,n)}}function EM(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const h1=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Foe=h1&&"documentMode"in document?document.documentMode:null,Doe=!(!h1||!("InputEvent"in window)||Foe)&&"getTargetRanges"in new window.InputEvent("input"),Ooe=h1&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),NM=h1&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ioe=h1&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Roe=h1&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Ioe,AM=Xr("DRAG_DROP_PASTE_FILE");let d2=class PU extends vo{static getType(){return"quote"}static clone(t){return new PU(t.__key)}createDOM(t){const r=document.createElement("blockquote");return ei(r,t.theme.quote),r}updateDOM(t,r){return!1}static importDOM(){return{blockquote:t=>({conversion:Loe,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Es(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return f2().updateFromJSON(t)}insertNewAfter(t,r){const n=Cs(),s=this.getDirection();return n.setDirection(s),this.insertAfter(n,r),n}collapseAtStart(){const t=Cs();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function f2(){return Ho(new d2)}function jM(e){return e instanceof d2}let h2=class MU extends vo{static getType(){return"heading"}static clone(t){return new MU(t.__tag,t.__key)}constructor(t,r){super(r),this.__tag=t}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,n=document.createElement(r),s=t.theme.heading;if(s!==void 0){const a=s[r];ei(n,a)}return n}updateDOM(t,r,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:Qg,priority:0}),h2:t=>({conversion:Qg,priority:0}),h3:t=>({conversion:Qg,priority:0}),h4:t=>({conversion:Qg,priority:0}),h5:t=>({conversion:Qg,priority:0}),h6:t=>({conversion:Qg,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&PM(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>PM(t)?{conversion:r=>({node:Sf("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Es(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return Sf(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const n=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&n===s.getTextContentSize()||!t?Cs():Sf(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,r),n===0&&!this.isEmpty()&&t){const o=Cs();o.select(),this.replace(o,!0)}return a}collapseAtStart(){const t=this.isEmpty()?Cs():Sf(this.getTag());return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}extractWithChild(){return!0}};function PM(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function Qg(e){const t=e.nodeName.toLowerCase();let r=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(r=Sf(t),e.style!==null&&(lC(e,r),r.setFormat(e.style.textAlign))),{node:r}}function Loe(e){const t=f2();return e.style!==null&&(t.setFormat(e.style.textAlign),lC(e,t)),{node:t}}function Sf(e="h1"){return Ho(new h2(e))}function Boe(e){return e instanceof h2}function Qw(e){let t=null;if(Jh(e,DragEvent)?t=e.dataTransfer:Jh(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function MM(e){const t=dr();if(!Gt(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const a=n[s],i=a.getKey();if(r.has(i))continue;const o=K_(a,(u=>jt(u)&&!u.isInline()));if(o===null)continue;const l=o.getKey();o.canIndent()&&!r.has(l)&&(r.add(l),e(o))}return r.size>0}function FM(e){const t=If(e);return Un(t)}function g5(e){for(const t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function $oe(e){return Gm(e.registerCommand(B7,(t=>{const r=dr();return!!oo(r)&&(r.clear(),!0)}),Dn),e.registerCommand(om,(t=>{const r=dr();return Gt(r)?(r.deleteCharacter(t),!0):!!oo(r)&&(r.deleteNodes(),!0)}),Dn),e.registerCommand(vv,(t=>{const r=dr();return!!Gt(r)&&(r.deleteWord(t),!0)}),Dn),e.registerCommand(wv,(t=>{const r=dr();return!!Gt(r)&&(r.deleteLine(t),!0)}),Dn),e.registerCommand(kp,(t=>{const r=dr();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)SM(n,r,e);else if(Gt(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0}),Dn),e.registerCommand(s8,(()=>{const t=dr();return!!Gt(t)&&(t.removeText(),!0)}),Dn),e.registerCommand(po,(t=>{const r=dr();return!!Gt(r)&&(r.formatText(t),!0)}),Dn),e.registerCommand(Nz,(t=>{const r=dr();if(!Gt(r)&&!oo(r))return!1;const n=r.getNodes();for(const s of n){const a=K_(s,(i=>jt(i)&&!i.isInline()));a!==null&&a.setFormat(t)}return!0}),Dn),e.registerCommand(Sp,(t=>{const r=dr();return!!Gt(r)&&(r.insertLineBreak(t),!0)}),Dn),e.registerCommand(yv,(()=>{const t=dr();return!!Gt(t)&&(t.insertParagraph(),!0)}),Dn),e.registerCommand(nie,(()=>(bie([c1()]),!0)),Dn),e.registerCommand(sie,(()=>MM((t=>{const r=t.getIndent();t.setIndent(r+1)}))),Dn),e.registerCommand(IP,(()=>MM((t=>{const r=t.getIndent();r>0&&t.setIndent(Math.max(0,r-1))}))),Dn),e.registerCommand(wz,(t=>{const r=dr();if(oo(r)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(Gt(r)){const n=m8(r.focus,!0);if(!t.shiftKey&&Un(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),Dn),e.registerCommand(bz,(t=>{const r=dr();if(oo(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(Gt(r)){if((function(s){const a=s.focus;return a.key==="root"&&a.offset===Ls().getChildrenSize()})(r))return t.preventDefault(),!0;const n=m8(r.focus,!1);if(!t.shiftKey&&Un(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),Dn),e.registerCommand(vz,(t=>{const r=dr();if(oo(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),wM(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!Gt(r))return!1;if(bM(r,!0)){const n=t.shiftKey;return t.preventDefault(),_M(r,n,!0),!0}return!1}),Dn),e.registerCommand(yz,(t=>{const r=dr();if(oo(r)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),wM(s[0])?s[0].selectPrevious():s[0].selectNext(0,0),!0}if(!Gt(r))return!1;const n=t.shiftKey;return!!bM(r,!1)&&(t.preventDefault(),_M(r,n,!1),!0)}),Dn),e.registerCommand(Sz,(t=>{if(FM(t.target))return!1;const r=dr();if(Gt(r)){if((function(n){if(!n.isCollapsed())return!1;const{anchor:s}=n;if(s.offset!==0)return!1;const a=s.getNode();if(ri(a))return!1;const i=voe(a);return i.getIndent()>0&&(i.is(a)||a.is(i.getFirstDescendant()))})(r))return t.preventDefault(),e.dispatchCommand(IP,void 0);if(NM&&navigator.language==="ko-KR")return!1}else if(!oo(r))return!1;return t.preventDefault(),e.dispatchCommand(om,!0)}),Dn),e.registerCommand(Tz,(t=>{if(FM(t.target))return!1;const r=dr();return!(!Gt(r)&&!oo(r))&&(t.preventDefault(),e.dispatchCommand(om,!1))}),Dn),e.registerCommand(g4,(t=>{const r=dr();if(!Gt(r))return!1;if(g5(r),t!==null){if((NM||Ooe||Roe)&&Doe)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(Sp,!1)}return e.dispatchCommand(yv,void 0)}),Dn),e.registerCommand(kz,(()=>{const t=dr();return!!Gt(t)&&(e.blur(),!0)}),Dn),e.registerCommand(Ez,(t=>{const[,r]=Qw(t);if(r.length>0){const s=EM(t.clientX,t.clientY);if(s!==null){const{offset:a,node:i}=s,o=If(i);if(o!==null){const l=z_();if(fr(o))l.anchor.set(o.getKey(),a,"text"),l.focus.set(o.getKey(),a,"text");else{const d=o.getParentOrThrow().getKey(),f=o.getIndexWithinParent()+1;l.anchor.set(d,f,"element"),l.focus.set(d,f,"element")}const u=u4(l);Ji(u)}e.dispatchCommand(AM,r)}return t.preventDefault(),!0}const n=dr();return!!Gt(n)}),Dn),e.registerCommand(Az,(t=>{const[r]=Qw(t),n=dr();return!(r&&!Gt(n))}),Dn),e.registerCommand(jz,(t=>{const[r]=Qw(t),n=dr();if(r&&!Gt(n))return!1;const s=EM(t.clientX,t.clientY);if(s!==null){const a=If(s.node);Un(a)&&t.preventDefault()}return!0}),Dn),e.registerCommand(a8,(()=>(Rie(),!0)),Dn),e.registerCommand(L_,(t=>(TM(e,Jh(t,ClipboardEvent)?t:null),!0)),Dn),e.registerCommand(W7,(t=>((async function(r,n){await TM(n,Jh(r,ClipboardEvent)?r:null),n.update((()=>{const s=dr();Gt(s)?s.removeText():oo(s)&&s.getNodes().forEach((a=>a.remove()))}))})(t,e),!0)),Dn),e.registerCommand($7,(t=>{const[,r,n]=Qw(t);return r.length>0&&!n?(e.dispatchCommand(AM,r),!0):d1(t.target)&&eC(t.target)?!1:dr()!==null&&((function(s,a){s.preventDefault(),a.update((()=>{const i=dr(),o=Jh(s,InputEvent)||Jh(s,KeyboardEvent)?null:s.clipboardData;o!=null&&i!==null&&SM(o,i,a)}),{tag:Cie})})(t,e),!0)}),Dn),e.registerCommand(_z,(t=>{const r=dr();return Gt(r)&&g5(r),!1}),Dn),e.registerCommand(Cz,(t=>{const r=dr();return Gt(r)&&g5(r),!1}),Dn))}const w8=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function DM(e){return e.getEditorState().read(pU(e.isComposing()))}function FU({contentEditable:e,placeholder:t=null,ErrorBoundary:r}){const[n]=ed(),s=(function(a,i){const[o,l]=_.useState((()=>a.getDecorators()));return w8((()=>a.registerDecoratorListener((u=>{Sk.flushSync((()=>{l(u)}))}))),[a]),_.useEffect((()=>{l(a.getDecorators())}),[a]),_.useMemo((()=>{const u=[],d=Object.keys(o);for(let f=0;f<d.length;f++){const h=d[f],g=c.jsx(i,{onError:y=>a._onError(y),children:c.jsx(_.Suspense,{fallback:null,children:o[h]})}),x=a.getElementByKey(h);x!==null&&u.push(Sk.createPortal(g,x,h))}return u}),[i,o,a])})(n,r);return(function(a){w8((()=>Gm($oe(a),_oe(a))),[a])})(n),c.jsxs(c.Fragment,{children:[e,c.jsx(zoe,{content:t}),s]})}function zoe({content:e}){const[t]=ed(),r=(function(s){const[a,i]=_.useState((()=>DM(s)));return w8((()=>{function o(){const l=DM(s);i(l)}return o(),Gm(s.registerUpdateListener((()=>{o()})),s.registerEditableListener((()=>{o()})))}),[s]),a})(t),n=loe();return r?typeof e=="function"?e(n):e:null}const DU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?_.useLayoutEffect:_.useEffect;function Uoe({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:n,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:o,ariaLabel:l,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:f,ariaRequired:h,autoCapitalize:g,className:x,id:y,role:v="textbox",spellCheck:T=!0,style:k,tabIndex:b,"data-testid":E,...N},P){const[M,j]=_.useState(e.isEditable()),A=_.useCallback((L=>{L&&L.ownerDocument&&L.ownerDocument.defaultView?e.setRootElement(L):e.setRootElement(null)}),[e]),D=_.useMemo((()=>(function(...L){return G=>{L.forEach((X=>{typeof X=="function"?X(G):X!=null&&(X.current=G)}))}})(P,A)),[A,P]);return DU((()=>(j(e.isEditable()),e.registerEditableListener((L=>{j(L)})))),[e]),c.jsx("div",{"aria-activedescendant":M?t:void 0,"aria-autocomplete":M?r:"none","aria-controls":M?n:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":M&&v==="combobox"?!!i:void 0,...o!=null?{"aria-invalid":o}:{},"aria-label":l,"aria-labelledby":u,"aria-multiline":d,"aria-owns":M?f:void 0,"aria-readonly":!M||void 0,"aria-required":h,autoCapitalize:g,className:x,contentEditable:M,"data-testid":E,id:y,ref:D,role:v,spellCheck:T,style:k,tabIndex:b,...N})}const Woe=_.forwardRef(Uoe);function OM(e){return e.getEditorState().read(pU(e.isComposing()))}const OU=_.forwardRef(Hoe);function Hoe(e,t){const{placeholder:r,...n}=e,[s]=ed();return c.jsxs(c.Fragment,{children:[c.jsx(Woe,{editor:s,...n,ref:t}),r!=null&&c.jsx(Goe,{editor:s,content:r})]})}function Goe({content:e,editor:t}){const r=(function(i){const[o,l]=_.useState((()=>OM(i)));return DU((()=>{function u(){const d=OM(i);l(d)}return u(),Gm(i.registerUpdateListener((()=>{u()})),i.registerEditableListener((()=>{u()})))}),[i]),o})(t),[n,s]=_.useState(t.isEditable());if(_.useLayoutEffect((()=>(s(t.isEditable()),t.registerEditableListener((i=>{s(i)})))),[t]),!r)return null;let a=null;return typeof e=="function"?a=e(n):e!==null&&(a=e),a===null?null:c.jsx("div",{"aria-hidden":!0,children:a})}const Zw=0,b8=1,_8=2,Xc=0,Voe=1,IM=2,qoe=3,Koe=4;function Yoe(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return Xc;const a=t._selection,i=e._selection;if(s)return Voe;if(!(Gt(a)&&Gt(i)&&i.isCollapsed()&&a.isCollapsed()))return Xc;const o=(function(T,k,b){const E=T._nodeMap,N=[];for(const P of k){const M=E.get(P);M!==void 0&&N.push(M)}for(const[P,M]of b){if(!M)continue;const j=E.get(P);j===void 0||ri(j)||N.push(j)}return N})(t,r,n);if(o.length===0)return Xc;if(o.length>1){const T=t._nodeMap,k=T.get(a.anchor.key),b=T.get(i.anchor.key);return k&&b&&!e._nodeMap.has(k.__key)&&fr(k)&&k.__text.length===1&&a.anchor.offset===1?IM:Xc}const l=o[0],u=e._nodeMap.get(l.__key);if(!fr(u)||!fr(l)||u.__mode!==l.__mode)return Xc;const d=u.__text,f=l.__text;if(d===f)return Xc;const h=a.anchor,g=i.anchor;if(h.key!==g.key||h.type!=="text")return Xc;const x=h.offset,y=g.offset,v=f.length-d.length;return v===1&&y===x-1?IM:v===-1&&y===x+1?qoe:v===-1&&y===x?Koe:Xc}function Xoe(e,t){let r=Date.now(),n=Xc;return(s,a,i,o,l,u)=>{const d=Date.now();if(u.has(v4))return n=Xc,r=d,_8;const f=Yoe(s,a,o,l,e.isComposing()),h=(()=>{const g=i===null||i.editor===e,x=u.has(Tie);if(!x&&g&&u.has(qy))return Zw;if(s===null)return b8;const y=a._selection;return o.size>0||l.size>0?x===!1&&f!==Xc&&f===n&&d<r+t&&g||o.size===1&&(function(v,T,k){const b=T._nodeMap.get(v),E=k._nodeMap.get(v),N=T._selection,P=k._selection;return!(Gt(N)&&Gt(P)&&N.anchor.type==="element"&&N.focus.type==="element"&&P.anchor.type==="text"&&P.focus.type==="text"||!fr(b)||!fr(E)||b.__parent!==E.__parent)&&JSON.stringify(T.read((()=>b.exportJSON())))===JSON.stringify(k.read((()=>E.exportJSON())))})(Array.from(o)[0],s,a)?Zw:b8:y!==null?Zw:_8})();return r=d,n=f,h}}function RM(e){e.undoStack=[],e.redoStack=[],e.current=null}function Joe(e,t,r){const n=Xoe(e,r);return Gm(e.registerCommand(z7,(()=>((function(a,i){const o=i.redoStack,l=i.undoStack;if(l.length!==0){const u=i.current,d=l.pop();u!==null&&(o.push(u),a.dispatchCommand(Hw,!0)),l.length===0&&a.dispatchCommand(Gw,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:v4})}})(e,t),!0)),Dn),e.registerCommand(U7,(()=>((function(a,i){const o=i.redoStack,l=i.undoStack;if(o.length!==0){const u=i.current;u!==null&&(l.push(u),a.dispatchCommand(Gw,!0));const d=o.pop();o.length===0&&a.dispatchCommand(Hw,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:v4})}})(e,t),!0)),Dn),e.registerCommand(iie,(()=>(RM(t),!1)),Dn),e.registerCommand(oie,(()=>(RM(t),e.dispatchCommand(Hw,!1),e.dispatchCommand(Gw,!1),!0)),Dn),e.registerUpdateListener((({editorState:a,prevEditorState:i,dirtyLeaves:o,dirtyElements:l,tags:u})=>{const d=t.current,f=t.redoStack,h=t.undoStack,g=d===null?null:d.editorState;if(d!==null&&a===g)return;const x=n(i,a,d,o,l,u);if(x===b8)f.length!==0&&(t.redoStack=[],e.dispatchCommand(Hw,!1)),d!==null&&(h.push({...d}),e.dispatchCommand(Gw,!0));else if(x===_8)return;t.current={editor:e,editorState:a}})))}function Qoe(){return{current:null,redoStack:[],undoStack:[]}}function IU({delay:e,externalHistoryState:t}){const[r]=ed();return(function(n,s,a=1e3){const i=_.useMemo((()=>s||Qoe()),[s]);_.useEffect((()=>Joe(n,i,a)),[a,n,i])})(r,t,e),null}function RU({defaultSelection:e}){const[t]=ed();return _.useEffect((()=>{t.focus((()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})}),{defaultSelection:e})}),[e,t]),null}function S8(e,t){return S8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},S8(e,t)}var LM={error:null},Zoe=(function(e){var t,r;function n(){for(var a,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(a=e.call.apply(e,[this].concat(o))||this).state=LM,a.resetErrorBoundary=function(){for(var u,d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];a.props.onReset==null||(u=a.props).onReset.apply(u,f),a.reset()},a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,S8(t,r),n.getDerivedStateFromError=function(a){return{error:a}};var s=n.prototype;return s.reset=function(){this.setState(LM)},s.componentDidCatch=function(a,i){var o,l;(o=(l=this.props).onError)==null||o.call(l,a,i)},s.componentDidUpdate=function(a,i){var o,l,u,d,f=this.state.error,h=this.props.resetKeys;f!==null&&i.error!==null&&((u=a.resetKeys)===void 0&&(u=[]),(d=h)===void 0&&(d=[]),u.length!==d.length||u.some((function(g,x){return!Object.is(g,d[x])})))&&((o=(l=this.props).onResetKeysChange)==null||o.call(l,a.resetKeys,h),this.reset())},s.render=function(){var a=this.state.error,i=this.props,o=i.fallbackRender,l=i.FallbackComponent,u=i.fallback;if(a!==null){var d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(_.isValidElement(u))return u;if(typeof o=="function")return o(d);if(l)return _.createElement(l,d);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n})(_.Component);function LU({children:e,onError:t}){return c.jsx(Zoe,{fallback:c.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}const xC=/^(\d+(?:\.\d+)?)px$/,Np={BOTH:3,NO_STATUS:0,ROW:1};class m1 extends vo{static getType(){return"tablecell"}static clone(t){return new m1(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:BM,priority:0}),th:t=>({conversion:BM,priority:0})}}static importJSON(t){return BU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=Np.NO_STATUS,r=1,n,s){super(s),this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),k8(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),ei(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(Es(r.element)){const n=r.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...k8(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=Np.BOTH){const n=this.getWritable();return n.__headerState=t&r|n.__headerState&~r,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==Np.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function k8(e){return e==="middle"||e==="bottom"}function BM(e){const t=e,r=e.nodeName.toLowerCase();let n;xC.test(t.style.width)&&(n=parseFloat(t.style.width));const s=BU(r==="th"?Np.ROW:Np.NO_STATUS,t.colSpan,n);s.__rowSpan=t.rowSpan;const a=t.style.backgroundColor;a!==""&&(s.__backgroundColor=a);const i=t.style.verticalAlign;k8(i)&&(s.__verticalAlign=i);const o=t.style,l=(o&&o.textDecoration||"").split(" "),u=o.fontWeight==="700"||o.fontWeight==="bold",d=l.includes("line-through"),f=o.fontStyle==="italic",h=l.includes("underline");return{after:g=>{const x=[];let y=null;const v=()=>{if(y){const T=y.getFirstChild();Xd(T)&&y.getChildrenSize()===1&&T.remove()}};for(const T of g)$ie(T)||fr(T)||Xd(T)?(fr(T)&&(u&&T.toggleFormat("bold"),d&&T.toggleFormat("strikethrough"),f&&T.toggleFormat("italic"),h&&T.toggleFormat("underline")),y?y.append(T):(y=Cs().append(T),x.push(y))):(x.push(T),v(),y=null);return v(),x.length===0&&x.push(Cs()),x},node:s}}function BU(e=Np.NO_STATUS,t=1,r){return Ho(new m1(e,t,r))}function _v(e){return e instanceof m1}function T8(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class g1 extends vo{static getType(){return"tablerow"}static clone(t){return new g1(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:ele,priority:0})}}static importJSON(t){return $U().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,r){super(r),this.__height=t}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),ei(r,t.theme.tableRow),r}extractWithChild(t,r,n){return n==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function ele(e){const t=e;let r;return xC.test(t.style.height)&&(r=parseFloat(t.style.height)),{after:n=>CU(n,_v),node:$U(r)}}function $U(e){return Ho(new g1(e))}function zU(e){return e instanceof g1}const UU=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,tle=UU&&"documentMode"in document?document.documentMode:null;UU&&"InputEvent"in window&&!tle&&new window.InputEvent("input");function rle(e,t,r){const n=[];let s=null,a=null;function i(l){let u=n[l];return u===void 0&&(n[l]=u=[]),u}const o=e.getChildren();for(let l=0;l<o.length;l++){const u=o[l];zU(u)||T8(209);const d=i(l);for(let f=u.getFirstChild(),h=0;f!=null;f=f.getNextSibling()){for(_v(f)||T8(147);d[h]!==void 0;)h++;const g={cell:f,startColumn:h,startRow:l},{__rowSpan:x,__colSpan:y}=f;for(let v=0;v<x&&!(l+v>=o.length);v++){const T=i(l+v);for(let k=0;k<y;k++)T[h+k]=g}}}return[n,s,a]}function xy(e){return Es(e)&&e.nodeName==="TABLE"}function nle(e,t){for(let r=t,n=null;r!==null;r=r.getParent()){if(e.is(r))return n;_v(r)&&(n=r)}return null}function sle(e,t,r){return nle(e,If(t,r))}function $M(e,t,r){if(!t.theme.tableAlignment)return;const n=[],s=[];for(const a of["center","right"]){const i=t.theme.tableAlignment[a];i&&(a===r?s:n).push(i)}Pf(e,...n),ei(e,...s)}const ale=new WeakSet;function zM(e=u2()){return ale.has(e)}class m2 extends vo{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new m2(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:ile,priority:1})}}static importJSON(t){return WU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,n){return n==="html"}getDOMSlot(t){const r=xy(t)?t:t.querySelector("table");return xy(r)||T8(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const s=document.createElement("colgroup");if(n.appendChild(s),Gie(s),ei(n,t.theme.table),this.updateTableElement(null,n,t),zM(r)){const a=document.createElement("div"),i=t.theme.tableScrollableWrapper;return i?ei(a,i):a.style.cssText="overflow-x: auto;",a.appendChild(n),this.updateTableWrapper(null,a,n,t),a}return n}updateTableWrapper(t,r,n,s){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&(function(a,i,o,l){l>0?(ei(a,o.theme.tableFrozenColumn),i.setAttribute("data-lexical-frozen-column","true")):(Pf(a,o.theme.tableFrozenColumn),i.removeAttribute("data-lexical-frozen-column"))})(r,n,s,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&(function(a,i,o,l){l>0?(ei(a,o.theme.tableFrozenRow),i.setAttribute("data-lexical-frozen-row","true")):(Pf(a,o.theme.tableFrozenRow),i.removeAttribute("data-lexical-frozen-row"))})(r,n,s,this.__frozenRowCount)}updateTableElement(t,r,n){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&(function(s,a,i){i?(ei(s,a.theme.tableRowStriping),s.setAttribute("data-lexical-row-striping","true")):(Pf(s,a.theme.tableRowStriping),s.removeAttribute("data-lexical-row-striping"))})(r,n,this.__rowStriping),(function(s,a,i,o){const l=s.querySelector("colgroup");if(!l)return;const u=[];for(let d=0;d<i;d++){const f=document.createElement("col"),h=o&&o[d];h&&(f.style.width=`${h}px`),u.push(f)}l.replaceChildren(...u)})(r,0,this.getColumnCount(),this.getColWidths()),$M(r,n,this.getFormatType())}updateDOM(t,r,n){const s=this.getDOMSlot(r).element;return r===s===zM()||(Es(a=r)&&a.nodeName==="DIV"&&this.updateTableWrapper(t,r,s,n),this.updateTableElement(t,s,n),!1);var a}exportDOM(t){const r=super.exportDOM(t),{element:n}=r;return{after:s=>{if(r.after&&(s=r.after(s)),!xy(s)&&Es(s)&&(s=s.querySelector("table")),!xy(s))return null;$M(s,t._config,this.getFormatType());const[a]=rle(this),i=new Map;for(const d of a)for(const f of d){const h=f.cell.getKey();i.has(h)||i.set(h,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const o=new Set;for(const d of s.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=d.getAttribute("data-temporary-table-cell-lexical-key");if(f){const h=i.get(f);if(d.removeAttribute("data-temporary-table-cell-lexical-key"),h){i.delete(f);for(let g=0;g<h.colSpan;g++)o.add(g+h.startColumn)}}}const l=s.querySelector(":scope > colgroup");if(l){const d=Array.from(s.querySelectorAll(":scope > colgroup > col")).filter(((f,h)=>o.has(h)));l.replaceChildren(...d)}const u=s.querySelectorAll(":scope > tr");if(u.length>0){const d=document.createElement("tbody");for(const f of u)d.appendChild(f);s.append(d)}return s},element:!xy(n)&&Es(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:n,domRows:s}=r;for(let a=0;a<n;a++){const i=s[a];if(i!=null)for(let o=0;o<i.length;o++){const l=i[o];if(l==null)continue;const{elem:u}=l,d=sle(this,u);if(d!==null&&t.is(d))return{x:o,y:a}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,n){const{domRows:s}=n,a=s[r];if(a==null)return null;const i=a[t<a.length?t:a.length-1];return i??null}getDOMCellFromCordsOrThrow(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(!s)throw new Error("Cell not found at cords.");return s}getCellNodeFromCords(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(s==null)return null;const a=If(s.elem);return _v(a)?a:null}getCellNodeFromCordsOrThrow(t,r,n){const s=this.getCellNodeFromCords(t,r,n);if(!s)throw new Error("Node at cords not TableCellNode.");return s}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach((n=>{_v(n)&&(r+=n.getColSpan())})),r}}function ile(e){const t=WU();e.hasAttribute("data-lexical-row-striping")&&t.setRowStriping(!0),e.hasAttribute("data-lexical-frozen-column")&&t.setFrozenColumns(1),e.hasAttribute("data-lexical-frozen-row")&&t.setFrozenRows(1);const r=e.querySelector(":scope > colgroup");if(r){let n=[];for(const s of r.querySelectorAll(":scope > col")){let a=s.style.width||"";if(!xC.test(a)&&(a=s.getAttribute("width")||"",!/^\d+$/.test(a))){n=void 0;break}n.push(parseFloat(a))}n&&t.setColWidths(n)}return{after:n=>CU(n,zU),node:t}}function WU(){return Ho(new m2)}function kf(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function C8(e){let t=1,r=e.getParent();for(;r!=null;){if(qn(r)){const n=r.getParent();if(hn(n)){t++,r=n.getParent();continue}kf(40)}return t}return t}function E8(e){let t=e.getParent();hn(t)||kf(40);let r=t;for(;r!==null;)r=r.getParent(),hn(r)&&(t=r);return t}function HU(e){let t=[];const r=e.getChildren().filter(qn);for(let n=0;n<r.length;n++){const s=r[n],a=s.getFirstChild();hn(a)?t=t.concat(HU(a)):t.push(s)}return t}function $u(e){return qn(e)&&hn(e.getFirstChild())}function UM(e){return Rl().append(e)}function GU(e,t){return qn(e)&&(t.length===0||t.length===1&&e.is(t[0])&&e.getChildrenSize()===0)}function WM(e){const t=dr();if(t!==null){let r=t.getNodes();if(Gt(t)){const s=t.getStartEndPoints();s===null&&kf(143);const[a]=s,i=a.getNode(),o=i.getParent();if(zo(i)){const l=i.getFirstChild();if(l)r=l.selectStart().getNodes();else{const u=Cs();i.append(u),r=u.select().getNodes()}}else if(GU(i,r)){const l=ul(e);if(zo(o)){i.replace(l);const u=Rl();jt(i)&&(u.setFormat(i.getFormatType()),u.setIndent(i.getIndent())),l.append(u)}else if(qn(i)){const u=i.getParentOrThrow();Pm(l,u.getChildren()),u.replace(l)}return}}const n=new Set;for(let s=0;s<r.length;s++){const a=r[s];if(jt(a)&&a.isEmpty()&&!qn(a)&&!n.has(a.getKey())){HM(a,e);continue}let i=eU(a)?a.getParent():qn(a)&&a.isEmpty()?a:null;for(;i!=null;){const o=i.getKey();if(hn(i)){if(!n.has(o)){const l=ul(e);Pm(l,i.getChildren()),i.replace(l),n.add(o)}break}{const l=i.getParent();if(zo(l)&&!n.has(o)){n.add(o),HM(i,e);break}i=l}}}}}function Pm(e,t){e.splice(e.getChildrenSize(),0,t)}function HM(e,t){if(hn(e))return e;const r=e.getPreviousSibling(),n=e.getNextSibling(),s=Rl();let a;if(Pm(s,e.getChildren()),hn(r)&&t===r.getListType())r.append(s),hn(n)&&t===n.getListType()&&(Pm(r,n.getChildren()),n.remove()),a=r;else if(hn(n)&&t===n.getListType())n.getFirstChildOrThrow().insertBefore(s),a=n;else{const i=ul(t);i.append(s),e.replace(i),a=i}return s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),e.remove(),a}function yC(e,t){const r=e.getLastChild(),n=t.getFirstChild();r&&n&&$u(r)&&$u(n)&&(yC(r.getFirstChild(),n.getFirstChild()),n.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function ole(){const e=dr();if(Gt(e)){const t=new Set,r=e.getNodes(),n=e.anchor.getNode();if(GU(n,r))t.add(E8(n));else for(let s=0;s<r.length;s++){const a=r[s];if(eU(a)){const i=yoe(a,x0);i!=null&&t.add(E8(i))}}for(const s of t){let a=s;const i=HU(s);for(const o of i){const l=Cs().setTextStyle(e.style).setTextFormat(e.format);Pm(l,o.getChildren()),a.insertAfter(l),a=l,o.__key===e.anchor.key&&jm(e.anchor,hc(wc(l,"next"))),o.__key===e.focus.key&&jm(e.focus,hc(wc(l,"next"))),o.remove()}s.remove()}}}function VU(e){const t=e.getListType()!=="check";let r=e.getStart();for(const n of e.getChildren())qn(n)&&(n.getValue()!==r&&n.setValue(r),t&&n.getLatest().__checked!=null&&n.setChecked(void 0),hn(n.getFirstChild())||r++)}function lle(e){const t=new Set;if($u(e)||t.has(e.getKey()))return;const r=e.getParent(),n=e.getNextSibling(),s=e.getPreviousSibling();if($u(n)&&$u(s)){const a=s.getFirstChild();if(hn(a)){a.append(e);const i=n.getFirstChild();hn(i)&&(Pm(a,i.getChildren()),n.remove(),t.add(n.getKey()))}}else if($u(n)){const a=n.getFirstChild();if(hn(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if($u(s)){const a=s.getFirstChild();hn(a)&&a.append(e)}else if(hn(r)){const a=Rl().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=ul(r.getListType()).setTextFormat(r.getTextFormat()).setTextStyle(r.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):n?n.insertBefore(a):r.append(a)}}function cle(e){if($u(e))return;const t=e.getParent(),r=t?t.getParent():void 0;if(hn(r?r.getParent():void 0)&&qn(r)&&hn(t)){const n=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(n))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),t.isEmpty()&&r.remove();else{const a=t.getListType(),i=Rl(),o=ul(a);i.append(o),e.getPreviousSiblings().forEach((d=>o.append(d)));const l=Rl(),u=ul(a);l.append(u),Pm(u,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(l),r.replace(e)}}}function ule(){const e=dr();if(!Gt(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!qn(t)||t.getChildrenSize()!==0)return!1;const r=E8(t),n=t.getParent();hn(n)||kf(40);const s=n.getParent();let a;if(zo(s))a=Cs(),r.insertAfter(a);else{if(!qn(s))return!1;a=Rl(),s.insertAfter(a)}a.setTextStyle(e.style).setTextFormat(e.format).select();const i=t.getNextSiblings();if(i.length>0){const o=ul(n.getListType());if(qn(a)){const l=Rl();l.append(o),a.insertAfter(l)}else a.insertAfter(o);o.append(...i)}return(function(o){let l=o;for(;l.getNextSibling()==null&&l.getPreviousSibling()==null;){const u=l.getParent();if(u==null||!qn(u)&&!hn(u))break;l=u}l.remove()})(t),!0}function k4(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}let x0=class extends vo{$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const r=t.getParent();hn(r)&&r.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:vo,importDOM:{li:()=>({conversion:dle,priority:0})}})}constructor(t=1,r=void 0,n){super(n),this.__value=t===void 0?1:t,this.__checked=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const r=document.createElement("li");return this.updateListItemDOM(null,r,t),r}updateListItemDOM(t,r,n){const s=this.getParent();hn(s)&&s.getListType()==="check"&&(function(o,l,u,d){hn(l.getFirstChild())?(o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.removeAttribute("aria-checked")):(o.setAttribute("role","checkbox"),o.setAttribute("tabIndex","-1"),u&&l.__checked===u.__checked||o.setAttribute("aria-checked",l.getChecked()?"true":"false"))})(r,this,t),r.value=this.__value,(function(o,l,u){const d=[],f=[],h=l.list,g=h?h.listitem:void 0;let x;if(h&&h.nested&&(x=h.nested.listitem),g!==void 0&&d.push(...k4(g)),h){const y=u.getParent(),v=hn(y)&&y.getListType()==="check",T=u.getChecked();v&&!T||f.push(h.listitemUnchecked),v&&T||f.push(h.listitemChecked),v&&d.push(T?h.listitemChecked:h.listitemUnchecked)}if(x!==void 0){const y=k4(x);u.getChildren().some((v=>hn(v)))?d.push(...y):f.push(...y)}f.length>0&&Pf(o,...f),d.length>0&&ei(o,...d)})(r,n.theme,this);const a=t?t.__style:"",i=this.__style;a!==i&&(i===""?r.removeAttribute("style"):r.style.cssText=i),(function(o,l,u){const d=vM(l.__textStyle);for(const f in d)o.style.setProperty(`--listitem-marker-${f}`,d[f]);if(u)for(const f in vM(u.__textStyle))f in d||o.style.removeProperty(`--listitem-marker-${f}`)})(r,this,t)}updateDOM(t,r,n){const s=r;return this.updateListItemDOM(t,s,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const r=this.createDOM(t._config),n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();return s&&(r.dir=s),{element:r}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let r=0;r<t.length;r++){const n=t[r];if(jt(n)&&this.canMergeWith(n)){const s=n.getChildren();this.append(...s),n.remove()}else super.append(n)}return this}replace(t,r){if(qn(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!hn(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const s=ul(n.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}n.insertAfter(t),t.insertAfter(s)}return r&&(jt(t)||kf(139),this.getChildren().forEach((s=>{t.append(s)}))),this.remove(),n.getChildrenSize()===0&&n.remove(),t}insertAfter(t,r=!0){const n=this.getParentOrThrow();if(hn(n)||kf(39),qn(t))return super.insertAfter(t,r);const s=this.getNextSiblings();if(n.insertAfter(t,r),s.length!==0){const a=ul(n.getListType());s.forEach((i=>a.append(i))),t.insertAfter(a,r)}return t}remove(t){const r=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),r&&n&&$u(r)&&$u(n)&&(yC(r.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,r=!0){const n=Rl().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,r),n}collapseAtStart(t){const r=Cs();this.getChildren().forEach((i=>r.append(i)));const n=this.getParentOrThrow(),s=n.getParentOrThrow(),a=qn(s);if(n.getChildrenSize()===1)if(a)n.remove(),s.select();else{n.insertBefore(r),n.remove();const i=t.anchor,o=t.focus,l=r.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(l,i.offset,"element"),o.type==="element"&&o.getNode().is(this)&&o.set(l,o.offset,"element")}else n.insertBefore(r),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const r=this.getWritable();return r.__value=t,r}getChecked(){const t=this.getLatest();let r;const n=this.getParent();return hn(n)&&(r=n.getListType()),r==="check"?!!t.__checked:void 0}setChecked(t){const r=this.getWritable();return r.__checked=t,r}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let r=t.getParentOrThrow(),n=0;for(;qn(r);)r=r.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){typeof t!="number"&&kf(117),(t=Math.floor(t))>=0||kf(199);let r=this.getIndent();for(;r!==t;)r<t?(lle(this),r++):(cle(this),r--);return this}canInsertAfter(t){return qn(t)}canReplaceWith(t){return qn(t)}canMergeWith(t){return qn(t)||J7(t)}extractWithChild(t,r){if(!Gt(r))return!1;const n=r.anchor.getNode(),s=r.focus.getNode();return this.isParentOf(n)&&this.isParentOf(s)&&this.getTextContent().length===r.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return ul("bullet")}canMergeWhenEmpty(){return!0}};function dle(e){if(e.classList.contains("task-list-item")){for(const r of e.children)if(r.tagName==="INPUT")return fle(r)}const t=e.getAttribute("aria-checked");return{node:Rl(t==="true"||t!=="false"&&void 0)}}function fle(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:Rl(e.hasAttribute("checked"))}}function Rl(e){return Ho(new x0(void 0,e))}function qn(e){return e instanceof x0}let Jf=class extends vo{$config(){return this.config("list",{$transform:t=>{(function(r){const n=r.getNextSibling();hn(n)&&r.getListType()===n.getListType()&&yC(r,n)})(t),VU(t)},extends:vo,importDOM:{ol:()=>({conversion:VM,priority:0}),ul:()=>({conversion:VM,priority:0})}})}constructor(t="number",r=1,n){super(n);const s=mle[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const r=this.getWritable();return r.__listType=t,r.__tag=t==="number"?"ol":"ul",r}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const r=this.getWritable();return r.__start=t,r}createDOM(t,r){const n=this.__tag,s=document.createElement(n);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,GM(s,t.theme,this),s}updateDOM(t,r,n){return t.__tag!==this.__tag||(GM(r,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const r=this.createDOM(t._config,t);return Es(r)&&(this.__start!==1&&r.setAttribute("start",String(this.__start)),this.__listType==="check"&&r.setAttribute("__lexicalListType","check")),{element:r}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,r,n){let s=n;for(let a=0;a<n.length;a++){const i=n[a];qn(i)||(s===n&&(s=[...n]),s[a]=Rl().append(!jt(i)||hn(i)||i.isInline()?i:la(i.getTextContent())))}return super.splice(t,r,s)}extractWithChild(t){return qn(t)}};function GM(e,t,r){const n=[],s=[],a=t.list;if(a!==void 0){const i=a[`${r.__tag}Depth`]||[],o=C8(r)-1,l=o%i.length,u=i[l],d=a[r.__tag];let f;const h=a.nested,g=a.checklist;if(h!==void 0&&h.list&&(f=h.list),d!==void 0&&n.push(d),g!==void 0&&r.__listType==="check"&&n.push(g),u!==void 0){n.push(...k4(u));for(let x=0;x<i.length;x++)x!==l&&s.push(r.__tag+x)}if(f!==void 0){const x=k4(f);o>1?n.push(...x):s.push(...x)}}s.length>0&&Pf(e,...s),n.length>0&&ei(e,...n)}function hle(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(qn(n)){t.push(n);const s=n.getChildren();s.length>1&&s.forEach((a=>{hn(a)&&t.push(UM(a))}))}else t.push(UM(n))}return t}function VM(e){const t=e.nodeName.toLowerCase();let r=null;return t==="ol"?r=ul("number",e.start):t==="ul"&&(r=(function(n){if(n.getAttribute("__lexicallisttype")==="check"||n.classList.contains("contains-task-list"))return!0;for(const s of n.childNodes)if(Es(s)&&s.hasAttribute("aria-checked"))return!0;return!1})(e)?ul("check"):ul("bullet")),{after:hle,node:r}}const mle={ol:"number",ul:"bullet"};function ul(e="number",t=1){return Ho(new Jf(e,t))}function hn(e){return e instanceof Jf}const gle=Xr("UPDATE_LIST_START_COMMAND"),vC=Xr("INSERT_UNORDERED_LIST_COMMAND"),wC=Xr("INSERT_ORDERED_LIST_COMMAND"),bC=Xr("REMOVE_LIST_COMMAND");function ple(e){return Gm(e.registerCommand(wC,(()=>(WM("number"),!0)),lp),e.registerCommand(gle,(t=>{const{listNodeKey:r,newStart:n}=t,s=Ba(r);return!!hn(s)&&(s.getListType()==="number"&&(s.setStart(n),VU(s)),!0)}),lp),e.registerCommand(vC,(()=>(WM("bullet"),!0)),lp),e.registerCommand(bC,(()=>(ole(),!0)),lp),e.registerCommand(yv,(()=>ule()),lp),e.registerNodeTransform(x0,(t=>{const r=t.getFirstChild();if(r){if(fr(r)){const n=r.getStyle(),s=r.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==s&&t.setTextFormat(s)}}else{const n=dr();Gt(n)&&(n.style!==t.getTextStyle()||n.format!==t.getTextFormat())&&n.isCollapsed()&&t.is(n.anchor.getNode())&&t.setTextStyle(n.style).setTextFormat(n.format)}})),e.registerNodeTransform(Yf,(t=>{const r=t.getParent();if(qn(r)&&t.is(r.getFirstChild())){const n=t.getStyle(),s=t.getFormat();n===r.getTextStyle()&&s===r.getTextFormat()||r.setTextStyle(n).setTextFormat(s)}})))}function xle(e){const t=r=>{const n=r.getParent();if(hn(r.getFirstChild())||!hn(n))return;const s=K_(r,(a=>qn(a)&&hn(a.getParent())&&qn(a.getPreviousSibling())));if(s===null&&r.getIndent()>0)r.setIndent(0);else if(qn(s)){const a=s.getPreviousSibling();if(qn(a)){const i=(function(l){let u=l,d=u.getFirstChild();for(;hn(d);){const f=d.getLastChild();if(!qn(f))break;u=f,d=u.getFirstChild()}return u})(a),o=i.getParent();if(hn(o)){const l=C8(o);l+1<C8(n)&&r.setIndent(l)}}}};return e.registerNodeTransform(Jf,(r=>{const n=[r];for(;n.length>0;){const s=n.shift();if(hn(s)){for(const a of s.getChildren())if(qn(a)){t(a);const i=a.getFirstChild();hn(i)&&n.push(i)}}}}))}var p5={exports:{}},qM;function yle(){return qM||(qM=1,(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=(function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function k(b){return b instanceof l?new l(b.type,k(b.content),b.alias):Array.isArray(b)?b.map(k):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(k){return Object.prototype.toString.call(k).slice(8,-1)},objId:function(k){return k.__id||Object.defineProperty(k,"__id",{value:++a}),k.__id},clone:function k(b,E){E=E||{};var N,P;switch(o.util.type(b)){case"Object":if(P=o.util.objId(b),E[P])return E[P];N={},E[P]=N;for(var M in b)b.hasOwnProperty(M)&&(N[M]=k(b[M],E));return N;case"Array":return P=o.util.objId(b),E[P]?E[P]:(N=[],E[P]=N,b.forEach(function(j,A){N[A]=k(j,E)}),N);default:return b}},getLanguage:function(k){for(;k;){var b=s.exec(k.className);if(b)return b[1].toLowerCase();k=k.parentElement}return"none"},setLanguage:function(k,b){k.className=k.className.replace(RegExp(s,"gi"),""),k.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(N){var k=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(N.stack)||[])[1];if(k){var b=document.getElementsByTagName("script");for(var E in b)if(b[E].src==k)return b[E]}return null}},isActive:function(k,b,E){for(var N="no-"+b;k;){var P=k.classList;if(P.contains(b))return!0;if(P.contains(N))return!1;k=k.parentElement}return!!E}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(k,b){var E=o.util.clone(o.languages[k]);for(var N in b)E[N]=b[N];return E},insertBefore:function(k,b,E,N){N=N||o.languages;var P=N[k],M={};for(var j in P)if(P.hasOwnProperty(j)){if(j==b)for(var A in E)E.hasOwnProperty(A)&&(M[A]=E[A]);E.hasOwnProperty(j)||(M[j]=P[j])}var D=N[k];return N[k]=M,o.languages.DFS(o.languages,function(L,G){G===D&&L!=k&&(this[L]=M)}),M},DFS:function k(b,E,N,P){P=P||{};var M=o.util.objId;for(var j in b)if(b.hasOwnProperty(j)){E.call(b,j,b[j],N||j);var A=b[j],D=o.util.type(A);D==="Object"&&!P[M(A)]?(P[M(A)]=!0,k(A,E,null,P)):D==="Array"&&!P[M(A)]&&(P[M(A)]=!0,k(A,E,j,P))}}},plugins:{},highlightAll:function(k,b){o.highlightAllUnder(document,k,b)},highlightAllUnder:function(k,b,E){var N={callback:E,container:k,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",N),N.elements=Array.prototype.slice.apply(N.container.querySelectorAll(N.selector)),o.hooks.run("before-all-elements-highlight",N);for(var P=0,M;M=N.elements[P++];)o.highlightElement(M,b===!0,N.callback)},highlightElement:function(k,b,E){var N=o.util.getLanguage(k),P=o.languages[N];o.util.setLanguage(k,N);var M=k.parentElement;M&&M.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(M,N);var j=k.textContent,A={element:k,language:N,grammar:P,code:j};function D(G){A.highlightedCode=G,o.hooks.run("before-insert",A),A.element.innerHTML=A.highlightedCode,o.hooks.run("after-highlight",A),o.hooks.run("complete",A),E&&E.call(A.element)}if(o.hooks.run("before-sanity-check",A),M=A.element.parentElement,M&&M.nodeName.toLowerCase()==="pre"&&!M.hasAttribute("tabindex")&&M.setAttribute("tabindex","0"),!A.code){o.hooks.run("complete",A),E&&E.call(A.element);return}if(o.hooks.run("before-highlight",A),!A.grammar){D(o.util.encode(A.code));return}if(b&&n.Worker){var L=new Worker(o.filename);L.onmessage=function(G){D(G.data)},L.postMessage(JSON.stringify({language:A.language,code:A.code,immediateClose:!0}))}else D(o.highlight(A.code,A.grammar,A.language))},highlight:function(k,b,E){var N={code:k,grammar:b,language:E};if(o.hooks.run("before-tokenize",N),!N.grammar)throw new Error('The language "'+N.language+'" has no grammar.');return N.tokens=o.tokenize(N.code,N.grammar),o.hooks.run("after-tokenize",N),l.stringify(o.util.encode(N.tokens),N.language)},tokenize:function(k,b){var E=b.rest;if(E){for(var N in E)b[N]=E[N];delete b.rest}var P=new f;return h(P,P.head,k),d(k,P,b,P.head,0),x(P)},hooks:{all:{},add:function(k,b){var E=o.hooks.all;E[k]=E[k]||[],E[k].push(b)},run:function(k,b){var E=o.hooks.all[k];if(!(!E||!E.length))for(var N=0,P;P=E[N++];)P(b)}},Token:l};n.Prism=o;function l(k,b,E,N){this.type=k,this.content=b,this.alias=E,this.length=(N||"").length|0}l.stringify=function k(b,E){if(typeof b=="string")return b;if(Array.isArray(b)){var N="";return b.forEach(function(D){N+=k(D,E)}),N}var P={type:b.type,content:k(b.content,E),tag:"span",classes:["token",b.type],attributes:{},language:E},M=b.alias;M&&(Array.isArray(M)?Array.prototype.push.apply(P.classes,M):P.classes.push(M)),o.hooks.run("wrap",P);var j="";for(var A in P.attributes)j+=" "+A+'="'+(P.attributes[A]||"").replace(/"/g,"&quot;")+'"';return"<"+P.tag+' class="'+P.classes.join(" ")+'"'+j+">"+P.content+"</"+P.tag+">"};function u(k,b,E,N){k.lastIndex=b;var P=k.exec(E);if(P&&N&&P[1]){var M=P[1].length;P.index+=M,P[0]=P[0].slice(M)}return P}function d(k,b,E,N,P,M){for(var j in E)if(!(!E.hasOwnProperty(j)||!E[j])){var A=E[j];A=Array.isArray(A)?A:[A];for(var D=0;D<A.length;++D){if(M&&M.cause==j+","+D)return;var L=A[D],G=L.inside,X=!!L.lookbehind,se=!!L.greedy,Q=L.alias;if(se&&!L.pattern.global){var re=L.pattern.toString().match(/[imsuy]*$/)[0];L.pattern=RegExp(L.pattern.source,re+"g")}for(var B=L.pattern||L,V=N.next,R=P;V!==b.tail&&!(M&&R>=M.reach);R+=V.value.length,V=V.next){var H=V.value;if(b.length>k.length)return;if(!(H instanceof l)){var z=1,I;if(se){if(I=u(B,R,k,X),!I||I.index>=k.length)break;var oe=I.index,W=I.index+I[0].length,K=R;for(K+=V.value.length;oe>=K;)V=V.next,K+=V.value.length;if(K-=V.value.length,R=K,V.value instanceof l)continue;for(var ee=V;ee!==b.tail&&(K<W||typeof ee.value=="string");ee=ee.next)z++,K+=ee.value.length;z--,H=k.slice(R,K),I.index-=R}else if(I=u(B,0,H,X),!I)continue;var oe=I.index,Z=I[0],le=H.slice(0,oe),ue=H.slice(oe+Z.length),de=R+H.length;M&&de>M.reach&&(M.reach=de);var Te=V.prev;le&&(Te=h(b,Te,le),R+=le.length),g(b,Te,z);var ie=new l(j,G?o.tokenize(Z,G):Z,Q,Z);if(V=h(b,Te,ie),ue&&h(b,V,ue),z>1){var pe={cause:j+","+D,reach:de};d(k,b,E,V.prev,R,pe),M&&pe.reach>M.reach&&(M.reach=pe.reach)}}}}}}function f(){var k={value:null,prev:null,next:null},b={value:null,prev:k,next:null};k.next=b,this.head=k,this.tail=b,this.length=0}function h(k,b,E){var N=b.next,P={value:E,prev:b,next:N};return b.next=P,N.prev=P,k.length++,P}function g(k,b,E){for(var N=b.next,P=0;P<E&&N!==k.tail;P++)N=N.next;b.next=N,N.prev=b,k.length-=P}function x(k){for(var b=[],E=k.head.next;E!==k.tail;)b.push(E.value),E=E.next;return b}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(k){var b=JSON.parse(k.data),E=b.language,N=b.code,P=b.immediateClose;n.postMessage(o.highlight(N,o.languages[E],E)),P&&n.close()},!1)),o;var y=o.util.currentScript();y&&(o.filename=y.src,y.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var T=document.readyState;T==="loading"||T==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o})(t);e.exports&&(e.exports=r),typeof Zb<"u"&&(Zb.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+a]={pattern:/[\s\S]+/,inside:r.languages[a]};var l={};l[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,s){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:r.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,(function(n){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var a=n.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))})(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,(function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function h(y,v,T){var k=new XMLHttpRequest;k.open("GET",y,!0),k.onreadystatechange=function(){k.readyState==4&&(k.status<400&&k.responseText?v(k.responseText):k.status>=400?T(s(k.status,k.statusText)):T(a))},k.send(null)}function g(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var T=Number(v[1]),k=v[2],b=v[3];return k?b?[T,Number(b)]:[T,void 0]:[T,T]}}r.hooks.add("before-highlightall",function(y){y.selector+=", "+f}),r.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(f)){y.code="",v.setAttribute(o,l);var T=v.appendChild(document.createElement("CODE"));T.textContent=n;var k=v.getAttribute("data-src"),b=y.language;if(b==="none"){var E=(/\.(\w+)$/.exec(k)||[,"none"])[1];b=i[E]||E}r.util.setLanguage(T,b),r.util.setLanguage(v,b);var N=r.plugins.autoloader;N&&N.loadLanguages(b),h(k,function(P){v.setAttribute(o,u);var M=g(v.getAttribute("data-range"));if(M){var j=P.split(/\r\n?|\n/g),A=M[0],D=M[1]==null?j.length:M[1];A<0&&(A+=j.length),A=Math.max(0,Math.min(A-1,j.length)),D<0&&(D+=j.length),D=Math.max(0,Math.min(D,j.length)),P=j.slice(A,D).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(A+1))}T.textContent=P,r.highlightElement(T)},function(P){v.setAttribute(o,d),T.textContent=P})}}),r.plugins.fileHighlight={highlight:function(v){for(var T=(v||document).querySelectorAll(f),k=0,b;b=T[k++];)r.highlightElement(b)}};var x=!1;r.fileHighlight=function(){x||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),x=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(p5)),p5.exports}yle();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};s["language-"+r]={pattern:/[\s\S]+/,inside:Prism.languages[r]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var n=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return n}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(f){d!==f&&(e.languages.markdown[d].inside.content.inside[f]=e.languages.markdown[f])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function f(h){if(!(!h||typeof h=="string"))for(var g=0,x=h.length;g<x;g++){var y=h[g];if(y.type!=="code"){f(y.content);continue}var v=y.content[1],T=y.content[3];if(v&&T&&v.type==="code-language"&&T.type==="code-block"&&typeof v.content=="string"){var k=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");k=(/[a-z][\w-]*/i.exec(k)||[""])[0].toLowerCase();var b="language-"+k;T.alias?typeof T.alias=="string"?T.alias=[T.alias,b]:T.alias.push(b):T.alias=[b]}}}f(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var f="",h=0,g=d.classes.length;h<g;h++){var x=d.classes[h],y=/language-(.+)/.exec(x);if(y){f=y[1];break}}var v=e.languages[f];if(v)d.content=e.highlight(u(d.content),v,f);else if(f&&f!=="none"&&e.plugins.autoloader){var T="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=T,e.plugins.autoloader.loadLanguages(f,function(){var k=document.getElementById(T);k&&(k.innerHTML=e.highlight(k.textContent,e.languages[f],f))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var f=d.replace(i,"");return f=f.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,g){if(g=g.toLowerCase(),g[0]==="#"){var x;return g[1]==="x"?x=parseInt(g.slice(2),16):x=Number(g.slice(1)),l(x)}else{var y=o[g];return y||h}}),f}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var KM={},YM;function vle(){return YM||(YM=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),KM}vle();var XM={},JM;function wle(){return JM||(JM=1,(function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string})(Prism)),XM}wle();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var QM={},ZM;function ble(){return ZM||(ZM=1,(function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript})(Prism)),QM}ble();var eF={},tF;function _le(){return tF||(tF=1,(function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),eF}_le();var rF={},nF;function Sle(){return nF||(nF=1,(function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])})(Prism)),rF}Sle();function qU(e,t){for(const r of e.childNodes){if(Es(r)&&r.tagName===t)return!0;qU(r,t)}return!1}const jy="data-language",yy="data-highlight-language",eb="data-theme";class Vm extends vo{static getType(){return"code"}static clone(t){return new Vm(t.__language,t.__key)}constructor(t,r){super(r),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const r=document.createElement("code");ei(r,t.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(jy,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(yy,n));const s=this.getTheme();s&&r.setAttribute(eb,s);const a=this.getStyle();return a&&r.setAttribute("style",a),r}updateDOM(t,r,n){const s=this.__language,a=t.__language;s?s!==a&&r.setAttribute(jy,s):a&&r.removeAttribute(jy);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&r.setAttribute(yy,s):r.removeAttribute(yy):i&&s&&r.setAttribute(yy,s);const o=this.__theme,l=t.__theme;o?o!==l&&r.setAttribute(eb,o):l&&r.removeAttribute(eb);const u=this.__style,d=t.__style;return u?u!==d&&r.setAttribute("style",u):d&&r.removeAttribute("style"),!1}exportDOM(t){const r=document.createElement("pre");ei(r,t._config.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(jy,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(yy,n));const s=this.getTheme();s&&r.setAttribute(eb,s);const a=this.getStyle();return a&&r.setAttribute("style",a),{element:r}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||qU(t,"BR"))?{conversion:sF,priority:1}:null,div:()=>({conversion:kle,priority:1}),pre:()=>({conversion:sF,priority:0}),table:t=>x5(t)?{conversion:Tle,priority:3}:null,td:t=>{const r=t,n=r.closest("table");return r.classList.contains("js-file-line")||n&&x5(n)?{conversion:aF,priority:3}:null},tr:t=>{const r=t.closest("table");return r&&x5(r)?{conversion:aF,priority:3}:null}}}static importJSON(t){return Vd().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,r=!0){const n=this.getChildren(),s=n.length;if(s>=2&&n[s-1].getTextContent()===`
`&&n[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){n[s-1].remove(),n[s-2].remove();const l=Cs();return this.insertAfter(l,r),l}const{anchor:a,focus:i}=t,o=(a.isBefore(i)?a:i).getNode();if(fr(o)){let l=Ele(o);const u=[];for(;;)if(B_(l))u.push(c1()),l=l.getNextSibling();else{if(!XU(l))break;{let v=0;const T=l.getTextContent(),k=l.getTextContentSize();for(;v<k&&T[v]===" ";)v++;if(v!==0&&u.push(YU(" ".repeat(v))),v!==k)break;l=l.getNextSibling()}}const d=o.splitText(a.offset)[0],f=a.offset===0?0:1,h=d.getIndexWithinParent()+f,g=o.getParentOrThrow(),x=[Xu(),...u];g.splice(h,0,x);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(_C(o)){const{offset:l}=t.anchor;o.splice(l,0,[Xu()]),o.select(l+1,l+1)}return null}canIndent(){return!1}collapseAtStart(){const t=Cs();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}setLanguage(t){const r=this.getWritable();return r.__language=t||void 0,r}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const r=this.getWritable();return r.__isSyntaxHighlightSupported=t,r}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const r=this.getWritable();return r.__theme=t||void 0,r}getTheme(){return this.getLatest().__theme}}function Vd(e,t){return qie(Vm).setLanguage(e).setTheme(t)}function _C(e){return e instanceof Vm}function sF(e){return{node:Vd(e.getAttribute(jy))}}function kle(e){const t=e,r=iF(t);return r||(function(n){let s=n.parentElement;for(;s!==null;){if(iF(s))return!0;s=s.parentElement}return!1})(t)?{node:r?Vd():null}:{node:null}}function Tle(){return{node:Vd()}}function aF(){return{node:null}}function iF(e){return e.style.fontFamily.match("monospace")!==null}function x5(e){return e.classList.contains("js-file-line-container")}let Y_=class KU extends Yf{constructor(t="",r,n){super(t,n),this.__highlightType=r}static getType(){return"code-highlight"}static clone(t){return new KU(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const r=this.getWritable();return r.__highlightType=t||void 0,r}canHaveFormat(){return!1}createDOM(t){const r=super.createDOM(t),n=y5(t.theme,this.__highlightType);return ei(r,n),r}updateDOM(t,r,n){const s=super.updateDOM(t,r,n),a=y5(n.theme,t.__highlightType),i=y5(n.theme,this.__highlightType);return a!==i&&(a&&Pf(r,a),i&&ei(r,i)),s}static importJSON(t){return YU().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return Vd()}};function y5(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function YU(e="",t){return Ho(new Y_(e,t))}function XU(e){return e instanceof Y_}function Cle(e,t){let r=e;for(let n=Xi(e,t);n&&(XU(n.origin)||B_(n.origin));n=xoe(n))r=n.origin;return r}function Ele(e){return Cle(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(r){var n=t[r],s=[];/^\w+$/.test(r)||s.push(/\w+/.exec(r)[0]),r==="diff"&&s.push("bold"),e.languages.diff[r]={pattern:RegExp("^(?:["+n+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(r)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);const Nle=new Set(["http:","https:","mailto:","sms:","tel:"]);class Qf extends vo{static getType(){return"link"}static clone(t){return new Qf(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",r={},n){super(n);const{target:s=null,rel:a=null,title:i=null}=r;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const r=document.createElement("a");return this.updateLinkDOM(null,r,t),ei(r,t.theme.link),r}updateLinkDOM(t,r,n){if(cU(r)){t&&t.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?r[s]=i:r.removeAttribute(s))}}}updateDOM(t,r,n){return this.updateLinkDOM(t,r,n),!1}static importDOM(){return{a:t=>({conversion:Ale,priority:1})}}static importJSON(t){return T4().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=lF(t);try{const r=new URL(lF(t));if(!Nle.has(r.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const r=this.getWritable();return r.__url=t,r}getTarget(){return this.getLatest().__target}setTarget(t){const r=this.getWritable();return r.__target=t,r}getRel(){return this.getLatest().__rel}setRel(t){const r=this.getWritable();return r.__rel=t,r}getTitle(){return this.getLatest().__title}setTitle(t){const r=this.getWritable();return r.__title=t,r}insertNewAfter(t,r=!0){const n=T4(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,r),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!Gt(r))return!1;const s=r.anchor.getNode(),a=r.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&r.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function Ale(e){let t=null;if(cU(e)){const r=e.textContent;(r!==null&&r!==""||e.children.length>0)&&(t=T4(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function T4(e="",t){return Ho(new Qf(e,t))}function jle(e){return e instanceof Qf}class p1 extends Qf{constructor(t="",r={},n){super(t,r,n),this.__isUnlinked=r.isUnlinked!==void 0&&r.isUnlinked!==null&&r.isUnlinked}static getType(){return"autolink"}static clone(t){return new p1(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const r=this.getWritable();return r.__isUnlinked=t,r}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,r,n){return super.updateDOM(t,r,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return oF().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,r=!0){const n=this.getParentOrThrow().insertNewAfter(t,r);if(jt(n)){const s=oF(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(s),s}return null}}function oF(e="",t){return Ho(new p1(e,t))}function Ple(e){return e instanceof p1}const Mle=/^\+?[0-9\s()-]{5,}$/;function lF(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:Mle.test(e)?`tel:${e}`:`https://${e}`}function N8(e,t){const r={};for(const n of e){const s=t(n);s&&(r[s]?r[s].push(n):r[s]=[n])}return r}function Fle(e){const t=N8(e,(r=>r.type));return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const cF=/[!-/:-@[-`{-~\s]/;function Dle(e){return fr(e)&&!e.hasFormat("code")}function Ole(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function uF(e,t,r){const n=r.length;for(let s=t;s>=n;s--){const a=s-n;if(JU(e,a,r,0,n)&&e[a+n]!==" ")return a}return-1}function JU(e,t,r,n,s){for(let a=0;a<s;a++)if(e[t+a]!==r[n+a])return!1;return!0}function Ile(e,t=X_){const r=Fle(t),n=N8(r.textFormat,(({tag:i})=>i[i.length-1])),s=N8(r.textMatch,(({trigger:i})=>i));for(const i of t){const o=i.type;if(o==="element"||o==="text-match"||o==="multiline-element"){const l=i.dependencies;for(const u of l)e.hasNode(u)||Ole(173,u.getType())}}const a=(i,o,l)=>{(function(u,d,f,h){const g=u.getParent();if(!zo(g)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExp:y,replace:v}of h){const T=x.match(y);if(T&&T[0].length===(T[0].endsWith(" ")?f:f-1)){const k=d.getNextSiblings(),[b,E]=d.splitText(f);if(v(u,E?[E,...k]:k,T,!1)!==!1)return b.remove(),!0}}return!1})(i,o,l,r.element)||(function(u,d,f,h){const g=u.getParent();if(!zo(g)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:T}of h){if(T&&!("optional"in T)||T&&"optional"in T&&!T.optional)continue;const k=x.match(y);if(k&&k[0].length===(k[0].endsWith(" ")?f:f-1)){const b=d.getNextSiblings(),[E,N]=d.splitText(f);if(v(u,N?[N,...b]:b,k,null,null,!1)!==!1)return E.remove(),!0}}return!1})(i,o,l,r.multilineElement)||(function(u,d,f){let h=u.getTextContent();const g=f[h[d-1]];if(g==null)return!1;d<h.length&&(h=h.slice(0,d));for(const x of g){if(!x.replace||!x.regExp)continue;const y=h.match(x.regExp);if(y===null)continue;const v=y.index||0,T=v+y[0].length;let k;return v===0?[k]=u.splitText(T):[,k]=u.splitText(v,T),k.selectNext(0,0),x.replace(k,y),!0}return!1})(o,l,s)||(function(u,d,f){const h=u.getTextContent(),g=d-1,x=h[g],y=f[x];if(!y)return!1;for(const v of y){const{tag:T}=v,k=T.length,b=g-k+1;if(k>1&&!JU(h,b,T,0,k)||h[b-1]===" ")continue;const E=h[g+1];if(v.intraword===!1&&E&&!cF.test(E))continue;const N=u;let P=N,M=uF(h,b,T),j=P;for(;M<0&&(j=j.getPreviousSibling())&&!Xd(j);)if(fr(j)){if(j.hasFormat("code"))continue;const B=j.getTextContent();P=j,M=uF(B,B.length,T)}if(M<0||P===N&&M+k===b)continue;const A=P.getTextContent();if(M>0&&A[M-1]===x)continue;const D=A[M-1];if(v.intraword===!1&&D&&!cF.test(D))continue;const L=N.getTextContent(),G=L.slice(0,b)+L.slice(g+1);N.setTextContent(G);const X=P===N?G:A;P.setTextContent(X.slice(0,M)+X.slice(M+k));const se=dr(),Q=z_();Ji(Q);const re=g-k*(P===N?2:1)+1;Q.anchor.set(P.__key,M,"text"),Q.focus.set(N.__key,re,"text");for(const B of v.format)Q.hasFormat(B)||Q.formatText(B);Q.anchor.set(Q.focus.key,Q.focus.offset,Q.focus.type);for(const B of v.format)Q.hasFormat(B)&&Q.toggleFormat(B);return Gt(se)&&(Q.format=se.format),!0}})(o,l,n)};return e.registerUpdateListener((({tags:i,dirtyLeaves:o,editorState:l,prevEditorState:u})=>{if(i.has(Xz)||i.has(v4)||e.isComposing())return;const d=l.read(dr),f=u.read(dr);if(!Gt(f)||!Gt(d)||!d.isCollapsed()||d.is(f))return;const h=d.anchor.key,g=d.anchor.offset,x=l._nodeMap.get(h);!fr(x)||!o.has(h)||g!==1&&g>f.anchor.offset+1||e.update((()=>{if(!Dle(x))return;const y=x.getParent();y===null||_C(y)||a(y,x,d.anchor.offset)}))}))}const Rle=/^(\s*)(\d{1,})\.\s/,Lle=/^(\s*)[-*+]\s/,Ble=/^(#{1,6})\s/,$le=/^>\s/,zle=/^[ \t]*```([\w-]+)?/,Ule=/[ \t]*```$/,QU=e=>(t,r,n,s)=>{const a=e(n);a.append(...r),t.replace(a),s||a.select(0,0)},ZU=e=>(t,r,n,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),o=Rl(e==="check"?n[3]==="x":void 0);if(hn(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(o):i.append(o),t.remove()}else if(hn(a)&&a.getListType()===e)a.append(o),t.remove();else{const u=ul(e,e==="number"?Number(n[2]):void 0);u.append(o),t.replace(u)}o.append(...r),s||o.select(0,0);const l=(function(u){const d=u.match(/\t/g),f=u.match(/ /g);let h=0;return d&&(h+=d.length),f&&(h+=Math.floor(f.length/4)),h})(n[1]);l&&o.setIndent(l)},SC=(e,t,r)=>{const n=[],s=e.getChildren();let a=0;for(const i of s)if(qn(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(hn(d)){n.push(SC(d,t,r+1));continue}}const o=" ".repeat(4*r),l=e.getListType(),u=l==="number"?`${e.getStart()+a}. `:l==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";n.push(o+u+t(i)),a++}return n.join(`
`)},Wle={dependencies:[h2],export:(e,t)=>{if(!Boe(e))return null;const r=Number(e.getTag().slice(1));return"#".repeat(r)+" "+t(e)},regExp:Ble,replace:QU((e=>{const t="h"+e[1].length;return Sf(t)})),type:"element"},Hle={dependencies:[d2],export:(e,t)=>{if(!jM(e))return null;const r=t(e).split(`
`),n=[];for(const s of r)n.push("> "+s);return n.join(`
`)},regExp:$le,replace:(e,t,r,n)=>{if(n){const a=e.getPreviousSibling();if(jM(a))return a.splice(a.getChildrenSize(),0,[Xu(),...t]),void e.remove()}const s=f2();s.append(...t),e.replace(s),n||s.select(0,0)},type:"element"},Gle={dependencies:[Vm],export:e=>{if(!_C(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:Ule},regExpStart:zle,replace:(e,t,r,n,s,a)=>{let i,o;if(!t&&s){if(s.length===1)n?(i=Vd(),o=r[1]+s[0]):(i=Vd(r[1]),o=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=Vd(r[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();o=s.join(`
`)}const l=la(o);i.append(l),e.append(i)}else t&&QU((l=>Vd(l?l[1]:void 0)))(e,t,r,a)},type:"multiline-element"},Vle={dependencies:[Jf,x0],export:(e,t)=>hn(e)?SC(e,t,0):null,regExp:Lle,replace:ZU("bullet"),type:"element"},qle={dependencies:[Jf,x0],export:(e,t)=>hn(e)?SC(e,t,0):null,regExp:Rle,replace:ZU("number"),type:"element"},Kle={format:["code"],tag:"`",type:"text-format"},Yle={format:["highlight"],tag:"==",type:"text-format"},Xle={format:["bold","italic"],tag:"***",type:"text-format"},Jle={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},Qle={format:["bold"],tag:"**",type:"text-format"},Zle={format:["bold"],intraword:!1,tag:"__",type:"text-format"},ece={format:["strikethrough"],tag:"~~",type:"text-format"},tce={format:["italic"],tag:"*",type:"text-format"},rce={format:["italic"],intraword:!1,tag:"_",type:"text-format"},nce={dependencies:[Qf],export:(e,t,r)=>{if(!jle(e)||Ple(e))return null;const n=e.getTitle(),s=t(e);return n?`[${s}](${e.getURL()} "${n}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,r,n,s]=t,a=T4(n,{title:s}),i=r.split("[").length-1,o=r.split("]").length-1;let l=r,u="";if(i<o)return;if(i>o){const f=r.split("[");u="["+f[0],l=f.slice(1).join("[")}const d=la(l);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(la(u)),d},trigger:")",type:"text-match"},sce=[Wle,Hle,Vle,qle],ace=[Gle],ice=[Kle,Xle,Jle,Qle,Zle,Yle,tce,rce,ece],oce=[nce],X_=[...sce,...ace,...ice,...oce];function dF(e,t){return e.getEditorState().read((()=>{const r=Ba(t);return r!==null&&r.isSelected()}))}function lce(e){const[t]=ed(),[r,n]=_.useState((()=>dF(t,e)));return _.useEffect((()=>{let s=!0;const a=t.registerUpdateListener((()=>{s&&n(dF(t,e))}));return()=>{s=!1,a()}}),[t,e]),[r,_.useCallback((s=>{t.update((()=>{let a=dr();oo(a)||(a=G7(),Ji(a)),oo(a)&&(s?a.add(e):a.delete(e))}))}),[t,e]),_.useCallback((()=>{t.update((()=>{const s=dr();oo(s)&&s.clear()}))}),[t])]}function cce({nodeKey:e}){const[t]=ed(),[r,n,s]=lce(e);return _.useEffect((()=>Gm(t.registerCommand(B7,(a=>{const i=t.getElementByKey(e);return a.target===i&&(a.shiftKey||s(),n(!r),!0)}),lp))),[s,t,r,e,n]),_.useEffect((()=>{const a=t.getElementByKey(e),i=t._config.theme.hrSelected??"selected";a!==null&&(r?ei(a,i):Pf(a,i))}),[t,r,e]),null}class g2 extends K7{static getType(){return"horizontalrule"}static clone(t){return new g2(t.__key)}static importJSON(t){return kC().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:uce,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const r=document.createElement("hr");return ei(r,t.theme.hr),r}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return c.jsx(cce,{nodeKey:this.__key})}}function uce(){return{node:kC()}}function kC(){return Ho(new g2)}function dce(e){return e instanceof g2}const fce=[{dependencies:[g2],export:e=>dce(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,r,n)=>{const s=kC();n||e.getNextSibling()!=null?e.replace(s):e.insertBefore(s),s.selectNext()},type:"element"},...X_];function eW({transformers:e=fce}){const[t]=ed();return _.useEffect((()=>Ile(t,e)),[t,e]),null}function tW({hasStrictIndent:e=!1}){const[t]=ed();return _.useEffect((()=>{if(!t.hasNodes([Jf,x0]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),_.useEffect((()=>{if(e)return xle(t)}),[t,e]),(function(r){_.useEffect((()=>ple(r)),[r])})(t),null}const hce=({onChange:e})=>{const[t]=_.useContext(o1)||[];return _.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Ls().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},mce=()=>{const[e]=_.useContext(o1)||[],t=_.useCallback(()=>{e&&e.dispatchCommand(po,"bold")},[e]),r=_.useCallback(()=>{e&&e.dispatchCommand(po,"italic")},[e]),n=_.useCallback(()=>{e&&e.dispatchCommand(po,"underline")},[e]),s=_.useCallback(()=>{e&&e.dispatchCommand(po,"strikethrough")},[e]),a=_.useCallback(g=>{e&&e.update(()=>{const x=dr();Gt(x)&&Ep(x,()=>Sf(g))})},[e]),i=_.useCallback(()=>{e&&e.update(()=>{const g=dr();Gt(g)&&Ep(g,()=>Cs())})},[e]);_.useCallback(()=>{e&&e.update(()=>{const g=dr();Gt(g)&&Ep(g,()=>f2())})},[e]);const o=_.useCallback(()=>{e&&e.dispatchCommand(vC)},[e]),l=_.useCallback(()=>{e&&e.dispatchCommand(wC)},[e]),u=_.useCallback(()=>{e&&e.dispatchCommand(bC)},[e]),d=_.useCallback(g=>{e&&e.update(()=>{const x=dr();Gt(x)&&x.getNodes().forEach(y=>{fr(y)&&y.setStyle(`color: ${g}`)})})},[e]),f=_.useCallback(g=>{e&&e.update(()=>{const x=dr();Gt(x)&&x.getNodes().forEach(v=>{if(fr(v)){const T=v.getStyle(),k=T?T.replace(/font-size:\s*\d+px;?\s*/g,"").trim():"",b=k?`${k}; font-size: ${g}px;`:`font-size: ${g}px;`;v.setStyle(b)}})})},[e]),h=_.useCallback(g=>{e&&e.dispatchCommand(Nz,g)},[e]);return c.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:t,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),c.jsx("button",{type:"button",onClick:r,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),c.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),c.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:()=>a("h1"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),c.jsx("button",{type:"button",onClick:()=>a("h2"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),c.jsx("button",{type:"button",onClick:()=>a("h3"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),c.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:" List"}),c.jsx("button",{type:"button",onClick:l,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1. List"}),c.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:"No List"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Color:"}),c.jsx("button",{type:"button",onClick:()=>d("#000000"),className:"w-6 h-6 bg-black border border-gray-300 rounded hover:bg-gray-800",title:"Black"}),c.jsx("button",{type:"button",onClick:()=>d("#ff0000"),className:"w-6 h-6 bg-red-500 border border-gray-300 rounded hover:bg-red-600",title:"Red"}),c.jsx("button",{type:"button",onClick:()=>d("#0000ff"),className:"w-6 h-6 bg-blue-500 border border-gray-300 rounded hover:bg-blue-600",title:"Blue"}),c.jsx("button",{type:"button",onClick:()=>d("#008000"),className:"w-6 h-6 bg-green-500 border border-gray-300 rounded hover:bg-green-600",title:"Green"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Size:"}),c.jsx("button",{type:"button",onClick:()=>f(12),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Small",children:"12px"}),c.jsx("button",{type:"button",onClick:()=>f(16),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Normal",children:"16px"}),c.jsx("button",{type:"button",onClick:()=>f(20),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Large",children:"20px"}),c.jsx("button",{type:"button",onClick:()=>f(24),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Extra Large",children:"24px"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{className:"text-xs text-gray-600",children:"Align:"}),c.jsx("button",{type:"button",onClick:()=>h("left"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Left",children:""}),c.jsx("button",{type:"button",onClick:()=>h("center"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Center",children:""}),c.jsx("button",{type:"button",onClick:()=>h("right"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Right",children:""})]})]})},gce=({value:e,onChange:t,placeholder:r})=>{const n={namespace:"LexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[h2,Jf,x0,d2,Vm,Y_,m2,m1,g1,p1,Qf],onError:s=>{console.error("Lexical error:",s)},editorState:e?(()=>{try{const s=JSON.parse(e);return JSON.stringify(s)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return c.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:c.jsxs(gU,{initialConfig:n,children:[c.jsx(mce,{}),c.jsx(hce,{onChange:t}),c.jsxs("div",{className:"relative",children:[c.jsx(FU,{contentEditable:c.jsx(OU,{className:"p-4 min-h-32 focus:outline-none",placeholder:r}),placeholder:c.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:LU}),c.jsx(IU,{}),c.jsx(RU,{}),c.jsx(tW,{}),c.jsx(eW,{transformers:X_})]})]})})},pce=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Ps(),{post:o}=$l(),{showNotification:l}=ai(),[u,d]=_.useState({test_name:e,num_questions:1,passing_score:100,questions:[{id:1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048}]}),[f,h]=_.useState({isLoading:!1,error:null,showPreview:!0});_.useEffect(()=>{d(T=>({...T,test_name:e||""}))},[e]);const g=()=>{if(u.num_questions>=3){h(b=>({...b,error:"Maximum 3 questions allowed for performance reasons"}));return}const k={id:Math.max(...u.questions.map(b=>b.id))+1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048};d(b=>({...b,num_questions:b.num_questions+1,questions:[...b.questions,k]}))},x=T=>{u.questions.length<=1||d(k=>({...k,num_questions:k.num_questions-1,questions:k.questions.filter(b=>b.id!==T)}))},y=(T,k)=>{d(b=>({...b,questions:b.questions.map(E=>E.id===T?{...E,question_json:k}:E)}))},v=async()=>{if(!u.test_name.trim()){h(T=>({...T,error:"Test name is required"}));return}if(u.questions.some(T=>!T.question_json.trim())){h(T=>({...T,error:"All questions must have content"}));return}h(T=>({...T,isLoading:!0,error:null}));try{const T={test_name:u.test_name,num_questions:u.num_questions,passing_score:u.passing_score,questions:u.questions.map((k,b)=>({question_id:b+1,question_json:k.question_json,canvas_width:k.canvas_width,canvas_height:k.canvas_height,max_canvas_width:k.max_canvas_width,max_canvas_height:k.max_canvas_height}))};t&&t(T)}catch(T){console.error("Error preparing drawing test:",T),h(k=>({...k,error:"Failed to prepare drawing test. Please try again."})),l("Failed to prepare drawing test","error")}finally{h(T=>({...T,isLoading:!1}))}};return c.jsxs("div",{className:"drawing-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Drawing Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a test where students draw based on your instructions"})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Drawing Questions (",u.num_questions,"/3)"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 3 questions for optimal performance"})]}),c.jsxs(ot,{onClick:g,disabled:u.num_questions>=3,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Question"]})]}),c.jsx("div",{className:"space-y-4",children:u.questions.map((T,k)=>c.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"text-md font-medium text-gray-800",children:["Text ",k+1]}),u.questions.length>1&&c.jsx(ot,{onClick:()=>x(T.id),variant:"secondary",size:"sm",className:"text-red-600 hover:text-red-700",children:c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Content *"}),c.jsx(gce,{value:T.question_json,onChange:b=>y(T.id,b),placeholder:""})]})]},T.id))})]}),f.error&&c.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700",children:f.error}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(ot,{onClick:r,variant:"secondary",disabled:f.isLoading,children:"Cancel"}),c.jsx(ot,{onClick:v,variant:"primary",disabled:f.isLoading||!u.test_name.trim(),className:"flex items-center gap-2",children:f.isLoading?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",color:"white"}),"Saving..."]}):"Save Test"})]})]})},xce=({onChange:e})=>{const[t]=_.useContext(o1)||[];return _.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Ls().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},yce=({onAddBlank:e,blankCount:t})=>{const[r]=_.useContext(o1)||[],n=_.useCallback(()=>{r&&r.dispatchCommand(po,"bold")},[r]),s=_.useCallback(()=>{r&&r.dispatchCommand(po,"italic")},[r]),a=_.useCallback(()=>{r&&r.dispatchCommand(po,"underline")},[r]),i=_.useCallback(()=>{r&&r.dispatchCommand(po,"strikethrough")},[r]),o=_.useCallback(x=>{r&&r.update(()=>{const y=dr();Gt(y)&&Ep(y,()=>Sf(x))})},[r]),l=_.useCallback(()=>{r&&r.update(()=>{const x=dr();Gt(x)&&Ep(x,()=>Cs())})},[r]),u=_.useCallback(()=>{r&&r.update(()=>{const x=dr();Gt(x)&&Ep(x,()=>f2())})},[r]),d=_.useCallback(()=>{r&&r.dispatchCommand(vC)},[r]),f=_.useCallback(()=>{r&&r.dispatchCommand(wC)},[r]),h=_.useCallback(()=>{r&&r.dispatchCommand(bC)},[r]),g=_.useCallback(()=>{!r||!e||(r.update(()=>{const x=dr();if(Gt(x)){const v=`${t+1}_________`,T=la(v);T.setStyle("background-color: #f0f9ff; border: 1px dashed #3b82f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;"),x.insertNodes([T])}}),e())},[r,e,t]);return c.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),c.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),c.jsx("button",{type:"button",onClick:a,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),c.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:()=>o("h1"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),c.jsx("button",{type:"button",onClick:()=>o("h2"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),c.jsx("button",{type:"button",onClick:()=>o("h3"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),c.jsx("button",{type:"button",onClick:l,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"}),c.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Quote",children:'"'})]}),c.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[c.jsx("button",{type:"button",onClick:d,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:""}),c.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1."}),c.jsx("button",{type:"button",onClick:h,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:""})]}),e&&c.jsx("div",{className:"flex items-center gap-1 border-l border-gray-300 pl-2",children:c.jsxs("button",{type:"button",onClick:g,className:"px-3 py-1 text-sm font-medium bg-blue-500 text-white border border-blue-600 rounded hover:bg-blue-600 transition-colors",title:"Add Blank",children:[c.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"inline mr-1",children:c.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Blank"]})})]})},vce=({value:e,onChange:t,placeholder:r,onAddBlank:n,blankCount:s=0})=>{const a={namespace:"FillBlanksLexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[h2,Jf,x0,d2,Vm,Y_,m2,m1,g1,p1,Qf],onError:i=>{console.error("Lexical error:",i)},editorState:e?(()=>{try{const i=JSON.parse(e);return JSON.stringify(i)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return c.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:c.jsxs(gU,{initialConfig:a,children:[c.jsx(yce,{onAddBlank:n,blankCount:s}),c.jsx(xce,{onChange:t}),c.jsxs("div",{className:"relative",children:[c.jsx(FU,{contentEditable:c.jsx(OU,{className:"p-4 min-h-32 focus:outline-none"}),placeholder:c.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:LU}),c.jsx(IU,{}),c.jsx(RU,{}),c.jsx(tW,{}),c.jsx(eW,{transformers:X_})]})]})})},wce=({testName:e="",allowedTime:t=null,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const{user:o}=Ps(),{post:l}=$l(),{showNotification:u}=ai(),[d,f]=_.useState({test_name:e,test_text:"",num_questions:1,num_blanks:0,passing_score:100,separate_type:!0,allowed_time:t,blanks:[]}),[h,g]=_.useState({isLoading:!1,error:null,showPreview:!0});_.useEffect(()=>{f(M=>({...M,test_name:e||"",allowed_time:t}))},[e,t]);const x=M=>{f(j=>({...j,test_text:M}))},y=()=>{const j={id:d.blanks.length+1,position:0,question:"",options:["","","",""],correct_answer:""};f(A=>({...A,blanks:[...A.blanks,j],num_blanks:A.num_blanks+1}))},v=M=>{f(j=>({...j,blanks:j.blanks.filter(A=>A.id!==M),num_blanks:j.num_blanks-1}))},T=M=>{f(j=>({...j,blanks:j.blanks.map(A=>A.id===M?{...A,options:[...A.options,""]}:A)}))},k=(M,j)=>{f(A=>({...A,blanks:A.blanks.map(D=>D.id===M?{...D,options:D.options.filter((L,G)=>G!==j),correct_answer:D.correct_answer===String.fromCharCode(65+j)?"":D.correct_answer}:D)}))},b=(M,j,A)=>{f(D=>({...D,blanks:D.blanks.map(L=>L.id===M?{...L,options:L.options.map((G,X)=>X===j?A:G)}:L)}))},E=(M,j)=>{console.log(" [DEBUG] updateBlankQuestion called:",{blankId:M,question:j}),f(A=>({...A,blanks:A.blanks.map(D=>D.id===M?{...D,question:j}:D)})),console.log(" [DEBUG] updateBlankQuestion completed")},N=(M,j)=>{f(A=>({...A,blanks:A.blanks.map(D=>D.id===M?{...D,correct_answer:j}:D)}))},P=async()=>{if(!d.test_name.trim()){g(M=>({...M,error:"Test name is required"}));return}if(!d.test_text.trim()){g(M=>({...M,error:"Test text is required"}));return}if(d.blanks.length===0){g(M=>({...M,error:"At least one blank is required"}));return}if(console.log(" [DEBUG] Validating blanks:",d.blanks),d.blanks.forEach((M,j)=>{console.log(` [DEBUG] Blank ${j+1}:`,{question:M.question,questionTrimmed:M.question?.trim(),correct_answer:M.correct_answer,options:M.options})}),d.separate_type===!1){if(d.blanks.some(M=>!M.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing correct answer"),g(M=>({...M,error:"All blanks must have correct answers"}));return}}else if(d.blanks.some(M=>!M.question.trim()||!M.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing question or correct answer"),g(M=>({...M,error:"All blanks must have question text and correct answer"}));return}console.log(" [DEBUG] Validation passed - all blanks have question and correct answer"),g(M=>({...M,isLoading:!0,error:null}));try{const M={test_name:d.test_name,test_text:d.test_text,num_questions:d.blanks.length,num_blanks:d.blanks.length,separate_type:d.separate_type,passing_score:d.passing_score,allowed_time:d.allowed_time,blanks:d.blanks.map((j,A)=>({question_id:A+1,question_json:j.question,question:j.question,options:j.options,correct_answer:j.correct_answer,blank_positions:{},blank_options:j.options||[],correct_answers:[j.correct_answer]}))};console.log(" [DEBUG] Calling onTestSaved with data:",M),r?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),r(M),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(M){console.error("Error preparing fill blanks test:",M),g(j=>({...j,error:"Failed to prepare fill blanks test. Please try again."})),u("Failed to prepare fill blanks test","error")}finally{g(M=>({...M,isLoading:!1}))}};return c.jsxs("div",{className:"fill-blanks-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Fill Blanks Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a test with text content and multiple choice blanks"}),h.error&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600 text-sm",children:h.error})})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!0?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(M=>({...M,separate_type:!0})),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:d.separate_type===!0,onChange:()=>f(M=>({...M,separate_type:!0})),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Separate Mode"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Multiple choice questions below the text"})]}),c.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!1?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(M=>({...M,separate_type:!1})),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:d.separate_type===!1,onChange:()=>f(M=>({...M,separate_type:!1})),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Inline Mode"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Dropdown for option inside the text"})]})]}),c.jsx(vce,{value:d.test_text,onChange:x,placeholder:"Type your text here. Use the 'Add Blank' button in the toolbar to insert blanks.",onAddBlank:y,blankCount:d.blanks.length})]}),d.separate_type===!0&&c.jsx("div",{className:"space-y-4",children:d.blanks.map((M,j)=>c.jsxs($t,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-md font-medium",children:["Blank ",M.id," Configuration"]}),c.jsx(ot,{variant:"danger",size:"small",onClick:()=>v(M.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question Text for Blank ",M.id," *"]}),c.jsx("input",{type:"text",placeholder:"Enter question text for this blank",value:M.question,onChange:A=>E(M.id,A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),M.options.map((A,D)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+D)}),c.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+D)}`,value:A||"",onChange:L=>b(M.id,D,L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),M.options.length>2&&c.jsx(ot,{variant:"danger",size:"small",onClick:()=>k(M.id,D),className:"px-2 py-1 text-sm",children:""})]},D)),M.options.length<6&&c.jsx(ot,{variant:"secondary",size:"small",onClick:()=>T(M.id),className:"w-full",children:"+ Add Option"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{value:M.correct_answer||"",onChange:A=>N(M.id,A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),M.options.filter(A=>A.trim().length>0).map((A,D)=>c.jsxs("option",{value:String.fromCharCode(65+D),children:[String.fromCharCode(65+D),") ",A]},D))]})]})]},M.id))}),d.separate_type===!1&&c.jsx("div",{className:"space-y-4",children:d.blanks.map((M,j)=>c.jsxs($t,{className:"p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-md font-medium",children:["Blank ",M.id," Options"]}),c.jsx(ot,{variant:"danger",size:"small",onClick:()=>v(M.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),M.options.map((A,D)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+D)}),c.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+D)}`,value:A||"",onChange:L=>b(M.id,D,L.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),M.options.length>2&&c.jsx(ot,{variant:"danger",size:"small",onClick:()=>k(M.id,D),className:"px-2 py-1 text-sm",children:""})]},D)),M.options.length<6&&c.jsx(ot,{variant:"secondary",size:"small",onClick:()=>T(M.id),className:"w-full",children:"+ Add Option"})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{value:M.correct_answer||"",onChange:A=>N(M.id,A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),M.options.filter(A=>A.trim().length>0).map((A,D)=>c.jsxs("option",{value:String.fromCharCode(65+D),children:[String.fromCharCode(65+D),") ",A]},D))]})]})]},M.id))}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx(ot,{onClick:n,variant:"secondary",disabled:a,children:"Cancel"}),c.jsx(ot,{onClick:P,variant:"primary",disabled:a||d.blanks.length===0,children:a?c.jsx(un,{size:"sm"}):"Save Test"})]})]})},bce=[{value:"A1",label:"A1 (Beginner)",description:"Basic vocabulary, simple sentences"},{value:"A2",label:"A2 (Elementary)",description:"Everyday vocabulary, present/past tenses"},{value:"B1",label:"B1 (Intermediate)",description:"Varied vocabulary, complex sentences"},{value:"B2",label:"B2 (Upper-Intermediate)",description:"Advanced vocabulary, sophisticated structures"},{value:"C1",label:"C1 (Advanced)",description:"Nuanced vocabulary, complex discourse"},{value:"C2",label:"C2 (Proficiency)",description:"Native-like fluency and accuracy"}],_ce=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{showNotification:i}=ai(),[o,l]=_.useState({min_words:50,questions:[{question_id:1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}),[u,d]=_.useState(!1),f=_.useCallback((T,k)=>{l(b=>({...b,[T]:k}))},[]),h=_.useCallback((T,k,b)=>{l(E=>({...E,questions:E.questions.map((N,P)=>P===T?{...N,[k]:b}:N)}))},[]),g=_.useCallback(()=>{l(T=>({...T,questions:[...T.questions,{question_id:T.questions.length+1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}))},[]),x=_.useCallback(T=>{o.questions.length>1&&l(k=>({...k,questions:k.questions.filter((b,E)=>E!==T)}))},[o.questions.length]),y=_.useCallback(()=>{const T={};return o.min_words<10&&(T.min_words="Minimum word count must be at least 10 words"),o.questions.forEach((k,b)=>{k.prompt.trim()||(T[`question_${b}_prompt`]="Question prompt is required")}),T},[o]),v=_.useCallback(async T=>{T.preventDefault();const k=y();if(Object.keys(k).length>0){i("Please fix the validation errors","error");return}d(!0);try{const b={test_name:e,time_limit:300,min_duration:30,max_duration:600,max_attempts:3,min_words:o.min_words,passing_score:50,allowed_time:null,questions:o.questions.map((E,N)=>({question_id:N+1,prompt:E.prompt,expected_duration:E.expected_duration,difficulty_level:E.difficulty_level}))};console.log(" [DEBUG] Calling onTestSaved with data:",b),t?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),t(b),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(b){console.error("Error preparing speaking test:",b),i("Failed to prepare speaking test","error")}finally{d(!1)}},[o,y,i,t,e]);return u||s?c.jsxs("div",{className:"flex items-center justify-center p-8",children:[c.jsx(un,{}),c.jsx("span",{className:"ml-2",children:"Creating speaking test..."})]}):c.jsxs("div",{className:"speaking-test-creator max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Speaking Test"}),c.jsx("p",{className:"text-gray-600",children:"Create a speaking test where students record audio responses with AI-powered feedback"})]}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Scoring Settings"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count *"}),c.jsx("input",{type:"number",min:"10",max:"1000",value:o.min_words,onChange:T=>f("min_words",parseInt(T.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.min_words&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.min_words})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),c.jsx(ot,{type:"button",variant:"outline",onClick:g,children:"Add Question"})]}),o.questions.length>1&&c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Multiple Questions Detected"}),c.jsx("div",{className:"mt-1 text-sm text-blue-700",children:c.jsxs("p",{children:["You have ",o.questions.length," questions in this test.",c.jsx("strong",{children:" Only one question will be randomly selected"})," and shown to each student. This ensures fair distribution across your question pool."]})})]})]})}),o.questions.map((T,k)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-3",children:[c.jsxs("h4",{className:"font-medium",children:["Question ",k+1]}),o.questions.length>1&&c.jsx(ot,{type:"button",variant:"outline",size:"sm",onClick:()=>x(k),className:"text-red-600 hover:text-red-700",children:"Remove"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Prompt *"}),c.jsx("textarea",{value:T.prompt,onChange:b=>h(k,"prompt",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter the question prompt for students"}),a[`question_${k}_prompt`]&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:a[`question_${k}_prompt`]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Duration (seconds)"}),c.jsx("input",{type:"number",min:"10",max:"600",value:T.expected_duration||"",onChange:b=>h(k,"expected_duration",b.target.value?parseInt(b.target.value):null),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEFR Level"}),c.jsx("select",{value:T.difficulty_level,onChange:b=>h(k,"difficulty_level",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:bce.map(b=>c.jsxs("option",{value:b.value,children:[b.label," - ",b.description]},b.value))}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the appropriate CEFR level for this question. This will be used by AI to evaluate students appropriately."})]})]})]})]},k))]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[c.jsx(ot,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),c.jsx(ot,{type:"submit",variant:"primary",disabled:u||s,children:u||s?"Creating...":"Create Speaking Test"})]})]})]})},rW=(e,t)=>{const[r,n]=_.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error reading localStorage key "${e}":`,i),t}}),s=_.useCallback(i=>{try{const o=i instanceof Function?i(r):i;n(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}},[e,r]),a=_.useCallback(()=>{try{window.localStorage.removeItem(e),n(t)}catch(i){console.error(`Error removing localStorage key "${e}":`,i)}},[e,t]);return[r,s,a]},J_=()=>{const e=_.useCallback((l,u=null)=>{try{const d=window.localStorage.getItem(l);return d?JSON.parse(d):u}catch(d){return console.error(`Error reading localStorage key "${l}":`,d),u}},[]),t=_.useCallback((l,u)=>{try{window.localStorage.setItem(l,JSON.stringify(u))}catch(d){console.error(`Error setting localStorage key "${l}":`,d)}},[]),r=_.useCallback(l=>{try{window.localStorage.removeItem(l)}catch(u){console.error(`Error removing localStorage key "${l}":`,u)}},[]),n=_.useCallback(()=>{if(confirm("Are you sure you want to clear all local storage? This cannot be undone."))try{window.localStorage.clear(),window.showNotification?window.showNotification("All local storage cleared!","success"):console.log("All local storage cleared!")}catch(l){console.error("Error clearing localStorage:",l)}},[]),s=_.useCallback(()=>{try{const l={};for(let h=0;h<window.localStorage.length;h++){const g=window.localStorage.key(h);g&&(l[g]=window.localStorage.getItem(g))}const u=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="localStorage_backup.json",f.click(),URL.revokeObjectURL(d),window.showNotification?window.showNotification("Local storage exported!","success"):console.log("Local storage exported!")}catch(l){console.error("Error exporting localStorage data:",l)}},[]),a=_.useCallback(()=>{try{window.localStorage.clear()}catch(l){console.error("Error clearing localStorage:",l)}},[]),i=_.useCallback(()=>{try{const l={};for(let u=0;u<window.localStorage.length;u++){const d=window.localStorage.key(u);d&&(l[d]=window.localStorage.getItem(d))}return l}catch(l){return console.error("Error exporting localStorage data:",l),{}}},[]),o=_.useCallback(l=>{try{Object.entries(l).forEach(([u,d])=>{window.localStorage.setItem(u,d)})}catch(u){console.error("Error importing localStorage data:",u)}},[]);return{getItem:e,setItem:t,removeItem:r,clearAll:a,clearAllLocalStorage:n,exportLocalStorage:s,exportData:i,importData:o}};class al{constructor(t,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=n}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new al(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class Ol{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new Ol(r,al.range(this,t))}}class nr{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+t,s,a,i=r&&r.loc;if(i&&i.start<=i.end){var o=i.lexer.input;s=i.start,a=i.end,s===o.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";var l=o.slice(s,a).replace(/[^]/g,"$&"),u;s>15?u=""+o.slice(s-15,s):u=o.slice(0,s);var d;a+15<o.length?d=o.slice(a,a+15)+"":d=o.slice(a),n+=u+l+d}var f=new Error(n);return f.name="ParseError",f.__proto__=nr.prototype,f.position=s,s!=null&&a!=null&&(f.length=a-s),f.rawMessage=t,f}}nr.prototype.__proto__=Error.prototype;var Sce=function(t,r){return t===void 0?r:t},kce=/([A-Z])/g,Tce=function(t){return t.replace(kce,"-$1").toLowerCase()},Cce={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Ece=/[&><"']/g;function Nce(e){return String(e).replace(Ece,t=>Cce[t])}var nW=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},Ace=function(t){var r=nW(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},jce=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},Pce=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Wn={deflt:Sce,escape:Nce,hyphenate:Tce,getBaseElem:nW,isCharacterBox:Ace,protocolFromUrl:Pce},qb={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function Mce(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class TC{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in qb)if(qb.hasOwnProperty(r)){var n=qb[r];this[r]=t[r]!==void 0?n.processor?n.processor(t[r]):t[r]:Mce(n)}}reportNonstrict(t,r,n){var s=this.strict;if(typeof s=="function"&&(s=s(t,r,n)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new nr("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),n);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,n){var s=this.strict;if(typeof s=="function")try{s=s(t,r,n)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=Wn.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var n=typeof this.trust=="function"?this.trust(t):this.trust;return!!n}}class hf{constructor(t,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=n}sup(){return Lu[Fce[this.id]]}sub(){return Lu[Dce[this.id]]}fracNum(){return Lu[Oce[this.id]]}fracDen(){return Lu[Ice[this.id]]}cramp(){return Lu[Rce[this.id]]}text(){return Lu[Lce[this.id]]}isTight(){return this.size>=2}}var CC=0,C4=1,Ap=2,Jd=3,Sv=4,mc=5,Wp=6,Bo=7,Lu=[new hf(CC,0,!1),new hf(C4,0,!0),new hf(Ap,1,!1),new hf(Jd,1,!0),new hf(Sv,2,!1),new hf(mc,2,!0),new hf(Wp,3,!1),new hf(Bo,3,!0)],Fce=[Sv,mc,Sv,mc,Wp,Bo,Wp,Bo],Dce=[mc,mc,mc,mc,Bo,Bo,Bo,Bo],Oce=[Ap,Jd,Sv,mc,Wp,Bo,Wp,Bo],Ice=[Jd,Jd,mc,mc,Bo,Bo,Bo,Bo],Rce=[C4,C4,Jd,Jd,mc,mc,Bo,Bo],Lce=[CC,C4,Ap,Jd,Ap,Jd,Ap,Jd],qr={DISPLAY:Lu[CC],TEXT:Lu[Ap],SCRIPT:Lu[Sv],SCRIPTSCRIPT:Lu[Wp]},A8=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Bce(e){for(var t=0;t<A8.length;t++)for(var r=A8[t],n=0;n<r.blocks.length;n++){var s=r.blocks[n];if(e>=s[0]&&e<=s[1])return r.name}return null}var Kb=[];A8.forEach(e=>e.blocks.forEach(t=>Kb.push(...t)));function sW(e){for(var t=0;t<Kb.length;t+=2)if(e>=Kb[t]&&e<=Kb[t+1])return!0;return!1}var Zg=80,$ce=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},zce=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Uce=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Wce=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},Hce=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},Gce=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},Vce=function(t,r,n){var s=n-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},qce=function(t,r,n){r=1e3*r;var s="";switch(t){case"sqrtMain":s=$ce(r,Zg);break;case"sqrtSize1":s=zce(r,Zg);break;case"sqrtSize2":s=Uce(r,Zg);break;case"sqrtSize3":s=Wce(r,Zg);break;case"sqrtSize4":s=Hce(r,Zg);break;case"sqrtTall":s=Vce(r,Zg,n)}return s},Kce=function(t,r){switch(t){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},fF={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},Yce=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class p2{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}}var zu={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},tb={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},hF={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Xce(e,t){zu[e]=t}function EC(e,t,r){if(!zu[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),s=zu[t][n];if(!s&&e[0]in hF&&(n=hF[e[0]].charCodeAt(0),s=zu[t][n]),!s&&r==="text"&&sW(n)&&(s=zu[t][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var v5={};function Jce(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!v5[t]){var r=v5[t]={cssEmPerMu:tb.quad[t]/18};for(var n in tb)tb.hasOwnProperty(n)&&(r[n]=tb[n][t])}return v5[t]}var Qce=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],mF=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],gF=function(t,r){return r.size<2?t:Qce[t-1][r.size-1]};class $d{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||$d.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=mF[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return new $d(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:gF(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:mF[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=gF($d.BASESIZE,t);return this.size===r&&this.textSize===$d.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==$d.BASESIZE?["sizing","reset-size"+this.size,"size"+$d.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Jce(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}$d.BASESIZE=6;var j8={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Zce={ex:!0,em:!0,mu:!0},aW=function(t){return typeof t!="string"&&(t=t.unit),t in j8||t in Zce||t==="ex"},Vs=function(t,r){var n;if(t.unit in j8)n=j8[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var s;if(r.style.isTight()?s=r.havingStyle(r.style.text()):s=r,t.unit==="ex")n=s.fontMetrics().xHeight;else if(t.unit==="em")n=s.fontMetrics().quad;else throw new nr("Invalid unit: '"+t.unit+"'");s!==r&&(n*=s.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*n,r.maxSize)},hr=function(t){return+t.toFixed(4)+"em"},Lf=function(t){return t.filter(r=>r).join(" ")},iW=function(t,r,n){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var s=r.getColor();s&&(this.style.color=s)}},oW=function(t){var r=document.createElement(t);r.className=Lf(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&r.setAttribute(s,this.attributes[s]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},eue=/[\s"'>/=\x00-\x1f]/,lW=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+Wn.escape(Lf(this.classes))+'"');var n="";for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Wn.hyphenate(s)+":"+this.style[s]+";");n&&(r+=' style="'+Wn.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(eue.test(a))throw new nr("Invalid attribute name '"+a+"'");r+=" "+a+'="'+Wn.escape(this.attributes[a])+'"'}r+=">";for(var i=0;i<this.children.length;i++)r+=this.children[i].toMarkup();return r+="</"+t+">",r};class x2{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,iW.call(this,t,n,s),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return oW.call(this,"span")}toMarkup(){return lW.call(this,"span")}}class NC{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,iW.call(this,r,s),this.children=n||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return oW.call(this,"a")}toMarkup(){return lW.call(this,"a")}}class tue{constructor(t,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=n}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+Wn.escape(this.src)+'"'+(' alt="'+Wn.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Wn.hyphenate(n)+":"+this.style[n]+";");return r&&(t+=' style="'+Wn.escape(r)+'"'),t+="'/>",t}}var rue={:"",:"",:"",:""};class bc{constructor(t,r,n,s,a,i,o,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=n||0,this.italic=s||0,this.skew=a||0,this.width=i||0,this.classes=o||[],this.style=l||{},this.maxFontSize=0;var u=Bce(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=rue[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=hr(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Lf(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=Wn.escape(Lf(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Wn.hyphenate(s)+":"+this.style[s]+";");n&&(t=!0,r+=' style="'+Wn.escape(n)+'"');var a=Wn.escape(this.text);return t?(r+=">",r+=a,r+="</span>",r):a}}class l0{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Wn.escape(this.attributes[r])+'"');t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</svg>",t}}class Bf{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",fF[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Wn.escape(this.alternate)+'"/>':'<path d="'+Wn.escape(fF[this.pathName])+'"/>'}}class P8{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Wn.escape(this.attributes[r])+'"');return t+="/>",t}}function pF(e){if(e instanceof bc)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function nue(e){if(e instanceof x2)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var sue={bin:1,close:1,inner:1,open:1,punct:1,rel:1},aue={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},bs={math:{},text:{}};function J(e,t,r,n,s,a){bs[e][s]={font:t,group:r,replace:n},a&&n&&(bs[e][n]=bs[e][s])}var ne="math",Kt="text",fe="main",Oe="ams",Bs="accent-token",Tr="bin",Go="close",x1="inner",Vr="mathord",Ua="op-token",zl="open",Q_="punct",Le="rel",y0="spacing",Ye="textord";J(ne,fe,Le,"","\\equiv",!0);J(ne,fe,Le,"","\\prec",!0);J(ne,fe,Le,"","\\succ",!0);J(ne,fe,Le,"","\\sim",!0);J(ne,fe,Le,"","\\perp");J(ne,fe,Le,"","\\preceq",!0);J(ne,fe,Le,"","\\succeq",!0);J(ne,fe,Le,"","\\simeq",!0);J(ne,fe,Le,"","\\mid",!0);J(ne,fe,Le,"","\\ll",!0);J(ne,fe,Le,"","\\gg",!0);J(ne,fe,Le,"","\\asymp",!0);J(ne,fe,Le,"","\\parallel");J(ne,fe,Le,"","\\bowtie",!0);J(ne,fe,Le,"","\\smile",!0);J(ne,fe,Le,"","\\sqsubseteq",!0);J(ne,fe,Le,"","\\sqsupseteq",!0);J(ne,fe,Le,"","\\doteq",!0);J(ne,fe,Le,"","\\frown",!0);J(ne,fe,Le,"","\\ni",!0);J(ne,fe,Le,"","\\propto",!0);J(ne,fe,Le,"","\\vdash",!0);J(ne,fe,Le,"","\\dashv",!0);J(ne,fe,Le,"","\\owns");J(ne,fe,Q_,".","\\ldotp");J(ne,fe,Q_,"","\\cdotp");J(ne,fe,Ye,"#","\\#");J(Kt,fe,Ye,"#","\\#");J(ne,fe,Ye,"&","\\&");J(Kt,fe,Ye,"&","\\&");J(ne,fe,Ye,"","\\aleph",!0);J(ne,fe,Ye,"","\\forall",!0);J(ne,fe,Ye,"","\\hbar",!0);J(ne,fe,Ye,"","\\exists",!0);J(ne,fe,Ye,"","\\nabla",!0);J(ne,fe,Ye,"","\\flat",!0);J(ne,fe,Ye,"","\\ell",!0);J(ne,fe,Ye,"","\\natural",!0);J(ne,fe,Ye,"","\\clubsuit",!0);J(ne,fe,Ye,"","\\wp",!0);J(ne,fe,Ye,"","\\sharp",!0);J(ne,fe,Ye,"","\\diamondsuit",!0);J(ne,fe,Ye,"","\\Re",!0);J(ne,fe,Ye,"","\\heartsuit",!0);J(ne,fe,Ye,"","\\Im",!0);J(ne,fe,Ye,"","\\spadesuit",!0);J(ne,fe,Ye,"","\\S",!0);J(Kt,fe,Ye,"","\\S");J(ne,fe,Ye,"","\\P",!0);J(Kt,fe,Ye,"","\\P");J(ne,fe,Ye,"","\\dag");J(Kt,fe,Ye,"","\\dag");J(Kt,fe,Ye,"","\\textdagger");J(ne,fe,Ye,"","\\ddag");J(Kt,fe,Ye,"","\\ddag");J(Kt,fe,Ye,"","\\textdaggerdbl");J(ne,fe,Go,"","\\rmoustache",!0);J(ne,fe,zl,"","\\lmoustache",!0);J(ne,fe,Go,"","\\rgroup",!0);J(ne,fe,zl,"","\\lgroup",!0);J(ne,fe,Tr,"","\\mp",!0);J(ne,fe,Tr,"","\\ominus",!0);J(ne,fe,Tr,"","\\uplus",!0);J(ne,fe,Tr,"","\\sqcap",!0);J(ne,fe,Tr,"","\\ast");J(ne,fe,Tr,"","\\sqcup",!0);J(ne,fe,Tr,"","\\bigcirc",!0);J(ne,fe,Tr,"","\\bullet",!0);J(ne,fe,Tr,"","\\ddagger");J(ne,fe,Tr,"","\\wr",!0);J(ne,fe,Tr,"","\\amalg");J(ne,fe,Tr,"&","\\And");J(ne,fe,Le,"","\\longleftarrow",!0);J(ne,fe,Le,"","\\Leftarrow",!0);J(ne,fe,Le,"","\\Longleftarrow",!0);J(ne,fe,Le,"","\\longrightarrow",!0);J(ne,fe,Le,"","\\Rightarrow",!0);J(ne,fe,Le,"","\\Longrightarrow",!0);J(ne,fe,Le,"","\\leftrightarrow",!0);J(ne,fe,Le,"","\\longleftrightarrow",!0);J(ne,fe,Le,"","\\Leftrightarrow",!0);J(ne,fe,Le,"","\\Longleftrightarrow",!0);J(ne,fe,Le,"","\\mapsto",!0);J(ne,fe,Le,"","\\longmapsto",!0);J(ne,fe,Le,"","\\nearrow",!0);J(ne,fe,Le,"","\\hookleftarrow",!0);J(ne,fe,Le,"","\\hookrightarrow",!0);J(ne,fe,Le,"","\\searrow",!0);J(ne,fe,Le,"","\\leftharpoonup",!0);J(ne,fe,Le,"","\\rightharpoonup",!0);J(ne,fe,Le,"","\\swarrow",!0);J(ne,fe,Le,"","\\leftharpoondown",!0);J(ne,fe,Le,"","\\rightharpoondown",!0);J(ne,fe,Le,"","\\nwarrow",!0);J(ne,fe,Le,"","\\rightleftharpoons",!0);J(ne,Oe,Le,"","\\nless",!0);J(ne,Oe,Le,"","\\@nleqslant");J(ne,Oe,Le,"","\\@nleqq");J(ne,Oe,Le,"","\\lneq",!0);J(ne,Oe,Le,"","\\lneqq",!0);J(ne,Oe,Le,"","\\@lvertneqq");J(ne,Oe,Le,"","\\lnsim",!0);J(ne,Oe,Le,"","\\lnapprox",!0);J(ne,Oe,Le,"","\\nprec",!0);J(ne,Oe,Le,"","\\npreceq",!0);J(ne,Oe,Le,"","\\precnsim",!0);J(ne,Oe,Le,"","\\precnapprox",!0);J(ne,Oe,Le,"","\\nsim",!0);J(ne,Oe,Le,"","\\@nshortmid");J(ne,Oe,Le,"","\\nmid",!0);J(ne,Oe,Le,"","\\nvdash",!0);J(ne,Oe,Le,"","\\nvDash",!0);J(ne,Oe,Le,"","\\ntriangleleft");J(ne,Oe,Le,"","\\ntrianglelefteq",!0);J(ne,Oe,Le,"","\\subsetneq",!0);J(ne,Oe,Le,"","\\@varsubsetneq");J(ne,Oe,Le,"","\\subsetneqq",!0);J(ne,Oe,Le,"","\\@varsubsetneqq");J(ne,Oe,Le,"","\\ngtr",!0);J(ne,Oe,Le,"","\\@ngeqslant");J(ne,Oe,Le,"","\\@ngeqq");J(ne,Oe,Le,"","\\gneq",!0);J(ne,Oe,Le,"","\\gneqq",!0);J(ne,Oe,Le,"","\\@gvertneqq");J(ne,Oe,Le,"","\\gnsim",!0);J(ne,Oe,Le,"","\\gnapprox",!0);J(ne,Oe,Le,"","\\nsucc",!0);J(ne,Oe,Le,"","\\nsucceq",!0);J(ne,Oe,Le,"","\\succnsim",!0);J(ne,Oe,Le,"","\\succnapprox",!0);J(ne,Oe,Le,"","\\ncong",!0);J(ne,Oe,Le,"","\\@nshortparallel");J(ne,Oe,Le,"","\\nparallel",!0);J(ne,Oe,Le,"","\\nVDash",!0);J(ne,Oe,Le,"","\\ntriangleright");J(ne,Oe,Le,"","\\ntrianglerighteq",!0);J(ne,Oe,Le,"","\\@nsupseteqq");J(ne,Oe,Le,"","\\supsetneq",!0);J(ne,Oe,Le,"","\\@varsupsetneq");J(ne,Oe,Le,"","\\supsetneqq",!0);J(ne,Oe,Le,"","\\@varsupsetneqq");J(ne,Oe,Le,"","\\nVdash",!0);J(ne,Oe,Le,"","\\precneqq",!0);J(ne,Oe,Le,"","\\succneqq",!0);J(ne,Oe,Le,"","\\@nsubseteqq");J(ne,Oe,Tr,"","\\unlhd");J(ne,Oe,Tr,"","\\unrhd");J(ne,Oe,Le,"","\\nleftarrow",!0);J(ne,Oe,Le,"","\\nrightarrow",!0);J(ne,Oe,Le,"","\\nLeftarrow",!0);J(ne,Oe,Le,"","\\nRightarrow",!0);J(ne,Oe,Le,"","\\nleftrightarrow",!0);J(ne,Oe,Le,"","\\nLeftrightarrow",!0);J(ne,Oe,Le,"","\\vartriangle");J(ne,Oe,Ye,"","\\hslash");J(ne,Oe,Ye,"","\\triangledown");J(ne,Oe,Ye,"","\\lozenge");J(ne,Oe,Ye,"","\\circledS");J(ne,Oe,Ye,"","\\circledR");J(Kt,Oe,Ye,"","\\circledR");J(ne,Oe,Ye,"","\\measuredangle",!0);J(ne,Oe,Ye,"","\\nexists");J(ne,Oe,Ye,"","\\mho");J(ne,Oe,Ye,"","\\Finv",!0);J(ne,Oe,Ye,"","\\Game",!0);J(ne,Oe,Ye,"","\\backprime");J(ne,Oe,Ye,"","\\blacktriangle");J(ne,Oe,Ye,"","\\blacktriangledown");J(ne,Oe,Ye,"","\\blacksquare");J(ne,Oe,Ye,"","\\blacklozenge");J(ne,Oe,Ye,"","\\bigstar");J(ne,Oe,Ye,"","\\sphericalangle",!0);J(ne,Oe,Ye,"","\\complement",!0);J(ne,Oe,Ye,"","\\eth",!0);J(Kt,fe,Ye,"","");J(ne,Oe,Ye,"","\\diagup");J(ne,Oe,Ye,"","\\diagdown");J(ne,Oe,Ye,"","\\square");J(ne,Oe,Ye,"","\\Box");J(ne,Oe,Ye,"","\\Diamond");J(ne,Oe,Ye,"","\\yen",!0);J(Kt,Oe,Ye,"","\\yen",!0);J(ne,Oe,Ye,"","\\checkmark",!0);J(Kt,Oe,Ye,"","\\checkmark");J(ne,Oe,Ye,"","\\beth",!0);J(ne,Oe,Ye,"","\\daleth",!0);J(ne,Oe,Ye,"","\\gimel",!0);J(ne,Oe,Ye,"","\\digamma",!0);J(ne,Oe,Ye,"","\\varkappa");J(ne,Oe,zl,"","\\@ulcorner",!0);J(ne,Oe,Go,"","\\@urcorner",!0);J(ne,Oe,zl,"","\\@llcorner",!0);J(ne,Oe,Go,"","\\@lrcorner",!0);J(ne,Oe,Le,"","\\leqq",!0);J(ne,Oe,Le,"","\\leqslant",!0);J(ne,Oe,Le,"","\\eqslantless",!0);J(ne,Oe,Le,"","\\lesssim",!0);J(ne,Oe,Le,"","\\lessapprox",!0);J(ne,Oe,Le,"","\\approxeq",!0);J(ne,Oe,Tr,"","\\lessdot");J(ne,Oe,Le,"","\\lll",!0);J(ne,Oe,Le,"","\\lessgtr",!0);J(ne,Oe,Le,"","\\lesseqgtr",!0);J(ne,Oe,Le,"","\\lesseqqgtr",!0);J(ne,Oe,Le,"","\\doteqdot");J(ne,Oe,Le,"","\\risingdotseq",!0);J(ne,Oe,Le,"","\\fallingdotseq",!0);J(ne,Oe,Le,"","\\backsim",!0);J(ne,Oe,Le,"","\\backsimeq",!0);J(ne,Oe,Le,"","\\subseteqq",!0);J(ne,Oe,Le,"","\\Subset",!0);J(ne,Oe,Le,"","\\sqsubset",!0);J(ne,Oe,Le,"","\\preccurlyeq",!0);J(ne,Oe,Le,"","\\curlyeqprec",!0);J(ne,Oe,Le,"","\\precsim",!0);J(ne,Oe,Le,"","\\precapprox",!0);J(ne,Oe,Le,"","\\vartriangleleft");J(ne,Oe,Le,"","\\trianglelefteq");J(ne,Oe,Le,"","\\vDash",!0);J(ne,Oe,Le,"","\\Vvdash",!0);J(ne,Oe,Le,"","\\smallsmile");J(ne,Oe,Le,"","\\smallfrown");J(ne,Oe,Le,"","\\bumpeq",!0);J(ne,Oe,Le,"","\\Bumpeq",!0);J(ne,Oe,Le,"","\\geqq",!0);J(ne,Oe,Le,"","\\geqslant",!0);J(ne,Oe,Le,"","\\eqslantgtr",!0);J(ne,Oe,Le,"","\\gtrsim",!0);J(ne,Oe,Le,"","\\gtrapprox",!0);J(ne,Oe,Tr,"","\\gtrdot");J(ne,Oe,Le,"","\\ggg",!0);J(ne,Oe,Le,"","\\gtrless",!0);J(ne,Oe,Le,"","\\gtreqless",!0);J(ne,Oe,Le,"","\\gtreqqless",!0);J(ne,Oe,Le,"","\\eqcirc",!0);J(ne,Oe,Le,"","\\circeq",!0);J(ne,Oe,Le,"","\\triangleq",!0);J(ne,Oe,Le,"","\\thicksim");J(ne,Oe,Le,"","\\thickapprox");J(ne,Oe,Le,"","\\supseteqq",!0);J(ne,Oe,Le,"","\\Supset",!0);J(ne,Oe,Le,"","\\sqsupset",!0);J(ne,Oe,Le,"","\\succcurlyeq",!0);J(ne,Oe,Le,"","\\curlyeqsucc",!0);J(ne,Oe,Le,"","\\succsim",!0);J(ne,Oe,Le,"","\\succapprox",!0);J(ne,Oe,Le,"","\\vartriangleright");J(ne,Oe,Le,"","\\trianglerighteq");J(ne,Oe,Le,"","\\Vdash",!0);J(ne,Oe,Le,"","\\shortmid");J(ne,Oe,Le,"","\\shortparallel");J(ne,Oe,Le,"","\\between",!0);J(ne,Oe,Le,"","\\pitchfork",!0);J(ne,Oe,Le,"","\\varpropto");J(ne,Oe,Le,"","\\blacktriangleleft");J(ne,Oe,Le,"","\\therefore",!0);J(ne,Oe,Le,"","\\backepsilon");J(ne,Oe,Le,"","\\blacktriangleright");J(ne,Oe,Le,"","\\because",!0);J(ne,Oe,Le,"","\\llless");J(ne,Oe,Le,"","\\gggtr");J(ne,Oe,Tr,"","\\lhd");J(ne,Oe,Tr,"","\\rhd");J(ne,Oe,Le,"","\\eqsim",!0);J(ne,fe,Le,"","\\Join");J(ne,Oe,Le,"","\\Doteq",!0);J(ne,Oe,Tr,"","\\dotplus",!0);J(ne,Oe,Tr,"","\\smallsetminus");J(ne,Oe,Tr,"","\\Cap",!0);J(ne,Oe,Tr,"","\\Cup",!0);J(ne,Oe,Tr,"","\\doublebarwedge",!0);J(ne,Oe,Tr,"","\\boxminus",!0);J(ne,Oe,Tr,"","\\boxplus",!0);J(ne,Oe,Tr,"","\\divideontimes",!0);J(ne,Oe,Tr,"","\\ltimes",!0);J(ne,Oe,Tr,"","\\rtimes",!0);J(ne,Oe,Tr,"","\\leftthreetimes",!0);J(ne,Oe,Tr,"","\\rightthreetimes",!0);J(ne,Oe,Tr,"","\\curlywedge",!0);J(ne,Oe,Tr,"","\\curlyvee",!0);J(ne,Oe,Tr,"","\\circleddash",!0);J(ne,Oe,Tr,"","\\circledast",!0);J(ne,Oe,Tr,"","\\centerdot");J(ne,Oe,Tr,"","\\intercal",!0);J(ne,Oe,Tr,"","\\doublecap");J(ne,Oe,Tr,"","\\doublecup");J(ne,Oe,Tr,"","\\boxtimes",!0);J(ne,Oe,Le,"","\\dashrightarrow",!0);J(ne,Oe,Le,"","\\dashleftarrow",!0);J(ne,Oe,Le,"","\\leftleftarrows",!0);J(ne,Oe,Le,"","\\leftrightarrows",!0);J(ne,Oe,Le,"","\\Lleftarrow",!0);J(ne,Oe,Le,"","\\twoheadleftarrow",!0);J(ne,Oe,Le,"","\\leftarrowtail",!0);J(ne,Oe,Le,"","\\looparrowleft",!0);J(ne,Oe,Le,"","\\leftrightharpoons",!0);J(ne,Oe,Le,"","\\curvearrowleft",!0);J(ne,Oe,Le,"","\\circlearrowleft",!0);J(ne,Oe,Le,"","\\Lsh",!0);J(ne,Oe,Le,"","\\upuparrows",!0);J(ne,Oe,Le,"","\\upharpoonleft",!0);J(ne,Oe,Le,"","\\downharpoonleft",!0);J(ne,fe,Le,"","\\origof",!0);J(ne,fe,Le,"","\\imageof",!0);J(ne,Oe,Le,"","\\multimap",!0);J(ne,Oe,Le,"","\\leftrightsquigarrow",!0);J(ne,Oe,Le,"","\\rightrightarrows",!0);J(ne,Oe,Le,"","\\rightleftarrows",!0);J(ne,Oe,Le,"","\\twoheadrightarrow",!0);J(ne,Oe,Le,"","\\rightarrowtail",!0);J(ne,Oe,Le,"","\\looparrowright",!0);J(ne,Oe,Le,"","\\curvearrowright",!0);J(ne,Oe,Le,"","\\circlearrowright",!0);J(ne,Oe,Le,"","\\Rsh",!0);J(ne,Oe,Le,"","\\downdownarrows",!0);J(ne,Oe,Le,"","\\upharpoonright",!0);J(ne,Oe,Le,"","\\downharpoonright",!0);J(ne,Oe,Le,"","\\rightsquigarrow",!0);J(ne,Oe,Le,"","\\leadsto");J(ne,Oe,Le,"","\\Rrightarrow",!0);J(ne,Oe,Le,"","\\restriction");J(ne,fe,Ye,"","`");J(ne,fe,Ye,"$","\\$");J(Kt,fe,Ye,"$","\\$");J(Kt,fe,Ye,"$","\\textdollar");J(ne,fe,Ye,"%","\\%");J(Kt,fe,Ye,"%","\\%");J(ne,fe,Ye,"_","\\_");J(Kt,fe,Ye,"_","\\_");J(Kt,fe,Ye,"_","\\textunderscore");J(ne,fe,Ye,"","\\angle",!0);J(ne,fe,Ye,"","\\infty",!0);J(ne,fe,Ye,"","\\prime");J(ne,fe,Ye,"","\\triangle");J(ne,fe,Ye,"","\\Gamma",!0);J(ne,fe,Ye,"","\\Delta",!0);J(ne,fe,Ye,"","\\Theta",!0);J(ne,fe,Ye,"","\\Lambda",!0);J(ne,fe,Ye,"","\\Xi",!0);J(ne,fe,Ye,"","\\Pi",!0);J(ne,fe,Ye,"","\\Sigma",!0);J(ne,fe,Ye,"","\\Upsilon",!0);J(ne,fe,Ye,"","\\Phi",!0);J(ne,fe,Ye,"","\\Psi",!0);J(ne,fe,Ye,"","\\Omega",!0);J(ne,fe,Ye,"A","");J(ne,fe,Ye,"B","");J(ne,fe,Ye,"E","");J(ne,fe,Ye,"Z","");J(ne,fe,Ye,"H","");J(ne,fe,Ye,"I","");J(ne,fe,Ye,"K","");J(ne,fe,Ye,"M","");J(ne,fe,Ye,"N","");J(ne,fe,Ye,"O","");J(ne,fe,Ye,"P","");J(ne,fe,Ye,"T","");J(ne,fe,Ye,"X","");J(ne,fe,Ye,"","\\neg",!0);J(ne,fe,Ye,"","\\lnot");J(ne,fe,Ye,"","\\top");J(ne,fe,Ye,"","\\bot");J(ne,fe,Ye,"","\\emptyset");J(ne,Oe,Ye,"","\\varnothing");J(ne,fe,Vr,"","\\alpha",!0);J(ne,fe,Vr,"","\\beta",!0);J(ne,fe,Vr,"","\\gamma",!0);J(ne,fe,Vr,"","\\delta",!0);J(ne,fe,Vr,"","\\epsilon",!0);J(ne,fe,Vr,"","\\zeta",!0);J(ne,fe,Vr,"","\\eta",!0);J(ne,fe,Vr,"","\\theta",!0);J(ne,fe,Vr,"","\\iota",!0);J(ne,fe,Vr,"","\\kappa",!0);J(ne,fe,Vr,"","\\lambda",!0);J(ne,fe,Vr,"","\\mu",!0);J(ne,fe,Vr,"","\\nu",!0);J(ne,fe,Vr,"","\\xi",!0);J(ne,fe,Vr,"","\\omicron",!0);J(ne,fe,Vr,"","\\pi",!0);J(ne,fe,Vr,"","\\rho",!0);J(ne,fe,Vr,"","\\sigma",!0);J(ne,fe,Vr,"","\\tau",!0);J(ne,fe,Vr,"","\\upsilon",!0);J(ne,fe,Vr,"","\\phi",!0);J(ne,fe,Vr,"","\\chi",!0);J(ne,fe,Vr,"","\\psi",!0);J(ne,fe,Vr,"","\\omega",!0);J(ne,fe,Vr,"","\\varepsilon",!0);J(ne,fe,Vr,"","\\vartheta",!0);J(ne,fe,Vr,"","\\varpi",!0);J(ne,fe,Vr,"","\\varrho",!0);J(ne,fe,Vr,"","\\varsigma",!0);J(ne,fe,Vr,"","\\varphi",!0);J(ne,fe,Tr,"","*",!0);J(ne,fe,Tr,"+","+");J(ne,fe,Tr,"","-",!0);J(ne,fe,Tr,"","\\cdot",!0);J(ne,fe,Tr,"","\\circ",!0);J(ne,fe,Tr,"","\\div",!0);J(ne,fe,Tr,"","\\pm",!0);J(ne,fe,Tr,"","\\times",!0);J(ne,fe,Tr,"","\\cap",!0);J(ne,fe,Tr,"","\\cup",!0);J(ne,fe,Tr,"","\\setminus",!0);J(ne,fe,Tr,"","\\land");J(ne,fe,Tr,"","\\lor");J(ne,fe,Tr,"","\\wedge",!0);J(ne,fe,Tr,"","\\vee",!0);J(ne,fe,Ye,"","\\surd");J(ne,fe,zl,"","\\langle",!0);J(ne,fe,zl,"","\\lvert");J(ne,fe,zl,"","\\lVert");J(ne,fe,Go,"?","?");J(ne,fe,Go,"!","!");J(ne,fe,Go,"","\\rangle",!0);J(ne,fe,Go,"","\\rvert");J(ne,fe,Go,"","\\rVert");J(ne,fe,Le,"=","=");J(ne,fe,Le,":",":");J(ne,fe,Le,"","\\approx",!0);J(ne,fe,Le,"","\\cong",!0);J(ne,fe,Le,"","\\ge");J(ne,fe,Le,"","\\geq",!0);J(ne,fe,Le,"","\\gets");J(ne,fe,Le,">","\\gt",!0);J(ne,fe,Le,"","\\in",!0);J(ne,fe,Le,"","\\@not");J(ne,fe,Le,"","\\subset",!0);J(ne,fe,Le,"","\\supset",!0);J(ne,fe,Le,"","\\subseteq",!0);J(ne,fe,Le,"","\\supseteq",!0);J(ne,Oe,Le,"","\\nsubseteq",!0);J(ne,Oe,Le,"","\\nsupseteq",!0);J(ne,fe,Le,"","\\models");J(ne,fe,Le,"","\\leftarrow",!0);J(ne,fe,Le,"","\\le");J(ne,fe,Le,"","\\leq",!0);J(ne,fe,Le,"<","\\lt",!0);J(ne,fe,Le,"","\\rightarrow",!0);J(ne,fe,Le,"","\\to");J(ne,Oe,Le,"","\\ngeq",!0);J(ne,Oe,Le,"","\\nleq",!0);J(ne,fe,y0,"","\\ ");J(ne,fe,y0,"","\\space");J(ne,fe,y0,"","\\nobreakspace");J(Kt,fe,y0,"","\\ ");J(Kt,fe,y0,""," ");J(Kt,fe,y0,"","\\space");J(Kt,fe,y0,"","\\nobreakspace");J(ne,fe,y0,null,"\\nobreak");J(ne,fe,y0,null,"\\allowbreak");J(ne,fe,Q_,",",",");J(ne,fe,Q_,";",";");J(ne,Oe,Tr,"","\\barwedge",!0);J(ne,Oe,Tr,"","\\veebar",!0);J(ne,fe,Tr,"","\\odot",!0);J(ne,fe,Tr,"","\\oplus",!0);J(ne,fe,Tr,"","\\otimes",!0);J(ne,fe,Ye,"","\\partial",!0);J(ne,fe,Tr,"","\\oslash",!0);J(ne,Oe,Tr,"","\\circledcirc",!0);J(ne,Oe,Tr,"","\\boxdot",!0);J(ne,fe,Tr,"","\\bigtriangleup");J(ne,fe,Tr,"","\\bigtriangledown");J(ne,fe,Tr,"","\\dagger");J(ne,fe,Tr,"","\\diamond");J(ne,fe,Tr,"","\\star");J(ne,fe,Tr,"","\\triangleleft");J(ne,fe,Tr,"","\\triangleright");J(ne,fe,zl,"{","\\{");J(Kt,fe,Ye,"{","\\{");J(Kt,fe,Ye,"{","\\textbraceleft");J(ne,fe,Go,"}","\\}");J(Kt,fe,Ye,"}","\\}");J(Kt,fe,Ye,"}","\\textbraceright");J(ne,fe,zl,"{","\\lbrace");J(ne,fe,Go,"}","\\rbrace");J(ne,fe,zl,"[","\\lbrack",!0);J(Kt,fe,Ye,"[","\\lbrack",!0);J(ne,fe,Go,"]","\\rbrack",!0);J(Kt,fe,Ye,"]","\\rbrack",!0);J(ne,fe,zl,"(","\\lparen",!0);J(ne,fe,Go,")","\\rparen",!0);J(Kt,fe,Ye,"<","\\textless",!0);J(Kt,fe,Ye,">","\\textgreater",!0);J(ne,fe,zl,"","\\lfloor",!0);J(ne,fe,Go,"","\\rfloor",!0);J(ne,fe,zl,"","\\lceil",!0);J(ne,fe,Go,"","\\rceil",!0);J(ne,fe,Ye,"\\","\\backslash");J(ne,fe,Ye,"","|");J(ne,fe,Ye,"","\\vert");J(Kt,fe,Ye,"|","\\textbar",!0);J(ne,fe,Ye,"","\\|");J(ne,fe,Ye,"","\\Vert");J(Kt,fe,Ye,"","\\textbardbl");J(Kt,fe,Ye,"~","\\textasciitilde");J(Kt,fe,Ye,"\\","\\textbackslash");J(Kt,fe,Ye,"^","\\textasciicircum");J(ne,fe,Le,"","\\uparrow",!0);J(ne,fe,Le,"","\\Uparrow",!0);J(ne,fe,Le,"","\\downarrow",!0);J(ne,fe,Le,"","\\Downarrow",!0);J(ne,fe,Le,"","\\updownarrow",!0);J(ne,fe,Le,"","\\Updownarrow",!0);J(ne,fe,Ua,"","\\coprod");J(ne,fe,Ua,"","\\bigvee");J(ne,fe,Ua,"","\\bigwedge");J(ne,fe,Ua,"","\\biguplus");J(ne,fe,Ua,"","\\bigcap");J(ne,fe,Ua,"","\\bigcup");J(ne,fe,Ua,"","\\int");J(ne,fe,Ua,"","\\intop");J(ne,fe,Ua,"","\\iint");J(ne,fe,Ua,"","\\iiint");J(ne,fe,Ua,"","\\prod");J(ne,fe,Ua,"","\\sum");J(ne,fe,Ua,"","\\bigotimes");J(ne,fe,Ua,"","\\bigoplus");J(ne,fe,Ua,"","\\bigodot");J(ne,fe,Ua,"","\\oint");J(ne,fe,Ua,"","\\oiint");J(ne,fe,Ua,"","\\oiiint");J(ne,fe,Ua,"","\\bigsqcup");J(ne,fe,Ua,"","\\smallint");J(Kt,fe,x1,"","\\textellipsis");J(ne,fe,x1,"","\\mathellipsis");J(Kt,fe,x1,"","\\ldots",!0);J(ne,fe,x1,"","\\ldots",!0);J(ne,fe,x1,"","\\@cdots",!0);J(ne,fe,x1,"","\\ddots",!0);J(ne,fe,Ye,"","\\varvdots");J(Kt,fe,Ye,"","\\varvdots");J(ne,fe,Bs,"","\\acute");J(ne,fe,Bs,"","\\grave");J(ne,fe,Bs,"","\\ddot");J(ne,fe,Bs,"~","\\tilde");J(ne,fe,Bs,"","\\bar");J(ne,fe,Bs,"","\\breve");J(ne,fe,Bs,"","\\check");J(ne,fe,Bs,"^","\\hat");J(ne,fe,Bs,"","\\vec");J(ne,fe,Bs,"","\\dot");J(ne,fe,Bs,"","\\mathring");J(ne,fe,Vr,"","\\@imath");J(ne,fe,Vr,"","\\@jmath");J(ne,fe,Ye,"","");J(ne,fe,Ye,"","");J(Kt,fe,Ye,"","\\i",!0);J(Kt,fe,Ye,"","\\j",!0);J(Kt,fe,Ye,"","\\ss",!0);J(Kt,fe,Ye,"","\\ae",!0);J(Kt,fe,Ye,"","\\oe",!0);J(Kt,fe,Ye,"","\\o",!0);J(Kt,fe,Ye,"","\\AE",!0);J(Kt,fe,Ye,"","\\OE",!0);J(Kt,fe,Ye,"","\\O",!0);J(Kt,fe,Bs,"","\\'");J(Kt,fe,Bs,"","\\`");J(Kt,fe,Bs,"","\\^");J(Kt,fe,Bs,"","\\~");J(Kt,fe,Bs,"","\\=");J(Kt,fe,Bs,"","\\u");J(Kt,fe,Bs,"","\\.");J(Kt,fe,Bs,"","\\c");J(Kt,fe,Bs,"","\\r");J(Kt,fe,Bs,"","\\v");J(Kt,fe,Bs,"",'\\"');J(Kt,fe,Bs,"","\\H");J(Kt,fe,Bs,"","\\textcircled");var cW={"--":!0,"---":!0,"``":!0,"''":!0};J(Kt,fe,Ye,"","--",!0);J(Kt,fe,Ye,"","\\textendash");J(Kt,fe,Ye,"","---",!0);J(Kt,fe,Ye,"","\\textemdash");J(Kt,fe,Ye,"","`",!0);J(Kt,fe,Ye,"","\\textquoteleft");J(Kt,fe,Ye,"","'",!0);J(Kt,fe,Ye,"","\\textquoteright");J(Kt,fe,Ye,"","``",!0);J(Kt,fe,Ye,"","\\textquotedblleft");J(Kt,fe,Ye,"","''",!0);J(Kt,fe,Ye,"","\\textquotedblright");J(ne,fe,Ye,"","\\degree",!0);J(Kt,fe,Ye,"","\\degree");J(Kt,fe,Ye,"","\\textdegree",!0);J(ne,fe,Ye,"","\\pounds");J(ne,fe,Ye,"","\\mathsterling",!0);J(Kt,fe,Ye,"","\\pounds");J(Kt,fe,Ye,"","\\textsterling",!0);J(ne,Oe,Ye,"","\\maltese");J(Kt,Oe,Ye,"","\\maltese");var xF='0123456789/@."';for(var w5=0;w5<xF.length;w5++){var yF=xF.charAt(w5);J(ne,fe,Ye,yF,yF)}var vF='0123456789!@*()-=+";:?/.,';for(var b5=0;b5<vF.length;b5++){var wF=vF.charAt(b5);J(Kt,fe,Ye,wF,wF)}var E4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _5=0;_5<E4.length;_5++){var rb=E4.charAt(_5);J(ne,fe,Vr,rb,rb),J(Kt,fe,Ye,rb,rb)}J(ne,Oe,Ye,"C","");J(Kt,Oe,Ye,"C","");J(ne,Oe,Ye,"H","");J(Kt,Oe,Ye,"H","");J(ne,Oe,Ye,"N","");J(Kt,Oe,Ye,"N","");J(ne,Oe,Ye,"P","");J(Kt,Oe,Ye,"P","");J(ne,Oe,Ye,"Q","");J(Kt,Oe,Ye,"Q","");J(ne,Oe,Ye,"R","");J(Kt,Oe,Ye,"R","");J(ne,Oe,Ye,"Z","");J(Kt,Oe,Ye,"Z","");J(ne,fe,Vr,"h","");J(Kt,fe,Vr,"h","");var Qr="";for(var Do=0;Do<E4.length;Do++){var na=E4.charAt(Do);Qr=String.fromCharCode(55349,56320+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Qr=String.fromCharCode(55349,56372+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Qr=String.fromCharCode(55349,56424+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Qr=String.fromCharCode(55349,56580+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Qr=String.fromCharCode(55349,56684+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Qr=String.fromCharCode(55349,56736+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Qr=String.fromCharCode(55349,56788+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Qr=String.fromCharCode(55349,56840+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Qr=String.fromCharCode(55349,56944+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Do<26&&(Qr=String.fromCharCode(55349,56632+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr),Qr=String.fromCharCode(55349,56476+Do),J(ne,fe,Vr,na,Qr),J(Kt,fe,Ye,na,Qr))}Qr="";J(ne,fe,Vr,"k",Qr);J(Kt,fe,Ye,"k",Qr);for(var Bh=0;Bh<10;Bh++){var mf=Bh.toString();Qr=String.fromCharCode(55349,57294+Bh),J(ne,fe,Vr,mf,Qr),J(Kt,fe,Ye,mf,Qr),Qr=String.fromCharCode(55349,57314+Bh),J(ne,fe,Vr,mf,Qr),J(Kt,fe,Ye,mf,Qr),Qr=String.fromCharCode(55349,57324+Bh),J(ne,fe,Vr,mf,Qr),J(Kt,fe,Ye,mf,Qr),Qr=String.fromCharCode(55349,57334+Bh),J(ne,fe,Vr,mf,Qr),J(Kt,fe,Ye,mf,Qr)}var M8="";for(var S5=0;S5<M8.length;S5++){var nb=M8.charAt(S5);J(ne,fe,Vr,nb,nb),J(Kt,fe,Ye,nb,nb)}var sb=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],bF=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],iue=function(t,r){var n=t.charCodeAt(0),s=t.charCodeAt(1),a=(n-55296)*1024+(s-56320)+65536,i=r==="math"?0:1;if(119808<=a&&a<120484){var o=Math.floor((a-119808)/26);return[sb[o][2],sb[o][i]]}else if(120782<=a&&a<=120831){var l=Math.floor((a-120782)/10);return[bF[l][2],bF[l][i]]}else{if(a===120485||a===120486)return[sb[0][2],sb[0][i]];if(120486<a&&a<120782)return["",""];throw new nr("Unsupported character: "+t)}},Z_=function(t,r,n){return bs[n][t]&&bs[n][t].replace&&(t=bs[n][t].replace),{value:t,metrics:EC(t,r,n)}},Jc=function(t,r,n,s,a){var i=Z_(t,r,n),o=i.metrics;t=i.value;var l;if(o){var u=o.italic;(n==="text"||s&&s.font==="mathit")&&(u=0),l=new bc(t,o.height,o.depth,u,o.skew,o.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+n+"'")),l=new bc(t,0,0,0,0,0,a);if(s){l.maxFontSize=s.sizeMultiplier,s.style.isTight()&&l.classes.push("mtight");var d=s.getColor();d&&(l.style.color=d)}return l},oue=function(t,r,n,s){return s===void 0&&(s=[]),n.font==="boldsymbol"&&Z_(t,"Main-Bold",r).metrics?Jc(t,"Main-Bold",r,n,s.concat(["mathbf"])):t==="\\"||bs[r][t].font==="main"?Jc(t,"Main-Regular",r,n,s):Jc(t,"AMS-Regular",r,n,s.concat(["amsrm"]))},lue=function(t,r,n,s,a){return a!=="textord"&&Z_(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},cue=function(t,r,n){var s=t.mode,a=t.text,i=["mord"],o=s==="math"||s==="text"&&r.font,l=o?r.font:r.fontFamily,u="",d="";if(a.charCodeAt(0)===55349&&([u,d]=iue(a,s)),u.length>0)return Jc(a,u,s,r,i.concat(d));if(l){var f,h;if(l==="boldsymbol"){var g=lue(a,s,r,i,n);f=g.fontName,h=[g.fontClass]}else o?(f=fW[l].fontName,h=[l]):(f=ab(l,r.fontWeight,r.fontShape),h=[l,r.fontWeight,r.fontShape]);if(Z_(a,f,s).metrics)return Jc(a,f,s,r,i.concat(h));if(cW.hasOwnProperty(a)&&f.slice(0,10)==="Typewriter"){for(var x=[],y=0;y<a.length;y++)x.push(Jc(a[y],f,s,r,i.concat(h)));return dW(x)}}if(n==="mathord")return Jc(a,"Math-Italic",s,r,i.concat(["mathnormal"]));if(n==="textord"){var v=bs[s][a]&&bs[s][a].font;if(v==="ams"){var T=ab("amsrm",r.fontWeight,r.fontShape);return Jc(a,T,s,r,i.concat("amsrm",r.fontWeight,r.fontShape))}else if(v==="main"||!v){var k=ab("textrm",r.fontWeight,r.fontShape);return Jc(a,k,s,r,i.concat(r.fontWeight,r.fontShape))}else{var b=ab(v,r.fontWeight,r.fontShape);return Jc(a,b,s,r,i.concat(b,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},uue=(e,t)=>{if(Lf(e.classes)!==Lf(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var s in t.style)if(t.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;return!0},due=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof bc&&n instanceof bc&&uue(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e},AC=function(t){for(var r=0,n=0,s=0,a=0;a<t.children.length;a++){var i=t.children[a];i.height>r&&(r=i.height),i.depth>n&&(n=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}t.height=r,t.depth=n,t.maxFontSize=s},rl=function(t,r,n,s){var a=new x2(t,r,n,s);return AC(a),a},uW=(e,t,r,n)=>new x2(e,t,r,n),fue=function(t,r,n){var s=rl([t],[],r);return s.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),s.style.borderBottomWidth=hr(s.height),s.maxFontSize=1,s},hue=function(t,r,n,s){var a=new NC(t,r,n,s);return AC(a),a},dW=function(t){var r=new p2(t);return AC(r),r},mue=function(t,r){return t instanceof p2?rl([],[t],r):t},gue=function(t){if(t.positionType==="individualShift"){for(var r=t.children,n=[r[0]],s=-r[0].shift-r[0].elem.depth,a=s,i=1;i<r.length;i++){var o=-r[i].shift-a-r[i].elem.depth,l=o-(r[i-1].elem.height+r[i-1].elem.depth);a=a+o,n.push({type:"kern",size:l}),n.push(r[i])}return{children:n,depth:s}}var u;if(t.positionType==="top"){for(var d=t.positionData,f=0;f<t.children.length;f++){var h=t.children[f];d-=h.type==="kern"?h.size:h.elem.height+h.elem.depth}u=d}else if(t.positionType==="bottom")u=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")u=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")u=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:u}},pue=function(t,r){for(var{children:n,depth:s}=gue(t),a=0,i=0;i<n.length;i++){var o=n[i];if(o.type==="elem"){var l=o.elem;a=Math.max(a,l.maxFontSize,l.height)}}a+=2;var u=rl(["pstrut"],[]);u.style.height=hr(a);for(var d=[],f=s,h=s,g=s,x=0;x<n.length;x++){var y=n[x];if(y.type==="kern")g+=y.size;else{var v=y.elem,T=y.wrapperClasses||[],k=y.wrapperStyle||{},b=rl(T,[u,v],void 0,k);b.style.top=hr(-a-g-v.depth),y.marginLeft&&(b.style.marginLeft=y.marginLeft),y.marginRight&&(b.style.marginRight=y.marginRight),d.push(b),g+=v.height+v.depth}f=Math.min(f,g),h=Math.max(h,g)}var E=rl(["vlist"],d);E.style.height=hr(h);var N;if(f<0){var P=rl([],[]),M=rl(["vlist"],[P]);M.style.height=hr(-f);var j=rl(["vlist-s"],[new bc("")]);N=[rl(["vlist-r"],[E,j]),rl(["vlist-r"],[M])]}else N=[rl(["vlist-r"],[E])];var A=rl(["vlist-t"],N);return N.length===2&&A.classes.push("vlist-t2"),A.height=h,A.depth=-f,A},xue=(e,t)=>{var r=rl(["mspace"],[],t),n=Vs(e,t);return r.style.marginRight=hr(n),r},ab=function(t,r,n){var s="";switch(t){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=t}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",s+"-"+a},fW={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},hW={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},yue=function(t,r){var[n,s,a]=hW[t],i=new Bf(n),o=new l0([i],{width:hr(s),height:hr(a),style:"width:"+hr(s),viewBox:"0 0 "+1e3*s+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),l=uW(["overlay"],[o],r);return l.height=a,l.style.height=hr(a),l.style.width=hr(s),l},mt={fontMap:fW,makeSymbol:Jc,mathsym:oue,makeSpan:rl,makeSvgSpan:uW,makeLineSpan:fue,makeAnchor:hue,makeFragment:dW,wrapFragment:mue,makeVList:pue,makeOrd:cue,makeGlue:xue,staticSvg:yue,svgData:hW,tryCombineChars:due},Ws={number:3,unit:"mu"},$h={number:4,unit:"mu"},Id={number:5,unit:"mu"},vue={mord:{mop:Ws,mbin:$h,mrel:Id,minner:Ws},mop:{mord:Ws,mop:Ws,mrel:Id,minner:Ws},mbin:{mord:$h,mop:$h,mopen:$h,minner:$h},mrel:{mord:Id,mop:Id,mopen:Id,minner:Id},mopen:{},mclose:{mop:Ws,mbin:$h,mrel:Id,minner:Ws},mpunct:{mord:Ws,mop:Ws,mrel:Id,mopen:Ws,mclose:Ws,mpunct:Ws,minner:Ws},minner:{mord:Ws,mop:Ws,mbin:$h,mrel:Id,mopen:Ws,mpunct:Ws,minner:Ws}},wue={mord:{mop:Ws},mop:{mord:Ws,mop:Ws},mbin:{},mrel:{},mopen:{},mclose:{mop:Ws},mpunct:{},minner:{mop:Ws}},mW={},N4={},A4={};function yr(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:s},l=0;l<r.length;++l)mW[r[l]]=o;t&&(a&&(N4[t]=a),i&&(A4[t]=i))}function qm(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;yr({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var j4=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},Ea=function(t){return t.type==="ordgroup"?t.body:[t]},c0=mt.makeSpan,bue=["leftmost","mbin","mopen","mrel","mop","mpunct"],_ue=["rightmost","mrel","mclose","mpunct"],Sue={display:qr.DISPLAY,text:qr.TEXT,script:qr.SCRIPT,scriptscript:qr.SCRIPTSCRIPT},kue={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ni=function(t,r,n,s){s===void 0&&(s=[null,null]);for(var a=[],i=0;i<t.length;i++){var o=Rn(t[i],r);if(o instanceof p2){var l=o.children;a.push(...l)}else a.push(o)}if(mt.tryCombineChars(a),!n)return a;var u=r;if(t.length===1){var d=t[0];d.type==="sizing"?u=r.havingSize(d.size):d.type==="styling"&&(u=r.havingStyle(Sue[d.style]))}var f=c0([s[0]||"leftmost"],[],r),h=c0([s[1]||"rightmost"],[],r),g=n==="root";return _F(a,(x,y)=>{var v=y.classes[0],T=x.classes[0];v==="mbin"&&_ue.includes(T)?y.classes[0]="mord":T==="mbin"&&bue.includes(v)&&(x.classes[0]="mord")},{node:f},h,g),_F(a,(x,y)=>{var v=F8(y),T=F8(x),k=v&&T?x.hasClass("mtight")?wue[v][T]:vue[v][T]:null;if(k)return mt.makeGlue(k,u)},{node:f},h,g),a},_F=function e(t,r,n,s,a){s&&t.push(s);for(var i=0;i<t.length;i++){var o=t[i],l=gW(o);if(l){e(l.children,r,n,null,a);continue}var u=!o.hasClass("mspace");if(u){var d=r(o,n.node);d&&(n.insertAfter?n.insertAfter(d):(t.unshift(d),i++))}u?n.node=o:a&&o.hasClass("newline")&&(n.node=c0(["leftmost"])),n.insertAfter=(f=>h=>{t.splice(f+1,0,h),i++})(i)}s&&t.pop()},gW=function(t){return t instanceof p2||t instanceof NC||t instanceof x2&&t.hasClass("enclosing")?t:null},Tue=function e(t,r){var n=gW(t);if(n){var s=n.children;if(s.length){if(r==="right")return e(s[s.length-1],"right");if(r==="left")return e(s[0],"left")}}return t},F8=function(t,r){return t?(r&&(t=Tue(t,r)),kue[t.classes[0]]||null):null},kv=function(t,r){var n=["nulldelimiter"].concat(t.baseSizingClasses());return c0(r.concat(n))},Rn=function(t,r,n){if(!t)return c0();if(N4[t.type]){var s=N4[t.type](t,r);if(n&&r.size!==n.size){s=c0(r.sizingClasses(n),[s],r);var a=r.sizeMultiplier/n.sizeMultiplier;s.height*=a,s.depth*=a}return s}else throw new nr("Got group of unknown type: '"+t.type+"'")};function ib(e,t){var r=c0(["base"],e,t),n=c0(["strut"]);return n.style.height=hr(r.height+r.depth),r.depth&&(n.style.verticalAlign=hr(-r.depth)),r.children.unshift(n),r}function D8(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var n=ni(e,t,"root"),s;n.length===2&&n[1].hasClass("tag")&&(s=n.pop());for(var a=[],i=[],o=0;o<n.length;o++)if(i.push(n[o]),n[o].hasClass("mbin")||n[o].hasClass("mrel")||n[o].hasClass("allowbreak")){for(var l=!1;o<n.length-1&&n[o+1].hasClass("mspace")&&!n[o+1].hasClass("newline");)o++,i.push(n[o]),n[o].hasClass("nobreak")&&(l=!0);l||(a.push(ib(i,t)),i=[])}else n[o].hasClass("newline")&&(i.pop(),i.length>0&&(a.push(ib(i,t)),i=[]),a.push(n[o]));i.length>0&&a.push(ib(i,t));var u;r?(u=ib(ni(r,t,!0)),u.classes=["tag"],a.push(u)):s&&a.push(s);var d=c0(["katex-html"],a);if(d.setAttribute("aria-hidden","true"),u){var f=u.children[0];f.style.height=hr(d.height+d.depth),d.depth&&(f.style.verticalAlign=hr(-d.depth))}return d}function pW(e){return new p2(e)}class Pl{constructor(t,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=Lf(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Uu&&this.children[n+1]instanceof Uu){for(var s=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Uu;)s+=this.children[++n].toText();t.appendChild(new Uu(s).toNode())}else t.appendChild(this.children[n].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=Wn.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+Wn.escape(Lf(this.classes))+'"'),t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class Uu{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Wn.escape(this.toText())}toText(){return this.text}}class Cue{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",hr(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+hr(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var er={MathNode:Pl,TextNode:Uu,SpaceNode:Cue,newDocumentFragment:pW},_c=function(t,r,n){return bs[r][t]&&bs[r][t].replace&&t.charCodeAt(0)!==55349&&!(cW.hasOwnProperty(t)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(t=bs[r][t].replace),new er.TextNode(t)},jC=function(t){return t.length===1?t[0]:new er.MathNode("mrow",t)},PC=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var s=t.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=t.text;if(["\\imath","\\jmath"].includes(a))return null;bs[s][a]&&bs[s][a].replace&&(a=bs[s][a].replace);var i=mt.fontMap[n].fontName;return EC(a,i,s)?mt.fontMap[n].variant:null};function k5(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof Uu&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof Uu&&r.text===","}else return!1}var ml=function(t,r,n){if(t.length===1){var s=ps(t[0],r);return n&&s instanceof Pl&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var a=[],i,o=0;o<t.length;o++){var l=ps(t[o],r);if(l instanceof Pl&&i instanceof Pl){if(l.type==="mtext"&&i.type==="mtext"&&l.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...l.children);continue}else if(l.type==="mn"&&i.type==="mn"){i.children.push(...l.children);continue}else if(k5(l)&&i.type==="mn"){i.children.push(...l.children);continue}else if(l.type==="mn"&&k5(i))l.children=[...i.children,...l.children],a.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(i.type==="mn"||k5(i))){var u=l.children[0];u instanceof Pl&&u.type==="mn"&&(u.children=[...i.children,...u.children],a.pop())}else if(i.type==="mi"&&i.children.length===1){var d=i.children[0];if(d instanceof Uu&&d.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var f=l.children[0];f instanceof Uu&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),a.pop())}}}a.push(l),i=l}return a},$f=function(t,r,n){return jC(ml(t,r,n))},ps=function(t,r){if(!t)return new er.MathNode("mrow");if(A4[t.type]){var n=A4[t.type](t,r);return n}else throw new nr("Got group of unknown type: '"+t.type+"'")};function SF(e,t,r,n,s){var a=ml(e,r),i;a.length===1&&a[0]instanceof Pl&&["mrow","mtable"].includes(a[0].type)?i=a[0]:i=new er.MathNode("mrow",a);var o=new er.MathNode("annotation",[new er.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var l=new er.MathNode("semantics",[i,o]),u=new er.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&u.setAttribute("display","block");var d=s?"katex":"katex-mathml";return mt.makeSpan([d],[u])}var xW=function(t){return new $d({style:t.displayMode?qr.DISPLAY:qr.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},yW=function(t,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),t=mt.makeSpan(n,[t])}return t},Eue=function(t,r,n){var s=xW(n),a;if(n.output==="mathml")return SF(t,r,s,n.displayMode,!0);if(n.output==="html"){var i=D8(t,s);a=mt.makeSpan(["katex"],[i])}else{var o=SF(t,r,s,n.displayMode,!1),l=D8(t,s);a=mt.makeSpan(["katex"],[o,l])}return yW(a,n)},Nue=function(t,r,n){var s=xW(n),a=D8(t,s),i=mt.makeSpan(["katex"],[a]);return yW(i,n)},Aue={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},jue=function(t){var r=new er.MathNode("mo",[new er.TextNode(Aue[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Pue={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Mue=function(t){return t.type==="ordgroup"?t.body.length:1},Fue=function(t,r){function n(){var o=4e5,l=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var u=t,d=Mue(u.base),f,h,g;if(d>5)l==="widehat"||l==="widecheck"?(f=420,o=2364,g=.42,h=l+"4"):(f=312,o=2340,g=.34,h="tilde4");else{var x=[1,1,2,2,3,3][d];l==="widehat"||l==="widecheck"?(o=[0,1062,2364,2364,2364][x],f=[0,239,300,360,420][x],g=[0,.24,.3,.3,.36,.42][x],h=l+x):(o=[0,600,1033,2339,2340][x],f=[0,260,286,306,312][x],g=[0,.26,.286,.3,.306,.34][x],h="tilde"+x)}var y=new Bf(h),v=new l0([y],{width:"100%",height:hr(g),viewBox:"0 0 "+o+" "+f,preserveAspectRatio:"none"});return{span:mt.makeSvgSpan([],[v],r),minWidth:0,height:g}}else{var T=[],k=Pue[l],[b,E,N]=k,P=N/1e3,M=b.length,j,A;if(M===1){var D=k[3];j=["hide-tail"],A=[D]}else if(M===2)j=["halfarrow-left","halfarrow-right"],A=["xMinYMin","xMaxYMin"];else if(M===3)j=["brace-left","brace-center","brace-right"],A=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+M+" children.");for(var L=0;L<M;L++){var G=new Bf(b[L]),X=new l0([G],{width:"400em",height:hr(P),viewBox:"0 0 "+o+" "+N,preserveAspectRatio:A[L]+" slice"}),se=mt.makeSvgSpan([j[L]],[X],r);if(M===1)return{span:se,minWidth:E,height:P};se.style.height=hr(P),T.push(se)}return{span:mt.makeSpan(["stretchy"],T,r),minWidth:E,height:P}}}var{span:s,minWidth:a,height:i}=n();return s.height=i,s.style.height=hr(i),a>0&&(s.style.minWidth=hr(a)),s},Due=function(t,r,n,s,a){var i,o=t.height+t.depth+n+s;if(/fbox|color|angl/.test(r)){if(i=mt.makeSpan(["stretchy",r],[],a),r==="fbox"){var l=a.color&&a.getColor();l&&(i.style.borderColor=l)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new P8({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new P8({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new l0(u,{width:"100%",height:hr(o)});i=mt.makeSvgSpan([],[d],a)}return i.height=o,i.style.height=hr(o),i},u0={encloseSpan:Due,mathMLnode:jue,svgSpan:Fue};function bn(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function MC(e){var t=e3(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function e3(e){return e&&(e.type==="atom"||aue.hasOwnProperty(e.type))?e:null}var FC=(e,t)=>{var r,n,s;e&&e.type==="supsub"?(n=bn(e.base,"accent"),r=n.base,e.base=r,s=nue(Rn(e,t)),e.base=n):(n=bn(e,"accent"),r=n.base);var a=Rn(r,t.havingCrampedStyle()),i=n.isShifty&&Wn.isCharacterBox(r),o=0;if(i){var l=Wn.getBaseElem(r),u=Rn(l,t.havingCrampedStyle());o=pF(u).skew}var d=n.label==="\\c",f=d?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),h;if(n.isStretchy)h=u0.svgSpan(n,t),h=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+hr(2*o)+")",marginLeft:hr(2*o)}:void 0}]},t);else{var g,x;n.label==="\\vec"?(g=mt.staticSvg("vec",t),x=mt.svgData.vec[1]):(g=mt.makeOrd({mode:n.mode,text:n.label},t,"textord"),g=pF(g),g.italic=0,x=g.width,d&&(f+=g.depth)),h=mt.makeSpan(["accent-body"],[g]);var y=n.label==="\\textcircled";y&&(h.classes.push("accent-full"),f=a.height);var v=o;y||(v-=x/2),h.style.left=hr(v),n.label==="\\textcircled"&&(h.style.top=".2em"),h=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-f},{type:"elem",elem:h}]},t)}var T=mt.makeSpan(["mord","accent"],[h],t);return s?(s.children[0]=T,s.height=Math.max(T.height,s.height),s.classes[0]="mord",s):T},vW=(e,t)=>{var r=e.isStretchy?u0.mathMLnode(e.label):new er.MathNode("mo",[_c(e.label,e.mode)]),n=new er.MathNode("mover",[ps(e.base,t),r]);return n.setAttribute("accent","true"),n},Oue=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));yr({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=j4(t[0]),n=!Oue.test(e.funcName),s=!n||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:s,base:r}},htmlBuilder:FC,mathmlBuilder:vW});yr({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return n==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:FC,mathmlBuilder:vW});yr({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:s}},htmlBuilder:(e,t)=>{var r=Rn(e.base,t),n=u0.svgSpan(e,t),s=e.label==="\\utilde"?.12:0,a=mt.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:r}]},t);return mt.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(e,t)=>{var r=u0.mathMLnode(e.label),n=new er.MathNode("munder",[ps(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var ob=e=>{var t=new er.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};yr({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:s}=e;return{type:"xArrow",mode:n.mode,label:s,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,n=t.havingStyle(r.sup()),s=mt.wrapFragment(Rn(e.body,n,t),t),a=e.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(a+"-arrow-pad");var i;e.below&&(n=t.havingStyle(r.sub()),i=mt.wrapFragment(Rn(e.below,n,t),t),i.classes.push(a+"-arrow-pad"));var o=u0.svgSpan(e,t),l=-t.fontMetrics().axisHeight+.5*o.height,u=-t.fontMetrics().axisHeight-.5*o.height-.111;(s.depth>.25||e.label==="\\xleftequilibrium")&&(u-=s.depth);var d;if(i){var f=-t.fontMetrics().axisHeight+i.height+.5*o.height+.111;d=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:l},{type:"elem",elem:i,shift:f}]},t)}else d=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:l}]},t);return d.children[0].children[0].children[1].classes.push("svg-align"),mt.makeSpan(["mrel","x-arrow"],[d],t)},mathmlBuilder(e,t){var r=u0.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(e.body){var s=ob(ps(e.body,t));if(e.below){var a=ob(ps(e.below,t));n=new er.MathNode("munderover",[r,a,s])}else n=new er.MathNode("mover",[r,s])}else if(e.below){var i=ob(ps(e.below,t));n=new er.MathNode("munder",[r,i])}else n=ob(),n=new er.MathNode("mover",[r,n]);return n}});var Iue=mt.makeSpan;function wW(e,t){var r=ni(e.body,t,!0);return Iue([e.mclass],r,t)}function bW(e,t){var r,n=ml(e.body,t);return e.mclass==="minner"?r=new er.MathNode("mpadded",n):e.mclass==="mord"?e.isCharacterBox?(r=n[0],r.type="mi"):r=new er.MathNode("mi",n):(e.isCharacterBox?(r=n[0],r.type="mo"):r=new er.MathNode("mo",n),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}yr({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Ea(s),isCharacterBox:Wn.isCharacterBox(s)}},htmlBuilder:wW,mathmlBuilder:bW});var t3=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};yr({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:t3(t[0]),body:Ea(t[1]),isCharacterBox:Wn.isCharacterBox(t[1])}}});yr({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:n}=e,s=t[1],a=t[0],i;n!=="\\stackrel"?i=t3(s):i="mrel";var o={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Ea(s)},l={type:"supsub",mode:a.mode,base:o,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:i,body:[l],isCharacterBox:Wn.isCharacterBox(l)}},htmlBuilder:wW,mathmlBuilder:bW});yr({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:t3(t[0]),body:Ea(t[0])}},htmlBuilder(e,t){var r=ni(e.body,t,!0),n=mt.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=ml(e.body,t),n=new er.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Rue={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},kF=()=>({type:"styling",body:[],mode:"math",style:"display"}),TF=e=>e.type==="textord"&&e.text==="@",Lue=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function Bue(e,t,r){var n=Rue[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var s=r.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},i=r.callFunction("\\Big",[a],[]),o=r.callFunction("\\\\cdright",[t[1]],[]),l={type:"ordgroup",mode:"math",body:[s,i,o]};return r.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function $ue(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new nr("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var n=[],s=[n],a=0;a<t.length;a++){for(var i=t[a],o=kF(),l=0;l<i.length;l++)if(!TF(i[l]))o.body.push(i[l]);else{n.push(o),l+=1;var u=MC(i[l]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var f=0;f<2;f++){for(var h=!0,g=l+1;g<i.length;g++){if(Lue(i[g],u)){h=!1,l=g;break}if(TF(i[g]))throw new nr("Missing a "+u+" character to complete a CD arrow.",i[g]);d[f].body.push(i[g])}if(h)throw new nr("Missing a "+u+" character to complete a CD arrow.",i[l])}else throw new nr('Expected one of "<>AV=|." after @',i[l]);var x=Bue(u,d,e),y={type:"styling",body:[x],mode:"math",style:"display"};n.push(y),o=kF()}a%2===0?n.push(o):n.shift(),n=[],s.push(n)}e.gullet.endGroup(),e.gullet.endGroup();var v=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:v,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}yr({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=mt.wrapFragment(Rn(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=hr(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new er.MathNode("mrow",[ps(e.label,t)]);return r=new er.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new er.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});yr({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=mt.wrapFragment(Rn(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new er.MathNode("mrow",[ps(e.fragment,t)])}});yr({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=bn(t[0],"ordgroup"),s=n.body,a="",i=0;i<s.length;i++){var o=bn(s[i],"textord");a+=o.text}var l=parseInt(a),u;if(isNaN(l))throw new nr("\\@char has non-numeric argument "+a);if(l<0||l>=1114111)throw new nr("\\@char with invalid code point "+a);return l<=65535?u=String.fromCharCode(l):(l-=65536,u=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var _W=(e,t)=>{var r=ni(e.body,t.withColor(e.color),!1);return mt.makeFragment(r)},SW=(e,t)=>{var r=ml(e.body,t.withColor(e.color)),n=new er.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};yr({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=bn(t[0],"color-token").color,s=t[1];return{type:"color",mode:r.mode,color:n,body:Ea(s)}},htmlBuilder:_W,mathmlBuilder:SW});yr({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,s=bn(t[0],"color-token").color;r.gullet.macros.set("\\current@color",s);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:s,body:a}},htmlBuilder:_W,mathmlBuilder:SW});yr({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,s=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:s&&bn(s,"size").value}},htmlBuilder(e,t){var r=mt.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=hr(Vs(e.size,t)))),r},mathmlBuilder(e,t){var r=new er.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",hr(Vs(e.size,t)))),r}});var O8={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},kW=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new nr("Expected a control sequence",e);return t},zue=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},TW=(e,t,r,n)=>{var s=e.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,s,n)};yr({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(O8[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=O8[n.text]),bn(t.parseFunction(),"internal");throw new nr("Invalid token after macro prefix",n)}});yr({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),s=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new nr("Expected a control sequence",n);for(var a=0,i,o=[[]];t.gullet.future().text!=="{";)if(n=t.gullet.popToken(),n.text==="#"){if(t.gullet.future().text==="{"){i=t.gullet.future(),o[a].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new nr('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new nr('Argument number "'+n.text+'" out of order');a++,o.push([])}else{if(n.text==="EOF")throw new nr("Expected a macro definition");o[a].push(n.text)}var{tokens:l}=t.gullet.consumeArg();return i&&l.unshift(i),(r==="\\edef"||r==="\\xdef")&&(l=t.gullet.expandTokens(l),l.reverse()),t.gullet.macros.set(s,{tokens:l,numArgs:a,delimiters:o},r===O8[r]),{type:"internal",mode:t.mode}}});yr({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=kW(t.gullet.popToken());t.gullet.consumeSpaces();var s=zue(t);return TW(t,n,s,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});yr({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=kW(t.gullet.popToken()),s=t.gullet.popToken(),a=t.gullet.popToken();return TW(t,n,a,r==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(s),{type:"internal",mode:t.mode}}});var Py=function(t,r,n){var s=bs.math[t]&&bs.math[t].replace,a=EC(s||t,r,n);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return a},DC=function(t,r,n,s){var a=n.havingBaseStyle(r),i=mt.makeSpan(s.concat(a.sizingClasses(n)),[t],n),o=a.sizeMultiplier/n.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=a.sizeMultiplier,i},CW=function(t,r,n){var s=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/s.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=hr(a),t.height-=a,t.depth+=a},Uue=function(t,r,n,s,a,i){var o=mt.makeSymbol(t,"Main-Regular",a,s),l=DC(o,r,s,i);return n&&CW(l,s,r),l},Wue=function(t,r,n,s){return mt.makeSymbol(t,"Size"+r+"-Regular",n,s)},EW=function(t,r,n,s,a,i){var o=Wue(t,r,a,s),l=DC(mt.makeSpan(["delimsizing","size"+r],[o],s),qr.TEXT,s,i);return n&&CW(l,s,qr.TEXT),l},T5=function(t,r,n){var s;r==="Size1-Regular"?s="delim-size1":s="delim-size4";var a=mt.makeSpan(["delimsizinginner",s],[mt.makeSpan([],[mt.makeSymbol(t,r,n)])]);return{type:"elem",elem:a}},C5=function(t,r,n){var s=zu["Size4-Regular"][t.charCodeAt(0)]?zu["Size4-Regular"][t.charCodeAt(0)][4]:zu["Size1-Regular"][t.charCodeAt(0)][4],a=new Bf("inner",Kce(t,Math.round(1e3*r))),i=new l0([a],{width:hr(s),height:hr(r),style:"width:"+hr(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),o=mt.makeSvgSpan([],[i],n);return o.height=r,o.style.height=hr(r),o.style.width=hr(s),{type:"elem",elem:o}},I8=.008,lb={type:"kern",size:-1*I8},Hue=["|","\\lvert","\\rvert","\\vert"],Gue=["\\|","\\lVert","\\rVert","\\Vert"],NW=function(t,r,n,s,a,i){var o,l,u,d,f="",h=0;o=u=d=t,l=null;var g="Size1-Regular";t==="\\uparrow"?u=d="":t==="\\Uparrow"?u=d="":t==="\\downarrow"?o=u="":t==="\\Downarrow"?o=u="":t==="\\updownarrow"?(o="\\uparrow",u="",d="\\downarrow"):t==="\\Updownarrow"?(o="\\Uparrow",u="",d="\\Downarrow"):Hue.includes(t)?(u="",f="vert",h=333):Gue.includes(t)?(u="",f="doublevert",h=556):t==="["||t==="\\lbrack"?(o="",u="",d="",g="Size4-Regular",f="lbrack",h=667):t==="]"||t==="\\rbrack"?(o="",u="",d="",g="Size4-Regular",f="rbrack",h=667):t==="\\lfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="lfloor",h=667):t==="\\lceil"||t===""?(o="",u=d="",g="Size4-Regular",f="lceil",h=667):t==="\\rfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="rfloor",h=667):t==="\\rceil"||t===""?(o="",u=d="",g="Size4-Regular",f="rceil",h=667):t==="("||t==="\\lparen"?(o="",u="",d="",g="Size4-Regular",f="lparen",h=875):t===")"||t==="\\rparen"?(o="",u="",d="",g="Size4-Regular",f="rparen",h=875):t==="\\{"||t==="\\lbrace"?(o="",l="",d="",u="",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(o="",l="",d="",u="",g="Size4-Regular"):t==="\\lgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\rgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\lmoustache"||t===""?(o="",d="",u="",g="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(o="",d="",u="",g="Size4-Regular");var x=Py(o,g,a),y=x.height+x.depth,v=Py(u,g,a),T=v.height+v.depth,k=Py(d,g,a),b=k.height+k.depth,E=0,N=1;if(l!==null){var P=Py(l,g,a);E=P.height+P.depth,N=2}var M=y+b+E,j=Math.max(0,Math.ceil((r-M)/(N*T))),A=M+j*N*T,D=s.fontMetrics().axisHeight;n&&(D*=s.sizeMultiplier);var L=A/2-D,G=[];if(f.length>0){var X=A-y-b,se=Math.round(A*1e3),Q=Yce(f,Math.round(X*1e3)),re=new Bf(f,Q),B=(h/1e3).toFixed(3)+"em",V=(se/1e3).toFixed(3)+"em",R=new l0([re],{width:B,height:V,viewBox:"0 0 "+h+" "+se}),H=mt.makeSvgSpan([],[R],s);H.height=se/1e3,H.style.width=B,H.style.height=V,G.push({type:"elem",elem:H})}else{if(G.push(T5(d,g,a)),G.push(lb),l===null){var z=A-y-b+2*I8;G.push(C5(u,z,s))}else{var I=(A-y-b-E)/2+2*I8;G.push(C5(u,I,s)),G.push(lb),G.push(T5(l,g,a)),G.push(lb),G.push(C5(u,I,s))}G.push(lb),G.push(T5(o,g,a))}var W=s.havingBaseStyle(qr.TEXT),K=mt.makeVList({positionType:"bottom",positionData:L,children:G},W);return DC(mt.makeSpan(["delimsizing","mult"],[K],W),qr.TEXT,s,i)},E5=80,N5=.08,A5=function(t,r,n,s,a){var i=qce(t,s,n),o=new Bf(t,i),l=new l0([o],{width:"400em",height:hr(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return mt.makeSvgSpan(["hide-tail"],[l],a)},Vue=function(t,r){var n=r.havingBaseSizing(),s=MW("\\surd",t*n.sizeMultiplier,PW,n),a=n.sizeMultiplier,i=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),o,l=0,u=0,d=0,f;return s.type==="small"?(d=1e3+1e3*i+E5,t<1?a=1:t<1.4&&(a=.7),l=(1+i+N5)/a,u=(1+i)/a,o=A5("sqrtMain",l,d,i,r),o.style.minWidth="0.853em",f=.833/a):s.type==="large"?(d=(1e3+E5)*Ky[s.size],u=(Ky[s.size]+i)/a,l=(Ky[s.size]+i+N5)/a,o=A5("sqrtSize"+s.size,l,d,i,r),o.style.minWidth="1.02em",f=1/a):(l=t+i+N5,u=t+i,d=Math.floor(1e3*t+i)+E5,o=A5("sqrtTall",l,d,i,r),o.style.minWidth="0.742em",f=1.056),o.height=u,o.style.height=hr(l),{span:o,advanceWidth:f,ruleWidth:(r.fontMetrics().sqrtRuleThickness+i)*a}},AW=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],que=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],jW=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Ky=[0,1.2,1.8,2.4,3],Kue=function(t,r,n,s,a){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),AW.includes(t)||jW.includes(t))return EW(t,r,!1,n,s,a);if(que.includes(t))return NW(t,Ky[r],!1,n,s,a);throw new nr("Illegal delimiter: '"+t+"'")},Yue=[{type:"small",style:qr.SCRIPTSCRIPT},{type:"small",style:qr.SCRIPT},{type:"small",style:qr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Xue=[{type:"small",style:qr.SCRIPTSCRIPT},{type:"small",style:qr.SCRIPT},{type:"small",style:qr.TEXT},{type:"stack"}],PW=[{type:"small",style:qr.SCRIPTSCRIPT},{type:"small",style:qr.SCRIPT},{type:"small",style:qr.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Jue=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},MW=function(t,r,n,s){for(var a=Math.min(2,3-s.style.size),i=a;i<n.length&&n[i].type!=="stack";i++){var o=Py(t,Jue(n[i]),"math"),l=o.height+o.depth;if(n[i].type==="small"){var u=s.havingBaseStyle(n[i].style);l*=u.sizeMultiplier}if(l>r)return n[i]}return n[n.length-1]},FW=function(t,r,n,s,a,i){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var o;jW.includes(t)?o=Yue:AW.includes(t)?o=PW:o=Xue;var l=MW(t,r,o,s);return l.type==="small"?Uue(t,l.style,n,s,a,i):l.type==="large"?EW(t,l.size,n,s,a,i):NW(t,r,n,s,a,i)},Que=function(t,r,n,s,a,i){var o=s.fontMetrics().axisHeight*s.sizeMultiplier,l=901,u=5/s.fontMetrics().ptPerEm,d=Math.max(r-o,n+o),f=Math.max(d/500*l,2*d-u);return FW(t,f,!0,s,a,i)},Qd={sqrtImage:Vue,sizedDelim:Kue,sizeToMaxHeight:Ky,customSizedDelim:FW,leftRightDelim:Que},CF={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Zue=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function r3(e,t){var r=e3(e);if(r&&Zue.includes(r.text))return r;throw r?new nr("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new nr("Invalid delimiter type '"+e.type+"'",e)}yr({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=r3(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:CF[e.funcName].size,mclass:CF[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?mt.makeSpan([e.mclass]):Qd.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(_c(e.delim,e.mode));var r=new er.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=hr(Qd.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function EF(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}yr({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new nr("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:r3(t[0],e).text,color:r}}});yr({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=r3(t[0],e),n=e.parser;++n.leftrightDepth;var s=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=bn(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(e,t)=>{EF(e);for(var r=ni(e.body,t,!0,["mopen","mclose"]),n=0,s=0,a=!1,i=0;i<r.length;i++)r[i].isMiddle?a=!0:(n=Math.max(r[i].height,n),s=Math.max(r[i].depth,s));n*=t.sizeMultiplier,s*=t.sizeMultiplier;var o;if(e.left==="."?o=kv(t,["mopen"]):o=Qd.leftRightDelim(e.left,n,s,t,e.mode,["mopen"]),r.unshift(o),a)for(var l=1;l<r.length;l++){var u=r[l],d=u.isMiddle;d&&(r[l]=Qd.leftRightDelim(d.delim,n,s,d.options,e.mode,[]))}var f;if(e.right===".")f=kv(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;f=Qd.leftRightDelim(e.right,n,s,h,e.mode,["mclose"])}return r.push(f),mt.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{EF(e);var r=ml(e.body,t);if(e.left!=="."){var n=new er.MathNode("mo",[_c(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(e.right!=="."){var s=new er.MathNode("mo",[_c(e.right,e.mode)]);s.setAttribute("fence","true"),e.rightColor&&s.setAttribute("mathcolor",e.rightColor),r.push(s)}return jC(r)}});yr({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=r3(t[0],e);if(!e.parser.leftrightDepth)throw new nr("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=kv(t,[]);else{r=Qd.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?_c("|","text"):_c(e.delim,e.mode),n=new er.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var OC=(e,t)=>{var r=mt.wrapFragment(Rn(e.body,t),t),n=e.label.slice(1),s=t.sizeMultiplier,a,i=0,o=Wn.isCharacterBox(e.body);if(n==="sout")a=mt.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/s,i=-.5*t.fontMetrics().xHeight;else if(n==="phase"){var l=Vs({number:.6,unit:"pt"},t),u=Vs({number:.35,unit:"ex"},t),d=t.havingBaseSizing();s=s/d.sizeMultiplier;var f=r.height+r.depth+l+u;r.style.paddingLeft=hr(f/2+l);var h=Math.floor(1e3*f*s),g=Gce(h),x=new l0([new Bf("phase",g)],{width:"400em",height:hr(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});a=mt.makeSvgSpan(["hide-tail"],[x],t),a.style.height=hr(f),i=r.depth+l+u}else{/cancel/.test(n)?o||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var y=0,v=0,T=0;/box/.test(n)?(T=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),y=t.fontMetrics().fboxsep+(n==="colorbox"?0:T),v=y):n==="angl"?(T=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),y=4*T,v=Math.max(0,.25-r.depth)):(y=o?.2:0,v=y),a=u0.encloseSpan(r,n,y,v,t),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=hr(T)):n==="angl"&&T!==.049&&(a.style.borderTopWidth=hr(T),a.style.borderRightWidth=hr(T)),i=r.depth+v,e.backgroundColor&&(a.style.backgroundColor=e.backgroundColor,e.borderColor&&(a.style.borderColor=e.borderColor))}var k;if(e.backgroundColor)k=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:i},{type:"elem",elem:r,shift:0}]},t);else{var b=/cancel|phase/.test(n)?["svg-align"]:[];k=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:i,wrapperClasses:b}]},t)}return/cancel/.test(n)&&(k.height=r.height,k.depth=r.depth),/cancel/.test(n)&&!o?mt.makeSpan(["mord","cancel-lap"],[k],t):mt.makeSpan(["mord"],[k],t)},IC=(e,t)=>{var r=0,n=new er.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[ps(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var s=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+s+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};yr({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=bn(t[0],"color-token").color,i=t[1];return{type:"enclose",mode:n.mode,label:s,backgroundColor:a,body:i}},htmlBuilder:OC,mathmlBuilder:IC});yr({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=bn(t[0],"color-token").color,i=bn(t[1],"color-token").color,o=t[2];return{type:"enclose",mode:n.mode,label:s,backgroundColor:i,borderColor:a,body:o}},htmlBuilder:OC,mathmlBuilder:IC});yr({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});yr({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"enclose",mode:r.mode,label:n,body:s}},htmlBuilder:OC,mathmlBuilder:IC});yr({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var DW={};function td(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},l=0;l<r.length;++l)DW[r[l]]=o;a&&(N4[t]=a),i&&(A4[t]=i)}var OW={};function ve(e,t){OW[e]=t}function NF(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var n3=e=>{var t=e.parser.settings;if(!t.displayMode)throw new nr("{"+e.envName+"} can be used only in display mode.")};function RC(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function Zf(e,t,r){var{hskipBeforeAndAfter:n,addJot:s,cols:a,arraystretch:i,colSeparationType:o,autoTag:l,singleRow:u,emptySingleRow:d,maxNumCols:f,leqno:h}=t;if(e.gullet.beginGroup(),u||e.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=e.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new nr("Invalid \\arraystretch: "+g)}e.gullet.beginGroup();var x=[],y=[x],v=[],T=[],k=l!=null?[]:void 0;function b(){l&&e.gullet.macros.set("\\@eqnsw","1",!0)}function E(){k&&(e.gullet.macros.get("\\df@tag")?(k.push(e.subparse([new Ol("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):k.push(!!l&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(b(),T.push(NF(e));;){var N=e.parseExpression(!1,u?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),N={type:"ordgroup",mode:e.mode,body:N},r&&(N={type:"styling",mode:e.mode,style:r,body:[N]}),x.push(N);var P=e.fetch().text;if(P==="&"){if(f&&x.length===f){if(u||o)throw new nr("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(P==="\\end"){E(),x.length===1&&N.type==="styling"&&N.body[0].body.length===0&&(y.length>1||!d)&&y.pop(),T.length<y.length+1&&T.push([]);break}else if(P==="\\\\"){e.consume();var M=void 0;e.gullet.future().text!==" "&&(M=e.parseSizeGroup(!0)),v.push(M?M.value:null),E(),T.push(NF(e)),x=[],y.push(x),b()}else throw new nr("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:i,body:y,cols:a,rowGaps:v,hskipBeforeAndAfter:n,hLinesBeforeRow:T,colSeparationType:o,tags:k,leqno:h}}function LC(e){return e.slice(0,1)==="d"?"display":"text"}var rd=function(t,r){var n,s,a=t.body.length,i=t.hLinesBeforeRow,o=0,l=new Array(a),u=[],d=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),f=1/r.fontMetrics().ptPerEm,h=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var g=r.havingStyle(qr.SCRIPT).sizeMultiplier;h=.2778*(g/r.sizeMultiplier)}var x=t.colSeparationType==="CD"?Vs({number:3,unit:"ex"},r):12*f,y=3*f,v=t.arraystretch*x,T=.7*v,k=.3*v,b=0;function E(Dt){for(var lt=0;lt<Dt.length;++lt)lt>0&&(b+=.25),u.push({pos:b,isDashed:Dt[lt]})}for(E(i[0]),n=0;n<t.body.length;++n){var N=t.body[n],P=T,M=k;o<N.length&&(o=N.length);var j=new Array(N.length);for(s=0;s<N.length;++s){var A=Rn(N[s],r);M<A.depth&&(M=A.depth),P<A.height&&(P=A.height),j[s]=A}var D=t.rowGaps[n],L=0;D&&(L=Vs(D,r),L>0&&(L+=k,M<L&&(M=L),L=0)),t.addJot&&(M+=y),j.height=P,j.depth=M,b+=P,j.pos=b,b+=M+L,l[n]=j,E(i[n+1])}var G=b/2+r.fontMetrics().axisHeight,X=t.cols||[],se=[],Q,re,B=[];if(t.tags&&t.tags.some(Dt=>Dt))for(n=0;n<a;++n){var V=l[n],R=V.pos-G,H=t.tags[n],z=void 0;H===!0?z=mt.makeSpan(["eqn-num"],[],r):H===!1?z=mt.makeSpan([],[],r):z=mt.makeSpan([],ni(H,r,!0),r),z.depth=V.depth,z.height=V.height,B.push({type:"elem",elem:z,shift:R})}for(s=0,re=0;s<o||re<X.length;++s,++re){for(var I=X[re]||{},W=!0;I.type==="separator";){if(W||(Q=mt.makeSpan(["arraycolsep"],[]),Q.style.width=hr(r.fontMetrics().doubleRuleSep),se.push(Q)),I.separator==="|"||I.separator===":"){var K=I.separator==="|"?"solid":"dashed",ee=mt.makeSpan(["vertical-separator"],[],r);ee.style.height=hr(b),ee.style.borderRightWidth=hr(d),ee.style.borderRightStyle=K,ee.style.margin="0 "+hr(-d/2);var oe=b-G;oe&&(ee.style.verticalAlign=hr(-oe)),se.push(ee)}else throw new nr("Invalid separator type: "+I.separator);re++,I=X[re]||{},W=!1}if(!(s>=o)){var Z=void 0;(s>0||t.hskipBeforeAndAfter)&&(Z=Wn.deflt(I.pregap,h),Z!==0&&(Q=mt.makeSpan(["arraycolsep"],[]),Q.style.width=hr(Z),se.push(Q)));var le=[];for(n=0;n<a;++n){var ue=l[n],de=ue[s];if(de){var Te=ue.pos-G;de.depth=ue.depth,de.height=ue.height,le.push({type:"elem",elem:de,shift:Te})}}le=mt.makeVList({positionType:"individualShift",children:le},r),le=mt.makeSpan(["col-align-"+(I.align||"c")],[le]),se.push(le),(s<o-1||t.hskipBeforeAndAfter)&&(Z=Wn.deflt(I.postgap,h),Z!==0&&(Q=mt.makeSpan(["arraycolsep"],[]),Q.style.width=hr(Z),se.push(Q)))}}if(l=mt.makeSpan(["mtable"],se),u.length>0){for(var ie=mt.makeLineSpan("hline",r,d),pe=mt.makeLineSpan("hdashline",r,d),Ae=[{type:"elem",elem:l,shift:0}];u.length>0;){var Me=u.pop(),Je=Me.pos-G;Me.isDashed?Ae.push({type:"elem",elem:pe,shift:Je}):Ae.push({type:"elem",elem:ie,shift:Je})}l=mt.makeVList({positionType:"individualShift",children:Ae},r)}if(B.length===0)return mt.makeSpan(["mord"],[l],r);var Ve=mt.makeVList({positionType:"individualShift",children:B},r);return Ve=mt.makeSpan(["tag"],[Ve],r),mt.makeFragment([l,Ve])},ede={c:"center ",l:"left ",r:"right "},nd=function(t,r){for(var n=[],s=new er.MathNode("mtd",[],["mtr-glue"]),a=new er.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<t.body.length;i++){for(var o=t.body[i],l=[],u=0;u<o.length;u++)l.push(new er.MathNode("mtd",[ps(o[u],r)]));t.tags&&t.tags[i]&&(l.unshift(s),l.push(s),t.leqno?l.unshift(a):l.push(a)),n.push(new er.MathNode("mtr",l))}var d=new er.MathNode("mtable",n),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);d.setAttribute("rowspacing",hr(f));var h="",g="";if(t.cols&&t.cols.length>0){var x=t.cols,y="",v=!1,T=0,k=x.length;x[0].type==="separator"&&(h+="top ",T=1),x[x.length-1].type==="separator"&&(h+="bottom ",k-=1);for(var b=T;b<k;b++)x[b].type==="align"?(g+=ede[x[b].align],v&&(y+="none "),v=!0):x[b].type==="separator"&&v&&(y+=x[b].separator==="|"?"solid ":"dashed ",v=!1);d.setAttribute("columnalign",g.trim()),/[sd]/.test(y)&&d.setAttribute("columnlines",y.trim())}if(t.colSeparationType==="align"){for(var E=t.cols||[],N="",P=1;P<E.length;P++)N+=P%2?"0em ":"1em ";d.setAttribute("columnspacing",N.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var M="",j=t.hLinesBeforeRow;h+=j[0].length>0?"left ":"",h+=j[j.length-1].length>0?"right ":"";for(var A=1;A<j.length-1;A++)M+=j[A].length===0?"none ":j[A][0]?"dashed ":"solid ";return/[sd]/.test(M)&&d.setAttribute("rowlines",M.trim()),h!==""&&(d=new er.MathNode("menclose",[d]),d.setAttribute("notation",h.trim())),t.arraystretch&&t.arraystretch<1&&(d=new er.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},IW=function(t,r){t.envName.indexOf("ed")===-1&&n3(t);var n=[],s=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",i=Zf(t.parser,{cols:n,addJot:!0,autoTag:a?void 0:RC(t.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),o,l=0,u={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var d="",f=0;f<r[0].body.length;f++){var h=bn(r[0].body[f],"textord");d+=h.text}o=Number(d),l=o*2}var g=!l;i.body.forEach(function(T){for(var k=1;k<T.length;k+=2){var b=bn(T[k],"styling"),E=bn(b.body[0],"ordgroup");E.body.unshift(u)}if(g)l<T.length&&(l=T.length);else{var N=T.length/2;if(o<N)throw new nr("Too many math in a row: "+("expected "+o+", but got "+N),T[0])}});for(var x=0;x<l;++x){var y="r",v=0;x%2===1?y="l":x>0&&g&&(v=1),n[x]={type:"align",align:y,pregap:v,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};td({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=e3(t[0]),n=r?[t[0]]:bn(t[0],"ordgroup").body,s=n.map(function(i){var o=MC(i),l=o.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new nr("Unknown column alignment: "+l,i)}),a={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return Zf(e.parser,a,LC(e.envName))},htmlBuilder:rd,mathmlBuilder:nd});td({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var s=e.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),r=s.fetch().text,"lcr".indexOf(r)===-1)throw new nr("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),n.cols=[{type:"align",align:r}]}}var a=Zf(e.parser,n,LC(e.envName)),i=Math.max(0,...a.body.map(o=>o.length));return a.cols=new Array(i).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:rd,mathmlBuilder:nd});td({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=Zf(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:rd,mathmlBuilder:nd});td({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=e3(t[0]),n=r?[t[0]]:bn(t[0],"ordgroup").body,s=n.map(function(i){var o=MC(i),l=o.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new nr("Unknown column alignment: "+l,i)});if(s.length>1)throw new nr("{subarray} can contain only one column");var a={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=Zf(e.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new nr("{subarray} can contain only one column");return a},htmlBuilder:rd,mathmlBuilder:nd});td({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Zf(e.parser,t,LC(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:rd,mathmlBuilder:nd});td({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:IW,htmlBuilder:rd,mathmlBuilder:nd});td({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&n3(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:RC(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return Zf(e.parser,t,"display")},htmlBuilder:rd,mathmlBuilder:nd});td({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:IW,htmlBuilder:rd,mathmlBuilder:nd});td({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){n3(e);var t={autoTag:RC(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return Zf(e.parser,t,"display")},htmlBuilder:rd,mathmlBuilder:nd});td({type:"array",names:["CD"],props:{numArgs:0},handler(e){return n3(e),$ue(e.parser)},htmlBuilder:rd,mathmlBuilder:nd});ve("\\nonumber","\\gdef\\@eqnsw{0}");ve("\\notag","\\nonumber");yr({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new nr(e.funcName+" valid only within array environment")}});var AF=DW;yr({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];if(s.type!=="ordgroup")throw new nr("Invalid environment name",s);for(var a="",i=0;i<s.body.length;++i)a+=bn(s.body[i],"textord").text;if(n==="\\begin"){if(!AF.hasOwnProperty(a))throw new nr("No such environment: "+a,s);var o=AF[a],{args:l,optArgs:u}=r.parseArguments("\\begin{"+a+"}",o),d={mode:r.mode,envName:a,parser:r},f=o.handler(d,l,u);r.expect("\\end",!1);var h=r.nextToken,g=bn(r.parseFunction(),"environment");if(g.name!==a)throw new nr("Mismatch: \\begin{"+a+"} matched by \\end{"+g.name+"}",h);return f}return{type:"environment",mode:r.mode,name:a,nameGroup:s}}});var RW=(e,t)=>{var r=e.font,n=t.withFont(r);return Rn(e.body,n)},LW=(e,t)=>{var r=e.font,n=t.withFont(r);return ps(e.body,n)},jF={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};yr({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=j4(t[0]),a=n;return a in jF&&(a=jF[a]),{type:"font",mode:r.mode,font:a.slice(1),body:s}},htmlBuilder:RW,mathmlBuilder:LW});yr({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],s=Wn.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:t3(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:s}}});yr({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:s}=e,{mode:a}=r,i=r.parseExpression(!0,s),o="math"+n.slice(1);return{type:"font",mode:a,font:o,body:{type:"ordgroup",mode:r.mode,body:i}}},htmlBuilder:RW,mathmlBuilder:LW});var BW=(e,t)=>{var r=t;return e==="display"?r=r.id>=qr.SCRIPT.id?r.text():qr.DISPLAY:e==="text"&&r.size===qr.DISPLAY.size?r=qr.TEXT:e==="script"?r=qr.SCRIPT:e==="scriptscript"&&(r=qr.SCRIPTSCRIPT),r},BC=(e,t)=>{var r=BW(e.size,t.style),n=r.fracNum(),s=r.fracDen(),a;a=t.havingStyle(n);var i=Rn(e.numer,a,t);if(e.continued){var o=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;i.height=i.height<o?o:i.height,i.depth=i.depth<l?l:i.depth}a=t.havingStyle(s);var u=Rn(e.denom,a,t),d,f,h;e.hasBarLine?(e.barSize?(f=Vs(e.barSize,t),d=mt.makeLineSpan("frac-line",t,f)):d=mt.makeLineSpan("frac-line",t),f=d.height,h=d.height):(d=null,f=0,h=t.fontMetrics().defaultRuleThickness);var g,x,y;r.size===qr.DISPLAY.size||e.size==="display"?(g=t.fontMetrics().num1,f>0?x=3*h:x=7*h,y=t.fontMetrics().denom1):(f>0?(g=t.fontMetrics().num2,x=h):(g=t.fontMetrics().num3,x=3*h),y=t.fontMetrics().denom2);var v;if(d){var k=t.fontMetrics().axisHeight;g-i.depth-(k+.5*f)<x&&(g+=x-(g-i.depth-(k+.5*f))),k-.5*f-(u.height-y)<x&&(y+=x-(k-.5*f-(u.height-y)));var b=-(k-.5*f);v=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:d,shift:b},{type:"elem",elem:i,shift:-g}]},t)}else{var T=g-i.depth-(u.height-y);T<x&&(g+=.5*(x-T),y+=.5*(x-T)),v=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:i,shift:-g}]},t)}a=t.havingStyle(r),v.height*=a.sizeMultiplier/t.sizeMultiplier,v.depth*=a.sizeMultiplier/t.sizeMultiplier;var E;r.size===qr.DISPLAY.size?E=t.fontMetrics().delim1:r.size===qr.SCRIPTSCRIPT.size?E=t.havingStyle(qr.SCRIPT).fontMetrics().delim2:E=t.fontMetrics().delim2;var N,P;return e.leftDelim==null?N=kv(t,["mopen"]):N=Qd.customSizedDelim(e.leftDelim,E,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?P=mt.makeSpan([]):e.rightDelim==null?P=kv(t,["mclose"]):P=Qd.customSizedDelim(e.rightDelim,E,!0,t.havingStyle(r),e.mode,["mclose"]),mt.makeSpan(["mord"].concat(a.sizingClasses(t)),[N,mt.makeSpan(["mfrac"],[v]),P],t)},$C=(e,t)=>{var r=new er.MathNode("mfrac",[ps(e.numer,t),ps(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var n=Vs(e.barSize,t);r.setAttribute("linethickness",hr(n))}var s=BW(e.size,t.style);if(s.size!==t.style.size){r=new er.MathNode("mstyle",[r]);var a=s.size===qr.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var i=[];if(e.leftDelim!=null){var o=new er.MathNode("mo",[new er.TextNode(e.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),i.push(o)}if(i.push(r),e.rightDelim!=null){var l=new er.MathNode("mo",[new er.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),i.push(l)}return jC(i)}return r};yr({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1],i,o=null,l=null,u="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,o="(",l=")";break;case"\\\\bracefrac":i=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":i=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:s,denom:a,hasBarLine:i,leftDelim:o,rightDelim:l,size:u,barSize:null}},htmlBuilder:BC,mathmlBuilder:$C});yr({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:s,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});yr({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:n}=e,s;switch(r){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:s,token:n}}});var PF=["display","text","script","scriptscript"],MF=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};yr({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,n=t[4],s=t[5],a=j4(t[0]),i=a.type==="atom"&&a.family==="open"?MF(a.text):null,o=j4(t[1]),l=o.type==="atom"&&o.family==="close"?MF(o.text):null,u=bn(t[2],"size"),d,f=null;u.isBlank?d=!0:(f=u.value,d=f.number>0);var h="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var x=bn(g.body[0],"textord");h=PF[Number(x.text)]}}else g=bn(g,"textord"),h=PF[Number(g.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:d,barSize:f,leftDelim:i,rightDelim:l,size:h}},htmlBuilder:BC,mathmlBuilder:$C});yr({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:s}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:bn(t[0],"size").value,token:s}}});yr({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=jce(bn(t[1],"infix").size),i=t[2],o=a.number>0;return{type:"genfrac",mode:r.mode,numer:s,denom:i,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:BC,mathmlBuilder:$C});var $W=(e,t)=>{var r=t.style,n,s;e.type==="supsub"?(n=e.sup?Rn(e.sup,t.havingStyle(r.sup()),t):Rn(e.sub,t.havingStyle(r.sub()),t),s=bn(e.base,"horizBrace")):s=bn(e,"horizBrace");var a=Rn(s.base,t.havingBaseStyle(qr.DISPLAY)),i=u0.svgSpan(s,t),o;if(s.isOver?(o=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:i}]},t),o.children[0].children[0].children[1].classes.push("svg-align")):(o=mt.makeVList({positionType:"bottom",positionData:a.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:a}]},t),o.children[0].children[0].children[0].classes.push("svg-align")),n){var l=mt.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t);s.isOver?o=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},t):o=mt.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return mt.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t)},tde=(e,t)=>{var r=u0.mathMLnode(e.label);return new er.MathNode(e.isOver?"mover":"munder",[ps(e.base,t),r])};yr({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:$W,mathmlBuilder:tde});yr({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],s=bn(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:r.mode,href:s,body:Ea(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=ni(e.body,t,!1);return mt.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=$f(e.body,t);return r instanceof Pl||(r=new Pl("mrow",[r])),r.setAttribute("href",e.href),r}});yr({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=bn(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var s=[],a=0;a<n.length;a++){var i=n[a];i==="~"&&(i="\\textasciitilde"),s.push({type:"textord",mode:"text",text:i})}var o={type:"text",mode:r.mode,font:"\\texttt",body:s};return{type:"href",mode:r.mode,href:n,body:Ea(o)}}});yr({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:Ea(t[0])}},htmlBuilder(e,t){var r=ni(e.body,t,!1);return mt.makeFragment(r)},mathmlBuilder(e,t){return new er.MathNode("mrow",ml(e.body,t))}});yr({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,token:s}=e,a=bn(t[0],"raw").string,i=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,l={};switch(n){case"\\htmlClass":l.class=a,o={command:"\\htmlClass",class:a};break;case"\\htmlId":l.id=a,o={command:"\\htmlId",id:a};break;case"\\htmlStyle":l.style=a,o={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var u=a.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length!==2)throw new nr("Error parsing key-value for \\htmlData");l["data-"+f[0].trim()]=f[1].trim()}o={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(o)?{type:"html",mode:r.mode,attributes:l,body:Ea(i)}:r.formatUnsupportedCmd(n)},htmlBuilder:(e,t)=>{var r=ni(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var s=mt.makeSpan(n,r,t);for(var a in e.attributes)a!=="class"&&e.attributes.hasOwnProperty(a)&&s.setAttribute(a,e.attributes[a]);return s},mathmlBuilder:(e,t)=>$f(e.body,t)});yr({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:Ea(t[0]),mathml:Ea(t[1])}},htmlBuilder:(e,t)=>{var r=ni(e.html,t,!1);return mt.makeFragment(r)},mathmlBuilder:(e,t)=>$f(e.mathml,t)});var j5=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new nr("Invalid size: '"+t+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!aW(n))throw new nr("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};yr({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,s={number:0,unit:"em"},a={number:.9,unit:"em"},i={number:0,unit:"em"},o="";if(r[0])for(var l=bn(r[0],"raw").string,u=l.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length===2){var h=f[1].trim();switch(f[0].trim()){case"alt":o=h;break;case"width":s=j5(h);break;case"height":a=j5(h);break;case"totalheight":i=j5(h);break;default:throw new nr("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=bn(t[0],"url").url;return o===""&&(o=g,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:n.mode,alt:o,width:s,height:a,totalheight:i,src:g}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=Vs(e.height,t),n=0;e.totalheight.number>0&&(n=Vs(e.totalheight,t)-r);var s=0;e.width.number>0&&(s=Vs(e.width,t));var a={height:hr(r+n)};s>0&&(a.width=hr(s)),n>0&&(a.verticalAlign=hr(-n));var i=new tue(e.src,e.alt,a);return i.height=r,i.depth=n,i},mathmlBuilder:(e,t)=>{var r=new er.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=Vs(e.height,t),s=0;if(e.totalheight.number>0&&(s=Vs(e.totalheight,t)-n,r.setAttribute("valign",hr(-s))),r.setAttribute("height",hr(n+s)),e.width.number>0){var a=Vs(e.width,t);r.setAttribute("width",hr(a))}return r.setAttribute("src",e.src),r}});yr({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=bn(t[0],"size");if(r.settings.strict){var a=n[1]==="m",i=s.value.unit==="mu";a?(i||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+s.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):i&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:s.value}},htmlBuilder(e,t){return mt.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=Vs(e.dimension,t);return new er.SpaceNode(r)}});yr({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:s}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=mt.makeSpan([],[Rn(e.body,t)]),r=mt.makeSpan(["inner"],[r],t)):r=mt.makeSpan(["inner"],[Rn(e.body,t)]);var n=mt.makeSpan(["fix"],[]),s=mt.makeSpan([e.alignment],[r,n],t),a=mt.makeSpan(["strut"]);return a.style.height=hr(s.height+s.depth),s.depth&&(a.style.verticalAlign=hr(-s.depth)),s.children.unshift(a),s=mt.makeSpan(["thinbox"],[s],t),mt.makeSpan(["mord","vbox"],[s],t)},mathmlBuilder:(e,t)=>{var r=new er.MathNode("mpadded",[ps(e.body,t)]);if(e.alignment!=="rlap"){var n=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});yr({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,s=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",i=n.parseExpression(!1,a);return n.expect(a),n.switchMode(s),{type:"styling",mode:n.mode,style:"text",body:i}}});yr({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new nr("Mismatched "+e.funcName)}});var FF=(e,t)=>{switch(t.style.size){case qr.DISPLAY.size:return e.display;case qr.TEXT.size:return e.text;case qr.SCRIPT.size:return e.script;case qr.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};yr({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:Ea(t[0]),text:Ea(t[1]),script:Ea(t[2]),scriptscript:Ea(t[3])}},htmlBuilder:(e,t)=>{var r=FF(e,t),n=ni(r,t,!1);return mt.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=FF(e,t);return $f(r,t)}});var zW=(e,t,r,n,s,a,i)=>{e=mt.makeSpan([],[e]);var o=r&&Wn.isCharacterBox(r),l,u;if(t){var d=Rn(t,n.havingStyle(s.sup()),n);u={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var f=Rn(r,n.havingStyle(s.sub()),n);l={elem:f,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-f.height)}}var h;if(u&&l){var g=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+e.depth+i;h=mt.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:hr(-a)},{type:"kern",size:l.kern},{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:hr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var x=e.height-i;h=mt.makeVList({positionType:"top",positionData:x,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:hr(-a)},{type:"kern",size:l.kern},{type:"elem",elem:e}]},n)}else if(u){var y=e.depth+i;h=mt.makeVList({positionType:"bottom",positionData:y,children:[{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:hr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return e;var v=[h];if(l&&a!==0&&!o){var T=mt.makeSpan(["mspace"],[],n);T.style.marginRight=hr(a),v.unshift(T)}return mt.makeSpan(["mop","op-limits"],v,n)},UW=["\\smallint"],y1=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=bn(e.base,"op"),s=!0):a=bn(e,"op");var i=t.style,o=!1;i.size===qr.DISPLAY.size&&a.symbol&&!UW.includes(a.name)&&(o=!0);var l;if(a.symbol){var u=o?"Size2-Regular":"Size1-Regular",d="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(d=a.name.slice(1),a.name=d==="oiint"?"\\iint":"\\iiint"),l=mt.makeSymbol(a.name,u,"math",t,["mop","op-symbol",o?"large-op":"small-op"]),d.length>0){var f=l.italic,h=mt.staticSvg(d+"Size"+(o?"2":"1"),t);l=mt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:h,shift:o?.08:0}]},t),a.name="\\"+d,l.classes.unshift("mop"),l.italic=f}}else if(a.body){var g=ni(a.body,t,!0);g.length===1&&g[0]instanceof bc?(l=g[0],l.classes[0]="mop"):l=mt.makeSpan(["mop"],g,t)}else{for(var x=[],y=1;y<a.name.length;y++)x.push(mt.mathsym(a.name[y],a.mode,t));l=mt.makeSpan(["mop"],x,t)}var v=0,T=0;return(l instanceof bc||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(v=(l.height-l.depth)/2-t.fontMetrics().axisHeight,T=l.italic),s?zW(l,r,n,t,i,T,v):(v&&(l.style.position="relative",l.style.top=hr(v)),l)},y2=(e,t)=>{var r;if(e.symbol)r=new Pl("mo",[_c(e.name,e.mode)]),UW.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Pl("mo",ml(e.body,t));else{r=new Pl("mi",[new Uu(e.name.slice(1))]);var n=new Pl("mo",[_c("","text")]);e.parentIsSupSub?r=new Pl("mrow",[r,n]):r=pW([r,n])}return r},rde={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};yr({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=n;return s.length===1&&(s=rde[s]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:y1,mathmlBuilder:y2});yr({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Ea(n)}},htmlBuilder:y1,mathmlBuilder:y2});var nde={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};yr({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:y1,mathmlBuilder:y2});yr({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:y1,mathmlBuilder:y2});yr({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return n.length===1&&(n=nde[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:y1,mathmlBuilder:y2});var WW=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=bn(e.base,"operatorname"),s=!0):a=bn(e,"operatorname");var i;if(a.body.length>0){for(var o=a.body.map(f=>{var h=f.text;return typeof h=="string"?{type:"textord",mode:f.mode,text:h}:f}),l=ni(o,t.withFont("mathrm"),!0),u=0;u<l.length;u++){var d=l[u];d instanceof bc&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=mt.makeSpan(["mop"],l,t)}else i=mt.makeSpan(["mop"],[],t);return s?zW(i,r,n,t,t.style,0,0):i},sde=(e,t)=>{for(var r=ml(e.body,t.withFont("mathrm")),n=!0,s=0;s<r.length;s++){var a=r[s];if(!(a instanceof er.SpaceNode))if(a instanceof er.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=a.children[0];a.children.length===1&&i instanceof er.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var o=r.map(d=>d.toText()).join("");r=[new er.TextNode(o)]}var l=new er.MathNode("mi",r);l.setAttribute("mathvariant","normal");var u=new er.MathNode("mo",[_c("","text")]);return e.parentIsSupSub?new er.MathNode("mrow",[l,u]):er.newDocumentFragment([l,u])};yr({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"operatorname",mode:r.mode,body:Ea(s),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:WW,mathmlBuilder:sde});ve("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");qm({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?mt.makeFragment(ni(e.body,t,!1)):mt.makeSpan(["mord"],ni(e.body,t,!0),t)},mathmlBuilder(e,t){return $f(e.body,t,!0)}});yr({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=Rn(e.body,t.havingCrampedStyle()),n=mt.makeLineSpan("overline-line",t),s=t.fontMetrics().defaultRuleThickness,a=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n},{type:"kern",size:s}]},t);return mt.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(e,t){var r=new er.MathNode("mo",[new er.TextNode("")]);r.setAttribute("stretchy","true");var n=new er.MathNode("mover",[ps(e.body,t),r]);return n.setAttribute("accent","true"),n}});yr({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:Ea(n)}},htmlBuilder:(e,t)=>{var r=ni(e.body,t.withPhantom(),!1);return mt.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=ml(e.body,t);return new er.MathNode("mphantom",r)}});yr({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=mt.makeSpan([],[Rn(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),mt.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=ml(Ea(e.body),t),n=new er.MathNode("mphantom",r),s=new er.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});yr({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=mt.makeSpan(["inner"],[Rn(e.body,t.withPhantom())]),n=mt.makeSpan(["fix"],[]);return mt.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=ml(Ea(e.body),t),n=new er.MathNode("mphantom",r),s=new er.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});yr({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=bn(t[0],"size").value,s=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:s}},htmlBuilder(e,t){var r=Rn(e.body,t),n=Vs(e.dy,t);return mt.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new er.MathNode("mpadded",[ps(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}});yr({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});yr({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,s=r[0],a=bn(t[0],"size"),i=bn(t[1],"size");return{type:"rule",mode:n.mode,shift:s&&bn(s,"size").value,width:a.value,height:i.value}},htmlBuilder(e,t){var r=mt.makeSpan(["mord","rule"],[],t),n=Vs(e.width,t),s=Vs(e.height,t),a=e.shift?Vs(e.shift,t):0;return r.style.borderRightWidth=hr(n),r.style.borderTopWidth=hr(s),r.style.bottom=hr(a),r.width=n,r.height=s+a,r.depth=-a,r.maxFontSize=s*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=Vs(e.width,t),n=Vs(e.height,t),s=e.shift?Vs(e.shift,t):0,a=t.color&&t.getColor()||"black",i=new er.MathNode("mspace");i.setAttribute("mathbackground",a),i.setAttribute("width",hr(r)),i.setAttribute("height",hr(n));var o=new er.MathNode("mpadded",[i]);return s>=0?o.setAttribute("height",hr(s)):(o.setAttribute("height",hr(s)),o.setAttribute("depth",hr(-s))),o.setAttribute("voffset",hr(s)),o}});function HW(e,t,r){for(var n=ni(e,t,!1),s=t.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var i=n[a].classes.indexOf("sizing");i<0?Array.prototype.push.apply(n[a].classes,t.sizingClasses(r)):n[a].classes[i+1]==="reset-size"+t.size&&(n[a].classes[i+1]="reset-size"+r.size),n[a].height*=s,n[a].depth*=s}return mt.makeFragment(n)}var DF=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],ade=(e,t)=>{var r=t.havingSize(e.size);return HW(e.body,r,t)};yr({type:"sizing",names:DF,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!1,r);return{type:"sizing",mode:s.mode,size:DF.indexOf(n)+1,body:a}},htmlBuilder:ade,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=ml(e.body,r),s=new er.MathNode("mstyle",n);return s.setAttribute("mathsize",hr(r.sizeMultiplier)),s}});yr({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,s=!1,a=!1,i=r[0]&&bn(r[0],"ordgroup");if(i)for(var o="",l=0;l<i.body.length;++l){var u=i.body[l];if(o=u.text,o==="t")s=!0;else if(o==="b")a=!0;else{s=!1,a=!1;break}}else s=!0,a=!0;var d=t[0];return{type:"smash",mode:n.mode,body:d,smashHeight:s,smashDepth:a}},htmlBuilder:(e,t)=>{var r=mt.makeSpan([],[Rn(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var s=0;s<r.children.length;s++)r.children[s].depth=0;var a=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return mt.makeSpan(["mord"],[a],t)},mathmlBuilder:(e,t)=>{var r=new er.MathNode("mpadded",[ps(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});yr({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,s=r[0],a=t[0];return{type:"sqrt",mode:n.mode,body:a,index:s}},htmlBuilder(e,t){var r=Rn(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=mt.wrapFragment(r,t);var n=t.fontMetrics(),s=n.defaultRuleThickness,a=s;t.style.id<qr.TEXT.id&&(a=t.fontMetrics().xHeight);var i=s+a/4,o=r.height+r.depth+i+s,{span:l,ruleWidth:u,advanceWidth:d}=Qd.sqrtImage(o,t),f=l.height-u;f>r.height+r.depth+i&&(i=(i+f-r.height-r.depth)/2);var h=l.height-r.height-i-u;r.style.paddingLeft=hr(d);var g=mt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+h)},{type:"elem",elem:l},{type:"kern",size:u}]},t);if(e.index){var x=t.havingStyle(qr.SCRIPTSCRIPT),y=Rn(e.index,x,t),v=.6*(g.height-g.depth),T=mt.makeVList({positionType:"shift",positionData:-v,children:[{type:"elem",elem:y}]},t),k=mt.makeSpan(["root"],[T]);return mt.makeSpan(["mord","sqrt"],[k,g],t)}else return mt.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new er.MathNode("mroot",[ps(r,t),ps(n,t)]):new er.MathNode("msqrt",[ps(r,t)])}});var OF={display:qr.DISPLAY,text:qr.TEXT,script:qr.SCRIPT,scriptscript:qr.SCRIPTSCRIPT};yr({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!0,r),i=n.slice(1,n.length-5);return{type:"styling",mode:s.mode,style:i,body:a}},htmlBuilder(e,t){var r=OF[e.style],n=t.havingStyle(r).withFont("");return HW(e.body,n,t)},mathmlBuilder(e,t){var r=OF[e.style],n=t.havingStyle(r),s=ml(e.body,n),a=new er.MathNode("mstyle",s),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=i[e.style];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});var ide=function(t,r){var n=t.base;if(n)if(n.type==="op"){var s=n.limits&&(r.style.size===qr.DISPLAY.size||n.alwaysHandleSupSub);return s?y1:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===qr.DISPLAY.size||n.limits);return a?WW:null}else{if(n.type==="accent")return Wn.isCharacterBox(n.base)?FC:null;if(n.type==="horizBrace"){var i=!t.sub;return i===n.isOver?$W:null}else return null}else return null};qm({type:"supsub",htmlBuilder(e,t){var r=ide(e,t);if(r)return r(e,t);var{base:n,sup:s,sub:a}=e,i=Rn(n,t),o,l,u=t.fontMetrics(),d=0,f=0,h=n&&Wn.isCharacterBox(n);if(s){var g=t.havingStyle(t.style.sup());o=Rn(s,g,t),h||(d=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(a){var x=t.havingStyle(t.style.sub());l=Rn(a,x,t),h||(f=i.depth+x.fontMetrics().subDrop*x.sizeMultiplier/t.sizeMultiplier)}var y;t.style===qr.DISPLAY?y=u.sup1:t.style.cramped?y=u.sup3:y=u.sup2;var v=t.sizeMultiplier,T=hr(.5/u.ptPerEm/v),k=null;if(l){var b=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(i instanceof bc||b)&&(k=hr(-i.italic))}var E;if(o&&l){d=Math.max(d,y,o.depth+.25*u.xHeight),f=Math.max(f,u.sub2);var N=u.defaultRuleThickness,P=4*N;if(d-o.depth-(l.height-f)<P){f=P-(d-o.depth)+l.height;var M=.8*u.xHeight-(d-o.depth);M>0&&(d+=M,f-=M)}var j=[{type:"elem",elem:l,shift:f,marginRight:T,marginLeft:k},{type:"elem",elem:o,shift:-d,marginRight:T}];E=mt.makeVList({positionType:"individualShift",children:j},t)}else if(l){f=Math.max(f,u.sub1,l.height-.8*u.xHeight);var A=[{type:"elem",elem:l,marginLeft:k,marginRight:T}];E=mt.makeVList({positionType:"shift",positionData:f,children:A},t)}else if(o)d=Math.max(d,y,o.depth+.25*u.xHeight),E=mt.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:o,marginRight:T}]},t);else throw new Error("supsub must have either sup or sub.");var D=F8(i,"right")||"mord";return mt.makeSpan([D],[i,mt.makeSpan(["msupsub"],[E])],t)},mathmlBuilder(e,t){var r=!1,n,s;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(r=!0,n=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var a=[ps(e.base,t)];e.sub&&a.push(ps(e.sub,t)),e.sup&&a.push(ps(e.sup,t));var i;if(r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var u=e.base;u&&u.type==="op"&&u.limits&&t.style===qr.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(t.style===qr.DISPLAY||u.limits)?i="munderover":i="msubsup"}else{var l=e.base;l&&l.type==="op"&&l.limits&&(t.style===qr.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||t.style===qr.DISPLAY)?i="munder":i="msub"}else{var o=e.base;o&&o.type==="op"&&o.limits&&(t.style===qr.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||t.style===qr.DISPLAY)?i="mover":i="msup"}return new er.MathNode(i,a)}});qm({type:"atom",htmlBuilder(e,t){return mt.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new er.MathNode("mo",[_c(e.text,e.mode)]);if(e.family==="bin"){var n=PC(e,t);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var GW={mi:"italic",mn:"normal",mtext:"normal"};qm({type:"mathord",htmlBuilder(e,t){return mt.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new er.MathNode("mi",[_c(e.text,e.mode,t)]),n=PC(e,t)||"italic";return n!==GW[r.type]&&r.setAttribute("mathvariant",n),r}});qm({type:"textord",htmlBuilder(e,t){return mt.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=_c(e.text,e.mode,t),n=PC(e,t)||"normal",s;return e.mode==="text"?s=new er.MathNode("mtext",[r]):/[0-9]/.test(e.text)?s=new er.MathNode("mn",[r]):e.text==="\\prime"?s=new er.MathNode("mo",[r]):s=new er.MathNode("mi",[r]),n!==GW[s.type]&&s.setAttribute("mathvariant",n),s}});var P5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},M5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};qm({type:"spacing",htmlBuilder(e,t){if(M5.hasOwnProperty(e.text)){var r=M5[e.text].className||"";if(e.mode==="text"){var n=mt.makeOrd(e,t,"textord");return n.classes.push(r),n}else return mt.makeSpan(["mspace",r],[mt.mathsym(e.text,e.mode,t)],t)}else{if(P5.hasOwnProperty(e.text))return mt.makeSpan(["mspace",P5[e.text]],[],t);throw new nr('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(M5.hasOwnProperty(e.text))r=new er.MathNode("mtext",[new er.TextNode("")]);else{if(P5.hasOwnProperty(e.text))return new er.MathNode("mspace");throw new nr('Unknown type of space "'+e.text+'"')}return r}});var IF=()=>{var e=new er.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};qm({type:"tag",mathmlBuilder(e,t){var r=new er.MathNode("mtable",[new er.MathNode("mtr",[IF(),new er.MathNode("mtd",[$f(e.body,t)]),IF(),new er.MathNode("mtd",[$f(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var RF={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},LF={"\\textbf":"textbf","\\textmd":"textmd"},ode={"\\textit":"textit","\\textup":"textup"},BF=(e,t)=>{var r=e.font;if(r){if(RF[r])return t.withTextFontFamily(RF[r]);if(LF[r])return t.withTextFontWeight(LF[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(ode[r])};yr({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"text",mode:r.mode,body:Ea(s),font:n}},htmlBuilder(e,t){var r=BF(e,t),n=ni(e.body,r,!0);return mt.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=BF(e,t);return $f(e.body,r)}});yr({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=Rn(e.body,t),n=mt.makeLineSpan("underline-line",t),s=t.fontMetrics().defaultRuleThickness,a=mt.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:s},{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r}]},t);return mt.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(e,t){var r=new er.MathNode("mo",[new er.TextNode("")]);r.setAttribute("stretchy","true");var n=new er.MathNode("munder",[ps(e.body,t),r]);return n.setAttribute("accentunder","true"),n}});yr({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=Rn(e.body,t),n=t.fontMetrics().axisHeight,s=.5*(r.height-n-(r.depth+n));return mt.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new er.MathNode("mpadded",[ps(e.body,t)],["vcenter"])}});yr({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new nr("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=$F(e),n=[],s=t.havingStyle(t.style.text()),a=0;a<r.length;a++){var i=r[a];i==="~"&&(i="\\textasciitilde"),n.push(mt.makeSymbol(i,"Typewriter-Regular",e.mode,s,["mord","texttt"]))}return mt.makeSpan(["mord","text"].concat(s.sizingClasses(t)),mt.tryCombineChars(n),s)},mathmlBuilder(e,t){var r=new er.TextNode($F(e)),n=new er.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var $F=e=>e.body.replace(/ /g,e.star?"":""),Tf=mW,VW=`[ \r
	]`,lde="\\\\[a-zA-Z@]+",cde="\\\\[^\uD800-\uDFFF]",ude="("+lde+")"+VW+"*",dde=`\\\\(
|[ \r	]+
?)[ \r	]*`,R8="[-]",fde=new RegExp(R8+"+$"),hde="("+VW+"+)|"+(dde+"|")+"([!-\\[\\]---]"+(R8+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(R8+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+ude)+("|"+cde+")");class zF{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp(hde,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new Ol("EOF",new al(this,r,r));var n=this.tokenRegex.exec(t);if(n===null||n.index!==r)throw new nr("Unexpected character: '"+t[r]+"'",new Ol(t[r],new al(this,r,r+1)));var s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){var a=t.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new Ol(s,new al(this,r,this.tokenRegex.lastIndex))}}class mde{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new nr("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,n){if(n===void 0&&(n=!1),n){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}}var gde=OW;ve("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});ve("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});ve("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});ve("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});ve("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});ve("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");ve("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var UF={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};ve("\\char",function(e){var t=e.popToken(),r,n="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")n=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new nr("\\char` missing argument");n=t.text.charCodeAt(0)}else r=10;if(r){if(n=UF[t.text],n==null||n>=r)throw new nr("Invalid base-"+r+" digit "+t.text);for(var s;(s=UF[e.future().text])!=null&&s<r;)n*=r,n+=s,e.popToken()}return"\\@char{"+n+"}"});var zC=(e,t,r,n)=>{var s=e.consumeArg().tokens;if(s.length!==1)throw new nr("\\newcommand's first argument must be a macro name");var a=s[0].text,i=e.isDefined(a);if(i&&!t)throw new nr("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!i&&!r)throw new nr("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var o=0;if(s=e.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var l="",u=e.expandNextToken();u.text!=="]"&&u.text!=="EOF";)l+=u.text,u=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new nr("Invalid number of arguments: "+l);o=parseInt(l),s=e.consumeArg().tokens}return i&&n||e.macros.set(a,{tokens:s,numArgs:o}),""};ve("\\newcommand",e=>zC(e,!1,!0,!1));ve("\\renewcommand",e=>zC(e,!0,!1,!1));ve("\\providecommand",e=>zC(e,!0,!0,!0));ve("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});ve("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});ve("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Tf[r],bs.math[r],bs.text[r]),""});ve("\\bgroup","{");ve("\\egroup","}");ve("~","\\nobreakspace");ve("\\lq","`");ve("\\rq","'");ve("\\aa","\\r a");ve("\\AA","\\r A");ve("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");ve("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");ve("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");ve("","\\mathscr{B}");ve("","\\mathscr{E}");ve("","\\mathscr{F}");ve("","\\mathscr{H}");ve("","\\mathscr{I}");ve("","\\mathscr{L}");ve("","\\mathscr{M}");ve("","\\mathscr{R}");ve("","\\mathfrak{C}");ve("","\\mathfrak{H}");ve("","\\mathfrak{Z}");ve("\\Bbbk","\\Bbb{k}");ve("","\\cdotp");ve("\\llap","\\mathllap{\\textrm{#1}}");ve("\\rlap","\\mathrlap{\\textrm{#1}}");ve("\\clap","\\mathclap{\\textrm{#1}}");ve("\\mathstrut","\\vphantom{(}");ve("\\underbar","\\underline{\\text{#1}}");ve("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');ve("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");ve("\\ne","\\neq");ve("","\\neq");ve("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");ve("","\\notin");ve("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");ve("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");ve("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");ve("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");ve("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");ve("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");ve("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");ve("","\\perp");ve("","\\mathclose{!\\mkern-0.8mu!}");ve("","\\notni");ve("","\\ulcorner");ve("","\\urcorner");ve("","\\llcorner");ve("","\\lrcorner");ve("","\\copyright");ve("","\\textregistered");ve("","\\textregistered");ve("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');ve("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');ve("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');ve("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');ve("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");ve("","\\vdots");ve("\\varGamma","\\mathit{\\Gamma}");ve("\\varDelta","\\mathit{\\Delta}");ve("\\varTheta","\\mathit{\\Theta}");ve("\\varLambda","\\mathit{\\Lambda}");ve("\\varXi","\\mathit{\\Xi}");ve("\\varPi","\\mathit{\\Pi}");ve("\\varSigma","\\mathit{\\Sigma}");ve("\\varUpsilon","\\mathit{\\Upsilon}");ve("\\varPhi","\\mathit{\\Phi}");ve("\\varPsi","\\mathit{\\Psi}");ve("\\varOmega","\\mathit{\\Omega}");ve("\\substack","\\begin{subarray}{c}#1\\end{subarray}");ve("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");ve("\\boxed","\\fbox{$\\displaystyle{#1}$}");ve("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");ve("\\implies","\\DOTSB\\;\\Longrightarrow\\;");ve("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");ve("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");ve("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var WF={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};ve("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in WF?t=WF[r]:(r.slice(0,4)==="\\not"||r in bs.math&&["bin","rel"].includes(bs.math[r].group))&&(t="\\dotsb"),t});var UC={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};ve("\\dotso",function(e){var t=e.future().text;return t in UC?"\\ldots\\,":"\\ldots"});ve("\\dotsc",function(e){var t=e.future().text;return t in UC&&t!==","?"\\ldots\\,":"\\ldots"});ve("\\cdots",function(e){var t=e.future().text;return t in UC?"\\@cdots\\,":"\\@cdots"});ve("\\dotsb","\\cdots");ve("\\dotsm","\\cdots");ve("\\dotsi","\\!\\cdots");ve("\\dotsx","\\ldots\\,");ve("\\DOTSI","\\relax");ve("\\DOTSB","\\relax");ve("\\DOTSX","\\relax");ve("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");ve("\\,","\\tmspace+{3mu}{.1667em}");ve("\\thinspace","\\,");ve("\\>","\\mskip{4mu}");ve("\\:","\\tmspace+{4mu}{.2222em}");ve("\\medspace","\\:");ve("\\;","\\tmspace+{5mu}{.2777em}");ve("\\thickspace","\\;");ve("\\!","\\tmspace-{3mu}{.1667em}");ve("\\negthinspace","\\!");ve("\\negmedspace","\\tmspace-{4mu}{.2222em}");ve("\\negthickspace","\\tmspace-{5mu}{.277em}");ve("\\enspace","\\kern.5em ");ve("\\enskip","\\hskip.5em\\relax");ve("\\quad","\\hskip1em\\relax");ve("\\qquad","\\hskip2em\\relax");ve("\\tag","\\@ifstar\\tag@literal\\tag@paren");ve("\\tag@paren","\\tag@literal{({#1})}");ve("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new nr("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});ve("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");ve("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");ve("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");ve("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");ve("\\newline","\\\\\\relax");ve("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var qW=hr(zu["Main-Regular"][84][1]-.7*zu["Main-Regular"][65][1]);ve("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+qW+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");ve("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+qW+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");ve("\\hspace","\\@ifstar\\@hspacer\\@hspace");ve("\\@hspace","\\hskip #1\\relax");ve("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");ve("\\ordinarycolon",":");ve("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");ve("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');ve("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');ve("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');ve("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');ve("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');ve("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');ve("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');ve("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');ve("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');ve("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');ve("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');ve("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');ve("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');ve("","\\dblcolon");ve("","\\eqcolon");ve("","\\coloneqq");ve("","\\eqqcolon");ve("","\\Coloneqq");ve("\\ratio","\\vcentcolon");ve("\\coloncolon","\\dblcolon");ve("\\colonequals","\\coloneqq");ve("\\coloncolonequals","\\Coloneqq");ve("\\equalscolon","\\eqqcolon");ve("\\equalscoloncolon","\\Eqqcolon");ve("\\colonminus","\\coloneq");ve("\\coloncolonminus","\\Coloneq");ve("\\minuscolon","\\eqcolon");ve("\\minuscoloncolon","\\Eqcolon");ve("\\coloncolonapprox","\\Colonapprox");ve("\\coloncolonsim","\\Colonsim");ve("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");ve("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");ve("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");ve("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");ve("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");ve("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");ve("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");ve("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");ve("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");ve("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");ve("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");ve("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");ve("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");ve("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");ve("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");ve("\\ngeqq","\\html@mathml{\\@ngeqq}{}");ve("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");ve("\\nleqq","\\html@mathml{\\@nleqq}{}");ve("\\nleqslant","\\html@mathml{\\@nleqslant}{}");ve("\\nshortmid","\\html@mathml{\\@nshortmid}{}");ve("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");ve("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");ve("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");ve("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");ve("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");ve("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");ve("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");ve("\\imath","\\html@mathml{\\@imath}{}");ve("\\jmath","\\html@mathml{\\@jmath}{}");ve("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");ve("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");ve("","\\llbracket");ve("","\\rrbracket");ve("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");ve("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");ve("","\\lBrace");ve("","\\rBrace");ve("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");ve("","\\minuso");ve("\\darr","\\downarrow");ve("\\dArr","\\Downarrow");ve("\\Darr","\\Downarrow");ve("\\lang","\\langle");ve("\\rang","\\rangle");ve("\\uarr","\\uparrow");ve("\\uArr","\\Uparrow");ve("\\Uarr","\\Uparrow");ve("\\N","\\mathbb{N}");ve("\\R","\\mathbb{R}");ve("\\Z","\\mathbb{Z}");ve("\\alef","\\aleph");ve("\\alefsym","\\aleph");ve("\\Alpha","\\mathrm{A}");ve("\\Beta","\\mathrm{B}");ve("\\bull","\\bullet");ve("\\Chi","\\mathrm{X}");ve("\\clubs","\\clubsuit");ve("\\cnums","\\mathbb{C}");ve("\\Complex","\\mathbb{C}");ve("\\Dagger","\\ddagger");ve("\\diamonds","\\diamondsuit");ve("\\empty","\\emptyset");ve("\\Epsilon","\\mathrm{E}");ve("\\Eta","\\mathrm{H}");ve("\\exist","\\exists");ve("\\harr","\\leftrightarrow");ve("\\hArr","\\Leftrightarrow");ve("\\Harr","\\Leftrightarrow");ve("\\hearts","\\heartsuit");ve("\\image","\\Im");ve("\\infin","\\infty");ve("\\Iota","\\mathrm{I}");ve("\\isin","\\in");ve("\\Kappa","\\mathrm{K}");ve("\\larr","\\leftarrow");ve("\\lArr","\\Leftarrow");ve("\\Larr","\\Leftarrow");ve("\\lrarr","\\leftrightarrow");ve("\\lrArr","\\Leftrightarrow");ve("\\Lrarr","\\Leftrightarrow");ve("\\Mu","\\mathrm{M}");ve("\\natnums","\\mathbb{N}");ve("\\Nu","\\mathrm{N}");ve("\\Omicron","\\mathrm{O}");ve("\\plusmn","\\pm");ve("\\rarr","\\rightarrow");ve("\\rArr","\\Rightarrow");ve("\\Rarr","\\Rightarrow");ve("\\real","\\Re");ve("\\reals","\\mathbb{R}");ve("\\Reals","\\mathbb{R}");ve("\\Rho","\\mathrm{P}");ve("\\sdot","\\cdot");ve("\\sect","\\S");ve("\\spades","\\spadesuit");ve("\\sub","\\subset");ve("\\sube","\\subseteq");ve("\\supe","\\supseteq");ve("\\Tau","\\mathrm{T}");ve("\\thetasym","\\vartheta");ve("\\weierp","\\wp");ve("\\Zeta","\\mathrm{Z}");ve("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");ve("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");ve("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");ve("\\bra","\\mathinner{\\langle{#1}|}");ve("\\ket","\\mathinner{|{#1}\\rangle}");ve("\\braket","\\mathinner{\\langle{#1}\\rangle}");ve("\\Bra","\\left\\langle#1\\right|");ve("\\Ket","\\left|#1\\right\\rangle");var KW=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,s=t.consumeArg().tokens,a=t.consumeArg().tokens,i=t.macros.get("|"),o=t.macros.get("\\|");t.macros.beginGroup();var l=f=>h=>{e&&(h.macros.set("|",i),s.length&&h.macros.set("\\|",o));var g=f;if(!f&&s.length){var x=h.future();x.text==="|"&&(h.popToken(),g=!0)}return{tokens:g?s:n,numArgs:0}};t.macros.set("|",l(!1)),s.length&&t.macros.set("\\|",l(!0));var u=t.consumeArg().tokens,d=t.expandTokens([...a,...u,...r]);return t.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};ve("\\bra@ket",KW(!1));ve("\\bra@set",KW(!0));ve("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");ve("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");ve("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");ve("\\angln","{\\angl n}");ve("\\blue","\\textcolor{##6495ed}{#1}");ve("\\orange","\\textcolor{##ffa500}{#1}");ve("\\pink","\\textcolor{##ff00af}{#1}");ve("\\red","\\textcolor{##df0030}{#1}");ve("\\green","\\textcolor{##28ae7b}{#1}");ve("\\gray","\\textcolor{gray}{#1}");ve("\\purple","\\textcolor{##9d38bd}{#1}");ve("\\blueA","\\textcolor{##ccfaff}{#1}");ve("\\blueB","\\textcolor{##80f6ff}{#1}");ve("\\blueC","\\textcolor{##63d9ea}{#1}");ve("\\blueD","\\textcolor{##11accd}{#1}");ve("\\blueE","\\textcolor{##0c7f99}{#1}");ve("\\tealA","\\textcolor{##94fff5}{#1}");ve("\\tealB","\\textcolor{##26edd5}{#1}");ve("\\tealC","\\textcolor{##01d1c1}{#1}");ve("\\tealD","\\textcolor{##01a995}{#1}");ve("\\tealE","\\textcolor{##208170}{#1}");ve("\\greenA","\\textcolor{##b6ffb0}{#1}");ve("\\greenB","\\textcolor{##8af281}{#1}");ve("\\greenC","\\textcolor{##74cf70}{#1}");ve("\\greenD","\\textcolor{##1fab54}{#1}");ve("\\greenE","\\textcolor{##0d923f}{#1}");ve("\\goldA","\\textcolor{##ffd0a9}{#1}");ve("\\goldB","\\textcolor{##ffbb71}{#1}");ve("\\goldC","\\textcolor{##ff9c39}{#1}");ve("\\goldD","\\textcolor{##e07d10}{#1}");ve("\\goldE","\\textcolor{##a75a05}{#1}");ve("\\redA","\\textcolor{##fca9a9}{#1}");ve("\\redB","\\textcolor{##ff8482}{#1}");ve("\\redC","\\textcolor{##f9685d}{#1}");ve("\\redD","\\textcolor{##e84d39}{#1}");ve("\\redE","\\textcolor{##bc2612}{#1}");ve("\\maroonA","\\textcolor{##ffbde0}{#1}");ve("\\maroonB","\\textcolor{##ff92c6}{#1}");ve("\\maroonC","\\textcolor{##ed5fa6}{#1}");ve("\\maroonD","\\textcolor{##ca337c}{#1}");ve("\\maroonE","\\textcolor{##9e034e}{#1}");ve("\\purpleA","\\textcolor{##ddd7ff}{#1}");ve("\\purpleB","\\textcolor{##c6b9fc}{#1}");ve("\\purpleC","\\textcolor{##aa87ff}{#1}");ve("\\purpleD","\\textcolor{##7854ab}{#1}");ve("\\purpleE","\\textcolor{##543b78}{#1}");ve("\\mintA","\\textcolor{##f5f9e8}{#1}");ve("\\mintB","\\textcolor{##edf2df}{#1}");ve("\\mintC","\\textcolor{##e0e5cc}{#1}");ve("\\grayA","\\textcolor{##f6f7f7}{#1}");ve("\\grayB","\\textcolor{##f0f1f2}{#1}");ve("\\grayC","\\textcolor{##e3e5e6}{#1}");ve("\\grayD","\\textcolor{##d6d8da}{#1}");ve("\\grayE","\\textcolor{##babec2}{#1}");ve("\\grayF","\\textcolor{##888d93}{#1}");ve("\\grayG","\\textcolor{##626569}{#1}");ve("\\grayH","\\textcolor{##3b3e40}{#1}");ve("\\grayI","\\textcolor{##21242c}{#1}");ve("\\kaBlue","\\textcolor{##314453}{#1}");ve("\\kaGreen","\\textcolor{##71B307}{#1}");var YW={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class pde{constructor(t,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new mde(gde,r.macros),this.mode=n,this.stack=[]}feed(t){this.lexer=new zF(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,n,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:r,end:n}=this.consumeArg());return this.pushToken(new Ol("EOF",n.loc)),this.pushTokens(s),new Ol("",al.range(r,n))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],n=t&&t.length>0;n||this.consumeSpaces();var s=this.future(),a,i=0,o=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++i;else if(a.text==="}"){if(--i,i===-1)throw new nr("Extra }",a)}else if(a.text==="EOF")throw new nr("Unexpected end of input in a macro argument, expected '"+(t&&n?t[o]:"}")+"'",a);if(t&&n)if((i===0||i===1&&t[o]==="{")&&a.text===t[o]){if(++o,o===t.length){r.splice(-o,o);break}}else o=0}while(i!==0||n);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:a}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new nr("The length of delimiters doesn't match the number of args!");for(var n=r[0],s=0;s<n.length;s++){var a=this.popToken();if(n[s]!==a.text)throw new nr("Use of the macro doesn't match its definition",a)}}for(var i=[],o=0;o<t;o++)i.push(this.consumeArg(r&&r[o+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new nr("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(s==null||t&&s.unexpandable){if(t&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new nr("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=s.tokens,i=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){a=a.slice();for(var o=a.length-1;o>=0;--o){var l=a[o];if(l.text==="#"){if(o===0)throw new nr("Incomplete placeholder at end of macro body",l);if(l=a[--o],l.text==="#")a.splice(o+1,1);else if(/^[1-9]$/.test(l.text))a.splice(o,2,...i[+l.text-1]);else throw new nr("Not a valid argument number",l)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Ol(t)]):void 0}expandTokens(t){var r=[],n=this.stack.length;for(this.pushTokens(t);this.stack.length>n;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(n=>n.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var n=this.lexer.catcodes[t];if(n!=null&&n!==13)return}var s=typeof r=="function"?r(this):r;if(typeof s=="string"){var a=0;if(s.indexOf("#")!==-1)for(var i=s.replace(/##/g,"");i.indexOf("#"+(a+1))!==-1;)++a;for(var o=new zF(s,this.settings),l=[],u=o.lex();u.text!=="EOF";)l.push(u),u=o.lex();l.reverse();var d={tokens:l,numArgs:a};return d}return s}isDefined(t){return this.macros.has(t)||Tf.hasOwnProperty(t)||bs.math.hasOwnProperty(t)||bs.text.hasOwnProperty(t)||YW.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Tf.hasOwnProperty(t)&&!Tf[t].primitive}}var HF=/^[]/,cb=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),F5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},GF={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class s3{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new pde(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new nr("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Ol("}")),this.gullet.pushTokens(t);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(t,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(s3.endOfExpression.indexOf(s.text)!==-1||r&&s.text===r||t&&Tf[s.text]&&Tf[s.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(t){for(var r=-1,n,s=0;s<t.length;s++)if(t[s].type==="infix"){if(r!==-1)throw new nr("only one infix operator per group",t[s].token);r=s,n=t[s].replaceWith}if(r!==-1&&n){var a,i,o=t.slice(0,r),l=t.slice(r+1);o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o},l.length===1&&l[0].type==="ordgroup"?i=l[0]:i={type:"ordgroup",mode:this.mode,body:l};var u;return n==="\\\\abovefrac"?u=this.callFunction(n,[a,t[r],i],[]):u=this.callFunction(n,[a,i],[]),[u]}else return t}handleSupSubscript(t){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var s;do{var a;s=this.parseGroup(t)}while(((a=s)==null?void 0:a.type)==="internal");if(!s)throw new nr("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(t){for(var r=[],n=0;n<t.length;n++)r.push({type:"textord",mode:"text",text:t[n]});var s={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return a}parseAtom(t){var r=this.parseGroup("atom",t);if(r?.type==="internal"||this.mode==="text")return r;for(var n,s;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var i=a.text==="\\limits";r.limits=i,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new nr("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new nr("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(s)throw new nr("Double subscript",a);s=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new nr("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},l=[o];for(this.consume();this.fetch().text==="'";)l.push(o),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(cb[a.text]){var u=HF.test(a.text),d=[];for(d.push(new Ol(cb[a.text])),this.consume();;){var f=this.fetch().text;if(!cb[f]||HF.test(f)!==u)break;d.unshift(new Ol(cb[f])),this.consume()}var h=this.subparse(d);u?s={type:"ordgroup",mode:"math",body:h}:n={type:"ordgroup",mode:"math",body:h}}else break}return n||s?{type:"supsub",mode:this.mode,base:r,sup:n,sub:s}:r}parseFunction(t,r){var n=this.fetch(),s=n.text,a=Tf[s];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new nr("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new nr("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new nr("Can't use function '"+s+"' in math mode",n);var{args:i,optArgs:o}=this.parseArguments(s,a);return this.callFunction(s,i,o,n,t)}callFunction(t,r,n,s,a){var i={funcName:t,parser:this,token:s,breakOnTokenText:a},o=Tf[t];if(o&&o.handler)return o.handler(i,r,n);throw new nr("No function handler for "+t)}parseArguments(t,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var s=[],a=[],i=0;i<n;i++){var o=r.argTypes&&r.argTypes[i],l=i<r.numOptionalArgs;(r.primitive&&o==null||r.type==="sqrt"&&i===1&&a[0]==null)&&(o="primitive");var u=this.parseGroupOfType("argument to '"+t+"'",o,l);if(l)a.push(u);else if(u!=null)s.push(u);else throw new nr("Null argument, please report this as a bug")}return{args:s,optArgs:a}}parseGroupOfType(t,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new nr("A primitive argument cannot be optional");var i=this.parseGroup(t);if(i==null)throw new nr("Expected group as "+t,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new nr("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var s="",a;(a=this.fetch()).text!=="EOF";)s+=a.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(t,r){for(var n=this.fetch(),s=n,a="",i;(i=this.fetch()).text!=="EOF"&&t.test(a+i.text);)s=i,a+=s.text,this.consume();if(a==="")throw new nr("Invalid "+r+": '"+n.text+"'",n);return n.range(s,a)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new nr("Invalid color: '"+r.text+"'",r);var s=n[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(t){var r,n=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",n=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!s)throw new nr("Invalid size: '"+r.text+"'",r);var a={number:+(s[1]+s[2]),unit:s[3]};if(!aW(a))throw new nr("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(t,r){var n=this.gullet.scanArgument(t);if(n==null)return null;var s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(s),i}parseGroup(t,r){var n=this.fetch(),s=n.text,a;if(s==="{"||s==="\\begingroup"){this.consume();var i=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,i),l=this.fetch();this.expect(i),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:al.range(n,l),body:o,semisimple:s==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,t)||this.parseSymbol(),a==null&&s[0]==="\\"&&!YW.hasOwnProperty(s)){if(this.settings.throwOnError)throw new nr("Undefined control sequence: "+s,n);a=this.formatUnsupportedCmd(s),this.consume()}return a}formLigatures(t){for(var r=t.length-1,n=0;n<r;++n){var s=t[n],a=s.text;a==="-"&&t[n+1].text==="-"&&(n+1<r&&t[n+2].text==="-"?(t.splice(n,3,{type:"textord",mode:"text",loc:al.range(s,t[n+2]),text:"---"}),r-=2):(t.splice(n,2,{type:"textord",mode:"text",loc:al.range(s,t[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&t[n+1].text===a&&(t.splice(n,2,{type:"textord",mode:"text",loc:al.range(s,t[n+1]),text:a+a}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),s=n.charAt(0)==="*";if(s&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new nr(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:s}}GF.hasOwnProperty(r[0])&&!bs[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=GF[r[0]]+r.slice(1));var a=fde.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var i;if(bs[this.mode][r]){this.settings.strict&&this.mode==="math"&&M8.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var o=bs[this.mode][r].group,l=al.range(t),u;if(sue.hasOwnProperty(o)){var d=o;u={type:"atom",mode:this.mode,family:d,loc:l,text:r}}else u={type:o,mode:this.mode,loc:l,text:r};i=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(sW(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),i={type:"textord",mode:"text",loc:al.range(t),text:r};else return null;if(this.consume(),a)for(var f=0;f<a[0].length;f++){var h=a[0][f];if(!F5[h])throw new nr("Unknown accent ' "+h+"'",t);var g=F5[h][this.mode]||F5[h].text;if(!g)throw new nr("Accent "+h+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:al.range(t),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}}s3.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var WC=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new s3(t,r);delete n.gullet.macros.current["\\df@tag"];var s=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new nr("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:n.subparse([new Ol("\\df@tag")])}]}return s},XW=function(t,r,n){r.textContent="";var s=HC(t,n).toNode();r.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),XW=function(){throw new nr("KaTeX doesn't work in quirks mode.")});var xde=function(t,r){var n=HC(t,r).toMarkup();return n},yde=function(t,r){var n=new TC(r);return WC(t,n)},JW=function(t,r,n){if(n.throwOnError||!(t instanceof nr))throw t;var s=mt.makeSpan(["katex-error"],[new bc(r)]);return s.setAttribute("title",t.toString()),s.setAttribute("style","color:"+n.errorColor),s},HC=function(t,r){var n=new TC(r);try{var s=WC(t,n);return Eue(s,t,n)}catch(a){return JW(a,t,n)}},vde=function(t,r){var n=new TC(r);try{var s=WC(t,n);return Nue(s,t,n)}catch(a){return JW(a,t,n)}},wde="0.16.25",bde={Span:x2,Anchor:NC,SymbolNode:bc,SvgNode:l0,PathNode:Bf,LineNode:P8},L8={version:wde,render:XW,renderToString:xde,ParseError:nr,SETTINGS_SCHEMA:qb,__parse:yde,__renderToDomTree:HC,__renderToHTMLTree:vde,__setFontMetrics:Xce,__defineSymbol:J,__defineFunction:yr,__defineMacro:ve,__domTree:bde};const B8=(e,t=!1)=>{if(!e||typeof e!="string")return"";try{return L8.renderToString(e,{throwOnError:!1,displayMode:t,strict:!1})}catch(r){return console.error("Math rendering error:",r),`<span class="math-error" title="Math rendering error">${$8(e)}</span>`}},Hs=(e,t=!1)=>{if(!e||typeof e!="string")return"";let r=e;const n=/\$\$(.*?)\$\$/g;let s;const a=[];for(;(s=n.exec(e))!==null;)a.push({fullMatch:s[0],expression:s[1],index:s.index});for(let l=a.length-1;l>=0;l--){const{fullMatch:u,expression:d}=a[l];try{const f=L8.renderToString(d,{throwOnError:!1,displayMode:!0,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,$8(u))}}const i=/\$(.*?)\$/g,o=[];for(;(s=i.exec(r))!==null;)s[0].startsWith("$$")||o.push({fullMatch:s[0],expression:s[1],index:s.index});for(let l=o.length-1;l>=0;l--){const{fullMatch:u,expression:d}=o[l];try{const f=L8.renderToString(d,{throwOnError:!1,displayMode:!1,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,$8(u))}}return r},_de=e=>{if(!e||typeof e!="string")return"";if(e.includes("$"))return e;const t=["\\sqrt","\\frac","\\times","\\div","\\cdot","\\pm","\\mp","\\leq","\\geq","\\neq","\\approx","\\equiv","\\sum","\\prod","\\int","\\lim","\\sin","\\cos","\\tan","\\log","\\ln","\\exp"],r=[];let n="",s=!1,a=0;for(let o=0;o<e.length;o++){const l=e[o],u=e[o+1]||"",d=e[o-1]||"",f=l+u;if(e.substring(o,o+3),l==="\\"){const h=e.substring(o).match(/^\\([a-zA-Z]+)/);if(h){const g="\\"+h[1];if(t.some(x=>g.startsWith(x))||g.length>1){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=l;continue}}}if(f==="^{"||f==="_{"||l==="^"||l==="_"){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=l;continue}if(l==="{"){if(s){a++,n+=l;continue}else if(d==="^"||d==="_"||d==="\\"){s=!0,n+=l,a++;continue}}if(l==="}"&&s){if(n+=l,a--,a===0){const h=e.substring(o+1).trim();(!h||h.match(/^[\s,.!?;:]/))&&(r.push({type:"math",content:n}),n="",s=!1)}continue}if(s){if(n+=l,l===" "&&a===0){const h=e.substring(o+1).trim();h&&!h.match(/^[\\^_{]/)&&(r.push({type:"math",content:n.trim()}),n="",s=!1,n+=l)}}else n+=l}n&&r.push({type:s?"math":"text",content:n});let i="";for(const o of r)o.type==="math"?i+=`$${o.content}$`:i+=o.content;return i},$8=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Sde=({isOpen:e=!1,onClose:t,onSave:r,initialValue:n="",cursorPosition:s=null,inputRef:a=null})=>{const[i,o]=_.useState(n),[l,u]=_.useState({start:0,end:0}),[d,f]=_.useState(null),[h,g]=_.useState(null),[x,y]=_.useState(!1),v=_.useRef(null);_.useRef(null),_.useEffect(()=>{e&&(o(n),f(null),g(null),setTimeout(()=>{v.current?.focus(),i&&v.current?.setSelectionRange(i.length,i.length)},100))},[e,n]);const T=()=>{const{start:A,end:D}=l,L=A>0?i.substring(A-1,A):"",G=L&&L.trim()&&!L.match(/[{}()]/);let X="",se=0;G?(X="^{}",se=-1):(X="x^{2}",se=-3);const Q=i.substring(0,A)+X+i.substring(D);o(Q),setTimeout(()=>{v.current?.focus();const re=A+X.length+se;v.current?.setSelectionRange(re,re)},0)},k=()=>{const{start:A,end:D}=l,L=i.substring(A,D);if(L){const G=i.substring(0,A)+`\\sqrt{${L}}`+i.substring(D);o(G),setTimeout(()=>{v.current?.focus();const X=A+L.length+8;v.current?.setSelectionRange(X,X)},0)}else{const G=i.substring(0,A)+"\\sqrt{}"+i.substring(D);o(G),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+6,A+6)},0)}},b=()=>{const{start:A}=l,D=i;if(d==="numerator"&&h!==null){const L=h;let G=0,X=-1;const se=L+6;for(let Q=se;Q<D.length;Q++)if(D[Q]==="{")G++;else if(D[Q]==="}"){if(G===0){X=Q+1;break}G--}if(X>0){const Q=X+2;setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(Q,Q)},0),f(null),g(null)}else{const Q=i.substring(0,A)+"\\frac{}{}"+i.substring(l.end);o(Q),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+6,A+6)},0),f("numerator"),g(A)}}else{const L=i.substring(0,A)+"\\frac{}{}"+i.substring(l.end);o(L),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+6,A+6)},0),f("numerator"),g(A)}},E=()=>{const{start:A,end:D}=l,L=i.substring(0,A)+"x^{}"+i.substring(D);o(L),y(!0),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(A+3,A+3)},0)},N=A=>{const{start:D,end:L}=l,G=i.substring(0,D)+A+i.substring(L);o(G),setTimeout(()=>{v.current?.focus();const X=D+A.length;v.current?.setSelectionRange(X,X)},0)},P=A=>{u({start:A.target.selectionStart,end:A.target.selectionEnd})},M=()=>{let A=i;i&&!i.includes("$")&&i.trim()&&/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(i)&&(A=`$${i}$`),r?.(A),t()};if(_.useEffect(()=>{const A=D=>{D.key==="Escape"&&e&&t()};return e&&document.addEventListener("keydown",A),()=>{document.removeEventListener("keydown",A)}},[e,t]),!e)return null;let j="";if(i&&i.trim())try{j=B8(i,!1),(!j||j.trim()==="")&&(j=`<span class="text-gray-500 font-mono">${D5(i)}</span>`)}catch(A){console.error("Preview rendering error:",A),j=`<span class="text-red-500 font-mono">Error: ${D5(i)}</span>`}return c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:A=>{A.target===A.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-label":"Math Visual Editor",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-2xl mx-auto",onClick:A=>A.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Visual Editor"}),c.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Expression"}),c.jsx("textarea",{ref:v,value:i,onChange:A=>{const D=A.target.value,L=A.target.selectionStart,G=i;if(D.length>G.length){const X=D.substring(0,L),se=D.substring(L),Q=X.match(/\^{([^}]*)$/);if(Q)if(se.startsWith("}")){const re=Q[1];x&&re.length>0&&(setTimeout(()=>{if(v.current&&v.current.value===D){const B=L+1;v.current.setSelectionRange(B,B)}},10),y(!1))}else y(!1);else y(!1);X.match(/\\sqrt\{([^}]*)$/),X.match(/\\frac\{([^}]*)$/),X.match(/\\frac\{[^}]*\}\{([^}]*)$/)}o(D)},onSelect:P,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Type LaTeX code or use buttons below...",rows:4}),i&&i.trim()&&c.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("div",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Preview:"}),c.jsx("div",{className:"text-gray-700",style:{minHeight:"1.5em",fontSize:"16px"},dangerouslySetInnerHTML:{__html:j||D5(i)}})]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Symbols"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:T,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x)",children:"x"}),c.jsx("button",{onClick:E,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x) - Type letter, click this, type number",children:"x"}),c.jsx("button",{onClick:k,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Square Root (x)",children:"x"}),c.jsx("button",{onClick:b,className:`px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${d==="numerator"?"bg-green-50 hover:bg-green-100 border-green-300 text-green-700":"bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700"}`,title:d==="numerator"?"Move to denominator (click again)":"Fraction (a/b) - Click for numerator, click again for denominator",children:"a/b"}),c.jsx("button",{onClick:()=>N("\\times"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Times",children:""}),c.jsx("button",{onClick:()=>N("\\div"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Divide",children:""})]})]}),c.jsxs("div",{className:"flex justify-end gap-3",children:[c.jsx(ot,{variant:"secondary",onClick:t,children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:M,children:"Insert"})]})]})})},D5=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Qh=({inputRef:e,onChange:t,position:r="right",size:n="small",showPreview:s=!1,className:a=""})=>{const[i,o]=_.useState(!1),[l,u]=_.useState(!1),[d,f]=_.useState(0),[h,g]=_.useState(null),[x,y]=_.useState(""),v=b=>{b.preventDefault(),b.stopPropagation();let E=null;if(typeof e=="function"?E=e():E=e?.current||e,!E){console.warn("MathEditorButton: No input reference provided");return}E.focus();const N=E.selectionStart!==null&&E.selectionStart!==void 0?E.selectionStart:E.selectionEnd!==null&&E.selectionEnd!==void 0?E.selectionEnd:E.value?.length||0;console.log(" Captured cursor position:",N,"from input value length:",E.value?.length),f(N),g(E),o(!0)},T=b=>{let E=h;if(E||(typeof e=="function"?E=e():E=e?.current||e),!E){console.warn("MathEditorButton: No input reference available for insert"),o(!1);return}const N=E.value||"",P=Math.max(0,Math.min(d,N.length));console.log(" Inserting formula at position:",P,"Value length:",N.length,"Formula:",b);const M=N.substring(0,P),j=N.substring(P),A=M+b+j;console.log(" New value:",A.substring(0,P)+"["+b+"]"+A.substring(P+b.length)),E.value=A,t&&t({target:{value:A,name:E.name}});const D=new Event("input",{bubbles:!0});if(E.dispatchEvent(D),E._valueTracker){const G=E._valueTracker;G.setValue(""),E.value=A,G.setValue(A)}const L=P+b.length;setTimeout(()=>{E.focus(),E.setSelectionRange(L,L),console.log(" Cursor moved to position:",L)},0),o(!1)};_.useEffect(()=>{console.log(" MathEditorButton rendered",{hasInputRef:!!e,inputRefType:typeof e,position:r,size:n})},[e,r,n]);const k=b=>{b.preventDefault(),b.stopPropagation();let E=null;typeof e=="function"?E=e():E=e?.current||e,y(E?.value||""),u(!0)};return _.useEffect(()=>{if(l){const b=setInterval(()=>{let E=null;typeof e=="function"?E=e():E=e?.current||e,E&&y(E.value||"")},300);return()=>clearInterval(b)}},[l,e]),c.jsxs(c.Fragment,{children:[s&&c.jsx("button",{type:"button",onClick:k,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"48px":"auto",left:r==="left"?"48px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",color:"white",border:"2px solid #059669",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:b=>{b.target.style.backgroundColor="#059669"},onMouseLeave:b=>{b.target.style.backgroundColor="#10b981"},title:"Preview Math (p)","aria-label":"Preview math rendering",children:c.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"p"})}),c.jsx("button",{type:"button",onClick:v,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"8px":"auto",left:r==="left"?"8px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#3b82f6",color:"white",border:"2px solid #2563eb",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:b=>{b.target.style.backgroundColor="#2563eb"},onMouseLeave:b=>{b.target.style.backgroundColor="#3b82f6"},title:"Math Editor (fx)","aria-label":"Open math editor",children:c.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"fx"})}),l&&c.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:b=>{b.target===b.currentTarget&&u(!1)},role:"dialog","aria-modal":"true","aria-label":"Math Preview",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-3xl mx-auto max-h-[90vh] overflow-auto",onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Preview"}),c.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),c.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-gray-600 font-mono",children:["LaTeX: ",x||"(empty)"]}),c.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg min-h-[200px] text-lg",dangerouslySetInnerHTML:{__html:x?x.includes("$")?Hs(x,!1):Hs(_de(x),!1):'<span class="text-gray-400">No content to preview</span>'}})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Close"})})]})}),c.jsx(Sde,{isOpen:i,onClose:()=>o(!1),onSave:T,initialValue:"",cursorPosition:d,inputRef:h||e?.current||e})]})},kde=({question:e,testId:t,testType:r="true_false",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onSave:l,isEditing:u=!1,isSaving:d=!1,validationErrors:f={},showCorrectAnswers:h=!1,studentId:g=null})=>{const{getItem:x,setItem:y}=J_();ai(),_.useRef(null);const[v,T]=_.useState(""),[k,b]=_.useState(""),[E,N]=_.useState(""),[P,M]=_.useState(!1),[j,A]=_.useState(!0),[D,L]=_.useState(""),[G,X]=_.useState(!1),[se,Q]=_.useState(null);_.useEffect(()=>{if(e&&(N(e.question||""),b(e.correct_answer||""),n==="student"&&g)){const oe=x(`test_progress_${g}_${r}_${t}_${e.question_id}`);oe&&T(oe)}},[e,t,r,n,x]),_.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" TrueFalseQuestion syncing with parent studentAnswer:",a),T(a))},[a,n]),_.useEffect(()=>{if(n==="student"&&v&&t&&e?.question_id&&g){const oe=setTimeout(()=>{X(!0),y(`test_progress_${g}_${r}_${t}_${e.question_id}`,v),Q(new Date().toLocaleTimeString()),setTimeout(()=>X(!1),1e3)},1e3);return()=>clearTimeout(oe)}},[v,t,r,e?.question_id,n,g,y]),_.useEffect(()=>{if(n==="teacher"&&(E||k)){const oe=setTimeout(()=>{X(!0);const Z={question:E,correct_answer:k,timestamp:Date.now()};y(`teacher_form_${r}_${t}`,Z),Q(new Date().toLocaleTimeString()),setTimeout(()=>X(!1),1e3)},2e3);return()=>clearTimeout(oe)}},[E,k,t,r,n,y]);const re=_.useCallback(oe=>{n==="student"&&(T(oe),i&&i(e.question_id,oe),R(oe))},[n,e?.question_id,i]),B=_.useCallback(oe=>{N(oe),o&&o(e.question_id,oe),H(oe)},[e?.question_id,o]),V=_.useCallback(oe=>{b(oe),o&&o(e.question_id,{...e,correct_answer:oe}),z(oe)},[e,o]),R=_.useCallback(oe=>{if(n==="student"){if(!oe){A(!1),L("Please select an answer");return}A(!0),L("")}},[n]),H=_.useCallback(oe=>{if(n==="teacher"){if(!oe||oe.trim().length<10){A(!1),L("Question must be at least 10 characters long");return}A(!0),L("")}},[n]),z=_.useCallback(oe=>{if(n==="teacher"){if(!oe){A(!1),L("Please select a correct answer");return}A(!0),L("")}},[n]),I=_.useCallback(()=>{if(n!=="teacher"||!l)return;const oe={question_id:e.question_id,question:E,correct_answer:k,type:"true_false"};l(oe)},[n,l,e?.question_id,E,k]),W=_.useCallback(oe=>oe?Hs(oe,!1):"",[]),K=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e?.question_id]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[G&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(un,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),se&&!G&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",se]})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:W(E)}}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="true"?"border-blue-500 bg-blue-50":"border-gray-200"} ${h&&k==="true"?"ring-2 ring-green-400":""}`,children:[c.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"true",checked:v==="true",onChange:()=>re("true"),className:"sr-only","aria-label":"True"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="true"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="false"?"border-blue-500 bg-blue-50":"border-gray-200"} ${h&&k==="false"?"ring-2 ring-green-400":""}`,children:[c.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"false",checked:v==="false",onChange:()=>re("false"),className:"sr-only","aria-label":"False"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="false"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]}),!j&&D&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:D})]}),ee=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[G&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(un,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),se&&!G&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",se]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{id:`question_${e?.question_id}`,value:E,onChange:oe=>B(oe.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),c.jsx(Qh,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:oe=>B(oe.target.value)})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Correct Answer *"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="true"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[c.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"true",checked:k==="true",onChange:()=>V("true"),className:"sr-only","aria-label":"True"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="true"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),c.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="false"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[c.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"false",checked:k==="false",onChange:()=>V("false"),className:"sr-only","aria-label":"False"}),c.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="false"&&c.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),c.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]})]})]}),!j&&D&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:D}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(ot,{variant:"success",onClick:I,disabled:!j||d,className:"w-full sm:w-auto",children:d?c.jsx(un,{size:"small"}):"Save Question"})})]});return c.jsx("div",{className:"true-false-question-container",children:n==="student"?K():ee()})},Tde=({question:e,testId:t,testType:r="multiple_choice",mode:n="student",studentAnswer:s,onAnswerChange:a,onQuestionChange:i,onOptionAdd:o,onOptionRemove:l,onSave:u,isEditing:d=!1,isSaving:f=!1,validationErrors:h={},showCorrectAnswers:g=!1,studentId:x=null,displayNumber:y})=>{const{getItem:v,setItem:T}=J_(),{showNotification:k}=ai();_.useRef(null);const[b,E]=_.useState(""),[N,P]=_.useState(["","","",""]),[M,j]=_.useState(""),[A,D]=_.useState(""),[L,G]=_.useState(!1),[X,se]=_.useState(!0),[Q,re]=_.useState(""),[B,V]=_.useState(!1),[R,H]=_.useState(null);_.useEffect(()=>{if(e&&(D(e.question||""),P(e.options||["","","",""]),j(e.correct_answer||""),n==="student"&&x)){const Ae=v(`test_progress_${x}_${r}_${t}_${e.question_id}`);Ae&&E(Ae)}},[e,t,r,n,v]),_.useEffect(()=>{n==="student"&&s!==void 0&&s!==null&&(console.log(" MultipleChoiceQuestion syncing with parent studentAnswer:",s),E(s))},[s,n]),_.useEffect(()=>{if(n==="student"&&b&&t&&e?.question_id&&x){const Ae=setTimeout(()=>{V(!0),T(`test_progress_${x}_${r}_${t}_${e.question_id}`,b),H(new Date().toLocaleTimeString()),setTimeout(()=>V(!1),1e3)},1e3);return()=>clearTimeout(Ae)}},[b,t,r,e?.question_id,n,x,T]),_.useEffect(()=>{if(n==="teacher"&&(A||N.some(Ae=>Ae.trim()))){const Ae=setTimeout(()=>{V(!0);const Me={question:A,options:N,correct_answer:M,timestamp:Date.now()};T(`teacher_form_${r}_${t}`,Me),H(new Date().toLocaleTimeString()),setTimeout(()=>V(!1),1e3)},2e3);return()=>clearTimeout(Ae)}},[A,N,M,t,r,n,T]),_.useCallback(Ae=>{if(n!=="student")return;const Me=String(Ae);E(Me),a&&a(e.question_id,Me),oe(Me)},[n,e?.question_id,a]);const z=_.useCallback(Ae=>{D(Ae),i&&i(e.question_id,Ae),Z(Ae)},[e?.question_id,i]),I=_.useCallback((Ae,Me)=>{const Je=[...N];Je[Ae]=Me,P(Je),i&&i(e.question_id,{...e,options:Je}),le(Je)},[N,e,i]),W=_.useCallback(Ae=>{j(Ae),i&&i(e.question_id,{...e,correct_answer:Ae}),ue(Ae)},[e,i]),K=_.useCallback(()=>{if(N.length<6){const Ae=[...N,""];P(Ae),o&&o(e.question_id,Ae)}else k("Maximum 6 options allowed","warning")},[N,e?.question_id,o,k]),ee=_.useCallback(Ae=>{if(N.length>2){const Me=N.filter((Je,Ve)=>Ve!==Ae);if(P(Me),M===String.fromCharCode(65+Ae))j("");else if(M&&String.fromCharCode(65+Ae)<M){const Je=String.fromCharCode(65+Ae-1);j(Je)}l&&l(e.question_id,Me)}else k("Minimum 2 options required","warning")},[N,M,e?.question_id,l,k]),oe=_.useCallback(Ae=>{if(n==="student"){if(!Ae){se(!1),re("Please select an answer");return}se(!0),e?.correct_answer&&Ae===e.correct_answer?re(" Correct answer!"):e?.correct_answer?re(" Incorrect answer"):re("Answer selected")}},[n,e?.correct_answer]),Z=_.useCallback(Ae=>!Ae||Ae.trim().length<10?(se(!1),re("Question must be at least 10 characters long"),!1):(se(!0),re(""),!0),[]),le=_.useCallback(Ae=>{if(n!=="teacher")return;if(Ae.filter(Je=>Je.trim().length>0).length<2){se(!1),re("At least 2 options must be filled");return}if(Ae.some(Je=>Je.trim().length>0&&Je.trim().length<3)){se(!1),re("Each option must be at least 3 characters long");return}se(!0),re("")},[n]),ue=_.useCallback(Ae=>{if(n==="teacher"){if(!Ae){se(!1),re("Please select a correct answer");return}se(!0),re("")}},[n]),de=_.useCallback(()=>{if(n!=="teacher"||!u)return;const Ae={question_id:e.question_id,question:A,options:N.filter(Me=>Me.trim().length>0),correct_answer:M,type:"multiple_choice"};u(Ae)},[n,u,e?.question_id,A,N,M]),Te=_.useCallback(Ae=>Ae?Hs(Ae,!1):"",[]);return n==="teacher"?c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[B&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(un,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),R&&!B&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",R]})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{id:`question_${e?.question_id}`,value:A,onChange:Ae=>z(Ae.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),c.jsx(Qh,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:Ae=>z(Ae.target.value)})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Answer Options *"}),c.jsx(ot,{variant:"secondary",size:"small",onClick:K,disabled:N.length>=6,className:"px-3 py-1 text-sm",children:"+ Add Option"})]}),c.jsx("div",{className:"space-y-3",children:N.map((Ae,Me)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+Me)}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:Ae,onChange:Je=>I(Me,Je.target.value),placeholder:`Option ${String.fromCharCode(65+Me)}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e?.question_id,"data-option-index":Me,required:!0}),c.jsx(Qh,{inputRef:()=>document.querySelector(`[data-question-id="${e?.question_id}"][data-option-index="${Me}"]`),onChange:Je=>I(Me,Je.target.value)})]}),N.length>2&&c.jsx(ot,{variant:"danger",size:"small",onClick:()=>ee(Me),className:"px-2 py-1 text-sm",children:""})]},Me))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`correct_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),c.jsxs("select",{id:`correct_${e?.question_id}`,value:M,onChange:Ae=>W(Ae.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0,children:[c.jsx("option",{value:"",children:"Select correct answer"}),N.map((Ae,Me)=>{if(!Ae.trim())return null;const Je=String.fromCharCode(65+Me);return c.jsxs("option",{value:Je,children:[Je,") ",Ae]},Me)})]})]})]}),!X&&Q&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:Q}),c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(ot,{variant:"success",onClick:de,disabled:!X||f,className:"w-full sm:w-auto",children:f?c.jsx(un,{size:"small"}):"Save Question"})})]}):c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof y=="number"?y:e?.question_id]}),c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[B&&c.jsxs("div",{className:"flex items-center space-x-1",children:[c.jsx(un,{size:"small"}),c.jsx("span",{children:"Saving..."})]}),R&&!B&&c.jsxs("div",{className:"text-green-600",children:[" Saved at ",R]})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:Te(A)}}),c.jsx("div",{className:"space-y-3",children:N.map((Ae,Me)=>c.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${b===String.fromCharCode(65+Me)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[c.jsx("input",{type:"radio",name:`mcq_${t}_${e?.question_id}`,value:String.fromCharCode(65+Me),checked:b===String.fromCharCode(65+Me),onChange:Je=>{E(Je.target.value),a&&a(e?.question_id,Je.target.value)},className:"mr-3"}),c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600 mr-3",children:String.fromCharCode(65+Me)}),c.jsx("span",{className:"flex-1",dangerouslySetInnerHTML:{__html:Ae?Hs(Ae):`Option ${String.fromCharCode(65+Me)}`}})]},Me))}),!X&&Q&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:Q})]})},Cde=({question:e,testId:t,testType:r="input",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onAnswerAdd:l,onAnswerRemove:u,onSave:d,isEditing:f=!1,isSaving:h=!1,validationErrors:g={},showCorrectAnswers:x=!1,studentId:y=null})=>{const{getItem:v,setItem:T}=J_(),{showNotification:k}=ai(),b=_.useRef(null),[E,N]=_.useState(""),[P,M]=_.useState([""]),[j,A]=_.useState(!1),[D,L]=_.useState(!0),[G,X]=_.useState(""),[se,Q]=_.useState(!1);_.useEffect(()=>{if(n==="student"&&e?.question_id&&t&&r&&y){const Z=`test_progress_${y}_${r}_${t}_${e.question_id}`,le=v(Z);le&&N(le)}},[e?.question_id,r,t,n,y,v]),_.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" InputQuestion syncing with parent studentAnswer:",a),N(a))},[a,n]),_.useEffect(()=>{n==="teacher"&&e?.answers&&M(e.answers.length>0?e.answers:[""])},[e?.answers,n]),_.useEffect(()=>{if(n==="student"&&E&&e?.question_id&&t&&r&&y){const Z=setTimeout(()=>{Q(!0),T(`test_progress_${y}_${r}_${t}_${e.question_id}`,E),setTimeout(()=>Q(!1),1e3)},1e3);return()=>clearTimeout(Z)}},[E,e?.question_id,r,t,n,y,T]),_.useEffect(()=>{if(n==="teacher"&&P&&o){const Z=setTimeout(()=>{o({...e,answers:P.filter(le=>le.trim())})},500);return()=>clearTimeout(Z)}},[P,e,n,o]);const re=_.useCallback(Z=>{N(Z);const le=Z.trim().length>0;L(le),X(le?"":"Please enter an answer"),i&&i(e.question_id,Z)},[e?.question_id,i]),B=_.useCallback((Z,le)=>{const ue=[...P];ue[Z]=le,M(ue),i&&i(e.question_id,ue)},[P,e?.question_id,i]),V=_.useCallback(()=>{if(n==="teacher"){const Z=[...P,""];M(Z),l&&l(e.question_id,Z)}},[P,e?.question_id,n,l]),R=_.useCallback(Z=>{if(n==="teacher"&&P.length>1){const le=P.filter((ue,de)=>de!==Z);M(le),u&&u(e.question_id,le)}},[P,e?.question_id,n,u]),H=_.useCallback(()=>{if(n==="student"){const Z=E.trim().length>0;return L(Z),X(Z?"":"Please enter an answer"),Z}else if(n==="teacher"){const Z=P.some(le=>le.trim().length>0);return L(Z),X(Z?"":"Please enter at least one correct answer"),Z}return!0},[E,P,n]),z=_.useCallback(Z=>Z?Hs(Z,!1):"",[]),I=_.useCallback(()=>{A(!0)},[]),W=_.useCallback(()=>{A(!1),H()},[H]),K=_.useCallback(Z=>{Z.key==="Enter"&&n==="student"&&E.trim()&&(T(`test_progress_${r}_${t}_${e.question_id}`,E),k("Answer saved","success"))},[E,r,t,e?.question_id,n,T,k]),ee=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e.question_id]}),se&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[c.jsx(un,{size:"small"}),c.jsx("span",{children:"Saving..."})]})]}),c.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:z(e.question)}}),c.jsx("div",{className:"space-y-3",children:c.jsx("div",{className:"relative",children:c.jsx("input",{ref:b,type:"text",id:`input_${e.question_id}`,placeholder:"Enter your answer here...",value:E,onChange:Z=>re(Z.target.value),onFocus:I,onBlur:W,onKeyPress:K,className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${D?j?"border-blue-500":"border-gray-300 hover:border-gray-400":"border-red-300 focus:border-red-500 focus:ring-red-500"}`,"data-question-id":e.question_id,"aria-label":`Answer for question ${e.question_id}`,"aria-invalid":!D,"aria-describedby":D?void 0:`error-${e.question_id}`})})}),x&&e.correct_answers&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx("h5",{className:"text-sm font-semibold text-green-800 mb-2",children:"Correct Answers:"}),c.jsx("ul",{className:"space-y-1",children:e.correct_answers.map((Z,le)=>c.jsx("li",{className:"text-green-700 text-sm",dangerouslySetInnerHTML:{__html:` ${Hs(Z,!1)}`}},le))})]})]}),oe=()=>c.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e.question_id||"New"]}),h&&c.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[c.jsx(un,{size:"small"}),c.jsx("span",{children:"Saving..."})]})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`question_${e.question_id||"new"}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",id:`question_${e.question_id||"new"}`,value:e.question||"",onChange:Z=>o&&o({...e,question:Z.target.value}),placeholder:"Enter question text",className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.question?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:border-blue-500"}`}),c.jsx(MathEditorButton,{inputRef:()=>document.getElementById(`question_${e.question_id||"new"}`),onChange:Z=>o&&o({...e,question:Z.target.value})})]}),g.question&&c.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.question})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answers *"}),c.jsx(ot,{type:"button",variant:"secondary",size:"small",onClick:V,className:"px-3 py-1 text-sm",children:"+ Add Answer"})]}),c.jsx("div",{className:"space-y-3",children:P.map((Z,le)=>c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:le+1}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:Z,onChange:ue=>B(le,ue.target.value),placeholder:`Correct answer ${le+1}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e.question_id,"data-answer-index":le}),c.jsx(MathEditorButton,{inputRef:()=>document.querySelector(`[data-question-id="${e.question_id}"][data-answer-index="${le}"]`),onChange:ue=>B(le,ue.target.value)})]}),P.length>1&&c.jsx(ot,{type:"button",variant:"danger",size:"small",onClick:()=>R(le),className:"px-2 py-1 text-sm",children:" Remove"})]},le))}),g.answers&&c.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.answers})]})]}),d&&c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsx(ot,{type:"button",variant:"success",onClick:d,disabled:h,className:"w-full sm:w-auto",children:h?c.jsx(un,{size:"small"}):"Save Question"})})]});return c.jsx("div",{className:`input-question-container ${n} ${j?"focused":""}`,children:n==="student"?ee():oe()})},v1=(e,t,r)=>{const[n,s]=_.useState(!1),[a,i]=_.useState(0),[o,l]=_.useState(!1),u=_.useRef(!1);_.useEffect(()=>{if(!e||!t||!r)return;const v=`anti_cheating_${r}_${e}_${t}`,T=fa(v);T&&(i(T.tabSwitches||0),l(T.isCheating||!1))},[e,t,r]);const d=_.useCallback(()=>{if(console.log(" handleTabSwitch called - isTracking:",u.current),!u.current){console.log(" Not tracking, returning early");return}console.log(" Tab switch detected - starting 7 second timer...");const v=Date.now();setTimeout(()=>{const T=Date.now()-v;console.log(" Timer completed - time hidden:",T,"ms"),T>=6500?(console.log(" Tab was hidden for sufficient time - counting as tab switch"),i(k=>{const b=k+1,E=b>=2;console.log(" Tab switch count updated:",{newCount:b,cheating:E}),l(E);const N=`anti_cheating_${r}_${e}_${t}`;return qs(N,{tabSwitches:b,isCheating:E},120*1e3),b})):console.log(" Tab was not hidden long enough - not counting as switch")},7e3)},[e,t,r]),f=_.useCallback(()=>{u.current&&(console.log(" Visibility change detected:",{hidden:document.hidden,isTracking:u.current}),document.hidden?d():console.log(" Tab became visible"))},[d]),h=_.useCallback(()=>{console.log(" startTracking called - setting up anti-cheating detection"),console.log(" Current document.hidden state:",document.hidden),console.log(" Current document.visibilityState:",document.visibilityState),s(!0),u.current=!0,document.addEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners added (visibilitychange only)")},[f]),g=_.useCallback(()=>{console.log(" stopTracking called - removing anti-cheating detection"),s(!1),u.current=!1,document.removeEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners removed")},[f]),x=_.useCallback(()=>{const v={caught_cheating:o,visibility_change_times:a};return console.log(" getCheatingData called:",v),v},[o,a]),y=_.useCallback(()=>{r&&e&&t&&n1(r,e,t),i(0),l(!1),console.log(" Anti-cheating data deleted from localStorage")},[r,e,t]);return{startTracking:h,stopTracking:g,clearData:y,getCheatingData:x,tabSwitches:a,isCheating:o,isTracking:n}},Ede=({testData:e,onTestComplete:t,onBackToCabinet:r,isTestComplete:n=!1,testScore:s=null})=>{const[a,i]=_.useState(null),[o,l]=_.useState(null);_.useEffect(()=>{(async()=>{try{const[bt,Ut]=await Promise.all([Za(()=>Promise.resolve().then(()=>dae),void 0),Za(()=>Promise.resolve().then(()=>Wne),void 0)]);i(bt),l(Ut.default)}catch(bt){console.error("Failed to load Konva:",bt)}})()},[]);const u=()=>a?{Stage:a.Stage,Layer:a.Layer,Rect:a.Rect,Arrow:a.Arrow,KonvaImage:a.Image,KonvaText:a.Text,Group:a.Group}:null,[d,f]=_.useState({}),[h,g]=_.useState({}),[x,y]=_.useState(0),[v,T]=_.useState(!1),[k,b]=_.useState(null),[E,N]=_.useState(0),[P,M]=_.useState(0),[j,A]=_.useState(null),[D,L]=_.useState(null),[G,X]=_.useState(!1),[se,Q]=_.useState(!1),[re,B]=_.useState(!1),{showNotification:V}=ai(),{makeAuthenticatedRequest:R}=$l(),{user:H}=Ps(),{startTracking:z,stopTracking:I,getCheatingData:W,clearData:K}=v1("matching_type",e?.id,H?.student_id||H?.id),ee=_.useRef(null),oe=_.useRef(null),Z=_.useRef(null),le=_.useRef(0),[ue,de]=_.useState(400);_.useRef({});const Te=_.useCallback(()=>{X(!0)},[]),ie=_.useCallback(()=>{g({}),f({}),X(!1)},[]),pe=_.useCallback(()=>{Q(!0)},[]),Ae=_.useCallback(()=>{Q(!1),r()},[r]),Me=_.useMemo(()=>{if(!e)return null;const ct=e.blocks.map(Bt=>{let Vt=Bt.coordinates;if(typeof Vt=="string")try{Vt=JSON.parse(Vt)}catch(We){console.error(" Failed to parse coordinates:",We),Vt={x:0,y:0,width:100,height:100}}return Vt={x:(typeof Vt.x=="number"?Vt.x:Number(Vt.x))||0,y:(typeof Vt.y=="number"?Vt.y:Number(Vt.y))||0,width:(typeof Vt.width=="number"?Vt.width:Number(Vt.width))||30,height:(typeof Vt.height=="number"?Vt.height:Number(Vt.height))||10},{id:Bt.id,word:Bt.word,coordinates:Vt,hasArrow:Bt.hasArrow,arrow:Bt.arrow}}),bt=Array.isArray(e.arrows)?e.arrows:[],Ut=e.words.map(Bt=>({id:Bt.id,word:Bt.word,blockId:null,isPlaced:!1,isCorrect:!1}));return{blocks:ct,arrows:bt,words:Ut}},[e]);_.useEffect(()=>{if(!e?.image_url)return;const ct=new Image;ct.crossOrigin="anonymous",ct.onload=()=>{console.log(" Image loaded successfully"),N(ct.width),M(ct.height);const bt=ee.current?.clientWidth||800,Ut=ee.current?.clientHeight||600,Bt=bt/ct.width,Vt=Ut/ct.height,We=Math.min(Bt,Vt,1),Ue=ct.width*We,tt=ct.height*We,nt=(bt-Ue)/2,at=(Ut-tt)/2;b({x:nt,y:at,width:Ue,height:tt,scaleX:We,scaleY:We,scale:We,image:ct}),le.current=ee.current?.clientWidth||800,console.log(" Image info calculated:",{x:nt,y:at,width:Ue,height:tt,scaleX:We,scaleY:We})},ct.onerror=()=>{console.error(" Failed to load image"),V("Failed to load test image","error")},ct.src=e.image_url},[e?.image_url,V]),_.useEffect(()=>{if(!Me||!k)return;const ct=le.current||ee.current?.clientWidth||800,bt=12,Ut=38;let Bt=k.x,Vt=k.y+k.height+bt;const We=k.x+k.width,Ue={};Me.words.forEach(at=>{if(!Object.prototype.hasOwnProperty.call(h,at.id)){const It=typeof at.word=="string"?at.word:"",Lt=Math.max(60,It.length*8+20);Bt+Lt>Math.min(ct-bt,We)&&(Bt=k.x,Vt+=Ut),d[at.id]||(Ue[at.id]={x:Bt,y:Vt}),Bt+=Lt+bt}}),Object.keys(Ue).length&&f(at=>({...at,...Ue}));const tt=Object.values(Ue).reduce((at,It)=>Math.max(at,It.y),Vt),nt=Math.max(k.y+k.height+bt,tt+Ut+bt);de(Math.max(400,Math.ceil(nt)))},[Me,k,h,d]);const Je=_.useCallback(()=>{if(!k||!Me)return[];const ct=u();return ct?Me.blocks.map(bt=>{const Ut=bt.coordinates;let Bt,Vt,We,Ue;Bt=k.x+Ut.x*(k.scale??k.scaleX),Vt=k.y+Ut.y*(k.scale??k.scaleY),We=Ut.width*(k.scale??k.scaleX),Ue=Ut.height*(k.scale??k.scaleY);const tt=h[bt.id];return c.jsxs(ct.Group,{children:[c.jsx(ct.Rect,{x:Bt,y:Vt,width:We,height:Ue,fill:tt?"rgba(40, 167, 69, 0.4)":j===bt.id?"rgba(0, 123, 255, 0.25)":"rgba(0, 123, 255, 0.15)",stroke:tt?"#28a745":j===bt.id?"#0056b3":"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:tt?"rgba(40, 167, 69, 0.3)":"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),tt&&c.jsx(ct.KonvaText,{x:Bt+5,y:Vt+Ue/2-10,width:We-10,height:20,text:Me.words.find(nt=>nt.id===tt)?.word||"",fontSize:Math.min(12,We/8),fontFamily:"Arial",fill:"#2c3e50",align:"center",verticalAlign:"middle",listening:!1})]},bt.id)}):[]},[k,Me,h,a]),Ve=_.useCallback(()=>{if(!k||!Me)return[];const ct=u();return ct?(console.log(" Processing arrows:",Me.arrows),Me.arrows.map(bt=>{if(console.log(" Arrow data:",bt),!bt.start||!bt.end)return console.warn(" Arrow missing start/end coordinates:",bt),null;let Ut,Bt,Vt,We;if(bt.rel_start_x!==null&&bt.rel_start_y!==null&&bt.rel_end_x!==null&&bt.rel_end_y!==null&&bt.image_width&&bt.image_height&&bt.image_width>0&&bt.image_height>0){const Ue=bt.image_width,tt=bt.image_height,nt=k.width/Ue,at=k.height/tt;Ut=k.x+Number(bt.rel_start_x)/100*Ue*nt,Bt=k.y+Number(bt.rel_start_y)/100*tt*at,Vt=k.x+Number(bt.rel_end_x)/100*Ue*nt,We=k.y+Number(bt.rel_end_y)/100*tt*at}else{const Ue=k.scale??k.scaleX??1,tt=Number(bt.start.x),nt=Number(bt.start.y),at=Number(bt.end.x),It=Number(bt.end.y);tt<=k.width+1&&at<=k.width+1&&nt<=k.height+1&&It<=k.height+1?(Ut=k.x+(isNaN(tt)?0:tt),Bt=k.y+(isNaN(nt)?0:nt),Vt=k.x+(isNaN(at)?0:at),We=k.y+(isNaN(It)?0:It)):(Ut=k.x+(isNaN(tt)?0:tt)*Ue,Bt=k.y+(isNaN(nt)?0:nt)*Ue,Vt=k.x+(isNaN(at)?0:at)*Ue,We=k.y+(isNaN(It)?0:It)*Ue)}return c.jsx(ct.Arrow,{points:[Ut,Bt,Vt,We],stroke:bt.style?.color||"#dc3545",fill:bt.style?.color||"#dc3545",strokeWidth:bt.style?.thickness||3,pointerLength:10,pointerWidth:10},bt.id)}).filter(Boolean)):[]},[k,Me,a]),Dt=_.useCallback(()=>{if(!Me)return[];const ct=u();return ct?Me.words.map(bt=>{const Ut=d[bt.id]||{x:0,y:0},Bt=typeof bt.word=="string"?bt.word:"",Vt=Math.max(60,Bt.length*8+20);return Object.values(h).includes(bt.id)?null:c.jsxs(ct.Group,{x:Ut.x,y:Ut.y,draggable:!0,onDragEnd:Ue=>lt(Ue,bt.id),children:[c.jsx(ct.Rect,{width:Vt,height:34,fill:"#ffffff",stroke:"#ced4da",strokeWidth:1,cornerRadius:4,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5,shadowOffset:{x:0,y:2},shadowOpacity:.3,listening:!0}),c.jsx(ct.KonvaText,{text:Bt,fontSize:14,fontFamily:"Arial",fill:"#343a40",padding:8,align:"center",verticalAlign:"middle",width:Vt,height:34,listening:!1})]},bt.id)}):[]},[Me,d,h,k,a]),lt=_.useCallback((ct,bt)=>{const Ut=ct.target.x(),Bt=ct.target.y();if(f(Lt=>({...Lt,[bt]:{x:Ut,y:Bt}})),!k||!Me)return;const Vt=Me.words.find(Lt=>Lt.id===bt);if(!Vt)return;const We=typeof Vt.word=="string"?Vt.word:"",Ue=Math.max(60,We.length*8+20),tt={x:Ut,y:Bt,width:Ue,height:34},nt=k.scale??k.scaleX??1,at=(Lt,Xt)=>!(Xt.x>Lt.x+Lt.width||Xt.x+Xt.width<Lt.x||Xt.y>Lt.y+Lt.height||Xt.y+Xt.height<Lt.y),It=Me.blocks.find(Lt=>{const Xt=Lt.coordinates,vr={x:k.x+Xt.x*nt,y:k.y+Xt.y*nt,width:Xt.width*nt,height:Xt.height*nt};return at(tt,vr)});if(It){g(Sr=>({...Sr,[It.id]:bt}));const Lt=It.coordinates,Xt=k.x+Lt.x*nt,vr=k.y+Lt.y*nt,br=Lt.width*nt,Dr=Lt.height*nt;f(Sr=>({...Sr,[bt]:{x:Xt+(br-Ue)/2,y:vr+(Dr-34)/2}})),V(`Word "${Vt.word}" placed in block`,"success")}},[k,Me,V]),At=_.useCallback(()=>{if(!Me)return 0;const ct=Me.words.length,bt=Object.keys(h).length;return ct>0?bt/ct*100:0},[Me,h]);_.useEffect(()=>{const ct=At();y(ct)},[At]),_.useEffect(()=>{if(e&&!D){const ct=new Date;L(ct),console.log(" Test timer started at:",ct.toISOString()),z(),console.log(" Anti-cheating tracking started")}},[e,D,z]);const vt=_.useCallback(async()=>{if(Me){T(!0);try{const ct=Me.words.length;let bt=0;console.log(" Scoring check - placedWords:",h),console.log(" Scoring check - blocks:",Me.blocks.map(pr=>({id:pr.id,word:pr.word}))),console.log(" Scoring check - words:",Me.words.map(pr=>({id:pr.id,word:pr.word}))),Me.blocks.forEach(pr=>{const ye=h[pr.id];if(console.log(` Block ${pr.id} (expects "${pr.word}") has placed word ID: ${ye}`),ye){const Fe=Me.words.find(Be=>Be.id===ye);console.log(" Placed word:",Fe),Fe&&Fe.word===pr.word?(bt++,console.log(` Correct! Block ${pr.id} has correct word "${Fe.word}"`)):console.log(` Incorrect! Block ${pr.id} expected "${pr.word}" but got "${Fe?.word||"nothing"}"`)}else console.log(` Block ${pr.id} has no word placed`)});const Ut=bt,Bt=ct;console.log(` Final Score: ${Ut}/${Bt} (${Math.round(Ut/Bt*100)}%)`);const Vt=new Date,We=D?Math.round((Vt-D)/1e3):0,Ue=D?D.toISOString():Vt.toISOString();console.log(" Test timing:",{startedAt:Ue,endTime:Vt.toISOString(),timeTaken:`${We} seconds`});const tt=W();console.log(" Anti-cheating data for submission:",tt);const nt=H.student_id,at=`retest_assignment_id_${nt}_matching_type_${e.id}`,It=localStorage.getItem(at),{academicCalendarService:Lt}=await Za(async()=>{const{academicCalendarService:pr}=await Promise.resolve().then(()=>i3);return{academicCalendarService:pr}},void 0);await Lt.loadAcademicCalendar();const vr=Lt.getCurrentTerm()?.id;if(!vr)throw new Error("No current academic period found");const br={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:nt,academic_period_id:vr,answers:h,score:Ut,maxScore:Bt,time_taken:We,started_at:Ue,submitted_at:Vt.toISOString(),caught_cheating:tt.caught_cheating,visibility_change_times:tt.visibility_change_times,retest_assignment_id:It?Number(It):null,parent_test_id:e.id};console.log(" Submitting test data:",br);const Sr=await(await R("/.netlify/functions/submit-matching-type-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(br)})).json();if(console.log(" Submission response:",Sr),Sr.success){if(V("Test submitted successfully!","success"),I(),K(),H?.student_id&&n1(H.student_id,"matching_type",e.id),!!It&&H?.student_id){let Fe=3;try{const Pt=localStorage.getItem(`student_active_tests_${H.student_id}`);if(Pt){const Qe=JSON.parse(Pt)?.tests?.find(Ne=>Ne.test_id===e.id&&Ne.test_type==="matching_type");Qe&&(Fe=Qe.retest_attempts_left||Qe.max_attempts||3)}}catch(Pt){console.error("Error checking active tests cache:",Pt)}const He=(Ut>0&&Bt>0?Ut/Bt*100:0)>=50;if(He){const Pt=`retest_attempt${Fe}_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Pt,"true"),console.log(" Passed retest, marking last-slot key:",Pt);let Ie=0;for(let Ke=1;Ke<=10;Ke++){const qe=`retest_attempt${Ke}_${H.student_id}_matching_type_${e.id}`;localStorage.getItem(qe)==="true"&&Ie++}const Qe=`test_completed_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Qe,"true"),console.log(" Marked retest as completed (student passed):",Qe);const Ne=`retest_attempts_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Ne,JSON.stringify({used:Ie,max:Fe})),console.log(" Set retest attempts metadata (student passed):",Ne,{used:Ie,max:Fe})}else{let Pt=1;for(let qe=1;qe<=10;qe++){const Rt=`retest_attempt${qe}_${H.student_id}_matching_type_${e.id}`;if(localStorage.getItem(Rt)!=="true"){Pt=qe;break}}const Ie=`retest_attempt${Pt}_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Ie,"true"),console.log(" Marked retest attempt as completed:",Ie);let Qe=0;for(let qe=1;qe<=10;qe++){const Rt=`retest_attempt${qe}_${H.student_id}_matching_type_${e.id}`;localStorage.getItem(Rt)==="true"&&Qe++}const Ne=Fe-Qe,Ke=Ne<=0||He;if(console.log(" Retest completion check:",{usedAttempts:Qe,maxAttempts:Fe,attemptsLeft:Ne,passed:He,shouldComplete:Ke}),Ke){const qe=`test_completed_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(qe,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",qe);const Rt=`retest_attempts_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Rt,JSON.stringify({used:Qe,max:Fe})),console.log(" Set retest attempts metadata (attempts exhausted):",Rt,{used:Qe,max:Fe})}}}else if(H?.student_id){const Fe=`test_completed_${H.student_id}_matching_type_${e.id}`;localStorage.setItem(Fe,"true"),console.log(" Test marked as completed in localStorage:",Fe)}if(H?.student_id){const{setCachedData:Fe,CACHE_TTL:Be}=await Za(async()=>{const{setCachedData:Pt,CACHE_TTL:Ie}=await Promise.resolve().then(()=>dp);return{setCachedData:Pt,CACHE_TTL:Ie}},void 0),He=`student_results_table_${H.student_id}`;Fe(He,Sr,Be.student_results_table),console.log(" Test results cached with key:",He)}const ye=`retest1_${nt}_matching_type_${e.id}`;localStorage.removeItem(ye),localStorage.removeItem(at),t&&t(Ut)}else throw new Error(Sr.message||"Failed to submit test")}catch(ct){console.error(" Error submitting test:",ct),V(`Error submitting test: ${ct.message}`,"error")}finally{T(!1)}}},[Me,h,e,H,D,R,V,t]);return!e||!Me?c.jsx(un,{}):c.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:c.jsxs("div",{className:"max-w-6xl mx-auto",children:[c.jsx("div",{className:"flex justify-end mb-2",children:c.jsx(ot,{onClick:pe,variant:"outline",size:"sm",children:"Back to Cabinet"})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.test_name})}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-sm text-gray-500",children:"Progress"}),c.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(x),"%"]})]})]}),c.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x}%`}})})]}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:c.jsx("div",{className:"lg:col-span-3",children:c.jsxs($t,{className:"p-4",children:[c.jsx("div",{className:"mb-4 text-center",children:c.jsx(ot,{onClick:Te,variant:"secondary",children:"Reset"})}),c.jsx("div",{ref:ee,className:"w-full bg-gray-100 rounded-lg overflow-hidden",style:{height:`${ue}px`},children:k&&a?(()=>{const{Stage:ct,Layer:bt,KonvaImage:Ut}=u();return c.jsxs(ct,{ref:oe,width:ee.current?.clientWidth||800,height:ue,children:[c.jsxs(bt,{children:[c.jsx(Ut,{ref:Z,image:k.image,x:k.x,y:k.y,width:k.width,height:k.height,listening:!1}),Je(),Ve()]}),c.jsx(bt,{listening:!0,children:Dt()})]})})():k?c.jsxs("div",{className:"flex items-center justify-center h-full",children:[c.jsx(un,{size:"lg"}),c.jsx("span",{className:"ml-2 text-gray-600",children:"Loading Konva canvas..."})]}):null}),c.jsx("div",{className:"mt-4 text-center",children:c.jsx(ot,{onClick:()=>B(!0),disabled:v||x<100,children:v?"Submitting...":"Submit Test"})})]})})}),c.jsx(Ca,{isOpen:G,onClose:()=>X(!1),title:"Reset Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and placed words."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>X(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:ie,variant:"primary",children:"Reset"})]})]})}),c.jsx(Ca,{isOpen:se,onClose:()=>Q(!1),title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet? Your progress will be saved but you will exit the test."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>Q(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:Ae,variant:"primary",children:"Go Back"})]})]})}),c.jsx(Ca,{isOpen:re,onClose:()=>B(!1),title:"Submit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>B(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:()=>{B(!1),vt()},variant:"primary",children:"Submit"})]})]})})]})})},Nde=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Ps(),{makeAuthenticatedRequest:o}=$l(),{showNotification:l}=ai(),[u,d]=_.useState([{leftWord:"",rightWord:""},{leftWord:"",rightWord:""},{leftWord:"",rightWord:""}]),[f,h]=_.useState("drag"),[g,x]=_.useState(!1),[y,v]=_.useState(null),T=_.useCallback(()=>{d(M=>[...M,{leftWord:"",rightWord:""}])},[]),k=_.useCallback(M=>{u.length>1&&d(j=>j.filter((A,D)=>D!==M))},[u.length]),b=_.useCallback((M,j)=>{d(A=>A.map((D,L)=>L===M?{...D,leftWord:j}:D))},[]),E=_.useCallback((M,j)=>{d(A=>A.map((D,L)=>L===M?{...D,rightWord:j}:D))},[]),N=_.useCallback(()=>u.every(M=>M.leftWord.trim()&&M.rightWord.trim()),[u]),P=_.useCallback(async()=>{if(!N()){l("Please fill in all word pairs","error");return}x(!0),v(null);try{const M=u.map((A,D)=>({question_id:D+1,left_word:A.leftWord.trim(),right_word:A.rightWord.trim()})),j={test_name:e,num_questions:M.length,interaction_type:f,questions:M};console.log(" Saving word matching test:",j),t({testName:e,numQuestions:M.length,interactionType:f,wordPairs:u,questions:M})}catch(M){console.error("Error saving word matching test:",M),v(M.message),l("Failed to save test: "+M.message,"error")}finally{x(!1)}},[e,u,f,N,o,l,t]);return c.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-6xl mx-auto p-0",children:[c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Interaction Type"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="drag"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("drag"),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:f==="drag",onChange:()=>h("drag"),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Drag & Drop"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Students drag words from left list to right list"}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" Easier for younger students",c.jsx("br",{})," Visual feedback on placement",c.jsx("br",{})," Mobile-friendly"]})]}),c.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="arrow"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("arrow"),children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("input",{type:"radio",checked:f==="arrow",onChange:()=>h("arrow"),className:"mr-3"}),c.jsx("h4",{className:"font-medium",children:"Draw Arrows"})]}),c.jsx("p",{className:"text-sm text-gray-600",children:"Students draw arrows connecting matching words"}),c.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" More challenging",c.jsx("br",{})," Better for visual learners",c.jsx("br",{})," Requires precision"]})]})]})]})}),c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"word-pairs-section",children:[c.jsxs("div",{className:"pairs-header flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Word Pairs"}),c.jsx(ot,{onClick:T,size:"sm",children:"+ Add Pair"})]}),c.jsx("div",{className:"pairs-list space-y-3 p-0 md:p-4",children:u.map((M,j)=>c.jsxs("div",{className:"word-pair-row flex items-center space-x-2 md:space-x-4 p-2 md:p-4 bg-gray-50 rounded-lg border",children:[c.jsx("div",{className:"pair-number flex-shrink-0",children:c.jsx("span",{className:"number-badge w-6 h-6 md:w-8 md:h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs md:text-sm font-semibold",children:j+1})}),c.jsx("div",{className:"left-word flex-1",children:c.jsx("input",{type:"text",value:M.leftWord,onChange:A=>b(j,A.target.value),placeholder:"Left word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsx("div",{className:"pair-arrow flex-shrink-0 text-gray-500 text-lg md:text-xl",children:""}),c.jsx("div",{className:"right-word flex-1",children:c.jsx("input",{type:"text",value:M.rightWord,onChange:A=>E(j,A.target.value),placeholder:"Right word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),c.jsx("div",{className:"pair-actions flex-shrink-0",children:c.jsx(ot,{onClick:()=>k(j),variant:"outline",size:"sm",className:"remove-btn w-6 h-6 md:w-8 md:h-8 p-0 text-red-500 hover:bg-red-50",disabled:u.length<=1,children:""})})]},j))})]})}),c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"preview-section",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),c.jsx("div",{className:"preview-pairs space-y-2",children:u.map((M,j)=>c.jsxs("div",{className:"preview-pair flex items-center space-x-2 text-sm",children:[c.jsxs("span",{className:"preview-number font-semibold text-blue-600",children:[j+1,"."]}),c.jsx("span",{className:"preview-left px-2 py-1 bg-white rounded border",children:M.leftWord||"Left word"}),c.jsx("span",{className:"preview-arrow text-gray-500",children:""}),c.jsx("span",{className:"preview-right px-2 py-1 bg-white rounded border",children:M.rightWord||"Right word"})]},j))})]})}),c.jsxs("div",{className:"flex justify-center space-x-4",children:[c.jsx(ot,{onClick:P,disabled:!N()||g,className:"px-8",children:g?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test"}),c.jsx(ot,{onClick:r,variant:"secondary",children:"Cancel"})]}),y&&c.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600",children:y})})]})},Ade=(e,t)=>{const[r,n,s]=rW(`test_progress_${e}_${t}`,{}),[a,i]=_.useState(!1),[o,l]=_.useState(0),[u,d]=_.useState(0),[f,h]=_.useState(!1),[g,x]=_.useState(null),y=_.useRef(null),v=_.useRef(null),T=_.useCallback((R,H)=>{if(!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}n(z=>({...z,[R]:H})),console.log(`Saved progress for question ${R}:`,H)},[n]),k=_.useCallback(R=>!window.tokenManager||!window.tokenManager.isAuthenticated()?(console.warn("[WARN] Cannot get progress: No valid JWT token"),null):r[R]||null,[r]),b=_.useCallback(()=>{if(console.log(`[DEBUG] clearTestProgress called with testType: ${e}, testId: ${t}`),!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const R=`test_progress_${e}_${t}`;console.log(`[DEBUG] Removing localStorage key: ${R}`);const H=Object.keys(r).length>0;s(),console.log(H?`[DEBUG] Progress cleared for test ${e}_${t}`:`[DEBUG] No progress found to clear for test ${e}_${t}`)},[s,e,t,r]),E=_.useCallback(()=>{y.current&&(E(y.current),y.current=null),v.current&&(E(v.current),v.current=null)},[]),N=_.useCallback(()=>{console.log(`[DEBUG] setupProgressTrackingForPage called with testType: ${e}, testId: ${t}`),v.current=setInterval(()=>{console.log("[DEBUG] Auto-saving progress..."),D()},3e4),console.log("[DEBUG] Progress tracking interval set up (30 seconds)")},[e,t]),P=_.useCallback(()=>{console.log(`[DEBUG] updateProgressDisplayForPage called with testType: ${e}, testId: ${t}`);const R=A(),H=u>0?Math.round(R/u*100):0;return console.log(`[DEBUG] Progress: ${R}/${u} questions answered`),console.log(`[DEBUG] Progress bar updated: ${H}%`),{answeredQuestions:R,totalQuestions:u,percentage:H}},[e,t,u]),M=_.useCallback(()=>{console.log("[DEBUG] updateSubmitButtonStateForPage called");const R=A();console.log(`[DEBUG] Submit button state check: ${R}/${u} questions answered`);const H=R===u&&u>0;return console.log(H?"[DEBUG] Submit button enabled - all questions answered":"[DEBUG] Submit button disabled - not all questions answered"),H},[u]),j=_.useCallback(()=>{console.log(`[DEBUG] loadSavedProgressForPage called with testType: ${e}, testId: ${t}`);try{if(console.log("[DEBUG] Loaded progress from localStorage:",r),Object.keys(r).length===0){console.log("[DEBUG] No saved progress found");return}const R=Object.keys(r).length;l(R),console.log(`[DEBUG] Restored ${R} answered questions`)}catch(R){console.error("[ERROR] Failed to load saved progress:",R),x(R.message)}},[e,t,r]),A=_.useCallback(()=>{console.log(`[DEBUG] getAnsweredQuestionsCountForPage called with testType: ${e}`);const R=Object.keys(r).length;return l(R),console.log(`[DEBUG] Found ${R} answered questions`),R},[e,r]),D=_.useCallback(()=>{console.log(`[DEBUG] saveProgressForPage called with testType: ${e}, testId: ${t}`);try{console.log("[DEBUG] Progress saved:",r)}catch(R){console.error("[ERROR] Failed to save progress:",R),x(R.message)}},[e,t,r]),L=_.useCallback(()=>{try{const R=`test_completed_${e}_${t}`,H=localStorage.getItem(R)==="true";return i(H),H}catch(R){return console.error("Error checking test completion:",R),!1}},[e,t]),G=_.useCallback(()=>{try{const R=`test_completed_${e}_${t}`;localStorage.setItem(R,"true"),i(!0),console.log(`Test ${e}_${t} marked as completed`)}catch(R){console.error("Error marking test completed:",R)}},[e,t]),X=_.useCallback(()=>{console.log("Marking test completed in UI:",{testType:e,testId:t}),G()},[e,t,G]),se=_.useCallback(R=>{try{const H=`test_creation_state_${e}_${t}`;localStorage.setItem(H,JSON.stringify(R)),console.log("Test creation state saved:",R)}catch(H){console.error("Error saving test creation state:",H)}},[e,t]),Q=_.useCallback(()=>{try{const R=`test_creation_state_${e}_${t}`;localStorage.removeItem(R),console.log("Test creation state cleared")}catch(R){console.error("Error clearing test creation state:",R)}},[e,t]),re=_.useCallback((R,H)=>{try{const z=`test_step_${e}_${t}_${R}`;localStorage.setItem(z,JSON.stringify(H)),console.log(`Step ${R} data saved:`,H)}catch(z){console.error(`Error saving step ${R} data:`,z)}},[e,t]),B=_.useCallback(R=>{try{const H=`test_step_${e}_${t}_${R}`,z=localStorage.getItem(H);return z?JSON.parse(z):null}catch(H){return console.error(`Error restoring step ${R} data:`,H),null}},[e,t]),V=_.useCallback(()=>{try{const R=`test_creation_state_${e}_${t}`,H=localStorage.getItem(R);return H?JSON.parse(H):null}catch(R){return console.error("Error restoring test creation state:",R),null}},[e,t]);return _.useEffect(()=>()=>{E()},[e,t,N,j,E]),_.useEffect(()=>{A()},[r,A]),{progress:r,isCompleted:a,answeredCount:o,totalQuestions:u,isLoading:f,error:g,saveProgress:T,getProgress:k,clearProgress:b,clearInterval:E,setupProgressTracking:N,updateProgress:P,updateSubmitButton:M,loadProgress:j,getAnsweredCount:A,saveProgressForPage:D,checkCompleted:L,markCompleted:G,markCompletedUI:X,saveState:se,clearState:Q,saveStepData:re,restoreStepData:B,restoreState:V,setTotalQuestions:d,setError:x}},jde=({testData:e,onTestComplete:t,onBackToCabinet:r})=>{const{user:n}=Ps(),{makeAuthenticatedRequest:s}=$l(),{showNotification:a}=ai(),[i,o]=_.useState({width:window.innerWidth,height:window.innerHeight});_.useEffect(()=>{const We=()=>{o({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",We),()=>window.removeEventListener("resize",We)},[]);const{getCheatingData:l,stopTracking:u,clearData:d}=v1(),[f,h]=_.useState(null),[g,x]=_.useState({}),[y,v]=_.useState(null),T=_.useRef(null),[k,b]=_.useState(800),E={VERY_SMALL:400,MOBILE:600,TABLET:900},N={VERY_SMALL:.6,MOBILE:.8,TABLET:.9,DESKTOP:1},P={CANVAS_HEIGHT:400,BLOCK_WIDTH:140,BLOCK_HEIGHT:50,BLOCK_SPACING:80,MARGIN:50},M=i.width<E.VERY_SMALL,j=i.width>=E.VERY_SMALL&&i.width<E.MOBILE,A=i.width>=E.MOBILE&&i.width<E.TABLET;i.width>=E.TABLET;const D=M?N.VERY_SMALL:j?N.MOBILE:A?N.TABLET:N.DESKTOP;_.useEffect(()=>{const We=()=>{if(T.current){const tt=T.current.clientWidth;console.log(" Container width detected:",tt),tt>0&&b(tt)}};We();const Ue=[setTimeout(We,50),setTimeout(We,100),setTimeout(We,200),setTimeout(We,500)];return window.addEventListener("resize",We),()=>{Ue.forEach(tt=>clearTimeout(tt)),window.removeEventListener("resize",We)}},[f]);const L=P.BLOCK_WIDTH*D,G=P.BLOCK_HEIGHT*D,X=P.BLOCK_SPACING*D,se=P.MARGIN*D,Q=se;console.log(" Mobile Debug:",{screenWidth:i.width,containerWidth:T.current?.clientWidth,canvasWidth:k,scale:D,blockWidth:L,margin:se,leftBlockX:Q,displayDataLoaded:!!f});const re=Q+L+20+L+se,B=re<=k;let V,R=L,H=G;if(B)V=Math.min(Math.max(Q+L+20,k-L-se),k-L-se);else{const We=k-se*2,Ue=Math.floor((We-20)/2);R=Math.max(60,Ue),H=Math.max(30,H*(R/L)),V=Q+R+20,console.log(" Very small screen - adjusted block size:",{availableWidth:We,maxBlockWidth:Ue,actualBlockWidth:R,actualBlockHeight:H})}console.log(" Right Block Position:",{rightBlockX:V,rightBlockRightEdge:V+R,canvasWidth:k,fits:V+R<=k,canFitSideBySide:B,minRequiredWidth:re});const z=se,I={DRAGGED_WORD:Math.max(8,14*D),ORIGINAL_WORD:Math.max(10,16*D),LEFT_WORD:Math.max(10,14*D)},W=Math.max(1,3*D),K=_.useCallback((We,Ue,tt)=>{if(!We)return H;const nt=Ue*.55,at=Math.floor(tt/nt),It=Math.ceil(We.length/at),Lt=Ue*1.1,Xt=12*D,vr=It*Lt+Xt,br=Math.max(H*.8,30*D);return Math.max(br,vr)},[H,D]),oe=_.useCallback(()=>{if(!f?.leftWords||!f?.rightWords)return P.CANVAS_HEIGHT*D;let We=se*2;for(let tt=0;tt<f.leftWords.length;tt++){const nt=f.leftWords[tt],at=f.rightWords[tt],It=K(nt,I.LEFT_WORD,R),Lt=K(at,I.ORIGINAL_WORD,R),Xt=Math.max(It,Lt);We+=Xt,tt<f.leftWords.length-1&&(We+=20*D)}const Ue=P.CANVAS_HEIGHT*D;return Math.max(Ue,We)},[f,K,I,R,se,D])();_.useCallback((We,Ue)=>{if(!We||!Ue)return X;const tt=We.map((It,Lt)=>{const Xt=Ue[Lt],vr=K(It,I.LEFT_WORD,R),br=K(Xt,I.ORIGINAL_WORD,R);return Math.max(vr,br)}),nt=Math.max(...tt),at=20*D;return nt+at},[X,K,I,R,D]);const le=_.useCallback(()=>{if(!f?.leftWords||!f?.rightWords)return[];const We=[];let Ue=se;for(let tt=0;tt<f.leftWords.length;tt++){const nt=f.leftWords[tt],at=f.rightWords[tt],It=K(nt,I.LEFT_WORD,R),Lt=K(at,I.ORIGINAL_WORD,R),Xt=Math.max(It,Lt);We.push({y:Ue,leftHeight:It,rightHeight:Lt,rowHeight:Xt}),Ue+=Xt+20*D}return We},[f,K,I,R,se,D])(),[ue,de]=_.useState([]),[Te,ie]=_.useState(!1),[pe,Ae]=_.useState(!1),[Me,Je]=_.useState(null),[Ve,Dt]=_.useState(!1),[lt,At]=_.useState(!1);_.useEffect(()=>{if(e){if(console.log(" WordMatchingStudent: Initializing test data:",e),console.log(" Interaction type:",e.interaction_type),console.log(" Left words:",e.leftWords),console.log(" Right words:",e.rightWords),console.log(" Correct pairs:",e.correctPairs),!Array.isArray(e.leftWords)||!Array.isArray(e.rightWords)){console.error(" Invalid data structure - leftWords or rightWords not arrays:",{leftWords:e.leftWords,rightWords:e.rightWords});return}if(h(e),Je(new Date),n?.student_id){const We=`test_progress_${n.student_id}_word_matching_${e.id}`,Ue=fa(We);Ue&&(x(Ue.answers||{}),de(Ue.arrows||[]),Je(new Date(Ue.startTime)),console.log(" Test progress restored:",Ue))}}},[e,n?.student_id]),_.useEffect(()=>{if(f&&Me&&n?.student_id){const We=setInterval(()=>{const Ue={answers:g,arrows:ue,startTime:Me.toISOString()},tt=`test_progress_${n.student_id}_word_matching_${e.id}`;qs(tt,Ue,da.test_progress),console.log(" Progress auto-saved")},3e4);return()=>clearInterval(We)}},[f,g,ue,Me,n?.student_id,e?.id]);const vt=_.useCallback((We,Ue)=>{if(console.log(" handleWordClick called:",{side:We,index:Ue,interactionType:e?.interaction_type,selectedWord:y}),e?.interaction_type!=="arrow"){console.log(" Not arrow mode, ignoring click");return}if(y){if(y.side===We&&y.index===Ue)console.log(" Deselecting word"),v(null);else if(y.side!==We){console.log(" Creating arrow connection:",{startWord:y,endWord:{side:We,index:Ue}});const tt={id:Date.now().toString(),startWord:y,endWord:{side:We,index:Ue},color:"#3B82F6"};de(nt=>{const at=[...nt,tt];return console.log(" Updated arrows:",at),at}),x(nt=>{const at={...nt,[y.index]:Ue};return console.log(" Updated answers:",at),at}),v(null)}}else console.log(" Selecting word:",{side:We,index:Ue}),v({side:We,index:Ue})},[y,e?.interaction_type]);_.useCallback((We,Ue)=>{e.interaction_type==="drag"&&x(tt=>({...tt,[We]:Ue}))},[e?.interaction_type]);const ct=_.useCallback(()=>{Dt(!0)},[]),bt=_.useCallback(()=>{x({}),de([]),v(null),Dt(!1)},[]),Ut=_.useCallback(()=>{At(!0)},[]),Bt=_.useCallback(()=>{At(!1),r&&r()},[r]),Vt=_.useCallback(async()=>{if(f){ie(!0);try{const We=f?.leftWords?.length||0;let Ue=0,tt={};e.interaction_type==="drag"?Object.entries(g).forEach(([Ie,Qe])=>{const Ne=f?.correctPairs?.[Ie];Qe===Ne&&Ue++,tt[Ie]=Qe}):ue.forEach(Ie=>{const Qe=Ie.startWord.side==="left"?Ie.startWord.index:Ie.endWord.index,Ne=Ie.startWord.side==="right"?Ie.startWord.index:Ie.endWord.index;f?.correctPairs?.[Qe]===Ne&&Ue++,tt[Qe]=Ne});const nt=Ue,at=We;console.log(` Final Score: ${nt}/${at} (${Math.round(nt/at*100)}%)`);const It=new Date,Lt=Me?Math.round((It-Me)/1e3):0,Xt=Me?Me.toISOString():It.toISOString(),vr=l(),br=n.student_id,Dr=`retest_assignment_id_${br}_word_matching_${e.id}`,Sr=localStorage.getItem(Dr),{academicCalendarService:pr}=await Za(async()=>{const{academicCalendarService:Ie}=await Promise.resolve().then(()=>i3);return{academicCalendarService:Ie}},void 0);await pr.loadAcademicCalendar();const Fe=pr.getCurrentTerm()?.id;if(!Fe)throw new Error("No current academic period found");const Be={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:br,academic_period_id:Fe,parent_test_id:e.id,retest_assignment_id:Sr?Number(Sr):null,interaction_type:e.interaction_type,answers:tt,score:nt,maxScore:at,time_taken:Lt,started_at:Xt,submitted_at:It.toISOString(),caught_cheating:vr.caught_cheating,visibility_change_times:vr.visibility_change_times};console.log(" Submission data being sent:",Be),console.log(" TestData structure:",e),console.log(" Submitting test results...");const He=await s("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Be)});console.log(" Submission response received:",He.status);const Pt=await He.json();if(Pt.success){if(a("Test submitted successfully!","success"),u(),d(),n?.student_id&&n1(n.student_id,"word_matching",e.id),!!Sr&&n?.student_id){let Qe=3;try{const qe=localStorage.getItem(`student_active_tests_${n.student_id}`);if(qe){const zt=JSON.parse(qe)?.tests?.find(rr=>rr.test_id===e.id&&rr.test_type==="word_matching");zt&&(Qe=zt.retest_attempts_left||zt.max_attempts||3)}}catch(qe){console.error("Error checking active tests cache:",qe)}const Ke=(nt>0&&at>0?nt/at*100:0)>=50;if(Ke){const qe=`retest_attempt${Qe}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(qe,"true"),console.log(" Passed retest, marking last-slot key:",qe);let Rt=0;for(let Ir=1;Ir<=10;Ir++){const wr=`retest_attempt${Ir}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(wr)==="true"&&Rt++}const zt=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(zt,"true"),console.log(" Marked retest as completed (student passed):",zt);const rr=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(rr,JSON.stringify({used:Rt,max:Qe})),console.log(" Set retest attempts metadata (student passed):",rr,{used:Rt,max:Qe})}else{let qe=1;for(let wr=1;wr<=10;wr++){const Wr=`retest_attempt${wr}_${n.student_id}_word_matching_${e.id}`;if(localStorage.getItem(Wr)!=="true"){qe=wr;break}}const Rt=`retest_attempt${qe}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Rt,"true"),console.log(" Marked retest attempt as completed:",Rt);let zt=0;for(let wr=1;wr<=10;wr++){const Wr=`retest_attempt${wr}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(Wr)==="true"&&zt++}const rr=Qe-zt,Ir=rr<=0||Ke;if(console.log(" Retest completion check:",{usedAttempts:zt,maxAttempts:Qe,attemptsLeft:rr,passed:Ke,shouldComplete:Ir}),Ir){const wr=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(wr,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",wr);const Wr=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Wr,JSON.stringify({used:zt,max:Qe})),console.log(" Set retest attempts metadata (attempts exhausted):",Wr,{used:zt,max:Qe})}}}else if(n?.student_id){const Qe=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Qe,"true"),console.log(" Test marked as completed in localStorage:",Qe)}if(n?.student_id){const Qe=`student_results_table_${n.student_id}`;qs(Qe,Pt,da.student_results_table),console.log(" Test results cached with key:",Qe)}if(n?.student_id){const Qe=`retest1_${br}_word_matching_${e.id}`;localStorage.removeItem(Qe),localStorage.removeItem(Dr)}t&&t(nt),ie(!1)}else throw new Error(Pt.message||"Failed to submit test")}catch(We){console.error("Error submitting test:",We),ie(!1)}}},[f,g,ue,e,n,Me,l,u,d,s,t]);return f?c.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-4xl mx-auto p-6",children:[c.jsx(Ca,{isOpen:Te,onClose:()=>{},title:"Submitting",size:"small",children:c.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[c.jsx(un,{size:"lg",className:"mb-3"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Submitting test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your results"})]})}),c.jsx("div",{className:"flex justify-end mb-2",children:c.jsx(ot,{onClick:Ut,variant:"outline",size:"sm",disabled:Te,children:"Back to Cabinet"})}),c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.test_name}),c.jsx("p",{className:"text-gray-600",children:e.interaction_type==="drag"?"Drag words from left to right to match them":"Click on the word or phrase on the left, then click on the matching word or phrase on the right to connect them"})]})}),e.interaction_type==="drag"?c.jsx($t,{className:"mb-6",children:c.jsx("div",{ref:T,className:"relative w-full",children:c.jsx(vm,{width:k,height:oe,className:`border-2 border-gray-200 rounded-lg ${Te?"pointer-events-none opacity-50":""}`,children:c.jsxs(ym,{children:[f.leftWords.map((We,Ue)=>{const tt=g[Ue]!==void 0,nt=K(We,I.LEFT_WORD,R),at=le[Ue],It=at?at.y:z+Ue*X;return c.jsxs(eu,{x:Q,y:It,draggable:!tt,onDragStart:Lt=>{Lt.target.moveToTop()},onDragEnd:Lt=>{Lt.target.getStage();const Xt=f.rightWords,vr=R+60,br=V-30;console.log(" Drop detection - Word dropped at:",Lt.target.x(),Lt.target.y());for(let Dr=0;Dr<Xt.length;Dr++){const Sr=Xt[Dr],pr=le[Dr],ye=pr?pr.y:z+Dr*X,Fe=K(Sr,I.ORIGINAL_WORD,R),Be=br,He=br+vr,Pt=ye,Ie=ye+Fe;if(console.log(` Checking drop zone ${Dr}:`,{left:Be,right:He,top:Pt,bottom:Ie,word:Xt[Dr]}),Lt.target.x()>=Be&&Lt.target.x()<=He&&Lt.target.y()>=Pt&&Lt.target.y()<=Ie){if(Object.entries(g).some(([Ne,Ke])=>Ke===Dr&&parseInt(Ne)!==Ue)){console.log(` Dropzone ${Dr} is already occupied, resetting position`),Lt.target.position({x:Q,y:It});return}console.log(` Match found! Word "${f.leftWords[Ue]}" matched with "${Xt[Dr]}"`),x(Ne=>({...Ne,[Ue]:Dr}));break}}console.log(" No match found, resetting position"),Lt.target.position({x:Q,y:It})},children:[c.jsx(Si,{width:R,height:nt,fill:tt?"#e5e7eb":"#3b82f6",stroke:tt?"#9ca3af":"#1d4ed8",strokeWidth:2,cornerRadius:8,opacity:tt?.5:1}),c.jsx(Bu,{text:We,x:R/2,y:nt/2,fontSize:I.LEFT_WORD,fontFamily:"Arial",fill:tt?"#dc2626":"white",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:nt/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Ue}`)}),f.rightWords.map((We,Ue)=>{const tt=K(We,I.ORIGINAL_WORD,R),nt=le[Ue],at=nt?nt.y:z+Ue*X,It=Object.keys(g).find(Lt=>g[Lt]===Ue);return c.jsxs(eu,{x:V,y:at,children:[c.jsx(Si,{width:R,height:tt,fill:It?"#10b981":"#f3f4f6",stroke:It?"#059669":"#d1d5db",strokeWidth:2,cornerRadius:8}),c.jsx(Bu,{text:We,x:R/2,y:tt/2,fontSize:I.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:tt/2,wrap:"word",ellipsis:!0,listening:!1}),It&&c.jsx(Bu,{text:f.leftWords[It],x:R/2,y:tt-5,fontSize:I.DRAGGED_WORD,fontFamily:"Arial",fill:"#dc2626",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:I.DRAGGED_WORD/2,wrap:"word",ellipsis:!0})]},`right-${Ue}`)})]})})})}):c.jsx($t,{className:"mb-6",children:c.jsx("div",{ref:T,className:"relative w-full",children:c.jsx(vm,{width:k,height:oe,className:`border-2 border-gray-200 rounded-lg ${Te?"pointer-events-none opacity-50":""}`,children:c.jsxs(ym,{children:[f?.leftWords?.map((We,Ue)=>{const tt=K(We,I.LEFT_WORD,R),nt=le[Ue],at=nt?nt.y:z+Ue*X,It=y?.side==="left"&&y?.index===Ue;return c.jsxs(eu,{x:Q,y:at,onClick:()=>vt("left",Ue),children:[c.jsx(Si,{width:R,height:tt,fill:It?"#3b82f6":"#f3f4f6",stroke:It?"#1d4ed8":"#d1d5db",strokeWidth:It?3:2,cornerRadius:8}),c.jsx(Bu,{text:We,x:R/2,y:tt/2,fontSize:I.LEFT_WORD,fontFamily:"Arial",fill:It?"white":"#374151",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:tt/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Ue}`)}),f?.rightWords?.map((We,Ue)=>{const tt=K(We,I.ORIGINAL_WORD,R),nt=le[Ue],at=nt?nt.y:z+Ue*X,It=y?.side==="right"&&y?.index===Ue;return c.jsxs(eu,{x:V,y:at,onClick:()=>vt("right",Ue),children:[c.jsx(Si,{width:R,height:tt,fill:It?"#3b82f6":"#f3f4f6",stroke:It?"#1d4ed8":"#d1d5db",strokeWidth:It?3:2,cornerRadius:8}),c.jsx(Bu,{text:We,x:R/2,y:tt/2,fontSize:I.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:R,offsetX:R/2,offsetY:tt/2,wrap:"word",ellipsis:!0,listening:!1})]},`right-${Ue}`)}),ue.map((We,Ue)=>{const tt=f?.leftWords?.[We.startWord.index],nt=f?.rightWords?.[We.endWord.index],at=K(tt,I.LEFT_WORD,R),It=K(nt,I.ORIGINAL_WORD,R),Lt=le[We.startWord.index],Xt=le[We.endWord.index],vr=Lt?Lt.y+at/2:z+We.startWord.index*X+at/2,br=Xt?Xt.y+It/2:z+We.endWord.index*X+It/2;return c.jsx(Wi,{points:[Q+R+20,vr,V-20,br],stroke:We.color||"#3b82f6",strokeWidth:W,lineCap:"round",lineJoin:"round"},Ue)})]})})})}),c.jsx($t,{children:c.jsxs("div",{className:`submit-section flex justify-center space-x-4 ${Te?"pointer-events-none opacity-50":""}`,children:[c.jsx(ot,{onClick:ct,variant:"outline",disabled:Te,children:"Reset"}),c.jsx(ot,{onClick:()=>Ae(!0),disabled:Te,className:"px-8",children:Te?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",color:"white",className:"mr-2"}),"Submitting..."]}):"Submit Test"})]})}),c.jsx(Ca,{isOpen:Ve&&!Te,onClose:()=>Dt(!1),title:"Reset Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and answers."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>Dt(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:bt,variant:"primary",children:"Reset"})]})]})}),c.jsx(Ca,{isOpen:lt,onClose:()=>At(!1),title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to leave the test? Your progress will be saved."}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>At(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:Bt,variant:"primary",children:"Leave"})]})]})}),c.jsx(Ca,{isOpen:pe,onClose:()=>Ae(!1),title:"Submit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>Ae(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:()=>{Ae(!1),Vt()},variant:"primary",children:"Submit"})]})]})})]}):c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx(un,{size:"lg"})})},Pde=({id:e,x:t,y:r,width:n,height:s,text:a,fontSize:i,color:o,isSelected:l,onSelect:u,onUpdate:d,onDelete:f})=>{const[h,g]=_.useState(!1),x=_.useRef(!1),y=_.useRef(null),v=_.useRef({x:0,y:0}),T=_.useRef(null),k=5,b=()=>{x.current=!0,g(!0)},E=()=>{if(x.current=!1,g(!1),T.current)try{T.current.draggable(!1)}catch{}},N=()=>{y.current&&(clearTimeout(y.current),y.current=null)};_.useEffect(()=>()=>{N()},[]),_.useEffect(()=>{if(T.current)try{T.current.draggable(x.current)}catch{}},[h]);const P=j=>{j.cancelBubble=!0,d(e,{isEditing:!0})},M=j=>{d(e,{x:j.target.x(),y:j.target.y()})};return c.jsxs(eu,{ref:T,x:t,y:r,draggable:h,dragBoundFunc:j=>x.current?j:{x:t,y:r},name:"textbox-group",onClick:j=>{j.cancelBubble=!0,u(e)},onTap:j=>{j.cancelBubble=!0,u(e),N()},onDblClick:P,onDblTap:P,onPointerDown:j=>{j.cancelBubble=!0;const A=j.evt||{};v.current={x:A.clientX??0,y:A.clientY??0},N(),y.current=setTimeout(()=>{b()},400)},onPointerMove:j=>{if(!y.current)return;const A=j.evt||{},D=Math.abs((A.clientX??0)-v.current.x),L=Math.abs((A.clientY??0)-v.current.y);(D>k||L>k)&&N()},onPointerUp:j=>{j.cancelBubble=!0,N(),E()},onPointerLeave:()=>{N(),E()},onDragEnd:j=>{M(j),E()},children:[c.jsx(Si,{width:n,height:s,fill:l?"#fef3c7":"#ffffff",stroke:l?"#f59e0b":"#d1d5db",strokeWidth:l?2:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1},name:"textbox-rect",onTap:j=>{j.cancelBubble=!0,u(e),N()},onDblTap:j=>{j.cancelBubble=!0,P(j)}}),c.jsx(Bu,{text:a,width:n,height:s,padding:8,align:"left",verticalAlign:"top",fontSize:i,fill:o,wrap:"word",name:"textbox-text",onTap:j=>{j.cancelBubble=!0,u(e),N()},onDblTap:j=>{j.cancelBubble=!0,P(j)}})]})},Mde=({x:e,y:t,width:r,height:n,initialText:s,onSave:a,onCancel:i})=>{const o=_.useRef(null);_.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const l=u=>{u.key==="Enter"&&!u.shiftKey?(u.preventDefault(),a(o.current.value)):u.key==="Escape"&&i()};return c.jsx("textarea",{ref:o,defaultValue:s,style:{position:"absolute",top:t,left:e,width:r,height:n,fontSize:"14px",border:"2px solid #f59e0b",borderRadius:"6px",padding:"8px",background:"white",resize:"none",outline:"none",fontFamily:"inherit",lineHeight:"1.4",zIndex:1e3},onKeyDown:l,onBlur:()=>a(o.current.value)})},Fde=({width:e,height:t,lines:r,onDrawingChange:n,currentTool:s,currentColor:a,currentThickness:i,zoom:o,onZoomChange:l,isPanning:u,isFullscreen:d,constrainPanPosition:f,handleWheel:h,stageRef:g,setIsPanning:x,responsiveDimensions:y,canvasSize:v,question:T,textBoxes:k,setTextBoxes:b,selectedTextBox:E,setSelectedTextBox:N,handleTextBoxSelect:P,handleTextBoxUpdate:M,handleTextBoxDelete:j,isEditingText:A,editingTextBox:D,setIsEditingText:L,setEditingTextBox:G,setCurrentTool:X})=>{const[se,Q]=_.useState(!1),[re,B]=_.useState([]),[V,R]=_.useState(null),[H,z]=_.useState(null),I=_.useRef(null),[W,K]=_.useState(.25),[ee,oe]=_.useState({x:0,y:0}),Z=_.useRef(null),le=_.useRef(null),ue=_.useRef(!1),de=6;_.useEffect(()=>{const Ne=()=>{const Ke=I.current;if(!Ke)return;const qe=Ke.clientWidth||1,Rt=Ke.clientHeight||1,zt=Math.min(qe/(v.width||1),Rt/(v.height||1));K(Math.min(zt,1))};return Ne(),window.addEventListener("resize",Ne),()=>window.removeEventListener("resize",Ne)},[v.width,v.height,d]);const Te=Ne=>{const Ke=g.current,qe=Ke.getPointerPosition();if(s==="pan"){if(He(Ne.target))try{Ke.draggable(!1),ue.current=!0}catch{}return}if(s==="text"){const zt={x:(qe.x-Ke.x())/Ke.scaleX(),y:(qe.y-Ke.y())/Ke.scaleY()};Z.current={...zt},le.current={x:qe.x,y:qe.y};return}Q(!0);const Rt={x:(qe.x-Ke.x())/Ke.scaleX(),y:(qe.y-Ke.y())/Ke.scaleY()};z(Rt),s==="pencil"?B([{x:Rt.x,y:Rt.y,color:a,thickness:i}]):s==="eraser"?B([{x:Rt.x,y:Rt.y,color:a,thickness:i,tool:"eraser"}]):["line","rectangle","circle"].includes(s)&&R({type:s,startX:Rt.x,startY:Rt.y,endX:Rt.x,endY:Rt.y,color:a,thickness:i})},ie=Ne=>{const Ke=g.current,qe=Ke.getPointerPosition(),Rt={x:(qe.x-Ke.x())/Ke.scaleX(),y:(qe.y-Ke.y())/Ke.scaleY()};if(oe(Rt),s!=="pan"){if(s==="text"&&Z.current&&le.current){const zt=Math.abs(qe.x-le.current.x),rr=Math.abs(qe.y-le.current.y);(zt>de||rr>de)&&(Z.current=null)}if(se)if(s==="pencil"){const zt=[...re,{x:Rt.x,y:Rt.y,color:a,thickness:i}];B(zt)}else if(s==="eraser"){const zt=[...re,{x:Rt.x,y:Rt.y,color:a,thickness:i,tool:"eraser"}];B(zt)}else["line","rectangle","circle"].includes(s)&&V&&R({...V,endX:Rt.x,endY:Rt.y})}},pe=Ne=>{const Ke=g.current;if(s==="pan"){if(ue.current){try{Ke.draggable(!0)}catch{}ue.current=!1}return}if(s==="text"&&Z.current){const qe=Ne&&Ne.target;if(qe&&typeof qe.name=="function"&&qe.name()==="canvas-bg"){const zt={id:Date.now(),x:Z.current.x,y:Z.current.y,width:150,height:60,text:"Double-click to edit",fontSize:14,color:"#000000"};b(rr=>[...rr,zt]),N(zt.id)}Z.current=null,le.current=null}if(se){if(s==="pencil"){const qe=[...r,re];n(qe),B([])}else if(s==="eraser"){const qe=[...r,re];n(qe),B([])}else if(["line","rectangle","circle"].includes(s)&&V){const qe=[...r,V];n(qe),R(null)}Q(!1),z(null)}},[Ae,Me]=_.useState(null),[Je,Ve]=_.useState(null),[Dt,lt]=_.useState(!1),[At,vt]=_.useState(null),[ct,bt]=_.useState(!1),[Ut,Bt]=_.useState(!1),[Vt,We]=_.useState([]),[Ue,tt]=_.useState(null),[nt,at]=_.useState({totalGestures:0,zoomGestures:0,panGestures:0,combinedGestures:0,averageResponseTime:0});let It=null;const Xt=(window.devicePixelRatio||1)>1.5,vr={scaleDelta:Xt?.03:.04,centerDelta:Xt?4:6,minTouchDistance:8,gestureHysteresis:.02},br=()=>{bt(!1),vt(null),Me(null),Ve(null),Q(!1),z(null),Bt(!1),tt(null),It&&(cancelAnimationFrame(It),It=null),g.current&&g.current.stop()},Dr=Ne=>{if(Ne.length<2)return 0;const Ke=Ne[0],qe=Ne[1];return Math.sqrt(Math.pow(qe.clientX-Ke.clientX,2)+Math.pow(qe.clientY-Ke.clientY,2))},Sr=Ne=>{if(Ne.length<2)return null;const Ke=Ne[0],qe=Ne[1];return{x:(Ke.clientX+qe.clientX)/2,y:(Ke.clientY+qe.clientY)/2}},pr=Ne=>{We(Ke=>[...Ke,{type:Ne,timestamp:Date.now()}].slice(-5))},ye=()=>{const Ne=Date.now(),Ke=Vt.filter(zt=>Ne-zt.timestamp<500);if(Ke.length<2)return 0;const qe=Ke[Ke.length-1],Rt=Ke[Ke.length-2];return qe.type===Rt.type?vr.gestureHysteresis:0},Fe=(Ne,Ke)=>{at(qe=>({totalGestures:qe.totalGestures+1,zoomGestures:Ne.includes("zoom")?qe.zoomGestures+1:qe.zoomGestures,panGestures:Ne.includes("pan")?qe.panGestures+1:qe.panGestures,combinedGestures:Ne==="zoom+pan"?qe.combinedGestures+1:qe.combinedGestures,averageResponseTime:(qe.averageResponseTime+Ke)/2}))},Be=(Ne,Ke,qe,Rt)=>{const zt=g.current,rr=zt.scaleX(),Ir=zt.position();let wr=rr,Wr=Ir;if(Ne){const we=qe/Ae,_e=rr*we,ke=T?.max_canvas_width||1536,Ce=T?.max_canvas_height||2048,rt=ke/v.width,xt=Ce/v.height,ut=Math.min(rt,xt,1);wr=Math.max(.25,Math.min(ut,_e));const ce=Rt,ge={x:(ce.x-zt.x())/rr,y:(ce.y-zt.y())/rr};Wr={x:ce.x-ge.x*wr,y:ce.y-ge.y*wr}}if(Ke){const we=Rt.x-Je.x,_e=Rt.y-Je.y;Ne?Wr={x:Wr.x+we,y:Wr.y+_e}:Wr={x:Ir.x+we,y:Ir.y+_e}}It||(It=requestAnimationFrame(()=>{zt.scale({x:wr,y:wr}),zt.position(Wr),zt.batchDraw(),It=null})),Ne&&Ke?(vt("zoom+pan"),Bt(!0)):Ne?(vt("zoom"),Bt(!0)):Ke&&vt("pan");const Ee=Date.now()-(Ue||Date.now());Fe(Ne&&Ke?"zoom+pan":Ne?"zoom":"pan",Ee),console.log(" Combined gesture",{doZoom:Ne,doPan:Ke,scale:wr.toFixed(2),pos:Wr})},He=Ne=>{if(!Ne||typeof Ne.name!="function")return!1;if((Ne.name()||"").includes("textbox-"))return!0;const qe=Ne.getParent&&Ne.getParent();return qe&&typeof qe.name=="function"&&(qe.name()||"").includes("textbox-")},Pt=Ne=>{const Ke=Ne.evt.touches,qe=Ne.target;if(He(qe)){if(s==="pan"&&g.current)try{g.current.draggable(!1),ue.current=!0}catch{}return}Ke.length===2?(Ne.evt.preventDefault(),bt(!0),vt(null),Me(Dr(Ke)),Ve(Sr(Ke)),Q(!1),tt(Date.now())):Ke.length===1&&(bt(!1),vt(null),Te(Ne))},Ie=Ne=>{const Ke=Ne.evt.touches,qe=Ne.target;if(!He(qe))if(Ke.length===2&&ct){Ne.evt.preventDefault();const Rt=g.current,zt=Dr(Ke),rr=Sr(Ke);if(Ae&&Je&&Rt&&zt>vr.minTouchDistance){const Ir=Math.abs(zt/Ae-1),wr=Math.sqrt(Math.pow(rr.x-Je.x,2)+Math.pow(rr.y-Je.y,2)),Wr=ye(),he=vr.scaleDelta-Wr,Ee=vr.centerDelta-Wr*10,we=Ir>he,_e=wr>Ee;(we||_e)&&(Be(we,_e,zt,rr),we&&_e?pr("zoom+pan"):we?pr("zoom"):_e&&pr("pan")),console.log(" Gesture Debug",{scaleDelta:Ir.toFixed(3),centerDelta:wr.toFixed(1),doZoom:we,doPan:_e,hysteresis:Wr.toFixed(3),adjustedScaleDelta:he.toFixed(3),adjustedCenterDelta:Ee.toFixed(1),gestureHistory:Vt.slice(-3)})}Me(zt),Ve(rr)}else Ke.length===1&&!ct&&(Ne.evt.preventDefault(),ie())},Qe=Ne=>{const Ke=Ne.evt.touches,qe=Ne.target;He(qe)||(Ke.length===0?(pe(Ne),br(),Bt(!1)):Ke.length===1&&(bt(!1),vt(null),Me(null),Ve(null),Bt(!1)))};return c.jsx("div",{className:"relative w-full block sm:flex sm:justify-center",children:c.jsx("div",{className:"w-full max-w-full block sm:flex sm:justify-center",children:c.jsxs("div",{className:"relative",style:{border:d&&(y.width<window.innerWidth-40||y.height<window.innerHeight-40)?"2px solid #000000":"none",borderRadius:"8px",overflow:"hidden"},children:[c.jsx("div",{ref:I,className:"w-full h-full",style:{touchAction:"manipulation"},children:c.jsx(vm,{ref:g,width:y.width,height:y.height,scaleX:d?y.zoom:o,scaleY:d?y.zoom:o,onMouseDown:Te,onMousemove:ie,onMouseup:pe,onTouchStart:Pt,onTouchMove:Ie,onTouchEnd:Qe,onWheel:h||(()=>{}),onDragStart:()=>{console.log(" Drag started"),s==="pan"&&x(!0)},onDragEnd:()=>{if(console.log(" Drag ended"),s==="pan"&&(x(!1),f)){const Ne=g.current,Ke=I.current,qe=Ke?.clientWidth||y.width,Rt=Ke?.clientHeight||y.height,zt=v.width*Ne.scaleX(),rr=v.height*Ne.scaleY(),Ir=Ne.x(),wr=Ne.y();(Ir>qe||Ir<-zt||wr>Rt||wr<-rr)&&f(Ne)}},draggable:s==="pan"&&o>.25,className:`border-0 rounded-none shadow-none sm:border sm:rounded-lg sm:shadow-sm ${s==="pan"?"cursor-grab":u?"cursor-grabbing":"cursor-crosshair"}`,style:{width:"100%",height:"auto"},onLoad:()=>{console.log(" DrawingTestStudent - Stage loaded with dimensions:",y.width,"x",y.height),console.log(" DrawingTestStudent - Canvas size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Current zoom level:",o),console.log(" DrawingTestStudent - Effective display size:",Math.round(v.width*o),"x",Math.round(v.height*o)),console.log(" DrawingTestStudent - Total pixels displayed:",Math.round(v.width*o*v.height*o))},children:c.jsxs(ym,{children:[c.jsx(Si,{x:0,y:0,width:v.width,height:v.height,fill:"white",name:"canvas-bg"}),r.map((Ne,Ke)=>{if(Array.isArray(Ne)){const qe=Ne[0]?.tool==="eraser";return c.jsx(Wi,{points:Ne.flatMap(Rt=>[Rt.x,Rt.y]),stroke:qe?"black":Ne[0]?.color||"#000000",strokeWidth:qe?(Ne[0]?.thickness||2)*7:Ne[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:qe?"destination-out":"source-over"},Ke)}else{if(Ne.type==="line")return c.jsx(Wi,{points:[Ne.startX,Ne.startY,Ne.endX,Ne.endY],stroke:Ne.color,strokeWidth:Ne.thickness,lineCap:"round"},Ke);if(Ne.type==="rectangle"){const qe=Math.abs(Ne.endX-Ne.startX),Rt=Math.abs(Ne.endY-Ne.startY),zt=Math.min(Ne.startX,Ne.endX),rr=Math.min(Ne.startY,Ne.endY);return c.jsx(Si,{x:zt,y:rr,width:qe,height:Rt,stroke:Ne.color,strokeWidth:Ne.thickness,fill:"transparent"},Ke)}else if(Ne.type==="circle"){const qe=Math.sqrt(Math.pow(Ne.endX-Ne.startX,2)+Math.pow(Ne.endY-Ne.startY,2))/2,Rt=(Ne.startX+Ne.endX)/2,zt=(Ne.startY+Ne.endY)/2;return c.jsx(Nf,{x:Rt,y:zt,radius:qe,stroke:Ne.color,strokeWidth:Ne.thickness,fill:"transparent"},Ke)}}return null}),k.map(Ne=>c.jsx(Pde,{...Ne,isSelected:E===Ne.id,onSelect:P,onUpdate:M,onDelete:j},Ne.id)),s==="pencil"&&c.jsx(Wi,{points:re.flatMap(Ne=>[Ne.x,Ne.y]),stroke:a,strokeWidth:i,tension:.5,lineCap:"round",lineJoin:"round"}),s==="eraser"&&c.jsx(Wi,{points:re.flatMap(Ne=>[Ne.x,Ne.y]),stroke:"black",strokeWidth:i*7,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:"destination-out"}),V&&V.type==="line"&&c.jsx(Wi,{points:[V.startX,V.startY,V.endX,V.endY],stroke:V.color,strokeWidth:V.thickness,lineCap:"round"}),V&&V.type==="rectangle"&&c.jsx(Si,{x:Math.min(V.startX,V.endX),y:Math.min(V.startY,V.endY),width:Math.abs(V.endX-V.startX),height:Math.abs(V.endY-V.startY),stroke:V.color,strokeWidth:V.thickness,fill:"transparent"}),V&&V.type==="circle"&&c.jsx(Nf,{x:(V.startX+V.endX)/2,y:(V.startY+V.endY)/2,radius:Math.sqrt(Math.pow(V.endX-V.startX,2)+Math.pow(V.endY-V.startY,2))/2,stroke:V.color,strokeWidth:V.thickness,fill:"transparent"}),s==="eraser"&&c.jsx(Nf,{x:ee.x,y:ee.y,radius:i*7/2,stroke:"#666666",strokeWidth:2,fill:"rgba(102, 102, 102, 0.2)",dash:[5,5],listening:!1}),s==="pencil"&&c.jsx(Wi,{points:[ee.x-10,ee.y,ee.x+10,ee.y,ee.x,ee.y-10,ee.x,ee.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="line"&&c.jsx(Wi,{points:[ee.x-10,ee.y,ee.x+10,ee.y,ee.x,ee.y-10,ee.x,ee.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="rectangle"&&c.jsx(Wi,{points:[ee.x-10,ee.y,ee.x+10,ee.y,ee.x,ee.y-10,ee.x,ee.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="circle"&&c.jsx(Wi,{points:[ee.x-10,ee.y,ee.x+10,ee.y,ee.x,ee.y-10,ee.x,ee.y+10],stroke:"#666666",strokeWidth:1,listening:!1})]})})}),A&&D&&c.jsx(Mde,{x:D.x,y:D.y,width:D.width,height:D.height,initialText:D.text,onSave:Ne=>{M(D.id,{text:Ne}),L(!1),G(null)},onCancel:()=>{L(!1),G(null)}}),c.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[c.jsx("button",{onClick:()=>{const Ne=g.current,Ke=Ne.scaleX(),qe=T?.max_canvas_width||1536,Rt=T?.max_canvas_height||2048,zt=qe/v.width,rr=Rt/v.height,Ir=Math.min(zt,rr,5),wr=Math.min(Ir,Ne.scaleX()*1.2);Ne.scale({x:wr,y:wr}),Ne.batchDraw(),console.log(" DrawingTestStudent - Zoom In button:",Ke.toFixed(2),"->",wr.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*wr),"x",Math.round(v.height*wr)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*wr*v.height*wr),"pixels"),l(wr)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom In",children:"+"}),c.jsx("button",{onClick:()=>{const Ne=g.current,Ke=Ne.scaleX(),qe=Math.max(.25,Ne.scaleX()*.8);Ne.scale({x:qe,y:qe}),Ne.batchDraw(),console.log(" DrawingTestStudent - Zoom Out button:",Ke.toFixed(2),"->",qe.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*qe),"x",Math.round(v.height*qe)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*qe*v.height*qe),"pixels"),l(qe)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom Out",children:""}),c.jsx("button",{onClick:()=>{const Ne=g.current,Ke=Ne.scaleX();Ne.scale({x:1,y:1}),Ne.position({x:0,y:0}),Ne.batchDraw(),console.log(" DrawingTestStudent - Reset zoom:",Ke.toFixed(2),"-> 1.00"),console.log(" DrawingTestStudent - Reset effective size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Reset resolution:",v.width*v.height,"pixels"),l(1)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 text-xs",title:"Reset Zoom",children:"1:1"})]}),c.jsxs("div",{className:"absolute bottom-2 left-2 bg-white border border-gray-300 rounded px-2 py-1 text-xs text-gray-600 shadow-sm",children:[Math.round(o*100),"%"]})]})})})},Dde=({content:e})=>{if(!e)return c.jsx("div",{className:"text-gray-500 italic",children:"No instructions provided"});const t=n=>{if(!n)return"";if(n.type==="text"){let s=n.text||"";if(n.format&&(n.format&1&&(s=`<strong>${s}</strong>`),n.format&2&&(s=`<em>${s}</em>`),n.format&8&&(s=`<u>${s}</u>`),n.format&16&&(s=`<s>${s}</s>`)),n.style){const a=n.style.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}if(n.textStyle){const a=n.textStyle.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}return s}if(n.type==="paragraph"){const s=n.children?n.children.map(t).join(""):"";let a="text-left";return n.format&&(n.format==="center"?a="text-center":n.format==="right"?a="text-right":n.format==="left"&&(a="text-left")),`<p class="${a}">${s}</p>`}if(n.type==="heading"){const s=n.tag||"h1",a=n.children?n.children.map(t).join(""):"";return`<${s}>${a}</${s}>`}if(n.type==="list"){const s=n.listType==="bullet"?"ul":"ol",a=n.children?n.children.map(i=>{if(i.type==="listitem"){const o=i.children?i.children.map(t).join(""):"";let l="margin: 4px 0; display: list-item;";return i.format&&(i.format==="center"?l+=" text-align: center;":i.format==="right"?l+=" text-align: right;":i.format==="left"&&(l+=" text-align: left;")),`<li style="${l}">${o}</li>`}return""}).join(""):"";return`<${s} style="margin: 8px 0; padding-left: 20px; list-style-type: ${n.listType==="bullet"?"disc":"decimal"}; display: block;">${a}</${s}>`}return n.children?n.children.map(t).join(""):""};let r=e;if(typeof e=="string"&&e.startsWith("{"))try{const n=JSON.parse(e);n.text?r=n.text:n.content?r=n.content:n.root&&n.root.children&&(r=n.root.children.map(t).join(""))}catch(n){console.log("Failed to parse Lexical content:",n)}return c.jsx("div",{className:"max-w-none rich-text-content",style:{lineHeight:"1.6",fontSize:"14px"},dangerouslySetInnerHTML:{__html:r}})},Ode=({question:e,questionIndex:t,studentAnswer:r,onAnswerChange:n,mode:s,testId:a,testType:i})=>{ai();const[o,l]=_.useState([]),[u,d]=_.useState(!0),[f,h]=_.useState("pencil"),[g,x]=_.useState("#000000"),[y,v]=_.useState(2),[T,k]=_.useState([]),[b,E]=_.useState(-1),[N,P]=_.useState({width:600,height:800}),[M,j]=_.useState(1),[A,D]=_.useState(!1),[L,G]=_.useState(!1),[X,se]=_.useState(!1),[Q,re]=_.useState([]),[B,V]=_.useState(null),[R,H]=_.useState(!1),[z,I]=_.useState(null),W=b>0,K=b<T.length-1,[ee,oe]=_.useState(!1),Z=_.useRef(null),le=_.useRef(null),[ue,de]=_.useState({width:600,height:800}),Te=_.useRef(!1),[ie,pe]=_.useState(.25),Ae=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#808080","#FFC0CB","#A52A2A","#000080"];_.useEffect(()=>{const We=()=>{se(window.innerWidth>=1024)};return We(),window.addEventListener("resize",We),()=>window.removeEventListener("resize",We)},[]),_.useEffect(()=>{if(e){const We=e.max_canvas_width||1536,Ue=e.max_canvas_height||2048,tt=e.canvas_width||600,nt=e.canvas_height||800;if(P({width:We,height:Ue}),Te.current)console.log(" DrawingTestStudent - Preserving user zoom:",M.toFixed(2));else{j(1),Te.current=!0;const It=(tt-We*1)/2,Lt=(nt-Ue*1)/2;if(!isNaN(It)&&!isNaN(Lt)&&Z.current){const Xt={x:It,y:Lt};Z.current.position(Xt),Z.current.batchDraw()}console.log(" DrawingTestStudent - Canvas size set:",We,"x",Ue),console.log(" DrawingTestStudent - Viewport size:",tt,"x",nt),console.log(" DrawingTestStudent - Initial zoom:",1 .toFixed(2)),console.log(" DrawingTestStudent - Image resolution:",We*Ue,"pixels"),console.log(" DrawingTestStudent - Aspect ratio:",(We/Ue).toFixed(2))}if(r&&typeof r=="string")try{const at=JSON.parse(r);at.lines?l(at.lines):l(at),at.textBoxes&&re(at.textBoxes)}catch{console.log("No valid drawing data found")}d(!1)}},[e,r]),_.useEffect(()=>{const We=()=>{const Ue=le.current;if(!Ue)return;const tt=Ue.clientWidth||1,nt=Ue.clientHeight||1,at=Math.min(tt/(N.width||1),nt/(N.height||1));pe(Math.min(at,1))};return We(),window.addEventListener("resize",We),()=>window.removeEventListener("resize",We)},[N.width,N.height,ee]);const Me=We=>{l(We);const Ue={lines:We,textBoxes:Q};n(e.question_id,JSON.stringify(Ue)),Je(We,Q)},Je=(We,Ue=Q)=>{const tt=T.slice(0,b+1);tt.push({lines:[...We],textBoxes:[...Ue]}),k(tt),E(tt.length-1)},Ve=()=>{if(W){const We=b-1,Ue=T[We];if(Ue&&typeof Ue=="object"&&Ue.lines){l([...Ue.lines]),re([...Ue.textBoxes]);const tt={lines:Ue.lines,textBoxes:Ue.textBoxes};n(e.question_id,JSON.stringify(tt))}else{const tt=Ue||[];l([...tt]),n(e.question_id,JSON.stringify(tt))}E(We)}},Dt=()=>{if(K){const We=b+1,Ue=T[We];if(Ue&&typeof Ue=="object"&&Ue.lines){l([...Ue.lines]),re([...Ue.textBoxes]);const tt={lines:Ue.lines,textBoxes:Ue.textBoxes};n(e.question_id,JSON.stringify(tt))}else{const tt=Ue||[];l([...tt]),n(e.question_id,JSON.stringify(tt))}E(We)}},lt=()=>{l([]),re([]),V(null),n(e.question_id,"")},At=We=>{V(We)},vt=(We,Ue)=>{const tt=Q.map(at=>at.id===We?{...at,...Ue}:at);re(tt),Je(o,tt);const nt={lines:o,textBoxes:tt};if(n(e.question_id,JSON.stringify(nt)),Ue.isEditing){const at=Q.find(It=>It.id===We);I(at),H(!0)}},ct=We=>{const Ue=Q.filter(nt=>nt.id!==We);re(Ue),B===We&&V(null),Je(o,Ue);const tt={lines:o,textBoxes:Ue};n(e.question_id,JSON.stringify(tt))},bt=()=>{if(ee){const tt=e?.canvas_width||600,nt=e?.canvas_height||800,at=window.innerWidth-40,It=window.innerHeight-40,Lt=at/tt,Xt=It/nt,vr=Math.min(Lt,Xt,1);return{width:tt,height:nt,zoom:vr}}const We=e?.canvas_width||600,Ue=e?.canvas_height||800;return{width:We,height:Ue,zoom:1}};_.useEffect(()=>{const We=()=>{de(bt())};return We(),window.addEventListener("resize",We),()=>window.removeEventListener("resize",We)},[ee,N]);const Ut=We=>{We.evt.preventDefault();const Ue=Z.current,tt=Ue.scaleX(),nt=Ue.getPointerPosition(),at={x:(nt.x-Ue.x())/tt,y:(nt.y-Ue.y())/tt},It=We.evt.deltaY>0?tt*.9:tt*1.1,Lt=e?.max_canvas_width||1536,Xt=e?.max_canvas_height||2048,vr=Lt/N.width,br=Xt/N.height,Dr=Math.min(vr,br,1),Sr=Math.max(ie,Math.min(Dr,It)),pr={x:nt.x-at.x*Sr,y:nt.y-at.y*Sr};if(Sr<=ie&&le.current){const ye=le.current.clientWidth||1,Fe=le.current.clientHeight||1;pr.x=(ye-N.width*Sr)/2,pr.y=(Fe-N.height*Sr)/2}Ue.scale({x:Sr,y:Sr}),Ue.position(pr),Ue.batchDraw(),console.log(" DrawingTestStudent - Wheel zoom:",tt.toFixed(2),"->",Sr.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(N.width*Sr),"x",Math.round(N.height*Sr)),console.log(" DrawingTestStudent - New resolution:",Math.round(N.width*Sr*N.height*Sr),"pixels"),j(Sr),Te.current=!0},Bt=We=>{const Ue=We.scaleX(),tt=le.current,nt=tt?.clientWidth||ue.width,at=tt?.clientHeight||ue.height,It=N.width*Ue,Lt=N.height*Ue;if(Ue<=ie){const Be=(nt-It)/2,He=(at-Lt)/2;We.position({x:Be,y:He}),We.batchDraw();return}if(It<=nt&&Lt<=at){const Be=(nt-It)/2,He=(at-Lt)/2;We.position({x:Be,y:He}),We.batchDraw();return}const Xt=Math.max(0,It-nt),vr=Math.max(0,Lt-at),br=-Xt,Dr=-vr,Sr=We.x(),pr=We.y(),ye=Math.max(br,Math.min(Xt,Sr)),Fe=Math.max(Dr,Math.min(vr,pr));(ye!==Sr||Fe!==pr)&&(We.position({x:ye,y:Fe}),We.batchDraw())},Vt=()=>{if(ee)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const We=le.current;We&&(We.requestFullscreen?We.requestFullscreen():We.webkitRequestFullscreen?We.webkitRequestFullscreen():We.msRequestFullscreen&&We.msRequestFullscreen())}};return _.useEffect(()=>{const We=()=>{oe(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",We),document.addEventListener("webkitfullscreenchange",We),document.addEventListener("msfullscreenchange",We),()=>{document.removeEventListener("fullscreenchange",We),document.removeEventListener("webkitfullscreenchange",We),document.removeEventListener("msfullscreenchange",We)}},[]),_.useEffect(()=>()=>{Z.current&&Z.current.stop()},[]),u?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx(un,{})}):e?c.jsxs("div",{className:`drawing-question w-full max-w-full mx-0 p-0 sm:p-2 ${ee?"fixed inset-0 z-50 bg-white overflow-y-auto":""}`,children:[!ee&&c.jsx("div",{className:"mb-4",children:c.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",t+1]})}),!ee&&e.question_json&&e.question_json.trim()&&c.jsxs("div",{className:"mb-2 p-2 bg-gray-50 border border-gray-200 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Task:"}),c.jsx("div",{className:"text-gray-700",children:c.jsx(Dde,{content:e.question_json})})]}),!ee&&c.jsx($t,{className:"p-1 sm:p-2 mb-2",children:c.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"hidden sm:block text-sm text-gray-700",children:"Tool:"}),c.jsxs("div",{className:"flex flex-nowrap sm:flex-wrap gap-1 overflow-x-auto",children:[c.jsx("button",{onClick:()=>h("pencil"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pencil"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pencil (Freehand drawing)",children:""}),c.jsx("button",{onClick:()=>h("line"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="line"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Line",children:""}),c.jsx("button",{onClick:()=>h("rectangle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="rectangle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Rectangle",children:""}),c.jsx("button",{onClick:()=>h("circle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="circle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Circle",children:""}),c.jsx("button",{onClick:()=>h("eraser"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="eraser"?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Eraser",children:""}),c.jsx("button",{onClick:()=>h("text"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="text"?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Text Box",children:""}),c.jsx("button",{onClick:()=>h("pan"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pan"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pan (Move canvas)",children:""})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("label",{className:"text-sm text-gray-700",children:"History:"}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx("button",{onClick:Ve,disabled:!W,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${W?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:""}),c.jsx("button",{onClick:Dt,disabled:!K,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${K?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:""})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>D(!A),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[c.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:g}}),c.jsx("span",{className:"text-xs sm:text-sm text-gray-700",children:"Color"})]}),A&&c.jsx("div",{className:"absolute top-full left-0 mt-2 p-4 bg-white border border-gray-300 rounded-lg shadow-lg z-30 min-w-max",children:c.jsx("div",{className:"flex flex-wrap gap-2 max-w-xs",children:Ae.map(We=>c.jsx("button",{onClick:()=>{x(We),D(!1)},className:`w-10 h-10 rounded border-2 hover:scale-110 transition-transform flex-shrink-0 ${g===We?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:We},title:We},We))})})]}),c.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[c.jsx("label",{className:"text-xs sm:text-sm text-gray-700",children:"Thickness:"}),c.jsx("input",{type:"range",min:"1",max:"10",value:y,onChange:We=>v(parseInt(We.target.value)),className:"w-16 sm:w-20"}),c.jsxs("span",{className:"text-xs text-gray-500 w-6 sm:w-8",children:[y,"px"]})]}),c.jsx(ot,{onClick:lt,variant:"secondary",size:"sm",children:"Clear"})]})}),c.jsx($t,{paddingClass:"p-0 sm:p-2",children:c.jsxs("div",{ref:le,className:"w-full drawing-canvas-container relative p-0 m-0",children:[c.jsx(Fde,{width:N.width,height:N.height,lines:o,onDrawingChange:Me,currentTool:f,currentColor:g,currentThickness:y,zoom:M,onZoomChange:j,isPanning:L,isFullscreen:ee,constrainPanPosition:Bt,handleWheel:Ut,stageRef:Z,setIsPanning:G,responsiveDimensions:ue,canvasSize:N,question:e,textBoxes:Q,setTextBoxes:re,selectedTextBox:B,setSelectedTextBox:V,handleTextBoxSelect:At,handleTextBoxUpdate:vt,handleTextBoxDelete:ct,isEditingText:R,editingTextBox:z,setIsEditingText:H,setEditingTextBox:I,setCurrentTool:h}),c.jsx("button",{onClick:Vt,className:"absolute top-2 left-2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-lg transition-all duration-200 z-10",title:ee?"Exit Fullscreen":"Enter Fullscreen",children:ee?c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):c.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})]}):c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-gray-500",children:"No drawing question data available"})})})},O5={enhanceUserData(e,t){const r={id:e.id||e.student_id||e.teacher_id,username:e.username||e.student_id,name:e.name||e.first_name,surname:e.surname||e.last_name,nickname:e.nickname,role:t,is_active:e.is_active!==void 0?e.is_active:!0,created_at:e.created_at,updated_at:e.updated_at};switch(t){case"student":return{...r,student_id:e.student_id,grade:e.grade,class:e.class,number:e.number,subjects:e.subjects||[]};case"teacher":return{...r,teacher_id:e.teacher_id,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,subjects:e.subjects||[]};case"admin":return{...r,admin_id:e.admin_id,permissions:e.permissions||["all"]};default:return r}},async studentLogin(e){console.log("Trying student login...");try{const t=await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e.username,password:e.password})}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.student,role:"student",response:t};throw new Error(r.message||"Student login failed")}catch(t){throw console.error("Student login error:",t),new Error(t.message||"Student login failed")}},async teacherLogin(e){console.log("Trying teacher login...");try{const t=await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.teacher,role:"teacher",response:t};throw new Error(r.message||"Teacher login failed")}catch(t){throw console.error("Teacher login error:",t),new Error(t.message||"Teacher login failed")}},async adminLogin(e){console.log("Trying admin login...");try{const t=await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.admin,role:"admin",response:t};throw new Error(r.message||"Admin login failed")}catch(t){throw console.error("Admin login error:",t),new Error(t.message||"Admin login failed")}},async login(e){const{username:t,password:r}=e;console.log("Attempting login with:",t,r);try{if(t==="admin"){const o=await this.adminLogin(e),l=await o.json();return await this.handleLoginResponse(o,"admin",l)}const n=await this.teacherLogin(e),s=await n.json();if(n.ok&&s.success)return await this.handleLoginResponse(n,"teacher",s);const a=await this.studentLogin(e),i=await a.json();return a.ok&&i.success?await this.handleLoginResponse(a,"student",i):(this.handleLoginFailure(),{success:!1,message:"Login failed. Please check your credentials and try again."})}catch(n){return console.error("Login error:",n),this.handleLoginFailure(),{success:!1,message:n.message||"Login failed"}}},async handleLoginResponse(e,t,r){if(e.ok&&r.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),this.handleLoginFailure(),{success:!1,message:"JWT system not available"};if(r.accessToken&&r.role)try{window.tokenManager.setTokens(r.accessToken,r.role),window.roleBasedLoader.setupAccessAfterLogin()}catch(n){return console.error("[ERROR] Failed to initialize JWT system:",n),this.handleLoginFailure(),{success:!1,message:"Failed to initialize JWT system"}}return this.resetLoginForm(),await this.handlePostLoginActions(r,t),{success:!0,data:r,role:t}}return{success:!1,message:"Login failed"}},async handlePostLoginActions(e,t){console.log(`Handling post-login actions for role: ${t}`);try{switch(t){case"student":e.student&&(this.populateStudentInfo(e.student),window.loadStudentData&&await window.loadStudentData());break;case"teacher":e.teacher&&(this.populateTeacherInfo(e.teacher),window.loadTeacherData&&await window.loadTeacherData());break;case"admin":e.admin&&window.loadAdminData&&await window.loadAdminData();break;default:console.warn(`Unknown role for post-login actions: ${t}`)}}catch(r){console.error("Error in post-login actions:",r)}},handleLoginFailure(){console.log("All login attempts failed"),this.resetLoginForm(),window.showNotification&&window.showNotification("Login failed. Please check your credentials and try again.","error")},resetLoginForm(){const e=document.getElementById("unifiedLoginForm");if(e){e.querySelectorAll("input").forEach(n=>{n.disabled=!1,n.style.opacity="1",n.style.cursor="text",n.removeAttribute("readonly"),n.style.pointerEvents="auto"});const r=e.querySelector('button[type="submit"]');r&&(r.disabled=!1,r.style.opacity="1",r.style.cursor="pointer",r.style.pointerEvents="auto",r.innerHTML="Login"),e.classList.remove("test-submitting","disabled"),e.style.pointerEvents="auto",console.log("Login form reset successfully - all inputs re-enabled")}},async logout(){console.log(" Logout initiated...");try{return window.tokenManager&&window.tokenManager.logout(),window.roleBasedLoader&&window.roleBasedLoader.reloadRoleAccess(),window.clearTestLocalStorage&&window.clearTestLocalStorage(),this.resetInterfaceAfterSessionClear(),console.log(" Logout completed - user session cleared, test data cleared, and interface reset"),{success:!0}}catch(e){return console.error("Logout error:",e),this.resetInterfaceAfterSessionClear(),{success:!0}}},resetInterfaceAfterSessionClear(){try{window.forceLogout=!0,window.preventAutoLogin=!0,window.isClearingSession=!0,window.forceLogoutComplete=!0,document.querySelectorAll(".section").forEach(s=>{s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0"}),document.querySelectorAll('[id$="-cabinet"], [id$="-container"], [id*="cabinet"], [id*="container"]').forEach(s=>{s.id&&s.id!=="login-section"&&(s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0")}),document.body.classList.remove("student-logged-in","teacher-logged-in","admin-logged-in"),document.body.classList.add("force-logout");const r=document.getElementById("login-section");r&&(r.classList.add("active"),r.style.display="block",r.style.visibility="visible",r.style.opacity="1"),document.querySelectorAll("input, select, textarea").forEach(s=>{s.type!=="hidden"&&(s.value="",s.checked=!1)}),console.log(" Interface reset to login state")}catch(e){console.error("Error resetting interface:",e),localStorage.clear(),sessionStorage.clear(),window.location.reload()}},async changePassword(e){try{return{success:!0,message:(await sa.post("/auth/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword})).data.message}}catch(t){throw new Error(t.response?.data?.message||"Password change failed")}},async verifyToken(e){try{const t=await sa.get("/auth/verify",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,valid:t.data.valid,user:t.data.user}}catch(t){return{success:!1,valid:!1,error:t.message}}},async refreshToken(e){try{const t=await sa.post("/auth/refresh",{refreshToken:e});return{success:!0,token:t.data.token,refreshToken:t.data.refreshToken}}catch(t){throw new Error(t.response?.data?.message||"Token refresh failed")}},async getUserProfile(){try{return{success:!0,user:(await sa.get("/auth/profile")).data.user}}catch(e){throw new Error(e.response?.data?.message||"Failed to get user profile")}},async updateUserProfile(e){try{return{success:!0,user:(await sa.put("/auth/profile",e)).data.user}}catch(t){throw new Error(t.response?.data?.message||"Failed to update user profile")}},populateStudentInfo(e){console.log("=== populateStudentInfo called ==="),console.log("Student object:",e);const t=document.getElementById("studentName");if(t){const s=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=s,console.log("Set student name to:",s)}const r=document.getElementById("studentGrade");r&&(r.textContent=e?.grade||"",console.log("Set student grade to:",e?.grade));const n=document.getElementById("studentClass");n&&(n.textContent=e?.class||"",console.log("Set student class to:",e?.class)),console.log("Student info populated successfully")},populateTeacherInfo(e){console.log("=== populateTeacherInfo called ==="),console.log("Teacher object:",e);const t=document.getElementById("teacherName");if(t){const n=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=n,console.log("Set teacher name to:",n)}const r=document.getElementById("teacherUsername");r&&(r.textContent=e?.username||"",console.log("Set teacher username to:",e?.username)),console.log("Teacher info populated successfully")},getCurrentTeacherId(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.sub?e.role==="teacher"?(console.log(`[DEBUG] Found teacher ID from JWT: ${e.sub}`),e.sub):(console.warn(`[WARN] Unsupported role for teacher function: ${e.role}`),null):(console.warn("[WARN] No teacher ID found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher ID from JWT:",e),null}},getCurrentAdmin(){const e=window.tokenManager?.getToken();if(!e)return null;const t=window.tokenManager.decodeToken(e);if(!t||t.role!=="admin")throw new Error("getCurrentAdmin() called by non-admin user");return{id:t.sub,username:t.username,role:t.role}},getCurrentTeacherUsername(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.username?(console.log(`[DEBUG] Found teacher username from JWT: ${e.username}`),e.username):(console.warn("[WARN] No teacher username found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher username from JWT:",e),null}},isAdmin(){try{const e=window.tokenManager?.getToken();if(!e)return!1;const t=window.tokenManager.decodeToken(e);return t&&t.role==="admin"}catch(e){return console.error("[ERROR] Error checking admin status:",e),!1}},getCurrentAdminId(){try{const e=this.getCurrentAdmin();return e?e.id:null}catch(e){return console.error("[ERROR] Error getting admin ID:",e),null}}},Ide=()=>{const e=hl(),{login:t,setUserData:r,isAuthenticated:n,user:s}=Ps(),[a,i]=_.useState({username:"",password:""}),[o,l]=_.useState(!1),[u,d]=_.useState(""),[f,h]=_.useState([]),[g,x]=_.useState(!1);_.useEffect(()=>{y()},[]);const y=_.useCallback(async()=>{console.log("Checking for existing JWT session...");try{(window.forceLogout||window.preventAutoLogin)&&(window.forceLogout=!1,window.preventAutoLogin=!1)}catch{}if(window.tokenManager)if(await window.tokenManager.isAuthenticated()){console.log("JWT session valid, checking user role...");try{const G=await window.tokenManager.getAccessToken(),X=window.tokenManager.decodeToken(G);X&&X.role?console.log("User role from JWT:",X.role):console.log("No valid role found in JWT, showing login")}catch(G){console.error("Error decoding JWT token:",G)}}else console.log("No valid JWT session found, showing login");else console.log("No tokenManager found, showing login")},[]),v=_.useCallback(async L=>{if(L.preventDefault(),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),j("Please wait for the logout process to complete.","warning");return}const{username:G,password:X}=a;if(!G||!X){d("Please enter both username and password");return}l(!0),d("");try{let se,Q;G==="admin"?(se=await O5.adminLogin({username:G,password:X}),Q=Ro.ADMIN):/^\d+$/.test(G)?(se=await O5.studentLogin({username:G,password:X}),Q=Ro.STUDENT):(se=await O5.teacherLogin({username:G,password:X}),Q=Ro.TEACHER);let re,B;if(se.response?(re=se,B=se.response):(re=await se.json(),B=se),await T(B,Q,re)){j("Login successful!","success");try{if("credentials"in navigator&&window.PasswordCredential&&a?.username&&a?.password){const V=new window.PasswordCredential({id:String(a.username),password:String(a.password)});await navigator.credentials.store(V)}}catch{}try{window.forceLogout=!1,window.preventAutoLogin=!1}catch{}}}catch(se){console.error("Login error:",se),d("Invalid username or password")}finally{l(!1)}},[a]),T=_.useCallback(async(L,G,X)=>{if(L.ok&&X.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),P(),!1;try{X.token&&(window.tokenManager.setTokens(X.token,G),X.refreshToken&&window.tokenManager.setRefreshToken(X.refreshToken),console.log("JWT token stored successfully"));const se={...X.data,...X,role:G};return r(se),await k(se),!0}catch(se){return console.error("Error handling login response:",se),P(se),!1}}else return console.error("Login failed:",X.error||"Unknown error"),d(X.error||"Login failed. Please check your credentials."),!1},[t]),k=_.useCallback(async L=>{if(console.log("Handling post-login actions for role:",L.role),g){console.log(" Post-login already handled, skipping");return}x(!0);try{switch(L.role){case Ro.STUDENT:await b(L),e("/student");break;case Ro.TEACHER:await E(L),e("/teacher");break;case Ro.ADMIN:await N(L),e("/admin");break;default:console.error("Unknown user role:",L.role),P()}}catch(G){console.error("Error in post-login actions:",G),P(G)}},[e,g]);_.useEffect(()=>{n||x(!1)},[n]);const b=_.useCallback(async L=>{console.log("Populating student info:",L)},[]),E=_.useCallback(async L=>{console.log("Populating teacher info:",L)},[]),N=_.useCallback(async L=>{console.log("Populating admin info:",L)},[]),P=_.useCallback((L=null)=>{console.error("Login failure:",L),d("Login failed. Please check your credentials and try again."),M()},[]),M=_.useCallback(()=>{i({username:"",password:""}),d(""),l(!1)},[]),j=_.useCallback((L,G)=>{const X={id:Date.now(),message:L,type:G,timestamp:new Date};h(se=>[...se,X]),setTimeout(()=>{h(se=>se.filter(Q=>Q.id!==X.id))},Km.NOTIFICATION_DURATION)},[]),A=_.useCallback(L=>{const{name:G,value:X}=L.target;i(se=>({...se,[G]:X})),u&&d("")},[u]),D=_.useCallback(L=>{L.key==="Enter"&&!o&&v(L)},[v,o]);return c.jsxs(gt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsxs(gt.div,{className:"w-full max-w-md",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsxs(gt.div,{className:"text-center mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsx(gt.div,{className:"flex justify-center mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring"},children:c.jsx("img",{src:"/pics/logo_mws.png",alt:"MWS Logo",className:"h-16 w-16 object-contain"})}),c.jsx(gt.h1,{className:"text-3xl font-bold text-gray-900 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.3},children:"Mathayom Watsing School"}),c.jsx(gt.p,{className:"text-lg text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.3},children:"Test Management System"})]}),c.jsxs(gt.div,{className:"bg-white rounded-xl shadow-2xl p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,duration:.5,type:"spring"},children:[c.jsx(gt.h2,{className:"text-2xl font-semibold text-gray-900 text-center mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"Login"}),c.jsxs("form",{onSubmit:v,className:"space-y-6",children:[c.jsxs(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9,duration:.3},children:[c.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),c.jsx(gt.input,{type:"text",id:"username",name:"username",value:a.username,onChange:A,onKeyDown:D,placeholder:"Enter your username",required:!0,autoComplete:"username",autoCapitalize:"none",spellCheck:!1,disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),c.jsxs(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.3},children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),c.jsx(gt.input,{type:"password",id:"password",name:"password",value:a.password,onChange:A,onKeyDown:D,placeholder:"Enter your password",required:!0,autoComplete:"current-password",disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),c.jsx(il,{children:u&&c.jsx(gt.div,{id:"error-message",className:"bg-red-50 border border-red-200 rounded-lg p-3",role:"alert","aria-live":"polite",initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.3},children:c.jsx("p",{className:"text-sm text-red-600",children:u})})}),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1,duration:.3},children:c.jsx(ot,{type:"submit",variant:"primary",size:"lg",disabled:o,className:"w-full",children:o?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",className:"mr-2"}),"Logging in..."]}):"Login"})})]})]})]}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:c.jsx(il,{children:f.map(L=>c.jsx(gt.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,type:"spring"},children:c.jsx(iu,{type:L.type,message:L.message,onClose:()=>h(G=>G.filter(X=>X.id!==L.id))})},L.id))})})]})},Os={async getStudentData(){console.log("getStudentData called - loading student subjects");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-subjects")).json();if(t.success)return console.log("Student data loaded successfully:",t.subjects),t.subjects;throw new Error(t.error||"Failed to load student data")}catch(e){throw console.error("Error loading student data:",e),e}},getStudentSubjects(e){return console.log("getStudentSubjects called with subjects:",e),e.map(t=>({id:t.id||t.subject_id,name:t.subject,grade:t.grade,class:t.class,testResults:t.test_results||[]}))},async getTeacherData(){console.log("getTeacherData called - loading teacher subjects");try{const e=await this.getCurrentTeacherId();if(!e)throw new Error("No valid teacher session found");const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-subjects")).json();if(r.success)return console.log("Teacher data loaded successfully:",r.subjects),{teacher_id:e,subjects:r.subjects,hasSubjects:r.subjects.length>0};throw new Error(r.error||"Failed to load teacher data")}catch(e){throw console.error("Error loading teacher data:",e),e}},getTeacherSubjects(e){return console.log("getTeacherSubjects called with subjects:",e),e.map(t=>{let r=[];return t.classes&&Array.isArray(t.classes)&&(r=t.classes.map(n=>({grade:n.grade,class:n.class,className:n.class}))),{id:t.subject_id,name:t.subject,classes:r,assignments:t.assignments||[],description:t.description||""}})},getGradeButtons(){return console.log("getGradeButtons called"),["M1","M2","M3","M4","M5","M6"].map(t=>({id:t,name:t,classes:this.generateClassButtons(t)}))},generateClassButtons(e){const t=[];for(let r=1;r<=10;r++)t.push({id:`${e}_${r}`,name:`${e}/${r}`,grade:e,class:r});return t},async getAdminData(){console.log("getAdminData called - loading admin data");try{if(!await this.getCurrentAdminId())throw new Error("No valid admin session found");const[t,r,n]=await Promise.allSettled([this.getAllTeachers(),this.getAllSubjects(),this.getAllUsers()]);return{teachers:t.status==="fulfilled"?t.value:[],subjects:r.status==="fulfilled"?r.value:[],users:n.status==="fulfilled"?n.value:[],loadedAt:new Date().toISOString()}}catch(e){throw console.error("Error loading admin data:",e),e}},async saveTeacherSubjects(e){console.log("saveTeacherSubjects called with subjects:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-teacher-subjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subjects:e})})).json();if(r.success)return console.log("Teacher subjects saved successfully"),r;throw new Error(r.error||"Failed to save teacher subjects")}catch(t){throw console.error("Error saving teacher subjects:",t),t}},async deleteTeacherSubject(e){console.log("deleteTeacherSubject called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/delete-teacher-subject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher subject assignment deleted successfully"),r;throw new Error(r.error||"Failed to delete teacher subject assignment")}catch(t){throw console.error("Error deleting teacher subject assignment:",t),t}},async getSubjectsDropdown(){console.log("getSubjectsDropdown called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("Subjects dropdown data loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,value:r.subject_name}));throw new Error(t.error||"Failed to load subjects dropdown")}catch(e){throw console.error("Error loading subjects dropdown:",e),e}},async getGradesAndClasses(){console.log("getGradesAndClasses called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-grades-classes")).json();if(t.success)return console.log("Grades and classes loaded successfully"),t.data;throw new Error(t.message||"Failed to load grades and classes")}catch(e){throw console.error("Error loading grades and classes:",e),e}},async saveSubjectClasses(e,t){console.log("saveSubjectClasses called with subjectId:",e,"classes:",t);try{const r=await this.getCurrentTeacherId();if(!r)throw new Error("No valid teacher session found");const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-subject-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacher_id:r,subject_id:e,classes:t})})).json();if(s.success)return console.log("Subject classes saved successfully"),s;throw new Error(s.error||"Failed to save subject classes")}catch(r){throw console.error("Error saving subject classes:",r),r}},async getAllSubjects(){console.log("getAllSubjects called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("All subjects loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,description:r.description||"",created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all subjects")}catch(e){throw console.error("Error loading all subjects:",e),e}},async getSubjectsForSelection(){console.log("getSubjectsForSelection called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-subjects")).json();if(t.success)return console.log("Subjects for selection loaded successfully"),t.subjects;throw new Error(t.message||"Failed to load subjects for selection")}catch(e){throw console.error("Error loading subjects for selection:",e),e}},async addAcademicYear(e){console.log("addAcademicYear called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/add-academic-year",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Academic year added successfully"),r;throw new Error(r.error||"Failed to add academic year")}catch(t){throw console.error("Error adding academic year:",t),t}},async getAllUsers(){console.log("getAllUsers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-users")).json();if(t.success)return console.log("All users loaded successfully"),t.users.map(r=>({id:r.id,student_id:r.student_id,grade:r.grade,class:r.class,number:r.number,name:r.name,surname:r.surname,nickname:r.nickname,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all users")}catch(e){throw console.error("Error loading all users:",e),e}},async getAllTeachers(){console.log("getAllTeachers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-teachers")).json();if(t.success)return console.log("All teachers loaded successfully"),t.teachers.map(r=>({id:r.id,teacher_id:r.teacher_id,username:r.username,name:r.name,surname:r.surname,email:r.email,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all teachers")}catch(e){throw console.error("Error loading all teachers:",e),e}},async createUser(e){console.log("createUser called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("User created successfully"),r;throw new Error(r.error||"Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}},async updateUser(e,t){console.log("updateUser called with userId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-user/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("User updated successfully"),n;throw new Error(n.error||"Failed to update user")}catch(r){throw console.error("Error updating user:",r),r}},async createTeacher(e){console.log("createTeacher called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-teacher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher created successfully"),r;throw new Error(r.error||"Failed to create teacher")}catch(t){throw console.error("Error creating teacher:",t),t}},async updateTeacher(e,t){console.log("updateTeacher called with teacherId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-teacher/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("Teacher updated successfully"),n;throw new Error(n.error||"Failed to update teacher")}catch(r){throw console.error("Error updating teacher:",r),r}},async updateStudentInfo(e){console.log("updateStudentInfo called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-student-info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Student info updated successfully"),r;throw new Error(r.error||"Failed to update student info")}catch(t){throw console.error("Error updating student info:",t),t}},async changePassword(e){console.log("changePassword called");let t;if(e.studentId)t="/.netlify/functions/change-student-password";else if(e.username)t="/.netlify/functions/change-teacher-password";else throw new Error("Invalid password data: missing studentId or username");try{const n=await(await window.tokenManager.makeAuthenticatedRequest(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(n.success)return console.log("Password changed successfully"),n;throw new Error(n.error||"Failed to change password")}catch(r){throw console.error("Error changing password:",r),r}},async getCurrentTeacherId(){try{const{SecureToken:e}=await Za(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>e4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.teacher_id||r.sub||null}catch(e){return console.error("Error getting current teacher ID:",e),null}},async getCurrentAdminId(){try{const{SecureToken:e}=await Za(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>e4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.admin_id||r.sub||null}catch(e){return console.error("Error getting current admin ID:",e),null}}},QW=_.createContext(),ZW=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState([]),[a,i]=_.useState([]),[o,l]=_.useState([]),[u,d]=_.useState([]),[f,h]=_.useState([]),[g,x]=_.useState([]),[y,v]=_.useState([]),[T,k]=_.useState(!1),[b,E]=_.useState(null),[N,P]=_.useState(!1),[M,j]=_.useState(!1),[A,D]=_.useState(!1),[L,G]=_.useState(null),[X,se]=_.useState(null),[Q,re]=_.useState(null),B=_.useCallback(async()=>{try{k(!0),E(null);const Fe=`student_subjects_${t?.student_id||t?.id||""}`;console.log(" UserContext: Checking cache for key:",Fe);const Be=fa(Fe);if(Be){console.log(" UserContext: Cache HIT! Using cached student data"),s(Be),V(Be);return}console.log(" UserContext: Cache MISS! Fetching from API");const He=await Os.getStudentData();if(He)s(He),V(He),console.log(" UserContext: Caching student data with key:",Fe),qs(Fe,He,da.student_subjects);else throw new Error("No subjects data received")}catch(ye){E(ye.message||"Failed to load student data"),console.error("Error loading student data:",ye)}finally{k(!1)}},[t?.student_id,t?.id]),V=ye=>{console.log("Displaying student subjects:",ye),s(ye)},R=_.useCallback(async()=>{try{if(k(!0),E(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid teacher session found in loadTeacherData, redirecting to login"),E("No valid teacher session found");return}const Fe=`teacher_subjects_${t?.teacher_id||t?.id||""}`,Be=fa(Fe);if(Be){s(Be),Be.length===0?Xt():H(Be);return}const He=await Os.getTeacherSubjects();if(He.success)s(He.subjects),qs(Fe,He.subjects,da.teacher_subjects),He.subjects.length===0?Xt():H(He.subjects);else throw new Error(He.message||"Failed to load teacher data")}catch(ye){E(ye.message||"Failed to load teacher data"),console.error("Error loading teacher data:",ye)}finally{k(!1)}},[t?.teacher_id,t?.id]),H=ye=>{console.log("Showing main cabinet with subjects:",ye),s(ye)},z=ye=>{console.log("Displaying grade buttons:",ye),l(ye)},I=async()=>{try{if(k(!0),E(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid admin session found in loadAdminData, redirecting to login"),E("No valid admin session found");return}await Promise.all([pe(),vt(),oe()])}catch(ye){E(ye.message||"Failed to load admin data"),console.error("Error loading admin data:",ye)}finally{k(!1)}},W=ye=>{console.log(" populateStudentInfoDirectly called with:",ye);try{r(ye),console.log(" Set student profile:",ye)}catch(Fe){console.error("Error populating student info:",Fe)}},K=ye=>{console.log("=== populateStudentInfo called ==="),r(ye)},ee=ye=>{console.log("=== populateTeacherInfo called ==="),r(ye)},oe=_.useCallback(async()=>{try{k(!0);const ye="admin_users_",Fe=fa(ye);if(Fe){d(Fe),Z(Fe);return}const Be=await Os.getAllUsers();if(Be.success)d(Be.users),Z(Be.users),qs(ye,Be.users,da.admin_users);else throw new Error(Be.message||"Failed to load users")}catch(ye){E(ye.message||"Failed to load users"),console.error("Error loading users:",ye)}finally{k(!1)}},[]),Z=ye=>{console.log("Displaying all users:",ye),d(ye)},le=(ye,Fe)=>{console.log("Displaying users table:",ye,Fe),d(ye)},ue=()=>{console.log("Toggling users content")},de=()=>{console.log("Showing add user form"),P(!0)},Te=()=>{console.log("Hiding add user form"),P(!1)},ie=ye=>{console.log("Editing user row:",ye);const Fe=u.find(Be=>Be.id===ye);G(Fe)},pe=_.useCallback(async()=>{try{const ye="admin_teachers_",Fe=fa(ye);if(Fe){h(Fe),Ae(Fe);return}const Be=await Os.getAllTeachers();if(Be.success)h(Be.teachers),Ae(Be.teachers),qs(ye,Be.teachers,da.admin_teachers);else throw new Error(Be.message||"Failed to load teachers")}catch(ye){E(ye.message||"Failed to load teachers"),console.error("Error loading teachers:",ye)}},[]),Ae=ye=>{console.log("Displaying all teachers:",ye),h(ye)},Me=(ye,Fe)=>{console.log("Displaying teachers table:",ye,Fe),h(ye)},Je=()=>{console.log("Toggling teachers content")},Ve=()=>{console.log("Showing add teacher form"),j(!0)},Dt=()=>{console.log("Hiding add teacher form"),j(!1)},lt=ye=>{console.log("Editing teacher:",ye);const Fe=f.find(Be=>Be.id===ye);se(Fe)},At=ye=>{console.log("Editing teacher row:",ye);const Fe=f.find(Be=>Be.id===ye);se(Fe)},vt=_.useCallback(async()=>{try{const ye="admin_subjects_",Fe=fa(ye);if(Fe){x(Fe),ct(Fe);return}const Be=await Os.getAllSubjects();if(Be.success)x(Be.subjects),ct(Be.subjects),qs(ye,Be.subjects,da.admin_subjects);else throw new Error(Be.message||"Failed to load subjects")}catch(ye){E(ye.message||"Failed to load subjects"),console.error("Error loading subjects:",ye)}},[]),ct=ye=>{console.log("Displaying all subjects:",ye),x(ye)},bt=(ye,Fe)=>{console.log("Displaying subjects table:",ye,Fe),x(ye)},Ut=()=>{console.log("Toggling subjects content")},Bt=()=>{console.log("Showing add subject form"),D(!0)},Vt=()=>{console.log("Hiding add subject form"),D(!1)},We=ye=>{console.log("Editing subject row:",ye);const Fe=g.find(Be=>Be.id===ye);re(Fe)},Ue=ye=>{console.log("Displaying academic year:",ye),v(ye)},tt=()=>{console.log("Showing add academic year form")},nt=()=>{console.log("Hiding add academic year form")},at=ye=>{console.log("Handling add academic year:",ye)},It=()=>{console.log("Toggling academic year content")},Lt=()=>{console.log("Showing academic year editor")},Xt=()=>{console.log("Showing subject selection")},vr=()=>{console.log("Showing main cabinet")},br=ye=>{r(Fe=>({...Fe,...ye}))},Dr=()=>{r(null),s([]),i([]),l([]),d([]),h([]),x([]),v([]),E(null)},Sr=_.useCallback(ye=>{Dr(),ye&&WT(ye)},[]),pr={userProfile:t,userSubjects:n,userClasses:a,userGrades:o,allUsers:u,allTeachers:f,allSubjects:g,academicYears:y,isLoading:T,error:b,showUserForm:N,showTeacherForm:M,showSubjectForm:A,editingUser:L,editingTeacher:X,editingSubject:Q,loadStudentData:B,displayStudentSubjects:V,populateStudentInfoDirectly:W,populateStudentInfo:K,loadTeacherData:R,showMainCabinetWithSubjects:H,displayGradeButtons:z,populateTeacherInfo:ee,showSubjectSelection:Xt,showMainCabinet:vr,loadAdminData:I,getAllUsers:oe,displayAllUsers:Z,displayUsersTable:le,toggleUsersContent:ue,showAddUserForm:de,hideAddUserForm:Te,editUserRow:ie,loadAllTeachers:pe,displayAllTeachers:Ae,displayTeachersTable:Me,toggleTeachersContent:Je,showAddTeacherForm:Ve,hideAddTeacherForm:Dt,editTeacher:lt,editTeacherRow:At,loadAllSubjects:vt,displayAllSubjects:ct,displaySubjectsTable:bt,toggleSubjectsContent:Ut,showAddSubjectForm:Bt,hideAddSubjectForm:Vt,editSubjectRow:We,displayAcademicYear:Ue,showAddAcademicYearForm:tt,hideAddAcademicYearForm:nt,handleAddAcademicYear:at,toggleAcademicYearContent:It,showAcademicYearEditor:Lt,updateUserProfile:br,clearUserData:Dr,clearUserDataWithCache:Sr,setUserProfile:r,setUserSubjects:s,setUserClasses:i,setUserGrades:l,setAllUsers:d,setAllTeachers:h,setAllSubjects:x,setAcademicYears:v,setError:E};return c.jsx(QW.Provider,{value:pr,children:e})},a3=()=>{const e=_.useContext(QW);if(!e)throw new Error("useUser must be used within a UserProvider");return e},Ud={STUDENT_LOGIN:"/.netlify/functions/student-login",TEACHER_LOGIN:"/.netlify/functions/teacher-login",ADMIN_LOGIN:"/.netlify/functions/admin-login",CHANGE_PASSWORD:"/.netlify/functions/change-password",GET_TEST_QUESTIONS:"/.netlify/functions/get-test-questions",SUBMIT_MULTIPLE_CHOICE_TEST:"/.netlify/functions/submit-multiple-choice-test",SUBMIT_TRUE_FALSE_TEST:"/.netlify/functions/submit-true-false-test",SUBMIT_INPUT_TEST:"/.netlify/functions/submit-input-test",SUBMIT_MATCHING_TEST:"/.netlify/functions/submit-matching-test",SUBMIT_DRAWING_TEST:"/.netlify/functions/submit-drawing-test",GET_STUDENT_SUBJECTS:"/.netlify/functions/get-student-subjects",GET_TEACHER_SUBJECTS:"/.netlify/functions/get-teacher-subjects",GET_ALL_USERS:"/.netlify/functions/get-all-users",GET_ALL_TEACHERS:"/.netlify/functions/get-all-teachers",GET_ALL_SUBJECTS:"/.netlify/functions/get-all-subjects",GET_ACADEMIC_YEAR:"/.netlify/functions/get-academic-year",SAVE_MULTIPLE_CHOICE_TEST:"/.netlify/functions/save-multiple-choice-test",SAVE_TRUE_FALSE_TEST:"/.netlify/functions/save-true-false-test",SAVE_INPUT_TEST:"/.netlify/functions/save-input-test",SAVE_MATCHING_TEST:"/.netlify/functions/save-matching-test",SAVE_DRAWING_TEST:"/.netlify/functions/save-drawing-test",UPDATE_DRAWING_TEST_SCORE:"/.netlify/functions/update-drawing-test-score",UPDATE_SPEAKING_TEST_SCORE:"/.netlify/functions/update-speaking-test-score",UPDATE_TEST_SCORE:"/.netlify/functions/update-test-score",ASSIGN_TEST_TO_CLASSES:"/.netlify/functions/assign-test-to-classes",GET_TEACHER_ACTIVE_TESTS:"/.netlify/functions/get-teacher-active-tests",GET_STUDENT_ACTIVE_TESTS:"/.netlify/functions/get-student-active-tests"},ts={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false",INPUT:"input",MATCHING:"matching_type",WORD_MATCHING:"word_matching",DRAWING:"drawing",FILL_BLANKS:"fill_blanks"},Ro={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"};Array.from({length:10},(e,t)=>t+1);const Km={NOTIFICATION_DURATION:3e3},Mf=(e,t,r)=>{if(!e||!Array.isArray(e)||e.length===0)return{score:0,total:0,percentage:0};let n=0;return e.forEach((s,a)=>{const i=Array.isArray(t)?t[a]:t[String(s.question_id||s.id||a)];i!=null&&Hp(s,i,r)&&n++}),{score:n,total:e.length,percentage:Math.round(n/e.length*100)}},Tv=(e,t)=>{console.log(" Getting correct answer for question:",e,"testType:",t);let r="";switch(t){case ts.TRUE_FALSE:r=e.correct_answer?"true":"false",console.log(" TRUE_FALSE correct_answer from question:",r,typeof r);break;case ts.MULTIPLE_CHOICE:const n=e.correct_answer.charCodeAt(0)-65,s=`option_${String.fromCharCode(97+n)}`,a=e[s];a?r=a:r=`Option ${e.correct_answer}`;break;case ts.INPUT:e.correct_answers&&Array.isArray(e.correct_answers)?r=e.correct_answers.join(", "):r=e.correct_answer||"Unknown";break;case ts.MATCHING:r=e.correct_answer||e.answer;break;case ts.WORD_MATCHING:r=e.correct_answer||e.answer;break;case ts.DRAWING:r="Drawing required";break;case ts.FILL_BLANKS:e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?r=e.correct_answers[0]:r=e.correct_answer||"Unknown";break;default:r="Unknown"}return console.log(" Correct answer:",r),r},Hp=(e,t,r)=>{if(console.log("[DEBUG] checkAnswerCorrectness called for question:",e,"studentAnswer:",t,"testType:",r),!t||t==="")return console.log("[DEBUG] No student answer provided"),!1;let n=!1;switch(r){case ts.TRUE_FALSE:n=t.toLowerCase()==="true"===e.correct_answer;break;case ts.MULTIPLE_CHOICE:let a="";if(typeof t=="string"){const o=t.trim();if(/^[a-z]$/i.test(o))a=o.toUpperCase();else if(/^\d+$/.test(o)){const l=parseInt(o,10),u=l>=0?l:NaN;Number.isNaN(u)||(a=String.fromCharCode(65+u))}}else if(typeof t=="number"){const o=t;Number.isNaN(o)||(a=String.fromCharCode(65+o))}n=a!==""&&a===String(e.correct_answer||"").toUpperCase();break;case ts.INPUT:if(e.correct_answers&&Array.isArray(e.correct_answers)){const o=t.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();n=e.correct_answers.some(l=>{const u=l.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1})}else{const o=t.toLowerCase().trim(),l=e.correct_answer.toLowerCase().trim();o===l?n=!0:l&&o.includes(l)?l.length===1?n=o.startsWith(l)||o.endsWith(l):n=!0:n=!1}break;case ts.MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case ts.WORD_MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case ts.DRAWING:console.warn("Drawing tests should not be auto-scored!"),n=!1;break;case ts.FILL_BLANKS:const i=e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?e.correct_answers[0]:e.correct_answer;if(i&&t){let o="";if(typeof t=="string"){const l=t.trim();if(/^[a-z]$/i.test(l))o=l.toUpperCase();else if(/^\d+$/.test(l)){const u=parseInt(l,10),d=u>=0?u:NaN;Number.isNaN(d)||(o=String.fromCharCode(65+d))}}else if(typeof t=="number"){const l=t;Number.isNaN(l)||(o=String.fromCharCode(65+l))}n=o!==""&&o===String(i||"").toUpperCase()}break;default:console.warn(`[WARN] Unknown test type for answer checking: ${r}`),n=!1}return console.log(`[DEBUG] Answer correctness: ${n}`),n};class Rde{constructor(){this.academicCalendar=null,this.loaded=!1}async loadAcademicCalendar(){if(this.loaded)return this.academicCalendar;try{const t=async n=>{const s=await fetch(n,{headers:{Accept:"application/json"},credentials:"include"}),a=s.headers&&s.headers.get&&s.headers.get("content-type")||"";if(!s.ok)throw new Error(`HTTP ${s.status}`);if(!a.includes("application/json"))throw new Error("Non-JSON response");return await s.json()};let r=null;if(r=await t("/academic_year.json"),!Array.isArray(r))throw new Error("Invalid academic calendar format");return this.academicCalendar=r,this.loaded=!0,console.log(" Academic calendar loaded:",this.academicCalendar.length,"terms"),this.academicCalendar}catch(t){return console.error(" Error loading academic calendar:",t),null}}getCurrentTerm(){if(!this.academicCalendar)return null;const t=new Date;return this.academicCalendar.find(n=>{const s=new Date(n.start_date),a=new Date(n.end_date);return t>=s&&t<=a})}getCurrentSemester(){const t=this.getCurrentTerm();if(!t)return null;const r=t.semester,n=this.academicCalendar.filter(s=>s.semester===r&&s.academic_year===t.academic_year);return{semester:r,currentTerm:t,allTerms:n}}getCurrentAcademicPeriodId(){return this.getCurrentTerm()?.id||null}getSemesterTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.semester===t):[]}getAcademicYearTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.academic_year===t):[]}getCurrentSemesterWithTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,allTerms:s,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getCurrentSemesterTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getTermById(t){return this.academicCalendar?this.academicCalendar.find(r=>r.id===t):null}isCurrentTerm(t){return this.getCurrentTerm()?.id===t}getAcademicYears(){return this.academicCalendar?[...new Set(this.academicCalendar.map(r=>r.academic_year))].sort():[]}getAcademicYearSemesterTerms(t,r){return this.academicCalendar?this.academicCalendar.filter(n=>n.academic_year===t&&n.semester===r):[]}}const lu=new Rde,i3=Object.freeze(Object.defineProperty({__proto__:null,academicCalendarService:lu},Symbol.toStringTag,{value:"Module"})),Pn={async getTestInfo(e,t){console.log(`[DEBUG] getTestInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test info data received:",s),s.success)return console.log("[DEBUG] Test info retrieved successfully"),s.test_info;throw new Error(s.error||"Failed to get test info")}catch(r){throw console.error("[ERROR] Failed to get test info:",r),r}},async getTestQuestions(e,t){console.log(`[DEBUG] getTestQuestions called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions data received:",s),s.success)return console.log("[DEBUG] Test questions retrieved successfully"),s.questions;throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions:",r),r}},async getTestQuestionsWithInfo(e,t){console.log(`[DEBUG] getTestQuestionsWithInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions with info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions with info data received:",s),s.success)return console.log("[DEBUG] Test questions with info retrieved successfully"),{questions:s.questions,testInfo:s.test_info};throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions with info:",r),r}},async getActiveTests(){console.log("getActiveTests called - extracting studentId from JWT token");try{const e="/.netlify/functions/get-student-active-tests";console.log("[DEBUG] Fetching active tests from:",e);const t=await window.tokenManager.makeAuthenticatedRequest(e);if(console.log("[DEBUG] Response status:",t.status),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Active tests data received:",r),r.success)return console.log("[DEBUG] Active tests retrieved successfully"),r.tests;throw new Error(r.error||"Failed to get active tests")}catch(e){throw console.error("[ERROR] Failed to get active tests:",e),e}},async getTeacherTests(e=!1){console.log("getTeacherTests called - extracting teacherId from JWT token");try{const t="/.netlify/functions/get-teacher-active-tests",r=e?`${t}?ts=${Date.now()}`:t;console.log("[DEBUG] Fetching teacher tests from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Teacher tests data received:",s),s.success)return console.log("[DEBUG] Teacher tests retrieved successfully"),s.tests;throw new Error(s.error||"Failed to get teacher tests")}catch(t){throw console.error("[ERROR] Failed to get teacher tests:",t),t}},async submitTest(e,t,r,n={},s=null){console.log("Submitting test:",{testType:e,testId:t});try{if(Object.keys(r).length===0)throw new Error("Please answer at least one question before submitting.");let a;try{const E=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`)).json();if(E.success)a=E.test_info;else throw new Error("Failed to get test information")}catch(b){console.error("Error getting test info:",b);const E=await this.getTestQuestions(e,t);a={test_name:`Test ${t}`,num_questions:E.length}}const i=await this.getTestQuestions(e,t);let o,l;if(e==="drawing")o=null,l=null;else{const b=n?.answers_by_id?n.answers_by_id:r;o=Mf(i,b,e).score,l=a.num_questions}const u=this.transformAnswersForSubmission(r,e),d=a.teacher_id||null,f=a.subject_id||null,h=s?.student_id||s?.id||(window.tokenManager?.getCurrentUser?window.tokenManager.getCurrentUser()?.student_id||window.tokenManager.getCurrentUser()?.id:null);await lu.loadAcademicCalendar();const x=lu.getCurrentTerm()?.id;if(!x)throw new Error("No current academic period found");const y={test_id:t,test_name:a.test_name,test_type:e,teacher_id:d,subject_id:f,student_id:h,academic_period_id:x,answers:u,score:o,maxScore:l,time_taken:n.time_taken||null,started_at:n.started_at||null,submitted_at:n.submitted_at||new Date().toISOString(),caught_cheating:n.caught_cheating||!1,visibility_change_times:n.visibility_change_times||0,answers_by_id:n.answers_by_id||null,question_order:n.question_order||null,retest_assignment_id:n.retest_assignment_id||null,parent_test_id:n.parent_test_id||t};console.log(" testService retest_assignment_id:",n.retest_assignment_id),console.log(" testService timingData:",n),console.log(" testService commonData.retest_assignment_id:",y.retest_assignment_id);let v;switch(e){case"multiple_choice":v="/.netlify/functions/submit-multiple-choice-test";break;case"true_false":v="/.netlify/functions/submit-true-false-test";break;case"input":v="/.netlify/functions/submit-input-test";break;case"matching_type":v="/.netlify/functions/submit-matching-type-test";break;case"word_matching":v="/.netlify/functions/submit-word-matching-test";break;case"drawing":v="/.netlify/functions/submit-drawing-test";break;case"fill_blanks":v="/.netlify/functions/submit-fill-blanks-test";break;default:throw new Error(`Unsupported test type: ${e}`)}console.log("Submitting to:",v),console.log("Submission data:",y),console.log("Submission data JSON:",JSON.stringify(y,null,2)),console.log(" Final submission retest_assignment_id:",y.retest_assignment_id);const T=await window.tokenManager.makeAuthenticatedRequest(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!T.ok)throw new Error(`HTTP error! status: ${T.status}`);const k=await T.json();if(console.log("Test submission result:",k),k.success)return this.clearTestProgress(e,t),{success:!0,score:o,maxScore:l,result:k};throw new Error(k.error||"Failed to submit test")}catch(a){throw console.error("Error submitting test:",a),a}},async createTest(e){try{return(await sa.post("/tests/create",e)).data}catch(t){throw new Error(t.message||"Failed to create test")}},async updateTest(e,t,r){try{return(await sa.put(`/tests/${e}/${t}`,r)).data}catch(n){throw new Error(n.message||"Failed to update test")}},async deleteTest(e,t){try{return(await sa.delete(`/tests/${e}/${t}`)).data}catch(r){throw new Error(r.message||"Failed to delete test")}},async duplicateTest(e,t){try{return(await sa.post(`/tests/${e}/${t}/duplicate`)).data}catch(r){throw new Error(r.message||"Failed to duplicate test")}},async publishTest(e,t){try{return(await sa.post(`/tests/${e}/${t}/publish`)).data}catch(r){throw new Error(r.message||"Failed to publish test")}},async unpublishTest(e,t){try{return(await sa.post(`/tests/${e}/${t}/unpublish`)).data}catch(r){throw new Error(r.message||"Failed to unpublish test")}},async removeClassAssignment(e,t,r){try{return(await sa.delete(`/tests/${e}/${t}/assignments/${r}`)).data}catch(n){throw new Error(n.message||"Failed to remove class assignment")}},async getTestStatistics(e,t){try{return(await sa.get(`/tests/${e}/${t}/statistics`)).data}catch(r){throw new Error(r.message||"Failed to get test statistics")}},async exportTest(e,t,r="json"){try{return(await sa.get(`/tests/${e}/${t}/export?format=${r}`)).data}catch(n){throw new Error(n.message||"Failed to export test")}},async importTest(e,t){try{return(await sa.uploadFile(`/tests/import?type=${t}`,e)).data}catch(r){throw new Error(r.message||"Failed to import test")}},async getTestResults(e,t){try{return(await sa.get(`/tests/${e}/${t}/results`)).data}catch(r){throw new Error(r.message||"Failed to get test results")}},async getStudentTestResults(){try{console.log("[DEBUG] Fetching student test results from: /.netlify/functions/get-student-test-results");const e=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-test-results");if(console.log("[DEBUG] Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(console.log("[DEBUG] Student test results data received:",t),t.success)return console.log("[DEBUG] Student test results retrieved successfully"),t;throw new Error(t.error||"Failed to get student test results")}catch(e){throw console.error("[ERROR] Failed to get student test results:",e),new Error(e.message||"Failed to get student test results")}},async getClassResults(e,t,r){try{return(await sa.get(`/tests/class-results/${e}/${t}/${r}`)).data}catch(n){throw new Error(n.message||"Failed to get class results")}},async saveTestProgress(e,t,r){try{return(await sa.post(`/tests/${e}/${t}/progress`,{progress:r})).data}catch(n){throw new Error(n.message||"Failed to save test progress")}},async getTestProgress(e,t){try{return(await sa.get(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to get test progress")}},async clearTestProgress(e,t){try{return(await sa.delete(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to clear test progress")}},async validateTestData(e){try{return(await sa.post("/tests/validate",e)).data}catch(t){throw new Error(t.message||"Failed to validate test data")}},async getTestPreview(e,t){try{return(await sa.get(`/tests/${e}/${t}/preview`)).data}catch(r){throw new Error(r.message||"Failed to get test preview")}},isAnswerCorrect(e,t,r,n){switch(n){case"multiple_choice":return String.fromCharCode(65+parseInt(t))===r.correct_answer;case"true_false":return t.toLowerCase()==="true"===r.correct_answer;case"input":const i=r.correct_answers||[],o=t.toLowerCase().trim();return i.some(l=>{const u=l.toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1});case"matching_type":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"word_matching":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"drawing":return t&&t!=="No answer";default:return!1}},transformAnswersForSubmission(e,t){switch(t){case"multiple_choice":return e;case"true_false":return e;case"input":return e;case"matching_type":return e;case"word_matching":return e;case"drawing":if(Array.isArray(e)&&e.length>0)try{const r=e[0];return typeof r=="string"&&r.startsWith("[")?JSON.parse(r):e}catch(r){return console.warn("Failed to parse drawing answers:",r),e}return e;default:return e}},async markAssignmentCompleted(e){try{console.log(`[DEBUG] markAssignmentCompleted called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/mark-test-completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Mark assignment completed response:",r),r.success)return console.log(`Assignment ${e} marked as completed successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to mark assignment as completed")}catch(t){throw console.error("Error marking assignment completed:",t),t}},async activateAssignment(e){try{console.log(`[DEBUG] activateAssignment called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/activate-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Activate assignment response:",r),r.success)return console.log(`Assignment ${e} activated successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to activate assignment")}catch(t){throw console.error("Error activating assignment:",t),t}},clearTestProgress(e,t){try{const r=`test_progress_${e}_${t}`;localStorage.removeItem(r),console.log(`Test progress cleared for ${e}_${t}`)}catch(r){console.error("Error clearing test progress:",r)}},async saveMultipleChoiceTest(e){console.log("[DEBUG] saveMultipleChoiceTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-multiple-choice-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save multiple choice test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving multiple choice test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveTrueFalseTest(e){console.log("[DEBUG] saveTrueFalseTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-true-false-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save true/false test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving true/false test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveInputTest(e){console.log("[DEBUG] saveInputTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-input-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save input test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving input test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveMatchingTest(e){console.log("[DEBUG] saveMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"matching_type",num_questions:e.num_blocks})})).json();return console.log("[DEBUG] Save matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveWordMatchingTest(e){console.log("[DEBUG] saveWordMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"word_matching"})})).json();return console.log("[DEBUG] Save word matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving word matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveDrawingTest(e){console.log("[DEBUG] saveDrawingTest called with:",e);try{const t={...e,test_type:"drawing"},n=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();return console.log("[DEBUG] Save drawing test response:",n),n.success?{success:!0,data:{test_id:n.test_id}}:{success:!1,message:n.message||"Failed to save test"}}catch(t){return console.error("Error saving drawing test:",t),{success:!1,message:"Error saving test: "+t.message}}},async getDrawingTest(e){console.log("[DEBUG] getDrawingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-drawing-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get drawing test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting drawing test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitDrawingTest(e,t,r,n){console.log("[DEBUG] submitDrawingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-drawing-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit drawing test response:",a),a.success?{success:!0,data:a.data}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting drawing test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async updateDrawingTestScore(e,t,r){console.log("[DEBUG] updateDrawingTestScore called with:",{resultId:e,score:t,maxScore:r});try{const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-drawing-test-score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result_id:e,score:t,max_score:r})})).json();return console.log("[DEBUG] Update drawing test score response:",s),s.success?{success:!0,data:s.data}:{success:!1,message:s.message||"Failed to update score"}}catch(n){return console.error("Error updating drawing test score:",n),{success:!1,message:"Error updating score: "+n.message}}},async getWordMatchingTest(e){console.log("[DEBUG] getWordMatchingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-word-matching-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get word matching test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting word matching test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitWordMatchingTest(e,t,r,n){console.log("[DEBUG] submitWordMatchingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit word matching test response:",a),a.success?{success:!0,result:a.result}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting word matching test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async assignTestToClasses(e){console.log("[DEBUG] assignTestToClasses called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save test with assignments response:",r),r.success?{success:!0,message:"Test assigned successfully"}:{success:!1,message:r.message||"Failed to assign test"}}catch(t){return console.error("Error assigning test to classes:",t),{success:!1,message:"Error assigning test: "+t.message}}},async removeClassAssignment(e){console.log("[DEBUG] removeClassAssignment called with assignmentId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/remove-class-assignment?assignment_id=${e}`,{method:"DELETE"})).json();return console.log("[DEBUG] Remove class assignment response:",r),r.success?{success:!0,message:"Assignment removed successfully"}:{success:!1,message:r.message||"Failed to remove assignment"}}catch(t){return console.error("Error removing class assignment:",t),{success:!1,message:"Error removing assignment: "+t.message}}}},eH=_.createContext(),tH=({children:e})=>{const[t,r]=_.useState(null),[n,s]=_.useState([]),[a,i]=_.useState({}),[o,l]=_.useState({}),[u,d]=_.useState(!1),[f,h]=_.useState(null),[g,x]=_.useState([]),[y,v]=_.useState(!1),[T,k]=_.useState(null),[b,E]=_.useState({isOpen:!1,testType:null,testId:null,testName:null,questions:[]}),[N,P]=_.useState(null),[M,j]=_.useState(0),{getItem:A,setItem:D,removeItem:L}=rW();_.useEffect(()=>{let ye;return u&&N&&(ye=setInterval(()=>{const Fe=Math.floor((Date.now()-N)/1e3);j(Fe)},1e3)),()=>{ye&&clearInterval(ye)}},[u,N]);const G=async(ye,Fe)=>{try{v(!0),k(null),console.log(`[DEBUG] loadTestForPage called with testType: ${ye}, testId: ${Fe}`);const Be=await Pn.getTestInfo(ye,Fe);console.log("[DEBUG] Test info retrieved:",Be);const He=await Pn.getTestQuestions(ye,Fe);console.log("[DEBUG] Test questions retrieved:",He),r({...Be,testType:ye,testId:Fe}),s(He),d(!0),P(Date.now()),j(0),X(ye,Fe),console.log("[DEBUG] Test loaded successfully")}catch(Be){k(Be.message||"Failed to load test"),console.error("Error loading test:",Be)}finally{v(!1)}},X=(ye,Fe)=>{try{const Be=`test_progress_${ye}_${Fe}`,He=A(Be);He&&(i(He.answers||{}),l(He.progress||{}))}catch(Be){console.error("Error loading saved progress:",Be)}},se=(ye,Fe,Be,He)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}const Ie=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${ye}_${Fe}`,Qe={...a,[Be]:He},Ne={...o,[Be]:{answered:!0,timestamp:Date.now()}};i(Qe),l(Ne),D(Ie,{answers:Qe,progress:Ne,lastSaved:Date.now()}),console.log(`Saved progress for question ${Be}:`,He)}catch(Pt){console.error("Error saving test progress:",Pt)}},Q=(ye,Fe,Be)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated())return console.warn("[WARN] Cannot get progress: No valid JWT token"),null;const Pt=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${ye}_${Fe}`;return A(Pt)?.answers?.[Be]||null}catch(He){return console.error("Error getting test progress:",He),null}},re=(ye,Fe)=>{try{if(console.log(`[DEBUG] clearTestProgress called with testType: ${ye}, testId: ${Fe}`),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const Be=window.tokenManager?.getDecodedToken()?.sub||"unknown",He=`test_progress_${Be}_${ye}_${Fe}`;console.log(`[DEBUG] Removing localStorage key: ${He}`);const Pt=A(He)!==null;L(He),i({}),l({});for(let Ie=0;Ie<localStorage.length;Ie++){const Qe=localStorage.key(Ie);Qe&&Qe.startsWith(`test_progress_${Be}_${ye}_${Fe}_`)&&(localStorage.removeItem(Qe),console.log(`[DEBUG] Cleared individual question key: ${Qe}`))}console.log(Pt?`[DEBUG] Progress cleared for test ${ye}_${Fe}`:`[DEBUG] No progress found to clear for test ${ye}_${Fe}`)}catch(Be){console.error("Error clearing test progress:",Be)}},B=async(ye,Fe,Be="")=>{try{v(!0),k(null),console.log("Submitting test:",{testType:ye,testId:Fe});const He=oe(ye,Fe);if(Object.keys(He).length===0){k("Please answer at least one question before submitting.");return}let Pt;try{Pt=await Pn.getTestInfo(ye,Fe)}catch(zt){console.error("Error getting test info:",zt);const rr=await Pn.getTestQuestions(ye,Fe);Pt={test_name:`Test ${Fe}`,num_questions:rr.length}}const Ie=await Pn.getTestQuestions(ye,Fe),Qe=Mf(Ie,He,ye),Ne=Pt.num_questions,Ke=le(He,ye),qe={test_id:Fe,test_name:Pt.test_name,score:Qe,maxScore:Ne,answers:Ke},Rt=await Pn.submitTest(ye,Fe,qe);if(Rt.success){if(h(Rt.result),z(ye,Fe,Be),re(ye,Fe),Be){const zt=`student_results_table_${Be}`;ye!=="drawing"?(console.log(" TestContext: Caching test results after submission with key:",zt),qs(zt,Rt.result,da.student_results_table)):console.log(" TestContext: Skipping cache for drawing test submission (teacher-scored).")}return Be&&n1(Be,ye,Fe),d(!1),Rt.results}else throw new Error(Rt.message||"Test submission failed")}catch(He){throw k(He.message||"Failed to submit test"),He}finally{v(!1)}},V=(ye,Fe,Be)=>{h({testType:ye,testId:Fe,answers:Be}),d(!1)},R=()=>{r(null),s([]),i({}),l({}),d(!1),h(null),k(null),P(null),j(0)},H=(ye,Fe,Be="")=>{try{const He=`test_completed_${Be}_${ye}_${Fe}`;return A(He)===!0}catch(He){return console.error("Error checking test completion:",He),!1}},z=(ye,Fe,Be="")=>{try{const He=`test_completed_${Be}_${ye}_${Fe}`;D(He,!0)}catch(He){console.error("Error marking test completed:",He)}},I=ye=>Object.keys(a).length,W=()=>{const ye=I(t?.testType),Fe=n.length;return{canSubmit:ye===Fe,answeredCount:ye,totalQuestions:Fe}},K=()=>{t&&re(t.testType,t.testId),R()},ee=(ye="")=>{try{const Fe=`student_results_table_${ye}`;console.log(" TestContext: Clearing test results cache:",Fe),localStorage.removeItem(Fe),console.log(" TestContext: Test results cache cleared")}catch(Fe){console.error("Error clearing test results cache:",Fe)}},oe=(ye,Fe)=>({...a}),Z=(ye,Fe,Be=null)=>{try{if(!ye)return"No answer";switch(Fe){case"true_false":return ye?"True":"False";case"multiple_choice":if(Be&&typeof ye=="string"&&!isNaN(parseInt(ye))){const He=parseInt(ye),Pt=`option_${String.fromCharCode(97+He)}`,Ie=Be[Pt];if(Ie)return Ie}return String(ye).toUpperCase();case"input":return String(ye);case"matching_type":return typeof ye=="object"?Object.entries(ye).map(([He,Pt])=>`${He}  ${Pt}`).join(", "):String(ye);case"word_matching":return typeof ye=="object"?Object.entries(ye).map(([He,Pt])=>`${He}  ${Pt}`).join(", "):String(ye);case"drawing":return"Drawing submitted";default:return String(ye)}}catch(He){return console.error("Error formatting student answer:",He),"Error displaying answer"}},le=(ye,Fe)=>{try{if(!ye||typeof ye!="object")return{};const Be={};return Object.entries(ye).forEach(([He,Pt])=>{if(Pt!=null)switch(Fe){case"true_false":Be[He]=!!Pt;break;case"multiple_choice":Be[He]=String(Pt).toUpperCase();break;case"input":Be[He]=String(Pt).trim();break;case"matching_type":typeof Pt=="object"?Be[He]=Pt:Be[He]=String(Pt);break;case"word_matching":typeof Pt=="object"?Be[He]=Pt:Be[He]=String(Pt);break;case"drawing":Be[He]=Pt;break;default:Be[He]=Pt}}),Be}catch(Be){return console.error("Error transforming answers for submission:",Be),ye||{}}},ue=_.useCallback(async(ye="")=>{try{v(!0);const Fe=`student_active_tests_${ye}`,Be=fa(Fe);if(Be)return x(Be),Be;const He=await Pn.getActiveTests();return x(He),qs(Fe,He,da.student_active_tests),He}catch(Fe){return k(Fe.message||"Failed to load active tests"),x([]),[]}finally{v(!1)}},[]),de=async()=>{try{return v(!0),await Pn.getTeacherTests()}catch(ye){return k(ye.message||"Failed to load teacher tests"),[]}finally{v(!1)}},Te=async ye=>{try{return v(!0),await Pn.createTest(ye)}catch(Fe){throw k(Fe.message||"Failed to create test"),Fe}finally{v(!1)}},ie=async(ye,Fe)=>{try{return v(!0),await Pn.deleteTest(ye,Fe)}catch(Be){throw k(Be.message||"Failed to delete test"),Be}finally{v(!1)}},pe=async(ye,Fe)=>{try{return await Pn.getTestInfo(ye,Fe)}catch(Be){throw console.error("Error getting test info:",Be),Be}},Ae=async(ye,Fe)=>{try{return await Pn.getTestQuestions(ye,Fe)}catch(Be){throw console.error("Error getting test questions:",Be),Be}},Me=async(ye,Fe,Be)=>{try{console.log("Showing test results:",{testType:ye,testId:Fe,studentAnswers:Be});const He=await pe(ye,Fe),Pt=await Ae(ye,Fe);Dt(He,Pt,ye,Be),d(!1),console.log("Test results displayed successfully")}catch(He){console.error("Error showing test results:",He),k("Failed to display test results"),h({testType:ye,testId:Fe,answers:Be,showResults:!0,error:"Could not load detailed results"}),d(!1)}},Je=async(ye,Fe,Be)=>{try{v(!0);const He=await pe(ye,Fe),Pt=await Ae(ye,Fe);Dt(He,Pt,ye,Be)}catch(He){k(He.message||"Failed to load test results")}finally{v(!1)}},Ve=_.useCallback(async(ye="")=>{try{v(!0);const Fe=`student_results_table_${ye}`;console.log(" TestContext: Checking cache for key:",Fe);const Be=fa(Fe);if(Be)return console.log(" TestContext: Cache HIT! Using cached test results"),h(Be),Be;console.log(" TestContext: Cache MISS! Fetching from API");const He=await Pn.getStudentTestResults();return console.log(" TestContext: Test results loaded:",He),console.log(" TestContext: Results data:",He?.results||He),console.log(" TestContext: Results length:",He?.results?.length||0),h(He),console.log(" TestContext: Caching test results with key:",Fe),console.log(" TestContext: Results being cached:",He),console.log(" TestContext: Results.results being cached:",He.results),qs(Fe,He,da.student_results_table),He}catch(Fe){throw console.error("Error loading test results:",Fe),k(Fe.message||"Failed to load test results"),Fe}finally{v(!1)}},[]),Dt=(ye,Fe,Be,He)=>{try{console.log("Displaying test results:",{testInfo:ye,questions:Fe,testType:Be,studentAnswers:He});const Pt=Mf(Fe,He,Be),Ie=ye?.num_questions||Fe?.length||0,Qe=Ie>0?Math.round(Pt/Ie*100):0,Ne=Qe>=60,Ke=Fe.map((qe,Rt)=>{const zt=qe.question_id||qe.id,rr=He[zt],Ir=Hp(qe,rr,Be);return{questionNumber:Rt+1,question:qe.question||qe.question_text,userAnswer:Z(rr,Be),correctAnswer:Tv(qe,Be),isCorrect:Ir,questionType:Be}});h({testInfo:ye,questions:Fe,testType:Be,studentAnswers:He,showResults:!0,score:Pt,totalQuestions:Ie,percentage:Qe,passed:Ne,questionAnalysis:Ke,timestamp:new Date().toISOString()}),l(qe=>({...qe,score:Pt,totalQuestions:Ie,percentage:Qe,passed:Ne,lastUpdated:Date.now()})),lt(),console.log(`Test results displayed: ${Pt}/${Ie} (${Qe}%) - ${Ne?"PASSED":"FAILED"}`)}catch(Pt){console.error("Error displaying test results:",Pt),k("Failed to display test results")}},lt=_.useCallback(()=>{try{console.log("Setting up test results page event listeners");const ye=Ie=>{if(Ie.key==="Escape"&&K(),Ie.ctrlKey&&Ie.key==="p"&&(Ie.preventDefault(),window.print()),Ie.key==="Enter"&&f&&!f.passed){const Qe=document.getElementById("retake-test-button");Qe&&Qe.click()}},Fe=()=>{window.print()},Be=()=>{if(f){const Ie=`Test: ${f.testInfo?.test_name||"Test"}
Score: ${f.score}/${f.totalQuestions} (${f.percentage}%)
Status: ${f.passed?"PASSED":"FAILED"}
Completed: ${new Date(f.timestamp).toLocaleString()}`;navigator.clipboard.writeText(Ie).then(()=>{console.log("Results copied to clipboard")}).catch(Qe=>{console.error("Failed to copy results:",Qe)})}};document.addEventListener("keydown",ye);const He=document.getElementById("print-results");He&&He.addEventListener("click",Fe);const Pt=document.getElementById("copy-results");return Pt&&Pt.addEventListener("click",Be),()=>{document.removeEventListener("keydown",ye),He&&He.removeEventListener("click",Fe),Pt&&Pt.removeEventListener("click",Be)}}catch(ye){console.error("Error setting up test results page event listeners:",ye)}},[K,f]),At=async(ye,Fe,Be)=>{try{v(!0),k(null),console.log("Viewing test details:",{testType:ye,testId:Fe,testName:Be}),E({isOpen:!0,testType:ye,testId:Fe,testName:Be,questions:[],isLoading:!0});const He=await Pn.getTestQuestions(ye,Fe);He&&He.length>0?(E({isOpen:!0,testType:ye,testId:Fe,testName:Be,questions:He,isLoading:!1}),console.log(`Test details loaded: ${He.length} questions`)):(k("Could not load test questions. Please try again."),E({isOpen:!0,testType:ye,testId:Fe,testName:Be,questions:[],isLoading:!1,error:"No questions available for this test"}))}catch(He){console.error("Error loading test details:",He),k("Error loading test details. Please try again."),E({isOpen:!0,testType:ye,testId:Fe,testName:Be,questions:[],isLoading:!1,error:He.message||"Failed to load test details"})}finally{v(!1)}},vt=(ye,Fe,Be,He)=>{try{console.log("Showing test details modal:",{testType:ye,testId:Fe,testName:Be,questions:He}),E({isOpen:!0,testType:ye,testId:Fe,testName:Be,questions:He||[],isLoading:!1,error:null})}catch(Pt){console.error("Error showing test details modal:",Pt),k("Failed to show test details modal")}},ct=()=>{try{console.log("Closing test details modal"),E({isOpen:!1,testType:null,testId:null,testName:null,questions:[],isLoading:!1,error:null})}catch(ye){console.error("Error closing test details modal:",ye)}},bt=(ye,Fe)=>{try{switch(Fe){case"multiple_choice":return c.jsxs("div",{className:"answer-options",children:[c.jsx("p",{children:c.jsx("strong",{children:"Options:"})}),c.jsxs("p",{children:["A) ",ye.option_a||"No text"]}),c.jsxs("p",{children:["B) ",ye.option_b||"No text"]}),ye.option_c&&c.jsxs("p",{children:["C) ",ye.option_c]}),ye.option_d&&c.jsxs("p",{children:["D) ",ye.option_d]}),ye.option_e&&c.jsxs("p",{children:["E) ",ye.option_e]}),ye.option_f&&c.jsxs("p",{children:["F) ",ye.option_f]}),c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ye.correct_answer||"Not specified"]})})]});case"true_false":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ye.correct_answer?"True":"False"]})})});case"input":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ye.correct_answer||"Not specified"]})})});case"matching_type":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ye.correct_answer?JSON.stringify(ye.correct_answer):"Not specified"]})})});case"word_matching":return c.jsx("div",{className:"answer-options",children:c.jsx("p",{className:"correct-answer",children:c.jsxs("strong",{children:["Correct Answer: ",ye.correct_answer?JSON.stringify(ye.correct_answer):"Not specified"]})})});default:return c.jsx("p",{children:"Unknown question type"})}}catch(Be){return console.error("Error formatting question answer display:",Be),c.jsx("p",{children:"Error displaying question"})}},Ut=(ye,Fe)=>{try{console.log("Navigating to test:",{testType:ye,testId:Fe}),r({testType:ye,testId:Fe}),d(!0),G(ye,Fe)}catch(Be){console.error("Error navigating to test:",Be),k("Failed to navigate to test")}},Bt=()=>{try{console.log("Hiding test sections"),r(null),s([]),i({}),l({}),d(!1),h(null),k(null)}catch(ye){console.error("Error hiding test sections:",ye)}},Vt=(ye,Fe,Be,He)=>{try{console.log("Displaying test on page:",{testInfo:ye,questions:Fe,testType:Be,testId:He}),r({...ye,testType:Be,testId:He}),s(Fe),d(!0),X(Be,He),Lt(Be,He),at(Be,He)}catch(Pt){console.error("Error displaying test on page:",Pt),k("Failed to display test on page")}},We=(ye,Fe,Be)=>{try{return console.log("Rendering questions for page:",{questions:ye,testType:Fe,testId:Be}),!ye||!Array.isArray(ye)?(console.warn("Invalid questions array for rendering"),[]):ye.map((He,Pt)=>{const Ie=Qe=>{const Ne={...a,[He.question_id]:Qe};i(Ne),se(Fe,Be,He.question_id,Qe)};return{question:He,index:Pt,testType:Fe,testId:Be,studentAnswer:a[He.question_id]||"",onAnswerChange:Ie}})}catch(He){return console.error("Error rendering questions for page:",He),[]}},Ue=_.useCallback((ye,Fe)=>{try{if(!ye||!Fe){console.warn("Cannot save progress: missing testType or testId");return}const Be=`test_progress_${ye}_${Fe}`,He={answers:a,progress:o,lastSaved:Date.now(),testType:ye,testId:Fe};D(Be,He),console.log(`Progress saved for test ${ye}_${Fe}:`,He)}catch(Be){console.error("Error saving progress for page:",Be)}},[a,o,D]),tt=_.useCallback(ye=>{try{return!a||Object.keys(a).length===0?0:Object.values(a).filter(Be=>Be==null?!1:typeof Be=="string"?Be.trim()!=="":typeof Be=="object"?Object.keys(Be).length>0:!0).length}catch(Fe){return console.error("Error getting answered questions count for page:",Fe),0}},[a]),nt=_.useCallback((ye,Fe)=>{try{console.log("Updating progress display for page:",{testType:ye,testId:Fe});const Be=tt(ye),He=n.length,Pt=He>0?Math.round(Be/He*100):0,Ie=Be===He&&He>0;l(qe=>({...qe,answeredCount:Be,totalQuestions:He,percentage:Pt,canSubmit:Ie,remainingQuestions:He-Be,lastUpdated:Date.now()}));const Qe=document.getElementById("progress-bar"),Ne=document.getElementById("progress-text"),Ke=document.getElementById("submit-test-button");return Qe&&(Qe.style.width=`${Pt}%`,Qe.className=Qe.className.replace(/bg-\w+-\d+/,""),Pt>=100?Qe.classList.add("bg-green-500"):Pt>=80?Qe.classList.add("bg-blue-500"):Pt>=60?Qe.classList.add("bg-yellow-500"):Pt>=40?Qe.classList.add("bg-orange-500"):Qe.classList.add("bg-red-500")),Ne&&(Ne.textContent=`${Be}/${He} questions answered (${Pt}%)`),Ke&&(Ke.disabled=!Ie,Ie?(Ke.textContent=" Submit Test",Ke.classList.remove("bg-gray-400"),Ke.classList.add("bg-green-600","hover:bg-green-700")):(Ke.textContent=` Complete ${He-Be} more question${He-Be!==1?"s":""}`,Ke.classList.remove("bg-green-600","hover:bg-green-700"),Ke.classList.add("bg-gray-400"))),{answeredCount:Be,totalQuestions:He,percentage:Pt,canSubmit:Ie}}catch(Be){return console.error("Error updating progress display for page:",Be),{answeredCount:0,totalQuestions:0,percentage:0,canSubmit:!1}}},[n.length,tt]),at=_.useCallback((ye,Fe)=>{try{console.log("Setting up test page event listeners:",{testType:ye,testId:Fe});const Be=setInterval(()=>{Object.keys(a).length>0&&(Ue(ye,Fe),console.log("Auto-saved progress for test:",ye,Fe))},3e4),He=setInterval(()=>{nt(ye,Fe)},2e3),Pt=qe=>{qe.key==="Escape"&&window.confirm("Are you sure you want to exit the test? Your progress will be saved.")&&K(),qe.ctrlKey&&qe.key==="s"&&(qe.preventDefault(),Ue(ye,Fe),console.log("Manual save triggered")),qe.key},Ie=qe=>{Object.keys(a).length>0&&(qe.preventDefault(),qe.returnValue="Your test progress will be saved. Are you sure you want to leave?")},Qe=()=>{document.hidden&&(console.log("Tab became hidden - saving progress"),Ue(ye,Fe))},Ne=()=>{console.log("Window focused - updating progress"),nt(ye,Fe)},Ke=()=>{console.log("Window blurred - saving progress"),Ue(ye,Fe)};return document.addEventListener("keydown",Pt),window.addEventListener("beforeunload",Ie),document.addEventListener("visibilitychange",Qe),window.addEventListener("focus",Ne),window.addEventListener("blur",Ke),window.testIntervals||(window.testIntervals={}),window.testIntervals[`autosave_${ye}_${Fe}`]=Be,window.testIntervals[`progress_${ye}_${Fe}`]=He,()=>{clearInterval(Be),clearInterval(He),document.removeEventListener("keydown",Pt),window.removeEventListener("beforeunload",Ie),document.removeEventListener("visibilitychange",Qe),window.removeEventListener("focus",Ne),window.removeEventListener("blur",Ke),window.testIntervals&&(delete window.testIntervals[`autosave_${ye}_${Fe}`],delete window.testIntervals[`progress_${ye}_${Fe}`])}}catch(Be){console.error("Error setting up test page event listeners:",Be)}},[a,Ue,nt,K]),It=_.useCallback(()=>{try{const ye=tt(t?.testType),Fe=n.length,Be=ye===Fe&&Fe>0,He=document.getElementById("submit-test-button");return He&&(He.disabled=!Be,He.textContent=Be?"Submit Test":`Complete ${Fe-ye} more questions`),{canSubmit:Be,answeredCount:ye,totalQuestions:Fe}}catch(ye){return console.error("Error updating submit button state for page:",ye),{canSubmit:!1,answeredCount:0,totalQuestions:0}}},[t,n.length,tt]),Lt=_.useCallback((ye,Fe)=>{try{console.log("Setting up progress tracking for page:",{testType:ye,testId:Fe});const Be=setInterval(()=>{nt(ye,Fe),It()},1e3),He=setInterval(()=>{Object.keys(a).length>0&&Ue(ye,Fe)},3e4);return window.testIntervals||(window.testIntervals={}),window.testIntervals[`progress_${ye}_${Fe}`]=Be,window.testIntervals[`autosave_${ye}_${Fe}`]=He,()=>{clearInterval(Be),clearInterval(He),window.testIntervals&&(delete window.testIntervals[`progress_${ye}_${Fe}`],delete window.testIntervals[`autosave_${ye}_${Fe}`])}}catch(Be){console.error("Error setting up progress tracking for page:",Be)}},[a,nt,It,Ue]),Xt=_.useCallback(async(ye,Fe)=>{const Be=document.getElementById("submit-test-button");try{const He=tt(ye),Pt=n.length;if(He<Pt){k(`Please answer all ${Pt} questions before submitting.`);return}if(!window.confirm("Are you sure you want to submit your test? This action cannot be undone."))return;Be&&(Be.disabled=!0,Be.innerHTML=`
          <div class="flex items-center justify-center space-x-2">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
            <span>Submitting...</span>
          </div>
        `),await B(ye,Fe)&&(re(ye,Fe),V(ye,Fe,a),console.log("Test submitted successfully!"))}catch(He){console.error("Error submitting test from page:",He),k("Failed to submit test. Please try again."),Be&&(Be.disabled=!1,Be.textContent="Submit Test")}},[tt,n.length,B,re,V,a]),vr=_.useCallback(()=>{try{if(!t)return null;const ye=["true_false","multiple_choice","input","matching_type","word_matching"];return ye.includes(t.testType)?t.testType:ye.includes(t.test_type)?t.test_type:null}catch(ye){return console.error("Error getting current test type:",ye),null}},[t]),br=_.useCallback((ye,Fe)=>{try{console.log("Clearing progress tracking interval:",{testType:ye,testId:Fe});const Be=`progress_interval_${ye}_${Fe}`,He=`autosave_interval_${ye}_${Fe}`;window.testIntervals&&(window.testIntervals[Be]&&(clearInterval(window.testIntervals[Be]),delete window.testIntervals[Be]),window.testIntervals[He]&&(clearInterval(window.testIntervals[He]),delete window.testIntervals[He])),console.log(`Cleared progress tracking intervals for test ${ye}_${Fe}`)}catch(Be){console.error("Error clearing progress tracking interval:",Be)}},[]),pr={currentTest:t,testQuestions:n,studentAnswers:a,testProgress:o,isTestActive:u,testResults:f,activeTests:g,isLoading:y,error:T,testDetailsModal:b,testStartTime:N,timeElapsed:M,loadTestForPage:G,submitTest:B,navigateToTestResults:V,navigateBackToCabinet:R,clearTestDataAndReturnToCabinet:K,saveTestProgress:se,getTestProgress:Q,clearTestProgress:re,loadSavedProgressForPage:X,isTestCompleted:H,markTestCompleted:z,markTestCompletedInUI:(ye,Fe)=>{console.log("Marking test completed in UI:",{testType:ye,testId:Fe}),z(ye,Fe)},getAnsweredQuestionsCount:I,updateSubmitButtonState:W,updateSubmitButtonStateForPage:It,loadStudentActiveTests:ue,loadActiveTests:ue,loadTeacherActiveTests:de,getTestInfo:pe,getTestQuestions:Ae,createTest:Te,deleteTest:ie,showTestResults:Me,loadTestResults:Ve,loadTestResultsForPage:Je,displayTestResultsOnPage:Dt,setupTestResultsPageEventListeners:lt,clearTestResultsCache:ee,viewTestDetails:At,showTestDetailsModal:vt,closeTestDetailsModal:ct,getQuestionAnswerDisplay:bt,navigateToTest:Ut,hideTestSections:Bt,displayTestOnPage:Vt,renderQuestionsForPage:We,setupTestPageEventListeners:at,setupProgressTrackingForPage:Lt,updateProgressDisplayForPage:nt,submitTestFromPage:Xt,getAnsweredQuestionsCountForPage:tt,getCurrentTestType:vr,saveProgressForPage:Ue,clearProgressTrackingInterval:br,collectTestAnswers:oe,calculateTestScore:Mf,checkAnswerCorrectness:Hp,formatStudentAnswerForDisplay:Z,getCorrectAnswer:Tv,transformAnswersForSubmission:le,clearAllTestData:()=>{try{console.log("Clearing old test data from localStorage (older than 15 days)...");const Fe=Date.now()-360*60*60*1e3,Be=[];for(let He=0;He<localStorage.length;He++){const Pt=localStorage.key(He);if(!(!Pt||!((Pt.startsWith("test_")||Pt.startsWith("student_")||Pt.startsWith("teacher_")||Pt.startsWith("admin_")||Pt.includes("progress")||Pt.includes("answers"))&&!Pt.includes("test_completed_"))))try{const Qe=localStorage.getItem(Pt);if(!Qe){Be.push(Pt);continue}let Ne=null;if(Qe.startsWith("{")||Qe.startsWith("[")){const Ke=JSON.parse(Qe),qe=Ke.timestamp||Ke.lastSaved||Ke.lastTickAt||Ke.createdAt||Ke.updatedAt||Ke.startedAt||Ke.started_at||Ke.created_at;qe&&(Ne=new Date(qe).getTime())}if(!Ne){const Ke=`${Pt}__ts`,qe=localStorage.getItem(Ke);qe&&(Ne=parseInt(qe)||null)}if(!Ne)continue;Ne<Fe&&Be.push(Pt)}catch{continue}}return Be.forEach(He=>{console.log(`Removing old localStorage key: ${He}`),L(He)}),console.log(`Cleared ${Be.length} old test-related items from localStorage`),{success:!0,clearedCount:Be.length}}catch(ye){return console.error("Error clearing old test data:",ye),{success:!1,error:ye.message}}},setCurrentTest:r,setTestQuestions:s,setStudentAnswers:i,setTestProgress:l,setIsTestActive:d,setTestResults:h,setError:k};return c.jsx(eH.Provider,{value:pr,children:e})},v2=()=>{const e=_.useContext(eH);if(!e)throw new Error("useTest must be used within a TestProvider");return e},My=window.location.hostname==="mathayomwatsing.netlify.app";My&&(console.log=()=>{},console.debug=()=>{},console.info=()=>{},console.warn=()=>{});const xe={debug:(e,...t)=>{My||console.log(e,...t)},warn:(e,...t)=>{My||console.warn(e,...t)},error:(e,...t)=>{console.error(e,...t)},info:(e,...t)=>{My||console.info(e,...t)},isEnabled:()=>!My},w2=({testResults:e,onBackToCabinet:t,onRetakeTest:r,isLoading:n=!1,caught_cheating:s=!1,visibility_change_times:a=0})=>{if(!e||!e.showResults)return c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx("div",{className:"text-center",children:c.jsx("p",{className:"text-gray-500",children:"No test results to display"})})});const{testInfo:i,testType:o,score:l,totalQuestions:u,percentage:d,passed:f,questionAnalysis:h,timestamp:g}=e,x=T=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[T]||T,y=T=>T>=80?"text-green-600 bg-green-50":T>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",v=T=>T?"text-green-600 bg-green-100 border-green-200":"text-red-600 bg-red-100 border-red-200";return n?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading test results..."})]})}):c.jsx("div",{className:"bg-gray-50 py-8 overflow-y-auto",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs(gt.div,{className:"bg-white rounded-lg shadow-lg p-6 mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(e?.caught_cheating||s)&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm text-red-700",children:[c.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",e?.visibility_change_times||a||0," times during the test."]})})]})}),c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Test Results"}),c.jsx("h2",{className:"text-xl text-gray-700 mb-1",children:i?.test_name||"Test"}),c.jsxs("p",{className:"text-sm text-gray-500",children:[x(o),"  Completed on ",new Date(g).toLocaleDateString()]})]}),c.jsx("div",{className:"text-right",children:c.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${v(f)}`,children:f?" PASSED":" FAILED"})})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:l}),c.jsx("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:u}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:`text-3xl font-bold ${y(d).split(" ")[0]}`,children:[d,"%"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-6",children:c.jsx(gt.div,{className:`h-3 rounded-full ${y(d).split(" ")[1]}`,initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,ease:"easeOut"}})}),c.jsx("div",{className:"flex flex-wrap gap-3",children:c.jsx(ot,{onClick:t,variant:"primary",className:"flex items-center gap-2",children:" Back to Cabinet"})})]}),o!=="matching_type"&&o!=="word_matching"&&c.jsxs(gt.div,{className:"bg-white rounded-lg shadow-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Question Review"}),c.jsx("div",{className:"space-y-4",children:h.map((T,k)=>c.jsxs(gt.div,{className:`p-4 rounded-lg border-2 ${T.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:k*.1},children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Question ",T.questionNumber]}),c.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${T.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.isCorrect?" Correct":" Incorrect"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Question:"}),c.jsx("p",{className:"text-gray-700 bg-gray-100 p-3 rounded",children:T.question})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Your Answer:"}),c.jsx("p",{className:`p-3 rounded ${T.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.userAnswer||"No answer provided"})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Correct Answer:"}),c.jsx("p",{className:"bg-blue-100 text-blue-800 p-3 rounded",children:T.correctAnswer})]})]})]},k))})]}),c.jsxs(gt.div,{className:"bg-white rounded-lg shadow-lg p-6 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Summary Statistics"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.filter(T=>T.isCorrect).length}),c.jsx("div",{className:"text-sm text-blue-600",children:"Correct"})]}),c.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.filter(T=>!T.isCorrect).length}),c.jsx("div",{className:"text-sm text-red-600",children:"Incorrect"})]}),c.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[c.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[Math.round(h.filter(T=>T.isCorrect).length/u*100),"%"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),c.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u}),c.jsx("div",{className:"text-sm text-purple-600",children:"Total"})]})]})]})]})})},rH=({isOpen:e,onClose:t,testType:r,testId:n,testName:s,questions:a=[],isLoading:i=!1})=>{if(!e)return null;const o=f=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[f]||f,l=f=>({multiple_choice:"",true_false:"",input:"",matching_type:""})[f]||"",u=(f,h)=>{switch(h){case"multiple_choice":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),c.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[f.option_a&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"A"}),c.jsx("span",{className:"text-gray-700",children:f.option_a})]}),f.option_b&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"B"}),c.jsx("span",{className:"text-gray-700",children:f.option_b})]}),f.option_c&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"C"}),c.jsx("span",{className:"text-gray-700",children:f.option_c})]}),f.option_d&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"D"}),c.jsx("span",{className:"text-gray-700",children:f.option_d})]}),f.option_e&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"E"}),c.jsx("span",{className:"text-gray-700",children:f.option_e})]}),f.option_f&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),c.jsx("span",{className:"text-gray-700",children:f.option_f})]})]})]});case"true_false":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"T"}),c.jsx("span",{className:"text-gray-700",children:"True"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),c.jsx("span",{className:"text-gray-700",children:"False"})]})]})]});case"input":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Answer Format:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("span",{className:"text-gray-600 italic",children:"Type your answer in the text input field"})})]});case"matching_type":return c.jsxs("div",{className:"space-y-2",children:[c.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Instructions:"}),c.jsx("div",{className:"bg-gray-100 p-3 rounded",children:c.jsx("span",{className:"text-gray-600 italic",children:"Match the items by connecting them with lines or selecting pairs"})})]});default:return null}},d=(f,h)=>{if(!f.correct_answer)return null;let g="";switch(h){case"multiple_choice":g=f.correct_answer.toUpperCase();break;case"true_false":g=f.correct_answer?"True":"False";break;case"input":g=f.correct_answer;break;case"matching_type":g=typeof f.correct_answer=="object"?JSON.stringify(f.correct_answer):f.correct_answer;break;default:g=String(f.correct_answer)}return c.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[c.jsx("p",{className:"font-medium text-green-800 mb-1",children:"Correct Answer:"}),c.jsx("p",{className:"text-green-700 font-mono",children:g})]})};return c.jsx(il,{children:c.jsxs(gt.div,{className:"fixed inset-0 z-50 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[c.jsx(gt.div,{className:"fixed inset-0 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),c.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:c.jsxs(gt.div,{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-2xl",children:l(r)}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s||"Test Details"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[o(r),"  ",a.length," Questions"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ot,{onClick:()=>window.print(),variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Print"}),c.jsx(ot,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Close"})]})]}),c.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:i?c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading test details..."})]})}):a.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Questions Available"}),c.jsx("p",{className:"text-gray-500",children:"This test doesn't have any questions yet."})]}):c.jsx("div",{className:"space-y-6",children:a.map((f,h)=>c.jsxs(gt.div,{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.1,duration:.3},children:[c.jsx("div",{className:"flex items-start justify-between mb-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:["Question ",h+1]}),c.jsx("span",{className:"text-gray-500 text-sm",children:o(r)})]})}),c.jsx("div",{className:"mb-4",children:c.jsx("p",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:f.question||f.question_text})}),u(f,r),d(f,r)]},f.id||f.question_id||h))})}),c.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[c.jsx("div",{className:"text-sm text-gray-600",children:a.length>0&&c.jsxs("span",{children:["Showing ",a.length," question",a.length!==1?"s":""]})}),c.jsx("div",{className:"flex items-center space-x-3",children:c.jsx(ot,{onClick:t,variant:"primary",className:"flex items-center space-x-2",children:"Close"})})]})]})})]})})},Lde=({answeredCount:e=0,totalQuestions:t=0,timeElapsed:r=0,onSubmitTest:n,isSubmitting:s=!1,canSubmit:a=!1,className:i=""})=>{const o=t>0?Math.round(e/t*100):0,l=t-e,u=h=>{const g=Math.floor(h/3600),x=Math.floor(h%3600/60),y=h%60;return g>0?`${g}:${x.toString().padStart(2,"0")}:${y.toString().padStart(2,"0")}`:`${x}:${y.toString().padStart(2,"0")}`},d=h=>h>=100?"bg-green-500":h>=80?"bg-blue-500":h>=60?"bg-yellow-500":h>=40?"bg-orange-500":"bg-red-500",f=h=>h>=100?"text-green-600":h>=80?"text-blue-600":h>=60?"text-yellow-600":h>=40?"text-orange-600":"text-red-600";return c.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 ${i}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Progress"}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-2xl",children:""}),c.jsx("span",{className:"text-sm font-mono text-gray-600",children:u(r)})]})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),c.jsxs("span",{className:`text-sm font-semibold ${f(o)}`,children:[o,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:c.jsx(gt.div,{className:`h-full ${d(o)} transition-colors duration-300`,initial:{width:0},animate:{width:`${o}%`},transition:{duration:.5,ease:"easeOut"}})})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-blue-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:e}),c.jsx("div",{className:"text-xs text-blue-600",children:"Answered"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-gray-600",children:l}),c.jsx("div",{className:"text-xs text-gray-600",children:"Remaining"})]}),c.jsxs("div",{className:"text-center p-2 sm:p-3 bg-purple-50 rounded-lg",children:[c.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:t}),c.jsx("div",{className:"text-xs text-purple-600",children:"Total"})]})]}),c.jsx("div",{className:"mb-4",children:e===t?c.jsx(gt.div,{className:"flex items-center justify-center p-3 bg-green-50 border border-green-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:c.jsx("span",{className:"text-green-600 font-medium",children:" All questions answered! Ready to submit."})}):l===1?c.jsx(gt.div,{className:"flex items-center justify-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:c.jsx("span",{className:"text-yellow-600 font-medium",children:"Almost there! 1 question remaining."})}):c.jsx("div",{className:"flex items-center justify-center p-3 bg-gray-50 border border-gray-200 rounded-lg",children:c.jsxs("span",{className:"text-gray-600 font-medium",children:[l," questions remaining"]})})}),a&&c.jsx("div",{className:"flex justify-center",children:c.jsx(gt.button,{onClick:n,disabled:s,className:`px-8 py-3 rounded-lg font-semibold text-white transition-all duration-300 ${s?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl"}`,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},children:s?c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),c.jsx("span",{children:"Submitting..."})]}):c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Submit Test"})]})})})]})},Bde=({testText:e,blanks:t,separateType:r=!0,testId:n,testName:s="Unknown Test",teacherId:a="Unknown Teacher",subjectId:i,onTestComplete:o,onAnswerChange:l})=>{if(console.log(" FillBlanksTestStudent Props Debug:"),console.log("- testText:",e),console.log("- blanks:",t),console.log("- separateType:",r),console.log("- testId:",n),console.log("- testName:",s),console.log("- teacherId:",a),console.log("- subjectId:",i),!e||!t||!Array.isArray(t))return console.log(" FillBlanksTestStudent: Missing test data"),c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx($t,{className:"max-w-md w-full",children:c.jsxs($t.Body,{className:"text-center",children:[c.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load fill blanks test data"}),c.jsx(ot,{onClick:()=>window.history.back(),variant:"primary",children:"Back to Dashboard"})]})})});const[u,d]=_.useState({}),[f,h]=_.useState(!1),[g,x]=_.useState(null),[y,v]=_.useState(null),[T,k]=_.useState(!1),[b,E]=_.useState(null),{showNotification:N}=ai(),{makeAuthenticatedRequest:P}=$l(),{user:M}=Ps(),{startTracking:j,stopTracking:A,getCheatingData:D,clearData:L}=v1("fill_blanks",n,M?.student_id||M?.id);J_();const G=_.useCallback((re,B)=>{try{let V=re;if(typeof re=="string"&&re.startsWith("{"))try{const I=JSON.parse(re);I.root&&I.root.children&&(V=I.root.children.map(W=>W.children?W.children.map(K=>K.style&&K.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":K.text||"").join(""):"").join(" "))}catch(I){console.error("Error parsing Lexical JSON:",I)}let R=V;B.forEach((I,W)=>{const K=`[${W+1}_________]`;R=R.replace("[BLANK_PLACEHOLDER]",K)});const z=R.split(/(\[\d+_________\])/).map((I,W)=>I.match(/\[\d+_________\]/)?c.jsx("span",{className:"inline-block px-3 py-1 mx-1 bg-purple-100 text-purple-800 border-2 border-purple-400 rounded-lg font-mono font-bold shadow-sm",children:I},W):c.jsx("span",{children:I},W));return c.jsx("div",{className:"prose max-w-none mb-6",children:c.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:z})})}catch(V){return console.error("Error rendering text with blanks:",V),c.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[]),X=_.useCallback((re,B)=>{try{let V=re;if(typeof re=="string"&&re.startsWith("{"))try{const I=JSON.parse(re);I.root&&I.root.children&&(V=I.root.children.map(W=>W.children?W.children.map(K=>K.style&&K.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":K.text||"").join(""):"").join(" "))}catch(I){console.error("Error parsing Lexical JSON:",I)}const R=[];B.forEach((I,W)=>{const K=u[I.id],ee=K?I.options[K.charCodeAt(0)-65]:null,oe=ee?c.jsx("span",{className:"inline-block px-3 py-2 bg-green-100 text-green-800 rounded-lg border-2 border-green-400 cursor-pointer hover:bg-green-200 hover:border-green-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(I.id),children:ee},W):c.jsxs("span",{className:"inline-block px-3 py-2 bg-purple-100 text-purple-800 rounded-lg border-2 border-purple-400 cursor-pointer hover:bg-purple-200 hover:border-purple-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(I.id),children:[W+1,"_________"]},W);R.push(oe),V=V.replace("[BLANK_PLACEHOLDER]",`__BLANK_${I.id}__`)});const H=V.split(/__BLANK_\d+__/),z=[];for(let I=0;I<H.length;I++)H[I]&&z.push(c.jsx("span",{children:H[I]},`text-${I}`)),I<R.length&&z.push(R[I]);return c.jsx("div",{className:"prose max-w-none mb-6",children:c.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:z})})}catch(V){return console.error("Error rendering text with inline blanks:",V),c.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[u]),se=_.useCallback((re,B)=>{const V={...u,[re]:B};d(V),l&&l(re,B)},[u,l]),Q=_.useCallback(re=>c.jsx("div",{className:"space-y-6",children:re.map((B,V)=>{const R=B.blank_options||B.options||[];B.correct_answers;const H=B.question_json||B.question||`Blank ${V+1}`;return console.log(` Blank ${V+1} question text:`,H),c.jsxs($t,{className:"p-4",children:[c.jsxs("div",{className:"mb-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",V+1]}),c.jsx("p",{className:"text-gray-600 mb-4",children:H})]}),c.jsx("div",{className:"space-y-3",children:R.filter(z=>z&&z.trim().length>0).map((z,I)=>c.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors",children:[c.jsx("input",{type:"radio",name:`blank_${B.question_id||B.id||V}`,value:String.fromCharCode(65+I),checked:u[B.question_id||B.id||V]===String.fromCharCode(65+I),onChange:W=>se(B.question_id||B.id||V,W.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),c.jsxs("span",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+I)}),c.jsx("span",{className:"text-gray-700",children:z})]})]},I))})]},B.question_id||B.id||V)})}),[u,se]);return _.useEffect(()=>{if(n&&M?.student_id){x(new Date),j(),console.log(" Anti-cheating tracking started for fill blanks test");const B=`test_progress_${M.student_id}_fill_blanks_${n}`,V=fa(B);V&&(d(V.answers||{}),x(new Date(V.startTime)),console.log(" Fill blanks test progress restored:",V))}},[n,M?.student_id,t,j]),_.useEffect(()=>{if(g&&M?.student_id&&n){const re=setInterval(()=>{const B={answers:u,startTime:g.toISOString()},V=`test_progress_${M.student_id}_fill_blanks_${n}`;qs(V,B,da.test_progress),console.log(" Fill blanks progress auto-saved")},3e4);return()=>clearInterval(re)}},[g,u,M?.student_id,n]),_.useEffect(()=>()=>{A(),L(),console.log(" Fill blanks test component unmounted - anti-cheating cleanup")},[A,L]),_.useCallback(async()=>{h(!0);try{const re=t.length;let B=0;t.forEach((pe,Ae)=>{const Me=u[pe.id];Me&&Me===pe.correct_answer&&B++});const V=B,R=re;console.log(` Fill Blanks Score: ${V}/${R} (${Math.round(V/R*100)}%)`);const H=new Date,z=g?Math.round((H-g)/1e3):0,I=g?g.toISOString():H.toISOString(),W=D();console.log(" Anti-cheating data for fill blanks submission:",W);const K=M.student_id,ee=`retest_assignment_id_${K}_fill_blanks_${n}`,oe=localStorage.getItem(ee),{academicCalendarService:Z}=await Za(async()=>{const{academicCalendarService:pe}=await Promise.resolve().then(()=>i3);return{academicCalendarService:pe}},void 0);await Z.loadAcademicCalendar();const ue=Z.getCurrentTerm()?.id;if(!ue)throw new Error("No current academic period found");const de={test_id:n,test_name:s,teacher_id:a||null,subject_id:i||null,student_id:K,academic_period_id:ue,parent_test_id:n,retest_assignment_id:oe?Number(oe):null,answers:u,score:V,maxScore:R,time_taken:z,started_at:I,submitted_at:H.toISOString(),caught_cheating:W.caught_cheating,visibility_change_times:W.visibility_change_times};console.log(" Submitting fill blanks test:",de);const ie=await(await P("/.netlify/functions/submit-fill-blanks-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(de)})).json();if(ie.success){if(N("Test submitted successfully!","success"),A(),L(),console.log(" Anti-cheating tracking stopped and data cleared for fill blanks test"),M?.student_id&&(n1(M.student_id,"fill_blanks",n),console.log(" Fill blanks test data cleared from cache")),!!oe&&M?.student_id){let Ae=3;try{const Ve=localStorage.getItem(`student_active_tests_${M.student_id}`);if(Ve){const lt=JSON.parse(Ve)?.tests?.find(At=>At.test_id===n&&At.test_type==="fill_blanks");lt&&(Ae=lt.retest_attempts_left||lt.max_attempts||3)}}catch(Ve){console.error("Error checking active tests cache:",Ve)}const Je=(V>0&&R>0?V/R*100:0)>=50;if(Je){const Ve=`retest_attempt${Ae}_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(Ve,"true"),console.log(" Passed retest, marking last-slot key:",Ve);let Dt=0;for(let vt=1;vt<=10;vt++){const ct=`retest_attempt${vt}_${M.student_id}_fill_blanks_${n}`;localStorage.getItem(ct)==="true"&&Dt++}const lt=`test_completed_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(lt,"true"),console.log(" Marked retest as completed (student passed):",lt);const At=`retest_attempts_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(At,JSON.stringify({used:Dt,max:Ae})),console.log(" Set retest attempts metadata (student passed):",At,{used:Dt,max:Ae})}else{let Ve=1;for(let ct=1;ct<=10;ct++){const bt=`retest_attempt${ct}_${M.student_id}_fill_blanks_${n}`;if(localStorage.getItem(bt)!=="true"){Ve=ct;break}}const Dt=`retest_attempt${Ve}_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(Dt,"true"),console.log(" Marked retest attempt as completed:",Dt);let lt=0;for(let ct=1;ct<=10;ct++){const bt=`retest_attempt${ct}_${M.student_id}_fill_blanks_${n}`;localStorage.getItem(bt)==="true"&&lt++}const At=Ae-lt,vt=At<=0||Je;if(console.log(" Retest completion check:",{usedAttempts:lt,maxAttempts:Ae,attemptsLeft:At,passed:Je,shouldComplete:vt}),vt){const ct=`test_completed_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(ct,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",ct);const bt=`retest_attempts_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(bt,JSON.stringify({used:lt,max:Ae})),console.log(" Set retest attempts metadata (attempts exhausted):",bt,{used:lt,max:Ae})}}}else if(M?.student_id){const Ae=`test_completed_${M.student_id}_fill_blanks_${n}`;localStorage.setItem(Ae,"true"),console.log(" Fill blanks test marked as completed in localStorage:",Ae)}if(M?.student_id){const Ae=`retest1_${K}_fill_blanks_${n}`;localStorage.removeItem(Ae),localStorage.removeItem(ee)}if(M?.student_id){const Ae=`student_results_table_${M.student_id}`;qs(Ae,ie,da.student_results_table),console.log(" Fill blanks test results cached with key:",Ae)}setShowSubmitModal(!1),setTimeout(()=>{o&&o(V)},2e3)}else throw new Error(ie.message||"Failed to submit test")}catch(re){console.error("Error submitting test:",re),N("Error submitting test. Please try again.","error")}finally{h(!1)}},[u,t,n,s,a,i,g,D,A,L,P,N,o,M]),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:c.jsxs($t,{children:[f&&c.jsx($t.Header,{children:c.jsx("div",{className:"flex items-center justify-center",children:c.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[c.jsx(un,{size:"small"}),c.jsx("span",{children:"Submitting..."})]})})}),c.jsx($t.Body,{children:r===!0?c.jsxs(c.Fragment,{children:[G(e,t),Q(t)]}):c.jsx(c.Fragment,{children:X(e,t)})}),r===!1&&y&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Answer"}),c.jsx("div",{className:"space-y-2",children:t.find(re=>re.id===y)?.options.filter(re=>re.trim().length>0).map((re,B)=>c.jsxs("button",{onClick:()=>{se(y,String.fromCharCode(65+B)),v(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 rounded-lg border border-gray-200",children:[c.jsxs("span",{className:"font-semibold text-blue-600 mr-2",children:[String.fromCharCode(65+B),")"]}),re]},B))}),c.jsx("div",{className:"mt-4 flex justify-end",children:c.jsx(ot,{onClick:()=>v(null),variant:"secondary",size:"sm",children:"Cancel"})})]})}),c.jsx($t.Footer,{children:c.jsx("div",{className:"flex gap-3"})})]})})};let $de=class{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data"}getToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setToken(t){localStorage.setItem(this.tokenKey,t)}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){this.setToken(t),this.setUserData({role:r}),localStorage.setItem("accessToken",t)}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])),n=Date.now()/1e3;return r.exp>n}catch(r){return console.error("Error decoding token:",r),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey)}logout(){this.clearAuth(),window.location.href="/login"}getAuthHeader(){const t=this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401){if(await this.refreshToken())return s.Authorization=`Bearer ${this.getToken()}`,fetch(t,{...r,headers:s});throw this.logout(),new Error("Authentication failed")}return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return this.setToken(n.accessToken),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}getAccessToken(){return this.getToken()}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(r){return console.error("Error decoding token:",r),null}}init(){return this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}};const Gp=new $de;window.tokenManager=Gp;typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Gp.init()}):Gp.init());const nH=async(e,t,r,n,s=!1)=>{try{console.log(" Fetching teacher student results:",{teacherId:e,grade:t,className:r,termId:n,forceRefresh:s});const a=s?`&_t=${Date.now()}`:"",o=await(await Gp.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-student-results?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}${a}`,{cache:s?"no-cache":"default",headers:s?{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}:{}})).json();if(o.success)return console.log(" Teacher student results loaded:",o.results.length,"results"),console.log(" Students loaded:",o.students?.length||0,"students"),{success:!0,results:o.results,students:o.students||[],count:o.results.length,student_count:o.student_count||0};throw new Error(o.error||"Failed to load teacher student results")}catch(a){return console.error("Error fetching teacher student results:",a),{success:!1,error:a.message,results:[]}}},sH=async(e,t)=>{try{console.log(" Fetching student results view:",{studentId:e,academicPeriodId:t});const r=t?`&academic_period_id=${t}`:"",s=await(await Gp.makeAuthenticatedRequest(`/.netlify/functions/get-student-results-view?student_id=${e}${r}`)).json();if(s.success)return console.log(" Student results view loaded:",s.results.length,"results"),{success:!0,results:s.results,count:s.results.length};throw new Error(s.error||"Failed to load student results view")}catch(r){return console.error("Error fetching student results view:",r),{success:!1,error:r.message,results:[]}}},zde=async(e,t,r,n)=>{try{console.log(" Fetching class summary:",{teacherId:e,grade:t,className:r,academicPeriodId:n});const a=await(await Gp.makeAuthenticatedRequest(`/.netlify/functions/get-class-summary?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}`)).json();if(a.success)return console.log(" Class summary loaded:",a.summary),{success:!0,summary:a.summary,hasData:!!a.summary};throw new Error(a.error||"Failed to load class summary")}catch(s){return console.error("Error fetching class summary:",s),{success:!1,error:s.message,summary:null}}},Ude=async(e,t,r,n,s={})=>{try{const a=await nH(e,t,r,n);if(!a.success)return a;let i=a.results;return s.subject&&(i=i.filter(o=>o.subject&&o.subject.toLowerCase().includes(s.subject.toLowerCase()))),s.testType&&(i=i.filter(o=>o.test_type===s.testType)),s.minScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100>=s.minScore)),s.maxScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100<=s.maxScore)),s.passed!==void 0&&(i=i.filter(o=>o.score>=o.passing_score===s.passed)),{success:!0,results:i,count:i.length,originalCount:a.results.length}}catch(a){return console.error("Error filtering teacher student results:",a),{success:!1,error:a.message,results:[]}}},Wde=async(e,t,r={})=>{try{const n=await sH(e,t);if(!n.success)return n;let s=n.results;return r.subject&&(s=s.filter(a=>a.subject&&a.subject.toLowerCase().includes(r.subject.toLowerCase()))),r.testType&&(s=s.filter(a=>a.test_type===r.testType)),r.semester&&(s=s.filter(a=>a.semester===r.semester)),r.passed!==void 0&&(s=s.filter(a=>a.score>=a.passing_score===r.passed)),{success:!0,results:s,count:s.length,originalCount:n.results.length}}catch(n){return console.error("Error filtering student results view:",n),{success:!1,error:n.message,results:[]}}},Hde={getTeacherStudentResults:nH,getStudentResultsView:sH,getClassSummary:zde,getTeacherStudentResultsFiltered:Ude,getStudentResultsViewFiltered:Wde};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gde=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vde=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),VF=e=>{const t=Vde(e);return t.charAt(0).toUpperCase()+t.slice(1)},aH=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),qde=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kde={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yde=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},l)=>_.createElement("svg",{ref:l,...Kde,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:aH("lucide",s),...!a&&!qde(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>_.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=(e,t)=>{const r=_.forwardRef(({className:n,...s},a)=>_.createElement(Yde,{ref:a,iconNode:t,className:aH(`lucide-${Gde(VF(e))}`,`lucide-${e}`,n),...s}));return r.displayName=VF(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xde=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Jde=w1("download",Xde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qde=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Zde=w1("maximize-2",Qde);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0e=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],t0e=w1("rotate-cw",e0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],iH=w1("x",r0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],s0e=w1("zoom-in",n0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],i0e=w1("zoom-out",a0e),qc={WIDTH:1536,HEIGHT:2048,ASPECT_RATIO:1536/2048},oH={MIN:.25,MAX:1,INITIAL:.25,STEP:.1},zh={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",ERASER:"eraser"},qF={CURSOR_COLOR:"#ff0000",CURSOR_OPACITY:.3},KF={ERASER_TO_THICKNESS_RATIO:2.5,THICKNESS_TO_ERASER_RATIO:.4},P4={MAX_ENTRIES:10,MAX_MEMORY_KB:500,COMPRESSION_THRESHOLD:200},lH=e=>{try{const t=JSON.stringify(e);return new Blob([t]).size/1024}catch(t){return console.warn("Error calculating memory usage:",t),0}},o0e=e=>Array.isArray(e)?e.map(t=>Array.isArray(t)?l0e(t):t):e,l0e=e=>{if(e.length<=2)return e;const t=[e[0]],r=2;for(let n=1;n<e.length-1;n++){const s=e[n-1],a=e[n];e[n+1],Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))>r&&t.push(a)}return t.push(e[e.length-1]),t},c0e=(e,t=Date.now())=>{const r=lH(e);return{data:[...e],timestamp:t,memoryUsage:r,compressed:r>P4.COMPRESSION_THRESHOLD}},YF=(e,t,r)=>{const n=c0e(t),s=lH(t),a=e.slice(0,r+1);a.push(n);let i=a;return s>P4.MAX_MEMORY_KB&&(i=u0e(a)),i.length>P4.MAX_ENTRIES&&(i=i.slice(-10)),{history:i,index:i.length-1}},u0e=e=>e.map(t=>t.memoryUsage>P4.COMPRESSION_THRESHOLD?{...t,data:o0e(t.data),compressed:!0}:t),XF=(e,t)=>{if(t<0||t>=e.length)return[];const r=e[t];return r?r.compressed?d0e(r.data):[...r.data]:[]},d0e=e=>[...e],JF=e=>e>0,QF=(e,t)=>e<t-1,f0e=()=>({history:[],index:-1}),h0e=()=>{const[e,t]=_.useState({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null}),[r,n]=_.useState([]),[s,a]=_.useState([]),i=_.useCallback(N=>{t(P=>({...P,...N}))},[]),o=_.useCallback(()=>{t({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null})},[]),l=_.useCallback(N=>{const P={x:N.x,y:N.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(M=>({...M,isDrawing:!0,currentLine:[P]})):["line","rectangle","circle"].includes(e.currentTool)&&t(M=>({...M,isDrawing:!0,currentShape:{type:e.currentTool,startX:N.x,startY:N.y,endX:N.x,endY:N.y,color:e.currentColor,thickness:e.currentThickness}}))},[e.currentTool,e.currentColor,e.currentThickness]),u=_.useCallback(N=>{if(!e.isDrawing)return;const P={x:N.x,y:N.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(M=>({...M,currentLine:[...M.currentLine,P]})):e.currentShape&&t(M=>({...M,currentShape:{...M.currentShape,endX:N.x,endY:N.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape]),d=_.useCallback(()=>{if(!e.isDrawing)return;let N=r;if(e.currentTool==="pencil"&&e.currentLine.length>0?(N=[...r,e.currentLine],n(N)):e.currentShape&&(N=[...r,e.currentShape],n(N)),N!==r){const P=YF(e.drawingHistory,N,e.historyIndex);t(M=>({...M,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:P.history,historyIndex:P.index}))}else t(P=>({...P,isDrawing:!1,currentLine:[],currentShape:null}))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,r,e.drawingHistory,e.historyIndex]),f=_.useCallback(N=>Math.round(N*KF.ERASER_TO_THICKNESS_RATIO),[]),h=_.useCallback(N=>Math.round(N*KF.THICKNESS_TO_ERASER_RATIO),[]),g=_.useCallback(N=>{t(P=>({...P,currentThickness:N,eraserSize:f(N)}))},[f]),x=_.useCallback(N=>{t(P=>({...P,eraserSize:N,currentThickness:h(N)}))},[h]),y=_.useCallback(N=>{const P=YF(e.drawingHistory,N,e.historyIndex);t(M=>({...M,drawingHistory:P.history,historyIndex:P.index}))},[e.drawingHistory,e.historyIndex]),v=_.useCallback(()=>{if(JF(e.historyIndex)){const N=e.historyIndex-1,P=XF(e.drawingHistory,N);n([...P]),t(M=>({...M,historyIndex:N}))}},[e.historyIndex,e.drawingHistory]),T=_.useCallback(()=>{if(QF(e.historyIndex,e.drawingHistory.length)){const N=e.historyIndex+1,P=XF(e.drawingHistory,N);n([...P]),t(M=>({...M,historyIndex:N}))}},[e.historyIndex,e.drawingHistory]),k=_.useCallback(()=>{const N=f0e();t(P=>({...P,drawingHistory:N.history,historyIndex:N.index}))},[]),b=JF(e.historyIndex),E=QF(e.historyIndex,e.drawingHistory.length);return{drawingState:e,setDrawingState:t,drawingData:r,setDrawingData:n,textBoxes:s,setTextBoxes:a,updateDrawingState:i,resetDrawingState:o,startDrawing:l,continueDrawing:u,finishDrawing:d,handleThicknessChange:g,handleEraserSizeChange:x,saveToHistoryState:y,undo:v,redo:T,clearHistoryState:k,canUndoState:b,canRedoState:E}},ZF={SCALE_DELTA:.05,CENTER_DELTA:20},vp=e=>{if(e.length<2)return 0;const t=e[0],r=e[1];return Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2))},xf=e=>{if(e.length<2)return null;const t=e[0],r=e[1];return{x:(t.clientX+r.clientX)/2,y:(t.clientY+r.clientY)/2}},m0e=(e,t)=>{if(e.length!==2||!t)return null;const r=vp(e),n=vp(t),s=xf(e),a=xf(t);if(n===0)return null;const i=Math.abs(r/n-1),o=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return i>ZF.SCALE_DELTA?"zoom":o>ZF.CENTER_DELTA?"pan":null},g0e=e=>{let t;return function(){const r=arguments,n=this;t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e.apply(n,r),t=null})}},cp=(e,t)=>{const r=t.getPointerPosition();return{x:(r.x-t.x())/t.scaleX(),y:(r.y-t.y())/t.scaleY()}},rc={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",PAN:"pan"},M4={color:"#000000",thickness:2},eD=(e,t,r)=>({x:e.x,y:e.y,color:t||M4.color,thickness:r||M4.thickness}),p0e=(e,t,r,n,s)=>({type:e,startX:t.x,startY:t.y,endX:r.x,endY:r.y,color:n||M4.color,thickness:s||M4.thickness}),cH=(e,t,r,n,s,a)=>{const i=e-r,o=t-n,l=s-r,u=a-n,d=i*l+o*u,f=l*l+u*u;let h=-1;f!==0&&(h=d/f);let g,x;h<0?(g=r,x=n):h>1?(g=s,x=a):(g=r+h*l,x=n+h*u);const y=e-g,v=t-x;return Math.sqrt(y*y+v*v)},x0e=(e,t)=>{if(t.length===0)return[e];const r=t.sort((a,i)=>a.index-i.index),n=[];let s=0;for(const a of r)a.index>s&&n.push(e.slice(s,a.index+1)),s=a.index+1;return s<e.length&&n.push(e.slice(s)),n.filter(a=>a.length>0)},y0e=(e,t,r,n)=>{const s=[],a=r/2;for(let i=0;i<n.length-1;i++){const o=n[i],l=n[i+1],u=cH(e,t,o.x,o.y,l.x,l.y);u<=a&&s.push({index:i,point:{x:o.x,y:o.y},distance:u})}return s},v0e=(e,t,r,n)=>{const s=y0e(t,r,n,e);return s.length===0?[e]:x0e(e,s)},w0e=(e,t,r,n)=>{if(n.type==="rectangle"){const s=Math.min(n.startX,n.endX),a=Math.min(n.startY,n.endY),i=Math.abs(n.endX-n.startX),o=Math.abs(n.endY-n.startY);return e>=s&&e<=s+i&&t>=a&&t<=a+o}else if(n.type==="circle"){const s=(n.startX+n.endX)/2,a=(n.startY+n.endY)/2,i=Math.sqrt(Math.pow(n.endX-n.startX,2)+Math.pow(n.endY-n.startY,2))/2;return Math.sqrt(Math.pow(e-s,2)+Math.pow(t-a,2))<=i}return!1},tD=(e,t,r,n)=>{const s=[];for(const a of n)if(Array.isArray(a)){const i=v0e(a,e,t,r);s.push(...i)}else a.type==="line"?cH(e,t,a.startX,a.startY,a.endX,a.endY)>r/2&&s.push(a):(a.type==="rectangle"||a.type==="circle")&&(w0e(e,t,r,a)||s.push(a));return s},b0e=(e,t,r,n,s,a,i,o,l)=>{const[u,d]=_.useState({isActive:!1,type:null,lastDistance:null,lastCenter:null}),f=_.useCallback(P=>{if(P.evt.preventDefault(),P.evt.stopPropagation(),e.currentTool===rc.PAN)return;const M=P.target.getStage(),j=cp(P,M),A=eD(j,e.currentColor,e.currentThickness);e.currentTool===rc.PENCIL?t(D=>({...D,isDrawing:!0,currentLine:[A]})):[rc.LINE,rc.RECTANGLE,rc.CIRCLE].includes(e.currentTool)&&t(D=>({...D,isDrawing:!0,currentShape:p0e(e.currentTool,j,j,e.currentColor,e.currentThickness)}))},[e.currentTool,e.currentColor,e.currentThickness,t]),h=_.useCallback(P=>{const M=tD(P.x,P.y,e.eraserSize,r);n(M),s(M)},[e.eraserSize,r,n,s]),g=_.useCallback(P=>{o&&(a(),y("Undo",P))},[o,a]),x=_.useCallback(P=>{l&&(i(),y("Redo",P))},[l,i]),y=_.useCallback((P,M)=>{const j=M.target.getStage(),A=cp(M,j),D=new Konva.Circle({x:A.x,y:A.y,radius:20,stroke:"#4CAF50",strokeWidth:3,opacity:.8,listening:!1});j.add(D),D.to({scaleX:2,scaleY:2,opacity:0,duration:.3,onFinish:()=>{D.destroy()}})},[]),v=_.useCallback(P=>{if(P.evt.preventDefault(),P.evt.stopPropagation(),!e.isDrawing)return;const M=P.target.getStage(),j=cp(P,M),A=eD(j,e.currentColor,e.currentThickness);e.currentTool===rc.PENCIL?t(D=>({...D,currentLine:[...D.currentLine,A]})):e.currentShape&&t(D=>({...D,currentShape:{...D.currentShape,endX:j.x,endY:j.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape,t]),T=_.useCallback(P=>{P&&P.evt&&(P.evt.preventDefault(),P.evt.stopPropagation()),e.isDrawing&&(e.currentTool===rc.PENCIL&&e.currentLine.length>0?n(M=>[...M,e.currentLine]):e.currentShape&&n(M=>[...M,e.currentShape]),t(M=>({...M,isDrawing:!1,currentLine:[],currentShape:null})))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,n,t]),k=_.useCallback(P=>{P.evt.preventDefault(),P.evt.stopPropagation();const M=P.evt.touches;if(M.length===2)d({isActive:!0,type:"pan",lastDistance:vp(M),lastCenter:xf(M)});else if(M.length===1)if(e.currentTool===rc.ERASER){const j=P.target.getStage(),A=cp(P,j);h(A)}else e.currentTool===rc.UNDO?g(P):e.currentTool===rc.REDO?x(P):f(P)},[vp,xf,f,e.currentTool,h,g,x]),b=_.useCallback(g0e(P=>{P.evt.preventDefault(),P.evt.stopPropagation();const M=P.evt.touches;if(M.length===2&&u.isActive){const j=m0e(M,u);if(j==="zoom"){const A=vp(M),D=xf(M),L=A/u.lastDistance,G=Math.max(.25,Math.min(1,e.zoom*L));t(X=>({...X,zoom:G,position:{x:D.x-(D.x-X.position.x)*(G/X.zoom),y:D.y-(D.y-X.position.y)*(G/X.zoom)}}))}else if(j==="pan"){const A=xf(M),D=A.x-u.lastCenter.x,L=A.y-u.lastCenter.y;t(G=>({...G,position:{x:G.position.x+D,y:G.position.y+L}}))}d(A=>({...A,lastDistance:vp(M),lastCenter:xf(M)}))}else if(M.length===1)if(e.currentTool===rc.ERASER){const j=P.target.getStage(),A=cp(P,j),D=tD(A.x,A.y,e.eraserSize,r);n(D)}else if(e.currentTool===rc.PAN){const j=xf(M),A=j.x-u.lastCenter.x,D=j.y-u.lastCenter.y;t(L=>({...L,position:{x:L.position.x+A,y:L.position.y+D}})),d(L=>({...L,lastCenter:j}))}else v(P)}),[u,e.zoom,t,v]),E=_.useCallback(P=>{b(P)},[b]),N=_.useCallback(P=>{P.evt.preventDefault(),P.evt.stopPropagation();const M=P.evt.touches;M.length===0?(T(P),d({isActive:!1,type:null,lastDistance:null,lastCenter:null})):M.length===1&&d(j=>({...j,isActive:!1}))},[T]);return{handleTouchStart:k,handleTouchMove:E,handleTouchEnd:N,handleEraserStart:h,handleUndoTouch:g,handleRedoTouch:x,showTouchFeedback:y}},_0e=(e,t)=>{const[r,n]=_.useState(e.MIN),[s,a]=_.useState({x:0,y:0}),i=_.useCallback((h,g,x)=>{const y=Math.max(e.MIN,Math.min(e.MAX,h));if(g){const v=y/r,T={x:g.x-(g.x-s.x)*v,y:g.y-(g.y-s.y)*v};return{zoom:y,position:T}}else{const v=t.width*y,T=t.height*y,k={x:(x.width-v)/2,y:(x.height-T)/2};return{zoom:y,position:k}}},[r,s,e,t]),o=_.useCallback(()=>{const h=Math.min(r*(1+e.STEP),e.MAX);n(h)},[r,e]),l=_.useCallback(()=>{const h=Math.max(r/(1+e.STEP),e.MIN);n(h)},[r,e]),u=_.useCallback((h,g,x)=>{const y=i(h,g,x);n(y.zoom),a(y.position)},[i]),d=_.useCallback((h,g)=>{a(x=>({x:x.x+h,y:x.y+g}))},[]),f=_.useCallback(()=>{n(e.INITIAL),a({x:0,y:0})},[e.INITIAL]);return{zoom:r,setZoom:n,position:s,setPosition:a,handleZoomIn:o,handleZoomOut:l,handleZoomToPoint:u,handlePan:d,resetZoom:f}},S0e=e=>{const[t,r]=_.useState([]),[n,s]=_.useState(0),a=_.useCallback(f=>{if(console.log("parseDrawingData - input drawing:",f),console.log("parseDrawingData - drawing.answers:",f?.answers),!f?.answers)return console.log("parseDrawingData - no answers found, returning empty array"),[];try{if(typeof f.answers=="string"){console.log("parseDrawingData - parsing string answers");const h=JSON.parse(f.answers);return console.log("parseDrawingData - parsed string result:",h),h&&typeof h=="object"&&h.lines&&console.log("parseDrawingData - new format detected with lines and textBoxes"),h}if(f.answers&&typeof f.answers=="object"&&f.answers.lines)return console.log("parseDrawingData - answers is new format object"),f.answers;if(Array.isArray(f.answers)){if(console.log("parseDrawingData - answers is array"),f.answers.every(g=>typeof g=="string"))try{const g=f.answers.map(x=>{try{return JSON.parse(x)}catch{return x}});return console.log("parseDrawingData - parsed array elements"),g}catch{return console.log("parseDrawingData - failed to parse array elements, returning raw"),f.answers}return f.answers}return console.log("parseDrawingData - answers is neither string nor array, returning empty array"),[]}catch(h){return console.error("Error parsing drawing data:",h),[]}},[]),i=_.useCallback(f=>{if(console.log("processQuestions - input answers:",f),console.log("processQuestions - answers type:",typeof f),console.log("processQuestions - answers isArray:",Array.isArray(f)),f&&typeof f=="object"&&f.lines){console.log("processQuestions - new format detected with lines and textBoxes"),console.log("processQuestions - lines count:",f.lines?.length),console.log("processQuestions - textBoxes count:",f.textBoxes?.length);const g=o(f.lines);return console.log("processQuestions - canvas groups:",g),console.log("processQuestions - number of canvas groups:",g.length),g.map((x,y)=>(console.log(`processQuestions - canvas ${y} strokes:`,x),console.log(`processQuestions - canvas ${y} stroke count:`,x.length),{questionNumber:y+1,drawingData:x,textBoxes:f.textBoxes||[]}))}if(Array.isArray(f)&&f.every(g=>g&&typeof g=="object"&&g.lines))return console.log("processQuestions - array of {lines,textBoxes} detected"),f.map((g,x)=>({questionNumber:x+1,drawingData:g.lines||[],textBoxes:g.textBoxes||[]}));if(!Array.isArray(f))return console.log("processQuestions - answers is not array or object, returning empty array"),[];console.log("processQuestions - processing",f.length,"answers (old format)");const h=o(f);return console.log("processQuestions - canvas groups:",h),console.log("processQuestions - number of canvas groups:",h.length),h.map((g,x)=>(console.log(`processQuestions - canvas ${x} strokes:`,g),console.log(`processQuestions - canvas ${x} stroke count:`,g.length),{questionNumber:x+1,drawingData:g,textBoxes:[]}))},[]),o=_.useCallback(f=>{console.log("groupStrokesByCanvas - input answers:",f);const h=l(f);return console.log("groupStrokesByCanvas - using strategy:",h),h==="by_question_boundary"?u(f):h==="by_stroke_type"?d(f):[f]},[]),l=_.useCallback(f=>{console.log("determineGroupingStrategy - analyzing answers:",f);let h=0,g=0;return f.forEach(x=>{Array.isArray(x)?h++:typeof x=="object"&&g++}),console.log("determineGroupingStrategy - arrayCount:",h,"objectCount:",g),h>0&&g>0?"by_stroke_type":f.length>3?"by_question_boundary":"single_canvas"},[]),u=_.useCallback(f=>{console.log("groupByQuestionBoundary - grouping answers:",f);const h=[];let g=[];const x=Math.ceil(f.length/2);for(let y=0;y<f.length;y++)g.push(f[y]),(y+1)%x===0&&y<f.length-1&&(h.push([...g]),g=[]);return g.length>0&&h.push(g),console.log("groupByQuestionBoundary - result:",h),h},[]),d=_.useCallback(f=>{console.log("groupByStrokeType - grouping answers:",f);const h=[],g=[];f.forEach(y=>{Array.isArray(y)?h.push(y):typeof y=="object"&&g.push(y)});const x=[];return h.length>0&&x.push(h),g.length>0&&x.push(g),console.log("groupByStrokeType - result:",x),x},[]);return _.useEffect(()=>{if(e){console.log("useDataParsing - drawing object:",e),console.log("useDataParsing - drawing.answers:",e.answers),console.log("useDataParsing - drawing.answers type:",typeof e.answers),console.log("useDataParsing - drawing.answers length:",e.answers?.length);const f=a(e);console.log("useDataParsing - parsed answers:",f),console.log("useDataParsing - parsed answers type:",typeof f),console.log("useDataParsing - parsed answers length:",f?.length);const h=i(f);console.log("useDataParsing - processed questions:",h),console.log("useDataParsing - processed questions length:",h?.length),h.length>0&&(console.log("useDataParsing - first question drawingData:",h[0]?.drawingData),console.log("useDataParsing - first question drawingData length:",h[0]?.drawingData?.length)),r(h),s(0)}},[e,a,i]),{questionsData:t,setQuestionsData:r,currentQuestionIndex:n,setCurrentQuestionIndex:s,parseDrawingData:a,processQuestions:i}},rD={MIN:.25,INITIAL:1},k0e=(e,t)=>{const[r,n]=_.useState(!1),[s,a]=_.useState(null),i=_.useCallback(()=>{document.fullscreenElement||(a({zoom:e.zoom,position:{...e.position}}),document.documentElement.requestFullscreen().then(()=>{n(!0),t(l=>({...l,zoom:rD.MIN,position:{x:0,y:0},isFullscreen:!0}))}).catch(l=>{console.error("Error entering fullscreen:",l)}))},[e.zoom,e.position,t]),o=_.useCallback(()=>{document.fullscreenElement&&document.exitFullscreen().then(()=>{n(!1),s?(t(l=>({...l,zoom:s.zoom,position:s.position,isFullscreen:!1})),a(null)):t(l=>({...l,zoom:rD.INITIAL,position:{x:0,y:0},isFullscreen:!1}))}).catch(l=>{console.error("Error exiting fullscreen:",l)})},[s,t]);return{isFullscreen:r,enterFullscreen:i,exitFullscreen:o}},uH=_.forwardRef(({drawingData:e,textBoxes:t=[],drawingState:r,canvasSize:n,zoom:s,position:a,onTouchStart:i,onTouchMove:o,onTouchEnd:l,mousePosition:u,isMouseOverCanvas:d,isEraserDrawing:f},h)=>{const g=_.useRef(null),[x,y]=_.useState(.25),[v,T]=_.useState(null),[k,b]=_.useState({x:0,y:0}),[E,N]=_.useState(!1),P=_.useCallback(({x:H,y:z,size:I,visible:W,isDrawing:K})=>!W||!H||!z?null:c.jsx(Nf,{x:H,y:z,radius:I/2,stroke:qF.CURSOR_COLOR,strokeWidth:2,dash:[5,5],opacity:K?.8:qF.CURSOR_OPACITY,listening:!1,zIndex:1e3}),[]),M=_.useCallback(H=>{if(r.currentTool===zh.ERASER){const z=H.target.getStage(),I=cp(H,z);b(I)}},[r.currentTool]),j=_.useCallback(()=>{r.currentTool===zh.ERASER&&N(!0)},[r.currentTool]),A=_.useCallback(()=>{N(!1)},[]);_.useEffect(()=>{const H=h.current;if(H)return H.on("mousemove",M),H.on("mouseenter",j),H.on("mouseleave",A),()=>{H.off("mousemove",M),H.off("mouseenter",j),H.off("mouseleave",A)}},[M,j,A,h]),_.useEffect(()=>{const H=n.width??n.WIDTH,z=n.height??n.HEIGHT,I=()=>{const W=g.current;if(!W)return;const K=W.clientWidth||1,ee=W.clientHeight||1,oe=Math.abs(r.rotation%180)===90,Z=oe?z:H,le=oe?H:z,ue=Math.min(K/(Z||1),ee/(le||1));y(Math.min(ue,1))};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[n.width,n.height,n.WIDTH,n.HEIGHT,r.rotation]);const D=_.useMemo(()=>{const H=g.current;if(!H||!v)return 0;const z=H.clientWidth||1,I=H.clientHeight||1,W=Math.min(z/Math.max(v.width,1),I/Math.max(v.height,1));return Math.min(W,oH.MAX)},[v]),L=_.useMemo(()=>Math.max(s,x||1),[s,x]),G=_.useMemo(()=>{const H=n.width??n.WIDTH,z=n.height??n.HEIGHT;if(!g.current)return{x:0,y:0};const I=g.current.clientWidth||1,W=g.current.clientHeight||1,K=(I-H*L)/2,ee=(W-z*L)/2;return s<=x?{x:K,y:ee}:{x:a.x!==void 0?a.x:K,y:a.y!==void 0?a.y:ee}},[a,s,x,L,n.width,n.height,v,D]);_.useEffect(()=>{if(!Array.isArray(e)||e.length===0){T(null);return}let H=1/0,z=1/0,I=-1/0,W=-1/0;const K=(le,ue)=>{Number.isFinite(le)&&Number.isFinite(ue)&&(le<H&&(H=le),ue<z&&(z=ue),le>I&&(I=le),ue>W&&(W=ue))};if(e.forEach(le=>{if(Array.isArray(le))le.forEach(ue=>K(ue.x,ue.y));else if(le&&typeof le=="object"){if(le.type==="line")K(le.startX,le.startY),K(le.endX,le.endY);else if(le.type==="rectangle")K(le.startX,le.startY),K(le.endX,le.endY);else if(le.type==="circle"){const ue=Math.sqrt(Math.pow(le.endX-le.startX,2)+Math.pow(le.endY-le.startY,2))/2,de=(le.startX+le.endX)/2,Te=(le.startY+le.endY)/2;K(de-ue,Te-ue),K(de+ue,Te+ue)}}}),!Number.isFinite(H)||!Number.isFinite(z)||!Number.isFinite(I)||!Number.isFinite(W)){T(null);return}const ee=16,oe=Math.max(1,I-H+ee*2),Z=Math.max(1,W-z+ee*2);T({minX:H-ee,minY:z-ee,width:oe,height:Z})},[e]),_.useEffect(()=>{console.log("CanvasViewer - drawingData:",e),console.log("CanvasViewer - drawingData length:",e?.length),console.log("CanvasViewer - textBoxes:",t),console.log("CanvasViewer - textBoxes length:",t?.length),e&&e.length>0&&console.log("CanvasViewer - first item:",e[0]),t&&t.length>0&&console.log("CanvasViewer - first textBox:",t[0])},[e,t]),_.useEffect(()=>{const H=n.width??n.WIDTH,z=n.height??n.HEIGHT;console.log("CanvasViewer - canvas dimensions:",{width:H,height:z}),console.log("CanvasViewer - zoom:",s,"fitZoom:",x,"displayScale:",L),console.log("CanvasViewer - stagePosition:",G)},[n,s,x,L,G]);const X=(H,z)=>{if(console.log(`CanvasViewer - rendering element ${z}:`,H),Array.isArray(H))return console.log(`CanvasViewer - rendering line with ${H.length} points`),c.jsx(Wi,{points:H.flatMap(I=>[I.x,I.y]),stroke:H[0]?.color||"#000000",strokeWidth:H[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},z);if(H.type==="line")return c.jsx(Wi,{points:[H.startX,H.startY,H.endX,H.endY],stroke:H.color,strokeWidth:H.thickness,lineCap:"round"},z);if(H.type==="rectangle"){const I=Math.abs(H.endX-H.startX),W=Math.abs(H.endY-H.startY),K=Math.min(H.startX,H.endX),ee=Math.min(H.startY,H.endY);return c.jsx(Si,{x:K,y:ee,width:I,height:W,stroke:H.color,strokeWidth:H.thickness,fill:"transparent"},z)}else if(H.type==="circle"){const I=Math.sqrt(Math.pow(H.endX-H.startX,2)+Math.pow(H.endY-H.startY,2))/2,W=(H.startX+H.endX)/2,K=(H.startY+H.endY)/2;return c.jsx(Nf,{x:W,y:K,radius:I,stroke:H.color,strokeWidth:H.thickness,fill:"transparent"},z)}return null},se=()=>{if(!r.isDrawing)return null;if(r.currentTool===zh.PENCIL&&r.currentLine.length>0)return c.jsx(Wi,{points:r.currentLine.flatMap(H=>[H.x,H.y]),stroke:r.currentColor,strokeWidth:r.currentThickness,tension:.5,lineCap:"round",lineJoin:"round"});if(r.currentShape){const{type:H,startX:z,startY:I,endX:W,endY:K,color:ee,thickness:oe}=r.currentShape;if(H===zh.LINE)return c.jsx(Wi,{points:[z,I,W,K],stroke:ee,strokeWidth:oe,lineCap:"round"});if(H===zh.RECTANGLE){const Z=Math.abs(W-z),le=Math.abs(K-I),ue=Math.min(z,W),de=Math.min(I,K);return c.jsx(Si,{x:ue,y:de,width:Z,height:le,stroke:ee,strokeWidth:oe,fill:"transparent"})}else if(H===zh.CIRCLE){const Z=Math.sqrt(Math.pow(W-z,2)+Math.pow(K-I,2))/2,le=(z+W)/2,ue=(I+K)/2;return c.jsx(Nf,{x:le,y:ue,radius:Z,stroke:ee,strokeWidth:oe,fill:"transparent"})}}return null},Q=r.isFullscreen?{position:"fixed",inset:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",zIndex:60}:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},re={transform:`rotate(${r.rotation}deg)`,transformOrigin:"center center"},B=_.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]),V=_.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]),R=_.useCallback(H=>{H.preventDefault(),H.stopPropagation()},[]);return c.jsx("div",{style:{...Q,touchAction:"none",WebkitTouchCallout:"none"},ref:g,className:"select-none",onTouchStart:B,onTouchMove:V,onTouchEnd:R,children:c.jsx("div",{style:{...re,touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onTouchStart:B,onTouchMove:V,onTouchEnd:R,children:c.jsx(vm,{ref:h,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),scaleX:L,scaleY:L,x:G.x,y:G.y,onTouchStart:i,onTouchMove:o,onTouchEnd:l,children:c.jsxs(ym,{children:[c.jsx(Si,{x:0,y:0,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),fill:"white"}),e.map((H,z)=>(console.log(`CanvasViewer - mapping item ${z}:`,H),X(H,z))),t&&t.map((H,z)=>c.jsx(Si,{x:H.x,y:H.y,width:H.width,height:H.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}},`textbox-${z}`)),t&&t.map((H,z)=>c.jsx(Bu,{x:H.x+8,y:H.y+8,width:H.width-16,height:H.height-16,text:H.text,fontSize:H.fontSize||14,fill:H.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"},`text-${z}`)),se(),r.currentTool===zh.ERASER&&c.jsx(P,{x:k.x,y:k.y,size:r.eraserSize,visible:E,isDrawing:f})]})})})})});uH.displayName="CanvasViewer";function T0e({containerRef:e,canvasSize:t,rotation:r=0}){const[n,s]=_.useState(1),[a,i]=_.useState({x:0,y:0}),o=_.useRef({width:1,height:1}),l=_.useRef(.01),u=_.useRef(0),d=_.useRef(!1),f=_.useCallback(()=>{const E=t?.width??t?.WIDTH??0,N=t?.height??t?.HEIGHT??0,P=Math.abs(r%180)===90;return{width:P?N:E,height:P?E:N}},[t,r]),h=_.useCallback(()=>{const E=e?.current;if(!E)return{width:1,height:1};const N=E.clientWidth||1,P=E.clientHeight||1;return o.current={width:N,height:P},{width:N,height:P}},[e]),g=_.useCallback(()=>{const{width:E,height:N}=o.current,{width:P,height:M}=f(),j=E/Math.max(P,1),A=N/Math.max(M,1);return Math.min(j,A,1)*.98},[f]),x=_.useCallback(E=>{const{width:N,height:P}=o.current,{width:M,height:j}=f(),A=Math.max(l.current,Math.min(E,1.5));let D=(N-M*A)/2,L=(P-j*A)/2;const G=N-M*A,X=P-j*A;D=Math.min(Math.max(0,D),Math.max(0,G)),L=Math.min(Math.max(0,L),Math.max(0,X));try{console.log("[Camera] centerAtScale",{targetScale:E,clampedScale:A,container:{containerW:N,containerH:P},canvas:{canvasW:M,canvasH:j},translate:{x:D,y:L},rotation:r})}catch{}i({x:D,y:L}),s(A)},[f]),y=_.useCallback(()=>{const{width:E,height:N}=h(),{width:P,height:M}=f(),j=g();let A=(E-P*j)/2,D=(N-M*j)/2;const L=E-P*j,G=N-M*j;A=Math.min(Math.max(0,A),Math.max(0,L)),D=Math.min(Math.max(0,D),Math.max(0,G));try{console.log("[Camera] fitCanvas",{scale:j,container:{containerW:E,containerH:N},canvas:{canvasW:P,canvasH:M},translate:{x:A,y:D},rotation:r})}catch{}s(j),i({x:A,y:D}),l.current=j,d.current=!1},[f,h,g]),v=_.useCallback(()=>{const{width:E,height:N}=h(),{width:P,height:M}=f(),j=(E-P)/2,A=(N-M)/2;s(1),i({x:j,y:A})},[f,h]),T=_.useCallback((E,N)=>{const{width:P,height:M}=o.current,{width:j,height:A}=f(),D=Math.max(l.current,Math.min(E,1.5));if(N&&Number.isFinite(N.x)&&Number.isFinite(N.y)){const L={x:(N.x-a.x)/n,y:(N.y-a.y)/n},G=N.x-L.x*D,X=N.y-L.y*D;try{console.log("[Camera] zoomTo(pointer) ->",{from:n,to:D})}catch{}s(D),i({x:G,y:X}),u.current=Date.now()+400,d.current=!0}else{let L=(P-j*D)/2,G=(M-A*D)/2;const X=P-j*D,se=M-A*D;L=Math.min(Math.max(0,L),Math.max(0,X)),G=Math.min(Math.max(0,G),Math.max(0,se));try{console.log("[Camera] zoomTo(center) ->",{from:n,to:D})}catch{}s(D),i({x:L,y:G}),u.current=Date.now()+400,d.current=!0}},[f,n,a]),k=_.useCallback((E,N)=>{const P=n*E,{width:M,height:j}=o.current,A={x:M/2,y:j/2};T(P,N||A)},[n,T]),b=_.useCallback((E,N)=>{i(P=>({x:P.x+E,y:P.y+N})),u.current=Date.now()+200,d.current=!0},[]);return _.useEffect(()=>{const E=e?.current;if(!E)return;const N=new ResizeObserver(()=>{h();const P=g();if(l.current=P,!(Date.now()<u.current)&&!d.current){try{console.log("[Camera] resize centerAtScale",{scale:n})}catch{}x(n)}});return N.observe(E),h(),()=>N.disconnect()},[e,h,g,x,n]),_.useEffect(()=>{d.current=!1,l.current=g(),x(n)},[r,t?.width,t?.height,t?.WIDTH,t?.HEIGHT,g,x,n]),_.useMemo(()=>({scale:n,translate:a,setScale:s,setTranslate:i,centerAtScale:x,fitCanvas:y,oneToOne:v,zoomTo:T,zoomByFactor:k,panBy:b}),[n,a,x,y,v,T,k,b])}const vy=new Map,dH=_.forwardRef(({drawingData:e,textBoxes:t=[],canvasSize:r,rotation:n=0,onScaleChange:s,persistKey:a="viewer",onTextBoxEdit:i},o)=>{const l=_.useRef(null),u=_.useRef(null),d=T0e({containerRef:l,canvasSize:r,rotation:n}),[f,h]=_.useState({width:1,height:1}),g=_.useRef(null),x=_.useRef(null),[y,v]=_.useState(null);_.useEffect(()=>{console.log("[ViewerCanvas] drawingData received:",e),console.log("[ViewerCanvas] drawingData length:",e?.length),e&&e.length>0&&console.log("[ViewerCanvas] First drawing element:",e[0]),console.log("[ViewerCanvas] textBoxes:",t),console.log("[ViewerCanvas] textBoxes length:",t?.length)},[e]),_.useEffect(()=>{typeof s=="function"&&s(d.scale);try{console.log("[ViewerCanvas] scale changed",{scale:d.scale})}catch{}if(a){const R=vy.get(a)||{};vy.set(a,{...R,scale:d.scale})}},[d.scale,s]),_.useEffect(()=>{if(a){const R=vy.get(a)||{};vy.set(a,{...R,translate:{x:d.translate.x,y:d.translate.y}})}},[a,d.translate.x,d.translate.y]),_.useImperativeHandle(o,()=>({zoomIn:R=>d.zoomByFactor(1.1,R),zoomOut:R=>d.zoomByFactor(1/1.1,R),fitCanvas:()=>d.fitCanvas(),oneToOne:()=>d.oneToOne(),getScale:()=>d.scale,getStage:()=>u.current,getPointerPosition:()=>u.current?.getPointerPosition?.(),exportPNGFullCanvas:()=>{const R=u.current;if(!R)return null;const H=r?.width??r?.WIDTH??1536,z=r?.height??r?.HEIGHT??2048,I={scaleX:R.scaleX(),scaleY:R.scaleY(),x:R.x(),y:R.y(),width:R.width(),height:R.height()},W=g.current,K=x.current,ee=W?{x:W.x(),y:W.y(),scaleX:W.scaleX(),scaleY:W.scaleY()}:null,oe=K?{x:K.x(),y:K.y(),rotation:K.rotation()}:null;try{return R.scale({x:1,y:1}),R.position({x:0,y:0}),R.size({width:H,height:z}),W&&(W.position({x:0,y:0}),W.scale({x:1,y:1})),K&&(K.position({x:0,y:0}),K.rotation(0)),R.batchDraw(),R.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:H,height:z})}finally{K&&oe&&(K.position({x:oe.x,y:oe.y}),K.rotation(oe.rotation)),W&&ee&&(W.position({x:ee.x,y:ee.y}),W.scale({x:ee.scaleX,y:ee.scaleY})),R.scale({x:I.scaleX,y:I.scaleY}),R.position({x:I.x,y:I.y}),R.size({width:I.width,height:I.height}),R.batchDraw()}}}),[d]),_.useEffect(()=>{const R=l.current;if(!R)return;const H=()=>{h({width:R.clientWidth||1,height:R.clientHeight||1})};H();const z=new ResizeObserver(H);return z.observe(R),()=>z.disconnect()},[]),_.useEffect(()=>{if(!Array.isArray(e)||e.length===0){v(null);return}let R=1/0,H=1/0,z=-1/0,I=-1/0;const W=(Z,le)=>{Number.isFinite(Z)&&Number.isFinite(le)&&(Z<R&&(R=Z),le<H&&(H=le),Z>z&&(z=Z),le>I&&(I=le))};if(e.forEach(Z=>{if(Array.isArray(Z))Z.forEach(le=>W(le.x,le.y));else if(Z&&typeof Z=="object"){if(Z.type==="line")W(Z.startX,Z.startY),W(Z.endX,Z.endY);else if(Z.type==="rectangle")W(Z.startX,Z.startY),W(Z.endX,Z.endY);else if(Z.type==="circle"){const le=Math.hypot(Z.endX-Z.startX,Z.endY-Z.startY)/2,ue=(Z.startX+Z.endX)/2,de=(Z.startY+Z.endY)/2;W(ue-le,de-le),W(ue+le,de+le)}}}),!Number.isFinite(R)||!Number.isFinite(H)||!Number.isFinite(z)||!Number.isFinite(I)){v(null);return}const K=16,ee=Math.max(1,z-R+K*2),oe=Math.max(1,I-H+K*2);v({minX:R-K,minY:H-K,width:ee,height:oe,centerX:R-K+ee/2,centerY:H-K+oe/2})},[e]);const T=_.useMemo(()=>{if(!y)return{scale:1,x:0,y:0};const R=r?.width??r?.WIDTH??1536,H=r?.height??r?.HEIGHT??2048,z=Math.min(R/Math.max(1,y.width),H/Math.max(1,y.height),1),I=y.width*z,W=y.height*z,K=(R-I)/2,ee=(H-W)/2,oe=K-y.minX*z,Z=ee-y.minY*z;return{scale:z,x:oe,y:Z}},[y,r?.width,r?.height,r?.WIDTH,r?.HEIGHT]),k=_.useRef(!1);_.useEffect(()=>{if(k.current)return;const R=a?vy.get(a):null;R&&Number.isFinite(R.scale)&&R.translate&&Number.isFinite(R.translate.x)&&Number.isFinite(R.translate.y)?(d.setScale(R.scale),d.setTranslate(R.translate)):d.fitCanvas(),k.current=!0},[a,d]),_.useEffect(()=>{try{console.log("[ViewerCanvas] rotation changed",{rotation:n,scale:d.scale,translate:d.translate})}catch{}d.fitCanvas()},[n]),_.useEffect(()=>{d.centerAtScale(d.scale)},[n]);const b=R=>{R.evt.preventDefault();const H=u.current;if(!H)return;const z=H.getPointerPosition(),I=Math.pow(1.0015,-R.evt.deltaY);d.zoomByFactor(I,z)},E=_.useRef(!1),N=_.useRef({x:0,y:0}),P=()=>{const R=l.current;if(!R)return 1;const H=R.clientWidth||1,z=R.clientHeight||1,I=r?.width??r?.WIDTH??1,W=r?.height??r?.HEIGHT??1,K=Math.abs(n%180)===90,ee=K?W:I,oe=K?I:W,Z=Math.min(H/ee,z/oe);return Math.min(Z,1)},M=R=>{const H=P();d.scale<=H||(E.current=!0,N.current={x:R.evt.clientX,y:R.evt.clientY})},j=R=>{if(!E.current)return;const H=R.evt.clientX-N.current.x,z=R.evt.clientY-N.current.y;N.current={x:R.evt.clientX,y:R.evt.clientY},d.panBy(H,z)},A=()=>{E.current=!1},D=1536,L=2048,G=(R,H)=>{if(console.log(`[ViewerCanvas] Rendering drawing element ${H}:`,R),Array.isArray(R))return console.log(`[ViewerCanvas] Array item with ${R.length} points:`,R.slice(0,3)),c.jsx(Wi,{points:R.flatMap(z=>[z.x,z.y]),stroke:R[0]?.color||"#000000",strokeWidth:R[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},H);if(R?.type==="line")return c.jsx(Wi,{points:[R.startX,R.startY,R.endX,R.endY],stroke:R.color,strokeWidth:R.thickness,lineCap:"round"},H);if(R?.type==="rectangle"){const z=Math.abs(R.endX-R.startX),I=Math.abs(R.endY-R.startY),W=Math.min(R.startX,R.endX),K=Math.min(R.startY,R.endY);return c.jsx(Si,{x:W,y:K,width:z,height:I,stroke:R.color,strokeWidth:R.thickness,fill:"transparent"},H)}else if(R?.type==="circle"){const z=Math.sqrt(Math.pow(R.endX-R.startX,2)+Math.pow(R.endY-R.startY,2))/2,I=(R.startX+R.endX)/2,W=(R.startY+R.endY)/2;return c.jsx(Nf,{x:I,y:W,radius:z,stroke:R.color,strokeWidth:R.thickness,fill:"transparent"},H)}return null},X=_.useRef(new Map),se=_.useRef(null),Q=_.useRef({x:0,y:0}),re=_.useCallback(R=>{const H=l.current;H&&(H.setPointerCapture?.(R.pointerId),X.current.set(R.pointerId,{x:R.clientX,y:R.clientY}),N.current={x:R.clientX,y:R.clientY})},[]),B=_.useCallback(R=>{const H=X.current;if(H.has(R.pointerId)){if(H.set(R.pointerId,{x:R.clientX,y:R.clientY}),H.size===2){const z=Array.from(H.values()),I=z[1].x-z[0].x,W=z[1].y-z[0].y,K=Math.hypot(I,W),ee={x:(z[0].x+z[1].x)/2,y:(z[0].y+z[1].y)/2},oe=u.current,Z=oe&&oe.getPointerPosition()||ee;if(se.current!=null){const le=K/Math.max(1,se.current);d.zoomByFactor(le,Z)}se.current=K,Q.current=Z}else if(H.size===1){const z=P();if(d.scale<=z)return;const I=R.clientX-N.current.x,W=R.clientY-N.current.y;N.current={x:R.clientX,y:R.clientY},d.panBy(I,W)}}},[]),V=_.useCallback(R=>{const H=l.current;H&&(H.releasePointerCapture?.(R.pointerId),X.current.delete(R.pointerId),X.current.size<2&&(se.current=null),E.current=!1)},[]);return c.jsx("div",{ref:l,style:{width:"100%",height:"100%",display:"block",backgroundColor:"transparent",touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onPointerDown:re,onPointerMove:B,onPointerUp:V,children:c.jsx(vm,{ref:u,width:f.width,height:f.height,onWheel:b,onMouseDown:M,onMouseMove:j,onMouseUp:A,onMouseLeave:A,children:c.jsx(ym,{children:c.jsx(eu,{ref:g,x:d.translate.x,y:d.translate.y,scaleX:d.scale,scaleY:d.scale,children:(()=>{const R=(n%360+360)%360;let H=0,z=0;R===90?H=L:R===180?(H=D,z=L):R===270&&(z=D);try{console.log("[ViewerCanvas] rotatedGroup offset",{rotation:n,norm:R,tx:H,ty:z,canvasW:D,canvasH:L})}catch{}return c.jsxs(eu,{ref:x,x:H,y:z,rotation:n,children:[c.jsx(Si,{x:0,y:0,width:D,height:L,fill:"white"}),c.jsxs(eu,{x:T.x,y:T.y,scaleX:T.scale,scaleY:T.scale,children:[Array.isArray(e)?(console.log("[ViewerCanvas] Rendering",e.length,"drawing elements"),e.map((I,W)=>G(I,W))):null,Array.isArray(t)&&t.map((I,W)=>c.jsxs(eu,{x:I.x,y:I.y,children:[c.jsx(Si,{width:I.width,height:I.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}}),c.jsx(Bu,{text:I.text,x:8,y:8,width:Math.max(0,(I.width||0)-16),height:Math.max(0,(I.height||0)-16),fontSize:I.fontSize||14,fill:I.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"})]},`tb-${W}`))]})]})})()})})})})});dH.displayName="ViewerCanvas";const C0e=({zoom:e,onZoomIn:t,onZoomOut:r,onRotate:n,onDownload:s,onFullscreen:a,isFullscreen:i})=>c.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 items-center justify-center",children:[c.jsx(ot,{onClick:t,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom In",children:c.jsx(s0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(ot,{onClick:r,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom Out",children:c.jsx(i0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(ot,{onClick:n,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Rotate",children:c.jsx(t0e,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(ot,{onClick:s,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Download",children:c.jsx(Jde,{className:"w-4 h-4 mx-auto my-auto"})}),c.jsx(ot,{onClick:a,variant:"secondary",size:"icon",className:"w-10 h-10",title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?c.jsx(iH,{className:"w-4 h-4 mx-auto my-auto"}):c.jsx(Zde,{className:"w-4 h-4 mx-auto my-auto"})})]}),E0e=({currentQuestion:e,totalQuestions:t,onPrevious:r,onNext:n,drawingDataLength:s})=>t<=1?null:c.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx(ot,{onClick:r,disabled:e===0,variant:"outline",size:"sm",children:"Previous"}),c.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",e+1," of ",t]}),c.jsx(ot,{onClick:n,disabled:e===t-1,variant:"outline",size:"sm",children:"Next"})]}),c.jsxs("div",{className:"text-sm text-gray-500",children:[s," lines"]})]})}),fH=({drawing:e,isOpen:t,onClose:r,onScoreChange:n,onMaxScoreChange:s,isTeacherView:a=!1,onSaveScore:i})=>{const{drawingState:o,setDrawingState:l,drawingData:u,setDrawingData:d,textBoxes:f,setTextBoxes:h,saveToHistoryState:g,undo:x,redo:y,canUndoState:v,canRedoState:T}=h0e(),{questionsData:k,currentQuestionIndex:b,setCurrentQuestionIndex:E}=S0e(e),{zoom:N,position:P,handleZoomIn:M,handleZoomOut:j}=_0e(oH,qc),{isFullscreen:A,enterFullscreen:D,exitFullscreen:L}=k0e(o,l),{handleTouchStart:G,handleTouchMove:X,handleTouchEnd:se}=b0e(o,l,u,d,g,x,y,v,T),Q=_.useRef(null),re=_.useRef(null),[B,V]=_.useState(1),[R,H]=_.useState(""),[z,I]=_.useState("");_.useEffect(()=>{if(console.log("DrawingModal - questionsData:",k),console.log("DrawingModal - currentQuestionIndex:",b),k.length>0){const de=k[b]?.drawingData||[],Te=k[b]?.textBoxes||[];console.log("DrawingModal - setting drawingData:",de),console.log("DrawingModal - setting textBoxes:",Te),d(de),h(Te)}},[k,b,d,h]),_.useEffect(()=>{t&&e&&(H((Number.isFinite(e.score)?e.score:0).toString()),I("10"))},[t,e]);const W=()=>{b>0&&E(b-1)},K=()=>{b<k.length-1&&E(b+1)},ee=()=>{v&&x()},oe=()=>{T&&y()};_.useEffect(()=>{const de=Te=>{(Te.ctrlKey||Te.metaKey)&&(Te.key==="z"&&!Te.shiftKey?(Te.preventDefault(),ee()):(Te.key==="y"||Te.key==="z"&&Te.shiftKey)&&(Te.preventDefault(),oe()))};return document.addEventListener("keydown",de),()=>document.removeEventListener("keydown",de)},[ee,oe]);const Z=()=>{l(de=>({...de,rotation:(de.rotation+90)%360}))},le=()=>{if(a&&re.current){const pe=re.current.exportPNGFullCanvas();if(!pe)return;const Ae=document.createElement("a");Ae.href=pe,Ae.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae);return}const de=Q.current;if(!de)return;const Te=de.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:qc.WIDTH,height:qc.HEIGHT}),ie=document.createElement("a");ie.href=Te,ie.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},ue=async()=>{if(!a)return r();const de=parseInt(R,10),Te=10;Number.isFinite(de)&&(typeof i=="function"?await i({resultId:e.id,score:Math.max(0,Math.min(10,de)),maxScore:Te}):(n&&n(e.id,de),s&&s(e.id,Te))),r()};return!t||!e?null:c.jsx(il,{children:c.jsx(gt.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:c.jsxs(gt.div,{className:"bg-white rounded-lg shadow-xl max-w-4xl h-[90vh] w-full mx-4 flex flex-col select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:de=>de.stopPropagation(),children:[c.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Drawing Submission"}),c.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," ",e.surname," - ",e.test_name]})]}),c.jsx(ot,{onClick:r,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600",children:c.jsx(iH,{className:"w-5 h-5"})})]}),k.length>1&&c.jsx(E0e,{currentQuestion:b,totalQuestions:k.length,onPrevious:W,onNext:K,drawingDataLength:k[b]?.drawingData?.length||0}),c.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[c.jsxs("div",{className:"flex-1 min-h-0 relative overflow-hidden bg-gray-100 p-0 sm:p-4 select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},children:[a?c.jsx(dH,{ref:re,drawingData:u,textBoxes:f,canvasSize:{width:qc.WIDTH,height:qc.HEIGHT,WIDTH:qc.WIDTH,HEIGHT:qc.HEIGHT},rotation:o.rotation,onScaleChange:V}):c.jsx(uH,{ref:Q,drawingData:u,textBoxes:f,drawingState:o,canvasSize:{width:qc.WIDTH,height:qc.HEIGHT,WIDTH:qc.WIDTH,HEIGHT:qc.HEIGHT},zoom:N,position:P,onTouchStart:G,onTouchMove:X,onTouchEnd:se,mousePosition:{x:0,y:0},isMouseOverCanvas:!1,isEraserDrawing:!1}),c.jsx(C0e,{zoom:a?B:N,onZoomIn:()=>{if(a&&re.current){try{console.log("[ZoomButton] ZoomIn click (teacher)",{before:re.current.getScale?.()})}catch{}re.current.zoomIn(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomIn after",{after:re.current.getScale?.()})}catch{}},0)}else M()},onZoomOut:()=>{if(a&&re.current){try{console.log("[ZoomButton] ZoomOut click (teacher)",{before:re.current.getScale?.()})}catch{}re.current.zoomOut(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomOut after",{after:re.current.getScale?.()})}catch{}},0)}else j()},onRotate:Z,onDownload:le,onFullscreen:A?L:D,isFullscreen:A}),c.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-800 bg-opacity-70 text-white px-3 py-1 rounded-full text-sm",children:[Math.round((a?B:N)*100),"%"]})]}),a&&c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Score:"}),c.jsx("input",{type:"number",min:"0",max:10,value:R,onChange:de=>H(de.target.value),className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max:"}),c.jsx("input",{type:"number",value:10,disabled:!0,className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded bg-gray-100"})]}),c.jsx(ot,{onClick:ue,variant:"primary",size:"sm",children:"Save"})]})})]})]})})})},hH=({testType:e,testId:t,studentAnswers:r,onBackToCabinet:n,compact:s=!1,showAll:a=!1,onToggleShowAll:i,maxInitial:o=3})=>{const l=hl(),{user:u,isAuthenticated:d}=Ps(),{testResults:f,loadTestResults:h}=v2(),[g,x]=_.useState(!0),[y,v]=_.useState(""),[T,k]=_.useState([]),[b,E]=_.useState([]),[N,P]=_.useState(null),[M,j]=_.useState([]),[A,D]=_.useState(0),[L,G]=_.useState(0),[X,se]=_.useState(!1),[Q,re]=_.useState(null),B=_.useCallback(Z=>{const le=Z.best_retest_score||Z.score,ue=Z.best_retest_max_score||Z.max_score,de=Math.round(le/ue*100);return{score:le,maxScore:ue,percentage:de}},[]);_.useEffect(()=>{V()},[e,t]),_.useEffect(()=>{!e&&!t&&(f&&f.results?(xe.debug(" Using cached test results from TestContext"),E(f.results),x(!1)):H())},[e,t,f]);const V=_.useCallback(async()=>{xe.debug(" Initializing Student Results...");try{if(x(!0),v(""),!d||!u){xe.debug(" User not authenticated"),v("User not authenticated");return}if(u.role!==Ro.STUDENT){xe.error(" Invalid user role for student results:",u.role),v("Access denied. Student role required.");return}xe.debug(" Loading test results..."),await h(u?.student_id||u?.id||""),e&&t&&r&&(xe.debug(" Loading specific test results..."),await R(e,t,r)),xe.debug(" Student Results initialization complete!")}catch(Z){xe.error(" Error initializing student results:",Z),v("Failed to initialize student results")}finally{x(!1)}},[d,u,e,t,r,h]),R=_.useCallback(async(Z,le,ue)=>{xe.debug(" Loading specific test results:",Z,le);try{const de=await Pn.getTestInfo(Z,le);xe.debug(" Test info loaded:",de),P(de);const Te=await Pn.getTestQuestions(Z,le);xe.debug(" Test questions loaded:",Te),j(Te);const ie=Mf(Te,ue,Z).score,pe=Te.length>0?Math.round(ie/Te.length*100):0;D(ie),G(pe),xe.debug(" Test results calculated:",{score:ie,percentage:pe})}catch(de){throw xe.error(" Error loading specific test results:",de),de}},[]),H=_.useCallback(async(Z=0)=>{xe.debug(" Loading all student results using existing test results API...",Z>0?`(retry ${Z})`:"");try{if(!(u?.student_id||u?.sub))throw new Error("Student ID not found");const ue=await Pn.getStudentTestResults();if(ue.success){xe.debug(" All student results loaded:",ue.results.length,"results");const de=ue.results.map(Te=>({...Te,caught_cheating:Te.caught_cheating||!1,visibility_change_times:Te.visibility_change_times||0}));E(de),re(new Date),ue.results.length===0&&Z===0&&(xe.debug(" No results found, retrying in 2 seconds..."),setTimeout(()=>{H(1)},2e3))}else throw new Error(ue.error||"Failed to load student results")}catch(le){xe.error(" Error loading all student results:",le),v(le.message)}},[u]),z=_.useCallback(Z=>({"Listening and Speaking":"L&S","Reading and Writing":"R&W","English for Career":"Eng for Career","Science Fundamental":"Science F","Science Supplementary":"Science S","Math Fundamental":"Math F","Math Supplementary":"Math S","English for Communication":"Eng for Comm"})[Z]||Z,[]),I=_.useCallback(Z=>{if(!Z||Z.length===0)return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No results available"})});const le=a?Z:Z.slice(0,o);return c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),c.jsx("th",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:le.map((ue,de)=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs font-medium text-gray-900",children:c.jsx("span",{className:"bg-blue-100 text-blue-800 px-0.5 sm:px-2 py-0.5 rounded text-xs",children:z(ue.subject)})}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-12 sm:max-w-none",children:ue.teacher_name}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-16 sm:max-w-none",children:ue.test_name}),c.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500",children:c.jsx("div",{className:"flex flex-col items-center space-y-1",children:ue.test_type==="drawing"?ue.score!==null?c.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Te,maxScore:ie,percentage:pe}=B(ue);return pe>=80?"bg-green-100 text-green-800":pe>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Te,maxScore:ie,percentage:pe}=B(ue);return`${Te}/${ie} (${pe}%)`})()}):c.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):ue.test_type==="speaking"?ue.score!==null?c.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Te,maxScore:ie,percentage:pe}=B(ue);return pe>=80?"bg-green-100 text-green-800":pe>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Te,maxScore:ie,percentage:pe}=B(ue);return`${Te}/${ie} (${pe}%)`})()}):c.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):c.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Te,maxScore:ie,percentage:pe}=B(ue);return pe>=80?"bg-green-100 text-green-800":pe>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Te,maxScore:ie,percentage:pe}=B(ue);return`${Te}/${ie} (${pe}%)`})()})})}),c.jsx("td",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:new Date(ue.submitted_at).toLocaleDateString()})]},de))})]}),Z.length>o&&i&&c.jsx("div",{className:"text-center pt-4",children:c.jsx("button",{onClick:i,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:a?"Show Less":`Show ${Z.length-o} More`})})]})},[z,a,o,i]),W=_.useCallback((Z,le)=>{if(xe.debug(" formatAnswer called with:",{answer:Z,testType:le,answerType:typeof Z}),!Z)return"No answer";switch(le){case"true_false":const ue=typeof Z=="boolean"?Z:Z==="true";return xe.debug(" Boolean answer processed:",ue),ue?"True":"False";case"multiple_choice":return Z.toUpperCase();case"input":return Z;case"word_matching":return typeof Z=="object"?Object.entries(Z).map(([de,Te])=>`${de}  ${Te}`).join(", "):Z;case"drawing":return"Drawing submitted";default:return Z}},[]),K=_.useCallback(()=>!N||!M||!r?null:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Test Results: ",N.test_name||N.title||"Test"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600",children:A}),c.jsx("p",{className:"text-sm text-gray-500",children:"Correct Answers"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-900",children:M.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Total Questions"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`text-3xl font-bold ${L>=80?"text-green-600":L>=60?"text-yellow-600":"text-red-600"}`,children:[L,"%"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Score"})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions Review"}),c.jsx("div",{className:"space-y-4",children:M.map((Z,le)=>{const ue=r[le],de=Tv(Z,e),Te=Hp(Z,ue,e);return c.jsxs("div",{className:`border rounded-lg p-4 ${Te?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("h4",{className:"font-medium text-gray-900",children:["Question ",le+1]}),c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Te?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Te?"Correct":"Incorrect"})]}),c.jsx("p",{className:"text-gray-700 mb-3",children:Z.question}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Your Answer:"}),c.jsx("p",{className:"text-sm text-gray-900",children:W(ue,e)})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Correct Answer:"}),c.jsx("p",{className:"text-sm text-gray-900",children:W(de,e)})]})]})]},le)})})]})]}),[N,M,r,e,A,L,Tv,Hp,W]),ee=_.useCallback(()=>{if(!b||b.length===0)return c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No test results available yet."})});const Z={};return b.forEach(le=>{const ue=le.subject||"Unknown Subject";Z[ue]||(Z[ue]=[]),Z[ue].push(le)}),c.jsx("div",{className:"space-y-6",children:Object.entries(Z).map(([le,ue])=>c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:le})}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ue.map((de,Te)=>{const{score:ie,maxScore:pe,percentage:Ae}=B(de),Me=Ae>=80?"text-green-600":Ae>=60?"text-yellow-600":"text-red-600";return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:de.test_name}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de.teacher_name||"Unknown"}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:Me,children:[ie,"/",pe," (",Ae,"%)"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(de.submitted_at).toLocaleDateString()})]},Te)})})]})})]},le))})},[b]);_.useCallback(()=>{xe.debug(" Clearing test data and returning to cabinet..."),P(null),j([]),setStudentAnswers(null),D(0),G(0),se(!1),n?n():l("/student")},[n,l]);const oe=_.useCallback(()=>{xe.debug(" Navigating back to cabinet..."),n?n():l("/student")},[n,l]);return _.useCallback((Z,le)=>{const ue={id:Date.now(),message:Z,type:le,timestamp:new Date};k(de=>[...de,ue]),setTimeout(()=>{k(de=>de.filter(Te=>Te.id!==ue.id))},Km.NOTIFICATION_DURATION)},[]),g?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Student Results..."})]})}):y?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:y}),c.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?c.jsxs("div",{children:[g?c.jsxs("div",{className:"text-center py-8",children:[c.jsx(un,{size:"md"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading results..."})]}):y?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-red-500 text-4xl mb-2",children:""}),c.jsx("p",{className:"text-red-600",children:y})]}):I(b),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(Z=>c.jsx(iu,{type:Z.type,message:Z.message,onClose:()=>k(le=>le.filter(ue=>ue.id!==Z.id))},Z.id))})]}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Results"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",Q?Q.toLocaleString():"Never"]})]}),c.jsxs("div",{className:"flex space-x-3",children:[N&&c.jsx(ot,{variant:"outline",onClick:()=>se(!X),children:X?"Hide Details":"Show Details"}),c.jsx(ot,{variant:"outline",onClick:oe,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:X&&N?K():ee()}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:T.map(Z=>c.jsx(iu,{type:Z.type,message:Z.message,onClose:()=>k(le=>le.filter(ue=>ue.id!==Z.id))},Z.id))}),selectedDrawing&&c.jsx(fH,{drawing:selectedDrawing,isOpen:isDrawingModalOpen,onClose:()=>setIsDrawingModalOpen(!1)})]})},N0e=({isMenuOpen:e,onToggleMenu:t,onShowPasswordChange:r})=>{const n=hl(),{user:s,isAuthenticated:a,logout:i}=Ps(),{studentData:o,loadStudentData:l}=a3(),{activeTests:u,testResults:d,loadActiveTests:f,loadTestResults:h,viewTestDetails:g,testDetailsModal:x,closeTestDetailsModal:y}=v2(),[v,T]=_.useState(!0),[k,b]=_.useState(""),[E,N]=_.useState([]),[P,M]=_.useState(null),[j,A]=_.useState(!1),[D,L]=_.useState(null),[G,X]=_.useState(null),[se,Q]=_.useState(new Set),[re,B]=_.useState(!1),[V,R]=_.useState(!1),[H,z]=_.useState(!1),[I,W]=_.useState(!1);_.useEffect(()=>{K()},[]),_.useEffect(()=>()=>{z(!1)},[]),_.useEffect(()=>{if(H){const pe=setTimeout(()=>{z(!1)},1e3);return()=>clearTimeout(pe)}},[H]);const K=_.useCallback(async()=>{xe.debug(" Initializing Student Cabinet...");try{if(T(!0),b(""),!a||!s){xe.debug(" User not authenticated, redirecting to login"),n("/login");return}if(s.role!==Ro.STUDENT){xe.error(" Invalid user role for student cabinet:",s.role),b("Access denied. Student role required.");return}xe.debug(" Loading active tests (single API call)...");const pe=s?.student_id||s?.id||"";if(ee(pe)){xe.debug(" Cache refresh triggered - clearing cache");try{const Me=`student_active_tests_${pe}`,Je=`student_results_table_${pe}`;localStorage.removeItem(Me),localStorage.removeItem(Je)}catch{}}else xe.debug(" Using existing cache - no refresh needed");try{localStorage.removeItem(`student_active_tests_${pe}`)}catch{}await f(pe),xe.debug(" Student Cabinet initialization complete!")}catch(pe){xe.error(" Error initializing student cabinet:",pe),b("Failed to initialize student cabinet")}finally{T(!1)}},[a,s,n]),ee=_.useCallback(pe=>{if(window.studentCabinetRefreshRequested)return window.studentCabinetRefreshRequested=!1,xe.debug(" Manual refresh requested"),!0;if(window.recentTestCompleted)return window.recentTestCompleted=!1,xe.debug(" Test completed - cache refresh triggered"),!0;const Ae=localStorage.getItem(`last_cabinet_refresh_${pe}`);if(Ae&&Date.now()-parseInt(Ae)>1800*1e3)return xe.debug(" Time-based refresh triggered"),!0;try{for(let Me=0;Me<localStorage.length;Me++){const Je=localStorage.key(Me);if(Je&&Je.startsWith(`retest_assignment_id_${pe}_`))return xe.debug(" Retest assignment key detected, forcing cache refresh:",Je),!0}}catch{}return xe.debug(" No refresh triggers - using existing cache"),!1},[]);_.useCallback(async()=>{xe.debug(" Calculating average score...");try{if(d&&d.length>0){const pe=d.reduce((Me,Je)=>{const Ve=Je.best_retest_score||Je.score,Dt=Je.best_retest_max_score||Je.max_score;return typeof Ve=="number"&&typeof Dt=="number"&&Dt>0?Me+Math.round(Ve/Dt*100):Me},0),Ae=Math.round(pe/d.length);X(Ae),xe.debug(" Average score calculated:",Ae)}}catch(pe){xe.error(" Error calculating average score:",pe)}},[d]),_.useEffect(()=>{if(H){xe.debug(" Skipping completed tests initialization during navigation");return}const pe=s?.student_id||s?.id;if(!pe){xe.debug(" Student ID not available yet, skipping localStorage initialization");return}const Ae=new Set;for(let Me=0;Me<localStorage.length;Me++){const Je=localStorage.key(Me);if(Je&&Je.startsWith(`test_completed_${pe}_`)&&localStorage.getItem(Je)==="true"){const Dt=Je.replace(`test_completed_${pe}_`,"").split("_");if(Dt.length>=2){const lt=Dt[0],At=Dt.slice(1).join("_"),vt=`${lt}_${At}`;Ae.add(vt),xe.debug(" Found completed test in localStorage:",vt)}}}Q(Ae),W(!0),xe.debug(" Initialized completed tests from localStorage:",Array.from(Ae))},[s?.student_id,s?.id,H]),_.useEffect(()=>{xe.debug(" testResults structure:",d);const pe=d?.results||d;if(xe.debug(" resultsArray:",pe),pe&&pe.length>0){const Ae=s?.student_id||s?.id||"",Me=new Set;pe.forEach(Je=>{const Ve=`${Je.test_type}_${Je.test_id}`;Me.add(Ve),localStorage.setItem(`test_completed_${Ae}_${Je.test_type}_${Je.test_id}`,"true")}),Q(Je=>{const Ve=new Set([...Je,...Me]);return xe.debug(" Updated completed tests (merged):",Array.from(Ve)),Ve})}},[d,s?.student_id,s?.id]);const oe=_.useCallback(async(pe,Ae,Me=!1,Je=null)=>{xe.debug(" Checking test completion:",pe,Ae,"retestAvailable:",Me);try{const Ve=s?.student_id||s?.id||"";if(Me){xe.debug(" Retest available from backend, checking attempt limits.");const vt=`retest_attempts_${Ve}_${pe}_${Ae}`;let ct;try{const nt=localStorage.getItem(vt);ct=nt?JSON.parse(nt):void 0}catch(nt){xe.warn(" Failed to parse attempts metadata:",nt)}const bt=[];for(let nt=1;nt<=10;nt++){const at=`retest_attempt${nt}_${Ve}_${pe}_${Ae}`;localStorage.getItem(at)==="true"&&bt.push(at)}const Ut=bt.length,Bt=typeof Je?.retest_attempts_left=="number"?Je.retest_attempts_left:void 0,Vt=typeof Je?.retest_attempt_number=="number"?Je.retest_attempt_number:void 0,We=typeof Je?.retest_max_attempts=="number"?Je.retest_max_attempts:void 0;if(Bt===0)return xe.debug(" API reports no attempts left. Retest considered completed."),!0;const Ue=We??(Bt!=null&&Vt!=null?Bt+Vt:ct?.max??3),tt=ct?.used??Ut;return xe.debug(" Retest check:",{attemptsMeta:ct,attemptKeys:bt,usedAttempts:tt,totalAttempts:Ue,attemptsLeftFromApi:Bt,retriesRemaining:Bt??Ue-tt}),tt>=Ue?(xe.debug(" Maximum retest attempts reached (meta/localStorage)."),!0):(xe.debug(" Retest attempts available, allowing start."),!1)}const Dt=`test_completed_${Ve}_${pe}_${Ae}`,lt=localStorage.getItem(Dt);if(xe.debug(" localStorage key:",Dt),xe.debug(" localStorage value:",lt),pe==="word_matching"){xe.debug(" Debug: All localStorage keys for student",Ve);for(let vt=0;vt<localStorage.length;vt++){const ct=localStorage.key(vt);ct&&ct.includes(Ve)&&ct.includes("word_matching")&&xe.debug(" Found word_matching key:",ct,"=",localStorage.getItem(ct))}}if(lt==="true")return xe.debug(" Found completion status in local storage:",lt),!0;const At=d?.results||d;return At&&At.length>0&&(xe.debug(" Checking database results:",At.length,"results"),At.some(ct=>(xe.debug(" Checking result:",ct.test_type,ct.test_id,"vs",pe,Ae),ct.test_type===pe&&ct.test_id===Ae)))?(xe.debug(" Found completion status in database results"),localStorage.setItem(Dt,"true"),!0):(xe.debug(" Test not completed according to local storage or database"),!1)}catch(Ve){return xe.error(" Error checking test completion:",Ve),!1}},[d,s?.student_id,s?.id]),Z=_.useCallback((pe,Ae)=>{const Me={id:Date.now(),message:pe,type:Ae,timestamp:new Date};N(Je=>[...Je,Me]),setTimeout(()=>{N(Je=>Je.filter(Ve=>Ve.id!==Me.id))},Km.NOTIFICATION_DURATION)},[]),le=_.useCallback(async pe=>{xe.debug(" Showing test details:",pe);try{await g(pe.test_type,pe.test_id,pe.test_name)}catch(Ae){xe.error("Error loading test details:",Ae),Z("Failed to load test details","error")}},[g,Z]),ue=_.useCallback(pe=>{xe.debug(" Starting test:",pe);const Ae=`${pe.test_type}_${pe.test_id}`;if(se.has(Ae)&&!pe?.retest_available){Z("This test has already been completed","warning");return}if(xe.debug(" Checking retest conditions:"),xe.debug(" test.retest_available:",pe?.retest_available),xe.debug(" testKey:",Ae),xe.debug(" completedTests.has(testKey):",se.has(Ae)),xe.debug(" completedTests:",Array.from(se)),pe?.retest_available&&!pe?.retest_is_completed){const Me=s?.student_id||s?.id||"",Je=`retest1_${Me}_${pe.test_type}_${pe.test_id}`;localStorage.setItem(Je,"true"),xe.debug(" Set retest key:",Je);const Ve=`retest_in_progress_${Me}_${pe.test_type}_${pe.test_id}`;localStorage.setItem(Ve,"1"),xe.debug(" Set in-progress retest lock:",Ve);try{const Dt=`anti_cheating_${Me}_${pe.test_type}_${pe.test_id}`;localStorage.removeItem(Dt);const lt=`speaking_test_data_${Me}_${pe.test_id}`;localStorage.removeItem(lt);const At=`speaking_progress_${pe.test_id}`;localStorage.removeItem(At);const vt=`_${Me}_${pe.test_type}_${pe.test_id}`,ct=[];for(let Ut=0;Ut<localStorage.length;Ut++){const Bt=localStorage.key(Ut);Bt&&(Bt.startsWith("retest_attempt")||(Bt.endsWith(vt)||Bt.includes(`answers_${Me}_${pe.test_type}_${pe.test_id}`)||Bt.includes(`progress_${Me}_${pe.test_type}_${pe.test_id}`)||Bt.includes(`state_${Me}_${pe.test_type}_${pe.test_id}`)||Bt.includes(`selected_${Me}_${pe.test_type}_${pe.test_id}`))&&ct.push(Bt))}ct.forEach(Ut=>localStorage.removeItem(Ut)),xe.debug(" Cleared generic cached keys for retest start:",ct);const bt=`retest_attempts_${Me}_${pe.test_type}_${pe.test_id}`;xe.debug(" Cleared per-test cached keys for retest start:",{antiCheatKey:Dt,speakingCacheKey:lt,speakingProgressKey:At})}catch{}if(xe.debug(" Test retest_assignment_id:",pe.retest_assignment_id),xe.debug(" Test retest_assignment_id type:",typeof pe.retest_assignment_id),pe?.retest_assignment_id){const Dt=`retest_assignment_id_${Me}_${pe.test_type}_${pe.test_id}`;localStorage.setItem(Dt,String(pe.retest_assignment_id)),xe.debug(" Set retest assignment ID:",Dt,"=",pe.retest_assignment_id)}else xe.debug(" No retest assignment ID found in test data")}else xe.debug(" Retest assignment ID storage skipped - retest not available");if(z(!0),xe.debug(" Set isStartingTest to true for test:",pe.test_type),pe.test_type==="matching_type"){xe.debug(" Redirecting to matching test page for testId:",pe.test_id),n(`/student/matching-test/${pe.test_id}`);return}if(pe.test_type==="word_matching"){xe.debug(" Redirecting to word matching test page for testId:",pe.test_id),n(`/student/word-matching-test/${pe.test_id}`);return}if(pe.test_type==="speaking"){xe.debug(" Redirecting to speaking test page for testId:",pe.test_id),n(`/student/speaking-test/${pe.test_id}`);return}n(`/student/test/${pe.test_type}/${pe.test_id}`)},[n,se,Z,s?.student_id,s?.id]),de=_.useCallback(()=>{B(pe=>!pe)},[]),Te=_.useCallback(()=>{R(pe=>!pe)},[]),ie=_.useCallback(async pe=>{if(xe.debug(" Starting test:",pe),H){xe.debug(" Test already starting, ignoring click");return}try{if(await oe(pe.test_type,pe.test_id,pe?.retest_available,pe)){Z("This test has already been completed","warning");return}ue(pe)}catch(Ae){xe.error(" Error starting test:",Ae),Z("Failed to start test. Please try again.","error")}},[oe,ue,Z,H]);return _.useCallback(pe=>{xe.debug(" Viewing test details:",pe),le(pe)},[le]),v?c.jsx(gt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:c.jsxs(gt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx(un,{size:"lg"}),c.jsx(gt.p,{className:"mt-4 text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.3},children:"Loading Student Cabinet..."})]})}):k?c.jsx(gt.div,{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:c.jsx(gt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:c.jsxs(gt.div,{className:"bg-white border border-red-200 rounded-xl p-8 max-w-md shadow-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,duration:.3},children:[c.jsx(gt.div,{className:"text-4xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3,type:"spring"},children:""}),c.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Cabinet Error"}),c.jsx("p",{className:"text-red-600 mb-6",children:k}),c.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs(gt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(gt.div,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-6",children:[c.jsxs(gt.div,{className:"flex items-center space-x-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(gt.div,{className:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:c.jsx("span",{className:"text-white font-semibold text-xl",children:s?.name?.charAt(0)||"S"})})}),c.jsxs("div",{children:[c.jsxs("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white",children:[s?.name," ",s?.surname]}),c.jsxs("p",{className:"text-blue-100 text-sm sm:text-base md:text-lg",children:["Grade ",s?.grade," - Class ",s?.class]})]})]}),c.jsxs(gt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsxs("button",{onClick:t,className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",style:{zIndex:1e3},children:[c.jsx("span",{className:"hidden sm:inline",children:"Menu"}),c.jsx(gt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:e?180:0},transition:{duration:.2},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),c.jsx(il,{children:e&&c.jsx(gt.div,{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:c.jsxs("div",{className:"py-2",children:[c.jsx(gt.button,{onClick:r,className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),c.jsx(gt.button,{onClick:()=>{t(),i()},className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),c.jsxs(gt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:c.jsx("div",{className:"lg:col-span-1 space-y-6",children:G!==null&&c.jsx(gt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{children:"Average Score"})}),c.jsx($t.Body,{children:c.jsxs(gt.div,{className:"text-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.8,duration:.3},children:[c.jsxs(gt.div,{className:"text-4xl font-bold text-blue-600 mb-2",initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.5,type:"spring"},children:[G,"%"]}),c.jsx("p",{className:"text-sm text-gray-500",children:"Overall Performance"})]})})]})})})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{className:"text-center",children:"Active Tests"})}),c.jsx($t.Body,{children:u&&u.length>0?c.jsxs("div",{className:"relative",children:[xe.debug(" Rendering overlay, isStartingTest:",H),H&&c.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg border-2 border-blue-200",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Starting test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait..."})]})}),c.jsxs("div",{className:"space-y-4",children:[(re?u:u.slice(0,3)).map((pe,Ae)=>c.jsx(gt.div,{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:re?0:.7+Ae*.1,duration:.3},whileHover:{scale:1.02},children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"sm:hidden",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1 break-words leading-tight",children:pe.test_name}),c.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500",children:[c.jsx("span",{children:pe.teacher_name}),c.jsx("span",{children:""}),c.jsx("span",{children:new Date(pe.assigned_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})})]})]}),c.jsxs("div",{className:"hidden sm:flex items-center space-x-3 text-sm",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 break-words leading-tight",children:pe.test_name}),c.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:pe.subject}),c.jsx("span",{className:"text-gray-500",children:pe.teacher_name}),c.jsx("span",{className:"text-gray-500",children:new Date(pe.assigned_at).toLocaleDateString()})]})]}),c.jsx("div",{className:"flex space-x-2 ml-4",children:(()=>{const Me=`${pe.test_type}_${pe.test_id}`,Je=se.has(Me);let Ve=!1;if(typeof window<"u"&&pe?.retest_available){const Dt=s?.student_id||s?.id||"";if(Dt)try{const lt=`test_completed_${Dt}_${pe.test_type}_${pe.test_id}`,At=localStorage.getItem(lt)==="true",vt=`retest_attempts_${Dt}_${pe.test_type}_${pe.test_id}`;let ct;const bt=localStorage.getItem(vt);if(bt)try{ct=JSON.parse(bt)}catch(Ue){xe.warn(" Failed to parse retest attempts metadata in render:",Ue)}let Ut=typeof ct?.used=="number"?ct.used:void 0;if(Ut==null){let Ue=0;for(let tt=1;tt<=10;tt++){const nt=`retest_attempt${tt}_${Dt}_${pe.test_type}_${pe.test_id}`;localStorage.getItem(nt)==="true"&&Ue++}Ut=Ue}const Bt=typeof pe?.retest_attempts_left=="number"?pe.retest_attempts_left:void 0,We=(typeof pe?.retest_max_attempts=="number"?pe.retest_max_attempts:void 0)??(ct?.max!=null?ct.max:Bt!=null&&typeof pe?.retest_attempt_number=="number"?Bt+pe.retest_attempt_number:void 0);(Bt===0||We!=null&&Ut!=null&&Ut>=We||At&&Bt==null&&We==null)&&(Ve=!0)}catch(lt){xe.warn(" Failed to evaluate local retest completion:",lt)}}return I?pe?.retest_is_completed||Ve?c.jsx(ot,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):pe?.retest_available&&!pe?.retest_is_completed&&!Ve?(pe.retest_attempts_left||0)>0?c.jsx(ot,{variant:"primary",size:"sm",onClick:()=>ie(pe),disabled:H,children:"Start Retest"}):c.jsx(ot,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):Je?c.jsx(ot,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):(xe.debug(" Button render, isStartingTest:",H,"test:",pe.test_type),c.jsx(ot,{variant:"primary",size:"sm",onClick:()=>ie(pe),disabled:H,children:"Start Test"})):c.jsx(ot,{variant:"secondary",size:"sm",disabled:!0,className:"bg-gray-100 text-gray-500 border-gray-200",children:"Loading..."})})()})]})},`${pe.test_type}_${pe.test_id}`)),u.length>3&&c.jsx("div",{className:"text-center pt-2",children:c.jsx("button",{onClick:de,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:re?"Show Less":`Show ${u.length-3} More`})})]})]}):c.jsxs(gt.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.3},children:[c.jsx(gt.img,{src:"/pics/no-tests.png",alt:"No active tests",className:"w-24 h-24 mx-auto mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.5,type:"spring"}}),c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Active Tests"})]})})]})}),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{children:"Test Results"})}),c.jsx($t.Body,{children:d&&d.showResults?c.jsx(w2,{testResults:d,onBackToCabinet:()=>{setTestResults(null)},onRetakeTest:(pe,Ae)=>{f(),setTestResults(null)},isLoading:v}):c.jsx(hH,{compact:!0,showAll:V,onToggleShowAll:Te,maxInitial:3})})]})})]})]}),c.jsx(rH,{isOpen:x.isOpen,onClose:y,testType:x.testType,testId:x.testId,testName:x.testName,questions:x.questions||[],isLoading:x.isLoading||!1}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:E.map(pe=>c.jsx(iu,{type:pe.type,message:pe.message,onClose:()=>N(Ae=>Ae.filter(Me=>Me.id!==pe.id))},pe.id))})]})},A0e=({testInfo:e,questions:t,testType:r,studentAnswers:n,onBackToCabinet:s,checkAnswerCorrectness:a,formatStudentAnswerForDisplay:i,getCorrectAnswer:o})=>{const[l,u]=_.useState(0),[d,f]=_.useState(0),[h,g]=_.useState(!0);if(_.useEffect(()=>{const v=()=>{try{const T=Mf(t,n,r).score,k=e?.num_questions||t?.length||0,b=k>0?Math.round(T/k*100):0;u(T),f(b),g(!1)}catch(T){console.error("Error calculating test results:",T),u(0),f(0),g(!1)}};t&&t.length>0?v():g(!1)},[t,n,r,e,Mf]),h)return c.jsx("div",{className:"flex justify-center items-center min-h-64",children:c.jsx("div",{className:"text-lg",children:"Calculating results..."})});const x=e?.num_questions||t?.length||0,y=e?.test_name||e?.title||"Test";return c.jsxs("div",{className:"test-results-page max-w-4xl mx-auto p-6 overflow-y-auto min-h-screen",children:[c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"results-header text-center",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Test Results: ",y]}),c.jsx("p",{className:"text-gray-600",children:r==="matching_type"?"Matching Test":r==="multiple_choice"?"Multiple Choice Test":r==="true_false"?"True/False Test":r==="input"?"Input Test":r==="drawing"?"Drawing Test":"Test"})]})}),c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"results-summary",children:[c.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:["Your Score: ",l," / ",x," (",d,"%)"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:c.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${d>=80?"bg-green-500":d>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${d}%`}})}),c.jsx("div",{className:"text-center",children:c.jsx("p",{className:`text-lg font-medium ${d>=80?"text-green-600":d>=60?"text-yellow-600":"text-red-600"}`,children:d>=80?"Excellent!":d>=60?"Good job!":"Keep practicing!"})})]})}),t&&t.length>0&&c.jsx($t,{className:"mb-6",children:c.jsxs("div",{className:"questions-review",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Question Review"}),c.jsx("div",{className:"space-y-4",children:t.map((v,T)=>{const k=n[String(v.question_id)]||"No answer";console.log(" TestResultsDisplay - Question",T+1,":",{question:v,studentAnswer:k,testType:r});const b=a(v,k,r);return console.log(" TestResultsDisplay - isCorrect result:",b),c.jsxs("div",{className:`question-review p-4 rounded-lg border-2 ${b?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[c.jsxs("div",{className:"question-review-header flex justify-between items-start mb-3",children:[c.jsxs("h4",{className:"text-lg font-medium text-gray-800",children:["Question ",T+1]}),c.jsx("span",{className:`text-2xl font-bold ${b?"text-green-600":"text-red-600"}`,children:b?"":""})]}),c.jsx("div",{className:"question-text mb-3",children:c.jsx("p",{className:"text-gray-700 font-medium",children:v.question})}),c.jsxs("div",{className:"answer-section space-y-2",children:[c.jsxs("p",{className:"student-answer",children:[c.jsx("strong",{className:"text-gray-600",children:"Your Answer:"})," ",c.jsx("span",{className:`font-medium ${b?"text-green-700":"text-red-700"}`,children:i(k,r,v)})]}),!b&&c.jsxs("p",{className:"correct-answer",children:[c.jsx("strong",{className:"text-gray-600",children:"Correct Answer:"})," ",c.jsx("span",{className:"text-green-700 font-medium",children:r==="multiple_choice"?String(v.correct_answer||"").toUpperCase():i(o(v,r),r,v)})]})]})]},v.question_id||T)})})]})}),c.jsx($t,{children:c.jsx("div",{className:"results-actions text-center",children:c.jsx(ot,{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-medium",children:"Back to Cabinet"})})})]})};class j0e{constructor(){this.activeRequests=new Map,this.completedRequests=new Map,this.maxCacheSize=100,this.cacheTimeout=3e4}generateKey(t,r,n={}){const s=Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{});return`${t}_${r}_${JSON.stringify(s)}`}isRequestInProgress(t){return this.activeRequests.has(t)}getCachedResult(t){const r=this.completedRequests.get(t);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.result:null}startRequest(t,r){return this.activeRequests.set(t,r),r.finally(()=>{this.activeRequests.delete(t)}),r}cacheResult(t,r){if(this.completedRequests.size>=this.maxCacheSize){const n=this.completedRequests.keys().next().value;this.completedRequests.delete(n)}this.completedRequests.set(t,{result:r,timestamp:Date.now()})}async deduplicateApiCall(t,r,n,s){const a=this.generateKey(t,r,n);if(this.isRequestInProgress(a))return console.log(" API deduplication: Request already in progress, waiting...",a),this.activeRequests.get(a);const i=this.getCachedResult(a);if(i)return console.log(" API deduplication: Using cached result",a),i;console.log(" API deduplication: Making new request",a);const o=this.startRequest(a,s());try{const l=await o;return this.cacheResult(a,l),l}catch(l){throw l}}clearCache(){this.activeRequests.clear(),this.completedRequests.clear(),console.log(" API deduplication: Cache cleared")}}const nD=new j0e,P0e=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(null,n),t)}},M0e=({onBackToCabinet:e,currentTest:t})=>{const r=hl(),{user:n,isAuthenticated:s}=Ps(),{activeTests:a,loadActiveTests:i}=v2(),o=_.useCallback(P0e((Ie,Qe,Ne)=>{try{if(window.skipInitialProgressSave&&Ne.answers&&Ne.answers.length===0){xe.debug(" Skipping empty progress save during restoration"),window.skipInitialProgressSave=!1;return}const qe=`test_progress_${n?.student_id||n?.id||"unknown"}_${Ie}_${Qe}`,Rt=localStorage.getItem(qe);if(Rt&&Ne.answers&&Ne.answers.length===0)try{const zt=JSON.parse(Rt);if(zt.answers&&zt.answers.length>0){xe.debug(" Skipping empty progress save - existing progress is better:",zt.answers);return}}catch{}localStorage.setItem(qe,JSON.stringify(Ne)),xe.debug(`Saved test progress for ${Ie}_${Qe}:`,Ne)}catch(Ke){xe.error("Error saving test progress:",Ke)}},1e3),[n?.student_id,n?.id]),l=_.useCallback((Ie,Qe,Ne)=>{o(Ie,Qe,Ne)},[o]),u=_.useCallback((Ie,Qe)=>{try{const Ke=`test_progress_${n?.student_id||n?.id||"unknown"}_${Ie}_${Qe}`,qe=localStorage.getItem(Ke);return qe?JSON.parse(qe):null}catch(Ne){return xe.error("Error getting test progress:",Ne),null}},[n?.student_id,n?.id]),d=_.useCallback((Ie,Qe)=>{try{const Ne=n?.student_id||n?.id||"unknown",Ke=`test_progress_${Ne}_${Ie}_${Qe}`;localStorage.removeItem(Ke);for(let qe=0;qe<localStorage.length;qe++){const Rt=localStorage.key(qe);Rt&&Rt.startsWith(`test_progress_${Ne}_${Ie}_${Qe}_`)&&(localStorage.removeItem(Rt),xe.debug(` Cleared individual question key: ${Rt}`))}xe.debug(`Cleared test progress for ${Ie}_${Qe}`)}catch(Ne){xe.error("Error clearing test progress:",Ne)}},[n?.student_id,n?.id]),[f,h]=_.useState(!0),[g,x]=_.useState(!1),[y,v]=_.useState(""),[T,k]=_.useState(!1),[b,E]=_.useState(""),[N,P]=_.useState([]),[M,j]=_.useState(t?"test":"list"),[A,D]=_.useState(null),[L,G]=_.useState(null),[X,se]=_.useState(null),[Q,re]=_.useState([]),[B,V]=_.useState([]),[R,H]=_.useState(0),[z,I]=_.useState(0),[W,K]=_.useState(null),ee=Gs.useRef(null),oe=Gs.useRef(null),[Z,le]=_.useState(!1),[ue,de]=_.useState(!1),[Te,ie]=_.useState(null),[pe,Ae]=_.useState(null),[Me,Je]=_.useState(!1),[Ve,Dt]=_.useState(!1),[lt,At]=_.useState({isInitialized:!1,initializationId:null,lastTestId:null,initializationCount:0}),[vt,ct]=_.useState({isRestored:!1,restoredTestId:null,restorationCount:0}),{startTracking:bt,stopTracking:Ut,getCheatingData:Bt,clearData:Vt,isCheating:We,tabSwitches:Ue}=v1(A?.test_type,A?.test_id,n?.student_id||n?.id);_.useEffect(()=>{(()=>{const Qe=[];for(let Ne=0;Ne<localStorage.length;Ne++){const Ke=localStorage.key(Ne);if(Ke&&Ke.startsWith("test_progress_")&&!Ke.includes("_51712_")&&!Ke.includes("_51736_")){const qe=Ke.split("_");qe.length===4&&qe[0]==="test"&&qe[1]==="progress"&&Qe.push(Ke)}}Qe.forEach(Ne=>{localStorage.removeItem(Ne),xe.debug(" Cleared old cache key:",Ne)})})()},[]);const tt=_.useCallback(()=>{const Ie=A?.test_id,Qe=n?.student_id||n?.id;if(!Qe||!Ie)return xe.debug(" Skipping initialization - missing required data:",{studentId:Qe,currentTestId:Ie}),!1;const Ne=`${Qe}_${Ie}_${Date.now()}`;return lt.isInitialized&&lt.lastTestId===Ie?(xe.debug(" Already initialized for this test - skipping"),!1):lt.initializationId?(xe.debug(" Initialization in progress - skipping duplicate"),!1):(xe.debug(" Starting initialization:",Ne),At({isInitialized:!1,initializationId:Ne,lastTestId:Ie}),!0)},[lt,A,n?.student_id,n?.id]),nt=_.useCallback(()=>{At(Ie=>({...Ie,isInitialized:!0,initializationId:null})),xe.debug(" Initialization completed")},[]),at=_.useCallback(async()=>{xe.debug(" Initializing Student Tests...");try{if(h(!0),E(""),!s||!n){xe.debug(" User not authenticated"),E("User not authenticated");return}if(n.role!==Ro.STUDENT){xe.error(" Invalid user role for student tests:",n.role),E("Access denied. Student role required.");return}xe.debug(" Loading active tests..."),await i(),nt(),xe.debug(" Student Tests initialization complete!")}catch(Ie){xe.error(" Error initializing student tests:",Ie),E("Failed to initialize student tests")}finally{h(!1)}},[s,n,i,nt]);_.useEffect(()=>{tt()&&at()},[tt,at]),_.useEffect(()=>{t&&(xe.debug(" Auto-starting test from prop:",t),k(!0),Xt(t))},[t]),_.useCallback(async()=>{xe.debug(" Loading student active tests...");try{const Ie=await Pn.getActiveTests();xe.debug(" Active tests loaded:",Ie);const Qe=Ie.map(Ne=>({...Ne,subject_id:Ne.subject_id||Ne.subjectId,teacher_id:Ne.teacher_id||Ne.teacherId,is_active:Ne.is_active!==void 0?Ne.is_active:!0,created_at:Ne.created_at||Ne.createdAt,updated_at:Ne.updated_at||Ne.updatedAt}));return Ae(new Date),Qe}catch(Ie){throw xe.error(" Error loading active tests:",Ie),Ie}},[]),_.useCallback(async(Ie,Qe)=>{xe.debug(" Checking test completion:",Ie,Qe);try{const Ne=u(Ie,Qe);return Ne&&Ne.completed}catch(Ne){return xe.error(" Error checking test completion:",Ne),!1}},[u]),_.useEffect(()=>{if(Q.length>0&&A?.test_id){const Ie=setTimeout(()=>{let Qe=!1;const Ne=new Array(Q.length).fill("");if(Q.forEach((Ke,qe)=>{const zt=`test_progress_${n?.student_id||n?.id||"unknown"}_${L}_${A?.test_id}_${Ke.question_id}`,rr=localStorage.getItem(zt);if(rr){const Ir=rr.replace(/^"(.*)"$/,"$1");Ne[qe]=Ir,Qe=!0}}),Qe){V(Ne);const Ke=Ne.filter(Rt=>Rt&&typeof Rt=="string"&&Rt.trim()!=="").length,qe=Q.length>0?Ke/Q.length*100:0;H(qe)}},100);return()=>clearTimeout(Ie)}},[Q,L,A?.test_id]);const It=_.useCallback(async(Ie,Qe)=>{xe.debug(" Marking test as completed:",Ie,Qe);try{const Ne=u(Ie,Qe)||{};Ne.completed=!0,Ne.completedAt=new Date().toISOString(),l(Ie,Qe,Ne);const qe=`test_completed_${n?.student_id||n?.id||""}_${Ie}_${Qe}`;localStorage.setItem(qe,"true"),xe.debug(" Test completion marked in localStorage:",qe),xe.debug(" localStorage value after setting:",localStorage.getItem(qe)),ye("Test marked as completed","success")}catch(Ne){xe.error(" Error marking test as completed:",Ne),ye("Failed to mark test as completed","error")}},[u,l]),Lt=_.useCallback(Ie=>{xe.debug(" Showing test details:",Ie),ie(Ie),de(!0)},[]),Xt=_.useCallback(async Ie=>{xe.debug(" Starting test:",Ie);let Qe=Date.now(),Ne;try{v(""),x(!0),Qe=Date.now();const Ke=()=>{const je=Date.now()-Qe,dt=Math.max(0,250-je);setTimeout(()=>{h(!1),x(!1)},dt)};let qe=!1;Ne=setTimeout(()=>{qe=!0,v("Loading is taking longer than expected...")},15e3);const zt=`test_completed_${n?.student_id||n?.id||""}_${Ie.test_type}_${Ie.test_id}`,rr=localStorage.getItem(zt)==="true";if(rr&&!Ie?.retest_available){xe.debug(" Test already completed, redirecting to main cabinet"),ye("This test has already been completed","info"),r("/student");return}if(rr&&Ie?.retest_available&&xe.debug(" Test completed but retest available, allowing retest"),Ie.test_type===ts.MATCHING){xe.debug(" Redirecting to matching test page for testId:",Ie.test_id),r(`/student/matching-test/${Ie.test_id}`);return}if(Ie.test_type===ts.WORD_MATCHING){xe.debug(" Redirecting to word matching test page for testId:",Ie.test_id),r(`/student/word-matching-test/${Ie.test_id}`);return}D(Ie),G(Ie.test_type),ct({isRestored:!1,restoredTestId:null,restorationCount:0});const[Ir,wr]=await Promise.all([nD.deduplicateApiCall("GET",`test-info-${Ie.test_type}-${Ie.test_id}`,{testType:Ie.test_type,testId:Ie.test_id},()=>Pn.getTestInfo(Ie.test_type,Ie.test_id)),nD.deduplicateApiCall("GET",`test-questions-${Ie.test_type}-${Ie.test_id}`,{testType:Ie.test_type,testId:Ie.test_id},()=>Pn.getTestQuestions(Ie.test_type,Ie.test_id))]);se(Ir);let Wr=wr;try{if(!!Ir?.is_shuffled){const Ze=n?.student_id||n?.id||"unknown",dt=`${Ze}:${Ie.test_type}:${Ie.test_id}`,_t=Array.from(dt).reduce((Qt,Cr)=>(Qt<<5)-Qt+Cr.charCodeAt(0),0)>>>0,ir=`test_shuffle_order_${Ze}_${Ie.test_type}_${Ie.test_id}`,Ot=localStorage.getItem(ir);if(Ot){const Qt=JSON.parse(Ot),Cr=new Map(wr.map(Br=>[Br.question_id,Br]));Wr=Qt.map(Br=>Cr.get(Br)).filter(Boolean)}else{const Cr=function(Rr){return function(){var tn=Rr+=1831565813;return tn=Math.imul(tn^tn>>>15,tn|1),tn^=tn+Math.imul(tn^tn>>>7,tn|61),((tn^tn>>>14)>>>0)/4294967296}}(_t);Wr=[...wr];for(let Rr=Wr.length-1;Rr>0;Rr--){const tn=Math.floor(Cr()*(Rr+1));[Wr[Rr],Wr[tn]]=[Wr[tn],Wr[Rr]]}const Br=Wr.map(Rr=>Rr.question_id);localStorage.setItem(ir,JSON.stringify(Br))}}}catch(je){xe.error("Shuffle error (ignored):",je)}re(Wr),Ke();const he=Ie.test_id;if(vt.isRestored&&vt.restoredTestId===he){xe.debug(" Progress already restored for this test - skipping");return}xe.debug(" Starting progress restoration for test:",Ie.test_type,Ie.test_id),ct(je=>({...je,restorationCount:je.restorationCount+1}));const Ee=n?.student_id||n?.id||"unknown",we=`test_progress_${Ee}_${Ie.test_type}_${Ie.test_id}`,_e=localStorage.getItem(we);xe.debug(" Checking main progress key:",we),xe.debug(" Main progress data:",_e);let ke=new Array(wr.length).fill("");if(_e)try{const je=JSON.parse(_e);xe.debug(" Parsed progress data:",je),je.answers&&Array.isArray(je.answers)&&(ke=je.answers,xe.debug(" Loaded answers from main progress:",ke))}catch(je){xe.error(" Error parsing main progress:",je)}wr.forEach((je,Ze)=>{const dt=`test_progress_${Ee}_${Ie.test_type}_${Ie.test_id}_${je.question_id}`,_t=localStorage.getItem(dt);if(xe.debug(` Checking individual answer for question ${je.question_id}:`,_t),_t){const ir=_t.replace(/^"(.*)"$/,"$1");ke[Ze]=ir,xe.debug(` Loaded individual answer for question ${je.question_id}:`,ir)}}),xe.debug(" Final initial answers after loading all sources:",ke);const Ce=ke.filter(je=>je&&typeof je=="string"&&je.trim()!=="").length;if(Ce>0){xe.debug(` Restoring progress: ${Ce}/${wr.length} questions answered`),V(ke);const je=wr.length>0?Ce/wr.length*100:0;H(je),xe.debug(` Progress restored: ${je}% complete`)}else xe.debug(" No existing progress found - starting fresh"),V(ke),H(0);ct(je=>({...je,isRestored:!0,restoredTestId:he})),Ce>0&&(xe.debug(" Existing progress found - preventing overwrite during initialization"),window.skipInitialProgressSave=!0);const rt=Number(Ir?.allowed_time||0),xt=n?.student_id||n?.id||"unknown";if(ee.current=`test_timer_${xt}_${Ie.test_type}_${Ie.test_id}`,rt>0)try{const je=localStorage.getItem(ee.current),Ze=Date.now();if(je){const dt=JSON.parse(je),_t=Math.floor((Ze-new Date(dt.lastTickAt).getTime())/1e3),ir=Math.max(0,Number(dt.remainingSeconds||rt)-Math.max(0,_t));I(ir),oe.current=Ze}else I(rt),oe.current=Ze,localStorage.setItem(ee.current,JSON.stringify({remainingSeconds:rt,lastTickAt:new Date(Ze).toISOString(),startedAt:new Date(Ze).toISOString()}))}catch(je){xe.error("Timer cache init error:",je),I(rt)}else I(0);const ut=new Date;K(ut),xe.debug(" Test timer started at:",ut.toISOString());const ce=n?.student_id||n?.id||"unknown",ge=`anti_cheating_${ce}_${Ie.test_type}_${Ie.test_id}`,Pe=localStorage.getItem(ge);if(xe.debug(" Checking for anti-cheating data with key:",ge),xe.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),xe.debug(" Current test details:",{testType:Ie.test_type,testId:Ie.test_id,studentId:ce}),Pe)try{const je=JSON.parse(Pe);xe.debug(" Found existing anti-cheating data for THIS test:",je),xe.debug(" Visibility change times for this test:",je.tabSwitches||0),xe.debug(" Cheating status for this test:",je.isCheating||!1),je.isCheating&&(xe.debug(" WARNING: Student has been flagged for cheating in THIS test!"),xe.debug(" Tab switches detected in this test:",je.tabSwitches),ye(` Warning: Suspicious activity detected in this test (${je.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(je){xe.error(" Error parsing existing anti-cheating data:",je)}else xe.debug(" No existing anti-cheating data found for this test - starting fresh");bt(),xe.debug(" Anti-cheating tracking started"),j("test"),xe.debug(" Test started successfully")}catch(Ke){xe.error(" Error starting test:",Ke),ye("Failed to start test","error"),v("Failed to load test data. Please try again.")}finally{const Ke=Date.now()-Qe,Rt=Math.max(0,250-Ke);setTimeout(()=>{h(!1),x(!1)},Rt),k(!1);try{Ne&&clearTimeout(Ne)}catch{}}},[u]),vr=_.useCallback(async()=>{if(!A||!X||!Q||!B){ye("No test data to submit","error");return}xe.debug(" Submitting test:",A);try{le(!0);const Ie=Mf(Q,B,A.test_type),Qe=new Date,Ne=W?Math.round((Qe-W)/1e3):0,Ke=W?W.toISOString():Qe.toISOString();xe.debug(" Test timing:",{startedAt:Ke,endTime:Qe.toISOString(),timeTaken:`${Ne} seconds`});const qe=Bt();xe.debug(" Anti-cheating data for submission:",qe);const Rt={};Q.forEach((rr,Ir)=>{Rt[rr.question_id]=B[Ir]??""}),A.test_type==="drawing"&&(xe.debug(" Drawing test answers being submitted:",B),xe.debug(" Drawing test answers type:",typeof B[0]),xe.debug(" Drawing test answers content:",B[0]));const zt=await Pn.submitTest(A.test_type,A.test_id,B,{time_taken:(()=>{const rr=Number(X?.allowed_time||0);return rr>0?Math.min(Ne,rr):Ne})(),started_at:Ke,submitted_at:Qe.toISOString(),answers_by_id:Rt,question_order:Q.map(rr=>rr.question_id),caught_cheating:qe.caught_cheating,visibility_change_times:qe.visibility_change_times,retest_assignment_id:(()=>{const Ir=`retest_assignment_id_${n?.student_id||n?.id||""}_${A.test_type}_${A.test_id}`,wr=localStorage.getItem(Ir);return xe.debug(" Frontend retest key:",Ir),xe.debug(" Frontend retest assignment ID from localStorage:",wr),xe.debug(" Frontend retest assignment ID converted:",wr?Number(wr):null),xe.debug(" Frontend current test data:",A),xe.debug(" Frontend current test retest_assignment_id:",A.retest_assignment_id),wr?Number(wr):null})(),parent_test_id:A.test_id},n);if(xe.debug(" Test submission result:",zt),zt.success){window.recentTestCompleted=!0,xe.debug(" Test completed - cache refresh triggered");const rr=n?.student_id||n?.id||"",Ir=`retest_assignment_id_${rr}_${A.test_type}_${A.test_id}`,wr=!!localStorage.getItem(Ir);let Wr=!1;if(wr){const ke=typeof A?.retest_max_attempts=="number"?A.retest_max_attempts:void 0,Ce=typeof A?.retest_attempts_left=="number"?A.retest_attempts_left:void 0,rt=typeof A?.retest_attempt_number=="number"?A.retest_attempt_number:void 0,xt=ke??(Ce!=null&&rt!=null?Ce+rt:1),ut=(zt?.percentage_score??zt?.percentage??0)>=50;if(ut){const ce=`retest_attempt${xt}_${rr}_${A.test_type}_${A.test_id}`;localStorage.setItem(ce,"true"),xe.debug(" Passed retest, marking last-slot key:",ce);let ge=0;for(let je=1;je<=10;je++){const Ze=`retest_attempt${je}_${rr}_${A.test_type}_${A.test_id}`;localStorage.getItem(Ze)==="true"&&ge++}if(rr&&A.test_type&&A.test_id){const je=`test_completed_${rr}_${A.test_type}_${A.test_id}`;localStorage.setItem(je,"true"),xe.debug(" Marked retest as completed (student passed):",je);const Ze=`retest_attempts_${rr}_${A.test_type}_${A.test_id}`;localStorage.setItem(Ze,JSON.stringify({used:ge,max:xt})),xe.debug(" Set retest attempts metadata (student passed):",Ze,{used:ge,max:xt})}const Pe=`retest1_${rr}_${A.test_type}_${A.test_id}`;localStorage.removeItem(Pe),Wr=!0}else{let ce=1;for(let dt=1;dt<=10;dt++){const _t=`retest_attempt${dt}_${rr}_${A.test_type}_${A.test_id}`;if(localStorage.getItem(_t)!=="true"){ce=dt;break}}const ge=`retest_attempt${ce}_${rr}_${A.test_type}_${A.test_id}`;localStorage.setItem(ge,"true"),xe.debug(" Marked retest attempt as completed:",ge);let Pe=0;for(let dt=1;dt<=10;dt++){const _t=`retest_attempt${dt}_${rr}_${A.test_type}_${A.test_id}`;localStorage.getItem(_t)==="true"&&Pe++}const je=xt>0&&Pe>=xt,Ze=je||ut;if(xe.debug(" Retest completion check:",{usedAttempts:Pe,maxAttempts:xt,attemptsExhausted:je,passed:ut,shouldComplete:Ze,studentId:!!rr,test_type:!!A?.test_type,test_id:!!A?.test_id}),Ze)if(!rr||!A?.test_type||!A?.test_id)xe.error(" Cannot set completion key - missing required fields:",{studentId:rr,test_type:A?.test_type,test_id:A?.test_id});else{const dt=`test_completed_${rr}_${A.test_type}_${A.test_id}`;localStorage.setItem(dt,"true"),xe.debug(" Marked retest as completed (attempts exhausted or passed):",dt),xe.debug(" Verification - completion key value:",localStorage.getItem(dt));const _t=`retest_attempts_${rr}_${A.test_type}_${A.test_id}`;localStorage.setItem(_t,JSON.stringify({used:Pe,max:xt})),xe.debug(" Set retest attempts metadata (attempts exhausted):",_t,{used:Pe,max:xt});const ir=`retest1_${rr}_${A.test_type}_${A.test_id}`;localStorage.removeItem(ir),xe.debug(" Removed retest key after completion:",ir),Wr=!0}else xe.debug(" Retest NOT completed - conditions not met:",{attemptsExhausted:je,passed:ut,shouldComplete:Ze})}}if(xe.debug(" Marking test as completed..."),await It(A.test_type,A.test_id),A.test_type!=="drawing"){xe.debug(" Caching test results after submission...");const Ce=`student_results_table_${n?.student_id||n?.id||"unknown"}`,{setCachedData:rt,CACHE_TTL:xt}=await Za(async()=>{const{setCachedData:ut,CACHE_TTL:ce}=await Promise.resolve().then(()=>dp);return{setCachedData:ut,CACHE_TTL:ce}},void 0);rt(Ce,zt,xt.student_results_table),xe.debug(" Test results cached with key:",Ce)}else xe.debug(" Drawing test submitted - not caching results (will appear after teacher grades)");xe.debug(" Clearing test progress..."),d(A.test_type,A.test_id);try{const ke=n?.student_id||n?.id||"unknown",Ce=`test_timer_${ke}_${A.test_type}_${A.test_id}`;localStorage.removeItem(Ce);const rt=`test_shuffle_order_${ke}_${A.test_type}_${A.test_id}`;localStorage.removeItem(rt)}catch{}if(n?.student_id){const ke=`test_completed_${n.student_id}_${A.test_type}_${A.test_id}`;localStorage.setItem(ke,"true"),xe.debug(" Test marked as completed in localStorage:",ke)}try{const ke=n?.student_id||n?.id||"",Ce=`retest1_${ke}_${A.test_type}_${A.test_id}`,rt=`retest_assignment_id_${ke}_${A.test_type}_${A.test_id}`;Wr?(localStorage.removeItem(Ce),localStorage.removeItem(rt),xe.debug(" Cleared retest keys (completion):",Ce,rt)):xe.debug(" Retest still pending - keeping keys:",Ce,rt)}catch(ke){xe.warn(" Failed to manage retest keys:",ke)}xe.debug(" Clearing test progress and anti-cheating data for THIS test only...");const he=n?.student_id||n?.id||"unknown",Ee=[],we=`test_progress_${he}_${A.test_type}_${A.test_id}`,_e=`anti_cheating_${he}_${A.test_type}_${A.test_id}`;for(let ke=0;ke<localStorage.length;ke++){const Ce=localStorage.key(ke);Ce&&(Ce===we||Ce===_e)&&Ee.push(Ce)}Ee.forEach(ke=>{localStorage.removeItem(ke),xe.debug(` Cleared for THIS test only: ${ke}`)}),xe.debug(" Clearing anti-cheating data..."),Ut(),Vt(),A.test_type!=="drawing"?j("results"):r("/student"),ye("Test submitted successfully!","success"),xe.debug(" Test submitted successfully")}else throw xe.error(" Test submission failed:",zt.error),new Error(zt.error||"Failed to submit test")}catch(Ie){xe.error(" Error submitting test:",Ie),ye("Failed to submit test","error")}finally{le(!1)}},[A,X,Q,B,It,d]);_.useCallback(()=>(xe.debug(" Collecting test answers..."),B),[B]);const br=_.useCallback(()=>{if(!Q||!B)return;const Ie=B.filter(Ne=>Ne&&typeof Ne=="string"&&Ne.trim()!=="").length,Qe=Q.length>0?Ie/Q.length*100:0;if(H(Qe),xe.debug(` Progress updated: ${Ie}/${Q.length} questions answered (${Math.round(Qe)}%)`),A){const Ne={answers:B,progress:Qe,lastSaved:new Date().toISOString()};l(A.test_type,A.test_id,Ne)}},[Q,B,A,l]);_.useEffect(()=>{br()},[br]);const Dr=_.useCallback(()=>{if(!B)return 0;const Ie=B.filter(Qe=>Qe&&typeof Qe=="string"&&Qe.trim()!=="").length;return xe.debug(" getAnsweredCount:",{studentAnswers:B,answeredCount:Ie,totalQuestions:Q?.length}),Ie},[B,Q]),Sr=_.useCallback(()=>{if(xe.debug(" Navigating back to cabinet..."),A&&n?.student_id){xe.debug(" Cabinet navigation detected - counting as cheating attempt");const Qe=`anti_cheating_${n?.student_id||n?.id||"unknown"}_${A.test_type}_${A.test_id}`,Ne=localStorage.getItem(Qe);let Ke=0,qe=!1;if(Ne)try{const Ir=JSON.parse(Ne);Ke=Ir.tabSwitches||0,qe=Ir.isCheating||!1}catch(Ir){xe.error(" Error parsing existing anti-cheating data:",Ir)}const Rt=Ke+1,zt=Rt>=2;xe.debug(` Tab switch count: ${Ke}  ${Rt} (cheating: ${zt})`);const rr={tabSwitches:Rt,isCheating:zt,lastUpdated:new Date().toISOString()};localStorage.setItem(Qe,JSON.stringify(rr)),xe.debug(" Anti-cheating data updated for cabinet navigation:",rr)}e?e():r("/student")},[e,r,A,n?.student_id]);_.useCallback(()=>{xe.debug(" Showing test results..."),j("results")},[]);const pr=_.useCallback((Ie,Qe,Ne=null)=>{switch(xe.debug(" Formatting student answer for display:",Ie,"testType:",Qe,"question:",Ne),Qe){case ts.MULTIPLE_CHOICE:if(Ie.toString().startsWith("Option "))return Ie;if(Ne&&typeof Ie=="string"&&!isNaN(parseInt(Ie))){const Ke=parseInt(Ie),qe=`option_${String.fromCharCode(97+Ke)}`,Rt=Ne[qe];if(Rt)return xe.debug(" Converted",Ie,"to option text:",Rt),Rt;{const zt=String.fromCharCode(65+Ke);return xe.debug(" Converted",Ie,"to",zt),zt}}else{if(typeof Ie=="string"&&isNaN(parseInt(Ie)))return xe.debug(" Already formatted text:",Ie),Ie;{const Ke=String.fromCharCode(65+parseInt(Ie));return xe.debug(" Converted",Ie,"to",Ke),Ke}}case ts.TRUE_FALSE:return Ie==="true"?"True":"False";case ts.INPUT:return Ie;case ts.MATCHING:return typeof Ie=="object"?JSON.stringify(Ie):Ie;case ts.WORD_MATCHING:return typeof Ie=="object"?JSON.stringify(Ie):Ie;case ts.DRAWING:return Ie&&Ie.trim()!==""?"Drawing submitted":"No drawing";case ts.FILL_BLANKS:return Ie;default:return xe.warn(" Unknown test type for answer formatting:",Qe),Ie}},[]),ye=_.useCallback((Ie,Qe)=>{const Ne={id:Date.now(),message:Ie,type:Qe,timestamp:new Date};P(Ke=>[...Ke,Ne]),setTimeout(()=>{P(Ke=>Ke.filter(qe=>qe.id!==Ne.id))},Km.NOTIFICATION_DURATION)},[]);_.useEffect(()=>{br()},[br]),_.useEffect(()=>{if(M!=="test")return;const Ie=Number(X?.allowed_time||0);if(!Ie)return;const Qe=setInterval(()=>{I(Ne=>{const Ke=Math.max(0,Ne-1);try{const qe=Date.now();oe.current||(oe.current=qe),ee.current&&localStorage.setItem(ee.current,JSON.stringify({remainingSeconds:Ke,lastTickAt:new Date(qe).toISOString(),startedAt:W?W.toISOString():new Date(qe-(Ie-Ke)*1e3).toISOString()}))}catch{}return Ke===0&&vr(),Ke})},1e3);return()=>clearInterval(Qe)},[M,X?.allowed_time,vr,W]);const Fe=_.useCallback((Ie,Qe)=>{if(!Ie)return null;const Ne=(Ke,qe)=>{const Rt=[...B];Rt[Qe]=qe,V(Rt),xe.debug(` Answer changed: question ${Ke} = ${qe}`),xe.debug(" Updated studentAnswers:",Rt)};switch(A.test_type){case ts.TRUE_FALSE:return c.jsx(kde,{question:Ie,questionIndex:Qe,studentAnswer:B[Qe]||"",onAnswerChange:Ne,mode:"student",testId:A?.test_id,testType:L,displayNumber:Qe+1});case ts.MULTIPLE_CHOICE:return c.jsx(Tde,{question:Ie,questionIndex:Qe,studentAnswer:B[Qe]||"",onAnswerChange:Ne,mode:"student",testId:A?.test_id,testType:L,displayNumber:Qe+1});case ts.INPUT:return c.jsx(Cde,{question:Ie,questionIndex:Qe,studentAnswer:B[Qe]||"",onAnswerChange:Ne,mode:"student",testId:A?.test_id,testType:L,displayNumber:Qe+1});case ts.MATCHING:return xe.error("Matching test reached renderQuestion - this should not happen"),c.jsxs("div",{className:"text-center p-8",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-4",children:"Matching Test"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"Redirecting to matching test page..."}),c.jsx(ot,{onClick:()=>r("/student"),variant:"primary",children:"Back to Dashboard"})]});case ts.DRAWING:return c.jsx(Ode,{question:Ie,questionIndex:Qe,studentAnswer:B[Qe]||"",onAnswerChange:Ne,mode:"student",testId:A?.test_id,testType:L});case ts.FILL_BLANKS:return Qe===0?c.jsx(Bde,{testText:X?.test_text,blanks:(Q||[]).map((Ke,qe)=>({id:Ke.question_id||qe+1,options:Ke.blank_options||[],correct_answer:Ke.correct_answers?.[0]||Ke.correct_answer,question:Ke.question_json||""})),separateType:X?.separate_type,testId:A?.test_id,testName:X?.test_name||A?.test_name,teacherId:X?.teacher_id||A?.teacher_id,subjectId:X?.subject_id||A?.subject_id,onTestComplete:vr,onAnswerChange:(Ke,qe)=>{const Rt=Q.findIndex(zt=>zt.question_id===Ke);if(Rt!==-1){const zt=[...B];zt[Rt]=qe,V(zt),xe.debug(` Fill Blanks answer changed: question ${Ke} = ${qe}`)}}},`fill-blanks-${A?.test_id}-${X?.test_name}`):null;default:return c.jsx("div",{children:"Unsupported question type"})}},[A,B,L]);function Be(){return!A||!X||!Q?null:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("div",{className:"flex justify-between items-center mb-4",children:c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:X.test_name||X.title||"Test"})}),c.jsx("div",{className:"mb-4",children:c.jsx(Lde,{answeredCount:Dr(),totalQuestions:Q.length,percentage:Math.round(R),timeElapsed:Number(X?.allowed_time||0)>0?z:0,showDetails:!0})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Answer all questions below:"}),c.jsx("div",{className:"space-y-8",children:Q.map((Ie,Qe)=>c.jsx("div",{className:"question-container",children:Fe(Ie,Qe)},Ie.question_id||Qe))})]}),c.jsx("div",{className:"flex justify-center",children:c.jsx(ot,{variant:"primary",size:"lg",onClick:()=>Je(!0),disabled:Z||Dr()<Q.length,loading:Z,children:Z?"Submitting...":`Submit Test (${Dr()}/${Q.length})`})})]})}if(f)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:t?"Starting Test...":"Loading Student Tests..."})]})});if(b)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Tests Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:b}),c.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx(Ca,{isOpen:Ve,onClose:()=>Dt(!1),title:"Exit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>Dt(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:()=>{Dt(!1),Sr()},variant:"primary",children:"Go Back"})]})]})}),c.jsx(Ca,{isOpen:Me,onClose:()=>Je(!1),title:"Submit Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>Je(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:()=>{Je(!1),vr()},variant:"primary",children:"Submit"})]})]})}),c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Test"})}),c.jsx(ot,{variant:"outline",onClick:()=>Dt(!0),children:"Back to Cabinet"})]})})}),We&&M==="results"&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mx-4 sm:mx-6 lg:mx-8 mt-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm text-red-700",children:[c.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",Ue," times during the test."]})})]})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 overflow-y-auto",children:[!t&&M==="list"&&He(),M==="test"&&Be(),M==="results"&&Pt()]}),M==="test"&&g&&c.jsxs("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-[1px] flex flex-col items-center justify-center z-50",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-3 text-gray-700",children:"Preparing your test"}),y&&c.jsx("div",{className:"mt-3 text-sm text-gray-500",children:y})]}),c.jsx(rH,{isOpen:ue,onClose:()=>de(!1),testType:Te?.test_type,testId:Te?.test_id,testName:Te?.test_name,questions:Te?.questions,isLoading:f}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:N.map(Ie=>c.jsx(iu,{type:Ie.type,message:Ie.message,onClose:()=>P(Qe=>Qe.filter(Ne=>Ne.id!==Ie.id))},Ie.id))})]});function He(){return!a||a.length===0?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No active tests available for your class."})}):c.jsx("div",{className:"space-y-6",children:a.map((Ie,Qe)=>c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:Ie.test_name}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Subject:"})," ",Ie.subject]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Teacher:"})," ",Ie.teacher_name]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Type:"})," ",Ie.test_type]})]}),c.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Assigned: ",new Date(Ie.assigned_at).toLocaleDateString()]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(ot,{variant:"outline",onClick:()=>Lt(Ie),disabled:T||f,children:"View Details"}),c.jsx(ot,{variant:"primary",onClick:()=>Xt(Ie),disabled:T||f,children:T?"Starting...":"Start Test"})]})]})},Qe))})}function Pt(){if(!A||!X||!Q||!B)return null;const Ie={};return B.forEach((Qe,Ne)=>{if(Q[Ne]){const Ke=Q[Ne].question_id||Q[Ne].id||Ne;Ie[String(Ke)]=Qe,xe.debug(" Converting answer:",{index:Ne,questionId:Ke,answer:Qe,question:Q[Ne]})}}),xe.debug(" Final answersObject:",Ie),xe.debug(" Questions structure:",Q.map(Qe=>({id:Qe.question_id,correct_answer:Qe.correct_answer}))),c.jsx(A0e,{testInfo:X,questions:Q,testType:A.test_type,studentAnswers:Ie,onBackToCabinet:Sr,checkAnswerCorrectness:Hp,formatStudentAnswerForDisplay:pr,getCorrectAnswer:Tv})}},F0e=()=>{const{testId:e}=N_(),t=hl(),{user:r}=Ps(),{makeAuthenticatedRequest:n}=$l(),{showNotification:s}=ai(),[a,i]=_.useState(null),[o,l]=_.useState(!0),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,x]=_.useState(!1);v1("matching_type",a?.id);const y=_.useCallback(()=>{if(!r?.student_id||!e)return!1;const E=`test_completed_${r.student_id}_matching_type_${e}`,N=localStorage.getItem(E)==="true",P=`retest1_${r.student_id}_matching_type_${e}`,M=localStorage.getItem(P)==="true";return N&&!M?(xe.debug(" Test already completed, redirecting to cabinet"),s("This test has already been completed","info"),t("/student"),!0):!1},[r?.student_id,e,t,s]),v=_.useCallback(async()=>{if(!e){d("Test ID is required"),l(!1);return}if(!y())try{l(!0),d(null);const E=await n(`/.netlify/functions/get-matching-type-test?test_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!E.ok)throw new Error("Failed to load test data");const N=await E.json();if(!N.success)throw new Error(N.message||"Failed to load test");const P=N.data;xe.debug(" Test data from get-matching-type-test:",P);const M=await n(`/.netlify/functions/get-test-questions?test_id=${e}&test_type=matching_type`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!M.ok)throw new Error("Failed to load test questions");const j=await M.json();if(!j.success)throw new Error(j.message||"Failed to load test questions");xe.debug(" Questions data from get-test-questions:",j);const A={id:P.test_id,test_name:P.test_name,teacher_id:P.teacher_id,subject_id:P.subject_id,image_url:P.image_url,image:null,blocks:(()=>{if(Array.isArray(j.questions)&&j.questions.length>0){const D=j.questions[0];return Array.isArray(D.blocks)?D.blocks.map((L,G)=>{let X=L.block_coordinates||L.coordinates||(typeof L.x=="number"?{x:L.x,y:L.y,width:L.width,height:L.height}:null);if(typeof X=="string")try{X=JSON.parse(X)}catch{X=null}return(!X||typeof X!="object")&&(X={x:0,y:0,width:30,height:10}),X={x:(typeof X.x=="number"?X.x:Number(X.x))||0,y:(typeof X.y=="number"?X.y:Number(X.y))||0,width:(typeof X.width=="number"?X.width:Number(X.width))||30,height:(typeof X.height=="number"?X.height:Number(X.height))||10},{id:L.block_id||L.question_id||L.id||G+1,word:L.word||`Word ${G+1}`,coordinates:X,hasArrow:!!L.has_arrow,arrow:L.arrow||null}}):j.questions.map(L=>{xe.debug(" Processing question:",L);let G;try{G=typeof L.block_coordinates=="string"?JSON.parse(L.block_coordinates):L.block_coordinates}catch{G={x:0,y:0,width:100,height:100}}return(!G||typeof G!="object")&&(G={x:0,y:0,width:100,height:100}),G={x:(typeof G.x=="number"?G.x:Number(G.x))||0,y:(typeof G.y=="number"?G.y:Number(G.y))||0,width:(typeof G.width=="number"?G.width:Number(G.width))||100,height:(typeof G.height=="number"?G.height:Number(G.height))||100},{id:L.question_id,word:L.word,coordinates:G,hasArrow:L.has_arrow,arrow:L.arrow}})}return[]})(),words:(()=>{if(Array.isArray(j.questions)&&j.questions.length>0){const D=j.questions[0];if(Array.isArray(D.words)){const L=D.words,G=Array.isArray(D.blocks)?D.blocks:[];return typeof L[0]=="string"?L.map((se,Q)=>({id:`w_${G[Q]?.question_id||G[Q]?.block_id||j.questions[Q]?.question_id||Q+1}_${Q}`,word:String(se),blockId:null,isPlaced:!1,isCorrect:!1})):L.map((se,Q)=>({id:`w_${se.question_id||se.id||Q+1}_${Q}`,word:se.word||String(se.text||""),blockId:null,isPlaced:!1,isCorrect:!1}))}return j.questions.map(L=>({id:`w_${L.question_id}`,word:L.word,blockId:null,isPlaced:!1,isCorrect:!1}))}return[]})(),arrows:P.arrows?P.arrows.map(D=>(xe.debug(" Processing arrow:",D),{id:D.id,questionId:D.question_id,blockId:D.block_id||D.question_id,start:{x:Number(D.start_x)||0,y:Number(D.start_y)||0},end:{x:Number(D.end_x)||0,y:Number(D.end_y)||0},rel_start_x:D.rel_start_x!==null?Number(D.rel_start_x):null,rel_start_y:D.rel_start_y!==null?Number(D.rel_start_y):null,rel_end_x:D.rel_end_x!==null?Number(D.rel_end_x):null,rel_end_y:D.rel_end_y!==null?Number(D.rel_end_y):null,image_width:D.image_width?Number(D.image_width):null,image_height:D.image_height?Number(D.image_height):null,style:(typeof D.style=="string"?JSON.parse(D.style):D.style)||{color:"#dc3545",thickness:3}})):[]};if(P.image_url){const D=new Image;D.crossOrigin="anonymous",D.onload=()=>{A.image=D,i(A),l(!1)},D.onerror=()=>{xe.warn("Failed to load test image"),i(A),l(!1)},D.src=P.image_url}else i(A),l(!1)}catch(E){xe.error("Error loading test data:",E),d(E.message||"Failed to load test"),l(!1)}},[e,n]);_.useEffect(()=>{r?.student_id&&v()},[v,r?.student_id]);const T=_.useCallback(async E=>{xe.debug("Test completed:",E),s("Test completed successfully!","success");const N=parseInt(E)||0,P=a?.blocks?.length||a?.words?.length||0,M=P>0?Math.round(N/P*100):0,j={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"matching_type",score:N,totalQuestions:P,percentage:M,passed:M>=60,questionAnalysis:a?.questions?.map((A,D)=>({questionNumber:D+1,isCorrect:D<N,userAnswer:D<N?`Matched: ${A.word}`:"Not answered",correctAnswer:`Match: ${A.word}`}))||Array.from({length:P},(A,D)=>({questionNumber:D+1,isCorrect:D<N,userAnswer:D<N?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};xe.debug(" Using test results data:",j),h(j),x(!0)},[a,s]),k=_.useCallback(()=>{t("/student")},[t]),b=_.useCallback(()=>{x(!1),h(null),v()},[v]);return o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx($t,{className:"max-w-md w-full",children:c.jsxs($t.Body,{className:"text-center",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading test..."})]})})}):u?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx($t,{className:"max-w-md w-full",children:c.jsxs($t.Body,{className:"text-center",children:[c.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-4",children:u}),c.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})}):a?g&&f?c.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:c.jsx(w2,{testResults:f,onBackToCabinet:k,onRetakeTest:b,isLoading:!1})}):c.jsx(Ede,{testData:a,onTestComplete:T,onBackToCabinet:k}):c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx($t,{className:"max-w-md w-full",children:c.jsxs($t.Body,{className:"text-center",children:[c.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load test data"}),c.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})})},D0e=()=>{const{testId:e}=N_(),t=hl(),{user:r}=Ps(),{makeAuthenticatedRequest:n}=$l(),{showNotification:s}=ai(),[a,i]=_.useState(null),[o,l]=_.useState(!0),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,x]=_.useState(!1),y=_.useCallback(()=>{if(!r?.student_id||!e)return!1;const b=`test_completed_${r.student_id}_word_matching_${e}`,E=`retest1_${r.student_id}_word_matching_${e}`;return localStorage.getItem(E)==="true"?!1:localStorage.getItem(b)==="true"},[r?.student_id,e]),v=_.useCallback(async()=>{if(!e){d("Test ID is required"),l(!1);return}if(y()){s("This test has already been completed","warning"),t("/student");return}l(!0),d(null);try{const b=`word_matching_test_${e}`,E=fa(b);if(E){if(xe.debug(" Word matching test loaded from cache:",E),E.id){let M=E,j=Array.isArray(M.correctPairs)?M.correctPairs:M.correctPairs&&typeof M.correctPairs=="object"?Object.keys(M.correctPairs).map(A=>[Number(A),M.correctPairs[A]]).sort((A,D)=>A[0]-D[0]).map(([,A])=>A):null;if(Array.isArray(M.leftWords)&&Array.isArray(M.rightWords)&&Array.isArray(j)){const A=M.rightWords.map((Q,re)=>re),D=M.leftWords.map((Q,re)=>re);for(let Q=A.length-1;Q>0;Q--){const re=Math.floor(Math.random()*(Q+1));[A[Q],A[re]]=[A[re],A[Q]]}for(let Q=D.length-1;Q>0;Q--){const re=Math.floor(Math.random()*(Q+1));[D[Q],D[re]]=[D[re],D[Q]]}const L=A.map(Q=>M.rightWords[Q]),G=D.map(Q=>M.leftWords[Q]),X=new Map(A.map((Q,re)=>[Q,re])),se=D.map(Q=>{const re=j[Q];return X.get(re)});M={...M,leftWords:G,rightWords:L,correctPairs:se}}i(M)}else{let j={id:E.test_id,test_id:E.test_id,test_name:E.test_name,teacher_id:E.teacher_id,subject_id:E.subject_id,num_questions:E.num_questions,interaction_type:E.interaction_type,passing_score:E.passing_score,created_at:E.created_at,updated_at:E.updated_at,leftWords:E.leftWords,rightWords:E.rightWords,correctPairs:E.correctPairs,originalPairs:E.originalPairs},A=Array.isArray(j.correctPairs)?j.correctPairs:j.correctPairs&&typeof j.correctPairs=="object"?Object.keys(j.correctPairs).map(D=>[Number(D),j.correctPairs[D]]).sort((D,L)=>D[0]-L[0]).map(([,D])=>D):null;if(Array.isArray(j.leftWords)&&Array.isArray(j.rightWords)&&Array.isArray(A)){const D=j.rightWords.map((re,B)=>B),L=j.leftWords.map((re,B)=>B);for(let re=D.length-1;re>0;re--){const B=Math.floor(Math.random()*(re+1));[D[re],D[B]]=[D[B],D[re]]}for(let re=L.length-1;re>0;re--){const B=Math.floor(Math.random()*(re+1));[L[re],L[B]]=[L[B],L[re]]}const G=D.map(re=>j.rightWords[re]),X=L.map(re=>j.leftWords[re]),se=new Map(D.map((re,B)=>[re,B])),Q=L.map(re=>{const B=A[re];return se.get(B)});j={...j,leftWords:X,rightWords:G,correctPairs:Q}}i(j)}l(!1);return}const P=await(await n(`/.netlify/functions/get-word-matching-test?test_id=${e}`)).json();if(P.success){const M={id:P.data.test_id,test_id:P.data.test_id,test_name:P.data.test_name,teacher_id:P.data.teacher_id,subject_id:P.data.subject_id,num_questions:P.data.num_questions,interaction_type:P.data.interaction_type,passing_score:P.data.passing_score,created_at:P.data.created_at,updated_at:P.data.updated_at,leftWords:P.data.leftWords,rightWords:P.data.rightWords,correctPairs:P.data.correctPairs,originalPairs:P.data.originalPairs};let j=M,A=Array.isArray(j.correctPairs)?j.correctPairs:j.correctPairs&&typeof j.correctPairs=="object"?Object.keys(j.correctPairs).map(D=>[Number(D),j.correctPairs[D]]).sort((D,L)=>D[0]-L[0]).map(([,D])=>D):null;if(Array.isArray(j.leftWords)&&Array.isArray(j.rightWords)&&Array.isArray(A)){const D=j.rightWords.map((re,B)=>B),L=j.leftWords.map((re,B)=>B);for(let re=D.length-1;re>0;re--){const B=Math.floor(Math.random()*(re+1));[D[re],D[B]]=[D[B],D[re]]}for(let re=L.length-1;re>0;re--){const B=Math.floor(Math.random()*(re+1));[L[re],L[B]]=[L[B],L[re]]}const G=D.map(re=>j.rightWords[re]),X=L.map(re=>j.leftWords[re]),se=new Map(D.map((re,B)=>[re,B])),Q=L.map(re=>{const B=A[re];return se.get(B)});j={...j,leftWords:X,rightWords:G,correctPairs:Q}}i(j),qs(b,j,da.word_matching_test),xe.debug(" Word matching test loaded from API and cached:",M)}else throw new Error(P.message||"Failed to load test")}catch(b){xe.error("Error loading word matching test:",b),d(b.message),s("Failed to load test: "+b.message,"error")}finally{l(!1)}},[e,y,n,s,t]),T=_.useCallback(async b=>{xe.debug("Test completed:",b),s("Test completed successfully!","success");const E=parseInt(b)||0,N=a?.num_questions||0,P=N>0?Math.round(E/N*100):0,M={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"word_matching",score:E,totalQuestions:N,percentage:P,passed:P>=60,questionAnalysis:Array.isArray(a?.correctPairs)?a.correctPairs.map((j,A)=>({questionNumber:A+1,isCorrect:A<E,userAnswer:A<E?`${j.left}  ${j.right}`:"Not answered",correctAnswer:`${j.left}  ${j.right}`})):Array.from({length:N},(j,A)=>({questionNumber:A+1,isCorrect:A<E,userAnswer:A<E?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};xe.debug(" Using test results data:",M),h(M),x(!0)},[a,s]),k=_.useCallback(()=>{t("/student")},[t]);return _.useEffect(()=>{v()},[v]),o?c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsxs($t,{className:"p-8 text-center",children:[c.jsx(un,{size:"lg",className:"mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading word matching test..."})]})}):u?c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx($t,{className:"p-8 text-center",children:c.jsxs("div",{className:"text-red-600 mb-4",children:[c.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-4",children:u}),c.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})}):a?g&&f?c.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:c.jsx(w2,{testResults:f,onBackToCabinet:()=>{h(null),x(!1),t("/student")},onRetakeTest:(b,E)=>{h(null),x(!1),v()},isLoading:!1})}):c.jsx(gt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"min-h-screen bg-gray-50 py-8",children:c.jsx(jde,{testData:a,onTestComplete:T,onBackToCabinet:k})}):c.jsx("div",{className:"flex justify-center items-center min-h-screen",children:c.jsx($t,{className:"p-8 text-center",children:c.jsxs("div",{className:"text-gray-600 mb-4",children:[c.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),c.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Not Found"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"The requested test could not be found."}),c.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})})},O0e=_.forwardRef(({onRecordingComplete:e,minDuration:t=0,maxDuration:r=600,minWords:n=50,maxAttempts:s=3,currentAttempt:a=1},i)=>{const[o,l]=_.useState(!1),[u,d]=_.useState(!1),[f,h]=_.useState(0),[g,x]=_.useState(null),[y,v]=_.useState(null),[T,k]=_.useState("good"),b=_.useRef(null),E=_.useRef([]),N=_.useRef(null),P=_.useRef(null),M=_.useRef(null),j=_.useRef(null),A=_.useRef(null);_.useImperativeHandle(i,()=>({startRecording:()=>D(),stopRecording:()=>L(),pauseRecording:()=>G(),resumeRecording:()=>X()}));const D=_.useCallback(async()=>{try{if(v(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");if(!window.isSecureContext&&!window.location.hostname.includes("localhost"))throw new Error("Microphone access requires HTTPS. Please use a secure connection.");const V=window.AudioContext||window.webkitAudioContext;M.current||(M.current=new V),M.current.state!=="running"&&await M.current.resume().catch(()=>{}),console.log(" Requesting microphone permission...");const R=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});console.log(" Microphone permission granted"),N.current=R;try{let K=document.getElementById("ios-audio-sink");K||(K=document.createElement("audio"),K.id="ios-audio-sink",K.muted=!0,K.playsInline=!0,K.style.display="none",document.body.appendChild(K)),K.srcObject=R,await K.play().catch(()=>{})}catch{}const H=M.current.createAnalyser();M.current.createMediaStreamSource(R).connect(H),H.fftSize=256,j.current=H,se();let I="audio/webm;codecs=opus";typeof MediaRecorder<"u"&&MediaRecorder.isTypeSupported&&!MediaRecorder.isTypeSupported(I)&&(MediaRecorder.isTypeSupported("audio/mp4")?I="audio/mp4":MediaRecorder.isTypeSupported("audio/aac")?I="audio/aac":I="");const W=new MediaRecorder(R,I?{mimeType:I}:void 0);b.current=W,E.current=[],W.ondataavailable=K=>{K.data.size>0&&E.current.push(K.data)},W.onstop=()=>{const K=I&&I.startsWith("audio/")?I:"audio/webm",ee=new Blob(E.current,{type:K});x(ee),e(ee,f),N.current&&N.current.getTracks().forEach(oe=>oe.stop()),A.current&&cancelAnimationFrame(A.current)},W.start(1e3),l(!0),h(0),P.current=setInterval(()=>{h(K=>{const ee=K+1;return ee>=r&&L(),ee})},1e3)}catch(V){console.error("Error starting recording:",V);const R=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;V.name==="NotAllowedError"?v(R?"Microphone access denied. Please go to Settings > Safari > Microphone and allow access, then refresh the page.":"Microphone access denied. Please allow microphone access in your browser settings and try again."):V.name==="NotFoundError"?v("No microphone found. Please connect a microphone and try again."):V.name==="NotSupportedError"?v("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox."):V.message.includes("HTTPS")?v("Microphone access requires HTTPS. Please use a secure connection."):v(`Failed to access microphone: ${V.message}`)}},[r]),L=_.useCallback(()=>{if(b.current&&o&&(b.current.stop(),l(!1),d(!1),P.current&&clearInterval(P.current),f<t)){v(`Recording must be at least ${t} seconds long.`);return}},[o,f,t,g,e]),G=_.useCallback(()=>{b.current&&o&&!u&&(b.current.pause(),d(!0),P.current&&clearInterval(P.current))},[o,u]),X=_.useCallback(()=>{b.current&&o&&u&&(b.current.resume(),d(!1),P.current=setInterval(()=>{h(V=>{const R=V+1;return R>=r&&L(),R})},1e3))},[o,u,r,L]),se=_.useCallback(()=>{if(!j.current)return;const V=j.current,R=new Uint8Array(V.frequencyBinCount),H=()=>{V.getByteFrequencyData(R);const z=R.reduce((I,W)=>I+W,0)/R.length;z<10?k("poor"):z<30?k("fair"):k("good"),o&&(A.current=requestAnimationFrame(H))};H()},[o]),Q=V=>{const R=Math.floor(V/60),H=V%60;return`${R}:${H.toString().padStart(2,"0")}`},re=()=>{switch(T){case"poor":return"text-red-600";case"fair":return"text-yellow-600";case"good":return"text-green-600";default:return"text-gray-600"}},B=()=>{switch(T){case"poor":return"Poor audio quality - speak closer to microphone";case"fair":return"Fair audio quality - good for recording";case"good":return"Excellent audio quality";default:return"Monitoring audio quality..."}};return c.jsxs("div",{className:"audio-recorder bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Record Your Response"}),c.jsx("p",{className:"text-gray-600",children:"Speak clearly and at a normal pace. You can pause and resume if needed."})]}),c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:Q(f)}),c.jsx("div",{className:`text-sm ${re()}`,children:B()}),u&&c.jsx("div",{className:"text-yellow-600 font-semibold mt-2",children:" Recording Paused"})]}),o&&c.jsx("div",{className:"mb-6",children:c.jsx("div",{className:"flex justify-center items-center space-x-1 h-8",children:Array.from({length:20},(V,R)=>c.jsx("div",{className:"bg-blue-400 rounded-sm",style:{width:"4px",height:`${Math.random()*20+4}px`,animation:"pulse 0.5s ease-in-out infinite"}},R))})}),c.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center mb-6",children:o?c.jsxs(c.Fragment,{children:[u?c.jsxs("button",{onClick:X,className:"w-full sm:w-auto bg-green-600 text-white px-6 py-4 rounded-full hover:bg-green-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Resume"})]}):c.jsxs("button",{onClick:G,className:"w-full sm:w-auto bg-yellow-600 text-white px-6 py-4 rounded-full hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Pause"})]}),c.jsxs("button",{onClick:L,className:"w-full sm:w-auto bg-gray-600 text-white px-6 py-4 rounded-full hover:bg-gray-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Stop & Submit"})]})]}):c.jsxs("button",{onClick:D,className:"w-full sm:w-auto bg-red-600 text-white px-6 py-4 rounded-full hover:bg-red-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[c.jsx("span",{className:"text-xl",children:""}),c.jsx("span",{children:"Start Recording"})]})}),y&&c.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:y})}),c.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Attempt ",a," of ",s,a<s&&c.jsx("span",{className:"ml-2 text-blue-600",children:"(You can re-record if needed)"})]})]})}),mH=({audioBlob:e,audioUrl:t,recordingTime:r,className:n=""})=>{const[s,a]=_.useState(!1),[i,o]=_.useState(0),[l,u]=_.useState(0),[d,f]=_.useState(1),[h,g]=_.useState(1),[x,y]=_.useState(!0),[v,T]=_.useState(""),[k,b]=_.useState(!1),[E,N]=_.useState(null),[P,M]=_.useState(!1),j=_.useRef(null),A=_.useRef(null),D=_.useRef(!1);_.useEffect(()=>()=>{D.current=!0},[]),_.useEffect(()=>{let R=!1;if(t)R||T(t);else if(e){if(!e||e.size===0){R||y(!1);return}if(!(e instanceof Blob)){console.error("audioBlob is not a Blob:",typeof e,e),R||y(!1);return}const H=URL.createObjectURL(e);return R||T(H),()=>{R=!0,URL.revokeObjectURL(H)}}return()=>{R=!0}},[e,t]),_.useEffect(()=>{let R=!1;const H=I=>{try{const W=new URL(I);return/\/storage\/v1\/object\/public\//.test(W.pathname)}catch{return!1}};async function z(I){if(!I||P||/\/object\/sign\//.test(I)||!H(I))return I;try{const K=new URL(I).pathname.replace(/^\/storage\/v1\/object\/public\//,""),ee=K.split("/")[0],oe=K.substring(ee.length+1),Z=await fetch(`/.netlify/functions/get-speaking-test-new?action=sign-audio&bucket=${encodeURIComponent(ee)}&file_path=${encodeURIComponent(oe)}`);if(Z.ok){const{url:le}=await Z.json();if(!R&&!D.current){M(!0);try{await fetch(le,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}T(le)}return le}}catch{}return I}return(async()=>{if(t){const I=await z(t);try{await fetch(I,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}!R&&!D.current&&!P&&T(I)}})(),()=>{R=!0}},[t,P]),_.useEffect(()=>{let R=!1;return v&&(R||(b(!1),N(null),y(!0))),()=>{R=!0}},[v]),_.useEffect(()=>{if(j.current&&v){const R=j.current;let H=!1;try{R.src=v}catch{}R.load();const z=()=>{if(H||D.current)return;let ie=R.duration;if(ie===1/0)try{R.currentTime=1e101,R.ontimeupdate=()=>{if(H||D.current)return;R.ontimeupdate=null;const pe=R.duration;H||(u(isFinite(pe)&&pe>0?pe:0),R.currentTime=0,y(!1))};return}catch(pe){console.warn("Seek trick failed:",pe)}if(isNaN(ie)||!isFinite(ie)||ie<=0){const pe=R.seekable&&R.seekable.length>0&&isFinite(R.seekable.end(0)),Ae=!pe&&R.buffered&&R.buffered.length>0&&isFinite(R.buffered.end(R.buffered.length-1));pe?ie=R.seekable.end(0):Ae&&(ie=R.buffered.end(R.buffered.length-1))}isNaN(ie)||!isFinite(ie)||ie<=0?(console.warn("Invalid audio duration after fallbacks:",ie),r&&r>0?H||u(r):H||u(0)):H||u(ie),H||y(!1)},I=()=>{H||D.current||z()},W=()=>{H||D.current||z()},K=()=>{H||D.current||z()},ee=()=>{H||D.current||z()},oe=()=>{H||D.current||o(R.currentTime)},Z=()=>{H||D.current||(a(!1),o(0))},le=()=>{H||D.current||a(!0)},ue=()=>{H||D.current||a(!1)},de=ie=>{if(H||D.current)return;console.error("Audio loading error:",ie),console.error("Audio error details:",{error:R.error,networkState:R.networkState,readyState:R.readyState,src:R.src,currentSrc:R.currentSrc});const pe=R.error?.code;pe===4&&b(!0),N(R.error||{code:pe}),y(!1)},Te=setTimeout(()=>{H||D.current||R.readyState===0&&y(!1)},6e3);return R.addEventListener("loadedmetadata",I),R.addEventListener("durationchange",W),R.addEventListener("canplay",K),R.addEventListener("canplaythrough",ee),R.addEventListener("timeupdate",oe),R.addEventListener("ended",Z),R.addEventListener("play",le),R.addEventListener("pause",ue),R.addEventListener("error",de),()=>{H=!0,clearTimeout(Te),R.removeEventListener("loadedmetadata",I),R.removeEventListener("durationchange",W),R.removeEventListener("canplay",K),R.removeEventListener("canplaythrough",ee),R.removeEventListener("timeupdate",oe),R.removeEventListener("ended",Z),R.removeEventListener("play",le),R.removeEventListener("pause",ue),R.removeEventListener("error",de),R.pause(),R.src="",R.load()}}},[v,r]),_.useEffect(()=>{let R=!1;return r&&r>0&&(isNaN(l)||!isFinite(l)||l<=0)&&(R||u(r)),()=>{R=!0}},[r,l]);const L=()=>{j.current&&(s?j.current.pause():j.current.play().catch(R=>{console.error("Play failed:",R)}))},G=R=>{if(j.current&&A.current&&l>0){const H=A.current.getBoundingClientRect(),z=R.clientX-H.left,I=H.width,W=Math.max(0,Math.min(l,z/I*l));isFinite(W)&&W>=0&&(j.current.currentTime=W,o(W))}},X=R=>{const H=parseFloat(R.target.value);f(H),j.current&&(j.current.volume=H)},se=R=>{const H=parseFloat(R.target.value);g(H),j.current&&(j.current.playbackRate=H)},Q=R=>{if(isNaN(R))return"0:00";const H=Math.floor(R/60),z=Math.floor(R%60);return`${H}:${z.toString().padStart(2,"0")}`};if(!e&&!t)return c.jsx("div",{className:`audio-player ${n}`,children:c.jsx("div",{className:"text-center text-gray-500 py-8",children:"No audio available"})});const B=(R=>{try{const z=(R||"").toLowerCase().split("?")[0].split("#")[0];return z.endsWith(".webm")?"audio/webm":z.endsWith(".mp3")?"audio/mpeg":z.endsWith(".m4a")?"audio/mp4":z.endsWith(".aac")?"audio/aac":z.endsWith(".wav")?"audio/wav":void 0}catch{return}})(v||t),V=Gs.useMemo(()=>typeof window>"u"?!0:document.createElement("audio").canPlayType("audio/webm")!=="",[]);return c.jsxs("div",{className:`audio-player bg-gray-50 rounded-lg p-4 ${n}`,children:[c.jsx("audio",{ref:j,preload:"metadata",controls:!1,style:{display:"none"},crossOrigin:"anonymous",children:c.jsx("source",{src:v,type:B})}),x?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading audio..."})]}):k?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("p",{className:"text-sm text-red-600",children:"This audio format isn't supported by your browser."}),v?c.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,B?c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",B]}):null,c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Browser WebM support: ",V?"Yes":"No",!V&&" - Try using Chrome, Firefox, or Edge"]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Preferred format: WebM"})]}):E?c.jsxs("div",{className:"text-center py-4",children:[c.jsx("p",{className:"text-sm text-red-600",children:"Playback failed. Please try opening the audio directly."}),v?c.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,B?c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",B]}):null]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"mb-4",children:[c.jsx("div",{ref:A,className:"w-full bg-gray-200 rounded-full h-3 cursor-pointer hover:h-4 transition-all min-h-[24px]",onClick:G,children:c.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${i/l*100}%`}})}),c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2 font-medium",children:[c.jsx("span",{children:Q(i)}),c.jsx("span",{children:Q(l)})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("button",{onClick:L,className:"bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center",children:s?c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):c.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:c.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.617 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.617l3.766-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:d,onChange:X,className:"w-24 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer min-h-[20px]"}),c.jsxs("span",{className:"text-sm text-gray-600 w-10 font-medium",children:[Math.round(d*100),"%"]})]})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Speed:"}),c.jsxs("select",{value:h,onChange:se,className:"text-sm border border-gray-300 rounded px-2 py-1",children:[c.jsx("option",{value:"0.5",children:"0.5x"}),c.jsx("option",{value:"0.75",children:"0.75x"}),c.jsx("option",{value:"1",children:"1x"}),c.jsx("option",{value:"1.25",children:"1.25x"}),c.jsx("option",{value:"1.5",children:"1.5x"}),c.jsx("option",{value:"2",children:"2x"})]})]})]})]})]})},I0e=({transcript:e,scores:t,audioBlob:r,recordingTime:n,onReRecord:s,onFinalSubmit:a,canReRecord:i,attemptNumber:o,maxAttempts:l,isSubmitting:u=!1})=>{const[d,f]=_.useState(!1);console.log(" FeedbackDisplay received recordingTime:",n);const h=(v,T)=>{const k=v/T*100;return k>=80?"text-green-600":k>=60?"text-yellow-600":"text-red-600"},g=(v,T)=>{const k=v/T*100;return k>=90?"A+":k>=80?"A":k>=70?"B":k>=60?"C":k>=50?"D":"F"},x=()=>g(t?.overall_score||0,100),y=()=>h(t?.overall_score||0,100);return console.log(" FeedbackDisplay received scores:",t),console.log(" Individual score values:",{grammar_score:t?.grammar_score,vocabulary_score:t?.vocabulary_score,pronunciation_score:t?.pronunciation_score,fluency_score:t?.fluency_score,content_score:t?.content_score}),c.jsxs("div",{className:"feedback-display bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Speaking Test Results"}),c.jsx("p",{className:"text-gray-600",children:"Review your performance and decide whether to submit or re-record."})]}),c.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-3 sm:p-6 rounded-lg mb-6",children:c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:`text-4xl font-bold ${y()}`,children:[t?.overall_score||0,"/100"]}),c.jsxs("div",{className:`text-2xl font-semibold ${y()} mt-2`,children:["Grade: ",x()]}),c.jsx("div",{className:"text-gray-600 mt-2",children:t?.overall_score>=80?"Excellent work!":t?.overall_score>=60?"Good job!":t?.overall_score>=50?"Not bad, but could be better.":"Keep practicing!"})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Grammar"}),c.jsxs("span",{className:`font-bold ${h(t?.grammar_score||0,25)}`,children:[t?.grammar_score||0,"/25"]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[t?.grammar_mistakes||0," mistakes found"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Vocabulary"}),c.jsxs("span",{className:`font-bold ${h(t?.vocabulary_score||0,20)}`,children:[t?.vocabulary_score||0,"/20"]})]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[t?.vocabulary_mistakes||0," vocabulary issues"]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Pronunciation"}),c.jsxs("span",{className:`font-bold ${h(t?.pronunciation_score||0,15)}`,children:[t?.pronunciation_score||0,"/15"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Clarity and accuracy"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Fluency"}),c.jsxs("span",{className:`font-bold ${h(t?.fluency_score||0,20)}`,children:[t?.fluency_score||0,"/20"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Pace, pauses, and flow"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Content"}),c.jsxs("span",{className:`font-bold ${h(t?.content_score||0,20)}`,children:[t?.content_score||0,"/20"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"How well addressed the prompt"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${Math.min((t?.content_score||0)/20*100,100)}%`}})})]}),c.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("span",{className:"font-semibold text-gray-700",children:"Word Count"}),c.jsxs("span",{className:"font-bold text-gray-700",children:[t?.word_count||0," words"]})]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total words spoken"}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:c.jsx("div",{className:"bg-gray-600 h-2 rounded-full",style:{width:`${Math.min((t?.word_count||0)/100*100,100)}%`}})})]})]}),r&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Recording"}),c.jsx(mH,{audioBlob:r,recordingTime:n})]}),t?.feedback&&c.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-blue-50 p-3 sm:p-6 rounded-lg border border-green-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("span",{className:"text-green-600 text-2xl",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-semibold text-green-800 mb-3 text-lg",children:"AI Feedback"}),c.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.feedback})]})]})}),t?.improved_transcript&&c.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4",children:[c.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[c.jsx("span",{className:"text-green-600 text-lg",children:""}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Improved Version"}),c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Here's how your response could be improved with better grammar and vocabulary:"})]})]}),c.jsx("div",{className:"bg-white border border-green-200 rounded p-3",children:c.jsx("p",{className:"text-gray-800 leading-relaxed",children:t.improved_transcript})})]}),c.jsx("div",{className:"mb-6",children:c.jsx("button",{onClick:()=>f(!d),className:"text-blue-600 hover:text-blue-800 text-sm",children:d?"Hide Details":"Show Details"})}),d&&c.jsxs("div",{className:"mb-6 bg-blue-50 p-3 sm:p-4 rounded-lg",children:[c.jsx("h4",{className:"font-semibold mb-3",children:"Detailed Analysis"}),c.jsxs("div",{className:"space-y-3 text-sm",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Word Count Analysis:"}),c.jsxs("span",{className:"ml-2 text-gray-700",children:["You spoke ",t?.word_count||0," words.",t?.word_count>=50?" Great job meeting the minimum requirement!":" Consider speaking more to meet the minimum word requirement."]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Grammar Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.grammar_mistakes===0?"Perfect grammar!":`Found ${t?.grammar_mistakes||0} grammar ${t?.grammar_mistakes===1?"mistake":"mistakes"}.`}),t?.grammar_corrections&&t.grammar_corrections.length>0&&c.jsx("div",{className:"mt-2 space-y-2",children:t.grammar_corrections.map((v,T)=>c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-red-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-red-600",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),c.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[c.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Vocabulary Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.vocabulary_mistakes===0?"Excellent vocabulary usage!":`Found ${t?.vocabulary_mistakes||0} vocabulary ${t?.vocabulary_mistakes===1?"issue":"issues"}.`}),t?.vocabulary_corrections&&t.vocabulary_corrections.length>0&&c.jsx("div",{className:"mt-2 space-y-2",children:t.vocabulary_corrections.map((v,T)=>c.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-purple-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-purple-600",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),c.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[c.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},T))})]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Pronunciation Analysis:"}),c.jsx("span",{className:"ml-2 text-gray-700",children:t?.pronunciation_corrections&&t.pronunciation_corrections.length>0?`Found ${t.pronunciation_corrections.length} pronunciation ${t.pronunciation_corrections.length===1?"tip":"tips"} to help improve clarity.`:"Great pronunciation! Your speech was clear and easy to understand."})]}),t?.pronunciation_corrections&&t.pronunciation_corrections.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Pronunciation Tips:"}),c.jsx("div",{className:"mt-2 space-y-2",children:t.pronunciation_corrections.map((v,T)=>c.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-orange-600 font-mono text-sm",children:""}),c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-orange-700",children:v.word}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-700",children:v.correction})]})})]})},T))})]}),t?.language_use_corrections&&t.language_use_corrections.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Language Use Suggestions:"}),c.jsx("div",{className:"mt-2 space-y-2",children:t.language_use_corrections.map((v,T)=>c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 sm:p-3",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-blue-600 font-mono text-sm",children:""}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-blue-700",children:v.mistake}),c.jsx("span",{className:"mx-2",children:""}),c.jsx("span",{className:"font-medium text-green-700",children:v.suggestion})]}),v.explanation&&c.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:[c.jsx("strong",{children:"Why:"})," ",v.explanation]})]})]})},T))})]})]})]}),c.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Attempt ",o," of ",l]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center",children:[i&&c.jsxs("button",{onClick:s,className:"w-full sm:w-auto bg-yellow-600 text-white px-4 py-2.5 rounded-lg hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium",children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Re-record"})]}),c.jsx("button",{onClick:a,disabled:u,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium ${u?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white`,children:u?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),c.jsx("span",{children:"Submitting..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:""}),c.jsx("span",{children:"Submit Final"})]})})]}),!i&&c.jsx("div",{className:"mt-4 p-2 sm:p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:c.jsxs("p",{className:"text-yellow-800 text-sm",children:[c.jsx("strong",{children:"Maximum attempts reached."}),' This is your final attempt. Click "Submit Final" to complete the test.']})})]})},R0e=({testData:e,onComplete:t,onExit:r,onTestComplete:n})=>{const[s,a]=_.useState("recording"),[i,o]=_.useState(null),[l,u]=_.useState(""),[d,f]=_.useState(null),[h,g]=_.useState(!1),[x,y]=_.useState(!1),[v,T]=_.useState(!1),[k,b]=_.useState(null),[E,N]=_.useState(1),[P]=_.useState(e.max_attempts||3),[M,j]=_.useState(!1),[A,D]=_.useState(0),[L,G]=_.useState(!1),[X,se]=_.useState(0),[Q,re]=_.useState(null),B=$l(),{user:V}=Ps(),{makeAuthenticatedRequest:R}=B,H=_.useRef(null);_.useEffect(()=>{if(e?.test_id&&V?.student_id){const de=`speaking_attempts_${V.student_id}_${e.test_id}`,Te=localStorage.getItem(de);if(Te){const ie=parseInt(Te,10);ie>0&&ie<=P&&(N(ie),console.log(" Loaded attempts from localStorage:",ie))}}},[e,V,P]),_.useEffect(()=>{if(e&&!Q){const de=new Date;re(de),console.log(" Speaking test timer started at:",de.toISOString())}},[e,Q]),_.useEffect(()=>{let de=0;s==="recording"?de=25:s==="processing"?de=50:s==="feedback"?de=75:s==="completed"&&(de=100),se(de)},[s]),_.useEffect(()=>{(async()=>{try{if(!window.isSecureContext&&!window.location.hostname.includes("localhost")){b("Microphone access requires HTTPS. Please use a secure connection.");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){b("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");return}if(navigator.permissions)try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?(j(!0),console.log(" Microphone permission already granted")):console.log(" Microphone permission not yet granted - user will need to click record button")}catch(Te){console.log(" Could not check microphone permission status:",Te)}}catch(Te){console.error(" Error checking microphone permission:",Te)}})()},[]),_.useEffect(()=>{const de=setInterval(()=>{i&&s==="recording"&&z()},3e4);return()=>clearInterval(de)},[i,s]);const z=_.useCallback(async()=>{try{const de={test_id:e.test_id,audio_blob:i?await I(i):null,attempt_number:E,step:s,timestamp:new Date().toISOString()};localStorage.setItem(`speaking_progress_${e.test_id}`,JSON.stringify(de))}catch(de){console.error("Failed to save progress:",de)}},[e.test_id,i,E,s]),I=de=>new Promise((Te,ie)=>{const pe=new FileReader;pe.onloadend=()=>{const Me=pe.result.split(",")[1];Te(Me)},pe.onerror=ie,pe.readAsDataURL(de)}),W=_.useCallback(de=>{if(e?.test_id&&V?.student_id){const Te=`speaking_attempts_${V.student_id}_${e.test_id}`;localStorage.setItem(Te,de.toString()),console.log(" Saved attempts to localStorage:",de)}},[e,V]),K=_.useCallback(async(de,Te,ie,pe,Ae)=>{if(e?.test_id&&V?.student_id)try{const{setCachedData:Me,CACHE_TTL:Je}=await Za(async()=>{const{setCachedData:At,CACHE_TTL:vt}=await Promise.resolve().then(()=>dp);return{setCachedData:At,CACHE_TTL:vt}},void 0),Ve=`speaking_test_data_${V.student_id}_${e.test_id}`,lt={audioBlob:de?await I(de):null,transcript:Te,scores:ie,recordingTime:pe,currentStep:Ae,timestamp:Date.now()};Me(Ve,lt,Je.speaking_test_data),console.log(" Saved speaking test data to cache:",Ve)}catch(Me){console.error("Failed to save speaking test data to cache:",Me)}},[e,V]),ee=_.useCallback(async()=>{if(e?.test_id&&V?.student_id)try{const{getCachedData:de}=await Za(async()=>{const{getCachedData:pe}=await Promise.resolve().then(()=>dp);return{getCachedData:pe}},void 0),Te=`speaking_test_data_${V.student_id}_${e.test_id}`,ie=de(Te);if(ie){if(console.log(" Loaded speaking test data from cache:",ie),ie.audioBlob){const pe=new Blob([Uint8Array.from(atob(ie.audioBlob),Ae=>Ae.charCodeAt(0))],{type:"audio/webm"});o(pe)}return ie.transcript&&u(ie.transcript),ie.scores&&f(ie.scores),ie.recordingTime&&D(ie.recordingTime),ie.currentStep&&a(ie.currentStep),!0}}catch(de){console.error("Failed to load speaking test data from cache:",de)}return!1},[e,V]);_.useEffect(()=>{if(e?.test_id&&V?.student_id){try{const de=V.student_id,Te=`retest_assignment_id_${de}_speaking_${e.test_id}`,ie=`retest_in_progress_${de}_speaking_${e.test_id}`;if(!!localStorage.getItem(Te)||!!localStorage.getItem(ie)){const Ae=`speaking_test_data_${de}_${e.test_id}`,Me=`anti_cheating_${de}_speaking_${e.test_id}`,Je=`speaking_progress_${e.test_id}`;localStorage.removeItem(Ae),localStorage.removeItem(Me),localStorage.removeItem(Je),console.log(" Cleared speaking per-test cache for retest start:",{cacheKey:Ae,antiCheatKey:Me,progressKey:Je})}}catch{}ee()}},[e,V,ee]),_.useEffect(()=>{e?.test_id&&V?.student_id&&(i||l||d)&&K(i,l,d,A,s)},[i,l,d,A,s,e,V,K]);const oe=_.useCallback(async(de,Te)=>{if(L){console.log(" Already processing, skipping duplicate call");return}console.log(" Recording completed, duration:",Te),G(!0),o(de),D(Te),a("processing"),b(null);try{const ie=await I(de),pe=new Date,Ae=e.start_time?Math.round((pe-e.start_time)/1e3):0,Me=e.start_time?new Date(e.start_time).toISOString():pe.toISOString(),Je=V.student_id,Ve=`retest_assignment_id_${Je}_speaking_${e.test_id}`,Dt=localStorage.getItem(Ve),lt={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Je,question_id:e.question_id||1,audio_blob:ie,audio_duration:de.duration||0,time_taken:Ae,started_at:Me,submitted_at:pe.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:Dt?Number(Dt):null,parent_test_id:e.test_id};console.log(" Submitting speaking test:",lt),console.log(" Processing audio with AI...");try{const vt=await(await R("/.netlify/functions/process-speaking-audio-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e.test_id,question_id:e.question_id||1,audio_blob:ie})})).json();if(vt.success){console.log(" AI Analysis Result:",vt),u(vt.transcript);const ct=vt.transcript?vt.transcript.split(/\s+/).filter(Bt=>Bt.length>0).length:0;console.log(" Word Count Verification:",{aiCount:vt.word_count,actualCount:ct,transcript:vt.transcript});const bt=ct,Ut={overall_score:vt.overall_score,word_count:bt,grammar_score:vt.grammar_score,vocabulary_score:vt.vocabulary_score,pronunciation_score:vt.pronunciation_score,fluency_score:vt.fluency_score,content_score:vt.content_score,grammar_mistakes:vt.grammar_mistakes,vocabulary_mistakes:vt.vocabulary_mistakes,feedback:vt.feedback,improved_transcript:vt.improved_transcript,grammar_corrections:vt.grammar_corrections||[],vocabulary_corrections:vt.vocabulary_corrections||[],language_use_corrections:vt.language_use_corrections||[],pronunciation_corrections:vt.pronunciation_corrections||[],ai_feedback:vt.ai_feedback||null};console.log(" Mapped Scores:",Ut),console.log(" Individual scores check:",{grammar_score:vt.grammar_score,vocabulary_score:vt.vocabulary_score,pronunciation_score:vt.pronunciation_score,fluency_score:vt.fluency_score,content_score:vt.content_score}),f(Ut),a("feedback")}else throw new Error(vt.message||"Failed to process audio with AI");localStorage.removeItem(`speaking_progress_${e.test_id}`)}catch(At){console.error("Speaking test submission error:",At),At.message.includes("No valid authentication token found")?(b("Your session has expired. Please refresh the page and try again."),setTimeout(()=>{window.location.reload()},3e3)):b(At.message),a("recording")}}catch(ie){console.error("Speaking test submission error:",ie),b(ie.message),a("recording")}finally{G(!1)}},[e,V,R,E,W,L]);_.useEffect(()=>{s==="processing"&&!l&&!d&&(console.log(' Detected stuck "processing" state on reload. Attempting recovery...'),i?(console.log(" Resuming processing from cached audio blob..."),oe(i,A)):(console.log(" No cached audio blob found. Resetting to recording step."),a("recording")))},[s,l,d,i,A,oe]);const Z=_.useCallback(()=>{if(E<P){o(null),u(""),f(null),b(null),G(!1);const de=E+1;N(de),W(de),a("recording")}else b("Maximum attempts reached")},[E,P,W]),le=_.useCallback(async()=>{if(!(!l||!d)){g(!0);try{const de=new Date,Te=e.start_time?Math.round((de-e.start_time)/1e3):0,ie=e.start_time?new Date(e.start_time).toISOString():de.toISOString(),pe=V.student_id,Ae=`retest_assignment_id_${pe}_speaking_${e.test_id}`,Me=localStorage.getItem(Ae),{academicCalendarService:Je}=await Za(async()=>{const{academicCalendarService:ct}=await Promise.resolve().then(()=>i3);return{academicCalendarService:ct}},void 0);await Je.loadAcademicCalendar();const Dt=Je.getCurrentTerm()?.id;if(!Dt)throw new Error("No current academic period found");const lt={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:pe,academic_period_id:Dt,question_id:e.question_id||1,audio_blob:i?await I(i):null,audio_duration:i?.duration||0,time_taken:Te,started_at:ie,submitted_at:de.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:Me?Number(Me):null,parent_test_id:e.test_id,transcript:l,scores:d,final_submission:!0};console.log(" Final submission:",lt),console.log(" Making final submission request...");const At=await R("/.netlify/functions/submit-speaking-test-final",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(lt)});console.log(" Final submission response status:",At.status);const vt=await At.json();if(console.log(" Final submission result:",vt),vt.success){if(V?.student_id){const at=`test_completed_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(at,"true"),console.log(" Speaking test marked as completed in localStorage:",at);const It=`retest_in_progress_${V.student_id}_speaking_${e.test_id}`;localStorage.removeItem(It),console.log(" Cleared in-progress retest lock:",It);const Lt=`speaking_attempts_${V.student_id}_${e.test_id}`;localStorage.removeItem(Lt),console.log(" Cleared attempts from localStorage upon submission");const{clearTestData:Xt}=await Za(async()=>{const{clearTestData:vr}=await Promise.resolve().then(()=>dp);return{clearTestData:vr}},void 0);Xt(V.student_id,"speaking_test_data",e.test_id),console.log(" Cleared speaking test data from cache upon submission");try{const vr=`anti_cheating_${V.student_id}_speaking_${e.test_id}`;localStorage.removeItem(vr),console.log(" Cleared anti-cheating key:",vr)}catch{}}console.log(" Caching speaking test results after submission...");const bt=`student_results_table_${V?.student_id||V?.id||"unknown"}`,{setCachedData:Ut,getCachedData:Bt,CACHE_TTL:Vt,clearTestData:We}=await Za(async()=>{const{setCachedData:at,getCachedData:It,CACHE_TTL:Lt,clearTestData:Xt}=await Promise.resolve().then(()=>dp);return{setCachedData:at,getCachedData:It,CACHE_TTL:Lt,clearTestData:Xt}},void 0),Ue={id:Date.now(),test_id:e.test_id,test_type:"speaking",test_name:e.test_name,score:Math.round(d.overall_score/10),max_score:10,percentage:d.overall_score,caught_cheating:!1,visibility_change_times:0,is_completed:!0,submitted_at:new Date().toISOString(),subject:"Listening and Speaking",teacher_name:e.teacher_name||"Unknown"};let tt={success:!0,results:[],count:0};try{const at=Bt(bt);at&&Array.isArray(at.results)&&(tt.results=at.results.slice())}catch{}if(tt.results.unshift(Ue),tt.count=tt.results.length,Ut(bt,tt,Vt.student_results_table),console.log(" Speaking test results cached (merged) with key:",bt),V?.student_id&&We(V.student_id,"speaking",e.test_id),!!Me&&V?.student_id){let at=3;try{const Xt=localStorage.getItem(`student_active_tests_${V.student_id}`);if(Xt){const br=JSON.parse(Xt)?.tests?.find(Dr=>Dr.test_id===e.test_id&&Dr.test_type==="speaking");br&&(at=br.retest_attempts_left||br.max_attempts||3)}}catch(Xt){console.error("Error checking active tests cache:",Xt)}const Lt=(d?.overall_score??0)>=50;if(Lt){const Xt=`retest_attempt${at}_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(Xt,"true"),console.log(" Passed retest, marking last-slot key:",Xt);let vr=0;for(let Sr=1;Sr<=10;Sr++){const pr=`retest_attempt${Sr}_${V.student_id}_speaking_${e.test_id}`;localStorage.getItem(pr)==="true"&&vr++}const br=`test_completed_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(br,"true"),console.log(" Marked retest as completed (student passed):",br);const Dr=`retest_attempts_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(Dr,JSON.stringify({used:vr,max:at})),console.log(" Set retest attempts metadata (student passed):",Dr,{used:vr,max:at})}else{let Xt=1;for(let pr=1;pr<=10;pr++){const ye=`retest_attempt${pr}_${V.student_id}_speaking_${e.test_id}`;if(localStorage.getItem(ye)!=="true"){Xt=pr;break}}const vr=`retest_attempt${Xt}_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(vr,"true"),console.log(" Marked retest attempt as completed:",vr);let br=0;for(let pr=1;pr<=10;pr++){const ye=`retest_attempt${pr}_${V.student_id}_speaking_${e.test_id}`;localStorage.getItem(ye)==="true"&&br++}const Dr=at-br,Sr=Dr<=0||Lt;if(console.log(" Retest completion check:",{usedAttempts:br,maxAttempts:at,attemptsLeft:Dr,passed:Lt,shouldComplete:Sr}),Sr){const pr=`test_completed_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(pr,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",pr);const ye=`retest_attempts_${V.student_id}_speaking_${e.test_id}`;localStorage.setItem(ye,JSON.stringify({used:br,max:at})),console.log(" Set retest attempts metadata (attempts exhausted):",ye,{used:br,max:at})}}}if(V?.student_id){const at=`retest1_${V.student_id}_speaking_${e.test_id}`,It=`retest_assignment_id_${V.student_id}_speaking_${e.test_id}`;localStorage.removeItem(at),localStorage.removeItem(It)}try{n&&n(d.overall_score),typeof r=="function"&&r()}catch{}return}else throw new Error(vt.message||"Failed to submit speaking test")}catch(de){console.error("Speaking test submission error:",de),b(de.message)}finally{g(!1)}}},[e,V,R,l,d,i,E,t]);_.useCallback(()=>{a("completed"),t({test_id:e.test_id,transcript:l,scores:d,attempt_number:E})},[e.test_id,l,d,E,t]);const ue=()=>{switch(s){case"recording":return c.jsxs("div",{className:"speaking-test-recording",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:e.test_name}),c.jsxs("div",{className:"mb-6 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Instructions:"}),c.jsx("p",{className:"text-gray-700 mb-4",children:e.prompt}),c.jsx("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg",children:c.jsxs("p",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Requirements:"})," Minimum ",e.min_words||50," words, 0-",e.max_duration||600," seconds duration"]})})]}),c.jsx(O0e,{ref:H,onRecordingComplete:oe,minDuration:0,maxDuration:e.max_duration||600,minWords:e.min_words||50,maxAttempts:P,currentAttempt:E}),k&&c.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:k})})]});case"processing":return c.jsxs("div",{className:"transcription-status bg-white rounded-lg shadow-lg p-4 sm:p-8 text-center",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Processing Your Speech"}),c.jsx("p",{className:"text-lg text-blue-600",children:"Please wait while we process your audio..."})]}),c.jsxs("div",{className:"inline-flex space-x-1",children:[c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),c.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]});case"feedback":return console.log(" Rendering feedback step with Submit Final button"),c.jsx(I0e,{transcript:l,scores:d,audioBlob:i,recordingTime:A,onReRecord:Z,onFinalSubmit:()=>y(!0),canReRecord:E<P,attemptNumber:E,maxAttempts:P,isSubmitting:h});case"completed":const de={showResults:!0,testInfo:{test_name:e?.test_name||"Speaking Test",id:e?.test_id,test_id:e?.test_id},testType:"speaking",score:d?.overall_score||0,totalQuestions:1,percentage:d?.overall_score||0,passed:(d?.overall_score||0)>=50,questionAnalysis:[{questionNumber:1,userAnswer:l,correctAnswer:"Speaking test completed",isCorrect:!0,score:d?.overall_score||0,maxScore:100,feedback:`Word Count: ${d?.word_count||0}, Grammar: ${d?.grammar_score||0}/40, Vocabulary: ${d?.vocab_score||0}/30`}],timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};return c.jsx("div",{className:"speaking-test-completed",children:c.jsx(w2,{testResults:de,onBackToCabinet:()=>T(!0),onRetakeTest:()=>{a("recording"),u(""),f(null),o(null),N(1)},isLoading:!1})});default:return null}};return c.jsxs("div",{children:[c.jsx(Ca,{isOpen:x&&!h,onClose:()=>y(!1),title:"Submit Speaking Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>y(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:()=>{y(!1),le()},variant:"primary",children:"Submit"})]})]})}),c.jsx(Ca,{isOpen:v,onClose:()=>T(!1),title:"Exit Speaking Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>T(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:()=>{T(!1),typeof r=="function"&&r()},variant:"primary",children:"Go Back"})]})]})}),c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6",children:[k&&c.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-800",children:k})}),ue()]})]})},L0e=e=>function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296},B0e=(e,t,r)=>{if(e.length===1)return e[0];const n=`${r}:speaking:${t}`,s=Array.from(n).reduce((o,l)=>(o<<5)-o+l.charCodeAt(0),0)>>>0,a=L0e(s),i=Math.floor(a()*e.length);return e[i]},$0e=()=>{const{testId:e}=N_(),t=hl(),{user:r}=Ps(),n=$l(),{showNotification:s}=ai(),[a,i]=_.useState(null),[o,l]=_.useState([]),[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,x]=_.useState(null),[y,v]=_.useState(!1),[T,k]=_.useState(null),[b,E]=_.useState(!1),{startTracking:N,stopTracking:P}=v1("speaking",e,r?.student_id||r?.id);_.useEffect(()=>{M(),j()},[e]),_.useEffect(()=>{if(a&&!y){xe.debug(" Speaking test - initializing anti-cheating tracking");const G=r?.student_id||r?.id||"unknown",X=`anti_cheating_${G}_speaking_${e}`,se=localStorage.getItem(X);if(xe.debug(" Checking for anti-cheating data with key:",X),xe.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),xe.debug(" Current test details:",{testType:"speaking",testId:e,studentId:G}),se)try{const Q=JSON.parse(se);xe.debug(" Found existing anti-cheating data for THIS speaking test:",Q),xe.debug(" Visibility change times for this test:",Q.tabSwitches||0),xe.debug(" Cheating status for this test:",Q.isCheating||!1),Q.isCheating&&(xe.debug(" WARNING: Student has been flagged for cheating in THIS speaking test!"),xe.debug(" Tab switches detected in this test:",Q.tabSwitches),s(` Warning: Suspicious activity detected in this speaking test (${Q.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(Q){xe.error(" Error parsing existing anti-cheating data:",Q)}else xe.debug(" No existing anti-cheating data found for this speaking test - starting fresh");N(),xe.debug(" Anti-cheating tracking started for speaking test")}return()=>{a&&(xe.debug(" Cleaning up anti-cheating tracking for speaking test"),P())}},[a,y,e,r?.student_id,r?.id,N,P,s]);const M=async()=>{try{h(!0);const G=await n.getSpeakingTest(e);if(G.success)i(G.test);else throw new Error(G.message||"Failed to load test");const X=await n.getSpeakingTestQuestions(e);if(X.success){const se=X.questions;l(se);const Q=r?.student_id||r?.id,re=B0e(se,e,Q);d(re),xe.debug(" Selected question for student:",{studentId:Q,testId:e,totalQuestions:se.length,selectedQuestion:re?.id,selectedPrompt:re?.prompt?.substring(0,50)+"..."})}}catch(G){xe.error("Error loading test data:",G),x(G.message)}finally{h(!1)}},j=()=>{const X=`test_completed_${r?.student_id||r?.id}_speaking_${e}`;if(localStorage.getItem(X)==="true"){v(!0);const Q=localStorage.getItem(`speaking_test_result_${e}`);Q&&k(JSON.parse(Q))}},A=async G=>{try{v(!0),k(G),localStorage.setItem(`speaking_test_result_${e}`,JSON.stringify(G)),window.dispatchEvent(new CustomEvent("testCompleted",{detail:{testId:e,testType:"speaking"}})),setTimeout(()=>{t("/student")},2e3)}catch(X){xe.error("Error handling test completion:",X)}},D=()=>{if(xe.debug(" Navigating back to cabinet from speaking test..."),a&&r?.student_id){xe.debug(" Cabinet navigation detected - counting as cheating attempt");const X=`anti_cheating_${r?.student_id||r?.id||"unknown"}_speaking_${e}`,se=localStorage.getItem(X);let Q=0,re=!1;if(se)try{const H=JSON.parse(se);Q=H.tabSwitches||0,re=H.isCheating||!1}catch(H){xe.error(" Error parsing existing anti-cheating data:",H)}const B=Q+1,V=B>=2;xe.debug(` Tab switch count: ${Q}  ${B} (cheating: ${V})`);const R={tabSwitches:B,isCheating:V,lastUpdated:new Date().toISOString()};localStorage.setItem(X,JSON.stringify(R)),xe.debug(" Anti-cheating data updated for cabinet navigation:",R)}t("/student")};if(f)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(ot,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),c.jsx("p",{className:"text-gray-600 mt-4",children:"Loading speaking test..."})]})})})]});if(g)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(ot,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Test"}),c.jsx("p",{className:"text-gray-600 mb-6",children:g})]})})})]});if(y&&T)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test Results"})}),c.jsx(ot,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx(w2,{testType:"speaking",testData:a,result:T,onRetake:()=>{v(!1),k(null);const G=JSON.parse(localStorage.getItem("userData")||"{}").student_id;localStorage.removeItem(`test_completed_${G}_speaking_${e}`)}})})]});if(!a||o.length===0)return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(ot,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Test Data"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to load test information"})]})})})]});const L=u;return c.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[c.jsx(Ca,{isOpen:b,onClose:()=>E(!1),title:"Exit Speaking Test",size:"small",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),c.jsxs("div",{className:"flex gap-3 justify-center",children:[c.jsx(ot,{onClick:()=>E(!1),variant:"secondary",children:"Cancel"}),c.jsx(ot,{onClick:()=>{E(!1),D()},variant:"primary",children:"Go Back"})]})]})}),c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsx("div",{children:c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),c.jsx(ot,{variant:"outline",onClick:()=>E(!0),children:"Back to Cabinet"})]})})}),c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.length>1&&u&&c.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex items-start",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-white text-xs font-bold",children:"i"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Question Selection"}),c.jsx("div",{className:"mt-1 text-sm text-blue-700",children:c.jsxs("p",{children:["This test has ",o.length," questions. You have been assigned ",c.jsxs("strong",{children:["Question ",u.question_number]}),"."]})})]})]})}),c.jsx(R0e,{testData:{...a,test_id:parseInt(e),question_id:L?.id,prompt:L?.prompt,start_time:Date.now()},onComplete:A,onExit:D,onTestComplete:A})]})]})},z0e=()=>{const{testType:e,testId:t}=N_(),r=hl(),{activeTests:n}=v2(),s=()=>{r("/student")},a=n.find(i=>i.test_type===e&&i.test_id===parseInt(t));return c.jsx(M0e,{onBackToCabinet:s,currentTest:a||{test_type:e,test_id:parseInt(t)}})},U0e=()=>{const e=hl(),{user:t,isAuthenticated:r,isLoading:n}=Ps(),[s,a]=_.useState(!1),[i,o]=_.useState(!0),[l,u]=_.useState(""),[d,f]=_.useState([]),[h,g]=_.useState(!1),[x,y]=_.useState(!1),[v,T]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),k=_.useCallback(async()=>{xe.debug(" Initializing Student Application...");try{if(o(!0),u(""),!r||!t){xe.debug(" User not authenticated, redirecting to login"),e("/login");return}if(t.role!==Ro.STUDENT){xe.error(" Invalid user role for student app:",t.role),u("Access denied. Student role required.");return}xe.debug(" Initializing event listeners..."),b(),xe.debug(" Setting up back to cabinet button listeners..."),E(),xe.debug(" Setting up password change form listener..."),N(),xe.debug(" Loading student data..."),await P(),xe.debug(" Exposing student functions globally..."),M(),xe.debug(" Populating student info from user data..."),X(t),a(!0),xe.debug(" Student Application initialization complete!")}catch(re){xe.error(" Error initializing student app:",re),u("Failed to initialize student application")}finally{o(!1)}},[r,t,e]);_.useEffect(()=>{n||k()},[n,r,t,k]);const b=_.useCallback(()=>{xe.debug(" Setting up student event listeners...");const re=V=>{h&&!V.target.closest(".student-menu")&&g(!1)},B=V=>{V.key==="Escape"&&h&&g(!1)};return document.addEventListener("click",re),document.addEventListener("keydown",B),()=>{document.removeEventListener("click",re),document.removeEventListener("keydown",B)}},[h]),E=_.useCallback(()=>{xe.debug(" Setting up back to cabinet listeners...")},[]),N=_.useCallback(()=>{xe.debug(" Setting up password change form...")},[]),P=_.useCallback(async()=>{xe.debug(" Loading student data...");try{xe.debug(" Student data loaded successfully")}catch(re){throw xe.error(" Error loading student data:",re),re}},[]),M=_.useCallback(()=>{xe.debug(" Exposing student functions globally..."),window.toggleStudentMenu=j,window.showChangePasswordTab=A,window.hideChangePasswordTab=D,window.navigateBackToCabinet=G,window.handlePasswordChange=L,window.populateStudentInfoDirectly=X,xe.debug(" All student functions exposed globally")},[]),j=_.useCallback(()=>{xe.debug(" toggleStudentMenu called"),g(re=>{const B=!re;return xe.debug(" Menu state changed from",re,"to",B),B}),xe.debug(" Toggled dropdown menu")},[]),A=_.useCallback(()=>{xe.debug(" showChangePasswordTab called"),y(!0),g(!1)},[]),D=_.useCallback(()=>{xe.debug(" hideChangePasswordTab called"),y(!1),T({currentPassword:"",newPassword:"",confirmPassword:""})},[]),L=_.useCallback(async re=>{re.preventDefault(),xe.debug(" handlePasswordChange called");const{currentPassword:B,newPassword:V,confirmPassword:R}=v;if(!B||!V||!R){se("Please fill in all fields","error");return}if(V!==R){se("New passwords do not match","error");return}if(V.length<6){se("New password must be at least 6 characters long","error");return}const H=/[a-zA-Z]/.test(V),z=/[0-9]/.test(V);if(!H||!z){se("New password must contain both letters and numbers","error");return}if(!t||!t.student_id){se("Session expired. Please login again.","error");return}const I=t.student_id;if(window.confirm("Are you sure you want to change your password?"))try{o(!0);const W=await Os.changePassword({studentId:I,currentPassword:B,newPassword:V});W.success?(se("Password changed successfully!","success"),D()):se(W.message||"Failed to change password","error")}catch(W){xe.error("Password change error:",W),se("Failed to change password. Please try again.","error")}finally{o(!1)}},[v,t]),G=_.useCallback(()=>{if(xe.debug("[DEBUG] navigateBackToCabinet called"),!r||!t){xe.warn("[WARN] No valid user found, redirecting to login"),e("/login");return}t.role===Ro.STUDENT?(xe.debug("[DEBUG] Navigating to student cabinet"),e("/student")):(xe.warn("[WARN] Unknown user role, redirecting to login"),e("/login"))},[r,t,e]),X=_.useCallback(re=>{xe.debug(" populateStudentInfoDirectly called with:",re);try{xe.debug(" Student info populated successfully")}catch(B){xe.error(" Error populating student info:",B)}},[]),se=_.useCallback((re,B)=>{const V={id:Date.now(),message:re,type:B,timestamp:new Date};f(R=>[...R,V]),setTimeout(()=>{f(R=>R.filter(H=>H.id!==V.id))},Km.NOTIFICATION_DURATION)},[]),Q=_.useCallback(re=>{const{name:B,value:V}=re.target;T(R=>({...R,[B]:V}))},[]);return i?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing Student Application..."})]})}):l?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Initialization Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:l}),c.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?c.jsxs("div",{className:"bg-gray-50",children:[c.jsxs(UT,{children:[c.jsx(ca,{path:"/",element:c.jsxs("div",{className:"student-app",children:[c.jsx(N0e,{isMenuOpen:h,onToggleMenu:j,onShowPasswordChange:A}),x&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Change Password"}),c.jsxs("form",{onSubmit:L,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:Q,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:Q,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:v.confirmPassword,onChange:Q,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(ot,{type:"button",variant:"secondary",onClick:D,className:"flex-1",children:"Cancel"}),c.jsx(ot,{type:"submit",variant:"primary",disabled:i,className:"flex-1",children:i?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",className:"mr-2"}),"Changing..."]}):"Change Password"})]})]})]})})]})}),c.jsx(ca,{path:"/test/:testType/:testId",element:c.jsx(z0e,{})}),c.jsx(ca,{path:"matching-test/:testId",element:c.jsx(F0e,{})}),c.jsx(ca,{path:"word-matching-test/:testId",element:c.jsx(D0e,{})}),c.jsx(ca,{path:"speaking-test/:testId",element:c.jsx($0e,{})}),c.jsx(ca,{path:"/results",element:c.jsx(hH,{})})]}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:d.map(re=>c.jsx(iu,{type:re.type,message:re.message,onClose:()=>f(B=>B.filter(V=>V.id!==re.id))},re.id))})]}):c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Setting up Student Application..."})]})})},W0e=()=>c.jsx(lB,{children:c.jsx(tH,{children:c.jsx(ZW,{children:c.jsx(U0e,{})})})}),H0e=({result:e,isOpen:t,onClose:r,initialTab:n="overview",editingSpeakingScore:s,tempSpeakingScore:a,isSavingSpeakingScore:i,onStartSpeakingScoreEdit:o,onSaveSpeakingScore:l,onCancelSpeakingScoreEdit:u,onTempSpeakingScoreChange:d})=>{const[f,h]=_.useState(n),g=_.useRef(!1);if(_.useEffect(()=>()=>{g.current=!0},[]),_.useEffect(()=>{t&&h(n)},[t,n]),!t||!e)return null;const x={test_id:e.test_id,test_name:e.test_name,subject_id:e.subject_id};let y=e?.__audioUrl||void 0;const v=y?void 0:e?.answers;typeof v=="string"?y=v:v&&typeof v=="object"&&(y=v.audio_url),_.useEffect(()=>{console.log("[SpeakingReview] Transcript sources",{fromResult:e?.transcript,fromAnswersObject:typeof v=="object"&&v?.transcript?v.transcript:void 0,hasAnswers:!!v,test_id:e?.test_id,student_id:e?.student_id})},[e?.test_id,e?.student_id]);const[T,k]=_.useState("");_.useEffect(()=>{const E=new AbortController;let N=!1;const P=e?.__studentId||e?.student_id;return!e?.transcript&&!(typeof v=="object"&&v?.transcript)&&e?.test_id&&P&&(async()=>{try{const M=`/.netlify/functions/get-speaking-test-new?action=transcript&test_id=${encodeURIComponent(e.test_id)}&student_id=${encodeURIComponent(P)}`;console.log("[SpeakingReview] Fetching transcript from API:",{url:M});const j=await(window.tokenManager?.getToken()||ia.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),A=await fetch(M,{headers:{Authorization:j?`Bearer ${j}`:""},signal:E.signal});console.log("[SpeakingReview] Transcript API response:",{ok:A.ok,status:A.status});const D=await A.json().catch(()=>({}));console.log("[SpeakingReview] Transcript API body:",D),!N&&!g.current&&(A.ok?k(D.transcript||""):console.warn("[SpeakingReview] Transcript API failed:",D?.error||"unknown error"))}catch(M){M.name!=="AbortError"&&!g.current&&console.error("[SpeakingReview] Transcript fetch error:",M)}})(),()=>{N=!0;try{E.abort()}catch{}}},[e]);const b={score:e.score,max_score:e.max_score,percentage:e.percentage,audio_url:y,transcript:e.transcript||T||(typeof v=="object"&&v?.transcript?v.transcript:void 0),time_taken:e.time_taken,started_at:e.started_at,submitted_at:e.submitted_at};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[c.jsxs("h2",{className:"text-xl font-semibold",children:["Speaking Test Review - ",x.test_name]}),c.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"audio",label:"Audio"},{id:"transcript",label:"Transcript"},{id:"analysis",label:"AI Analysis"},{id:"scoring",label:"Scoring"}].map(E=>c.jsx("button",{onClick:()=>h(E.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${f===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:E.label},E.id))})}),c.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f==="overview"&&c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Name"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:x.test_name})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[b.score," / ",b.max_score]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Taken"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.time_taken?`${Math.floor(b.time_taken/60)}:${(b.time_taken%60).toString().padStart(2,"0")}`:"N/A"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),c.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.submitted_at?new Date(b.submitted_at).toLocaleString():"N/A"})]})]})}),f==="audio"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audio Recording"}),b.audio_url?c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Click the play button to listen to the student's recording:"}),c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsx(mH,{audioUrl:b.audio_url,className:"w-full"})})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No audio recording available"})})]}),f==="transcript"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transcript"}),b.transcript?c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.transcript})}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No transcript available"})})]}),f==="analysis"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Analysis Results"}),(()=>{let E=e.ai_feedback;if(E&&typeof E=="string")try{E=JSON.parse(E)}catch{E=null}return E?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Overall Performance"}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-gray-800",children:E.overall_score||0}),c.jsx("div",{className:"text-sm text-gray-600",children:"Overall Score (0-100)"})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Category Breakdown"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[E.grammar_score||0,"/25"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Grammar"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-green-600",children:[E.vocabulary_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Vocabulary"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[E.pronunciation_score||0,"/15"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Pronunciation"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[E.fluency_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Fluency"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-lg font-bold text-red-600",children:[E.content_score||0,"/20"]}),c.jsx("div",{className:"text-xs text-gray-600",children:"Content"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Performance Metrics"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Word Count:"}),c.jsx("span",{className:"text-sm font-medium",children:E.word_count||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Grammar Mistakes:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:E.grammar_mistakes||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Vocabulary Issues:"}),c.jsx("span",{className:"text-sm font-medium text-red-600",children:E.vocabulary_mistakes||0})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Difficulty Level:"}),c.jsx("span",{className:"text-sm font-medium",children:E.difficulty_level||"N/A"})]})]})]}),c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"AI Feedback"}),E.feedback?c.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:c.jsx("p",{className:"text-sm text-gray-700",children:E.feedback})}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:c.jsx("p",{className:"text-sm",children:"No AI feedback available"})})]})]}),E.improved_transcript&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Improved Transcript"}),c.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:c.jsx("p",{className:"text-sm text-gray-700",children:E.improved_transcript})})]}),E.grammar_corrections&&E.grammar_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Grammar Corrections"}),c.jsx("div",{className:"space-y-3",children:E.grammar_corrections.map((N,P)=>c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-red-800",children:"Mistake:"})," ",N.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-green-800",children:"Correction:"})," ",N.correction]}),N.explanation&&c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Explanation:"})," ",N.explanation]})]},P))})]}),E.vocabulary_corrections&&E.vocabulary_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Vocabulary Improvements"}),c.jsx("div",{className:"space-y-3",children:E.vocabulary_corrections.map((N,P)=>c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-yellow-800",children:"Original:"})," ",N.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-green-800",children:"Better:"})," ",N.correction]}),N.explanation&&c.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Explanation:"})," ",N.explanation]})]},P))})]}),E.language_use_corrections&&E.language_use_corrections.length>0&&c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Language Use Suggestions"}),c.jsx("div",{className:"space-y-3",children:E.language_use_corrections.map((N,P)=>c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsxs("div",{className:"text-sm",children:[c.jsx("span",{className:"font-medium text-blue-800",children:"Original:"})," ",N.mistake]}),c.jsxs("div",{className:"text-sm mt-1",children:[c.jsx("span",{className:"font-medium text-blue-800",children:"Suggestion:"})," ",N.suggestion]}),N.explanation&&c.jsx("div",{className:"text-xs text-blue-700 mt-1",children:N.explanation})]},P))})]})]}):c.jsx("div",{className:"text-center py-8 text-gray-500",children:c.jsx("p",{children:"No AI analysis available for this result"})})})()]}),f==="scoring"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center",children:"Score Details"}),s?c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 place-items-center",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Score"}),c.jsx("input",{type:"number",min:"0",max:b.max_score,value:a,onChange:E=>d(E.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Max Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.max_score," (Fixed)"]})]})]}),c.jsxs("div",{className:"flex justify-center space-x-3",children:[c.jsx("button",{onClick:l,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Score"}),c.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]}):c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("div",{className:"grid grid-cols-1 place-items-center gap-2",children:c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Current Score"}),c.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.score," / ",b.max_score]})]})}),c.jsx("button",{onClick:()=>o(e.id,b.score),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mx-auto",children:"Edit Score"})]})]})]}),c.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:c.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})},G0e=({isOpen:e,onClose:t,testResult:r,questions:n,isLoadingQuestions:s,onScoreUpdate:a})=>{const[i,o]=_.useState(!1),[l,u]=_.useState(""),[d,f]=_.useState(!1),h=D=>{if(!D)return{};if(typeof D=="string")try{return JSON.parse(D)}catch{return{}}return D||{}},g=()=>{const D=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;u(D.toString()),o(!0)},x=()=>{o(!1),u("")},y=async D=>{D&&(D.preventDefault(),D.stopPropagation());const L=r?.id||r?.result_id;if(!L){console.error("TestAnswerModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("TestAnswerModal: Saving score",{resultId:L,score:l,testType:r.test_type}),f(!0);try{const G=r.test_type||r.testType,X={resultId:L,score:parseInt(l)||0,testType:G};console.log("TestAnswerModal: Sending payload",X);let se;if(window.tokenManager?.makeAuthenticatedRequest)se=await window.tokenManager.makeAuthenticatedRequest(Ud.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)});else{const{SecureToken:Q}=await Za(async()=>{const{SecureToken:B}=await Promise.resolve().then(()=>e4);return{SecureToken:B}},void 0),re=await(window.tokenManager?.getToken()||Q.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");se=await fetch(Ud.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:re?`Bearer ${re}`:""},body:JSON.stringify(X)})}if(console.log("TestAnswerModal: Response status",se.status),se.ok){const Q=await se.json();console.log("TestAnswerModal: Score updated successfully",Q),a&&a(Q),o(!1),u("")}else{const Q=await se.json().catch(()=>({error:"Unknown error"}));console.error("TestAnswerModal: Error response",Q),alert(Q.error||`Failed to update score. Status: ${se.status}`)}}catch(G){console.error("TestAnswerModal: Exception updating score:",G),alert(`Failed to update score: ${G.message||G}`)}finally{f(!1)}},v=_.useMemo(()=>{const D=r?.answers;if(console.log(" [TestAnswerModal] Raw testResult.answers:",D),console.log(" [TestAnswerModal] Raw testResult.answers type:",typeof D),console.log(" [TestAnswerModal] testResult.retest_offered:",r?.retest_offered),D&&typeof D=="object"&&D.answers_by_id)return console.log(" [TestAnswerModal] Found answers_by_id format"),console.log(" [TestAnswerModal] answers_by_id:",D.answers_by_id),console.log(" [TestAnswerModal] question_order:",D.question_order),D.answers_by_id||{};const L=h(D);return console.log(" [TestAnswerModal] Parsed student answers:",L),console.log(" [TestAnswerModal] Full testResult:",r),L},[r?.answers]),T=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((D,L)=>{const G=D.question_id||D.id||L+1,X=String(G),se=Number(G),Q=v[X]!==void 0?v[X]:v[se]!==void 0?v[se]:v[G]!==void 0?v[G]:void 0,re=D.correct_answer,B=Q===re,V=R=>{if(D.options&&Array.isArray(D.options)){const z=R.charCodeAt(0)-65;return D.options[z]||R}const H=`option_${R.toLowerCase()}`;return D[H]||R};return c.jsxs("tr",{className:B?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:L+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:Hs(D.question)}}),c.jsx("td",{className:"px-4 py-3 text-sm",children:Q?c.jsxs("span",{className:`font-medium ${B?"text-green-700":"text-red-700"}`,children:[Q," - ",c.jsx("span",{dangerouslySetInnerHTML:{__html:Hs(String(V(Q)))}})]}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[re," - ",c.jsx("span",{dangerouslySetInnerHTML:{__html:Hs(String(V(re)))}})]}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:B?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},X)})})]})}),k=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((D,L)=>{const G=D.question_id||D.id||L+1,X=String(G),se=Number(G),Q=v[X]!==void 0?v[X]:v[se]!==void 0?v[se]:v[G]!==void 0?v[G]:void 0,re=D.correct_answer;let B;typeof Q=="boolean"?B=Q:typeof Q=="string"?B=Q.toLowerCase().trim()==="true":Q===1||Q==="1"?B=!0:Q===0||Q==="0"?B=!1:B=!!Q;let V;typeof re=="boolean"?V=re:typeof re=="string"?V=re.toLowerCase().trim()==="true":V=!!re;const R=B===V;L===0&&console.log(" [TestAnswerModal] True/False First Question Debug:",{questionIdStr:X,studentAnswer:Q,studentAnswerType:typeof Q,normalizedStudentAnswer:B,correctAnswer:re,correctAnswerType:typeof re,normalizedCorrectAnswer:V,isCorrect:R});const H=Q!=null?B:null,z=V;return c.jsxs("tr",{className:R?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:L+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:Hs(D.question)}}),c.jsx("td",{className:"px-4 py-3 text-sm",children:H!==null?c.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${H?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:H?"True":"False"}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${z?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:z?"True":"False"})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:R?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},X)})})]})}),b=()=>{if(!n||n.length===0)return c.jsx("p",{className:"text-gray-500",children:"No questions available"});const D=(L,G)=>{if(!L||!G||G.length===0)return!1;const X=String(L).toLowerCase().trim();return G.some(se=>{const Q=String(se).toLowerCase().trim();return X===Q||Q.length>=2&&X.includes(Q)?!0:Q.length===1?X.startsWith(Q)||X.endsWith(Q):!1})};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer(s)"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((L,G)=>{const X=L.question_id||L.id||G+1,se=String(X),Q=Number(X),re=v[se]!==void 0?v[se]:v[Q]!==void 0?v[Q]:v[X]!==void 0?v[X]:void 0,B=Array.isArray(L.correct_answers)?L.correct_answers:L.correct_answer?[L.correct_answer]:[],V=D(re,B);return G===0&&console.log(" [TestAnswerModal] First question debug:",{questionIdNum:X,questionIdStr:se,questionIdNumKey:Q,studentAnswer:re,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:B,question:L}),c.jsxs("tr",{className:V?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:G+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:Hs(L.question)}}),c.jsx("td",{className:"px-4 py-3 text-sm",children:re?c.jsx("span",{className:`font-medium ${V?"text-green-700":"text-red-700"}`,dangerouslySetInnerHTML:{__html:(()=>{const R=String(re);if(R.includes("$"))return Hs(R);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(R))try{return B8(R)}catch{return Hs(R)}return Hs(R)})()}}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B.length>0?c.jsx("div",{className:"space-y-1",children:B.map((R,H)=>{const z=String(R);return c.jsx("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",dangerouslySetInnerHTML:{__html:(()=>{if(z.includes("$"))return Hs(z);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(z))try{return B8(z)}catch{return Hs(z)}return Hs(z)})()}},H)})}):c.jsx("span",{className:"text-gray-400",children:"No correct answer defined"})}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:V?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},se)})})]})})},E=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Left Word"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Match"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Match"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((D,L)=>{const G=D.question_id||D.id||L+1,X=String(G),se=Number(G),Q=v[X]!==void 0?v[X]:v[se]!==void 0?v[se]:v[G]!==void 0?v[G]:void 0,re=D.left_word,B=D.right_word;let V=null,R=!1;if(Q){if(typeof Q=="object")V=Q.definition||Q.right||Q.word,R=Q.word===re&&(Q.definition||Q.right)===B;else if(typeof Q=="string")try{const H=JSON.parse(Q);V=H.definition||H.right||H.word,R=H.word===re&&(H.definition||H.right)===B}catch{V=Q}}return c.jsxs("tr",{className:R?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:L+1}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:re}),c.jsx("td",{className:"px-4 py-3 text-sm",children:V?c.jsx("span",{className:R?"text-green-700 font-medium":"text-red-700 font-medium",children:V}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:B}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:R?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},X)})})]})}),N=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsx("div",{className:"space-y-6",children:n.map((D,L)=>{const G=D.question_id||D.id||L+1,X=String(G),se=Number(G);L===0&&console.log(" [TestAnswerModal] Fill Blanks First Question Debug:",{questionIdNum:G,questionIdStr:X,questionIdNumKey:se,question:D,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:D.correct_answers});const Q=v[X]!==void 0?v[X]:v[se]!==void 0?v[se]:v[G]!==void 0?v[G]:void 0,re=Array.isArray(D.correct_answers)?D.correct_answers:[];let B=[];return Array.isArray(Q)?B=Q:Q!=null?B=[Q]:B=[],c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Question ",L+1]}),c.jsxs("div",{className:"space-y-3",children:[D.question_json&&c.jsx("div",{className:"text-sm text-gray-700 mb-4",children:typeof D.question_json=="string"?D.question_json:D.question_json.text||D.question_json.question||"Question text not available"}),c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Blank #"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Answer"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Correct Answer"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase w-20",children:"Status"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:re.map((V,R)=>{let H=B[R];const z=R+1,I=String(z),W=Number(z);(H==null||H==="")&&(H=v[I]!==void 0?v[I]:v[W]!==void 0?v[W]:H),L===0&&R===0&&console.log(" [TestAnswerModal] Fill Blanks First Blank Debug:",{blankIndex:R,potentialBlankId:z,potentialBlankIdStr:I,potentialBlankIdNum:W,studentAns:H,studentAnswersForQ:B,correctAns:V,studentAnswersKeys:Object.keys(v)});const K=String(H||"").trim().toLowerCase()===String(V||"").trim().toLowerCase();return c.jsxs("tr",{className:K?"bg-green-50":"bg-red-50",children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:R+1}),c.jsx("td",{className:"px-4 py-2 text-sm",children:H?c.jsx("span",{className:K?"text-green-700 font-medium":"text-red-700 font-medium",children:String(H)}):c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),c.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:String(V)}),c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:K?c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:""}):c.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:""})})]},R)})})]})]})]},X)})}),P=()=>!n||n.length===0?c.jsx("p",{className:"text-gray-500",children:"No questions available"}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Matching type tests require visual comparison. Answers stored as connection pairs."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Word"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Connection"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((D,L)=>{const G=D.question_id||D.id||L+1,X=String(G),se=Number(G),Q=v[X]!==void 0?v[X]:v[se]!==void 0?v[se]:v[G]!==void 0?v[G]:void 0;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:D.word}),c.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:Q?typeof Q=="object"?JSON.stringify(Q):Q:c.jsx("span",{className:"text-gray-400 italic",children:"No answer"})})]},X)})})]})})]}),M=()=>{if(!r)return null;const D=r.test_type||r.testType;if(s)return c.jsxs("div",{className:"flex items-center justify-center py-12",children:[c.jsx(un,{size:"lg"}),c.jsx("span",{className:"ml-4 text-gray-600",children:"Loading questions..."})]});if(!n||n.length===0)return c.jsxs("div",{className:"text-center py-8",children:[c.jsx("p",{className:"text-gray-500",children:"Unable to load questions for this test."}),c.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Test ID: ",r.test_id,", Type: ",D]})]});switch(D){case"multiple_choice":return T();case"true_false":return k();case"input":return b();case"word_matching":return E();case"fill_blanks":return N();case"matching_type":return P();default:return c.jsxs("div",{className:"text-center py-8",children:[c.jsxs("p",{className:"text-gray-500",children:['Test type "',D,'" is not supported for answer viewing.']}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Drawing and Speaking tests have their own dedicated modals."})]})}};if(!r)return null;r.test_type||r.testType;const j=`${r.name||""} ${r.surname||""}`.trim(),A=`${r.test_name||"Test"} - ${j||r.student_id}`;return c.jsxs(Ca,{isOpen:e,onClose:t,title:A,size:"large",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[c.jsxs("div",{className:"flex space-x-6",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Score"}),(()=>{const D=r.test_type||r.testType,L=["multiple_choice","true_false","input"].includes(D),G=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0,X=r.best_retest_max_score||r.max_score||0;return L&&i?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"0",max:X,value:l,onChange:se=>u(se.target.value),className:"w-16 px-2 py-1 text-sm border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsxs("span",{className:"text-lg font-semibold text-gray-500",children:["/ ",X]}),c.jsx("button",{type:"button",onClick:y,disabled:d,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:d?"Saving...":"Save"}),c.jsx("button",{type:"button",onClick:x,disabled:d,className:"px-2 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[G," / ",X,r.best_retest_score!==null&&r.best_retest_score!==void 0&&c.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Retest Best)"})]}),L&&c.jsx("button",{onClick:g,className:"ml-2 px-2 py-1 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded",title:"Click to edit score",children:"Edit"})]})})()]}),r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0&&r.best_retest_percentage>0||r.percentage&&r.percentage>0?c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Percentage"}),c.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0?`${r.best_retest_percentage.toFixed(1)}%`:`${r.percentage?.toFixed(1)||"0.0"}%`})]}):null,r.subject&&r.subject!=="N/A"?c.jsxs("div",{children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Subject"}),c.jsx("div",{className:"text-sm font-medium text-gray-700",children:r.subject})]}):null]}),r.submitted_at&&c.jsxs("div",{className:"text-right",children:[c.jsx("span",{className:"text-xs text-gray-500",children:"Submitted"}),c.jsx("div",{className:"text-sm text-gray-700",children:new Date(r.submitted_at).toLocaleString()})]})]}),c.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:M()}),r.caught_cheating&&c.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:c.jsxs("p",{className:"text-sm text-red-800",children:[" This test was flagged for suspicious activity (visibility changes: ",r.visibility_change_times||0,")"]})})]})},V0e=({isOpen:e,onClose:t,testResult:r,onScoreUpdate:n})=>{const[s,a]=_.useState(""),[i,o]=_.useState(!1);Gs.useEffect(()=>{if(console.log("EditScoreModal: useEffect triggered",{isOpen:e,testResult:r}),e&&r){const h=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;a(h.toString()),console.log("EditScoreModal: Initialized with score",h)}},[e,r]);const l=async h=>{h.preventDefault(),h.stopPropagation();const g=r?.id||r?.result_id;if(!g){console.error("EditScoreModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("EditScoreModal: Saving score",{resultId:g,score:s,testType:r.test_type}),o(!0);try{const x=r.test_type||r.testType,y={resultId:g,score:parseInt(s)||0,testType:x};console.log("EditScoreModal: Sending payload",y);let v;if(window.tokenManager?.makeAuthenticatedRequest)v=await window.tokenManager.makeAuthenticatedRequest(Ud.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});else{const{SecureToken:T}=await Za(async()=>{const{SecureToken:b}=await Promise.resolve().then(()=>e4);return{SecureToken:b}},void 0),k=await(window.tokenManager?.getToken()||T.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");v=await fetch(Ud.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:k?`Bearer ${k}`:""},body:JSON.stringify(y)})}if(console.log("EditScoreModal: Response status",v.status),v.ok){const T=await v.json();console.log("EditScoreModal: Score updated successfully",T),n&&n(T),t()}else{const T=await v.json().catch(()=>({error:"Unknown error"}));console.error("EditScoreModal: Error response",T),alert(T.error||`Failed to update score. Status: ${v.status}`)}}catch(x){console.error("EditScoreModal: Exception updating score:",x),alert(`Failed to update score: ${x.message||x}`)}finally{o(!1)}};if(console.log("EditScoreModal: Rendering",{isOpen:e,testResult:r,hasTestResult:!!r}),!r)return console.log("EditScoreModal: No testResult, returning null"),null;const u=r.best_retest_max_score||r.max_score||0,d=`${r.name||""} ${r.surname||""}`.trim()||r.student_id,f=`Edit Score - ${r.test_name||"Test"} - ${d}`;return c.jsx(Ca,{isOpen:e,onClose:t,title:f,size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Score"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",min:"0",max:u,value:s,onChange:h=>a(h.target.value),className:"w-24 px-3 py-2 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsxs("span",{className:"text-lg font-semibold text-gray-600",children:["/ ",u]})]}),c.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Enter a score between 0 and ",u]})]}),c.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[c.jsx("button",{onClick:t,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),c.jsx("button",{type:"button",onClick:l,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Saving...":"Save"})]})]})})};class ub extends Gs.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){if(console.error("ErrorBoundary caught an error:",t,r),t.message&&t.message.includes("Minified React error #300")){console.warn("React error #300 caught and handled by ErrorBoundary");return}}render(){return this.state.hasError?c.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[c.jsx("h3",{className:"text-red-800 font-medium",children:"Something went wrong"}),c.jsx("p",{className:"text-red-600 text-sm mt-1",children:"An error occurred while rendering this component."})]}):this.props.children}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var F4={};F4.version="0.18.5";var gH=1252,q0e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],GC={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},VC=function(e){q0e.indexOf(e)!=-1&&(gH=GC[0]=e)};function K0e(){VC(1252)}var tu=function(e){VC(e)};function qC(){tu(1200),K0e()}function sD(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Y0e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function pH(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Fy=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Y0e(e.slice(2)):t==254&&r==255?pH(e.slice(2)):t==65279?e.slice(1):e},db=function(t){return String.fromCharCode(t)},aD=function(t){return String.fromCharCode(t)},Cv,Cf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ev(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0,u=0;u<e.length;)r=e.charCodeAt(u++),a=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,s=e.charCodeAt(u++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),t+=Cf.charAt(a)+Cf.charAt(i)+Cf.charAt(o)+Cf.charAt(l);return t}function Ll(e){var t="",r=0,n=0,s=0,a=0,i=0,o=0,l=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)a=Cf.indexOf(e.charAt(u++)),i=Cf.indexOf(e.charAt(u++)),r=a<<2|i>>4,t+=String.fromCharCode(r),o=Cf.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),l=Cf.indexOf(e.charAt(u++)),s=(o&3)<<6|l,l!==64&&(t+=String.fromCharCode(s));return t}var Sn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),v0=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function zf(e){return Sn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function iD(e){return Sn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Ml=function(t){return Sn?v0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function o3(e){if(typeof ArrayBuffer>"u")return Ml(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function eh(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function X0e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function KC(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return KC(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var _i=Sn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:v0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function J0e(e){for(var t=[],r=0,n=e.length+250,s=zf(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(t.push(s.slice(0,r)),r=0,s=zf(65535),n=65530)}return t.push(s.slice(0,r)),_i(t)}var Uo=/\u0000/g,Dy=/[\u0001-\u0006]/g;function jp(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function ru(e,t){var r=""+e;return r.length>=t?r:ua("0",t-r.length)+r}function YC(e,t){var r=""+e;return r.length>=t?r:ua(" ",t-r.length)+r}function D4(e,t){var r=""+e;return r.length>=t?r:r+ua(" ",t-r.length)}function Q0e(e,t){var r=""+Math.round(e);return r.length>=t?r:ua("0",t-r.length)+r}function Z0e(e,t){var r=""+e;return r.length>=t?r:ua("0",t-r.length)+r}var oD=Math.pow(2,32);function ep(e,t){if(e>oD||e<-oD)return Q0e(e,t);var r=Math.round(e);return Z0e(r,t)}function O4(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var lD=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],I5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function efe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Yr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},cD={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},tfe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function I4(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,o=0,l=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),o=f*i+a,d=f*u+l,!(s-f<5e-8));)s=1/(s-f),a=i,i=o,l=u,u=d;if(d>t&&(u>t?(d=l,o=a):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Zh(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,i=[],o={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=ofe(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var xH=new Date(1899,11,31,0,0,0),rfe=xH.getTime(),nfe=new Date(1900,2,1,0,0,0);function yH(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=nfe&&(r+=1440*60*1e3),(r-(rfe+(e.getTimezoneOffset()-xH.getTimezoneOffset())*6e4))/(1440*60*1e3)}function XC(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function sfe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function afe(e){var t=e<0?12:11,r=XC(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function ife(e){var t=XC(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Nv(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=afe(e):t===10?r=e.toFixed(10).substr(0,12):r=ife(e),XC(sfe(r.toUpperCase()))}function Mm(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Nv(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Sc(14,yH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function ofe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function lfe(e,t,r,n){var s="",a=0,i=0,o=r.y,l,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:l=r.m,u=t.length;break;case 3:return I5[r.m-1][1];case 5:return I5[r.m-1][0];default:return I5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:l=r.d,u=t.length;break;case 3:return lD[r.q][0];default:return lD[r.q][1]}break;case 104:switch(t.length){case 1:case 2:l=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:l=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:l=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?ru(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),t==="s"?a===0?"0":""+a/i:(s=ru(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?ru(l,u):"";return d}function Ef(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var vH=/%/g;function cfe(e,t,r){var n=t.replace(vH,""),s=t.length-n.length;return Zd(e,n,r*Math.pow(10,2*s))+ua("%",s)}function ufe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Zd(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function wH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+wH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var bH=/# (\?+)( ?)\/( ?)(\d+)/;function dfe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?ua(" ",e[1].length+1+e[4].length):YC(i,e[1].length)+e[2]+"/"+e[3]+ru(o,e[4].length))}function ffe(e,t,r){return r+(t===0?"":""+t)+ua(" ",e[1].length+2+e[4].length)}var _H=/^#*0*\.([0#]+)/,SH=/\).*[0#]/,kH=/\(###\) ###\\?-####/;function Oo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function uD(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function dD(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function hfe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function mfe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function sc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(SH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?sc("n",n,r):"("+sc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return ufe(e,t,r);if(t.indexOf("%")!==-1)return cfe(e,t,r);if(t.indexOf("E")!==-1)return wH(t,r);if(t.charCodeAt(0)===36)return"$"+sc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+ep(l,t.length);if(t.match(/^[#?]+$/))return s=ep(r,0),s==="0"&&(s=""),s.length>t.length?s:Oo(t.substr(0,t.length-s.length))+s;if(a=t.match(bH))return dfe(a,l,u);if(t.match(/^#+0+$/))return u+ep(l,t.length-t.indexOf("0"));if(a=t.match(_H))return s=uD(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Oo(a[1])).replace(/\.$/,"."+Oo(a[1])).replace(/\.(\d*)$/,function(x,y){return"."+y+ua("0",Oo(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+uD(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Ef(ep(l,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+sc(e,t,-r):Ef(""+(Math.floor(r)+hfe(r,a[1].length)))+"."+ru(dD(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return sc(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jp(sc(e,t.replace(/[\\-]/g,""),r)),i=0,jp(jp(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(kH))return s=sc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=I4(l,Math.pow(10,i)-1,!1),s=""+u,d=Zd("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=D4(o[2],i),d.length<a[4].length&&(d=Oo(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=I4(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?YC(o[1],i)+a[2]+"/"+a[3]+D4(o[2],i):ua(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=ep(r,0),t.length<=s.length?s:Oo(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Oo(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=dD(r,a[1].length),r<0?"-"+sc(e,t,-r):Ef(mfe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ru(0,3-x.length):"")+x})+"."+ru(i,a[1].length);switch(t){case"###,##0.00":return sc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Ef(ep(l,0));return g!=="0"?u+g:"";case"###,###.00":return sc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return sc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function gfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Zd(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function pfe(e,t,r){var n=t.replace(vH,""),s=t.length-n.length;return Zd(e,n,r*Math.pow(10,2*s))+ua("%",s)}function TH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+TH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Fu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(SH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Fu("n",n,r):"("+Fu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return gfe(e,t,r);if(t.indexOf("%")!==-1)return pfe(e,t,r);if(t.indexOf("E")!==-1)return TH(t,r);if(t.charCodeAt(0)===36)return"$"+Fu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+ru(l,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Oo(t.substr(0,t.length-s.length))+s;if(a=t.match(bH))return ffe(a,l,u);if(t.match(/^#+0+$/))return u+ru(l,t.length-t.indexOf("0"));if(a=t.match(_H))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Oo(a[1])).replace(/\.$/,"."+Oo(a[1])),s=s.replace(/\.(\d*)$/,function(x,y){return"."+y+ua("0",Oo(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Ef(""+l);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Fu(e,t,-r):Ef(""+r)+"."+ua("0",a[1].length);if(a=t.match(/^#,#*,#0/))return Fu(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jp(Fu(e,t.replace(/[\\-]/g,""),r)),i=0,jp(jp(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(kH))return s=Fu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=I4(l,Math.pow(10,i)-1,!1),s=""+u,d=Zd("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=D4(o[2],i),d.length<a[4].length&&(d=Oo(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=I4(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?YC(o[1],i)+a[2]+"/"+a[3]+D4(o[2],i):ua(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Oo(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return Oo(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Fu(e,t,-r):Ef(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ru(0,3-x.length):"")+x})+"."+ru(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=Ef(""+l);return g!=="0"?u+g:"";default:if(t.match(/\.[0#?]*$/))return Fu(e,t.slice(0,t.lastIndexOf(".")),r)+Oo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Zd(e,t,r){return(r|0)===r?Fu(e,t,r):sc(e,t,r)}function xfe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var CH=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function b1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":O4(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(CH))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function yfe(e,t,r,n){for(var s=[],a="",i=0,o="",l="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!O4(e,i))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(f=e.charCodeAt(++i))!==34&&i<e.length;)a+=String.fromCharCode(f);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=e.charAt(++i),x=g==="("||g===")"?g:"t";s[s.length]={t:x,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Zh(t,r,e.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Zh(t,r),u==null))return"";for(a=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=Zh(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",i+=5,h="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,l=o;break;case"[":for(a=o;e.charAt(i++)!=="]"&&i<e.length;)a+=e.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(CH)){if(u==null&&(u=Zh(t,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",b1(e)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<e.length&&(o=e.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)a+=e.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++i;break}var v=0,T=0,k;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=h,l="h",v<1&&(v=1);break;case"s":(k=s[i].v.match(/\.0+$/))&&(T=Math.max(T,k[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[i].v.match(/[Hh]/)&&(v=1),v<2&&s[i].v.match(/[Mm]/)&&(v=2),v<3&&s[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",E;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=lfe(s[i].t.charCodeAt(0),s[i].v,u,T),s[i].t="t";break;case"n":case"?":for(E=i+1;s[E]!=null&&((o=s[E].t)==="?"||o==="D"||(o===" "||o==="t")&&s[E+1]!=null&&(s[E+1].t==="?"||s[E+1].t==="t"&&s[E+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[E].v==="/"||s[E].v===" "&&s[E+1]!=null&&s[E+1].t=="?"));)s[i].v+=s[E].v,s[E]={v:"",t:";"},++E;b+=s[i].v,i=E-1;break;case"G":s[i].t="t",s[i].v=Mm(t,r);break}var N="",P,M;if(b.length>0){b.charCodeAt(0)==40?(P=t<0&&b.charCodeAt(0)===45?-t:t,M=Zd("n",b,P)):(P=t<0&&n>1?-t:t,M=Zd("n",b,P),P<0&&s[0]&&s[0].t=="t"&&(M=M.substr(1),s[0].v="-"+s[0].v)),E=M.length-1;var j=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){j=i;break}var A=s.length;if(j===s.length&&M.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(E>=s[i].v.length-1?(E-=s[i].v.length,s[i].v=M.substr(E+1,s[i].v.length)):E<0?s[i].v="":(s[i].v=M.substr(0,E+1),E=-1),s[i].t="t",A=i);E>=0&&A<s.length&&(s[A].v=M.substr(0,E+1)+s[A].v)}else if(j!==s.length&&M.indexOf("E")===-1){for(E=M.indexOf(".")-1,i=j;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")-1:s[i].v.length-1,N=s[i].v.substr(d+1);d>=0;--d)E>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(N=M.charAt(E--)+N);s[i].v=N,s[i].t="t",A=i}for(E>=0&&A<s.length&&(s[A].v=M.substr(0,E+1)+s[A].v),E=M.indexOf(".")+1,i=j;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==j)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")+1:0,N=s[i].v.substr(0,d);d<s[i].v.length;++d)E<M.length&&(N+=M.charAt(E++));s[i].v=N,s[i].t="t",A=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(P=n>1&&t<0&&i>0&&s[i-1].v==="-"?-t:t,s[i].v=Zd(s[i].t,s[i].v,P),s[i].t="t");var D="";for(i=0;i!==s.length;++i)s[i]!=null&&(D+=s[i].v);return D}var fD=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function hD(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function vfe(e,t){var r=xfe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(fD),o=r[1].match(fD);return hD(t,i)?[n,r[0]]:hD(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function Sc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Yr)[e],n==null&&(n=r.table&&r.table[cD[e]]||Yr[cD[e]]),n==null&&(n=tfe[e]||"General");break}if(O4(n,0))return Mm(t,r);t instanceof Date&&(t=yH(t,r.date1904));var s=vfe(n,t);if(O4(s[1]))return Mm(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return yfe(s[1],t,r,s[0])}function e0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Yr[r]==null){t<0&&(t=r);continue}if(Yr[r]==e){t=r;break}}t<0&&(t=391)}return Yr[t]=e,t}function l3(e){for(var t=0;t!=392;++t)e[t]!==void 0&&e0(e[t],t)}function _1(){Yr=efe()}var wfe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},EH=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function bfe(e){var t=typeof e=="number"?Yr[e]:e;return t=t.replace(EH,"(\\d+)"),new RegExp("^"+t+"$")}function _fe(e,t,r){var n=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(t.match(EH)||[]).forEach(function(f,h){var g=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=g;break;case"d":a=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:s=g;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var Sfe=(function(){var e={};e.version="1.2.0";function t(){for(var M=0,j=new Array(256),A=0;A!=256;++A)M=A,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,M=M&1?-306674912^M>>>1:M>>>1,j[A]=M;return typeof Int32Array<"u"?new Int32Array(j):j}var r=t();function n(M){var j=0,A=0,D=0,L=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)L[D]=M[D];for(D=0;D!=256;++D)for(A=M[D],j=256+D;j<4096;j+=256)A=L[j]=A>>>8^M[A&255];var G=[];for(D=1;D!=16;++D)G[D-1]=typeof Int32Array<"u"?L.subarray(D*256,D*256+256):L.slice(D*256,D*256+256);return G}var s=n(r),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],f=s[6],h=s[7],g=s[8],x=s[9],y=s[10],v=s[11],T=s[12],k=s[13],b=s[14];function E(M,j){for(var A=j^-1,D=0,L=M.length;D<L;)A=A>>>8^r[(A^M.charCodeAt(D++))&255];return~A}function N(M,j){for(var A=j^-1,D=M.length-15,L=0;L<D;)A=b[M[L++]^A&255]^k[M[L++]^A>>8&255]^T[M[L++]^A>>16&255]^v[M[L++]^A>>>24]^y[M[L++]]^x[M[L++]]^g[M[L++]]^h[M[L++]]^f[M[L++]]^d[M[L++]]^u[M[L++]]^l[M[L++]]^o[M[L++]]^i[M[L++]]^a[M[L++]]^r[M[L++]];for(D+=15;L<D;)A=A>>>8^r[(A^M[L++])&255];return~A}function P(M,j){for(var A=j^-1,D=0,L=M.length,G=0,X=0;D<L;)G=M.charCodeAt(D++),G<128?A=A>>>8^r[(A^G)&255]:G<2048?(A=A>>>8^r[(A^(192|G>>6&31))&255],A=A>>>8^r[(A^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,X=M.charCodeAt(D++)&1023,A=A>>>8^r[(A^(240|G>>8&7))&255],A=A>>>8^r[(A^(128|G>>2&63))&255],A=A>>>8^r[(A^(128|X>>6&15|(G&3)<<4))&255],A=A>>>8^r[(A^(128|X&63))&255]):(A=A>>>8^r[(A^(224|G>>12&15))&255],A=A>>>8^r[(A^(128|G>>6&63))&255],A=A>>>8^r[(A^(128|G&63))&255]);return~A}return e.table=r,e.bstr=E,e.buf=N,e.str=P,e})(),zr=(function(){var t={};t.version="1.2.1";function r(he,Ee){for(var we=he.split("/"),_e=Ee.split("/"),ke=0,Ce=0,rt=Math.min(we.length,_e.length);ke<rt;++ke){if(Ce=we[ke].length-_e[ke].length)return Ce;if(we[ke]!=_e[ke])return we[ke]<_e[ke]?-1:1}return we.length-_e.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var Ee=he.lastIndexOf("/");return Ee===-1?he:he.slice(0,Ee+1)}function s(he){if(he.charAt(he.length-1)=="/")return s(he.slice(0,-1));var Ee=he.lastIndexOf("/");return Ee===-1?he:he.slice(Ee+1)}function a(he,Ee){typeof Ee=="string"&&(Ee=new Date(Ee));var we=Ee.getHours();we=we<<6|Ee.getMinutes(),we=we<<5|Ee.getSeconds()>>>1,he.write_shift(2,we);var _e=Ee.getFullYear()-1980;_e=_e<<4|Ee.getMonth()+1,_e=_e<<5|Ee.getDate(),he.write_shift(2,_e)}function i(he){var Ee=he.read_shift(2)&65535,we=he.read_shift(2)&65535,_e=new Date,ke=we&31;we>>>=5;var Ce=we&15;we>>>=4,_e.setMilliseconds(0),_e.setFullYear(we+1980),_e.setMonth(Ce-1),_e.setDate(ke);var rt=Ee&31;Ee>>>=5;var xt=Ee&63;return Ee>>>=6,_e.setHours(Ee),_e.setMinutes(xt),_e.setSeconds(rt<<1),_e}function o(he){Gi(he,0);for(var Ee={},we=0;he.l<=he.length-4;){var _e=he.read_shift(2),ke=he.read_shift(2),Ce=he.l+ke,rt={};switch(_e){case 21589:we=he.read_shift(1),we&1&&(rt.mtime=he.read_shift(4)),ke>5&&(we&2&&(rt.atime=he.read_shift(4)),we&4&&(rt.ctime=he.read_shift(4))),rt.mtime&&(rt.mt=new Date(rt.mtime*1e3));break}he.l=Ce,Ee[_e]=rt}return Ee}var l;function u(){return l||(l={})}function d(he,Ee){if(he[0]==80&&he[1]==75)return ye(he,Ee);if((he[0]|32)==109&&(he[1]|32)==105)return qe(he,Ee);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var we=3,_e=512,ke=0,Ce=0,rt=0,xt=0,ut=0,ce=[],ge=he.slice(0,512);Gi(ge,0);var Pe=f(ge);switch(we=Pe[0],we){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(Pe[1]==0)return ye(he,Ee);default:throw new Error("Major Version: Expected 3 or 4 saw "+we)}_e!==512&&(ge=he.slice(0,_e),Gi(ge,28));var je=he.slice(0,_e);h(ge,we);var Ze=ge.read_shift(4,"i");if(we===3&&Ze!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ze);ge.l+=4,rt=ge.read_shift(4,"i"),ge.l+=4,ge.chk("00100000","Mini Stream Cutoff Size: "),xt=ge.read_shift(4,"i"),ke=ge.read_shift(4,"i"),ut=ge.read_shift(4,"i"),Ce=ge.read_shift(4,"i");for(var dt=-1,_t=0;_t<109&&(dt=ge.read_shift(4,"i"),!(dt<0));++_t)ce[_t]=dt;var ir=g(he,_e);v(ut,Ce,ir,_e,ce);var Ot=k(ir,rt,ce,_e);Ot[rt].name="!Directory",ke>0&&xt!==X&&(Ot[xt].name="!MiniFAT"),Ot[ce[0]].name="!FAT",Ot.fat_addrs=ce,Ot.ssz=_e;var Qt={},Cr=[],Br=[],Rr=[];b(rt,Ot,ir,Cr,ke,Qt,Br,xt),x(Br,Rr,Cr),Cr.shift();var tn={FileIndex:Br,FullPaths:Rr};return Ee&&Ee.raw&&(tn.raw={header:je,sectors:ir}),tn}function f(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(se,"Header Signature: "),he.l+=16;var Ee=he.read_shift(2,"u");return[he.read_shift(2,"u"),Ee]}function h(he,Ee){var we=9;switch(he.l+=2,we=he.read_shift(2)){case 9:if(Ee!=3)throw new Error("Sector Shift: Expected 9 saw "+we);break;case 12:if(Ee!=4)throw new Error("Sector Shift: Expected 12 saw "+we);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+we)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function g(he,Ee){for(var we=Math.ceil(he.length/Ee)-1,_e=[],ke=1;ke<we;++ke)_e[ke-1]=he.slice(ke*Ee,(ke+1)*Ee);return _e[we-1]=he.slice(we*Ee),_e}function x(he,Ee,we){for(var _e=0,ke=0,Ce=0,rt=0,xt=0,ut=we.length,ce=[],ge=[];_e<ut;++_e)ce[_e]=ge[_e]=_e,Ee[_e]=we[_e];for(;xt<ge.length;++xt)_e=ge[xt],ke=he[_e].L,Ce=he[_e].R,rt=he[_e].C,ce[_e]===_e&&(ke!==-1&&ce[ke]!==ke&&(ce[_e]=ce[ke]),Ce!==-1&&ce[Ce]!==Ce&&(ce[_e]=ce[Ce])),rt!==-1&&(ce[rt]=_e),ke!==-1&&_e!=ce[_e]&&(ce[ke]=ce[_e],ge.lastIndexOf(ke)<xt&&ge.push(ke)),Ce!==-1&&_e!=ce[_e]&&(ce[Ce]=ce[_e],ge.lastIndexOf(Ce)<xt&&ge.push(Ce));for(_e=1;_e<ut;++_e)ce[_e]===_e&&(Ce!==-1&&ce[Ce]!==Ce?ce[_e]=ce[Ce]:ke!==-1&&ce[ke]!==ke&&(ce[_e]=ce[ke]));for(_e=1;_e<ut;++_e)if(he[_e].type!==0){if(xt=_e,xt!=ce[xt])do xt=ce[xt],Ee[_e]=Ee[xt]+"/"+Ee[_e];while(xt!==0&&ce[xt]!==-1&&xt!=ce[xt]);ce[_e]=-1}for(Ee[0]+="/",_e=1;_e<ut;++_e)he[_e].type!==2&&(Ee[_e]+="/")}function y(he,Ee,we){for(var _e=he.start,ke=he.size,Ce=[],rt=_e;we&&ke>0&&rt>=0;)Ce.push(Ee.slice(rt*G,rt*G+G)),ke-=G,rt=Kh(we,rt*4);return Ce.length===0?Mt(0):_i(Ce).slice(0,he.size)}function v(he,Ee,we,_e,ke){var Ce=X;if(he===X){if(Ee!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var rt=we[he],xt=(_e>>>2)-1;if(!rt)return;for(var ut=0;ut<xt&&(Ce=Kh(rt,ut*4))!==X;++ut)ke.push(Ce);v(Kh(rt,_e-4),Ee-1,we,_e,ke)}}function T(he,Ee,we,_e,ke){var Ce=[],rt=[];ke||(ke=[]);var xt=_e-1,ut=0,ce=0;for(ut=Ee;ut>=0;){ke[ut]=!0,Ce[Ce.length]=ut,rt.push(he[ut]);var ge=we[Math.floor(ut*4/_e)];if(ce=ut*4&xt,_e<4+ce)throw new Error("FAT boundary crossed: "+ut+" 4 "+_e);if(!he[ge])break;ut=Kh(he[ge],ce)}return{nodes:Ce,data:TD([rt])}}function k(he,Ee,we,_e){var ke=he.length,Ce=[],rt=[],xt=[],ut=[],ce=_e-1,ge=0,Pe=0,je=0,Ze=0;for(ge=0;ge<ke;++ge)if(xt=[],je=ge+Ee,je>=ke&&(je-=ke),!rt[je]){ut=[];var dt=[];for(Pe=je;Pe>=0;){dt[Pe]=!0,rt[Pe]=!0,xt[xt.length]=Pe,ut.push(he[Pe]);var _t=we[Math.floor(Pe*4/_e)];if(Ze=Pe*4&ce,_e<4+Ze)throw new Error("FAT boundary crossed: "+Pe+" 4 "+_e);if(!he[_t]||(Pe=Kh(he[_t],Ze),dt[Pe]))break}Ce[je]={nodes:xt,data:TD([ut])}}return Ce}function b(he,Ee,we,_e,ke,Ce,rt,xt){for(var ut=0,ce=_e.length?2:0,ge=Ee[he].data,Pe=0,je=0,Ze;Pe<ge.length;Pe+=128){var dt=ge.slice(Pe,Pe+128);Gi(dt,64),je=dt.read_shift(2),Ze=nE(dt,0,je-ce),_e.push(Ze);var _t={name:Ze,type:dt.read_shift(1),color:dt.read_shift(1),L:dt.read_shift(4,"i"),R:dt.read_shift(4,"i"),C:dt.read_shift(4,"i"),clsid:dt.read_shift(16),state:dt.read_shift(4,"i"),start:0,size:0},ir=dt.read_shift(2)+dt.read_shift(2)+dt.read_shift(2)+dt.read_shift(2);ir!==0&&(_t.ct=E(dt,dt.l-8));var Ot=dt.read_shift(2)+dt.read_shift(2)+dt.read_shift(2)+dt.read_shift(2);Ot!==0&&(_t.mt=E(dt,dt.l-8)),_t.start=dt.read_shift(4,"i"),_t.size=dt.read_shift(4,"i"),_t.size<0&&_t.start<0&&(_t.size=_t.type=0,_t.start=X,_t.name=""),_t.type===5?(ut=_t.start,ke>0&&ut!==X&&(Ee[ut].name="!StreamData")):_t.size>=4096?(_t.storage="fat",Ee[_t.start]===void 0&&(Ee[_t.start]=T(we,_t.start,Ee.fat_addrs,Ee.ssz)),Ee[_t.start].name=_t.name,_t.content=Ee[_t.start].data.slice(0,_t.size)):(_t.storage="minifat",_t.size<0?_t.size=0:ut!==X&&_t.start!==X&&Ee[ut]&&(_t.content=y(_t,Ee[ut].data,(Ee[xt]||{}).data))),_t.content&&Gi(_t.content,0),Ce[Ze]=_t,rt.push(_t)}}function E(he,Ee){return new Date((Al(he,Ee+4)/1e7*Math.pow(2,32)+Al(he,Ee)/1e7-11644473600)*1e3)}function N(he,Ee){return u(),d(l.readFileSync(he),Ee)}function P(he,Ee){var we=Ee&&Ee.type;switch(we||Sn&&Buffer.isBuffer(he)&&(we="buffer"),we||"base64"){case"file":return N(he,Ee);case"base64":return d(Ml(Ll(he)),Ee);case"binary":return d(Ml(he),Ee)}return d(he,Ee)}function M(he,Ee){var we=Ee||{},_e=we.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=_e+"/",he.FileIndex[0]={name:_e,type:5}),we.CLSID&&(he.FileIndex[0].clsid=we.CLSID),j(he)}function j(he){var Ee="Sh33tJ5";if(!zr.find(he,"/"+Ee)){var we=Mt(4);we[0]=55,we[1]=we[3]=50,we[2]=54,he.FileIndex.push({name:Ee,type:2,content:we,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+Ee),A(he)}}function A(he,Ee){M(he);for(var we=!1,_e=!1,ke=he.FullPaths.length-1;ke>=0;--ke){var Ce=he.FileIndex[ke];switch(Ce.type){case 0:_e?we=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(Ce.R*Ce.L*Ce.C)&&(we=!0),Ce.R>-1&&Ce.L>-1&&Ce.R==Ce.L&&(we=!0);break;default:we=!0;break}}if(!(!we&&!Ee)){var rt=new Date(1987,1,19),xt=0,ut=Object.create?Object.create(null):{},ce=[];for(ke=0;ke<he.FullPaths.length;++ke)ut[he.FullPaths[ke]]=!0,he.FileIndex[ke].type!==0&&ce.push([he.FullPaths[ke],he.FileIndex[ke]]);for(ke=0;ke<ce.length;++ke){var ge=n(ce[ke][0]);_e=ut[ge],_e||(ce.push([ge,{name:s(ge).replace("/",""),type:1,clsid:re,ct:rt,mt:rt,content:null}]),ut[ge]=!0)}for(ce.sort(function(Ze,dt){return r(Ze[0],dt[0])}),he.FullPaths=[],he.FileIndex=[],ke=0;ke<ce.length;++ke)he.FullPaths[ke]=ce[ke][0],he.FileIndex[ke]=ce[ke][1];for(ke=0;ke<ce.length;++ke){var Pe=he.FileIndex[ke],je=he.FullPaths[ke];if(Pe.name=s(je).replace("/",""),Pe.L=Pe.R=Pe.C=-(Pe.color=1),Pe.size=Pe.content?Pe.content.length:0,Pe.start=0,Pe.clsid=Pe.clsid||re,ke===0)Pe.C=ce.length>1?1:-1,Pe.size=0,Pe.type=5;else if(je.slice(-1)=="/"){for(xt=ke+1;xt<ce.length&&n(he.FullPaths[xt])!=je;++xt);for(Pe.C=xt>=ce.length?-1:xt,xt=ke+1;xt<ce.length&&n(he.FullPaths[xt])!=n(je);++xt);Pe.R=xt>=ce.length?-1:xt,Pe.type=1}else n(he.FullPaths[ke+1]||"")==n(je)&&(Pe.R=ke+1),Pe.type=2}}}function D(he,Ee){var we=Ee||{};if(we.fileType=="mad")return Rt(he,we);switch(A(he),we.fileType){case"zip":return Be(he,we)}var _e=(function(Ze){for(var dt=0,_t=0,ir=0;ir<Ze.FileIndex.length;++ir){var Ot=Ze.FileIndex[ir];if(Ot.content){var Qt=Ot.content.length;Qt>0&&(Qt<4096?dt+=Qt+63>>6:_t+=Qt+511>>9)}}for(var Cr=Ze.FullPaths.length+3>>2,Br=dt+7>>3,Rr=dt+127>>7,tn=Br+_t+Cr+Rr,mn=tn+127>>7,dn=mn<=109?0:Math.ceil((mn-109)/127);tn+mn+dn+127>>7>mn;)dn=++mn<=109?0:Math.ceil((mn-109)/127);var Fr=[1,dn,mn,Rr,Cr,_t,dt,0];return Ze.FileIndex[0].size=dt<<6,Fr[7]=(Ze.FileIndex[0].start=Fr[0]+Fr[1]+Fr[2]+Fr[3]+Fr[4]+Fr[5])+(Fr[6]+7>>3),Fr})(he),ke=Mt(_e[7]<<9),Ce=0,rt=0;{for(Ce=0;Ce<8;++Ce)ke.write_shift(1,Q[Ce]);for(Ce=0;Ce<8;++Ce)ke.write_shift(2,0);for(ke.write_shift(2,62),ke.write_shift(2,3),ke.write_shift(2,65534),ke.write_shift(2,9),ke.write_shift(2,6),Ce=0;Ce<3;++Ce)ke.write_shift(2,0);for(ke.write_shift(4,0),ke.write_shift(4,_e[2]),ke.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),ke.write_shift(4,0),ke.write_shift(4,4096),ke.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:X),ke.write_shift(4,_e[3]),ke.write_shift(-4,_e[1]?_e[0]-1:X),ke.write_shift(4,_e[1]),Ce=0;Ce<109;++Ce)ke.write_shift(-4,Ce<_e[2]?_e[1]+Ce:-1)}if(_e[1])for(rt=0;rt<_e[1];++rt){for(;Ce<236+rt*127;++Ce)ke.write_shift(-4,Ce<_e[2]?_e[1]+Ce:-1);ke.write_shift(-4,rt===_e[1]-1?X:rt+1)}var xt=function(Ze){for(rt+=Ze;Ce<rt-1;++Ce)ke.write_shift(-4,Ce+1);Ze&&(++Ce,ke.write_shift(-4,X))};for(rt=Ce=0,rt+=_e[1];Ce<rt;++Ce)ke.write_shift(-4,B.DIFSECT);for(rt+=_e[2];Ce<rt;++Ce)ke.write_shift(-4,B.FATSECT);xt(_e[3]),xt(_e[4]);for(var ut=0,ce=0,ge=he.FileIndex[0];ut<he.FileIndex.length;++ut)ge=he.FileIndex[ut],ge.content&&(ce=ge.content.length,!(ce<4096)&&(ge.start=rt,xt(ce+511>>9)));for(xt(_e[6]+7>>3);ke.l&511;)ke.write_shift(-4,B.ENDOFCHAIN);for(rt=Ce=0,ut=0;ut<he.FileIndex.length;++ut)ge=he.FileIndex[ut],ge.content&&(ce=ge.content.length,!(!ce||ce>=4096)&&(ge.start=rt,xt(ce+63>>6)));for(;ke.l&511;)ke.write_shift(-4,B.ENDOFCHAIN);for(Ce=0;Ce<_e[4]<<2;++Ce){var Pe=he.FullPaths[Ce];if(!Pe||Pe.length===0){for(ut=0;ut<17;++ut)ke.write_shift(4,0);for(ut=0;ut<3;++ut)ke.write_shift(4,-1);for(ut=0;ut<12;++ut)ke.write_shift(4,0);continue}ge=he.FileIndex[Ce],Ce===0&&(ge.start=ge.size?ge.start-1:X);var je=Ce===0&&we.root||ge.name;if(ce=2*(je.length+1),ke.write_shift(64,je,"utf16le"),ke.write_shift(2,ce),ke.write_shift(1,ge.type),ke.write_shift(1,ge.color),ke.write_shift(-4,ge.L),ke.write_shift(-4,ge.R),ke.write_shift(-4,ge.C),ge.clsid)ke.write_shift(16,ge.clsid,"hex");else for(ut=0;ut<4;++ut)ke.write_shift(4,0);ke.write_shift(4,ge.state||0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,ge.start),ke.write_shift(4,ge.size),ke.write_shift(4,0)}for(Ce=1;Ce<he.FileIndex.length;++Ce)if(ge=he.FileIndex[Ce],ge.size>=4096)if(ke.l=ge.start+1<<9,Sn&&Buffer.isBuffer(ge.content))ge.content.copy(ke,ke.l,0,ge.size),ke.l+=ge.size+511&-512;else{for(ut=0;ut<ge.size;++ut)ke.write_shift(1,ge.content[ut]);for(;ut&511;++ut)ke.write_shift(1,0)}for(Ce=1;Ce<he.FileIndex.length;++Ce)if(ge=he.FileIndex[Ce],ge.size>0&&ge.size<4096)if(Sn&&Buffer.isBuffer(ge.content))ge.content.copy(ke,ke.l,0,ge.size),ke.l+=ge.size+63&-64;else{for(ut=0;ut<ge.size;++ut)ke.write_shift(1,ge.content[ut]);for(;ut&63;++ut)ke.write_shift(1,0)}if(Sn)ke.l=ke.length;else for(;ke.l<ke.length;)ke.write_shift(1,0);return ke}function L(he,Ee){var we=he.FullPaths.map(function(ut){return ut.toUpperCase()}),_e=we.map(function(ut){var ce=ut.split("/");return ce[ce.length-(ut.slice(-1)=="/"?2:1)]}),ke=!1;Ee.charCodeAt(0)===47?(ke=!0,Ee=we[0].slice(0,-1)+Ee):ke=Ee.indexOf("/")!==-1;var Ce=Ee.toUpperCase(),rt=ke===!0?we.indexOf(Ce):_e.indexOf(Ce);if(rt!==-1)return he.FileIndex[rt];var xt=!Ce.match(Dy);for(Ce=Ce.replace(Uo,""),xt&&(Ce=Ce.replace(Dy,"!")),rt=0;rt<we.length;++rt)if((xt?we[rt].replace(Dy,"!"):we[rt]).replace(Uo,"")==Ce||(xt?_e[rt].replace(Dy,"!"):_e[rt]).replace(Uo,"")==Ce)return he.FileIndex[rt];return null}var G=64,X=-2,se="d0cf11e0a1b11ae1",Q=[208,207,17,224,161,177,26,225],re="00000000000000000000000000000000",B={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:X,FREESECT:-1,HEADER_SIGNATURE:se,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:re,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(he,Ee,we){u();var _e=D(he,we);l.writeFileSync(Ee,_e)}function R(he){for(var Ee=new Array(he.length),we=0;we<he.length;++we)Ee[we]=String.fromCharCode(he[we]);return Ee.join("")}function H(he,Ee){var we=D(he,Ee);switch(Ee&&Ee.type||"buffer"){case"file":return u(),l.writeFileSync(Ee.filename,we),we;case"binary":return typeof we=="string"?we:R(we);case"base64":return Ev(typeof we=="string"?we:R(we));case"buffer":if(Sn)return Buffer.isBuffer(we)?we:v0(we);case"array":return typeof we=="string"?Ml(we):we}return we}var z;function I(he){try{var Ee=he.InflateRaw,we=new Ee;if(we._processChunk(new Uint8Array([3,0]),we._finishFlushFlag),we.bytesRead)z=he;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function W(he,Ee){if(!z)return Sr(he,Ee);var we=z.InflateRaw,_e=new we,ke=_e._processChunk(he.slice(he.l),_e._finishFlushFlag);return he.l+=_e.bytesRead,ke}function K(he){return z?z.deflateRawSync(he):nt(he)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],oe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Z=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(he){var Ee=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(Ee>>16|Ee>>8|Ee)&255}for(var ue=typeof Uint8Array<"u",de=ue?new Uint8Array(256):[],Te=0;Te<256;++Te)de[Te]=le(Te);function ie(he,Ee){var we=de[he&255];return Ee<=8?we>>>8-Ee:(we=we<<8|de[he>>8&255],Ee<=16?we>>>16-Ee:(we=we<<8|de[he>>16&255],we>>>24-Ee))}function pe(he,Ee){var we=Ee&7,_e=Ee>>>3;return(he[_e]|(we<=6?0:he[_e+1]<<8))>>>we&3}function Ae(he,Ee){var we=Ee&7,_e=Ee>>>3;return(he[_e]|(we<=5?0:he[_e+1]<<8))>>>we&7}function Me(he,Ee){var we=Ee&7,_e=Ee>>>3;return(he[_e]|(we<=4?0:he[_e+1]<<8))>>>we&15}function Je(he,Ee){var we=Ee&7,_e=Ee>>>3;return(he[_e]|(we<=3?0:he[_e+1]<<8))>>>we&31}function Ve(he,Ee){var we=Ee&7,_e=Ee>>>3;return(he[_e]|(we<=1?0:he[_e+1]<<8))>>>we&127}function Dt(he,Ee,we){var _e=Ee&7,ke=Ee>>>3,Ce=(1<<we)-1,rt=he[ke]>>>_e;return we<8-_e||(rt|=he[ke+1]<<8-_e,we<16-_e)||(rt|=he[ke+2]<<16-_e,we<24-_e)||(rt|=he[ke+3]<<24-_e),rt&Ce}function lt(he,Ee,we){var _e=Ee&7,ke=Ee>>>3;return _e<=5?he[ke]|=(we&7)<<_e:(he[ke]|=we<<_e&255,he[ke+1]=(we&7)>>8-_e),Ee+3}function At(he,Ee,we){var _e=Ee&7,ke=Ee>>>3;return we=(we&1)<<_e,he[ke]|=we,Ee+1}function vt(he,Ee,we){var _e=Ee&7,ke=Ee>>>3;return we<<=_e,he[ke]|=we&255,we>>>=8,he[ke+1]=we,Ee+8}function ct(he,Ee,we){var _e=Ee&7,ke=Ee>>>3;return we<<=_e,he[ke]|=we&255,we>>>=8,he[ke+1]=we&255,he[ke+2]=we>>>8,Ee+16}function bt(he,Ee){var we=he.length,_e=2*we>Ee?2*we:Ee+5,ke=0;if(we>=Ee)return he;if(Sn){var Ce=iD(_e);if(he.copy)he.copy(Ce);else for(;ke<he.length;++ke)Ce[ke]=he[ke];return Ce}else if(ue){var rt=new Uint8Array(_e);if(rt.set)rt.set(he);else for(;ke<we;++ke)rt[ke]=he[ke];return rt}return he.length=_e,he}function Ut(he){for(var Ee=new Array(he),we=0;we<he;++we)Ee[we]=0;return Ee}function Bt(he,Ee,we){var _e=1,ke=0,Ce=0,rt=0,xt=0,ut=he.length,ce=ue?new Uint16Array(32):Ut(32);for(Ce=0;Ce<32;++Ce)ce[Ce]=0;for(Ce=ut;Ce<we;++Ce)he[Ce]=0;ut=he.length;var ge=ue?new Uint16Array(ut):Ut(ut);for(Ce=0;Ce<ut;++Ce)ce[ke=he[Ce]]++,_e<ke&&(_e=ke),ge[Ce]=0;for(ce[0]=0,Ce=1;Ce<=_e;++Ce)ce[Ce+16]=xt=xt+ce[Ce-1]<<1;for(Ce=0;Ce<ut;++Ce)xt=he[Ce],xt!=0&&(ge[Ce]=ce[xt+16]++);var Pe=0;for(Ce=0;Ce<ut;++Ce)if(Pe=he[Ce],Pe!=0)for(xt=ie(ge[Ce],_e)>>_e-Pe,rt=(1<<_e+4-Pe)-1;rt>=0;--rt)Ee[xt|rt<<Pe]=Pe&15|Ce<<4;return _e}var Vt=ue?new Uint16Array(512):Ut(512),We=ue?new Uint16Array(32):Ut(32);if(!ue){for(var Ue=0;Ue<512;++Ue)Vt[Ue]=0;for(Ue=0;Ue<32;++Ue)We[Ue]=0}(function(){for(var he=[],Ee=0;Ee<32;Ee++)he.push(5);Bt(he,We,32);var we=[];for(Ee=0;Ee<=143;Ee++)we.push(8);for(;Ee<=255;Ee++)we.push(9);for(;Ee<=279;Ee++)we.push(7);for(;Ee<=287;Ee++)we.push(8);Bt(we,Vt,288)})();var tt=(function(){for(var Ee=ue?new Uint8Array(32768):[],we=0,_e=0;we<Z.length-1;++we)for(;_e<Z[we+1];++_e)Ee[_e]=we;for(;_e<32768;++_e)Ee[_e]=29;var ke=ue?new Uint8Array(259):[];for(we=0,_e=0;we<oe.length-1;++we)for(;_e<oe[we+1];++_e)ke[_e]=we;function Ce(xt,ut){for(var ce=0;ce<xt.length;){var ge=Math.min(65535,xt.length-ce),Pe=ce+ge==xt.length;for(ut.write_shift(1,+Pe),ut.write_shift(2,ge),ut.write_shift(2,~ge&65535);ge-- >0;)ut[ut.l++]=xt[ce++]}return ut.l}function rt(xt,ut){for(var ce=0,ge=0,Pe=ue?new Uint16Array(32768):[];ge<xt.length;){var je=Math.min(65535,xt.length-ge);if(je<10){for(ce=lt(ut,ce,+(ge+je==xt.length)),ce&7&&(ce+=8-(ce&7)),ut.l=ce/8|0,ut.write_shift(2,je),ut.write_shift(2,~je&65535);je-- >0;)ut[ut.l++]=xt[ge++];ce=ut.l*8;continue}ce=lt(ut,ce,+(ge+je==xt.length)+2);for(var Ze=0;je-- >0;){var dt=xt[ge];Ze=(Ze<<5^dt)&32767;var _t=-1,ir=0;if((_t=Pe[Ze])&&(_t|=ge&-32768,_t>ge&&(_t-=32768),_t<ge))for(;xt[_t+ir]==xt[ge+ir]&&ir<250;)++ir;if(ir>2){dt=ke[ir],dt<=22?ce=vt(ut,ce,de[dt+1]>>1)-1:(vt(ut,ce,3),ce+=5,vt(ut,ce,de[dt-23]>>5),ce+=3);var Ot=dt<8?0:dt-4>>2;Ot>0&&(ct(ut,ce,ir-oe[dt]),ce+=Ot),dt=Ee[ge-_t],ce=vt(ut,ce,de[dt]>>3),ce-=3;var Qt=dt<4?0:dt-2>>1;Qt>0&&(ct(ut,ce,ge-_t-Z[dt]),ce+=Qt);for(var Cr=0;Cr<ir;++Cr)Pe[Ze]=ge&32767,Ze=(Ze<<5^xt[ge])&32767,++ge;je-=ir-1}else dt<=143?dt=dt+48:ce=At(ut,ce,1),ce=vt(ut,ce,de[dt]),Pe[Ze]=ge&32767,++ge}ce=vt(ut,ce,0)-1}return ut.l=(ce+7)/8|0,ut.l}return function(ut,ce){return ut.length<8?Ce(ut,ce):rt(ut,ce)}})();function nt(he){var Ee=Mt(50+Math.floor(he.length*1.1)),we=tt(he,Ee);return Ee.slice(0,we)}var at=ue?new Uint16Array(32768):Ut(32768),It=ue?new Uint16Array(32768):Ut(32768),Lt=ue?new Uint16Array(128):Ut(128),Xt=1,vr=1;function br(he,Ee){var we=Je(he,Ee)+257;Ee+=5;var _e=Je(he,Ee)+1;Ee+=5;var ke=Me(he,Ee)+4;Ee+=4;for(var Ce=0,rt=ue?new Uint8Array(19):Ut(19),xt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ut=1,ce=ue?new Uint8Array(8):Ut(8),ge=ue?new Uint8Array(8):Ut(8),Pe=rt.length,je=0;je<ke;++je)rt[ee[je]]=Ce=Ae(he,Ee),ut<Ce&&(ut=Ce),ce[Ce]++,Ee+=3;var Ze=0;for(ce[0]=0,je=1;je<=ut;++je)ge[je]=Ze=Ze+ce[je-1]<<1;for(je=0;je<Pe;++je)(Ze=rt[je])!=0&&(xt[je]=ge[Ze]++);var dt=0;for(je=0;je<Pe;++je)if(dt=rt[je],dt!=0){Ze=de[xt[je]]>>8-dt;for(var _t=(1<<7-dt)-1;_t>=0;--_t)Lt[Ze|_t<<dt]=dt&7|je<<3}var ir=[];for(ut=1;ir.length<we+_e;)switch(Ze=Lt[Ve(he,Ee)],Ee+=Ze&7,Ze>>>=3){case 16:for(Ce=3+pe(he,Ee),Ee+=2,Ze=ir[ir.length-1];Ce-- >0;)ir.push(Ze);break;case 17:for(Ce=3+Ae(he,Ee),Ee+=3;Ce-- >0;)ir.push(0);break;case 18:for(Ce=11+Ve(he,Ee),Ee+=7;Ce-- >0;)ir.push(0);break;default:ir.push(Ze),ut<Ze&&(ut=Ze);break}var Ot=ir.slice(0,we),Qt=ir.slice(we);for(je=we;je<286;++je)Ot[je]=0;for(je=_e;je<30;++je)Qt[je]=0;return Xt=Bt(Ot,at,286),vr=Bt(Qt,It,30),Ee}function Dr(he,Ee){if(he[0]==3&&!(he[1]&3))return[zf(Ee),2];for(var we=0,_e=0,ke=iD(Ee||1<<18),Ce=0,rt=ke.length>>>0,xt=0,ut=0;(_e&1)==0;){if(_e=Ae(he,we),we+=3,_e>>>1)_e>>1==1?(xt=9,ut=5):(we=br(he,we),xt=Xt,ut=vr);else{we&7&&(we+=8-(we&7));var ce=he[we>>>3]|he[(we>>>3)+1]<<8;if(we+=32,ce>0)for(!Ee&&rt<Ce+ce&&(ke=bt(ke,Ce+ce),rt=ke.length);ce-- >0;)ke[Ce++]=he[we>>>3],we+=8;continue}for(;;){!Ee&&rt<Ce+32767&&(ke=bt(ke,Ce+32767),rt=ke.length);var ge=Dt(he,we,xt),Pe=_e>>>1==1?Vt[ge]:at[ge];if(we+=Pe&15,Pe>>>=4,(Pe>>>8&255)===0)ke[Ce++]=Pe;else{if(Pe==256)break;Pe-=257;var je=Pe<8?0:Pe-4>>2;je>5&&(je=0);var Ze=Ce+oe[Pe];je>0&&(Ze+=Dt(he,we,je),we+=je),ge=Dt(he,we,ut),Pe=_e>>>1==1?We[ge]:It[ge],we+=Pe&15,Pe>>>=4;var dt=Pe<4?0:Pe-2>>1,_t=Z[Pe];for(dt>0&&(_t+=Dt(he,we,dt),we+=dt),!Ee&&rt<Ze&&(ke=bt(ke,Ze+100),rt=ke.length);Ce<Ze;)ke[Ce]=ke[Ce-_t],++Ce}}}return Ee?[ke,we+7>>>3]:[ke.slice(0,Ce),we+7>>>3]}function Sr(he,Ee){var we=he.slice(he.l||0),_e=Dr(we,Ee);return he.l+=_e[1],_e[0]}function pr(he,Ee){if(he)typeof console<"u"&&console.error(Ee);else throw new Error(Ee)}function ye(he,Ee){var we=he;Gi(we,0);var _e=[],ke=[],Ce={FileIndex:_e,FullPaths:ke};M(Ce,{root:Ee.root});for(var rt=we.length-4;(we[rt]!=80||we[rt+1]!=75||we[rt+2]!=5||we[rt+3]!=6)&&rt>=0;)--rt;we.l=rt+4,we.l+=4;var xt=we.read_shift(2);we.l+=6;var ut=we.read_shift(4);for(we.l=ut,rt=0;rt<xt;++rt){we.l+=20;var ce=we.read_shift(4),ge=we.read_shift(4),Pe=we.read_shift(2),je=we.read_shift(2),Ze=we.read_shift(2);we.l+=8;var dt=we.read_shift(4),_t=o(we.slice(we.l+Pe,we.l+Pe+je));we.l+=Pe+je+Ze;var ir=we.l;we.l=dt+4,Fe(we,ce,ge,Ce,_t),we.l=ir}return Ce}function Fe(he,Ee,we,_e,ke){he.l+=2;var Ce=he.read_shift(2),rt=he.read_shift(2),xt=i(he);if(Ce&8257)throw new Error("Unsupported ZIP encryption");for(var ut=he.read_shift(4),ce=he.read_shift(4),ge=he.read_shift(4),Pe=he.read_shift(2),je=he.read_shift(2),Ze="",dt=0;dt<Pe;++dt)Ze+=String.fromCharCode(he[he.l++]);if(je){var _t=o(he.slice(he.l,he.l+je));(_t[21589]||{}).mt&&(xt=_t[21589].mt),((ke||{})[21589]||{}).mt&&(xt=ke[21589].mt)}he.l+=je;var ir=he.slice(he.l,he.l+ce);switch(rt){case 8:ir=W(he,ge);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+rt)}var Ot=!1;Ce&8&&(ut=he.read_shift(4),ut==134695760&&(ut=he.read_shift(4),Ot=!0),ce=he.read_shift(4),ge=he.read_shift(4)),ce!=Ee&&pr(Ot,"Bad compressed size: "+Ee+" != "+ce),ge!=we&&pr(Ot,"Bad uncompressed size: "+we+" != "+ge),rr(_e,Ze,ir,{unsafe:!0,mt:xt})}function Be(he,Ee){var we=Ee||{},_e=[],ke=[],Ce=Mt(1),rt=we.compression?8:0,xt=0,ut=0,ce=0,ge=0,Pe=0,je=he.FullPaths[0],Ze=je,dt=he.FileIndex[0],_t=[],ir=0;for(ut=1;ut<he.FullPaths.length;++ut)if(Ze=he.FullPaths[ut].slice(je.length),dt=he.FileIndex[ut],!(!dt.size||!dt.content||Ze=="Sh33tJ5")){var Ot=ge,Qt=Mt(Ze.length);for(ce=0;ce<Ze.length;++ce)Qt.write_shift(1,Ze.charCodeAt(ce)&127);Qt=Qt.slice(0,Qt.l),_t[Pe]=Sfe.buf(dt.content,0);var Cr=dt.content;rt==8&&(Cr=K(Cr)),Ce=Mt(30),Ce.write_shift(4,67324752),Ce.write_shift(2,20),Ce.write_shift(2,xt),Ce.write_shift(2,rt),dt.mt?a(Ce,dt.mt):Ce.write_shift(4,0),Ce.write_shift(-4,_t[Pe]),Ce.write_shift(4,Cr.length),Ce.write_shift(4,dt.content.length),Ce.write_shift(2,Qt.length),Ce.write_shift(2,0),ge+=Ce.length,_e.push(Ce),ge+=Qt.length,_e.push(Qt),ge+=Cr.length,_e.push(Cr),Ce=Mt(46),Ce.write_shift(4,33639248),Ce.write_shift(2,0),Ce.write_shift(2,20),Ce.write_shift(2,xt),Ce.write_shift(2,rt),Ce.write_shift(4,0),Ce.write_shift(-4,_t[Pe]),Ce.write_shift(4,Cr.length),Ce.write_shift(4,dt.content.length),Ce.write_shift(2,Qt.length),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(4,0),Ce.write_shift(4,Ot),ir+=Ce.l,ke.push(Ce),ir+=Qt.length,ke.push(Qt),++Pe}return Ce=Mt(22),Ce.write_shift(4,101010256),Ce.write_shift(2,0),Ce.write_shift(2,0),Ce.write_shift(2,Pe),Ce.write_shift(2,Pe),Ce.write_shift(4,ir),Ce.write_shift(4,ge),Ce.write_shift(2,0),_i([_i(_e),_i(ke),Ce])}var He={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Pt(he,Ee){if(he.ctype)return he.ctype;var we=he.name||"",_e=we.match(/\.([^\.]+)$/);return _e&&He[_e[1]]||Ee&&(_e=(we=Ee).match(/[\.\\]([^\.\\])+$/),_e&&He[_e[1]])?He[_e[1]]:"application/octet-stream"}function Ie(he){for(var Ee=Ev(he),we=[],_e=0;_e<Ee.length;_e+=76)we.push(Ee.slice(_e,_e+76));return we.join(`\r
`)+`\r
`}function Qe(he){var Ee=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ce){var ge=ce.charCodeAt(0).toString(16).toUpperCase();return"="+(ge.length==1?"0"+ge:ge)});Ee=Ee.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ee.charAt(0)==`
`&&(Ee="=0D"+Ee.slice(1)),Ee=Ee.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var we=[],_e=Ee.split(`\r
`),ke=0;ke<_e.length;++ke){var Ce=_e[ke];if(Ce.length==0){we.push("");continue}for(var rt=0;rt<Ce.length;){var xt=76,ut=Ce.slice(rt,rt+xt);ut.charAt(xt-1)=="="?xt--:ut.charAt(xt-2)=="="?xt-=2:ut.charAt(xt-3)=="="&&(xt-=3),ut=Ce.slice(rt,rt+xt),rt+=xt,rt<Ce.length&&(ut+="="),we.push(ut)}}return we.join(`\r
`)}function Ne(he){for(var Ee=[],we=0;we<he.length;++we){for(var _e=he[we];we<=he.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+he[++we];Ee.push(_e)}for(var ke=0;ke<Ee.length;++ke)Ee[ke]=Ee[ke].replace(/[=][0-9A-Fa-f]{2}/g,function(Ce){return String.fromCharCode(parseInt(Ce.slice(1),16))});return Ml(Ee.join(`\r
`))}function Ke(he,Ee,we){for(var _e="",ke="",Ce="",rt,xt=0;xt<10;++xt){var ut=Ee[xt];if(!ut||ut.match(/^\s*$/))break;var ce=ut.match(/^(.*?):\s*([^\s].*)$/);if(ce)switch(ce[1].toLowerCase()){case"content-location":_e=ce[2].trim();break;case"content-type":Ce=ce[2].trim();break;case"content-transfer-encoding":ke=ce[2].trim();break}}switch(++xt,ke.toLowerCase()){case"base64":rt=Ml(Ll(Ee.slice(xt).join("")));break;case"quoted-printable":rt=Ne(Ee.slice(xt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ke)}var ge=rr(he,_e.slice(we.length),rt,{unsafe:!0});Ce&&(ge.ctype=Ce)}function qe(he,Ee){if(R(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var we=Ee&&Ee.root||"",_e=(Sn&&Buffer.isBuffer(he)?he.toString("binary"):R(he)).split(`\r
`),ke=0,Ce="";for(ke=0;ke<_e.length;++ke)if(Ce=_e[ke],!!/^Content-Location:/i.test(Ce)&&(Ce=Ce.slice(Ce.indexOf("file")),we||(we=Ce.slice(0,Ce.lastIndexOf("/")+1)),Ce.slice(0,we.length)!=we))for(;we.length>0&&(we=we.slice(0,we.length-1),we=we.slice(0,we.lastIndexOf("/")+1),Ce.slice(0,we.length)!=we););var rt=(_e[1]||"").match(/boundary="(.*?)"/);if(!rt)throw new Error("MAD cannot find boundary");var xt="--"+(rt[1]||""),ut=[],ce=[],ge={FileIndex:ut,FullPaths:ce};M(ge);var Pe,je=0;for(ke=0;ke<_e.length;++ke){var Ze=_e[ke];Ze!==xt&&Ze!==xt+"--"||(je++&&Ke(ge,_e.slice(Pe,ke),we),Pe=ke)}return ge}function Rt(he,Ee){var we=Ee||{},_e=we.boundary||"SheetJS";_e="------="+_e;for(var ke=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],Ce=he.FullPaths[0],rt=Ce,xt=he.FileIndex[0],ut=1;ut<he.FullPaths.length;++ut)if(rt=he.FullPaths[ut].slice(Ce.length),xt=he.FileIndex[ut],!(!xt.size||!xt.content||rt=="Sh33tJ5")){rt=rt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(ir){return"_x"+ir.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(ir){return"_u"+ir.charCodeAt(0).toString(16)+"_"});for(var ce=xt.content,ge=Sn&&Buffer.isBuffer(ce)?ce.toString("binary"):R(ce),Pe=0,je=Math.min(1024,ge.length),Ze=0,dt=0;dt<=je;++dt)(Ze=ge.charCodeAt(dt))>=32&&Ze<128&&++Pe;var _t=Pe>=je*4/5;ke.push(_e),ke.push("Content-Location: "+(we.root||"file:///C:/SheetJS/")+rt),ke.push("Content-Transfer-Encoding: "+(_t?"quoted-printable":"base64")),ke.push("Content-Type: "+Pt(xt,rt)),ke.push(""),ke.push(_t?Qe(ge):Ie(ge))}return ke.push(_e+`--\r
`),ke.join(`\r
`)}function zt(he){var Ee={};return M(Ee,he),Ee}function rr(he,Ee,we,_e){var ke=_e&&_e.unsafe;ke||M(he);var Ce=!ke&&zr.find(he,Ee);if(!Ce){var rt=he.FullPaths[0];Ee.slice(0,rt.length)==rt?rt=Ee:(rt.slice(-1)!="/"&&(rt+="/"),rt=(rt+Ee).replace("//","/")),Ce={name:s(Ee),type:2},he.FileIndex.push(Ce),he.FullPaths.push(rt),ke||zr.utils.cfb_gc(he)}return Ce.content=we,Ce.size=we?we.length:0,_e&&(_e.CLSID&&(Ce.clsid=_e.CLSID),_e.mt&&(Ce.mt=_e.mt),_e.ct&&(Ce.ct=_e.ct)),Ce}function Ir(he,Ee){M(he);var we=zr.find(he,Ee);if(we){for(var _e=0;_e<he.FileIndex.length;++_e)if(he.FileIndex[_e]==we)return he.FileIndex.splice(_e,1),he.FullPaths.splice(_e,1),!0}return!1}function wr(he,Ee,we){M(he);var _e=zr.find(he,Ee);if(_e){for(var ke=0;ke<he.FileIndex.length;++ke)if(he.FileIndex[ke]==_e)return he.FileIndex[ke].name=s(we),he.FullPaths[ke]=we,!0}return!1}function Wr(he){A(he,!0)}return t.find=L,t.read=P,t.parse=d,t.write=H,t.writeFile=V,t.utils={cfb_new:zt,cfb_add:rr,cfb_del:Ir,cfb_mov:wr,cfb_gc:Wr,ReadShift:Yy,CheckField:YH,prep_blob:Gi,bconcat:_i,use_zlib:I,_deflateRaw:nt,_inflateRaw:Sr,consts:B},t})();function kfe(e){return typeof e=="string"?o3(e):Array.isArray(e)?X0e(e):e}function b2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=o3(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Wu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([kfe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=eh(t)),o.write(t),o.close(),t}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+e)}function Tfe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function ma(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function mD(e,t){for(var r=[],n=ma(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function c3(e){for(var t=[],r=ma(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function u3(e){for(var t=[],r=ma(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Cfe(e){for(var t=[],r=ma(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var R4=new Date(1899,11,30,0,0,0);function si(e,t){var r=e.getTime(),n=R4.getTime()+(e.getTimezoneOffset()-R4.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var NH=new Date,Efe=R4.getTime()+(NH.getTimezoneOffset()-R4.getTimezoneOffset())*6e4,gD=NH.getTimezoneOffset();function d3(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Efe),t.getTimezoneOffset()!==gD&&t.setTime(t.getTime()+(t.getTimezoneOffset()-gD)*6e4),t}function Nfe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[a],10)}return t}var pD=new Date("2017-02-19T19:06:09.000Z"),AH=isNaN(pD.getFullYear())?new Date("2/19/17"):pD,Afe=AH.getFullYear()==2017;function Ns(e,t){var r=new Date(e);if(Afe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(AH.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Fm(e,t){if(Sn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Wu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Wu(pH(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Wu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Wu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function As(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=As(e[r]));return t}function ua(e,t){for(var r="";r.length<t;)r+=e;return r}function su(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var jfe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Vp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&jfe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Pfe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}})();function jH(e){return e?e.content&&e.type?Fm(e.content,!0):e.data?Fy(e.data):e.asNodeBuffer&&Sn?Fy(e.asNodeBuffer().toString("binary")):e.asBinary?Fy(e.asBinary()):e._data&&e._data.getContent?Fy(Fm(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function PH(e){if(!e)return null;if(e.data)return sD(e.data);if(e.asNodeBuffer&&Sn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?sD(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Mfe(e){return e&&e.name.slice(-4)===".bin"?PH(e):jH(e)}function cc(e,t){for(var r=e.FullPaths||ma(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function JC(e,t){var r=cc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ia(e,t,r){if(!r)return Mfe(JC(e,t));if(!t)return null;try{return Ia(e,t)}catch{return null}}function Fl(e,t,r){if(!r)return jH(JC(e,t));if(!t)return null;try{return Fl(e,t)}catch{return null}}function Ffe(e,t,r){return PH(JC(e,t))}function xD(e){for(var t=e.FullPaths||ma(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function wn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Sn?n=v0(r):n=J0e(r),zr.utils.cfb_add(e,t,n)}zr.utils.cfb_add(e,t,r)}else e.file(t,r)}function QC(){return zr.utils.cfb_new()}function MH(e,t){switch(t.type){case"base64":return zr.read(e,{type:"base64"});case"binary":return zr.read(e,{type:"binary"});case"buffer":case"array":return zr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Oy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var ja=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Dfe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,yD=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Ofe=/<[^>]*>/g,bo=ja.match(yD)?yD:Ofe,Ife=/<\w*:/,Rfe=/<(\/?)\w+:/;function en(e,t,r){for(var n={},s=0,a=0;s!==e.length&&!((a=e.charCodeAt(s))===32||a===10||a===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var i=e.match(Dfe),o=0,l="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(h=(s=f.charCodeAt(a+1))==34||s==39?1:0,l=f.slice(a+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=l,n[g.toLowerCase()]=l}}return n}function sd(e){return e.replace(Rfe,"<$1")}var FH={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},ZC=c3(FH),In=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(e,function(o,l){return FH[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}})(),eE=/[&<>'"]/g,Lfe=/[\u0000-\u0008\u000b-\u001f]/g;function ss(e){var t=e+"";return t.replace(eE,function(r){return ZC[r]}).replace(Lfe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function vD(e){return ss(e).replace(/ /g,"_x0020_")}var DH=/[\u0000-\u001f]/g;function tE(e){var t=e+"";return t.replace(eE,function(r){return ZC[r]}).replace(/\n/g,"<br/>").replace(DH,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Bfe(e){var t=e+"";return t.replace(eE,function(r){return ZC[r]}).replace(DH,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var wD=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function $fe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ts(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function R5(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,t+=String.fromCharCode(i);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function bD(e){var t=zf(2*e.length),r,n,s=1,a=0,i=0,o;for(n=0;n<e.length;n+=s)s=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[a++]=i&255,t[a++]=i>>>8,i=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function _D(e){return v0(e,"binary").toString("utf8")}var fb="foo bar baz",us=Sn&&(_D(fb)==R5(fb)&&_D||bD(fb)==R5(fb)&&bD)||R5,Wu=Sn?function(e){return v0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Av=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),OH=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),zfe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Ufe=/<\/?(?:vt:)?variant>/g,Wfe=/<(?:vt:)([^>]*)>([\s\S]*)</;function SD(e,t){var r=en(e),n=e.match(zfe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(Ufe,"").match(Wfe);i&&s.push({v:us(i[2]),t:i[1]})}),s}var IH=/(^\s|\s$|\n)/;function Ki(e,t){return"<"+e+(t.match(IH)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function jv(e){return ma(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function lr(e,t,r){return"<"+e+(r!=null?jv(r):"")+(t!=null?(t.match(IH)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function z8(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Hfe(e,t){switch(typeof e){case"string":var r=lr("vt:lpwstr",ss(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return lr((e|0)==e?"vt:i4":"vt:r8",ss(String(e)));case"boolean":return lr("vt:bool",e?"true":"false")}if(e instanceof Date)return lr("vt:filetime",z8(e));throw new Error("Unable to serialize "+e)}function rE(e){if(Sn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return us(eh(KC(e)));throw new Error("Bad input format: expected Buffer or string")}var Pv=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ti={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ym=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Nl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Gfe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Vfe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var kD=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},TD=Sn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:v0(t)})):kD(e)}:kD,CD=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(qd(e,s)));return n.join("").replace(Uo,"")},nE=Sn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Uo,""):CD(e,t,r)}:CD,ED=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},RH=Sn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):ED(e,t,r)}:ED,ND=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(up(e,s)));return n.join("")},_2=Sn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):ND(t,r,n)}:ND,LH=function(e,t){var r=Al(e,t);return r>0?_2(e,t+4,t+4+r-1):""},BH=LH,$H=function(e,t){var r=Al(e,t);return r>0?_2(e,t+4,t+4+r-1):""},zH=$H,UH=function(e,t){var r=2*Al(e,t);return r>0?_2(e,t+4,t+4+r-1):""},WH=UH,HH=function(t,r){var n=Al(t,r);return n>0?nE(t,r+4,r+4+n):""},GH=HH,VH=function(e,t){var r=Al(e,t);return r>0?_2(e,t+4,t+4+r):""},qH=VH,KH=function(e,t){return Gfe(e,t)},L4=KH,sE=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Sn&&(BH=function(t,r){if(!Buffer.isBuffer(t))return LH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},zH=function(t,r){if(!Buffer.isBuffer(t))return $H(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},WH=function(t,r){if(!Buffer.isBuffer(t))return UH(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},GH=function(t,r){if(!Buffer.isBuffer(t))return HH(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},qH=function(t,r){if(!Buffer.isBuffer(t))return VH(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},L4=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):KH(t,r)},sE=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var up=function(e,t){return e[t]},qd=function(e,t){return e[t+1]*256+e[t]},qfe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Al=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Kh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Kfe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Yy(e,t){var r="",n,s,a=[],i,o,l,u;switch(t){case"dbcs":if(u=this.l,Sn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(l=0;l<e;++l)r+=String.fromCharCode(qd(this,u)),u+=2;e*=2;break;case"utf8":r=_2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=nE(this,this.l,this.l+e);break;case"wstr":return Yy.call(this,e,"dbcs");case"lpstr-ansi":r=BH(this,this.l),e=4+Al(this,this.l);break;case"lpstr-cp":r=zH(this,this.l),e=4+Al(this,this.l);break;case"lpwstr":r=WH(this,this.l),e=4+2*Al(this,this.l);break;case"lpp4":e=4+Al(this,this.l),r=GH(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Al(this,this.l),r=qH(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=up(this,this.l+e++))!==0;)a.push(db(i));r=a.join("");break;case"_wstr":for(e=0,r="";(i=qd(this,this.l+e))!==0;)a.push(db(i)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=up(this,u),this.l=u+1,o=Yy.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(db(qd(this,u))),u+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=e;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=up(this,u),this.l=u+1,o=Yy.call(this,e-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(db(up(this,u))),u+=1}r=a.join("");break;default:switch(e){case 1:return n=up(this,this.l),this.l++,n;case 2:return n=(t==="i"?qfe:qd)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Kh:Kfe)(this,this.l),this.l+=4,n):(s=Al(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=L4(this,this.l):s=L4([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=RH(this,this.l,e);break}}return this.l+=e,r}var Yfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Xfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Jfe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Qfe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Jfe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Yfe(this,t,this.l);break;case 8:if(n=8,r==="f"){Vfe(this,t,this.l);break}case 16:break;case-4:n=4,Xfe(this,t,this.l);break}return this.l+=n,this}function YH(e,t){var r=RH(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Gi(e,t){e.l=t,e.read_shift=Yy,e.chk=YH,e.write_shift=Qfe}function wo(e,t){e.l+=t}function Mt(e){var t=zf(e);return Gi(t,0),t}function w0(e,t,r){if(e){var n,s,a;Gi(e,e.l||0);for(var i=e.length,o=0,l=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Rv[o]||Rv[65535];for(n=e.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=e.read_shift(1))&127)<<7*s;l=e.l+a;var d=u.f&&u.f(e,a,r);if(e.l=l,t(d,u,o))return}}}function dl(){var e=[],t=Sn?256:2048,r=function(u){var d=Mt(u);return Gi(d,0),d},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},i=function(){return s(),_i(e)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:i,_bufs:e}}function Ht(e,t,r,n){var s=+t,a;if(!isNaN(s)){n||(n=Rv[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&sE(r)&&e.push(r)}}function Xy(e,t,r){var n=As(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function AD(e,t,r){var n=As(e);return n.s=Xy(n.s,t.s,r),n.e=Xy(n.e,t.s,r),n}function Jy(e,t){if(e.cRel&&e.c<0)for(e=As(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=As(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Jr(e);return!e.cRel&&e.cRel!=null&&(r=the(r)),!e.rRel&&e.rRel!=null&&(r=Zfe(r)),r}function L5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ys(e.s.c)+":"+(e.e.cRel?"":"$")+Ys(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Na(e.s.r)+":"+(e.e.rRel?"":"$")+Na(e.e.r):Jy(e.s,t.biff)+":"+Jy(e.e,t.biff)}function aE(e){return parseInt(ehe(e),10)-1}function Na(e){return""+(e+1)}function Zfe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function ehe(e){return e.replace(/\$(\d+)$/,"$1")}function iE(e){for(var t=rhe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ys(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function the(e){return e.replace(/^([A-Z])/,"$$$1")}function rhe(e){return e.replace(/^\$([A-Z])/,"$1")}function nhe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Xs(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function Jr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function fl(e){var t=e.indexOf(":");return t==-1?{s:Xs(e),e:Xs(e)}:{s:Xs(e.slice(0,t)),e:Xs(e.slice(t+1))}}function vn(e,t){return typeof t>"u"||typeof t=="number"?vn(e.s,e.e):(typeof e!="string"&&(e=Jr(e)),typeof t!="string"&&(t=Jr(t)),e==t?e:e+":"+t)}function Ln(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function jD(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Sc(e.z,r?si(t):t)}catch{}try{return e.w=Sc((e.XF||{}).numFmtId||(r?14:0),r?si(t):t)}catch{return""+t}}function d0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?b0[e.v]||e.v:t==null?jD(e,e.v):jD(e,t))}function th(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function XH(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Xs(n.origin):n.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Ln(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var g={v:t[f][h]},x=i+f,y=o+h;if(u.s.r>x&&(u.s.r=x),u.s.c>y&&(u.s.c=y),u.e.r<x&&(u.e.r=x),u.e.c<y&&(u.e.c=y),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))g=t[f][h];else if(Array.isArray(g.v)&&(g.f=t[f][h][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||Yr[14],n.cellDates?(g.t="d",g.w=Sc(g.z,si(g.v))):(g.t="n",g.v=si(g.v),g.w=Sc(g.z,g.v))):g.t="s";if(s)a[x]||(a[x]=[]),a[x][y]&&a[x][y].z&&(g.z=a[x][y].z),a[x][y]=g;else{var v=Jr({c:y,r:x});a[v]&&a[v].z&&(g.z=a[v].z),a[v]=g}}}return u.s.c<1e7&&(a["!ref"]=vn(u)),a}function S1(e,t){return XH(null,e,t)}function she(e){return e.read_shift(4,"i")}function au(e,t){return t||(t=Mt(4)),t.write_shift(4,e),t}function yo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function ki(e,t){var r=!1;return t==null&&(r=!0,t=Mt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function ahe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function ihe(e,t){return t||(t=Mt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function oE(e,t){var r=e.l,n=e.read_shift(1),s=yo(e),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=e.read_shift(4),l=0;l!=o;++l)a.push(ahe(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function ohe(e,t){var r=!1;return t==null&&(r=!0,t=Mt(15+4*e.t.length)),t.write_shift(1,0),ki(e.t,t),r?t.slice(0,t.l):t}var lhe=oE;function che(e,t){var r=!1;return t==null&&(r=!0,t=Mt(23+4*e.t.length)),t.write_shift(1,1),ki(e.t,t),t.write_shift(4,1),ihe({},t),r?t.slice(0,t.l):t}function Nc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Xm(e,t){return t==null&&(t=Mt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Jm(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Qm(e,t){return t==null&&(t=Mt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var uhe=yo,JH=ki;function lE(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function B4(e,t){var r=!1;return t==null&&(r=!0,t=Mt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var dhe=yo,U8=lE,cE=B4;function uE(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?L4([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Kh(t,0)>>2;return r?s/100:s}function QH(e,t){t==null&&(t=Mt(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function ZH(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function fhe(e,t){return t||(t=Mt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Zm=ZH,k1=fhe;function mo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Dm(e,t){return(t||Mt(8)).write_shift(8,e,"f")}function hhe(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=um[s];u&&(t.rgb=Fv(u));break;case 2:t.rgb=Fv([i,o,l]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function $4(e,t){if(t||(t=Mt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function mhe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function ghe(e,t){t||(t=Mt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function eG(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function phe(e){return eG(e,1)}function xhe(e){return eG(e,2)}var dE=2,nl=3,hb=11,PD=12,z4=19,mb=64,yhe=65,vhe=71,whe=4108,bhe=4126,yi=80,tG=81,_he=[yi,tG],W8={1:{n:"CodePage",t:dE},2:{n:"Category",t:yi},3:{n:"PresentationFormat",t:yi},4:{n:"ByteCount",t:nl},5:{n:"LineCount",t:nl},6:{n:"ParagraphCount",t:nl},7:{n:"SlideCount",t:nl},8:{n:"NoteCount",t:nl},9:{n:"HiddenCount",t:nl},10:{n:"MultimediaClipCount",t:nl},11:{n:"ScaleCrop",t:hb},12:{n:"HeadingPairs",t:whe},13:{n:"TitlesOfParts",t:bhe},14:{n:"Manager",t:yi},15:{n:"Company",t:yi},16:{n:"LinksUpToDate",t:hb},17:{n:"CharacterCount",t:nl},19:{n:"SharedDoc",t:hb},22:{n:"HyperlinksChanged",t:hb},23:{n:"AppVersion",t:nl,p:"version"},24:{n:"DigSig",t:yhe},26:{n:"ContentType",t:yi},27:{n:"ContentStatus",t:yi},28:{n:"Language",t:yi},29:{n:"Version",t:yi},255:{},2147483648:{n:"Locale",t:z4},2147483651:{n:"Behavior",t:z4},1919054434:{}},H8={1:{n:"CodePage",t:dE},2:{n:"Title",t:yi},3:{n:"Subject",t:yi},4:{n:"Author",t:yi},5:{n:"Keywords",t:yi},6:{n:"Comments",t:yi},7:{n:"Template",t:yi},8:{n:"LastAuthor",t:yi},9:{n:"RevNumber",t:yi},10:{n:"EditTime",t:mb},11:{n:"LastPrinted",t:mb},12:{n:"CreatedDate",t:mb},13:{n:"ModifiedDate",t:mb},14:{n:"PageCount",t:nl},15:{n:"WordCount",t:nl},16:{n:"CharCount",t:nl},17:{n:"Thumbnail",t:vhe},18:{n:"Application",t:yi},19:{n:"DocSecurity",t:nl},255:{},2147483648:{n:"Locale",t:z4},2147483651:{n:"Behavior",t:z4},1919054434:{}},MD={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},She=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function khe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var The=khe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),um=As(The),b0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},rG={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},G8={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},gb={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function fE(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Che(e){var t=fE();if(!e||!e.match)return t;var r={};if((e.match(bo)||[]).forEach(function(n){var s=en(n);switch(s[0].replace(Ife,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[G8[s.ContentType]]!==void 0&&t[G8[s.ContentType]].push(s.PartName);break}}),t.xmlns!==ti.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function nG(e,t){var r=Cfe(G8),n=[],s;n[n.length]=ja,n[n.length]=lr("Types",null,{xmlns:ti.CT,"xmlns:xsd":ti.xsd,"xmlns:xsi":ti.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return lr("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){e[l]&&e[l].length>0&&(s=e[l][0],n[n.length]=lr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:gb[l][t.bookType]||gb[l].xlsx}))},i=function(l){(e[l]||[]).forEach(function(u){n[n.length]=lr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:gb[l][t.bookType]||gb[l].xlsx})})},o=function(l){(e[l]||[]).forEach(function(u){n[n.length]=lr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Cn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Mv(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Qy(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(bo)||[]).forEach(function(s){var a=en(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Oy(a.Target,t);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function Pp(e){var t=[ja,lr("Relationships",null,{xmlns:ti.RELS})];return ma(e["!id"]).forEach(function(r){t[t.length]=lr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function rs(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[Cn.HLINK,Cn.XPATH,Cn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var Ehe="application/vnd.oasis.opendocument.spreadsheet";function Nhe(e,t){for(var r=rE(e),n,s;n=Pv.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=en(n[0],!1),s.path=="/"&&s.type!==Ehe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Ahe(e){var t=[ja];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function FD(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function jhe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Phe(e){var t=[ja];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(FD(e[r][0],e[r][1])),t.push(jhe("",e[r][0]));return t.push(FD("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function sG(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+F4.version+"</meta:generator></office:meta></office:document-meta>"}var yc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Mhe=(function(){for(var e=new Array(yc.length),t=0;t<yc.length;++t){var r=yc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function aG(e){var t={};e=us(e);for(var r=0;r<yc.length;++r){var n=yc[r],s=e.match(Mhe[r]);s!=null&&s.length>0&&(t[n[1]]=In(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ns(t[n[1]]))}return t}function B5(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=ss(t),n[n.length]=r?lr(e,t,r):Ki(e,t))}function iG(e,t){var r=t||{},n=[ja,lr("cp:coreProperties",null,{"xmlns:cp":ti.CORE_PROPS,"xmlns:dc":ti.dc,"xmlns:dcterms":ti.dcterms,"xmlns:dcmitype":ti.dcmitype,"xmlns:xsi":ti.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&B5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:z8(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&B5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:z8(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=yc.length;++a){var i=yc[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&B5(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var dm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],oG=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function lG(e,t,r,n){var s=[];if(typeof e=="string")s=SD(e,n);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(d){return{v:d}}));var i=typeof t=="string"?SD(t,n).map(function(d){return d.v}):t,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function Fhe(e,t,r){var n={};return t||(t={}),e=us(e),dm.forEach(function(s){var a=(e.match(Av(s[0]))||[])[1];switch(s[2]){case"string":a&&(t[s[1]]=In(a));break;case"bool":t[s[1]]=a==="true";break;case"raw":var i=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&lG(n.HeadingPairs,n.TitlesOfParts,t,r),t}function cG(e){var t=[],r=lr;return e||(e={}),e.Application="SheetJS",t[t.length]=ja,t[t.length]=lr("Properties",null,{xmlns:ti.EXT_PROPS,"xmlns:vt":ti.vt}),dm.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=ss(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+ss(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Dhe=/<[^>]+>[^<]*/g;function Ohe(e,t){var r={},n="",s=e.match(Dhe);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=en(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=In(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=In(d);break;case"bool":r[n]=Ts(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ns(d);break;case"cy":case"error":r[n]=In(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function uG(e){var t=[ja,lr("Properties",null,{xmlns:ti.CUST_PROPS,"xmlns:vt":ti.vt})];if(!e)return t.join("");var r=1;return ma(e).forEach(function(s){++r,t[t.length]=lr("property",Hfe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:ss(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var V8={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},$5;function Ihe(e,t,r){$5||($5=c3(V8)),t=$5[t]||t,e[t]=r}function Rhe(e,t){var r=[];return ma(V8).map(function(n){for(var s=0;s<yc.length;++s)if(yc[s][1]==n)return yc[s];for(s=0;s<dm.length;++s)if(dm[s][1]==n)return dm[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Ki(V8[n[1]]||n[1],s))}}),lr("DocumentProperties",r.join(""),{xmlns:Nl.o})}function Lhe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&ma(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var i=0;i<yc.length;++i)if(a==yc[i][1])return;for(i=0;i<dm.length;++i)if(a==dm[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=e[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(lr(vD(a),o,{"dt:dt":l}))}}),t&&ma(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var i=t[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(lr(vD(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Nl.o+'">'+s.join("")+"</"+n+">"}function hE(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Bhe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=Mt(8);return i.write_shift(4,n),i.write_shift(4,s),i}function dG(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function fG(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function hG(e,t,r){return t===31?fG(e):dG(e,t,r)}function q8(e,t,r){return hG(e,t,r===!1?0:4)}function $he(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return hG(e,t,0)}function zhe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Uo,""),e.l-s&2&&(e.l+=2)}return r}function Uhe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Uo,"");return r}function Whe(e){var t=e.l,r=U4(e,tG);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=U4(e,nl);return[r,n]}function Hhe(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Whe(e));return r}function DD(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var a=e.read_shift(4),i=e.read_shift(4);n[a]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(Uo,"").replace(Dy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function mG(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Ghe(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function U4(e,t,r){var n=e.read_shift(2),s,a=r||{};if(e.l+=2,t!==PD&&n!==t&&_he.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===PD?n:t){case 2:return s=e.read_shift(2,"i"),a.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return dG(e,n,4).replace(Uo,"");case 31:return fG(e);case 64:return hE(e);case 65:return mG(e);case 71:return Ghe(e);case 80:return q8(e,n,!a.raw).replace(Uo,"");case 81:return $he(e,n).replace(Uo,"");case 4108:return Hhe(e);case 4126:case 4127:return n==4127?zhe(e):Uhe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function OD(e,t){var r=Mt(4),n=Mt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Mt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Bhe(t);break;case 31:case 80:for(n=Mt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return _i([r,n])}function ID(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=e.read_shift(4),f=e.read_shift(4);a[i]=[d,f+r]}a.sort(function(k,b){return k[1]-b[1]});var h={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var g=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,g=!1);break;case 80:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break;case 4108:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break}if((!t||i==0)&&e.l<=a[i][1]&&(g=!1,e.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var x=t[a[i][0]];if(h[x.n]=U4(e,x.t,{raw:!0}),x.p==="version"&&(h[x.n]=String(h[x.n]>>16)+"."+("0000"+String(h[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(h[x.n]){case 0:h[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:tu(o=h[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[x.n])}}else if(a[i][0]===1){if(o=h.CodePage=U4(e,dE),tu(o),l!==-1){var y=e.l;e.l=a[l][1],u=DD(e,o),e.l=y}}else if(a[i][0]===0){if(o===0){l=i,e.l=a[i+1][1];continue}u=DD(e,o)}else{var v=u[a[i][0]],T;switch(e[e.l]){case 65:e.l+=4,T=mG(e);break;case 30:e.l+=4,T=q8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,T=q8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,T=e.read_shift(4,"i");break;case 19:e.l+=4,T=e.read_shift(4);break;case 5:e.l+=4,T=e.read_shift(8,"f");break;case 11:e.l+=4,T=Sa(e,4);break;case 64:e.l+=4,T=Ns(hE(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=T}}return e.l=r+n,h}var gG=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Vhe(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function RD(e,t,r){var n=Mt(8),s=[],a=[],i=8,o=0,l=Mt(8),u=Mt(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!t){u=Mt(8),u.write_shift(4,0),s.unshift(u);var d=[Mt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(l=Mt(8+2*(f.length+1)+(f.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,f.length+1),l.write_shift(0,f,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=_i(d),a.unshift(l),i+=8+l.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(gG.indexOf(e[o][0])>-1||oG.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],g=0;if(t){g=+t[e[o][0]];var x=r[g];if(x.p=="version"&&typeof h=="string"){var y=h.split(".");h=(+y[0]<<16)+(+y[1]||0)}l=OD(x.t,h)}else{var v=Vhe(h);v==-1&&(v=31,h=String(h)),l=OD(v,h)}a.push(l),u=Mt(8),u.write_shift(4,t?g:2+o),s.push(u),i+=8+l.length}var T=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,T),T+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),_i([n].concat(s).concat(a))}function LD(e,t,r){var n=e.content;if(!n)return{};Gi(n,0);var s,a,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==zr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),l=n.read_shift(4));var f=ID(n,t),h={SystemIdentifier:u};for(var g in f)h[g]=f[g];if(h.FMTID=a,s===1)return h;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var x;try{x=ID(n,null)}catch{}for(g in x)h[g]=x[g];return h.FMTID=[a,i],h}function BD(e,t,r,n,s,a){var i=Mt(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,zr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var l=RD(e,r,n);if(o.push(l),s){var u=RD(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return _i(o)}function gf(e,t){return e.read_shift(t),null}function qhe(e,t){t||(t=Mt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Khe(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Sa(e,t){return e.read_shift(t)===1}function Io(e,t){return t||(t=Mt(2)),t.write_shift(2,+!!e),t}function Ra(e){return e.read_shift(2,"u")}function uc(e,t){return t||(t=Mt(2)),t.write_shift(2,e),t}function pG(e,t){return Khe(e,t,Ra)}function Yhe(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function xG(e,t,r){return r||(r=Mt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function S2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return i}function Xhe(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,l={};s&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*i),n&&(e.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function Jhe(e){var t=e.t||"",r=Mt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Mt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return _i(s)}function Om(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function k2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Om(e,n,r)}function eg(e,t,r){if(r.biff>5)return k2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function yG(e,t,r){return r||(r=Mt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Qhe(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Zhe(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Uo,"");return n&&(e.l+=24),s}function eme(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(a>>1,"utf16le").replace(Uo,"");return r+i}function tme(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Zhe(e);case"0303000000000000c000000000000046":return eme(e);default:throw new Error("Unsupported Moniker "+r)}}function pb(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Uo,""):"";return r}function $D(e,t){t||(t=Mt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function rme(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var a,i,o,l,u="",d,f;s&16&&(a=pb(e,r-e.l)),s&128&&(i=pb(e,r-e.l)),(s&257)===257&&(o=pb(e,r-e.l)),(s&257)===1&&(l=tme(e,r-e.l)),s&8&&(u=pb(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=hE(e)),e.l=r;var h=i||o||l||"";h&&u&&(h+="#"+u),h||(h="#"+u),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var g={Target:h};return d&&(g.guid=d),f&&(g.time=f),a&&(g.Tooltip=a),g}function nme(e){var t=Mt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(a==28)n=n.slice(1),$D(n,t);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&$D(s>-1?n.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(t.write_shift(2,l),t.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)t.write_shift(1,n.charCodeAt(r+3*l)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function vG(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function wG(e,t){var r=vG(e);return r[3]=0,r}function ad(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Im(e,t,r,n){return n||(n=Mt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function sme(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function ame(e,t,r){return t===0?"":eg(e,t,r)}function ime(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[s,a,i]}function bG(e){var t=e.read_shift(2),r=uE(e);return[t,r]}function ome(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=S2(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,s}function f3(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function _G(e,t){return t||(t=Mt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function SG(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var lme=SG;function kG(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function cme(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function ume(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function io(e){e.l+=2,e.l+=e.read_shift(2)}var dme={0:io,4:io,5:io,6:io,7:ume,8:io,9:io,10:io,11:io,12:io,13:cme,14:io,15:io,16:io,17:io,18:io,19:io,20:io,21:kG};function fme(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(dme[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function xb(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function mE(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=Mt(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function hme(e,t){return t===0||e.read_shift(2),1200}function mme(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=eg(e,0,r);return e.read_shift(t+n-e.l),s}function gme(e,t){var r=!t||t.biff==8,n=Mt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function pme(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function xme(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=S2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function yme(e,t){var r=!t||t.biff>=8?2:1,n=Mt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function vme(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<r;++i)a.push(Xhe(e));return a.Count=n,a.Unique=s,a}function wme(e,t){var r=Mt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=Jhe(e[s]);var a=_i([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function bme(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function _me(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Sme(e){var t=sme(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function kme(e){return e.read_shift(2),e.read_shift(4)}function zD(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function Tme(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function Cme(){var e=Mt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Eme(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Nme(e){var t=Mt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Ame(){}function jme(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=S2(e,0,r),n}function Pme(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,a=Mt(s);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function Mme(e){var t=ad(e);return t.isst=e.read_shift(4),t}function Fme(e,t,r,n){var s=Mt(10);return Im(e,t,n,s),s.write_shift(4,r),s}function Dme(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=ad(e);r.biff==2&&e.l++;var a=k2(e,n-e.l,r);return s.val=a,s}function Ome(e,t,r,n,s){var a=!s||s.biff==8,i=Mt(8+ +a+(1+a)*r.length);return Im(e,t,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function Ime(e,t,r){var n=e.read_shift(2),s=eg(e,0,r);return[n,s]}function Rme(e,t,r,n){var s=r&&r.biff==5;n||(n=Mt(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var Lme=eg;function UD(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:i,c:l}}}function Bme(e,t){var r=t.biff==8||!t.biff?4:2,n=Mt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function $me(e){var t=e.read_shift(2),r=e.read_shift(2),n=bG(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function zme(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(bG(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function Ume(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function Wme(e,t,r,n){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return s.patternType=She[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function Hme(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Wme(e,t,n.fStyle,r),n}function WD(e,t,r,n){var s=r&&r.biff==5;n||(n=Mt(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Gme(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Vme(e){var t=Mt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function HD(e,t,r){var n=ad(e);(r.biff==2||t==9)&&++e.l;var s=Yhe(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function qme(e,t,r,n,s,a){var i=Mt(8);return Im(e,t,n,i),xG(r,a,i),i}function Kme(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=ad(e),s=mo(e);return n.val=s,n}function Yme(e,t,r,n){var s=Mt(14);return Im(e,t,n,s),Dm(r,s),s}var GD=ame;function Xme(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Om(e,a),o=[];n>e.l;)o.push(k2(e));return[a,s,i,o]}function VD(e,t,r){var n=e.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=ome(e,t-2,r)),a.body=s||e.read_shift(t-2),typeof s=="string"&&(a.Name=s),a}var Jme=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function qD(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),l=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Om(e,i,r);s&32&&(u=Jme[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:fye(e,d,r,o);return{chKey:a,Name:u,itab:l,rgce:f}}function TG(e,t,r){if(r.biff<8)return Qme(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(ime(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function Qme(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=S2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Zme(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),a=Om(e,n,r),i=Om(e,s,r);return[a,i]}function ege(e,t,r){var n=SG(e);e.l++;var s=e.read_shift(1);return t-=8,[hye(e,t,r),s,n]}function KD(e,t,r){var n=lme(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,uye(e,t,r)]}function tge(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function rge(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=eg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},o,i,a]}}function nge(e,t,r){return rge(e,t,r)}function sge(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(f3(e));return r}function age(e){var t=Mt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)_G(e[r],t);return t}function ige(e,t,r){if(r&&r.biff<8)return lge(e,t,r);var n=kG(e),s=fme(e,t-22,n[1]);return{cmo:n,ft:s}}var oge={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function lge(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((oge[n]||wo)(e,t,r)),{cmo:[s,n,a],ft:i}}function cge(e,t,r){var n=e.l,s="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:i=Qhe(e,6,r);var o=e.read_shift(2);e.read_shift(2),Ra(e,2);var l=e.read_shift(2);e.l+=l;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Om(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function uge(e,t){var r=f3(e);e.l+=16;var n=rme(e,t-24);return[r,n]}function dge(e){var t=Mt(24),r=Xs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return _i([t,nme(e[1])])}function fge(e,t){e.read_shift(2);var r=f3(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Uo,""),[r,n]}function hge(e){var t=e[1].Tooltip,r=Mt(10+2*(t.length+1));r.write_shift(2,2048);var n=Xs(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function mge(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=MD[r]||r,r=e.read_shift(2),t[1]=MD[r]||r,t}function gge(e){return e||(e=Mt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function pge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(wG(e));return r}function xge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(wG(e));return r}function yge(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function CG(e,t,r){if(!r.cellStyles)return wo(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function vge(e,t){var r=Mt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function wge(e,t){var r={};return t<32||(e.l+=16,r.header=mo(e),r.footer=mo(e),e.l+=2),r}function bge(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function _ge(e){for(var t=Mt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Sge=ad,kge=pG,Tge=k2;function Cge(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function Ege(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=ad(e);++e.l;var s=eg(e,t-7,r);return n.t="str",n.val=s,n}function Nge(e){var t=ad(e);++e.l;var r=mo(e);return t.t="n",t.val=r,t}function Age(e,t,r){var n=Mt(15);return N2(n,e,t),n.write_shift(8,r,"f"),n}function jge(e){var t=ad(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Pge(e,t,r){var n=Mt(9);return N2(n,e,t),n.write_shift(2,r),n}function Mge(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Fge(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Dge(e,t,r){var n=e.l+t,s=ad(e),a=e.read_shift(2),i=Om(e,a,r);return e.l=n,s.t="str",s.val=i,s}var Oge=[2,3,48,49,131,139,140,245],K8=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=c3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=zf(1);switch(l.type){case"base64":d=Ml(Ll(o));break;case"binary":d=Ml(o);break;case"buffer":case"array":d=o;break}Gi(d,0);var f=d.read_shift(1),h=!!(f&136),g=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:g=!0,h=!0;break;case 49:g=!0,h=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,v=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(v=d.read_shift(2));var T=d.read_shift(2),k=l.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var b=[],E={},N=Math.min(d.length,f==2?521:v-10-(g?264:0)),P=x?32:11;d.l<N&&d[d.l]!=13;)switch(E={},E.name=Cv.utils.decode(k,d.slice(d.l,d.l+P)).replace(/[\u0000\r\n].*$/g,""),d.l+=P,E.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(E.offset=d.read_shift(4)),E.len=d.read_shift(1),f==2&&(E.offset=d.read_shift(2)),E.dec=d.read_shift(1),E.name.length&&b.push(E),f!=2&&(d.l+=x?13:14),E.type){case"B":(!g||E.len!=8)&&l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+E.name+":"+E.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+E.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var M=0,j=0;for(u[0]=[],j=0;j!=b.length;++j)u[0][j]=b[j].name;for(;y-- >0;){if(d[d.l]===42){d.l+=T;continue}for(++d.l,u[++M]=[],j=0,j=0;j!=b.length;++j){var A=d.slice(d.l,d.l+b[j].len);d.l+=b[j].len,Gi(A,0);var D=Cv.utils.decode(k,A);switch(b[j].type){case"C":D.trim().length&&(u[M][j]=D.replace(/\s+$/,""));break;case"D":D.length===8?u[M][j]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):u[M][j]=D;break;case"F":u[M][j]=parseFloat(D.trim());break;case"+":case"I":u[M][j]=x?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":u[M][j]=!0;break;case"N":case"F":u[M][j]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[M][j]="##MEMO##"+(x?parseInt(D.trim(),10):A.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(u[M][j]=+D||0);break;case"@":u[M][j]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":u[M][j]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":u[M][j]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[M][j]=-A.read_shift(-8,"f");break;case"B":if(g&&b[j].len==8){u[M][j]=A.read_shift(8,"f");break}case"G":case"P":A.l+=b[j].len;break;case"0":if(b[j].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[j].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=b,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=S1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(o,l){try{return th(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&tu(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=dl(),f=G4(o,{header:1,raw:!0,cellDates:!0}),h=f[0],g=f.slice(1),x=o["!cols"]||[],y=0,v=0,T=0,k=1;for(y=0;y<h.length;++y){if(((x[y]||{}).DBF||{}).name){h[y]=x[y].DBF.name,++T;continue}if(h[y]!=null){if(++T,typeof h[y]=="number"&&(h[y]=h[y].toString(10)),typeof h[y]!="string")throw new Error("DBF Invalid column name "+h[y]+" |"+typeof h[y]+"|");if(h.indexOf(h[y])!==y){for(v=0;v<1024;++v)if(h.indexOf(h[y]+"_"+v)==-1){h[y]+="_"+v;break}}}}var b=Ln(o["!ref"]),E=[],N=[],P=[];for(y=0;y<=b.e.c-b.s.c;++y){var M="",j="",A=0,D=[];for(v=0;v<g.length;++v)g[v][y]!=null&&D.push(g[v][y]);if(D.length==0||h[y]==null){E[y]="?";continue}for(v=0;v<D.length;++v){switch(typeof D[v]){case"number":j="B";break;case"string":j="C";break;case"boolean":j="L";break;case"object":j=D[v]instanceof Date?"D":"C";break;default:j="C"}A=Math.max(A,String(D[v]).length),M=M&&M!=j?"C":j}A>250&&(A=250),j=((x[y]||{}).DBF||{}).type,j=="C"&&x[y].DBF.len>A&&(A=x[y].DBF.len),M=="B"&&j=="N"&&(M="N",P[y]=x[y].DBF.dec,A=x[y].DBF.len),N[y]=M=="C"||j=="N"?A:a[M]||0,k+=N[y],E[y]=M}var L=d.next(32);for(L.write_shift(4,318902576),L.write_shift(4,g.length),L.write_shift(2,296+32*T),L.write_shift(2,k),y=0;y<4;++y)L.write_shift(4,0);for(L.write_shift(4,0|(+t[gH]||3)<<8),y=0,v=0;y<h.length;++y)if(h[y]!=null){var G=d.next(32),X=(h[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);G.write_shift(1,X,"sbcs"),G.write_shift(1,E[y]=="?"?"C":E[y],"sbcs"),G.write_shift(4,v),G.write_shift(1,N[y]||a[E[y]]||0),G.write_shift(1,P[y]||0),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(1,0),G.write_shift(4,0),G.write_shift(4,0),v+=N[y]||a[E[y]]||0}var se=d.next(264);for(se.write_shift(4,13),y=0;y<65;++y)se.write_shift(4,0);for(y=0;y<g.length;++y){var Q=d.next(k);for(Q.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(E[v]){case"L":Q.write_shift(1,g[y][v]==null?63:g[y][v]?84:70);break;case"B":Q.write_shift(8,g[y][v]||0,"f");break;case"N":var re="0";for(typeof g[y][v]=="number"&&(re=g[y][v].toFixed(P[v]||0)),T=0;T<N[v]-re.length;++T)Q.write_shift(1,32);Q.write_shift(1,re,"sbcs");break;case"D":g[y][v]?(Q.write_shift(4,("0000"+g[y][v].getFullYear()).slice(-4),"sbcs"),Q.write_shift(2,("00"+(g[y][v].getMonth()+1)).slice(-2),"sbcs"),Q.write_shift(2,("00"+g[y][v].getDate()).slice(-2),"sbcs")):Q.write_shift(8,"00000000","sbcs");break;case"C":var B=String(g[y][v]!=null?g[y][v]:"").slice(0,N[v]);for(Q.write_shift(1,B,"sbcs"),T=0;T<N[v]-B.length;++T)Q.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}})(),EG=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ma(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,g){var x=e[g];return typeof x=="number"?aD(x):x},n=function(h,g,x){var y=g.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return y==59?h:aD(y)};e["|"]=254;function s(h,g){switch(g.type){case"base64":return a(Ll(h),g);case"binary":return a(h,g);case"buffer":return a(Sn&&Buffer.isBuffer(h)?h.toString("binary"):eh(h),g);case"array":return a(Fm(h),g)}throw new Error("Unrecognized type "+g.type)}function a(h,g){var x=h.split(/[\n\r]+/),y=-1,v=-1,T=0,k=0,b=[],E=[],N=null,P={},M=[],j=[],A=[],D=0,L;for(+g.codepage>=0&&tu(+g.codepage);T!==x.length;++T){D=0;var G=x[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),X=G.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),se=X[0],Q;if(G.length>0)switch(se){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":X[1].charAt(0)=="P"&&E.push(G.slice(3).replace(/;;/g,";"));break;case"C":var re=!1,B=!1,V=!1,R=!1,H=-1,z=-1;for(k=1;k<X.length;++k)switch(X[k].charAt(0)){case"A":break;case"X":v=parseInt(X[k].slice(1))-1,B=!0;break;case"Y":for(y=parseInt(X[k].slice(1))-1,B||(v=0),L=b.length;L<=y;++L)b[L]=[];break;case"K":Q=X[k].slice(1),Q.charAt(0)==='"'?Q=Q.slice(1,Q.length-1):Q==="TRUE"?Q=!0:Q==="FALSE"?Q=!1:isNaN(su(Q))?isNaN(Vp(Q).getDate())||(Q=Ns(Q)):(Q=su(Q),N!==null&&b1(N)&&(Q=d3(Q))),re=!0;break;case"E":R=!0;var I=Mp(X[k].slice(1),{r:y,c:v});b[y][v]=[b[y][v],I];break;case"S":V=!0,b[y][v]=[b[y][v],"S5S"];break;case"G":break;case"R":H=parseInt(X[k].slice(1))-1;break;case"C":z=parseInt(X[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}if(re&&(b[y][v]&&b[y][v].length==2?b[y][v][0]=Q:b[y][v]=Q,N=null),V){if(R)throw new Error("SYLK shared formula cannot have own formula");var W=H>-1&&b[H][z];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");b[y][v][1]=GG(W[1],{r:y-H,c:v-z})}break;case"F":var K=0;for(k=1;k<X.length;++k)switch(X[k].charAt(0)){case"X":v=parseInt(X[k].slice(1))-1,++K;break;case"Y":for(y=parseInt(X[k].slice(1))-1,L=b.length;L<=y;++L)b[L]=[];break;case"M":D=parseInt(X[k].slice(1))/20;break;case"F":break;case"G":break;case"P":N=E[parseInt(X[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=X[k].slice(1).split(" "),L=parseInt(A[0],10);L<=parseInt(A[1],10);++L)D=parseInt(A[2],10),j[L-1]=D===0?{hidden:!0}:{wch:D},Uf(j[L-1]);break;case"C":v=parseInt(X[k].slice(1))-1,j[v]||(j[v]={});break;case"R":y=parseInt(X[k].slice(1))-1,M[y]||(M[y]={}),D>0?(M[y].hpt=D,M[y].hpx=Kp(D)):D===0&&(M[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}K<1&&(N=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}}return M.length>0&&(P["!rows"]=M),j.length>0&&(P["!cols"]=j),g&&g.sheetRows&&(b=b.slice(0,g.sheetRows)),[b,P]}function i(h,g){var x=s(h,g),y=x[0],v=x[1],T=S1(y,g);return ma(v).forEach(function(k){T[k]=v[k]}),T}function o(h,g){return th(i(h,g),g)}function l(h,g,x,y){var v="C;Y"+(x+1)+";X"+(y+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+wE(h.f,{r:x,c:y}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,g){g.forEach(function(x,y){var v="F;W"+(y+1)+" "+(y+1)+" ";x.hidden?v+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=Dv(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=Ov(x.wpx)),typeof x.wch=="number"&&(v+=Math.round(x.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,g){g.forEach(function(x,y){var v="F;";x.hidden?v+="M0;":x.hpt?v+="M"+20*x.hpt+";":x.hpx&&(v+="M"+20*Iv(x.hpx)+";"),v.length>2&&h.push(v+"R"+(y+1))})}function f(h,g){var x=["ID;PWXL;N;E"],y=[],v=Ln(h["!ref"]),T,k=Array.isArray(h),b=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),h["!cols"]&&u(x,h["!cols"]),h["!rows"]&&d(x,h["!rows"]),x.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var E=v.s.r;E<=v.e.r;++E)for(var N=v.s.c;N<=v.e.c;++N){var P=Jr({r:E,c:N});T=k?(h[E]||[])[N]:h[P],!(!T||T.v==null&&(!T.f||T.F))&&y.push(l(T,h,E,N))}return x.join(b)+b+y.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:i,from_sheet:f}})(),NG=(function(){function e(a,i){switch(i.type){case"base64":return t(Ll(a),i);case"binary":return t(a,i);case"buffer":return t(Sn&&Buffer.isBuffer(a)?a.toString("binary"):eh(a),i);case"array":return t(Fm(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++l]=[],u=0;continue}if(!(l<0)){var h=o[d].trim().split(","),g=h[0],x=h[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){f[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[l][u]=!0:y==="FALSE"?f[l][u]=!1:isNaN(su(x))?isNaN(Vp(x).getDate())?f[l][u]=x:f[l][u]=Ns(x):f[l][u]=su(x),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(a,i){return S1(e(a,i),i)}function n(a,i){return th(r(a,i),i)}var s=(function(){var a=function(l,u,d,f,h){l.push(u),l.push(d+","+f),l.push('"'+h.replace(/"/g,'""')+'"')},i=function(l,u,d,f){l.push(u+","+d),l.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(l){var u=[],d=Ln(l["!ref"]),f,h=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var y=Jr({r:g,c:x});if(f=h?(l[g]||[])[x]:l[y],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Sc(f.z||Yr[14],si(Ns(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var T=`\r
`,k=u.join(T);return k}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),AG=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var g=f.split(`
`),x=-1,y=-1,v=0,T=[];v!==g.length;++v){var k=g[v].trim().split(":");if(k[0]==="cell"){var b=Xs(k[1]);if(T.length<=b.r)for(x=T.length;x<=b.r;++x)T[x]||(T[x]=[]);switch(x=b.r,y=b.c,k[2]){case"t":T[x][y]=e(k[3]);break;case"v":T[x][y]=+k[3];break;case"vtf":var E=k[k.length-1];case"vtc":switch(k[3]){case"nl":T[x][y]=!!+k[4];break;default:T[x][y]=+k[4];break}k[2]=="vtf"&&(T[x][y]=[T[x][y],E])}}}return h&&h.sheetRows&&(T=T.slice(0,h.sheetRows)),T}function n(f,h){return S1(r(f,h),h)}function s(f,h){return th(n(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],g=[],x,y="",v=fl(f["!ref"]),T=Array.isArray(f),k=v.s.r;k<=v.e.r;++k)for(var b=v.s.c;b<=v.e.c;++b)if(y=Jr({r:k,c:b}),x=T?(f[k]||[])[b]:f[y],!(!x||x.v==null||x.t==="z")){switch(g=["cell",y,"t"],x.t){case"s":case"str":g.push(t(x.v));break;case"n":x.f?(g[2]="vtf",g[3]="n",g[4]=x.v,g[5]=t(x.f)):(g[2]="v",g[3]=x.v);break;case"b":g[2]="vt"+(x.f?"f":"c"),g[3]="nl",g[4]=x.v?"1":"0",g[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var E=si(Ns(x.v));g[2]="vtc",g[3]="nd",g[4]=""+E,g[5]=x.w||Sc(x.z||Yr[14],E);break;case"e":continue}h.push(g.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[a,i,o,i,u(f),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),qp=(function(){function e(d,f,h,g,x){x.raw?f[h][g]=d:d===""||(d==="TRUE"?f[h][g]=!0:d==="FALSE"?f[h][g]=!1:isNaN(su(d))?isNaN(Vp(d).getDate())?f[h][g]=d:f[h][g]=Ns(d):f[h][g]=su(d))}function t(d,f){var h=f||{},g=[];if(!d||d.length===0)return g;for(var x=d.split(/[\r\n]/),y=x.length-1;y>=0&&x[y].length===0;)--y;for(var v=10,T=0,k=0;k<=y;++k)T=x[k].indexOf(" "),T==-1?T=x[k].length:T++,v=Math.max(v,T);for(k=0;k<=y;++k){g[k]=[];var b=0;for(e(x[k].slice(0,v).trim(),g,k,b,h),b=1;b<=(x[k].length-v)/10+1;++b)e(x[k].slice(v+(b-1)*10,v+b*10).trim(),g,k,b,h)}return h.sheetRows&&(g=g.slice(0,h.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var f={},h=!1,g=0,x=0;g<d.length;++g)(x=d.charCodeAt(g))==34?h=!h:!h&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g]);if(!x.length){f=n;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&x.push([f[g],g])}return x.sort(function(y,v){return y[0]-v[0]||n[y[1]]-n[v[1]]}),r[x.pop()[1]]||44}function a(d,f){var h=f||{},g="",x=h.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):h&&h.FS?g=h.FS:g=s(d.slice(0,1024));var v=0,T=0,k=0,b=0,E=0,N=g.charCodeAt(0),P=!1,M=0,j=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var A=h.dateNF!=null?bfe(h.dateNF):null;function D(){var L=d.slice(b,E),G={};if(L.charAt(0)=='"'&&L.charAt(L.length-1)=='"'&&(L=L.slice(1,-1).replace(/""/g,'"')),L.length===0)G.t="z";else if(h.raw)G.t="s",G.v=L;else if(L.trim().length===0)G.t="s",G.v=L;else if(L.charCodeAt(0)==61)L.charCodeAt(1)==34&&L.charCodeAt(L.length-1)==34?(G.t="s",G.v=L.slice(2,-1).replace(/""/g,'"')):X1e(L)?(G.t="n",G.f=L.slice(1)):(G.t="s",G.v=L);else if(L=="TRUE")G.t="b",G.v=!0;else if(L=="FALSE")G.t="b",G.v=!1;else if(!isNaN(k=su(L)))G.t="n",h.cellText!==!1&&(G.w=L),G.v=k;else if(!isNaN(Vp(L).getDate())||A&&L.match(A)){G.z=h.dateNF||Yr[14];var X=0;A&&L.match(A)&&(L=_fe(L,h.dateNF,L.match(A)||[]),X=1),h.cellDates?(G.t="d",G.v=Ns(L,X)):(G.t="n",G.v=si(Ns(L,X))),h.cellText!==!1&&(G.w=Sc(G.z,G.v instanceof Date?si(G.v):G.v)),h.cellNF||delete G.z}else G.t="s",G.v=L;if(G.t=="z"||(h.dense?(x[v]||(x[v]=[]),x[v][T]=G):x[Jr({c:T,r:v})]=G),b=E+1,j=d.charCodeAt(b),y.e.c<T&&(y.e.c=T),y.e.r<v&&(y.e.r=v),M==N)++T;else if(T=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;E<d.length;++E)switch(M=d.charCodeAt(E)){case 34:j===34&&(P=!P);break;case N:case 10:case 13:if(!P&&D())break e;break}return E-b>0&&D(),x["!ref"]=vn(y),x}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):S1(t(d,f),f)}function o(d,f){var h="",g=f.type=="string"?[0,0,0,0]:NE(d,f);switch(f.type){case"base64":h=Ll(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Cv<"u"||(h=Sn&&Buffer.isBuffer(d)?d.toString("binary"):eh(d));break;case"array":h=Fm(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return g[0]==239&&g[1]==187&&g[2]==191?h=us(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=us(h):f.type=="binary"&&typeof Cv<"u",h.slice(0,19)=="socialcalc:version:"?AG.to_sheet(f.type=="string"?h:us(h),f):i(h,f)}function l(d,f){return th(o(d,f),f)}function u(d){for(var f=[],h=Ln(d["!ref"]),g,x=Array.isArray(d),y=h.s.r;y<=h.e.r;++y){for(var v=[],T=h.s.c;T<=h.e.c;++T){var k=Jr({r:y,c:T});if(g=x?(d[y]||[])[T]:d[k],!g||g.v==null){v.push("          ");continue}for(var b=(g.w||(d0(g),g.w)||"").slice(0,10);b.length<10;)b+=" ";v.push(b+(T===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}})();function Ige(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=EG.to_workbook(e,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return qp.to_workbook(e,t)}}var fm=(function(){function e(I,W,K){if(I){Gi(I,I.l||0);for(var ee=K.Enum||H;I.l<I.length;){var oe=I.read_shift(2),Z=ee[oe]||ee[65535],le=I.read_shift(2),ue=I.l+le,de=Z.f&&Z.f(I,le,K);if(I.l=ue,W(de,Z,oe))return}}}function t(I,W){switch(W.type){case"base64":return r(Ml(Ll(I)),W);case"binary":return r(Ml(I),W);case"buffer":case"array":return r(I,W)}throw"Unsupported type "+W.type}function r(I,W){if(!I)return I;var K=W||{},ee=K.dense?[]:{},oe="Sheet1",Z="",le=0,ue={},de=[],Te=[],ie={s:{r:0,c:0},e:{r:0,c:0}},pe=K.sheetRows||0;if(I[2]==0&&(I[3]==8||I[3]==9)&&I.length>=16&&I[14]==5&&I[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(I[2]==2)K.Enum=H,e(I,function(Ve,Dt,lt){switch(lt){case 0:K.vers=Ve,Ve>=4096&&(K.qpro=!0);break;case 6:ie=Ve;break;case 204:Ve&&(Z=Ve);break;case 222:Z=Ve;break;case 15:case 51:K.qpro||(Ve[1].v=Ve[1].v.slice(1));case 13:case 14:case 16:lt==14&&(Ve[2]&112)==112&&(Ve[2]&15)>1&&(Ve[2]&15)<15&&(Ve[1].z=K.dateNF||Yr[14],K.cellDates&&(Ve[1].t="d",Ve[1].v=d3(Ve[1].v))),K.qpro&&Ve[3]>le&&(ee["!ref"]=vn(ie),ue[oe]=ee,de.push(oe),ee=K.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},le=Ve[3],oe=Z||"Sheet"+(le+1),Z="");var At=K.dense?(ee[Ve[0].r]||[])[Ve[0].c]:ee[Jr(Ve[0])];if(At){At.t=Ve[1].t,At.v=Ve[1].v,Ve[1].z!=null&&(At.z=Ve[1].z),Ve[1].f!=null&&(At.f=Ve[1].f);break}K.dense?(ee[Ve[0].r]||(ee[Ve[0].r]=[]),ee[Ve[0].r][Ve[0].c]=Ve[1]):ee[Jr(Ve[0])]=Ve[1];break}},K);else if(I[2]==26||I[2]==14)K.Enum=z,I[2]==14&&(K.qpro=!0,I.l=0),e(I,function(Ve,Dt,lt){switch(lt){case 204:oe=Ve;break;case 22:Ve[1].v=Ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ve[3]>le&&(ee["!ref"]=vn(ie),ue[oe]=ee,de.push(oe),ee=K.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},le=Ve[3],oe="Sheet"+(le+1)),pe>0&&Ve[0].r>=pe)break;K.dense?(ee[Ve[0].r]||(ee[Ve[0].r]=[]),ee[Ve[0].r][Ve[0].c]=Ve[1]):ee[Jr(Ve[0])]=Ve[1],ie.e.c<Ve[0].c&&(ie.e.c=Ve[0].c),ie.e.r<Ve[0].r&&(ie.e.r=Ve[0].r);break;case 27:Ve[14e3]&&(Te[Ve[14e3][0]]=Ve[14e3][1]);break;case 1537:Te[Ve[0]]=Ve[1],Ve[0]==le&&(oe=Ve[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+I[2]);if(ee["!ref"]=vn(ie),ue[Z||oe]=ee,de.push(Z||oe),!Te.length)return{SheetNames:de,Sheets:ue};for(var Ae={},Me=[],Je=0;Je<Te.length;++Je)ue[de[Je]]?(Me.push(Te[Je]||de[Je]),Ae[Te[Je]]=ue[Te[Je]]||ue[de[Je]]):(Me.push(Te[Je]),Ae[Te[Je]]={"!ref":"A1"});return{SheetNames:Me,Sheets:Ae}}function n(I,W){var K=W||{};if(+K.codepage>=0&&tu(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=dl(),oe=Ln(I["!ref"]),Z=Array.isArray(I),le=[];cr(ee,0,a(1030)),cr(ee,6,l(oe));for(var ue=Math.min(oe.e.r,8191),de=oe.s.r;de<=ue;++de)for(var Te=Na(de),ie=oe.s.c;ie<=oe.e.c;++ie){de===oe.s.r&&(le[ie]=Ys(ie));var pe=le[ie]+Te,Ae=Z?(I[de]||[])[ie]:I[pe];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")(Ae.v|0)==Ae.v&&Ae.v>=-32768&&Ae.v<=32767?cr(ee,13,g(de,ie,Ae.v)):cr(ee,14,y(de,ie,Ae.v));else{var Me=d0(Ae);cr(ee,15,f(de,ie,Me.slice(0,239)))}}return cr(ee,1),ee.end()}function s(I,W){var K=W||{};if(+K.codepage>=0&&tu(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=dl();cr(ee,0,i(I));for(var oe=0,Z=0;oe<I.SheetNames.length;++oe)(I.Sheets[I.SheetNames[oe]]||{})["!ref"]&&cr(ee,27,R(I.SheetNames[oe],Z++));var le=0;for(oe=0;oe<I.SheetNames.length;++oe){var ue=I.Sheets[I.SheetNames[oe]];if(!(!ue||!ue["!ref"])){for(var de=Ln(ue["!ref"]),Te=Array.isArray(ue),ie=[],pe=Math.min(de.e.r,8191),Ae=de.s.r;Ae<=pe;++Ae)for(var Me=Na(Ae),Je=de.s.c;Je<=de.e.c;++Je){Ae===de.s.r&&(ie[Je]=Ys(Je));var Ve=ie[Je]+Me,Dt=Te?(ue[Ae]||[])[Je]:ue[Ve];if(!(!Dt||Dt.t=="z"))if(Dt.t=="n")cr(ee,23,D(Ae,Je,le,Dt.v));else{var lt=d0(Dt);cr(ee,22,M(Ae,Je,le,lt.slice(0,239)))}}++le}}return cr(ee,1),ee.end()}function a(I){var W=Mt(2);return W.write_shift(2,I),W}function i(I){var W=Mt(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var K=0,ee=0,oe=0,Z=0;Z<I.SheetNames.length;++Z){var le=I.SheetNames[Z],ue=I.Sheets[le];if(!(!ue||!ue["!ref"])){++oe;var de=fl(ue["!ref"]);K<de.e.r&&(K=de.e.r),ee<de.e.c&&(ee=de.e.c)}}return K>8191&&(K=8191),W.write_shift(2,K),W.write_shift(1,oe),W.write_shift(1,ee),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(I,W,K){var ee={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&K.qpro?(ee.s.c=I.read_shift(1),I.l++,ee.s.r=I.read_shift(2),ee.e.c=I.read_shift(1),I.l++,ee.e.r=I.read_shift(2),ee):(ee.s.c=I.read_shift(2),ee.s.r=I.read_shift(2),W==12&&K.qpro&&(I.l+=2),ee.e.c=I.read_shift(2),ee.e.r=I.read_shift(2),W==12&&K.qpro&&(I.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function l(I){var W=Mt(8);return W.write_shift(2,I.s.c),W.write_shift(2,I.s.r),W.write_shift(2,I.e.c),W.write_shift(2,I.e.r),W}function u(I,W,K){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(ee[0].c=I.read_shift(1),ee[3]=I.read_shift(1),ee[0].r=I.read_shift(2),I.l+=2):(ee[2]=I.read_shift(1),ee[0].c=I.read_shift(2),ee[0].r=I.read_shift(2)),ee}function d(I,W,K){var ee=I.l+W,oe=u(I,W,K);if(oe[1].t="s",K.vers==20768){I.l++;var Z=I.read_shift(1);return oe[1].v=I.read_shift(Z,"utf8"),oe}return K.qpro&&I.l++,oe[1].v=I.read_shift(ee-I.l,"cstr"),oe}function f(I,W,K){var ee=Mt(7+K.length);ee.write_shift(1,255),ee.write_shift(2,W),ee.write_shift(2,I),ee.write_shift(1,39);for(var oe=0;oe<ee.length;++oe){var Z=K.charCodeAt(oe);ee.write_shift(1,Z>=128?95:Z)}return ee.write_shift(1,0),ee}function h(I,W,K){var ee=u(I,W,K);return ee[1].v=I.read_shift(2,"i"),ee}function g(I,W,K){var ee=Mt(7);return ee.write_shift(1,255),ee.write_shift(2,W),ee.write_shift(2,I),ee.write_shift(2,K,"i"),ee}function x(I,W,K){var ee=u(I,W,K);return ee[1].v=I.read_shift(8,"f"),ee}function y(I,W,K){var ee=Mt(13);return ee.write_shift(1,255),ee.write_shift(2,W),ee.write_shift(2,I),ee.write_shift(8,K,"f"),ee}function v(I,W,K){var ee=I.l+W,oe=u(I,W,K);if(oe[1].v=I.read_shift(8,"f"),K.qpro)I.l=ee;else{var Z=I.read_shift(2);E(I.slice(I.l,I.l+Z),oe),I.l+=Z}return oe}function T(I,W,K){var ee=W&32768;return W&=-32769,W=(ee?I:0)+(W>=8192?W-16384:W),(ee?"":"$")+(K?Ys(W):Na(W))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function E(I,W){Gi(I,0);for(var K=[],ee=0,oe="",Z="",le="",ue="";I.l<I.length;){var de=I[I.l++];switch(de){case 0:K.push(I.read_shift(8,"f"));break;case 1:Z=T(W[0].c,I.read_shift(2),!0),oe=T(W[0].r,I.read_shift(2),!1),K.push(Z+oe);break;case 2:{var Te=T(W[0].c,I.read_shift(2),!0),ie=T(W[0].r,I.read_shift(2),!1);Z=T(W[0].c,I.read_shift(2),!0),oe=T(W[0].r,I.read_shift(2),!1),K.push(Te+ie+":"+Z+oe)}break;case 3:if(I.l<I.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(I.read_shift(2));break;case 6:{for(var pe="";de=I[I.l++];)pe+=String.fromCharCode(de);K.push('"'+pe.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:ue=K.pop(),le=K.pop(),K.push(["AND","OR"][de-20]+"("+le+","+ue+")");break;default:if(de<32&&b[de])ue=K.pop(),le=K.pop(),K.push(le+b[de]+ue);else if(k[de]){if(ee=k[de][1],ee==69&&(ee=I[I.l++]),ee>K.length){console.error("WK1 bad formula parse 0x"+de.toString(16)+":|"+K.join("|")+"|");return}var Ae=K.slice(-ee);K.length-=ee,K.push(k[de][0]+"("+Ae.join(",")+")")}else return de<=7?console.error("WK1 invalid opcode "+de.toString(16)):de<=24?console.error("WK1 unsupported op "+de.toString(16)):de<=30?console.error("WK1 invalid opcode "+de.toString(16)):de<=115?console.error("WK1 unsupported function opcode "+de.toString(16)):console.error("WK1 unrecognized opcode "+de.toString(16))}}K.length==1?W[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function N(I){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=I.read_shift(2),W[3]=I[I.l++],W[0].c=I[I.l++],W}function P(I,W){var K=N(I);return K[1].t="s",K[1].v=I.read_shift(W-4,"cstr"),K}function M(I,W,K,ee){var oe=Mt(6+ee.length);oe.write_shift(2,I),oe.write_shift(1,K),oe.write_shift(1,W),oe.write_shift(1,39);for(var Z=0;Z<ee.length;++Z){var le=ee.charCodeAt(Z);oe.write_shift(1,le>=128?95:le)}return oe.write_shift(1,0),oe}function j(I,W){var K=N(I);K[1].v=I.read_shift(2);var ee=K[1].v>>1;if(K[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return K[1].v=ee,K}function A(I,W){var K=N(I),ee=I.read_shift(4),oe=I.read_shift(4),Z=I.read_shift(2);if(Z==65535)return ee===0&&oe===3221225472?(K[1].t="e",K[1].v=15):ee===0&&oe===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var le=Z&32768;return Z=(Z&32767)-16446,K[1].v=(1-le*2)*(oe*Math.pow(2,Z+32)+ee*Math.pow(2,Z)),K}function D(I,W,K,ee){var oe=Mt(14);if(oe.write_shift(2,I),oe.write_shift(1,K),oe.write_shift(1,W),ee==0)return oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(2,65535),oe;var Z=0,le=0,ue=0,de=0;return ee<0&&(Z=1,ee=-ee),le=Math.log2(ee)|0,ee/=Math.pow(2,le-31),de=ee>>>0,(de&2147483648)==0&&(ee/=2,++le,de=ee>>>0),ee-=de,de|=2147483648,de>>>=0,ee*=Math.pow(2,32),ue=ee>>>0,oe.write_shift(4,ue),oe.write_shift(4,de),le+=16383+(Z?32768:0),oe.write_shift(2,le),oe}function L(I,W){var K=A(I);return I.l+=W-14,K}function G(I,W){var K=N(I),ee=I.read_shift(4);return K[1].v=ee>>6,K}function X(I,W){var K=N(I),ee=I.read_shift(8,"f");return K[1].v=ee,K}function se(I,W){var K=X(I);return I.l+=W-10,K}function Q(I,W){return I[I.l+W-1]==0?I.read_shift(W,"cstr"):""}function re(I,W){var K=I[I.l++];K>W-1&&(K=W-1);for(var ee="";ee.length<K;)ee+=String.fromCharCode(I[I.l++]);return ee}function B(I,W,K){if(!(!K.qpro||W<21)){var ee=I.read_shift(1);I.l+=17,I.l+=1,I.l+=2;var oe=I.read_shift(W-21,"cstr");return[ee,oe]}}function V(I,W){for(var K={},ee=I.l+W;I.l<ee;){var oe=I.read_shift(2);if(oe==14e3){for(K[oe]=[0,""],K[oe][0]=I.read_shift(2);I[I.l];)K[oe][1]+=String.fromCharCode(I[I.l]),I.l++;I.l++}}return K}function R(I,W){var K=Mt(5+I.length);K.write_shift(2,14e3),K.write_shift(2,W);for(var ee=0;ee<I.length;++ee){var oe=I.charCodeAt(ee);K[K.l++]=oe>127?95:oe}return K[K.l++]=0,K}var H={0:{n:"BOF",f:Ra},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Q},222:{n:"SHEETNAMELP",f:re},65535:{n:""}},z={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:j},25:{n:"FORMULA19",f:L},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:G},38:{n:"??"},39:{n:"NUMBER27",f:X},40:{n:"FORMULA28",f:se},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Q},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:B},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function Rge(e){var t={},r=e.match(bo),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=en(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=GC[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}var Lge=(function(){var e=Av("t"),t=Av("rPr");function r(a){var i=a.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:In(i[1])},l=a.match(t);return l&&(o.s=Rge(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),Bge=(function(){var t=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}})(),$ge=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,zge=/<(?:\w+:)?r>/,Uge=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function gE(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=In(us(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=us(e),r&&(n.h=tE(n.t))):e.match(zge)&&(n.r=us(e),n.t=In(us((e.replace(Uge,"").match($ge)||[]).join("").replace(bo,""))),r&&(n.h=Bge(Lge(n.r)))),n):{t:""}}var Wge=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Hge=/<(?:\w+:)?(?:si|sstItem)>/g,Gge=/<\/(?:\w+:)?(?:si|sstItem)>/;function Vge(e,t){var r=[],n="";if(!e)return r;var s=e.match(Wge);if(s){n=s[2].replace(Hge,"").split(Gge);for(var a=0;a!=n.length;++a){var i=gE(n[a].trim(),t);i!=null&&(r[r.length]=i)}s=en(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var qge=/^\s|\s$|[\t\n\r]/;function jG(e,t){if(!t.bookSST)return"";var r=[ja];r[r.length]=lr("sst",null,{xmlns:Ym[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(qge)&&(a+=' xml:space="preserve"'),a+=">"+ss(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Kge(e){return[e.read_shift(4),e.read_shift(4)]}function Yge(e,t){var r=[],n=!1;return w0(e,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Xge(e,t){return t||(t=Mt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Jge=ohe;function Qge(e){var t=dl();Ht(t,159,Xge(e));for(var r=0;r<e.length;++r)Ht(t,19,Jge(e[r]));return Ht(t,160),t.end()}function PG(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function t0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Zge(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=t0(e,4),t.U=t0(e,4),t.W=t0(e,4),t}function epe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function tpe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(epe(e));return t}function rpe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function npe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=t0(e,4),t.U=t0(e,4),t.W=t0(e,4),t}function spe(e){var t=npe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function MG(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function FG(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function ape(e){var t=t0(e);switch(t.Minor){case 2:return[t.Minor,ipe(e)];case 3:return[t.Minor,ope()];case 4:return[t.Minor,lpe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function ipe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=MG(e,r),s=FG(e,e.length-e.l);return{t:"Std",h:n,v:s}}function ope(){throw new Error("File is password-protected: ECMA-376 Extensible")}function lpe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(bo,function(a){var i=en(a);switch(sd(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function cpe(e,t){var r={},n=r.EncryptionVersionInfo=t0(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=MG(e,s),t-=s,r.EncryptionVerifier=FG(e,t),r}function upe(e){var t={},r=t.EncryptionVersionInfo=t0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function pE(e){var t=0,r,n=PG(e),s=n.length+1,a,i,o,l,u;for(r=zf(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(t&16384)===0?0:1,l=t<<1&32767,u=o|l,t=u^i;return t^52811}var DG=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=t[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=PG(i),l=a(o),u=o.length,d=zf(16),f=0;f!=16;++f)d[f]=0;var h,g,x;for((u&1)===1&&(h=l>>8,d[u]=s(e[0],h),--u,h=l&255,g=o[o.length-1],d[u]=s(g,h));u>0;)--u,h=l>>8,d[u]=s(o[u],h),--u,h=l&255,d[u]=s(o[u],h);for(u=15,x=15-o.length;x>0;)h=l>>8,d[u]=s(e[x],h),--u,--x,h=l&255,d[u]=s(o[u],h),--u,--x;return d}})(),dpe=function(e,t,r,n,s){s||(s=t),n||(n=DG(e));var a,i;for(a=0;a!=t.length;++a)i=t[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},fpe=function(e){var t=0,r=DG(e);return function(n){var s=dpe("",n,t,r);return t=s[1],s[0]}};function hpe(e,t,r,n){var s={key:Ra(e),verificationBytes:Ra(e)};return r.password&&(s.verifier=pE(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=fpe(r.password)),s}function mpe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=upe(e):n.Data=cpe(e,t),n}function gpe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?mpe(e,t-2,n):hpe(e,r.biff>=8?t:t-2,r,n),n}var OG=(function(){function e(s,a){switch(a.type){case"base64":return t(Ll(s),a);case"binary":return t(s,a);case"buffer":return t(Sn&&Buffer.isBuffer(s)?s.toString("binary"):eh(s),a);case"array":return t(Fm(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,g=0,x,y=-1;x=h.exec(d);){switch(x[0]){case"\\cell":var v=d.slice(g,h.lastIndex-x[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var T={v,t:"s"};Array.isArray(o)?o[f][y]=T:o[Jr({r:f,c:y})]=T}break}g=h.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=vn(u),o}function r(s,a){return th(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Ln(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Jr({r:u,c:d});o=l?(s[u]||[])[d]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(d0(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function ppe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Fv(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function xpe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;if(i===0)return[0,0,t];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,l,u/2]}function ype(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*t,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function W4(e,t){if(t===0)return e;var r=xpe(ppe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Fv(ype(r))}var IG=6,vpe=15,wpe=1,fo=IG;function Dv(e){return Math.floor((e+Math.round(128/fo)/256)*fo)}function Ov(e){return Math.floor((e-5)/fo*100+.5)/100}function H4(e){return Math.round((e*fo+5)/fo*256)/256}function z5(e){return H4(Ov(Dv(e)))}function xE(e){var t=Math.abs(e-z5(e)),r=fo;if(t>.005)for(fo=wpe;fo<vpe;++fo)Math.abs(e-z5(e))<=t&&(t=Math.abs(e-z5(e)),r=fo);fo=r}function Uf(e){e.width?(e.wpx=Dv(e.width),e.wch=Ov(e.wpx),e.MDW=fo):e.wpx?(e.wch=Ov(e.wpx),e.width=H4(e.wch),e.MDW=fo):typeof e.wch=="number"&&(e.width=H4(e.wch),e.wpx=Dv(e.width),e.MDW=fo),e.customWidth&&delete e.customWidth}var bpe=96,RG=bpe;function Iv(e){return e*96/RG}function Kp(e){return e*RG/96}var _pe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Spe(e,t,r,n){t.Borders=[];var s={},a=!1;(e[0].match(bo)||[]).forEach(function(i){var o=en(i);switch(sd(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Ts(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Ts(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function kpe(e,t,r,n){t.Fills=[];var s={},a=!1;(e[0].match(bo)||[]).forEach(function(i){var o=en(i);switch(sd(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Tpe(e,t,r,n){t.Fonts=[];var s={},a=!1;(e[0].match(bo)||[]).forEach(function(i){var o=en(i);switch(sd(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=us(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Ts(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Ts(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Ts(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Ts(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Ts(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Ts(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Ts(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=GC[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Ts(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=um[s.color.index];s.color.index==81&&(l=um[1]),l||(l=um[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=W4(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Cpe(e,t,r){t.NumberFmt=[];for(var n=ma(Yr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Yr[n[s]];var a=e[0].match(bo);if(a)for(s=0;s<a.length;++s){var i=en(a[s]);switch(sd(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=In(us(i.formatCode)),l=parseInt(i.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&t.NumberFmt[l]!=null;--l);t.NumberFmt[l]=o}e0(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Epe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=lr("numFmt",null,{numFmtId:n,formatCode:ss(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=lr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var yb=["numFmtId","fillId","fontId","borderId","xfId"],vb=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Npe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(bo)||[]).forEach(function(a){var i=en(a),o=0;switch(sd(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<yb.length;++o)n[yb[o]]&&(n[yb[o]]=parseInt(n[yb[o]],10));for(o=0;o<vb.length;++o)n[vb[o]]&&(n[vb[o]]=Ts(n[vb[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=Ts(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Ape(e){var t=[];return t[t.length]=lr("cellXfs",null),e.forEach(function(r){t[t.length]=lr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=lr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var jpe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&Cpe(f,d,u),(f=o.match(s))&&Tpe(f,d,l,u),(f=o.match(n))&&kpe(f,d,l,u),(f=o.match(a))&&Spe(f,d,l,u),(f=o.match(r))&&Npe(f,d,u),d}})();function LG(e,t){var r=[ja,lr("styleSheet",null,{xmlns:Ym[0],"xmlns:vt":ti.vt})],n;return e.SSF&&(n=Epe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Ape(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Ppe(e,t){var r=e.read_shift(2),n=yo(e);return[r,n]}function Mpe(e,t,r){r||(r=Mt(6+4*t.length)),r.write_shift(2,e),ki(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Fpe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=mhe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var l=e.read_shift(1);switch(l>0&&(n.charset=l),e.l++,n.color=hhe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=yo(e),n}function Dpe(e,t){t||(t=Mt(153)),t.write_shift(2,e.sz*20),ghe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),$4(e.color,t);var n=0;return n=2,t.write_shift(1,n),ki(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Ope=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],U5,Ipe=wo;function YD(e,t){t||(t=Mt(84)),U5||(U5=c3(Ope));var r=U5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for($4({auto:1},t),$4({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Rpe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function BG(e,t,r){r||(r=Mt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function wy(e,t){return t||(t=Mt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Lpe=wo;function Bpe(e,t){return t||(t=Mt(51)),t.write_shift(1,0),wy(null,t),wy(null,t),wy(null,t),wy(null,t),wy(null,t),t.length>t.l?t.slice(0,t.l):t}function $pe(e,t){return t||(t=Mt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),B4(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function zpe(e,t,r){var n=Mt(2052);return n.write_shift(4,e),B4(t,n),B4(r,n),n.length>n.l?n.slice(0,n.l):n}function Upe(e,t,r){var n={};n.NumberFmt=[];for(var s in Yr)n.NumberFmt[s]=Yr[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return w0(e,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],e0(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(l.color.rgb=W4(t.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Wpe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Ht(e,615,au(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Ht(e,44,Mpe(s,t[s]))}),Ht(e,616))}}function Hpe(e){var t=1;Ht(e,611,au(t)),Ht(e,43,Dpe({sz:12,color:{theme:1},name:"Calibri",family:2})),Ht(e,612)}function Gpe(e){var t=2;Ht(e,603,au(t)),Ht(e,45,YD({patternType:"none"})),Ht(e,45,YD({patternType:"gray125"})),Ht(e,604)}function Vpe(e){var t=1;Ht(e,613,au(t)),Ht(e,46,Bpe()),Ht(e,614)}function qpe(e){var t=1;Ht(e,626,au(t)),Ht(e,47,BG({numFmtId:0},65535)),Ht(e,627)}function Kpe(e,t){Ht(e,617,au(t.length)),t.forEach(function(r){Ht(e,47,BG(r,0))}),Ht(e,618)}function Ype(e){var t=1;Ht(e,619,au(t)),Ht(e,48,$pe({xfId:0,name:"Normal"})),Ht(e,620)}function Xpe(e){var t=0;Ht(e,505,au(t)),Ht(e,506)}function Jpe(e){var t=0;Ht(e,508,zpe(t,"TableStyleMedium9","PivotStyleMedium4")),Ht(e,509)}function Qpe(e,t){var r=dl();return Ht(r,278),Wpe(r,e.SSF),Hpe(r),Gpe(r),Vpe(r),qpe(r),Kpe(r,t.cellXfs),Ype(r),Xpe(r),Jpe(r),Ht(r,279),r.end()}var Zpe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function e1e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(bo)||[]).forEach(function(s){var a=en(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[Zpe.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function t1e(){}function r1e(){}var n1e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,s1e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,a1e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function i1e(e,t,r){t.themeElements={};var n;[["clrScheme",n1e,e1e],["fontScheme",s1e,t1e],["fmtScheme",a1e,r1e]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var o1e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function $G(e,t){(!e||e.length===0)&&(e=yE());var r,n={};if(!(r=e.match(o1e)))throw new Error("themeElements not found in theme");return i1e(r[0],n,t),n.raw=e,n}function yE(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ja];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function l1e(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var i;try{i=MH(a,{type:"array"})}catch{return}var o=Fl(i,"theme/theme/theme1.xml",!0);if(o)return $G(o,r)}}function c1e(e){return e.read_shift(4)}function u1e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=d1e(e,4);break;case 2:t.xclrValue=vG(e);break;case 3:t.xclrValue=c1e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function d1e(e,t){return wo(e,t)}function f1e(e,t){return wo(e,t)}function h1e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=u1e(e);break;case 6:n[1]=f1e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function m1e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),a=[];s-- >0;)a.push(h1e(e,r-e.l));return{ixfe:n,ext:a}}function g1e(e,t){t.forEach(function(r){r[0]})}function p1e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:yo(e)}}function x1e(e){var t=Mt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),ki(e.name,t),t.slice(0,t.l)}function y1e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function v1e(e){var t=Mt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function w1e(e,t){var r=Mt(8+2*t.length);return r.write_shift(4,e),ki(t,r),r.slice(0,r.l)}function b1e(e){return e.l+=4,e.read_shift(4)!=0}function _1e(e,t){var r=Mt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function S1e(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return w0(e,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function k1e(){var e=dl();return Ht(e,332),Ht(e,334,au(1)),Ht(e,335,x1e({name:"XLDAPR",version:12e4,flags:3496657072})),Ht(e,336),Ht(e,339,w1e(1,"XLDAPR")),Ht(e,52),Ht(e,35,au(514)),Ht(e,4096,au(0)),Ht(e,4097,uc(1)),Ht(e,36),Ht(e,53),Ht(e,340),Ht(e,337,_1e(1)),Ht(e,51,v1e([[1,0]])),Ht(e,338),Ht(e,333),e.end()}function T1e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,a=2,i;return e.replace(bo,function(o){var l=en(o);switch(sd(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function zG(){var e=[ja];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function C1e(e){var t=[];if(!e)return t;var r=1;return(e.match(bo)||[]).forEach(function(n){var s=en(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function E1e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Jr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function N1e(e,t,r){var n=[];return w0(e,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function A1e(e,t,r,n){if(!e)return e;var s=n||{},a=!1;w0(e,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function j1e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var wp=1024;function UG(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[lr("xml",null,{"xmlns:v":Nl.v,"xmlns:o":Nl.o,"xmlns:x":Nl.x,"xmlns:mv":Nl.mv}).replace(/\/>/,">"),lr("o:shapelayout",lr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),lr("v:shapetype",[lr("v:stroke",null,{joinstyle:"miter"}),lr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];wp<e*1e3;)wp+=1e3;return t.forEach(function(a){var i=Xs(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?lr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=lr("v:fill",l,o),d={on:"t",obscured:"t"};++wp,s=s.concat(["<v:shape"+jv({id:"_x0000_s"+wp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,lr("v:shadow",null,d),lr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ki("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Ki("x:AutoFill","False"),Ki("x:Row",String(i.r)),Ki("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function XD(e,t,r,n){var s=Array.isArray(e),a;t.forEach(function(i){var o=Xs(i.ref);if(s?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[i.ref],!a){a={t:"z"},s?e[o.r][o.c]=a:e[i.ref]=a;var l=Ln(e["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=vn(l);u!==e["!ref"]&&(e["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function P1e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=en(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Xs(l.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&gE(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function WG(e){var t=[ja,lr("comments",null,{xmlns:Ym[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var a=ss(s.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(ss(l.a))),a.push(l.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)t.push(Ki("t",ss(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;t.push(Ki("t",ss(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function M1e(e,t){var r=[],n=!1,s={},a=0;return e.replace(bo,function(o,l){var u=en(o);switch(sd(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=e.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function F1e(e,t,r){var n=[ja,lr("ThreadedComments",null,{xmlns:ti.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(lr("threadedComment",Ki("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function D1e(e,t){var r=[],n=!1;return e.replace(bo,function(a){var i=en(a);switch(sd(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function O1e(e){var t=[ja,lr("personList",null,{xmlns:ti.TCMNT,"xmlns:x":Ym[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(lr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function I1e(e){var t={};t.iauthor=e.read_shift(4);var r=Zm(e);return t.rfx=r.s,t.ref=Jr(r.s),e.l+=16,t}function R1e(e,t){return t==null&&(t=Mt(36)),t.write_shift(4,e[1].iauthor),k1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var L1e=yo;function B1e(e){return ki(e.slice(0,54))}function $1e(e,t){var r=[],n=[],s={},a=!1;return w0(e,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function z1e(e){var t=dl(),r=[];return Ht(t,628),Ht(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Ht(t,632,B1e(s.a)))})}),Ht(t,631),Ht(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:Xs(n[0]),e:Xs(n[0])};Ht(t,635,R1e([a,s])),s.t&&s.t.length>0&&Ht(t,637,che(s)),Ht(t,636),delete s.iauthor})}),Ht(t,634),Ht(t,629),t.end()}var U1e="application/vnd.ms-office.vbaProject";function W1e(e){var t=zr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");zr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),zr.write(t)}function H1e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&zr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var HG=["xlsb","xlsm","xlam","biff8","xla"];function G1e(){return{"!type":"dialog"}}function V1e(){return{"!type":"dialog"}}function q1e(){return{"!type":"macro"}}function K1e(){return{"!type":"macro"}}var Mp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,l?u+=t.r:--u,s+(o?"":"$")+Ys(d)+(l?"":"$")+Na(u)}return function(s,a){return t=a,s.replace(e,r)}})(),vE=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,wE=(function(){return function(t,r){return t.replace(vE,function(n,s,a,i,o,l){var u=iE(i)-(a?0:r.c),d=aE(l)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":a?u+1:"["+u+"]";return s+"R"+f+"C"+h})}})();function GG(e,t){return e.replace(vE,function(r,n,s,a,i,o){return n+(s=="$"?s+a:Ys(iE(a)+t.c))+(i=="$"?i+o:Na(aE(o)+t.r))})}function Y1e(e,t,r){var n=fl(t),s=n.s,a=Xs(r),i={r:a.r-s.r,c:a.c-s.c};return GG(e,i)}function X1e(e){return e.length!=1}function JD(e){return e.replace(/_xlfn\./g,"")}function Oa(e){e.l+=1}function Wf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function VG(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return qG(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=Wf(e),o=Wf(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function qG(e){var t=Wf(e),r=Wf(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function J1e(e,t,r){if(r.biff<8)return qG(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=Wf(e),i=Wf(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function KG(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Q1e(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Wf(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Q1e(e){var t=Wf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Z1e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function exe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return txe(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function txe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function rxe(e,t,r){var n=(e[e.l++]&96)>>5,s=VG(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function nxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var i=VG(e,a,r);return[n,s,i]}function sxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function axe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function ixe(e,t,r){var n=(e[e.l++]&96)>>5,s=J1e(e,t-1,r);return[n,s]}function oxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function QD(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function lxe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function cxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function uxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function dxe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function fxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function YG(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function hxe(e){return e.read_shift(2),YG(e)}function mxe(e){return e.read_shift(2),YG(e)}function gxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=KG(e,0,r);return[n,s]}function pxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=exe(e,0,r);return[n,s]}function xxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=KG(e,0,r);return[n,s,a]}function yxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[bye[s],QG[s],n]}function vxe(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:wxe(e);return[s,(a[0]===0?QG:wye)[a[1]]]}function wxe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function bxe(e,t,r){e.l+=r&&r.biff==2?3:4}function _xe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Sxe(e){return e.l++,b0[e.read_shift(1)]}function kxe(e){return e.l++,e.read_shift(2)}function Txe(e){return e.l++,e.read_shift(1)!==0}function Cxe(e){return e.l++,mo(e)}function Exe(e,t,r){return e.l++,S2(e,t-1,r)}function Nxe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Sa(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=b0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=mo(e);break;case 2:r[1]=eg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Axe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?Zm:f3)(e));return s}function jxe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=Nxe(e,r.biff);return i}function Pxe(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function Mxe(e,t,r){if(r.biff==5)return Fxe(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function Fxe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Dxe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Oxe(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Ixe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Rxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var Lxe=wo,Bxe=wo,$xe=wo;function T2(e,t,r){return e.l+=2,[Z1e(e)]}function bE(e){return e.l+=6,[]}var zxe=T2,Uxe=bE,Wxe=bE,Hxe=T2;function XG(e){return e.l+=2,[Ra(e),e.read_shift(2)&1]}var Gxe=T2,Vxe=XG,qxe=bE,Kxe=T2,Yxe=T2,Xxe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Jxe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),i=Xxe[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:s,C:a}}function Qxe(e){return e.l+=2,[e.read_shift(4)]}function Zxe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function eye(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function tye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function rye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function nye(e){return e.l+=4,[0,0]}var ZD={1:{n:"PtgExp",f:_xe},2:{n:"PtgTbl",f:$xe},3:{n:"PtgAdd",f:Oa},4:{n:"PtgSub",f:Oa},5:{n:"PtgMul",f:Oa},6:{n:"PtgDiv",f:Oa},7:{n:"PtgPower",f:Oa},8:{n:"PtgConcat",f:Oa},9:{n:"PtgLt",f:Oa},10:{n:"PtgLe",f:Oa},11:{n:"PtgEq",f:Oa},12:{n:"PtgGe",f:Oa},13:{n:"PtgGt",f:Oa},14:{n:"PtgNe",f:Oa},15:{n:"PtgIsect",f:Oa},16:{n:"PtgUnion",f:Oa},17:{n:"PtgRange",f:Oa},18:{n:"PtgUplus",f:Oa},19:{n:"PtgUminus",f:Oa},20:{n:"PtgPercent",f:Oa},21:{n:"PtgParen",f:Oa},22:{n:"PtgMissArg",f:Oa},23:{n:"PtgStr",f:Exe},26:{n:"PtgSheet",f:Zxe},27:{n:"PtgEndSheet",f:eye},28:{n:"PtgErr",f:Sxe},29:{n:"PtgBool",f:Txe},30:{n:"PtgInt",f:kxe},31:{n:"PtgNum",f:Cxe},32:{n:"PtgArray",f:oxe},33:{n:"PtgFunc",f:yxe},34:{n:"PtgFuncVar",f:vxe},35:{n:"PtgName",f:Pxe},36:{n:"PtgRef",f:gxe},37:{n:"PtgArea",f:rxe},38:{n:"PtgMemArea",f:Dxe},39:{n:"PtgMemErr",f:Lxe},40:{n:"PtgMemNoMem",f:Bxe},41:{n:"PtgMemFunc",f:Oxe},42:{n:"PtgRefErr",f:Ixe},43:{n:"PtgAreaErr",f:sxe},44:{n:"PtgRefN",f:pxe},45:{n:"PtgAreaN",f:ixe},46:{n:"PtgMemAreaN",f:tye},47:{n:"PtgMemNoMemN",f:rye},57:{n:"PtgNameX",f:Mxe},58:{n:"PtgRef3d",f:xxe},59:{n:"PtgArea3d",f:nxe},60:{n:"PtgRefErr3d",f:Rxe},61:{n:"PtgAreaErr3d",f:axe},255:{}},sye={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},aye={1:{n:"PtgElfLel",f:XG},2:{n:"PtgElfRw",f:Kxe},3:{n:"PtgElfCol",f:zxe},6:{n:"PtgElfRwV",f:Yxe},7:{n:"PtgElfColV",f:Hxe},10:{n:"PtgElfRadical",f:Gxe},11:{n:"PtgElfRadicalS",f:qxe},13:{n:"PtgElfColS",f:Uxe},15:{n:"PtgElfColSV",f:Wxe},16:{n:"PtgElfRadicalLel",f:Vxe},25:{n:"PtgList",f:Jxe},29:{n:"PtgSxName",f:Qxe},255:{}},iye={0:{n:"PtgAttrNoop",f:nye},1:{n:"PtgAttrSemi",f:fxe},2:{n:"PtgAttrIf",f:uxe},4:{n:"PtgAttrChoose",f:lxe},8:{n:"PtgAttrGoto",f:cxe},16:{n:"PtgAttrSum",f:bxe},32:{n:"PtgAttrBaxcel",f:QD},33:{n:"PtgAttrBaxcel",f:QD},64:{n:"PtgAttrSpace",f:hxe},65:{n:"PtgAttrSpaceSemi",f:mxe},128:{n:"PtgAttrIfError",f:dxe},255:{}};function C2(e,t,r,n){if(n.biff<8)return wo(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=jxe(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Axe(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=s-e.l,t!==0&&a.push(wo(e,t)),a}function E2(e,t,r){for(var n=e.l+t,s,a,i=[];n!=e.l;)t=n-e.l,a=e[e.l],s=ZD[a]||ZD[sye[a]],(a===24||a===25)&&(s=(a===24?aye:iye)[e[e.l+1]]),!s||!s.f?wo(e,t):i.push([s.n,s.f(e,t,r)]);return i}function oye(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var lye={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function cye(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function JG(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function eO(e,t,r){var n=JG(e,t,r);return n=="#REF"?n:cye(n,r)}function uo(e,t,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,f=0,h=0,g,x="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",T=0,k=e[0].length;T<k;++T){var b=e[0][T];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=ua(" ",e[0][y][1][1]);break;case 1:v=ua("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+v,y=-1}o.push(u+lye[b[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Xy(b[1][1],i,s),o.push(Jy(d,a));break;case"PtgRefN":d=r?Xy(b[1][1],r,s):b[1][1],o.push(Jy(d,a));break;case"PtgRef3d":f=b[1][1],d=Xy(b[1][2],i,s),x=eO(n,f,s),o.push(x+"!"+Jy(d,a));break;case"PtgFunc":case"PtgFuncVar":var E=b[1][0],N=b[1][1];E||(E=0),E&=127;var P=E==0?[]:o.slice(-E);o.length-=E,N==="User"&&(N=P.shift()),o.push(N+"("+P.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":g=AD(b[1][1],r?{s:r}:i,s),o.push(L5(g,s));break;case"PtgArea":g=AD(b[1][1],i,s),o.push(L5(g,s));break;case"PtgArea3d":f=b[1][1],g=b[1][2],x=eO(n,f,s),o.push(x+"!"+L5(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=b[1][2];var M=(n.names||[])[h-1]||(n[0]||[])[h],j=M?M.Name:"SH33TJSNAME"+String(h);j&&j.slice(0,6)=="_xlfn."&&!s.xlfn&&(j=j.slice(6)),o.push(j);break;case"PtgNameX":var A=b[1][1];h=b[1][2];var D;if(s.biff<=5)A<0&&(A=-A),n[A]&&(D=n[A][h]);else{var L="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][h]&&n[A][h].itab>0&&(L=n.SheetNames[n[A][h].itab-1]+"!"):L=n.SheetNames[h-1]+"!"),n[A]&&n[A][h])L+=n[A][h].Name;else if(n[0]&&n[0][h])L+=n[0][h].Name;else{var G=(JG(n,A,s)||"").split(";;");G[h-1]?L=G[h-1]:L+="SH33TJSERRX"}o.push(L);break}D||(D={Name:"SH33TJSERRY"}),o.push(D.Name);break;case"PtgParen":var X="(",se=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:X=ua(" ",e[0][y][1][1])+X;break;case 3:X=ua("\r",e[0][y][1][1])+X;break;case 4:se=ua(" ",e[0][y][1][1])+se;break;case 5:se=ua("\r",e[0][y][1][1])+se;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}o.push(X+o.pop()+se);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var Q={c:r.c,r:r.r};if(n.sharedf[Jr(d)]){var re=n.sharedf[Jr(d)];o.push(uo(re,i,Q,n,s))}else{var B=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(uo(u[1],i,Q,n,s)),B=!0;break}B||o.push(b[1])}break;case"PtgArray":o.push("{"+oye(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&V.indexOf(e[0][T][0])==-1){b=e[0][y];var R=!0;switch(b[1][0]){case 4:R=!1;case 0:v=ua(" ",b[1][1]);break;case 5:R=!1;case 1:v=ua("\r",b[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((R?v:"")+o.pop()+(R?"":v)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function uye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],wo(e,t-2)];var o=E2(e,i,r);return t!==i+s&&(a=C2(e,t-i-s,o,r)),e.l=n,[o,a]}function dye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],wo(e,t-2)];var o=E2(e,i,r);return t!==i+s&&(a=C2(e,t-i-s,o,r)),e.l=n,[o,a]}function fye(e,t,r,n){var s=e.l+t,a=E2(e,n,r),i;return s!==e.l&&(i=C2(e,s-e.l,a,r)),[a,i]}function hye(e,t,r){var n=e.l+t,s,a=e.read_shift(2),i=E2(e,a,r);return a==65535?[[],wo(e,t-2)]:(t!==a+2&&(s=C2(e,n-a-2,i,r)),[i,s])}function mye(e){var t;if(qd(e,e.l+6)!==65535)return[mo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function gye(e){if(e==null){var t=Mt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Dm(e);return Dm(0)}function W5(e,t,r){var n=e.l+t,s=ad(e);r.biff==2&&++e.l;var a=mye(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=dye(e,n-e.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function pye(e,t,r,n,s){var a=Im(t,r,s),i=gye(e.v),o=Mt(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=Mt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=_i([a,i,o,u]);return f}function h3(e,t,r){var n=e.read_shift(4),s=E2(e,n,r),a=e.read_shift(4),i=a>0?C2(e,a,s,r):null;return[s,i]}var xye=h3,m3=h3,yye=h3,vye=h3,wye={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},QG={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},bye={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function tO(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function _ye(e){var t="of:="+e.replace(vE,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function H5(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Sye(e){return e.replace(/\./,"!")}var Zy={},Fp={},ev=typeof Map<"u";function _E(e,t,r){var n=0,s=e.length;if(r){if(ev?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=ev?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(ev?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function g3(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(fo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Ov(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=H4(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function hm(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function rh(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,a=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){e0(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function ZG(e,t,r,n,s,a){try{n.cellNF&&(e.z=Yr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ns(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Yr[t]==null&&e0(wfe[t]||"General",t),e.t==="e")e.w=e.w||b0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Nv(e.v);else if(e.t==="d"){var i=si(e.v);(i|0)===i?e.w=i.toString(10):e.w=Nv(i)}else{if(e.v===void 0)return"";e.w=Mm(e.v,Fp)}else e.t==="d"?e.w=Sc(t,si(e.v),Fp):e.w=Sc(t,e.v,Fp)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=W4(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=W4(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function kye(e,t,r){if(e&&e["!ref"]){var n=Ln(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Tye(e,t){var r=Ln(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=vn(r))}var Cye=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Eye=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Nye=/<(?:\w:)?hyperlink [^>]*>/mg,Aye=/"(\w*:\w*)"/,jye=/<(?:\w:)?col\b[^>]*[\/]?>/g,Pye=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Mye=/<(?:\w:)?pageMargins[^>]*\/>/g,eV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Fye=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Dye=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Oye(e,t,r,n,s,a,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Eye);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(eV);h?SE(h[0],o,s,r):(h=u.match(Fye))&&Rye(h[0],h[1]||"",o,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var x=u.slice(g,g+50).match(Aye);x&&Tye(o,x[1])}var y=u.match(Dye);y&&y[1]&&Xye(y[1],s);var v=[];if(t.cellStyles){var T=u.match(jye);T&&Gye(v,T)}f&&Zye(f[1],o,t,l,a,i);var k=d.match(Pye);k&&(o["!autofilter"]=qye(k[0]));var b=[],E=d.match(Cye);if(E)for(g=0;g!=E.length;++g)b[g]=Ln(E[g].slice(E[g].indexOf('"')+1));var N=d.match(Nye);N&&Uye(o,N,n);var P=d.match(Mye);if(P&&(o["!margins"]=Wye(en(P[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=vn(l)),t.sheetRows>0&&o["!ref"]){var M=Ln(o["!ref"]);t.sheetRows<=+M.e.r&&(M.e.r=t.sheetRows-1,M.e.r>l.e.r&&(M.e.r=l.e.r),M.e.r<M.s.r&&(M.s.r=M.e.r),M.e.c>l.e.c&&(M.e.c=l.e.c),M.e.c<M.s.c&&(M.s.c=M.e.c),o["!fullref"]=o["!ref"],o["!ref"]=vn(M))}return v.length>0&&(o["!cols"]=v),b.length>0&&(o["!merges"]=b),o}function Iye(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+vn(e[r])+'"/>';return t+"</mergeCells>"}function SE(e,t,r,n){var s=en(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=In(us(s.codeName)))}function Rye(e,t,r,n,s){SE(e.slice(0,e.indexOf(">")),r,n,s)}function Lye(e,t,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var l=t.SheetNames[r];try{t.Workbook&&(l=t.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,i.codeName=Wu(ss(l))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+lr("outlinePr",null,u)}!a&&!o||(s[s.length]=lr("sheetPr",o,i))}var Bye=["objects","scenarios","selectLockedCells","selectUnlockedCells"],$ye=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function zye(e){var t={sheet:1};return Bye.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),$ye.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=pE(e.password).toString(16).toUpperCase()),lr("sheetProtection",null,t)}function Uye(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var a=en(us(t[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+In(a.location))):(a.Target="#"+In(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Ln(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=Jr({c:u,r:l});n?(e[l]||(e[l]=[]),e[l][u]||(e[l][u]={t:"z",v:void 0}),e[l][u].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function Wye(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Hye(e){return hm(e),lr("pageMargins",null,e)}function Gye(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=en(t[n],!0);s.hidden&&(s.hidden=Ts(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,xE(s.width)),Uf(s);a<=i;)e[a++]=As(s)}}function Vye(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=lr("col",null,g3(s,n)));return r[r.length]="</cols>",r.join("")}function qye(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Kye(e,t,r,n){var s=typeof e.ref=="string"?e.ref:vn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=fl(s);i.s.r==i.e.r&&(i.e.r=fl(t["!ref"]).e.r,s=vn(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),lr("autoFilter",null,{ref:s})}var Yye=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Xye(e,t){t.Views||(t.Views=[{}]),(e.match(Yye)||[]).forEach(function(r,n){var s=en(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Ts(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function Jye(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),lr("sheetViews",lr("sheetView",null,s),{})}function Qye(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",a=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=b0[e.v];break;case"d":n&&n.cellDates?s=Ns(e.v,-1).toISOString():(e=As(e),e.t="n",s=""+(e.v=si(Ns(e.v)))),typeof e.z>"u"&&(e.z=Yr[14]);break;default:s=e.v;break}var o=Ki("v",ss(s)),l={r:t},u=rh(n.cellXfs,e,n);switch(u!==0&&(l.s=u),e.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Ki("v",""+_E(n.Strings,e.v,n.revStrings)),l.t="s";break}l.t="str";break}if(e.t!=a&&(e.t=a,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=lr("f",ss(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(l.cm=1),lr("c",o,l)}var Zye=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Av("v"),i=Av("f");return function(l,u,d,f,h,g){for(var x=0,y="",v=[],T=[],k=0,b=0,E=0,N="",P,M,j=0,A=0,D,L,G=0,X=0,se=Array.isArray(g.CellXf),Q,re=[],B=[],V=Array.isArray(u),R=[],H={},z=!1,I=!!d.sheetStubs,W=l.split(t),K=0,ee=W.length;K!=ee;++K){y=W[K].trim();var oe=y.length;if(oe!==0){var Z=0;e:for(x=0;x<oe;++x)switch(y[x]){case">":if(y[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(M=en(y.slice(Z,x),!0),j=M.r!=null?parseInt(M.r,10):j+1,A=-1,d.sheetRows&&d.sheetRows<j)continue;H={},z=!1,M.ht&&(z=!0,H.hpt=parseFloat(M.ht),H.hpx=Kp(H.hpt)),M.hidden=="1"&&(z=!0,H.hidden=!0),M.outlineLevel!=null&&(z=!0,H.level=+M.outlineLevel),z&&(R[j-1]=H)}break;case"<":Z=x;break}if(Z>=x)break;if(M=en(y.slice(Z,x),!0),j=M.r!=null?parseInt(M.r,10):j+1,A=-1,!(d.sheetRows&&d.sheetRows<j)){f.s.r>j-1&&(f.s.r=j-1),f.e.r<j-1&&(f.e.r=j-1),d&&d.cellStyles&&(H={},z=!1,M.ht&&(z=!0,H.hpt=parseFloat(M.ht),H.hpx=Kp(H.hpt)),M.hidden=="1"&&(z=!0,H.hidden=!0),M.outlineLevel!=null&&(z=!0,H.level=+M.outlineLevel),z&&(R[j-1]=H)),v=y.slice(x).split(e);for(var le=0;le!=v.length&&v[le].trim().charAt(0)=="<";++le);for(v=v.slice(le),x=0;x!=v.length;++x)if(y=v[x].trim(),y.length!==0){if(T=y.match(r),k=x,b=0,E=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,T!=null&&T.length===2){for(k=0,N=T[1],b=0;b!=N.length&&!((E=N.charCodeAt(b)-64)<1||E>26);++b)k=26*k+E;--k,A=k}else++A;for(b=0;b!=y.length&&y.charCodeAt(b)!==62;++b);if(++b,M=en(y.slice(0,b),!0),M.r||(M.r=Jr({r:j-1,c:A})),N=y.slice(b),P={t:""},(T=N.match(a))!=null&&T[1]!==""&&(P.v=In(T[1])),d.cellFormula){if((T=N.match(i))!=null&&T[1]!==""){if(P.f=In(us(T[1])).replace(/\r\n/g,`
`),d.xlfn||(P.f=JD(P.f)),T[0].indexOf('t="array"')>-1)P.F=(N.match(s)||[])[1],P.F.indexOf(":")>-1&&re.push([Ln(P.F),P.F]);else if(T[0].indexOf('t="shared"')>-1){L=en(T[0]);var ue=In(us(T[1]));d.xlfn||(ue=JD(ue)),B[parseInt(L.si,10)]=[L,ue,M.r]}}else(T=N.match(/<f[^>]*\/>/))&&(L=en(T[0]),B[L.si]&&(P.f=Y1e(B[L.si][1],B[L.si][2],M.r)));var de=Xs(M.r);for(b=0;b<re.length;++b)de.r>=re[b][0].s.r&&de.r<=re[b][0].e.r&&de.c>=re[b][0].s.c&&de.c<=re[b][0].e.c&&(P.F=re[b][1])}if(M.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(I)P.t="z";else continue;else P.t=M.t||"n";switch(f.s.c>A&&(f.s.c=A),f.e.c<A&&(f.e.c=A),P.t){case"n":if(P.v==""||P.v==null){if(!I)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!I)continue;P.t="z"}else D=Zy[parseInt(P.v,10)],P.v=D.t,P.r=D.r,d.cellHTML&&(P.h=D.h);break;case"str":P.t="s",P.v=P.v!=null?us(P.v):"",d.cellHTML&&(P.h=tE(P.v));break;case"inlineStr":T=N.match(n),P.t="s",T!=null&&(D=gE(T[1]))?(P.v=D.t,d.cellHTML&&(P.h=D.h)):P.v="";break;case"b":P.v=Ts(P.v);break;case"d":d.cellDates?P.v=Ns(P.v,1):(P.v=si(Ns(P.v,1)),P.t="n");break;case"e":(!d||d.cellText!==!1)&&(P.w=P.v),P.v=rG[P.v];break}if(G=X=0,Q=null,se&&M.s!==void 0&&(Q=g.CellXf[M.s],Q!=null&&(Q.numFmtId!=null&&(G=Q.numFmtId),d.cellStyles&&Q.fillId!=null&&(X=Q.fillId))),ZG(P,G,X,d,h,g),d.cellDates&&se&&P.t=="n"&&b1(Yr[G])&&(P.t="d",P.v=d3(P.v)),M.cm&&d.xlmeta){var Te=(d.xlmeta.Cell||[])[+M.cm-1];Te&&Te.type=="XLDAPR"&&(P.D=!0)}if(V){var ie=Xs(M.r);u[ie.r]||(u[ie.r]=[]),u[ie.r][ie.c]=P}else u[M.r]=P}}}}R.length>0&&(u["!rows"]=R)}})();function eve(e,t,r,n){var s=[],a=[],i=Ln(e["!ref"]),o="",l,u="",d=[],f=0,h=0,g=e["!rows"],x=Array.isArray(e),y={r:u},v,T=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=Ys(h);for(f=i.s.r;f<=i.e.r;++f){for(a=[],u=Na(f),h=i.s.c;h<=i.e.c;++h){l=d[h]+u;var k=x?(e[f]||[])[h]:e[l];k!==void 0&&(o=Qye(k,l,e,t))!=null&&a.push(o)}(a.length>0||g&&g[f])&&(y={r:u},g&&g[f]&&(v=g[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Iv(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level)),s[s.length]=lr("row",a.join(""),y))}if(g)for(;f<g.length;++f)g&&g[f]&&(y={r:f+1},v=g[f],v.hidden&&(y.hidden=1),T=-1,v.hpx?T=Iv(v.hpx):v.hpt&&(T=v.hpt),T>-1&&(y.ht=T,y.customHeight=1),v.level&&(y.outlineLevel=v.level),s[s.length]=lr("row","",y));return s.join("")}function tV(e,t,r,n){var s=[ja,lr("worksheet",null,{xmlns:Ym[0],"xmlns:r":ti.r})],a=r.SheetNames[e],i=0,o="",l=r.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=Ln(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=vn(d)}n||(n={}),l["!comments"]=[];var f=[];Lye(l,r,e,t,s),s[s.length]=lr("dimension",null,{ref:u}),s[s.length]=Jye(l,t,e,r),t.sheetFormat&&(s[s.length]=lr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Vye(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=eve(l,t),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=zye(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=Kye(l["!autofilter"],l,r,e)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Iye(l["!merges"]));var h=-1,g,x=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(x=rs(n,-1,ss(y[1].Target).replace(/#.*$/,""),Cn.HLINK),g["r:id"]="rId"+x),(h=y[1].Target.indexOf("#"))>-1&&(g.location=ss(y[1].Target.slice(h+1))),y[1].Tooltip&&(g.tooltip=ss(y[1].Tooltip)),s[s.length]=lr("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=Hye(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Ki("ignoredErrors",lr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(x=rs(n,-1,"../drawings/drawing"+(e+1)+".xml",Cn.DRAW),s[s.length]=lr("drawing",null,{"r:id":"rId"+x}),l["!drawing"]=f),l["!comments"].length>0&&(x=rs(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Cn.VML),s[s.length]=lr("legacyDrawing",null,{"r:id":"rId"+x}),l["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function tve(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function rve(e,t,r){var n=Mt(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=Iv(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Jr(u)];x&&(f<0&&(f=g),h=g)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function nve(e,t,r,n){var s=rve(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Ht(e,0,s)}var sve=Zm,ave=k1;function ive(){}function ove(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=uhe(e),r}function lve(e,t,r){r==null&&(r=Mt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return $4({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),JH(e,r),r.slice(0,r.l)}function cve(e){var t=Nc(e);return[t]}function uve(e,t,r){return r==null&&(r=Mt(8)),Xm(t,r)}function dve(e){var t=Jm(e);return[t]}function fve(e,t,r){return r==null&&(r=Mt(4)),Qm(t,r)}function hve(e){var t=Nc(e),r=e.read_shift(1);return[t,r,"b"]}function mve(e,t,r){return r==null&&(r=Mt(9)),Xm(t,r),r.write_shift(1,e.v?1:0),r}function gve(e){var t=Jm(e),r=e.read_shift(1);return[t,r,"b"]}function pve(e,t,r){return r==null&&(r=Mt(5)),Qm(t,r),r.write_shift(1,e.v?1:0),r}function xve(e){var t=Nc(e),r=e.read_shift(1);return[t,r,"e"]}function yve(e,t,r){return r==null&&(r=Mt(9)),Xm(t,r),r.write_shift(1,e.v),r}function vve(e){var t=Jm(e),r=e.read_shift(1);return[t,r,"e"]}function wve(e,t,r){return r==null&&(r=Mt(8)),Qm(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function bve(e){var t=Nc(e),r=e.read_shift(4);return[t,r,"s"]}function _ve(e,t,r){return r==null&&(r=Mt(12)),Xm(t,r),r.write_shift(4,t.v),r}function Sve(e){var t=Jm(e),r=e.read_shift(4);return[t,r,"s"]}function kve(e,t,r){return r==null&&(r=Mt(8)),Qm(t,r),r.write_shift(4,t.v),r}function Tve(e){var t=Nc(e),r=mo(e);return[t,r,"n"]}function Cve(e,t,r){return r==null&&(r=Mt(16)),Xm(t,r),Dm(e.v,r),r}function rV(e){var t=Jm(e),r=mo(e);return[t,r,"n"]}function Eve(e,t,r){return r==null&&(r=Mt(12)),Qm(t,r),Dm(e.v,r),r}function Nve(e){var t=Nc(e),r=uE(e);return[t,r,"n"]}function Ave(e,t,r){return r==null&&(r=Mt(12)),Xm(t,r),QH(e.v,r),r}function jve(e){var t=Jm(e),r=uE(e);return[t,r,"n"]}function Pve(e,t,r){return r==null&&(r=Mt(8)),Qm(t,r),QH(e.v,r),r}function Mve(e){var t=Nc(e),r=oE(e);return[t,r,"is"]}function Fve(e){var t=Nc(e),r=yo(e);return[t,r,"str"]}function Dve(e,t,r){return r==null&&(r=Mt(12+4*e.v.length)),Xm(t,r),ki(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Ove(e){var t=Jm(e),r=yo(e);return[t,r,"str"]}function Ive(e,t,r){return r==null&&(r=Mt(8+4*e.v.length)),Qm(t,r),ki(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Rve(e,t,r){var n=e.l+t,s=Nc(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"b"];if(r.cellFormula){e.l+=2;var o=m3(e,n-e.l,r);i[3]=uo(o,null,s,r.supbooks,r)}else e.l=n;return i}function Lve(e,t,r){var n=e.l+t,s=Nc(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"e"];if(r.cellFormula){e.l+=2;var o=m3(e,n-e.l,r);i[3]=uo(o,null,s,r.supbooks,r)}else e.l=n;return i}function Bve(e,t,r){var n=e.l+t,s=Nc(e);s.r=r["!row"];var a=mo(e),i=[s,a,"n"];if(r.cellFormula){e.l+=2;var o=m3(e,n-e.l,r);i[3]=uo(o,null,s,r.supbooks,r)}else e.l=n;return i}function $ve(e,t,r){var n=e.l+t,s=Nc(e);s.r=r["!row"];var a=yo(e),i=[s,a,"str"];if(r.cellFormula){e.l+=2;var o=m3(e,n-e.l,r);i[3]=uo(o,null,s,r.supbooks,r)}else e.l=n;return i}var zve=Zm,Uve=k1;function Wve(e,t){return t==null&&(t=Mt(4)),t.write_shift(4,e),t}function Hve(e,t){var r=e.l+t,n=Zm(e),s=lE(e),a=yo(e),i=yo(e),o=yo(e);e.l=r;var l={rfx:n,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function Gve(e,t){var r=Mt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));k1({s:Xs(e[0]),e:Xs(e[0])},r),cE("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return ki(s||"",r),ki(e[1].Tooltip||"",r),ki("",r),r.slice(0,r.l)}function Vve(){}function qve(e,t,r){var n=e.l+t,s=ZH(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=xye(e,n-e.l,r);i[1]=o}else e.l=n;return i}function Kve(e,t,r){var n=e.l+t,s=Zm(e),a=[s];if(r.cellFormula){var i=vye(e,n-e.l,r);a[1]=i,e.l=n}else e.l=n;return a}function Yve(e,t,r){r==null&&(r=Mt(18));var n=g3(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var nV=["left","right","top","bottom","header","footer"];function Xve(e){var t={};return nV.forEach(function(r){t[r]=mo(e)}),t}function Jve(e,t){return t==null&&(t=Mt(48)),hm(e),nV.forEach(function(r){Dm(e[r],t)}),t}function Qve(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Zve(e,t,r){r==null&&(r=Mt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function e2e(e){var t=Mt(24);return t.write_shift(4,4),t.write_shift(4,1),k1(e,t),t}function t2e(e,t){return t==null&&(t=Mt(66)),t.write_shift(2,e.password?pE(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function r2e(){}function n2e(){}function s2e(e,t,r,n,s,a,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,g,x,y,v,T,k,b,E,N,P=[];o.biff=12,o["!row"]=0;var M=0,j=!1,A=[],D={},L=o.supbooks||s.supbooks||[[]];if(L.sharedf=D,L.arrayf=A,L.SheetNames=s.SheetNames||s.Sheets.map(function(V){return V.name}),!o.supbooks&&(o.supbooks=L,s.Names))for(var G=0;G<s.Names.length;++G)L[0][G+1]=s.Names[G];var X=[],se=[],Q=!1;Rv[16]={n:"BrtShortReal",f:rV};var re;if(w0(e,function(R,H,z){if(!h)switch(z){case 148:u=R;break;case 0:g=R,o.sheetRows&&o.sheetRows<=g.r&&(h=!0),E=Na(v=g.r),o["!row"]=g.r,(R.hidden||R.hpt||R.level!=null)&&(R.hpt&&(R.hpx=Kp(R.hpt)),se[R.r]=R);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:R[2]},R[2]){case"n":x.v=R[1];break;case"s":b=Zy[R[1]],x.v=b.t,x.r=b.r;break;case"b":x.v=!!R[1];break;case"e":x.v=R[1],o.cellText!==!1&&(x.w=b0[x.v]);break;case"str":x.t="s",x.v=R[1];break;case"is":x.t="s",x.v=R[1].t;break}if((y=i.CellXf[R[0].iStyleRef])&&ZG(x,y.numFmtId,null,o,a,i),T=R[0].c==-1?T+1:R[0].c,o.dense?(l[v]||(l[v]=[]),l[v][T]=x):l[Ys(T)+E]=x,o.cellFormula){for(j=!1,M=0;M<A.length;++M){var I=A[M];g.r>=I[0].s.r&&g.r<=I[0].e.r&&T>=I[0].s.c&&T<=I[0].e.c&&(x.F=vn(I[0]),j=!0)}!j&&R.length>3&&(x.f=R[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),o.cellDates&&y&&x.t=="n"&&b1(Yr[y.numFmtId])){var W=Zh(x.v);W&&(x.t="d",x.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}re&&(re.type=="XLDAPR"&&(x.D=!0),re=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},T=R[0].c==-1?T+1:R[0].c,o.dense?(l[v]||(l[v]=[]),l[v][T]=x):l[Ys(T)+E]=x,d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),re&&(re.type=="XLDAPR"&&(x.D=!0),re=void 0);break;case 176:P.push(R);break;case 49:re=((o.xlmeta||{}).Cell||[])[R-1];break;case 494:var K=n["!id"][R.relId];for(K?(R.Target=K.Target,R.loc&&(R.Target+="#"+R.loc),R.Rel=K):R.relId==""&&(R.Target="#"+R.loc),v=R.rfx.s.r;v<=R.rfx.e.r;++v)for(T=R.rfx.s.c;T<=R.rfx.e.c;++T)o.dense?(l[v]||(l[v]=[]),l[v][T]||(l[v][T]={t:"z",v:void 0}),l[v][T].l=R):(k=Jr({c:T,r:v}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=R);break;case 426:if(!o.cellFormula)break;A.push(R),N=o.dense?l[v][T]:l[Ys(T)+E],N.f=uo(R[1],d,{r:g.r,c:T},L,o),N.F=vn(R[0]);break;case 427:if(!o.cellFormula)break;D[Jr(R[0].s)]=R[1],N=o.dense?l[v][T]:l[Ys(T)+E],N.f=uo(R[1],d,{r:g.r,c:T},L,o);break;case 60:if(!o.cellStyles)break;for(;R.e>=R.s;)X[R.e--]={width:R.w/256,hidden:!!(R.flags&1),level:R.level},Q||(Q=!0,xE(R.w/256)),Uf(X[R.e+1]);break;case 161:l["!autofilter"]={ref:vn(R)};break;case 476:l["!margins"]=R;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),R.name&&(s.Sheets[r].CodeName=R.name),(R.above||R.left)&&(l["!outline"]={above:R.above,left:R.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),R.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!H.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+z.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=vn(u||d)),o.sheetRows&&l["!ref"]){var B=Ln(l["!ref"]);o.sheetRows<=+B.e.r&&(B.e.r=o.sheetRows-1,B.e.r>d.e.r&&(B.e.r=d.e.r),B.e.r<B.s.r&&(B.s.r=B.e.r),B.e.c>d.e.c&&(B.e.c=d.e.c),B.e.c<B.s.c&&(B.s.c=B.e.c),l["!fullref"]=l["!ref"],l["!ref"]=vn(B))}return P.length>0&&(l["!merges"]=P),X.length>0&&(l["!cols"]=X),se.length>0&&(l["!rows"]=se),l}function a2e(e,t,r,n,s,a,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=As(t),t.z=t.z||Yr[14],t.v=si(Ns(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var l={r,c:n};switch(l.s=rh(s.cellXfs,t,s),t.l&&a["!links"].push([Jr(l),t.l]),t.c&&a["!comments"].push([Jr(l),t.c]),t.t){case"s":case"str":return s.bookSST?(o=_E(s.Strings,t.v,s.revStrings),l.t="s",l.v=o,i?Ht(e,18,kve(t,l)):Ht(e,7,_ve(t,l))):(l.t="str",i?Ht(e,17,Ive(t,l)):Ht(e,6,Dve(t,l))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Ht(e,13,Pve(t,l)):Ht(e,2,Ave(t,l)):i?Ht(e,16,Eve(t,l)):Ht(e,5,Cve(t,l)),!0;case"b":return l.t="b",i?Ht(e,15,pve(t,l)):Ht(e,4,mve(t,l)),!0;case"e":return l.t="e",i?Ht(e,14,wve(t,l)):Ht(e,3,yve(t,l)),!0}return i?Ht(e,12,fve(t,l)):Ht(e,1,uve(t,l)),!0}function i2e(e,t,r,n){var s=Ln(t["!ref"]||"A1"),a,i="",o=[];Ht(e,145);var l=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=Na(d),nve(e,t,s,d);var f=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(o[h]=Ys(h)),a=o[h]+i;var g=l?(t[d]||[])[h]:t[a];if(!g){f=!1;continue}f=a2e(e,g,d,h,n,t,f)}}Ht(e,146)}function o2e(e,t){!t||!t["!merges"]||(Ht(e,177,Wve(t["!merges"].length)),t["!merges"].forEach(function(r){Ht(e,176,Uve(r))}),Ht(e,178))}function l2e(e,t){!t||!t["!cols"]||(Ht(e,390),t["!cols"].forEach(function(r,n){r&&Ht(e,60,Yve(n,r))}),Ht(e,391))}function c2e(e,t){!t||!t["!ref"]||(Ht(e,648),Ht(e,649,e2e(Ln(t["!ref"]))),Ht(e,650))}function u2e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=rs(r,-1,n[1].Target.replace(/#.*$/,""),Cn.HLINK);Ht(e,494,Gve(n,s))}}),delete t["!links"]}function d2e(e,t,r,n){if(t["!comments"].length>0){var s=rs(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Cn.VML);Ht(e,551,cE("rId"+s)),t["!legacy"]=s}}function f2e(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a=typeof s.ref=="string"?s.ref:vn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=fl(a);o.s.r==o.e.r&&(o.e.r=fl(t["!ref"]).e.r,a=vn(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Ht(e,161,k1(Ln(a))),Ht(e,162)}}function h2e(e,t,r){Ht(e,133),Ht(e,137,Zve(t,r)),Ht(e,138),Ht(e,134)}function m2e(e,t){t["!protect"]&&Ht(e,535,t2e(t["!protect"]))}function g2e(e,t,r,n){var s=dl(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var l=Ln(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Ht(s,129),(r.vbaraw||i["!outline"])&&Ht(s,147,lve(o,i["!outline"])),Ht(s,148,ave(l)),h2e(s,i,r.Workbook),l2e(s,i),i2e(s,i,e,t),m2e(s,i),f2e(s,i,r,e),o2e(s,i),u2e(s,i,n),i["!margins"]&&Ht(s,476,Jve(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&c2e(s,i),d2e(s,i,e,n),Ht(s,130),s.end()}function p2e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var s=In((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,s,n]}function x2e(e,t,r,n,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=p2e(f);d.s.r=d.s.c=0,d.e.c=o,u=Ys(o),h[0].forEach(function(g,x){i[u+Na(x)]={t:"n",v:g,z:h[1]},l=x}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=vn(d)),i}function y2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(eV);return o&&SE(o[0],a,s,r),(i=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function v2e(e,t){e.l+=10;var r=yo(e);return{name:r}}function w2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return w0(e,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var kE=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],b2e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],_2e=[],S2e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function rO(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var a=t[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Ts(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function nO(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ts(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function sV(e){nO(e.WBProps,kE),nO(e.CalcPr,S2e),rO(e.WBView,b2e),rO(e.Sheets,_2e),Fp.date1904=Ts(e.WBProps.date1904)}function k2e(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ts(e.Workbook.WBProps.date1904)?"true":"false"}var T2e="][*?/\\".split("");function aV(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return T2e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function C2e(e,t,r){e.forEach(function(n,s){aV(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[s]&&t[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function E2e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];C2e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)kye(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var N2e=/<\w+:workbook/;function A2e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(e.replace(bo,function(l,u){var d=en(l);switch(sd(d[0])){case"<?xml":break;case"<workbook":l.match(N2e)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":kE.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ts(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=us(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=In(us(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=us(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Ts(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=In(us(e.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Ym.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return sV(r),r}function iV(e){var t=[ja];t[t.length]=lr("workbook",null,{xmlns:Ym[0],"xmlns:r":ti.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(kE.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=lr("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:ss(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=lr("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(t[t.length]=lr("definedName",ss(o.Ref),l))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function j2e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=U8(e),r.name=yo(e),r}function P2e(e,t){return t||(t=Mt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),cE(e.strRelID,t),ki(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function M2e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?yo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function F2e(e,t){t||(t=Mt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),JH(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function D2e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function O2e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=dhe(e),i=yye(e,0,r),o=lE(e);e.l=n;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function I2e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Rv[16]={n:"BrtFRTArchID$",f:D2e},w0(e,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(t.SID=l.Sheet),l.Ref=uo(l.Ptg,null,null,i,t),delete t.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),sV(r),r.Names=a,r.supbooks=i,r}function R2e(e,t){Ht(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Ht(e,156,P2e(s))}Ht(e,144)}function L2e(e,t){t||(t=Mt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return ki("SheetJS",t),ki(F4.version,t),ki(F4.version,t),ki("7262",t),t.length>t.l?t.slice(0,t.l):t}function B2e(e,t){t||(t=Mt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function $2e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Ht(e,135),Ht(e,158,B2e(s)),Ht(e,136))}}function z2e(e,t){var r=dl();return Ht(r,131),Ht(r,128,L2e()),Ht(r,153,F2e(e.Workbook&&e.Workbook.WBProps||null)),$2e(r,e),R2e(r,e),Ht(r,132),r.end()}function U2e(e,t,r){return t.slice(-4)===".bin"?I2e(e,r):A2e(e,r)}function W2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?s2e(e,n,r,s,a,i,o):Oye(e,n,r,s,a,i,o)}function H2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?w2e(e,n,r,s,a):y2e(e,n,r,s,a)}function G2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?q1e():K1e()}function V2e(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?G1e():V1e()}function q2e(e,t,r,n){return t.slice(-4)===".bin"?Upe(e,r,n):jpe(e,r,n)}function K2e(e,t,r){return $G(e,r)}function Y2e(e,t,r){return t.slice(-4)===".bin"?Yge(e,r):Vge(e,r)}function X2e(e,t,r){return t.slice(-4)===".bin"?$1e(e,r):P1e(e,r)}function J2e(e,t,r){return t.slice(-4)===".bin"?N1e(e):C1e(e)}function Q2e(e,t,r,n){return r.slice(-4)===".bin"?A1e(e,t,r,n):void 0}function Z2e(e,t,r){return t.slice(-4)===".bin"?S1e(e,t,r):T1e(e,t,r)}function ewe(e,t,r){return(t.slice(-4)===".bin"?z2e:iV)(e)}function twe(e,t,r,n,s){return(t.slice(-4)===".bin"?g2e:tV)(e,r,n,s)}function rwe(e,t,r){return(t.slice(-4)===".bin"?Qpe:LG)(e,r)}function nwe(e,t,r){return(t.slice(-4)===".bin"?Qge:jG)(e,r)}function swe(e,t,r){return(t.slice(-4)===".bin"?z1e:WG)(e)}function awe(e){return(e.slice(-4)===".bin"?k1e:zG)()}var oV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,lV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Kc(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(oV),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(lV),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function iwe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(oV),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(lV),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var tv;function owe(e,t){var r=tv[e]||In(e);return r==="General"?Mm(t):Sc(r,t)}function lwe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ts(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Ns(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[In(t)]=s}function cwe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||b0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Nv(e.v):e.w=Mm(e.v):e.w=owe(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=tv[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&b1(n)){var s=Zh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function uwe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=_pe[n.Pattern]||n.Pattern)}e[t.ID]=t}function dwe(e,t,r,n,s,a,i,o,l,u){var d="General",f=n.StyleID,h={};u=u||{};var g=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&g.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ts(e);break;case"String":n.t="s",n.r=wD(In(e)),n.v=e.indexOf("<")>-1?In(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ns(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=In(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=rG[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=wD(t||e));break}if(cwe(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=In(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=Mp(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Mp("RC:RC",s):n.ArrayRange&&(n.F=Mp(n.ArrayRange,s),l.push([Ln(n.F),n.F]))}else for(x=0;x<l.length;++x)s.r>=l[x][0].s.r&&s.r<=l[x][0].e.r&&s.c>=l[x][0].s.c&&s.c<=l[x][0].e.c&&(n.F=l[x][1]);u.cellStyles&&(g.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function fwe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function G5(e,t){var r=t||{};_1();var n=Fy(rE(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=us(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=As(r);return i.type="string",qp.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Dt){s.indexOf("<"+Dt)>=0&&(a=!0)}),a)return Jwe(n,r);tv={"General Number":"General","General Date":Yr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Yr[15],"Short Date":Yr[14],"Long Time":Yr[19],"Medium Time":Yr[18],"Short Time":Yr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Yr[2],Standard:Yr[4],Percent:Yr[10],Scientific:Yr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},f=[],h=r.dense?[]:{},g="",x={},y={},v=Kc('<Data ss:Type="String">'),T=0,k=0,b=0,E={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},P={},M="",j=0,A=[],D={},L={},G=0,X=[],se=[],Q={},re=[],B,V=!1,R=[],H=[],z={},I=0,W=0,K={Sheets:[],WBProps:{date1904:!1}},ee={};Pv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var oe="";o=Pv.exec(n);)switch(o[3]=(oe=o[3]).toLowerCase()){case"data":if(oe=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?dwe(n.slice(T,o.index),M,v,l[l.length-1][0]=="comment"?Q:x,{c:k,r:b},N,re[k],y,R,r):(M="",v=Kc(o[0]),T=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(se.length>0&&(x.c=se),(!r.sheetRows||r.sheetRows>b)&&x.v!==void 0&&(r.dense?(h[b]||(h[b]=[]),h[b][k]=x):h[Ys(k)+Na(b)]=x),x.HRef&&(x.l={Target:In(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(I=k+(parseInt(x.MergeAcross,10)|0),W=b+(parseInt(x.MergeDown,10)|0),A.push({s:{c:k,r:b},e:{c:I,r:W}})),!r.sheetStubs)x.MergeAcross?k=I+1:++k;else if(x.MergeAcross||x.MergeDown){for(var Z=k;Z<=I;++Z)for(var le=b;le<=W;++le)(Z>k||le>b)&&(r.dense?(h[le]||(h[le]=[]),h[le][Z]={t:"z"}):h[Ys(Z)+Na(le)]={t:"z"});k=I+1}else++k;else x=iwe(o[0]),x.Index&&(k=+x.Index-1),k<E.s.c&&(E.s.c=k),k>E.e.c&&(E.e.c=k),o[0].slice(-2)==="/>"&&++k,se=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<E.s.r&&(E.s.r=b),b>E.e.r&&(E.e.r=b),o[0].slice(-2)==="/>"&&(y=Kc(o[0]),y.Index&&(b=+y.Index-1)),k=0,++b):(y=Kc(o[0]),y.Index&&(b=+y.Index-1),z={},(y.AutoFitHeight=="0"||y.Height)&&(z.hpx=parseInt(y.Height,10),z.hpt=Iv(z.hpx),H[b]=z),y.Hidden=="1"&&(z.hidden=!0,H[b]=z));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(g),E.s.r<=E.e.r&&E.s.c<=E.e.c&&(h["!ref"]=vn(E),r.sheetRows&&r.sheetRows<=E.e.r&&(h["!fullref"]=h["!ref"],E.e.r=r.sheetRows-1,h["!ref"]=vn(E))),A.length&&(h["!merges"]=A),re.length>0&&(h["!cols"]=re),H.length>0&&(h["!rows"]=H),d[g]=h}else E={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=k=0,l.push([o[3],!1]),u=Kc(o[0]),g=In(u.Name),h=r.dense?[]:{},A=[],R=[],H=[],ee={name:g,Hidden:0},K.Sheets.push(ee);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),re=[],V=!1}break;case"style":o[1]==="/"?uwe(N,P,r):P=Kc(o[0]);break;case"numberformat":P.nf=In(Kc(o[0]).Format||"General"),tv[P.nf]&&(P.nf=tv[P.nf]);for(var ue=0;ue!=392&&Yr[ue]!=P.nf;++ue);if(ue==392){for(ue=57;ue!=392;++ue)if(Yr[ue]==null){e0(P.nf,ue);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(B=Kc(o[0]),B.Hidden&&(B.hidden=!0,delete B.Hidden),B.Width&&(B.wpx=parseInt(B.Width,10)),!V&&B.wpx>10){V=!0,fo=IG;for(var de=0;de<re.length;++de)re[de]&&Uf(re[de])}V&&Uf(B),re[B.Index-1||re.length]=B;for(var Te=0;Te<+B.Span;++Te)re[re.length]=As(B);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var ie=en(o[0]),pe={Name:ie.Name,Ref:Mp(ie.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(pe.Sheet=K.Sheets.length-1),K.Names.push(pe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?M+=n.slice(j,o.index):j=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=Kc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Ihe(D,oe,n.slice(G,o.index)):G=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));fwe(Q),se.push(Q)}else l.push([o[3],!1]),u=Kc(o[0]),Q={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Ae=Kc(o[0]);h["!autofilter"]={ref:Mp(Ae.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return lO(n,r);var Me=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Me=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Me=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Me=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Me=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(G,o.index)){case"SheetHidden":ee.Hidden=1;break;case"SheetVeryHidden":ee.Hidden=2;break}else G=o.index+o[0].length;break;case"header":h["!margins"]||hm(h["!margins"]={},"xlml"),isNaN(+en(o[0]).Margin)||(h["!margins"].header=+en(o[0]).Margin);break;case"footer":h["!margins"]||hm(h["!margins"]={},"xlml"),isNaN(+en(o[0]).Margin)||(h["!margins"].footer=+en(o[0]).Margin);break;case"pagemargins":var Je=en(o[0]);h["!margins"]||hm(h["!margins"]={},"xlml"),isNaN(+Je.Top)||(h["!margins"].top=+Je.Top),isNaN(+Je.Left)||(h["!margins"].left=+Je.Left),isNaN(+Je.Right)||(h["!margins"].right=+Je.Right),isNaN(+Je.Bottom)||(h["!margins"].bottom=+Je.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Me=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Me=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Me=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Me=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Me=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Me=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Me=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Me=!1}break;case"smarttags":break;default:Me=!1;break}if(Me||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?lwe(L,oe,X,n.slice(G,o.index)):(X=o,G=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var Ve={};return!r.bookSheets&&!r.bookProps&&(Ve.Sheets=d),Ve.SheetNames=f,Ve.Workbook=K,Ve.SSF=As(Yr),Ve.Props=D,Ve.Custprops=L,Ve}function Y8(e,t){switch(CE(t=t||{}),t.type||"base64"){case"base64":return G5(Ll(e),t);case"binary":case"buffer":case"file":return G5(e,t);case"array":return G5(eh(e),t)}}function hwe(e,t){var r=[];return e.Props&&r.push(Rhe(e.Props,t)),e.Custprops&&r.push(Lhe(e.Props,e.Custprops)),r.join("")}function mwe(){return""}function gwe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var a=[];a.push(lr("NumberFormat",null,{"ss:Format":ss(Yr[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(lr("Style",a.join(""),i))}),lr("Styles",r.join(""))}function cV(e){return lr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+wE(e.Ref,{r:0,c:0})})}function pwe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(cV(s)))}return lr("Names",r.join(""))}function xwe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(cV(o)))}return a.join("")}function ywe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(lr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(lr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(lr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(lr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Ki("ProtectContents","True")),e["!protect"].objects&&s.push(Ki("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Ki("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Ki("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Ki("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":lr("WorksheetOptions",s.join(""),{xmlns:Nl.x})}function vwe(e){return e.map(function(t){var r=$fe(t.t||""),n=lr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return lr("Comment",n,{"ss:Author":t.a})}).join("")}function wwe(e,t,r,n,s,a,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+ss(wE(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var l=Xs(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=ss(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=ss(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=b0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Yr[14]);break;case"s":f="String",h=Bfe(e.v||"");break}var g=rh(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var x=e.v!=null?h:"",y=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(y+=vwe(e.c)),lr("Cell",y,o)}function bwe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Kp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function _we(e,t,r,n){if(!e["!ref"])return"";var s=Ln(e["!ref"]),a=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,T){Uf(v);var k=!!v.width,b=g3(T,v),E={"ss:Index":T+1};k&&(E["ss:Width"]=Dv(b.width)),v.hidden&&(E["ss:Hidden"]="1"),o.push(lr("Column",null,E))});for(var l=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[bwe(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var h=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>f)&&!(a[i].s.r>u)&&!(a[i].e.c<f)&&!(a[i].e.r<u)){(a[i].s.c!=f||a[i].s.r!=u)&&(h=!0);break}if(!h){var g={r:u,c:f},x=Jr(g),y=l?(e[u]||[])[f]:e[x];d.push(wwe(y,x,e,t,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Swe(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],i=a?xwe(a,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?_we(a,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(ywe(a,t,e,r)),n.join("")}function kwe(e,t){t||(t={}),e.SSF||(e.SSF=As(Yr)),e.SSF&&(_1(),l3(e.SSF),t.revssf=u3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],rh(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(hwe(e,t)),r.push(mwe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(lr("Worksheet",Swe(n,t,e),{"ss:Name":ss(e.SheetNames[n])}));return r[2]=gwe(e,t),r[3]=pwe(e),ja+lr("Workbook",r.join(""),{xmlns:Nl.ss,"xmlns:o":Nl.o,"xmlns:x":Nl.x,"xmlns:ss":Nl.ss,"xmlns:dt":Nl.dt,"xmlns:html":Nl.html})}function Twe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=phe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=xhe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Cwe=[60,1084,2066,2165,2175];function Ewe(e,t,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var l=qd(r,r.l),u=X8[l],d=0;u!=null&&Cwe.indexOf(l)>-1;)a=qd(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=X8[l=qd(r,r.l)];var f=_i(i);Gi(f,0);var h=0;f.lens=[];for(var g=0;g<i.length;++g)f.lens.push(h),h+=i[g].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,s)}function Mu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Yr[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||b0[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Nv(e.v):e.w=Mm(e.v):e.w=Sc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&b1(Yr[n]||String(n))){var s=Zh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function wb(e,t,r){return{v:e,ixfe:t,t:r}}function Nwe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},a={},i={},o=null,l=[],u="",d={},f,h="",g,x,y,v,T={},k=[],b,E,N=[],P=[],M={Sheets:[],WBProps:{date1904:!1},Views:[{}]},j={},A=function(nt){return nt<8?um[nt]:nt<64&&P[nt-8]||um[nt]},D=function(nt,at,It){var Lt=at.XF.data;if(!(!Lt||!Lt.patternType||!It||!It.cellStyles)){at.s={},at.s.patternType=Lt.patternType;var Xt;(Xt=Fv(A(Lt.icvFore)))&&(at.s.fgColor={rgb:Xt}),(Xt=Fv(A(Lt.icvBack)))&&(at.s.bgColor={rgb:Xt})}},L=function(nt,at,It){if(!(z>1)&&!(It.sheetRows&&nt.r>=It.sheetRows)){if(It.cellStyles&&at.XF&&at.XF.data&&D(nt,at,It),delete at.ixfe,delete at.XF,f=nt,h=Jr(nt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),nt.r<i.s.r&&(i.s.r=nt.r),nt.c<i.s.c&&(i.s.c=nt.c),nt.r+1>i.e.r&&(i.e.r=nt.r+1),nt.c+1>i.e.c&&(i.e.c=nt.c+1),It.cellFormula&&at.f){for(var Lt=0;Lt<k.length;++Lt)if(!(k[Lt][0].s.c>nt.c||k[Lt][0].s.r>nt.r)&&!(k[Lt][0].e.c<nt.c||k[Lt][0].e.r<nt.r)){at.F=vn(k[Lt][0]),(k[Lt][0].s.c!=nt.c||k[Lt][0].s.r!=nt.r)&&delete at.f,at.f&&(at.f=""+uo(k[Lt][1],i,nt,R,G));break}}It.dense?(s[nt.r]||(s[nt.r]=[]),s[nt.r][nt.c]=at):s[h]=at}},G={enc:!1,sbcch:0,snames:[],sharedf:T,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(G.password=t.password);var X,se=[],Q=[],re=[],B=[],V=!1,R=[];R.SheetNames=G.snames,R.sharedf=G.sharedf,R.arrayf=G.arrayf,R.names=[],R.XTI=[];var H=0,z=0,I=0,W=[],K=[],ee;G.codepage=1200,tu(1200);for(var oe=!1;e.l<e.length-1;){var Z=e.l,le=e.read_shift(2);if(le===0&&H===10)break;var ue=e.l===e.length?0:e.read_shift(2),de=X8[le];if(de&&de.f){if(t.bookSheets&&H===133&&le!==133)break;if(H=le,de.r===2||de.r==12){var Te=e.read_shift(2);if(ue-=2,!G.enc&&Te!==le&&((Te&255)<<8|Te>>8)!==le)throw new Error("rt mismatch: "+Te+"!="+le);de.r==12&&(e.l+=10,ue-=10)}var ie={};if(le===10?ie=de.f(e,ue,G):ie=Ewe(le,de,e,ue,G),z==0&&[9,521,1033,2057].indexOf(H)===-1)continue;switch(le){case 34:r.opts.Date1904=M.WBProps.date1904=ie;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(G.enc||(e.l=0),G.enc=ie,!t.password)throw new Error("File is password-protected");if(ie.valid==null)throw new Error("Encryption scheme unsupported");if(!ie.valid)throw new Error("Password is incorrect");break;case 92:G.lastuser=ie;break;case 66:var pe=Number(ie);switch(pe){case 21010:pe=1200;break;case 32768:pe=1e4;break;case 32769:pe=1252;break}tu(G.codepage=pe),oe=!0;break;case 317:G.rrtabid=ie;break;case 25:G.winlocked=ie;break;case 439:r.opts.RefreshAll=ie;break;case 12:r.opts.CalcCount=ie;break;case 16:r.opts.CalcDelta=ie;break;case 17:r.opts.CalcIter=ie;break;case 13:r.opts.CalcMode=ie;break;case 14:r.opts.CalcPrecision=ie;break;case 95:r.opts.CalcSaveRecalc=ie;break;case 15:G.CalcRefMode=ie;break;case 2211:r.opts.FullCalc=ie;break;case 129:ie.fDialog&&(s["!type"]="dialog"),ie.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ie.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:N.push(ie);break;case 430:R.push([ie]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(ie);break;case 24:case 536:ee={Name:ie.Name,Ref:uo(ie.rgce,i,null,R,G)},ie.itab>0&&(ee.Sheet=ie.itab-1),R.names.push(ee),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(ie),ie.Name=="_xlnm._FilterDatabase"&&ie.itab>0&&ie.rgce&&ie.rgce[0]&&ie.rgce[0][0]&&ie.rgce[0][0][0]=="PtgArea3d"&&(K[ie.itab-1]={ref:vn(ie.rgce[0][0][1][2])});break;case 22:G.ExternCount=ie;break;case 23:R.length==0&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(ie),R.XTI=R.XTI.concat(ie);break;case 2196:if(G.biff<8)break;ee!=null&&(ee.Comment=ie[1]);break;case 18:s["!protect"]=ie;break;case 19:ie!==0&&G.WTF&&console.error("Password verifier: "+ie);break;case 133:a[ie.pos]=ie,G.snames.push(ie.name);break;case 10:{if(--z)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=vn(i),t.sheetRows&&t.sheetRows<=i.e.r){var Ae=i.e.r;i.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=vn(i),i.e.r=Ae}i.e.r++,i.e.c++}se.length>0&&(s["!merges"]=se),Q.length>0&&(s["!objects"]=Q),re.length>0&&(s["!cols"]=re),B.length>0&&(s["!rows"]=B),M.Sheets.push(j)}u===""?d=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(G.biff===8&&(G.biff={9:2,521:3,1033:4}[le]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ie.BIFFVer]||8),G.biffguess=ie.BIFFVer==0,ie.BIFFVer==0&&ie.dt==4096&&(G.biff=5,oe=!0,tu(G.codepage=28591)),G.biff==8&&ie.BIFFVer==0&&ie.dt==16&&(G.biff=2),z++)break;if(s=t.dense?[]:{},G.biff<8&&!oe&&(oe=!0,tu(G.codepage=t.codepage||1252)),G.biff<5||ie.BIFFVer==0&&ie.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Me={pos:e.l-ue,name:u};a[Me.pos]=Me,G.snames.push(u)}else u=(a[Z]||{name:""}).name;ie.dt==32&&(s["!type"]="chart"),ie.dt==64&&(s["!type"]="macro"),se=[],Q=[],G.arrayf=k=[],re=[],B=[],V=!1,j={Hidden:(a[Z]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[ie.r]||[])[ie.c]:s[Jr({c:ie.c,r:ie.r})])&&++ie.c,b={ixfe:ie.ixfe,XF:N[ie.ixfe]||{},v:ie.val,t:"n"},I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 5:case 517:b={ixfe:ie.ixfe,XF:N[ie.ixfe],v:ie.val,t:ie.t},I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 638:b={ixfe:ie.ixfe,XF:N[ie.ixfe],v:ie.rknum,t:"n"},I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 189:for(var Je=ie.c;Je<=ie.C;++Je){var Ve=ie.rkrec[Je-ie.c][0];b={ixfe:Ve,XF:N[Ve],v:ie.rkrec[Je-ie.c][1],t:"n"},I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L({c:Je,r:ie.r},b,t)}break;case 6:case 518:case 1030:{if(ie.val=="String"){o=ie;break}if(b=wb(ie.val,ie.cell.ixfe,ie.tt),b.XF=N[b.ixfe],t.cellFormula){var Dt=ie.formula;if(Dt&&Dt[0]&&Dt[0][0]&&Dt[0][0][0]=="PtgExp"){var lt=Dt[0][0][1][0],At=Dt[0][0][1][1],vt=Jr({r:lt,c:At});T[vt]?b.f=""+uo(ie.formula,i,ie.cell,R,G):b.F=((t.dense?(s[lt]||[])[At]:s[vt])||{}).F}else b.f=""+uo(ie.formula,i,ie.cell,R,G)}I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L(ie.cell,b,t),o=ie}break;case 7:case 519:if(o)o.val=ie,b=wb(ie,o.cell.ixfe,"s"),b.XF=N[b.ixfe],t.cellFormula&&(b.f=""+uo(o.formula,i,o.cell,R,G)),I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L(o.cell,b,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(ie);var ct=Jr(ie[0].s);if(g=t.dense?(s[ie[0].s.r]||[])[ie[0].s.c]:s[ct],t.cellFormula&&g){if(!o||!ct||!g)break;g.f=""+uo(ie[1],i,ie[0],R,G),g.F=vn(ie[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;T[Jr(o.cell)]=ie[0],g=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[Jr(o.cell)],(g||{}).f=""+uo(ie[0],i,f,R,G)}}break;case 253:b=wb(l[ie.isst].t,ie.ixfe,"s"),l[ie.isst].h&&(b.h=l[ie.isst].h),b.XF=N[b.ixfe],I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:ie.ixfe,XF:N[ie.ixfe],t:"z"},I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t));break;case 190:if(t.sheetStubs)for(var bt=ie.c;bt<=ie.C;++bt){var Ut=ie.ixfe[bt-ie.c];b={ixfe:Ut,XF:N[Ut],t:"z"},I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L({c:bt,r:ie.r},b,t)}break;case 214:case 516:case 4:b=wb(ie.val,ie.ixfe,"s"),b.XF=N[b.ixfe],I>0&&(b.z=W[b.ixfe>>8&63]),Mu(b,t,r.opts.Date1904),L({c:ie.c,r:ie.r},b,t);break;case 0:case 512:z===1&&(i=ie);break;case 252:l=ie;break;case 1054:if(G.biff==4){W[I++]=ie[1];for(var Bt=0;Bt<I+163&&Yr[Bt]!=ie[1];++Bt);Bt>=163&&e0(ie[1],I+163)}else e0(ie[1],ie[0]);break;case 30:{W[I++]=ie;for(var Vt=0;Vt<I+163&&Yr[Vt]!=ie;++Vt);Vt>=163&&e0(ie,I+163)}break;case 229:se=se.concat(ie);break;case 93:Q[ie.cmo[0]]=G.lastobj=ie;break;case 438:G.lastobj.TxO=ie;break;case 127:G.lastobj.ImData=ie;break;case 440:for(v=ie[0].s.r;v<=ie[0].e.r;++v)for(y=ie[0].s.c;y<=ie[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[Jr({c:y,r:v})],g&&(g.l=ie[1]);break;case 2048:for(v=ie[0].s.r;v<=ie[0].e.r;++v)for(y=ie[0].s.c;y<=ie[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[Jr({c:y,r:v})],g&&g.l&&(g.l.Tooltip=ie[1]);break;case 28:{if(G.biff<=5&&G.biff>=2)break;g=t.dense?(s[ie[0].r]||[])[ie[0].c]:s[Jr(ie[0])];var We=Q[ie[2]];g||(t.dense?(s[ie[0].r]||(s[ie[0].r]=[]),g=s[ie[0].r][ie[0].c]={t:"z"}):g=s[Jr(ie[0])]={t:"z"},i.e.r=Math.max(i.e.r,ie[0].r),i.s.r=Math.min(i.s.r,ie[0].r),i.e.c=Math.max(i.e.c,ie[0].c),i.s.c=Math.min(i.s.c,ie[0].c)),g.c||(g.c=[]),x={a:ie[1],t:We.TxO.t},g.c.push(x)}break;case 2173:g1e(N[ie.ixfe],ie.ext);break;case 125:{if(!G.cellStyles)break;for(;ie.e>=ie.s;)re[ie.e--]={width:ie.w/256,level:ie.level||0,hidden:!!(ie.flags&1)},V||(V=!0,xE(ie.w/256)),Uf(re[ie.e+1])}break;case 520:{var Ue={};ie.level!=null&&(B[ie.r]=Ue,Ue.level=ie.level),ie.hidden&&(B[ie.r]=Ue,Ue.hidden=!0),ie.hpt&&(B[ie.r]=Ue,Ue.hpt=ie.hpt,Ue.hpx=Kp(ie.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||hm(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[le]]=ie;break;case 161:s["!margins"]||hm(s["!margins"]={}),s["!margins"].header=ie.header,s["!margins"].footer=ie.footer;break;case 574:ie.RTL&&(M.Views[0].RTL=!0);break;case 146:P=ie;break;case 2198:X=ie;break;case 140:E=ie;break;case 442:u?j.CodeName=ie||j.name:M.WBProps.CodeName=ie||"ThisWorkbook";break}}else de||console.error("Missing Info for XLS Record 0x"+le.toString(16)),e.l+=ue}return r.SheetNames=ma(a).sort(function(tt,nt){return Number(tt)-Number(nt)}).map(function(tt){return a[tt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&K.forEach(function(tt,nt){r.Sheets[r.SheetNames[nt]]["!autofilter"]=tt}),r.Strings=l,r.SSF=As(Yr),G.enc&&(r.Encryption=G.enc),X&&(r.Themes=X),r.Metadata={},E!==void 0&&(r.Metadata.Country=E),R.names.length>0&&(M.Names=R.names),r.Workbook=M,r}var rv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Awe(e,t,r){var n=zr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=LD(n,W8,rv.DSI);for(var a in s)t[a]=s[a]}catch(u){if(r.WTF)throw u}var i=zr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=LD(i,H8,rv.SI);for(var l in o)t[l]==null&&(t[l]=o[l])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(lG(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function jwe(e,t){var r=[],n=[],s=[],a=0,i,o=mD(W8,"n"),l=mD(H8,"n");if(e.Props)for(i=ma(e.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],e.Props[i[a]]]);if(e.Custprops)for(i=ma(e.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],e.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)gG.indexOf(s[a][0])>-1||oG.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&zr.utils.cfb_add(t,"/SummaryInformation",BD(n,rv.SI,l,H8)),(r.length||u.length)&&zr.utils.cfb_add(t,"/DocumentSummaryInformation",BD(r,rv.DSI,o,W8,u.length?u:null,rv.UDI))}function uV(e,t){t||(t={}),CE(t),qC(),t.codepage&&VC(t.codepage);var r,n;if(e.FullPaths){if(zr.find(e,"/encryption"))throw new Error("File is password-protected");r=zr.find(e,"!CompObj"),n=zr.find(e,"/Workbook")||zr.find(e,"/Book")}else{switch(t.type){case"base64":e=Ml(Ll(e));break;case"binary":e=Ml(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Gi(e,0),n={content:e}}var s,a;if(r&&Twe(r),t.bookProps&&!t.bookSheets)s={};else{var i=Sn?"buffer":"array";if(n&&n.content)s=Nwe(n.content,t);else if((a=zr.find(e,"PerfectOffice_MAIN"))&&a.content)s=fm.to_workbook(a.content,(t.type=i,t));else if((a=zr.find(e,"NativeContent_MAIN"))&&a.content)s=fm.to_workbook(a.content,(t.type=i,t));else throw(a=zr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&zr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=W1e(e))}var o={};return e.FullPaths&&Awe(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function Pwe(e,t){var r=t||{},n=zr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return zr.utils.cfb_add(n,s,dV(e,r)),r.biff==8&&(e.Props||e.Custprops)&&jwe(e,n),r.biff==8&&e.vbaraw&&H1e(n,zr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Rv={0:{f:tve},1:{f:cve},2:{f:Nve},3:{f:xve},4:{f:hve},5:{f:Tve},6:{f:Fve},7:{f:bve},8:{f:$ve},9:{f:Bve},10:{f:Rve},11:{f:Lve},12:{f:dve},13:{f:jve},14:{f:vve},15:{f:gve},16:{f:rV},17:{f:Ove},18:{f:Sve},19:{f:oE},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:O2e},40:{},42:{},43:{f:Fpe},44:{f:Ppe},45:{f:Ipe},46:{f:Lpe},47:{f:Rpe},48:{},49:{f:she},50:{},51:{f:y1e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:CG},62:{f:Mve},63:{f:E1e},64:{f:r2e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:wo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Qve},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ove},148:{f:sve,p:16},151:{f:Vve},152:{},153:{f:M2e},154:{},155:{},156:{f:j2e},157:{},158:{},159:{T:1,f:Kge},160:{T:-1},161:{T:1,f:Zm},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:zve},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:p1e},336:{T:-1},337:{f:b1e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:U8},357:{},358:{},359:{},360:{T:1},361:{},362:{f:TG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:qve},427:{f:Kve},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Xve},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:ive},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Hve},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:U8},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:L1e},633:{T:1},634:{T:-1},635:{T:1,f:I1e},636:{T:-1},637:{f:lhe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:v2e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:n2e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},X8={6:{f:W5},10:{f:gf},12:{f:Ra},13:{f:Ra},14:{f:Sa},15:{f:Sa},16:{f:mo},17:{f:Sa},18:{f:Sa},19:{f:Ra},20:{f:GD},21:{f:GD},23:{f:TG},24:{f:qD},25:{f:Sa},26:{},27:{},28:{f:nge},29:{},34:{f:Sa},35:{f:VD},38:{f:mo},39:{f:mo},40:{f:mo},41:{f:mo},42:{f:Sa},43:{f:Sa},47:{f:gpe},49:{f:jme},51:{f:Ra},60:{},61:{f:Tme},64:{f:Sa},65:{f:Ame},66:{f:Ra},77:{},80:{},81:{},82:{},85:{f:Ra},89:{},90:{},91:{},92:{f:mme},93:{f:ige},94:{},95:{f:Sa},96:{},97:{},99:{f:Sa},125:{f:CG},128:{f:Gme},129:{f:pme},130:{f:Ra},131:{f:Sa},132:{f:Sa},133:{f:xme},134:{},140:{f:mge},141:{f:Ra},144:{},146:{f:xge},151:{},152:{},153:{},154:{},155:{},156:{f:Ra},157:{},158:{},160:{f:kge},161:{f:wge},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:zme},190:{f:Ume},193:{f:gf},197:{},198:{},199:{},200:{},201:{},202:{f:Sa},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ra},220:{},221:{f:Sa},222:{},224:{f:Hme},225:{f:hme},226:{f:gf},227:{},229:{f:sge},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:vme},253:{f:Mme},255:{f:bme},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:pG},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Sa},353:{f:gf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Xme},431:{f:Sa},432:{},433:{},434:{},437:{},438:{f:cge},439:{f:Sa},440:{f:uge},441:{},442:{f:k2},443:{},444:{f:Ra},445:{},446:{},448:{f:gf},449:{f:kme,r:2},450:{f:gf},512:{f:UD},513:{f:Sge},515:{f:Kme},516:{f:Dme},517:{f:HD},519:{f:Tge},520:{f:_me},523:{},545:{f:KD},549:{f:zD},566:{},574:{f:Eme},638:{f:$me},659:{},1048:{},1054:{f:Ime},1084:{},1212:{f:ege},2048:{f:fge},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:xb},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:gf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:yge,r:12},2173:{f:m1e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Sa,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Zme,r:12},2197:{},2198:{f:l1e,r:12},2199:{},2200:{},2201:{},2202:{f:tge,r:12},2203:{f:gf},2204:{},2205:{},2206:{},2207:{},2211:{f:Sme},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ra},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:bge},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:pge},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:UD},1:{},2:{f:jge},3:{f:Nge},4:{f:Ege},5:{f:HD},7:{f:Mge},8:{},9:{f:xb},11:{},22:{f:Ra},30:{f:Lme},31:{},32:{},33:{f:KD},36:{},37:{f:zD},50:{f:Fge},62:{},52:{},67:{},68:{f:Ra},69:{},86:{},126:{},127:{f:Cge},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Dge},223:{},234:{},354:{},421:{},518:{f:W5},521:{f:xb},536:{f:qD},547:{f:VD},561:{},579:{},1030:{f:W5},1033:{f:xb},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function cr(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&sE(r)&&e.push(r)}}function Mwe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return cr(e,t,r,s);var a=t;if(!isNaN(a)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u;l<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(l,l+u)),l+=u}}}function N2(e,t,r){return e||(e=Mt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Fwe(e,t,r,n){var s=Mt(9);return N2(s,e,t),xG(r,n||"b",s),s}function Dwe(e,t,r){var n=Mt(8+2*r.length);return N2(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Owe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?si(Ns(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?cr(e,2,Pge(r,n,s)):cr(e,3,Age(r,n,s));return;case"b":case"e":cr(e,5,Fwe(r,n,t.v,t.t));return;case"s":case"str":cr(e,4,Dwe(r,n,(t.v||"").slice(0,255)));return}cr(e,1,N2(null,r,n))}function Iwe(e,t,r,n){var s=Array.isArray(t),a=Ln(t["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=vn(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Na(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=Ys(d)),i=l[d]+o;var f=s?(t[u]||[])[d]:t[i];f&&Owe(e,f,u,d)}}}function Rwe(e,t){for(var r=t||{},n=dl(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return cr(n,r.biff==4?1033:r.biff==3?521:9,mE(e,16,r)),Iwe(n,e.Sheets[e.SheetNames[s]],s,r),cr(n,10),n.end()}function Lwe(e,t,r){cr(e,49,Pme({sz:12,name:"Arial"},r))}function Bwe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&cr(e,1054,Rme(s,t[s],r))})}function $we(e,t){var r=Mt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),cr(e,2151,r),r=Mt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),_G(Ln(t["!ref"]||"A1"),r),r.write_shift(4,4),cr(e,2152,r)}function zwe(e,t){for(var r=0;r<16;++r)cr(e,224,WD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){cr(e,224,WD(n,0,t))})}function Uwe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];cr(e,440,dge(n)),n[1].Tooltip&&cr(e,2048,hge(n))}delete t["!links"]}function Wwe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&cr(e,125,vge(g3(s,n),s))})}}function Hwe(e,t,r,n,s){var a=16+rh(s.cellXfs,t,s);if(t.v==null&&!t.bf){cr(e,513,Im(r,n,a));return}if(t.bf)cr(e,6,pye(t,r,n,s,a));else switch(t.t){case"d":case"n":var i=t.t=="d"?si(Ns(t.v)):t.v;cr(e,515,Yme(r,n,i,a));break;case"b":case"e":cr(e,517,qme(r,n,t.v,a,s,t.t));break;case"s":case"str":if(s.bookSST){var o=_E(s.Strings,t.v,s.revStrings);cr(e,253,Fme(r,n,o,a))}else cr(e,516,Ome(r,n,(t.v||"").slice(0,255),a,s));break;default:cr(e,513,Im(r,n,a))}}function Gwe(e,t,r){var n=dl(),s=r.SheetNames[e],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},l=Array.isArray(a),u=t.biff==8,d,f="",h=[],g=Ln(a["!ref"]||"A1"),x=u?65536:16384;if(g.e.c>255||g.e.r>=x){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,x-1)}cr(n,2057,mE(r,16,t)),cr(n,13,uc(1)),cr(n,12,uc(100)),cr(n,15,Io(!0)),cr(n,17,Io(!1)),cr(n,16,Dm(.001)),cr(n,95,Io(!0)),cr(n,42,Io(!1)),cr(n,43,Io(!1)),cr(n,130,uc(1)),cr(n,128,Vme()),cr(n,131,Io(!1)),cr(n,132,Io(!1)),u&&Wwe(n,a["!cols"]),cr(n,512,Bme(g,t)),u&&(a["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){f=Na(y);for(var v=g.s.c;v<=g.e.c;++v){y===g.s.r&&(h[v]=Ys(v)),d=h[v]+f;var T=l?(a[y]||[])[v]:a[d];T&&(Hwe(n,T,y,v,t),u&&T.l&&a["!links"].push([d,T.l]))}}var k=o.CodeName||o.name||s;return u&&cr(n,574,Nme((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&cr(n,229,age(a["!merges"])),u&&Uwe(n,a),cr(n,442,yG(k)),u&&$we(n,a),cr(n,10),n.end()}function Vwe(e,t,r){var n=dl(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(cr(n,2057,mE(e,5,r)),r.bookType=="xla"&&cr(n,135),cr(n,225,o?uc(1200):null),cr(n,193,qhe(2)),l&&cr(n,191),l&&cr(n,192),cr(n,226),cr(n,92,gme("SheetJS",r)),cr(n,66,uc(o?1200:1252)),o&&cr(n,353,uc(0)),o&&cr(n,448),cr(n,317,_ge(e.SheetNames.length)),o&&e.vbaraw&&cr(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";cr(n,442,yG(u))}cr(n,156,uc(17)),cr(n,25,Io(!1)),cr(n,18,Io(!1)),cr(n,19,uc(0)),o&&cr(n,431,Io(!1)),o&&cr(n,444,uc(0)),cr(n,61,Cme()),cr(n,64,Io(!1)),cr(n,141,uc(0)),cr(n,34,Io(k2e(e)=="true")),cr(n,14,Io(!0)),o&&cr(n,439,Io(!1)),cr(n,218,uc(0)),Lwe(n,e,r),Bwe(n,e.SSF,r),zwe(n,r),o&&cr(n,352,Io(!1));var d=n.end(),f=dl();o&&cr(f,140,gge()),o&&r.Strings&&Mwe(f,252,wme(r.Strings)),cr(f,10);var h=f.end(),g=dl(),x=0,y=0;for(y=0;y<e.SheetNames.length;++y)x+=(o?12:11)+(o?2:1)*e.SheetNames[y].length;var v=d.length+x+h.length;for(y=0;y<e.SheetNames.length;++y){var T=a[y]||{};cr(g,133,yme({pos:v,hs:T.Hidden||0,dt:0,name:e.SheetNames[y]},r)),v+=t[y].length}var k=g.end();if(x!=k.length)throw new Error("BS8 "+x+" != "+k.length);var b=[];return d.length&&b.push(d),k.length&&b.push(k),h.length&&b.push(h),_i(b)}function qwe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=As(Yr)),e&&e.SSF&&(_1(),l3(e.SSF),r.revssf=u3(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,EE(r),r.cellXfs=[],rh(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=Gwe(s,r,e);return n.unshift(Vwe(e,n,r)),_i(n)}function dV(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=fl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return qwe(e,t);case 4:case 3:case 2:return Rwe(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function sO(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,l=Pfe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(i=0;i<l.length;++i){var y=l[i].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var T=y.split(/<\/t[dh]>/i);for(o=0;o<T.length;++o){var k=T[o].trim();if(k.match(/<t[dh]/i)){for(var b=k,E=0;b.charAt(0)=="<"&&(E=b.indexOf(">"))>-1;)b=b.slice(E+1);for(var N=0;N<x.length;++N){var P=x[N];P.s.c==d&&P.s.r<u&&u<=P.e.r&&(d=P.e.c+1,N=-1)}var M=en(k.slice(0,k.indexOf(">")));h=M.colspan?+M.colspan:1,((f=+M.rowspan)>1||h>1)&&x.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var j=M.t||M["data-t"]||"";if(!b.length){d+=h;continue}if(b=OH(b),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!b.length){d+=h;continue}var A={t:"s",v:b};r.raw||!b.trim().length||j=="s"||(b==="TRUE"?A={t:"b",v:!0}:b==="FALSE"?A={t:"b",v:!1}:isNaN(su(b))?isNaN(Vp(b).getDate())||(A={t:"d",v:Ns(b)},r.cellDates||(A={t:"n",v:si(A.v)}),A.z=r.dateNF||Yr[14]):A={t:"n",v:su(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=A):n[Jr({r:u,c:d})]=A,d+=h}}}}return n["!ref"]=vn(g),x.length&&(n["!merges"]=x),n}function Kwe(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=Jr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||tE(f.w||(d0(f),f.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(g["data-t"]=f&&f.t||"z",f.v!=null&&(g["data-v"]=f.v),f.z!=null&&(g["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),g.id=(n.id||"sjs")+"-"+d,a.push(lr("td",h,g))}}var x="<tr>";return x+a.join("")+"</tr>"}var Ywe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Xwe="</body></html>";function Jwe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return th(sO(r[0],t),t);var n=jE();return r.forEach(function(s,a){PE(n,sO(s,t),"Sheet"+(a+1))}),n}function Qwe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function fV(e,t){var r=t||{},n=r.header!=null?r.header:Ywe,s=r.footer!=null?r.footer:Xwe,a=[n],i=fl(e["!ref"]);r.dense=Array.isArray(e),a.push(Qwe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(Kwe(e,i,o,r));return a.push("</table>"+s),a.join("")}function hV(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?Xs(n.origin):n.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=fl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],h=0,g=e["!rows"]||(e["!rows"]=[]),x=0,y=0,v=0,T=0,k=0,b=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&y<l;++x){var E=o[x];if(aO(E)){if(n.display)continue;g[y]={hidden:!0}}var N=E.children;for(v=T=0;v<N.length;++v){var P=N[v];if(!(n.display&&aO(P))){var M=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):OH(P.innerHTML),j=P.getAttribute("data-z")||P.getAttribute("z");for(h=0;h<f.length;++h){var A=f[h];A.s.c==T+a&&A.s.r<y+s&&y+s<=A.e.r&&(T=A.e.c+1-a,h=-1)}b=+P.getAttribute("colspan")||1,((k=+P.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:y+s,c:T+a},e:{r:y+s+(k||1)-1,c:T+a+(b||1)-1}});var D={t:"s",v:M},L=P.getAttribute("data-t")||P.getAttribute("t")||"";M!=null&&(M.length==0?D.t=L||"z":n.raw||M.trim().length==0||L=="s"||(M==="TRUE"?D={t:"b",v:!0}:M==="FALSE"?D={t:"b",v:!1}:isNaN(su(M))?isNaN(Vp(M).getDate())||(D={t:"d",v:Ns(M)},n.cellDates||(D={t:"n",v:si(D.v)}),D.z=n.dateNF||Yr[14]):D={t:"n",v:su(M)})),D.z===void 0&&j!=null&&(D.z=j);var G="",X=P.getElementsByTagName("A");if(X&&X.length)for(var se=0;se<X.length&&!(X[se].hasAttribute("href")&&(G=X[se].getAttribute("href"),G.charAt(0)!="#"));++se);G&&G.charAt(0)!="#"&&(D.l={Target:G}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][T+a]=D):e[Jr({c:T+a,r:y+s})]=D,u.e.c<T+a&&(u.e.c=T+a),T+=b}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=vn(u),y>=l&&(e["!fullref"]=vn((u.e.r=o.length-x+y-1+s,u))),e}function mV(e,t){var r=t||{},n=r.dense?[]:{};return hV(n,e,t)}function Zwe(e,t){return th(mV(e,t),t)}function aO(e){var t="",r=ebe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function ebe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function tbe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=In(t.replace(/<[^>]*>/g,""));return[r]}var iO={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function gV(e,t){var r=t||{},n=rE(e),s=[],a,i,o={name:""},l="",u=0,d,f,h={},g=[],x=r.dense?[]:{},y,v,T={value:""},k="",b=0,E=[],N=-1,P=-1,M={s:{r:1e6,c:1e7},e:{r:0,c:0}},j=0,A={},D=[],L={},G=0,X=0,se=[],Q=1,re=1,B=[],V={Names:[]},R={},H=["",""],z=[],I={},W="",K=0,ee=!1,oe=!1,Z=0;for(Pv.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=Pv.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(M.e.c>=M.s.c&&M.e.r>=M.s.r?x["!ref"]=vn(M):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=M.e.r&&(x["!fullref"]=x["!ref"],M.e.r=r.sheetRows-1,x["!ref"]=vn(M)),D.length&&(x["!merges"]=D),se.length&&(x["!rows"]=se),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),h[d.name]=x,oe=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=en(y[0],!1),N=P=-1,M.s.r=M.s.c=1e7,M.e.r=M.e.c=0,x=r.dense?[]:{},D=[],se=[],oe=!0);break;case"table-row-group":y[1]==="/"?--j:++j;break;case"table-row":case"":if(y[1]==="/"){N+=Q,Q=1;break}if(f=en(y[0],!1),f.?N=f.-1:N==-1&&(N=0),Q=+f["number-rows-repeated"]||1,Q<10)for(Z=0;Z<Q;++Z)j>0&&(se[N+Z]={level:j});P=-1;break;case"covered-table-cell":y[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(x[N]||(x[N]=[]),x[N][P]={t:"z"}):x[Jr({r:N,c:P})]={t:"z"}),k="",E=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++P,T=en(y[0],!1),re=parseInt(T["number-columns-repeated"]||"1",10),v={t:"z",v:null},T.formula&&r.cellFormula!=!1&&(v.f=tO(In(T.formula))),(T.||T["value-type"])=="string"&&(v.t="s",v.v=In(T["string-value"]||""),r.dense?(x[N]||(x[N]=[]),x[N][P]=v):x[Jr({r:N,c:P})]=v),P+=re-1;else if(y[1]!=="/"){++P,k="",b=0,E=[],re=1;var le=Q?N+Q-1:N;if(P>M.e.c&&(M.e.c=P),P<M.s.c&&(M.s.c=P),N<M.s.r&&(M.s.r=N),le>M.e.r&&(M.e.r=le),T=en(y[0],!1),z=[],I={},v={t:T.||T["value-type"],v:null},r.cellFormula)if(T.formula&&(T.formula=In(T.formula)),T["number-matrix-columns-spanned"]&&T["number-matrix-rows-spanned"]&&(G=parseInt(T["number-matrix-rows-spanned"],10)||0,X=parseInt(T["number-matrix-columns-spanned"],10)||0,L={s:{r:N,c:P},e:{r:N+G-1,c:P+X-1}},v.F=vn(L),B.push([L,v.F])),T.formula)v.f=tO(T.formula);else for(Z=0;Z<B.length;++Z)N>=B[Z][0].s.r&&N<=B[Z][0].e.r&&P>=B[Z][0].s.c&&P<=B[Z][0].e.c&&(v.F=B[Z][1]);switch((T["number-columns-spanned"]||T["number-rows-spanned"])&&(G=parseInt(T["number-rows-spanned"],10)||0,X=parseInt(T["number-columns-spanned"],10)||0,L={s:{r:N,c:P},e:{r:N+G-1,c:P+X-1}},D.push(L)),T["number-columns-repeated"]&&(re=parseInt(T["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ts(T["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(T.value);break;case"percentage":v.t="n",v.v=parseFloat(T.value);break;case"currency":v.t="n",v.v=parseFloat(T.value);break;case"date":v.t="d",v.v=Ns(T["date-value"]),r.cellDates||(v.t="n",v.v=si(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=Nfe(T["time-value"])/86400,r.cellDates&&(v.t="d",v.v=d3(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(T.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",T["string-value"]!=null&&(k=In(T["string-value"]),E=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(ee=!1,v.t==="s"&&(v.v=k||"",E.length&&(v.R=E),ee=b==0),R.Target&&(v.l=R),z.length>0&&(v.c=z,z=[]),k&&r.cellText!==!1&&(v.w=k),ee&&(v.t="z",delete v.v),(!ee||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=N))for(var ue=0;ue<Q;++ue){if(re=parseInt(T["number-columns-repeated"]||"1",10),r.dense)for(x[N+ue]||(x[N+ue]=[]),x[N+ue][P]=ue==0?v:As(v);--re>0;)x[N+ue][P+re]=As(v);else for(x[Jr({r:N+ue,c:P})]=v;--re>0;)x[Jr({r:N+ue,c:P+re})]=As(v);M.e.c<=P&&(M.e.c=P)}re=parseInt(T["number-columns-repeated"]||"1",10),P+=re-1,re=0,v={},k="",E=[]}R={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;I.t=k,E.length&&(I.R=E),I.a=W,z.push(I)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);W="",K=0,k="",b=0,E=[];break;case"creator":y[1]==="/"?W=n.slice(K,y.index):K=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);k="",b=0,E=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(A[o.name]=l,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=en(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=en(y[0],!1),l+=iO[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=en(y[0],!1),l+=iO[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=en(y[0],!1),H=H5(i["cell-range-address"]);var de={Name:i.name,Ref:H[0]+"!"+H[1]};oe&&(de.Sheet=g.length),V.Names.push(de);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!T||!T["string-value"])){var Te=tbe(n.slice(b,y.index));k=(k.length>0?k+`
`:"")+Te[0]}else en(y[0],!1),b=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{H=H5(en(y[0])["target-range-address"]),h[H[0]]["!autofilter"]={ref:H[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(R=en(y[0],!1),!R.href)break;R.Target=In(R.href),delete R.href,R.Target.charAt(0)=="#"&&R.Target.indexOf(".")>-1?(H=H5(R.Target.slice(1)),R.Target="#"+H[0]+"!"+H[1]):R.Target.match(/^\.\.[\\\/]/)&&(R.Target=R.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var ie={Sheets:h,SheetNames:g,Workbook:V};return r.bookSheets&&delete ie.Sheets,ie}function oO(e,t){t=t||{},cc(e,"META-INF/manifest.xml")&&Nhe(Ia(e,"META-INF/manifest.xml"),t);var r=Fl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=gV(us(r),t);return cc(e,"meta.xml")&&(n.Props=aG(Ia(e,"meta.xml"))),n}function lO(e,t){return gV(e,t)}var rbe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+jv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ja+t}})(),cO=(function(){var e=function(a){return ss(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var l=[];l.push('      <table:table table:name="'+ss(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=fl(a["!ref"]||"A1"),h=a["!merges"]||[],g=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",v=a["!rows"]||[];for(u=0;u<f.s.r;++u)y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=f.e.r;++u){for(y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<f.s.c;++d)l.push(t);for(;d<=f.e.c;++d){var T=!1,k={},b="";for(g=0;g!=h.length;++g)if(!(h[g].s.c>d)&&!(h[g].s.r>u)&&!(h[g].e.c<d)&&!(h[g].e.r<u)){(h[g].s.c!=d||h[g].s.r!=u)&&(T=!0),k["table:number-columns-spanned"]=h[g].e.c-h[g].s.c+1,k["table:number-rows-spanned"]=h[g].e.r-h[g].s.r+1;break}if(T){l.push(r);continue}var E=Jr({r:u,c:d}),N=x?(a[u]||[])[d]:a[E];if(N&&N.f&&(k["table:formula"]=ss(_ye(N.f)),N.F&&N.F.slice(0,E.length)==E)){var P=fl(N.F);k["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,k["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!N){l.push(t);continue}switch(N.t){case"b":b=N.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=N.v?"true":"false";break;case"n":b=N.w||String(N.v||0),k["office:value-type"]="float",k["office:value"]=N.v||0;break;case"s":case"str":b=N.v==null?"":N.v,k["office:value-type"]="string";break;case"d":b=N.w||Ns(N.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=Ns(N.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(t);continue}var M=e(b);if(N.l&&N.l.Target){var j=N.l.Target;j=j.charAt(0)=="#"?"#"+Sye(j.slice(1)):j,j.charAt(0)!="#"&&!j.match(/^\w+:/)&&(j="../"+j),M=lr("text:a",M,{"xlink:href":j.replace(/&/g,"&amp;")})}l.push("          "+lr("table:table-cell",lr("text:p",M,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Uf(f),f.ods=o;var h=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[ja],u=jv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=jv({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(sG().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)l.push(n(i.Sheets[i.SheetNames[f]],i,f));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}})();function pV(e,t){if(t.bookType=="fods")return cO(e,t);var r=QC(),n="",s=[],a=[];return n="mimetype",wn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",wn(r,n,cO(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",wn(r,n,rbe(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",wn(r,n,ja+sG()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",wn(r,n,Phe(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",wn(r,n,Ahe(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Rm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function J8(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):us(eh(e))}function nbe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Ml(Wu(e))}function sbe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Hf(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function uO(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function abe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function ibe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=s&255;e[t+15]|=r>=0?0:128}function Lv(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function es(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ha(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function zn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=Lv(e,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=r[0];e[r[0]++]>=128;);o=e.slice(l,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Lv(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function $i(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(es(n*8+s.type)),s.type==2&&t.push(es(s.data.length)),t.push(s.data))})}),Hf(t)}function TE(e,t){return e?.map(function(r){return t(r.data)})||[]}function ac(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=Lv(e,n),a=zn(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:ha(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=zn(o.data),u=ha(l[3][0].data);i.messages.push({meta:l,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=a[3])!=null&&t[0]&&(i.merge=ha(a[3][0].data)>>>0>0),r.push(i)}return r}function tp(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:es(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:es(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:es(i.data.length)}],n[2].push({data:$i(i.meta),type:2})});var a=$i(n);t.push(es(a.length)),t.push(a),s.forEach(function(i){return t.push(i)})}),Hf(t)}function obe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Lv(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(t[r[0]]>>2&7)+4,l=(t[r[0]++]&224)<<3,l|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,a==2?(l=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(l=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Hf(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=Hf(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function ic(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(obe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Hf(t)}function rp(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=es(n),i=a.length;t.push(a),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Hf(t)}function lbe(e,t,r,n){var s=Rm(e),a=s.getUint32(4,!0),i=(n>1?12:8)+uO(a&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=uO(a&(n>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(l>-1)f={t:"s",v:t[l]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function cbe(e,t,r){var n=Rm(e),s=n.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=abe(e,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:l};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function V5(e,t){var r=new Uint8Array(32),n=Rm(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,ibe(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function q5(e,t){var r=new Uint8Array(32),n=Rm(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function ube(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return lbe(e,t,r,e[0]);case 5:return cbe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function co(e){var t=zn(e);return Lv(t[1][0].data)}function dO(e,t){var r=zn(t.data),n=ha(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=zn(i.data),l=ha(o[1][0].data)>>>0;switch(n){case 1:a[l]=J8(o[3][0].data);break;case 8:{var u=e[co(o[9][0].data)][0],d=zn(u.data),f=e[co(d[1][0].data)][0],h=ha(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var g=zn(f.data);a[l]=g[3].map(function(x){return J8(x.data)}).join("")}break}}),a}function dbe(e,t){var r,n,s,a,i,o,l,u,d,f,h,g,x,y,v=zn(e),T=ha(v[1][0].data)>>>0,k=ha(v[2][0].data)>>>0,b=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&ha(v[8][0].data)>0||!1,E,N;if((a=(s=v[7])==null?void 0:s[0])!=null&&a.data&&t!=0)E=(o=(i=v[7])==null?void 0:i[0])==null?void 0:o.data,N=(u=(l=v[6])==null?void 0:l[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)E=(g=(h=v[4])==null?void 0:h[0])==null?void 0:g.data,N=(y=(x=v[3])==null?void 0:x[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var P=b?4:1,M=Rm(E),j=[],A=0;A<E.length/2;++A){var D=M.getUint16(A*2,!0);D<65535&&j.push([A,D])}if(j.length!=k)throw"Expected ".concat(k," cells, found ").concat(j.length);var L=[];for(A=0;A<j.length-1;++A)L[j[A][0]]=N.subarray(j[A][1]*P,j[A+1][1]*P);return j.length>=1&&(L[j[j.length-1][0]]=N.subarray(j[j.length-1][1]*P)),{R:T,cells:L}}function fbe(e,t){var r,n=zn(t.data),s=(r=n?.[7])!=null&&r[0]?ha(n[7][0].data)>>>0>0?1:0:-1,a=TE(n[5],function(i){return dbe(i,s)});return{nrows:ha(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function hbe(e,t,r){var n,s=zn(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ha(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(ha(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=vn(a);var i=zn(s[4][0].data),o=dO(e,e[co(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?dO(e,e[co(i[17][0].data)][0]):[],u=zn(i[3][0].data),d=0;u[1].forEach(function(f){var h=zn(f.data),g=e[co(h[2][0].data)][0],x=ha(g.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var y=fbe(e,g);y.data.forEach(function(v,T){v.forEach(function(k,b){var E=Jr({r:d+T,c:b}),N=ube(k,o,l);N&&(r[E]=N)})}),d+=y.nrows})}function mbe(e,t){var r=zn(t.data),n={"!ref":"A1"},s=e[co(r[2][0].data)],a=ha(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return hbe(e,s[0],n),n}function gbe(e,t){var r,n=zn(t.data),s={name:(r=n[1])!=null&&r[0]?J8(n[1][0].data):"",sheets:[]},a=TE(n[2],co);return a.forEach(function(i){e[i].forEach(function(o){var l=ha(o.meta[1][0].data);l==6e3&&s.sheets.push(mbe(e,o))})}),s}function pbe(e,t){var r=jE(),n=zn(t.data),s=TE(n[1],co);if(s.forEach(function(a){e[a].forEach(function(i){var o=ha(i.meta[1][0].data);if(o==2){var l=gbe(e,i);l.sheets.forEach(function(u,d){PE(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function K5(e){var t,r,n,s,a={},i=[];if(e.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=ic(l.content)}catch(f){return console.log("?? "+l.content.length+" "+(f.message||f))}var d;try{d=ac(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&ha(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=ha(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return pbe(a,o)}function xbe(e,t,r){var n,s,a,i;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=e[8])==null?void 0:a[0])==null?void 0:i.data)&&ha(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=Rm(e[7][0].data),d=0,f=[],h=Rm(e[4][0].data),g=0,x=[],y=0;y<t.length;++y){if(t[y]==null){u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),h.setUint16(y*2,g,!0);var v,T;switch(typeof t[y]){case"string":v=V5({t:"s",v:t[y]},r),T=q5({t:"s",v:t[y]},r);break;case"number":v=V5({t:"n",v:t[y]},r),T=q5({t:"n",v:t[y]},r);break;case"boolean":v=V5({t:"b",v:t[y]},r),T=q5({t:"b",v:t[y]},r);break;default:throw new Error("Unsupported value "+t[y])}f.push(v),d+=v.length,x.push(T),g+=T.length,++l}for(e[2][0].data=es(l);y<e[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535,!0);return e[6][0].data=Hf(f),e[3][0].data=Hf(x),l}function ybe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=fl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(vn(n)));var a=G4(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(W){return W.forEach(function(K){typeof K=="string"&&i.push(K)})});var o={},l=[],u=zr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(W,K){return[W,u.FullPaths[K]]}).forEach(function(W){var K=W[0],ee=W[1];if(K.type==2&&K.name.match(/\.iwa/)){var oe=K.content,Z=ic(oe),le=ac(Z);le.forEach(function(ue){l.push(ue.id),o[ue.id]={deps:[],location:ee,type:ha(ue.messages[0].meta[1][0].data)}})}}),l.sort(function(W,K){return W-K});var d=l.filter(function(W){return W>1}).map(function(W){return[W,es(W)]});u.FileIndex.map(function(W,K){return[W,u.FullPaths[K]]}).forEach(function(W){var K=W[0];if(W[1],!!K.name.match(/\.iwa/)){var ee=ac(ic(K.content));ee.forEach(function(oe){oe.messages.forEach(function(Z){d.forEach(function(le){oe.messages.some(function(ue){return ha(ue.meta[1][0].data)!=11006&&sbe(ue.data,le[1])})&&o[le[0]].deps.push(oe.id)})})})}});for(var f=zr.find(u,o[1].location),h=ac(ic(f.content)),g,x=0;x<h.length;++x){var y=h[x];y.id==1&&(g=y)}var v=co(zn(g.messages[0].data)[1][0].data);for(f=zr.find(u,o[v].location),h=ac(ic(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);for(v=co(zn(g.messages[0].data)[2][0].data),f=zr.find(u,o[v].location),h=ac(ic(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);for(v=co(zn(g.messages[0].data)[2][0].data),f=zr.find(u,o[v].location),h=ac(ic(f.content)),x=0;x<h.length;++x)y=h[x],y.id==v&&(g=y);var T=zn(g.messages[0].data);{T[6][0].data=es(n.e.r+1),T[7][0].data=es(n.e.c+1);var k=co(T[46][0].data),b=zr.find(u,o[k].location),E=ac(ic(b.content));{for(var N=0;N<E.length&&E[N].id!=k;++N);if(E[N].id!=k)throw"Bad ColumnRowUIDMapArchive";var P=zn(E[N].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var M=0;M<=n.e.c;++M){var j=[];j[1]=j[2]=[{type:0,data:es(M+420690)}],P[1].push({type:2,data:$i(j)}),P[2].push({type:0,data:es(M)}),P[3].push({type:0,data:es(M)})}P[4]=[],P[5]=[],P[6]=[];for(var A=0;A<=n.e.r;++A)j=[],j[1]=j[2]=[{type:0,data:es(A+726270)}],P[4].push({type:2,data:$i(j)}),P[5].push({type:0,data:es(A)}),P[6].push({type:0,data:es(A)});E[N].messages[0].data=$i(P)}b.content=rp(tp(E)),b.size=b.content.length,delete T[46];var D=zn(T[4][0].data);{D[7][0].data=es(n.e.r+1);var L=zn(D[1][0].data),G=co(L[2][0].data);b=zr.find(u,o[G].location),E=ac(ic(b.content));{if(E[0].id!=G)throw"Bad HeaderStorageBucket";var X=zn(E[0].messages[0].data);for(A=0;A<a.length;++A){var se=zn(X[2][0].data);se[1][0].data=es(A),se[4][0].data=es(a[A].length),X[2][A]={type:X[2][0].type,data:$i(se)}}E[0].messages[0].data=$i(X)}b.content=rp(tp(E)),b.size=b.content.length;var Q=co(D[2][0].data);b=zr.find(u,o[Q].location),E=ac(ic(b.content));{if(E[0].id!=Q)throw"Bad HeaderStorageBucket";for(X=zn(E[0].messages[0].data),M=0;M<=n.e.c;++M)se=zn(X[2][0].data),se[1][0].data=es(M),se[4][0].data=es(n.e.r+1),X[2][M]={type:X[2][0].type,data:$i(se)};E[0].messages[0].data=$i(X)}b.content=rp(tp(E)),b.size=b.content.length;var re=co(D[4][0].data);(function(){for(var W=zr.find(u,o[re].location),K=ac(ic(W.content)),ee,oe=0;oe<K.length;++oe){var Z=K[oe];Z.id==re&&(ee=Z)}var le=zn(ee.messages[0].data);{le[3]=[];var ue=[];i.forEach(function(ie,pe){ue[1]=[{type:0,data:es(pe)}],ue[2]=[{type:0,data:es(1)}],ue[3]=[{type:2,data:nbe(ie)}],le[3].push({type:2,data:$i(ue)})})}ee.messages[0].data=$i(le);var de=tp(K),Te=rp(de);W.content=Te,W.size=W.content.length})();var B=zn(D[3][0].data);{var V=B[1][0];delete B[2];var R=zn(V.data);{var H=co(R[2][0].data);(function(){for(var W=zr.find(u,o[H].location),K=ac(ic(W.content)),ee,oe=0;oe<K.length;++oe){var Z=K[oe];Z.id==H&&(ee=Z)}var le=zn(ee.messages[0].data);{delete le[6],delete B[7];var ue=new Uint8Array(le[5][0].data);le[5]=[];for(var de=0,Te=0;Te<=n.e.r;++Te){var ie=zn(ue);de+=xbe(ie,a[Te],i),ie[1][0].data=es(Te),le[5].push({data:$i(ie),type:2})}le[1]=[{type:0,data:es(n.e.c+1)}],le[2]=[{type:0,data:es(n.e.r+1)}],le[3]=[{type:0,data:es(de)}],le[4]=[{type:0,data:es(n.e.r+1)}]}ee.messages[0].data=$i(le);var pe=tp(K),Ae=rp(pe);W.content=Ae,W.size=W.content.length})()}V.data=$i(R)}D[3][0].data=$i(B)}T[4][0].data=$i(D)}g.messages[0].data=$i(T);var z=tp(h),I=rp(z);return f.content=I,f.size=f.content.length,u}function xV(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function CE(e){xV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function EE(e){xV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function vbe(e){return Cn.WS.indexOf(e)>-1?"sheet":e==Cn.CS?"chart":e==Cn.DS?"dialog":e==Cn.MS?"macro":e&&e.length?e:"sheet"}function wbe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,vbe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function bbe(e,t,r,n,s,a,i,o,l,u,d,f){try{a[n]=Qy(Fl(e,r,!0),t);var h=Ia(e,t),g;switch(o){case"sheet":g=W2e(h,t,s,l,a[n],u,d,f);break;case"chart":if(g=H2e(h,t,s,l,a[n],u,d,f),!g||!g["!drawel"])break;var x=Oy(g["!drawel"].Target,t),y=Mv(x),v=j1e(Fl(e,x,!0),Qy(Fl(e,y,!0),x)),T=Oy(v,x),k=Mv(T);g=x2e(Fl(e,T,!0),T,l,Qy(Fl(e,k,!0),T),u,g);break;case"macro":g=G2e(h,t,s,l,a[n],u,d,f);break;case"dialog":g=V2e(h,t,s,l,a[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var b=[];a&&a[n]&&ma(a[n]).forEach(function(E){var N="";if(a[n][E].Type==Cn.CMNT){N=Oy(a[n][E].Target,t);var P=X2e(Ia(e,N,!0),N,l);if(!P||!P.length)return;XD(g,P,!1)}a[n][E].Type==Cn.TCMNT&&(N=Oy(a[n][E].Target,t),b=b.concat(M1e(Ia(e,N,!0),l)))}),b&&b.length&&XD(g,b,!0,l.people||[])}catch(E){if(l.WTF)throw E}}function nc(e){return e.charAt(0)=="/"?e.slice(1):e}function _be(e,t){if(_1(),t=t||{},CE(t),cc(e,"META-INF/manifest.xml")||cc(e,"objectdata.xml"))return oO(e,t);if(cc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof K5<"u"){if(e.FileIndex)return K5(e);var r=zr.utils.cfb_new();return xD(e).forEach(function(se){wn(r,se,Ffe(e,se))}),K5(r)}throw new Error("Unsupported NUMBERS file")}if(!cc(e,"[Content_Types].xml"))throw cc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):cc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=xD(e),s=Che(Fl(e,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Ia(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Ia(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!t.bookSheets&&!t.bookProps){if(Zy=[],s.sst)try{Zy=Y2e(Ia(e,nc(s.sst)),s.sst,t)}catch(se){if(t.WTF)throw se}t.cellStyles&&s.themes.length&&(l=K2e(Fl(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=q2e(Ia(e,nc(s.style)),s.style,l,t))}s.links.map(function(se){try{var Q=Qy(Fl(e,Mv(nc(se))),se);return Q2e(Ia(e,nc(se)),Q,se,t)}catch{}});var d=U2e(Ia(e,nc(s.workbooks[0])),s.workbooks[0],t),f={},h="";s.coreprops.length&&(h=Ia(e,nc(s.coreprops[0]),!0),h&&(f=aG(h)),s.extprops.length!==0&&(h=Ia(e,nc(s.extprops[0]),!0),h&&Fhe(h,f,t)));var g={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(h=Fl(e,nc(s.custprops[0]),!0),h&&(g=Ohe(h,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(Q){return Q.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=g),t.bookSheets&&typeof i<"u"&&(x.SheetNames=i),t.bookSheets?x.SheetNames:t.bookProps))return x;i={};var y={};t.bookDeps&&s.calcchain&&(y=J2e(Ia(e,nc(s.calcchain)),s.calcchain));var v=0,T={},k,b;{var E=d.Sheets;f.Worksheets=E.length,f.SheetNames=[];for(var N=0;N!=E.length;++N)f.SheetNames[N]=E[N].name}var P=a?"bin":"xml",M=s.workbooks[0].lastIndexOf("/"),j=(s.workbooks[0].slice(0,M+1)+"_rels/"+s.workbooks[0].slice(M+1)+".rels").replace(/^\//,"");cc(e,j)||(j="xl/_rels/workbook."+P+".rels");var A=Qy(Fl(e,j,!0),j.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Z2e(Ia(e,nc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=D1e(Ia(e,nc(s.people[0])),t)),A&&(A=wbe(A,d.Sheets));var D=Ia(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var L="sheet";if(A&&A[v]?(k="xl/"+A[v][1].replace(/[\/]?xl\//,""),cc(e,k)||(k=A[v][1]),cc(e,k)||(k=j.replace(/_rels\/.*$/,"")+A[v][1]),L=A[v][2]):(k="xl/worksheets/sheet"+(v+1-D)+"."+P,k=k.replace(/sheet0\./,"sheet.")),b=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var G=!1,X=0;X!=t.sheets.length;++X)typeof t.sheets[X]=="number"&&t.sheets[X]==v&&(G=1),typeof t.sheets[X]=="string"&&t.sheets[X].toLowerCase()==f.SheetNames[v].toLowerCase()&&(G=1);if(!G)continue e}}bbe(e,k,b,f.SheetNames[v],v,T,i,L,t,d,l,u)}return x={Directory:s,Workbook:d,Props:f,Custprops:g,Deps:y,Sheets:i,SheetNames:f.SheetNames,Strings:Zy,Styles:u,Themes:l,SSF:As(Yr)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(se,Q){se=se.replace(/^Root Entry[\/]/,""),x.keys.push(se),x.files[se]=e.FileIndex[Q]}))),t&&t.bookVBA&&(s.vba.length>0?x.vbaraw=Ia(e,nc(s.vba[0]),!0):s.defaults&&s.defaults.bin===U1e&&(x.vbaraw=Ia(e,"xl/vbaProject.bin",!0))),x}function Sbe(e,t){var r=t||{},n="Workbook",s=zr.find(e,n);try{if(n="/!DataSpaces/Version",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Zge(s.content),n="/!DataSpaces/DataSpaceMap",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=tpe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=rpe(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);spe(s.content)}catch{}if(n="/EncryptionInfo",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=ape(s.content);if(n="/EncryptedPackage",s=zr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function kbe(e,t){return t.bookType=="ods"?pV(e,t):t.bookType=="numbers"?ybe(e,t):t.bookType=="xlsb"?Tbe(e,t):Cbe(e,t)}function Tbe(e,t){wp=1024,e&&!e.SSF&&(e.SSF=As(Yr)),e&&e.SSF&&(_1(),l3(e.SSF),t.revssf=u3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ev?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=HG.indexOf(t.bookType)>-1,s=fE();EE(t=t||{});var a=QC(),i="",o=0;if(t.cellXfs=[],rh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",wn(a,i,iG(e.Props,t)),s.coreprops.push(i),rs(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}for(e.Props.Worksheets=e.Props.SheetNames.length,wn(a,i,cG(e.Props)),s.extprops.push(i),rs(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&ma(e.Custprops||{}).length>0&&(i="docProps/custom.xml",wn(a,i,uG(e.Custprops)),s.custprops.push(i),rs(t.rels,4,i,Cn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,wn(a,i,twe(o-1,i,t,e,d)),s.sheets.push(i),rs(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Cn.WS[0])}if(f){var g=f["!comments"],x=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,wn(a,y,swe(g,y)),s.comments.push(y),rs(d,-1,"../comments"+o+"."+r,Cn.CMNT),x=!0),f["!legacy"]&&x&&wn(a,"xl/drawings/vmlDrawing"+o+".vml",UG(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&wn(a,Mv(i),Pp(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,wn(a,i,nwe(t.Strings,i,t)),s.strs.push(i),rs(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,wn(a,i,ewe(e,i)),s.workbooks.push(i),rs(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",wn(a,i,yE(e.Themes,t)),s.themes.push(i),rs(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,wn(a,i,rwe(e,i,t)),s.styles.push(i),rs(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",wn(a,i,e.vbaraw),s.vba.push(i),rs(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,wn(a,i,awe(i)),s.metadata.push(i),rs(t.wbrels,-1,"metadata."+r,Cn.XLMETA),wn(a,"[Content_Types].xml",nG(s,t)),wn(a,"_rels/.rels",Pp(t.rels)),wn(a,"xl/_rels/workbook."+r+".rels",Pp(t.wbrels)),delete t.revssf,delete t.ssf,a}function Cbe(e,t){wp=1024,e&&!e.SSF&&(e.SSF=As(Yr)),e&&e.SSF&&(_1(),l3(e.SSF),t.revssf=u3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,ev?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=HG.indexOf(t.bookType)>-1,s=fE();EE(t=t||{});var a=QC(),i="",o=0;if(t.cellXfs=[],rh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",wn(a,i,iG(e.Props,t)),s.coreprops.push(i),rs(t.rels,2,i,Cn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var l=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(e.SheetNames[u]);e.Props.SheetNames=l}e.Props.Worksheets=e.Props.SheetNames.length,wn(a,i,cG(e.Props)),s.extprops.push(i),rs(t.rels,3,i,Cn.EXT_PROPS),e.Custprops!==e.Props&&ma(e.Custprops||{}).length>0&&(i="docProps/custom.xml",wn(a,i,uG(e.Custprops)),s.custprops.push(i),rs(t.rels,4,i,Cn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],g=(h||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,wn(a,i,tV(o-1,t,e,f)),s.sheets.push(i),rs(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Cn.WS[0])}if(h){var x=h["!comments"],y=!1,v="";if(x&&x.length>0){var T=!1;x.forEach(function(k){k[1].forEach(function(b){b.T==!0&&(T=!0)})}),T&&(v="xl/threadedComments/threadedComment"+o+"."+r,wn(a,v,F1e(x,d,t)),s.threadedcomments.push(v),rs(f,-1,"../threadedComments/threadedComment"+o+"."+r,Cn.TCMNT)),v="xl/comments"+o+"."+r,wn(a,v,WG(x)),s.comments.push(v),rs(f,-1,"../comments"+o+"."+r,Cn.CMNT),y=!0}h["!legacy"]&&y&&wn(a,"xl/drawings/vmlDrawing"+o+".vml",UG(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&wn(a,Mv(i),Pp(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,wn(a,i,jG(t.Strings,t)),s.strs.push(i),rs(t.wbrels,-1,"sharedStrings."+r,Cn.SST)),i="xl/workbook."+r,wn(a,i,iV(e)),s.workbooks.push(i),rs(t.rels,1,i,Cn.WB),i="xl/theme/theme1.xml",wn(a,i,yE(e.Themes,t)),s.themes.push(i),rs(t.wbrels,-1,"theme/theme1.xml",Cn.THEME),i="xl/styles."+r,wn(a,i,LG(e,t)),s.styles.push(i),rs(t.wbrels,-1,"styles."+r,Cn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",wn(a,i,e.vbaraw),s.vba.push(i),rs(t.wbrels,-1,"vbaProject.bin",Cn.VBA)),i="xl/metadata."+r,wn(a,i,zG()),s.metadata.push(i),rs(t.wbrels,-1,"metadata."+r,Cn.XLMETA),d.length>1&&(i="xl/persons/person.xml",wn(a,i,O1e(d)),s.people.push(i),rs(t.wbrels,-1,"persons/person.xml",Cn.PEOPLE)),wn(a,"[Content_Types].xml",nG(s,t)),wn(a,"_rels/.rels",Pp(t.rels)),wn(a,"xl/_rels/workbook."+r+".rels",Pp(t.wbrels)),delete t.revssf,delete t.ssf,a}function NE(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Ll(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Ebe(e,t){return zr.find(e,"EncryptedPackage")?Sbe(e,t):uV(e,t)}function Nbe(e,t){var r,n=e,s=t||{};return s.type||(s.type=Sn&&Buffer.isBuffer(e)?"buffer":"base64"),r=MH(n,s),_be(r,s)}function yV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Y8(e.slice(r),t);default:break e}return qp.to_workbook(e,t)}function Abe(e,t){var r="",n=NE(e,t);switch(t.type){case"base64":r=Ll(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Fm(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=us(r)),t.type="binary",yV(r,t)}function jbe(e,t){var r=e;return t.type=="base64"&&(r=Ll(r)),r=Cv.utils.decode(1200,r.slice(2),"str"),t.type="binary",yV(r,t)}function Pbe(e){return e.match(/[^\x00-\x7F]/)?Wu(e):e}function Y5(e,t,r,n){return n?(r.type="string",qp.to_workbook(e,r)):qp.to_workbook(t,r)}function Q8(e,t){qC();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Q8(new Uint8Array(e),(r=As(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Fp={},r.dateNF&&(Fp.dateNF=r.dateNF),r.type||(r.type=Sn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Sn?"buffer":"binary",n=Tfe(e),typeof Uint8Array<"u"&&!Sn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=Pbe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=As(r),r.type="array",Q8(KC(n),r)}switch((s=NE(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Ebe(zr.read(n,r),r);break;case 9:if(s[1]<=8)return uV(n,r);break;case 60:return Y8(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Ige(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return NG.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Nbe(n,r):Y5(e,n,r,a);case 239:return s[3]===60?Y8(n,r):Y5(e,n,r,a);case 255:if(s[1]===254)return jbe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return fm.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return fm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return K8.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return OG.to_workbook(n,r);break;case 10:case 13:case 32:return Abe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Oge.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?K8.to_workbook(n,r):Y5(e,n,r,a)}function vV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return b2(t.file,zr.write(e,{type:Sn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return zr.write(e,t)}function Mbe(e,t){var r=As(t||{}),n=kbe(e,r);return Fbe(n,r)}function Fbe(e,t){var r={},n=Sn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?zr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(o3(s))}return t.password&&typeof encrypt_agile<"u"?vV(encrypt_agile(s,t.password),t):t.type==="file"?b2(t.file,s):t.type=="string"?us(s):s}function Dbe(e,t){var r=t||{},n=Pwe(e,r);return vV(n,r)}function Du(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Ev(Wu(n));case"binary":return Wu(n);case"string":return e;case"file":return b2(t.file,n,"utf8");case"buffer":return Sn?v0(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Du(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Obe(e,t){switch(t.type){case"base64":return Ev(e);case"binary":return e;case"string":return e;case"file":return b2(t.file,e,"binary");case"buffer":return Sn?v0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function bb(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Ev(r):t.type=="string"?us(r):r;case"file":return b2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function wV(e,t){qC(),E2e(e);var r=As(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=wV(e,r);return r.type="array",o3(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Du(kwe(e,r),r);case"slk":case"sylk":return Du(EG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Du(fV(e.Sheets[e.SheetNames[s]],r),r);case"txt":return Obe(bV(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Du(AE(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Du(NG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return bb(K8.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Du(qp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Du(OG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Du(AG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Du(pV(e,r),r);case"wk1":return bb(fm.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return bb(fm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),bb(dV(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Dbe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Mbe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Ibe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Rbe(e,t,r){var n={};return n.type="file",n.file=t,Ibe(n),wV(e,n)}function Lbe(e,t,r,n,s,a,i,o){var l=Na(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var g=t.s.c;g<=t.e.c;++g){var x=i?e[r][g]:e[n[g]+l];if(x===void 0||x.t===void 0){if(u===void 0)continue;a[g]!=null&&(h[a[g]]=u);continue}var y=x.v;switch(x.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[g]!=null){if(y==null)if(x.t=="e"&&y===null)h[a[g]]=null;else if(u!==void 0)h[a[g]]=u;else if(d&&y===null)h[a[g]]=null;else continue;else h[a[g]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?y:d0(x,y,o);y!=null&&(f=!1)}}return{row:h,isempty:f}}function G4(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=Ln(d);break;case"number":l=Ln(e["!ref"]),l.s.r=d;break;default:l=d}n>0&&(s=0);var f=Na(l.s.r),h=[],g=[],x=0,y=0,v=Array.isArray(e),T=l.s.r,k=0,b={};v&&!e[T]&&(e[T]=[]);var E=u.skipHidden&&e["!cols"]||[],N=u.skipHidden&&e["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(E[k]||{}).hidden)switch(h[k]=Ys(k),r=v?e[T][k]:e[h[k]+f],n){case 1:a[k]=k-l.s.c;break;case 2:a[k]=h[k];break;case 3:a[k]=u.header[k-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=d0(r,null,u),y=b[i]||0,!y)b[i]=1;else{do o=i+"_"+y++;while(b[o]);b[i]=y,b[o]=1}a[k]=o}for(T=l.s.r+s;T<=l.e.r;++T)if(!(N[T]||{}).hidden){var P=Lbe(e,l,T,h,n,a,v,u);(P.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[x++]=P.row)}return g.length=x,g}var fO=/"/g;function Bbe(e,t,r,n,s,a,i,o){for(var l=!0,u=[],d="",f=Na(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var g=o.dense?(e[r]||[])[h]:e[n[h]+f];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:d0(g,null,o));for(var x=0,y=0;x!==d.length;++x)if((y=d.charCodeAt(x))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(fO,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(fO,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function AE(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Ln(e["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(h[x]||{}).hidden||(f[x]=Ys(x));for(var y=0,v=s.s.r;v<=s.e.r;++v)(g[v]||{}).hidden||(d=Bbe(e,s,v,f,i,l,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function bV(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=AE(e,t);return r}function $be(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Ln(e["!ref"]),a="",i=[],o,l=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)i[o]=Ys(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Na(d),o=s.s.c;o<=s.e.c;++o)if(t=i[o]+a,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=t+"="+n}return l}function _V(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Xs(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+s}};if(a["!ref"]){var f=Ln(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+s)}else i==-1&&(i=0,d.e.r=t.length-1+s);var h=n.header||[],g=0;t.forEach(function(y,v){ma(y).forEach(function(T){(g=h.indexOf(T))==-1&&(h[g=h.length]=T);var k=y[T],b="z",E="",N=Jr({c:o+g,r:i+v+s});u=Bv(a,N),k&&typeof k=="object"&&!(k instanceof Date)?a[N]=k:(typeof k=="number"?b="n":typeof k=="boolean"?b="b":typeof k=="string"?b="s":k instanceof Date?(b="d",n.cellDates||(b="n",k=si(k)),E=n.dateNF||Yr[14]):k===null&&n.nullError&&(b="e",k=0),u?(u.t=b,u.v=k,delete u.w,delete u.R,E&&(u.z=E)):a[N]=u={t:b,v:k},E&&(u.z=E))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var x=Na(i);if(s)for(g=0;g<h.length;++g)a[Ys(g+o)+x]={t:"s",v:h[g]};return a["!ref"]=vn(d),a}function zbe(e,t){return _V(null,e,t)}function Bv(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Xs(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Bv(e,Jr(t)):Bv(e,Jr({r:t,c:r||0}))}function Ube(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function jE(){return{SheetNames:[],Sheets:{}}}function PE(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=i+s)!=-1;++s);}if(aV(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function Wbe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=Ube(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function Hbe(e,t){return e.z=t,e}function SV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function Gbe(e,t,r){return SV(e,"#"+t,r)}function Vbe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function qbe(e,t,r,n){for(var s=typeof t!="string"?t:Ln(t),a=typeof t=="string"?t:vn(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=Bv(e,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return e}var Yb={encode_col:Ys,encode_row:Na,encode_cell:Jr,encode_range:vn,decode_col:iE,decode_row:aE,split_cell:nhe,decode_cell:Xs,decode_range:fl,format_cell:d0,sheet_add_aoa:XH,sheet_add_json:_V,sheet_add_dom:hV,aoa_to_sheet:S1,json_to_sheet:zbe,table_to_sheet:mV,table_to_book:Zwe,sheet_to_csv:AE,sheet_to_txt:bV,sheet_to_json:G4,sheet_to_html:fV,sheet_to_formulae:$be,sheet_to_row_object_array:G4,sheet_get_cell:Bv,book_new:jE,book_append_sheet:PE,book_set_sheet_visibility:Wbe,cell_set_number_format:Hbe,cell_set_hyperlink:SV,cell_set_internal_link:Gbe,cell_add_comment:Vbe,sheet_set_array_formula:qbe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const kV=({onBackToCabinet:e,selectedGrade:t,selectedClass:r,openRetestModal:n,forceRefreshOnMount:s=!1})=>{hl(),E_();const{user:a,isAuthenticated:i}=Ps(),{showNotification:o}=ai(),l=_.useCallback($e=>{let ft=null;if(typeof $e?.percentage=="number"&&!Number.isNaN($e.percentage))return ft=Math.round($e.percentage),console.debug("[TeacherResults] Using provided percentage",{percentage:$e.percentage,rounded:ft,result:$e}),ft;const Wt=$e?.retest_best_score??$e?.score,kt=$e?.retest_best_max_score??$e?.max_score,Pr=Number(Wt??0),Et=Number(kt??0);return Et>0&&(ft=Math.round(Pr/Et*100)),ft},[]);_.useCallback($e=>{const ft=l($e);return ft===null?"text-gray-600":ft<50?"text-red-600 font-semibold":ft<70?"text-yellow-600":"text-green-600"},[l]),_.useCallback($e=>{const ft=l($e);return ft!==null&&ft<50},[l]);const[u,d]=_.useState(null),[f,h]=_.useState(!0),[g,x]=_.useState(""),[y,v]=_.useState([]),[T,k]=_.useState(null),[b,E]=_.useState(!1),[N,P]=_.useState([]),[M,j]=_.useState([]),[A,D]=_.useState([1,2]),[L,G]=_.useState(null),[X,se]=_.useState(null),[Q,re]=_.useState(null),[B,V]=_.useState("main"),[R,H]=_.useState(null),[z,I]=_.useState(null),W=R||t,K=z||r,[ee,oe]=_.useState(null),[Z,le]=_.useState({}),[ue,de]=_.useState(!1),[Te,ie]=_.useState(new Set),[pe,Ae]=_.useState(!0),[Me,Je]=_.useState(null),[Ve,Dt]=_.useState(null),[lt,At]=_.useState(!1),[vt,ct]=_.useState(!1),[bt,Ut]=_.useState(!1),Bt=_.useRef(null),[Vt,We]=_.useState(null),[Ue,tt]=_.useState(!1),[nt,at]=_.useState(null),[It,Lt]=_.useState(!1),[Xt,vr]=_.useState(null),[br,Dr]=_.useState(""),[Sr,pr]=_.useState(""),[ye,Fe]=_.useState(!1),[Be,He]=_.useState(!1),[Pt,Ie]=_.useState(null),[Qe,Ne]=_.useState(""),[Ke,qe]=_.useState(!1),[Rt,zt]=_.useState(new Set),[rr,Ir]=_.useState({}),[wr,Wr]=_.useState(!1),[he,Ee]=_.useState(null),[we,_e]=_.useState(""),[ke,Ce]=_.useState(!1),[rt,xt]=_.useState(null),[ut,ce]=_.useState(null),[ge,Pe]=_.useState(!1),[je,Ze]=_.useState(!1),[dt,_t]=_.useState({isOpen:!1,testResult:null}),[ir,Ot]=_.useState({}),Qt=_.useRef(new Set),Cr=_.useRef({}),Br=_.useRef(null);_.useEffect(()=>{console.log(" editingColumns state changed:",Array.from(Rt)),Qt.current=Rt},[Rt]),_.useEffect(()=>{console.log(" columnScores state changed:",rr),Cr.current=rr},[rr]);const Rr=_.useCallback($e=>{console.log(" Toggling test collapse for:",$e),ie(ft=>{const Wt=new Set(ft);return Wt.has($e)?(Wt.delete($e),console.log(" Expanding test:",$e)):(Wt.add($e),console.log(" Collapsing test:",$e)),console.log(" New collapsed tests:",Array.from(Wt)),Wt})},[]),tn=_.useCallback(()=>{if(Bt.current){const{scrollLeft:$e,scrollWidth:ft,clientWidth:Wt}=Bt.current;ct($e>0),Ut($e<ft-Wt-1)}},[]);_.useEffect(()=>{dn()},[]),_.useEffect(()=>{if(L&&Bt.current){const $e=setTimeout(tn,100);return()=>clearTimeout($e)}},[L,tn]),_.useEffect(()=>{console.log(" Current collapsed tests state:",Array.from(Te))},[Te]);const mn=_.useCallback(async($e,ft=!1)=>{try{de(!0);const Wt=a?.teacher_id,kt=`${W}/${K}`,Pr=await Hde.getTeacherStudentResults(Wt,W,kt,$e,ft);if(Pr.success){console.log(" Results loaded for term:",$e,Pr.results?.length||0,"results"),console.log(" Students loaded:",Pr.students?.length||0,"students");const Et=[],rn=new Set,An=new Set;Pr.results&&Pr.results.length>0&&Pr.results.forEach(sr=>{sr.test_name&&!rn.has(sr.test_name)&&(rn.add(sr.test_name),Et.push({test_name:sr.test_name,test_type:sr.test_type,subject:sr.subject})),sr.subject&&An.add(sr.subject)});const ze=(Pr.students||[]).map(sr=>{const ds={};return(Pr.results||[]).filter(nn=>nn.student_id===sr.student_id).forEach(nn=>{nn.test_name&&(ds[nn.test_name]={id:nn.id,test_type:nn.test_type,test_id:nn.test_id,subject_id:nn.subject_id,score:nn.score,max_score:nn.max_score,retest_offered:nn.retest_offered,caught_cheating:nn.caught_cheating,visibility_change_times:nn.visibility_change_times,answers:nn.answers,ai_feedback:nn.ai_feedback,name:nn.name,surname:nn.surname,test_name:nn.test_name})}),{...sr,...ds}}),ur={results:Pr.results||[],students:ze,class:ze,unique_tests:Et,subjects:Array.from(An),count:Pr.count||0,student_count:Pr.student_count||0};console.log(" Processed results data:",{uniqueTests:Et.length,subjects:Array.from(An),resultsCount:Pr.results?.length||0,studentsWithScores:ze.length,sampleStudent:ze[0]}),G(ur),le(ur),re(new Date)}}catch(Wt){console.error(" Error loading results for term:",Wt),G(null),le(null)}finally{de(!1)}},[a,W,K]);_.useEffect(()=>{(async()=>{try{At(!0),await lu.loadAcademicCalendar();const ft=lu.getCurrentSemesterTerms();Dt(ft),ft?.currentTerm&&(Je(ft.currentTerm.id),W&&K&&mn(ft.currentTerm.id,s))}catch(ft){console.error(" Error initializing academic calendar:",ft)}finally{At(!1)}})()},[W,K,mn,s]),_.useEffect(()=>{t&&r&&(console.log(" Props detected:",{grade:t,class:r}),Ve?.currentTerm&&(Je(Ve.currentTerm.id),mn(Ve.currentTerm.id,s)))},[t,r,Ve,mn,s]);const dn=_.useCallback(async()=>{console.log(" Initializing teacher results...");try{if(h(!0),x(""),!i||!a){console.log(" User not authenticated"),x("User not authenticated");return}if(a.role!==Ro.TEACHER){console.error(" Invalid user role for teacher results:",a.role),x("Access denied. Teacher role required.");return}console.log(" Loading teacher assignments..."),await Fr(),console.log(" TODO: Load academic calendar service"),console.log(" Teacher results initialization complete!")}catch($e){console.error(" Error initializing teacher results:",$e),x("Failed to initialize teacher results")}finally{h(!1)}},[i,a]),Fr=_.useCallback(async()=>{console.log(" Loading teacher assignments...");try{const $e=`teacher_data_${a?.teacher_id||a?.id||""}`;let ft=fa($e);ft&&ft.subjects&&ft.subjects.length>0&&(ft.subjects.some(ze=>ze.subject&&ze.classes&&ze.classes.length>0)||(console.log(" Cached data has invalid subject structure, forcing refresh"),localStorage.removeItem($e),ft=null)),ft?console.log(" Cache HIT! Using cached teacher data"):(console.log(" Cache MISS! Fetching teacher data from API"),ft=await Os.getTeacherData(),console.log(" Teacher data loaded:",ft),qs($e,ft,da.teacher_subjects)),d(ft);const Wt=[];ft&&ft.subjects&&(console.log(" Teacher subjects structure:",ft.subjects),ft.subjects.forEach(An=>{console.log(" Processing subject:",An),An.classes&&An.classes.forEach(ze=>{ze.grade&&ze.class&&Wt.push({grade:ze.grade,class:ze.class,subject:An.subject||An.name||"Unknown Subject"})})})),j(Wt),console.log(" Available classes from teacher data:",Wt);const kt=`teacher_tests_${a?.teacher_id||a?.id||""}`,Pr=fa(kt);Pr&&Pr.some(An=>An.test_type==="drawing")&&(console.log(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(kt));let Et=fa(kt);Et?console.log(" Cache HIT! Using cached teacher tests"):(console.log(" Cache MISS! Fetching teacher tests from API"),Et=await Pn.getTeacherTests(),console.log(" Teacher tests loaded:",Et),qs(kt,Et,da.teacher_tests));const rn=Et.flatMap(An=>An.assignments||[]);v(rn),console.log(" Raw assignments data:",rn),console.log(" Teacher assignments loaded:",rn.length)}catch($e){console.error(" Error loading teacher assignments:",$e),o("Failed to load teacher assignments","error")}},[o]),li=_.useCallback(async($e,ft)=>{console.log(" Showing classes for grade:",$e,"class:",ft),H($e),I(ft),k(null),G(null),$e&&ft&&console.log(" TODO: Implement academic calendar service for term selection")},[]);_.useCallback(($e,ft)=>{console.log(" Showing semesters for class:",$e,ft),k(null),G(null),console.log(" TODO: Implement academic calendar service for term selection")},[]),_.useCallback(($e,ft)=>{console.log(" Class clicked:",$e,ft),E(!0),console.log(" TODO: Implement academic calendar service for term selection")},[]);const gn=_.useCallback(async($e,ft=!1)=>{!W||!K||(console.log(" Loading results for semester:",$e,"forceRefresh:",ft),k($e),Ve?.currentTerm&&await mn(Ve.currentTerm.id,ft))},[W,K,Ve,mn]),Qs=_.useCallback(()=>Ve?c.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current Semester: ",Ve?.semester===1?"Semester 1":"Semester 2"]}),c.jsx("div",{className:"flex space-x-4",children:Ve?.terms.map($e=>c.jsx(gt.button,{className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${$e.isCurrent?"bg-blue-600 text-white shadow-lg":Me===$e.id?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>{Je($e.id),mn($e.id)},whileHover:{scale:1.05},whileTap:{scale:.95},children:$e.label},$e.id))})]}):c.jsx("div",{className:"flex space-x-4 mb-6",children:c.jsx("div",{className:"px-6 py-3 rounded-lg bg-gray-200 text-gray-500",children:"Loading terms..."})}),[Ve,Me,mn]);_.useCallback($e=>$e.reduce((ft,Wt)=>(ft[Wt.student_id]||(ft[Wt.student_id]=[]),ft[Wt.student_id].push(Wt),ft),{}),[]),_.useCallback($e=>{if($e.length===0)return 0;const ft=$e.reduce((Wt,kt)=>Wt+(kt.percentage||0),0);return Math.round(ft/$e.length)},[]),_.useCallback($e=>{$e.score<$e.passing_score&&window.confirm("Give another try?")&&_s($e.student_id,$e.test_id)},[]);const _s=_.useCallback(async($e,ft)=>{try{(await fetch("/.netlify/functions/reset-test-attempt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:$e,testId:ft})})).ok&&(K&&gn(T,!0),o("Test made accessible to student","success"))}catch(Wt){console.error("Error resetting test attempt:",Wt),o("Failed to reset test attempt","error")}},[K,T,gn,o]),Ha=_.useCallback(($e,ft)=>{if($e===null||ft===null)return"";const Wt=Math.round($e/ft*100);return Wt>=80?"text-green-600 bg-green-50":Wt>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"},[]),Bn=_.useCallback($e=>{We($e),tt(!0)},[]),be=_.useCallback(($e,ft="overview",Wt)=>{try{const Pr=!!$e?.ai_feedback,Et=typeof $e?.ai_feedback;let rn=[];if(Pr)if(Et==="string")try{rn=Object.keys(JSON.parse($e.ai_feedback))}catch{rn=["<invalid json>"]}else Et==="object"&&(rn=Object.keys($e.ai_feedback||{}));console.log("[AI DEBUG] Opening speaking result",{hasAi:Pr,aiType:Et,aiKeys:rn})}catch{}const kt={...$e,__initialTab:ft};Wt&&(kt.__audioUrl=Wt),at(kt),Lt(!0)},[]),Ct=_.useCallback(async($e,ft)=>{if(!$e||!ft)return console.error("fetchTestQuestions: Missing testType or testId",{testType:$e,testId:ft}),null;const Wt=`${$e}_${ft}`;if(ir[Wt])return console.log(" Using cached questions for",Wt),ir[Wt];Ze(!0);try{console.log(" Fetching questions for",{testType:$e,testId:ft});const kt=await Pn.getTestQuestions($e,ft);return console.log(" Questions fetched:",kt?.length||0,"questions"),Ot(Pr=>({...Pr,[Wt]:kt})),kt}catch(kt){return console.error(" Error fetching test questions:",kt),o("Failed to load test questions","error"),null}finally{Ze(!1)}},[ir,o]),jr=_.useCallback(async($e,ft)=>{if(console.log(" Opening answer modal for:",{testResult:$e,test:ft}),console.log(" [handleViewAnswers] testResult.answers:",$e?.answers),console.log(" [handleViewAnswers] testResult.answers type:",typeof $e?.answers),console.log(" [handleViewAnswers] testResult.retest_offered:",$e?.retest_offered),console.log(" [handleViewAnswers] Full testResult keys:",$e?Object.keys($e):"null"),$e.test_type==="drawing"||ft?.test_type==="drawing"){Bn($e);return}if($e.test_type==="speaking"||ft?.test_type==="speaking"){be($e);return}const Wt=$e.test_type||ft?.test_type;if(Wt==="word_matching"||Wt==="matching_type"){o("Word matching and picture matching tests have separate view mechanisms","info");return}xt($e),ce(null),Pe(!0),Ze(!0);const kt=$e.test_id||ft?.test_id;if(!Wt||!kt){o("Unable to load test questions: Missing test type or ID","error"),Ze(!1);return}try{const Pr=await Ct(Wt,kt);Pr?ce(Pr):o("Failed to load test questions","error")}finally{Ze(!1)}},[Ct,Bn,be,o]);_.useCallback(($e,ft,Wt)=>{vr({resultId:$e,score:ft,maxScore:Wt}),Dr(ft?.toString()||""),pr(Wt?.toString()||""),He(!0)},[]),_.useCallback($e=>{Dr($e)},[]),_.useCallback($e=>{pr($e)},[]),_.useCallback(async()=>{if(Xt){Fe(!0);try{const $e={resultId:Xt.resultId,score:parseInt(br)||0,maxScore:parseInt(Sr)||1};(await fetch(Ud.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($e)})).ok?(o("Score updated successfully","success"),K&&gn(T,!0),vr(null),Dr(""),pr(""),He(!1)):o("Failed to update score","error")}catch($e){console.error("Error updating score:",$e),o("Failed to update score","error")}finally{Fe(!1)}}},[Xt,br,Sr,K,T,gn,o]),_.useCallback(()=>{vr(null),Dr(""),pr(""),He(!1)},[]);const Ur=_.useCallback(($e,ft)=>{Ie({resultId:$e,score:ft}),Ne(ft.toString())},[]),Xn=_.useCallback(async()=>{if(Pt){qe(!0);try{const $e={resultId:Pt.resultId,score:parseInt(Qe)||0},ft=await fetch(Ud.UPDATE_SPEAKING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify($e)});if(ft.ok){const Wt=await ft.json();o("Speaking test score updated successfully","success"),nt&&at(kt=>({...kt,score:Wt.score,percentage:Wt.percentage})),K&&gn(T,!0),Ie(null),Ne("")}else{const Wt=await ft.json();o(Wt.error||"Failed to update speaking test score","error")}}catch($e){console.error("Error updating speaking test score:",$e),o("Failed to update speaking test score","error")}finally{qe(!1)}}},[Pt,Qe,K,T,gn,o]),Fn=_.useCallback(()=>{Ie(null),Ne("")},[]),as=($e,ft)=>{console.log(" Starting column editing for drawing test:",$e),console.log(" Current editingColumns before update:",Array.from(Rt)),console.log(" Results data passed to function:",ft),zt(Wt=>{const kt=new Set(Wt).add($e);return console.log(" Updated editingColumns:",Array.from(kt)),kt}),console.log(" Initializing column scores for test:",$e),console.log(" Results data:",ft),console.log(" Results.class:","null"),console.log(" No results or class data available")},$s=_.useCallback($e=>{zt(ft=>{const Wt=new Set(ft);return Wt.delete($e),Wt}),Ir(ft=>{const Wt={...ft};return delete Wt[$e],Wt})},[]),ci=_.useCallback(($e,ft,Wt,kt)=>{const Pr=kt.toString();Cr.current[$e]||(Cr.current[$e]={}),Cr.current[$e][ft]||(Cr.current[$e][ft]={}),Cr.current[$e][ft][Wt]=Pr;const Et=parseInt(kt)||0;Ir(rn=>({...rn,[$e]:{...rn[$e],[ft]:{...rn[$e]?.[ft],[Wt]:Et}}}))},[]);_.useCallback(async $e=>{if(Cr.current[$e]){Wr(!0);try{const ft=Object.entries(Cr.current[$e]).map(([Et,rn])=>({resultId:rn.resultId,score:parseInt(rn.score)||0,maxScore:parseInt(rn.maxScore)||100}));console.log(" Saving column scores for",$e,":",ft);const Wt=ft.map(Et=>(console.log(" Sending update:",Et),fetch(Ud.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Et)})));(await Promise.all(Wt)).every(Et=>Et.ok)?(o(`Scores updated successfully for ${$e}`,"success"),K&&gn(T,!0),$s($e)):o("Failed to update some scores","error")}catch(ft){console.error("Error updating column scores:",ft),o("Failed to update scores","error")}finally{Wr(!1)}}},[rr,K,T,gn,o,$s]);const on=_.useCallback(($e,ft,Wt)=>!ft||ft.length===0?c.jsx(gt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):c.jsx(gt.div,{className:"relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:c.jsxs(gt.div,{className:"bg-white rounded-lg shadow-lg overflow-hidden",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[c.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:kt=>{Bt.current&&(Bt.current.scrollLeft=kt.target.scrollLeft)},children:c.jsx("div",{className:"min-w-full h-1",children:c.jsx("div",{className:"h-1",style:{width:`${(Wt.length+5)*120}px`}})})}),c.jsx("div",{ref:Bt,className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:kt=>{tn(kt);const Pr=kt.target.previousElementSibling;Pr&&(Pr.scrollLeft=kt.target.scrollLeft)},children:c.jsxs("table",{className:"min-w-full border-collapse text-sm min-w-max",children:[c.jsx("thead",{children:c.jsxs(gt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-20 text-center",children:"Student ID"}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 ${pe?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[180px] bg-blue-50 cursor-pointer select-none"}`,onClick:kt=>{kt.preventDefault(),kt.stopPropagation(),Ae(!pe)},title:"Toggle student name columns",children:pe?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),c.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-16 text-center",children:"No."}),c.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 min-w-[100px]",children:"Nickname"}),Wt.map((kt,Pr)=>{const Et=Te.has(kt.test_name),rn=kt.test_type==="drawing",An=Qt.current.has(kt.test_name);return console.log(` Rendering test ${kt.test_name}:`,{isDrawingTest:rn,isEditingColumn:An,editingColumns:Array.from(Qt.current),test_type:kt.test_type}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 cursor-pointer hover:bg-blue-200 transition-colors select-none ${Et?"w-8 min-w-[32px] max-w-[32px] bg-gray-100":"min-w-[100px] bg-blue-50"}`,onClick:ze=>{ze.preventDefault(),ze.stopPropagation(),Rr(kt.test_name)},children:Et?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:kt.test_name,children:kt.test_name.length>8?kt.test_name.substring(0,8)+"...":kt.test_name}),c.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})},Pr)})]})}),c.jsx("tbody",{children:c.jsx(il,{children:ft.map((kt,Pr)=>c.jsxs(gt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${Pr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1+Pr*.05,ease:"easeOut"},whileHover:{scale:1.01,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.99},children:[c.jsx(gt.td,{className:"border-b border-gray-100 px-4 py-4 text-center font-semibold text-gray-900",whileHover:{scale:1.05},transition:{duration:.2},children:kt.student_id}),pe?c.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Et=>{Et.preventDefault(),Et.stopPropagation(),Ae(!1)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):c.jsxs(c.Fragment,{children:[c.jsx(gt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:kt.name}),c.jsx(gt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:kt.surname})]}),c.jsx(gt.td,{className:"border-b border-gray-100 px-4 py-4 text-center text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:kt.number??Pr+1}),c.jsx(gt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-600",whileHover:{scale:1.02},transition:{duration:.2},children:kt.nickname||"-"}),Wt.map((Et,rn)=>{const An=Te.has(Et.test_name),ze=kt[Et.test_name];return An?(console.log(" Rendering collapsed column for test:",Et.test_name),c.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:ur=>{ur.preventDefault(),ur.stopPropagation(),console.log(" Clicked on collapsed arrow for:",Et.test_name),Rr(Et.test_name)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},rn)):c.jsx(gt.td,{className:"border-b border-gray-100 px-2 py-4 text-sm min-w-[100px]",initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},transition:{duration:.3},whileHover:{scale:1.02},onClick:ur=>{console.debug("[TeacherResults] Main table TD clicked",{testResult:ze,student:kt.student_id});const sr=ze?.test_type||Et?.test_type;if(sr==="drawing"||sr==="speaking")return;const ds=l(ze),pn=ds!==null&&ds<50;if(ze?.retest_offered===!0&&(sr==="multiple_choice"||sr==="true_false"||sr==="input")){jr(ze,Et);return}if(sr==="fill_blanks"||sr==="matching_type"||sr==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked",{testType:sr,isRed:pn,testResult:ze}),pn){if(ze?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:kt.student_id,test:Et}),n({failedStudentIds:[kt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal",{testResult:ze}),_t({isOpen:!0,testResult:ze});else if(pn){if(ze?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:kt.student_id,test:Et}),n({failedStudentIds:[kt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else jr(ze,Et)},children:ze&&ze.test_type==="drawing"?c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[c.jsx("button",{onClick:()=>Bn(ze),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"View Drawing"}),(()=>{const ur=`${Et.test_name}|${kt.student_id}`,sr=he===ur,ds=Number.isFinite(ze?.score)?ze.score:0;if(!sr){const pn=l(ze),nn=pn!==null&&pn<50,xn=pn!==null&&pn>=50&&pn<70,_n=ze?.retest_offered===!0,Wl=pn===null?"text-gray-600":nn?"text-red-600 font-semibold":xn?"text-yellow-600":"text-green-600";return c.jsxs(gt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${Wl} cursor-pointer hover:opacity-90 ${_n?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:nn?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:Ai=>{Ai.preventDefault(),Ai.stopPropagation(),nn&&!_n?n({failedStudentIds:[kt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r}):(Ee(ur),_e(String(ds)))},title:_n?"Retest offered":nn?"Offer retest":"Double-click to edit score",children:[(()=>{const Ai=ze.retest_best_score??ze.score,oh=ze.retest_best_max_score??ze.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:nn?"text-red-700":"",children:Ai}),"/",c.jsx("span",{children:oh})]})})(),ze.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})}return c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:10,value:we,onChange:pn=>_e(pn.target.value),onBlur:async()=>{const pn=Math.max(0,Math.min(10,parseFloat(we||"0")));Ce(!0);try{const nn={resultId:ze?.id,score:pn,maxScore:10},xn=await(window.tokenManager?.getToken()||ia.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Ud.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:xn?`Bearer ${xn}`:""},body:JSON.stringify(nn)})).ok)throw new Error("Failed to save")}catch{}finally{Ce(!1),Ee(null),gn(T,!0)}},onKeyDown:async pn=>{pn.key==="Enter"?pn.currentTarget.blur():pn.key==="Escape"&&Ee(null)},className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",disabled:ke}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",value:10,className:"w-12 px-2 py-1 text-xs border border-gray-300 bg-gray-100 rounded",disabled:!0})]})})(),ze.caught_cheating&&ze.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",ze.visibility_change_times,")"]})]}):ze&&(ze.test_type==="speaking"||Et.test_type==="speaking")?c.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[(()=>{const ur=ze?.answers;let sr;if(typeof ur=="string")if(/^https?:\/\//i.test(ur))sr=ur;else try{sr=JSON.parse(ur)?.audio_url}catch{}else ur&&typeof ur=="object"&&(sr=ur.audio_url);return!sr&&ze?.audio_url&&(sr=ze.audio_url),c.jsx(c.Fragment,{children:c.jsx("button",{onClick:()=>be({...ze,__studentId:kt.student_id},"audio",sr),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Results"})})})(),(()=>{const ur=Qt.current.has(Et.test_name);return console.log(` Score cell for ${Et.test_name}:`,{isEditing:ur,editingColumns:Array.from(Qt.current),test_name:Et.test_name}),ur})()?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:ze.max_score||100,value:Cr.current[Et.test_name]?.[kt.student_id]?.score||ze.score||"",onChange:ur=>ci(Et.test_name,kt.student_id,"score",ur.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",min:"1",value:Cr.current[Et.test_name]?.[kt.student_id]?.maxScore||ze.max_score||100,onChange:ur=>ci(Et.test_name,kt.student_id,"maxScore",ur.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):c.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium",onDoubleClick:()=>{console.log(" Double-clicked on speaking test score:",Et.test_name),console.log(" Results state at double-click:",L),console.log(" Test result:",ze),console.log(" Student:",kt),console.log(" Test:",Et),ze&&ze.id?(console.log(" Starting column editing for speaking test:",Et.test_name),as(Et.test_name)):console.log(" No test result ID found, cannot edit")},title:"Double-click to edit scores",children:[(()=>{const ur=l(ze),sr=ur!==null&&ur<50,ds=ur!==null&&ur>=50&&ur<70,pn=ze.retest_offered,nn=ur===null?"text-gray-600":sr?"text-red-600 font-semibold":ds?"text-yellow-600":"text-green-600";return c.jsxs(gt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${nn} cursor-pointer hover:opacity-90 ${pn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:xn=>{xn.preventDefault(),xn.stopPropagation(),sr&&!pn&&(console.log(" Offering retest for speaking test:",Et.test_name),n({failedStudentIds:[kt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r}))},title:pn?"Retest offered":sr?"Offer retest":'Use "View Results" button to review',children:[(()=>{const xn=ze.retest_best_score??ze.score,_n=ze.retest_best_max_score??ze.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:sr?"text-red-700":"",children:xn}),"/",c.jsx("span",{children:_n})]})})(),ze.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),ze.caught_cheating&&ze.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",ze.visibility_change_times,")"]})]})]}):ze&&ze.score!==null&&ze.score!==void 0?c.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[(()=>{const ur=l(ze),sr=ur!==null&&ur<50,ds=ur!==null&&ur>=50&&ur<70,pn=ur===null?"text-gray-600":sr?"text-red-600 font-semibold":ds?"text-yellow-600":"text-green-600",nn=ze?.retest_offered===!0;return c.jsxs(gt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${pn} cursor-pointer hover:opacity-90 ${nn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:xn=>{xn.preventDefault(),xn.stopPropagation();const _n=ze?.test_type||Et?.test_type;if(!(_n==="drawing"||_n==="speaking")){if(ze?.retest_offered===!0&&(_n==="multiple_choice"||_n==="true_false"||_n==="input")){jr(ze,Et);return}if(_n==="fill_blanks"||_n==="matching_type"||_n==="word_matching"){if(console.debug("[TeacherResults] Score pill clicked (Fill Blanks/Matching/Word Matching)",{testType:_n,isRed:sr,testResult:ze}),sr){if(ze?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[kt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal from score pill",{testResult:ze}),_t({isOpen:!0,testResult:ze});return}if(sr){if(ze?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[kt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else jr(ze,Et)}},title:nn?"Click to view retest answers":sr?"Offer retest":"",children:[(()=>{const xn=ze.retest_best_score??ze.score,_n=ze.retest_best_max_score??ze.max_score;return c.jsxs(c.Fragment,{children:[c.jsx("span",{className:sr?"text-red-700":"",children:xn}),"/",c.jsx("span",{children:_n})]})})(),ze.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),ze.caught_cheating&&ze.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",ze.visibility_change_times,")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})},rn)})]},Pr))})})]})})]})}),[Ha,Te,Rr,pe]),Re=_.useCallback(($e,ft,Wt)=>!ft||ft.length===0?c.jsx(gt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:c.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):c.jsx(gt.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:c.jsx(gt.div,{className:"overflow-x-auto -mx-4 px-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden min-w-max",children:c.jsxs("table",{className:"w-full border-collapse text-xs min-w-max",children:[c.jsx("thead",{children:c.jsxs(gt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.2},children:[c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-16 text-center",children:"ID"}),c.jsx("th",{className:`border-b border-gray-200 px-2 py-3 text-left font-semibold text-gray-700 ${pe?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[160px] bg-blue-50 cursor-pointer select-none"}`,onClick:kt=>{kt.preventDefault(),kt.stopPropagation(),Ae(!pe)},title:"Toggle student name columns",children:pe?c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),c.jsx("svg",{className:"w-3 h-3 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-12 text-center",children:"No."}),c.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[80px]",children:"Nickname"}),Wt.map((kt,Pr)=>(kt.test_type,Qt.current.has(kt.test_name),c.jsx(gt.th,{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[100px]",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3+Pr*.05},children:c.jsx("div",{className:"flex flex-col space-y-1",children:c.jsx("span",{className:"text-xs",children:kt.test_name.length>10?kt.test_name.substring(0,10)+"...":kt.test_name})})},Pr)))]})}),c.jsx("tbody",{children:c.jsx(il,{children:ft.map((kt,Pr)=>c.jsxs(gt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${Pr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.1+Pr*.03,ease:"easeOut"},whileHover:{scale:1.005,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.995},children:[c.jsx(gt.td,{className:"border-b border-gray-100 px-3 py-3 text-center font-semibold text-gray-900",whileHover:{scale:1.03},transition:{duration:.15},children:kt.student_id}),pe?c.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-xs w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-3 h-3 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Et=>{Et.preventDefault(),Et.stopPropagation(),Ae(!1)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):c.jsxs(c.Fragment,{children:[c.jsx(gt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:kt.name}),c.jsx(gt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:kt.surname})]}),c.jsx(gt.td,{className:"border-b border-gray-100 px-3 py-3 text-center text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:kt.number??Pr+1}),c.jsx(gt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-600 whitespace-normal break-words",whileHover:{scale:1.01},transition:{duration:.15},children:kt.nickname||"-"}),Wt.map((Et,rn)=>{const An=Te.has(Et.test_name),ze=kt[Et.test_name];return An?c.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-sm w-8 min-w-[32px] max-w-[32px]",children:c.jsx("div",{className:"flex justify-center",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:ur=>{ur.preventDefault(),ur.stopPropagation(),Rr(Et.test_name)},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},rn):c.jsx(gt.td,{className:"border-b border-gray-100 px-3 py-3 text-sm",whileHover:{scale:1.01},transition:{duration:.15},onClick:ur=>{console.debug("[TeacherResults] TD clicked",{testResult:ze,student:kt.student_id});const sr=ze?.test_type||Et?.test_type;if(sr==="drawing"||sr==="speaking")return;const ds=l(ze),pn=ds!==null&&ds<50;if(ze?.retest_offered===!0&&(sr==="multiple_choice"||sr==="true_false"||sr==="input")){jr(ze,Et);return}if(sr==="fill_blanks"||sr==="matching_type"||sr==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked (nested table)",{testType:sr,isRed:pn,testResult:ze}),pn){if(ze?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:kt.student_id}),n({failedStudentIds:[kt.student_id],test_type:ze.test_type,original_test_id:ze.test_id,subject_id:ze.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal (nested table)",{testResult:ze}),_t({isOpen:!0,testResult:ze});else if(pn){if(ze?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:kt.student_id}),n({failedStudentIds:[kt.student_id],test_type:ze.test_type,original_test_id:ze.test_id,subject_id:ze.subject_id,grade:t,class:r})}else jr(ze,Et)},children:ze&&(ze.test_type==="drawing"||Et.test_type==="drawing"||ze.test_type==="speaking"||Et.test_type==="speaking"||ze.score!==null&&ze.score!==void 0)?c.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[ze.test_type==="drawing"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>Bn(ze),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View"}),Qt.current.has(Et.test_name)?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:ze.max_score||100,value:Cr.current[Et.test_name]?.[kt.student_id]?.score||ze.score||"",onChange:ur=>ci(Et.test_name,kt.student_id,"score",ur.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("span",{className:"text-xs text-gray-500",children:"/"}),c.jsx("input",{type:"number",min:"1",value:Cr.current[Et.test_name]?.[kt.student_id]?.maxScore||ze.max_score||100,onChange:ur=>ci(Et.test_name,kt.student_id,"maxScore",ur.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):(()=>{const ur=l(ze),sr=ur!==null&&ur<50,ds=ur!==null&&ur>=50&&ur<70,pn=ze.retest_offered,nn=ur===null?"text-gray-600":sr?"text-red-600 font-semibold":ds?"text-yellow-600":"text-green-600";return c.jsxs(gt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${nn} cursor-pointer hover:opacity-90 ${pn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>as(Et.test_name),onClick:xn=>{xn.preventDefault(),xn.stopPropagation();const _n=ze?.test_type||Et?.test_type;if(!(_n==="drawing"||_n==="speaking")){if(ze?.retest_offered===!0&&(_n==="multiple_choice"||_n==="true_false"||_n==="input")){jr(ze,Et);return}if(sr){if(ze?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[kt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else jr(ze,Et)}},title:pn?"Click to view retest answers":sr?"Offer retest":"Click to view answers",children:[c.jsx("span",{className:sr?"text-red-700":"",children:ze.score}),"/",c.jsx("span",{children:ze.max_score}),ze.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})()]}):ze.test_type==="speaking"||Et.test_type==="speaking"?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>be({...ze,__studentId:kt.student_id},"audio"),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View Audio"}),Pt&&Pt.resultId===ze.result_id?c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("input",{type:"number",min:"0",max:ze.max_score||100,value:Qe,onChange:ur=>Ne(ur.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),c.jsx("button",{onClick:()=>Xn(),disabled:Ke,className:"px-1 py-0.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:Ke?"Saving...":"Save"}),c.jsx("button",{onClick:()=>Fn(),disabled:Ke,className:"px-1 py-0.5 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):(()=>{const ur=l(ze),sr=ur!==null&&ur<50,ds=ur!==null&&ur>=50&&ur<70,pn=ze.retest_offered,nn=ur===null?"text-gray-600":sr?"text-red-600 font-semibold":ds?"text-yellow-600":"text-green-600";return c.jsxs(gt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${nn} cursor-pointer hover:opacity-90 ${pn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>{Ie({resultId:ze.result_id,score:ze.score}),Ne(ze.score?.toString()||"")},onClick:xn=>{xn.preventDefault(),xn.stopPropagation();const _n=ze?.test_type||Et?.test_type;if(!(_n==="drawing"||_n==="speaking")){if(ze?.retest_offered===!0&&(_n==="multiple_choice"||_n==="true_false"||_n==="input")){jr(ze,Et);return}if(sr){if(ze?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[kt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else jr(ze,Et)}},title:pn?"Click to view retest answers":sr?"Offer retest":"Click to view answers, double-click to edit score",children:[c.jsx("span",{className:sr?"text-red-700":"",children:ze.score||0}),"/",c.jsx("span",{children:ze.max_score||100}),ze.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})()]}):(()=>{const ur=l(ze),sr=ur!==null&&ur<50,ds=ur!==null&&ur>=50&&ur<70,pn=ur!==null&&ur>=70,nn=ze?.retest_offered===!0;console.debug("[TeacherResults] Render pill",{studentId:kt.student_id,pct:ur,isRed:sr,isYellow:ds,isGreen:pn,score:ze.score,max:ze.max_score,percentageField:ze.percentage});const _n=`px-1 py-0.5 rounded text-xs font-medium ${ur===null?"text-gray-600":sr?"text-red-600 font-semibold":ds?"text-yellow-600":"text-green-600"} cursor-pointer hover:opacity-90 pointer-events-auto ${nn?"bg-blue-50 text-blue-700 border border-blue-200":""}`;return c.jsxs(gt.div,{className:_n,style:sr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onClick:Wl=>{Wl.preventDefault(),Wl.stopPropagation();const Ai=ze?.test_type||Et?.test_type;if(!(Ai==="drawing"||Ai==="speaking")){if(ze?.retest_offered===!0&&(Ai==="multiple_choice"||Ai==="true_false"||Ai==="input")){jr(ze,Et);return}if(sr){if(ze?.retest_offered){o("Retest is already offered","info");return}const oh=window.getComputedStyle(Wl.currentTarget).color;console.debug("[TeacherResults] Red pill clicked -> opening retest modal",{studentId:kt.student_id,className:_n,computedColor:oh}),n({failedStudentIds:[kt.student_id],test_type:Et.test_type,original_test_id:ze?.test_id||Et.test_id,subject_id:ze?.subject_id||Et.subject_id,grade:t,class:r})}else jr(ze,Et)}},title:nn?"Click to view retest answers":sr?"Offer retest":"Click to view answers",children:[c.jsx("span",{className:sr?"text-red-700":"",children:ze.score}),"/",c.jsx("span",{children:ze.max_score}),ze.caught_cheating&&c.jsx("span",{className:"ml-1",children:""})]})})(),ze.caught_cheating&&ze.visibility_change_times&&c.jsxs("span",{className:"text-xs text-red-600",children:["(",ze.visibility_change_times,")"]})]}):c.jsx("span",{className:"text-gray-400",children:"-"})},rn)})]},Pr))})})]})})})}),[Ha,Te,Rr,pe]),yt=_.useCallback(()=>{if(!L)return null;console.log(" renderResults - results:",L),console.log(" renderResults - results.class:",L.class),console.log(" renderResults - results.unique_tests:",L.unique_tests);const $e=L.class&&Array.isArray(L.class)&&L.class.length>0;if(console.log(" renderResults - hasStudentData:",$e),!$e)return console.log(" renderResults - No student data, showing no students message"),c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-500",children:"No students found for this class and semester."})});const ft=L.unique_tests||[];return console.log(" renderResults - uniqueTests:",ft),Br.current=L,c.jsxs("div",{className:"space-y-6",children:[c.jsxs(gt.div,{className:"bg-gradient-to-r from-red-500 to-pink-500 rounded-lg p-6 text-white",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[c.jsxs(gt.h2,{className:"text-2xl font-bold mb-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},children:["Test Results - Grade M",W,", Class ",W,"/",K,", Semester ",T]}),c.jsxs(gt.p,{className:"text-cyan-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:["Viewing results for ",L.subjects?.length||0," subject(s)"]}),c.jsxs(gt.div,{className:"mt-4 flex gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[c.jsx("button",{onClick:()=>{const Wt=L.unique_tests?.map(kt=>kt.test_name)||[];ie(new Set(Wt))},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Collapse All Tests"}),c.jsx("button",{onClick:()=>ie(new Set),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Expand All Tests"})]})]}),c.jsxs(gt.div,{className:"bg-white rounded-lg shadow p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[c.jsx(gt.h3,{className:"text-lg font-semibold text-gray-900 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:"Class Results"}),c.jsx("div",{className:"hidden md:block",children:on("All Subjects",L.class,ft)}),c.jsx("div",{className:"md:hidden",children:Re("All Subjects",L.class,ft)})]})]})},[L,on,W,K,T]),tr=_.useCallback(()=>{if(!L||!L.class||!L.unique_tests)return;const $e=["Student ID","Name","Surname","No.","Nickname",...L.unique_tests.map(rn=>rn.test_name)],ft=L.class.map((rn,An)=>{const ze=[];return ze.push(rn.student_id),ze.push(rn.name),ze.push(rn.surname),ze.push(rn.number??An+1),ze.push(rn.nickname||"-"),L.unique_tests.forEach(ur=>{const sr=rn[ur.test_name];sr&&sr.score!==null&&sr.score!==void 0?ze.push(`${sr.score}/${sr.max_score}`):ze.push("-")}),ze}),Wt=Yb.aoa_to_sheet([$e,...ft]),kt=Yb.book_new(),Pr=[{wch:10},{wch:15},{wch:15},{wch:6},{wch:12},...L.unique_tests.map(()=>({wch:15}))];Wt["!cols"]=Pr,Yb.book_append_sheet(kt,Wt,"Class Results");const Et=`class-results-${W}-${K}-semester-${T}.xlsx`;Rbe(kt,Et),o("Excel file exported successfully!","success")},[L,W,K,T,o]);return f?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Results..."})]})}):g?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:g}),c.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx("div",{className:"flex justify-between items-center py-4",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Class Results"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",Q?Q.toLocaleString():"Never"]})]})})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Class"}),M.length>0?(()=>{const $e=M.reduce((ft,Wt)=>{const kt=Wt.subject||"Unknown Subject";return ft[kt]||(ft[kt]=[]),ft[kt].push(Wt),ft},{});return c.jsx("div",{className:"space-y-6",children:Object.entries($e).map(([ft,Wt])=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-3 flex flex-col sm:flex-row sm:items-center items-center",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),ft]}),c.jsxs("span",{className:"ml-0 sm:ml-2 text-sm text-gray-500 mt-1 sm:mt-0",children:["(",Wt.length," classes)"]})]}),c.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Wt.map((kt,Pr)=>c.jsxs(ot,{variant:W===kt.grade&&K===kt.class?"primary":"outline",onClick:()=>li(kt.grade,kt.class),className:"px-3 py-1 text-xs font-medium min-w-[60px]",children:[kt.grade,"/",kt.class]},`${kt.grade}-${kt.class}-${Pr}`))})]},ft))})})():c.jsx("p",{className:"text-gray-500",children:"No classes available"})]}),K&&Qs(),K&&L&&c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[W," ",K," - Test Results ",Me?`(Term ${Ve?.terms.find($e=>$e.id===Me)?.term})`:""]}),c.jsx("div",{className:"flex space-x-3",children:c.jsxs("button",{type:"button",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2",onClick:tr,children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-4 h-4 object-contain"}),c.jsx("span",{className:"font-medium text-sm",children:"Export Excel"})]})})]}),yt()]}),K&&!L&&c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsx("div",{className:"flex items-center justify-center py-8",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-200 border-t-blue-500"}),c.jsx("span",{className:"text-gray-600",children:"Loading results"})]})})})]})}),Vt&&Ue&&c.jsx(ub,{children:c.jsx(fH,{drawing:Vt,isOpen:Ue,onClose:()=>tt(!1),isTeacherView:!0,onSaveScore:async({resultId:$e,score:ft,maxScore:Wt})=>{try{const kt=await(window.tokenManager?.getToken()||ia.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Ud.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:kt?`Bearer ${kt}`:""},body:JSON.stringify({resultId:$e,score:ft,maxScore:Wt})})).ok)throw new Error("Failed to save");await gn(T,!0)}catch{o("Failed to save drawing score","error")}}})}),c.jsx(ub,{children:c.jsx(G0e,{onScoreUpdate:$e=>{K&&gn(T,!0),rt&&xt(ft=>({...ft,score:$e.score,max_score:$e.maxScore,percentage:$e.percentage}))},isOpen:ge,onClose:()=>{Pe(!1),xt(null),ce(null)},testResult:rt,questions:ut,isLoadingQuestions:je})}),c.jsx(ub,{children:c.jsx(V0e,{isOpen:dt.isOpen,onClose:()=>_t({isOpen:!1,testResult:null}),testResult:dt.testResult,onScoreUpdate:$e=>{K&&gn(T,!0)}})}),nt&&It&&c.jsx(ub,{children:c.jsx(H0e,{result:nt,isOpen:It,onClose:()=>Lt(!1),initialTab:nt.__initialTab||"overview",editingSpeakingScore:Pt,tempSpeakingScore:Qe,isSavingSpeakingScore:Ke,onStartSpeakingScoreEdit:Ur,onSaveSpeakingScore:Xn,onCancelSpeakingScoreEdit:Fn,onTempSpeakingScoreChange:Ne})})]})},Kbe={getTestPerformance:async(e,t=null)=>{try{await lu.loadAcademicCalendar();const n=lu.getCurrentTerm()?.id;if(!n)throw new Error("No current academic period found");console.log(` Fetching test performance for teacher ${e}, period ${n}, class: ${t||"all"}`);let s=`/.netlify/functions/get-test-performance?teacher_id=${e}&academic_period_id=${n}`;if(t){const[o,l]=t.split("/"),u=o.startsWith("M")?o:`M${o}`;s+=`&grade=${u}&class=${l}`}const a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.error||"Failed to fetch performance data");return console.log(` Performance data loaded: ${i.count} tests`),i.data}catch(r){throw console.error(" Error fetching test performance:",r),r}}};function TV(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=TV(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function js(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=TV(e))&&(n&&(n+=" "),n+=t);return n}var X5={},J5={},hO;function Ybe(){return hO||(hO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(J5)),J5}var Q5={},mO;function CV(){return mO||(mO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Q5)),Q5}var Z5={},gO;function EV(){return gO||(gO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Z5)),Z5}var e6={},pO;function ME(){return pO||(pO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let a=0,i="",o="",l=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<s;){const u=r[a];o?u==="\\"&&a+1<s?(a++,i+=r[a]):u===o?o="":i+=u:l?u==='"'||u==="'"?o=u:u==="]"?(l=!1,n.push(i),i=""):i+=u:u==="["?(l=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,a++}return i&&n.push(i),n}e.toPath=t})(e6)),e6}var xO;function FE(){return xO||(xO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ybe(),r=CV(),n=EV(),s=ME();function a(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?r.isDeepKey(l)?a(o,s.toPath(l),u):u:d}case"number":case"symbol":{typeof l=="number"&&(l=n.toKey(l));const d=o[l];return d===void 0?u:d}default:{if(Array.isArray(l))return i(o,l,u);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),t.isUnsafeProperty(l))return u;const d=o[l];return d===void 0?u:d}}}function i(o,l,u){if(l.length===0)return u;let d=o;for(let f=0;f<l.length;f++){if(d==null||t.isUnsafeProperty(l[f]))return u;d=d[l[f]]}return d===void 0?u:d}e.get=a})(X5)),X5}var t6,yO;function Xbe(){return yO||(yO=1,t6=FE().get),t6}var Jbe=Xbe();const p3=Ec(Jbe);var r6={exports:{}},Yn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vO;function Qbe(){if(vO)return Yn;vO=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,g=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,T=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function b(N){if(typeof N=="object"&&N!==null){var P=N.$$typeof;switch(P){case t:switch(N=N.type,N){case l:case u:case n:case a:case s:case f:return N;default:switch(N=N&&N.$$typeof,N){case o:case d:case x:case g:case i:return N;default:return P}}case r:return P}}}function E(N){return b(N)===u}return Yn.AsyncMode=l,Yn.ConcurrentMode=u,Yn.ContextConsumer=o,Yn.ContextProvider=i,Yn.Element=t,Yn.ForwardRef=d,Yn.Fragment=n,Yn.Lazy=x,Yn.Memo=g,Yn.Portal=r,Yn.Profiler=a,Yn.StrictMode=s,Yn.Suspense=f,Yn.isAsyncMode=function(N){return E(N)||b(N)===l},Yn.isConcurrentMode=E,Yn.isContextConsumer=function(N){return b(N)===o},Yn.isContextProvider=function(N){return b(N)===i},Yn.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===t},Yn.isForwardRef=function(N){return b(N)===d},Yn.isFragment=function(N){return b(N)===n},Yn.isLazy=function(N){return b(N)===x},Yn.isMemo=function(N){return b(N)===g},Yn.isPortal=function(N){return b(N)===r},Yn.isProfiler=function(N){return b(N)===a},Yn.isStrictMode=function(N){return b(N)===s},Yn.isSuspense=function(N){return b(N)===f},Yn.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===u||N===a||N===s||N===f||N===h||typeof N=="object"&&N!==null&&(N.$$typeof===x||N.$$typeof===g||N.$$typeof===i||N.$$typeof===o||N.$$typeof===d||N.$$typeof===v||N.$$typeof===T||N.$$typeof===k||N.$$typeof===y)},Yn.typeOf=b,Yn}var wO;function Zbe(){return wO||(wO=1,r6.exports=Qbe()),r6.exports}Zbe();var gc=e=>e===0?0:e>0?1:-1,kc=e=>typeof e=="number"&&e!=+e,em=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,an=e=>(typeof e=="number"||e instanceof Number)&&!kc(e),Qu=e=>an(e)||typeof e=="string",e4e=0,$v=e=>{var t=++e4e;return"".concat(e||"").concat(t)},Gf=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!an(t)&&typeof t!="string")return n;var a;if(em(t)){if(r==null)return n;var i=t.indexOf("%");a=r*parseFloat(t.slice(0,i))/100}else a=+t;return kc(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},NV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Wd(e,t,r){return an(e)&&an(t)?e+r*(t-e):t}function AV(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):p3(n,t))===r)}var Ti=e=>e===null||typeof e>"u",DE=e=>Ti(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),t4e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function OE(e){if(typeof e!="string")return!1;var t=t4e;return t.includes(e)}var r4e=["viewBox","children"],bO=["points","pathLength"],n6={svg:r4e,polygon:bO,polyline:bO},IE=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{OE(s)&&(n[s]=(a=>r[s](r,a)))}),n},n4e=(e,t,r)=>n=>(e(t,r,n),null),s4e=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];OE(s)&&typeof a=="function"&&(n||(n={}),n[s]=n4e(a,t,r))}),n},a4e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function jV(e){if(typeof e!="string")return!1;var t=a4e;return t.includes(e)}function tg(e){var t=Object.entries(e).filter(r=>{var[n]=r;return jV(n)});return Object.fromEntries(t)}var PV=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,i4e=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(s=n&&n6?.[n])!==null&&s!==void 0?s:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&a.includes(t)||jV(t)),l=!!r&&OE(t);return i||o||l},Qi=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(_.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(a=>{var i;i4e((i=n)===null||i===void 0?void 0:i[a],a,t,r)&&(s[a]=n[a])}),s},o4e=["children","width","height","viewBox","className","style","title","desc"];function Z8(){return Z8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z8.apply(null,arguments)}function l4e(e,t){if(e==null)return{};var r,n,s=c4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function c4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MV=_.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:i,style:o,title:l,desc:u}=e,d=l4e(e,o4e),f=a||{width:n,height:s,x:0,y:0},h=js("recharts-surface",i);return _.createElement("svg",Z8({},Qi(d,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),_.createElement("title",null,l),_.createElement("desc",null,u),r)}),u4e=["children","className"];function eT(){return eT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eT.apply(null,arguments)}function d4e(e,t){if(e==null)return{};var r,n,s=f4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function f4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var T1=_.forwardRef((e,t)=>{var{children:r,className:n}=e,s=d4e(e,u4e),a=js("recharts-layer",n);return _.createElement("g",eT({className:a},Qi(s,!0),{ref:t}),r)}),h4e=_.createContext(null);function aa(e){return function(){return e}}const tT=Math.PI,rT=2*tT,Hh=1e-6,m4e=rT-Hh;function FV(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function g4e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return FV;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class p4e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?FV:g4e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,i){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,l=n-t,u=s-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Hh)if(!(Math.abs(f*l-u*d)>Hh)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-i,x=s-o,y=l*l+u*u,v=g*g+x*x,T=Math.sqrt(y),k=Math.sqrt(h),b=a*Math.tan((tT-Math.acos((y+h-v)/(2*T*k)))/2),E=b/k,N=b/T;Math.abs(E-1)>Hh&&this._append`L${t+E*d},${r+E*f}`,this._append`A${a},${a},0,0,${+(f*g>d*x)},${this._x1=t+N*l},${this._y1=r+N*u}`}}arc(t,r,n,s,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(s),l=n*Math.sin(s),u=t+o,d=r+l,f=1^i,h=i?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Hh||Math.abs(this._y1-d)>Hh)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%rT+rT),h>m4e?this._append`A${n},${n},0,1,${f},${t-o},${r-l}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Hh&&this._append`A${n},${n},0,${+(h>=tT)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function DV(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new p4e(t)}function RE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function OV(e){this._context=e}OV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function x3(e){return new OV(e)}function IV(e){return e[0]}function RV(e){return e[1]}function LV(e,t){var r=aa(!0),n=null,s=x3,a=null,i=DV(o);e=typeof e=="function"?e:e===void 0?IV:aa(e),t=typeof t=="function"?t:t===void 0?RV:aa(t);function o(l){var u,d=(l=RE(l)).length,f,h=!1,g;for(n==null&&(a=s(g=i())),u=0;u<=d;++u)!(u<d&&r(f=l[u],u,l))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,u,l),+t(f,u,l));if(g)return a=null,g+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:aa(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:aa(+l),o):t},o.defined=function(l){return arguments.length?(r=typeof l=="function"?l:aa(!!l),o):r},o.curve=function(l){return arguments.length?(s=l,n!=null&&(a=s(n)),o):s},o.context=function(l){return arguments.length?(l==null?n=a=null:a=s(n=l),o):n},o}function _b(e,t,r){var n=null,s=aa(!0),a=null,i=x3,o=null,l=DV(u);e=typeof e=="function"?e:e===void 0?IV:aa(+e),t=typeof t=="function"?t:aa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?RV:aa(+r);function u(f){var h,g,x,y=(f=RE(f)).length,v,T=!1,k,b=new Array(y),E=new Array(y);for(a==null&&(o=i(k=l())),h=0;h<=y;++h){if(!(h<y&&s(v=f[h],h,f))===T)if(T=!T)g=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=h-1;x>=g;--x)o.point(b[x],E[x]);o.lineEnd(),o.areaEnd()}T&&(b[h]=+e(v,h,f),E[h]=+t(v,h,f),o.point(n?+n(v,h,f):b[h],r?+r(v,h,f):E[h]))}if(k)return o=null,k+""||null}function d(){return LV().defined(s).curve(i).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:aa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:aa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:aa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:aa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:aa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:aa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:aa(!!f),u):s},u.curve=function(f){return arguments.length?(i=f,a!=null&&(o=i(a)),u):i},u.context=function(f){return arguments.length?(f==null?a=o=null:o=i(a=f),u):a},u}class BV{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function x4e(e){return new BV(e,!0)}function y4e(e){return new BV(e,!1)}function V4(){}function q4(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function $V(e){this._context=e}$V.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:q4(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:q4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v4e(e){return new $V(e)}function zV(e){this._context=e}zV.prototype={areaStart:V4,areaEnd:V4,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:q4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w4e(e){return new zV(e)}function UV(e){this._context=e}UV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:q4(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b4e(e){return new UV(e)}function WV(e){this._context=e}WV.prototype={areaStart:V4,areaEnd:V4,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function _4e(e){return new WV(e)}function _O(e){return e<0?-1:1}function SO(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),o=(a*s+i*n)/(n+s);return(_O(a)+_O(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function kO(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function s6(e,t,r){var n=e._x0,s=e._y0,a=e._x1,i=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,s+o*t,a-o,i-o*r,a,i)}function K4(e){this._context=e}K4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s6(this,this._t0,kO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,s6(this,kO(this,r=SO(this,e,t)),r);break;default:s6(this,this._t0,r=SO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function HV(e){this._context=new GV(e)}(HV.prototype=Object.create(K4.prototype)).point=function(e,t){K4.prototype.point.call(this,t,e)};function GV(e){this._context=e}GV.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function S4e(e){return new K4(e)}function k4e(e){return new HV(e)}function VV(e){this._context=e}VV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=TO(e),s=TO(t),a=0,i=1;i<r;++a,++i)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function TO(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),i=new Array(r);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,i[t]-=n*i[t-1];for(s[r-1]=i[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function T4e(e){return new VV(e)}function y3(e,t){this._context=e,this._t=t}y3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function C4e(e){return new y3(e,.5)}function E4e(e){return new y3(e,0)}function N4e(e){return new y3(e,1)}function Yp(e,t){if((i=e.length)>1)for(var r=1,n,s,a=e[t[0]],i,o=a.length;r<i;++r)for(s=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function nT(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function A4e(e,t){return e[t]}function j4e(e){const t=[];return t.key=e,t}function P4e(){var e=aa([]),t=nT,r=Yp,n=A4e;function s(a){var i=Array.from(e.apply(this,arguments),j4e),o,l=i.length,u=-1,d;for(const f of a)for(o=0,++u;o<l;++o)(i[o][u]=[0,+n(f,i[o].key,u,a)]).data=f;for(o=0,d=RE(t(i));o<l;++o)i[d[o]].index=o;return r(i,d),i}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:aa(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:aa(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?nT:typeof a=="function"?a:aa(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Yp,s):r},s}function M4e(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,i;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}Yp(e,t)}}function F4e(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var i=0,o=0;i<s;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Yp(e,t)}}function D4e(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,i;n<a;++n){for(var o=0,l=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,g=(f-h)/2,x=0;x<o;++x){var y=e[t[x]],v=y[n][1]||0,T=y[n-1][1]||0;g+=v-T}l+=f,u+=g*f}s[n-1][1]+=s[n-1][0]=r,l&&(r-=u/l)}s[n-1][1]+=s[n-1][0]=r,Yp(e,t)}}var a6={},i6={},CO;function O4e(){return CO||(CO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const i=r[a],o=n(i);s.has(o)||s.set(o,i)}return Array.from(s.values())}e.uniqBy=t})(i6)),i6}var o6={},EO;function qV(){return EO||(EO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(o6)),o6}var l6={},c6={},u6={},NO;function I4e(){return NO||(NO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(u6)),u6}var AO;function LE(){return AO||(AO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I4e();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(c6)),c6}var d6={},jO;function R4e(){return jO||(jO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(d6)),d6}var PO;function L4e(){return PO||(PO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LE(),r=R4e();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(l6)),l6}var f6={},h6={},MO;function B4e(){return MO||(MO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FE();function r(n){return function(s){return t.get(s,n)}}e.property=r})(h6)),h6}var m6={},g6={},p6={},x6={},FO;function KV(){return FO||(FO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(x6)),x6}var y6={},DO;function YV(){return DO||(DO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(y6)),y6}var v6={},OO;function XV(){return OO||(OO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(v6)),v6}var IO;function $4e(){return IO||(IO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BE(),r=KV(),n=YV(),s=XV();function a(f,h,g){return typeof g!="function"?t.isMatch(f,h):i(f,h,function x(y,v,T,k,b,E){const N=g(y,v,T,k,b,E);return N!==void 0?!!N:i(y,v,x,E)},new Map)}function i(f,h,g,x){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,g,x);case"function":return Object.keys(h).length>0?i(f,{...h},g,x):s.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:s.eq(f,h)}}function o(f,h,g,x){if(h==null)return!0;if(Array.isArray(h))return u(f,h,g,x);if(h instanceof Map)return l(f,h,g,x);if(h instanceof Set)return d(f,h,g,x);const y=Object.keys(h);if(f==null)return y.length===0;if(y.length===0)return!0;if(x&&x.has(h))return x.get(h)===f;x&&x.set(h,f);try{for(let v=0;v<y.length;v++){const T=y[v];if(!n.isPrimitive(f)&&!(T in f)||h[T]===void 0&&f[T]!==void 0||h[T]===null&&f[T]!==null||!g(f[T],h[T],T,f,h,x))return!1}return!0}finally{x&&x.delete(h)}}function l(f,h,g,x){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,v]of h.entries()){const T=f.get(y);if(g(T,v,y,f,h,x)===!1)return!1}return!0}function u(f,h,g,x){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let v=0;v<h.length;v++){const T=h[v];let k=!1;for(let b=0;b<f.length;b++){if(y.has(b))continue;const E=f[b];let N=!1;if(g(E,T,v,f,h,x)&&(N=!0),N){y.add(b),k=!0;break}}if(!k)return!1}return!0}function d(f,h,g,x){return h.size===0?!0:f instanceof Set?u([...f],[...h],g,x):!1}e.isMatchWith=a,e.isSetMatch=d})(p6)),p6}var RO;function BE(){return RO||(RO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$4e();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(g6)),g6}var w6={},b6={},_6={},LO;function z4e(){return LO||(LO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(_6)),_6}var S6={},BO;function JV(){return BO||(BO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(S6)),S6}var k6={},$O;function QV(){return $O||($O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",i="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",g="[object Object]",x="[object Error]",y="[object DataView]",v="[object Uint8Array]",T="[object Uint8ClampedArray]",k="[object Uint16Array]",b="[object Uint32Array]",E="[object BigUint64Array]",N="[object Int8Array]",P="[object Int16Array]",M="[object Int32Array]",j="[object BigInt64Array]",A="[object Float32Array]",D="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=j,e.bigUint64ArrayTag=E,e.booleanTag=s,e.dataViewTag=y,e.dateTag=o,e.errorTag=x,e.float32ArrayTag=A,e.float64ArrayTag=D,e.functionTag=f,e.int16ArrayTag=P,e.int32ArrayTag=M,e.int8ArrayTag=N,e.mapTag=l,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=k,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=T})(k6)),k6}var T6={},zO;function U4e(){return zO||(zO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(T6)),T6}var UO;function ZV(){return UO||(UO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z4e(),r=JV(),n=QV(),s=YV(),a=U4e();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,g=new Map,x=void 0){const y=x?.(d,f,h,g);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const v=new Array(d.length);g.set(d,v);for(let T=0;T<d.length;T++)v[T]=o(d[T],T,h,g,x);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;g.set(d,v);for(const[T,k]of d)v.set(T,o(k,T,h,g,x));return v}if(d instanceof Set){const v=new Set;g.set(d,v);for(const T of d)v.add(o(T,void 0,h,g,x));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,v);for(let T=0;T<d.length;T++)v[T]=o(d[T],T,h,g,x);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,v),l(v,d,h,g,x),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return g.set(d,v),l(v,d,h,g,x),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return g.set(d,v),l(v,d,h,g,x),v}if(d instanceof Error){const v=new d.constructor;return g.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,l(v,d,h,g,x),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return g.set(d,v),l(v,d,h,g,x),v}return d}function l(d,f,h=d,g,x){const y=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<y.length;v++){const T=y[v],k=Object.getOwnPropertyDescriptor(d,T);(k==null||k.writable)&&(d[T]=o(f[T],T,h,g,x))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=l})(b6)),b6}var WO;function W4e(){return WO||(WO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZV();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(w6)),w6}var HO;function H4e(){return HO||(HO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BE(),r=W4e();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(m6)),m6}var C6={},E6={},N6={},GO;function G4e(){return GO||(GO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZV(),r=QV();function n(s,a){return t.cloneDeepWith(s,(i,o,l,u)=>{const d=a?.(i,o,l,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s?.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(N6)),N6}var VO;function V4e(){return VO||(VO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=G4e();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(E6)),E6}var A6={},j6={},qO;function eq(){return qO||(qO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(j6)),j6}var P6={},KO;function q4e(){return KO||(KO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JV();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(P6)),P6}var YO;function K4e(){return YO||(YO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CV(),r=eq(),n=q4e(),s=ME();function a(i,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&t.isDeepKey(o)&&i?.[o]==null?l=s.toPath(o):l=[o],l.length===0)return!1;let u=i;for(let d=0;d<l.length;d++){const f=l[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(A6)),A6}var XO;function Y4e(){return XO||(XO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BE(),r=EV(),n=V4e(),s=FE(),a=K4e();function i(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return l=n.cloneDeep(l),function(u){const d=s.get(u,o);return d===void 0?a.has(u,o):l===void 0?d===void 0:t.isMatch(d,l)}}e.matchesProperty=i})(C6)),C6}var JO;function X4e(){return JO||(JO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qV(),r=B4e(),n=H4e(),s=Y4e();function a(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?s.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=a})(f6)),f6}var QO;function J4e(){return QO||(QO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O4e(),r=qV(),n=L4e(),s=X4e();function a(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),s.iteratee(o)):[]}e.uniqBy=a})(a6)),a6}var M6,ZO;function Q4e(){return ZO||(ZO=1,M6=J4e().uniqBy),M6}var Z4e=Q4e();const eI=Ec(Z4e);function e_e(e,t,r){return t===!0?eI(e,r):typeof t=="function"?eI(e,t):e}var F6={exports:{}},D6={},O6={exports:{}},I6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tI;function t_e(){if(tI)return I6;tI=1;var e=Wm();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var g=h(),x=n({inst:{value:g,getSnapshot:h}}),y=x[0].inst,v=x[1];return a(function(){y.value=g,y.getSnapshot=h,l(y)&&v({inst:y})},[f,g,h]),s(function(){return l(y)&&v({inst:y}),f(function(){l(y)&&v({inst:y})})},[f]),i(g),g}function l(f){var h=f.getSnapshot;f=f.value;try{var g=h();return!r(f,g)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return I6.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,I6}var rI;function r_e(){return rI||(rI=1,O6.exports=t_e()),O6.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nI;function n_e(){if(nI)return D6;nI=1;var e=Wm(),t=r_e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return D6.useSyncExternalStoreWithSelector=function(u,d,f,h,g){var x=a(null);if(x.current===null){var y={hasValue:!1,value:null};x.current=y}else y=x.current;x=o(function(){function T(P){if(!k){if(k=!0,b=P,P=h(P),g!==void 0&&y.hasValue){var M=y.value;if(g(M,P))return E=M}return E=P}if(M=E,n(b,P))return M;var j=h(P);return g!==void 0&&g(M,j)?(b=P,M):(b=P,E=j)}var k=!1,b,E,N=f===void 0?null:f;return[function(){return T(d())},N===null?void 0:function(){return T(N())}]},[d,f,h,g]);var v=s(u,x[0],x[1]);return i(function(){y.hasValue=!0,y.value=v},[v]),l(v),v},D6}var sI;function s_e(){return sI||(sI=1,F6.exports=n_e()),F6.exports}var a_e=s_e(),$E=_.createContext(null),i_e=e=>e,Vo=()=>{var e=_.useContext($E);return e?e.store.dispatch:i_e},Xb=()=>{},o_e=()=>Xb,l_e=(e,t)=>e===t;function Kr(e){var t=_.useContext($E);return a_e.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:o_e,t?t.store.getState:Xb,t?t.store.getState:Xb,t?e:Xb,l_e)}function c_e(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function u_e(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function d_e(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var aI=e=>Array.isArray(e)?e:[e];function f_e(e){const t=Array.isArray(e[0])?e[0]:e;return d_e(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function h_e(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var m_e=class{constructor(e){this.value=e}deref(){return this.value}},g_e=typeof WeakRef<"u"?WeakRef:m_e,p_e=0,iI=1;function Sb(){return{s:p_e,v:void 0,o:null,p:null}}function tq(e,t={}){let r=Sb();const{resultEqualityCheck:n}=t;let s,a=0;function i(){let o=r;const{length:l}=arguments;for(let f=0,h=l;f<h;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const y=x.get(g);y===void 0?(o=Sb(),x.set(g,o)):o=y}else{let x=o.p;x===null&&(o.p=x=new Map);const y=x.get(g);y===void 0?(o=Sb(),x.set(g,o)):o=y}}const u=o;let d;if(o.s===iI)d=o.v;else if(d=e.apply(null,arguments),a++,n){const f=s?.deref?.()??s;f!=null&&n(f,d)&&(d=f,a!==0&&a--),s=typeof d=="object"&&d!==null||typeof d=="function"?new g_e(d):d}return u.s=iI,u.v=d,d}return i.clearCache=()=>{r=Sb(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function x_e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,i=0,o,l={},u=s.pop();typeof u=="object"&&(l=u,u=s.pop()),c_e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...l},{memoize:f,memoizeOptions:h=[],argsMemoize:g=tq,argsMemoizeOptions:x=[]}=d,y=aI(h),v=aI(x),T=f_e(s),k=f(function(){return a++,u.apply(null,arguments)},...y),b=g(function(){i++;const N=h_e(T,arguments);return o=k.apply(null,N),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:k,dependencies:T,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var Ft=x_e(tq),y_e=Object.assign((e,t=Ft)=>{u_e(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((i,o,l)=>(i[r[l]]=o,i),{}))},{withTypes:()=>y_e}),R6={},L6={},B6={},oI;function v_e(){return oI||(oI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const i=t(n),o=t(s);if(i===o&&i===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?o-i:i-o}return 0};e.compareValues=r})(B6)),B6}var $6={},z6={},lI;function rq(){return lI||(lI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(z6)),z6}var cI;function w_e(){return cI||(cI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rq(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,i){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||i!=null&&Object.hasOwn(i,a)}e.isKey=s})($6)),$6}var uI;function b_e(){return uI||(uI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v_e(),r=w_e(),n=ME();function s(a,i,o,l){if(a==null)return[];o=l?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const u=(g,x)=>{let y=g;for(let v=0;v<x.length&&y!=null;++v)y=y[x[v]];return y},d=(g,x)=>x==null||g==null?x:typeof g=="object"&&"key"in g?Object.hasOwn(x,g.key)?x[g.key]:u(x,g.path):typeof g=="function"?g(x):Array.isArray(g)?u(x,g):typeof x=="object"?x[g]:x,f=i.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return a.map(g=>({original:g,criteria:f.map(x=>d(x,g))})).slice().sort((g,x)=>{for(let y=0;y<f.length;y++){const v=t.compareValues(g.criteria[y],x.criteria[y],o[y]);if(v!==0)return v}return 0}).map(g=>g.original)}e.orderBy=s})(L6)),L6}var U6={},dI;function __e(){return dI||(dI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),i=(o,l)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&l<a?i(d,l+1):s.push(d)}};return i(r,0),s}e.flatten=t})(U6)),U6}var W6={},fI;function nq(){return fI||(fI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eq(),r=LE(),n=KV(),s=XV();function a(i,o,l){return n.isObject(l)&&(typeof o=="number"&&r.isArrayLike(l)&&t.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?s.eq(l[o],i):!1}e.isIterateeCall=a})(W6)),W6}var hI;function S_e(){return hI||(hI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=b_e(),r=__e(),n=nq();function s(a,...i){const o=i.length;return o>1&&n.isIterateeCall(a,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(a,r.flatten(i),["asc"])}e.sortBy=s})(R6)),R6}var H6,mI;function k_e(){return mI||(mI=1,H6=S_e().sortBy),H6}var T_e=k_e();const v3=Ec(T_e);var sq=e=>e.legend.settings,C_e=e=>e.legend.size,E_e=e=>e.legend.payload;Ft([E_e,sq],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?v3(n,r):n});var kb=1;function N_e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),n=_.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),i={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(i.height-t.height)>kb||Math.abs(i.left-t.left)>kb||Math.abs(i.top-t.top)>kb||Math.abs(i.width-t.width)>kb)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function zi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var A_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",gI=A_e,G6=()=>Math.random().toString(36).substring(7).split("").join("."),j_e={INIT:`@@redux/INIT${G6()}`,REPLACE:`@@redux/REPLACE${G6()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${G6()}`},Y4=j_e;function zE(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function aq(e,t,r){if(typeof e!="function")throw new Error(zi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(zi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(zi(1));return r(aq)(e,t)}let n=e,s=t,a=new Map,i=a,o=0,l=!1;function u(){i===a&&(i=new Map,a.forEach((v,T)=>{i.set(T,v)}))}function d(){if(l)throw new Error(zi(3));return s}function f(v){if(typeof v!="function")throw new Error(zi(4));if(l)throw new Error(zi(5));let T=!0;u();const k=o++;return i.set(k,v),function(){if(T){if(l)throw new Error(zi(6));T=!1,u(),i.delete(k),a=null}}}function h(v){if(!zE(v))throw new Error(zi(7));if(typeof v.type>"u")throw new Error(zi(8));if(typeof v.type!="string")throw new Error(zi(17));if(l)throw new Error(zi(9));try{l=!0,s=n(s,v)}finally{l=!1}return(a=i).forEach(k=>{k()}),v}function g(v){if(typeof v!="function")throw new Error(zi(10));n=v,h({type:Y4.REPLACE})}function x(){const v=f;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(zi(11));function k(){const E=T;E.next&&E.next(d())}return k(),{unsubscribe:v(k)}},[gI](){return this}}}return h({type:Y4.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:g,[gI]:x}}function P_e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Y4.INIT})>"u")throw new Error(zi(12));if(typeof r(void 0,{type:Y4.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(zi(13))})}function iq(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const i=t[a];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let s;try{P_e(r)}catch(a){s=a}return function(i={},o){if(s)throw s;let l=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],g=i[f],x=h(g,o);if(typeof x>"u")throw o&&o.type,new Error(zi(14));u[f]=x,l=l||x!==g}return l=l||n.length!==Object.keys(i).length,l?u:i}}function X4(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function M_e(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(zi(15))};const i={getState:s.getState,dispatch:(l,...u)=>a(l,...u)},o=e.map(l=>l(i));return a=X4(...o)(s.dispatch),{...s,dispatch:a}}}function oq(e){return zE(e)&&"type"in e&&typeof e.type=="string"}var lq=Symbol.for("immer-nothing"),pI=Symbol.for("immer-draftable"),Bl=Symbol.for("immer-state");function Qc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xp=Object.getPrototypeOf;function Lm(e){return!!e&&!!e[Bl]}function f0(e){return e?cq(e)||Array.isArray(e)||!!e[pI]||!!e.constructor?.[pI]||A2(e)||b3(e):!1}var F_e=Object.prototype.constructor.toString();function cq(e){if(!e||typeof e!="object")return!1;const t=Xp(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===F_e}function J4(e,t){w3(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function w3(e){const t=e[Bl];return t?t.type_:Array.isArray(e)?1:A2(e)?2:b3(e)?3:0}function sT(e,t){return w3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uq(e,t,r){const n=w3(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function D_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function A2(e){return e instanceof Map}function b3(e){return e instanceof Set}function Gh(e){return e.copy_||e.base_}function aT(e,t){if(A2(e))return new Map(e);if(b3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cq(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Bl];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const i=s[a],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Xp(e),n)}else{const n=Xp(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function UE(e,t=!1){return _3(e)||Lm(e)||!f0(e)||(w3(e)>1&&Object.defineProperties(e,{set:{value:Tb},add:{value:Tb},clear:{value:Tb},delete:{value:Tb}}),Object.freeze(e),t&&Object.values(e).forEach(r=>UE(r,!0))),e}function Tb(){Qc(2)}function _3(e){return Object.isFrozen(e)}var O_e={};function Bm(e){const t=O_e[e];return t||Qc(0,e),t}var zv;function dq(){return zv}function I_e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xI(e,t){t&&(Bm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function iT(e){oT(e),e.drafts_.forEach(R_e),e.drafts_=null}function oT(e){e===zv&&(zv=e.parent_)}function yI(e){return zv=I_e(zv,e)}function R_e(e){const t=e[Bl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function vI(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Bl].modified_&&(iT(t),Qc(4)),f0(e)&&(e=Q4(t,e),t.parent_||Z4(t,e)),t.patches_&&Bm("Patches").generateReplacementPatches_(r[Bl].base_,e,t.patches_,t.inversePatches_)):e=Q4(t,r,[]),iT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lq?e:void 0}function Q4(e,t,r){if(_3(t))return t;const n=t[Bl];if(!n)return J4(t,(s,a)=>wI(e,n,t,s,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Z4(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let a=s,i=!1;n.type_===3&&(a=new Set(s),s.clear(),i=!0),J4(a,(o,l)=>wI(e,n,s,o,l,r,i)),Z4(e,s,!1),r&&e.patches_&&Bm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function wI(e,t,r,n,s,a,i){if(Lm(s)){const o=a&&t&&t.type_!==3&&!sT(t.assigned_,n)?a.concat(n):void 0,l=Q4(e,s,o);if(uq(r,n,l),Lm(l))e.canAutoFreeze_=!1;else return}else i&&r.add(s);if(f0(s)&&!_3(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Q4(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(A2(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Z4(e,s)}}function Z4(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&UE(t,r)}function L_e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:dq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=WE;r&&(s=[n],a=Uv);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return n.draft_=o,n.revoke_=i,o}var WE={get(e,t){if(t===Bl)return e;const r=Gh(e);if(!sT(r,t))return B_e(e,r,t);const n=r[t];return e.finalized_||!f0(n)?n:n===V6(e.base_,t)?(q6(e),e.copy_[t]=cT(n,e)):n},has(e,t){return t in Gh(e)},ownKeys(e){return Reflect.ownKeys(Gh(e))},set(e,t,r){const n=fq(Gh(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=V6(Gh(e),t),a=s?.[Bl];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(D_e(r,s)&&(r!==void 0||sT(e.base_,t)))return!0;q6(e),lT(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return V6(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,q6(e),lT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Gh(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Qc(11)},getPrototypeOf(e){return Xp(e.base_)},setPrototypeOf(){Qc(12)}},Uv={};J4(WE,(e,t)=>{Uv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Uv.deleteProperty=function(e,t){return Uv.set.call(this,e,t,void 0)};Uv.set=function(e,t,r){return WE.set.call(this,e[0],t,r,e[0])};function V6(e,t){const r=e[Bl];return(r?Gh(r):e)[t]}function B_e(e,t,r){const n=fq(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function fq(e,t){if(!(t in e))return;let r=Xp(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Xp(r)}}function lT(e){e.modified_||(e.modified_=!0,e.parent_&&lT(e.parent_))}function q6(e){e.copy_||(e.copy_=aT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var $_e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const i=this;return function(l=a,...u){return i.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&Qc(6),n!==void 0&&typeof n!="function"&&Qc(7);let s;if(f0(t)){const a=yI(this),i=cT(t,void 0);let o=!0;try{s=r(i),o=!1}finally{o?iT(a):oT(a)}return xI(a,n),vI(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===lq&&(s=void 0),this.autoFreeze_&&UE(s,!0),n){const a=[],i=[];Bm("Patches").generateReplacementPatches_(t,s,a,i),n(a,i)}return s}else Qc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,l=>t(l,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){f0(e)||Qc(8),Lm(e)&&(e=r0(e));const t=yI(this),r=cT(e,void 0);return r[Bl].isManual_=!0,oT(t),r}finishDraft(e,t){const r=e&&e[Bl];(!r||!r.isManual_)&&Qc(9);const{scope_:n}=r;return xI(n,t),vI(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Bm("Patches").applyPatches_;return Lm(e)?n(e,t):this.produce(e,s=>n(s,t))}};function cT(e,t){const r=A2(e)?Bm("MapSet").proxyMap_(e,t):b3(e)?Bm("MapSet").proxySet_(e,t):L_e(e,t);return(t?t.scope_:dq()).drafts_.push(r),r}function r0(e){return Lm(e)||Qc(10,e),hq(e)}function hq(e){if(!f0(e)||_3(e))return e;const t=e[Bl];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=aT(e,t.scope_.immer_.useStrictShallowCopy_)}else r=aT(e,!0);return J4(r,(n,s)=>{uq(r,n,hq(s))}),t&&(t.finalized_=!1),r}var z_e=new $_e,mq=z_e.produce;function gq(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var U_e=gq(),W_e=gq,H_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?X4:X4.apply(null,arguments)};function Tc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Il(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>oq(n)&&n.type===e,r}var pq=class Iy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Iy.prototype)}static get[Symbol.species](){return Iy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Iy(...t[0].concat(this)):new Iy(...t.concat(this))}};function bI(e){return f0(e)?mq(e,()=>{}):e}function Cb(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function G_e(e){return typeof e=="boolean"}var V_e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let i=new pq;return r&&(G_e(r)?i.push(U_e):i.push(W_e(r.extraArgument))),i},q_e="RTK_autoBatch",_I=e=>t=>{setTimeout(t,e)},K_e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,i=!1;const o=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:_I(10):e.type==="callback"?e.queueNotification:_I(e.timeout),u=()=>{i=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){try{return s=!d?.meta?.[q_e],a=!s,a&&(i||(i=!0,l(u))),n.dispatch(d)}finally{s=!0}}})},Y_e=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new pq(e);return n&&s.push(K_e(typeof n=="object"?n:void 0)),s};function X_e(e){const t=V_e(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(zE(r))o=iq(r);else throw new Error(Il(1));let l;typeof n=="function"?l=n(t):l=t();let u=X4;s&&(u=H_e({trace:!1,...typeof s=="object"&&s}));const d=M_e(...l),f=Y_e(d);let h=typeof i=="function"?i(f):f();const g=u(...h);return aq(o,a,g)}function xq(e){const t={},r=[];let n;const s={addCase(a,i){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Il(28));if(o in t)throw new Error(Il(29));return t[o]=i,s},addAsyncThunk(a,i){return i.pending&&(t[a.pending.type]=i.pending),i.rejected&&(t[a.rejected.type]=i.rejected),i.fulfilled&&(t[a.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:a.settled,reducer:i.settled}),s},addMatcher(a,i){return r.push({matcher:a,reducer:i}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}function J_e(e){return typeof e=="function"}function Q_e(e,t){let[r,n,s]=xq(t),a;if(J_e(e))a=()=>bI(e());else{const o=bI(e);a=()=>o}function i(o=a(),l){let u=[r[l.type],...n.filter(({matcher:d})=>d(l)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Lm(d)){const g=f(d,l);return g===void 0?d:g}else{if(f0(d))return mq(d,h=>f(h,l));{const h=f(d,l);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=a,i}var Z_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",e3e=(e=21)=>{let t="",r=e;for(;r--;)t+=Z_e[Math.random()*64|0];return t},t3e=Symbol.for("rtk-slice-createasyncthunk");function r3e(e,t){return`${e}/${t}`}function n3e({creators:e}={}){const t=e?.asyncThunk?.[t3e];return function(n){const{name:s,reducerPath:a=s}=n;if(!s)throw new Error(Il(11));const i=(typeof n.reducers=="function"?n.reducers(a3e()):n.reducers)||{},o=Object.keys(i),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,E){const N=typeof b=="string"?b:b.type;if(!N)throw new Error(Il(12));if(N in l.sliceCaseReducersByType)throw new Error(Il(13));return l.sliceCaseReducersByType[N]=E,u},addMatcher(b,E){return l.sliceMatchers.push({matcher:b,reducer:E}),u},exposeAction(b,E){return l.actionCreators[b]=E,u},exposeCaseReducer(b,E){return l.sliceCaseReducersByName[b]=E,u}};o.forEach(b=>{const E=i[b],N={reducerName:b,type:r3e(s,b),createNotation:typeof n.reducers=="function"};o3e(E)?c3e(N,E,u,t):i3e(N,E,u)});function d(){const[b={},E=[],N=void 0]=typeof n.extraReducers=="function"?xq(n.extraReducers):[n.extraReducers],P={...b,...l.sliceCaseReducersByType};return Q_e(n.initialState,M=>{for(let j in P)M.addCase(j,P[j]);for(let j of l.sliceMatchers)M.addMatcher(j.matcher,j.reducer);for(let j of E)M.addMatcher(j.matcher,j.reducer);N&&M.addDefaultCase(N)})}const f=b=>b,h=new Map,g=new WeakMap;let x;function y(b,E){return x||(x=d()),x(b,E)}function v(){return x||(x=d()),x.getInitialState()}function T(b,E=!1){function N(M){let j=M[b];return typeof j>"u"&&E&&(j=Cb(g,N,v)),j}function P(M=f){const j=Cb(h,E,()=>new WeakMap);return Cb(j,M,()=>{const A={};for(const[D,L]of Object.entries(n.selectors??{}))A[D]=s3e(L,M,()=>Cb(g,M,v),E);return A})}return{reducerPath:b,getSelectors:P,get selectors(){return P(N)},selectSlice:N}}const k={name:s,reducer:y,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:v,...T(a),injectInto(b,{reducerPath:E,...N}={}){const P=E??a;return b.inject({reducerPath:P,reducer:y},N),{...k,...T(P,!0)}}};return k}}function s3e(e,t,r,n){function s(a,...i){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return s.unwrapped=e,s}var Ul=n3e();function a3e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function i3e({type:e,reducerName:t,createNotation:r},n,s){let a,i;if("reducer"in n){if(r&&!l3e(n))throw new Error(Il(17));a=n.reducer,i=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?Tc(e,i):Tc(e))}function o3e(e){return e._reducerDefinitionType==="asyncThunk"}function l3e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function c3e({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Il(18));const{payloadCreator:a,fulfilled:i,pending:o,rejected:l,settled:u,options:d}=r,f=s(e,a,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),l&&n.addCase(f.rejected,l),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||Eb,pending:o||Eb,rejected:l||Eb,settled:u||Eb})}function Eb(){}var u3e="task",yq="listener",vq="completed",HE="cancelled",d3e=`task-${HE}`,f3e=`task-${vq}`,uT=`${yq}-${HE}`,h3e=`${yq}-${vq}`,S3=class{constructor(e){this.code=e,this.message=`${u3e} ${HE} (reason: ${e})`}name="TaskAbortError";message},GE=(e,t)=>{if(typeof e!="function")throw new TypeError(Il(32))},e_=()=>{},wq=(e,t=e_)=>(e.catch(t),e),bq=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),mm=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},gm=e=>{if(e.aborted){const{reason:t}=e;throw new S3(t)}};function _q(e,t){let r=e_;return new Promise((n,s)=>{const a=()=>s(new S3(e.reason));if(e.aborted){a();return}r=bq(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=e_})}var m3e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof S3?"cancelled":"rejected",error:r}}finally{t?.()}},t_=e=>t=>wq(_q(e,t).then(r=>(gm(e),r))),Sq=e=>{const t=t_(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Dp}=Object,SI={},k3="listenerMiddleware",g3e=(e,t)=>{const r=n=>bq(e,()=>mm(n,e.reason));return(n,s)=>{GE(n);const a=new AbortController;r(a);const i=m3e(async()=>{gm(e),gm(a.signal);const o=await n({pause:t_(a.signal),delay:Sq(a.signal),signal:a.signal});return gm(a.signal),o},()=>mm(a,f3e));return s?.autoJoin&&t.push(i.catch(e_)),{result:t_(e)(i),cancel(){mm(a,d3e)}}}},p3e=(e,t)=>{const r=async(n,s)=>{gm(t);let a=()=>{};const o=[new Promise((l,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),l([f,h.getState(),h.getOriginalState()])}});a=()=>{d(),u()}})];s!=null&&o.push(new Promise(l=>setTimeout(l,s,null)));try{const l=await _q(t,Promise.race(o));return gm(t),l}finally{a()}};return(n,s)=>wq(r(n,s))},kq=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Tc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Il(21));return GE(a),{predicate:s,type:t,effect:a}},Tq=Dp(e=>{const{type:t,predicate:r,effect:n}=kq(e);return{id:e3e(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Il(22))}}},{withTypes:()=>Tq}),kI=(e,t)=>{const{type:r,effect:n,predicate:s}=kq(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},dT=e=>{e.pending.forEach(t=>{mm(t,uT)})},x3e=e=>()=>{e.forEach(dT),e.clear()},TI=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Cq=Dp(Tc(`${k3}/add`),{withTypes:()=>Cq}),y3e=Tc(`${k3}/removeAll`),Eq=Dp(Tc(`${k3}/remove`),{withTypes:()=>Eq}),v3e=(...e)=>{console.error(`${k3}/error`,...e)},j2=(e={})=>{const t=new Map,{extra:r,onError:n=v3e}=e;GE(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f?.cancelActive&&dT(d)}),a=d=>{const f=kI(t,d)??Tq(d);return s(f)};Dp(a,{withTypes:()=>a});const i=d=>{const f=kI(t,d);return f&&(f.unsubscribe(),d.cancelActive&&dT(f)),!!f};Dp(i,{withTypes:()=>i});const o=async(d,f,h,g)=>{const x=new AbortController,y=p3e(a,x.signal),v=[];try{d.pending.add(x),await Promise.resolve(d.effect(f,Dp({},h,{getOriginalState:g,condition:(T,k)=>y(T,k).then(Boolean),take:y,delay:Sq(x.signal),pause:t_(x.signal),extra:r,signal:x.signal,fork:g3e(x.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((T,k,b)=>{T!==x&&(mm(T,uT),b.delete(T))})},cancel:()=>{mm(x,uT),d.pending.delete(x)},throwIfCancelled:()=>{gm(x.signal)}})))}catch(T){T instanceof S3||TI(n,T,{raisedBy:"effect"})}finally{await Promise.all(v),mm(x,h3e),d.pending.delete(x)}},l=x3e(t);return{middleware:d=>f=>h=>{if(!oq(h))return f(h);if(Cq.match(h))return a(h.payload);if(y3e.match(h)){l();return}if(Eq.match(h))return i(h.payload);let g=d.getState();const x=()=>{if(g===SI)throw new Error(Il(23));return g};let y;try{if(y=f(h),t.size>0){const v=d.getState(),T=Array.from(t.values());for(const k of T){let b=!1;try{b=k.predicate(h,v,g)}catch(E){b=!1,TI(n,E,{raisedBy:"predicate"})}b&&o(k,h,d,x)}}}finally{g=SI}return y},startListening:a,stopListening:i,clearListeners:l}};function Il(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var w3e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Nq=Ul({name:"chartLayout",initialState:w3e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:b3e,setLayout:_3e,setChartSize:S3e,setScale:k3e}=Nq.actions,T3e=Nq.reducer;function CI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function EI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CI(Object(r),!0).forEach(function(n){C3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C3e(e,t,r){return(t=E3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E3e(e){var t=N3e(e,"string");return typeof t=="symbol"?t:t+""}function N3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r_=Math.PI/180,A3e=e=>e*180/Math.PI,Yi=(e,t,r,n)=>({x:e+Math.cos(-r_*n)*r,y:t+Math.sin(-r_*n)*r}),j3e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},P3e=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},M3e=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,i=P3e({x:r,y:n},{x:s,y:a});if(i<=0)return{radius:i,angle:0};var o=(r-s)/i,l=Math.acos(o);return n>a&&(l=2*Math.PI-l),{radius:i,angle:A3e(l),angleInRadian:l}},F3e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},D3e=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),i=Math.min(s,a);return e+i*360},O3e=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:a}=M3e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(s<i||s>o||s===0)return null;var{startAngle:l,endAngle:u}=F3e(t),d=a,f;if(l<=u){for(;d>u;)d-=360;for(;d<l;)d+=360;f=d>=l&&d<=u}else{for(;d>l;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=l}return f?EI(EI({},t),{},{radius:s,angle:D3e(d,t)}):null};function Aq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function NI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NI(Object(r),!0).forEach(function(n){I3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I3e(e,t,r){return(t=R3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R3e(e){var t=L3e(e,"string");return typeof t=="symbol"?t:t+""}function L3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wo(e,t,r){return Ti(e)||Ti(t)?r:Qu(t)?p3(e,t,r):typeof t=="function"?t(e):r}var B3e=(e,t,r,n,s)=>{var a,i=-1,o=(a=t?.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?r[l-1].coordinate:r[o-1].coordinate,d=r[l].coordinate,f=l>=o-1?r[0].coordinate:r[l+1].coordinate,h=void 0;if(gc(d-u)!==gc(f-d)){var g=[];if(gc(f-d)===gc(s[1]-s[0])){h=f;var x=d+s[1]-s[0];g[0]=Math.min(x,(x+u)/2),g[1]=Math.max(x,(x+u)/2)}else{h=u;var y=f+s[1]-s[0];g[0]=Math.min(d,(y+d)/2),g[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=g[0]&&e<=g[1]){({index:i}=r[l]);break}}else{var T=Math.min(u,f),k=Math.max(u,f);if(e>(T+d)/2&&e<=(k+d)/2){({index:i}=r[l]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:i}=t[b]);break}}return i},$3e=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&a!=="center"&&an(e[a]))return dc(dc({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&i!=="middle"&&an(e[i]))return dc(dc({},e),{},{[i]:e[i]+(s||0)})}return e},nh=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",jq=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var s,a,i=e.map(o=>(o.coordinate===t&&(s=!0),o.coordinate===r&&(a=!0),o.coordinate));return s||i.push(t),a||i.push(r),i},Pq=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:a,scale:i,realScaleType:o,isCategorical:l,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:g}=e;if(!i)return null;var x=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,y=s==="category"&&i.bandwidth?i.bandwidth()/x:0;if(y=g==="angleAxis"&&a&&a.length>=2?gc(a[0]-a[1])*2*y:y,f||h){var v=(f||h||[]).map((T,k)=>{var b=n?n.indexOf(T):T;return{coordinate:i(b)+y,value:T,offset:y,index:k}});return v.filter(T=>!kc(T.coordinate))}return l&&u?u.map((T,k)=>({coordinate:i(T)+y,value:T,index:k,offset:y})):i.ticks&&d!=null?i.ticks(d).map((T,k)=>({coordinate:i(T)+y,value:T,offset:y,index:k})):i.domain().map((T,k)=>({coordinate:i(T)+y,value:n?n[T]:T,index:k,offset:y}))},AI=1e-4,z3e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-AI,a=Math.max(n[0],n[1])+AI,i=e(t[0]),o=e(t[r-1]);(i<s||i>a||o<s||o>a)&&e.domain([t[0],t[r-1]])}},U3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,i=0;i<t;++i){var o=kc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1])}},W3e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var i=kc(e[a][r][1])?e[a][r][0]:e[a][r][1];i>=0?(e[a][r][0]=s,e[a][r][1]=s+i,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},H3e={sign:U3e,expand:M4e,none:Yp,silhouette:F4e,wiggle:D4e,positive:W3e},G3e=(e,t,r)=>{var n=H3e[r],s=P4e().keys(t).value((a,i)=>+Wo(a,i,0)).order(nT).offset(n);return s(e)};function jI(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:a,dataKey:i}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ti(s[t.dataKey])){var o=AV(r,"value",s[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=Wo(s,Ti(i)?t.dataKey:i);return Ti(l)?null:t.scale(l)}var V3e=e=>{var t=e.flat(2).filter(an);return[Math.min(...t),Math.max(...t)]},q3e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],K3e=(e,t,r)=>{if(e!=null)return q3e(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:i}=a,o=i.reduce((l,u)=>{var d=Aq(u,t,r),f=V3e(d);return[Math.min(l[0],f[0]),Math.max(l[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},PI=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MI=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fT=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=v3(t,d=>d.coordinate),a=1/0,i=1,o=s.length;i<o;i++){var l=s[i],u=s[i-1];a=Math.min((l.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function FI(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return dc(dc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function Mq(e,t){if(e)return String(e);if(typeof t=="string")return t}function Y3e(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var a=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return a?{x:e,y:t}:null}return n?O3e({x:e,y:t},n):null}var X3e=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,{radius:i}=n;return dc(dc(dc({},n),Yi(n.cx,n.cy,i,a)),{},{angle:a,radius:i})}var o=s.coordinate,{angle:l}=n;return dc(dc(dc({},n),Yi(n.cx,n.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},J3e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,_0=e=>e.layout.width,S0=e=>e.layout.height,Q3e=e=>e.layout.scale,Fq=e=>e.layout.margin,T3=Ft(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),C3=Ft(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Z3e="data-recharts-item-index",eSe="data-recharts-item-data-key",P2=60;function DI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DI(Object(r),!0).forEach(function(n){tSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tSe(e,t,r){return(t=rSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rSe(e){var t=nSe(e,"string");return typeof t=="symbol"?t:t+""}function nSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sSe=e=>e.brush.height;function aSe(e){var t=C3(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:P2;return r+s}return r},0)}function iSe(e){var t=C3(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:P2;return r+s}return r},0)}function oSe(e){var t=T3(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function lSe(e){var t=T3(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Zi=Ft([_0,S0,Fq,sSe,aSe,iSe,oSe,lSe,sq,C_e],(e,t,r,n,s,a,i,o,l,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+a},f={top:(r.top||0)+i,bottom:(r.bottom||0)+o},h=Nb(Nb({},f),d),g=h.bottom;h.bottom+=n,h=$3e(h,l,u);var x=e-h.left-h.right,y=t-h.top-h.bottom;return Nb(Nb({brushBottom:g},h),{},{width:Math.max(x,0),height:Math.max(y,0)})}),cSe=Ft(Zi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Dq=Ft(_0,S0,(e,t)=>({x:0,y:0,width:e,height:t})),uSe=_.createContext(null),Ac=()=>_.useContext(uSe)!=null,E3=e=>e.brush,N3=Ft([E3,Zi,Fq],(e,t,r)=>({height:e.height,x:an(e.x)?e.x:t.left,y:an(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:an(e.width)?e.width:t.width})),VE=()=>{var e,t=Ac(),r=Kr(cSe),n=Kr(N3),s=(e=Kr(E3))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},dSe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Oq=()=>{var e;return(e=Kr(Zi))!==null&&e!==void 0?e:dSe},Iq=()=>Kr(_0),Rq=()=>Kr(S0),Ms=e=>e.layout.layoutType,qE=()=>Kr(Ms),fSe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Lq=Ul({name:"legend",initialState:fSe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=r0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:yje,setLegendSettings:vje,addLegendPayload:hSe,removeLegendPayload:mSe}=Lq.actions,gSe=Lq.reducer;function hT(){return hT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hT.apply(null,arguments)}function OI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function K6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(r),!0).forEach(function(n){pSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pSe(e,t,r){return(t=xSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xSe(e){var t=ySe(e,"string");return typeof t=="symbol"?t:t+""}function ySe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vSe(e){return Array.isArray(e)&&Qu(e[0])&&Qu(e[1])?e.join(" ~ "):e}var wSe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:i,itemSorter:o,wrapperClassName:l,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,g=()=>{if(a&&a.length){var N={padding:0,margin:0},P=(o?v3(a,o):a).map((M,j)=>{if(M.type==="none")return null;var A=M.formatter||i||vSe,{value:D,name:L}=M,G=D,X=L;if(A){var se=A(D,L,M,j,a);if(Array.isArray(se))[G,X]=se;else if(se!=null)G=se;else return null}var Q=K6({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},n);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:Q},Qu(X)?_.createElement("span",{className:"recharts-tooltip-item-name"},X):null,Qu(X)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},G),_.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:N},P)}return null},x=K6({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=K6({margin:0},s),v=!Ti(d),T=v?d:"",k=js("recharts-default-tooltip",l),b=js("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(T=f(d,a));var E=h?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",hT({className:k,style:x},E),_.createElement("p",{className:b,style:y},_.isValidElement(T)?T:"".concat(T)),g())},by="recharts-tooltip-wrapper",bSe={visibility:"hidden"};function _Se(e){var{coordinate:t,translateX:r,translateY:n}=e;return js(by,{["".concat(by,"-right")]:an(r)&&t&&an(t.x)&&r>=t.x,["".concat(by,"-left")]:an(r)&&t&&an(t.x)&&r<t.x,["".concat(by,"-bottom")]:an(n)&&t&&an(t.y)&&n>=t.y,["".concat(by,"-top")]:an(n)&&t&&an(t.y)&&n<t.y})}function II(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=e;if(a&&an(a[n]))return a[n];var d=r[n]-o-(s>0?s:0),f=r[n]+s;if(t[n])return i[n]?d:f;var h=l[n];if(h==null)return 0;if(i[n]){var g=d,x=h;return g<x?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var y=f+o,v=h+u;return y>v?Math.max(d,h):Math.max(f,h)}function SSe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function kSe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:i,useTranslate3d:o,viewBox:l}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=II({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.width,viewBox:l,viewBoxDimension:l.width}),f=II({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.height,viewBox:l,viewBoxDimension:l.height}),u=SSe({translateX:d,translateY:f,useTranslate3d:o})):u=bSe,{cssProperties:u,cssClasses:_Se({translateX:d,translateY:f,coordinate:r})}}function RI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ab(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RI(Object(r),!0).forEach(function(n){mT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mT(e,t,r){return(t=TSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TSe(e){var t=CSe(e,"string");return typeof t=="symbol"?t:t+""}function CSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ESe extends _.PureComponent{constructor(){super(...arguments),mT(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),mT(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:i,hasPayload:o,isAnimationActive:l,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:g,wrapperStyle:x,lastBoundingBox:y,innerRef:v,hasPortalFromProps:T}=this.props,{cssClasses:k,cssProperties:b}=kSe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:g}),E=T?{}:Ab(Ab({transition:l&&t?"transform ".concat(n,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),N=Ab(Ab({},E),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},x);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:N,ref:v},a)}}var NSe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),C1={devToolsEnabled:!1,isSsr:NSe()},Bq=()=>Kr(e=>e.rootProps.accessibilityLayer);function cu(e){return Number.isFinite(e)}function n_(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function gT(){return gT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gT.apply(null,arguments)}function LI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function BI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(r),!0).forEach(function(n){ASe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ASe(e,t,r){return(t=jSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jSe(e){var t=PSe(e,"string");return typeof t=="symbol"?t:t+""}function PSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $I={curveBasisClosed:w4e,curveBasisOpen:b4e,curveBasis:v4e,curveBumpX:x4e,curveBumpY:y4e,curveLinearClosed:_4e,curveLinear:x3,curveMonotoneX:S4e,curveMonotoneY:k4e,curveNatural:T4e,curveStep:C4e,curveStepAfter:N4e,curveStepBefore:E4e},jb=e=>cu(e.x)&&cu(e.y),_y=e=>e.x,Sy=e=>e.y,MSe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(DE(e));return(r==="curveMonotone"||r==="curveBump")&&t?$I["".concat(r).concat(t==="vertical"?"Y":"X")]:$I[r]||x3},FSe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,i=MSe(t,s),o=a?r.filter(jb):r,l;if(Array.isArray(n)){var u=a?n.filter(f=>jb(f)):n,d=o.map((f,h)=>BI(BI({},f),{},{base:u[h]}));return s==="vertical"?l=_b().y(Sy).x1(_y).x0(f=>f.base.x):l=_b().x(_y).y1(Sy).y0(f=>f.base.y),l.defined(jb).curve(i),l(d)}return s==="vertical"&&an(n)?l=_b().y(Sy).x1(_y).x0(n):an(n)?l=_b().x(_y).y1(Sy).y0(n):l=LV().x(_y).y(Sy),l.defined(jb).curve(i),l(o)},$q=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?FSe(e):n;return _.createElement("path",gT({},tg(e),IE(e),{className:js("recharts-curve",t),d:a===null?void 0:a,ref:s}))},DSe=["x","y","top","left","width","height","className"];function pT(){return pT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pT.apply(null,arguments)}function zI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(r),!0).forEach(function(n){ISe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ISe(e,t,r){return(t=RSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RSe(e){var t=LSe(e,"string");return typeof t=="symbol"?t:t+""}function LSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BSe(e,t){if(e==null)return{};var r,n,s=$Se(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $Se(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zSe=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),USe=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:i=0,className:o}=e,l=BSe(e,DSe),u=OSe({x:t,y:r,top:n,left:s,width:a,height:i},l);return!an(t)||!an(r)||!an(a)||!an(i)||!an(n)||!an(s)?null:_.createElement("path",pT({},Qi(u,!0),{className:js("recharts-cross",o),d:zSe(t,r,a,i,n,s)}))};function WSe(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function UI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(r),!0).forEach(function(n){GSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GSe(e,t,r){return(t=VSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VSe(e){var t=qSe(e,"string");return typeof t=="symbol"?t:t+""}function qSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jc(e,t){var r=HSe({},e),n=t,s=Object.keys(t),a=s.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return a}function KSe(){}function WI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WI(Object(r),!0).forEach(function(n){YSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YSe(e,t,r){return(t=XSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XSe(e){var t=JSe(e,"string");return typeof t=="symbol"?t:t+""}function JSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QSe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),ZSe=(e,t,r)=>e.map(n=>"".concat(QSe(n)," ").concat(t,"ms ").concat(r)).join(","),e5e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Wv=(e,t)=>Object.keys(t).reduce((r,n)=>HI(HI({},r),{},{[n]:e(n,t[n])}),{});function GI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GI(Object(r),!0).forEach(function(n){t5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t5e(e,t,r){return(t=r5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r5e(e){var t=n5e(e,"string");return typeof t=="symbol"?t:t+""}function n5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s_=(e,t,r)=>e+(t-e)*r,xT=e=>{var{from:t,to:r}=e;return t!==r},zq=(e,t,r)=>{var n=Wv((s,a)=>{if(xT(a)){var[i,o]=e(a.from,a.to,a.velocity);return Hi(Hi({},a),{},{from:i,velocity:o})}return a},t);return r<1?Wv((s,a)=>xT(a)?Hi(Hi({},a),{},{velocity:s_(a.velocity,n[s].velocity,r),from:s_(a.from,n[s].from,r)}):a,t):zq(e,n,r-1)};function s5e(e,t,r,n,s,a){var i,o=n.reduce((h,g)=>Hi(Hi({},h),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),l=()=>Wv((h,g)=>g.from,o),u=()=>!Object.values(o).filter(xT).length,d=null,f=h=>{i||(i=h);var g=h-i,x=g/r.dt;o=zq(r,o,x),s(Hi(Hi(Hi({},e),t),l())),i=h,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{d()})}function a5e(e,t,r,n,s,a,i){var o=null,l=s.reduce((f,h)=>Hi(Hi({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,g=Wv((y,v)=>s_(...v,r(h)),l);if(a(Hi(Hi(Hi({},e),t),g)),h<1)o=i.setTimeout(d);else{var x=Wv((y,v)=>s_(...v,r(1)),l);a(Hi(Hi(Hi({},e),t),x))}};return()=>(o=i.setTimeout(d),()=>{o()})}const i5e=(e,t,r,n,s,a)=>{var i=e5e(e,t);return r.isStepper===!0?s5e(e,t,r,i,s,a):a5e(e,t,r,n,i,s,a)};var a_=1e-4,Uq=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Wq=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),VI=(e,t)=>r=>{var n=Uq(e,t);return Wq(n,r)},o5e=(e,t)=>r=>{var n=Uq(e,t),s=[...n.map((a,i)=>a*i).slice(1),0];return Wq(s,r)},qI=function(){for(var t,r,n,s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var l=i[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([t,n,r,s]=l[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else i.length===4&&([t,n,r,s]=i);var u=VI(t,r),d=VI(n,s),f=o5e(t,r),h=x=>x>1?1:x<0?0:x,g=x=>{for(var y=x>1?1:x,v=y,T=0;T<8;++T){var k=u(v)-y,b=f(v);if(Math.abs(k-y)<a_||b<a_)return d(v);v=h(v-k/b)}return d(v)};return g.isStepper=!1,g},l5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(i,o,l)=>{var u=-(i-o)*r,d=l*n,f=l+(u-d)*s/1e3,h=l*s/1e3+i;return Math.abs(h-o)<a_&&Math.abs(f)<a_?[o,0]:[h,f]};return a.isStepper=!0,a.dt=s,a},c5e=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qI(e);case"spring":return l5e();default:if(e.split("(")[0]==="cubic-bezier")return qI(e)}return typeof e=="function"?e:null};function u5e(e){var t,r=()=>null,n=!1,s=null,a=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[l,...u]=o;if(typeof l=="number"){s=e.setTimeout(a.bind(null,u),l);return}a(l),s=e.setTimeout(a.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,s&&(s(),s=null),a(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class d5e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{cancelAnimationFrame(s)}}}function f5e(){return u5e(new d5e)}var h5e=_.createContext(f5e);function m5e(e,t){var r=_.useContext(h5e);return _.useMemo(()=>t??r(e),[e,t,r])}var g5e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},KI={t:0},Y6={t:1};function Hq(e){var t=jc(e,g5e),{isActive:r,canBegin:n,duration:s,easing:a,begin:i,onAnimationEnd:o,onAnimationStart:l,children:u}=t,d=m5e(t.animationId,t.animationManager),[f,h]=_.useState(r?KI:Y6),g=_.useRef(null);return _.useEffect(()=>{r||h(Y6)},[r]),_.useEffect(()=>{if(!r||!n)return KSe;var x=i5e(KI,Y6,c5e(a),s,h,d.getTimeoutController()),y=()=>{g.current=x()};return d.start([l,i,y,s,o]),()=>{d.stop(),g.current&&g.current(),o()}},[r,n,s,a,i,l,o,d]),u(f.t)}function Gq(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef($v(t)),n=_.useRef(e);return n.current!==e&&(r.current=$v(t),n.current=e),r.current}function YI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function XI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YI(Object(r),!0).forEach(function(n){p5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p5e(e,t,r){return(t=x5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x5e(e){var t=y5e(e,"string");return typeof t=="symbol"?t:t+""}function y5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i_(){return i_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i_.apply(null,arguments)}var JI=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,l=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=s[f]>a?a:s[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(l,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(l,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(l,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(l,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);u="M ".concat(e,",").concat(t+i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+o*g,",").concat(t,`
            L `).concat(e+r-o*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+r,",").concat(t+i*g,`
            L `).concat(e+r,",").concat(t+n-i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e+r-o*g,",").concat(t+n,`
            L `).concat(e+o*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(l,",").concat(e,",").concat(t+n-i*g," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},v5e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w5e=e=>{var t=jc(e,v5e),r=_.useRef(null),[n,s]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var se=r.current.getTotalLength();se&&s(se)}catch{}},[]);var{x:a,y:i,width:o,height:l,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:g,isAnimationActive:x,isUpdateAnimationActive:y}=t,v=_.useRef(o),T=_.useRef(l),k=_.useRef(a),b=_.useRef(i),E=_.useMemo(()=>({x:a,y:i,width:o,height:l,radius:u}),[a,i,o,l,u]),N=Gq(E,"rectangle-");if(a!==+a||i!==+i||o!==+o||l!==+l||o===0||l===0)return null;var P=js("recharts-rectangle",d);if(!y)return _.createElement("path",i_({},Qi(t,!0),{className:P,d:JI(a,i,o,l,u)}));var M=v.current,j=T.current,A=k.current,D=b.current,L="0px ".concat(n===-1?1:n,"px"),G="".concat(n,"px 0px"),X=ZSe(["strokeDasharray"],h,typeof f=="string"?f:void 0);return _.createElement(Hq,{animationId:N,key:N,canBegin:n>0,duration:h,easing:f,isActive:y,begin:g},se=>{var Q=Wd(M,o,se),re=Wd(j,l,se),B=Wd(A,a,se),V=Wd(D,i,se);r.current&&(v.current=Q,T.current=re,k.current=B,b.current=V);var R;return x?se>0?R={transition:X,strokeDasharray:G}:R={strokeDasharray:L}:R={strokeDasharray:G},_.createElement("path",i_({},Qi(t,!0),{className:P,d:JI(B,V,Q,re,u),ref:r,style:XI(XI({},R),t.style)}))})};function Vq(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,i=Yi(t,r,n,s),o=Yi(t,r,n,a);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function yT(){return yT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yT.apply(null,arguments)}var b5e=(e,t)=>{var r=gc(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Pb=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:i,cornerRadius:o,cornerIsExternal:l}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/r_,f=l?s:s+a*d,h=Yi(t,r,u,f),g=Yi(t,r,n,f),x=l?s-a*d:s,y=Yi(t,r,u*Math.cos(d*r_),x);return{center:h,circleTangency:g,lineTangency:y,theta:d}},qq=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:i}=e,o=b5e(a,i),l=a+o,u=Yi(t,r,s,a),d=Yi(t,r,s,l),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>l),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Yi(t,r,n,a),g=Yi(t,r,n,l);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=l),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},_5e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:i,cornerIsExternal:o,startAngle:l,endAngle:u}=e,d=gc(u-l),{circleTangency:f,lineTangency:h,theta:g}=Pb({cx:t,cy:r,radius:s,angle:l,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:x,lineTangency:y,theta:v}=Pb({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),T=o?Math.abs(l-u):Math.abs(l-u)-g-v;if(T<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):qq({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:u});var k="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(T>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:E,theta:N}=Pb({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:P,lineTangency:M,theta:j}=Pb({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),A=o?Math.abs(l-u):Math.abs(l-u)-N-j;if(A<0&&a===0)return"".concat(k,"L").concat(t,",").concat(r,"Z");k+="L".concat(M.x,",").concat(M.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,"Z")}else k+="L".concat(t,",").concat(r,"Z");return k},S5e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},k5e=e=>{var t=jc(e,S5e),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d,className:f}=t;if(a<s||u===d)return null;var h=js("recharts-sector",f),g=a-s,x=Gf(i,g,0,!0),y;return x>0&&Math.abs(u-d)<360?y=_5e({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(x,g/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:d}):y=qq({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d}),_.createElement("path",yT({},Qi(t,!0),{className:h,d:y}))};function T5e(e,t,r){var n,s,a,i;if(e==="horizontal")n=t.x,a=n,s=r.top,i=r.top+r.height;else if(e==="vertical")s=t.y,i=s,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:d,angle:f}=t,h=Yi(o,l,u,f),g=Yi(o,l,d,f);n=h.x,s=h.y,a=g.x,i=g.y}else return Vq(t);return[{x:n,y:s},{x:a,y:i}]}var X6={},J6={},Q6={},QI;function C5e(){return QI||(QI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rq();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Q6)),Q6}var ZI;function E5e(){return ZI||(ZI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5e();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(J6)),J6}var eR;function N5e(){return eR||(eR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nq(),r=E5e();function n(s,a,i){i&&typeof i!="number"&&t.isIterateeCall(s,a,i)&&(a=i=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),i=i===void 0?s<a?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((a-s)/(i||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=s,s+=i;return l}e.range=n})(X6)),X6}var Z6,tR;function A5e(){return tR||(tR=1,Z6=N5e().range),Z6}var j5e=A5e();const Kq=Ec(j5e);function Ff(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function P5e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function KE(e){let t,r,n;e.length!==2?(t=Ff,r=(o,l)=>Ff(e(o),l),n=(o,l)=>e(o)-l):(t=e===Ff||e===P5e?e:M5e,r=e,n=e);function s(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<0?u=f+1:d=f}while(u<d)}return u}function a(o,l,u=0,d=o.length){if(u<d){if(t(l,l)!==0)return d;do{const f=u+d>>>1;r(o[f],l)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,l,u=0,d=o.length){const f=s(o,l,u,d-1);return f>u&&n(o[f-1],l)>-n(o[f],l)?f-1:f}return{left:s,center:i,right:a}}function M5e(){return 0}function Yq(e){return e===null?NaN:+e}function*F5e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const D5e=KE(Ff),M2=D5e.right;KE(Yq).center;class rR extends Map{constructor(t,r=R5e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(nR(this,t))}has(t){return super.has(nR(this,t))}set(t,r){return super.set(O5e(this,t),r)}delete(t){return super.delete(I5e(this,t))}}function nR({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function O5e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function I5e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function R5e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function L5e(e=Ff){if(e===Ff)return Xq;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Xq(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const B5e=Math.sqrt(50),$5e=Math.sqrt(10),z5e=Math.sqrt(2);function o_(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),i=a>=B5e?10:a>=$5e?5:a>=z5e?2:1;let o,l,u;return s<0?(u=Math.pow(10,-s)/i,o=Math.round(e*u),l=Math.round(t*u),o/u<e&&++o,l/u>t&&--l,u=-u):(u=Math.pow(10,s)*i,o=Math.round(e/u),l=Math.round(t/u),o*u<e&&++o,l*u>t&&--l),l<o&&.5<=r&&r<2?o_(e,t,r*2):[o,l,u]}function vT(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,i]=n?o_(t,e,r):o_(e,t,r);if(!(a>=s))return[];const o=a-s+1,l=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)l[u]=(a-u)/-i;else for(let u=0;u<o;++u)l[u]=(a-u)*i;else if(i<0)for(let u=0;u<o;++u)l[u]=(s+u)/-i;else for(let u=0;u<o;++u)l[u]=(s+u)*i;return l}function wT(e,t,r){return t=+t,e=+e,r=+r,o_(e,t,r)[2]}function bT(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?wT(t,e,r):wT(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function sR(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function aR(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Jq(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?Xq:L5e(s);n>r;){if(n-r>600){const l=n-r+1,u=t-r+1,d=Math.log(l),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(l-f)/l)*(u-l/2<0?-1:1),g=Math.max(r,Math.floor(t-u*f/l+h)),x=Math.min(n,Math.floor(t+(l-u)*f/l+h));Jq(e,t,g,x,s)}const a=e[t];let i=r,o=n;for(ky(e,r,t),s(e[n],a)>0&&ky(e,r,n);i<o;){for(ky(e,i,o),++i,--o;s(e[i],a)<0;)++i;for(;s(e[o],a)>0;)--o}s(e[r],a)===0?ky(e,r,o):(++o,ky(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function ky(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function U5e(e,t,r){if(e=Float64Array.from(F5e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return aR(e);if(t>=1)return sR(e);var n,s=(n-1)*t,a=Math.floor(s),i=sR(Jq(e,a).subarray(0,a+1)),o=aR(e.subarray(a+1));return i+(o-i)*(s-a)}}function W5e(e,t,r=Yq){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),i=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return i+(o-i)*(s-a)}}function H5e(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Pc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function k0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const _T=Symbol("implicit");function YE(){var e=new rR,t=[],r=[],n=_T;function s(a){let i=e.get(a);if(i===void 0){if(n!==_T)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new rR;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return YE(t,r).unknown(n)},Pc.apply(s,arguments),s}function XE(){var e=YE().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,i,o=!1,l=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,g=s<n,x=g?s:n,y=g?n:s;a=(y-x)/Math.max(1,h-l+u*2),o&&(a=Math.floor(a)),x+=(y-x-a*(h-l))*d,i=a*(1-l),o&&(x=Math.round(x),i=Math.round(i));var v=H5e(h).map(function(T){return x+a*T});return r(g?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,s]=h,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(h){return[n,s]=h,n=+n,s=+s,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),f()):l},e.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return XE(t(),[n,s]).round(o).paddingInner(l).paddingOuter(u).align(d)},Pc.apply(f(),arguments)}function Qq(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Qq(t())},e}function G5e(){return Qq(XE.apply(null,arguments).paddingInner(1))}function JE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Zq(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function F2(){}var Hv=.7,l_=1/Hv,Op="\\s*([+-]?\\d+)\\s*",Gv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",V5e=/^#([0-9a-f]{3,8})$/,q5e=new RegExp(`^rgb\\(${Op},${Op},${Op}\\)$`),K5e=new RegExp(`^rgb\\(${Yu},${Yu},${Yu}\\)$`),Y5e=new RegExp(`^rgba\\(${Op},${Op},${Op},${Gv}\\)$`),X5e=new RegExp(`^rgba\\(${Yu},${Yu},${Yu},${Gv}\\)$`),J5e=new RegExp(`^hsl\\(${Gv},${Yu},${Yu}\\)$`),Q5e=new RegExp(`^hsla\\(${Gv},${Yu},${Yu},${Gv}\\)$`),iR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};JE(F2,Vv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:oR,formatHex:oR,formatHex8:Z5e,formatHsl:e6e,formatRgb:lR,toString:lR});function oR(){return this.rgb().formatHex()}function Z5e(){return this.rgb().formatHex8()}function e6e(){return eK(this).formatHsl()}function lR(){return this.rgb().formatRgb()}function Vv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=V5e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?cR(t):r===3?new ll(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Mb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Mb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=q5e.exec(e))?new ll(t[1],t[2],t[3],1):(t=K5e.exec(e))?new ll(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Y5e.exec(e))?Mb(t[1],t[2],t[3],t[4]):(t=X5e.exec(e))?Mb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=J5e.exec(e))?fR(t[1],t[2]/100,t[3]/100,1):(t=Q5e.exec(e))?fR(t[1],t[2]/100,t[3]/100,t[4]):iR.hasOwnProperty(e)?cR(iR[e]):e==="transparent"?new ll(NaN,NaN,NaN,0):null}function cR(e){return new ll(e>>16&255,e>>8&255,e&255,1)}function Mb(e,t,r,n){return n<=0&&(e=t=r=NaN),new ll(e,t,r,n)}function t6e(e){return e instanceof F2||(e=Vv(e)),e?(e=e.rgb(),new ll(e.r,e.g,e.b,e.opacity)):new ll}function ST(e,t,r,n){return arguments.length===1?t6e(e):new ll(e,t,r,n??1)}function ll(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}JE(ll,ST,Zq(F2,{brighter(e){return e=e==null?l_:Math.pow(l_,e),new ll(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hv:Math.pow(Hv,e),new ll(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ll(pm(this.r),pm(this.g),pm(this.b),c_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:uR,formatHex:uR,formatHex8:r6e,formatRgb:dR,toString:dR}));function uR(){return`#${tm(this.r)}${tm(this.g)}${tm(this.b)}`}function r6e(){return`#${tm(this.r)}${tm(this.g)}${tm(this.b)}${tm((isNaN(this.opacity)?1:this.opacity)*255)}`}function dR(){const e=c_(this.opacity);return`${e===1?"rgb(":"rgba("}${pm(this.r)}, ${pm(this.g)}, ${pm(this.b)}${e===1?")":`, ${e})`}`}function c_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tm(e){return e=pm(e),(e<16?"0":"")+e.toString(16)}function fR(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Zc(e,t,r,n)}function eK(e){if(e instanceof Zc)return new Zc(e.h,e.s,e.l,e.opacity);if(e instanceof F2||(e=Vv(e)),!e)return new Zc;if(e instanceof Zc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,o=a-s,l=(a+s)/2;return o?(t===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-t)/o+2:i=(t-r)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new Zc(i,o,l,e.opacity)}function n6e(e,t,r,n){return arguments.length===1?eK(e):new Zc(e,t,r,n??1)}function Zc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}JE(Zc,n6e,Zq(F2,{brighter(e){return e=e==null?l_:Math.pow(l_,e),new Zc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hv:Math.pow(Hv,e),new Zc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new ll(ek(e>=240?e-240:e+120,s,n),ek(e,s,n),ek(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Zc(hR(this.h),Fb(this.s),Fb(this.l),c_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=c_(this.opacity);return`${e===1?"hsl(":"hsla("}${hR(this.h)}, ${Fb(this.s)*100}%, ${Fb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hR(e){return e=(e||0)%360,e<0?e+360:e}function Fb(e){return Math.max(0,Math.min(1,e||0))}function ek(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const QE=e=>()=>e;function s6e(e,t){return function(r){return e+r*t}}function a6e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function i6e(e){return(e=+e)==1?tK:function(t,r){return r-t?a6e(t,r,e):QE(isNaN(t)?r:t)}}function tK(e,t){var r=t-e;return r?s6e(e,r):QE(isNaN(e)?t:e)}const mR=(function e(t){var r=i6e(t);function n(s,a){var i=r((s=ST(s)).r,(a=ST(a)).r),o=r(s.g,a.g),l=r(s.b,a.b),u=tK(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=u(d),s+""}}return n.gamma=e,n})(1);function o6e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function l6e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function c6e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)s[i]=E1(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(o){for(i=0;i<n;++i)a[i]=s[i](o);return a}}function u6e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function u_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function d6e(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=E1(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var kT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tk=new RegExp(kT.source,"g");function f6e(e){return function(){return e}}function h6e(e){return function(t){return e(t)+""}}function m6e(e,t){var r=kT.lastIndex=tk.lastIndex=0,n,s,a,i=-1,o=[],l=[];for(e=e+"",t=t+"";(n=kT.exec(e))&&(s=tk.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:u_(n,s)})),r=tk.lastIndex;return r<t.length&&(a=t.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?h6e(l[0].x):f6e(t):(t=l.length,function(u){for(var d=0,f;d<t;++d)o[(f=l[d]).i]=f.x(u);return o.join("")})}function E1(e,t){var r=typeof t,n;return t==null||r==="boolean"?QE(t):(r==="number"?u_:r==="string"?(n=Vv(t))?(t=n,mR):m6e:t instanceof Vv?mR:t instanceof Date?u6e:l6e(t)?o6e:Array.isArray(t)?c6e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?d6e:u_)(e,t)}function ZE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function g6e(e,t){t===void 0&&(t=e,e=E1);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return a[o](i-o)}}function p6e(e){return function(){return e}}function d_(e){return+e}var gR=[0,1];function $o(e){return e}function TT(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:p6e(isNaN(t)?NaN:.5)}function x6e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function y6e(e,t,r){var n=e[0],s=e[1],a=t[0],i=t[1];return s<n?(n=TT(s,n),a=r(i,a)):(n=TT(n,s),a=r(a,i)),function(o){return a(n(o))}}function v6e(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=TT(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(o){var l=M2(e,o,1,n)-1;return a[l](s[l](o))}}function D2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function A3(){var e=gR,t=gR,r=E1,n,s,a,i=$o,o,l,u;function d(){var h=Math.min(e.length,t.length);return i!==$o&&(i=x6e(e[0],e[h-1])),o=h>2?v6e:y6e,l=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(l||(l=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(s((u||(u=o(t,e.map(n),u_)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,d_),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=ZE,d()},f.clamp=function(h){return arguments.length?(i=h?!0:$o,d()):i!==$o},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return n=h,s=g,d()}}function eN(){return A3()($o,$o)}function w6e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function f_(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Jp(e){return e=f_(Math.abs(e)),e?e[1]:NaN}function b6e(e,t){return function(r,n){for(var s=r.length,a=[],i=0,o=e[0],l=0;s>0&&o>0&&(l+o+1>n&&(o=Math.max(1,n-l)),a.push(r.substring(s-=o,s+o)),!((l+=o+1)>n));)o=e[i=(i+1)%e.length];return a.reverse().join(t)}}function _6e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var S6e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qv(e){if(!(t=S6e.exec(e)))throw new Error("invalid format: "+e);var t;return new tN({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}qv.prototype=tN.prototype;function tN(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}tN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k6e(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var rK;function T6e(e,t){var r=f_(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(rK=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+f_(e,Math.max(0,t+a-1))[0]}function pR(e,t){var r=f_(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const xR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:w6e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pR(e*100,t),r:pR,s:T6e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yR(e){return e}var vR=Array.prototype.map,wR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function C6e(e){var t=e.grouping===void 0||e.thousands===void 0?yR:b6e(vR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?yR:_6e(vR.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=qv(f);var h=f.fill,g=f.align,x=f.sign,y=f.symbol,v=f.zero,T=f.width,k=f.comma,b=f.precision,E=f.trim,N=f.type;N==="n"?(k=!0,N="g"):xR[N]||(b===void 0&&(b=12),E=!0,N="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var P=y==="$"?r:y==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",M=y==="$"?n:/[%p]/.test(N)?i:"",j=xR[N],A=/[defgprs%]/.test(N);b=b===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function D(L){var G=P,X=M,se,Q,re;if(N==="c")X=j(L)+X,L="";else{L=+L;var B=L<0||1/L<0;if(L=isNaN(L)?l:j(Math.abs(L),b),E&&(L=k6e(L)),B&&+L==0&&x!=="+"&&(B=!1),G=(B?x==="("?x:o:x==="-"||x==="("?"":x)+G,X=(N==="s"?wR[8+rK/3]:"")+X+(B&&x==="("?")":""),A){for(se=-1,Q=L.length;++se<Q;)if(re=L.charCodeAt(se),48>re||re>57){X=(re===46?s+L.slice(se+1):L.slice(se))+X,L=L.slice(0,se);break}}}k&&!v&&(L=t(L,1/0));var V=G.length+L.length+X.length,R=V<T?new Array(T-V+1).join(h):"";switch(k&&v&&(L=t(R+L,R.length?T-X.length:1/0),R=""),g){case"<":L=G+L+X+R;break;case"=":L=G+R+L+X;break;case"^":L=R.slice(0,V=R.length>>1)+G+L+X+R.slice(V);break;default:L=R+G+L+X;break}return a(L)}return D.toString=function(){return f+""},D}function d(f,h){var g=u((f=qv(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(Jp(h)/3)))*3,y=Math.pow(10,-x),v=wR[8+x/3];return function(T){return g(y*T)+v}}return{format:u,formatPrefix:d}}var Db,rN,nK;E6e({thousands:",",grouping:[3],currency:["$",""]});function E6e(e){return Db=C6e(e),rN=Db.format,nK=Db.formatPrefix,Db}function N6e(e){return Math.max(0,-Jp(Math.abs(e)))}function A6e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jp(t)/3)))*3-Jp(Math.abs(e)))}function j6e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jp(t)-Jp(e))+1}function sK(e,t,r,n){var s=bT(e,t,r),a;switch(n=qv(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=A6e(s,i))&&(n.precision=a),nK(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=j6e(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=N6e(s))&&(n.precision=a-(n.type==="%")*2);break}}return rN(n)}function sh(e){var t=e.domain;return e.ticks=function(r){var n=t();return vT(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return sK(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,i=n[s],o=n[a],l,u,d=10;for(o<i&&(u=i,i=o,o=u,u=s,s=a,a=u);d-- >0;){if(u=wT(i,o,r),u===l)return n[s]=i,n[a]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;l=u}return e},e}function aK(){var e=eN();return e.copy=function(){return D2(e,aK())},Pc.apply(e,arguments),sh(e)}function iK(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,d_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return iK(e).unknown(t)},e=arguments.length?Array.from(e,d_):[0,1],sh(r)}function oK(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],i;return a<s&&(i=r,r=n,n=i,i=s,s=a,a=i),e[r]=t.floor(s),e[n]=t.ceil(a),e}function bR(e){return Math.log(e)}function _R(e){return Math.exp(e)}function P6e(e){return-Math.log(-e)}function M6e(e){return-Math.exp(-e)}function F6e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function D6e(e){return e===10?F6e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function O6e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function SR(e){return(t,r)=>-e(-t,r)}function nN(e){const t=e(bR,_R),r=t.domain;let n=10,s,a;function i(){return s=O6e(n),a=D6e(n),r()[0]<0?(s=SR(s),a=SR(a),e(P6e,M6e)):e(bR,_R),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const l=r();let u=l[0],d=l[l.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=s(u),g=s(d),x,y;const v=o==null?10:+o;let T=[];if(!(n%1)&&g-h<v){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(x=1;x<n;++x)if(y=h<0?x/a(-h):x*a(h),!(y<u)){if(y>d)break;T.push(y)}}else for(;h<=g;++h)for(x=n-1;x>=1;--x)if(y=h>0?x/a(-h):x*a(h),!(y<u)){if(y>d)break;T.push(y)}T.length*2<v&&(T=vT(u,d,v))}else T=vT(h,g,Math.min(g-h,v)).map(a);return f?T.reverse():T},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=n===10?"s":","),typeof l!="function"&&(!(n%1)&&(l=qv(l)).precision==null&&(l.trim=!0),l=rN(l)),o===1/0)return l;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?l(d):""}},t.nice=()=>r(oK(r(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),t}function lK(){const e=nN(A3()).domain([1,10]);return e.copy=()=>D2(e,lK()).base(e.base()),Pc.apply(e,arguments),e}function kR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function TR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function sN(e){var t=1,r=e(kR(t),TR(t));return r.constant=function(n){return arguments.length?e(kR(t=+n),TR(t)):t},sh(r)}function cK(){var e=sN(A3());return e.copy=function(){return D2(e,cK()).constant(e.constant())},Pc.apply(e,arguments)}function CR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function I6e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function R6e(e){return e<0?-e*e:e*e}function aN(e){var t=e($o,$o),r=1;function n(){return r===1?e($o,$o):r===.5?e(I6e,R6e):e(CR(r),CR(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},sh(t)}function iN(){var e=aN(A3());return e.copy=function(){return D2(e,iN()).exponent(e.exponent())},Pc.apply(e,arguments),e}function L6e(){return iN.apply(null,arguments).exponent(.5)}function ER(e){return Math.sign(e)*e*e}function B6e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function uK(){var e=eN(),t=[0,1],r=!1,n;function s(a){var i=B6e(e(a));return isNaN(i)?n:r?Math.round(i):i}return s.invert=function(a){return e.invert(ER(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,d_)).map(ER)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return uK(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Pc.apply(s,arguments),sh(s)}function dK(){var e=[],t=[],r=[],n;function s(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=W5e(e,i/o);return a}function a(i){return i==null||isNaN(i=+i)?n:t[M2(r,i)]}return a.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Ff),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return dK().domain(e).range(t).unknown(n)},Pc.apply(a,arguments)}function fK(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function i(l){return l!=null&&l<=l?s[M2(n,l,0,r)]:a}function o(){var l=-1;for(n=new Array(r);++l<r;)n[l]=((l+1)*t-(l-r)*e)/(r+1);return i}return i.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},i.range=function(l){return arguments.length?(r=(s=Array.from(l)).length-1,o()):s.slice()},i.invertExtent=function(l){var u=s.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(l){return arguments.length&&(a=l),i},i.thresholds=function(){return n.slice()},i.copy=function(){return fK().domain([e,t]).range(s).unknown(a)},Pc.apply(sh(i),arguments)}function hK(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[M2(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return hK().domain(e).range(t).unknown(r)},Pc.apply(s,arguments)}const rk=new Date,nk=new Date;function ii(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const l=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return l;let u;do l.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<i);return l},s.filter=a=>ii(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!a(i););else for(;--o>=0;)for(;t(i,1),!a(i););}),r&&(s.count=(a,i)=>(rk.setTime(+a),nk.setTime(+i),e(rk),e(nk),Math.floor(r(rk,nk))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?i=>n(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const h_=ii(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);h_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ii(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):h_);h_.range;const Kd=1e3,pc=Kd*60,Yd=pc*60,h0=Yd*24,oN=h0*7,NR=h0*30,sk=h0*365,rm=ii(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Kd)},(e,t)=>(t-e)/Kd,e=>e.getUTCSeconds());rm.range;const lN=ii(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kd)},(e,t)=>{e.setTime(+e+t*pc)},(e,t)=>(t-e)/pc,e=>e.getMinutes());lN.range;const cN=ii(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*pc)},(e,t)=>(t-e)/pc,e=>e.getUTCMinutes());cN.range;const uN=ii(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Kd-e.getMinutes()*pc)},(e,t)=>{e.setTime(+e+t*Yd)},(e,t)=>(t-e)/Yd,e=>e.getHours());uN.range;const dN=ii(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Yd)},(e,t)=>(t-e)/Yd,e=>e.getUTCHours());dN.range;const O2=ii(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pc)/h0,e=>e.getDate()-1);O2.range;const j3=ii(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/h0,e=>e.getUTCDate()-1);j3.range;const mK=ii(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/h0,e=>Math.floor(e/h0));mK.range;function rg(e){return ii(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*pc)/oN)}const P3=rg(0),m_=rg(1),$6e=rg(2),z6e=rg(3),Qp=rg(4),U6e=rg(5),W6e=rg(6);P3.range;m_.range;$6e.range;z6e.range;Qp.range;U6e.range;W6e.range;function ng(e){return ii(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/oN)}const M3=ng(0),g_=ng(1),H6e=ng(2),G6e=ng(3),Zp=ng(4),V6e=ng(5),q6e=ng(6);M3.range;g_.range;H6e.range;G6e.range;Zp.range;V6e.range;q6e.range;const fN=ii(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());fN.range;const hN=ii(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());hN.range;const m0=ii(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());m0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ii(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});m0.range;const g0=ii(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());g0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ii(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});g0.range;function gK(e,t,r,n,s,a){const i=[[rm,1,Kd],[rm,5,5*Kd],[rm,15,15*Kd],[rm,30,30*Kd],[a,1,pc],[a,5,5*pc],[a,15,15*pc],[a,30,30*pc],[s,1,Yd],[s,3,3*Yd],[s,6,6*Yd],[s,12,12*Yd],[n,1,h0],[n,2,2*h0],[r,1,oN],[t,1,NR],[t,3,3*NR],[e,1,sk]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const g=f&&typeof f.range=="function"?f:l(u,d,f),x=g?g.range(u,+d+1):[];return h?x.reverse():x}function l(u,d,f){const h=Math.abs(d-u)/f,g=KE(([,,v])=>v).right(i,h);if(g===i.length)return e.every(bT(u/sk,d/sk,f));if(g===0)return h_.every(Math.max(bT(u,d,f),1));const[x,y]=i[h/i[g-1][2]<i[g][2]/h?g-1:g];return x.every(y)}return[o,l]}const[K6e,Y6e]=gK(g0,hN,M3,mK,dN,cN),[X6e,J6e]=gK(m0,fN,P3,O2,uN,lN);function ak(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ik(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ty(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Q6e(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,i=e.shortDays,o=e.months,l=e.shortMonths,u=Cy(s),d=Ey(s),f=Cy(a),h=Ey(a),g=Cy(i),x=Ey(i),y=Cy(o),v=Ey(o),T=Cy(l),k=Ey(l),b={a:B,A:V,b:R,B:H,c:null,d:DR,e:DR,f:bke,g:Pke,G:Fke,H:yke,I:vke,j:wke,L:pK,m:_ke,M:Ske,p:z,q:I,Q:RR,s:LR,S:kke,u:Tke,U:Cke,V:Eke,w:Nke,W:Ake,x:null,X:null,y:jke,Y:Mke,Z:Dke,"%":IR},E={a:W,A:K,b:ee,B:oe,c:null,d:OR,e:OR,f:Lke,g:Kke,G:Xke,H:Oke,I:Ike,j:Rke,L:yK,m:Bke,M:$ke,p:Z,q:le,Q:RR,s:LR,S:zke,u:Uke,U:Wke,V:Hke,w:Gke,W:Vke,x:null,X:null,y:qke,Y:Yke,Z:Jke,"%":IR},N={a:D,A:L,b:G,B:X,c:se,d:MR,e:MR,f:mke,g:PR,G:jR,H:FR,I:FR,j:uke,L:hke,m:cke,M:dke,p:A,q:lke,Q:pke,s:xke,S:fke,u:nke,U:ske,V:ake,w:rke,W:ike,x:Q,X:re,y:PR,Y:jR,Z:oke,"%":gke};b.x=P(r,b),b.X=P(n,b),b.c=P(t,b),E.x=P(r,E),E.X=P(n,E),E.c=P(t,E);function P(ue,de){return function(Te){var ie=[],pe=-1,Ae=0,Me=ue.length,Je,Ve,Dt;for(Te instanceof Date||(Te=new Date(+Te));++pe<Me;)ue.charCodeAt(pe)===37&&(ie.push(ue.slice(Ae,pe)),(Ve=AR[Je=ue.charAt(++pe)])!=null?Je=ue.charAt(++pe):Ve=Je==="e"?" ":"0",(Dt=de[Je])&&(Je=Dt(Te,Ve)),ie.push(Je),Ae=pe+1);return ie.push(ue.slice(Ae,pe)),ie.join("")}}function M(ue,de){return function(Te){var ie=Ty(1900,void 0,1),pe=j(ie,ue,Te+="",0),Ae,Me;if(pe!=Te.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(de&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(Ae=ik(Ty(ie.y,0,1)),Me=Ae.getUTCDay(),Ae=Me>4||Me===0?g_.ceil(Ae):g_(Ae),Ae=j3.offset(Ae,(ie.V-1)*7),ie.y=Ae.getUTCFullYear(),ie.m=Ae.getUTCMonth(),ie.d=Ae.getUTCDate()+(ie.w+6)%7):(Ae=ak(Ty(ie.y,0,1)),Me=Ae.getDay(),Ae=Me>4||Me===0?m_.ceil(Ae):m_(Ae),Ae=O2.offset(Ae,(ie.V-1)*7),ie.y=Ae.getFullYear(),ie.m=Ae.getMonth(),ie.d=Ae.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),Me="Z"in ie?ik(Ty(ie.y,0,1)).getUTCDay():ak(Ty(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(Me+5)%7:ie.w+ie.U*7-(Me+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,ik(ie)):ak(ie)}}function j(ue,de,Te,ie){for(var pe=0,Ae=de.length,Me=Te.length,Je,Ve;pe<Ae;){if(ie>=Me)return-1;if(Je=de.charCodeAt(pe++),Je===37){if(Je=de.charAt(pe++),Ve=N[Je in AR?de.charAt(pe++):Je],!Ve||(ie=Ve(ue,Te,ie))<0)return-1}else if(Je!=Te.charCodeAt(ie++))return-1}return ie}function A(ue,de,Te){var ie=u.exec(de.slice(Te));return ie?(ue.p=d.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function D(ue,de,Te){var ie=g.exec(de.slice(Te));return ie?(ue.w=x.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function L(ue,de,Te){var ie=f.exec(de.slice(Te));return ie?(ue.w=h.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function G(ue,de,Te){var ie=T.exec(de.slice(Te));return ie?(ue.m=k.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function X(ue,de,Te){var ie=y.exec(de.slice(Te));return ie?(ue.m=v.get(ie[0].toLowerCase()),Te+ie[0].length):-1}function se(ue,de,Te){return j(ue,t,de,Te)}function Q(ue,de,Te){return j(ue,r,de,Te)}function re(ue,de,Te){return j(ue,n,de,Te)}function B(ue){return i[ue.getDay()]}function V(ue){return a[ue.getDay()]}function R(ue){return l[ue.getMonth()]}function H(ue){return o[ue.getMonth()]}function z(ue){return s[+(ue.getHours()>=12)]}function I(ue){return 1+~~(ue.getMonth()/3)}function W(ue){return i[ue.getUTCDay()]}function K(ue){return a[ue.getUTCDay()]}function ee(ue){return l[ue.getUTCMonth()]}function oe(ue){return o[ue.getUTCMonth()]}function Z(ue){return s[+(ue.getUTCHours()>=12)]}function le(ue){return 1+~~(ue.getUTCMonth()/3)}return{format:function(ue){var de=P(ue+="",b);return de.toString=function(){return ue},de},parse:function(ue){var de=M(ue+="",!1);return de.toString=function(){return ue},de},utcFormat:function(ue){var de=P(ue+="",E);return de.toString=function(){return ue},de},utcParse:function(ue){var de=M(ue+="",!0);return de.toString=function(){return ue},de}}}var AR={"-":"",_:" ",0:"0"},Ei=/^\s*\d+/,Z6e=/^%/,eke=/[\\^$*+?|[\]().{}]/g;function Hn(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function tke(e){return e.replace(eke,"\\$&")}function Cy(e){return new RegExp("^(?:"+e.map(tke).join("|")+")","i")}function Ey(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function rke(e,t,r){var n=Ei.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function nke(e,t,r){var n=Ei.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function ske(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function ake(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function ike(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function jR(e,t,r){var n=Ei.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function PR(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function oke(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function lke(e,t,r){var n=Ei.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function cke(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function MR(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function uke(e,t,r){var n=Ei.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function FR(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function dke(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function fke(e,t,r){var n=Ei.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function hke(e,t,r){var n=Ei.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function mke(e,t,r){var n=Ei.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function gke(e,t,r){var n=Z6e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function pke(e,t,r){var n=Ei.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function xke(e,t,r){var n=Ei.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function DR(e,t){return Hn(e.getDate(),t,2)}function yke(e,t){return Hn(e.getHours(),t,2)}function vke(e,t){return Hn(e.getHours()%12||12,t,2)}function wke(e,t){return Hn(1+O2.count(m0(e),e),t,3)}function pK(e,t){return Hn(e.getMilliseconds(),t,3)}function bke(e,t){return pK(e,t)+"000"}function _ke(e,t){return Hn(e.getMonth()+1,t,2)}function Ske(e,t){return Hn(e.getMinutes(),t,2)}function kke(e,t){return Hn(e.getSeconds(),t,2)}function Tke(e){var t=e.getDay();return t===0?7:t}function Cke(e,t){return Hn(P3.count(m0(e)-1,e),t,2)}function xK(e){var t=e.getDay();return t>=4||t===0?Qp(e):Qp.ceil(e)}function Eke(e,t){return e=xK(e),Hn(Qp.count(m0(e),e)+(m0(e).getDay()===4),t,2)}function Nke(e){return e.getDay()}function Ake(e,t){return Hn(m_.count(m0(e)-1,e),t,2)}function jke(e,t){return Hn(e.getFullYear()%100,t,2)}function Pke(e,t){return e=xK(e),Hn(e.getFullYear()%100,t,2)}function Mke(e,t){return Hn(e.getFullYear()%1e4,t,4)}function Fke(e,t){var r=e.getDay();return e=r>=4||r===0?Qp(e):Qp.ceil(e),Hn(e.getFullYear()%1e4,t,4)}function Dke(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Hn(t/60|0,"0",2)+Hn(t%60,"0",2)}function OR(e,t){return Hn(e.getUTCDate(),t,2)}function Oke(e,t){return Hn(e.getUTCHours(),t,2)}function Ike(e,t){return Hn(e.getUTCHours()%12||12,t,2)}function Rke(e,t){return Hn(1+j3.count(g0(e),e),t,3)}function yK(e,t){return Hn(e.getUTCMilliseconds(),t,3)}function Lke(e,t){return yK(e,t)+"000"}function Bke(e,t){return Hn(e.getUTCMonth()+1,t,2)}function $ke(e,t){return Hn(e.getUTCMinutes(),t,2)}function zke(e,t){return Hn(e.getUTCSeconds(),t,2)}function Uke(e){var t=e.getUTCDay();return t===0?7:t}function Wke(e,t){return Hn(M3.count(g0(e)-1,e),t,2)}function vK(e){var t=e.getUTCDay();return t>=4||t===0?Zp(e):Zp.ceil(e)}function Hke(e,t){return e=vK(e),Hn(Zp.count(g0(e),e)+(g0(e).getUTCDay()===4),t,2)}function Gke(e){return e.getUTCDay()}function Vke(e,t){return Hn(g_.count(g0(e)-1,e),t,2)}function qke(e,t){return Hn(e.getUTCFullYear()%100,t,2)}function Kke(e,t){return e=vK(e),Hn(e.getUTCFullYear()%100,t,2)}function Yke(e,t){return Hn(e.getUTCFullYear()%1e4,t,4)}function Xke(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Zp(e):Zp.ceil(e),Hn(e.getUTCFullYear()%1e4,t,4)}function Jke(){return"+0000"}function IR(){return"%"}function RR(e){return+e}function LR(e){return Math.floor(+e/1e3)}var np,wK,bK;Qke({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qke(e){return np=Q6e(e),wK=np.format,np.parse,bK=np.utcFormat,np.utcParse,np}function Zke(e){return new Date(e)}function e8e(e){return e instanceof Date?+e:+new Date(+e)}function mN(e,t,r,n,s,a,i,o,l,u){var d=eN(),f=d.invert,h=d.domain,g=u(".%L"),x=u(":%S"),y=u("%I:%M"),v=u("%I %p"),T=u("%a %d"),k=u("%b %d"),b=u("%B"),E=u("%Y");function N(P){return(l(P)<P?g:o(P)<P?x:i(P)<P?y:a(P)<P?v:n(P)<P?s(P)<P?T:k:r(P)<P?b:E)(P)}return d.invert=function(P){return new Date(f(P))},d.domain=function(P){return arguments.length?h(Array.from(P,e8e)):h().map(Zke)},d.ticks=function(P){var M=h();return e(M[0],M[M.length-1],P??10)},d.tickFormat=function(P,M){return M==null?N:u(M)},d.nice=function(P){var M=h();return(!P||typeof P.range!="function")&&(P=t(M[0],M[M.length-1],P??10)),P?h(oK(M,P)):d},d.copy=function(){return D2(d,mN(e,t,r,n,s,a,i,o,l,u))},d}function t8e(){return Pc.apply(mN(X6e,J6e,m0,fN,P3,O2,uN,lN,rm,wK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function r8e(){return Pc.apply(mN(K6e,Y6e,g0,hN,M3,j3,dN,cN,rm,bK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function F3(){var e=0,t=1,r,n,s,a,i=$o,o=!1,l;function u(f){return f==null||isNaN(f=+f)?l:i(s===0?.5:(f=(a(f)-r)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var g,x;return arguments.length?([g,x]=h,i=f(g,x),u):[i(0),i(1)]}}return u.range=d(E1),u.rangeRound=d(ZE),u.unknown=function(f){return arguments.length?(l=f,u):l},function(f){return a=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function ah(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _K(){var e=sh(F3()($o));return e.copy=function(){return ah(e,_K())},k0.apply(e,arguments)}function SK(){var e=nN(F3()).domain([1,10]);return e.copy=function(){return ah(e,SK()).base(e.base())},k0.apply(e,arguments)}function kK(){var e=sN(F3());return e.copy=function(){return ah(e,kK()).constant(e.constant())},k0.apply(e,arguments)}function gN(){var e=aN(F3());return e.copy=function(){return ah(e,gN()).exponent(e.exponent())},k0.apply(e,arguments)}function n8e(){return gN.apply(null,arguments).exponent(.5)}function TK(){var e=[],t=$o;function r(n){if(n!=null&&!isNaN(n=+n))return t((M2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ff),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>U5e(e,a/n))},r.copy=function(){return TK(t).domain(e)},k0.apply(r,arguments)}function D3(){var e=0,t=.5,r=1,n=1,s,a,i,o,l,u=$o,d,f=!1,h;function g(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-a)*(n*y<n*a?o:l),u(f?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),a=d(t=+t),i=d(r=+r),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),n=a<s?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(f=!!y,g):f},g.interpolator=function(y){return arguments.length?(u=y,g):u};function x(y){return function(v){var T,k,b;return arguments.length?([T,k,b]=v,u=g6e(y,[T,k,b]),g):[u(0),u(.5),u(1)]}}return g.range=x(E1),g.rangeRound=x(ZE),g.unknown=function(y){return arguments.length?(h=y,g):h},function(y){return d=y,s=y(e),a=y(t),i=y(r),o=s===a?0:.5/(a-s),l=a===i?0:.5/(i-a),n=a<s?-1:1,g}}function CK(){var e=sh(D3()($o));return e.copy=function(){return ah(e,CK())},k0.apply(e,arguments)}function EK(){var e=nN(D3()).domain([.1,1,10]);return e.copy=function(){return ah(e,EK()).base(e.base())},k0.apply(e,arguments)}function NK(){var e=sN(D3());return e.copy=function(){return ah(e,NK()).constant(e.constant())},k0.apply(e,arguments)}function pN(){var e=aN(D3());return e.copy=function(){return ah(e,pN()).exponent(e.exponent())},k0.apply(e,arguments)}function s8e(){return pN.apply(null,arguments).exponent(.5)}const Ry=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:XE,scaleDiverging:CK,scaleDivergingLog:EK,scaleDivergingPow:pN,scaleDivergingSqrt:s8e,scaleDivergingSymlog:NK,scaleIdentity:iK,scaleImplicit:_T,scaleLinear:aK,scaleLog:lK,scaleOrdinal:YE,scalePoint:G5e,scalePow:iN,scaleQuantile:dK,scaleQuantize:fK,scaleRadial:uK,scaleSequential:_K,scaleSequentialLog:SK,scaleSequentialPow:gN,scaleSequentialQuantile:TK,scaleSequentialSqrt:n8e,scaleSequentialSymlog:kK,scaleSqrt:L6e,scaleSymlog:cK,scaleThreshold:hK,scaleTime:t8e,scaleUtc:r8e,tickFormat:sK},Symbol.toStringTag,{value:"Module"}));var ih=e=>e.chartData,a8e=Ft([ih],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),xN=(e,t,r,n)=>n?a8e(e):ih(e);function e1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(cu(t)&&cu(r))return!0}return!1}function BR(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function i8e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(cu(r))s=r;else if(typeof r=="function")return;if(cu(n))a=n;else if(typeof n=="function")return;var i=[s,a];if(e1(i))return i}}function o8e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(e1(n))return BR(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,i,o;if(s==="auto")t!=null&&(i=Math.min(...t));else if(an(s))i=s;else if(typeof s=="function")try{t!=null&&(i=s(t?.[0]))}catch{}else if(typeof s=="string"&&PI.test(s)){var l=PI.exec(s);if(l==null||t==null)i=void 0;else{var u=+l[1];i=t[0]-u}}else i=t?.[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(an(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[1]))}catch{}else if(typeof a=="string"&&MI.test(a)){var d=MI.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t?.[1];var h=[i,o];if(e1(h))return t==null?h:BR(h,t,r)}}}var N1=1e9,l8e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vN,Rs=!0,Cc="[DecimalError] ",xm=Cc+"Invalid argument: ",yN=Cc+"Exponent out of range: ",A1=Math.floor,Vh=Math.pow,c8e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Dl,vi=1e7,ks=7,AK=9007199254740991,p_=A1(AK/ks),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ks;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return n0(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return gs(n0(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return za(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Dl))throw Error(Cc+"NaN");if(r.s<1)throw Error(Cc+(r.s?"NaN":"-Infinity"));return r.eq(Dl)?new n(0):(Rs=!1,t=n0(Kv(r,a),Kv(e,a),a),Rs=!0,gs(t,s))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MK(t,e):jK(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Cc+"NaN");return r.s?(Rs=!1,t=n0(r,e,0,1).times(e),Rs=!0,r.minus(t)):gs(new n(r),s)};Ar.naturalExponential=Ar.exp=function(){return PK(this)};Ar.naturalLogarithm=Ar.ln=function(){return Kv(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?jK(t,e):MK(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xm+e);if(t=za(s)+1,n=s.d.length-1,r=n*ks+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,s,a,i,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(Cc+"NaN")}for(e=za(o),Rs=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=Hu(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=A1((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new l(t)):n=new l(s.toString()),r=l.precision,s=i=r+3;;)if(a=n,n=a.plus(n0(o,a,i+2)).times(.5),Hu(a.d).slice(0,i)===(t=Hu(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&t=="4999"){if(gs(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;i+=4}return Rs=!0,gs(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,s,a,i,o,l,u,d=this,f=d.constructor,h=d.d,g=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,l=h.length,u=g.length,l<u&&(a=h,h=g,g=a,i=l,l=u,u=i),a=[],i=l+u,n=i;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,s=l+n;s>n;)o=a[s]+g[n]*h[s-n-1]+t,a[s--]=o%vi|0,t=o/vi|0;a[s]=(a[s]+t)%vi|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Rs?gs(e,f.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Zu(e,0,N1),t===void 0?t=n.rounding:Zu(t,0,8),gs(r,e+za(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=$m(n,!0):(Zu(e,0,N1),t===void 0?t=s.rounding:Zu(t,0,8),n=gs(new s(n),e+1,t),r=$m(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?$m(s):(Zu(e,0,N1),t===void 0?t=a.rounding:Zu(t,0,8),n=gs(new a(s),e+za(s)+1,t),r=$m(n.abs(),!1,e+za(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return gs(new t(e),za(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,s,a,i,o=this,l=o.constructor,u=12,d=+(e=new l(e));if(!e.s)return new l(Dl);if(o=new l(o),!o.s){if(e.s<1)throw Error(Cc+"Infinity");return o}if(o.eq(Dl))return o;if(n=l.precision,e.eq(Dl))return gs(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,a=o.s,i){if((r=d<0?-d:d)<=AK){for(s=new l(Dl),t=Math.ceil(n/ks+4),Rs=!1;r%2&&(s=s.times(o),zR(s.d,t)),r=A1(r/2),r!==0;)o=o.times(o),zR(o.d,t);return Rs=!0,e.s<0?new l(Dl).div(s):gs(s,n)}}else if(a<0)throw Error(Cc+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Rs=!1,s=e.times(Kv(o,n+u)),Rs=!0,s=PK(s),s.s=a,s};Ar.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=za(s),n=$m(s,r<=a.toExpNeg||r>=a.toExpPos)):(Zu(e,1,N1),t===void 0?t=a.rounding:Zu(t,0,8),s=gs(new a(s),e,t),r=za(s),n=$m(s,e<=r||r<=a.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Zu(e,1,N1),t===void 0?t=n.rounding:Zu(t,0,8)),gs(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=za(e),r=e.constructor;return $m(e,t<=r.toExpNeg||t>=r.toExpPos)};function jK(e,t){var r,n,s,a,i,o,l,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Rs?gs(t,f):t;if(l=e.d,u=t.d,i=e.e,s=t.e,l=l.slice(),a=i-s,a){for(a<0?(n=l,a=-a,o=u.length):(n=u,s=i,o=l.length),i=Math.ceil(f/ks),o=i>o?i+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=l.length,a=u.length,o-a<0&&(a=o,n=u,u=l,l=n),r=0;a;)r=(l[--a]=l[a]+u[a]+r)/vi|0,l[a]%=vi;for(r&&(l.unshift(r),++s),o=l.length;l[--o]==0;)l.pop();return t.d=l,t.e=s,Rs?gs(t,f):t}function Zu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(xm+e)}function Hu(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)n=e[t]+"",r=ks-n.length,r&&(a+=yf(r)),a+=n;i=e[t],n=i+"",r=ks-n.length,r&&(a+=yf(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var n0=(function(){function e(n,s){var a,i=0,o=n.length;for(n=n.slice();o--;)a=n[o]*s+i,n[o]=a%vi|0,i=a/vi|0;return i&&n.unshift(i),n}function t(n,s,a,i){var o,l;if(a!=i)l=a>i?1:-1;else for(o=l=0;o<a;o++)if(n[o]!=s[o]){l=n[o]>s[o]?1:-1;break}return l}function r(n,s,a){for(var i=0;a--;)n[a]-=i,i=n[a]<s[a]?1:0,n[a]=i*vi+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,i){var o,l,u,d,f,h,g,x,y,v,T,k,b,E,N,P,M,j,A=n.constructor,D=n.s==s.s?1:-1,L=n.d,G=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(Cc+"Division by zero");for(l=n.e-s.e,M=G.length,N=L.length,g=new A(D),x=g.d=[],u=0;G[u]==(L[u]||0);)++u;if(G[u]>(L[u]||0)&&--l,a==null?k=a=A.precision:i?k=a+(za(n)-za(s))+1:k=a,k<0)return new A(0);if(k=k/ks+2|0,u=0,M==1)for(d=0,G=G[0],k++;(u<N||d)&&k--;u++)b=d*vi+(L[u]||0),x[u]=b/G|0,d=b%G|0;else{for(d=vi/(G[0]+1)|0,d>1&&(G=e(G,d),L=e(L,d),M=G.length,N=L.length),E=M,y=L.slice(0,M),v=y.length;v<M;)y[v++]=0;j=G.slice(),j.unshift(0),P=G[0],G[1]>=vi/2&&++P;do d=0,o=t(G,y,M,v),o<0?(T=y[0],M!=v&&(T=T*vi+(y[1]||0)),d=T/P|0,d>1?(d>=vi&&(d=vi-1),f=e(G,d),h=f.length,v=y.length,o=t(f,y,h,v),o==1&&(d--,r(f,M<h?j:G,h))):(d==0&&(o=d=1),f=G.slice()),h=f.length,h<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(G,y,M,v),o<1&&(d++,r(y,M<v?j:G,v))),v=y.length):o===0&&(d++,y=[0]),x[u++]=d,o&&y[0]?y[v++]=L[E]||0:(y=[L[E]],v=1);while((E++<N||y[0]!==void 0)&&k--)}return x[0]||x.shift(),g.e=l,gs(g,i?a+za(g)+1:a)}})();function PK(e,t){var r,n,s,a,i,o,l=0,u=0,d=e.constructor,f=d.precision;if(za(e)>16)throw Error(yN+za(e));if(!e.s)return new d(Dl);for(Rs=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Vh(2,u))/Math.LN10*2+5|0,o+=n,r=s=a=new d(Dl),d.precision=o;;){if(s=gs(s.times(e),o),r=r.times(++l),i=a.plus(n0(s,r,o)),Hu(i.d).slice(0,o)===Hu(a.d).slice(0,o)){for(;u--;)a=gs(a.times(a),o);return d.precision=f,t==null?(Rs=!0,gs(a,f)):a}a=i}}function za(e){for(var t=e.e*ks,r=e.d[0];r>=10;r/=10)t++;return t}function ok(e,t,r){if(t>e.LN10.sd())throw Rs=!0,r&&(e.precision=r),Error(Cc+"LN10 precision limit exceeded");return gs(new e(e.LN10),t)}function yf(e){for(var t="";e--;)t+="0";return t}function Kv(e,t){var r,n,s,a,i,o,l,u,d,f=1,h=10,g=e,x=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(Cc+(g.s?"NaN":"-Infinity"));if(g.eq(Dl))return new y(0);if(t==null?(Rs=!1,u=v):u=t,g.eq(10))return t==null&&(Rs=!0),ok(y,u);if(u+=h,y.precision=u,r=Hu(x),n=r.charAt(0),a=za(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Hu(g.d),n=r.charAt(0),f++;a=za(g),n>1?(g=new y("0."+r),a++):g=new y(n+"."+r.slice(1))}else return l=ok(y,u+2,v).times(a+""),g=Kv(new y(n+"."+r.slice(1)),u-h).plus(l),y.precision=v,t==null?(Rs=!0,gs(g,v)):g;for(o=i=g=n0(g.minus(Dl),g.plus(Dl),u),d=gs(g.times(g),u),s=3;;){if(i=gs(i.times(d),u),l=o.plus(n0(i,new y(s),u)),Hu(l.d).slice(0,u)===Hu(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(ok(y,u+2,v).times(a+""))),o=n0(o,new y(f),u),y.precision=v,t==null?(Rs=!0,gs(o,v)):o;o=l,s+=2}}function $R(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=A1(r/ks),e.d=[],n=(r+1)%ks,r<0&&(n+=ks),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=ks;n<s;)e.d.push(+t.slice(n,n+=ks));t=t.slice(n),n=ks-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Rs&&(e.e>p_||e.e<-p_))throw Error(yN+r)}else e.s=0,e.e=0,e.d=[0];return e}function gs(e,t,r){var n,s,a,i,o,l,u,d,f=e.d;for(i=1,a=f[0];a>=10;a/=10)i++;if(n=t-i,n<0)n+=ks,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/ks),a=f.length,d>=a)return e;for(u=a=f[d],i=1;a>=10;a/=10)i++;n%=ks,s=n-ks+i}if(r!==void 0&&(a=Vh(10,i-s-1),o=u/a%10|0,l=t<0||f[d+1]!==void 0||u%a,l=r<4?(o||l)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||l||r==6&&(n>0?s>0?u/Vh(10,i-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return l?(a=za(e),f.length=1,t=t-a-1,f[0]=Vh(10,(ks-t%ks)%ks),e.e=A1(-t/ks)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Vh(10,ks-n),f[d]=s>0?(u/Vh(10,i-s)%Vh(10,s)|0)*a:0),l)for(;;)if(d==0){(f[0]+=a)==vi&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=vi)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(Rs&&(e.e>p_||e.e<-p_))throw Error(yN+za(e));return e}function MK(e,t){var r,n,s,a,i,o,l,u,d,f,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Rs?gs(t,g):t;if(l=e.d,f=t.d,n=t.e,u=e.e,l=l.slice(),i=u-n,i){for(d=i<0,d?(r=l,i=-i,o=f.length):(r=f,n=u,o=l.length),s=Math.max(Math.ceil(g/ks),o)+2,i>s&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for(s=l.length,o=f.length,d=s<o,d&&(o=s),s=0;s<o;s++)if(l[s]!=f[s]){d=l[s]<f[s];break}i=0}for(d&&(r=l,l=f,f=r,t.s=-t.s),o=l.length,s=f.length-o;s>0;--s)l[o++]=0;for(s=f.length;s>i;){if(l[--s]<f[s]){for(a=s;a&&l[--a]===0;)l[a]=vi-1;--l[a],l[s]+=vi}l[s]-=f[s]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--n;return l[0]?(t.d=l,t.e=n,Rs?gs(t,g):t):new h(0)}function $m(e,t,r){var n,s=za(e),a=Hu(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+yf(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+yf(-s-1)+a,r&&(n=r-i)>0&&(a+=yf(n))):s>=i?(a+=yf(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+yf(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=yf(n))),e.s<0?"-"+a:a}function zR(e,t){if(e.length>t)return e.length=t,!0}function FK(e){var t,r,n;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(xm+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return $R(i,a.toString())}else if(typeof a!="string")throw Error(xm+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,c8e.test(a))$R(i,a);else throw Error(xm+a)}if(s.prototype=Ar,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=FK,s.config=s.set=u8e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function u8e(e){if(!e||typeof e!="object")throw Error(Cc+"Object expected");var t,r,n,s=["precision",1,N1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(A1(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(xm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(xm+r+": "+n);return this}var vN=FK(l8e);Dl=new vN(1);const ns=vN;var d8e=e=>e,DK={},OK=e=>e===DK,UR=e=>function t(){return arguments.length===0||arguments.length===1&&OK(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},IK=(e,t)=>e===1?t:UR(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(i=>i!==DK).length;return a>=e?t(...n):IK(e-a,UR(function(){for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];var u=n.map(d=>OK(d)?o.shift():d);return t(...u,...o)}))}),O3=e=>IK(e.length,e),CT=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},f8e=O3((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),h8e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return d8e;var s=r.reverse(),a=s[0],i=s.slice(1);return function(){return i.reduce((o,l)=>l(o),a(...arguments))}},ET=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),RK=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((i,o)=>{var l;return i===((l=t)===null||l===void 0?void 0:l[o])})||(t=s,r=e(...s)),r}};function LK(e){var t;return e===0?t=1:t=Math.floor(new ns(e).abs().log(10).toNumber())+1,t}function BK(e,t,r){for(var n=new ns(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}O3((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});O3((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});O3((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var $K=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},zK=(e,t,r)=>{if(e.lte(0))return new ns(0);var n=LK(e.toNumber()),s=new ns(10).pow(n),a=e.div(s),i=n!==1?.05:.1,o=new ns(Math.ceil(a.div(i).toNumber())).add(r).mul(i),l=o.mul(s);return t?new ns(l.toNumber()):new ns(Math.ceil(l.toNumber()))},m8e=(e,t,r)=>{var n=new ns(1),s=new ns(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new ns(10).pow(LK(e)-1),s=new ns(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new ns(Math.floor(e)))}else e===0?s=new ns(Math.floor((t-1)/2)):r||(s=new ns(Math.floor(e)));var i=Math.floor((t-1)/2),o=h8e(f8e(l=>s.add(new ns(l-i).mul(n)).toNumber()),CT);return o(0,t)},UK=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ns(0),tickMin:new ns(0),tickMax:new ns(0)};var i=zK(new ns(r).sub(t).div(n-1),s,a),o;t<=0&&r>=0?o=new ns(0):(o=new ns(t).add(r).div(2),o=o.sub(new ns(o).mod(i)));var l=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ns(r).sub(o).div(i).toNumber()),d=l+u+1;return d>n?UK(t,r,n,s,a+1):(d<n&&(u=r>0?u+(n-d):u,l=r>0?l:l+(n-d)),{step:i,tickMin:o.sub(new ns(l).mul(i)),tickMax:o.add(new ns(u).mul(i))})};function g8e(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[i,o]=$K([t,r]);if(i===-1/0||o===1/0){var l=o===1/0?[i,...CT(0,n-1).map(()=>1/0)]:[...CT(0,n-1).map(()=>-1/0),o];return t>r?ET(l):l}if(i===o)return m8e(i,n,s);var{step:u,tickMin:d,tickMax:f}=UK(i,o,a,s,0),h=BK(d,f.add(new ns(.1).mul(u)),u);return t>r?ET(h):h}function p8e(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,i]=$K([r,n]);if(a===-1/0||i===1/0)return[r,n];if(a===i)return[a];var o=Math.max(t,2),l=zK(new ns(i).sub(a).div(o-1),s,0),u=[...BK(new ns(a),new ns(i),l),i];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?ET(u):u}var x8e=RK(g8e),y8e=RK(p8e),v8e=e=>e.rootProps.barCategoryGap,I3=e=>e.rootProps.stackOffset,wN=e=>e.options.chartName,bN=e=>e.rootProps.syncId,WK=e=>e.rootProps.syncMethod,_N=e=>e.options.eventEmitter,Hd={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Cl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},R3=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},w8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Hd.angleAxisId,includeHidden:!1,name:void 0,reversed:Hd.reversed,scale:Hd.scale,tick:Hd.tick,tickCount:void 0,ticks:void 0,type:Hd.type,unit:void 0},b8e={allowDataOverflow:Cl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cl.scale,tick:Cl.tick,tickCount:Cl.tickCount,ticks:void 0,type:Cl.type,unit:void 0},_8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Hd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Hd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Hd.scale,tick:Hd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},S8e={allowDataOverflow:Cl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cl.scale,tick:Cl.tick,tickCount:Cl.tickCount,ticks:void 0,type:"category",unit:void 0},SN=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?_8e:w8e,kN=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?S8e:b8e,L3=e=>e.polarOptions,TN=Ft([_0,S0,Zi],j3e),HK=Ft([L3,TN],(e,t)=>{if(e!=null)return Gf(e.innerRadius,t,0)}),GK=Ft([L3,TN],(e,t)=>{if(e!=null)return Gf(e.outerRadius,t,t*.8)}),k8e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},VK=Ft([L3],k8e);Ft([SN,VK],R3);var qK=Ft([TN,HK,GK],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Ft([kN,qK],R3);var KK=Ft([Ms,L3,HK,GK,_0,S0],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:l,endAngle:u}=t;return{cx:Gf(i,s,s/2),cy:Gf(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),Wa=(e,t)=>t,B3=(e,t,r)=>r;function YK(e){return e?.id}var oi=e=>{var t=Ms(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},j1=e=>e.tooltip.settings.axisId,Ni=e=>{var t=oi(e),r=j1(e);return I2(e,t,r)},XK=Ft([Ni],e=>e?.dataKey);function JK(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,i=new Map;return e.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:n;if(!(u==null||u.length===0)){var d=YK(o);u.forEach((f,h)=>{var g=a==null||s?h:String(Wo(f,a,null)),x=Wo(f,o.dataKey,0),y;i.has(g)?y=i.get(g):y={},Object.assign(y,{[d]:x}),i.set(g,y)})}}),Array.from(i.values())}function CN(e){return e.stackId!=null&&e.dataKey!=null}function WR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(r),!0).forEach(function(n){T8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T8e(e,t,r){return(t=C8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C8e(e){var t=E8e(e,"string");return typeof t=="symbol"?t:t+""}function E8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NT=[0,"auto"],kl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},QK=(e,t)=>e.cartesianAxis.xAxis[t],T0=(e,t)=>{var r=QK(e,t);return r??kl},Tl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:NT,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:P2},ZK=(e,t)=>e.cartesianAxis.yAxis[t],C0=(e,t)=>{var r=ZK(e,t);return r??Tl},N8e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},EN=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??N8e},gl=(e,t,r)=>{switch(t){case"xAxis":return T0(e,r);case"yAxis":return C0(e,r);case"zAxis":return EN(e,r);case"angleAxis":return SN(e,r);case"radiusAxis":return kN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},A8e=(e,t,r)=>{switch(t){case"xAxis":return T0(e,r);case"yAxis":return C0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},I2=(e,t,r)=>{switch(t){case"xAxis":return T0(e,r);case"yAxis":return C0(e,r);case"angleAxis":return SN(e,r);case"radiusAxis":return kN(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},eY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function tY(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var rY=e=>e.graphicalItems.cartesianItems,j8e=Ft([Wa,B3],tY),nY=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),R2=Ft([rY,gl,j8e],nY),sY=Ft([R2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(CN)),aY=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),iY=Ft([R2],aY),oY=e=>e.map(t=>t.data).filter(Boolean).flat(1),P8e=Ft([R2],oY),lY=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},NN=Ft([P8e,xN],lY),cY=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Wo(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Wo(s,n)}))):e.map(n=>({value:n})),$3=Ft([NN,gl,R2],cY);function uY(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function sg(e){return e.filter(t=>Qu(t)||t instanceof Date).map(Number).filter(t=>kc(t)===!1)}function M8e(e,t,r){return!r||typeof t!="number"||kc(t)?[]:r.length?sg(r.flatMap(n=>{var s=Wo(e,n.dataKey),a,i;if(Array.isArray(s)?[a,i]=s:a=i=s,!(!cu(a)||!cu(i)))return[t-a,t+i]})):[]}var F8e=Ft([sY,xN,Ni],JK),dY=(e,t,r)=>{var n={},s=t.reduce((a,i)=>(i.stackId==null||(a[i.stackId]==null&&(a[i.stackId]=[]),a[i.stackId].push(i)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[i,o]=a,l=o.map(YK);return[i,{stackedData:G3e(e,l,r),graphicalItems:o}]}))},D8e=Ft([F8e,sY,I3],dY),fY=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var a=K3e(e,n,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},O8e=Ft([D8e,ih,Wa],fY),hY=(e,t,r,n,s)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,l,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>uY(s,f)),d=Wo(a,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:M8e(a,d,u)}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:Wo(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),z3=e=>e.errorBars,mY=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>uY(r,n));Ft([iY,z3,Wa],mY);var I8e=Ft([NN,gl,iY,z3,Wa],hY);function R8e(e){var{value:t}=e;if(Qu(t)||t instanceof Date)return t}var HR=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=sg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},L8e=(e,t,r)=>{var n=e.map(R8e).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&NV(n))?Kq(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},AN=e=>{var t;if(e==null||!("domain"in e))return NT;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=sg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:NT},y_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),i=Math.min(...a),o=Math.max(...a);return[i,o]}},gY=e=>e.referenceElements.dots,P1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),B8e=Ft([gY,Wa,B3],P1),pY=e=>e.referenceElements.areas,$8e=Ft([pY,Wa,B3],P1),xY=e=>e.referenceElements.lines,z8e=Ft([xY,Wa,B3],P1),yY=(e,t)=>{var r=sg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},U8e=Ft(B8e,Wa,yY),vY=(e,t)=>{var r=sg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},W8e=Ft([$8e,Wa],vY),wY=(e,t)=>{var r=sg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},H8e=Ft(z8e,Wa,wY),G8e=Ft(U8e,H8e,W8e,(e,t,r)=>y_(e,r,t)),V8e=Ft([gl],AN),bY=(e,t,r,n,s,a,i)=>{var o=i8e(t,e.allowDataOverflow);if(o!=null)return o;var l=a==="vertical"&&i==="xAxis"||a==="horizontal"&&i==="yAxis",u=l?y_(r,s,HR(n)):y_(s,HR(n));return o8e(t,u,e.allowDataOverflow)},q8e=Ft([gl,V8e,O8e,I8e,G8e,Ms,Wa],bY),K8e=[0,1],_Y=(e,t,r,n,s,a,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:l}=e,u=nh(t,a);return u&&o==null?Kq(0,r.length):l==="category"?L8e(n,e,u):s==="expand"?K8e:i}},jN=Ft([gl,Ms,NN,$3,I3,Wa,q8e],_Y),SY=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:i}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(DE(a));return o in Ry?o:"point"}}},L2=Ft([gl,Ms,eY,wN,Wa],SY);function Y8e(e){if(e!=null){if(e in Ry)return Ry[e]();var t="scale".concat(DE(e));if(t in Ry)return Ry[t]()}}function PN(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=Y8e(t);if(s!=null){var a=s.domain(r).range(n);return z3e(a),a}}}var kY=(e,t,r)=>{var n=AN(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&e1(e))return x8e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&e1(e))return y8e(e,t.tickCount,t.allowDecimals)}},MN=Ft([jN,I2,L2],kY),TY=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&e1(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],i=t[1],o=r[r.length-1];return[Math.min(s,a),Math.max(i,o)]}return t},X8e=Ft([gl,jN,MN,Wa],TY),J8e=Ft($3,gl,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(sg(e.map(o=>o.value))).sort((o,l)=>o-l);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var i=n[a+1]-n[a];r=Math.min(r,i)}return r/s}}),CY=Ft(J8e,Ms,v8e,Zi,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!cu(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var i=Gf(r,e*a),o=e*a/2;return o-i-(o-i)/a*i}return 0}),Q8e=(e,t)=>{var r=T0(e,t);return r==null||typeof r.padding!="string"?0:CY(e,"xAxis",t,r.padding)},Z8e=(e,t)=>{var r=C0(e,t);return r==null||typeof r.padding!="string"?0:CY(e,"yAxis",t,r.padding)},eTe=Ft(T0,Q8e,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),tTe=Ft(C0,Z8e,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),rTe=Ft([Zi,eTe,N3,E3,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),nTe=Ft([Zi,Ms,tTe,N3,E3,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:i}=s;return a?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),B2=(e,t,r,n)=>{var s;switch(t){case"xAxis":return rTe(e,r,n);case"yAxis":return nTe(e,r,n);case"zAxis":return(s=EN(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return VK(e);case"radiusAxis":return qK(e,r);default:return}},EY=Ft([gl,B2],R3),M1=Ft([gl,L2,X8e,EY],PN);Ft([R2,z3,Wa],mY);function NY(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var U3=(e,t)=>t,W3=(e,t,r)=>r,sTe=Ft(T3,U3,W3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(NY)),aTe=Ft(C3,U3,W3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(NY)),AY=(e,t)=>({width:e.width,height:t.height}),iTe=(e,t)=>{var r=typeof t.width=="number"?t.width:P2;return{width:r,height:e.height}},oTe=Ft(Zi,T0,AY),lTe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},cTe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},uTe=Ft(S0,Zi,sTe,U3,W3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var l=AY(t,o);i==null&&(i=lTe(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;a[o.id]=i-Number(u)*l.height,i+=(u?-1:1)*l.height}),a}),dTe=Ft(_0,Zi,aTe,U3,W3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var l=iTe(t,o);i==null&&(i=cTe(t,n,e));var u=n==="left"&&!s||n==="right"&&s;a[o.id]=i-Number(u)*l.width,i+=(u?-1:1)*l.width}),a}),fTe=(e,t)=>{var r=T0(e,t);if(r!=null)return uTe(e,r.orientation,r.mirror)},hTe=Ft([Zi,T0,fTe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),mTe=(e,t)=>{var r=C0(e,t);if(r!=null)return dTe(e,r.orientation,r.mirror)},gTe=Ft([Zi,C0,mTe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),pTe=Ft(Zi,C0,(e,t)=>{var r=typeof t.width=="number"?t.width:P2;return{width:r,height:e.height}}),jY=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:i}=r,o=nh(e,n),l=t.map(u=>u.value);if(i&&o&&a==="category"&&s&&NV(l))return l}},FN=Ft([Ms,$3,gl,Wa],jY),PY=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,i=nh(e,n);if(i&&(s==="number"||a!=="auto"))return t.map(o=>o.value)}},DN=Ft([Ms,$3,I2,Wa],PY),GR=Ft([Ms,A8e,L2,M1,FN,DN,B2,MN,Wa],(e,t,r,n,s,a,i,o,l)=>{if(t==null)return null;var u=nh(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:s,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),xTe=(e,t,r,n,s,a,i,o,l)=>{if(!(t==null||n==null)){var u=nh(e,l),{type:d,ticks:f,tickCount:h}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/g:0;x=l==="angleAxis"&&a!=null&&a.length>=2?gc(a[0]-a[1])*2*x:x;var y=f||s;if(y){var v=y.map((T,k)=>{var b=i?i.indexOf(T):T;return{index:k,coordinate:n(b)+x,value:T,offset:x}});return v.filter(T=>!kc(T.coordinate))}return u&&o?o.map((T,k)=>({coordinate:n(T)+x,value:T,index:k,offset:x})):n.ticks?n.ticks(h).map(T=>({coordinate:n(T)+x,value:T,offset:x})):n.domain().map((T,k)=>({coordinate:n(T)+x,value:i?i[T]:T,index:k,offset:x}))}},MY=Ft([Ms,I2,L2,M1,MN,B2,FN,DN,Wa],xTe),yTe=(e,t,r,n,s,a,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=nh(e,i),{tickCount:l}=t,u=0;return u=i==="angleAxis"&&n?.length>=2?gc(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(l).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},FY=Ft([Ms,I2,M1,B2,FN,DN,Wa],yTe),DY=Ft(gl,M1,(e,t)=>{if(!(e==null||t==null))return x_(x_({},e),{},{scale:t})}),vTe=Ft([gl,L2,jN,EY],PN);Ft((e,t,r)=>EN(e,r),vTe,(e,t)=>{if(!(e==null||t==null))return x_(x_({},e),{},{scale:t})});var wTe=Ft([Ms,T3,C3],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),OY=e=>e.options.defaultTooltipEventType,IY=e=>e.options.validateTooltipEventTypes;function RY(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function ON(e,t){var r=OY(e),n=IY(e);return RY(t,r,n)}function bTe(e){return Kr(t=>ON(t,e))}var LY=(e,t)=>{var r,n=Number(t);if(!(kc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},_Te=e=>e.tooltip.settings,wf={active:!1,index:null,dataKey:void 0,coordinate:void 0},STe={itemInteraction:{click:wf,hover:wf},axisInteraction:{click:wf,hover:wf},keyboardInteraction:wf,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},BY=Ul({name:"tooltip",initialState:STe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=r0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:kTe,removeTooltipEntrySettings:TTe,setTooltipSettingsState:CTe,setActiveMouseOverItemIndex:ETe,mouseLeaveItem:wje,mouseLeaveChart:$Y,setActiveClickItemIndex:bje,setMouseOverAxisIndex:zY,setMouseClickAxisIndex:NTe,setSyncInteraction:AT,setKeyboardInteraction:jT}=BY.actions,ATe=BY.reducer;function VR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ob(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VR(Object(r),!0).forEach(function(n){jTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jTe(e,t,r){return(t=PTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PTe(e){var t=MTe(e,"string");return typeof t=="symbol"?t:t+""}function MTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FTe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function DTe(e){return e.index!=null}var UY=(e,t,r,n)=>{if(t==null)return wf;var s=FTe(e,t,r);if(s==null)return wf;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(DTe(s)){if(a)return Ob(Ob({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Ob(Ob({},wf),{},{coordinate:s.coordinate})},IN=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!cu(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},WY=(e,t,r,n,s,a,i,o)=>{if(!(a==null||o==null)){var l=i[0],u=l==null?void 0:o(l.positions,a);if(u!=null)return u;var d=s?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},HY=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var i;return((i=a.settings)===null||i===void 0?void 0:i.dataKey)===s})},$2=e=>e.options.tooltipPayloadSearcher,F1=e=>e.tooltip;function qR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qR(Object(r),!0).forEach(function(n){OTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OTe(e,t,r){return(t=ITe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ITe(e){var t=RTe(e,"string");return typeof t=="symbol"?t:t+""}function RTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LTe(e,t){return e??t}var GY=(e,t,r,n,s,a,i)=>{if(!(t==null||a==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,g)=>{var x,{dataDefinedOnItem:y,settings:v}=g,T=LTe(y,o),k=Array.isArray(T)?Aq(T,u,d):T,b=(x=v?.dataKey)!==null&&x!==void 0?x:n,E=v?.nameKey,N;if(n&&Array.isArray(k)&&!Array.isArray(k[0])&&i==="axis"?N=AV(k,n,s):N=a(k,t,l,E),Array.isArray(N))N.forEach(M=>{var j=KR(KR({},v),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});h.push(FI({tooltipEntrySettings:j,dataKey:M.dataKey,payload:M.payload,value:Wo(M.payload,M.dataKey),name:M.name}))});else{var P;h.push(FI({tooltipEntrySettings:v,dataKey:b,payload:N,value:Wo(N,b),name:(P=Wo(N,E))!==null&&P!==void 0?P:v?.name}))}return h},f)}},RN=Ft([Ni,Ms,eY,wN,oi],SY),BTe=Ft([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),$Te=Ft([oi,j1],tY),z2=Ft([BTe,Ni,$Te],nY),zTe=Ft([z2],e=>e.filter(CN)),UTe=Ft([z2],oY),D1=Ft([UTe,ih],lY),WTe=Ft([zTe,ih,Ni],JK),LN=Ft([D1,Ni,z2],cY),HTe=Ft([Ni],AN),GTe=Ft([z2],e=>e.filter(CN)),VTe=Ft([WTe,GTe,I3],dY),qTe=Ft([VTe,ih,oi],fY),KTe=Ft([z2],aY),YTe=Ft([D1,Ni,KTe,z3,oi],hY),XTe=Ft([gY,oi,j1],P1),JTe=Ft([XTe,oi],yY),QTe=Ft([pY,oi,j1],P1),ZTe=Ft([QTe,oi],vY),e7e=Ft([xY,oi,j1],P1),t7e=Ft([e7e,oi],wY),r7e=Ft([JTe,t7e,ZTe],y_),n7e=Ft([Ni,HTe,qTe,YTe,r7e,Ms,oi],bY),VY=Ft([Ni,Ms,D1,LN,I3,oi,n7e],_Y),s7e=Ft([VY,Ni,RN],kY),a7e=Ft([Ni,VY,s7e,oi],TY),qY=e=>{var t=oi(e),r=j1(e),n=!1;return B2(e,t,r,n)},KY=Ft([Ni,qY],R3),YY=Ft([Ni,RN,a7e,KY],PN),i7e=Ft([Ms,LN,Ni,oi],jY),o7e=Ft([Ms,LN,Ni,oi],PY),l7e=(e,t,r,n,s,a,i,o)=>{if(t){var{type:l}=t,u=nh(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=l==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&s!=null&&s?.length>=2?gc(s[0]-s[1])*2*f:f,u&&i?i.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:a?a[h]:h,index:g,offset:f}))}}},E0=Ft([Ms,Ni,RN,YY,qY,i7e,o7e,oi],l7e),BN=Ft([OY,IY,_Te],(e,t,r)=>RY(r.shared,e,t)),XY=e=>e.tooltip.settings.trigger,$N=e=>e.tooltip.settings.defaultIndex,H3=Ft([F1,BN,XY,$N],UY),Yv=Ft([H3,D1],IN),JY=Ft([E0,Yv],LY),c7e=Ft([H3],e=>{if(e)return e.dataKey}),QY=Ft([F1,BN,XY,$N],HY),u7e=Ft([_0,S0,Ms,Zi,E0,$N,QY,$2],WY),d7e=Ft([H3,u7e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),f7e=Ft([H3],e=>e.active),h7e=Ft([QY,Yv,ih,XK,JY,$2,BN],GY),m7e=Ft([h7e],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function YR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function XR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(r),!0).forEach(function(n){g7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g7e(e,t,r){return(t=p7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p7e(e){var t=x7e(e,"string");return typeof t=="symbol"?t:t+""}function x7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y7e=()=>Kr(Ni),v7e=()=>{var e=y7e(),t=Kr(E0),r=Kr(YY);return fT(XR(XR({},e),{},{scale:r}),t)},w7e=()=>Kr(wN),zN=(e,t)=>t,ZY=(e,t,r)=>r,UN=(e,t,r,n)=>n,b7e=Ft(E0,e=>v3(e,t=>t.coordinate)),WN=Ft([F1,zN,ZY,UN],UY),eX=Ft([WN,D1],IN),_7e=(e,t,r)=>{if(t!=null){var n=F1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},tX=Ft([F1,zN,ZY,UN],HY),v_=Ft([_0,S0,Ms,Zi,E0,UN,tX,$2],WY),S7e=Ft([WN,v_],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),rX=Ft(E0,eX,LY),k7e=Ft([tX,eX,ih,XK,rX,$2,zN],GY),T7e=Ft([WN],e=>({isActive:e.active,activeIndex:e.index})),C7e=(e,t,r,n,s,a,i,o)=>{if(!(!e||!t||!n||!s||!a)){var l=Y3e(e.chartX,e.chartY,t,r,o);if(l){var u=J3e(l,t),d=B3e(u,i,a,n,s),f=X3e(t,a,d,l);return{activeIndex:String(d),activeCoordinate:f}}}};function PT(){return PT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PT.apply(null,arguments)}function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ib(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(n){E7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E7e(e,t,r){return(t=N7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N7e(e){var t=A7e(e,"string");return typeof t=="symbol"?t:t+""}function A7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j7e(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:a,layout:i,cursor:o,tooltipEventType:l,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&l!=="axis")return null;var g,x;if(u==="ScatterChart")g=d,x=USe;else if(u==="BarChart")g=WSe(i,d,s,a),x=w5e;else if(i==="radial"){var{cx:y,cy:v,radius:T,startAngle:k,endAngle:b}=Vq(d);g={cx:y,cy:v,startAngle:k,endAngle:b,innerRadius:T,outerRadius:T},x=k5e}else g={points:T5e(i,d,s)},x=$q;var E=typeof o=="object"&&"className"in o?o.className:void 0,N=Ib(Ib(Ib(Ib({stroke:"#ccc",pointerEvents:"none"},s),g),Qi(o,!1)),{},{payload:f,payloadIndex:h,className:js("recharts-tooltip-cursor",E)});return _.isValidElement(o)?_.cloneElement(o,N):_.createElement(x,N)}function P7e(e){var t=v7e(),r=Oq(),n=qE(),s=w7e();return _.createElement(j7e,PT({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var nX=_.createContext(null),M7e=()=>_.useContext(nX),lk={exports:{}},QR;function F7e(){return QR||(QR=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,f||l,h),x=r?r+u:u;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],g]:l._events[x].push(g):(l._events[x]=g,l._eventsCount++),l}function i(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,x=new Array(g);h<g;h++)x[h]=f[h].fn;return x},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,g,x){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],T=arguments.length,k,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),T){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,g),!0;case 6:return v.fn.call(v.context,d,f,h,g,x),!0}for(b=1,k=new Array(T-1);b<T;b++)k[b-1]=arguments[b];v.fn.apply(v.context,k)}else{var E=v.length,N;for(b=0;b<E;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),T){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,h);break;default:if(!k)for(N=1,k=new Array(T-1);N<T;N++)k[N-1]=arguments[N];v[b].fn.apply(v[b].context,k)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return i(this,g),this;var x=this._events[g];if(x.fn)x.fn===d&&(!h||x.once)&&(!f||x.context===f)&&i(this,g);else{for(var y=0,v=[],T=x.length;y<T;y++)(x[y].fn!==d||h&&!x[y].once||f&&x[y].context!==f)&&v.push(x[y]);v.length?this._events[g]=v.length===1?v[0]:v:i(this,g)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(lk)),lk.exports}var D7e=F7e();const O7e=Ec(D7e);var Xv=new O7e,MT="recharts.syncEvent.tooltip",ZR="recharts.syncEvent.brush";function I7e(e,t){if(t){var r=Number.parseInt(t,10);if(!kc(r))return e?.[r]}}var R7e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},sX=Ul({name:"options",initialState:R7e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),L7e=sX.reducer,{createEventEmitter:B7e}=sX.actions;function $7e(e){return e.tooltip.syncInteraction}var z7e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},aX=Ul({name:"chartData",initialState:z7e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:eL,setDataStartEndIndexes:U7e,setComputedData:_je}=aX.actions,W7e=aX.reducer,H7e=["x","y"];function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tL(Object(r),!0).forEach(function(n){G7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G7e(e,t,r){return(t=V7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V7e(e){var t=q7e(e,"string");return typeof t=="symbol"?t:t+""}function q7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K7e(e,t){if(e==null)return{};var r,n,s=Y7e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Y7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iX=()=>{};function X7e(){var e=Kr(bN),t=Kr(_N),r=Vo(),n=Kr(WK),s=Kr(E0),a=qE(),i=VE(),o=Kr(l=>l.rootProps.className);_.useEffect(()=>{if(e==null)return iX;var l=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate){var g=d.payload.coordinate,{x,y}=g,v=K7e(g,H7e),T=Uh(Uh(Uh({},v),typeof x=="number"&&{x:Math.max(i.x,Math.min(x,i.x+i.width))}),typeof y=="number"&&{y:Math.max(i.y,Math.min(y,i.y+i.height))}),k=Uh(Uh({},d),{},{payload:Uh(Uh({},d.payload),{},{coordinate:T})});r(k)}else r(d);return}if(s!=null){var b;if(typeof n=="function"){var E={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},N=n(s,E);b=s[N]}else n==="value"&&(b=s.find(X=>String(X.value)===d.payload.label));var{coordinate:P}=d.payload;if(b==null||d.payload.active===!1||P==null||i==null){r(AT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:M,y:j}=P,A=Math.min(M,i.x+i.width),D=Math.min(j,i.y+i.height),L={x:a==="horizontal"?b.coordinate:A,y:a==="horizontal"?D:b.coordinate},G=AT({active:d.payload.active,coordinate:L,dataKey:d.payload.dataKey,index:String(b.index),label:d.payload.label});r(G)}}};return Xv.on(MT,l),()=>{Xv.off(MT,l)}},[o,r,t,e,n,s,a,i])}function J7e(){var e=Kr(bN),t=Kr(_N),r=Vo();_.useEffect(()=>{if(e==null)return iX;var n=(s,a,i)=>{t!==i&&e===s&&r(U7e(a))};return Xv.on(ZR,n),()=>{Xv.off(ZR,n)}},[r,t,e])}function Q7e(){var e=Vo();_.useEffect(()=>{e(B7e())},[e]),X7e(),J7e()}function Z7e(e,t,r,n,s,a){var i=Kr(h=>_7e(h,e,t)),o=Kr(_N),l=Kr(bN),u=Kr(WK),d=Kr($7e),f=d?.active;_.useEffect(()=>{if(!f&&l!=null&&o!=null){var h=AT({active:a,coordinate:r,dataKey:i,index:s,label:typeof n=="number"?String(n):n});Xv.emit(MT,l,h,o)}},[f,r,i,s,n,o,l,u,a])}function rL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rL(Object(r),!0).forEach(function(n){eCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eCe(e,t,r){return(t=tCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tCe(e){var t=rCe(e,"string");return typeof t=="symbol"?t:t+""}function rCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nCe(e){return e.dataKey}function sCe(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(wSe,t)}var sL=[],aCe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!C1.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function iCe(e){var t=jc(e,aCe),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:a,content:i,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:g,wrapperStyle:x,cursor:y,shared:v,trigger:T,defaultIndex:k,portal:b,axisId:E}=t,N=Vo(),P=typeof k=="number"?String(k):k;_.useEffect(()=>{N(CTe({shared:v,trigger:T,axisId:E,active:r,defaultIndex:P}))},[N,v,T,E,r,P]);var M=VE(),j=Bq(),A=bTe(v),{activeIndex:D,isActive:L}=Kr(ee=>T7e(ee,A,T,P)),G=Kr(ee=>k7e(ee,A,T,P)),X=Kr(ee=>rX(ee,A,T,P)),se=Kr(ee=>S7e(ee,A,T,P)),Q=G,re=M7e(),B=r??L,[V,R]=N_e([Q,B]),H=A==="axis"?X:void 0;Z7e(A,T,se,H,D,B);var z=b??re;if(z==null)return null;var I=Q??sL;B||(I=sL),o&&I.length&&(I=e_e(Q.filter(ee=>ee.value!=null&&(ee.hide!==!0||t.includeHidden)),d,nCe));var W=I.length>0,K=_.createElement(ESe,{allowEscapeViewBox:n,animationDuration:s,animationEasing:a,isAnimationActive:l,active:B,coordinate:se,hasPayload:W,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:M,wrapperStyle:x,lastBoundingBox:V,innerRef:R,hasPortalFromProps:!!b},sCe(i,nL(nL({},t),{},{payload:I,label:H,active:B,coordinate:se,accessibilityLayer:j})));return _.createElement(_.Fragment,null,Sk.createPortal(K,z),B&&_.createElement(P7e,{cursor:y,tooltipEventType:A,coordinate:se,payload:Q,index:D}))}var ck={},uk={},dk={},aL;function oCe(){return aL||(aL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let i,o=null;const l=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),y()};let h=null;const g=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},x=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{x(),i=void 0,o=null},v=()=>{d()},T=function(...k){if(s?.aborted)return;i=this,o=k;const b=h==null;g(),l&&b&&d()};return T.schedule=g,T.cancel=y,T.flush=v,s?.addEventListener("abort",y,{once:!0}),T}e.debounce=t})(dk)),dk}var iL;function lCe(){return iL||(iL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oCe();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:i=!1,trailing:o=!0,maxWait:l}=a,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=n.apply(this,y),f=null},s,{edges:u}),g=function(...y){return l!=null&&(f===null&&(f=Date.now()),Date.now()-f>=l)?(d=n.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},x=()=>(h.flush(),d);return g.cancel=h.cancel,g.flush=x,g}e.debounce=r})(uk)),uk}var oL;function cCe(){return oL||(oL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lCe();function r(n,s=0,a={}){const{leading:i=!0,trailing:o=!0}=a;return t.debounce(n,s,{leading:i,maxWait:s,trailing:o})}e.throttle=r})(ck)),ck}var fk,lL;function uCe(){return lL||(lL=1,fk=cCe().throttle),fk}var dCe=uCe();const fCe=Ec(dCe);var nv=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]};function cL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cL(Object(r),!0).forEach(function(n){hCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hCe(e,t,r){return(t=mCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mCe(e){var t=gCe(e,"string");return typeof t=="symbol"?t:t+""}function gCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pCe=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:a="100%",minWidth:i=0,minHeight:o,maxHeight:l,children:u,debounce:d=0,id:f,className:h,onResize:g,style:x={}}=e,y=_.useRef(null),v=_.useRef();v.current=g,_.useImperativeHandle(t,()=>y.current);var[T,k]=_.useState({containerWidth:n.width,containerHeight:n.height}),b=_.useCallback((N,P)=>{k(M=>{var j=Math.round(N),A=Math.round(P);return M.containerWidth===j&&M.containerHeight===A?M:{containerWidth:j,containerHeight:A}})},[]);_.useEffect(()=>{var N=A=>{var D,{width:L,height:G}=A[0].contentRect;b(L,G),(D=v.current)===null||D===void 0||D.call(v,L,G)};d>0&&(N=fCe(N,d,{trailing:!0,leading:!1}));var P=new ResizeObserver(N),{width:M,height:j}=y.current.getBoundingClientRect();return b(M,j),P.observe(y.current),()=>{P.disconnect()}},[b,d]);var E=_.useMemo(()=>{var{containerWidth:N,containerHeight:P}=T;if(N<0||P<0)return null;nv(em(s)||em(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,a),nv(!r||r>0,"The aspect(%s) must be greater than zero.",r);var M=em(s)?N:s,j=em(a)?P:a;return r&&r>0&&(M?j=M/r:j&&(M=j*r),l&&j>l&&(j=l)),nv(M>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,j,s,a,i,o,r),_.Children.map(u,A=>_.cloneElement(A,{width:M,height:j,style:hk({width:M,height:j},A.props.style)}))},[r,u,a,l,o,i,T,s]);return _.createElement("div",{id:f?"".concat(f):void 0,className:js("recharts-responsive-container",h),style:hk(hk({},x),{},{width:s,height:a,minWidth:i,minHeight:o,maxHeight:l}),ref:y},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},E))});function xCe(e,t,r){return(t=yCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yCe(e){var t=vCe(e,"string");return typeof t=="symbol"?t:t+""}function vCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wCe{constructor(t){xCe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function uL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bCe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uL(Object(r),!0).forEach(function(n){_Ce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ce(e,t,r){return(t=SCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SCe(e){var t=kCe(e,"string");return typeof t=="symbol"?t:t+""}function kCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TCe={cacheSize:2e3,enableCache:!0},oX=bCe({},TCe),dL=new wCe(oX.cacheSize),CCe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},fL="recharts_measurement_span";function ECe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(i,"|").concat(o)}var hL=(e,t)=>{try{var r=document.getElementById(fL);r||(r=document.createElement("span"),r.setAttribute("id",fL),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,CCe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},sv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||C1.isSsr)return{width:0,height:0};if(!oX.enableCache)return hL(t,r);var n=ECe(t,r),s=dL.get(n);if(s)return s;var a=hL(t,r);return dL.set(n,a),a},mL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,NCe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ACe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},jCe=Object.keys(lX),bp="NaN";function PCe(e,t){return e*lX[t]}class sl{static parse(t){var r,[,n,s]=(r=ACe.exec(t))!==null&&r!==void 0?r:[];return new sl(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,kc(t)&&(this.unit=""),r!==""&&!NCe.test(r)&&(this.num=NaN,this.unit=""),jCe.includes(r)&&(this.num=PCe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return kc(this.num)}}function cX(e){if(e.includes(bp))return bp;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=mL.exec(t))!==null&&r!==void 0?r:[],i=sl.parse(n??""),o=sl.parse(a??""),l=s==="*"?i.multiply(o):i.divide(o);if(l.isNaN())return bp;t=t.replace(mL,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=gL.exec(t))!==null&&u!==void 0?u:[],g=sl.parse(d??""),x=sl.parse(h??""),y=f==="+"?g.add(x):g.subtract(x);if(y.isNaN())return bp;t=t.replace(gL,y.toString())}return t}var pL=/\(([^()]*)\)/;function MCe(e){for(var t=e,r;(r=pL.exec(t))!=null;){var[,n]=r;t=t.replace(pL,cX(n))}return t}function FCe(e){var t=e.replace(/\s+/g,"");return t=MCe(t),t=cX(t),t}function DCe(e){try{return FCe(e)}catch{return bp}}function mk(e){var t=DCe(e.slice(5,-1));return t===bp?"":t}var OCe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],ICe=["dx","dy","angle","className","breakAll"];function FT(){return FT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FT.apply(null,arguments)}function xL(e,t){if(e==null)return{};var r,n,s=RCe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uX=/[ \f\n\r\t\v\u2028\u2029]+/,dX=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Ti(t)||(r?s=t.toString().split(""):s=t.toString().split(uX));var a=s.map(o=>({word:o,width:sv(o,n).width})),i=r?0:sv("",n).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},LCe=(e,t,r,n,s)=>{var{maxLines:a,children:i,style:o,breakAll:l}=e,u=an(a),d=i,f=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce((G,X)=>{var{word:se,width:Q}=X,re=G[G.length-1];if(re&&(n==null||s||re.width+Q+r<Number(n)))re.words.push(se),re.width+=Q+r;else{var B={words:[se],width:Q};G.push(B)}return G},[])},h=f(t),g=D=>D.reduce((L,G)=>L.width>G.width?L:G);if(!u||s)return h;var x=h.length>a||g(h).width>Number(n);if(!x)return h;for(var y="",v=D=>{var L=d.slice(0,D),G=dX({breakAll:l,style:o,children:L+y}).wordsWithComputedWidth,X=f(G),se=X.length>a||g(X).width>Number(n);return[se,X]},T=0,k=d.length-1,b=0,E;T<=k&&b<=d.length-1;){var N=Math.floor((T+k)/2),P=N-1,[M,j]=v(P),[A]=v(N);if(!M&&!A&&(T=N+1),M&&A&&(k=N-1),!M&&A){E=j;break}b++}return E||h},yL=e=>{var t=Ti(e)?[]:e.toString().split(uX);return[{words:t}]},BCe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:i}=e;if((t||r)&&!C1.isSsr){var o,l,u=dX({breakAll:a,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,l=f}else return yL(n);return LCe({breakAll:a,children:n,maxLines:i,style:s},o,l,t,r)}return yL(n)},vL="#808080",HN=_.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:a="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=vL}=e,d=xL(e,OCe),f=_.useMemo(()=>BCe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:g,angle:x,className:y,breakAll:v}=d,T=xL(d,ICe);if(!Qu(r)||!Qu(n)||f.length===0)return null;var k=r+(an(h)?h:0),b=n+(an(g)?g:0),E;switch(l){case"start":E=mk("calc(".concat(a,")"));break;case"middle":E=mk("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:E=mk("calc(".concat(f.length-1," * -").concat(s,")"));break}var N=[];if(i){var P=f[0].width,{width:M}=d;N.push("scale(".concat(an(M)?M/P:1,")"))}return x&&N.push("rotate(".concat(x,", ").concat(k,", ").concat(b,")")),N.length&&(T.transform=N.join(" ")),_.createElement("text",FT({},Qi(T,!0),{ref:t,x:k,y:b,className:js("recharts-text",y),textAnchor:o,fill:u.includes("url")?vL:u}),f.map((j,A)=>{var D=j.words.join(v?"":" ");return _.createElement("tspan",{x:k,dy:A===0?E:s,key:"".concat(D,"-").concat(A)},D)}))});HN.displayName="Text";var $Ce=["labelRef"];function zCe(e,t){if(e==null)return{};var r,n,s=UCe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wL(Object(r),!0).forEach(function(n){WCe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WCe(e,t,r){return(t=HCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HCe(e){var t=GCe(e,"string");return typeof t=="symbol"?t:t+""}function GCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gd(){return Gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gd.apply(null,arguments)}var fX=_.createContext(null),VCe=e=>{var{x:t,y:r,width:n,height:s,children:a}=e,i=_.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return _.createElement(fX.Provider,{value:i},a)},hX=()=>{var e=_.useContext(fX),t=VE();return e||t},qCe=_.createContext(null),KCe=()=>{var e=_.useContext(qCe),t=Kr(KK);return e||t},YCe=e=>{var{value:t,formatter:r}=e,n=Ti(e.children)?t:e.children;return typeof r=="function"?r(n):n},GN=e=>e!=null&&typeof e=="function",XCe=(e,t)=>{var r=gc(t-e),n=Math.min(Math.abs(t-e),360);return r*n},JCe=(e,t,r,n,s)=>{var{offset:a,className:i}=e,{cx:o,cy:l,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:g}=s,x=(u+d)/2,y=XCe(f,h),v=y>=0?1:-1,T,k;switch(t){case"insideStart":T=f+v*a,k=g;break;case"insideEnd":T=h-v*a,k=!g;break;case"end":T=h+v*a,k=g;break;default:throw new Error("Unsupported position ".concat(t))}k=y<=0?k:!k;var b=Yi(o,l,x,T),E=Yi(o,l,x,T+(k?1:-1)*359),N="M".concat(b.x,",").concat(b.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(E.x,",").concat(E.y),P=Ti(e.id)?$v("recharts-radial-line-"):e.id;return _.createElement("text",Gd({},n,{dominantBaseline:"central",className:js("recharts-radial-bar-label",i)}),_.createElement("defs",null,_.createElement("path",{id:P,d:N})),_.createElement("textPath",{xlinkHref:"#".concat(P)},r))},QCe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:o,endAngle:l}=e,u=(o+l)/2;if(r==="outside"){var{x:d,y:f}=Yi(n,s,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=(a+i)/2,{x:g,y:x}=Yi(n,s,h,u);return{x:g,y:x,textAnchor:"middle",verticalAnchor:"middle"}},mX=e=>"cx"in e&&an(e.cx),ZCe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!mX(r)&&(a=r);var{x:i,y:o,width:l,height:u}=t,d=u>=0?1:-1,f=d*n,h=d>0?"end":"start",g=d>0?"start":"end",x=l>=0?1:-1,y=x*n,v=x>0?"end":"start",T=x>0?"start":"end";if(s==="top"){var k={x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h};return ka(ka({},k),a?{height:Math.max(o-a.y,0),width:l}:{})}if(s==="bottom"){var b={x:i+l/2,y:o+u+f,textAnchor:"middle",verticalAnchor:g};return ka(ka({},b),a?{height:Math.max(a.y+a.height-(o+u),0),width:l}:{})}if(s==="left"){var E={x:i-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"};return ka(ka({},E),a?{width:Math.max(E.x-a.x,0),height:u}:{})}if(s==="right"){var N={x:i+l+y,y:o+u/2,textAnchor:T,verticalAnchor:"middle"};return ka(ka({},N),a?{width:Math.max(a.x+a.width-N.x,0),height:u}:{})}var P=a?{width:l,height:u}:{};return s==="insideLeft"?ka({x:i+y,y:o+u/2,textAnchor:T,verticalAnchor:"middle"},P):s==="insideRight"?ka({x:i+l-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"},P):s==="insideTop"?ka({x:i+l/2,y:o+f,textAnchor:"middle",verticalAnchor:g},P):s==="insideBottom"?ka({x:i+l/2,y:o+u-f,textAnchor:"middle",verticalAnchor:h},P):s==="insideTopLeft"?ka({x:i+y,y:o+f,textAnchor:T,verticalAnchor:g},P):s==="insideTopRight"?ka({x:i+l-y,y:o+f,textAnchor:v,verticalAnchor:g},P):s==="insideBottomLeft"?ka({x:i+y,y:o+u-f,textAnchor:T,verticalAnchor:h},P):s==="insideBottomRight"?ka({x:i+l-y,y:o+u-f,textAnchor:v,verticalAnchor:h},P):s&&typeof s=="object"&&(an(s.x)||em(s.x))&&(an(s.y)||em(s.y))?ka({x:i+Gf(s.x,l),y:o+Gf(s.y,u),textAnchor:"end",verticalAnchor:"end"},P):ka({x:i+l/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},P)},eEe={offset:5};function vf(e){var t=jc(e,eEe),{viewBox:r,position:n,value:s,children:a,content:i,className:o="",textBreakAll:l,labelRef:u}=t,d=KCe(),f=hX(),h=n==="center"?f:d??f,g=r||h;if(!g||Ti(s)&&Ti(a)&&!_.isValidElement(i)&&typeof i!="function")return null;var x=ka(ka({},t),{},{viewBox:g});if(_.isValidElement(i)){var{labelRef:y}=x,v=zCe(x,$Ce);return _.cloneElement(i,v)}var T;if(typeof i=="function"){if(T=_.createElement(i,x),_.isValidElement(T))return T}else T=YCe(t);var k=mX(g),b=Qi(t,!0);if(k&&(n==="insideStart"||n==="insideEnd"||n==="end"))return JCe(t,n,T,b,g);var E=k?QCe(g,t.offset,t.position):ZCe(t,g);return _.createElement(HN,Gd({ref:u,className:js("recharts-label",o)},b,E,{breakAll:l}),T)}vf.displayName="Label";var tEe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?_.createElement(vf,Gd({key:"label-implicit"},n)):Qu(e)?_.createElement(vf,Gd({key:"label-implicit",value:e},n)):_.isValidElement(e)?e.type===vf?_.cloneElement(e,ka({key:"label-implicit"},n)):_.createElement(vf,Gd({key:"label-implicit",content:e},n)):GN(e)?_.createElement(vf,Gd({key:"label-implicit",content:e},n)):e&&typeof e=="object"?_.createElement(vf,Gd({},e,{key:"label-implicit"},n)):null};function rEe(e){var{label:t}=e,r=hX();return tEe(t,r)||null}var gk={},pk={},bL;function nEe(){return bL||(bL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(pk)),pk}var xk={},_L;function sEe(){return _L||(_L=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(xk)),xk}var SL;function aEe(){return SL||(SL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nEe(),r=sEe(),n=LE();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(gk)),gk}var yk,kL;function iEe(){return kL||(kL=1,yk=aEe().last),yk}var oEe=iEe();const lEe=Ec(oEe);var cEe=["valueAccessor"],uEe=["dataKey","clockWise","id","textBreakAll"];function w_(){return w_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w_.apply(null,arguments)}function TL(e,t){if(e==null)return{};var r,n,s=dEe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fEe=e=>Array.isArray(e.value)?lEe(e.value):e.value,gX=_.createContext(void 0),hEe=gX.Provider,pX=_.createContext(void 0);pX.Provider;function mEe(){return _.useContext(gX)}function gEe(){return _.useContext(pX)}function Jb(e){var{valueAccessor:t=fEe}=e,r=TL(e,cEe),{dataKey:n,clockWise:s,id:a,textBreakAll:i}=r,o=TL(r,uEe),l=mEe(),u=gEe(),d=l||u;return!d||!d.length?null:_.createElement(T1,{className:"recharts-label-list"},d.map((f,h)=>{var g,x=Ti(n)?t(f,h):Wo(f&&f.payload,n),y=Ti(a)?{}:{id:"".concat(a,"-").concat(h)};return _.createElement(vf,w_({},Qi(f,!0),o,y,{fill:(g=r.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:x,textBreakAll:i,viewBox:f.viewBox,key:"label-".concat(h),index:h}))}))}Jb.displayName="LabelList";function pEe(e){var{label:t}=e;return t?t===!0?_.createElement(Jb,{key:"labelList-implicit"}):_.isValidElement(t)||GN(t)?_.createElement(Jb,{key:"labelList-implicit",content:t}):typeof t=="object"?_.createElement(Jb,w_({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function DT(){return DT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},DT.apply(null,arguments)}var xX=e=>{var{cx:t,cy:r,r:n,className:s}=e,a=js("recharts-dot",s);return t===+t&&r===+r&&n===+n?_.createElement("circle",DT({},tg(e),IE(e),{className:a,cx:t,cy:r,r:n})):null},xEe={radiusAxis:{},angleAxis:{}},yX=Ul({name:"polarAxis",initialState:xEe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Sje,removeRadiusAxis:kje,addAngleAxis:Tje,removeAngleAxis:Cje}=yX.actions,yEe=yX.reducer;function vEe(e){var{fn:t,args:r}=e,n=Vo(),s=Ac();return _.useEffect(()=>{if(!s){var a=t(r);return n(kTe(a)),()=>{n(TTe(a))}}},[t,r,n,s]),null}var wEe=()=>{};function bEe(e){var{legendPayload:t}=e,r=Vo(),n=Ac();return _.useEffect(()=>n?wEe:(r(hSe(t)),()=>{r(mSe(t))}),[r,n,t]),null}var vk,_Ee=()=>{var[e]=_.useState(()=>$v("uid-"));return e},SEe=(vk=GL.useId)!==null&&vk!==void 0?vk:_Ee;function kEe(e,t){var r=SEe();return t||(e?"".concat(e,"-").concat(r):r)}var TEe=_.createContext(void 0),CEe=e=>{var{id:t,type:r,children:n}=e,s=kEe("recharts-".concat(r),t);return _.createElement(TEe.Provider,{value:s},n(s))},EEe={cartesianItems:[],polarItems:[]},vX=Ul({name:"graphicalItems",initialState:EEe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=r0(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=r0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=r0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:NEe,replaceCartesianGraphicalItem:AEe,removeCartesianGraphicalItem:jEe,addPolarGraphicalItem:Eje,removePolarGraphicalItem:Nje}=vX.actions,PEe=vX.reducer;function MEe(e){var t=Vo(),r=_.useRef(null);return _.useEffect(()=>{r.current===null?t(NEe(e)):r.current!==e&&t(AEe({prev:r.current,next:e})),r.current=e},[t,e]),_.useEffect(()=>()=>{r.current&&(t(jEe(r.current)),r.current=null)},[t]),null}function CL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function EL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CL(Object(r),!0).forEach(function(n){FEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FEe(e,t,r){return(t=DEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DEe(e){var t=OEe(e,"string");return typeof t=="symbol"?t:t+""}function OEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IEe={xAxis:{},yAxis:{},zAxis:{}},wX=Ul({name:"cartesianAxis",initialState:IEe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=EL(EL({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:REe,removeXAxis:LEe,addYAxis:BEe,removeYAxis:$Ee,addZAxis:Aje,removeZAxis:jje,updateYAxisWidth:zEe}=wX.actions,UEe=wX.reducer,WEe=Ft([Zi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),HEe=Ft([WEe,_0,S0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),VN=()=>Kr(HEe),GEe=()=>Kr(m7e);function NL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function AL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NL(Object(r),!0).forEach(function(n){VEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VEe(e,t,r){return(t=qEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qEe(e){var t=KEe(e,"string");return typeof t=="symbol"?t:t+""}function KEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YEe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:a}=e;if(s===!1||t.x==null||t.y==null)return null;var i=AL(AL({index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Qi(s,!1)),IE(s)),o;return _.isValidElement(s)?o=_.cloneElement(s,i):typeof s=="function"?o=s(i):o=_.createElement(xX,i),_.createElement(T1,{className:"recharts-active-dot"},o)};function XEe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,a=Kr(Yv),i=GEe();if(t==null||i==null)return null;var o=t.find(l=>i.includes(l.payload));return Ti(o)?null:YEe({point:o,childIndex:Number(a),mainColor:r,dataKey:s,activeDot:n})}var JEe={},bX=Ul({name:"errorBars",initialState:JEe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Pje,replaceErrorBar:Mje,removeErrorBar:Fje}=bX.actions,QEe=bX.reducer,ZEe=["children"];function eNe(e,t){if(e==null)return{};var r,n,s=tNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rNe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},nNe=_.createContext(rNe);function sNe(e){var{children:t}=e,r=eNe(e,ZEe);return _.createElement(nNe.Provider,{value:r},t)}function _X(e,t){var r,n,s=Kr(u=>T0(u,e)),a=Kr(u=>C0(u,t)),i=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:kl.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Tl.allowDataOverflow,l=i||o;return{needClip:l,needClipX:i,needClipY:o}}function aNe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=VN(),{needClipX:a,needClipY:i,needClip:o}=_X(t,r);if(!o)return null;var{x:l,y:u,width:d,height:f}=s;return _.createElement("clipPath",{id:"clipPath-".concat(n)},_.createElement("rect",{x:a?l:l-d/2,y:i?u:u-f/2,width:a?d:d*2,height:i?f:f*2}))}var iNe=e=>{var{chartData:t}=e,r=Vo(),n=Ac();return _.useEffect(()=>n?()=>{}:(r(eL(t)),()=>{r(eL(void 0))}),[t,r,n]),null},jL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},SX=Ul({name:"brush",initialState:jL,reducers:{setBrushSettings(e,t){return t.payload==null?jL:t.payload}}}),{setBrushSettings:Dje}=SX.actions,oNe=SX.reducer;function lNe(e,t,r){return(t=cNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cNe(e){var t=uNe(e,"string");return typeof t=="symbol"?t:t+""}function uNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class qN{static create(t){return new qN(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}lNe(qN,"EPS",1e-4);function dNe(e){return(e%180+180)%180}var fNe=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=dNe(s),i=a*Math.PI/180,o=Math.atan(n/r),l=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(l)},hNe={dots:[],areas:[],lines:[]},kX=Ul({name:"referenceElements",initialState:hNe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=r0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=r0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=r0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Oje,removeDot:Ije,addArea:Rje,removeArea:Lje,addLine:Bje,removeLine:$je}=kX.actions,mNe=kX.reducer,gNe=_.createContext(void 0),pNe=e=>{var{children:t}=e,[r]=_.useState("".concat($v("recharts"),"-clip")),n=VN();if(n==null)return null;var{x:s,y:a,width:i,height:o}=n;return _.createElement(gNe.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:s,y:a,height:o,width:i}))),t)};function t1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function TX(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function xNe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return fNe(n,r)}function yNe(e,t,r){var n=r==="width",{x:s,y:a,width:i,height:o}=e;return t===1?{start:n?s:a,end:n?s+i:a+o}:{start:n?s+i:a+o,end:n?s:a}}function b_(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function vNe(e,t){return TX(e,t+1)}function wNe(e,t,r,n,s){for(var a=(n||[]).slice(),{start:i,end:o}=t,l=0,u=1,d=i,f=function(){var x=n?.[l];if(x===void 0)return{v:TX(n,u)};var y=l,v,T=()=>(v===void 0&&(v=r(x,y)),v),k=x.coordinate,b=l===0||b_(e,k,T,d,o);b||(l=0,d=i,u+=1),b&&(d=k+e*(T()/2+s),l+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function PL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(r),!0).forEach(function(n){bNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bNe(e,t,r){return(t=_Ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ne(e){var t=SNe(e,"string");return typeof t=="symbol"?t:t+""}function SNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kNe(e,t,r,n,s){for(var a=(n||[]).slice(),i=a.length,{start:o}=t,{end:l}=t,u=function(h){var g=a[h],x,y=()=>(x===void 0&&(x=r(g,h)),x);if(h===i-1){var v=e*(g.coordinate+e*y()/2-l);a[h]=g=lo(lo({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else a[h]=g=lo(lo({},g),{},{tickCoord:g.coordinate});var T=b_(e,g.tickCoord,y,o,l);T&&(l=g.tickCoord-e*(y()/2+s),a[h]=lo(lo({},g),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return a}function TNe(e,t,r,n,s,a){var i=(n||[]).slice(),o=i.length,{start:l,end:u}=t;if(a){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=lo(lo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var g=b_(e,d.tickCoord,()=>f,l,u);g&&(u=d.tickCoord-e*(f/2+s),i[o-1]=lo(lo({},d),{},{isShow:!0}))}for(var x=a?o-1:o,y=function(k){var b=i[k],E,N=()=>(E===void 0&&(E=r(b,k)),E);if(k===0){var P=e*(b.coordinate-e*N()/2-l);i[k]=b=lo(lo({},b),{},{tickCoord:P<0?b.coordinate-P*e:b.coordinate})}else i[k]=b=lo(lo({},b),{},{tickCoord:b.coordinate});var M=b_(e,b.tickCoord,N,l,u);M&&(l=b.tickCoord+e*(N()/2+s),i[k]=lo(lo({},b),{},{isShow:!0}))},v=0;v<x;v++)y(v);return i}function KN(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:i,orientation:o,interval:l,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(an(l)||C1.isSsr){var h;return(h=vNe(s,an(l)?l:0))!==null&&h!==void 0?h:[]}var g=[],x=o==="top"||o==="bottom"?"width":"height",y=d&&x==="width"?sv(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(b,E)=>{var N=typeof u=="function"?u(b.value,E):b.value;return x==="width"?xNe(sv(N,{fontSize:t,letterSpacing:r}),y,f):sv(N,{fontSize:t,letterSpacing:r})[x]},T=s.length>=2?gc(s[1].coordinate-s[0].coordinate):1,k=yNe(a,T,x);return l==="equidistantPreserveStart"?wNe(T,k,v,s,i):(l==="preserveStart"||l==="preserveStartEnd"?g=TNe(T,k,v,s,i,l==="preserveStartEnd"):g=kNe(T,k,v,s,i),g.filter(b=>b.isShow))}var CNe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,l=s+a,u=i+l+o+(r?n:0);return Math.round(u)}return 0},ENe=["axisLine","width","height","className","hide","ticks"],NNe=["viewBox"],ANe=["viewBox"];function OT(e,t){if(e==null)return{};var r,n,s=jNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zm(){return zm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zm.apply(null,arguments)}function ML(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ja(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ML(Object(r),!0).forEach(function(n){PNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ML(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PNe(e,t,r){return(t=MNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MNe(e){var t=FNe(e,"string");return typeof t=="symbol"?t:t+""}function FNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YN={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function DNe(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:i,axisLine:o,otherSvgProps:l}=e;if(!o)return null;var u=Ja(Ja(Ja({},l),Qi(o,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!i||a==="bottom"&&i);u=Ja(Ja({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var f=+(a==="left"&&!i||a==="right"&&i);u=Ja(Ja({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+s})}return _.createElement("line",zm({},u,{className:js("recharts-cartesian-axis-line",p3(o,"className"))}))}function ONe(e,t,r,n,s,a,i,o,l){var u,d,f,h,g,x,y=o?-1:1,v=e.tickSize||i,T=an(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,h=r+ +!o*s,f=h-y*v,x=f-y*l,g=T;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-y*v,g=u-y*l,x=T;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+y*v,g=u+y*l,x=T;break;default:u=d=e.coordinate,h=r+ +o*s,f=h+y*v,x=f+y*l,g=T;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:g,y:x}}}function INe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function RNe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function LNe(e){var{option:t,tickProps:r,value:n}=e,s,a=js(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))s=_.cloneElement(t,Ja(Ja({},r),{},{className:a}));else if(typeof t=="function")s=t(Ja(Ja({},r),{},{className:a}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=js(i,t?.className)),s=_.createElement(HN,zm({},r,{className:i}),n)}return s}function BNe(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:a,unit:i,padding:o,tickTextProps:l,orientation:u,mirror:d,x:f,y:h,width:g,height:x,tickSize:y,tickMargin:v,fontSize:T,letterSpacing:k,getTicksConfig:b,events:E}=e,N=KN(Ja(Ja({},b),{},{ticks:t}),T,k),P=INe(u,d),M=RNe(u,d),j=tg(b),A=Qi(r,!1),D=Ja(Ja({},j),{},{fill:"none"},Qi(n,!1)),L=N.map((G,X)=>{var{line:se,tick:Q}=ONe(G,f,h,g,x,u,y,d,v),re=Ja(Ja(Ja(Ja({textAnchor:P,verticalAnchor:M},j),{},{stroke:"none",fill:s},A),Q),{},{index:X,payload:G,visibleTicksCount:N.length,tickFormatter:a,padding:o},l);return _.createElement(T1,zm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},s4e(E,G,X)),n&&_.createElement("line",zm({},D,se,{className:js("recharts-cartesian-axis-tick-line",p3(n,"className"))})),r&&_.createElement(LNe,{option:r,tickProps:re,value:"".concat(typeof a=="function"?a(G.value,X):G.value).concat(i||"")}))});return L.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},L):null}var $Ne=_.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:i,ticks:o}=e,l=OT(e,ENe),[u,d]=_.useState(""),[f,h]=_.useState(""),g=_.useRef([]);_.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return CNe({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=_.useCallback(y=>{if(y){var v=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=Array.from(v);var T=v[0];if(T){var k=window.getComputedStyle(T),b=k.fontSize,E=k.letterSpacing;(b!==u||E!==f)&&(d(b),h(E))}}},[u,f]);return i||n!=null&&n<=0||s!=null&&s<=0?null:_.createElement(T1,{className:js("recharts-cartesian-axis",a),ref:x},_.createElement(DNe,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:tg(e)}),_.createElement(BNe,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:u,letterSpacing:f,getTicksConfig:e,events:l}),_.createElement(VCe,{x:e.x,y:e.y,width:e.width,height:e.height},_.createElement(rEe,{label:e.label}),e.children))}),zNe=_.memo($Ne,(e,t)=>{var{viewBox:r}=e,n=OT(e,NNe),{viewBox:s}=t,a=OT(t,ANe);return t1(r,s)&&t1(n,a)}),XN=_.forwardRef((e,t)=>{var r=jc(e,YN);return _.createElement(zNe,zm({},r,{ref:t}))});XN.displayName="CartesianAxis";var UNe=["x1","y1","x2","y2","key"],WNe=["offset"],HNe=["xAxisId","yAxisId"],GNe=["xAxisId","yAxisId"];function FL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ho(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FL(Object(r),!0).forEach(function(n){VNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VNe(e,t,r){return(t=qNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qNe(e){var t=KNe(e,"string");return typeof t=="symbol"?t:t+""}function KNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nm.apply(null,arguments)}function __(e,t){if(e==null)return{};var r,n,s=YNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XNe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:a,height:i,ry:o}=e;return _.createElement("rect",{x:n,y:s,ry:o,width:a,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function CX(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:a,y2:i,key:o}=t,l=__(t,UNe),u=tg(l),{offset:d}=u,f=__(u,WNe);r=_.createElement("line",nm({},f,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:o}))}return r}function JNe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=__(e,HNe),l=s.map((u,d)=>{var f=ho(ho({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return CX(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function QNe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=__(e,GNe),l=s.map((u,d)=>{var f=ho(ho({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return CX(n,f)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function ZNe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:a,height:i,horizontalPoints:o,horizontal:l=!0}=e;if(!l||!t||!t.length)return null;var u=o.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],x=g?s+i-f:u[h+1]-f;if(x<=0)return null;var y=h%t.length;return _.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:x,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function e9e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:a,width:i,height:o,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],x=g?s+i-f:u[h+1]-f;if(x<=0)return null;var y=h%r.length;return _.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:x,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var t9e=(e,t)=>{var{xAxis:r,width:n,height:s,offset:a}=e;return jq(KN(ho(ho(ho({},YN),r),{},{ticks:Pq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},r9e=(e,t)=>{var{yAxis:r,width:n,height:s,offset:a}=e;return jq(KN(ho(ho(ho({},YN),r),{},{ticks:Pq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},n9e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function EX(e){var t=Iq(),r=Rq(),n=Oq(),s=ho(ho({},jc(e,n9e)),{},{x:an(e.x)?e.x:n.left,y:an(e.y)?e.y:n.top,width:an(e.width)?e.width:n.width,height:an(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:i,x:o,y:l,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:g}=s,x=Ac(),y=Kr(A=>GR(A,"xAxis",a,x)),v=Kr(A=>GR(A,"yAxis",i,x));if(!an(u)||u<=0||!an(d)||d<=0||!an(o)||o!==+o||!an(l)||l!==+l)return null;var T=s.verticalCoordinatesGenerator||t9e,k=s.horizontalCoordinatesGenerator||r9e,{horizontalPoints:b,verticalPoints:E}=s;if((!b||!b.length)&&typeof k=="function"){var N=h&&h.length,P=k({yAxis:v?ho(ho({},v),{},{ticks:N?h:v.ticks}):void 0,width:t,height:r,offset:n},N?!0:f);nv(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(b=P)}if((!E||!E.length)&&typeof T=="function"){var M=g&&g.length,j=T({xAxis:y?ho(ho({},y),{},{ticks:M?g:y.ticks}):void 0,width:t,height:r,offset:n},M?!0:f);nv(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(E=j)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(XNe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),_.createElement(ZNe,nm({},s,{horizontalPoints:b})),_.createElement(e9e,nm({},s,{verticalPoints:E})),_.createElement(JNe,nm({},s,{offset:n,horizontalPoints:b,xAxis:y,yAxis:v})),_.createElement(QNe,nm({},s,{offset:n,verticalPoints:E,xAxis:y,yAxis:v})))}EX.displayName="CartesianGrid";var NX=(e,t,r,n)=>DY(e,"xAxis",t,n),AX=(e,t,r,n)=>FY(e,"xAxis",t,n),jX=(e,t,r,n)=>DY(e,"yAxis",r,n),PX=(e,t,r,n)=>FY(e,"yAxis",r,n),s9e=Ft([Ms,NX,jX,AX,PX],(e,t,r,n,s)=>nh(e,"xAxis")?fT(t,n,!1):fT(r,s,!1)),a9e=(e,t,r,n,s)=>s;function i9e(e){return e.type==="line"}var o9e=Ft([rY,a9e],(e,t)=>e.filter(i9e).find(r=>r.id===t)),l9e=Ft([Ms,NX,jX,AX,PX,o9e,s9e,xN],(e,t,r,n,s,a,i,o)=>{var{chartData:l,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||i==null)){var{dataKey:f,data:h}=a,g;if(h!=null&&h.length>0?g=h:g=l?.slice(u,d+1),g!=null)return j9e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:i,displayedData:g})}}),c9e=["id"],u9e=["type","layout","connectNulls","needClip"],d9e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function DL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DL(Object(r),!0).forEach(function(n){f9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f9e(e,t,r){return(t=h9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h9e(e){var t=m9e(e,"string");return typeof t=="symbol"?t:t+""}function m9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JN(e,t){if(e==null)return{};var r,n,s=g9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function g9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Um(){return Um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Um.apply(null,arguments)}var p9e=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:Mq(r,t),payload:e}]};function x9e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:a,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:a,dataKey:t,nameKey:void 0,name:Mq(i,t),hide:o,type:e.tooltipType,color:e.stroke,unit:l}}}var MX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function y9e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var v9e=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return MX(t,e);for(var s=Math.floor(e/n),a=e%n,i=t-e,o=[],l=0,u=0;l<r.length;u+=r[l],++l)if(u+r[l]>a){o=[...r.slice(0,l),a-u];break}var d=o.length%2===0?[0,i]:[i];return[...y9e(r,s),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function w9e(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=js("recharts-line-dot",typeof e!="boolean"?e.className:"");r=_.createElement(xX,Um({},t,{className:n}))}return r}function b9e(e,t){return e==null?!1:t?!0:e.length===1}function _9e(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:a,needClip:i}=n;if(!b9e(r,s))return null;var{id:o}=n,l=JN(n,c9e),u=PV(s),d=tg(l),f=Qi(s,!0),h=r.map((x,y)=>{var v=jl(jl(jl({key:"dot-".concat(y),r:3},d),f),{},{index:y,cx:x.x,cy:x.y,dataKey:a,value:x.value,payload:x.payload,points:r});return w9e(s,v)}),g={clipPath:i?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return _.createElement(T1,Um({className:"recharts-line-dots",key:"dots"},g),h)}function S9e(e){var{showLabels:t,children:r,points:n}=e,s=_.useMemo(()=>n?.map(a=>{var i={x:a.x,y:a.y,width:0,height:0};return jl(jl({},i),{},{value:a.value,payload:a.payload,viewBox:i,parentViewBox:void 0,fill:void 0})}),[n]);return _.createElement(hEe,{value:t?s:null},r)}function OL(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:a}=e,{type:i,layout:o,connectNulls:l,needClip:u}=a,d=JN(a,u9e),f=jl(jl({},Qi(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:i,layout:o,connectNulls:l,strokeDasharray:s??a.strokeDasharray});return _.createElement(_.Fragment,null,n?.length>1&&_.createElement($q,Um({},f,{pathRef:r})),_.createElement(_9e,{points:n,clipPathId:t,props:a}))}function k9e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function T9e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:a}=e,{points:i,strokeDasharray:o,isAnimationActive:l,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:g,height:x,onAnimationEnd:y,onAnimationStart:v}=r,T=s.current,k=Gq(r,"recharts-line-"),[b,E]=_.useState(!1),N=!b,P=_.useCallback(()=>{typeof y=="function"&&y(),E(!1)},[y]),M=_.useCallback(()=>{typeof v=="function"&&v(),E(!0)},[v]),j=k9e(n.current),A=a.current;return _.createElement(S9e,{points:i,showLabels:N},r.children,_.createElement(Hq,{animationId:k,begin:u,duration:d,isActive:l,easing:f,onAnimationEnd:P,onAnimationStart:M,key:k},D=>{var L=Wd(A,j+A,D),G=Math.min(L,j),X;if(l)if(o){var se="".concat(o).split(/[,\s]+/gim).map(B=>parseFloat(B));X=v9e(G,j,se)}else X=MX(j,G);else X=o==null?void 0:String(o);if(T){var Q=T.length/i.length,re=D===1?i:i.map((B,V)=>{var R=Math.floor(V*Q);if(T[R]){var H=T[R];return jl(jl({},B),{},{x:Wd(H.x,B.x,D),y:Wd(H.y,B.y,D)})}return h?jl(jl({},B),{},{x:Wd(g*2,B.x,D),y:Wd(x/2,B.y,D)}):jl(jl({},B),{},{x:B.x,y:B.y})});return s.current=re,_.createElement(OL,{props:r,points:re,clipPathId:t,pathRef:n,strokeDasharray:X})}return D>0&&j>0&&(s.current=i,a.current=G),_.createElement(OL,{props:r,points:i,clipPathId:t,pathRef:n,strokeDasharray:X})}),_.createElement(pEe,{label:r.label}))}function C9e(e){var{clipPathId:t,props:r}=e,n=_.useRef(null),s=_.useRef(0),a=_.useRef(null);return _.createElement(T9e,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:a})}var E9e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Wo(e.payload,t)});class N9e extends _.Component{render(){var t,{hide:r,dot:n,points:s,className:a,xAxisId:i,yAxisId:o,top:l,left:u,width:d,height:f,id:h,needClip:g}=this.props;if(r)return null;var x=js("recharts-line",a),y=h,{r:v=3,strokeWidth:T=2}=(t=Qi(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},k=PV(n),b=v*2+T;return _.createElement(_.Fragment,null,_.createElement(T1,{className:x},g&&_.createElement("defs",null,_.createElement(aNe,{clipPathId:y,xAxisId:i,yAxisId:o}),!k&&_.createElement("clipPath",{id:"clipPath-dots-".concat(y)},_.createElement("rect",{x:u-b/2,y:l-b/2,width:d+b,height:f+b}))),_.createElement(sNe,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:E9e,errorBarOffset:0},_.createElement(C9e,{props:this.props,clipPathId:y}))),_.createElement(XEe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var FX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!C1.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function A9e(e){var t=jc(e,FX),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,connectNulls:o,dot:l,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:g,yAxisId:x,id:y}=t,v=JN(t,d9e),{needClip:T}=_X(g,x),k=VN(),b=qE(),E=Ac(),N=Kr(D=>l9e(D,g,x,E,y));if(b!=="horizontal"&&b!=="vertical"||N==null||k==null)return null;var{height:P,width:M,x:j,y:A}=k;return _.createElement(N9e,Um({},v,{id:y,connectNulls:o,dot:l,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:g,yAxisId:x,points:N,layout:b,height:P,width:M,left:j,top:A,needClip:T}))}function j9e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataKey:i,bandSize:o,displayedData:l}=e;return l.map((u,d)=>{var f=Wo(u,i);if(t==="horizontal"){var h=jI({axis:r,ticks:s,bandSize:o,entry:u,index:d}),g=Ti(f)?null:n.scale(f);return{x:h,y:g,value:f,payload:u}}var x=Ti(f)?null:r.scale(f),y=jI({axis:n,ticks:a,bandSize:o,entry:u,index:d});return x==null||y==null?null:{x,y,value:f,payload:u}}).filter(Boolean)}function P9e(e){var t=jc(e,FX),r=Ac();return _.createElement(CEe,{id:t.id,type:"line"},n=>_.createElement(_.Fragment,null,_.createElement(bEe,{legendPayload:p9e(t)}),_.createElement(vEe,{fn:x9e,args:t}),_.createElement(MEe,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),_.createElement(A9e,Um({},t,{id:n}))))}var DX=_.memo(P9e);DX.displayName="Line";var M9e=["dangerouslySetInnerHTML","ticks"],F9e=["id"],D9e=["domain"],O9e=["domain"];function IT(){return IT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IT.apply(null,arguments)}function S_(e,t){if(e==null)return{};var r,n,s=I9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function I9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function R9e(e){var t=Vo();return _.useEffect(()=>(t(REe(e)),()=>{t(LEe(e))}),[e,t]),null}var L9e=e=>{var{xAxisId:t,className:r}=e,n=Kr(Dq),s=Ac(),a="xAxis",i=Kr(v=>M1(v,a,t,s)),o=Kr(v=>MY(v,a,t,s)),l=Kr(v=>oTe(v,t)),u=Kr(v=>hTe(v,t)),d=Kr(v=>QK(v,t));if(l==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,g=S_(e,M9e),{id:x}=d,y=S_(d,F9e);return _.createElement(XN,IT({},g,y,{scale:i,x:u.x,y:u.y,width:l.width,height:l.height,className:js("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o}))},B9e={allowDataOverflow:kl.allowDataOverflow,allowDecimals:kl.allowDecimals,allowDuplicatedCategory:kl.allowDuplicatedCategory,height:kl.height,hide:!1,mirror:kl.mirror,orientation:kl.orientation,padding:kl.padding,reversed:kl.reversed,scale:kl.scale,tickCount:kl.tickCount,type:kl.type,xAxisId:0},$9e=e=>{var t,r,n,s,a,i=jc(e,B9e);return _.createElement(_.Fragment,null,_.createElement(R9e,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.xAxisId,scale:i.scale,type:i.type,padding:i.padding,allowDataOverflow:i.allowDataOverflow,domain:i.domain,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,height:i.height,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),_.createElement(L9e,i))},z9e=(e,t)=>{var{domain:r}=e,n=S_(e,D9e),{domain:s}=t,a=S_(t,O9e);return t1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:t1({domain:r},{domain:s}):!1},OX=_.memo($9e,z9e);OX.displayName="XAxis";var U9e=["dangerouslySetInnerHTML","ticks"],W9e=["id"],H9e=["domain"],G9e=["domain"];function RT(){return RT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RT.apply(null,arguments)}function k_(e,t){if(e==null)return{};var r,n,s=V9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function V9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function q9e(e){var t=Vo();return _.useEffect(()=>(t(BEe(e)),()=>{t($Ee(e))}),[e,t]),null}var K9e=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=_.useRef(null),i=_.useRef(null),o=Kr(Dq),l=Ac(),u=Vo(),d="yAxis",f=Kr(N=>M1(N,d,t,l)),h=Kr(N=>pTe(N,t)),g=Kr(N=>gTe(N,t)),x=Kr(N=>MY(N,d,t,l)),y=Kr(N=>ZK(N,t));if(_.useLayoutEffect(()=>{if(!(n!=="auto"||!h||GN(s)||_.isValidElement(s)||y==null)){var N=a.current;if(N){var P=N.getCalculatedWidth();Math.round(h.width)!==Math.round(P)&&u(zEe({id:t,width:P}))}}},[x,h,u,s,t,n,y]),h==null||g==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:T}=e,k=k_(e,U9e),{id:b}=y,E=k_(y,W9e);return _.createElement(XN,RT({},k,E,{ref:a,labelRef:i,scale:f,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:js("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:x}))},Y9e={allowDataOverflow:Tl.allowDataOverflow,allowDecimals:Tl.allowDecimals,allowDuplicatedCategory:Tl.allowDuplicatedCategory,hide:!1,mirror:Tl.mirror,orientation:Tl.orientation,padding:Tl.padding,reversed:Tl.reversed,scale:Tl.scale,tickCount:Tl.tickCount,type:Tl.type,width:Tl.width,yAxisId:0},X9e=e=>{var t,r,n,s,a,i=jc(e,Y9e);return _.createElement(_.Fragment,null,_.createElement(q9e,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),_.createElement(K9e,i))},J9e=(e,t)=>{var{domain:r}=e,n=k_(e,H9e),{domain:s}=t,a=k_(t,G9e);return t1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:t1({domain:r},{domain:s}):!1},IX=_.memo(X9e,J9e);IX.displayName="YAxis";var wk={exports:{}},bk={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IL;function Q9e(){if(IL)return bk;IL=1;var e=Wm();function t(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return bk.useSyncExternalStoreWithSelector=function(l,u,d,f,h){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=i(function(){function v(N){if(!T){if(T=!0,k=N,N=f(N),h!==void 0&&x.hasValue){var P=x.value;if(h(P,N))return b=P}return b=N}if(P=b,r(k,N))return P;var M=f(N);return h!==void 0&&h(P,M)?(k=N,P):(k=N,b=M)}var T=!1,k,b,E=d===void 0?null:d;return[function(){return v(u())},E===null?void 0:function(){return v(E())}]},[u,d,f,h]);var y=n(l,g[0],g[1]);return a(function(){x.hasValue=!0,x.value=y},[y]),o(y),y},bk}var RL;function Z9e(){return RL||(RL=1,wk.exports=Q9e()),wk.exports}Z9e();function eAe(e){e()}function tAe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){eAe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var LL={notify(){},get:()=>[]};function rAe(e,t){let r,n=LL,s=0,a=!1;function i(y){d();const v=n.subscribe(y);let T=!1;return()=>{T||(T=!0,v(),f())}}function o(){n.notify()}function l(){x.onStateChange&&x.onStateChange()}function u(){return a}function d(){s++,r||(r=e.subscribe(l),n=tAe())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=LL)}function h(){a||(a=!0,d())}function g(){a&&(a=!1,f())}const x={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:h,tryUnsubscribe:g,getListeners:()=>n};return x}var nAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sAe=nAe(),aAe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iAe=aAe(),oAe=()=>sAe||iAe?_.useLayoutEffect:_.useEffect,lAe=oAe(),cAe=Symbol.for("react-redux-context"),uAe=typeof globalThis<"u"?globalThis:{};function dAe(){if(!_.createContext)return{};const e=uAe[cAe]??=new Map;let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var fAe=dAe();function hAe(e){const{children:t,context:r,serverState:n,store:s}=e,a=_.useMemo(()=>{const l=rAe(s);return{store:s,subscription:l,getServerState:n?()=>n:void 0}},[s,n]),i=_.useMemo(()=>s.getState(),[s]);lAe(()=>{const{subscription:l}=a;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),i!==s.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[a,i]);const o=r||fAe;return _.createElement(o.Provider,{value:a},t)}var mAe=hAe,gAe=(e,t)=>t,QN=Ft([gAe,Ms,KK,oi,KY,E0,b7e,Zi],C7e),ZN=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},RX=Tc("mouseClick"),LX=j2();LX.startListening({actionCreator:RX,effect:(e,t)=>{var r=e.payload,n=QN(t.getState(),ZN(r));n?.activeIndex!=null&&t.dispatch(NTe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var LT=Tc("mouseMove"),BX=j2();BX.startListening({actionCreator:LT,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=ON(n,n.tooltip.settings.shared),a=QN(n,ZN(r));s==="axis"&&(a?.activeIndex!=null?t.dispatch(zY({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch($Y()))}});var BL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},$X=Ul({name:"rootProps",initialState:BL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:BL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),pAe=$X.reducer,{updateOptions:xAe}=$X.actions,zX=Ul({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:zje}=zX.actions,yAe=zX.reducer,UX=Tc("keyDown"),WX=Tc("focus"),e9=j2();e9.startListening({actionCreator:UX,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var i=Number(IN(s,D1(r))),o=E0(r);if(a==="Enter"){var l=v_(r,"axis","hover",String(s.index));t.dispatch(jT({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:l}));return}var u=wTe(r),d=u==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var g=v_(r,"axis","hover",String(h));t.dispatch(jT({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});e9.startListening({actionCreator:WX,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",i=v_(r,"axis","hover",String(a));t.dispatch(jT({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:i}))}}}});var oc=Tc("externalEvent"),HX=j2();HX.startListening({actionCreator:oc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:d7e(r),activeDataKey:c7e(r),activeIndex:Yv(r),activeLabel:JY(r),activeTooltipIndex:Yv(r),isTooltipActive:f7e(r)};e.payload.handler(n,e.payload.reactEvent)}}});var vAe=Ft([F1],e=>e.tooltipItemPayloads),wAe=Ft([vAe,$2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(o=>o.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var i=t(a,r);return i}}}),GX=Tc("touchMove"),VX=j2();VX.startListening({actionCreator:GX,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=ON(n,n.tooltip.settings.shared);if(s==="axis"){var a=QN(n,ZN({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&t.dispatch(zY({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var i,o=r.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(Z3e),d=(i=l.getAttribute(eSe))!==null&&i!==void 0?i:void 0,f=wAe(t.getState(),u,d);t.dispatch(ETe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var bAe=iq({brush:oNe,cartesianAxis:UEe,chartData:W7e,errorBars:QEe,graphicalItems:PEe,layout:T3e,legend:gSe,options:L7e,polarAxis:yEe,polarOptions:yAe,referenceElements:mNe,rootProps:pAe,tooltip:ATe}),_Ae=function(t){return X_e({reducer:bAe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([LX.middleware,BX.middleware,e9.middleware,HX.middleware,VX.middleware]),devTools:C1.devToolsEnabled})};function SAe(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Ac(),a=_.useRef(null);if(s)return r;a.current==null&&(a.current=_Ae(t));var i=$E;return _.createElement(mAe,{context:i,store:a.current},r)}function kAe(e){var{layout:t,width:r,height:n,margin:s}=e,a=Vo(),i=Ac();return _.useEffect(()=>{i||(a(_3e(t)),a(S3e({width:r,height:n})),a(b3e(s)))},[a,i,t,r,n,s]),null}function TAe(e){var t=Vo();return _.useEffect(()=>{t(xAe(e))},[t,e]),null}var CAe=["children"];function EAe(e,t){if(e==null)return{};var r,n,s=NAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function T_(){return T_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T_.apply(null,arguments)}var AAe={width:"100%",height:"100%"},jAe=_.forwardRef((e,t)=>{var r=Iq(),n=Rq(),s=Bq();if(!n_(r)||!n_(n))return null;var{children:a,otherAttributes:i,title:o,desc:l}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=s?0:void 0,typeof i.role=="string"?d=i.role:d=s?"application":void 0,_.createElement(MV,T_({},i,{title:o,desc:l,role:d,tabIndex:u,width:r,height:n,style:AAe,ref:t}),a)}),PAe=e=>{var{children:t}=e,r=Kr(N3);if(!r)return null;var{width:n,height:s,y:a,x:i}=r;return _.createElement(MV,{width:n,height:s,x:i,y:a},t)},$L=_.forwardRef((e,t)=>{var{children:r}=e,n=EAe(e,CAe),s=Ac();return s?_.createElement(PAe,null,r):_.createElement(jAe,T_({ref:t},n),r)});function MAe(){var e=Vo(),[t,r]=_.useState(null),n=Kr(Q3e);return _.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;cu(a)&&a!==n&&e(k3e(a))}},[t,e,n]),r}function zL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FAe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zL(Object(r),!0).forEach(function(n){DAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DAe(e,t,r){return(t=OAe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OAe(e){var t=IAe(e,"string");return typeof t=="symbol"?t:t+""}function IAe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RAe=_.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:i,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:g,onTouchMove:x,onTouchStart:y,style:v,width:T}=e,k=Vo(),[b,E]=_.useState(null),[N,P]=_.useState(null);Q7e();var M=MAe(),j=_.useCallback(I=>{M(I),typeof t=="function"&&t(I),E(I),P(I)},[M,t,E,P]),A=_.useCallback(I=>{k(RX(I)),k(oc({handler:a,reactEvent:I}))},[k,a]),D=_.useCallback(I=>{k(LT(I)),k(oc({handler:u,reactEvent:I}))},[k,u]),L=_.useCallback(I=>{k($Y()),k(oc({handler:d,reactEvent:I}))},[k,d]),G=_.useCallback(I=>{k(LT(I)),k(oc({handler:f,reactEvent:I}))},[k,f]),X=_.useCallback(()=>{k(WX())},[k]),se=_.useCallback(I=>{k(UX(I.key))},[k]),Q=_.useCallback(I=>{k(oc({handler:i,reactEvent:I}))},[k,i]),re=_.useCallback(I=>{k(oc({handler:o,reactEvent:I}))},[k,o]),B=_.useCallback(I=>{k(oc({handler:l,reactEvent:I}))},[k,l]),V=_.useCallback(I=>{k(oc({handler:h,reactEvent:I}))},[k,h]),R=_.useCallback(I=>{k(oc({handler:y,reactEvent:I}))},[k,y]),H=_.useCallback(I=>{k(GX(I)),k(oc({handler:x,reactEvent:I}))},[k,x]),z=_.useCallback(I=>{k(oc({handler:g,reactEvent:I}))},[k,g]);return _.createElement(nX.Provider,{value:b},_.createElement(h4e.Provider,{value:N},_.createElement("div",{className:js("recharts-wrapper",n),style:FAe({position:"relative",cursor:"default",width:T,height:s},v),onClick:A,onContextMenu:Q,onDoubleClick:re,onFocus:X,onKeyDown:se,onMouseDown:B,onMouseEnter:D,onMouseLeave:L,onMouseMove:G,onMouseUp:V,onTouchEnd:z,onTouchMove:H,onTouchStart:R,ref:j},r)))}),LAe=["children","className","width","height","style","compact","title","desc"];function BAe(e,t){if(e==null)return{};var r,n,s=$Ae(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $Ae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zAe=_.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:a,style:i,compact:o,title:l,desc:u}=e,d=BAe(e,LAe),f=tg(d);return o?_.createElement($L,{otherAttributes:f,title:l,desc:u},r):_.createElement(RAe,{className:n,style:i,width:s,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement($L,{otherAttributes:f,title:l,desc:u,ref:t},_.createElement(pNe,null,r)))}),UAe=["width","height"];function BT(){return BT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BT.apply(null,arguments)}function WAe(e,t){if(e==null)return{};var r,n,s=HAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var GAe={top:5,right:5,bottom:5,left:5},VAe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:GAe,reverseStackOrder:!1,syncMethod:"index"},qAe=_.forwardRef(function(t,r){var n,s=jc(t.categoricalChartProps,VAe),{width:a,height:i}=s,o=WAe(s,UAe);if(!n_(a)||!n_(i))return null;var{chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,g={chartName:l,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return _.createElement(SAe,{preloadedState:{options:g},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:l},_.createElement(iNe,{chartData:h.data}),_.createElement(kAe,{width:a,height:i,layout:s.layout,margin:s.margin}),_.createElement(TAe,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),_.createElement(zAe,BT({},o,{width:a,height:i,ref:r})))}),KAe=["axis"],YAe=_.forwardRef((e,t)=>_.createElement(qAe,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:KAe,tooltipPayloadSearcher:I7e,categoricalChartProps:e,ref:t}));const XAe=({data:e=[],loading:t=!1,error:r=null})=>{if(t)return c.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:c.jsx("div",{className:"spinner-border text-primary",role:"status",children:c.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r)return c.jsxs("div",{className:"alert alert-danger",role:"alert",children:[c.jsx("h5",{className:"alert-heading",children:"Error Loading Performance Data"}),c.jsx("p",{children:r})]});if(!e||e.length===0)return c.jsx("div",{className:"text-center text-muted",style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{children:[c.jsx("h5",{children:"No Test Data Available"}),c.jsx("p",{children:"No tests have been completed yet for the current term."})]})});const n=e.map(s=>({testName:s.test_name,testDate:s.submitted_at,averageScore:parseFloat(s.average_score),totalStudents:s.total_students,testId:s.test_id}));return c.jsxs("div",{className:"test-performance-graph",children:[c.jsx("div",{style:{width:"100%",height:"400px"},children:c.jsx(pCe,{children:c.jsxs(YAe,{data:n,margin:{top:20,right:30,left:20,bottom:20},children:[c.jsx(EX,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),c.jsx(OX,{dataKey:"testDate",tickFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:"#666",fontSize:12}),c.jsx(IX,{domain:[0,100],tickFormatter:s=>`${s}%`,stroke:"#666",fontSize:12}),c.jsx(iCe,{formatter:(s,a)=>[`${parseFloat(s).toFixed(1)}%`,"Average Score"],labelFormatter:s=>{const a=n.find(i=>i.testDate===s);if(a){const i=new Date(s);return`${a.testName} (${i.toLocaleDateString("en-US",{month:"long",day:"numeric"})})`}return s},contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),c.jsx(DX,{type:"monotone",dataKey:"averageScore",stroke:"#007bff",strokeWidth:3,connectNulls:!0,dot:{r:6,fill:"#007bff",stroke:"#fff",strokeWidth:2},activeDot:{r:8,fill:"#ff6b35",stroke:"#fff",strokeWidth:2}})]})})}),c.jsx("div",{className:"mt-3",children:c.jsxs("div",{className:"row",children:[c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Total Tests: "}),c.jsx("strong",{children:n.length})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Average Score: "}),c.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(i=>i.averageScore!==null&&i.averageScore!==void 0&&!isNaN(i.averageScore));return s.length===0?"N/A":`${(s.reduce((i,o)=>i+o.averageScore,0)/s.length).toFixed(1)}%`})():"N/A"})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Best Test: "}),c.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(a=>a.averageScore!==null&&a.averageScore!==void 0&&!isNaN(a.averageScore));return s.length===0?"N/A":s.reduce((a,i)=>i.averageScore>a.averageScore?i:a).testName})():"N/A"})]})}),c.jsx("div",{className:"col-md-3",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-muted",children:"Latest Test: "}),c.jsx("strong",{children:n.length>0?n[n.length-1].testName:"N/A"})]})})]})})]})},UL=({onBackToLogin:e})=>{const t=hl(),{user:r,isAuthenticated:n,logout:s,getCurrentTeacherUsername:a}=Ps(),{teacherData:i,loadTeacherData:o}=a3(),{activeTests:l,loadActiveTests:u}=v2(),{showNotification:d,notifications:f}=ai(),[h,g]=_.useState(!0),[x,y]=_.useState(""),[v,T]=_.useState("main"),[k,b]=_.useState([]),[E,N]=_.useState([]),[P,M]=_.useState(null),[j,A]=_.useState(null),[D,L]=_.useState(null),[G,X]=_.useState(!1),[se,Q]=_.useState(!1),[re,B]=_.useState(null),[V,R]=_.useState([]),[H,z]=_.useState(null),[I,W]=_.useState(!1),[K,ee]=_.useState(!1),[oe,Z]=_.useState(null),[le,ue]=_.useState(!1),[de,Te]=_.useState(null),[ie,pe]=_.useState(null),[Ae,Me]=_.useState([]),[Je,Ve]=_.useState(!1),[Dt,lt]=_.useState(null),[At,vt]=_.useState([]),[ct,bt]=_.useState(!1),[Ut,Bt]=_.useState(null),[Vt,We]=_.useState(null),[Ue,tt]=_.useState(!1),[nt,at]=_.useState(!1),[It,Lt]=_.useState(0),[Xt,vr]=_.useState(!1),[br,Dr]=_.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Sr,pr]=_.useState([]),[ye,Fe]=_.useState([]),[Be,He]=_.useState(!1),[Pt,Ie]=_.useState(!1),[Qe,Ne]=_.useState(null),[Ke,qe]=_.useState([]),[Rt,zt]=_.useState(!1),[rr,Ir]=_.useState("subject");_.useEffect(()=>{Ce()},[]),_.useEffect(()=>{const Re=yt=>{Ue&&!yt.target.closest(".relative")&&tt(!1),nt&&!yt.target.closest(".relative")&&at(!1)};return document.addEventListener("mousedown",Re),()=>{document.removeEventListener("mousedown",Re)}},[Ue,nt]);const wr=_.useCallback(()=>{xe.debug(" showChangePasswordTab called"),vr(!0),tt(!1),at(!1)},[]),Wr=_.useCallback(()=>{xe.debug(" hideChangePasswordTab called"),vr(!1),Dr({currentPassword:"",newPassword:"",confirmPassword:""})},[]),he=_.useCallback(async()=>{if(!r)return;const{currentPassword:Re,newPassword:yt,confirmPassword:tr}=br;if(!Re||!yt||!tr){d("Please fill in all fields","error");return}if(yt!==tr){d("New passwords do not match","error");return}if(yt.length<6){d("New password must be at least 6 characters long","error");return}const $e=/[a-zA-Z]/.test(yt),ft=/[0-9]/.test(yt);if(!$e||!ft){d("New password must contain both letters and numbers","error");return}try{const Wt=await Os.changePassword({username:r.username,currentPassword:Re,newPassword:yt});Wt.success?(d("Password changed successfully!","success"),Wr()):d(Wt.message||"Failed to change password","error")}catch(Wt){xe.error("Password change error:",Wt),d("Failed to change password. Please try again.","error")}},[r,br,d]),Ee=_.useCallback(Re=>{const{name:yt,value:tr}=Re.target;Dr($e=>({...$e,[yt]:tr}))},[]),we=_.useCallback(async()=>{xe.debug(" Loading teacher data...");try{const Re=await Os.getTeacherData();return xe.debug(" Teacher data loaded:",Re),pe(new Date),Re}catch(Re){throw xe.error(" Error loading teacher data:",Re),Re}},[]),_e=_.useCallback(async(Re=null)=>{xe.debug(" Loading teacher subjects...");try{if(!Re){const $e=`teacher_subjects_${r?.teacher_id||r?.id||""}`,ft=fa($e);if(ft)return xe.debug(" Using cached teacher subjects"),b(ft),ft}let yt=Re,tr;if(Re?(xe.debug(" Using passed teacher data for subjects"),tr=Os.getTeacherSubjects(Re.subjects)):(xe.debug(" No teacher data passed, fetching from API"),yt=await Os.getTeacherData(),xe.debug(" Raw teacher data:",yt),tr=Os.getTeacherSubjects(yt.subjects)),xe.debug(" Teacher subjects loaded:",tr),b(tr),!Re){const $e=`teacher_subjects_${r?.teacher_id||r?.id||""}`;qs($e,tr,da.teacher_subjects)}return xe.debug(" Available classes for performance chart:",tr[0]?.classes||[]),xe.debug(" Performance chart will load when user clicks on a class"),tr}catch(yt){throw xe.error(" Error loading teacher subjects:",yt),yt}},[r?.teacher_id,r?.id]),ke=_.useCallback(async()=>{xe.debug(" Loading teacher active tests...");try{const Re=`teacher_tests_${r?.teacher_id||r?.id||""}`,yt=fa(Re);yt&&yt.some(ft=>ft.test_type==="drawing")&&(xe.debug(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(Re));const tr=fa(Re);if(tr)return xe.debug(" Using cached teacher tests"),N(tr),tr;const $e=await Pn.getTeacherTests();return xe.debug(" Teacher tests loaded:",$e),N($e),qs(Re,$e,da.teacher_tests),$e}catch(Re){throw xe.error(" Error loading teacher tests:",Re),Re}},[r?.teacher_id,r?.id]),Ce=_.useCallback(async()=>{xe.debug(" Initializing Teacher Cabinet...");try{if(g(!0),y(""),!n||!r){xe.debug(" User not authenticated"),y("User not authenticated");return}if(r.role!==Ro.TEACHER){xe.error(" Invalid user role for teacher cabinet:",r.role),y("Access denied. Teacher role required.");return}xe.debug(" Loading teacher data...");const Re=await we();xe.debug(" Loading subjects and tests in parallel...");const[yt,tr]=await Promise.allSettled([_e(Re),ke()]);let $e=!1;yt.status==="rejected"&&(xe.warn(" Subjects loading failed:",yt.reason),$e=!0),tr.status==="rejected"&&(xe.warn(" Tests loading failed:",tr.reason),$e=!0),$e&&d("Some data failed to load, but you can continue","warning"),xe.debug(" Teacher Cabinet initialization complete!")}catch(Re){xe.error(" Error initializing teacher cabinet:",Re),y("Failed to initialize teacher cabinet")}finally{g(!1)}},[n,r,we,_e,ke,d]),rt=_.useCallback(()=>{xe.debug(" Showing subject selection prompt..."),X(!0),xt(),Ir("subject")},[]),xt=_.useCallback(async()=>{xe.debug(" Loading available subjects..."),He(!0);try{const Re=await Os.getSubjectsForSelection();pr(Re),xe.debug(" Available subjects loaded:",Re)}catch(Re){xe.error(" Error loading available subjects:",Re),d("Failed to load subjects","error")}finally{He(!1)}},[]),ut=_.useCallback(Re=>{if(!Re){Ne(null);return}const yt=Sr.find(tr=>tr.subject_id==Re);yt&&(Ne(yt),qe([]),Ir("classes"))},[Sr]),ce=_.useCallback((Re,yt)=>{qe(tr=>tr.some($e=>$e.grade===Re&&$e.class===yt)?tr.filter($e=>!($e.grade===Re&&$e.class===yt)):[...tr,{grade:Re,class:yt}])},[]),ge=_.useCallback(()=>{if(!Qe||Ke.length===0){d("Please select at least one class","warning");return}const Re={subject_id:parseInt(Qe.subject_id),subject_name:Qe.subject,classes:Ke};Fe(yt=>[...yt,Re]),Ne(null),qe([]),Ir("subject"),d(`Added ${Qe.subject} with ${Ke.length} classes`,"success")},[Qe,Ke]),Pe=_.useCallback(Re=>{Fe(yt=>yt.filter((tr,$e)=>$e!==Re))},[]),je=_.useCallback(async(Re,yt,tr)=>{xe.debug(" Deleting teacher subject:",{subjectId:Re,grade:yt,classNumber:tr});try{const $e={subjectId:Re,grade:yt,class:tr};xe.debug(" Sending delete request with data:",$e);const ft=await Os.deleteTeacherSubject($e);if(ft.success)d("Subject assignment deleted successfully!","success"),await _e();else throw new Error(ft.error||"Failed to delete subject assignment")}catch($e){xe.error(" Error deleting subject assignment:",$e),d("Error deleting subject assignment. Please try again.","error")}},[_e,d]),Ze=_.useCallback((Re,yt,tr,$e)=>{Te({subjectId:Re,subjectName:yt,grade:tr,classNumber:$e}),ue(!0)},[]),dt=_.useCallback(async()=>{de&&(await je(de.subjectId,de.grade,de.classNumber),ue(!1),Te(null))},[de,je]),_t=_.useCallback(()=>{ue(!1),Te(null)},[]),ir=_.useCallback(async()=>{if(ye.length===0){d("Please select at least one subject","warning");return}Ie(!0);try{const Re=await Os.saveTeacherSubjects(ye);if(Re.success)d("Subjects saved successfully!","success"),X(!1),Fe([]),Ir("subject"),await _e();else throw new Error(Re.error||"Failed to save subjects")}catch(Re){xe.error(" Error saving teacher subjects:",Re),d("Failed to save subjects","error")}finally{Ie(!1)}},[ye,_e]);_.useCallback(async Re=>{xe.debug(" Saving teacher subjects:",Re);try{const yt=await Os.saveTeacherSubjects(Re);if(yt.success)d("Subjects saved successfully!","success"),await _e(),X(!1);else throw new Error(yt.error||"Failed to save subjects")}catch(yt){xe.error(" Error saving teacher subjects:",yt),d("Failed to save subjects","error")}},[_e]);const Ot=_.useCallback(()=>{xe.debug(" Showing active tests..."),T("tests")},[]),Qt=_.useCallback(async Re=>{xe.debug(" Showing test details:",Re),B(Re),Q(!0),R([]),z(null),W(!0);try{if(["input","true_false","multiple_choice"].includes(Re.test_type)){const yt=await Pn.getTestQuestionsWithInfo(Re.test_type,Re.test_id);R(yt.questions||[]),z(yt.testInfo||null),xe.debug(" Test questions and info loaded:",{questionsCount:yt.questions?.length||0,testInfo:yt.testInfo})}}catch(yt){console.error("Error loading test questions:",yt),d("Error loading test questions. Please try again.","error")}finally{W(!1)}},[d]);_.useCallback(async(Re,yt,tr)=>{xe.debug(" Removing class assignment:",Re,yt,tr);try{const $e=await Pn.removeClassAssignment(Re,yt,tr);if($e.success)d("Assignment removed successfully!","success"),await ke();else throw new Error($e.error||"Failed to remove assignment")}catch($e){xe.error(" Error removing class assignment:",$e),d("Failed to remove assignment","error")}},[ke]);const Cr=_.useCallback(async Re=>{xe.debug(" Marking assignment as completed:",Re),lt(Re);try{const yt=await Pn.markAssignmentCompleted(Re);if(yt.success){N($e=>$e.map(ft=>({...ft,assignments:ft.assignments?.map(Wt=>Wt.assignment_id===Re?{...Wt,is_active:!1}:Wt)||[]}))),d("Test assignment marked as completed!","success");const tr=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(tr),xe.debug(" Cleared teacher tests cache"),ke().catch($e=>{xe.error(" Error refreshing tests after completion:",$e)})}else throw new Error(yt.error||"Failed to mark assignment as completed")}catch(yt){xe.error(" Error marking assignment as completed:",yt),d("Failed to mark assignment as completed","error")}finally{lt(null)}},[ke,d,r?.teacher_id,r?.id]),[Br,Rr]=_.useState(null),tn=_.useCallback(async Re=>{xe.debug(" Activating assignment:",Re),Rr(Re);try{const yt=await Pn.activateAssignment(Re);if(!yt.success)throw new Error(yt.error||"Failed to activate assignment");N($e=>$e.map(ft=>({...ft,assignments:ft.assignments?.map(Wt=>Wt.assignment_id===Re?{...Wt,is_active:!0}:Wt)||[]}))),d("Test assignment activated! Students can now see this test.","success");const tr=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(tr),xe.debug(" Cleared teacher tests cache"),ke().catch($e=>{xe.error(" Error refreshing tests after activation:",$e)})}catch(yt){xe.error(" Error activating assignment:",yt),d("Failed to activate assignment","error")}finally{Rr(null)}},[ke,d,r?.teacher_id,r?.id]),mn=_.useCallback(async()=>{xe.debug(" Refreshing active tests data...");try{const Re=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Re),xe.debug(" Cache cleared, forcing fresh API call"),xe.debug(" Making direct API call to get-teacher-active-tests with noCache");const yt=await Pn.getTeacherTests(!0);xe.debug(" Direct API call returned:",yt),N(yt),xe.debug(" activeTestsData state updated:",yt),d(`Tests refreshed successfully! Found ${yt?.length||0} tests.`,"success")}catch(Re){xe.error(" Error refreshing tests:",Re),d("Failed to refresh tests","error")}},[r?.teacher_id,r?.id]),dn=_.useMemo(()=>!E||E.length===0?[]:E.flatMap(Re=>!Re.assignments||Re.assignments.length===0?[]:Re.assignments.map(yt=>({test_id:Re.test_id,test_type:Re.test_type,test_name:Re.test_name,num_questions:Re.num_questions,created_at:Re.created_at,subject_id:Re.subject_id,subject:Re.subject,teacher_id:Re.teacher_id,assignment_id:yt.assignment_id,grade:yt.grade,class:yt.class,is_active:yt.is_active,assigned_at:yt.assigned_at,days_remaining:yt.days_remaining}))),[E]),Fr=_.useCallback(async(Re=null)=>{if(r?.teacher_id){bt(!0),Bt(null);try{xe.debug(" Loading test performance data for class:",Re);const yt=await Kbe.getTestPerformance(r.teacher_id,Re);vt(yt),xe.debug(" Test performance data loaded:",yt.length,"tests")}catch(yt){xe.error(" Error loading test performance data:",yt),Bt(yt.message)}finally{bt(!1)}}},[r?.teacher_id]);_.useCallback((Re,yt)=>{xe.debug(" Showing class results:",Re,yt),xe.debug(" Class click - grade:",Re,"className:",yt),A(Re),L(yt),T("results");const tr=`${Re}/${yt}`;xe.debug(" Loading performance data for clicked class:",tr),We(tr),Fr(tr)},[Fr]);const[li,gn]=_.useState([]),[Qs,_s]=_.useState([]),Ha=_.useCallback(async()=>{try{const yt=await(await Za(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestAssignments(r.teacher_id);gn(yt)}catch(Re){xe.warn("Failed to load retests",Re)}},[r]);_.useCallback(async Re=>{try{const tr=await(await Za(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestTargets(Re);_s(tr)}catch(yt){xe.warn("Failed to load retest targets",yt)}},[]);const[Bn,be]=_.useState(!1),[Ct,jr]=_.useState(!1);_.useEffect(()=>{xe.debug("[TeacherCabinet] showRetestModal state changed:",Bn)},[Bn]);const[Ur,Xn]=_.useState({test_type:"",original_test_id:"",subject_id:"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:[]}),Fn=_.useCallback(async Re=>{xe.debug("[TeacherCabinet] openRetestModal called with:",Re);const{test_type:yt,original_test_id:tr,subject_id:$e,failedStudentIds:ft=[],grade:Wt,class:kt}=Re||{};Xn({test_type:yt||"multiple_choice",original_test_id:tr||"",subject_id:$e||"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:ft}),Wt!==void 0&&A(Wt),kt!==void 0&&L(kt),xe.debug("[TeacherCabinet] Setting showRetestModal to true"),be(!0)},[]),as=_.useCallback(async()=>{jr(!0);try{const Re=await Za(()=>import("./retestService-C6b0YDiD.js"),[]),yt=new Date,tr=new Date(yt.getTime()+Ur.window_days*24*60*60*1e3),$e={...Ur,teacher_id:r.teacher_id,grade:j,class:D,window_start:yt.toISOString(),window_end:tr.toISOString()};xe.debug("[Retest][TeacherCabinet] Prepared payload:",JSON.stringify($e)),xe.debug("[Retest][TeacherCabinet] Selected students count:",($e.student_ids||[]).length,"IDs:",$e.student_ids),await Re.retestService.createRetestAssignment($e),d("Retest created","success"),be(!1),Ha(),Lt(ft=>ft+1)}catch(Re){xe.error("Create retest error",Re),d(Re.message||"Failed to create retest","error")}finally{jr(!1)}},[Ur,j,D,Ha]);if(h)return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[c.jsxs("div",{className:"text-center",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Cabinet..."})]}),c.jsx("div",{className:"flex flex-wrap gap-2"})]});if(x)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Cabinet Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:x}),c.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return c.jsxs(gt.div,{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(gt.div,{className:"bg-gradient-to-r from-sky-400 to-sky-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-6",children:[c.jsxs(gt.div,{className:"flex-1 text-center",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-white mb-2",children:"Teacher Cabinet"}),c.jsxs("p",{className:"text-sky-100 text-sm sm:text-base md:text-lg",children:["Welcome, Teacher ",a()||""]})]}),c.jsxs(gt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsx("div",{className:"hidden md:block",children:c.jsxs("div",{className:"relative",children:[c.jsxs("button",{onClick:()=>tt(!Ue),className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border border-white/20 text-white hover:bg-white/20 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:[c.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"Menu"}),c.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-200",style:{transform:Ue?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),Ue&&c.jsxs(gt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[c.jsxs("button",{onClick:()=>{tt(!1),wr()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),c.jsx("span",{children:"Change Password"})]}),c.jsxs("button",{onClick:()=>{tt(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{children:"Logout"})]})]})]})}),c.jsxs("div",{className:"md:hidden",children:[c.jsx("button",{onClick:()=>at(!nt),className:"flex items-center justify-center w-10 h-10 bg-white/10 border border-white/20 text-white hover:bg-white/20 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:c.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),nt&&c.jsxs(gt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[c.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:a()||"Teacher"}),c.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Account"})]}),c.jsxs("button",{onClick:()=>{at(!1),wr()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),c.jsx("span",{children:"Change Password"})]}),c.jsxs("button",{onClick:()=>{at(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),c.jsx("span",{children:"Logout"})]})]})]})]})]})})}),c.jsx(gt.div,{className:"bg-white border-b shadow-sm",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:c.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:c.jsx("nav",{className:"flex space-x-1 sm:space-x-8 overflow-x-auto",children:[{key:"main",label:"Main Dashboard",shortLabel:"Dashboard"},{key:"tests",label:"Test Management",shortLabel:"Tests"},{key:"results",label:"Class Results",shortLabel:"Results"},{key:"subjects",label:"Subject Management",shortLabel:"Subjects"}].map((Re,yt)=>c.jsxs(gt.button,{onClick:()=>Re.key==="tests"?Ot():T(Re.key),className:`py-2 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors duration-200 whitespace-nowrap flex-shrink-0 flex-1 sm:flex-none ${v===Re.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5+yt*.1,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:[c.jsx("span",{className:"sm:hidden",children:Re.shortLabel}),c.jsx("span",{className:"hidden sm:inline",children:Re.label})]},Re.key))})})}),c.jsx(gt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:c.jsxs(il,{mode:"wait",children:[v==="main"&&c.jsx(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:$s()},"main"),v==="subjects"&&c.jsx(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:ci()},"subjects"),v==="tests"&&c.jsx(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:on()},"tests"),v==="results"&&c.jsx(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:c.jsx(kV,{selectedGrade:j,selectedClass:D,onBackToCabinet:()=>T("main"),openRetestModal:Fn,forceRefreshOnMount:It>0},It)},"results")]})}),G&&c.jsx(Ca,{isOpen:G,onClose:()=>{X(!1),Ir("subject"),Fe([]),Ne(null),qe([])},title:"Select Subjects and Classes",size:"large",children:c.jsxs("div",{className:"space-y-6 px-4 max-h-[80vh] overflow-y-auto",children:[rr==="subject"&&c.jsxs(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 1: Select Subject"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the subject you want to teach:"}),Be?c.jsxs("div",{className:"flex items-center justify-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),c.jsx("span",{className:"ml-2 text-gray-600",children:"Loading subjects..."})]}):c.jsxs("select",{value:Qe?.subject_id||"",onChange:Re=>ut(Re.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"Select a subject"}),Sr.map(Re=>c.jsx("option",{value:Re.subject_id,children:Re.subject},Re.subject_id))]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx(ot,{variant:"outline",onClick:()=>X(!1),children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:()=>Ir("classes"),disabled:!Qe,children:"Next: Select Classes"})]})]}),rr==="classes"&&Qe&&c.jsxs(gt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Step 2: Select Classes for ",Qe.subject]}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the classes you teach for this subject:"}),c.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg p-4",children:c.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7].map(Re=>{let yt;return Re===1||Re===2||Re===3?yt=[15,16]:Re===4||Re===5||Re===6?yt=[13,14]:Re===7?yt=[69,70]:yt=[],c.jsxs("div",{className:"space-y-2",children:[c.jsxs("h4",{className:"font-medium text-gray-700 text-sm",children:["Grade ",Re]}),c.jsx("div",{className:"space-y-1",children:yt.map(tr=>c.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[c.jsx("input",{type:"checkbox",checked:Ke.some($e=>$e.grade===Re.toString()&&$e.class===tr.toString()),onChange:()=>ce(Re.toString(),tr.toString()),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),c.jsxs("span",{className:"text-xs text-gray-700",children:["Class ",tr]})]},tr))})]},Re)})})})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(ot,{variant:"outline",onClick:()=>Ir("subject"),children:"Back to Subjects"}),c.jsxs("div",{className:"space-x-3",children:[c.jsx(ot,{variant:"outline",onClick:()=>X(!1),children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:ge,disabled:Ke.length===0,children:"Add Subject"})]})]})]}),ye.length>0&&c.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Selected Subjects"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Review your selected subjects and classes:"}),c.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:ye.map((Re,yt)=>c.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-medium text-gray-900",children:Re.subject_name}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Classes: ",Re.classes.map(tr=>`Grade ${tr.grade} Class ${tr.class}`).join(", ")]})]}),c.jsx("button",{onClick:()=>Pe(yt),className:"text-red-600 hover:text-red-800 p-1",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},yt))})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx(ot,{variant:"outline",onClick:()=>Ir("subject"),children:"Add More Subjects"}),c.jsxs("div",{className:"space-x-3",children:[c.jsx(ot,{variant:"outline",onClick:()=>X(!1),children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:ir,disabled:Pt,className:"relative",children:Pt?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save All Subjects"})]})]})]})]})}),Bn&&c.jsxs(Ca,{isOpen:Bn,onClose:()=>be(!1),title:"Create Retest",size:"medium",children:[c.jsx("div",{className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retest Window"}),c.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Ur.window_days,onChange:Re=>Xn(yt=>({...yt,window_days:Number(Re.target.value)})),children:[c.jsx("option",{value:1,children:"1 day"}),c.jsx("option",{value:2,children:"2 days"}),c.jsx("option",{value:3,children:"3 days"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Attempts"}),c.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Ur.max_attempts,onChange:Re=>Xn(yt=>({...yt,max_attempts:Number(Re.target.value)})),children:[c.jsx("option",{value:1,children:"1 attempt"}),c.jsx("option",{value:2,children:"2 attempts"}),c.jsx("option",{value:3,children:"3 attempts"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Students can retry immediately if they fail"})]})]})}),c.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[c.jsx("button",{onClick:()=>be(!1),disabled:Ct,className:"px-4 py-2 text-sm rounded border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),c.jsx("button",{onClick:as,disabled:Ct,className:"px-4 py-2 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Ct?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm"}),"Creating Retest..."]}):"Create Retest"})]})]}),se&&re&&c.jsxs(Ca,{isOpen:se,onClose:()=>Q(!1),title:"Test Details",size:"large",children:[c.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Test Name:"}),c.jsx("p",{className:"text-sm text-gray-900",children:re.test_name})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),c.jsx("p",{className:"text-sm text-gray-900",children:re.subject})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Test Type:"}),c.jsx("p",{className:"text-sm text-gray-900",children:re.test_type})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),c.jsx("p",{className:"text-sm text-gray-900",children:new Date(re.created_at).toLocaleDateString()})]}),(H||re)&&c.jsx("div",{className:"space-y-2",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[["input","true_false","multiple_choice"].includes(re.test_type)&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Shuffled:"}),c.jsx("span",{className:`text-sm font-semibold ${H?.is_shuffled||re.is_shuffled?"text-green-600":"text-gray-400"}`,children:H?.is_shuffled||re.is_shuffled?" Yes":" No"})]}),(H?.allowed_time||re.allowed_time)&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),c.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[" ",Math.floor((H?.allowed_time||re.allowed_time)/60)," minutes"]})]}),!(H?.allowed_time||re.allowed_time)&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),c.jsx("span",{className:"text-sm font-semibold text-gray-400",children:" Not set"})]})]})}),re.assignments&&re.assignments.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:re.assignments.map((Re,yt)=>c.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[Re.grade,"/",Re.class]},yt))})]}),["input","true_false","multiple_choice"].includes(re.test_type)&&c.jsxs("div",{className:"mt-6 border-t pt-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions and Correct Answers"}),I?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx(un,{size:"md"})}):V.length>0?c.jsx("div",{className:"space-y-4",children:V.map((Re,yt)=>{if(re.test_type==="multiple_choice"){const tr=Re.correct_answer,$e=Re.options||[],ft=["option_a","option_b","option_c","option_d","option_e","option_f"],Wt=$e.length>0?$e:ft.map(kt=>Re[kt]).filter(kt=>kt!=null&&kt!=="");return c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[2rem]",children:["Q",yt+1,":"]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-gray-900 mb-2",dangerouslySetInnerHTML:{__html:Hs(Re.question)}}),c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Options:"}),c.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Wt.map((kt,Pr)=>{const Et=String.fromCharCode(97+Pr).toUpperCase();return c.jsxs("div",{className:`p-2 rounded ${Et===tr?"bg-green-100 border-2 border-green-500":"bg-white border border-gray-200"}`,children:[c.jsxs("span",{className:"font-semibold",children:[Et,":"]})," ",c.jsx("span",{dangerouslySetInnerHTML:{__html:Hs(String(kt))}}),Et===tr&&c.jsx("span",{className:"ml-2 text-green-700 font-bold",children:" Correct"})]},Pr)})})]})]})]})},Re.question_id||yt)}if(re.test_type==="true_false"){const tr=Re.correct_answer,$e=tr===!0||tr==="true"||tr===1||tr==="1";return c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[2rem]",children:["Q",yt+1,":"]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-gray-900 mb-2",dangerouslySetInnerHTML:{__html:Hs(Re.question)}}),c.jsx("div",{className:"mt-2",children:c.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded ${$e?"bg-green-100 border-2 border-green-500":"bg-red-100 border-2 border-red-500"}`,children:c.jsxs("span",{className:"text-sm font-semibold",children:["Correct Answer: ",$e?"True":"False"]})})})]})]})},Re.question_id||yt)}if(re.test_type==="input"){const tr=Re.correct_answers||[];return c.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[2rem]",children:["Q",yt+1,":"]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm text-gray-900 mb-2",dangerouslySetInnerHTML:{__html:Hs(Re.question)}}),c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Correct Answer(s):"}),tr.length>0?c.jsx("div",{className:"flex flex-wrap gap-2",children:tr.map(($e,ft)=>c.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded bg-green-100 border-2 border-green-500 text-sm font-semibold text-green-800",dangerouslySetInnerHTML:{__html:Hs(String($e))}},ft))}):c.jsx("span",{className:"text-sm text-gray-400 italic",children:"No correct answers specified"})]})]})]})},Re.question_id||yt)}return null})}):c.jsx("p",{className:"text-sm text-gray-500 italic",children:"No questions available for this test."})]})]}),c.jsx("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:c.jsx(ot,{variant:"outline",onClick:()=>Q(!1),children:"Close"})})]}),le&&de&&c.jsx(Ca,{isOpen:le,onClose:_t,title:"Delete Subject Assignment",size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:c.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Subject Assignment"}),c.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Are you sure you want to delete the assignment for"," ",c.jsx("span",{className:"font-semibold text-gray-900",children:de.subjectName})," ","in Grade ",de.grade,", Class ",de.classNumber,"?"]}),c.jsx("p",{className:"text-xs text-red-600",children:"This action cannot be undone."})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[c.jsx(ot,{variant:"outline",onClick:_t,children:"Cancel"}),c.jsx(ot,{variant:"danger",onClick:dt,children:"Delete Assignment"})]})]})}),c.jsx(gt.div,{className:"fixed top-4 right-4 space-y-2 z-50",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8,duration:.5},children:f.map(Re=>c.jsx(gt.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:c.jsx("div",{className:`p-4 rounded-lg shadow-lg ${Re.type==="success"?"bg-green-600 text-white":Re.type==="error"?"bg-red-600 text-white":Re.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{children:Re.message}),c.jsx("button",{onClick:()=>setNotifications(yt=>yt.filter(tr=>tr.id!==Re.id)),className:"ml-4 text-white hover:text-gray-200",children:""})]})})},Re.id))}),Xt&&c.jsx(Ca,{isOpen:Xt,onClose:Wr,title:"Change Password",size:"small",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),c.jsx("input",{type:"password",name:"currentPassword",value:br.currentPassword,onChange:Ee,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter current password"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),c.jsx("input",{type:"password",name:"newPassword",value:br.newPassword,onChange:Ee,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter new password"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),c.jsx("input",{type:"password",name:"confirmPassword",value:br.confirmPassword,onChange:Ee,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Confirm new password"})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx(ot,{type:"button",variant:"secondary",onClick:Wr,className:"flex-1",children:"Cancel"}),c.jsx(ot,{type:"button",onClick:he,className:"flex-1",children:"Change Password"})]})]})})]});function $s(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{children:"My Subjects & Classes"})}),c.jsx($t.Body,{children:k.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned"}),c.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any subjects assigned yet."}),c.jsx(ot,{variant:"outline",onClick:()=>T("subjects"),children:"Manage Subjects"})]}):c.jsx("div",{className:"space-y-6",children:k.map((Re,yt)=>c.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+yt*.1,duration:.3},className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Re.name}),c.jsxs("span",{className:"text-sm text-gray-500",children:[Re.classes?.length||0," classes"]})]}),Re.classes&&Re.classes.length>0?c.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Re.classes.map((tr,$e)=>c.jsx(gt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+yt*.1+$e*.05,duration:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:c.jsxs(ot,{variant:"outline",size:"sm",onClick:()=>{A(tr.grade),L(tr.class),T("results")},className:"font-medium",children:[tr.grade,"/",tr.class]})},$e))}):c.jsx("div",{className:"text-center py-4 text-gray-500",children:c.jsx("span",{className:"text-sm",children:"No classes assigned to this subject"})})]},Re.id))})})]})}),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:c.jsxs($t,{children:[c.jsxs($t.Header,{children:[c.jsx($t.Title,{children:"Test Performance Overview"}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Test performance over time with average scores"})]}),c.jsx($t.Body,{children:k.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"mb-2",children:c.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),c.jsx("p",{className:"text-gray-500",children:"No subjects assigned - no performance data available"})]}):c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:(()=>{const Re=[];return k.forEach(yt=>{yt.classes&&yt.classes.forEach(tr=>{const $e=`${tr.grade}/${tr.class}`;Re.find(ft=>ft.key===$e)||Re.push({key:$e,grade:tr.grade,class:tr.class,subject:yt.name})})}),Re})().map((Re,yt)=>c.jsxs("button",{onClick:()=>{xe.debug(" Class button clicked:",Re.key),We(Re.key),Fr(Re.key)},className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${Vt===Re.key?"bg-blue-100 text-blue-700 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[Re.grade,"/",Re.class]},Re.key))}),Vt?c.jsx("div",{className:"mt-4",children:c.jsx(XAe,{data:At,loading:ct,error:Ut})}):c.jsxs("div",{className:"mt-4 text-center text-muted py-4",children:[c.jsx("div",{className:"mb-2",children:c.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),c.jsx("p",{className:"text-gray-500",children:"Select a class above to view test performance data"})]})]})})]})})]})}function ci(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsx($t,{children:c.jsx($t.Header,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx($t.Title,{children:"Subject Management"}),c.jsx(ot,{variant:"primary",onClick:rt,children:"Add Subject"})]})})})}),k.length===0?c.jsx(gt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:c.jsx($t,{children:c.jsx($t.Body,{children:c.jsxs("div",{className:"text-center p-12",children:[c.jsx(gt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No subjects assigned yet"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first subject to get started with creating tests and managing classes."}),c.jsx(ot,{variant:"primary",onClick:rt,size:"lg",children:"Add Your First Subject"})]})})})}):c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:c.jsxs($t,{children:[c.jsx($t.Header,{children:c.jsx($t.Title,{children:"Your Subjects"})}),c.jsx($t.Body,{children:c.jsx("div",{className:"space-y-4",children:k.map((Re,yt)=>c.jsx(gt.div,{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-green-500",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+yt*.1,duration:.3},whileHover:{scale:1.02,backgroundColor:"#f9fafb"},children:c.jsx("div",{className:"flex justify-between items-start",children:c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:Re.name}),c.jsx("div",{className:"flex flex-wrap gap-2",children:Re.classes?.map((tr,$e)=>c.jsxs(gt.div,{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 text-xs rounded-full px-3 py-1",initial:{scale:0},animate:{scale:1},transition:{delay:.4+yt*.1+$e*.05,duration:.2},whileHover:{scale:1.1},children:[c.jsxs("span",{children:[tr.grade," - ",tr.className]}),c.jsx("button",{onClick:()=>Ze(Re.id,Re.name,tr.grade,tr.class),className:"ml-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete this subject assignment",children:c.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},$e))||c.jsx("span",{className:"text-gray-500 text-sm",children:"No classes assigned"})})]})})},yt))})})]})})]})}function on(){return c.jsxs("div",{className:"space-y-8",children:[c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:c.jsx($t,{children:c.jsx($t.Header,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx($t.Title,{children:"Active Tests"}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx(ot,{variant:"outline",onClick:mn,children:"Refresh"}),c.jsx(ot,{variant:"primary",onClick:()=>t("/teacher/tests/create"),children:"Create New Test"})]})]})})})}),dn.length===0?c.jsx(gt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:c.jsx($t,{children:c.jsx($t.Body,{children:c.jsxs("div",{className:"text-center p-12",children:[c.jsx(gt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No active tests found"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first test to get started with assessments."}),c.jsx(ot,{variant:"primary",onClick:()=>t("/teacher/tests/create"),size:"lg",children:"Create Your First Test"})]})})})}):c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"space-y-4",children:dn.map((Re,yt)=>c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+yt*.1,duration:.3},whileHover:{scale:1.01},children:c.jsx($t,{children:c.jsx($t.Body,{children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{className:"flex-1 flex items-center space-x-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 min-w-0 flex-shrink-0 max-w-xs truncate",title:Re.test_name,children:Re.test_name}),c.jsx("span",{className:"hidden sm:inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium flex-shrink-0",children:Re.test_type}),c.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold flex-shrink-0",children:[Re.grade,"/",Re.class]}),c.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[c.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Re.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:Re.is_active?"Active":"Inactive"}),c.jsx("div",{className:"text-sm text-gray-500 flex-shrink-0",children:new Date(Re.created_at).toLocaleDateString()})]})]}),c.jsxs("div",{className:"flex gap-2 ml-4 flex-shrink-0",children:[c.jsx("div",{className:"sm:hidden",children:c.jsx(ot,{variant:"outline",onClick:()=>Qt({...Re,assignments:[{assignment_id:Re.assignment_id,grade:Re.grade,class:Re.class,is_active:Re.is_active}]}),size:"sm",className:"text-xs",title:`Type: ${Re.test_type} | Class: ${Re.grade}/${Re.class} | ${new Date(Re.created_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})}`,children:"Details"})}),c.jsx("div",{className:"hidden sm:block",children:c.jsx(ot,{variant:"outline",onClick:()=>Qt({...Re,assignments:[{assignment_id:Re.assignment_id,grade:Re.grade,class:Re.class,is_active:Re.is_active}]}),size:"sm",children:"Details"})}),!Re.is_active&&c.jsx(ot,{variant:"primary",onClick:()=>tn(Re.assignment_id),size:"sm",disabled:Br===Re.assignment_id,children:Br===Re.assignment_id?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating..."]}):"Activate"}),c.jsx(ot,{variant:"success",onClick:()=>Cr(Re.assignment_id),size:"sm",disabled:Dt===Re.assignment_id,children:Dt===Re.assignment_id?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]})})})},`${Re.test_id}-${Re.assignment_id}-${yt}`))})]})}},JAe={multipleChoice:"multiple_choice",trueFalse:"true_false",input:"input",matching:"matching_type",wordMatching:"word_matching",drawing:"drawing",fillBlanks:"fill_blanks",speaking:"speaking"},WL=()=>{const{user:e}=Ps();Ade();const{notifications:t,showNotification:r,removeNotification:n}=ai(),[s,a]=_.useState(!1),[i,o]=_.useState(!1),[l,u]=_.useState("typeSelection"),[d,f]=_.useState(!1),[h,g]=_.useState(null),[x,y]=_.useState([]),[v,T]=_.useState(!1),[k,b]=_.useState(!1),[E,N]=_.useState(!1),[P,M]=_.useState(!1),[j,A]=_.useState({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:"",isShuffled:!1}),[D,L]=_.useState([]),[G,X]=_.useState(null);_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null),_.useRef(null);const se=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in initializeTestCreation, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" Setting up test creation event listeners..."),z(),console.log(" Test creation initialization complete")},[e,r]),Q=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestTypeSelection, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" showTestTypeSelection called - starting new test creation"),o(!1),console.log(" Reset testAssignmentCompleted flag to false"),a(!0),console.log(" Set isInTestCreation flag to true"),re(),u("typeSelection"),V("testTypeSelection")},[e,r]),re=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in disableNavigationButtons, redirecting to login");return}console.log(" Disabling navigation buttons..."),f(!0)},[e]),B=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in enableNavigationButtons, redirecting to login");return}console.log(" Enabling navigation buttons..."),f(!1)},[e]),V=_.useCallback(async ce=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveTestCreationState, redirecting to login");return}console.log("  saveTestCreationState called with step:",ce),console.log("  Call stack:",new Error().stack);const ge={multipleChoice:{buttonVisible:!0,hintVisible:!1},trueFalse:{buttonVisible:!0,hintVisible:!1},input:{buttonVisible:!0,hintVisible:!1}},Pe={isInTestCreation:!0,currentStep:ce,timestamp:Date.now(),excelState:ge};localStorage.setItem("test_creation_state",JSON.stringify(Pe)),console.log(" Saved test creation state:",Pe);const je={};switch(ce){case"testTypeSelection":break;case"multipleChoiceForm":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.numOptions=j.numOptions||"",je.questions=j.questions||{};break;case"trueFalseForm":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.questions=j.questions||{};break;case"inputForm":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.questions=j.questions||{};break;case"formCreation":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.numOptions=j.numOptions||"",je.questions=j.questions||{},je.enableTimer=!!j.enableTimer,je.timerMinutes=j.timerMinutes||"",je.isShuffled=!!j.isShuffled;break;case"assignment":case"testAssignment":je.testName=j.testName||"",je.numQuestions=j.numQuestions||"",je.numOptions=j.numOptions||"",je.questions=j.questions||{};break;default:console.log(" Unknown step in saveTestCreationState:",ce);break}Object.keys(je).length>0&&(localStorage.setItem(`form_data_${ce}`,JSON.stringify(je)),console.log(" Saved form data for step:",ce,je))},[e,j]),R=_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearTestCreationState, redirecting to login");return}localStorage.removeItem("test_creation_state"),localStorage.removeItem("test_creation_form_data");const ce=[];for(let ge=0;ge<localStorage.length;ge++){const Pe=localStorage.key(ge);Pe&&(Pe.includes("test")||Pe.includes("form")||Pe.includes("question"))&&ce.push(Pe)}ce.forEach(ge=>{localStorage.removeItem(ge),console.log(" Removed localStorage key:",ge)}),console.log(" Cleared test creation state from localStorage")},[e]);_.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearAllTestFields, redirecting to login");return}console.log(" Clearing all test form fields..."),A({testName:"",numQuestions:0,numOptions:0,questions:{}}),g(null),L([]),X(null),console.log(" Cleared all test form fields")},[e]);const H=_.useCallback(()=>{console.log(" Resetting Excel upload state..."),at({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),["multiple-choice","true-false","input","word-matching"].forEach(ge=>{const Pe=document.querySelector(`.excel-upload-btn[data-test-type="${ge}"]`);Pe&&(Pe.style.display="none",console.log(" Excel button hidden for:",ge));const je=document.querySelector(`.excel-hint[data-test-type="${ge}"]`);je&&(je.style.display="none",console.log(" Excel hint hidden for:",ge));const Ze=document.querySelector(`.excel-file-input[data-test-type="${ge}"]`);Ze&&(Ze.value="",console.log(" File input cleared for:",ge))}),console.log(" Excel upload state reset complete")},[]),z=_.useCallback(()=>{console.log(" Setting up auto-save listeners for initial form fields..."),["testName","numQuestions","numOptions","enableTimer","timerMinutes","isShuffled"].forEach(ge=>{const Pe=document.getElementById(ge);Pe&&Pe.addEventListener("input",()=>{console.log(` Auto-save triggered for field: ${ge}`)})}),console.log(" Form auto-save setup complete")},[]);_.useCallback(async ce=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveFormDataForStep, redirecting to login");return}console.log("  saveFormDataForStep called with step:",ce),console.log("  Call stack:",new Error().stack);const ge={};switch(ce){case"testTypeSelection":break;case"multipleChoiceForm":ge.testName=j.testName||"",ge.numQuestions=j.numQuestions||"",ge.numOptions=j.numOptions||"",ge.questions=j.questions||{};break;case"trueFalseForm":ge.testName=j.testName||"",ge.numQuestions=j.numQuestions||"",ge.questions=j.questions||{};break;case"inputForm":ge.testName=j.testName||"",ge.numQuestions=j.numQuestions||"",ge.questions=j.questions||{};break;case"formCreation":ge.testName=j.testName||"",ge.numQuestions=j.numQuestions||"",ge.numOptions=j.numOptions||"",ge.questions=j.questions||{};break;default:console.log(" Unknown step for form data save:",ce);return}localStorage.setItem("test_creation_form_data",JSON.stringify({step:ce,data:ge,timestamp:Date.now()})),console.log(" Saved form data for step:",ce,ge)},[e,j]);const I=_.useCallback(async ce=>{console.log(" Restoring form data for step:",ce);try{const ge=localStorage.getItem(`form_data_${ce}`);if(ge){const Pe=JSON.parse(ge);console.log(" Restored form data:",Pe),A(je=>{const Ze={...je,...Pe};return console.log(" Updated formData with restored data:",Ze),console.log(" Matching test data in restored data:",Ze.matchingTestData),Ze}),Object.keys(Pe).forEach(je=>{const Ze=document.getElementById(je);Ze&&Pe[je]!==void 0&&(Ze.value=Pe[je])}),console.log(" Form data restored for step:",ce)}else console.log(" No saved data found for step:",ce)}catch(ge){console.error(" Error restoring form data:",ge)}},[e]),W=_.useCallback(()=>{console.log(" Setting up multiple choice form auto-save..."),["mcNumOptions"].forEach(Pe=>{const je=document.getElementById(Pe);je&&je.addEventListener("input",()=>{console.log(` Auto-save triggered for MC field: ${Pe}`)})}),document.querySelectorAll("#mcQuestionsContainer input, #mcQuestionsContainer textarea, #mcQuestionsContainer select").forEach(Pe=>{Pe.addEventListener("input",()=>{console.log(" Auto-save triggered for MC question field")})}),console.log(" Multiple choice form auto-save setup complete")},[]),K=_.useCallback(()=>{console.log(" Setting up true/false form auto-save..."),document.querySelectorAll("#tfQuestionsContainer input, #tfQuestionsContainer textarea, #tfQuestionsContainer select").forEach(ge=>{ge.addEventListener("input",()=>{console.log(" Auto-save triggered for TF question field")})}),console.log(" True/false form auto-save setup complete")},[]),ee=_.useCallback(()=>{console.log(" Setting up input form auto-save..."),document.querySelectorAll("#inputQuestionsContainer input, #inputQuestionsContainer textarea, #inputQuestionsContainer select").forEach(ge=>{ge.addEventListener("input",()=>{console.log(" Auto-save triggered for Input question field")})}),console.log(" Input form auto-save setup complete")},[]),oe=_.useCallback(ce=>{console.log(" showExcelUploadButton called with testType:",ce);const ge=ce==="multiple-choice"?"multipleChoice":ce==="true-false"?"trueFalse":ce==="input"?"input":ce;at(Pe=>({...Pe,[ge]:{...Pe[ge],buttonVisible:!0}}))},[]),Z=_.useCallback(ce=>{console.log(" showExcelHint called with testType:",ce);const ge=ce==="multiple-choice"?"multipleChoice":ce==="true-false"?"trueFalse":ce==="input"?"input":ce;at(Pe=>({...Pe,[ge]:{...Pe[ge],hintVisible:!0}}))},[]),le=_.useCallback(async(ce,ge,Pe)=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTestAssignmentOptions, redirecting to login");return}console.log("displayTestAssignmentOptions called with:",{classes:ce,testType:ge,testId:Pe}),y(ce),console.log(" Test assignment options displayed for:",{testType:ge,testId:Pe,classesCount:ce.length})},[e]),ue=_.useCallback(async(ce,ge)=>{try{if(console.log("Loading teacher grades and classes for test assignment"),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}console.log("Teacher ID:",e.teacher_id);const je=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log("Teacher subjects response:",je),je.success&&je.subjects&&je.subjects.length>0?(console.log("Teacher subjects loaded:",je.subjects),y(je.subjects),le(je.subjects,ce,ge)):(console.log("No teacher subjects found"),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(Pe){console.error("Error loading teacher grades and classes:",Pe),r("Error loading teacher grades and classes","error")}},[e,r,le]),de=_.useCallback(async()=>{if(console.log(" Loading available classes..."),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}try{const ge=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log(" Teacher subjects response:",ge),ge.success&&ge.subjects&&ge.subjects.length>0?(console.log(" Teacher subjects loaded:",ge.subjects),y(ge.subjects)):(console.log("No teacher subjects found"),y([]),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(ce){console.error(" Error loading available classes:",ce),r("Failed to load available classes","error")}},[e,r]);_.useCallback(async(ce,ge)=>{if(i){o(!1);return}if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestAssignment, redirecting to login");return}re(),V("testAssignment"),X(ge),g(ce),u("testAssignment"),ue(ce,ge),console.log(" Test assignment interface shown for:",{testType:ce,testId:ge})},[i,e,re,V,ue]);const Te=_.useCallback(async ce=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTeacherActiveTests, redirecting to login");return}if(console.log(" Displaying teacher active tests:",ce),ce.length===0){Ve([]);return}Ve(ce),console.log(" Active tests displayed:",ce.length,"tests")},[e]);_.useCallback(async(ce,ge)=>{try{console.log(" Loading test questions for:",{testType:ce,testId:ge});const Pe=await Pn.getTestQuestions(ge,ce);return console.log(" Test questions loaded:",Pe),Pe}catch(Pe){throw console.error("Error loading test questions:",Pe),Pe}},[]),_.useCallback((ce,ge,Pe,je)=>{console.log(" Showing teacher test details modal:",{testType:ce,testId:ge,testName:Pe,questionsCount:je.length}),console.log("Test Details:",{testType:ce,testId:ge,testName:Pe,questions:je.map(Ze=>({id:Ze.question_id,question:Ze.question,correctAnswer:Ze.correct_answer}))}),r(`Test details for "${Pe}" loaded successfully.`,"success")},[r]);const ie=_.useCallback(async()=>{console.log(" DEBUG: loadTeacherActiveTests called");try{console.log(" DEBUG: Fetching teacher active tests using JWT authentication...");const ce=await Pn.getTeacherTests();console.log(" DEBUG: Tests loaded:",ce),ce&&ce.length>0?(console.log(" DEBUG: Success! Displaying",ce.length,"tests"),Te(ce)):(console.log(" DEBUG: No tests found"),Ve([]))}catch(ce){console.error(" DEBUG: Error loading active tests:",ce),r("Error loading active tests.","error")}},[r,Te]),pe=_.useCallback(()=>{console.log("showTestCreationSuccessMessage called"),r("Test created and assigned successfully!","success"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}}),L([]),o(!1),a(!1),R()},[r,R]),Ae=_.useCallback(async(ce,ge)=>{if(console.log(" === ASSIGN TEST TO CLASSES DEBUG START ==="),console.log(" Test Type:",ce),console.log(" Test ID:",ge),console.log(" Current formData:",j),console.log(" Selected Classes:",D),console.log(" User:",e),!e||!e.teacher_id){console.error(" No valid teacher session found in assignTestToClasses, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}if(console.log(" Teacher ID:",e.teacher_id),D.length===0){console.warn(" No classes selected"),r("Please select at least one class.","warning");return}try{console.log(" Preparing test + assignment request..."),await lu.loadAcademicCalendar();const je=lu.getCurrentTerm()?.id;if(!je)throw new Error("No current academic period found");const Ze=D.map(Ot=>{const Qt={grade:parseInt(Ot.grade),class:parseInt(Ot.class),subject_id:parseInt(Ot.subject_id),academic_period_id:je,due_date:null};return console.log(" Created assignment:",Qt),Qt});if(console.log(" Final assignments array:",Ze),ce==="matching"){console.log(" Processing matching test..."),console.log(" Setting isAssigningTest to true for matching test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Rr=>setTimeout(Rr,100));const Ot=j.matchingTestData;if(console.log(" Matching test data from formData:",Ot),!Ot){console.error(" Matching test data not found in formData"),r("Matching test data not found. Please recreate the test.","error");return}console.log(" Matching test data found, processing...");let Qt;Ot.processedQuestions?(console.log(" Using pre-processed questions from MatchingTestCreator"),Qt=Ot.processedQuestions):(console.log(" Converting blocks to questions (fallback)..."),console.log(" Blocks:",Ot.blocks),console.log(" Words:",Ot.words),console.log(" Arrows:",Ot.arrows),Qt=Ot.blocks.map((Rr,tn)=>{const mn=Ot.words.find(gn=>gn.blockId===Rr.id)?.word||`Word ${tn+1}`,dn=Ot.arrows.some(gn=>gn.startBlock===Rr.id),Fr=Ot.arrows.find(gn=>gn.startBlock===Rr.id)||null,li={question_id:tn+1,word:mn,block_coordinates:{x:Rr.x,y:Rr.y,width:Rr.width,height:Rr.height},has_arrow:dn,arrow:Fr?{startX:Fr.startX,startY:Fr.startY,endX:Fr.endX,endY:Fr.endY,style:Fr.style||{}}:null};return console.log(` Question ${tn+1}:`,li),li})),console.log(" Final questions array:",Qt);const Cr={teacher_id:e.teacher_id,test_name:j.testName,image_url:Ot.imageUrl,num_blocks:Ot.blocks.length,questions:Qt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:Ze};console.log(" Final matching test data payload:",Cr),console.log(" Calling testService.saveMatchingTest...");const Br=await Pn.saveMatchingTest(Cr);console.log(" API Response:",Br),Br.success?(console.log(" Matching test created and assigned successfully!"),r("Matching test created and assigned successfully!","success"),console.log("Matching test created and assigned successfully"),o(!0),Me()):(console.error(" Failed to create matching test:",Br.message),r("Error creating and assigning matching test: "+Br.message,"error")),M(!1);return}if(ce==="wordMatching"){console.log(" Processing word matching test..."),console.log(" Setting isAssigningTest to true for word matching test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Rr=>setTimeout(Rr,100));const Ot=j.wordMatchingData;if(console.log(" Word matching test data from formData:",Ot),!Ot){console.error(" Word matching test data not found in formData"),r("Word matching test data not found. Please recreate the test.","error");return}console.log(" Word matching test data found, processing...");const Qt=Ot.wordPairs.map((Rr,tn)=>({question_id:tn+1,left_word:Rr.leftWord,right_word:Rr.rightWord}));console.log(" Final word matching questions array:",Qt);const Cr={teacher_id:e.teacher_id,test_type:"word_matching",test_name:j.testName,num_questions:Ot.wordPairs.length,interaction_type:Ot.interactionType||"drag",questions:Qt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:Ze};console.log(" Final word matching test data payload:",Cr),console.log(" Calling testService.assignTestToClasses for word matching...");const Br=await Pn.assignTestToClasses(Cr);console.log(" API Response:",Br),Br.success?(console.log(" Word matching test created and assigned successfully!"),r("Word matching test created and assigned successfully!","success"),console.log("Word matching test created and assigned successfully"),o(!0),Me()):(console.error(" Failed to create word matching test:",Br.message),r("Error creating and assigning word matching test: "+Br.message,"error")),M(!1);return}if(ce==="drawing"){console.log(" Processing drawing test..."),console.log(" Setting isAssigningTest to true for drawing test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Rr=>setTimeout(Rr,100));const Ot=j.drawingData;if(console.log(" Drawing test data from formData:",Ot),!Ot){console.error(" Drawing test data not found in formData"),r("Drawing test data not found. Please recreate the test.","error");return}console.log(" Drawing test data found, processing...");const Qt=Ot.questions||[];console.log(" Drawing questions array:",Qt);const Cr={teacher_id:e.teacher_id,test_type:"drawing",test_name:j.testName,num_questions:Ot.num_questions,passing_score:Ot.passing_score,questions:Qt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:Ze};console.log(" Final drawing test data payload:",Cr),console.log(" Calling testService.assignTestToClasses...");const Br=await Pn.assignTestToClasses(Cr);console.log(" API Response:",Br),Br.success?(console.log(" Drawing test created and assigned successfully!"),r("Drawing test created and assigned successfully!","success"),o(!0),Me()):(console.error(" Failed to create drawing test:",Br.message),r("Error creating and assigning drawing test: "+Br.message,"error")),M(!1);return}if(ce==="fillBlanks"){console.log(" Processing fill blanks test..."),console.log(" Setting isAssigningTest to true for fill blanks test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Rr=>setTimeout(Rr,100));const Ot=j.fillBlanksData;if(console.log(" Fill blanks test data from formData:",Ot),!Ot){console.error(" Fill blanks test data not found in formData"),r("Fill blanks test data not found. Please recreate the test.","error");return}console.log(" Fill blanks test data found, processing...");const Qt=Ot.blanks||[];console.log(" Fill blanks questions array:",Qt);const Cr={teacher_id:e.teacher_id,test_type:"fill_blanks",test_name:j.testName,test_text:Ot.test_text,num_questions:Ot.num_questions,num_blanks:Ot.num_blanks,separate_type:Ot.separate_type,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:Qt,assignments:Ze};console.log(" Final fill blanks test data payload:",Cr),console.log(" Calling testService.assignTestToClasses...");const Br=await Pn.assignTestToClasses(Cr);console.log(" API Response:",Br),Br.success?(console.log(" Fill blanks test created and assigned successfully!"),r("Fill blanks test created and assigned successfully!","success"),o(!0),Me()):(console.error(" Failed to create fill blanks test:",Br.message),r("Error creating and assigning fill blanks test: "+Br.message,"error")),M(!1);return}if(ce==="speaking"){console.log(" Processing speaking test..."),console.log(" Setting isAssigningTest to true for speaking test..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Rr=>setTimeout(Rr,100));const Ot=j.speakingData;if(console.log(" Speaking test data from formData:",Ot),!Ot){console.error(" Speaking test data not found in formData"),r("Speaking test data not found. Please recreate the test.","error");return}console.log(" Speaking test data found, processing...");const Qt={teacher_id:e.teacher_id,test_type:"speaking",test_name:j.testName,time_limit:Ot.time_limit,min_duration:Ot.min_duration,max_duration:Ot.max_duration,max_attempts:Ot.max_attempts,min_words:Ot.min_words,passing_score:Ot.passing_score,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:Ot.questions,assignments:Ze};console.log(" Final speaking test data payload:",Qt),console.log(" Calling save-speaking-test-with-assignments for speaking test...");const Br=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-speaking-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Qt)})).json();console.log(" API Response:",Br),Br.success?(console.log(" Speaking test created and assigned successfully!"),r("Speaking test created and assigned successfully!","success"),o(!0),Me()):(console.error(" Failed to create speaking test:",Br.message),r("Error creating and assigning speaking test: "+Br.message,"error")),M(!1);return}console.log(" Processing non-matching test..."),console.log(" Form data questions:",j.questions);const dt=Object.keys(j.questions).map(Ot=>{const Qt=j.questions[Ot];console.log(` Processing question ${Ot}:`,Qt);let Cr;if(ce==="input")Cr={correct_answers:Qt.correct_answers||[Qt.correctAnswer||""]};else if(ce==="trueFalse"){const Rr=Qt.correct_answer||Qt.correctAnswer||Qt.correct_answers?.[0]||"";Cr={correct_answer:Rr==="true"}}else Cr={correct_answer:Qt.correctAnswer||Qt.correct_answer||Qt.correct_answers?.[0]||""};const Br={question_id:parseInt(Ot),question:Qt.question,...Cr,options:Qt.options||[]};return console.log(` Question ${Ot} correct_answers:`,Qt.correct_answers),console.log(` Question ${Ot} correctAnswer:`,Qt.correctAnswer),console.log(` Converted question ${Ot}:`,Br),Br});console.log(" Final questions array:",dt);const _t={teacher_id:e.teacher_id,test_type:JAe[ce],test_name:j.testName,num_questions:j.numQuestions,num_options:j.numOptions,questions:dt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,is_shuffled:!!j.isShuffled,assignments:Ze};console.log(" Final test data payload:",_t),console.log(" Setting isAssigningTest to true..."),M(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Ot=>setTimeout(Ot,100)),console.log(" Calling testService.assignTestToClasses...");const ir=await Pn.assignTestToClasses(_t);console.log(" API Response:",ir),ir.success?(console.log(" Test created and assigned successfully!"),r("Test created and assigned successfully!","success"),console.log("Test created and assigned successfully"),o(!0),Me()):(console.error(" Failed to create and assign test:",ir.message),r("Error creating and assigning test: "+ir.message,"error"))}catch(Pe){console.error(" Exception in assignTestToClasses:",Pe),console.error("Error creating and assigning test:",Pe),r("Error creating and assigning test. Please try again.","error")}finally{M(!1)}console.log(" === ASSIGN TEST TO CLASSES DEBUG END ===")},[e,D,j,r,pe]),Me=_.useCallback(async()=>{console.log("returnToMainCabinet called - restoring main cabinet view");try{a(!1),o(!1),u("typeSelection"),g(null),X(null),L([]),B(),R(),pe(),console.log(" Returned to main cabinet")}catch(ce){console.error("Error returning to main cabinet:",ce)}},[B,R,pe]),[Je,Ve]=_.useState([]),[Dt,lt]=_.useState(!1);_.useCallback(async()=>{console.log(" Refreshing active tests data...");try{await ie(),r("Active tests data refreshed.","success")}catch(ce){console.error("Error refreshing active tests data:",ce),r("Error refreshing data.","error")}},[ie,r]);const[At,vt]=_.useState([]),[ct,bt]=_.useState([]),[Ut,Bt]=_.useState(!1),[Vt,We]=_.useState(!1),Ue=_.useCallback(async ce=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayExistingSubjectsInSelection, redirecting to login");return}console.log("Displaying existing subjects in selection interface:",ce),vt(ce),console.log(" Existing subjects displayed in selection:",ce.length,"subjects")},[e]);_.useCallback(async()=>{try{console.log("Loading existing subjects...");const ce=await Os.getTeacherSubjects();console.log("Existing subjects loaded:",ce),ce&&ce.length>0?Ue(ce):(console.log("No existing subjects found"),vt([]))}catch(ce){console.error("Error loading existing subjects:",ce),r("Error loading subjects.","error")}},[r,Ue]);const tt=_.useCallback(ce=>{console.log("Checking for outside click...");const ge=document.getElementById("dropdownMenu"),Pe=document.querySelector("[data-menu-button]");ge&&!ge.contains(ce.target)&&!Pe?.contains(ce.target)&&(console.log("Outside click detected, closing menu"),ge.classList.remove("show"),document.removeEventListener("click",tt))},[]),[nt,at]=_.useState({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),It=_.useCallback((ce,ge)=>{const Pe=ce.target.files[0];if(!Pe)return;if(!Pe.name.match(/\.(xlsx|xls)$/i)){r("Please select a valid Excel file (.xlsx or .xls)","error"),ce.target.value="";return}if(Pe.size>5*1024*1024){r("File is too large. Please select a file smaller than 5MB.","error"),ce.target.value="";return}N(!0);const je=new FileReader;je.onload=function(Ze){try{console.log(" File loaded, processing data...");const dt=new Uint8Array(Ze.target.result),_t=Q8(dt,{type:"array"}),ir=_t.SheetNames[0],Ot=_t.Sheets[ir],Qt=Yb.sheet_to_json(Ot,{header:1});console.log(" Parsed Excel data:",Qt),Xt(Qt,ge),N(!1)}catch(dt){console.error("Error processing Excel file:",dt),r("Error reading Excel file: "+dt.message,"error"),ce.target.value="",N(!1)}},je.onerror=function(){r("Failed to read file","error"),ce.target.value="",N(!1)},je.readAsArrayBuffer(Pe)},[r]),Lt=_.useCallback(()=>{console.log(" Initializing Excel upload for all test types...");const ce=document.querySelectorAll(".excel-upload-btn");console.log(` Found ${ce.length} Excel upload buttons`),ce.forEach((ge,Pe)=>{const je=ge.dataset.testType,Ze=document.querySelector(`.excel-file-input[data-test-type="${je}"]`);console.log(` Processing button ${Pe+1}: testType=${je}, fileInput=${Ze?"found":"not found"}`),Ze?(ge._excelClickHandler&&ge.removeEventListener("click",ge._excelClickHandler),Ze._excelChangeHandler&&Ze.removeEventListener("change",Ze._excelChangeHandler),ge._excelClickHandler=()=>{console.log(` Excel upload button clicked for test type: ${je}`),Ze.click()},Ze._excelChangeHandler=dt=>{console.log(` File input changed for test type: ${je}`),It(dt,je)},ge.addEventListener("click",ge._excelClickHandler),Ze.addEventListener("change",Ze._excelChangeHandler),console.log(` Excel upload initialized for test type: ${je}`)):console.warn(` File input not found for test type: ${je}`)}),console.log(" Excel upload initialization complete")},[It]),Xt=_.useCallback((ce,ge)=>{const Pe=ce.filter(Ot=>Array.isArray(Ot)&&Ot.length>0&&Ot.some(Qt=>Qt&&Qt.toString().trim()!==""));console.log(" Original Excel data rows:",ce.length),console.log(" Filtered Excel data rows:",Pe.length);const Ze=vr(Pe,ge).dataRows;if(Ze.length===0){const Ot="No data rows found after header processing. Please check your Excel file.";r(Ot,"error"),alert(Ot),Be(ge);return}console.log(` Processing Excel data for test type: ${ge}`),console.log(" Data rows after header processing:",Ze);const dt=Sr(Ze,ge);if(console.log(" Recognition result:",dt),!dt.recognized){console.log(` Excel data recognition failed for test type: ${ge}`);const Ot="Excel data recognition failed. Please check your file format.";r(Ot,"error"),alert(Ot),Be(ge);return}console.log(` Excel data recognition successful for test type: ${ge}`);const _t=Ze.length,ir=Fe(ge);if(ir===0)console.log(` No question count specified, using CSV count: ${_t}`),A(Ot=>({...Ot,numQuestions:_t}));else if(_t!==ir){const Ot=`Your CSV file has ${_t} data rows, but you specified ${ir} questions.

Please either:
1. Change your question count to ${_t}, or
2. Fix your CSV file to have exactly ${ir} data rows

Then try uploading again.`;r(Ot,"error"),Be(ge);return}He(Ze,ge)},[r]),vr=_.useCallback((ce,ge)=>{if(ce.length===0)return{hasHeaders:!1,headerRow:null,dataRows:ce};const Pe=ce[0],je=br(ge);if(Dr(Pe,je).isLikelyHeader){const dt=`The first row of your Excel file looks like it contains headers:

"${Pe.join(" | ")}"

Does the first row contain column headers?

Click "OK" if YES (headers will be removed)
Click "Cancel" if NO (first row will be treated as data)`;if(window.confirm(dt))return{hasHeaders:!0,headerRow:Pe,dataRows:ce.slice(1)}}return{hasHeaders:!1,headerRow:null,dataRows:ce}},[]),br=_.useCallback(ce=>{switch(ce){case"multipleChoice":return{keywords:["question","answer","correct","option","a","b","c","d","e","f"],expectedColumns:4};case"trueFalse":return{keywords:["question","answer","correct","true","false"],expectedColumns:2};case"input":return{keywords:["question","answer","correct"],expectedColumns:2};default:return{keywords:[],expectedColumns:0}}},[]),Dr=_.useCallback((ce,ge)=>{if(!ce||ce.length===0)return{isLikelyHeader:!1};if(ce.length<ge.expectedColumns)return{isLikelyHeader:!1};const Pe=ce.join(" ").toLowerCase(),je=ge.keywords.filter(dt=>Pe.includes(dt.toLowerCase()));return{isLikelyHeader:je.length>ge.keywords.length/2,keywordMatches:je}},[]),Sr=_.useCallback((ce,ge)=>{if(ce.length===0)return r("No data rows found. Please check your Excel file.","error"),{recognized:!1,data:[]};console.log(` Checking data pattern for test type: ${ge}`),console.log(" Excel data to validate:",ce);const Pe=pr(ce,ge);if(console.log(" Recognition result:",Pe),!Pe.matches){const je=`Your Excel file doesn't match the expected format.

Required format:
${ye(ge)}

Please review your Excel file and make sure it follows this format exactly.

Then try uploading again.`;return console.log(" Data pattern validation failed:",je),console.log(" Calling showNotification with message:",je),r(je,"error"),console.log(" showNotification called"),alert(je),{recognized:!1,data:[]}}return console.log(` Data pattern validation passed for test type: ${ge}`),{recognized:!0,data:ce}},[r]),pr=_.useCallback((ce,ge)=>{if(ge==="multipleChoice")for(let Pe=0;Pe<ce.length;Pe++){const je=ce[Pe];if(je.length<4)return{matches:!1,issue:`Row ${Pe+1} has ${je.length} columns but needs at least 4`};if(!je[0]||je[0].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no question in column 1`};if(!je[1]||je[1].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no correct answer in column 2`}}else if(ge==="trueFalse")for(let Pe=0;Pe<ce.length;Pe++){const je=ce[Pe];if(je.length<2)return{matches:!1,issue:`Row ${Pe+1} has ${je.length} columns but needs at least 2`};if(!je[0]||je[0].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no question in column 1`};const Ze=je[1]?.toString().trim().toLowerCase();if(!Ze||!["true","false","t","f"].includes(Ze))return{matches:!1,issue:`Row ${Pe+1} has invalid correct answer in column 2 (must be True/False)`}}else if(ge==="input")for(let Pe=0;Pe<ce.length;Pe++){const je=ce[Pe];if(je.length<2)return{matches:!1,issue:`Row ${Pe+1} has ${je.length} columns but needs at least 2`};if(!je[0]||je[0].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no question in column 1`};if(!je[1]||je[1].toString().trim()==="")return{matches:!1,issue:`Row ${Pe+1} has no correct answer in column 2`}}return{matches:!0}},[]),ye=_.useCallback(ce=>{switch(ce){case"multipleChoice":return`Column 1: Question
Column 2: Correct Answer (A, B, C, D, E, or F)
Column 3: Option A
Column 4: Option B
Column 5: Option C (optional)
Column 6: Option D (optional)
Column 7: Option E (optional)
Column 8: Option F (optional)`;case"trueFalse":return`Column 1: Question
Column 2: Correct Answer (True or False)`;case"input":return`Column 1: Question
Column 2: Correct Answer`;default:return"Unknown test type"}},[]),Fe=_.useCallback(ce=>j.numQuestions||0,[j.numQuestions]),Be=_.useCallback(ce=>{console.log(` Clearing file input for test type: ${ce}`)},[]),He=_.useCallback((ce,ge)=>{switch(console.log(` populateFromExcelForTestType called with testType: ${ge}`),ge){case"multipleChoice":case"multiple-choice":Pt(ce);break;case"trueFalse":case"true-false":Ie(ce);break;case"input":Qe(ce);break;default:console.log(` Unknown test type: ${ge}`)}},[]),Pt=_.useCallback(ce=>{console.log(" populateMultipleChoiceFromExcel called with:",ce);const ge=Math.max(...ce.map(Ze=>Ze.length-2)),Pe=Math.min(ge,6);console.log(` Excel data has ${ge} option columns, using ${Pe} options`),A(Ze=>({...Ze,numOptions:Pe}));const je={};ce.forEach((Ze,dt)=>{const _t=dt+1;console.log(` Row ${dt+1} data:`,Ze);const ir={question:(Ze[0]||"").toString().trim(),options:[],correctAnswer:(Ze[1]||"").toString().trim().toUpperCase()};console.log(` Question ${_t} correctAnswer:`,ir.correctAnswer),["A","B","C","D","E","F"].slice(0,Pe).forEach((Cr,Br)=>{const Rr=(Ze[Br+2]||"").toString().trim();console.log(` Option ${Br} (${Cr}):`,Rr),ir.options.push(Rr)}),je[_t]=ir}),A(Ze=>{const dt={...Ze,questions:je};return console.log(" Updating form data with:",dt),dt}),console.log(" Populated multiple choice questions from Excel:",je),r(`Successfully loaded ${ce.length} questions from CSV file!`,"success"),W(),Ne("multiple-choice")},[j.numOptions,W,r]),Ie=_.useCallback(ce=>{console.log(" populateTrueFalseFromExcel called with:",ce);const ge={};ce.forEach((Pe,je)=>{const Ze=je+1,dt={question:(Pe[0]||"").toString().trim(),correctAnswer:Pe[1]?.toString().trim().toLowerCase()==="true"?"true":"false"};ge[Ze]=dt}),A(Pe=>({...Pe,questions:ge})),console.log(" Populated true/false questions from Excel:",ge),r(`Successfully loaded ${ce.length} questions from CSV file!`,"success"),K(),Ne("true-false")},[K,r]),Qe=_.useCallback(ce=>{console.log(" populateInputFromExcel called with:",ce);const ge={};ce.forEach((Pe,je)=>{const Ze=je+1,dt=[];for(let ir=1;ir<Pe.length;ir++){const Ot=(Pe[ir]||"").toString().trim();Ot&&dt.push(Ot)}const _t={question:(Pe[0]||"").toString().trim(),correctAnswer:dt[0]||"",correct_answers:dt};console.log(` Excel question ${Ze} data:`,_t),ge[Ze]=_t}),A(Pe=>({...Pe,questions:ge})),console.log(" Populated input questions from Excel:",ge),r(`Successfully loaded ${ce.length} questions from Excel file!`,"success"),ee(),Ne("input")},[ee,r]),Ne=_.useCallback(ce=>{switch(console.log(` Reattaching form event listeners for test type: ${ce}`),document.querySelectorAll('[data-listener-attached="true"]').forEach(Pe=>{Pe.removeEventListener("input",()=>{}),Pe.removeAttribute("data-listener-attached")}),ce){case"multiple-choice":W();break;case"true-false":K();break;case"input":ee();break;default:console.warn("Unknown test type for event listener reattachment:",ce)}console.log(` Form event listeners reattached for test type: ${ce}`)},[W,K,ee]),Ke=_.useCallback(()=>{const ce=localStorage.getItem("test_creation_state");if(!ce)return console.log(" No test creation state found in localStorage"),!1;try{const ge=JSON.parse(ce);console.log(" Found test creation state:",ge);const Pe=Date.now()-ge.timestamp,je=1800*1e3;if(Pe>je)return console.log(" Test creation state is too old, clearing it"),R(),!1;switch(a(!0),console.log(" Restored isInTestCreation flag to true"),re(),ge.excelState&&H(),ge.currentStep){case"testTypeSelection":console.log(" Restoring test type selection step"),u("typeSelection");break;case"multipleChoiceForm":console.log(" Restoring multiple choice form step"),g("multipleChoice"),u("formCreation");break;case"trueFalseForm":console.log(" Restoring true/false form step"),g("trueFalse"),u("formCreation");break;case"inputForm":console.log(" Restoring input form step"),g("input"),u("formCreation");break;case"testAssignment":case"assignment":console.log(" Restoring test assignment step"),console.log(" Cannot restore test assignment step without test data, going back to type selection"),u("typeSelection");break;default:console.log(" Unknown step in state, defaulting to type selection"),u("typeSelection")}return I(ge.currentStep),!0}catch(ge){return console.error(" Error restoring test creation state:",ge),R(),!1}},[R,re,H,I]);_.useEffect(()=>{console.log(" Initializing Teacher Tests..."),se(),Ke(),de(),Lt()},[se,Ke,de,Lt]),_.useEffect(()=>{j.numQuestions>0&&h&&h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&(console.log(" Excel upload buttons rendered, initializing event listeners..."),setTimeout(()=>{Lt()},100))},[j.numQuestions,h,Lt]);const qe=ce=>{console.log(" Test type selected:",ce),console.log(" Setting testType to:",ce),g(ce),u("formCreation"),A({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:""}),V("formCreation"),setTimeout(()=>{Lt()},100)},Rt=(ce,ge)=>{A(Pe=>({...Pe,[ce]:ge}))},zt=(ce,ge,Pe)=>{A(je=>({...je,questions:{...je.questions,[ce]:{...je.questions[ce],[ge]:Pe}}}))},rr=(ce,ge,Pe,je=0)=>{const Ze={};for(let dt=1;dt<=Pe;dt++)ce==="multipleChoice"?Ze[dt]={question:"",options:Array.from({length:je},()=>""),correctAnswer:""}:ce==="trueFalse"?Ze[dt]={question:"",correctAnswer:""}:ce==="input"&&(Ze[dt]={question:"",correct_answers:[""]});A(dt=>({...dt,questions:Ze})),ce==="multipleChoice"?(oe("multiple-choice"),Z("multiple-choice")):ce==="trueFalse"?(oe("true-false"),Z("true-false")):ce==="input"&&(oe("input"),Z("input"))},Ir=async()=>{if(!h||!j.testName||!j.numQuestions){r("Please fill in all required fields","error");return}console.log(" Test form completed, proceeding to assignment step"),V("testAssignment",j),u("testAssignment"),r("Test form completed! Now select classes and subjects.","success")},wr=(ce,ge,Pe,je,Ze)=>{L(Pe?dt=>[...dt,{grade:ce,class:ge,subject_id:je,subject:Ze}]:dt=>dt.filter(_t=>!(_t.grade===ce&&_t.class===ge&&_t.subject_id===je)))},Wr=_.useCallback(async ce=>{console.log(" [DEBUG] handleMatchingTestSave called"),console.log(" [DEBUG] Received testData:",ce),console.log(" [DEBUG] Current formData:",j),console.log(" [DEBUG] Current testType:",h),console.log(" [DEBUG] Current user:",e),console.log(" [DEBUG] Current currentStep:",l),b(!0);try{const ge=ce.blocks.map((Ze,dt)=>{const _t=ce.words.find(Qt=>Qt.blockId===Ze.id)?.word||`Word ${dt+1}`,ir=ce.arrows.some(Qt=>Qt.startBlock===Ze.id),Ot=ce.arrows.find(Qt=>Qt.startBlock===Ze.id)||null;return{question_id:dt+1,word:_t,block_coordinates:{x:Ze.x,y:Ze.y,width:Ze.width,height:Ze.height},has_arrow:ir,arrow:Ot?{startX:Ot.startX,startY:Ot.startY,endX:Ot.endX,endY:Ot.endY,style:Ot.style||{}}:null}}),Pe={teacher_id:e.teacher_id,test_name:j.testName||`Matching Test - ${new Date().toLocaleString()}`,image_url:ce.imageUrl,num_blocks:ce.blocks.length,questions:ge,assignments:[]};console.log(" Sending matching test payload:",Pe);const je={...j,testName:Pe.test_name,numQuestions:Pe.num_blocks,numOptions:0,questions:ge.reduce((Ze,dt,_t)=>(Ze[_t+1]={question:dt.word,correctAnswer:dt.word,options:[]},Ze),{}),matchingTestData:ce};console.log(" Assignment form data:",je),A(je),V("testAssignment",je),console.log(" Setting current step to testAssignment"),u("testAssignment"),r("Matching test data saved! Now select classes and subjects.","success")}catch(ge){console.error(" Error saving matching test:",ge),r("Failed to save matching test: "+ge.message,"error")}finally{b(!1)}},[e,j,h,r,V]),he=_.useCallback(()=>{console.log(" Cancelling matching test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ee=_.useCallback(async ce=>{console.log(" [DEBUG] handleWordMatchingTestSave called"),console.log(" [DEBUG] Received testData:",ce),b(!0);try{A(ge=>({...ge,wordMatchingData:ce,numQuestions:ce.numQuestions||ce.wordPairs?.length||0})),u("testAssignment"),r("Word matching test created! Now assign it to classes.","success")}catch(ge){console.error("Error saving word matching test:",ge),r("Failed to save word matching test: "+ge.message,"error")}finally{b(!1)}},[r]),we=_.useCallback(()=>{console.log(" Cancelling word matching test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),_e=_.useCallback(async ce=>{console.log(" [DEBUG] handleDrawingTestSave called"),console.log(" [DEBUG] Received testData:",ce),b(!0);try{A(ge=>({...ge,drawingData:ce,numQuestions:ce.num_questions||ce.questions?.length||0})),u("testAssignment"),r("Drawing test created! Now assign it to classes.","success")}catch(ge){console.error(" Error saving drawing test:",ge),r("Error saving drawing test","error")}finally{b(!1)}},[r]),ke=_.useCallback(()=>{console.log(" Cancelling drawing test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ce=_.useCallback(()=>{console.log(" Cancelling fill blanks test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),rt=_.useCallback(async ce=>{console.log(" [DEBUG] handleFillBlanksTestSave called"),console.log(" [DEBUG] Received testData:",ce),b(!0);try{A(ge=>({...ge,fillBlanksData:ce,numQuestions:ce.num_questions||ce.blanks?.length||0})),u("testAssignment"),r("Fill blanks test created! Now assign it to classes.","success")}catch(ge){console.error(" Error saving fill blanks test:",ge),r("Error saving fill blanks test","error")}finally{b(!1)}},[r]),xt=_.useCallback(()=>{console.log(" Cancelling speaking test creation"),u("typeSelection"),A({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),ut=_.useCallback(async ce=>{console.log(" [DEBUG] handleSpeakingTestSave called"),console.log(" [DEBUG] Received testData:",ce),b(!0);try{A(ge=>({...ge,speakingData:ce,numQuestions:ce.questions?.length||0})),u("testAssignment"),r("Speaking test created! Now assign it to classes.","success")}catch(ge){console.error(" Error saving speaking test:",ge),r("Error saving speaking test","error")}finally{b(!1)}},[r]);return c.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[c.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs(il,{mode:"wait",children:[l==="typeSelection"&&c.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs(ot,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{children:"Back to Main"})]}),c.jsx("div",{className:"flex-1"})]}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create New Test"}),c.jsx("p",{className:"text-gray-600",children:"Choose the type of test you want to create"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"multipleChoice",title:"Multiple Choice",description:"Questions with multiple answer options",icon:"/pics/multiple-choice.png"},{type:"trueFalse",title:"True/False",description:"Questions with true or false answers",icon:"/pics/true-false.png"},{type:"input",title:"Input",description:"Questions requiring text input",icon:"/pics/input.png"},{type:"matching",title:"Picture Matching",description:"Labeling pictures",icon:"/pics/matching.png"},{type:"wordMatching",title:"Word Matching",description:"Matching word pairs by dragging or drawing arrows",icon:"/pics/matching-words.png"},{type:"drawing",title:"Drawing Test",description:"Interactive drawing tests with canvas for students",icon:"/pics/drawing.png"},{type:"fillBlanks",title:"Fill Blanks",description:"Text with multiple choice blanks",icon:"/pics/fill-blanks.png"},{type:"speaking",title:"Speaking Test",description:"Audio recording with AI-powered feedback",icon:"/pics/speaking.png"}].map(({type:ce,title:ge,description:Pe,icon:je})=>c.jsx(gt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer",onClick:()=>qe(ce),children:c.jsxs($t,{className:"h-full text-center hover:shadow-lg transition-shadow",children:[c.jsx("div",{className:"mb-3 flex justify-center",children:c.jsx("img",{src:je,alt:ge,className:"w-12 h-12 object-contain"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ge}),c.jsx("p",{className:"text-sm text-gray-600",children:Pe})]})},ce))})]}),l==="formCreation"&&c.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsx("div",{className:"flex space-x-2",children:c.jsx(ot,{variant:"outline",onClick:Q,children:" Back to Test Types"})}),c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Create ",h==="multipleChoice"?"Multiple Choice":h==="trueFalse"?"True/False":h==="input"?"Input":h==="drawing"?"Drawing":h==="fillBlanks"?"Fill Blanks":h==="wordMatching"?"Word Matching":h==="speaking"?"Speaking":"Picture Matching"," Test"]}),c.jsx("p",{className:"text-gray-600",children:"Fill in the test details and questions"})]})]})}),c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Information"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name"}),c.jsx("input",{type:"text",value:j.testName,onChange:ce=>Rt("testName",ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter test name"})]}),h!=="matching"&&h!=="wordMatching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),c.jsx("input",{type:"number",min:"1",max:"50",value:j.numQuestions,onChange:ce=>{const ge=parseInt(ce.target.value)||0;Rt("numQuestions",ge),ge>0&&rr(h,j.testName,ge,j.numOptions)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of questions"})]}),h==="multipleChoice"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Options per Question"}),c.jsx("input",{type:"number",min:"2",max:"6",value:j.numOptions,onChange:ce=>{const ge=parseInt(ce.target.value)||0;Rt("numOptions",ge),ge>0&&ge<2&&r("Multiple choice tests require at least 2 options per question. Please enter 2 or more.","warning"),j.numQuestions>0&&rr(h,j.testName,j.numQuestions,ge)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of options (2-6)"})]}),h!=="speaking"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("label",{className:"inline-flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:!!j.enableTimer,onChange:ce=>Rt("enableTimer",ce.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Enable timer for this test"})]}),j.enableTimer&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm text-gray-700",children:"Time (minutes):"}),c.jsx("input",{type:"number",min:"1",max:"1440",value:j.timerMinutes,onChange:ce=>Rt("timerMinutes",ce.target.value.replace(/[^0-9]/g,"")),className:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 30"})]})]}),h!=="drawing"&&h!=="matching"&&h!=="wordMatching"&&h!=="fillBlanks"&&h!=="speaking"&&c.jsx("div",{className:"flex items-center space-x-2",children:c.jsxs("label",{className:"inline-flex items-center space-x-2",children:[c.jsx("input",{type:"checkbox",checked:!!j.isShuffled,onChange:ce=>Rt("isShuffled",ce.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),c.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle questions during test"})]})})]})]})}),h==="matching"&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Picture Matching Test"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload an image and create interactive matching blocks with words."}),c.jsx(Tae,{testName:j.testName,onTestSaved:Wr,onCancel:he,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]})}),h==="wordMatching"&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4 text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Word Matching Test"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Create word pairs for students to match by dragging or drawing arrows."}),c.jsx(Nde,{testName:j.testName,onTestSaved:Ee,onCancel:we,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]})}),h==="drawing"&&c.jsxs($t,{children:[console.log(" Rendering DrawingTestCreator, testType:",h),c.jsx(pce,{testName:j.testName,onTestSaved:_e,onCancel:ke,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]}),h==="fillBlanks"&&c.jsxs($t,{children:[console.log(" Rendering FillBlanksTestCreator, testType:",h),c.jsx(wce,{testName:j.testName,allowedTime:j.enableTimer&&parseInt(j.timerMinutes)||null,onTestSaved:rt,onCancel:Ce,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]}),h==="speaking"&&c.jsxs($t,{children:[console.log(" Rendering SpeakingTestCreator, testType:",h),c.jsx(_ce,{testName:j.testName,onTestSaved:ut,onCancel:xt,onBackToCabinet:Me,isSaving:k,validationErrors:{}})]}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&j.numQuestions>0&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Excel Upload"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Upload an Excel file to automatically populate questions, or fill them in manually below."}),c.jsxs("div",{className:"space-y-6",children:[h==="multipleChoice"&&nt.multipleChoice?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"multiple-choice",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"multiple-choice"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Multiple Choice Format:"}),c.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[c.jsx("div",{children:"Column 1: Question"}),c.jsx("div",{children:"Column 2: Correct Answer (A-F)"}),c.jsx("div",{children:"Column 3: Option A text"}),c.jsx("div",{children:"Column 4: Option B text"}),c.jsx("div",{children:"Column 5: Option C text"}),c.jsx("div",{children:"Column 6: Option D text"})]})]})})})]}),h==="trueFalse"&&nt.trueFalse?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"true-false",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"true-false"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-xs text-blue-800",children:[c.jsxs("div",{children:[c.jsx("strong",{children:"Format:"})," Question | Answer (true/false)"]}),c.jsxs("div",{className:"mt-1",children:[c.jsx("strong",{children:"Example:"})," The Earth is round | true"]}),c.jsxs("div",{className:"mt-1",children:[c.jsx("strong",{children:"Note:"})," Headers are optional"]})]})})})]}),h==="input"&&nt.input?.buttonVisible&&c.jsxs("div",{className:"flex items-start space-x-4",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"input",disabled:E,children:E?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",color:"white"}),c.jsx("span",{className:"font-medium",children:"Processing..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),c.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),c.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"input"})]}),c.jsx("div",{className:"w-fit",children:c.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:c.jsxs("div",{className:"text-sm text-blue-800",children:[c.jsx("strong",{children:"Input Test Format:"}),c.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[c.jsx("div",{children:"Column 1: Question"}),c.jsx("div",{children:"Column 2: Answer 1"}),c.jsx("div",{children:"Column 3: Answer 2 (optional)"})]})]})})})]})]})]})}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&j.numQuestions>0&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manual Question Entry"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Fill in the questions manually using the form below."})]})}),j.numQuestions>0&&c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),c.jsx("div",{className:"space-y-6",children:Object.keys(j.questions).map(ce=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Question ",ce]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{value:j.questions[ce]?.question||"",onChange:ge=>zt(ce,"question",ge.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Enter the question text",id:`question_${ce}`}),c.jsx(Qh,{showPreview:!0,inputRef:()=>document.getElementById(`question_${ce}`),onChange:ge=>zt(ce,"question",ge.target.value)})]})]}),h==="multipleChoice"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),c.jsx("div",{className:"space-y-2",children:j.questions[ce]?.options?.map((ge,Pe)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("span",{className:"w-6 text-sm font-medium text-gray-700",children:[String.fromCharCode(65+Pe),":"]}),c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:ge,onChange:je=>{const Ze=[...j.questions[ce].options];Ze[Pe]=je.target.value,zt(ce,"options",Ze)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Option ${String.fromCharCode(65+Pe)}`,id:`option_${ce}_${Pe}`}),c.jsx(Qh,{showPreview:!0,inputRef:()=>document.getElementById(`option_${ce}_${Pe}`),onChange:je=>{const Ze=[...j.questions[ce].options];Ze[Pe]=je.target.value,zt(ce,"options",Ze)}})]})]},Pe))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),h==="multipleChoice"?c.jsx("div",{children:c.jsxs("select",{value:j.questions[ce]?.correctAnswer||"",onChange:ge=>zt(ce,"correctAnswer",ge.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),j.questions[ce]?.options?.map((ge,Pe)=>c.jsx("option",{value:String.fromCharCode(65+Pe),children:String.fromCharCode(65+Pe)},Pe))]})}):h==="trueFalse"?c.jsxs("select",{value:j.questions[ce]?.correctAnswer||"",onChange:ge=>zt(ce,"correctAnswer",ge.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"",children:"Select correct answer"}),c.jsx("option",{value:"true",children:"True"}),c.jsx("option",{value:"false",children:"False"})]}):c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s)"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:j.questions[ce]?.correct_answers?.[0]||"",onChange:ge=>{const je=[...j.questions[ce]?.correct_answers||[""]];je[0]=ge.target.value,zt(ce,"correct_answers",je)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the primary correct answer",id:`answer_${ce}_0`}),c.jsx(Qh,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${ce}_0`),onChange:ge=>{const je=[...j.questions[ce]?.correct_answers||[""]];je[0]=ge.target.value,zt(ce,"correct_answers",je)}})]}),j.questions[ce]?.correct_answers?.slice(1).map((ge,Pe)=>c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"relative flex-1",children:[c.jsx("input",{type:"text",value:ge,onChange:je=>{const Ze=[...j.questions[ce]?.correct_answers||[]];Ze[Pe+1]=je.target.value,zt(ce,"correct_answers",Ze)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Alternative answer ${Pe+2}`,id:`answer_${ce}_${Pe+1}`}),c.jsx(Qh,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${ce}_${Pe+1}`),onChange:je=>{const Ze=[...j.questions[ce]?.correct_answers||[]];Ze[Pe+1]=je.target.value,zt(ce,"correct_answers",Ze)}})]}),c.jsx("button",{type:"button",onClick:()=>{const je=[...j.questions[ce]?.correct_answers||[]];je.splice(Pe+1,1),zt(ce,"correct_answers",je)},className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},Pe))||[],c.jsx("button",{type:"button",onClick:()=>{const Pe=[...j.questions[ce]?.correct_answers||[""],""];zt(ce,"correct_answers",Pe)},className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm border border-blue-300 rounded-md hover:bg-blue-50",children:"+ Add Alternative Answer"})]}),c.jsx("p",{className:"text-xs text-gray-500",children:"You can add multiple correct answers for the same question. Students will get credit for any of them."})]})]})]})]},ce))})]})}),j.testName&&j.numQuestions>0&&c.jsx("div",{className:"flex justify-end",children:c.jsx(ot,{onClick:Ir,disabled:k,className:"px-8",children:k?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test & Continue to Assignment"})})]}),l==="testAssignment"&&c.jsxs(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs(ot,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),c.jsx("span",{children:"Back to Main"})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Assign Test to Classes"}),c.jsx("p",{className:"text-gray-600",children:"Select which classes should take this test"})]})]}),c.jsx(ot,{variant:"outline",onClick:()=>u("formCreation"),children:" Back to Test Form"})]}),c.jsx($t,{children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Classes"}),x.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-6xl mb-4",children:""}),c.jsx("p",{className:"text-gray-500 text-lg",children:"No subjects available for assignment."}),c.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You need to assign subjects to grades and classes first."}),c.jsx("div",{className:"mt-4",children:c.jsx(ot,{onClick:()=>window.location.href="/teacher/subjects",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Subjects Page"})})]}):c.jsx("div",{className:"space-y-6",children:x.map(ce=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:ce.subject}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:ce.classes.map(ge=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:D.some(Pe=>Pe.grade===ge.grade&&Pe.class===ge.class&&Pe.subject_id===ce.subject_id),onChange:Pe=>wr(ge.grade,ge.class,Pe.target.checked,ce.subject_id,ce.subject),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),c.jsxs("span",{className:"text-sm text-gray-700",children:[ge.grade,"/",ge.class]})]},`${ge.grade}-${ge.class}-${ce.subject_id}`))})]},ce.subject_id))})]})}),D.length>0&&c.jsx("div",{className:"flex justify-end",children:c.jsx(ot,{onClick:()=>Ae(h,null),disabled:v,className:"px-8",children:v?c.jsxs(c.Fragment,{children:[c.jsx(un,{size:"sm",color:"white",className:"mr-2"}),"Assigning Test..."]}):`Assign Test to ${D.length} Class${D.length>1?"es":""}`})})]})]})}),console.log(" Checking isAssigningTest:",P),P&&c.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Assigning test to classes..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your assignment"})]})}),k&&c.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Saving test..."}),c.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we save your test"})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:t.map(ce=>c.jsx(iu,{type:ce.type,message:ce.message,duration:ce.duration,onClose:()=>n(ce.id)},ce.id))})]})},QAe=({onDataLoaded:e,onError:t})=>{const r=hl(),{user:n,isAuthenticated:s}=Ps(),{teacherData:a,loadTeacherData:i}=a3(),[o,l]=_.useState(!0),[u,d]=_.useState(""),[f,h]=_.useState([]),[g,x]=_.useState(null),[y,v]=_.useState([]),[T,k]=_.useState([]),[b,E]=_.useState([]),[N,P]=_.useState(null),[M,j]=_.useState(0);_.useEffect(()=>{se()},[]),_.useCallback(async re=>{console.log(" Teacher login attempt...");try{const B=await Os.teacherLogin(re);if(B.success)return X("Login successful!","success"),await A(),B;throw new Error(B.error||"Login failed")}catch(B){throw console.error(" Teacher login error:",B),X("Login failed. Please check your credentials.","error"),B}},[]);const A=_.useCallback(async()=>{console.log(" Loading teacher data...");try{if(l(!0),d(""),!s||!n){console.log(" User not authenticated"),d("User not authenticated");return}if(n.role!==Ro.TEACHER){console.error(" Invalid user role for teacher data:",n.role),d("Access denied. Teacher role required.");return}console.log(" Fetching teacher data from service...");const re=await Os.getTeacherData();if(re&&re.success)console.log(" Teacher data loaded successfully:",re),x(re.teacher||n),re.subjects&&(v(re.subjects),console.log(" Teacher subjects loaded:",re.subjects.length)),re.grades&&k(re.grades),re.classes&&E(re.classes),P(new Date),j(B=>B+1),e&&e(re),X("Teacher data loaded successfully!","success");else throw new Error(re?.error||"Failed to load teacher data")}catch(re){console.error(" Error loading teacher data:",re);const B=re.message||"Failed to load teacher data";d(B),t&&t(re),X(B,"error")}finally{l(!1)}},[s,n,e,t]),D=_.useCallback(()=>{console.log(" Returning to main cabinet..."),r("/teacher/cabinet")},[r]);_.useCallback(re=>{console.log(" Showing main cabinet with subjects:",re),re&&v(re),r("/teacher/cabinet")},[r]);const L=_.useCallback(()=>(console.log(" Rendering grade buttons..."),["M1","M2","M3","M4","M5","M6"].map(B=>({id:B,name:`Grade ${B}`,classes:G(B)}))),[]),G=_.useCallback(re=>Array.from({length:10},(V,R)=>R+1).map(V=>({id:`${re}-${V}`,name:`Class ${V}`,grade:re,classNumber:V})),[]),X=_.useCallback((re,B)=>{const V={id:Date.now(),message:re,type:B,timestamp:new Date};h(R=>[...R,V]),setTimeout(()=>{h(R=>R.filter(H=>H.id!==V.id))},Km.NOTIFICATION_DURATION)},[]),se=_.useCallback(async()=>{console.log(" Initializing teacher data..."),await A()},[A]),Q=_.useCallback(async()=>{console.log(" Refreshing teacher data..."),await A()},[A]);return _.useCallback(async re=>{console.log(" Updating teacher profile:",re);try{const B=await Os.updateUserProfile(re);if(B.success)return x(V=>({...V,...re})),X("Profile updated successfully!","success"),B;throw new Error(B.error||"Failed to update profile")}catch(B){throw console.error(" Error updating teacher profile:",B),X("Failed to update profile","error"),B}},[]),_.useCallback(async re=>{console.log(" Changing teacher password...");try{const B=await Os.changePassword(re);if(B.success)return X("Password changed successfully!","success"),B;throw new Error(B.error||"Failed to change password")}catch(B){throw console.error(" Error changing teacher password:",B),X("Failed to change password","error"),B}},[]),o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Data..."})]})}):u?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Data Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:u}),c.jsxs("div",{className:"flex space-x-3 justify-center",children:[c.jsx(ot,{variant:"primary",onClick:Q,children:"Retry"}),c.jsx(ot,{variant:"outline",onClick:D,children:"Go Back"})]})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Data"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",N?N.toLocaleString():"Never"," | Version: ",M]})]}),c.jsxs("div",{className:"flex space-x-3",children:[c.jsx(ot,{variant:"outline",onClick:Q,children:"Refresh Data"}),c.jsx(ot,{variant:"outline",onClick:D,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Teacher Information"}),g?c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.name||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.username||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.email||"N/A"})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Role:"}),c.jsx("p",{className:"text-sm text-gray-900",children:g.role||"N/A"})]})]}):c.jsx("p",{className:"text-gray-500",children:"No teacher information available"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Subjects (",y.length,")"]}),y.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((re,B)=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:re.name}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:re.description||"No description"}),re.classes&&re.classes.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:re.classes.map((V,R)=>c.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[V.grade," - ",V.className]},R))})]})]},B))}):c.jsx("p",{className:"text-gray-500",children:"No subjects assigned"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Levels"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L().map(re=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:re.name}),c.jsx("div",{className:"grid grid-cols-5 gap-1",children:re.classes.map(B=>c.jsx("button",{className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",onClick:()=>console.log("Class clicked:",B),children:B.classNumber},B.id))})]},re.id))})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Statistics"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-blue-600",children:y.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Subjects"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-green-600",children:T.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Grades"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:b.length}),c.jsx("p",{className:"text-sm text-gray-500",children:"Classes"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-2xl font-semibold text-purple-600",children:M}),c.jsx("p",{className:"text-sm text-gray-500",children:"Data Version"})]})]})]})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:f.map(re=>c.jsx(iu,{type:re.type,message:re.message,onClose:()=>h(B=>B.filter(V=>V.id!==re.id))},re.id))})]})},ZAe=({onBackToCabinet:e})=>{const t=hl(),{user:r,isAuthenticated:n}=Ps(),{teacherData:s}=a3(),[a,i]=_.useState(!0),[o,l]=_.useState(""),[u,d]=_.useState([]),[f,h]=_.useState([]),[g,x]=_.useState([]),[y,v]=_.useState([]),[T,k]=_.useState(null),[b,E]=_.useState([]),[N,P]=_.useState(!1),[M,j]=_.useState(!1),[A,D]=_.useState(!1),[L,G]=_.useState(!1),[X,se]=_.useState(null),[Q,re]=_.useState(!0),[B,V]=_.useState(null);_.useEffect(()=>{Ve()},[]),_.useCallback(lt=>{console.log(" Rendering existing subjects:",lt),h(lt)},[]);const R=_.useCallback(()=>{console.log(" Showing subject selection prompt..."),P(!0),re(!1),H()},[]),H=_.useCallback(async()=>{console.log(" Loading existing subjects...");try{const lt=await Os.getTeacherSubjects();lt.success&&lt.subjects&&lt.subjects.length>0?(console.log(" Existing subjects found:",lt.subjects),z(lt.subjects)):(console.log(" No existing subjects found"),v([]))}catch(lt){console.error(" Error loading existing subjects:",lt),Je("Failed to load existing subjects","error")}},[]),z=_.useCallback(lt=>{console.log(" Rendering subject selection:",lt);const At=[];lt.forEach(vt=>{vt.classes&&Array.isArray(vt.classes)&&vt.classes.forEach(ct=>{At.push({id:`${vt.subject_id}-${ct.grade}-${ct.class}`,subjectId:vt.subject_id,subjectName:vt.subject,grade:ct.grade,class:ct.class,displayText:`${vt.subject} - ${ct.grade}/${ct.class}`})})}),v(At),console.log(" Processed subjects for selection:",At)},[]),I=_.useCallback(async lt=>{if(console.log(" Saving teacher subjects:",lt),!lt||lt.length===0){Je("Please select at least one subject and class combination.","warning");return}try{const At=lt.reduce((ct,bt)=>{const Ut=ct.find(Bt=>Bt.subject_id===bt.subjectId);return Ut?Ut.classes.push({grade:bt.grade,class:bt.class}):ct.push({subject_id:bt.subjectId,classes:[{grade:bt.grade,class:bt.class}]}),ct},[]);console.log(" Transformed data for backend:",At);const vt=await Os.saveTeacherSubjects(At);if(vt.success)Je("Subjects saved successfully!","success"),P(!1),re(!0),V(new Date),await H();else throw new Error(vt.error||"Failed to save subjects")}catch(At){console.error(" Error saving subjects:",At),Je("Error saving subjects. Please try again.","error")}},[]),W=_.useCallback(()=>{console.log(" Toggling subject dropdown..."),j(lt=>!lt),D(!1)},[]),K=_.useCallback(async()=>{console.log(" Loading subjects for dropdown...");try{const lt=await Os.getAllSubjects();if(lt.success)x(lt.subjects||[]),console.log(" Available subjects loaded:",lt.subjects?.length||0);else throw new Error(lt.error||"Failed to load subjects")}catch(lt){console.error(" Error loading subjects for dropdown:",lt),Je("Failed to load subjects","error")}},[]),ee=_.useCallback(lt=>{console.log(" Subject selected:",lt);const At=g.find(vt=>vt.subject_id===parseInt(lt));At&&(k(At),D(!0),j(!1),oe())},[g]),oe=_.useCallback(()=>{console.log(" Loading grades and classes...")},[]),Z=_.useCallback((lt,At)=>{console.log(" Saving classes for subject:",lt,At);const vt={id:`${lt.subject_id}-${Date.now()}`,subjectId:lt.subject_id,subjectName:lt.subject,grade:At.grade,class:At.class,displayText:`${lt.subject} - ${At.grade}/${At.class}`};v(ct=>[...ct,vt]),k(null),E([]),D(!1),ue(`Added ${lt.subject} for ${At.grade}/${At.class}`)},[]),le=_.useCallback(()=>{console.log(" Resetting subject selection..."),k(null),E([]),j(!1),D(!1)},[]),ue=_.useCallback(lt=>{console.log(" Showing message:",lt),Je(lt,"success")},[]),de=_.useCallback(lt=>{console.log(" Showing confirmation modal:",lt),se(lt),G(!0)},[]),Te=_.useCallback(()=>{console.log(" Hiding confirmation modal..."),G(!1),se(null)},[]),ie=_.useCallback(()=>{console.log(" Confirming save subjects..."),Te(),I(y)},[y,I,Te]),pe=_.useCallback(()=>{console.log(" Cancelling save subjects..."),Te()},[Te]),Ae=_.useCallback(lt=>{console.log(" Removing subject:",lt),v(At=>At.filter(vt=>vt.id!==lt)),Je("Subject removed","info")},[]);_.useCallback(()=>{console.log(" Showing edit subjects button..."),re(!0)},[]),_.useCallback(()=>{console.log(" Hiding edit subjects button..."),re(!1)},[]);const Me=_.useCallback(lt=>{console.log(" Generating class buttons for grade:",lt);let At;return lt===1||lt===2?At=["15","16"]:lt===3?At=["15","16"]:lt===4?At=["13","14"]:lt===5||lt===6?At=["13","14"]:At=[],At.map(vt=>({id:`${lt}-${vt}`,grade:lt,class:vt,displayText:`${lt}/${vt}`}))},[]);_.useCallback((lt,At)=>{console.log(" Showing class results:",lt,At),t("/teacher/results")},[t]);const Je=_.useCallback((lt,At)=>{const vt={id:Date.now(),message:lt,type:At,timestamp:new Date};d(ct=>[...ct,vt]),setTimeout(()=>{d(ct=>ct.filter(bt=>bt.id!==vt.id))},Km.NOTIFICATION_DURATION)},[]),Ve=_.useCallback(async()=>{console.log(" Initializing teacher subjects...");try{if(i(!0),l(""),!n||!r){console.log(" User not authenticated"),l("User not authenticated");return}if(r.role!==Ro.TEACHER){console.error(" Invalid user role for teacher subjects:",r.role),l("Access denied. Teacher role required.");return}await H(),await K(),console.log(" Teacher subjects initialization complete!")}catch(lt){console.error(" Error initializing teacher subjects:",lt),l("Failed to initialize teacher subjects")}finally{i(!1)}},[n,r,H,K]),Dt=_.useCallback(()=>{e?e():t("/teacher/cabinet")},[e,t]);return a?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx(un,{size:"lg"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Subjects..."})]})}):o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"text-center",children:c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[c.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Subjects Error"}),c.jsx("p",{className:"text-red-600 mb-4",children:o}),c.jsx(ot,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm border-b",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center py-4",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subject Management"}),c.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",B?B.toLocaleString():"Never"]})]}),c.jsxs("div",{className:"flex space-x-3",children:[Q&&c.jsx(ot,{variant:"primary",onClick:R,children:"Edit Subjects"}),c.jsx(ot,{variant:"outline",onClick:Dt,children:"Back to Cabinet"})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"space-y-6",children:[!N&&c.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Assigned Subjects"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your teaching subjects and class assignments"})]}),c.jsx("div",{className:"flex space-x-3",children:c.jsxs(ot,{variant:"primary",onClick:R,className:"px-6 py-2",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Subjects"]})})]}),f.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((lt,At)=>c.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:lt.subject}),lt.classes&&lt.classes.length>0&&c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Assigned Classes:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:lt.classes.map((vt,ct)=>c.jsxs("span",{className:"px-3 py-1 bg-blue-500 text-white text-sm font-medium rounded-full",children:["Grade ",vt.grade," - Class ",vt.class]},ct))})]})]}),c.jsx("div",{className:"ml-4",children:c.jsx(ot,{variant:"outline",size:"sm",onClick:()=>Ae(lt.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})},At))}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:c.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned yet"}),c.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your teaching subjects and class assignments"}),c.jsxs(ot,{variant:"primary",onClick:R,className:"px-6 py-3",children:[c.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Subject"]})]})]}),N&&c.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Subjects and Classes"}),c.jsx("p",{className:"text-gray-600",children:"Choose the subjects you want to teach and assign them to specific classes"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-lg font-semibold text-gray-900",children:"Select Subject"}),c.jsx("p",{className:"text-gray-600",children:"Choose the subject you want to teach"})]})]}),c.jsxs("div",{className:"relative",children:[c.jsxs(ot,{variant:"outline",onClick:W,className:"w-full justify-between p-4 h-auto text-left border-2 border-gray-200 hover:border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white rounded-xl shadow-sm",children:[c.jsx("span",{className:"text-gray-900 font-medium",children:T?T.subject:"Select a subject"}),c.jsx("svg",{className:"w-5 h-5 ml-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),M&&c.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:g.map(lt=>c.jsx("button",{onClick:()=>ee(lt.subject_id),className:"w-full px-4 py-4 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:c.jsx("span",{className:"text-gray-900 font-medium",children:lt.subject})},lt.subject_id))})]})]}),A&&T&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Classes for ",T.subject]}),c.jsx("p",{className:"text-gray-600",children:"Choose which classes you want to teach this subject to"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(lt=>c.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2",children:c.jsx("span",{className:"text-white font-bold text-xs",children:lt})}),c.jsxs("h4",{className:"font-semibold text-gray-900",children:["Grade ",lt]})]}),c.jsx("div",{className:"space-y-3",children:Me(lt).map(At=>c.jsx(ot,{variant:"outline",size:"sm",onClick:()=>Z(T,At),className:"w-full text-sm py-2 px-4 border-green-300 hover:border-green-400 hover:bg-green-100 focus:ring-2 focus:ring-green-500 rounded-lg font-medium",children:At.displayText},At.id))})]},lt))})]}),y.length>0&&c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:c.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Selected Subjects"}),c.jsx("p",{className:"text-gray-600",children:"Review your subject and class selections"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(lt=>c.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4 hover:shadow-md transition-shadow duration-200",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex-1",children:c.jsx("span",{className:"text-sm font-semibold text-purple-900",children:lt.displayText})}),c.jsx(ot,{variant:"outline",size:"sm",onClick:()=>Ae(lt.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300 focus:ring-2 focus:ring-red-500 rounded-lg",children:c.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},lt.id))})]}),c.jsxs("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-100",children:[c.jsx("div",{className:"text-sm text-gray-500",children:y.length>0?`${y.length} subject${y.length>1?"s":""} selected`:"No subjects selected"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs(ot,{variant:"outline",onClick:()=>{P(!1),re(!0),le()},className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 rounded-xl",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),c.jsxs(ot,{variant:"primary",onClick:()=>de({type:"save",data:y}),disabled:y.length===0,className:"px-8 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[c.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),A?"Next: Select Classes":"Save Subjects"]})]})]})]})]})]})}),L&&c.jsx(Ca,{isOpen:L,onClose:Te,title:"Confirm Save",variant:"confirmation",children:c.jsxs("div",{className:"space-y-4",children:[c.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to save ",X?.data?.length||0," subject assignments?"]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx(ot,{variant:"outline",onClick:pe,children:"Cancel"}),c.jsx(ot,{variant:"primary",onClick:ie,children:"Save"})]})]})}),c.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:u.map(lt=>c.jsx(iu,{type:lt.type,message:lt.message,onClose:()=>d(At=>At.filter(vt=>vt.id!==lt.id))},lt.id))})]})},eje=()=>{const{user:e,role:t,isAuthenticated:r,isLoading:n}=Ps(),[s,a]=_.useState("cabinet");return!r||t!=="teacher"?c.jsx(Ip,{to:"/login",replace:!0}):n?c.jsxs("div",{className:"teacher-app-loading",children:[c.jsx(un,{}),c.jsx("p",{children:"Loading teacher interface..."})]}):c.jsx("div",{className:"teacher-app",children:c.jsxs(UT,{children:[c.jsx(ca,{path:"/",element:c.jsx(UL,{})}),c.jsx(ca,{path:"/cabinet",element:c.jsx(UL,{})}),c.jsx(ca,{path:"/tests",element:c.jsx(WL,{})}),c.jsx(ca,{path:"/tests/create",element:c.jsx(WL,{})}),c.jsx(ca,{path:"/data",element:c.jsx(QAe,{})}),c.jsx(ca,{path:"/subjects",element:c.jsx(ZAe,{})}),c.jsx(ca,{path:"/results",element:c.jsx(kV,{})}),c.jsx(ca,{path:"*",element:c.jsx(Ip,{to:"/teacher",replace:!0})})]})})},Xe={container:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",mainContainer:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",header:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg",headerContent:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",headerFlex:"flex justify-between items-center",adminInfo:"flex items-center space-x-4",adminAvatar:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",adminText:"text-lg sm:text-xl md:text-2xl font-bold text-white",adminSubtext:"text-purple-100 text-sm sm:text-base md:text-lg",menuContainer:"relative admin-menu",menuButton:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",menuDropdown:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",menuItem:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-purple-50 transition-colors",menuItemLogout:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",cardContainer:"bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",cardHeader:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",cardTitle:"text-xl font-bold text-gray-800",cardBody:"p-6",buttonGroup:"flex flex-wrap gap-3 mb-6",buttonPrimary:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200",buttonSecondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium px-4 py-2 rounded-lg transition-colors duration-200",formContainer:"bg-gray-50 rounded-lg p-6 border border-gray-200",formGrid:"grid grid-cols-1 md:grid-cols-2 gap-4",formGroup:"space-y-2",formLabel:"block text-sm font-medium text-gray-700",formInput:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors duration-200",formCheckbox:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",formActions:"flex space-x-3 pt-4",table:"min-w-full divide-y divide-gray-200",tableHeader:"bg-gray-50",tableHeaderCell:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",tableBody:"bg-white divide-y divide-gray-200",tableRow:"hover:bg-gray-50 transition-colors duration-150",tableCell:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",statusActive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",statusInactive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",modalOverlay:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",modalContent:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",modalTitle:"text-xl font-semibold text-gray-900 mb-4",modalActions:"flex space-x-3 pt-4"},tje=()=>{const{user:e,isAdmin:t,logout:r}=Ps(),{get:n,post:s,delete:a}=$l(),i=_.useCallback(async()=>{try{h({type:"info",message:"Checking for overdue assignments..."});const be=await s("/.netlify/functions/check-overdue-assignments",{});if(be&&be.success){const Ct=be.overdue_count||0;Ct>0?h({type:"success",message:`Found and marked ${Ct} overdue assignments as inactive.`}):h({type:"info",message:"No overdue assignments found."})}else h({type:"error",message:be?.error||"Failed to check assignments"})}catch(be){h({type:"error",message:"Failed to check assignments"}),console.error("Check overdue assignments error:",be)}},[s]),[o,l]=_.useState(!1),[u,d]=_.useState(null),[f,h]=_.useState(null),[g,x]=_.useState(!1),[y,v]=_.useState(!1),[T,k]=_.useState(!1),[b,E]=_.useState(!1),[N,P]=_.useState(""),[M,j]=_.useState(null),[A,D]=_.useState({}),[L,G]=_.useState(null),[X,se]=_.useState({}),[Q,re]=_.useState(null),[B,V]=_.useState({}),[R,H]=_.useState([]),[z,I]=_.useState(""),[W,K]=_.useState(""),[ee,oe]=_.useState(""),[Z,le]=_.useState("all"),[ue,de]=_.useState(!0),[Te,ie]=_.useState(!1),[pe,Ae]=_.useState([]),[Me,Je]=_.useState(""),[Ve,Dt]=_.useState(""),[lt,At]=_.useState(""),[vt,ct]=_.useState(new Set),[bt,Ut]=_.useState(!1),[Bt,Vt]=_.useState(!1),[We,Ue]=_.useState([]),[tt,nt]=_.useState([]),[at,It]=_.useState([]),[Lt,Xt]=_.useState([]),[vr,br]=_.useState(!1),[Dr,Sr]=_.useState(!1),[pr,ye]=_.useState(!1),[Fe,Be]=_.useState(!1),[He,Pt]=_.useState({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),[Ie,Qe]=_.useState({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),[Ne,Ke]=_.useState({subject_id:"",subject:"",description:"",is_active:!0}),[qe,Rt]=_.useState({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""});_.useEffect(()=>{console.log(" AdminCabinet component mounted - initializing..."),zt()},[]),_.useEffect(()=>{const be=Ct=>{bt&&!Ct.target.closest(".admin-menu")&&Ut(!1)};return document.addEventListener("mousedown",be),()=>{document.removeEventListener("mousedown",be)}},[bt]);const zt=_.useCallback(async()=>{try{l(!0),await Wr(),console.log("Admin app initialized")}catch(be){d("Failed to initialize admin app"),console.error("Admin app initialization error:",be)}finally{l(!1)}},[]),rr=_.useCallback(()=>{Ut(be=>!be)},[]),Ir=_.useCallback(()=>{Vt(!0),Ut(!1)},[]),wr=_.useCallback(()=>{Vt(!1)},[]),Wr=_.useCallback(async()=>{try{await Promise.all([he(),Ee(),we(),_e()])}catch(be){console.error("Error loading admin data:",be),d("Failed to load admin data")}},[]),he=_.useCallback(async()=>{try{const be="admin_users_",Ct=fa(be);if(Ct){console.log(" Using cached users data"),Ue(Ct);return}const jr=await n("/.netlify/functions/get-all-users");console.log(" Users response:",jr);const Ur=jr.users||[];Ue(Ur),qs(be,Ur,da.admin_users),console.log(" Users set to state:",Ur)}catch(be){console.error("Error loading users:",be)}},[n]),Ee=_.useCallback(async()=>{try{const be="admin_teachers_",Ct=fa(be);if(Ct){console.log(" Using cached teachers data"),nt(Ct);return}const jr=await n("/.netlify/functions/get-all-teachers");console.log(" Teachers response:",jr);const Ur=jr.teachers||[];nt(Ur),qs(be,Ur,da.admin_teachers),console.log(" Teachers set to state:",Ur)}catch(be){console.error("Error loading teachers:",be)}},[n]),we=_.useCallback(async()=>{try{const be="admin_subjects_",Ct=fa(be);if(Ct){console.log(" Using cached subjects data"),It(Ct);return}const jr=await n("/.netlify/functions/get-all-subjects");console.log(" Subjects response:",jr);const Ur=jr.subjects||[];It(Ur),qs(be,Ur,da.admin_subjects),console.log(" Subjects set to state:",Ur)}catch(be){console.error("Error loading subjects:",be)}},[n]),_e=_.useCallback(async()=>{try{const be="admin_academic_years_",Ct=fa(be);if(Ct){console.log(" Using cached academic years data"),Xt(Ct);return}const jr=await lu.loadAcademicCalendar();jr&&Array.isArray(jr)?(Xt(jr),qs(be,jr,da.admin_academic_years)):console.error("Failed to load academic calendar")}catch(be){console.error("Error loading academic year:",be)}},[]),ke=_.useCallback(async()=>{try{if(E(!b),!b){const be=Date.now(),[Ct,jr]=await Promise.all([n(`/.netlify/functions/get-all-tests?t=${be}`),n(`/.netlify/functions/get-test-assignments?t=${be}`)]);console.log(" Active tests response:",Ct),console.log(" Assignments response:",jr);const Ur=Ct.tests||[],Fn=(jr.assignments||[]).reduce(($s,ci)=>{const on=`${ci.test_type}-${ci.test_id}`;return $s[on]||($s[on]=[]),$s[on].push(ci),$s},{}),as=Ur.map($s=>{const ci=`${$s.test_type}-${$s.test_id}`,on=Fn[ci]||[],Re=on.some(yt=>yt.is_active);return{...$s,is_active:Re,assignments:on}});H(as),console.log(" All tests with status set to state:",as)}}catch(be){console.error("Error loading tests:",be),h({type:"error",message:"Failed to load tests"})}},[n,b]),Ce=_.useCallback((be,Ct)=>{Pt(jr=>({...jr,[be]:Ct}))},[]),rt=_.useCallback((be,Ct)=>{Qe(jr=>({...jr,[be]:Ct}))},[]),xt=_.useCallback((be,Ct)=>{Ke(jr=>({...jr,[be]:Ct}))},[]);_.useCallback(()=>{console.log(" Testing local storage...");try{const be={test:"data",timestamp:Date.now()};localStorage.setItem("test",JSON.stringify(be));const Ct=JSON.parse(localStorage.getItem("test"));console.log(" Local storage test successful:",Ct),h({type:"success",message:"Local storage test successful"})}catch(be){console.error(" Local storage test failed:",be),h({type:"error",message:"Local storage test failed"})}},[]),_.useCallback(()=>{console.log(" Clearing local storage...");try{localStorage.clear(),console.log(" Local storage cleared"),h({type:"success",message:"Local storage cleared"})}catch(be){console.error(" Error clearing local storage:",be),h({type:"error",message:"Error clearing local storage"})}},[]),_.useCallback(async()=>{console.log(" Checking teacher subjects...");try{const Ct=(await n("/.netlify/functions/get-all-teachers")).data||[];console.log(" Teachers data:",Ct),h({type:"success",message:`Found ${Ct.length} teachers`})}catch(be){console.error(" Error checking teacher subjects:",be),h({type:"error",message:"Error checking teacher subjects"})}},[n]);const ut=_.useCallback(async be=>{be.preventDefault();try{console.log(" Submitting user:",He);const Ct=await s("/.netlify/functions/add-user",He);Ct.success?(h({type:"success",message:"User added successfully"}),br(!1),Pt({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),he()):h({type:"error",message:Ct.message||"Failed to add user"})}catch(Ct){console.error(" Error adding user:",Ct),h({type:"error",message:"Error adding user"})}},[He,s,he]),ce=_.useCallback(async be=>{be.preventDefault();try{console.log(" Submitting teacher:",Ie);const Ct=await s("/.netlify/functions/add-teacher",Ie);Ct.success?(h({type:"success",message:"Teacher added successfully"}),Sr(!1),Qe({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),Ee()):h({type:"error",message:Ct.message||"Failed to add teacher"})}catch(Ct){console.error(" Error adding teacher:",Ct),h({type:"error",message:"Error adding teacher"})}},[Ie,s,Ee]),ge=_.useCallback(async be=>{be.preventDefault();try{console.log(" Submitting subject:",Ne);const Ct=await s("/.netlify/functions/add-subject",Ne);Ct.success?(h({type:"success",message:"Subject added successfully"}),ye(!1),Ke({subject_id:"",subject:"",description:"",is_active:!0}),we()):h({type:"error",message:Ct.message||"Failed to add subject"})}catch(Ct){console.error(" Error adding subject:",Ct),h({type:"error",message:"Error adding subject"})}},[Ne,s,we]),Pe=_.useCallback(be=>{j(be),D({name:be.name||"",surname:be.surname||"",grade:be.grade||"",class:be.class||"",student_id:be.student_id||"",nickname:be.nickname||"",password:be.password||"",is_active:be.is_active!==void 0?be.is_active:!0})},[]),je=_.useCallback(async()=>{try{const be=[];Object.keys(A).forEach(Ct=>{Ct!=="student_id"&&A[Ct]!==M[Ct]&&be.push({fieldName:Ct,newValue:A[Ct]})});for(const Ct of be)await s("/.netlify/functions/update-user",{userId:M.student_id,fieldName:Ct.fieldName,newValue:Ct.newValue});h({type:"success",message:"User updated successfully!"}),j(null),D({}),he()}catch{h({type:"error",message:"Failed to update user"})}},[A,M,s,he]),Ze=_.useCallback(async be=>{if(window.confirm("Are you sure you want to delete this user?"))try{(await s("/.netlify/functions/delete-user",{userId:be})).success&&(h({type:"success",message:"User deleted successfully!"}),he())}catch{h({type:"error",message:"Failed to delete user"})}},[s,he]),dt=_.useCallback(be=>{G(be),se({teacher_id:be.teacher_id||"",username:be.username||"",password:be.password||"",first_name:be.first_name||"",last_name:be.last_name||"",is_active:be.is_active!==void 0?be.is_active:!0})},[]),_t=_.useCallback(async()=>{try{const be=[];Object.keys(X).forEach(Ct=>{Ct!=="teacher_id"&&X[Ct]!==L[Ct]&&be.push({fieldName:Ct,newValue:X[Ct]})});for(const Ct of be)await s("/.netlify/functions/update-teacher",{teacherId:L.teacher_id,fieldName:Ct.fieldName,newValue:Ct.newValue});h({type:"success",message:"Teacher updated successfully!"}),G(null),se({}),Ee()}catch{h({type:"error",message:"Failed to update teacher"})}},[X,L,s,Ee]),ir=_.useCallback(async be=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{(await s("/.netlify/functions/delete-teacher",{teacherId:be})).success&&(h({type:"success",message:"Teacher deleted successfully!"}),Ee())}catch{h({type:"error",message:"Failed to delete teacher"})}},[s,Ee]),Ot=_.useCallback(be=>{re(be),V({subject_id:be.subject_id||"",subject:be.subject||""})},[]),Qt=_.useCallback(async()=>{try{const be=[];Object.keys(B).forEach(Ct=>{Ct!=="subject_id"&&B[Ct]!==Q[Ct]&&be.push({fieldName:Ct,newValue:B[Ct]})});for(const Ct of be)await s("/.netlify/functions/update-subject",{subjectId:Q.subject_id,fieldName:Ct.fieldName,newValue:Ct.newValue});h({type:"success",message:"Subject updated successfully!"}),re(null),V({}),we()}catch{h({type:"error",message:"Failed to update subject"})}},[B,Q,s,we]),Cr=_.useCallback(async be=>{if(window.confirm("Are you sure you want to delete this subject?"))try{const Ct=await s("/.netlify/functions/delete-subject",{subjectId:be});Ct.success?(h({type:"success",message:"Subject deleted successfully!"}),we()):h({type:"error",message:Ct.message||"Failed to delete subject"})}catch{h({type:"error",message:"Failed to delete subject"})}},[s,we]),Br=_.useCallback((be,Ct)=>{Rt(jr=>({...jr,[be]:Ct}))},[]),Rr=_.useCallback(async be=>{if(be.preventDefault(),!qe.startDate||!qe.endDate||!qe.teacherId){h({type:"error",message:"Please fill in all required fields (Start Date, End Date, Teacher ID)"});return}if(window.confirm("Are you sure you want to delete all test data for the selected criteria? This action cannot be undone."))try{const Ct=await s("/.netlify/functions/delete-test-data",qe);Ct.success?(h({type:"success",message:`Successfully deleted ${Ct.deletedCount} test records!`}),Be(!1),Rt({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""})):h({type:"error",message:Ct.message||"Failed to delete test data"})}catch{h({type:"error",message:"Failed to delete test data"})}},[qe,s]),tn=_.useCallback(async(be,Ct,jr)=>{try{const Ur=Date.now(),Xn=await n(`/.netlify/functions/get-test-assignments?t=${Ur}`);if(Xn.success&&Xn.assignments){const Fn=Xn.assignments.filter(as=>as.test_id===parseInt(be)&&as.test_type===Ct);if(Fn.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const as of Fn){const $s=await s("/.netlify/functions/remove-assignment",{teacher_id:jr,assignment_id:as.assignment_id,test_type:Ct,test_id:be});if(!$s.success){h({type:"error",message:`Failed to complete test: ${$s.message}`});return}}h({type:"success",message:"Test marked as complete successfully!"}),await ke()}else h({type:"error",message:"Failed to get test assignments"})}catch(Ur){console.error("Error completing test:",Ur),h({type:"error",message:"Failed to complete test"})}},[s,n,ke]),mn=_.useCallback(async(be,Ct,jr)=>{try{const Ur=Date.now(),Xn=await n(`/.netlify/functions/get-test-assignments?t=${Ur}`);if(Xn.success&&Xn.assignments){const Fn=Xn.assignments.filter(as=>as.test_id===parseInt(be)&&as.test_type===Ct);if(Fn.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const as of Fn){const $s=await s("/.netlify/functions/remove-assignment",{teacher_id:jr,assignment_id:as.assignment_id,test_type:Ct,test_id:be,mark_active:!0});if(!$s.success){h({type:"error",message:`Failed to reactivate test: ${$s.message}`});return}}h({type:"success",message:"Test marked as active successfully!"}),await ke()}else h({type:"error",message:"Failed to get test assignments"})}catch(Ur){console.error("Error reactivating test:",Ur),h({type:"error",message:"Failed to reactivate test"})}},[s,n,ke]),dn=_.useCallback(async(be=!1)=>{try{const Ct=Date.now(),jr=await n(`/.netlify/functions/get-all-tests?t=${Ct}`);console.log(" Actual tests response:",jr),Ae(jr.tests||[]),console.log(" Actual tests set to state:",jr.tests||[])}catch(Ct){console.error("Error loading actual tests:",Ct),h({type:"error",message:"Failed to load tests"})}},[n]),Fr=_.useCallback(async(be,Ct,jr)=>{try{const Ur=await s("/.netlify/functions/delete-test",{test_id:be,test_type:Ct,teacher_id:jr});if(Ur.success){h({type:"success",message:"Test deleted successfully!"});const Xn=`${Ct}-${be}-${jr}`;ct(Fn=>{const as=new Set(Fn);return as.delete(Xn),as}),await dn(!0)}else h({type:"error",message:`Failed to delete test: ${Ur.message}`})}catch(Ur){console.error("Error deleting test:",Ur),h({type:"error",message:"Failed to delete test"})}},[s,dn]),li=_.useCallback((be,Ct,jr)=>{const Ur=`${Ct}-${be}-${jr}`;ct(Xn=>{const Fn=new Set(Xn);return Fn.has(Ur)?Fn.delete(Ur):Fn.add(Ur),Fn})},[]),gn=N?We.filter(be=>be.grade.toString()===N):We,Qs=R.filter(be=>{const Ct=Z==="all"?!0:Z==="active"?be.is_active:!be.is_active,jr=!z||be.teacher_id===z,Ur=!W||new Date(be.created_at)>=new Date(W),Xn=!ee||new Date(be.created_at)<=new Date(ee+"T23:59:59");return Ct&&jr&&Ur&&Xn}),_s=pe.filter(be=>{const Ct=!Me||be.teacher_id===Me,jr=!Ve||new Date(be.created_at)>=new Date(Ve),Ur=!lt||new Date(be.created_at)<=new Date(lt+"T23:59:59");return Ct&&jr&&Ur}),Ha=_.useCallback(()=>{if(vt.size===_s.length&&_s.length>0)ct(new Set);else{const be=_s.map(Ct=>`${Ct.test_type}-${Ct.test_id}-${Ct.teacher_id}`);ct(new Set(be))}},[vt.size,_s]),Bn=_.useCallback(async()=>{if(vt.size!==0&&window.confirm(`Are you sure you want to delete ${vt.size} test(s)?`))try{const be=Array.from(vt).map(Ct=>{const[jr,Ur,Xn]=Ct.split("-");return s("/.netlify/functions/delete-test",{test_id:parseInt(Ur),test_type:jr,teacher_id:Xn})});await Promise.all(be),h({type:"success",message:`Successfully deleted ${vt.size} test(s)!`}),ct(new Set),await dn(!0)}catch(be){console.error("Error deleting marked tests:",be),h({type:"error",message:"Failed to delete some tests. Please try again."})}},[vt,s,dn]);return c.jsxs(gt.div,{id:"admin-cabinet-main",className:Xe.container,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[c.jsx(gt.div,{className:Xe.header,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:c.jsx("div",{className:Xe.headerContent,children:c.jsxs("div",{className:Xe.headerFlex,children:[c.jsxs(gt.div,{className:Xe.adminInfo,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx(gt.div,{className:Xe.adminAvatar,initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:c.jsx("span",{className:"text-white font-semibold text-xl",children:e?.username?.charAt(0)||"A"})})}),c.jsxs("div",{children:[c.jsx("h1",{className:Xe.adminText,children:e?.username||"Administrator"}),c.jsx("p",{className:Xe.adminSubtext,children:"Administrator Dashboard"})]})]}),c.jsxs(gt.div,{className:Xe.menuContainer,initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[c.jsxs("button",{onClick:rr,className:Xe.menuButton,style:{zIndex:1e3},children:[c.jsx("span",{className:"hidden sm:inline",children:"Menu"}),c.jsx(gt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:bt?180:0},transition:{duration:.2},children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),c.jsx(il,{children:bt&&c.jsx(gt.div,{className:Xe.menuDropdown,initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:c.jsxs("div",{className:"py-2",children:[c.jsx(gt.button,{onClick:Ir,className:Xe.menuItem,whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),c.jsx(gt.button,{onClick:()=>{rr(),r()},className:Xe.menuItemLogout,whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),o&&c.jsx(un,{text:"Loading..."}),u&&c.jsx(iu,{type:"error",message:u,onClose:()=>d(null)}),f&&c.jsx(iu,{type:f.type,message:f.message,onClose:()=>h(null)}),Bt&&c.jsx("div",{className:Xe.modalOverlay,children:c.jsxs("div",{className:Xe.modalContent,children:[c.jsx("h2",{className:Xe.modalTitle,children:"Change Password"}),c.jsxs("form",{className:"space-y-4",children:[c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{htmlFor:"currentPassword",className:Xe.formLabel,children:"Current Password"}),c.jsx("input",{type:"password",id:"currentPassword",className:Xe.formInput})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{htmlFor:"newPassword",className:Xe.formLabel,children:"New Password"}),c.jsx("input",{type:"password",id:"newPassword",className:Xe.formInput})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{htmlFor:"confirmPassword",className:Xe.formLabel,children:"Confirm New Password"}),c.jsx("input",{type:"password",id:"confirmPassword",className:Xe.formInput})]}),c.jsxs("div",{className:Xe.modalActions,children:[c.jsx(ot,{type:"button",variant:"secondary",onClick:wr,className:"flex-1",children:"Cancel"}),c.jsx(ot,{type:"submit",variant:"primary",className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Change Password"})]})]})]})}),c.jsx(gt.div,{className:Xe.mainContainer,initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:c.jsxs("div",{className:"space-y-6",children:[c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:c.jsxs($t,{className:Xe.cardContainer,children:[c.jsx($t.Header,{className:Xe.cardHeader,children:c.jsx($t.Title,{className:Xe.cardTitle,children:"User Management"})}),c.jsxs($t.Body,{className:Xe.cardBody,children:[c.jsxs("div",{className:Xe.buttonGroup,children:[c.jsx(ot,{variant:"primary",onClick:()=>br(!0),className:Xe.buttonPrimary,children:"Add User"}),c.jsx(ot,{variant:"secondary",onClick:()=>{he(),x(!g)},className:Xe.buttonSecondary,children:g?"Hide Users Table":"Get All Users "})]}),c.jsx(il,{children:vr&&c.jsxs(gt.div,{className:Xe.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New User"}),c.jsxs("form",{onSubmit:ut,className:"space-y-4",children:[c.jsxs("div",{className:Xe.formGrid,children:[c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Grade"}),c.jsx("input",{type:"text",value:He.grade,onChange:be=>Ce("grade",be.target.value),className:Xe.formInput,placeholder:"Enter grade"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Class"}),c.jsx("input",{type:"text",value:He.class,onChange:be=>Ce("class",be.target.value),className:Xe.formInput,placeholder:"Enter class"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Number"}),c.jsx("input",{type:"text",value:He.number,onChange:be=>Ce("number",be.target.value),className:Xe.formInput,placeholder:"Enter number"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Student ID"}),c.jsx("input",{type:"text",value:He.student_id,onChange:be=>Ce("student_id",be.target.value),className:Xe.formInput,placeholder:"Enter student ID"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Name"}),c.jsx("input",{type:"text",value:He.name,onChange:be=>Ce("name",be.target.value),className:Xe.formInput,placeholder:"Enter name"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Surname"}),c.jsx("input",{type:"text",value:He.surname,onChange:be=>Ce("surname",be.target.value),className:Xe.formInput,placeholder:"Enter surname"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Nickname"}),c.jsx("input",{type:"text",value:He.nickname,onChange:be=>Ce("nickname",be.target.value),className:Xe.formInput,placeholder:"Enter nickname"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Password"}),c.jsx("input",{type:"password",value:He.password,onChange:be=>Ce("password",be.target.value),className:Xe.formInput,placeholder:"Enter password"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"userActive",checked:He.is_active,onChange:be=>Ce("is_active",be.target.checked),className:Xe.formCheckbox}),c.jsx("label",{htmlFor:"userActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:Xe.formActions,children:[c.jsx(ot,{type:"button",variant:"secondary",onClick:()=>br(!1),className:Xe.buttonSecondary,children:"Cancel"}),c.jsx(ot,{type:"submit",variant:"primary",className:Xe.buttonPrimary,children:"Add User"})]})]})]})}),g&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Users (",gn.length," of ",We.length,")"]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Filter by Grade:"}),c.jsxs("select",{value:N,onChange:be=>P(be.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Grades"}),[...new Set(We.map(be=>be.grade))].sort().map(be=>c.jsxs("option",{value:be,children:["Grade ",be]},be))]})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:c.jsxs("table",{className:Xe.table,children:[c.jsx("thead",{className:Xe.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:Xe.tableHeaderCell,children:"Name"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Grade"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Class"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Student ID"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Number"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Nickname"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:Xe.tableBody,children:gn.map((be,Ct)=>c.jsxs("tr",{className:Xe.tableRow,children:[c.jsxs("td",{className:Xe.tableCell,children:[be.name," ",be.surname]}),c.jsx("td",{className:Xe.tableCell,children:be.grade}),c.jsx("td",{className:Xe.tableCell,children:be.class}),c.jsx("td",{className:Xe.tableCell,children:be.student_id}),c.jsx("td",{className:Xe.tableCell,children:be.number}),c.jsx("td",{className:Xe.tableCell,children:be.nickname}),c.jsx("td",{className:Xe.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Pe(be),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>Ze(be.student_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},be.id||Ct))})]})})})]})]})]})}),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:c.jsxs($t,{className:Xe.cardContainer,children:[c.jsxs($t.Header,{className:Xe.cardHeader,children:[c.jsx($t.Title,{className:Xe.cardTitle,children:"Teacher Management"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsx("button",{onClick:i,className:"px-3 py-1.5 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors text-xs whitespace-nowrap",title:"Check and mark overdue assignments (7+ days old) as inactive",children:"Check Overdue Assignments"}),c.jsx(ot,{variant:"primary",onClick:()=>Sr(!0),className:"text-xs whitespace-nowrap",children:"Add Teacher"}),c.jsx(ot,{variant:"secondary",onClick:()=>{Ee(),v(!y)},className:"text-xs whitespace-nowrap",children:y?"Hide Teachers Table":"Get All Teachers "})]})]}),c.jsxs($t.Body,{className:Xe.cardBody,children:[c.jsx(il,{children:Dr&&c.jsxs(gt.div,{className:Xe.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Teacher"}),c.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[c.jsxs("div",{className:Xe.formGrid,children:[c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Teacher ID"}),c.jsx("input",{type:"text",value:Ie.teacher_id,onChange:be=>rt("teacher_id",be.target.value),className:Xe.formInput,placeholder:"Enter teacher ID"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Username"}),c.jsx("input",{type:"text",value:Ie.username,onChange:be=>rt("username",be.target.value),className:Xe.formInput,placeholder:"Enter username"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Password"}),c.jsx("input",{type:"password",value:Ie.password,onChange:be=>rt("password",be.target.value),className:Xe.formInput,placeholder:"Enter password"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"First Name"}),c.jsx("input",{type:"text",value:Ie.first_name,onChange:be=>rt("first_name",be.target.value),className:Xe.formInput,placeholder:"Enter first name"})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Last Name"}),c.jsx("input",{type:"text",value:Ie.last_name,onChange:be=>rt("last_name",be.target.value),className:Xe.formInput,placeholder:"Enter last name"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"teacherActive",checked:Ie.is_active,onChange:be=>rt("is_active",be.target.checked),className:Xe.formCheckbox}),c.jsx("label",{htmlFor:"teacherActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),c.jsxs("div",{className:Xe.formActions,children:[c.jsx(ot,{type:"button",variant:"secondary",onClick:()=>Sr(!1),className:Xe.buttonSecondary,children:"Cancel"}),c.jsx(ot,{type:"submit",variant:"primary",className:Xe.buttonPrimary,children:"Add Teacher"})]})]})]})}),M&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),c.jsx("input",{type:"text",value:A.name,onChange:be=>D({...A,name:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surname"}),c.jsx("input",{type:"text",value:A.surname,onChange:be=>D({...A,surname:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),c.jsx("input",{type:"number",value:A.grade,onChange:be=>D({...A,grade:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),c.jsx("input",{type:"number",value:A.class,onChange:be=>D({...A,class:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),c.jsx("input",{type:"text",value:A.student_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Student ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),c.jsx("input",{type:"text",value:A.nickname,onChange:be=>D({...A,nickname:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"text",value:A.password,onChange:be=>D({...A,password:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"is_active",checked:A.is_active,onChange:be=>D({...A,is_active:be.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),c.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>{j(null),D({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),c.jsx("button",{onClick:je,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update User"})]})]})}),y&&c.jsxs("div",{className:"mt-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Teachers (",tt.length,")"]})}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:Xe.table,children:[c.jsx("thead",{className:Xe.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:Xe.tableHeaderCell,children:"Teacher ID"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Name"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Username"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Password"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Status"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Created"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:Xe.tableBody,children:tt.map((be,Ct)=>c.jsxs("tr",{className:Xe.tableRow,children:[c.jsx("td",{className:Xe.tableCell,children:be.teacher_id}),c.jsxs("td",{className:Xe.tableCell,children:[be.first_name," ",be.last_name]}),c.jsx("td",{className:Xe.tableCell,children:be.username}),c.jsx("td",{className:Xe.tableCell,children:be.password}),c.jsx("td",{className:Xe.tableCell,children:c.jsx("span",{className:be.is_active?Xe.statusActive:Xe.statusInactive,children:be.is_active?"Active":"Inactive"})}),c.jsx("td",{className:Xe.tableCell,children:new Date(be.created_at).toLocaleDateString()}),c.jsx("td",{className:Xe.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>dt(be),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>ir(be.teacher_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},be.teacher_id||Ct))})]})})})]})]})]})}),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:c.jsxs($t,{className:Xe.cardContainer,children:[c.jsx($t.Header,{className:Xe.cardHeader,children:c.jsx($t.Title,{className:Xe.cardTitle,children:"Subject Management"})}),c.jsxs($t.Body,{className:Xe.cardBody,children:[c.jsxs("div",{className:Xe.buttonGroup,children:[c.jsx(ot,{variant:"primary",onClick:()=>ye(!0),className:Xe.buttonPrimary,children:"Add Subject"}),c.jsx(ot,{variant:"secondary",onClick:()=>{we(),k(!T)},className:Xe.buttonSecondary,children:T?"Hide Subjects Table":"Get All Subjects "})]}),c.jsx(il,{children:pr&&c.jsxs(gt.div,{className:Xe.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Subject"}),c.jsxs("form",{onSubmit:ge,className:"space-y-4",children:[c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Subject Name"}),c.jsx("input",{type:"text",value:Ne.subject,onChange:be=>xt("subject",be.target.value),className:Xe.formInput,placeholder:"Enter subject name",required:!0}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Subject ID will be automatically generated"})]}),c.jsxs("div",{className:Xe.formActions,children:[c.jsx(ot,{type:"button",variant:"secondary",onClick:()=>ye(!1),className:Xe.buttonSecondary,children:"Cancel"}),c.jsx(ot,{type:"submit",variant:"primary",className:Xe.buttonPrimary,children:"Add Subject"})]})]})]})}),L&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Teacher"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher ID"}),c.jsx("input",{type:"text",value:X.teacher_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teacher ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),c.jsx("input",{type:"text",value:X.username,onChange:be=>se({...X,username:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),c.jsx("input",{type:"text",value:X.password,onChange:be=>se({...X,password:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),c.jsx("input",{type:"text",value:X.first_name,onChange:be=>se({...X,first_name:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),c.jsx("input",{type:"text",value:X.last_name,onChange:be=>se({...X,last_name:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",id:"teacher_is_active",checked:X.is_active,onChange:be=>se({...X,is_active:be.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),c.jsx("label",{htmlFor:"teacher_is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>{G(null),se({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),c.jsx("button",{onClick:_t,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update Teacher"})]})]})}),Q&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Subject"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject ID"}),c.jsx("input",{type:"text",value:B.subject_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Subject ID cannot be changed"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name"}),c.jsx("input",{type:"text",value:B.subject,onChange:be=>V({...B,subject:be.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[c.jsx("button",{onClick:()=>re(null),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),c.jsx("button",{onClick:Qt,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Update Subject"})]})]})}),T&&c.jsxs("div",{className:"mt-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Subjects (",at.length,")"]})}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:Xe.table,children:[c.jsx("thead",{className:Xe.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:Xe.tableHeaderCell,children:"Subject ID"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Subject Name"}),c.jsx("th",{className:Xe.tableHeaderCell,children:"Actions"})]})}),c.jsx("tbody",{className:Xe.tableBody,children:at.map((be,Ct)=>c.jsxs("tr",{className:Xe.tableRow,children:[c.jsx("td",{className:Xe.tableCell,children:be.subject_id}),c.jsx("td",{className:Xe.tableCell,children:be.subject}),c.jsx("td",{className:Xe.tableCell,children:c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>Ot(be),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),c.jsx("button",{onClick:()=>Cr(be.subject_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},be.subject_id||Ct))})]})})})]})]})]})}),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:c.jsxs($t,{className:Xe.cardContainer,children:[c.jsx($t.Header,{className:Xe.cardHeader,children:c.jsx($t.Title,{className:Xe.cardTitle,children:"Test Data Deletion"})}),c.jsxs($t.Body,{className:Xe.cardBody,children:[c.jsx("div",{className:Xe.buttonGroup,children:c.jsx(ot,{variant:"danger",onClick:()=>Be(!0),className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})}),c.jsx(il,{children:Fe&&c.jsxs(gt.div,{className:Xe.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Delete Test Data by Date Range"}),c.jsxs("form",{onSubmit:Rr,className:"space-y-4",children:[c.jsxs("div",{className:Xe.formGrid,children:[c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Start Date *"}),c.jsx("input",{type:"date",value:qe.startDate,onChange:be=>Br("startDate",be.target.value),className:Xe.formInput,required:!0})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"End Date *"}),c.jsx("input",{type:"date",value:qe.endDate,onChange:be=>Br("endDate",be.target.value),className:Xe.formInput,required:!0})]})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Teacher ID *"}),c.jsxs("select",{value:qe.teacherId,onChange:be=>Br("teacherId",be.target.value),className:Xe.formInput,required:!0,children:[c.jsx("option",{value:"",children:"Select a teacher"}),tt.map(be=>c.jsxs("option",{value:be.teacher_id,children:[be.teacher_id," - ",be.first_name," ",be.last_name]},be.teacher_id))]})]}),c.jsxs("div",{className:Xe.formGroup,children:[c.jsx("label",{className:Xe.formLabel,children:"Subject (Optional)"}),c.jsxs("select",{value:qe.subjectId,onChange:be=>Br("subjectId",be.target.value),className:Xe.formInput,children:[c.jsx("option",{value:"",children:"All subjects"}),at.map(be=>c.jsx("option",{value:be.subject_id,children:be.subject},be.subject_id))]})]}),c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action cannot be undone"}),c.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[c.jsx("p",{children:"This will permanently delete:"}),c.jsxs("ul",{className:"list-disc list-inside mt-1",children:[c.jsx("li",{children:"All test records within the date range"}),c.jsx("li",{children:"All test questions and answers"}),c.jsx("li",{children:"All test results and submissions"}),c.jsx("li",{children:"All test assignments"}),c.jsx("li",{children:"Associated Cloudinary images (for matching tests)"})]})]})]})]})}),c.jsxs("div",{className:Xe.formActions,children:[c.jsx(ot,{type:"button",variant:"secondary",onClick:()=>Be(!1),className:Xe.buttonSecondary,children:"Cancel"}),c.jsx(ot,{type:"submit",variant:"danger",className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})]})]})]})})]})]})}),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.85,duration:.5},children:c.jsxs($t,{className:Xe.cardContainer,children:[c.jsx($t.Header,{className:Xe.cardHeader,children:c.jsx($t.Title,{className:Xe.cardTitle,children:"Assignments Management"})}),c.jsxs($t.Body,{className:Xe.cardBody,children:[c.jsx("div",{className:"mb-4",children:c.jsx(ot,{variant:"primary",onClick:ke,className:Xe.buttonPrimary,children:b?"Hide Assignments Table":"Get All Assignments "})}),b&&c.jsx("div",{className:"mb-4",children:c.jsx("p",{className:"text-sm text-gray-600",children:"Showing all tests (Active and Completed)"})}),b&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Assignments (",Qs.length," of ",R.length,")"]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:Z,onChange:be=>le(be.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"all",children:"All"}),c.jsx("option",{value:"active",children:"Active"}),c.jsx("option",{value:"completed",children:"Completed"})]}),c.jsxs("select",{value:z,onChange:be=>I(be.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Teachers"}),tt.map(be=>c.jsxs("option",{value:be.teacher_id,children:[be.first_name," ",be.last_name]},be.teacher_id))]}),c.jsx("input",{type:"date",value:W,onChange:be=>K(be.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),c.jsx("input",{type:"date",value:ee,onChange:be=>oe(be.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:Xe.table,children:[c.jsx("thead",{className:Xe.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:Xe.tableBody,children:Qs.map((be,Ct)=>c.jsxs("tr",{className:Xe.tableRow,children:[c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:be.test_name,children:be.test_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:c.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:be.test_type.replace("_"," ").toUpperCase()})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:be.teacher_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:be.num_questions}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(be.created_at).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-3 text-xs",children:c.jsx("div",{className:"flex space-x-2",children:be.is_active?c.jsx("button",{onClick:()=>tn(be.test_id,be.test_type,be.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-orange-100 text-orange-700 hover:bg-orange-200",children:"Mark Complete"}):c.jsx("button",{onClick:()=>mn(be.test_id,be.test_type,be.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Mark Active"})})})]},`${be.test_type}-${be.test_id}-${Ct}`))})]})})})]})]})]})}),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:c.jsxs($t,{className:Xe.cardContainer,children:[c.jsx($t.Header,{className:Xe.cardHeader,children:c.jsx($t.Title,{className:Xe.cardTitle,children:"Test Management"})}),c.jsxs($t.Body,{className:Xe.cardBody,children:[c.jsx("div",{className:"mb-4",children:c.jsx(ot,{variant:"primary",onClick:()=>{Te||dn(),ie(!Te)},className:Xe.buttonPrimary,children:Te?"Hide Tests Table":"Get All Tests "})}),Te&&c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Tests (",_s.length," of ",pe.length,")"]}),vt.size>0&&c.jsxs(ot,{variant:"danger",onClick:Bn,className:"text-sm px-4 py-2",children:["Delete Marked (",vt.size,")"]})]}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("select",{value:Me,onChange:be=>Je(be.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[c.jsx("option",{value:"",children:"All Teachers"}),tt.map(be=>c.jsxs("option",{value:be.teacher_id,children:[be.first_name," ",be.last_name]},be.teacher_id))]}),c.jsx("input",{type:"date",value:Ve,onChange:be=>Dt(be.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),c.jsx("input",{type:"date",value:lt,onChange:be=>At(be.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),c.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:Xe.table,children:[c.jsx("thead",{className:Xe.tableHeader,children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:c.jsx("input",{type:"checkbox",checked:vt.size===_s.length&&_s.length>0,onChange:Ha,className:"cursor-pointer"})}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),c.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:Xe.tableBody,children:_s.map((be,Ct)=>c.jsxs("tr",{className:Xe.tableRow,children:[c.jsx("td",{className:Xe.tableCell,children:c.jsx("input",{type:"checkbox",checked:vt.has(`${be.test_type}-${be.test_id}-${be.teacher_id}`),onChange:()=>li(be.test_id,be.test_type,be.teacher_id),className:"cursor-pointer"})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:be.test_name,children:be.test_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:c.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:be.test_type.replace("_"," ").toUpperCase()})}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:be.teacher_name}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:be.num_questions}),c.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(be.created_at).toLocaleDateString()}),c.jsx("td",{className:"px-4 py-3 text-xs",children:c.jsx("div",{className:"flex space-x-2",children:c.jsx("button",{onClick:()=>Fr(be.test_id,be.test_type,be.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})})})]},`${be.test_type}-${be.test_id}-${Ct}`))})]})})})]})]})]})}),c.jsx(gt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:c.jsxs($t,{className:Xe.cardContainer,children:[c.jsx($t.Header,{className:Xe.cardHeader,children:c.jsx($t.Title,{className:Xe.cardTitle,children:"Debug & Testing"})}),c.jsx($t.Body,{className:Xe.cardBody})]})})]})})]})},rje=()=>{const{isAdmin:e,getCurrentAdminId:t,logout:r}=Ps(),{get:n}=$l(),{showNotification:s}=ai();_.useEffect(()=>{a()},[]);const a=_.useCallback(async()=>{if(console.log(" Initializing Admin Application..."),!e()){console.error(" User is not an admin, redirecting to login"),s("Access Denied: You are not an administrator.","error"),r();return}try{i(),await o(),l(),u(),console.log(" Admin Application initialized successfully"),s("Admin dashboard loaded successfully","success")}catch(d){console.error(" Error initializing admin app:",d),s("Failed to initialize admin dashboard","error")}},[e,t,r,s,n]),i=_.useCallback(()=>{console.log(" Initializing global event listeners...");const d=f=>{f.ctrlKey&&f.key==="k"&&(f.preventDefault(),console.log("Admin search shortcut triggered"))};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),o=_.useCallback(async()=>{try{console.log(" Loading admin data...");const[d,f,h,g]=await Promise.allSettled([n("/.netlify/functions/get-all-users"),n("/.netlify/functions/get-all-teachers"),n("/.netlify/functions/get-all-subjects"),lu.loadAcademicCalendar()]);d.status==="fulfilled"&&d.value?.success&&console.log(" Users loaded:",d.value.users?.length||0),f.status==="fulfilled"&&f.value?.success&&console.log(" Teachers loaded:",f.value.teachers?.length||0),h.status==="fulfilled"&&h.value?.success&&console.log(" Subjects loaded:",h.value.subjects?.length||0),g.status==="fulfilled"&&Array.isArray(g.value)&&console.log(" Academic years loaded:",g.value.length||0),console.log(" Admin data loading completed")}catch(d){throw console.error(" Error loading admin data:",d),d}},[n]),l=_.useCallback(()=>{console.log(" Initializing test deletion functionality..."),console.log(" Test deletion functionality initialized")},[]),u=_.useCallback(()=>{console.log(" Exposing admin functions globally..."),window.toggleSubjectsContent=()=>{const f=document.getElementById("allSubjectsContainer"),h=document.querySelector('button[onclick="toggleSubjectsContent()"]');if(!f){console.error(" allSubjectsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Subjects":"Hide Subjects"},window.showAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm");f&&(f.style.display="block")},window.hideAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm"),h=document.getElementById("newSubjectForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm");f&&(f.style.display="block")},window.hideAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm"),h=document.getElementById("newAcademicYearForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleUsersContent=()=>{const f=document.getElementById("allUsersContainer"),h=document.querySelector('button[onclick="toggleUsersContent()"]');if(!f){console.error(" allUsersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Users":"Hide Users"},window.showAddUserForm=()=>{const f=document.getElementById("addUserForm");f&&(f.style.display="block")},window.hideAddUserForm=()=>{const f=document.getElementById("addUserForm"),h=document.getElementById("newUserForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm");f&&(f.style.display="block")},window.hideAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm"),h=document.getElementById("newTeacherForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleTeachersContent=()=>{const f=document.getElementById("allTeachersContainer"),h=document.querySelector('button[onclick="toggleTeachersContent()"]');if(!f){console.error(" allTeachersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Teachers":"Hide Teachers"},window.toggleTestsContent=()=>{const f=document.getElementById("allTestsContainer"),h=document.querySelector('button[onclick="toggleTestsContent()"]');if(!f){console.error(" allTestsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Tests":"Hide Tests"},window.toggleAssignmentsContent=()=>{const f=document.getElementById("allAssignmentsContainer"),h=document.querySelector('button[onclick="toggleAssignmentsContent()"]');if(!f){console.error(" allAssignmentsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Assignments":"Hide Assignments"},window.toggleResultsContent=()=>{const f=document.getElementById("allResultsContainer"),h=document.querySelector('button[onclick="toggleResultsContent()"]');if(!f){console.error(" allResultsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Results":"Hide Results"};const d={};window.toggleSection=f=>{console.log(` toggleSection called with sectionId: ${f}`);const h=Date.now();if(d[f]&&h-d[f]<300){console.log(` Ignoring rapid successive call for ${f}`);return}d[f]=h;const g=document.getElementById(f);if(!g){console.error(` Section with id '${f}' not found!`);return}const x=g.style.display!=="none";g.style.display=x?"none":"block";const y=document.querySelector(`button[onclick="toggleSection('${f}')"]`);y&&(y.textContent=x?"Show":"Hide")},window.addClickListeners=()=>{console.log(" Adding click listeners to section headers...");const f=document.querySelectorAll(".section-header");console.log(` Found ${f.length} section headers`),f.forEach((h,g)=>{const x=h.textContent.trim();if(console.log(` Processing header ${g+1}:`,x),h.dataset.listenerAdded==="true"){console.log(` Skipping header ${x} - listener already added`);return}h.addEventListener("click",()=>{const y=h.dataset.sectionId;y&&window.toggleSection(y)}),h.dataset.listenerAdded="true",console.log(` Added click listener to header: ${x}`)})},window.makeFieldEditable=f=>{const h=f.textContent;f.dataset.field;const g=document.createElement("input");g.type="text",g.value=h,g.className="editable-input";const x=document.createElement("button");x.textContent="Save",x.className="btn-save",x.onclick=()=>window.saveField(f,g,x,y);const y=document.createElement("button");y.textContent="Cancel",y.className="btn-cancel",y.onclick=()=>{f.textContent=h,f.style.display="block",g.remove(),x.remove(),y.remove()},f.style.display="none",f.parentNode.insertBefore(g,f),f.parentNode.insertBefore(x,f),f.parentNode.insertBefore(y,f)},window.saveField=(f,h,g,x)=>{const y=h.value.trim(),v=f.dataset.field,T=f.dataset.recordId;if(!y){alert("Field cannot be empty");return}console.log(`Saving field ${v} for record ${T} with value: ${y}`),f.textContent=y,f.style.display="block",h.remove(),g.remove(),x.remove()},window.showTestDataDeletion=()=>console.log("showTestDataDeletion called"),window.hideTestDataDeletionForm=()=>console.log("hideTestDataDeletionForm called"),window.loadTeacherGradesClasses=()=>console.log("loadTeacherGradesClasses called"),window.checkTeacherSubjects=()=>console.log("checkTeacherSubjects called"),window.initializeTestDeletion=()=>console.log("initializeTestDeletion called"),window.handleAssignmentDeletion=()=>console.log("handleAssignmentDeletion called"),window.handleTestDataDeletion=()=>console.log("handleTestDataDeletion called"),window.getSelectedGradesClasses=()=>console.log("getSelectedGradesClasses called"),window.hideAssignmentDeletionForm=()=>console.log("hideAssignmentDeletionForm called"),window.addKeyboardAccessibility=()=>console.log("addKeyboardAccessibility called"),window.testToggleSection=()=>console.log("testToggleSection called"),window.testAllToggles=()=>console.log("testAllToggles called"),window.manualToggleTest=()=>console.log("manualToggleTest called"),window.addEditableFieldListeners=()=>console.log("addEditableFieldListeners called"),window.deleteTest=()=>console.log("deleteTest called"),window.testLocalStorage=()=>{console.log("Testing localStorage...");try{localStorage.setItem("test","value");const f=localStorage.getItem("test");return localStorage.removeItem("test"),console.log(" localStorage is working"),!0}catch(f){return console.error(" localStorage error:",f),!1}},window.clearAllLocalStorage=()=>{console.log("Clearing all localStorage..."),localStorage.clear(),console.log(" localStorage cleared")},window.exportLocalStorage=()=>{console.log("Exporting localStorage...");const f={};for(let y=0;y<localStorage.length;y++){const v=localStorage.key(y);f[v]=localStorage.getItem(v)}const h=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),g=URL.createObjectURL(h),x=document.createElement("a");x.href=g,x.download="localStorage-backup.json",x.click(),URL.revokeObjectURL(g)},console.log(" Admin functions exposed globally")},[]);return e()?c.jsx(tje,{}):c.jsxs("div",{className:"admin-error",children:[c.jsx("h2",{children:"Access Denied"}),c.jsx("p",{children:"You don't have permission to access the admin dashboard."}),c.jsx("button",{onClick:r,children:"Return to Login"})]})},_k=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,role:n,isLoading:s}=Ps();return s?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?t&&!t.includes(n)?c.jsx(Ip,{to:"/unauthorized",replace:!0}):e:c.jsx(Ip,{to:"/login",replace:!0})},nje=()=>c.jsxs("div",{className:"unauthorized-page",children:[c.jsx("h1",{children:"Access Denied"}),c.jsx("p",{children:"You don't have permission to access this page."})]}),sje=()=>c.jsx(lB,{children:c.jsx(tH,{children:c.jsx(ZW,{children:c.jsx(xQ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c.jsx("div",{className:"app",children:c.jsxs(UT,{children:[c.jsx(ca,{path:"/login",element:c.jsx(Ide,{})}),c.jsx(ca,{path:"/unauthorized",element:c.jsx(nje,{})}),c.jsx(ca,{path:"/student/*",element:c.jsx(_k,{allowedRoles:["student"],children:c.jsx(W0e,{})})}),c.jsx(ca,{path:"/teacher/*",element:c.jsx(_k,{allowedRoles:["teacher"],children:c.jsx(eje,{})})}),c.jsx(ca,{path:"/admin/*",element:c.jsx(_k,{allowedRoles:["admin"],children:c.jsx(rje,{})})}),c.jsx(ca,{path:"/",element:c.jsx(Ip,{to:"/login",replace:!0})}),c.jsx(ca,{path:"*",element:c.jsx(Ip,{to:"/login",replace:!0})})]})})})})})});class aje{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data",this.startIntegrityMonitoring()}startIntegrityMonitoring(){setInterval(()=>{this.performIntegrityCheck().catch(t=>{console.error("Integrity check failed:",t)})},3e4)}async performIntegrityCheck(){try{const t=await ia.get();t&&!this.validateTokenFormat(t)&&(console.warn("Integrity check failed - corrupted token detected"),await this.restoreFromBackup()||(console.warn("No valid backup available - clearing authentication"),await this.clearAuth()))}catch(t){console.error("Error during integrity check:",t)}}async getToken(){const t=await ia.get();return t&&!this.validateTokenFormat(t)?(console.warn("Corrupted token detected in storage - clearing it"),this.clearAuth(),null):t}getTokenSync(){return null}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}async setToken(t){if(!this.validateTokenFormat(t))return console.error("Invalid token format - refusing to store corrupted token"),!1;try{this.decodeToken(t);const r=await ia.get();if(r)try{localStorage.setItem(`${this.tokenKey}_backup`,r)}catch{}const n=await ia.set(t);return n?console.log("Token stored successfully with secure storage (hash verification, retry, write verification)"):console.error("Failed to store token - secure storage failed"),n}catch(r){return console.error("Failed to store token - token is corrupted:",r),!1}}async restoreFromBackup(){try{const t=localStorage.getItem(`${this.tokenKey}_backup`);if(t&&this.validateTokenFormat(t))return console.log("Restoring token from backup"),await ia.set(t)}catch(t){console.warn("Failed to restore from backup",t)}return!1}validateTokenFormat(t){if(!t||typeof t!="string")return console.warn("Token validation failed: not a string"),!1;if(!t.includes("."))return console.warn("Token validation failed: not a JWT format"),!1;const r=t.split(".");if(r.length!==3)return console.warn("Token validation failed: not 3 parts"),!1;for(let n=0;n<r.length;n++)try{atob(r[n].replace(/-/g,"+").replace(/_/g,"/"))}catch{return console.warn(`Token validation failed: part ${n} is not valid base64`),!1}return!0}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){return this.setToken(t)?(this.setUserData({role:r}),localStorage.setItem("accessToken",t),!0):(console.error("Failed to set token - token validation failed"),!1)}async isAuthenticated(){const t=await this.getToken();if(!t)return!1;try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),!1;const r=t.split(".");if(r.length!==3)return console.warn("Invalid token format - not 3 parts"),this.clearAuth(),!1;const n=JSON.parse(atob(r[1])),s=Date.now()/1e3;return n.exp>s}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}async clearAuth(){try{await ia.clear(),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey),localStorage.removeItem(`${this.tokenKey}_backup`)}catch(t){console.error("Failed to clear localStorage - possible corruption:",t),this.forceClearAllAuthData()}}forceClearAllAuthData(){["auth_token","accessToken","userRole","userData","refresh_token","auth_token_backup"].forEach(r=>{try{localStorage.removeItem(r)}catch(n){console.warn(`Failed to remove ${r}:`,n)}})}logout(){this.clearAuth(),window.location.href="/login"}async getAuthHeader(){const t=await this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=await this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401)if(await this.refreshToken()){const o=await this.getToken();return s.Authorization=`Bearer ${o}`,fetch(t,{...r,headers:s})}else throw this.logout(),new Error("Authentication failed");return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json(),s=n.accessToken||n.token;return s?await this.setToken(s)?(n.refreshToken&&this.setRefreshToken(n.refreshToken),!0):(console.error("Failed to store refreshed token"),!1):(console.error("Refresh token response missing accessToken"),!1)}else{const n=await r.json().catch(()=>({}));return console.error("Token refresh failed:",r.status,n.message||"Unknown error"),!1}}catch(r){console.error("Error refreshing token:",r)}return!1}async getAccessToken(){return await this.getToken()}decodeToken(t){try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),null;const r=t.split(".");return r.length!==3?(console.warn("Invalid token format - not 3 parts"),this.clearAuth(),null):JSON.parse(atob(r[1]))}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),null}}async init(){return await this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{await this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}}const qX=new aje;window.tokenManager=qX;if(typeof document<"u"){const e=async()=>{await qX.init()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}class KX{constructor(){this.currentRole=null,this.loadedFunctions=new Set,this.blockedFunctions=new Set,this.initialized=!1,this.retryCount=0,this.maxRetries=20}initialize(){if(this.initialized){console.log("[DEBUG] Role-based loader already initialized, skipping...");return}if(this.retryCount>=this.maxRetries){console.warn("[DEBUG] Max retries reached, stopping role-based loader initialization");return}if(this.retryCount++,(this.retryCount%5===1||this.retryCount===this.maxRetries)&&console.log(`[DEBUG] Role-based loader initializing... (attempt ${this.retryCount}/${this.maxRetries})`),console.log("[DEBUG] Token manager available:",!!window.tokenManager),window.tokenManager&&window.tokenManager.isAuthenticated()){const t=window.tokenManager.getUserRole();console.log("[DEBUG] Role from token manager:",t),console.log("[DEBUG] Access token exists:",!!window.tokenManager.getAccessToken()),t?(this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess()):(console.log("[DEBUG] No role found, waiting for role to be set..."),setTimeout(()=>this.initialize(),500))}else console.log("[DEBUG] Token manager not available or not authenticated, waiting..."),setTimeout(()=>this.initialize(),500)}setupRoleBasedAccess(){this.currentRole||(console.warn("No role detected, defaulting to student access"),this.currentRole="student");let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check:",r),t=!1}console.log(`Role-based loader initialized for: ${this.currentRole}${t?" (admin)":""}`),this.loadRoleSpecificFunctions(),this.setupRoleBasedUI(),this.replaceBlockedFunctions()}loadRoleSpecificFunctions(){this.currentRole==="teacher"?this.loadTeacherFunctions():this.currentRole==="student"&&this.loadStudentFunctions()}loadTeacherFunctions(){console.log("Teacher functions already available in main script")}loadStudentFunctions(){console.log("Student functions already available in main script")}loadFunction(t,r){console.log(`Function ${t} already available in main script for ${r}`),this.loadedFunctions.add(t)}setupRoleBasedUI(){let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check in UI:",r),t=!1}this.currentRole==="student"&&this.hideTeacherElements(),this.currentRole==="teacher"&&!t&&this.hideStudentElements()}hideTeacherElements(){[".teacher-cabinet",".test-creation-panel",".grade-management-panel",".class-management-panel",'[data-role="teacher"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}hideStudentElements(){[".student-cabinet",".test-taking-panel",".results-viewing-panel",'[data-role="student"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}replaceBlockedFunctions(){this.currentRole==="student"?this.blockTeacherFunctions():this.currentRole==="teacher"&&this.blockStudentFunctions()}blockTeacherFunctions(){Object.entries({createTest:()=>this.showAccessDenied("teacher"),assignTest:()=>this.showAccessDenied("teacher"),gradeTest:()=>this.showAccessDenied("teacher"),manageClasses:()=>this.showAccessDenied("teacher"),viewAllResults:()=>this.showAccessDenied("teacher")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}blockStudentFunctions(){Object.entries({takeTest:()=>this.showAccessDenied("student"),submitTest:()=>this.showAccessDenied("student"),viewMyResults:()=>this.showAccessDenied("student")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}showAccessDenied(t){const r=`Access denied. This function requires ${t} role.`;console.warn(r),typeof showNotification=="function"?showNotification(r,"warning"):alert(r)}isFunctionBlocked(t){return this.blockedFunctions.has(t)}isFunctionLoaded(t){return this.loadedFunctions.has(t)}getCurrentRole(){return this.currentRole}hasRole(t){return this.currentRole===t}reloadRoleAccess(){this.initialize()}setupAccessAfterLogin(){if(console.log("[DEBUG] Setting up role-based access after login..."),console.log("[DEBUG] Role-based loader will now initialize (no more retry loop before login)"),!window.tokenManager)return console.error("[ERROR] Token manager not available during setupAccessAfterLogin"),!1;if(!window.tokenManager.isAuthenticated())return console.error("[ERROR] User not authenticated during setupAccessAfterLogin"),!1;const t=window.tokenManager.getUserRole();return t?(console.log("[DEBUG] Setting role after login:",t),this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess(),console.log("[DEBUG] Role-based access setup completed successfully for role:",t),!0):(console.error("[ERROR] No role found in token during setupAccessAfterLogin"),!1)}}window.roleBasedLoader=new KX;typeof Qb<"u"&&Qb.exports&&(Qb.exports=KX);const ije=()=>{const e={schemaVersion:"2.0",enhancedFeatures:!0,newUserStructure:!0,newTestStructure:!0};localStorage.setItem("app_init_data",JSON.stringify(e))},oje=()=>{ije(),TJ.createRoot(document.getElementById("root")).render(c.jsx(Gs.StrictMode,{children:c.jsx(sje,{})}))};oje()});export default lje();
