var hq=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var uTe=hq((WTe,bw)=>{function OD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var _w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N_={exports:{}},j1={},E_={exports:{}},Fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qC;function mq(){if(qC)return Fn;qC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function m(X){return X===null||typeof X!="object"?null:(X=f&&X[f]||X["@@iterator"],typeof X=="function"?X:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,w={};function v(X,z,K){this.props=X,this.context=z,this.refs=w,this.updater=K||p}v.prototype.isReactComponent={},v.prototype.setState=function(X,z){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,z,"setState")},v.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function C(){}C.prototype=v.prototype;function k(X,z,K){this.props=X,this.context=z,this.refs=w,this.updater=K||p}var b=k.prototype=new C;b.constructor=k,x(b,v.prototype),b.isPureReactComponent=!0;var j=Array.isArray,A=Object.prototype.hasOwnProperty,F={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function M(X,z,K){var te,se={},pe=null,oe=null;if(z!=null)for(te in z.ref!==void 0&&(oe=z.ref),z.key!==void 0&&(pe=""+z.key),z)A.call(z,te)&&!D.hasOwnProperty(te)&&(se[te]=z[te]);var ye=arguments.length-2;if(ye===1)se.children=K;else if(1<ye){for(var we=Array(ye),Se=0;Se<ye;Se++)we[Se]=arguments[Se+2];se.children=we}if(X&&X.defaultProps)for(te in ye=X.defaultProps,ye)se[te]===void 0&&(se[te]=ye[te]);return{$$typeof:e,type:X,key:pe,ref:oe,props:se,_owner:F.current}}function O(X,z){return{$$typeof:e,type:X.type,key:z,ref:X.ref,props:X.props,_owner:X._owner}}function L(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function W(X){var z={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(K){return z[K]})}var re=/\/+/g;function ie(X,z){return typeof X=="object"&&X!==null&&X.key!=null?W(""+X.key):z.toString(36)}function xe(X,z,K,te,se){var pe=typeof X;(pe==="undefined"||pe==="boolean")&&(X=null);var oe=!1;if(X===null)oe=!0;else switch(pe){case"string":case"number":oe=!0;break;case"object":switch(X.$$typeof){case e:case t:oe=!0}}if(oe)return oe=X,se=se(oe),X=te===""?"."+ie(oe,0):te,j(se)?(K="",X!=null&&(K=X.replace(re,"$&/")+"/"),xe(se,z,K,"",function(Se){return Se})):se!=null&&(L(se)&&(se=O(se,K+(!se.key||oe&&oe.key===se.key?"":(""+se.key).replace(re,"$&/")+"/")+X)),z.push(se)),1;if(oe=0,te=te===""?".":te+":",j(X))for(var ye=0;ye<X.length;ye++){pe=X[ye];var we=te+ie(pe,ye);oe+=xe(pe,z,K,we,se)}else if(we=m(X),typeof we=="function")for(X=we.call(X),ye=0;!(pe=X.next()).done;)pe=pe.value,we=te+ie(pe,ye++),oe+=xe(pe,z,K,we,se);else if(pe==="object")throw z=String(X),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return oe}function de(X,z,K){if(X==null)return X;var te=[],se=0;return xe(X,te,"","",function(pe){return z.call(K,pe,se++)}),te}function fe(X){if(X._status===-1){var z=X._result;z=z(),z.then(function(K){(X._status===0||X._status===-1)&&(X._status=1,X._result=K)},function(K){(X._status===0||X._status===-1)&&(X._status=2,X._result=K)}),X._status===-1&&(X._status=0,X._result=z)}if(X._status===1)return X._result.default;throw X._result}var H={current:null},Q={transition:null},U={ReactCurrentDispatcher:H,ReactCurrentBatchConfig:Q,ReactCurrentOwner:F};function V(){throw Error("act(...) is not supported in production builds of React.")}return Fn.Children={map:de,forEach:function(X,z,K){de(X,function(){z.apply(this,arguments)},K)},count:function(X){var z=0;return de(X,function(){z++}),z},toArray:function(X){return de(X,function(z){return z})||[]},only:function(X){if(!L(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},Fn.Component=v,Fn.Fragment=r,Fn.Profiler=s,Fn.PureComponent=k,Fn.StrictMode=n,Fn.Suspense=c,Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,Fn.act=V,Fn.cloneElement=function(X,z,K){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var te=x({},X.props),se=X.key,pe=X.ref,oe=X._owner;if(z!=null){if(z.ref!==void 0&&(pe=z.ref,oe=F.current),z.key!==void 0&&(se=""+z.key),X.type&&X.type.defaultProps)var ye=X.type.defaultProps;for(we in z)A.call(z,we)&&!D.hasOwnProperty(we)&&(te[we]=z[we]===void 0&&ye!==void 0?ye[we]:z[we])}var we=arguments.length-2;if(we===1)te.children=K;else if(1<we){ye=Array(we);for(var Se=0;Se<we;Se++)ye[Se]=arguments[Se+2];te.children=ye}return{$$typeof:e,type:X.type,key:se,ref:pe,props:te,_owner:oe}},Fn.createContext=function(X){return X={$$typeof:i,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:a,_context:X},X.Consumer=X},Fn.createElement=M,Fn.createFactory=function(X){var z=M.bind(null,X);return z.type=X,z},Fn.createRef=function(){return{current:null}},Fn.forwardRef=function(X){return{$$typeof:o,render:X}},Fn.isValidElement=L,Fn.lazy=function(X){return{$$typeof:d,_payload:{_status:-1,_result:X},_init:fe}},Fn.memo=function(X,z){return{$$typeof:u,type:X,compare:z===void 0?null:z}},Fn.startTransition=function(X){var z=Q.transition;Q.transition={};try{X()}finally{Q.transition=z}},Fn.unstable_act=V,Fn.useCallback=function(X,z){return H.current.useCallback(X,z)},Fn.useContext=function(X){return H.current.useContext(X)},Fn.useDebugValue=function(){},Fn.useDeferredValue=function(X){return H.current.useDeferredValue(X)},Fn.useEffect=function(X,z){return H.current.useEffect(X,z)},Fn.useId=function(){return H.current.useId()},Fn.useImperativeHandle=function(X,z,K){return H.current.useImperativeHandle(X,z,K)},Fn.useInsertionEffect=function(X,z){return H.current.useInsertionEffect(X,z)},Fn.useLayoutEffect=function(X,z){return H.current.useLayoutEffect(X,z)},Fn.useMemo=function(X,z){return H.current.useMemo(X,z)},Fn.useReducer=function(X,z,K){return H.current.useReducer(X,z,K)},Fn.useRef=function(X){return H.current.useRef(X)},Fn.useState=function(X){return H.current.useState(X)},Fn.useSyncExternalStore=function(X,z,K){return H.current.useSyncExternalStore(X,z,K)},Fn.useTransition=function(){return H.current.useTransition()},Fn.version="18.3.1",Fn}var KC;function lh(){return KC||(KC=1,E_.exports=mq()),E_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC;function gq(){if(XC)return j1;XC=1;var e=lh(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(o,c,u){var d,f={},m=null,p=null;u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(p=c.ref);for(d in c)n.call(c,d)&&!a.hasOwnProperty(d)&&(f[d]=c[d]);if(o&&o.defaultProps)for(d in c=o.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:t,type:o,key:m,ref:p,props:f,_owner:s.current}}return j1.Fragment=r,j1.jsx=i,j1.jsxs=i,j1}var YC;function pq(){return YC||(YC=1,N_.exports=gq()),N_.exports}var l=pq(),S=lh();const Hs=eu(S),DD=OD({__proto__:null,default:Hs},[S]);var y2={},A_={exports:{}},pl={},j_={exports:{}},P_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JC;function xq(){return JC||(JC=1,(function(e){function t(Q,U){var V=Q.length;Q.push(U);e:for(;0<V;){var X=V-1>>>1,z=Q[X];if(0<s(z,U))Q[X]=U,Q[V]=z,V=X;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var U=Q[0],V=Q.pop();if(V!==U){Q[0]=V;e:for(var X=0,z=Q.length,K=z>>>1;X<K;){var te=2*(X+1)-1,se=Q[te],pe=te+1,oe=Q[pe];if(0>s(se,V))pe<z&&0>s(oe,se)?(Q[X]=oe,Q[pe]=V,X=pe):(Q[X]=se,Q[te]=V,X=te);else if(pe<z&&0>s(oe,V))Q[X]=oe,Q[pe]=V,X=pe;else break e}}return U}function s(Q,U){var V=Q.sortIndex-U.sortIndex;return V!==0?V:Q.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,m=3,p=!1,x=!1,w=!1,v=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(Q){for(var U=r(u);U!==null;){if(U.callback===null)n(u);else if(U.startTime<=Q)n(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(u)}}function j(Q){if(w=!1,b(Q),!x)if(r(c)!==null)x=!0,fe(A);else{var U=r(u);U!==null&&H(j,U.startTime-Q)}}function A(Q,U){x=!1,w&&(w=!1,C(M),M=-1),p=!0;var V=m;try{for(b(U),f=r(c);f!==null&&(!(f.expirationTime>U)||Q&&!W());){var X=f.callback;if(typeof X=="function"){f.callback=null,m=f.priorityLevel;var z=X(f.expirationTime<=U);U=e.unstable_now(),typeof z=="function"?f.callback=z:f===r(c)&&n(c),b(U)}else n(c);f=r(c)}if(f!==null)var K=!0;else{var te=r(u);te!==null&&H(j,te.startTime-U),K=!1}return K}finally{f=null,m=V,p=!1}}var F=!1,D=null,M=-1,O=5,L=-1;function W(){return!(e.unstable_now()-L<O)}function re(){if(D!==null){var Q=e.unstable_now();L=Q;var U=!0;try{U=D(!0,Q)}finally{U?ie():(F=!1,D=null)}}else F=!1}var ie;if(typeof k=="function")ie=function(){k(re)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,de=xe.port2;xe.port1.onmessage=re,ie=function(){de.postMessage(null)}}else ie=function(){v(re,0)};function fe(Q){D=Q,F||(F=!0,ie())}function H(Q,U){M=v(function(){Q(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){x||p||(x=!0,fe(A))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(Q){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var V=m;m=U;try{return Q()}finally{m=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,U){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var V=m;m=Q;try{return U()}finally{m=V}},e.unstable_scheduleCallback=function(Q,U,V){var X=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,Q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=V+z,Q={id:d++,callback:U,priorityLevel:Q,startTime:V,expirationTime:z,sortIndex:-1},V>X?(Q.sortIndex=V,t(u,Q),r(c)===null&&Q===r(u)&&(w?(C(M),M=-1):w=!0,H(j,V-X))):(Q.sortIndex=z,t(c,Q),x||p||(x=!0,fe(A))),Q},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(Q){var U=m;return function(){var V=m;m=U;try{return Q.apply(this,arguments)}finally{m=V}}}})(P_)),P_}var QC;function Sk(){return QC||(QC=1,j_.exports=xq()),j_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZC;function yq(){if(ZC)return pl;ZC=1;var e=lh(),t=Sk();function r(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,E=1;E<arguments.length;E++)g+="&args[]="+encodeURIComponent(arguments[E]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(h,g){i(h,g),i(h+"Capture",g)}function i(h,g){for(s[h]=g,h=0;h<g.length;h++)n.add(g[h])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function m(h){return c.call(f,h)?!0:c.call(d,h)?!1:u.test(h)?f[h]=!0:(d[h]=!0,!1)}function p(h,g,E,R){if(E!==null&&E.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return R?!1:E!==null?!E.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function x(h,g,E,R){if(g===null||typeof g>"u"||p(h,g,E,R))return!0;if(R)return!1;if(E!==null)switch(E.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function w(h,g,E,R,Y,le,ke){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=R,this.attributeNamespace=Y,this.mustUseProperty=E,this.propertyName=h,this.type=g,this.sanitizeURL=le,this.removeEmptyString=ke}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){v[h]=new w(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var g=h[0];v[g]=new w(g,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){v[h]=new w(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){v[h]=new w(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){v[h]=new w(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){v[h]=new w(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){v[h]=new w(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){v[h]=new w(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){v[h]=new w(h,5,!1,h.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function k(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var g=h.replace(C,k);v[g]=new w(g,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var g=h.replace(C,k);v[g]=new w(g,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var g=h.replace(C,k);v[g]=new w(g,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){v[h]=new w(h,1,!1,h.toLowerCase(),null,!1,!1)}),v.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){v[h]=new w(h,1,!1,h.toLowerCase(),null,!0,!0)});function b(h,g,E,R){var Y=v.hasOwnProperty(g)?v[g]:null;(Y!==null?Y.type!==0:R||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(x(g,E,Y,R)&&(E=null),R||Y===null?m(g)&&(E===null?h.removeAttribute(g):h.setAttribute(g,""+E)):Y.mustUseProperty?h[Y.propertyName]=E===null?Y.type===3?!1:"":E:(g=Y.attributeName,R=Y.attributeNamespace,E===null?h.removeAttribute(g):(Y=Y.type,E=Y===3||Y===4&&E===!0?"":""+E,R?h.setAttributeNS(R,g,E):h.setAttribute(g,E))))}var j=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),F=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),W=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),Q=Symbol.iterator;function U(h){return h===null||typeof h!="object"?null:(h=Q&&h[Q]||h["@@iterator"],typeof h=="function"?h:null)}var V=Object.assign,X;function z(h){if(X===void 0)try{throw Error()}catch(E){var g=E.stack.trim().match(/\n( *(at )?)/);X=g&&g[1]||""}return`
`+X+h}var K=!1;function te(h,g){if(!h||K)return"";K=!0;var E=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Dt){var R=Dt}Reflect.construct(h,[],g)}else{try{g.call()}catch(Dt){R=Dt}h.call(g.prototype)}else{try{throw Error()}catch(Dt){R=Dt}h()}}catch(Dt){if(Dt&&R&&typeof Dt.stack=="string"){for(var Y=Dt.stack.split(`
`),le=R.stack.split(`
`),ke=Y.length-1,He=le.length-1;1<=ke&&0<=He&&Y[ke]!==le[He];)He--;for(;1<=ke&&0<=He;ke--,He--)if(Y[ke]!==le[He]){if(ke!==1||He!==1)do if(ke--,He--,0>He||Y[ke]!==le[He]){var et=`
`+Y[ke].replace(" at new "," at ");return h.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",h.displayName)),et}while(1<=ke&&0<=He);break}}}finally{K=!1,Error.prepareStackTrace=E}return(h=h?h.displayName||h.name:"")?z(h):""}function se(h){switch(h.tag){case 5:return z(h.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return h=te(h.type,!1),h;case 11:return h=te(h.type.render,!1),h;case 1:return h=te(h.type,!0),h;default:return""}}function pe(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case D:return"Fragment";case F:return"Portal";case O:return"Profiler";case M:return"StrictMode";case ie:return"Suspense";case xe:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case W:return(h.displayName||"Context")+".Consumer";case L:return(h._context.displayName||"Context")+".Provider";case re:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case de:return g=h.displayName||null,g!==null?g:pe(h.type)||"Memo";case fe:g=h._payload,h=h._init;try{return pe(h(g))}catch{}}return null}function oe(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pe(g);case 8:return g===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function ye(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function we(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Se(h){var g=we(h)?"checked":"value",E=Object.getOwnPropertyDescriptor(h.constructor.prototype,g),R=""+h[g];if(!h.hasOwnProperty(g)&&typeof E<"u"&&typeof E.get=="function"&&typeof E.set=="function"){var Y=E.get,le=E.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return Y.call(this)},set:function(ke){R=""+ke,le.call(this,ke)}}),Object.defineProperty(h,g,{enumerable:E.enumerable}),{getValue:function(){return R},setValue:function(ke){R=""+ke},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function Ie(h){h._valueTracker||(h._valueTracker=Se(h))}function me(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var E=g.getValue(),R="";return h&&(R=we(h)?h.checked?"true":"false":h.value),h=R,h!==E?(g.setValue(h),!0):!1}function _e(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function We(h,g){var E=g.checked;return V({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:E??h._wrapperState.initialChecked})}function Ue(h,g){var E=g.defaultValue==null?"":g.defaultValue,R=g.checked!=null?g.checked:g.defaultChecked;E=ye(g.value!=null?g.value:E),h._wrapperState={initialChecked:R,initialValue:E,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function St(h,g){g=g.checked,g!=null&&b(h,"checked",g,!1)}function Ze(h,g){St(h,g);var E=ye(g.value),R=g.type;if(E!=null)R==="number"?(E===0&&h.value===""||h.value!=E)&&(h.value=""+E):h.value!==""+E&&(h.value=""+E);else if(R==="submit"||R==="reset"){h.removeAttribute("value");return}g.hasOwnProperty("value")?yt(h,g.type,E):g.hasOwnProperty("defaultValue")&&yt(h,g.type,ye(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(h.defaultChecked=!!g.defaultChecked)}function Kt(h,g,E){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var R=g.type;if(!(R!=="submit"&&R!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+h._wrapperState.initialValue,E||g===h.value||(h.value=g),h.defaultValue=g}E=h.name,E!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,E!==""&&(h.name=E)}function yt(h,g,E){(g!=="number"||_e(h.ownerDocument)!==h)&&(E==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+E&&(h.defaultValue=""+E))}var Rt=Array.isArray;function At(h,g,E,R){if(h=h.options,g){g={};for(var Y=0;Y<E.length;Y++)g["$"+E[Y]]=!0;for(E=0;E<h.length;E++)Y=g.hasOwnProperty("$"+h[E].value),h[E].selected!==Y&&(h[E].selected=Y),Y&&R&&(h[E].defaultSelected=!0)}else{for(E=""+ye(E),g=null,Y=0;Y<h.length;Y++){if(h[Y].value===E){h[Y].selected=!0,R&&(h[Y].defaultSelected=!0);return}g!==null||h[Y].disabled||(g=h[Y])}g!==null&&(g.selected=!0)}}function wt(h,g){if(g.dangerouslySetInnerHTML!=null)throw Error(r(91));return V({},g,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Ft(h,g){var E=g.value;if(E==null){if(E=g.children,g=g.defaultValue,E!=null){if(g!=null)throw Error(r(92));if(Rt(E)){if(1<E.length)throw Error(r(93));E=E[0]}g=E}g==null&&(g=""),E=g}h._wrapperState={initialValue:ye(E)}}function or(h,g){var E=ye(g.value),R=ye(g.defaultValue);E!=null&&(E=""+E,E!==h.value&&(h.value=E),g.defaultValue==null&&h.defaultValue!==E&&(h.defaultValue=E)),R!=null&&(h.defaultValue=""+R)}function dr(h){var g=h.textContent;g===h._wrapperState.initialValue&&g!==""&&g!==null&&(h.value=g)}function nr(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xe(h,g){return h==null||h==="http://www.w3.org/1999/xhtml"?nr(g):h==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Qe,ut=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,E,R,Y){MSApp.execUnsafeLocalFunction(function(){return h(g,E,R,Y)})}:h})(function(h,g){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=g;else{for(Qe=Qe||document.createElement("div"),Qe.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=Qe.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;g.firstChild;)h.appendChild(g.firstChild)}});function mt(h,g){if(g){var E=h.firstChild;if(E&&E===h.lastChild&&E.nodeType===3){E.nodeValue=g;return}}h.textContent=g}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ot=["Webkit","ms","Moz","O"];Object.keys(ht).forEach(function(h){Ot.forEach(function(g){g=g+h.charAt(0).toUpperCase()+h.substring(1),ht[g]=ht[h]})});function nt(h,g,E){return g==null||typeof g=="boolean"||g===""?"":E||typeof g!="number"||g===0||ht.hasOwnProperty(h)&&ht[h]?(""+g).trim():g+"px"}function sr(h,g){h=h.style;for(var E in g)if(g.hasOwnProperty(E)){var R=E.indexOf("--")===0,Y=nt(E,g[E],R);E==="float"&&(E="cssFloat"),R?h.setProperty(E,Y):h[E]=Y}}var kr=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Er(h,g){if(g){if(kr[h]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(r(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(r(61))}if(g.style!=null&&typeof g.style!="object")throw Error(r(62))}}function Gr(h,g){if(h.indexOf("-")===-1)return typeof g.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ar=null;function vr(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Ee=null,Be=null,qe=null;function Ye(h){if(h=Ju(h)){if(typeof Ee!="function")throw Error(r(280));var g=h.stateNode;g&&(g=La(g),Ee(h.stateNode,h.type,g))}}function Lt(h){Be?qe?qe.push(h):qe=[h]:Be=h}function ze(){if(Be){var h=Be,g=qe;if(qe=Be=null,Ye(h),g)for(h=0;h<g.length;h++)Ye(g[h])}}function it(h,g){return h(g)}function Le(){}var st=!1;function rt(h,g,E){if(st)return h(g,E);st=!0;try{return it(h,g,E)}finally{st=!1,(Be!==null||qe!==null)&&(Le(),ze())}}function qt(h,g){var E=h.stateNode;if(E===null)return null;var R=La(E);if(R===null)return null;E=R[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(h=h.type,R=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!R;break e;default:h=!1}if(h)return null;if(E&&typeof E!="function")throw Error(r(231,g,typeof E));return E}var Xt=!1;if(o)try{var Yt={};Object.defineProperty(Yt,"passive",{get:function(){Xt=!0}}),window.addEventListener("test",Yt,Yt),window.removeEventListener("test",Yt,Yt)}catch{Xt=!1}function Z(h,g,E,R,Y,le,ke,He,et){var Dt=Array.prototype.slice.call(arguments,3);try{g.apply(E,Dt)}catch(fr){this.onError(fr)}}var ae=!1,jt=null,G=!1,ue=null,Ce={onError:function(h){ae=!0,jt=h}};function be(h,g,E,R,Y,le,ke,He,et){ae=!1,jt=null,Z.apply(Ce,arguments)}function Me(h,g,E,R,Y,le,ke,He,et){if(be.apply(this,arguments),ae){if(ae){var Dt=jt;ae=!1,jt=null}else throw Error(r(198));G||(G=!0,ue=Dt)}}function De(h){var g=h,E=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(E=g.return),h=g.return;while(h)}return g.tag===3?E:null}function Ve(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function bt(h){if(De(h)!==h)throw Error(r(188))}function ot(h){var g=h.alternate;if(!g){if(g=De(h),g===null)throw Error(r(188));return g!==h?null:h}for(var E=h,R=g;;){var Y=E.return;if(Y===null)break;var le=Y.alternate;if(le===null){if(R=Y.return,R!==null){E=R;continue}break}if(Y.child===le.child){for(le=Y.child;le;){if(le===E)return bt(Y),h;if(le===R)return bt(Y),g;le=le.sibling}throw Error(r(188))}if(E.return!==R.return)E=Y,R=le;else{for(var ke=!1,He=Y.child;He;){if(He===E){ke=!0,E=Y,R=le;break}if(He===R){ke=!0,R=Y,E=le;break}He=He.sibling}if(!ke){for(He=le.child;He;){if(He===E){ke=!0,E=le,R=Y;break}if(He===R){ke=!0,R=le,E=Y;break}He=He.sibling}if(!ke)throw Error(r(189))}}if(E.alternate!==R)throw Error(r(190))}if(E.tag!==3)throw Error(r(188));return E.stateNode.current===E?h:g}function dt(h){return h=ot(h),h!==null?ee(h):null}function ee(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=ee(h);if(g!==null)return g;h=h.sibling}return null}var je=t.unstable_scheduleCallback,ge=t.unstable_cancelCallback,Ke=t.unstable_shouldYield,tt=t.unstable_requestPaint,Tt=t.unstable_now,cr=t.unstable_getCurrentPriorityLevel,Vt=t.unstable_ImmediatePriority,$t=t.unstable_UserBlockingPriority,mr=t.unstable_NormalPriority,Zr=t.unstable_LowPriority,jr=t.unstable_IdlePriority,Pr=null,xn=null;function Kr(h){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Pr,h,void 0,(h.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:Vn,Os=Math.log,Yn=Math.LN2;function Vn(h){return h>>>=0,h===0?32:31-(Os(h)/Yn|0)|0}var ts=64,Bs=4194304;function hn(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Pe(h,g){var E=h.pendingLanes;if(E===0)return 0;var R=0,Y=h.suspendedLanes,le=h.pingedLanes,ke=E&268435455;if(ke!==0){var He=ke&~Y;He!==0?R=hn(He):(le&=ke,le!==0&&(R=hn(le)))}else ke=E&~Y,ke!==0?R=hn(ke):le!==0&&(R=hn(le));if(R===0)return 0;if(g!==0&&g!==R&&(g&Y)===0&&(Y=R&-R,le=g&-g,Y>=le||Y===16&&(le&4194240)!==0))return g;if((R&4)!==0&&(R|=E&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=R;0<g;)E=31-Ir(g),Y=1<<E,R|=h[E],g&=~Y;return R}function Ut(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vr(h,g){for(var E=h.suspendedLanes,R=h.pingedLanes,Y=h.expirationTimes,le=h.pendingLanes;0<le;){var ke=31-Ir(le),He=1<<ke,et=Y[ke];et===-1?((He&E)===0||(He&R)!==0)&&(Y[ke]=Ut(He,g)):et<=g&&(h.expiredLanes|=He),le&=~He}}function Xr(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function xs(){var h=ts;return ts<<=1,(ts&4194240)===0&&(ts=64),h}function Dn(h){for(var g=[],E=0;31>E;E++)g.push(h);return g}function Je(h,g,E){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-Ir(g),h[g]=E}function Pt(h,g){var E=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var R=h.eventTimes;for(h=h.expirationTimes;0<E;){var Y=31-Ir(E),le=1<<Y;g[Y]=0,R[Y]=-1,h[Y]=-1,E&=~le}}function tr(h,g){var E=h.entangledLanes|=g;for(h=h.entanglements;E;){var R=31-Ir(E),Y=1<<R;Y&g|h[R]&g&&(h[R]|=g),E&=~Y}}var Jt=0;function Bn(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var vt,Re,Qt,Bt,Or,Zt=!1,on=[],Cn=null,_t=null,pr=null,gt=new Map,En=new Map,rn=[],Lr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $n(h,g){switch(h){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":gt.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(g.pointerId)}}function ds(h,g,E,R,Y,le){return h===null||h.nativeEvent!==le?(h={blockedOn:g,domEventName:E,eventSystemFlags:R,nativeEvent:le,targetContainers:[Y]},g!==null&&(g=Ju(g),g!==null&&Re(g)),h):(h.eventSystemFlags|=R,g=h.targetContainers,Y!==null&&g.indexOf(Y)===-1&&g.push(Y),h)}function Cs(h,g,E,R,Y){switch(g){case"focusin":return Cn=ds(Cn,h,g,E,R,Y),!0;case"dragenter":return _t=ds(_t,h,g,E,R,Y),!0;case"mouseover":return pr=ds(pr,h,g,E,R,Y),!0;case"pointerover":var le=Y.pointerId;return gt.set(le,ds(gt.get(le)||null,h,g,E,R,Y)),!0;case"gotpointercapture":return le=Y.pointerId,En.set(le,ds(En.get(le)||null,h,g,E,R,Y)),!0}return!1}function xo(h){var g=xc(h.target);if(g!==null){var E=De(g);if(E!==null){if(g=E.tag,g===13){if(g=Ve(E),g!==null){h.blockedOn=g,Or(h.priority,function(){Qt(E)});return}}else if(g===3&&E.stateNode.current.memoizedState.isDehydrated){h.blockedOn=E.tag===3?E.stateNode.containerInfo:null;return}}}h.blockedOn=null}function tc(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var E=Za(h.domEventName,h.eventSystemFlags,g[0],h.nativeEvent);if(E===null){E=h.nativeEvent;var R=new E.constructor(E.type,E);Ar=R,E.target.dispatchEvent(R),Ar=null}else return g=Ju(E),g!==null&&Re(g),h.blockedOn=E,!1;g.shift()}return!0}function Ds(h,g,E){tc(h)&&E.delete(g)}function Sh(){Zt=!1,Cn!==null&&tc(Cn)&&(Cn=null),_t!==null&&tc(_t)&&(_t=null),pr!==null&&tc(pr)&&(pr=null),gt.forEach(Ds),En.forEach(Ds)}function Al(h,g){h.blockedOn===g&&(h.blockedOn=null,Zt||(Zt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Sh)))}function Qa(h){function g(Y){return Al(Y,h)}if(0<on.length){Al(on[0],h);for(var E=1;E<on.length;E++){var R=on[E];R.blockedOn===h&&(R.blockedOn=null)}}for(Cn!==null&&Al(Cn,h),_t!==null&&Al(_t,h),pr!==null&&Al(pr,h),gt.forEach(g),En.forEach(g),E=0;E<rn.length;E++)R=rn[E],R.blockedOn===h&&(R.blockedOn=null);for(;0<rn.length&&(E=rn[0],E.blockedOn===null);)xo(E),E.blockedOn===null&&rn.shift()}var rc=j.ReactCurrentBatchConfig,nc=!0;function ln(h,g,E,R){var Y=Jt,le=rc.transition;rc.transition=null;try{Jt=1,sc(h,g,E,R)}finally{Jt=Y,rc.transition=le}}function yo(h,g,E,R){var Y=Jt,le=rc.transition;rc.transition=null;try{Jt=4,sc(h,g,E,R)}finally{Jt=Y,rc.transition=le}}function sc(h,g,E,R){if(nc){var Y=Za(h,g,E,R);if(Y===null)gc(h,g,R,au,E),$n(h,R);else if(Cs(Y,h,g,E,R))R.stopPropagation();else if($n(h,R),g&4&&-1<Lr.indexOf(h)){for(;Y!==null;){var le=Ju(Y);if(le!==null&&vt(le),le=Za(h,g,E,R),le===null&&gc(h,g,R,au,E),le===Y)break;Y=le}Y!==null&&R.stopPropagation()}else gc(h,g,R,null,E)}}var au=null;function Za(h,g,E,R){if(au=null,h=vr(R),h=xc(h),h!==null)if(g=De(h),g===null)h=null;else if(E=g.tag,E===13){if(h=Ve(g),h!==null)return h;h=null}else if(E===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null);return au=h,null}function Wo(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cr()){case Vt:return 1;case $t:return 4;case mr:case Zr:return 16;case jr:return 536870912;default:return 16}default:return 16}}var Oa=null,ar=null,Zs=null;function iu(){if(Zs)return Zs;var h,g=ar,E=g.length,R,Y="value"in Oa?Oa.value:Oa.textContent,le=Y.length;for(h=0;h<E&&g[h]===Y[h];h++);var ke=E-h;for(R=1;R<=ke&&g[E-R]===Y[le-R];R++);return Zs=Y.slice(h,1<R?1-R:void 0)}function jl(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function Da(){return!0}function fs(){return!1}function hs(h){function g(E,R,Y,le,ke){this._reactName=E,this._targetInst=Y,this.type=R,this.nativeEvent=le,this.target=ke,this.currentTarget=null;for(var He in h)h.hasOwnProperty(He)&&(E=h[He],this[He]=E?E(le):le[He]);return this.isDefaultPrevented=(le.defaultPrevented!=null?le.defaultPrevented:le.returnValue===!1)?Da:fs,this.isPropagationStopped=fs,this}return V(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var E=this.nativeEvent;E&&(E.preventDefault?E.preventDefault():typeof E.returnValue!="unknown"&&(E.returnValue=!1),this.isDefaultPrevented=Da)},stopPropagation:function(){var E=this.nativeEvent;E&&(E.stopPropagation?E.stopPropagation():typeof E.cancelBubble!="unknown"&&(E.cancelBubble=!0),this.isPropagationStopped=Da)},persist:function(){},isPersistent:Da}),g}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vo=hs(vn),wo=V({},vn,{view:0,detail:0}),kh=hs(wo),jd,Pd,Ia,di=V({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cl,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Ia&&(Ia&&h.type==="mousemove"?(jd=h.screenX-Ia.screenX,Pd=h.screenY-Ia.screenY):Pd=jd=0,Ia=h),jd)},movementY:function(h){return"movementY"in h?h.movementY:Pd}}),ys=hs(di),Md=V({},di,{dataTransfer:0}),ll=hs(Md),f1=V({},wo,{relatedTarget:0}),bo=hs(f1),cn=V({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Fd=hs(cn),Od=V({},vn,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Bu=hs(Od),Th=V({},vn,{data:0}),ou=hs(Th),$u={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function og(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=Dd[h])?!!g[h]:!1}function cl(){return og}var U0=V({},wo,{key:function(h){if(h.key){var g=$u[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=jl(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?h1[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cl,charCode:function(h){return h.type==="keypress"?jl(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?jl(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Ch=hs(U0),Nh=V({},di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lu=hs(Nh),lg=V({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cl}),W0=hs(lg),Id=V({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),cu=hs(Id),Rd=V({},di,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),H0=hs(Rd),cg=[9,13,27,32],zu=o&&"CompositionEvent"in window,Ho=null;o&&"documentMode"in document&&(Ho=document.documentMode);var ac=o&&"TextEvent"in window&&!Ho,Ti=o&&(!zu||Ho&&8<Ho&&11>=Ho),ic=" ",G0=!1;function V0(h,g){switch(h){case"keyup":return cg.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ki(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var fi=!1;function Ld(h,g){switch(h){case"compositionend":return Ki(g);case"keypress":return g.which!==32?null:(G0=!0,ic);case"textInput":return h=g.data,h===ic&&G0?null:h;default:return null}}function Bd(h,g){if(fi)return h==="compositionend"||!zu&&V0(h,g)?(h=iu(),Zs=ar=Oa=null,fi=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Ti&&g.locale!=="ko"?null:g.data;default:return null}}var Pl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ml(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!Pl[h.type]:g==="textarea"}function Uu(h,g,E,R){Lt(R),g=tf(g,"onChange"),0<g.length&&(E=new vo("onChange","change",null,E,R),h.push({event:E,listeners:g}))}var oc=null,ul=null;function q0(h){fg(h,0)}function lc(h){var g=la(h);if(me(g))return h}function Xi(h,g){if(h==="change")return g}var Wu=!1;if(o){var Fl;if(o){var ei="oninput"in document;if(!ei){var K0=document.createElement("div");K0.setAttribute("oninput","return;"),ei=typeof K0.oninput=="function"}Fl=ei}else Fl=!1;Wu=Fl&&(!document.documentMode||9<document.documentMode)}function uu(){oc&&(oc.detachEvent("onpropertychange",Eh),ul=oc=null)}function Eh(h){if(h.propertyName==="value"&&lc(ul)){var g=[];Uu(g,ul,h,vr(h)),rt(q0,g)}}function X0(h,g,E){h==="focusin"?(uu(),oc=g,ul=E,oc.attachEvent("onpropertychange",Eh)):h==="focusout"&&uu()}function js(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return lc(ul)}function $d(h,g){if(h==="click")return lc(g)}function Y0(h,g){if(h==="input"||h==="change")return lc(g)}function ug(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var Is=typeof Object.is=="function"?Object.is:ug;function cc(h,g){if(Is(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var E=Object.keys(h),R=Object.keys(g);if(E.length!==R.length)return!1;for(R=0;R<E.length;R++){var Y=E[R];if(!c.call(g,Y)||!Is(h[Y],g[Y]))return!1}return!0}function uc(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function os(h,g){var E=uc(h);h=0;for(var R;E;){if(E.nodeType===3){if(R=h+E.textContent.length,h<=g&&R>=g)return{node:E,offset:g-h};h=R}e:{for(;E;){if(E.nextSibling){E=E.nextSibling;break e}E=E.parentNode}E=void 0}E=uc(E)}}function $s(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?$s(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function zs(){for(var h=window,g=_e();g instanceof h.HTMLIFrameElement;){try{var E=typeof g.contentWindow.location.href=="string"}catch{E=!1}if(E)h=g.contentWindow;else break;g=_e(h.document)}return g}function dc(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}function Hu(h){var g=zs(),E=h.focusedElem,R=h.selectionRange;if(g!==E&&E&&E.ownerDocument&&$s(E.ownerDocument.documentElement,E)){if(R!==null&&dc(E)){if(g=R.start,h=R.end,h===void 0&&(h=g),"selectionStart"in E)E.selectionStart=g,E.selectionEnd=Math.min(h,E.value.length);else if(h=(g=E.ownerDocument||document)&&g.defaultView||window,h.getSelection){h=h.getSelection();var Y=E.textContent.length,le=Math.min(R.start,Y);R=R.end===void 0?le:Math.min(R.end,Y),!h.extend&&le>R&&(Y=R,R=le,le=Y),Y=os(E,le);var ke=os(E,R);Y&&ke&&(h.rangeCount!==1||h.anchorNode!==Y.node||h.anchorOffset!==Y.offset||h.focusNode!==ke.node||h.focusOffset!==ke.offset)&&(g=g.createRange(),g.setStart(Y.node,Y.offset),h.removeAllRanges(),le>R?(h.addRange(g),h.extend(ke.node,ke.offset)):(g.setEnd(ke.node,ke.offset),h.addRange(g)))}}for(g=[],h=E;h=h.parentNode;)h.nodeType===1&&g.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<g.length;E++)h=g[E],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Ci=o&&"documentMode"in document&&11>=document.documentMode,du=null,Ne=null,ea=null,Ra=!1;function zd(h,g,E){var R=E.window===E?E.document:E.nodeType===9?E:E.ownerDocument;Ra||du==null||du!==_e(R)||(R=du,"selectionStart"in R&&dc(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),ea&&cc(ea,R)||(ea=R,R=tf(Ne,"onSelect"),0<R.length&&(g=new vo("onSelect","select",null,g,E),h.push({event:g,listeners:R}),g.target=du)))}function ti(h,g){var E={};return E[h.toLowerCase()]=g.toLowerCase(),E["Webkit"+h]="webkit"+g,E["Moz"+h]="moz"+g,E}var oa={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionend:ti("Transition","TransitionEnd")},Ni={},Gu={};o&&(Gu=document.createElement("div").style,"AnimationEvent"in window||(delete oa.animationend.animation,delete oa.animationiteration.animation,delete oa.animationstart.animation),"TransitionEvent"in window||delete oa.transitionend.transition);function hi(h){if(Ni[h])return Ni[h];if(!oa[h])return h;var g=oa[h],E;for(E in g)if(g.hasOwnProperty(E)&&E in Gu)return Ni[h]=g[E];return h}var Ah=hi("animationend"),_o=hi("animationiteration"),J0=hi("animationstart"),dg=hi("transitionend"),Q0=new Map,Z0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dl(h,g){Q0.set(h,g),a(g,[h])}for(var Ud=0;Ud<Z0.length;Ud++){var fc=Z0[Ud],ef=fc.toLowerCase(),Vu=fc[0].toUpperCase()+fc.slice(1);dl(ef,"on"+Vu)}dl(Ah,"onAnimationEnd"),dl(_o,"onAnimationIteration"),dl(J0,"onAnimationStart"),dl("dblclick","onDoubleClick"),dl("focusin","onFocus"),dl("focusout","onBlur"),dl(dg,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ol));function Wd(h,g,E){var R=h.type||"unknown-event";h.currentTarget=E,Me(R,g,void 0,h),h.currentTarget=null}function fg(h,g){g=(g&4)!==0;for(var E=0;E<h.length;E++){var R=h[E],Y=R.event;R=R.listeners;e:{var le=void 0;if(g)for(var ke=R.length-1;0<=ke;ke--){var He=R[ke],et=He.instance,Dt=He.currentTarget;if(He=He.listener,et!==le&&Y.isPropagationStopped())break e;Wd(Y,He,Dt),le=et}else for(ke=0;ke<R.length;ke++){if(He=R[ke],et=He.instance,Dt=He.currentTarget,He=He.listener,et!==le&&Y.isPropagationStopped())break e;Wd(Y,He,Dt),le=et}}}if(G)throw h=ue,G=!1,ue=null,h}function rs(h,g){var E=g[sf];E===void 0&&(E=g[sf]=new Set);var R=h+"__bubble";E.has(R)||(mc(g,h,2,!1),E.add(R))}function Hd(h,g,E){var R=0;g&&(R|=4),mc(E,h,R,g)}var qu="_reactListening"+Math.random().toString(36).slice(2);function hc(h){if(!h[qu]){h[qu]=!0,n.forEach(function(E){E!=="selectionchange"&&(jh.has(E)||Hd(E,!1,h),Hd(E,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[qu]||(g[qu]=!0,Hd("selectionchange",!1,g))}}function mc(h,g,E,R){switch(Wo(g)){case 1:var Y=ln;break;case 4:Y=yo;break;default:Y=sc}E=Y.bind(null,g,E,h),Y=void 0,!Xt||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(Y=!0),R?Y!==void 0?h.addEventListener(g,E,{capture:!0,passive:Y}):h.addEventListener(g,E,!0):Y!==void 0?h.addEventListener(g,E,{passive:Y}):h.addEventListener(g,E,!1)}function gc(h,g,E,R,Y){var le=R;if((g&1)===0&&(g&2)===0&&R!==null)e:for(;;){if(R===null)return;var ke=R.tag;if(ke===3||ke===4){var He=R.stateNode.containerInfo;if(He===Y||He.nodeType===8&&He.parentNode===Y)break;if(ke===4)for(ke=R.return;ke!==null;){var et=ke.tag;if((et===3||et===4)&&(et=ke.stateNode.containerInfo,et===Y||et.nodeType===8&&et.parentNode===Y))return;ke=ke.return}for(;He!==null;){if(ke=xc(He),ke===null)return;if(et=ke.tag,et===5||et===6){R=le=ke;continue e}He=He.parentNode}}R=R.return}rt(function(){var Dt=le,fr=vr(E),gr=[];e:{var ur=Q0.get(h);if(ur!==void 0){var Fr=vo,zr=h;switch(h){case"keypress":if(jl(E)===0)break e;case"keydown":case"keyup":Fr=Ch;break;case"focusin":zr="focus",Fr=bo;break;case"focusout":zr="blur",Fr=bo;break;case"beforeblur":case"afterblur":Fr=bo;break;case"click":if(E.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Fr=ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Fr=ll;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Fr=W0;break;case Ah:case _o:case J0:Fr=Fd;break;case dg:Fr=cu;break;case"scroll":Fr=kh;break;case"wheel":Fr=H0;break;case"copy":case"cut":case"paste":Fr=Bu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Fr=lu}var Ur=(g&4)!==0,Ha=!Ur&&h==="scroll",kt=Ur?ur!==null?ur+"Capture":null:ur;Ur=[];for(var ct=Dt,Et;ct!==null;){Et=ct;var yr=Et.stateNode;if(Et.tag===5&&yr!==null&&(Et=yr,kt!==null&&(yr=qt(ct,kt),yr!=null&&Ur.push(Ku(ct,yr,Et)))),Ha)break;ct=ct.return}0<Ur.length&&(ur=new Fr(ur,zr,null,E,fr),gr.push({event:ur,listeners:Ur}))}}if((g&7)===0){e:{if(ur=h==="mouseover"||h==="pointerover",Fr=h==="mouseout"||h==="pointerout",ur&&E!==Ar&&(zr=E.relatedTarget||E.fromElement)&&(xc(zr)||zr[fl]))break e;if((Fr||ur)&&(ur=fr.window===fr?fr:(ur=fr.ownerDocument)?ur.defaultView||ur.parentWindow:window,Fr?(zr=E.relatedTarget||E.toElement,Fr=Dt,zr=zr?xc(zr):null,zr!==null&&(Ha=De(zr),zr!==Ha||zr.tag!==5&&zr.tag!==6)&&(zr=null)):(Fr=null,zr=Dt),Fr!==zr)){if(Ur=ys,yr="onMouseLeave",kt="onMouseEnter",ct="mouse",(h==="pointerout"||h==="pointerover")&&(Ur=lu,yr="onPointerLeave",kt="onPointerEnter",ct="pointer"),Ha=Fr==null?ur:la(Fr),Et=zr==null?ur:la(zr),ur=new Ur(yr,ct+"leave",Fr,E,fr),ur.target=Ha,ur.relatedTarget=Et,yr=null,xc(fr)===Dt&&(Ur=new Ur(kt,ct+"enter",zr,E,fr),Ur.target=Et,Ur.relatedTarget=Ha,yr=Ur),Ha=yr,Fr&&zr)t:{for(Ur=Fr,kt=zr,ct=0,Et=Ur;Et;Et=pc(Et))ct++;for(Et=0,yr=kt;yr;yr=pc(yr))Et++;for(;0<ct-Et;)Ur=pc(Ur),ct--;for(;0<Et-ct;)kt=pc(kt),Et--;for(;ct--;){if(Ur===kt||kt!==null&&Ur===kt.alternate)break t;Ur=pc(Ur),kt=pc(kt)}Ur=null}else Ur=null;Fr!==null&&m1(gr,ur,Fr,Ur,!1),zr!==null&&Ha!==null&&m1(gr,Ha,zr,Ur,!0)}}e:{if(ur=Dt?la(Dt):window,Fr=ur.nodeName&&ur.nodeName.toLowerCase(),Fr==="select"||Fr==="input"&&ur.type==="file")var Wr=Xi;else if(Ml(ur))if(Wu)Wr=Y0;else{Wr=js;var Yr=X0}else(Fr=ur.nodeName)&&Fr.toLowerCase()==="input"&&(ur.type==="checkbox"||ur.type==="radio")&&(Wr=$d);if(Wr&&(Wr=Wr(h,Dt))){Uu(gr,Wr,E,fr);break e}Yr&&Yr(h,ur,Dt),h==="focusout"&&(Yr=ur._wrapperState)&&Yr.controlled&&ur.type==="number"&&yt(ur,"number",ur.value)}switch(Yr=Dt?la(Dt):window,h){case"focusin":(Ml(Yr)||Yr.contentEditable==="true")&&(du=Yr,Ne=Dt,ea=null);break;case"focusout":ea=Ne=du=null;break;case"mousedown":Ra=!0;break;case"contextmenu":case"mouseup":case"dragend":Ra=!1,zd(gr,E,fr);break;case"selectionchange":if(Ci)break;case"keydown":case"keyup":zd(gr,E,fr)}var Jr;if(zu)e:{switch(h){case"compositionstart":var dn="onCompositionStart";break e;case"compositionend":dn="onCompositionEnd";break e;case"compositionupdate":dn="onCompositionUpdate";break e}dn=void 0}else fi?V0(h,E)&&(dn="onCompositionEnd"):h==="keydown"&&E.keyCode===229&&(dn="onCompositionStart");dn&&(Ti&&E.locale!=="ko"&&(fi||dn!=="onCompositionStart"?dn==="onCompositionEnd"&&fi&&(Jr=iu()):(Oa=fr,ar="value"in Oa?Oa.value:Oa.textContent,fi=!0)),Yr=tf(Dt,dn),0<Yr.length&&(dn=new ou(dn,h,null,E,fr),gr.push({event:dn,listeners:Yr}),Jr?dn.data=Jr:(Jr=Ki(E),Jr!==null&&(dn.data=Jr)))),(Jr=ac?Ld(h,E):Bd(h,E))&&(Dt=tf(Dt,"onBeforeInput"),0<Dt.length&&(fr=new ou("onBeforeInput","beforeinput",null,E,fr),gr.push({event:fr,listeners:Dt}),fr.data=Jr))}fg(gr,g)})}function Ku(h,g,E){return{instance:h,listener:g,currentTarget:E}}function tf(h,g){for(var E=g+"Capture",R=[];h!==null;){var Y=h,le=Y.stateNode;Y.tag===5&&le!==null&&(Y=le,le=qt(h,E),le!=null&&R.unshift(Ku(h,le,Y)),le=qt(h,g),le!=null&&R.push(Ku(h,le,Y))),h=h.return}return R}function pc(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function m1(h,g,E,R,Y){for(var le=g._reactName,ke=[];E!==null&&E!==R;){var He=E,et=He.alternate,Dt=He.stateNode;if(et!==null&&et===R)break;He.tag===5&&Dt!==null&&(He=Dt,Y?(et=qt(E,le),et!=null&&ke.unshift(Ku(E,et,He))):Y||(et=qt(E,le),et!=null&&ke.push(Ku(E,et,He)))),E=E.return}ke.length!==0&&h.push({event:g,listeners:ke})}var hg=/\r\n?/g,Ph=/\u0000|\uFFFD/g;function mg(h){return(typeof h=="string"?h:""+h).replace(hg,`
`).replace(Ph,"")}function Xu(h,g,E){if(g=mg(g),mg(h)!==g&&E)throw Error(r(425))}function fu(){}var rf=null,Gd=null;function Vd(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var Ei=typeof setTimeout=="function"?setTimeout:void 0,nf=typeof clearTimeout=="function"?clearTimeout:void 0,Yu=typeof Promise=="function"?Promise:void 0,gg=typeof queueMicrotask=="function"?queueMicrotask:typeof Yu<"u"?function(h){return Yu.resolve(null).then(h).catch(Mh)}:Ei;function Mh(h){setTimeout(function(){throw h})}function qd(h,g){var E=g,R=0;do{var Y=E.nextSibling;if(h.removeChild(E),Y&&Y.nodeType===8)if(E=Y.data,E==="/$"){if(R===0){h.removeChild(Y),Qa(g);return}R--}else E!=="$"&&E!=="$?"&&E!=="$!"||R++;E=Y}while(E);Qa(g)}function Dl(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return h}function Ai(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var E=h.data;if(E==="$"||E==="$!"||E==="$?"){if(g===0)return h;g--}else E==="/$"&&g++}h=h.previousSibling}return null}var Il=Math.random().toString(36).slice(2),So="__reactFiber$"+Il,Kd="__reactProps$"+Il,fl="__reactContainer$"+Il,sf="__reactEvents$"+Il,af="__reactListeners$"+Il,pg="__reactHandles$"+Il;function xc(h){var g=h[So];if(g)return g;for(var E=h.parentNode;E;){if(g=E[fl]||E[So]){if(E=g.alternate,g.child!==null||E!==null&&E.child!==null)for(h=Ai(h);h!==null;){if(E=h[So])return E;h=Ai(h)}return g}h=E,E=h.parentNode}return null}function Ju(h){return h=h[So]||h[fl],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function la(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function La(h){return h[Kd]||null}var of=[],yc=-1;function Go(h){return{current:h}}function ls(h){0>yc||(h.current=of[yc],of[yc]=null,yc--)}function Jn(h,g){yc++,of[yc]=h.current,h.current=g}var Vo={},ya=Go(Vo),Ba=Go(!1),vc=Vo;function wc(h,g){var E=h.type.contextTypes;if(!E)return Vo;var R=h.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===g)return R.__reactInternalMemoizedMaskedChildContext;var Y={},le;for(le in E)Y[le]=g[le];return R&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=Y),Y}function ca(h){return h=h.childContextTypes,h!=null}function bc(){ls(Ba),ls(ya)}function lf(h,g,E){if(ya.current!==Vo)throw Error(r(168));Jn(ya,g),Jn(Ba,E)}function hu(h,g,E){var R=h.stateNode;if(g=g.childContextTypes,typeof R.getChildContext!="function")return E;R=R.getChildContext();for(var Y in R)if(!(Y in g))throw Error(r(108,oe(h)||"Unknown",Y));return V({},E,R)}function Qu(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Vo,vc=ya.current,Jn(ya,h),Jn(Ba,Ba.current),!0}function cf(h,g,E){var R=h.stateNode;if(!R)throw Error(r(169));E?(h=hu(h,g,vc),R.__reactInternalMemoizedMergedChildContext=h,ls(Ba),ls(ya),Jn(ya,h)):ls(Ba),Jn(Ba,E)}var qo=null,Zu=!1,uf=!1;function ed(h){qo===null?qo=[h]:qo.push(h)}function Ko(h){Zu=!0,ed(h)}function mu(){if(!uf&&qo!==null){uf=!0;var h=0,g=Jt;try{var E=qo;for(Jt=1;h<E.length;h++){var R=E[h];do R=R(!0);while(R!==null)}qo=null,Zu=!1}catch(Y){throw qo!==null&&(qo=qo.slice(h+1)),je(Vt,mu),Y}finally{Jt=g,uf=!1}}return null}var ji=[],td=0,_c=null,Sc=0,N=[],T=0,P=null,B=1,J="";function ce(h,g){ji[td++]=Sc,ji[td++]=_c,_c=h,Sc=g}function ve(h,g,E){N[T++]=B,N[T++]=J,N[T++]=P,P=h;var R=B;h=J;var Y=32-Ir(R)-1;R&=~(1<<Y),E+=1;var le=32-Ir(g)+Y;if(30<le){var ke=Y-Y%5;le=(R&(1<<ke)-1).toString(32),R>>=ke,Y-=ke,B=1<<32-Ir(g)+Y|E<<Y|R,J=le+h}else B=1<<le|E<<Y|R,J=h}function Te(h){h.return!==null&&(ce(h,1),ve(h,1,0))}function Oe(h){for(;h===_c;)_c=ji[--td],ji[td]=null,Sc=ji[--td],ji[td]=null;for(;h===P;)P=N[--T],N[T]=null,J=N[--T],N[T]=null,B=N[--T],N[T]=null}var Ge=null,$e=null,at=!1,Ct=null;function rr(h,g){var E=jc(5,null,null,0);E.elementType="DELETED",E.stateNode=g,E.return=h,g=h.deletions,g===null?(h.deletions=[E],h.flags|=16):g.push(E)}function Nr(h,g){switch(h.tag){case 5:var E=h.type;return g=g.nodeType!==1||E.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(h.stateNode=g,Ge=h,$e=Dl(g.firstChild),!0):!1;case 6:return g=h.pendingProps===""||g.nodeType!==3?null:g,g!==null?(h.stateNode=g,Ge=h,$e=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(E=P!==null?{id:B,overflow:J}:null,h.memoizedState={dehydrated:g,treeContext:E,retryLane:1073741824},E=jc(18,null,null,0),E.stateNode=g,E.return=h,h.child=E,Ge=h,$e=null,!0):!1;default:return!1}}function Mr(h){return(h.mode&1)!==0&&(h.flags&128)===0}function wn(h){if(at){var g=$e;if(g){var E=g;if(!Nr(h,g)){if(Mr(h))throw Error(r(418));g=Dl(E.nextSibling);var R=Ge;g&&Nr(h,g)?rr(R,E):(h.flags=h.flags&-4097|2,at=!1,Ge=h)}}else{if(Mr(h))throw Error(r(418));h.flags=h.flags&-4097|2,at=!1,Ge=h}}}function yn(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Ge=h}function Sn(h){if(h!==Ge)return!1;if(!at)return yn(h),at=!0,!1;var g;if((g=h.tag!==3)&&!(g=h.tag!==5)&&(g=h.type,g=g!=="head"&&g!=="body"&&!Vd(h.type,h.memoizedProps)),g&&(g=$e)){if(Mr(h))throw In(),Error(r(418));for(;g;)rr(h,g),g=Dl(g.nextSibling)}if(yn(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,g=0;h;){if(h.nodeType===8){var E=h.data;if(E==="/$"){if(g===0){$e=Dl(h.nextSibling);break e}g--}else E!=="$"&&E!=="$!"&&E!=="$?"||g++}h=h.nextSibling}$e=null}}else $e=Ge?Dl(h.stateNode.nextSibling):null;return!0}function In(){for(var h=$e;h;)h=Dl(h.nextSibling)}function zn(){$e=Ge=null,at=!1}function ua(h){Ct===null?Ct=[h]:Ct.push(h)}var Us=j.ReactCurrentBatchConfig;function Un(h,g,E){if(h=E.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(E._owner){if(E=E._owner,E){if(E.tag!==1)throw Error(r(309));var R=E.stateNode}if(!R)throw Error(r(147,h));var Y=R,le=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===le?g.ref:(g=function(ke){var He=Y.refs;ke===null?delete He[le]:He[le]=ke},g._stringRef=le,g)}if(typeof h!="string")throw Error(r(284));if(!E._owner)throw Error(r(290,h))}return h}function da(h,g){throw h=Object.prototype.toString.call(g),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function un(h){var g=h._init;return g(h._payload)}function Wn(h){function g(kt,ct){if(h){var Et=kt.deletions;Et===null?(kt.deletions=[ct],kt.flags|=16):Et.push(ct)}}function E(kt,ct){if(!h)return null;for(;ct!==null;)g(kt,ct),ct=ct.sibling;return null}function R(kt,ct){for(kt=new Map;ct!==null;)ct.key!==null?kt.set(ct.key,ct):kt.set(ct.index,ct),ct=ct.sibling;return kt}function Y(kt,ct){return kt=Pf(kt,ct),kt.index=0,kt.sibling=null,kt}function le(kt,ct,Et){return kt.index=Et,h?(Et=kt.alternate,Et!==null?(Et=Et.index,Et<ct?(kt.flags|=2,ct):Et):(kt.flags|=2,ct)):(kt.flags|=1048576,ct)}function ke(kt){return h&&kt.alternate===null&&(kt.flags|=2),kt}function He(kt,ct,Et,yr){return ct===null||ct.tag!==6?(ct=b_(Et,kt.mode,yr),ct.return=kt,ct):(ct=Y(ct,Et),ct.return=kt,ct)}function et(kt,ct,Et,yr){var Wr=Et.type;return Wr===D?fr(kt,ct,Et.props.children,yr,Et.key):ct!==null&&(ct.elementType===Wr||typeof Wr=="object"&&Wr!==null&&Wr.$$typeof===fe&&un(Wr)===ct.type)?(yr=Y(ct,Et.props),yr.ref=Un(kt,ct,Et),yr.return=kt,yr):(yr=u2(Et.type,Et.key,Et.props,null,kt.mode,yr),yr.ref=Un(kt,ct,Et),yr.return=kt,yr)}function Dt(kt,ct,Et,yr){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==Et.containerInfo||ct.stateNode.implementation!==Et.implementation?(ct=__(Et,kt.mode,yr),ct.return=kt,ct):(ct=Y(ct,Et.children||[]),ct.return=kt,ct)}function fr(kt,ct,Et,yr,Wr){return ct===null||ct.tag!==7?(ct=Uh(Et,kt.mode,yr,Wr),ct.return=kt,ct):(ct=Y(ct,Et),ct.return=kt,ct)}function gr(kt,ct,Et){if(typeof ct=="string"&&ct!==""||typeof ct=="number")return ct=b_(""+ct,kt.mode,Et),ct.return=kt,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case A:return Et=u2(ct.type,ct.key,ct.props,null,kt.mode,Et),Et.ref=Un(kt,null,ct),Et.return=kt,Et;case F:return ct=__(ct,kt.mode,Et),ct.return=kt,ct;case fe:var yr=ct._init;return gr(kt,yr(ct._payload),Et)}if(Rt(ct)||U(ct))return ct=Uh(ct,kt.mode,Et,null),ct.return=kt,ct;da(kt,ct)}return null}function ur(kt,ct,Et,yr){var Wr=ct!==null?ct.key:null;if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Wr!==null?null:He(kt,ct,""+Et,yr);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case A:return Et.key===Wr?et(kt,ct,Et,yr):null;case F:return Et.key===Wr?Dt(kt,ct,Et,yr):null;case fe:return Wr=Et._init,ur(kt,ct,Wr(Et._payload),yr)}if(Rt(Et)||U(Et))return Wr!==null?null:fr(kt,ct,Et,yr,null);da(kt,Et)}return null}function Fr(kt,ct,Et,yr,Wr){if(typeof yr=="string"&&yr!==""||typeof yr=="number")return kt=kt.get(Et)||null,He(ct,kt,""+yr,Wr);if(typeof yr=="object"&&yr!==null){switch(yr.$$typeof){case A:return kt=kt.get(yr.key===null?Et:yr.key)||null,et(ct,kt,yr,Wr);case F:return kt=kt.get(yr.key===null?Et:yr.key)||null,Dt(ct,kt,yr,Wr);case fe:var Yr=yr._init;return Fr(kt,ct,Et,Yr(yr._payload),Wr)}if(Rt(yr)||U(yr))return kt=kt.get(Et)||null,fr(ct,kt,yr,Wr,null);da(ct,yr)}return null}function zr(kt,ct,Et,yr){for(var Wr=null,Yr=null,Jr=ct,dn=ct=0,Ii=null;Jr!==null&&dn<Et.length;dn++){Jr.index>dn?(Ii=Jr,Jr=null):Ii=Jr.sibling;var ns=ur(kt,Jr,Et[dn],yr);if(ns===null){Jr===null&&(Jr=Ii);break}h&&Jr&&ns.alternate===null&&g(kt,Jr),ct=le(ns,ct,dn),Yr===null?Wr=ns:Yr.sibling=ns,Yr=ns,Jr=Ii}if(dn===Et.length)return E(kt,Jr),at&&ce(kt,dn),Wr;if(Jr===null){for(;dn<Et.length;dn++)Jr=gr(kt,Et[dn],yr),Jr!==null&&(ct=le(Jr,ct,dn),Yr===null?Wr=Jr:Yr.sibling=Jr,Yr=Jr);return at&&ce(kt,dn),Wr}for(Jr=R(kt,Jr);dn<Et.length;dn++)Ii=Fr(Jr,kt,dn,Et[dn],yr),Ii!==null&&(h&&Ii.alternate!==null&&Jr.delete(Ii.key===null?dn:Ii.key),ct=le(Ii,ct,dn),Yr===null?Wr=Ii:Yr.sibling=Ii,Yr=Ii);return h&&Jr.forEach(function(Mf){return g(kt,Mf)}),at&&ce(kt,dn),Wr}function Ur(kt,ct,Et,yr){var Wr=U(Et);if(typeof Wr!="function")throw Error(r(150));if(Et=Wr.call(Et),Et==null)throw Error(r(151));for(var Yr=Wr=null,Jr=ct,dn=ct=0,Ii=null,ns=Et.next();Jr!==null&&!ns.done;dn++,ns=Et.next()){Jr.index>dn?(Ii=Jr,Jr=null):Ii=Jr.sibling;var Mf=ur(kt,Jr,ns.value,yr);if(Mf===null){Jr===null&&(Jr=Ii);break}h&&Jr&&Mf.alternate===null&&g(kt,Jr),ct=le(Mf,ct,dn),Yr===null?Wr=Mf:Yr.sibling=Mf,Yr=Mf,Jr=Ii}if(ns.done)return E(kt,Jr),at&&ce(kt,dn),Wr;if(Jr===null){for(;!ns.done;dn++,ns=Et.next())ns=gr(kt,ns.value,yr),ns!==null&&(ct=le(ns,ct,dn),Yr===null?Wr=ns:Yr.sibling=ns,Yr=ns);return at&&ce(kt,dn),Wr}for(Jr=R(kt,Jr);!ns.done;dn++,ns=Et.next())ns=Fr(Jr,kt,dn,ns.value,yr),ns!==null&&(h&&ns.alternate!==null&&Jr.delete(ns.key===null?dn:ns.key),ct=le(ns,ct,dn),Yr===null?Wr=ns:Yr.sibling=ns,Yr=ns);return h&&Jr.forEach(function(fq){return g(kt,fq)}),at&&ce(kt,dn),Wr}function Ha(kt,ct,Et,yr){if(typeof Et=="object"&&Et!==null&&Et.type===D&&Et.key===null&&(Et=Et.props.children),typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case A:e:{for(var Wr=Et.key,Yr=ct;Yr!==null;){if(Yr.key===Wr){if(Wr=Et.type,Wr===D){if(Yr.tag===7){E(kt,Yr.sibling),ct=Y(Yr,Et.props.children),ct.return=kt,kt=ct;break e}}else if(Yr.elementType===Wr||typeof Wr=="object"&&Wr!==null&&Wr.$$typeof===fe&&un(Wr)===Yr.type){E(kt,Yr.sibling),ct=Y(Yr,Et.props),ct.ref=Un(kt,Yr,Et),ct.return=kt,kt=ct;break e}E(kt,Yr);break}else g(kt,Yr);Yr=Yr.sibling}Et.type===D?(ct=Uh(Et.props.children,kt.mode,yr,Et.key),ct.return=kt,kt=ct):(yr=u2(Et.type,Et.key,Et.props,null,kt.mode,yr),yr.ref=Un(kt,ct,Et),yr.return=kt,kt=yr)}return ke(kt);case F:e:{for(Yr=Et.key;ct!==null;){if(ct.key===Yr)if(ct.tag===4&&ct.stateNode.containerInfo===Et.containerInfo&&ct.stateNode.implementation===Et.implementation){E(kt,ct.sibling),ct=Y(ct,Et.children||[]),ct.return=kt,kt=ct;break e}else{E(kt,ct);break}else g(kt,ct);ct=ct.sibling}ct=__(Et,kt.mode,yr),ct.return=kt,kt=ct}return ke(kt);case fe:return Yr=Et._init,Ha(kt,ct,Yr(Et._payload),yr)}if(Rt(Et))return zr(kt,ct,Et,yr);if(U(Et))return Ur(kt,ct,Et,yr);da(kt,Et)}return typeof Et=="string"&&Et!==""||typeof Et=="number"?(Et=""+Et,ct!==null&&ct.tag===6?(E(kt,ct.sibling),ct=Y(ct,Et),ct.return=kt,kt=ct):(E(kt,ct),ct=b_(Et,kt.mode,yr),ct.return=kt,kt=ct),ke(kt)):E(kt,ct)}return Ha}var qn=Wn(!0),An=Wn(!1),ms=Go(null),jn=null,$a=null,df=null;function Xd(){df=$a=jn=null}function Yd(h){var g=ms.current;ls(ms),h._currentValue=g}function ff(h,g,E){for(;h!==null;){var R=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,R!==null&&(R.childLanes|=g)):R!==null&&(R.childLanes&g)!==g&&(R.childLanes|=g),h===E)break;h=h.return}}function ko(h,g){jn=h,df=$a=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&g)!==0&&(he=!0),h.firstContext=null)}function Yi(h){var g=h._currentValue;if(df!==h)if(h={context:h,memoizedValue:g,next:null},$a===null){if(jn===null)throw Error(r(308));$a=h,jn.dependencies={lanes:0,firstContext:h}}else $a=$a.next=h;return g}var kc=null;function hf(h){kc===null?kc=[h]:kc.push(h)}function Fh(h,g,E,R){var Y=g.interleaved;return Y===null?(E.next=E,hf(g)):(E.next=Y.next,Y.next=E),g.interleaved=E,Xo(h,R)}function Xo(h,g){h.lanes|=g;var E=h.alternate;for(E!==null&&(E.lanes|=g),E=h,h=h.return;h!==null;)h.childLanes|=g,E=h.alternate,E!==null&&(E.childLanes|=g),E=h,h=h.return;return E.tag===3?E.stateNode:null}var Tc=!1;function Oh(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xg(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Cc(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function Nc(h,g,E){var R=h.updateQueue;if(R===null)return null;if(R=R.shared,(Qn&2)!==0){var Y=R.pending;return Y===null?g.next=g:(g.next=Y.next,Y.next=g),R.pending=g,Xo(h,E)}return Y=R.interleaved,Y===null?(g.next=g,hf(R)):(g.next=Y.next,Y.next=g),R.interleaved=g,Xo(h,E)}function yg(h,g,E){if(g=g.updateQueue,g!==null&&(g=g.shared,(E&4194240)!==0)){var R=g.lanes;R&=h.pendingLanes,E|=R,g.lanes=E,tr(h,E)}}function Dh(h,g){var E=h.updateQueue,R=h.alternate;if(R!==null&&(R=R.updateQueue,E===R)){var Y=null,le=null;if(E=E.firstBaseUpdate,E!==null){do{var ke={eventTime:E.eventTime,lane:E.lane,tag:E.tag,payload:E.payload,callback:E.callback,next:null};le===null?Y=le=ke:le=le.next=ke,E=E.next}while(E!==null);le===null?Y=le=g:le=le.next=g}else Y=le=g;E={baseState:R.baseState,firstBaseUpdate:Y,lastBaseUpdate:le,shared:R.shared,effects:R.effects},h.updateQueue=E;return}h=E.lastBaseUpdate,h===null?E.firstBaseUpdate=g:h.next=g,E.lastBaseUpdate=g}function mf(h,g,E,R){var Y=h.updateQueue;Tc=!1;var le=Y.firstBaseUpdate,ke=Y.lastBaseUpdate,He=Y.shared.pending;if(He!==null){Y.shared.pending=null;var et=He,Dt=et.next;et.next=null,ke===null?le=Dt:ke.next=Dt,ke=et;var fr=h.alternate;fr!==null&&(fr=fr.updateQueue,He=fr.lastBaseUpdate,He!==ke&&(He===null?fr.firstBaseUpdate=Dt:He.next=Dt,fr.lastBaseUpdate=et))}if(le!==null){var gr=Y.baseState;ke=0,fr=Dt=et=null,He=le;do{var ur=He.lane,Fr=He.eventTime;if((R&ur)===ur){fr!==null&&(fr=fr.next={eventTime:Fr,lane:0,tag:He.tag,payload:He.payload,callback:He.callback,next:null});e:{var zr=h,Ur=He;switch(ur=g,Fr=E,Ur.tag){case 1:if(zr=Ur.payload,typeof zr=="function"){gr=zr.call(Fr,gr,ur);break e}gr=zr;break e;case 3:zr.flags=zr.flags&-65537|128;case 0:if(zr=Ur.payload,ur=typeof zr=="function"?zr.call(Fr,gr,ur):zr,ur==null)break e;gr=V({},gr,ur);break e;case 2:Tc=!0}}He.callback!==null&&He.lane!==0&&(h.flags|=64,ur=Y.effects,ur===null?Y.effects=[He]:ur.push(He))}else Fr={eventTime:Fr,lane:ur,tag:He.tag,payload:He.payload,callback:He.callback,next:null},fr===null?(Dt=fr=Fr,et=gr):fr=fr.next=Fr,ke|=ur;if(He=He.next,He===null){if(He=Y.shared.pending,He===null)break;ur=He,He=ur.next,ur.next=null,Y.lastBaseUpdate=ur,Y.shared.pending=null}}while(!0);if(fr===null&&(et=gr),Y.baseState=et,Y.firstBaseUpdate=Dt,Y.lastBaseUpdate=fr,g=Y.shared.interleaved,g!==null){Y=g;do ke|=Y.lane,Y=Y.next;while(Y!==g)}else le===null&&(Y.shared.lanes=0);Lh|=ke,h.lanes=ke,h.memoizedState=gr}}function ta(h,g,E){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var R=h[g],Y=R.callback;if(Y!==null){if(R.callback=null,R=E,typeof Y!="function")throw Error(r(191,Y));Y.call(R)}}}var bn={},vs=Go(bn),Rs=Go(bn),fa=Go(bn);function za(h){if(h===bn)throw Error(r(174));return h}function rd(h,g){switch(Jn(fa,g),Jn(Rs,h),Jn(vs,bn),h=g.nodeType,h){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:Xe(null,"");break;default:h=h===8?g.parentNode:g,g=h.namespaceURI||null,h=h.tagName,g=Xe(g,h)}ls(vs),Jn(vs,g)}function Ls(){ls(vs),ls(Rs),ls(fa)}function gf(h){za(fa.current);var g=za(vs.current),E=Xe(g,h.type);g!==E&&(Jn(Rs,h),Jn(vs,E))}function gu(h){Rs.current===h&&(ls(vs),ls(Rs))}var Ns=Go(0);function pf(h){for(var g=h;g!==null;){if(g.tag===13){var E=g.memoizedState;if(E!==null&&(E=E.dehydrated,E===null||E.data==="$?"||E.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Jd=[];function Pi(){for(var h=0;h<Jd.length;h++)Jd[h]._workInProgressVersionPrimary=null;Jd.length=0}var xf=j.ReactCurrentDispatcher,Ih=j.ReactCurrentBatchConfig,Ji=0,gs=null,ra=null,va=null,Rl=!1,nd=!1,hl=0,vg=0;function wa(){throw Error(r(321))}function Rh(h,g){if(g===null)return!1;for(var E=0;E<g.length&&E<h.length;E++)if(!Is(h[E],g[E]))return!1;return!0}function yf(h,g,E,R,Y,le){if(Ji=le,gs=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,xf.current=h===null||h.memoizedState===null?r_:id,h=E(R,Y),nd){le=0;do{if(nd=!1,hl=0,25<=le)throw Error(r(301));le+=1,va=ra=null,g.updateQueue=null,xf.current=kg,h=E(R,Y)}while(nd)}if(xf.current=_f,g=ra!==null&&ra.next!==null,Ji=0,va=ra=gs=null,Rl=!1,g)throw Error(r(300));return h}function vf(){var h=hl!==0;return hl=0,h}function Ps(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return va===null?gs.memoizedState=va=h:va=va.next=h,va}function Ua(){if(ra===null){var h=gs.alternate;h=h!==null?h.memoizedState:null}else h=ra.next;var g=va===null?gs.memoizedState:va.next;if(g!==null)va=g,ra=h;else{if(h===null)throw Error(r(310));ra=h,h={memoizedState:ra.memoizedState,baseState:ra.baseState,baseQueue:ra.baseQueue,queue:ra.queue,next:null},va===null?gs.memoizedState=va=h:va=va.next=h}return va}function Mi(h,g){return typeof g=="function"?g(h):g}function Fi(h){var g=Ua(),E=g.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=h;var R=ra,Y=R.baseQueue,le=E.pending;if(le!==null){if(Y!==null){var ke=Y.next;Y.next=le.next,le.next=ke}R.baseQueue=Y=le,E.pending=null}if(Y!==null){le=Y.next,R=R.baseState;var He=ke=null,et=null,Dt=le;do{var fr=Dt.lane;if((Ji&fr)===fr)et!==null&&(et=et.next={lane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),R=Dt.hasEagerState?Dt.eagerState:h(R,Dt.action);else{var gr={lane:fr,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null};et===null?(He=et=gr,ke=R):et=et.next=gr,gs.lanes|=fr,Lh|=fr}Dt=Dt.next}while(Dt!==null&&Dt!==le);et===null?ke=R:et.next=He,Is(R,g.memoizedState)||(he=!0),g.memoizedState=R,g.baseState=ke,g.baseQueue=et,E.lastRenderedState=R}if(h=E.interleaved,h!==null){Y=h;do le=Y.lane,gs.lanes|=le,Lh|=le,Y=Y.next;while(Y!==h)}else Y===null&&(E.lanes=0);return[g.memoizedState,E.dispatch]}function wg(h){var g=Ua(),E=g.queue;if(E===null)throw Error(r(311));E.lastRenderedReducer=h;var R=E.dispatch,Y=E.pending,le=g.memoizedState;if(Y!==null){E.pending=null;var ke=Y=Y.next;do le=h(le,ke.action),ke=ke.next;while(ke!==Y);Is(le,g.memoizedState)||(he=!0),g.memoizedState=le,g.baseQueue===null&&(g.baseState=le),E.lastRenderedState=le}return[le,R]}function bg(){}function _g(h,g){var E=gs,R=Ua(),Y=g(),le=!Is(R.memoizedState,Y);if(le&&(R.memoizedState=Y,he=!0),R=R.queue,y1(g1.bind(null,E,R,h),[h]),R.getSnapshot!==g||le||va!==null&&va.memoizedState.tag&1){if(E.flags|=2048,wf(9,pu.bind(null,E,R,Y,g),void 0,null),Di===null)throw Error(r(349));(Ji&30)!==0||Hv(E,g,Y)}return Y}function Hv(h,g,E){h.flags|=16384,h={getSnapshot:g,value:E},g=gs.updateQueue,g===null?(g={lastEffect:null,stores:null},gs.updateQueue=g,g.stores=[h]):(E=g.stores,E===null?g.stores=[h]:E.push(h))}function pu(h,g,E,R){g.value=E,g.getSnapshot=R,p1(g)&&Sg(h)}function g1(h,g,E){return E(function(){p1(g)&&Sg(h)})}function p1(h){var g=h.getSnapshot;h=h.value;try{var E=g();return!Is(h,E)}catch{return!0}}function Sg(h){var g=Xo(h,1);g!==null&&wu(g,h,1,-1)}function sd(h){var g=Ps();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:h},g.queue=h,h=h.dispatch=Yv.bind(null,gs,h),[g.memoizedState,h]}function wf(h,g,E,R){return h={tag:h,create:g,destroy:E,deps:R,next:null},g=gs.updateQueue,g===null?(g={lastEffect:null,stores:null},gs.updateQueue=g,g.lastEffect=h.next=h):(E=g.lastEffect,E===null?g.lastEffect=h.next=h:(R=E.next,E.next=h,h.next=R,g.lastEffect=h)),h}function x1(){return Ua().memoizedState}function bf(h,g,E,R){var Y=Ps();gs.flags|=h,Y.memoizedState=wf(1|g,E,void 0,R===void 0?null:R)}function Qd(h,g,E,R){var Y=Ua();R=R===void 0?null:R;var le=void 0;if(ra!==null){var ke=ra.memoizedState;if(le=ke.destroy,R!==null&&Rh(R,ke.deps)){Y.memoizedState=wf(g,E,le,R);return}}gs.flags|=h,Y.memoizedState=wf(1|g,E,le,R)}function Gv(h,g){return bf(8390656,8,h,g)}function y1(h,g){return Qd(2048,8,h,g)}function v1(h,g){return Qd(4,2,h,g)}function w1(h,g){return Qd(4,4,h,g)}function ad(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function Vv(h,g,E){return E=E!=null?E.concat([h]):null,Qd(4,4,ad.bind(null,g,h),E)}function xu(){}function b1(h,g){var E=Ua();g=g===void 0?null:g;var R=E.memoizedState;return R!==null&&g!==null&&Rh(g,R[1])?R[0]:(E.memoizedState=[h,g],h)}function Ms(h,g){var E=Ua();g=g===void 0?null:g;var R=E.memoizedState;return R!==null&&g!==null&&Rh(g,R[1])?R[0]:(h=h(),E.memoizedState=[h,g],h)}function qv(h,g,E){return(Ji&21)===0?(h.baseState&&(h.baseState=!1,he=!0),h.memoizedState=E):(Is(E,g)||(E=xs(),gs.lanes|=E,Lh|=E,h.baseState=!0),g)}function Kv(h,g){var E=Jt;Jt=E!==0&&4>E?E:4,h(!0);var R=Ih.transition;Ih.transition={};try{h(!1),g()}finally{Jt=E,Ih.transition=R}}function Xv(){return Ua().memoizedState}function t_(h,g,E){var R=Af(h);if(E={lane:R,action:E,hasEagerState:!1,eagerState:null,next:null},_1(h))Jv(g,E);else if(E=Fh(h,g,E,R),E!==null){var Y=Jo();wu(E,h,R,Y),Yo(E,g,R)}}function Yv(h,g,E){var R=Af(h),Y={lane:R,action:E,hasEagerState:!1,eagerState:null,next:null};if(_1(h))Jv(g,Y);else{var le=h.alternate;if(h.lanes===0&&(le===null||le.lanes===0)&&(le=g.lastRenderedReducer,le!==null))try{var ke=g.lastRenderedState,He=le(ke,E);if(Y.hasEagerState=!0,Y.eagerState=He,Is(He,ke)){var et=g.interleaved;et===null?(Y.next=Y,hf(g)):(Y.next=et.next,et.next=Y),g.interleaved=Y;return}}catch{}finally{}E=Fh(h,g,Y,R),E!==null&&(Y=Jo(),wu(E,h,R,Y),Yo(E,g,R))}}function _1(h){var g=h.alternate;return h===gs||g!==null&&g===gs}function Jv(h,g){nd=Rl=!0;var E=h.pending;E===null?g.next=g:(g.next=E.next,E.next=g),h.pending=g}function Yo(h,g,E){if((E&4194240)!==0){var R=g.lanes;R&=h.pendingLanes,E|=R,g.lanes=E,tr(h,E)}}var _f={readContext:Yi,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},r_={readContext:Yi,useCallback:function(h,g){return Ps().memoizedState=[h,g===void 0?null:g],h},useContext:Yi,useEffect:Gv,useImperativeHandle:function(h,g,E){return E=E!=null?E.concat([h]):null,bf(4194308,4,ad.bind(null,g,h),E)},useLayoutEffect:function(h,g){return bf(4194308,4,h,g)},useInsertionEffect:function(h,g){return bf(4,2,h,g)},useMemo:function(h,g){var E=Ps();return g=g===void 0?null:g,h=h(),E.memoizedState=[h,g],h},useReducer:function(h,g,E){var R=Ps();return g=E!==void 0?E(g):g,R.memoizedState=R.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},R.queue=h,h=h.dispatch=t_.bind(null,gs,h),[R.memoizedState,h]},useRef:function(h){var g=Ps();return h={current:h},g.memoizedState=h},useState:sd,useDebugValue:xu,useDeferredValue:function(h){return Ps().memoizedState=h},useTransition:function(){var h=sd(!1),g=h[0];return h=Kv.bind(null,h[1]),Ps().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,E){var R=gs,Y=Ps();if(at){if(E===void 0)throw Error(r(407));E=E()}else{if(E=g(),Di===null)throw Error(r(349));(Ji&30)!==0||Hv(R,g,E)}Y.memoizedState=E;var le={value:E,getSnapshot:g};return Y.queue=le,Gv(g1.bind(null,R,le,h),[h]),R.flags|=2048,wf(9,pu.bind(null,R,le,E,g),void 0,null),E},useId:function(){var h=Ps(),g=Di.identifierPrefix;if(at){var E=J,R=B;E=(R&~(1<<32-Ir(R)-1)).toString(32)+E,g=":"+g+"R"+E,E=hl++,0<E&&(g+="H"+E.toString(32)),g+=":"}else E=vg++,g=":"+g+"r"+E.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},id={readContext:Yi,useCallback:b1,useContext:Yi,useEffect:y1,useImperativeHandle:Vv,useInsertionEffect:v1,useLayoutEffect:w1,useMemo:Ms,useReducer:Fi,useRef:x1,useState:function(){return Fi(Mi)},useDebugValue:xu,useDeferredValue:function(h){var g=Ua();return qv(g,ra.memoizedState,h)},useTransition:function(){var h=Fi(Mi)[0],g=Ua().memoizedState;return[h,g]},useMutableSource:bg,useSyncExternalStore:_g,useId:Xv,unstable_isNewReconciler:!1},kg={readContext:Yi,useCallback:b1,useContext:Yi,useEffect:y1,useImperativeHandle:Vv,useInsertionEffect:v1,useLayoutEffect:w1,useMemo:Ms,useReducer:wg,useRef:x1,useState:function(){return wg(Mi)},useDebugValue:xu,useDeferredValue:function(h){var g=Ua();return ra===null?g.memoizedState=h:qv(g,ra.memoizedState,h)},useTransition:function(){var h=wg(Mi)[0],g=Ua().memoizedState;return[h,g]},useMutableSource:bg,useSyncExternalStore:_g,useId:Xv,unstable_isNewReconciler:!1};function mi(h,g){if(h&&h.defaultProps){g=V({},g),h=h.defaultProps;for(var E in h)g[E]===void 0&&(g[E]=h[E]);return g}return g}function Sf(h,g,E,R){g=h.memoizedState,E=E(R,g),E=E==null?g:V({},g,E),h.memoizedState=E,h.lanes===0&&(h.updateQueue.baseState=E)}var kf={isMounted:function(h){return(h=h._reactInternals)?De(h)===h:!1},enqueueSetState:function(h,g,E){h=h._reactInternals;var R=Jo(),Y=Af(h),le=Cc(R,Y);le.payload=g,E!=null&&(le.callback=E),g=Nc(h,le,Y),g!==null&&(wu(g,h,Y,R),yg(g,h,Y))},enqueueReplaceState:function(h,g,E){h=h._reactInternals;var R=Jo(),Y=Af(h),le=Cc(R,Y);le.tag=1,le.payload=g,E!=null&&(le.callback=E),g=Nc(h,le,Y),g!==null&&(wu(g,h,Y,R),yg(g,h,Y))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var E=Jo(),R=Af(h),Y=Cc(E,R);Y.tag=2,g!=null&&(Y.callback=g),g=Nc(h,Y,R),g!==null&&(wu(g,h,R,E),yg(g,h,R))}};function Tg(h,g,E,R,Y,le,ke){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(R,le,ke):g.prototype&&g.prototype.isPureReactComponent?!cc(E,R)||!cc(Y,le):!0}function Qv(h,g,E){var R=!1,Y=Vo,le=g.contextType;return typeof le=="object"&&le!==null?le=Yi(le):(Y=ca(g)?vc:ya.current,R=g.contextTypes,le=(R=R!=null)?wc(h,Y):Vo),g=new g(E,le),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=kf,h.stateNode=g,g._reactInternals=h,R&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=Y,h.__reactInternalMemoizedMaskedChildContext=le),g}function S1(h,g,E,R){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(E,R),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(E,R),g.state!==h&&kf.enqueueReplaceState(g,g.state,null)}function Cg(h,g,E,R){var Y=h.stateNode;Y.props=E,Y.state=h.memoizedState,Y.refs={},Oh(h);var le=g.contextType;typeof le=="object"&&le!==null?Y.context=Yi(le):(le=ca(g)?vc:ya.current,Y.context=wc(h,le)),Y.state=h.memoizedState,le=g.getDerivedStateFromProps,typeof le=="function"&&(Sf(h,g,le,E),Y.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(g=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),g!==Y.state&&kf.enqueueReplaceState(Y,Y.state,null),mf(h,E,Y,R),Y.state=h.memoizedState),typeof Y.componentDidMount=="function"&&(h.flags|=4194308)}function Zd(h,g){try{var E="",R=g;do E+=se(R),R=R.return;while(R);var Y=E}catch(le){Y=`
Error generating stack: `+le.message+`
`+le.stack}return{value:h,source:g,stack:Y,digest:null}}function Ng(h,g,E){return{value:h,source:null,stack:E??null,digest:g??null}}function Tf(h,g){try{console.error(g.value)}catch(E){setTimeout(function(){throw E})}}var n_=typeof WeakMap=="function"?WeakMap:Map;function Zv(h,g,E){E=Cc(-1,E),E.tag=3,E.payload={element:null};var R=g.value;return E.callback=function(){s2||(s2=!0,h_=R),Tf(h,g)},E}function y(h,g,E){E=Cc(-1,E),E.tag=3;var R=h.type.getDerivedStateFromError;if(typeof R=="function"){var Y=g.value;E.payload=function(){return R(Y)},E.callback=function(){Tf(h,g)}}var le=h.stateNode;return le!==null&&typeof le.componentDidCatch=="function"&&(E.callback=function(){Tf(h,g),typeof R!="function"&&(Nf===null?Nf=new Set([this]):Nf.add(this));var ke=g.stack;this.componentDidCatch(g.value,{componentStack:ke!==null?ke:""})}),E}function _(h,g,E){var R=h.pingCache;if(R===null){R=h.pingCache=new n_;var Y=new Set;R.set(g,Y)}else Y=R.get(g),Y===void 0&&(Y=new Set,R.set(g,Y));Y.has(E)||(Y.add(E),h=tq.bind(null,h,g,E),g.then(h,h))}function I(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function q(h,g,E,R,Y){return(h.mode&1)===0?(h===g?h.flags|=65536:(h.flags|=128,E.flags|=131072,E.flags&=-52805,E.tag===1&&(E.alternate===null?E.tag=17:(g=Cc(-1,1),g.tag=2,Nc(E,g,1))),E.lanes|=1),h):(h.flags|=65536,h.lanes=Y,h)}var ne=j.ReactCurrentOwner,he=!1;function Fe(h,g,E,R){g.child=h===null?An(g,null,E,R):qn(g,h.child,E,R)}function ft(h,g,E,R,Y){E=E.render;var le=g.ref;return ko(g,Y),R=yf(h,g,E,R,le,Y),E=vf(),h!==null&&!he?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~Y,Oi(h,g,Y)):(at&&E&&Te(g),g.flags|=1,Fe(h,g,R,Y),g.child)}function It(h,g,E,R,Y){if(h===null){var le=E.type;return typeof le=="function"&&!w_(le)&&le.defaultProps===void 0&&E.compare===null&&E.defaultProps===void 0?(g.tag=15,g.type=le,xr(h,g,le,R,Y)):(h=u2(E.type,null,R,g,g.mode,Y),h.ref=g.ref,h.return=g,g.child=h)}if(le=h.child,(h.lanes&Y)===0){var ke=le.memoizedProps;if(E=E.compare,E=E!==null?E:cc,E(ke,R)&&h.ref===g.ref)return Oi(h,g,Y)}return g.flags|=1,h=Pf(le,R),h.ref=g.ref,h.return=g,g.child=h}function xr(h,g,E,R,Y){if(h!==null){var le=h.memoizedProps;if(cc(le,R)&&h.ref===g.ref)if(he=!1,g.pendingProps=R=le,(h.lanes&Y)!==0)(h.flags&131072)!==0&&(he=!0);else return g.lanes=h.lanes,Oi(h,g,Y)}return Tr(h,g,E,R,Y)}function Rr(h,g,E){var R=g.pendingProps,Y=R.children,le=h!==null?h.memoizedState:null;if(R.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jn(Ag,Ll),Ll|=E;else{if((E&1073741824)===0)return h=le!==null?le.baseLanes|E:E,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null,transitions:null},g.updateQueue=null,Jn(Ag,Ll),Ll|=h,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=le!==null?le.baseLanes:E,Jn(Ag,Ll),Ll|=R}else le!==null?(R=le.baseLanes|E,g.memoizedState=null):R=E,Jn(Ag,Ll),Ll|=R;return Fe(h,g,Y,E),g.child}function mn(h,g){var E=g.ref;(h===null&&E!==null||h!==null&&h.ref!==E)&&(g.flags|=512,g.flags|=2097152)}function Tr(h,g,E,R,Y){var le=ca(E)?vc:ya.current;return le=wc(g,le),ko(g,Y),E=yf(h,g,E,R,le,Y),R=vf(),h!==null&&!he?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~Y,Oi(h,g,Y)):(at&&R&&Te(g),g.flags|=1,Fe(h,g,E,Y),g.child)}function Es(h,g,E,R,Y){if(ca(E)){var le=!0;Qu(g)}else le=!1;if(ko(g,Y),g.stateNode===null)Rn(h,g),Qv(g,E,R),Cg(g,E,R,Y),R=!0;else if(h===null){var ke=g.stateNode,He=g.memoizedProps;ke.props=He;var et=ke.context,Dt=E.contextType;typeof Dt=="object"&&Dt!==null?Dt=Yi(Dt):(Dt=ca(E)?vc:ya.current,Dt=wc(g,Dt));var fr=E.getDerivedStateFromProps,gr=typeof fr=="function"||typeof ke.getSnapshotBeforeUpdate=="function";gr||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(He!==R||et!==Dt)&&S1(g,ke,R,Dt),Tc=!1;var ur=g.memoizedState;ke.state=ur,mf(g,R,ke,Y),et=g.memoizedState,He!==R||ur!==et||Ba.current||Tc?(typeof fr=="function"&&(Sf(g,E,fr,R),et=g.memoizedState),(He=Tc||Tg(g,E,He,R,ur,et,Dt))?(gr||typeof ke.UNSAFE_componentWillMount!="function"&&typeof ke.componentWillMount!="function"||(typeof ke.componentWillMount=="function"&&ke.componentWillMount(),typeof ke.UNSAFE_componentWillMount=="function"&&ke.UNSAFE_componentWillMount()),typeof ke.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ke.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=R,g.memoizedState=et),ke.props=R,ke.state=et,ke.context=Dt,R=He):(typeof ke.componentDidMount=="function"&&(g.flags|=4194308),R=!1)}else{ke=g.stateNode,xg(h,g),He=g.memoizedProps,Dt=g.type===g.elementType?He:mi(g.type,He),ke.props=Dt,gr=g.pendingProps,ur=ke.context,et=E.contextType,typeof et=="object"&&et!==null?et=Yi(et):(et=ca(E)?vc:ya.current,et=wc(g,et));var Fr=E.getDerivedStateFromProps;(fr=typeof Fr=="function"||typeof ke.getSnapshotBeforeUpdate=="function")||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(He!==gr||ur!==et)&&S1(g,ke,R,et),Tc=!1,ur=g.memoizedState,ke.state=ur,mf(g,R,ke,Y);var zr=g.memoizedState;He!==gr||ur!==zr||Ba.current||Tc?(typeof Fr=="function"&&(Sf(g,E,Fr,R),zr=g.memoizedState),(Dt=Tc||Tg(g,E,Dt,R,ur,zr,et)||!1)?(fr||typeof ke.UNSAFE_componentWillUpdate!="function"&&typeof ke.componentWillUpdate!="function"||(typeof ke.componentWillUpdate=="function"&&ke.componentWillUpdate(R,zr,et),typeof ke.UNSAFE_componentWillUpdate=="function"&&ke.UNSAFE_componentWillUpdate(R,zr,et)),typeof ke.componentDidUpdate=="function"&&(g.flags|=4),typeof ke.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ke.componentDidUpdate!="function"||He===h.memoizedProps&&ur===h.memoizedState||(g.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||He===h.memoizedProps&&ur===h.memoizedState||(g.flags|=1024),g.memoizedProps=R,g.memoizedState=zr),ke.props=R,ke.state=zr,ke.context=et,R=Dt):(typeof ke.componentDidUpdate!="function"||He===h.memoizedProps&&ur===h.memoizedState||(g.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||He===h.memoizedProps&&ur===h.memoizedState||(g.flags|=1024),R=!1)}return cs(h,g,E,R,le,Y)}function cs(h,g,E,R,Y,le){mn(h,g);var ke=(g.flags&128)!==0;if(!R&&!ke)return Y&&cf(g,E,!1),Oi(h,g,le);R=g.stateNode,ne.current=g;var He=ke&&typeof E.getDerivedStateFromError!="function"?null:R.render();return g.flags|=1,h!==null&&ke?(g.child=qn(g,h.child,null,le),g.child=qn(g,null,He,le)):Fe(h,g,He,le),g.memoizedState=R.state,Y&&cf(g,E,!0),g.child}function Qi(h){var g=h.stateNode;g.pendingContext?lf(h,g.pendingContext,g.pendingContext!==g.context):g.context&&lf(h,g.context,!1),rd(h,g.containerInfo)}function Ec(h,g,E,R,Y){return zn(),ua(Y),g.flags|=256,Fe(h,g,E,R),g.child}var Mt={dehydrated:null,treeContext:null,retryLane:0};function pt(h){return{baseLanes:h,cachePool:null,transitions:null}}function zt(h,g,E){var R=g.pendingProps,Y=Ns.current,le=!1,ke=(g.flags&128)!==0,He;if((He=ke)||(He=h!==null&&h.memoizedState===null?!1:(Y&2)!==0),He?(le=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(Y|=1),Jn(Ns,Y&1),h===null)return wn(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((g.mode&1)===0?g.lanes=1:h.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(ke=R.children,h=R.fallback,le?(R=g.mode,le=g.child,ke={mode:"hidden",children:ke},(R&1)===0&&le!==null?(le.childLanes=0,le.pendingProps=ke):le=d2(ke,R,0,null),h=Uh(h,R,E,null),le.return=g,h.return=g,le.sibling=h,g.child=le,g.child.memoizedState=pt(E),g.memoizedState=Mt,h):Cr(g,ke));if(Y=h.memoizedState,Y!==null&&(He=Y.dehydrated,He!==null))return kn(h,g,ke,R,He,Y,E);if(le){le=R.fallback,ke=g.mode,Y=h.child,He=Y.sibling;var et={mode:"hidden",children:R.children};return(ke&1)===0&&g.child!==Y?(R=g.child,R.childLanes=0,R.pendingProps=et,g.deletions=null):(R=Pf(Y,et),R.subtreeFlags=Y.subtreeFlags&14680064),He!==null?le=Pf(He,le):(le=Uh(le,ke,E,null),le.flags|=2),le.return=g,R.return=g,R.sibling=le,g.child=R,R=le,le=g.child,ke=h.child.memoizedState,ke=ke===null?pt(E):{baseLanes:ke.baseLanes|E,cachePool:null,transitions:ke.transitions},le.memoizedState=ke,le.childLanes=h.childLanes&~E,g.memoizedState=Mt,R}return le=h.child,h=le.sibling,R=Pf(le,{mode:"visible",children:R.children}),(g.mode&1)===0&&(R.lanes=E),R.return=g,R.sibling=null,h!==null&&(E=g.deletions,E===null?(g.deletions=[h],g.flags|=16):E.push(h)),g.child=R,g.memoizedState=null,R}function Cr(h,g){return g=d2({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function Hr(h,g,E,R){return R!==null&&ua(R),qn(g,h.child,null,E),h=Cr(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function kn(h,g,E,R,Y,le,ke){if(E)return g.flags&256?(g.flags&=-257,R=Ng(Error(r(422))),Hr(h,g,ke,R)):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(le=R.fallback,Y=g.mode,R=d2({mode:"visible",children:R.children},Y,0,null),le=Uh(le,Y,ke,null),le.flags|=2,R.return=g,le.return=g,R.sibling=le,g.child=R,(g.mode&1)!==0&&qn(g,h.child,null,ke),g.child.memoizedState=pt(ke),g.memoizedState=Mt,le);if((g.mode&1)===0)return Hr(h,g,ke,null);if(Y.data==="$!"){if(R=Y.nextSibling&&Y.nextSibling.dataset,R)var He=R.dgst;return R=He,le=Error(r(419)),R=Ng(le,R,void 0),Hr(h,g,ke,R)}if(He=(ke&h.childLanes)!==0,he||He){if(R=Di,R!==null){switch(ke&-ke){case 4:Y=2;break;case 16:Y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Y=32;break;case 536870912:Y=268435456;break;default:Y=0}Y=(Y&(R.suspendedLanes|ke))!==0?0:Y,Y!==0&&Y!==le.retryLane&&(le.retryLane=Y,Xo(h,Y),wu(R,h,Y,-1))}return v_(),R=Ng(Error(r(421))),Hr(h,g,ke,R)}return Y.data==="$?"?(g.flags|=128,g.child=h.child,g=rq.bind(null,h),Y._reactRetry=g,null):(h=le.treeContext,$e=Dl(Y.nextSibling),Ge=g,at=!0,Ct=null,h!==null&&(N[T++]=B,N[T++]=J,N[T++]=P,B=h.id,J=h.overflow,P=g),g=Cr(g,R.children),g.flags|=4096,g)}function gn(h,g,E){h.lanes|=g;var R=h.alternate;R!==null&&(R.lanes|=g),ff(h.return,g,E)}function Hn(h,g,E,R,Y){var le=h.memoizedState;le===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:R,tail:E,tailMode:Y}:(le.isBackwards=g,le.rendering=null,le.renderingStartTime=0,le.last=R,le.tail=E,le.tailMode=Y)}function Wa(h,g,E){var R=g.pendingProps,Y=R.revealOrder,le=R.tail;if(Fe(h,g,R.children,E),R=Ns.current,(R&2)!==0)R=R&1|2,g.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&gn(h,E,g);else if(h.tag===19)gn(h,E,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}R&=1}if(Jn(Ns,R),(g.mode&1)===0)g.memoizedState=null;else switch(Y){case"forwards":for(E=g.child,Y=null;E!==null;)h=E.alternate,h!==null&&pf(h)===null&&(Y=E),E=E.sibling;E=Y,E===null?(Y=g.child,g.child=null):(Y=E.sibling,E.sibling=null),Hn(g,!1,Y,E,le);break;case"backwards":for(E=null,Y=g.child,g.child=null;Y!==null;){if(h=Y.alternate,h!==null&&pf(h)===null){g.child=Y;break}h=Y.sibling,Y.sibling=E,E=Y,Y=h}Hn(g,!0,E,null,le);break;case"together":Hn(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Rn(h,g){(g.mode&1)===0&&h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2)}function Oi(h,g,E){if(h!==null&&(g.dependencies=h.dependencies),Lh|=g.lanes,(E&g.childLanes)===0)return null;if(h!==null&&g.child!==h.child)throw Error(r(153));if(g.child!==null){for(h=g.child,E=Pf(h,h.pendingProps),g.child=E,E.return=g;h.sibling!==null;)h=h.sibling,E=E.sibling=Pf(h,h.pendingProps),E.return=g;E.sibling=null}return g.child}function s_(h,g,E){switch(g.tag){case 3:Qi(g),zn();break;case 5:gf(g);break;case 1:ca(g.type)&&Qu(g);break;case 4:rd(g,g.stateNode.containerInfo);break;case 10:var R=g.type._context,Y=g.memoizedProps.value;Jn(ms,R._currentValue),R._currentValue=Y;break;case 13:if(R=g.memoizedState,R!==null)return R.dehydrated!==null?(Jn(Ns,Ns.current&1),g.flags|=128,null):(E&g.child.childLanes)!==0?zt(h,g,E):(Jn(Ns,Ns.current&1),h=Oi(h,g,E),h!==null?h.sibling:null);Jn(Ns,Ns.current&1);break;case 19:if(R=(E&g.childLanes)!==0,(h.flags&128)!==0){if(R)return Wa(h,g,E);g.flags|=128}if(Y=g.memoizedState,Y!==null&&(Y.rendering=null,Y.tail=null,Y.lastEffect=null),Jn(Ns,Ns.current),R)break;return null;case 22:case 23:return g.lanes=0,Rr(h,g,E)}return Oi(h,g,E)}var yC,a_,vC,wC;yC=function(h,g){for(var E=g.child;E!==null;){if(E.tag===5||E.tag===6)h.appendChild(E.stateNode);else if(E.tag!==4&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===g)break;for(;E.sibling===null;){if(E.return===null||E.return===g)return;E=E.return}E.sibling.return=E.return,E=E.sibling}},a_=function(){},vC=function(h,g,E,R){var Y=h.memoizedProps;if(Y!==R){h=g.stateNode,za(vs.current);var le=null;switch(E){case"input":Y=We(h,Y),R=We(h,R),le=[];break;case"select":Y=V({},Y,{value:void 0}),R=V({},R,{value:void 0}),le=[];break;case"textarea":Y=wt(h,Y),R=wt(h,R),le=[];break;default:typeof Y.onClick!="function"&&typeof R.onClick=="function"&&(h.onclick=fu)}Er(E,R);var ke;E=null;for(Dt in Y)if(!R.hasOwnProperty(Dt)&&Y.hasOwnProperty(Dt)&&Y[Dt]!=null)if(Dt==="style"){var He=Y[Dt];for(ke in He)He.hasOwnProperty(ke)&&(E||(E={}),E[ke]="")}else Dt!=="dangerouslySetInnerHTML"&&Dt!=="children"&&Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&Dt!=="autoFocus"&&(s.hasOwnProperty(Dt)?le||(le=[]):(le=le||[]).push(Dt,null));for(Dt in R){var et=R[Dt];if(He=Y?.[Dt],R.hasOwnProperty(Dt)&&et!==He&&(et!=null||He!=null))if(Dt==="style")if(He){for(ke in He)!He.hasOwnProperty(ke)||et&&et.hasOwnProperty(ke)||(E||(E={}),E[ke]="");for(ke in et)et.hasOwnProperty(ke)&&He[ke]!==et[ke]&&(E||(E={}),E[ke]=et[ke])}else E||(le||(le=[]),le.push(Dt,E)),E=et;else Dt==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,He=He?He.__html:void 0,et!=null&&He!==et&&(le=le||[]).push(Dt,et)):Dt==="children"?typeof et!="string"&&typeof et!="number"||(le=le||[]).push(Dt,""+et):Dt!=="suppressContentEditableWarning"&&Dt!=="suppressHydrationWarning"&&(s.hasOwnProperty(Dt)?(et!=null&&Dt==="onScroll"&&rs("scroll",h),le||He===et||(le=[])):(le=le||[]).push(Dt,et))}E&&(le=le||[]).push("style",E);var Dt=le;(g.updateQueue=Dt)&&(g.flags|=4)}},wC=function(h,g,E,R){E!==R&&(g.flags|=4)};function k1(h,g){if(!at)switch(h.tailMode){case"hidden":g=h.tail;for(var E=null;g!==null;)g.alternate!==null&&(E=g),g=g.sibling;E===null?h.tail=null:E.sibling=null;break;case"collapsed":E=h.tail;for(var R=null;E!==null;)E.alternate!==null&&(R=E),E=E.sibling;R===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:R.sibling=null}}function To(h){var g=h.alternate!==null&&h.alternate.child===h.child,E=0,R=0;if(g)for(var Y=h.child;Y!==null;)E|=Y.lanes|Y.childLanes,R|=Y.subtreeFlags&14680064,R|=Y.flags&14680064,Y.return=h,Y=Y.sibling;else for(Y=h.child;Y!==null;)E|=Y.lanes|Y.childLanes,R|=Y.subtreeFlags,R|=Y.flags,Y.return=h,Y=Y.sibling;return h.subtreeFlags|=R,h.childLanes=E,g}function GV(h,g,E){var R=g.pendingProps;switch(Oe(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return To(g),null;case 1:return ca(g.type)&&bc(),To(g),null;case 3:return R=g.stateNode,Ls(),ls(Ba),ls(ya),Pi(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(h===null||h.child===null)&&(Sn(g)?g.flags|=4:h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,Ct!==null&&(p_(Ct),Ct=null))),a_(h,g),To(g),null;case 5:gu(g);var Y=za(fa.current);if(E=g.type,h!==null&&g.stateNode!=null)vC(h,g,E,R,Y),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!R){if(g.stateNode===null)throw Error(r(166));return To(g),null}if(h=za(vs.current),Sn(g)){R=g.stateNode,E=g.type;var le=g.memoizedProps;switch(R[So]=g,R[Kd]=le,h=(g.mode&1)!==0,E){case"dialog":rs("cancel",R),rs("close",R);break;case"iframe":case"object":case"embed":rs("load",R);break;case"video":case"audio":for(Y=0;Y<Ol.length;Y++)rs(Ol[Y],R);break;case"source":rs("error",R);break;case"img":case"image":case"link":rs("error",R),rs("load",R);break;case"details":rs("toggle",R);break;case"input":Ue(R,le),rs("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!le.multiple},rs("invalid",R);break;case"textarea":Ft(R,le),rs("invalid",R)}Er(E,le),Y=null;for(var ke in le)if(le.hasOwnProperty(ke)){var He=le[ke];ke==="children"?typeof He=="string"?R.textContent!==He&&(le.suppressHydrationWarning!==!0&&Xu(R.textContent,He,h),Y=["children",He]):typeof He=="number"&&R.textContent!==""+He&&(le.suppressHydrationWarning!==!0&&Xu(R.textContent,He,h),Y=["children",""+He]):s.hasOwnProperty(ke)&&He!=null&&ke==="onScroll"&&rs("scroll",R)}switch(E){case"input":Ie(R),Kt(R,le,!0);break;case"textarea":Ie(R),dr(R);break;case"select":case"option":break;default:typeof le.onClick=="function"&&(R.onclick=fu)}R=Y,g.updateQueue=R,R!==null&&(g.flags|=4)}else{ke=Y.nodeType===9?Y:Y.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=nr(E)),h==="http://www.w3.org/1999/xhtml"?E==="script"?(h=ke.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof R.is=="string"?h=ke.createElement(E,{is:R.is}):(h=ke.createElement(E),E==="select"&&(ke=h,R.multiple?ke.multiple=!0:R.size&&(ke.size=R.size))):h=ke.createElementNS(h,E),h[So]=g,h[Kd]=R,yC(h,g,!1,!1),g.stateNode=h;e:{switch(ke=Gr(E,R),E){case"dialog":rs("cancel",h),rs("close",h),Y=R;break;case"iframe":case"object":case"embed":rs("load",h),Y=R;break;case"video":case"audio":for(Y=0;Y<Ol.length;Y++)rs(Ol[Y],h);Y=R;break;case"source":rs("error",h),Y=R;break;case"img":case"image":case"link":rs("error",h),rs("load",h),Y=R;break;case"details":rs("toggle",h),Y=R;break;case"input":Ue(h,R),Y=We(h,R),rs("invalid",h);break;case"option":Y=R;break;case"select":h._wrapperState={wasMultiple:!!R.multiple},Y=V({},R,{value:void 0}),rs("invalid",h);break;case"textarea":Ft(h,R),Y=wt(h,R),rs("invalid",h);break;default:Y=R}Er(E,Y),He=Y;for(le in He)if(He.hasOwnProperty(le)){var et=He[le];le==="style"?sr(h,et):le==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,et!=null&&ut(h,et)):le==="children"?typeof et=="string"?(E!=="textarea"||et!=="")&&mt(h,et):typeof et=="number"&&mt(h,""+et):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(s.hasOwnProperty(le)?et!=null&&le==="onScroll"&&rs("scroll",h):et!=null&&b(h,le,et,ke))}switch(E){case"input":Ie(h),Kt(h,R,!1);break;case"textarea":Ie(h),dr(h);break;case"option":R.value!=null&&h.setAttribute("value",""+ye(R.value));break;case"select":h.multiple=!!R.multiple,le=R.value,le!=null?At(h,!!R.multiple,le,!1):R.defaultValue!=null&&At(h,!!R.multiple,R.defaultValue,!0);break;default:typeof Y.onClick=="function"&&(h.onclick=fu)}switch(E){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return To(g),null;case 6:if(h&&g.stateNode!=null)wC(h,g,h.memoizedProps,R);else{if(typeof R!="string"&&g.stateNode===null)throw Error(r(166));if(E=za(fa.current),za(vs.current),Sn(g)){if(R=g.stateNode,E=g.memoizedProps,R[So]=g,(le=R.nodeValue!==E)&&(h=Ge,h!==null))switch(h.tag){case 3:Xu(R.nodeValue,E,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Xu(R.nodeValue,E,(h.mode&1)!==0)}le&&(g.flags|=4)}else R=(E.nodeType===9?E:E.ownerDocument).createTextNode(R),R[So]=g,g.stateNode=R}return To(g),null;case 13:if(ls(Ns),R=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(at&&$e!==null&&(g.mode&1)!==0&&(g.flags&128)===0)In(),zn(),g.flags|=98560,le=!1;else if(le=Sn(g),R!==null&&R.dehydrated!==null){if(h===null){if(!le)throw Error(r(318));if(le=g.memoizedState,le=le!==null?le.dehydrated:null,!le)throw Error(r(317));le[So]=g}else zn(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;To(g),le=!1}else Ct!==null&&(p_(Ct),Ct=null),le=!0;if(!le)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=E,g):(R=R!==null,R!==(h!==null&&h.memoizedState!==null)&&R&&(g.child.flags|=8192,(g.mode&1)!==0&&(h===null||(Ns.current&1)!==0?gi===0&&(gi=3):v_())),g.updateQueue!==null&&(g.flags|=4),To(g),null);case 4:return Ls(),a_(h,g),h===null&&hc(g.stateNode.containerInfo),To(g),null;case 10:return Yd(g.type._context),To(g),null;case 17:return ca(g.type)&&bc(),To(g),null;case 19:if(ls(Ns),le=g.memoizedState,le===null)return To(g),null;if(R=(g.flags&128)!==0,ke=le.rendering,ke===null)if(R)k1(le,!1);else{if(gi!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(ke=pf(h),ke!==null){for(g.flags|=128,k1(le,!1),R=ke.updateQueue,R!==null&&(g.updateQueue=R,g.flags|=4),g.subtreeFlags=0,R=E,E=g.child;E!==null;)le=E,h=R,le.flags&=14680066,ke=le.alternate,ke===null?(le.childLanes=0,le.lanes=h,le.child=null,le.subtreeFlags=0,le.memoizedProps=null,le.memoizedState=null,le.updateQueue=null,le.dependencies=null,le.stateNode=null):(le.childLanes=ke.childLanes,le.lanes=ke.lanes,le.child=ke.child,le.subtreeFlags=0,le.deletions=null,le.memoizedProps=ke.memoizedProps,le.memoizedState=ke.memoizedState,le.updateQueue=ke.updateQueue,le.type=ke.type,h=ke.dependencies,le.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),E=E.sibling;return Jn(Ns,Ns.current&1|2),g.child}h=h.sibling}le.tail!==null&&Tt()>jg&&(g.flags|=128,R=!0,k1(le,!1),g.lanes=4194304)}else{if(!R)if(h=pf(ke),h!==null){if(g.flags|=128,R=!0,E=h.updateQueue,E!==null&&(g.updateQueue=E,g.flags|=4),k1(le,!0),le.tail===null&&le.tailMode==="hidden"&&!ke.alternate&&!at)return To(g),null}else 2*Tt()-le.renderingStartTime>jg&&E!==1073741824&&(g.flags|=128,R=!0,k1(le,!1),g.lanes=4194304);le.isBackwards?(ke.sibling=g.child,g.child=ke):(E=le.last,E!==null?E.sibling=ke:g.child=ke,le.last=ke)}return le.tail!==null?(g=le.tail,le.rendering=g,le.tail=g.sibling,le.renderingStartTime=Tt(),g.sibling=null,E=Ns.current,Jn(Ns,R?E&1|2:E&1),g):(To(g),null);case 22:case 23:return y_(),R=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==R&&(g.flags|=8192),R&&(g.mode&1)!==0?(Ll&1073741824)!==0&&(To(g),g.subtreeFlags&6&&(g.flags|=8192)):To(g),null;case 24:return null;case 25:return null}throw Error(r(156,g.tag))}function VV(h,g){switch(Oe(g),g.tag){case 1:return ca(g.type)&&bc(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return Ls(),ls(Ba),ls(ya),Pi(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 5:return gu(g),null;case 13:if(ls(Ns),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(r(340));zn()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return ls(Ns),null;case 4:return Ls(),null;case 10:return Yd(g.type._context),null;case 22:case 23:return y_(),null;case 24:return null;default:return null}}var e2=!1,Co=!1,qV=typeof WeakSet=="function"?WeakSet:Set,Br=null;function Eg(h,g){var E=h.ref;if(E!==null)if(typeof E=="function")try{E(null)}catch(R){ba(h,g,R)}else E.current=null}function i_(h,g,E){try{E()}catch(R){ba(h,g,R)}}var bC=!1;function KV(h,g){if(rf=nc,h=zs(),dc(h)){if("selectionStart"in h)var E={start:h.selectionStart,end:h.selectionEnd};else e:{E=(E=h.ownerDocument)&&E.defaultView||window;var R=E.getSelection&&E.getSelection();if(R&&R.rangeCount!==0){E=R.anchorNode;var Y=R.anchorOffset,le=R.focusNode;R=R.focusOffset;try{E.nodeType,le.nodeType}catch{E=null;break e}var ke=0,He=-1,et=-1,Dt=0,fr=0,gr=h,ur=null;t:for(;;){for(var Fr;gr!==E||Y!==0&&gr.nodeType!==3||(He=ke+Y),gr!==le||R!==0&&gr.nodeType!==3||(et=ke+R),gr.nodeType===3&&(ke+=gr.nodeValue.length),(Fr=gr.firstChild)!==null;)ur=gr,gr=Fr;for(;;){if(gr===h)break t;if(ur===E&&++Dt===Y&&(He=ke),ur===le&&++fr===R&&(et=ke),(Fr=gr.nextSibling)!==null)break;gr=ur,ur=gr.parentNode}gr=Fr}E=He===-1||et===-1?null:{start:He,end:et}}else E=null}E=E||{start:0,end:0}}else E=null;for(Gd={focusedElem:h,selectionRange:E},nc=!1,Br=g;Br!==null;)if(g=Br,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,Br=h;else for(;Br!==null;){g=Br;try{var zr=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(zr!==null){var Ur=zr.memoizedProps,Ha=zr.memoizedState,kt=g.stateNode,ct=kt.getSnapshotBeforeUpdate(g.elementType===g.type?Ur:mi(g.type,Ur),Ha);kt.__reactInternalSnapshotBeforeUpdate=ct}break;case 3:var Et=g.stateNode.containerInfo;Et.nodeType===1?Et.textContent="":Et.nodeType===9&&Et.documentElement&&Et.removeChild(Et.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(yr){ba(g,g.return,yr)}if(h=g.sibling,h!==null){h.return=g.return,Br=h;break}Br=g.return}return zr=bC,bC=!1,zr}function T1(h,g,E){var R=g.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var Y=R=R.next;do{if((Y.tag&h)===h){var le=Y.destroy;Y.destroy=void 0,le!==void 0&&i_(g,E,le)}Y=Y.next}while(Y!==R)}}function t2(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var E=g=g.next;do{if((E.tag&h)===h){var R=E.create;E.destroy=R()}E=E.next}while(E!==g)}}function o_(h){var g=h.ref;if(g!==null){var E=h.stateNode;switch(h.tag){case 5:h=E;break;default:h=E}typeof g=="function"?g(h):g.current=h}}function _C(h){var g=h.alternate;g!==null&&(h.alternate=null,_C(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&(delete g[So],delete g[Kd],delete g[sf],delete g[af],delete g[pg])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function SC(h){return h.tag===5||h.tag===3||h.tag===4}function kC(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||SC(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function l_(h,g,E){var R=h.tag;if(R===5||R===6)h=h.stateNode,g?E.nodeType===8?E.parentNode.insertBefore(h,g):E.insertBefore(h,g):(E.nodeType===8?(g=E.parentNode,g.insertBefore(h,E)):(g=E,g.appendChild(h)),E=E._reactRootContainer,E!=null||g.onclick!==null||(g.onclick=fu));else if(R!==4&&(h=h.child,h!==null))for(l_(h,g,E),h=h.sibling;h!==null;)l_(h,g,E),h=h.sibling}function c_(h,g,E){var R=h.tag;if(R===5||R===6)h=h.stateNode,g?E.insertBefore(h,g):E.appendChild(h);else if(R!==4&&(h=h.child,h!==null))for(c_(h,g,E),h=h.sibling;h!==null;)c_(h,g,E),h=h.sibling}var Zi=null,yu=!1;function Cf(h,g,E){for(E=E.child;E!==null;)TC(h,g,E),E=E.sibling}function TC(h,g,E){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Pr,E)}catch{}switch(E.tag){case 5:Co||Eg(E,g);case 6:var R=Zi,Y=yu;Zi=null,Cf(h,g,E),Zi=R,yu=Y,Zi!==null&&(yu?(h=Zi,E=E.stateNode,h.nodeType===8?h.parentNode.removeChild(E):h.removeChild(E)):Zi.removeChild(E.stateNode));break;case 18:Zi!==null&&(yu?(h=Zi,E=E.stateNode,h.nodeType===8?qd(h.parentNode,E):h.nodeType===1&&qd(h,E),Qa(h)):qd(Zi,E.stateNode));break;case 4:R=Zi,Y=yu,Zi=E.stateNode.containerInfo,yu=!0,Cf(h,g,E),Zi=R,yu=Y;break;case 0:case 11:case 14:case 15:if(!Co&&(R=E.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){Y=R=R.next;do{var le=Y,ke=le.destroy;le=le.tag,ke!==void 0&&((le&2)!==0||(le&4)!==0)&&i_(E,g,ke),Y=Y.next}while(Y!==R)}Cf(h,g,E);break;case 1:if(!Co&&(Eg(E,g),R=E.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=E.memoizedProps,R.state=E.memoizedState,R.componentWillUnmount()}catch(He){ba(E,g,He)}Cf(h,g,E);break;case 21:Cf(h,g,E);break;case 22:E.mode&1?(Co=(R=Co)||E.memoizedState!==null,Cf(h,g,E),Co=R):Cf(h,g,E);break;default:Cf(h,g,E)}}function CC(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var E=h.stateNode;E===null&&(E=h.stateNode=new qV),g.forEach(function(R){var Y=nq.bind(null,h,R);E.has(R)||(E.add(R),R.then(Y,Y))})}}function vu(h,g){var E=g.deletions;if(E!==null)for(var R=0;R<E.length;R++){var Y=E[R];try{var le=h,ke=g,He=ke;e:for(;He!==null;){switch(He.tag){case 5:Zi=He.stateNode,yu=!1;break e;case 3:Zi=He.stateNode.containerInfo,yu=!0;break e;case 4:Zi=He.stateNode.containerInfo,yu=!0;break e}He=He.return}if(Zi===null)throw Error(r(160));TC(le,ke,Y),Zi=null,yu=!1;var et=Y.alternate;et!==null&&(et.return=null),Y.return=null}catch(Dt){ba(Y,g,Dt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)NC(g,h),g=g.sibling}function NC(h,g){var E=h.alternate,R=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(vu(g,h),od(h),R&4){try{T1(3,h,h.return),t2(3,h)}catch(Ur){ba(h,h.return,Ur)}try{T1(5,h,h.return)}catch(Ur){ba(h,h.return,Ur)}}break;case 1:vu(g,h),od(h),R&512&&E!==null&&Eg(E,E.return);break;case 5:if(vu(g,h),od(h),R&512&&E!==null&&Eg(E,E.return),h.flags&32){var Y=h.stateNode;try{mt(Y,"")}catch(Ur){ba(h,h.return,Ur)}}if(R&4&&(Y=h.stateNode,Y!=null)){var le=h.memoizedProps,ke=E!==null?E.memoizedProps:le,He=h.type,et=h.updateQueue;if(h.updateQueue=null,et!==null)try{He==="input"&&le.type==="radio"&&le.name!=null&&St(Y,le),Gr(He,ke);var Dt=Gr(He,le);for(ke=0;ke<et.length;ke+=2){var fr=et[ke],gr=et[ke+1];fr==="style"?sr(Y,gr):fr==="dangerouslySetInnerHTML"?ut(Y,gr):fr==="children"?mt(Y,gr):b(Y,fr,gr,Dt)}switch(He){case"input":Ze(Y,le);break;case"textarea":or(Y,le);break;case"select":var ur=Y._wrapperState.wasMultiple;Y._wrapperState.wasMultiple=!!le.multiple;var Fr=le.value;Fr!=null?At(Y,!!le.multiple,Fr,!1):ur!==!!le.multiple&&(le.defaultValue!=null?At(Y,!!le.multiple,le.defaultValue,!0):At(Y,!!le.multiple,le.multiple?[]:"",!1))}Y[Kd]=le}catch(Ur){ba(h,h.return,Ur)}}break;case 6:if(vu(g,h),od(h),R&4){if(h.stateNode===null)throw Error(r(162));Y=h.stateNode,le=h.memoizedProps;try{Y.nodeValue=le}catch(Ur){ba(h,h.return,Ur)}}break;case 3:if(vu(g,h),od(h),R&4&&E!==null&&E.memoizedState.isDehydrated)try{Qa(g.containerInfo)}catch(Ur){ba(h,h.return,Ur)}break;case 4:vu(g,h),od(h);break;case 13:vu(g,h),od(h),Y=h.child,Y.flags&8192&&(le=Y.memoizedState!==null,Y.stateNode.isHidden=le,!le||Y.alternate!==null&&Y.alternate.memoizedState!==null||(f_=Tt())),R&4&&CC(h);break;case 22:if(fr=E!==null&&E.memoizedState!==null,h.mode&1?(Co=(Dt=Co)||fr,vu(g,h),Co=Dt):vu(g,h),od(h),R&8192){if(Dt=h.memoizedState!==null,(h.stateNode.isHidden=Dt)&&!fr&&(h.mode&1)!==0)for(Br=h,fr=h.child;fr!==null;){for(gr=Br=fr;Br!==null;){switch(ur=Br,Fr=ur.child,ur.tag){case 0:case 11:case 14:case 15:T1(4,ur,ur.return);break;case 1:Eg(ur,ur.return);var zr=ur.stateNode;if(typeof zr.componentWillUnmount=="function"){R=ur,E=ur.return;try{g=R,zr.props=g.memoizedProps,zr.state=g.memoizedState,zr.componentWillUnmount()}catch(Ur){ba(R,E,Ur)}}break;case 5:Eg(ur,ur.return);break;case 22:if(ur.memoizedState!==null){jC(gr);continue}}Fr!==null?(Fr.return=ur,Br=Fr):jC(gr)}fr=fr.sibling}e:for(fr=null,gr=h;;){if(gr.tag===5){if(fr===null){fr=gr;try{Y=gr.stateNode,Dt?(le=Y.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none"):(He=gr.stateNode,et=gr.memoizedProps.style,ke=et!=null&&et.hasOwnProperty("display")?et.display:null,He.style.display=nt("display",ke))}catch(Ur){ba(h,h.return,Ur)}}}else if(gr.tag===6){if(fr===null)try{gr.stateNode.nodeValue=Dt?"":gr.memoizedProps}catch(Ur){ba(h,h.return,Ur)}}else if((gr.tag!==22&&gr.tag!==23||gr.memoizedState===null||gr===h)&&gr.child!==null){gr.child.return=gr,gr=gr.child;continue}if(gr===h)break e;for(;gr.sibling===null;){if(gr.return===null||gr.return===h)break e;fr===gr&&(fr=null),gr=gr.return}fr===gr&&(fr=null),gr.sibling.return=gr.return,gr=gr.sibling}}break;case 19:vu(g,h),od(h),R&4&&CC(h);break;case 21:break;default:vu(g,h),od(h)}}function od(h){var g=h.flags;if(g&2){try{e:{for(var E=h.return;E!==null;){if(SC(E)){var R=E;break e}E=E.return}throw Error(r(160))}switch(R.tag){case 5:var Y=R.stateNode;R.flags&32&&(mt(Y,""),R.flags&=-33);var le=kC(h);c_(h,le,Y);break;case 3:case 4:var ke=R.stateNode.containerInfo,He=kC(h);l_(h,He,ke);break;default:throw Error(r(161))}}catch(et){ba(h,h.return,et)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function XV(h,g,E){Br=h,EC(h)}function EC(h,g,E){for(var R=(h.mode&1)!==0;Br!==null;){var Y=Br,le=Y.child;if(Y.tag===22&&R){var ke=Y.memoizedState!==null||e2;if(!ke){var He=Y.alternate,et=He!==null&&He.memoizedState!==null||Co;He=e2;var Dt=Co;if(e2=ke,(Co=et)&&!Dt)for(Br=Y;Br!==null;)ke=Br,et=ke.child,ke.tag===22&&ke.memoizedState!==null?PC(Y):et!==null?(et.return=ke,Br=et):PC(Y);for(;le!==null;)Br=le,EC(le),le=le.sibling;Br=Y,e2=He,Co=Dt}AC(h)}else(Y.subtreeFlags&8772)!==0&&le!==null?(le.return=Y,Br=le):AC(h)}}function AC(h){for(;Br!==null;){var g=Br;if((g.flags&8772)!==0){var E=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:Co||t2(5,g);break;case 1:var R=g.stateNode;if(g.flags&4&&!Co)if(E===null)R.componentDidMount();else{var Y=g.elementType===g.type?E.memoizedProps:mi(g.type,E.memoizedProps);R.componentDidUpdate(Y,E.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var le=g.updateQueue;le!==null&&ta(g,le,R);break;case 3:var ke=g.updateQueue;if(ke!==null){if(E=null,g.child!==null)switch(g.child.tag){case 5:E=g.child.stateNode;break;case 1:E=g.child.stateNode}ta(g,ke,E)}break;case 5:var He=g.stateNode;if(E===null&&g.flags&4){E=He;var et=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":et.autoFocus&&E.focus();break;case"img":et.src&&(E.src=et.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var Dt=g.alternate;if(Dt!==null){var fr=Dt.memoizedState;if(fr!==null){var gr=fr.dehydrated;gr!==null&&Qa(gr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Co||g.flags&512&&o_(g)}catch(ur){ba(g,g.return,ur)}}if(g===h){Br=null;break}if(E=g.sibling,E!==null){E.return=g.return,Br=E;break}Br=g.return}}function jC(h){for(;Br!==null;){var g=Br;if(g===h){Br=null;break}var E=g.sibling;if(E!==null){E.return=g.return,Br=E;break}Br=g.return}}function PC(h){for(;Br!==null;){var g=Br;try{switch(g.tag){case 0:case 11:case 15:var E=g.return;try{t2(4,g)}catch(et){ba(g,E,et)}break;case 1:var R=g.stateNode;if(typeof R.componentDidMount=="function"){var Y=g.return;try{R.componentDidMount()}catch(et){ba(g,Y,et)}}var le=g.return;try{o_(g)}catch(et){ba(g,le,et)}break;case 5:var ke=g.return;try{o_(g)}catch(et){ba(g,ke,et)}}}catch(et){ba(g,g.return,et)}if(g===h){Br=null;break}var He=g.sibling;if(He!==null){He.return=g.return,Br=He;break}Br=g.return}}var YV=Math.ceil,r2=j.ReactCurrentDispatcher,u_=j.ReactCurrentOwner,Ac=j.ReactCurrentBatchConfig,Qn=0,Di=null,ri=null,eo=0,Ll=0,Ag=Go(0),gi=0,C1=null,Lh=0,n2=0,d_=0,N1=null,ml=null,f_=0,jg=1/0,e0=null,s2=!1,h_=null,Nf=null,a2=!1,Ef=null,i2=0,E1=0,m_=null,o2=-1,l2=0;function Jo(){return(Qn&6)!==0?Tt():o2!==-1?o2:o2=Tt()}function Af(h){return(h.mode&1)===0?1:(Qn&2)!==0&&eo!==0?eo&-eo:Us.transition!==null?(l2===0&&(l2=xs()),l2):(h=Jt,h!==0||(h=window.event,h=h===void 0?16:Wo(h.type)),h)}function wu(h,g,E,R){if(50<E1)throw E1=0,m_=null,Error(r(185));Je(h,E,R),((Qn&2)===0||h!==Di)&&(h===Di&&((Qn&2)===0&&(n2|=E),gi===4&&jf(h,eo)),gl(h,R),E===1&&Qn===0&&(g.mode&1)===0&&(jg=Tt()+500,Zu&&mu()))}function gl(h,g){var E=h.callbackNode;Vr(h,g);var R=Pe(h,h===Di?eo:0);if(R===0)E!==null&&ge(E),h.callbackNode=null,h.callbackPriority=0;else if(g=R&-R,h.callbackPriority!==g){if(E!=null&&ge(E),g===1)h.tag===0?Ko(FC.bind(null,h)):ed(FC.bind(null,h)),gg(function(){(Qn&6)===0&&mu()}),E=null;else{switch(Bn(R)){case 1:E=Vt;break;case 4:E=$t;break;case 16:E=mr;break;case 536870912:E=jr;break;default:E=mr}E=zC(E,MC.bind(null,h))}h.callbackPriority=g,h.callbackNode=E}}function MC(h,g){if(o2=-1,l2=0,(Qn&6)!==0)throw Error(r(327));var E=h.callbackNode;if(Pg()&&h.callbackNode!==E)return null;var R=Pe(h,h===Di?eo:0);if(R===0)return null;if((R&30)!==0||(R&h.expiredLanes)!==0||g)g=c2(h,R);else{g=R;var Y=Qn;Qn|=2;var le=DC();(Di!==h||eo!==g)&&(e0=null,jg=Tt()+500,$h(h,g));do try{ZV();break}catch(He){OC(h,He)}while(!0);Xd(),r2.current=le,Qn=Y,ri!==null?g=0:(Di=null,eo=0,g=gi)}if(g!==0){if(g===2&&(Y=Xr(h),Y!==0&&(R=Y,g=g_(h,Y))),g===1)throw E=C1,$h(h,0),jf(h,R),gl(h,Tt()),E;if(g===6)jf(h,R);else{if(Y=h.current.alternate,(R&30)===0&&!JV(Y)&&(g=c2(h,R),g===2&&(le=Xr(h),le!==0&&(R=le,g=g_(h,le))),g===1))throw E=C1,$h(h,0),jf(h,R),gl(h,Tt()),E;switch(h.finishedWork=Y,h.finishedLanes=R,g){case 0:case 1:throw Error(r(345));case 2:zh(h,ml,e0);break;case 3:if(jf(h,R),(R&130023424)===R&&(g=f_+500-Tt(),10<g)){if(Pe(h,0)!==0)break;if(Y=h.suspendedLanes,(Y&R)!==R){Jo(),h.pingedLanes|=h.suspendedLanes&Y;break}h.timeoutHandle=Ei(zh.bind(null,h,ml,e0),g);break}zh(h,ml,e0);break;case 4:if(jf(h,R),(R&4194240)===R)break;for(g=h.eventTimes,Y=-1;0<R;){var ke=31-Ir(R);le=1<<ke,ke=g[ke],ke>Y&&(Y=ke),R&=~le}if(R=Y,R=Tt()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*YV(R/1960))-R,10<R){h.timeoutHandle=Ei(zh.bind(null,h,ml,e0),R);break}zh(h,ml,e0);break;case 5:zh(h,ml,e0);break;default:throw Error(r(329))}}}return gl(h,Tt()),h.callbackNode===E?MC.bind(null,h):null}function g_(h,g){var E=N1;return h.current.memoizedState.isDehydrated&&($h(h,g).flags|=256),h=c2(h,g),h!==2&&(g=ml,ml=E,g!==null&&p_(g)),h}function p_(h){ml===null?ml=h:ml.push.apply(ml,h)}function JV(h){for(var g=h;;){if(g.flags&16384){var E=g.updateQueue;if(E!==null&&(E=E.stores,E!==null))for(var R=0;R<E.length;R++){var Y=E[R],le=Y.getSnapshot;Y=Y.value;try{if(!Is(le(),Y))return!1}catch{return!1}}}if(E=g.child,g.subtreeFlags&16384&&E!==null)E.return=g,g=E;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function jf(h,g){for(g&=~d_,g&=~n2,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var E=31-Ir(g),R=1<<E;h[E]=-1,g&=~R}}function FC(h){if((Qn&6)!==0)throw Error(r(327));Pg();var g=Pe(h,0);if((g&1)===0)return gl(h,Tt()),null;var E=c2(h,g);if(h.tag!==0&&E===2){var R=Xr(h);R!==0&&(g=R,E=g_(h,R))}if(E===1)throw E=C1,$h(h,0),jf(h,g),gl(h,Tt()),E;if(E===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,zh(h,ml,e0),gl(h,Tt()),null}function x_(h,g){var E=Qn;Qn|=1;try{return h(g)}finally{Qn=E,Qn===0&&(jg=Tt()+500,Zu&&mu())}}function Bh(h){Ef!==null&&Ef.tag===0&&(Qn&6)===0&&Pg();var g=Qn;Qn|=1;var E=Ac.transition,R=Jt;try{if(Ac.transition=null,Jt=1,h)return h()}finally{Jt=R,Ac.transition=E,Qn=g,(Qn&6)===0&&mu()}}function y_(){Ll=Ag.current,ls(Ag)}function $h(h,g){h.finishedWork=null,h.finishedLanes=0;var E=h.timeoutHandle;if(E!==-1&&(h.timeoutHandle=-1,nf(E)),ri!==null)for(E=ri.return;E!==null;){var R=E;switch(Oe(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&bc();break;case 3:Ls(),ls(Ba),ls(ya),Pi();break;case 5:gu(R);break;case 4:Ls();break;case 13:ls(Ns);break;case 19:ls(Ns);break;case 10:Yd(R.type._context);break;case 22:case 23:y_()}E=E.return}if(Di=h,ri=h=Pf(h.current,null),eo=Ll=g,gi=0,C1=null,d_=n2=Lh=0,ml=N1=null,kc!==null){for(g=0;g<kc.length;g++)if(E=kc[g],R=E.interleaved,R!==null){E.interleaved=null;var Y=R.next,le=E.pending;if(le!==null){var ke=le.next;le.next=Y,R.next=ke}E.pending=R}kc=null}return h}function OC(h,g){do{var E=ri;try{if(Xd(),xf.current=_f,Rl){for(var R=gs.memoizedState;R!==null;){var Y=R.queue;Y!==null&&(Y.pending=null),R=R.next}Rl=!1}if(Ji=0,va=ra=gs=null,nd=!1,hl=0,u_.current=null,E===null||E.return===null){gi=1,C1=g,ri=null;break}e:{var le=h,ke=E.return,He=E,et=g;if(g=eo,He.flags|=32768,et!==null&&typeof et=="object"&&typeof et.then=="function"){var Dt=et,fr=He,gr=fr.tag;if((fr.mode&1)===0&&(gr===0||gr===11||gr===15)){var ur=fr.alternate;ur?(fr.updateQueue=ur.updateQueue,fr.memoizedState=ur.memoizedState,fr.lanes=ur.lanes):(fr.updateQueue=null,fr.memoizedState=null)}var Fr=I(ke);if(Fr!==null){Fr.flags&=-257,q(Fr,ke,He,le,g),Fr.mode&1&&_(le,Dt,g),g=Fr,et=Dt;var zr=g.updateQueue;if(zr===null){var Ur=new Set;Ur.add(et),g.updateQueue=Ur}else zr.add(et);break e}else{if((g&1)===0){_(le,Dt,g),v_();break e}et=Error(r(426))}}else if(at&&He.mode&1){var Ha=I(ke);if(Ha!==null){(Ha.flags&65536)===0&&(Ha.flags|=256),q(Ha,ke,He,le,g),ua(Zd(et,He));break e}}le=et=Zd(et,He),gi!==4&&(gi=2),N1===null?N1=[le]:N1.push(le),le=ke;do{switch(le.tag){case 3:le.flags|=65536,g&=-g,le.lanes|=g;var kt=Zv(le,et,g);Dh(le,kt);break e;case 1:He=et;var ct=le.type,Et=le.stateNode;if((le.flags&128)===0&&(typeof ct.getDerivedStateFromError=="function"||Et!==null&&typeof Et.componentDidCatch=="function"&&(Nf===null||!Nf.has(Et)))){le.flags|=65536,g&=-g,le.lanes|=g;var yr=y(le,He,g);Dh(le,yr);break e}}le=le.return}while(le!==null)}RC(E)}catch(Wr){g=Wr,ri===E&&E!==null&&(ri=E=E.return);continue}break}while(!0)}function DC(){var h=r2.current;return r2.current=_f,h===null?_f:h}function v_(){(gi===0||gi===3||gi===2)&&(gi=4),Di===null||(Lh&268435455)===0&&(n2&268435455)===0||jf(Di,eo)}function c2(h,g){var E=Qn;Qn|=2;var R=DC();(Di!==h||eo!==g)&&(e0=null,$h(h,g));do try{QV();break}catch(Y){OC(h,Y)}while(!0);if(Xd(),Qn=E,r2.current=R,ri!==null)throw Error(r(261));return Di=null,eo=0,gi}function QV(){for(;ri!==null;)IC(ri)}function ZV(){for(;ri!==null&&!Ke();)IC(ri)}function IC(h){var g=$C(h.alternate,h,Ll);h.memoizedProps=h.pendingProps,g===null?RC(h):ri=g,u_.current=null}function RC(h){var g=h;do{var E=g.alternate;if(h=g.return,(g.flags&32768)===0){if(E=GV(E,g,Ll),E!==null){ri=E;return}}else{if(E=VV(E,g),E!==null){E.flags&=32767,ri=E;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{gi=6,ri=null;return}}if(g=g.sibling,g!==null){ri=g;return}ri=g=h}while(g!==null);gi===0&&(gi=5)}function zh(h,g,E){var R=Jt,Y=Ac.transition;try{Ac.transition=null,Jt=1,eq(h,g,E,R)}finally{Ac.transition=Y,Jt=R}return null}function eq(h,g,E,R){do Pg();while(Ef!==null);if((Qn&6)!==0)throw Error(r(327));E=h.finishedWork;var Y=h.finishedLanes;if(E===null)return null;if(h.finishedWork=null,h.finishedLanes=0,E===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var le=E.lanes|E.childLanes;if(Pt(h,le),h===Di&&(ri=Di=null,eo=0),(E.subtreeFlags&2064)===0&&(E.flags&2064)===0||a2||(a2=!0,zC(mr,function(){return Pg(),null})),le=(E.flags&15990)!==0,(E.subtreeFlags&15990)!==0||le){le=Ac.transition,Ac.transition=null;var ke=Jt;Jt=1;var He=Qn;Qn|=4,u_.current=null,KV(h,E),NC(E,h),Hu(Gd),nc=!!rf,Gd=rf=null,h.current=E,XV(E),tt(),Qn=He,Jt=ke,Ac.transition=le}else h.current=E;if(a2&&(a2=!1,Ef=h,i2=Y),le=h.pendingLanes,le===0&&(Nf=null),Kr(E.stateNode),gl(h,Tt()),g!==null)for(R=h.onRecoverableError,E=0;E<g.length;E++)Y=g[E],R(Y.value,{componentStack:Y.stack,digest:Y.digest});if(s2)throw s2=!1,h=h_,h_=null,h;return(i2&1)!==0&&h.tag!==0&&Pg(),le=h.pendingLanes,(le&1)!==0?h===m_?E1++:(E1=0,m_=h):E1=0,mu(),null}function Pg(){if(Ef!==null){var h=Bn(i2),g=Ac.transition,E=Jt;try{if(Ac.transition=null,Jt=16>h?16:h,Ef===null)var R=!1;else{if(h=Ef,Ef=null,i2=0,(Qn&6)!==0)throw Error(r(331));var Y=Qn;for(Qn|=4,Br=h.current;Br!==null;){var le=Br,ke=le.child;if((Br.flags&16)!==0){var He=le.deletions;if(He!==null){for(var et=0;et<He.length;et++){var Dt=He[et];for(Br=Dt;Br!==null;){var fr=Br;switch(fr.tag){case 0:case 11:case 15:T1(8,fr,le)}var gr=fr.child;if(gr!==null)gr.return=fr,Br=gr;else for(;Br!==null;){fr=Br;var ur=fr.sibling,Fr=fr.return;if(_C(fr),fr===Dt){Br=null;break}if(ur!==null){ur.return=Fr,Br=ur;break}Br=Fr}}}var zr=le.alternate;if(zr!==null){var Ur=zr.child;if(Ur!==null){zr.child=null;do{var Ha=Ur.sibling;Ur.sibling=null,Ur=Ha}while(Ur!==null)}}Br=le}}if((le.subtreeFlags&2064)!==0&&ke!==null)ke.return=le,Br=ke;else e:for(;Br!==null;){if(le=Br,(le.flags&2048)!==0)switch(le.tag){case 0:case 11:case 15:T1(9,le,le.return)}var kt=le.sibling;if(kt!==null){kt.return=le.return,Br=kt;break e}Br=le.return}}var ct=h.current;for(Br=ct;Br!==null;){ke=Br;var Et=ke.child;if((ke.subtreeFlags&2064)!==0&&Et!==null)Et.return=ke,Br=Et;else e:for(ke=ct;Br!==null;){if(He=Br,(He.flags&2048)!==0)try{switch(He.tag){case 0:case 11:case 15:t2(9,He)}}catch(Wr){ba(He,He.return,Wr)}if(He===ke){Br=null;break e}var yr=He.sibling;if(yr!==null){yr.return=He.return,Br=yr;break e}Br=He.return}}if(Qn=Y,mu(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Pr,h)}catch{}R=!0}return R}finally{Jt=E,Ac.transition=g}}return!1}function LC(h,g,E){g=Zd(E,g),g=Zv(h,g,1),h=Nc(h,g,1),g=Jo(),h!==null&&(Je(h,1,g),gl(h,g))}function ba(h,g,E){if(h.tag===3)LC(h,h,E);else for(;g!==null;){if(g.tag===3){LC(g,h,E);break}else if(g.tag===1){var R=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Nf===null||!Nf.has(R))){h=Zd(E,h),h=y(g,h,1),g=Nc(g,h,1),h=Jo(),g!==null&&(Je(g,1,h),gl(g,h));break}}g=g.return}}function tq(h,g,E){var R=h.pingCache;R!==null&&R.delete(g),g=Jo(),h.pingedLanes|=h.suspendedLanes&E,Di===h&&(eo&E)===E&&(gi===4||gi===3&&(eo&130023424)===eo&&500>Tt()-f_?$h(h,0):d_|=E),gl(h,g)}function BC(h,g){g===0&&((h.mode&1)===0?g=1:(g=Bs,Bs<<=1,(Bs&130023424)===0&&(Bs=4194304)));var E=Jo();h=Xo(h,g),h!==null&&(Je(h,g,E),gl(h,E))}function rq(h){var g=h.memoizedState,E=0;g!==null&&(E=g.retryLane),BC(h,E)}function nq(h,g){var E=0;switch(h.tag){case 13:var R=h.stateNode,Y=h.memoizedState;Y!==null&&(E=Y.retryLane);break;case 19:R=h.stateNode;break;default:throw Error(r(314))}R!==null&&R.delete(g),BC(h,E)}var $C;$C=function(h,g,E){if(h!==null)if(h.memoizedProps!==g.pendingProps||Ba.current)he=!0;else{if((h.lanes&E)===0&&(g.flags&128)===0)return he=!1,s_(h,g,E);he=(h.flags&131072)!==0}else he=!1,at&&(g.flags&1048576)!==0&&ve(g,Sc,g.index);switch(g.lanes=0,g.tag){case 2:var R=g.type;Rn(h,g),h=g.pendingProps;var Y=wc(g,ya.current);ko(g,E),Y=yf(null,g,R,h,Y,E);var le=vf();return g.flags|=1,typeof Y=="object"&&Y!==null&&typeof Y.render=="function"&&Y.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,ca(R)?(le=!0,Qu(g)):le=!1,g.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Oh(g),Y.updater=kf,g.stateNode=Y,Y._reactInternals=g,Cg(g,R,h,E),g=cs(null,g,R,!0,le,E)):(g.tag=0,at&&le&&Te(g),Fe(null,g,Y,E),g=g.child),g;case 16:R=g.elementType;e:{switch(Rn(h,g),h=g.pendingProps,Y=R._init,R=Y(R._payload),g.type=R,Y=g.tag=aq(R),h=mi(R,h),Y){case 0:g=Tr(null,g,R,h,E);break e;case 1:g=Es(null,g,R,h,E);break e;case 11:g=ft(null,g,R,h,E);break e;case 14:g=It(null,g,R,mi(R.type,h),E);break e}throw Error(r(306,R,""))}return g;case 0:return R=g.type,Y=g.pendingProps,Y=g.elementType===R?Y:mi(R,Y),Tr(h,g,R,Y,E);case 1:return R=g.type,Y=g.pendingProps,Y=g.elementType===R?Y:mi(R,Y),Es(h,g,R,Y,E);case 3:e:{if(Qi(g),h===null)throw Error(r(387));R=g.pendingProps,le=g.memoizedState,Y=le.element,xg(h,g),mf(g,R,null,E);var ke=g.memoizedState;if(R=ke.element,le.isDehydrated)if(le={element:R,isDehydrated:!1,cache:ke.cache,pendingSuspenseBoundaries:ke.pendingSuspenseBoundaries,transitions:ke.transitions},g.updateQueue.baseState=le,g.memoizedState=le,g.flags&256){Y=Zd(Error(r(423)),g),g=Ec(h,g,R,E,Y);break e}else if(R!==Y){Y=Zd(Error(r(424)),g),g=Ec(h,g,R,E,Y);break e}else for($e=Dl(g.stateNode.containerInfo.firstChild),Ge=g,at=!0,Ct=null,E=An(g,null,R,E),g.child=E;E;)E.flags=E.flags&-3|4096,E=E.sibling;else{if(zn(),R===Y){g=Oi(h,g,E);break e}Fe(h,g,R,E)}g=g.child}return g;case 5:return gf(g),h===null&&wn(g),R=g.type,Y=g.pendingProps,le=h!==null?h.memoizedProps:null,ke=Y.children,Vd(R,Y)?ke=null:le!==null&&Vd(R,le)&&(g.flags|=32),mn(h,g),Fe(h,g,ke,E),g.child;case 6:return h===null&&wn(g),null;case 13:return zt(h,g,E);case 4:return rd(g,g.stateNode.containerInfo),R=g.pendingProps,h===null?g.child=qn(g,null,R,E):Fe(h,g,R,E),g.child;case 11:return R=g.type,Y=g.pendingProps,Y=g.elementType===R?Y:mi(R,Y),ft(h,g,R,Y,E);case 7:return Fe(h,g,g.pendingProps,E),g.child;case 8:return Fe(h,g,g.pendingProps.children,E),g.child;case 12:return Fe(h,g,g.pendingProps.children,E),g.child;case 10:e:{if(R=g.type._context,Y=g.pendingProps,le=g.memoizedProps,ke=Y.value,Jn(ms,R._currentValue),R._currentValue=ke,le!==null)if(Is(le.value,ke)){if(le.children===Y.children&&!Ba.current){g=Oi(h,g,E);break e}}else for(le=g.child,le!==null&&(le.return=g);le!==null;){var He=le.dependencies;if(He!==null){ke=le.child;for(var et=He.firstContext;et!==null;){if(et.context===R){if(le.tag===1){et=Cc(-1,E&-E),et.tag=2;var Dt=le.updateQueue;if(Dt!==null){Dt=Dt.shared;var fr=Dt.pending;fr===null?et.next=et:(et.next=fr.next,fr.next=et),Dt.pending=et}}le.lanes|=E,et=le.alternate,et!==null&&(et.lanes|=E),ff(le.return,E,g),He.lanes|=E;break}et=et.next}}else if(le.tag===10)ke=le.type===g.type?null:le.child;else if(le.tag===18){if(ke=le.return,ke===null)throw Error(r(341));ke.lanes|=E,He=ke.alternate,He!==null&&(He.lanes|=E),ff(ke,E,g),ke=le.sibling}else ke=le.child;if(ke!==null)ke.return=le;else for(ke=le;ke!==null;){if(ke===g){ke=null;break}if(le=ke.sibling,le!==null){le.return=ke.return,ke=le;break}ke=ke.return}le=ke}Fe(h,g,Y.children,E),g=g.child}return g;case 9:return Y=g.type,R=g.pendingProps.children,ko(g,E),Y=Yi(Y),R=R(Y),g.flags|=1,Fe(h,g,R,E),g.child;case 14:return R=g.type,Y=mi(R,g.pendingProps),Y=mi(R.type,Y),It(h,g,R,Y,E);case 15:return xr(h,g,g.type,g.pendingProps,E);case 17:return R=g.type,Y=g.pendingProps,Y=g.elementType===R?Y:mi(R,Y),Rn(h,g),g.tag=1,ca(R)?(h=!0,Qu(g)):h=!1,ko(g,E),Qv(g,R,Y),Cg(g,R,Y,E),cs(null,g,R,!0,h,E);case 19:return Wa(h,g,E);case 22:return Rr(h,g,E)}throw Error(r(156,g.tag))};function zC(h,g){return je(h,g)}function sq(h,g,E,R){this.tag=h,this.key=E,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(h,g,E,R){return new sq(h,g,E,R)}function w_(h){return h=h.prototype,!(!h||!h.isReactComponent)}function aq(h){if(typeof h=="function")return w_(h)?1:0;if(h!=null){if(h=h.$$typeof,h===re)return 11;if(h===de)return 14}return 2}function Pf(h,g){var E=h.alternate;return E===null?(E=jc(h.tag,g,h.key,h.mode),E.elementType=h.elementType,E.type=h.type,E.stateNode=h.stateNode,E.alternate=h,h.alternate=E):(E.pendingProps=g,E.type=h.type,E.flags=0,E.subtreeFlags=0,E.deletions=null),E.flags=h.flags&14680064,E.childLanes=h.childLanes,E.lanes=h.lanes,E.child=h.child,E.memoizedProps=h.memoizedProps,E.memoizedState=h.memoizedState,E.updateQueue=h.updateQueue,g=h.dependencies,E.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},E.sibling=h.sibling,E.index=h.index,E.ref=h.ref,E}function u2(h,g,E,R,Y,le){var ke=2;if(R=h,typeof h=="function")w_(h)&&(ke=1);else if(typeof h=="string")ke=5;else e:switch(h){case D:return Uh(E.children,Y,le,g);case M:ke=8,Y|=8;break;case O:return h=jc(12,E,g,Y|2),h.elementType=O,h.lanes=le,h;case ie:return h=jc(13,E,g,Y),h.elementType=ie,h.lanes=le,h;case xe:return h=jc(19,E,g,Y),h.elementType=xe,h.lanes=le,h;case H:return d2(E,Y,le,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case L:ke=10;break e;case W:ke=9;break e;case re:ke=11;break e;case de:ke=14;break e;case fe:ke=16,R=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return g=jc(ke,E,g,Y),g.elementType=h,g.type=R,g.lanes=le,g}function Uh(h,g,E,R){return h=jc(7,h,R,g),h.lanes=E,h}function d2(h,g,E,R){return h=jc(22,h,R,g),h.elementType=H,h.lanes=E,h.stateNode={isHidden:!1},h}function b_(h,g,E){return h=jc(6,h,null,g),h.lanes=E,h}function __(h,g,E){return g=jc(4,h.children!==null?h.children:[],h.key,g),g.lanes=E,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function iq(h,g,E,R,Y){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dn(0),this.expirationTimes=Dn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dn(0),this.identifierPrefix=R,this.onRecoverableError=Y,this.mutableSourceEagerHydrationData=null}function S_(h,g,E,R,Y,le,ke,He,et){return h=new iq(h,g,E,He,et),g===1?(g=1,le===!0&&(g|=8)):g=0,le=jc(3,null,null,g),h.current=le,le.stateNode=h,le.memoizedState={element:R,isDehydrated:E,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oh(le),h}function oq(h,g,E){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:R==null?null:""+R,children:h,containerInfo:g,implementation:E}}function UC(h){if(!h)return Vo;h=h._reactInternals;e:{if(De(h)!==h||h.tag!==1)throw Error(r(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(ca(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(r(171))}if(h.tag===1){var E=h.type;if(ca(E))return hu(h,E,g)}return g}function WC(h,g,E,R,Y,le,ke,He,et){return h=S_(E,R,!0,h,Y,le,ke,He,et),h.context=UC(null),E=h.current,R=Jo(),Y=Af(E),le=Cc(R,Y),le.callback=g??null,Nc(E,le,Y),h.current.lanes=Y,Je(h,Y,R),gl(h,R),h}function f2(h,g,E,R){var Y=g.current,le=Jo(),ke=Af(Y);return E=UC(E),g.context===null?g.context=E:g.pendingContext=E,g=Cc(le,ke),g.payload={element:h},R=R===void 0?null:R,R!==null&&(g.callback=R),h=Nc(Y,g,ke),h!==null&&(wu(h,Y,ke,le),yg(h,Y,ke)),ke}function h2(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function HC(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var E=h.retryLane;h.retryLane=E!==0&&E<g?E:g}}function k_(h,g){HC(h,g),(h=h.alternate)&&HC(h,g)}function lq(){return null}var GC=typeof reportError=="function"?reportError:function(h){console.error(h)};function T_(h){this._internalRoot=h}m2.prototype.render=T_.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(r(409));f2(h,g,null,null)},m2.prototype.unmount=T_.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;Bh(function(){f2(null,h,null,null)}),g[fl]=null}};function m2(h){this._internalRoot=h}m2.prototype.unstable_scheduleHydration=function(h){if(h){var g=Bt();h={blockedOn:null,target:h,priority:g};for(var E=0;E<rn.length&&g!==0&&g<rn[E].priority;E++);rn.splice(E,0,h),E===0&&xo(h)}};function C_(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function g2(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function VC(){}function cq(h,g,E,R,Y){if(Y){if(typeof R=="function"){var le=R;R=function(){var Dt=h2(ke);le.call(Dt)}}var ke=WC(g,R,h,0,null,!1,!1,"",VC);return h._reactRootContainer=ke,h[fl]=ke.current,hc(h.nodeType===8?h.parentNode:h),Bh(),ke}for(;Y=h.lastChild;)h.removeChild(Y);if(typeof R=="function"){var He=R;R=function(){var Dt=h2(et);He.call(Dt)}}var et=S_(h,0,!1,null,null,!1,!1,"",VC);return h._reactRootContainer=et,h[fl]=et.current,hc(h.nodeType===8?h.parentNode:h),Bh(function(){f2(g,et,E,R)}),et}function p2(h,g,E,R,Y){var le=E._reactRootContainer;if(le){var ke=le;if(typeof Y=="function"){var He=Y;Y=function(){var et=h2(ke);He.call(et)}}f2(g,ke,h,Y)}else ke=cq(E,g,h,Y,R);return h2(ke)}vt=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var E=hn(g.pendingLanes);E!==0&&(tr(g,E|1),gl(g,Tt()),(Qn&6)===0&&(jg=Tt()+500,mu()))}break;case 13:Bh(function(){var R=Xo(h,1);if(R!==null){var Y=Jo();wu(R,h,1,Y)}}),k_(h,1)}},Re=function(h){if(h.tag===13){var g=Xo(h,134217728);if(g!==null){var E=Jo();wu(g,h,134217728,E)}k_(h,134217728)}},Qt=function(h){if(h.tag===13){var g=Af(h),E=Xo(h,g);if(E!==null){var R=Jo();wu(E,h,g,R)}k_(h,g)}},Bt=function(){return Jt},Or=function(h,g){var E=Jt;try{return Jt=h,g()}finally{Jt=E}},Ee=function(h,g,E){switch(g){case"input":if(Ze(h,E),g=E.name,E.type==="radio"&&g!=null){for(E=h;E.parentNode;)E=E.parentNode;for(E=E.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<E.length;g++){var R=E[g];if(R!==h&&R.form===h.form){var Y=La(R);if(!Y)throw Error(r(90));me(R),Ze(R,Y)}}}break;case"textarea":or(h,E);break;case"select":g=E.value,g!=null&&At(h,!!E.multiple,g,!1)}},it=x_,Le=Bh;var uq={usingClientEntryPoint:!1,Events:[Ju,la,La,Lt,ze,x_]},A1={findFiberByHostInstance:xc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dq={bundleType:A1.bundleType,version:A1.version,rendererPackageName:A1.rendererPackageName,rendererConfig:A1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=dt(h),h===null?null:h.stateNode},findFiberByHostInstance:A1.findFiberByHostInstance||lq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var x2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!x2.isDisabled&&x2.supportsFiber)try{Pr=x2.inject(dq),xn=x2}catch{}}return pl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uq,pl.createPortal=function(h,g){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C_(g))throw Error(r(200));return oq(h,g,null,E)},pl.createRoot=function(h,g){if(!C_(h))throw Error(r(299));var E=!1,R="",Y=GC;return g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&(R=g.identifierPrefix),g.onRecoverableError!==void 0&&(Y=g.onRecoverableError)),g=S_(h,1,!1,null,null,E,!1,R,Y),h[fl]=g.current,hc(h.nodeType===8?h.parentNode:h),new T_(g)},pl.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=dt(g),h=h===null?null:h.stateNode,h},pl.flushSync=function(h){return Bh(h)},pl.hydrate=function(h,g,E){if(!g2(g))throw Error(r(200));return p2(null,h,g,!0,E)},pl.hydrateRoot=function(h,g,E){if(!C_(h))throw Error(r(405));var R=E!=null&&E.hydratedSources||null,Y=!1,le="",ke=GC;if(E!=null&&(E.unstable_strictMode===!0&&(Y=!0),E.identifierPrefix!==void 0&&(le=E.identifierPrefix),E.onRecoverableError!==void 0&&(ke=E.onRecoverableError)),g=WC(g,null,h,1,E??null,Y,!1,le,ke),h[fl]=g.current,hc(h),R)for(h=0;h<R.length;h++)E=R[h],Y=E._getVersion,Y=Y(E._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[E,Y]:g.mutableSourceEagerHydrationData.push(E,Y);return new m2(g)},pl.render=function(h,g,E){if(!g2(g))throw Error(r(200));return p2(null,h,g,!1,E)},pl.unmountComponentAtNode=function(h){if(!g2(h))throw Error(r(40));return h._reactRootContainer?(Bh(function(){p2(null,null,h,!1,function(){h._reactRootContainer=null,h[fl]=null})}),!0):!1},pl.unstable_batchedUpdates=x_,pl.unstable_renderSubtreeIntoContainer=function(h,g,E,R){if(!g2(E))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return p2(h,g,E,!1,R)},pl.version="18.3.1-next-f1338f8080-20240426",pl}var eN;function ID(){if(eN)return A_.exports;eN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),A_.exports=yq(),A_.exports}var tN;function vq(){if(tN)return y2;tN=1;var e=ID();return y2.createRoot=e.createRoot,y2.hydrateRoot=e.hydrateRoot,y2}var wq=vq();const bq=eu(wq);var yS=ID();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fy.apply(this,arguments)}var zf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zf||(zf={}));const rN="popstate";function _q(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:o}=n.location;return vS("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:LD(s)}return kq(t,r,null,e)}function li(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function RD(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Sq(){return Math.random().toString(36).substr(2,8)}function nN(e,t){return{usr:e.state,key:e.key,idx:t}}function vS(e,t,r,n){return r===void 0&&(r=null),fy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Dp(t):t,{state:r,key:t&&t.key||n||Sq()})}function LD(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Dp(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function kq(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=zf.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(fy({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){o=zf.Pop;let v=d(),C=v==null?null:v-u;u=v,c&&c({action:o,location:w.location,delta:C})}function m(v,C){o=zf.Push;let k=vS(w.location,v,C);u=d()+1;let b=nN(k,u),j=w.createHref(k);try{i.pushState(b,"",j)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(j)}a&&c&&c({action:o,location:w.location,delta:1})}function p(v,C){o=zf.Replace;let k=vS(w.location,v,C);u=d();let b=nN(k,u),j=w.createHref(k);i.replaceState(b,"",j),a&&c&&c({action:o,location:w.location,delta:0})}function x(v){let C=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof v=="string"?v:LD(v);return k=k.replace(/ $/,"%20"),li(C,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,C)}let w={get action(){return o},get location(){return e(s,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(rN,f),c=v,()=>{s.removeEventListener(rN,f),c=null}},createHref(v){return t(s,v)},createURL:x,encodeLocation(v){let C=x(v);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:m,replace:p,go(v){return i.go(v)}};return w}var sN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(sN||(sN={}));function Tq(e,t,r){return r===void 0&&(r="/"),Cq(e,t,r)}function Cq(e,t,r,n){let s=typeof t=="string"?Dp(t):t,a=zD(s.pathname||"/",r);if(a==null)return null;let i=BD(e);Nq(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let u=Bq(a);o=Iq(i[c],u)}return o}function BD(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(li(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=lm([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(li(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),BD(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:Oq(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let c of $D(a.path))s(a,i,c)}),t}function $D(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=$D(n.join("/")),o=[];return o.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Nq(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Dq(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Eq=/^:[\w-]+$/,Aq=3,jq=2,Pq=1,Mq=10,Fq=-2,aN=e=>e==="*";function Oq(e,t){let r=e.split("/"),n=r.length;return r.some(aN)&&(n+=Fq),t&&(n+=jq),r.filter(s=>!aN(s)).reduce((s,a)=>s+(Eq.test(a)?Aq:a===""?Pq:Mq),n)}function Dq(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Iq(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=Rq({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:lm([a,f.pathname]),pathnameBase:Wq(lm([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=lm([a,f.pathnameBase]))}return i}function Rq(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Lq(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:m,isOptional:p}=d;if(m==="*"){let w=o[f]||"";i=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const x=o[f];return p&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function Lq(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),RD(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Bq(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return RD(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function zD(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function $q(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Dp(e):e;return{pathname:r?r.startsWith("/")?r:zq(r,t):t,search:Hq(n),hash:Gq(s)}}function zq(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function M_(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Uq(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function UD(e,t){let r=Uq(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function WD(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Dp(e):(s=fy({},e),li(!s.pathname||!s.pathname.includes("?"),M_("?","pathname","search",s)),li(!s.pathname||!s.pathname.includes("#"),M_("#","pathname","hash",s)),li(!s.search||!s.search.includes("#"),M_("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}o=f>=0?t[f]:"/"}let c=$q(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const lm=e=>e.join("/").replace(/\/\/+/g,"/"),Wq=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Hq=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gq=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Vq(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const HD=["post","put","patch","delete"];new Set(HD);const qq=["get",...HD];new Set(qq);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hy.apply(this,arguments)}const kk=S.createContext(null),Kq=S.createContext(null),rv=S.createContext(null),Wb=S.createContext(null),ch=S.createContext({outlet:null,matches:[],isDataRoute:!1}),GD=S.createContext(null);function nv(){return S.useContext(Wb)!=null}function Hb(){return nv()||li(!1),S.useContext(Wb).location}function VD(e){S.useContext(rv).static||S.useLayoutEffect(e)}function Nl(){let{isDataRoute:e}=S.useContext(ch);return e?oK():Xq()}function Xq(){nv()||li(!1);let e=S.useContext(kk),{basename:t,future:r,navigator:n}=S.useContext(rv),{matches:s}=S.useContext(ch),{pathname:a}=Hb(),i=JSON.stringify(UD(s,r.v7_relativeSplatPath)),o=S.useRef(!1);return VD(()=>{o.current=!0}),S.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=WD(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:lm([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,a,e])}function Gb(){let{matches:e}=S.useContext(ch),t=e[e.length-1];return t?t.params:{}}function Yq(e,t){return Jq(e,t)}function Jq(e,t,r,n){nv()||li(!1);let{navigator:s}=S.useContext(rv),{matches:a}=S.useContext(ch),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=Hb(),d;if(t){var f;let v=typeof t=="string"?Dp(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||li(!1),d=v}else d=u;let m=d.pathname||"/",p=m;if(c!=="/"){let v=c.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=Tq(e,{pathname:p}),w=rK(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:lm([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:lm([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&w?S.createElement(Wb.Provider,{value:{location:hy({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:zf.Pop}},w):w}function Qq(){let e=iK(),t=Vq(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),r?S.createElement("pre",{style:s},r):null,null)}const Zq=S.createElement(Qq,null);class eK extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?S.createElement(ch.Provider,{value:this.props.routeContext},S.createElement(GD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tK(e){let{routeContext:t,match:r,children:n}=e,s=S.useContext(kk);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(ch.Provider,{value:t},n)}function rK(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);d>=0||li(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:p}=r,x=f.route.loader&&m[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||x){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,m)=>{let p,x=!1,w=null,v=null;r&&(p=o&&f.route.id?o[f.route.id]:void 0,w=f.route.errorElement||Zq,c&&(u<0&&m===0?(lK("route-fallback"),x=!0,v=null):u===m&&(x=!0,v=f.route.hydrateFallbackElement||null)));let C=t.concat(i.slice(0,m+1)),k=()=>{let b;return p?b=w:x?b=v:f.route.Component?b=S.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,S.createElement(tK,{match:f,routeContext:{outlet:d,matches:C,isDataRoute:r!=null},children:b})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?S.createElement(eK,{location:r.location,revalidation:r.revalidation,component:w,error:p,children:k(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):k()},null)}var qD=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(qD||{}),KD=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(KD||{});function nK(e){let t=S.useContext(kk);return t||li(!1),t}function sK(e){let t=S.useContext(Kq);return t||li(!1),t}function aK(e){let t=S.useContext(ch);return t||li(!1),t}function XD(e){let t=aK(),r=t.matches[t.matches.length-1];return r.route.id||li(!1),r.route.id}function iK(){var e;let t=S.useContext(GD),r=sK(),n=XD();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function oK(){let{router:e}=nK(qD.UseNavigateStable),t=XD(KD.UseNavigateStable),r=S.useRef(!1);return VD(()=>{r.current=!0}),S.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,hy({fromRouteId:t},a)))},[e,t])}const iN={};function lK(e,t,r){iN[e]||(iN[e]=!0)}function cK(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function pp(e){let{to:t,replace:r,state:n,relative:s}=e;nv()||li(!1);let{future:a,static:i}=S.useContext(rv),{matches:o}=S.useContext(ch),{pathname:c}=Hb(),u=Nl(),d=WD(t,UD(o,a.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return S.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function Na(e){li(!1)}function uK(e){let{basename:t="/",children:r=null,location:n,navigationType:s=zf.Pop,navigator:a,static:i=!1,future:o}=e;nv()&&li(!1);let c=t.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:c,navigator:a,static:i,future:hy({v7_relativeSplatPath:!1},o)}),[c,o,a,i]);typeof n=="string"&&(n=Dp(n));let{pathname:d="/",search:f="",hash:m="",state:p=null,key:x="default"}=n,w=S.useMemo(()=>{let v=zD(d,c);return v==null?null:{location:{pathname:v,search:f,hash:m,state:p,key:x},navigationType:s}},[c,d,f,m,p,x,s]);return w==null?null:S.createElement(rv.Provider,{value:u},S.createElement(Wb.Provider,{children:r,value:w}))}function Tk(e){let{children:t,location:r}=e;return Yq(wS(t),r)}new Promise(()=>{});function wS(e,t){t===void 0&&(t=[]);let r=[];return S.Children.forEach(e,(n,s)=>{if(!S.isValidElement(n))return;let a=[...t,s];if(n.type===S.Fragment){r.push.apply(r,wS(n.props.children,a));return}n.type!==Na&&li(!1),!n.props.index||!n.props.children||li(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=wS(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const dK="6";try{window.__reactRouterVersion=dK}catch{}const fK="startTransition",oN=DD[fK];function hK(e){let{basename:t,children:r,future:n,window:s}=e,a=S.useRef();a.current==null&&(a.current=_q({window:s,v5Compat:!0}));let i=a.current,[o,c]=S.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=S.useCallback(f=>{u&&oN?oN(()=>c(f)):c(f)},[c,u]);return S.useLayoutEffect(()=>i.listen(d),[i,d]),S.useEffect(()=>cK(n),[n]),S.createElement(uK,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}var lN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(lN||(lN={}));var cN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cN||(cN={}));const Aa={student_subjects:1800*1e3,student_active_tests:600*1e3,student_results_table:600*1e3,teacher_subjects:900*1e3,teacher_classes:900*1e3,teacher_tests:600*1e3,teacher_results_table:600*1e3,admin_users:1200*1e3,admin_teachers:1200*1e3,admin_subjects:1800*1e3,admin_academic_years:3600*1e3,admin_tests:900*1e3,admin_results_table:null,admin_teacher_id:3600*1e3,all_tests:1200*1e3,subjects_dropdown:1800*1e3,grades_classes:3600*1e3,test_progress:120*1e3,anti_cheating:120*1e3,word_matching_test:600*1e3,speaking_test_data:3600*1e3},ja=e=>{try{const t=localStorage.getItem(e);if(!t)return console.log(" Cache: No data found for key:",e),null;const{data:r,timestamp:n,ttl:s}=JSON.parse(t),a=Date.now()-n;return a>s?(console.log(" Cache: Data expired for key:",e,"age:",a,"ttl:",s),localStorage.removeItem(e),null):(console.log(" Cache: Data found for key:",e,"age:",a,"ttl:",s),r)}catch(t){return console.log(" Cache: Corrupted data for key:",e,t),localStorage.removeItem(e),null}},ha=(e,t,r)=>{try{console.log(" Cache: Setting data for key:",e,"ttl:",r),localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:r})),console.log(" Cache: Data cached successfully for key:",e)}catch{console.log(" Cache: Storage full, cleaning old data for key:",e),YD();try{localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:r})),console.log(" Cache: Data cached after cleanup for key:",e)}catch{console.warn("Storage full, cannot cache data")}}},YD=()=>{const e=Date.now(),t=Object.keys(localStorage);t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i,ttl:o}=JSON.parse(a);e-i>o&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const r=e-10080*60*1e3;t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i}=JSON.parse(a);i<r&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const n=Object.keys(localStorage);if(n.length>0){const s=n.map(i=>{try{const o=localStorage.getItem(i);if(o){const{timestamp:c}=JSON.parse(o);return{key:i,timestamp:c}}}catch{return{key:i,timestamp:0}}return{key:i,timestamp:0}}),a=Math.ceil(s.length*.25);s.sort((i,o)=>i.timestamp-o.timestamp).slice(0,a).forEach(({key:i})=>localStorage.removeItem(i))}},Ck=e=>{Object.keys(localStorage).forEach(r=>{r.includes(e)&&localStorage.removeItem(r)})},Ip=(e,t,r)=>{const n=`test_progress_${e}_${t}_${r}`,s=`anti_cheating_${e}_${t}_${r}`;if(localStorage.removeItem(n),localStorage.removeItem(s),t==="speaking_test_data"){const a=`speaking_test_data_${e}_${r}`;localStorage.removeItem(a),console.log(`Cleared speaking test data cache for ${r}`)}console.log(`Cleared test data for ${t}_${r}`)},Vg=Object.freeze(Object.defineProperty({__proto__:null,CACHE_TTL:Aa,cleanupOldData:YD,clearTestData:Ip,clearUserData:Ck,getCachedData:ja,setCachedData:ha},Symbol.toStringTag,{value:"Module"}));let bu=null,P1=null;function ow(){if(P1!==null)return P1;try{const e="_test";localStorage.setItem(e,"test");const t=localStorage.getItem(e);localStorage.removeItem(e),P1=t==="test"}catch(e){console.warn("localStorage unavailable, falling back to sessionStorage",e),P1=!1}return P1}function my(){return ow()?localStorage:sessionStorage}async function Nk(e){try{const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}catch(t){return console.warn("Hash computation failed",t),btoa(e).replace(/[^a-zA-Z0-9]/g,"").substring(0,64)}}async function mK(e,t){try{const r=my();return r.setItem(e,t),r.getItem(e)===t}catch(r){return console.warn("Storage write failed",r),!1}}async function gK(e,t){try{const r=my(),n=await Nk(t);return r.setItem(`${e}_hash`,n),await mK(e,t)}catch(r){return console.warn("Failed to store with hash",r),!1}}async function pK(e){try{const t=my(),r=t.getItem(e),n=t.getItem(`${e}_hash`);return!r||!n?!1:await Nk(r)===n}catch(t){return console.warn("Hash verification failed",t),!1}}async function xK(e,t=3,r=200){for(let n=0;n<t;n++){if(await e())return!0;await new Promise(a=>setTimeout(a,r))}return!1}const ka={async set(e){const t=ow(),r=my();if(!t){console.warn(" localStorage unavailable - using sessionStorage (less persistent)");try{r.setItem("auth_token",e);const a=r.getItem("auth_token")===e;return a&&(bu=e),a}catch(s){return console.error("sessionStorage fallback failed",s),!1}}const n=await xK(()=>gK("auth_token",e));return n&&(bu=e),n},async get(){if(bu)return bu;const e=my();if(!ow())try{const t=e.getItem("auth_token");return bu=t,t}catch(t){return console.error("sessionStorage fallback read failed",t),null}try{const t=e.getItem("auth_token");if(!t)return bu=null,null;if(e.getItem("auth_token_hash")){if(!await pK("auth_token"))return bu=null,null}else{console.log("Migrating legacy token to secure storage format...");try{const n=await Nk(t);if(e.setItem("auth_token_hash",n),e.getItem("auth_token_hash")!==n)return console.warn("Failed to store hash during migration"),t}catch(n){console.warn("Failed to migrate token hash:",n)}}return bu=t,t}catch(t){return console.warn("Failed to get token",t),bu=null,null}},async clear(){try{ow()&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_token_hash"))}catch{}try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token_hash")}catch{}bu=null},clearCache(){bu=null}},uN=Object.freeze(Object.defineProperty({__proto__:null,SecureToken:ka},Symbol.toStringTag,{value:"Module"})),JD=S.createContext(),QD=({children:e})=>{const[t,r]=S.useState(null),[n,s]=S.useState(null),[a,i]=S.useState(null),[o,c]=S.useState(!1),[u,d]=S.useState(!0),[f,m]=S.useState(null);S.useEffect(()=>{console.log("[AUTH] Initializing application session..."),v()},[]),S.useEffect(()=>{if(o&&a){console.log("[AUTH] Setting up proactive token refresh...");let X=!1;const z=setInterval(async()=>{if(o&&a&&!X){X=!0;try{const K=a||await(window.tokenManager?.getToken()||ka.get());if(K&&p(K))console.log("[AUTH] Token expired, attempting refresh..."),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in");else if(K)try{const se=JSON.parse(atob(K.split(".")[1])).exp*1e3,pe=Date.now(),oe=se-pe;oe<300*1e3&&oe>0&&(console.log(`[AUTH] Token expires in ${Math.round(oe/1e3)} seconds, refreshing...`),await x()||console.log("[AUTH] Proactive refresh failed, but user remains logged in"))}catch(te){console.error("[AUTH] Error parsing token for expiration check:",te)}}catch(K){console.error("[AUTH] Error in proactive refresh:",K)}finally{X=!1}}},300*1e3);return()=>{console.log("[AUTH] Clearing proactive token refresh interval"),clearInterval(z)}}},[o,a]);const p=X=>{if(!X)return!0;try{if(typeof X!="string"||!X.includes("."))return console.warn("[AUTH] Invalid token format - not a JWT"),!0;const z=X.split(".");if(z.length!==3)return console.warn("[AUTH] Invalid token format - not 3 parts"),!0;const K=JSON.parse(atob(z[1])),te=Date.now()/1e3;return K.exp<=te}catch(z){if(console.error("[AUTH] Error decoding token:",z),console.warn("[AUTH] Token appears to be corrupted - clearing authentication"),ka.clear().catch(()=>{}),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("userData"),window.tokenManager)try{window.tokenManager.clearAuth()}catch(K){console.warn("[AUTH] Error clearing token manager:",K)}return!0}},x=async()=>{const X=localStorage.getItem("refresh_token");if(!X)return console.log("[AUTH] No refresh token found"),!1;try{const z=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:X})});if(z.ok){const K=await z.json();console.log("[AUTH] Token refresh successful"),await ka.set(K.accessToken),localStorage.setItem("refresh_token",K.refreshToken),localStorage.setItem("accessToken",K.accessToken);try{window.tokenManager&&(await window.tokenManager.setToken(K.accessToken),K.refreshToken&&window.tokenManager.setRefreshToken(K.refreshToken))}catch{}return i(K.accessToken),!0}else return console.error("[AUTH] Token refresh failed:",z.status),!1}catch(z){return console.error("[AUTH] Token refresh error:",z),!1}},w=async(X,z={})=>{const K=a||await(window.tokenManager?.getToken()||ka.get());if(!K)throw new Error("No authentication token found");const te={"Content-Type":"application/json",Authorization:`Bearer ${K}`,...z.headers},se=await fetch(X,{...z,headers:te});if(se.status===401)if(console.log("[AUTH] 401 error, attempting token refresh..."),await x()){const oe=await(window.tokenManager?.getToken()||ka.get());return te.Authorization=`Bearer ${oe}`,fetch(X,{...z,headers:te})}else throw console.log("[AUTH] Token refresh failed, returning 401 response"),new Error("Authentication failed - please login again");return se},v=async()=>{try{console.log("[AUTH] Starting session initialization..."),d(!0);const X=await(window.tokenManager?.getToken()||ka.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),z=localStorage.getItem("user_data")||localStorage.getItem("userData"),K=z?JSON.parse(z).role:null;if(console.log("[AUTH] Found stored data:",{hasToken:!!X,hasUser:!!z,role:K}),X&&K&&z)try{const te=JSON.parse(z);if(p(X))if(console.log("[AUTH] Token expired, attempting refresh..."),await x()){console.log("[AUTH] Token refreshed successfully");const pe=await(window.tokenManager?.getToken()||ka.get());i(pe)}else console.log("[AUTH] Token refresh failed, but continuing with existing token..."),i(X);else i(X);s(K),r(te);try{if(window.tokenManager&&X){await window.tokenManager.setToken(X);const se=localStorage.getItem("refresh_token");se&&window.tokenManager.setRefreshToken(se)}}catch{}c(!0),await b(te,K)}catch(te){console.error("[AUTH] Error parsing stored user data:",te),console.log("[AUTH] Invalid user data, but not forcing logout - continuing with empty state"),c(!1)}}catch(X){console.error("[AUTH] Session initialization error:",X),console.log("[AUTH] Initialization error, but not forcing logout - continuing with empty state"),c(!1)}finally{console.log("[AUTH] Session initialization complete"),d(!1)}},C=async X=>{try{if(d(!0),m(null),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),m("Please wait for the logout process to complete.");return}console.log("Attempting login with:",X.username);let z,K;X.username==="admin"?(z={ok:!0,json:()=>({success:!0,token:"test-token"})},K="admin"):(z=await authService.teacherLogin(X),K="teacher");const te=await z.json();await k(z,K,te)}catch(z){M(z)}finally{d(!1)}},k=async(X,z,K)=>{try{if(X.ok&&K.success&&K.token){i(K.token),s(z),r(K),c(!0);const te=K.accessToken||K.token;await ka.set(te),localStorage.setItem("refresh_token",K.refreshToken),localStorage.setItem("user_data",JSON.stringify(K)),localStorage.setItem("accessToken",te);try{window.tokenManager&&(await window.tokenManager.setToken(te),K.refreshToken&&window.tokenManager.setRefreshToken(K.refreshToken))}catch{}try{const se=Date.now(),pe=10080*60*1e3,oe=[];for(let ye=0;ye<localStorage.length;ye++){const we=localStorage.key(ye);if(!(!we||!(we.startsWith("test_progress_")||we.startsWith("test_timer_")||we.startsWith("test_shuffle_order_")||we.startsWith("student_results_table_")||we.startsWith("anti_cheating_"))))try{const Ie=localStorage.getItem(we);if(!Ie){oe.push(we);continue}let me=null;if(Ie.startsWith("{")||Ie.startsWith("[")){const _e=JSON.parse(Ie),We=_e.timestamp||_e.lastSaved||_e.lastTickAt||_e.createdAt||_e.updatedAt||_e.startedAt||_e.started_at;We&&(me=new Date(We).getTime())}if(!me){const _e=`${we}__ts`,We=localStorage.getItem(_e);We&&(me=parseInt(We)||null)}if(!me)continue;se-me>pe&&oe.push(we)}catch{}}oe.forEach(ye=>{try{localStorage.removeItem(ye)}catch{}})}catch(se){console.warn("LocalStorage cleanup skipped:",se)}return await b(K,z),!0}else{const te=K.message||X.statusText||"Login failed";return M(new Error(te)),!1}}catch(te){return M(te),!1}},b=async(X,z)=>{try{switch(z){case"admin":console.log("Admin login successful, role:",X.role),console.log("Admin logged in:",X);break;case"teacher":console.log("Teacher login successful, role:",X.role),console.log("Teacher data:",X.teacher),await A(X),await D();break;case"student":console.log("Student login successful"),j(X);break;default:console.warn("Unknown user role:",z)}}catch(K){console.error("Post-login actions error:",K)}},j=X=>{r(X),console.log("Student info populated:",X)},A=async X=>{r(X),console.log("Teacher info populated:",X)},F=async()=>{try{console.log("Initializing teacher cabinet...")}catch(X){console.error("Error initializing teacher cabinet:",X)}},D=async()=>{try{console.log("Checking teacher subjects...")}catch(X){console.error("Error checking teacher subjects:",X)}},M=X=>{m(X.message||"Login failed"),O()},O=()=>{m(null),d(!1)},L=S.useCallback(()=>{W()},[]),W=async()=>{r(null),s(null),i(null),c(!1),m(null);const X=t?.student_id||t?.teacher_id||t?.admin_id||t?.id;X&&Ck(X),await ka.clear(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("user_data"),localStorage.removeItem("user_role"),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("testProgress"),localStorage.removeItem("formData"),window.tokenManager&&await window.tokenManager.clearAuth(),setTimeout(()=>{re()},100)},re=()=>{console.log("Interface reset after session clear - redirecting to login"),window.location.replace("/login")},ie=()=>t?.id||null,xe=()=>n==="admin"?t:null,de=()=>n==="admin",fe=()=>de()?t?.admin_id:null,H=()=>n==="teacher"?t?.username:null,Q=()=>{console.log("Auth functions available:",{handleUnifiedLogin:typeof C,logout:typeof L,getCurrentTeacherId:typeof ie,isAdmin:typeof de,getCurrentAdmin:typeof xe,getCurrentAdminId:typeof fe,getCurrentTeacherUsername:typeof H})};S.useEffect(()=>(window.logout=L,window.getCurrentTeacherId=ie,window.getCurrentAdmin=xe,window.isAdmin=de,window.getCurrentAdminId=fe,window.getCurrentTeacherUsername=H,window.checkFunctionAvailability=Q,()=>{delete window.logout,delete window.getCurrentTeacherId,delete window.getCurrentAdmin,delete window.isAdmin,delete window.getCurrentAdminId,delete window.getCurrentTeacherUsername,delete window.checkFunctionAvailability}),[L]);const U=S.useCallback(X=>{console.log("Setting user data from external auth:",X),r(X),s(X.role),i(X.token),c(!0),d(!1),m(null),ka.set(X.token).catch(z=>{console.error("[AUTH] Failed to store token securely:",z)}),localStorage.setItem("user_data",JSON.stringify(X)),localStorage.setItem("accessToken",X.token),window.tokenManager&&window.tokenManager.setToken(X.token).catch(()=>{})},[]),V={user:t,role:n,token:a,isAuthenticated:o,isLoading:u,error:f,login:C,setUserData:U,logout:L,resetLoginForm:O,forceCompleteLogout:W,initializeApplicationSession:v,makeAuthenticatedRequest:w,populateStudentInfo:j,populateTeacherInfo:A,initializeTeacherCabinet:F,checkTeacherSubjects:D,getCurrentTeacherId:ie,getCurrentAdmin:xe,isAdmin:de,getCurrentAdminId:fe,getCurrentTeacherUsername:H,handleLoginResponse:k,handlePostLoginActions:b,handleLoginFailure:M,resetInterfaceAfterSessionClear:re,checkFunctionAvailability:Q};return l.jsx(JD.Provider,{value:V,children:e})},Js=()=>{const e=S.useContext(JD);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class yK{constructor(){this.baseURL="https://mathayomwatsing.netlify.app/.netlify/functions.",this.timeout=1e4,this.retryCount=3,this.retryDelay=1e3}async getHeaders(){const t=await(window.tokenManager?.getToken()||ka.get())||localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async sendRequest(t,r){try{return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(n){throw console.error(" Network error:",n),n}}async request(t,r={}){const n=`${this.baseURL}${t}`,a={method:"GET",headers:await this.getHeaders(),timeout:this.timeout,...r};let i;for(let o=0;o<this.retryCount;o++)try{const c=new AbortController,u=setTimeout(()=>c.abort(),this.timeout),d=await fetch(n,{...a,signal:c.signal});if(clearTimeout(u),!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return await d.json()}catch(c){if(i=c,c.name==="AbortError")throw new Error("Request timeout");o<this.retryCount-1&&(console.warn(`Request failed, retrying in ${this.retryDelay}ms... (attempt ${o+1}/${this.retryCount})`),await new Promise(u=>setTimeout(u,this.retryDelay*Math.pow(2,o))))}throw i}async get(t,r={}){return this.request(t,{...r,method:"GET"})}async post(t,r,n={}){return this.request(t,{...n,method:"POST",body:JSON.stringify(r)})}async put(t,r,n={}){return this.request(t,{...n,method:"PUT",body:JSON.stringify(r)})}async delete(t,r={}){return this.request(t,{...r,method:"DELETE"})}async patch(t,r,n={}){return this.request(t,{...n,method:"PATCH",body:JSON.stringify(r)})}async uploadFile(t,r,n={}){const s=new FormData;s.append("file",r);const a=`${this.baseURL}${t}`,i=await(window.tokenManager?.getToken()||ka.get())||localStorage.getItem("token"),o={method:"POST",headers:{...i&&{Authorization:`Bearer ${i}`}},body:s,...n};try{const c=await fetch(a,o);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return await c.json()}catch(c){throw c}}async downloadFile(t,r,n={}){const s=`${this.baseURL}${t}`,i={method:"GET",headers:await this.getHeaders(),...n};try{const o=await fetch(s,i);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const c=await o.blob(),u=window.URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)}catch(o){throw o}}ensureDebugOutput(){let t=document.getElementById("debug-output");return t||(t=document.createElement("div"),t.id="debug-output",t.className="fixed top-4 right-4 w-96 max-h-96 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 overflow-auto",t.innerHTML='<div class="text-sm font-mono text-gray-800">Debug Output</div>',document.body.appendChild(t)),t}async testDbConnection(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/test-db-connection")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Database Connection Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,message:"Database connection successful",data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Database Connection Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,message:"Database connection failed",error:t.message}}}async testStudentLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:"51706",password:"1"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Student Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Student Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testTeacherLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"Aleksandr_Petrov",password:"465"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Teacher Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Teacher Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testAdminLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Admin Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Admin Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetTeacherSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-teacher-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Teacher Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Teacher Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetClassResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-class-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Class Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Class Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentTestResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-test-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Test Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Test Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testEndpoints(){const t=["/debug/test-student-login","/debug/test-teacher-login","/debug/test-admin-login","/debug/test-get-subjects","/debug/test-get-teacher-subjects","/debug/test-get-class-results","/debug/test-get-student-subjects","/debug/test-get-student-test-results"],r={};for(const n of t)try{const s=await this.get(n);r[n]={success:!0,data:s}}catch(s){r[n]={success:!1,error:s.message}}return r}async debugFunction(t){const r=this.ensureDebugOutput();try{let n;switch(t){case"testDbConnection":n=await this.testDbConnection();break;case"testStudentLogin":n=await this.testStudentLogin();break;case"testTeacherLogin":n=await this.testTeacherLogin();break;case"testAdminLogin":n=await this.testAdminLogin();break;case"testGetSubjects":n=await this.testGetSubjects();break;case"testGetTeacherSubjects":n=await this.testGetTeacherSubjects();break;case"testGetClassResults":n=await this.testGetClassResults();break;case"testGetStudentSubjects":n=await this.testGetStudentSubjects();break;case"testGetStudentTestResults":n=await this.testGetStudentTestResults();break;default:throw new Error(`Unknown debug function: ${t}`)}return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Debug Function: ${t}</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),n}catch(n){throw r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Debug Function Error: ${t}</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${n.message}</pre>
        `),n}}showDebugFunctions(){const t=this.ensureDebugOutput(),r=`
      <div class="text-sm font-mono text-gray-800 mb-4">Debug Functions</div>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <button onclick="apiClient.testDbConnection()" class="px-3 py-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors">
          Test DB Connection
        </button>
        <button onclick="apiClient.testStudentLogin()" class="px-3 py-2 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors">
          Test Student Login
        </button>
        <button onclick="apiClient.testTeacherLogin()" class="px-3 py-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 transition-colors">
          Test Teacher Login
        </button>
        <button onclick="apiClient.testAdminLogin()" class="px-3 py-2 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors">
          Test Admin Login
        </button>
        <button onclick="apiClient.testGetSubjects()" class="px-3 py-2 bg-purple-500 text-white text-xs rounded hover:bg-purple-600 transition-colors">
          Test Get Subjects
        </button>
        <button onclick="apiClient.testGetTeacherSubjects()" class="px-3 py-2 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600 transition-colors">
          Test Get Teacher Subjects
        </button>
        <button onclick="apiClient.testGetClassResults()" class="px-3 py-2 bg-pink-500 text-white text-xs rounded hover:bg-pink-600 transition-colors">
          Test Get Class Results
        </button>
        <button onclick="apiClient.testGetStudentSubjects()" class="px-3 py-2 bg-teal-500 text-white text-xs rounded hover:bg-teal-600 transition-colors">
          Test Get Student Subjects
        </button>
        <button onclick="apiClient.testGetStudentTestResults()" class="px-3 py-2 bg-orange-500 text-white text-xs rounded hover:bg-orange-600 transition-colors">
          Test Get Student Test Results
        </button>
        <button onclick="apiClient.testEndpoints()" class="px-3 py-2 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 transition-colors">
          Test All Endpoints
        </button>
      </div>
    `;t.innerHTML=r}}const _a=new yK,Ek=S.createContext({});function Ak(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const jk=typeof window<"u",ZD=jk?S.useLayoutEffect:S.useEffect,Vb=S.createContext(null);function Pk(e,t){e.indexOf(t)===-1&&e.push(t)}function Mk(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const _0=(e,t,r)=>r>t?t:r<e?e:r;let Fk=()=>{};const S0={},eI=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function tI(e){return typeof e=="object"&&e!==null}const rI=e=>/^0[^.\s]+$/u.test(e);function Ok(e){let t;return()=>(t===void 0&&(t=e()),t)}const Vc=e=>e,vK=(e,t)=>r=>t(e(r)),sv=(...e)=>e.reduce(vK),gy=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class Dk{constructor(){this.subscriptions=[]}add(t){return Pk(this.subscriptions,t),()=>Mk(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yd=e=>e*1e3,vd=e=>e/1e3;function nI(e,t){return t?e*(1e3/t):0}const sI=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,wK=1e-7,bK=12;function _K(e,t,r,n,s){let a,i,o=0;do i=t+(r-t)/2,a=sI(i,n,s)-e,a>0?r=i:t=i;while(Math.abs(a)>wK&&++o<bK);return i}function av(e,t,r,n){if(e===t&&r===n)return Vc;const s=a=>_K(a,0,1,e,r);return a=>a===0||a===1?a:sI(s(a),t,n)}const aI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,iI=e=>t=>1-e(1-t),oI=av(.33,1.53,.69,.99),Ik=iI(oI),lI=aI(Ik),cI=e=>(e*=2)<1?.5*Ik(e):.5*(2-Math.pow(2,-10*(e-1))),Rk=e=>1-Math.sin(Math.acos(e)),uI=iI(Rk),dI=aI(Rk),SK=av(.42,0,1,1),kK=av(0,0,.58,1),fI=av(.42,0,.58,1),TK=e=>Array.isArray(e)&&typeof e[0]!="number",hI=e=>Array.isArray(e)&&typeof e[0]=="number",CK={linear:Vc,easeIn:SK,easeInOut:fI,easeOut:kK,circIn:Rk,circInOut:dI,circOut:uI,backIn:Ik,backInOut:lI,backOut:oI,anticipate:cI},NK=e=>typeof e=="string",dN=e=>{if(hI(e)){Fk(e.length===4);const[t,r,n,s]=e;return av(t,r,n,s)}else if(NK(e))return CK[e];return e},v2=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function EK(e,t){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(d){i.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,m=!1)=>{const x=m&&s?r:n;return f&&i.add(d),x.has(d)||x.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const AK=40;function mI(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=v2.reduce((b,j)=>(b[j]=EK(a),b),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:m,render:p,postRender:x}=i,w=()=>{const b=S0.useManualTiming?s.timestamp:performance.now();r=!1,S0.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(b-s.timestamp,AK),1)),s.timestamp=b,s.isProcessing=!0,o.process(s),c.process(s),u.process(s),d.process(s),f.process(s),m.process(s),p.process(s),x.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(w))},v=()=>{r=!0,n=!0,s.isProcessing||e(w)};return{schedule:v2.reduce((b,j)=>{const A=i[j];return b[j]=(F,D=!1,M=!1)=>(r||v(),A.schedule(F,D,M)),b},{}),cancel:b=>{for(let j=0;j<v2.length;j++)i[v2[j]].cancel(b)},state:s,steps:i}}const{schedule:sa,cancel:Zf,state:no,steps:F_}=mI(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vc,!0);let lw;function jK(){lw=void 0}const bl={now:()=>(lw===void 0&&bl.set(no.isProcessing||S0.useManualTiming?no.timestamp:performance.now()),lw),set:e=>{lw=e,queueMicrotask(jK)}},gI=e=>t=>typeof t=="string"&&t.startsWith(e),Lk=gI("--"),PK=gI("var(--"),Bk=e=>PK(e)?MK.test(e.split("/*")[0].trim()):!1,MK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Rp={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},py={...Rp,transform:e=>_0(0,1,e)},w2={...Rp,default:1},Vx=e=>Math.round(e*1e5)/1e5,$k=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function FK(e){return e==null}const OK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zk=(e,t)=>r=>!!(typeof r=="string"&&OK.test(r)&&r.startsWith(e)||t&&!FK(r)&&Object.prototype.hasOwnProperty.call(r,t)),pI=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,o]=n.match($k);return{[e]:parseFloat(s),[t]:parseFloat(a),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},DK=e=>_0(0,255,e),O_={...Rp,transform:e=>Math.round(DK(e))},em={test:zk("rgb","red"),parse:pI("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+O_.transform(e)+", "+O_.transform(t)+", "+O_.transform(r)+", "+Vx(py.transform(n))+")"};function IK(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const bS={test:zk("#"),parse:IK,transform:em.transform},iv=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),If=iv("deg"),wd=iv("%"),sn=iv("px"),RK=iv("vh"),LK=iv("vw"),fN={...wd,parse:e=>wd.parse(e)/100,transform:e=>wd.transform(e*100)},qg={test:zk("hsl","hue"),parse:pI("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+wd.transform(Vx(t))+", "+wd.transform(Vx(r))+", "+Vx(py.transform(n))+")"},ii={test:e=>em.test(e)||bS.test(e)||qg.test(e),parse:e=>em.test(e)?em.parse(e):qg.test(e)?qg.parse(e):bS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?em.transform(e):qg.transform(e),getAnimatableNone:e=>{const t=ii.parse(e);return t.alpha=0,ii.transform(t)}},BK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function $K(e){return isNaN(e)&&typeof e=="string"&&(e.match($k)?.length||0)+(e.match(BK)?.length||0)>0}const xI="number",yI="color",zK="var",UK="var(",hN="${}",WK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xy(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(WK,c=>(ii.test(c)?(n.color.push(a),s.push(yI),r.push(ii.parse(c))):c.startsWith(UK)?(n.var.push(a),s.push(zK),r.push(c)):(n.number.push(a),s.push(xI),r.push(parseFloat(c))),++a,hN)).split(hN);return{values:r,split:o,indexes:n,types:s}}function vI(e){return xy(e).values}function wI(e){const{split:t,types:r}=xy(e),n=t.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=t[i],s[i]!==void 0){const o=r[i];o===xI?a+=Vx(s[i]):o===yI?a+=ii.transform(s[i]):a+=s[i]}return a}}const HK=e=>typeof e=="number"?0:ii.test(e)?ii.getAnimatableNone(e):e;function GK(e){const t=vI(e);return wI(e)(t.map(HK))}const eh={test:$K,parse:vI,createTransformer:wI,getAnimatableNone:GK};function D_(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function VK({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,a=0,i=0;if(!t)s=a=i=r;else{const o=r<.5?r*(1+t):r+t-r*t,c=2*r-o;s=D_(c,o,e+1/3),a=D_(c,o,e),i=D_(c,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function Sw(e,t){return r=>r>0?t:e}const ma=(e,t,r)=>e+(t-e)*r,I_=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},qK=[bS,em,qg],KK=e=>qK.find(t=>t.test(e));function mN(e){const t=KK(e);if(!t)return!1;let r=t.parse(e);return t===qg&&(r=VK(r)),r}const gN=(e,t)=>{const r=mN(e),n=mN(t);if(!r||!n)return Sw(e,t);const s={...r};return a=>(s.red=I_(r.red,n.red,a),s.green=I_(r.green,n.green,a),s.blue=I_(r.blue,n.blue,a),s.alpha=ma(r.alpha,n.alpha,a),em.transform(s))},_S=new Set(["none","hidden"]);function XK(e,t){return _S.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function YK(e,t){return r=>ma(e,t,r)}function Uk(e){return typeof e=="number"?YK:typeof e=="string"?Bk(e)?Sw:ii.test(e)?gN:ZK:Array.isArray(e)?bI:typeof e=="object"?ii.test(e)?gN:JK:Sw}function bI(e,t){const r=[...e],n=r.length,s=e.map((a,i)=>Uk(a)(a,t[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function JK(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=Uk(e[s])(e[s],t[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function QK(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][n[a]],o=e.values[i]??0;r[s]=o,n[a]++}return r}const ZK=(e,t)=>{const r=eh.createTransformer(t),n=xy(e),s=xy(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?_S.has(e)&&!s.values.length||_S.has(t)&&!n.values.length?XK(e,t):sv(bI(QK(n,s),s.values),r):Sw(e,t)};function _I(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?ma(e,t,r):Uk(e)(e,t)}const eX=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>sa.update(t,r),stop:()=>Zf(t),now:()=>no.isProcessing?no.timestamp:bl.now()}},SI=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let a=0;a<s;a++)n+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},kw=2e4;function Wk(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<kw;)t+=r,n=e.next(t);return t>=kw?1/0:t}function tX(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(Wk(n),kw);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:vd(s)}}const rX=5;function kI(e,t,r){const n=Math.max(t-rX,0);return nI(r-e(n),t-n)}const Ta={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},R_=.001;function nX({duration:e=Ta.duration,bounce:t=Ta.bounce,velocity:r=Ta.velocity,mass:n=Ta.mass}){let s,a,i=1-t;i=_0(Ta.minDamping,Ta.maxDamping,i),e=_0(Ta.minDuration,Ta.maxDuration,vd(e)),i<1?(s=u=>{const d=u*i,f=d*e,m=d-r,p=SS(u,i),x=Math.exp(-f);return R_-m/p*x},a=u=>{const f=u*i*e,m=f*r+r,p=Math.pow(i,2)*Math.pow(u,2)*e,x=Math.exp(-f),w=SS(Math.pow(u,2),i);return(-s(u)+R_>0?-1:1)*((m-p)*x)/w}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-R_+d*f},a=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const o=5/e,c=aX(s,a,o);if(e=yd(e),isNaN(c))return{stiffness:Ta.stiffness,damping:Ta.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:e}}}const sX=12;function aX(e,t,r){let n=r;for(let s=1;s<sX;s++)n=n-e(n)/t(n);return n}function SS(e,t){return e*Math.sqrt(1-t*t)}const iX=["duration","bounce"],oX=["stiffness","damping","mass"];function pN(e,t){return t.some(r=>e[r]!==void 0)}function lX(e){let t={velocity:Ta.velocity,stiffness:Ta.stiffness,damping:Ta.damping,mass:Ta.mass,isResolvedFromDuration:!1,...e};if(!pN(e,oX)&&pN(e,iX))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*_0(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Ta.mass,stiffness:s,damping:a}}else{const r=nX(e);t={...t,...r,mass:Ta.mass},t.isResolvedFromDuration=!0}return t}function Tw(e=Ta.visualDuration,t=Ta.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:f,velocity:m,isResolvedFromDuration:p}=lX({...r,velocity:-vd(r.velocity||0)}),x=m||0,w=u/(2*Math.sqrt(c*d)),v=i-a,C=vd(Math.sqrt(c/d)),k=Math.abs(v)<5;n||(n=k?Ta.restSpeed.granular:Ta.restSpeed.default),s||(s=k?Ta.restDelta.granular:Ta.restDelta.default);let b;if(w<1){const A=SS(C,w);b=F=>{const D=Math.exp(-w*C*F);return i-D*((x+w*C*v)/A*Math.sin(A*F)+v*Math.cos(A*F))}}else if(w===1)b=A=>i-Math.exp(-C*A)*(v+(x+C*v)*A);else{const A=C*Math.sqrt(w*w-1);b=F=>{const D=Math.exp(-w*C*F),M=Math.min(A*F,300);return i-D*((x+w*C*v)*Math.sinh(M)+A*v*Math.cosh(M))/A}}const j={calculatedDuration:p&&f||null,next:A=>{const F=b(A);if(p)o.done=A>=f;else{let D=A===0?x:0;w<1&&(D=A===0?yd(x):kI(b,A,F));const M=Math.abs(D)<=n,O=Math.abs(i-F)<=s;o.done=M&&O}return o.value=o.done?i:F,o},toString:()=>{const A=Math.min(Wk(j),kw),F=SI(D=>j.next(A*D).value,A,30);return A+"ms "+F},toTransition:()=>{}};return j}Tw.applyToOptions=e=>{const t=tX(e,100,Tw);return e.ease=t.ease,e.duration=yd(t.duration),e.type="keyframes",e};function kS({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],m={done:!1,value:f},p=M=>o!==void 0&&M<o||c!==void 0&&M>c,x=M=>o===void 0?c:c===void 0||Math.abs(o-M)<Math.abs(c-M)?o:c;let w=r*t;const v=f+w,C=i===void 0?v:i(v);C!==v&&(w=C-f);const k=M=>-w*Math.exp(-M/n),b=M=>C+k(M),j=M=>{const O=k(M),L=b(M);m.done=Math.abs(O)<=u,m.value=m.done?C:L};let A,F;const D=M=>{p(m.value)&&(A=M,F=Tw({keyframes:[m.value,x(m.value)],velocity:kI(b,M,m.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return D(0),{calculatedDuration:null,next:M=>{let O=!1;return!F&&A===void 0&&(O=!0,j(M),D(M)),A!==void 0&&M>=A?F.next(M-A):(!O&&j(M),m)}}}function cX(e,t,r){const n=[],s=r||S0.mix||_I,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||Vc:t;o=sv(c,o)}n.push(o)}return n}function uX(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const a=e.length;if(Fk(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=cX(t,n,s),c=o.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const m=gy(e[f],e[f+1],d);return o[f](m)};return r?d=>u(_0(e[0],e[a-1],d)):u}function dX(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=gy(0,t,n);e.push(ma(r,1,s))}}function fX(e){const t=[0];return dX(t,e.length-1),t}function hX(e,t){return e.map(r=>r*t)}function mX(e,t){return e.map(()=>t||fI).splice(0,e.length-1)}function qx({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=TK(n)?n.map(dN):dN(n),a={done:!1,value:t[0]},i=hX(r&&r.length===t.length?r:fX(t),e),o=uX(i,t,{ease:Array.isArray(s)?s:mX(t,s)});return{calculatedDuration:e,next:c=>(a.value=o(c),a.done=c>=e,a)}}const gX=e=>e!==null;function Hk(e,{repeat:t,repeatType:r="loop"},n,s=1){const a=e.filter(gX),o=s<0||t&&r!=="loop"&&t%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const pX={decay:kS,inertia:kS,tween:qx,keyframes:qx,spring:Tw};function TI(e){typeof e.type=="string"&&(e.type=pX[e.type])}class Gk{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const xX=e=>e/100;class Vk extends Gk{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==bl.now()&&this.tick(bl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;TI(t);const{type:r=qx,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:o}=t;const c=r||qx;c!==qx&&typeof o[0]!="number"&&(this.mixKeyframes=sv(xX,_I(o[0],o[1])),o=[0,100]);const u=c({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=Wk(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:m,repeatDelay:p,type:x,onUpdate:w,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const C=this.currentTime-u*(this.playbackSpeed>=0?1:-1),k=this.playbackSpeed>=0?C<0:C>s;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,j=n;if(f){const M=Math.min(this.currentTime,s)/o;let O=Math.floor(M),L=M%1;!L&&M>=1&&(L=1),L===1&&O--,O=Math.min(O,f+1),!!(O%2)&&(m==="reverse"?(L=1-L,p&&(L-=p/o)):m==="mirror"&&(j=i)),b=_0(0,1,L)*o}const A=k?{done:!1,value:d[0]}:j.next(b);a&&(A.value=a(A.value));let{done:F}=A;!k&&c!==null&&(F=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return D&&x!==kS&&(A.value=Hk(d,this.options,v,this.speed)),w&&w(A.value),D&&this.finish(),A}then(t,r){return this.finished.then(t,r)}get duration(){return vd(this.calculatedDuration)}get time(){return vd(this.currentTime)}set time(t){t=yd(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(bl.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=vd(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=eX,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(bl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function yX(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const tm=e=>e*180/Math.PI,TS=e=>{const t=tm(Math.atan2(e[1],e[0]));return CS(t)},vX={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:TS,rotateZ:TS,skewX:e=>tm(Math.atan(e[1])),skewY:e=>tm(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},CS=e=>(e=e%360,e<0&&(e+=360),e),xN=TS,yN=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),vN=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),wX={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:yN,scaleY:vN,scale:e=>(yN(e)+vN(e))/2,rotateX:e=>CS(tm(Math.atan2(e[6],e[5]))),rotateY:e=>CS(tm(Math.atan2(-e[2],e[0]))),rotateZ:xN,rotate:xN,skewX:e=>tm(Math.atan(e[4])),skewY:e=>tm(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function NS(e){return e.includes("scale")?1:0}function ES(e,t){if(!e||e==="none")return NS(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=wX,s=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=vX,s=o}if(!s)return NS(t);const a=n[t],i=s[1].split(",").map(_X);return typeof a=="function"?a(i):i[a]}const bX=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return ES(r,t)};function _X(e){return parseFloat(e.trim())}const Lp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Bp=new Set(Lp),wN=e=>e===Rp||e===sn,SX=new Set(["x","y","z"]),kX=Lp.filter(e=>!SX.has(e));function TX(e){const t=[];return kX.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const cm={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>ES(t,"x"),y:(e,{transform:t})=>ES(t,"y")};cm.translateX=cm.x;cm.translateY=cm.y;const um=new Set;let AS=!1,jS=!1,PS=!1;function CI(){if(jS){const e=Array.from(um).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=TX(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{n.getValue(a)?.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}jS=!1,AS=!1,um.forEach(e=>e.complete(PS)),um.clear()}function NI(){um.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(jS=!0)})}function CX(){PS=!0,NI(),CI(),PS=!1}class qk{constructor(t,r,n,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(um.add(this),AS||(AS=!0,sa.read(NI),sa.resolveKeyframes(CI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const o=n.readValue(r,i);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}yX(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),um.delete(this)}cancel(){this.state==="scheduled"&&(um.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const NX=e=>e.startsWith("--");function EX(e,t,r){NX(t)?e.style.setProperty(t,r):e.style[t]=r}const AX=Ok(()=>window.ScrollTimeline!==void 0),jX={};function PX(e,t){const r=Ok(e);return()=>jX[t]??r()}const EI=PX(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Dx=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,bN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dx([0,.65,.55,1]),circOut:Dx([.55,0,1,.45]),backIn:Dx([.31,.01,.66,-.59]),backOut:Dx([.33,1.53,.69,.99])};function AI(e,t){if(e)return typeof e=="function"?EI()?SI(e,t):"ease-out":hI(e)?Dx(e):Array.isArray(e)?e.map(r=>AI(r,t)||bN.easeOut):bN[e]}function MX(e,t,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const f=AI(o,s);Array.isArray(f)&&(d.easing=f);const m={delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(d,m)}function jI(e){return typeof e=="function"&&"applyToOptions"in e}function FX({type:e,...t}){return jI(e)&&EI()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class OX extends Gk{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,Fk(typeof t.type!="string");const u=FX(t);this.animation=MX(r,n,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=Hk(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):EX(r,n,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return vd(Number(t))}get time(){return vd(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=yd(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&AX()?(this.animation.timeline=t,Vc):r(this)}}const PI={anticipate:cI,backInOut:lI,circInOut:dI};function DX(e){return e in PI}function IX(e){typeof e.ease=="string"&&DX(e.ease)&&(e.ease=PI[e.ease])}const _N=10;class RX extends OX{constructor(t){IX(t),TI(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...i}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new Vk({...i,autoplay:!1}),c=yd(this.finishedTime??this.time);r.setWithVelocity(o.sample(c-_N).value,o.sample(c).value,_N),o.stop()}}const SN=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(eh.test(e)||e==="0")&&!e.startsWith("url("));function LX(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function BX(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=SN(s,t),o=SN(a,t);return!i||!o?!1:LX(e)||(r==="spring"||jI(r))&&n}function MS(e){e.duration=0,e.type}const $X=new Set(["opacity","clipPath","filter","transform"]),zX=Ok(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function UX(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return zX()&&r&&$X.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&a!==0&&i!=="inertia"}const WX=40;class HX extends Gk{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:c,motionValue:u,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=bl.now();const m={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,name:c,motionValue:u,element:d,...f},p=d?.KeyframeResolver||qk;this.keyframeResolver=new p(o,(x,w,v)=>this.onKeyframesResolved(x,w,m,!v),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=bl.now(),BX(t,a,i,o)||((S0.instantAnimations||!c)&&d?.(Hk(t,n,r)),t[0]=t[t.length-1],MS(n),n.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>WX?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},p=!u&&UX(m)?new RX({...m,element:m.motionValue.owner.current}):new Vk(m);p.finished.then(()=>this.notifyFinished()).catch(Vc),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),CX()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const GX=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function VX(e){const t=GX.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function MI(e,t,r=1){const[n,s]=VX(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const i=a.trim();return eI(i)?parseFloat(i):i}return Bk(s)?MI(s,t,r+1):s}function Kk(e,t){return e?.[t]??e?.default??e}const FI=new Set(["width","height","top","left","right","bottom",...Lp]),qX={test:e=>e==="auto",parse:e=>e},OI=e=>t=>t.test(e),DI=[Rp,sn,wd,If,LK,RK,qX],kN=e=>DI.find(OI(e));function KX(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||rI(e):!0}const XX=new Set(["brightness","contrast","saturate","opacity"]);function YX(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match($k)||[];if(!n)return e;const s=r.replace(n,"");let a=XX.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+s+")"}const JX=/\b([a-z-]*)\(.*?\)/gu,FS={...eh,getAnimatableNone:e=>{const t=e.match(JX);return t?t.map(YX).join(" "):e}},TN={...Rp,transform:Math.round},QX={rotate:If,rotateX:If,rotateY:If,rotateZ:If,scale:w2,scaleX:w2,scaleY:w2,scaleZ:w2,skew:If,skewX:If,skewY:If,distance:sn,translateX:sn,translateY:sn,translateZ:sn,x:sn,y:sn,z:sn,perspective:sn,transformPerspective:sn,opacity:py,originX:fN,originY:fN,originZ:sn},Xk={borderWidth:sn,borderTopWidth:sn,borderRightWidth:sn,borderBottomWidth:sn,borderLeftWidth:sn,borderRadius:sn,radius:sn,borderTopLeftRadius:sn,borderTopRightRadius:sn,borderBottomRightRadius:sn,borderBottomLeftRadius:sn,width:sn,maxWidth:sn,height:sn,maxHeight:sn,top:sn,right:sn,bottom:sn,left:sn,padding:sn,paddingTop:sn,paddingRight:sn,paddingBottom:sn,paddingLeft:sn,margin:sn,marginTop:sn,marginRight:sn,marginBottom:sn,marginLeft:sn,backgroundPositionX:sn,backgroundPositionY:sn,...QX,zIndex:TN,fillOpacity:py,strokeOpacity:py,numOctaves:TN},ZX={...Xk,color:ii,backgroundColor:ii,outlineColor:ii,fill:ii,stroke:ii,borderColor:ii,borderTopColor:ii,borderRightColor:ii,borderBottomColor:ii,borderLeftColor:ii,filter:FS,WebkitFilter:FS},II=e=>ZX[e];function RI(e,t){let r=II(e);return r!==FS&&(r=eh),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const eY=new Set(["auto","none","0"]);function tY(e,t,r){let n=0,s;for(;n<e.length&&!s;){const a=e[n];typeof a=="string"&&!eY.has(a)&&xy(a).values.length&&(s=e[n]),n++}if(s&&r)for(const a of t)e[a]=RI(r,s)}class rY extends qk{constructor(t,r,n,s,a){super(t,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Bk(u))){const d=MI(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!FI.has(n)||t.length!==2)return;const[s,a]=t,i=kN(s),o=kN(a);if(i!==o)if(wN(i)&&wN(o))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else cm[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||KX(t[s]))&&n.push(s);n.length&&tY(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=cm[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=cm[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{t.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function nY(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=r?.[e]??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const LI=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function BI(e){return tI(e)&&"offsetHeight"in e}const CN=30,sY=e=>!isNaN(parseFloat(e));class aY{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=bl.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=bl.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=sY(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Dk);const n=this.events[t].add(r);return t==="change"?()=>{n(),sa.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=bl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>CN)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,CN);return nI(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xp(e,t){return new aY(e,t)}const{schedule:Yk}=mI(queueMicrotask,!1),ku={x:!1,y:!1};function $I(){return ku.x||ku.y}function iY(e){return e==="x"||e==="y"?ku[e]?null:(ku[e]=!0,()=>{ku[e]=!1}):ku.x||ku.y?null:(ku.x=ku.y=!0,()=>{ku.x=ku.y=!1})}function zI(e,t){const r=nY(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function NN(e){return!(e.pointerType==="touch"||$I())}function oY(e,t,r={}){const[n,s,a]=zI(e,r),i=o=>{if(!NN(o))return;const{target:c}=o,u=t(c,o);if(typeof u!="function"||!c)return;const d=f=>{NN(f)&&(u(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const UI=(e,t)=>t?e===t?!0:UI(e,t.parentElement):!1,Jk=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,lY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cY(e){return lY.has(e.tagName)||e.tabIndex!==-1}const cw=new WeakSet;function EN(e){return t=>{t.key==="Enter"&&e(t)}}function L_(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const uY=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=EN(()=>{if(cw.has(r))return;L_(r,"down");const s=EN(()=>{L_(r,"up")}),a=()=>L_(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function AN(e){return Jk(e)&&!$I()}function dY(e,t,r={}){const[n,s,a]=zI(e,r),i=o=>{const c=o.currentTarget;if(!AN(o))return;cw.add(c);const u=t(c,o),d=(p,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),cw.has(c)&&cw.delete(c),AN(p)&&typeof u=="function"&&u(p,{success:x})},f=p=>{d(p,c===window||c===document||r.useGlobalTarget||UI(c,p.target))},m=p=>{d(p,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",m,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),BI(o)&&(o.addEventListener("focus",u=>uY(u,s)),!cY(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function WI(e){return tI(e)&&"ownerSVGElement"in e}function fY(e){return WI(e)&&e.tagName==="svg"}const Io=e=>!!(e&&e.getVelocity),hY=[...DI,ii,eh],mY=e=>hY.find(OI(e)),Qk=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class gY extends S.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=BI(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pY({children:e,isPresent:t,anchorX:r,root:n}){const s=S.useId(),a=S.useRef(null),i=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=S.useContext(Qk);return S.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:f,right:m}=i.current;if(t||!a.current||!c||!u)return;const p=r==="left"?`left: ${f}`:`right: ${m}`;a.current.dataset.motionPopId=s;const x=document.createElement("style");o&&(x.nonce=o);const w=n??document.head;return w.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{w.contains(x)&&w.removeChild(x)}},[t]),l.jsx(gY,{isPresent:t,childRef:a,sizeRef:i,children:S.cloneElement(e,{ref:a})})}const xY=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:c})=>{const u=Ak(yY),d=S.useId();let f=!0,m=S.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:p=>{u.set(p,!0);for(const x of u.values())if(!x)return;n&&n()},register:p=>(u.set(p,!1),()=>u.delete(p))}),[r,u,n]);return a&&f&&(m={...m}),S.useMemo(()=>{u.forEach((p,x)=>u.set(x,!1))},[r]),S.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),i==="popLayout"&&(e=l.jsx(pY,{isPresent:r,anchorX:o,root:c,children:e})),l.jsx(Vb.Provider,{value:m,children:e})};function yY(){return new Map}function HI(e=!0){const t=S.useContext(Vb);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,a=S.useId();S.useEffect(()=>{if(e)return s(a)},[e]);const i=S.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,i]:[!0]}const b2=e=>e.key||"";function jN(e){const t=[];return S.Children.forEach(e,r=>{S.isValidElement(r)&&t.push(r)}),t}const wl=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:c})=>{const[u,d]=HI(i),f=S.useMemo(()=>jN(e),[e]),m=i&&!u?[]:f.map(b2),p=S.useRef(!0),x=S.useRef(f),w=Ak(()=>new Map),[v,C]=S.useState(f),[k,b]=S.useState(f);ZD(()=>{p.current=!1,x.current=f;for(let F=0;F<k.length;F++){const D=b2(k[F]);m.includes(D)?w.delete(D):w.get(D)!==!0&&w.set(D,!1)}},[k,m.length,m.join("-")]);const j=[];if(f!==v){let F=[...f];for(let D=0;D<k.length;D++){const M=k[D],O=b2(M);m.includes(O)||(F.splice(D,0,M),j.push(M))}return a==="wait"&&j.length&&(F=j),b(jN(F)),C(f),null}const{forceRender:A}=S.useContext(Ek);return l.jsx(l.Fragment,{children:k.map(F=>{const D=b2(F),M=i&&!u?!1:f===k||m.includes(D),O=()=>{if(w.has(D))w.set(D,!0);else return;let L=!0;w.forEach(W=>{W||(L=!1)}),L&&(A?.(),b(x.current),i&&d?.(),n&&n())};return l.jsx(xY,{isPresent:M,initial:!p.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:M?void 0:O,anchorX:o,children:F},D)})})},GI=S.createContext({strict:!1}),PN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yp={};for(const e in PN)yp[e]={isEnabled:t=>PN[e].some(r=>!!t[r])};function vY(e){for(const t in e)yp[t]={...yp[t],...e[t]}}const wY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cw(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wY.has(e)}let VI=e=>!Cw(e);function bY(e){typeof e=="function"&&(VI=t=>t.startsWith("on")?!Cw(t):e(t))}try{bY(require("@emotion/is-prop-valid").default)}catch{}function _Y(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(VI(s)||r===!0&&Cw(s)||!t&&!Cw(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const qb=S.createContext({});function Kb(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function yy(e){return typeof e=="string"||Array.isArray(e)}const Zk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],e8=["initial",...Zk];function Xb(e){return Kb(e.animate)||e8.some(t=>yy(e[t]))}function qI(e){return!!(Xb(e)||e.variants)}function SY(e,t){if(Xb(e)){const{initial:r,animate:n}=e;return{initial:r===!1||yy(r)?r:void 0,animate:yy(n)?n:void 0}}return e.inherit!==!1?t:{}}function kY(e){const{initial:t,animate:r}=SY(e,S.useContext(qb));return S.useMemo(()=>({initial:t,animate:r}),[MN(t),MN(r)])}function MN(e){return Array.isArray(e)?e.join(" "):e}const vy={};function TY(e){for(const t in e)vy[t]=e[t],Lk(t)&&(vy[t].isCSSVariable=!0)}function KI(e,{layout:t,layoutId:r}){return Bp.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!vy[e]||e==="opacity")}const CY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NY=Lp.length;function EY(e,t,r){let n="",s=!0;for(let a=0;a<NY;a++){const i=Lp[a],o=e[i];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(i.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||r){const u=LI(o,Xk[i]);if(!c){s=!1;const d=CY[i]||i;n+=`${d}(${u}) `}r&&(t[i]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function t8(e,t,r){const{style:n,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const c in t){const u=t[c];if(Bp.has(c)){i=!0;continue}else if(Lk(c)){s[c]=u;continue}else{const d=LI(u,Xk[c]);c.startsWith("origin")?(o=!0,a[c]=d):n[c]=d}}if(t.transform||(i||r?n.transform=EY(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${c} ${u} ${d}`}}const r8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function XI(e,t,r){for(const n in t)!Io(t[n])&&!KI(n,r)&&(e[n]=t[n])}function AY({transformTemplate:e},t){return S.useMemo(()=>{const r=r8();return t8(r,t,e),Object.assign({},r.vars,r.style)},[t])}function jY(e,t){const r=e.style||{},n={};return XI(n,r,e),Object.assign(n,AY(e,t)),n}function PY(e,t){const r={},n=jY(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const MY={offset:"stroke-dashoffset",array:"stroke-dasharray"},FY={offset:"strokeDashoffset",array:"strokeDasharray"};function OY(e,t,r=1,n=0,s=!0){e.pathLength=1;const a=s?MY:FY;e[a.offset]=sn.transform(-n);const i=sn.transform(t),o=sn.transform(r);e[a.array]=`${i} ${o}`}function YI(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},c,u,d){if(t8(e,o,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m}=e;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=d?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),s!==void 0&&OY(f,s,a,i,!1)}const JI=()=>({...r8(),attrs:{}}),QI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function DY(e,t,r,n){const s=S.useMemo(()=>{const a=JI();return YI(a,t,QI(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};XI(a,e.style,e),s.style={...a,...s.style}}return s}const IY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function n8(e){return typeof e!="string"||e.includes("-")?!1:!!(IY.indexOf(e)>-1||/[A-Z]/u.test(e))}function RY(e,t,r,{latestValues:n},s,a=!1){const o=(n8(e)?DY:PY)(t,n,s,e),c=_Y(t,typeof e=="string",a),u=e!==S.Fragment?{...c,...o,ref:r}:{},{children:d}=t,f=S.useMemo(()=>Io(d)?d.get():d,[d]);return S.createElement(e,{...u,children:f})}function FN(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function s8(e,t,r,n){if(typeof t=="function"){const[s,a]=FN(n);t=t(r!==void 0?r:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=FN(n);t=t(r!==void 0?r:e.custom,s,a)}return t}function uw(e){return Io(e)?e.get():e}function LY({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:BY(r,n,s,e),renderState:t()}}function BY(e,t,r,n){const s={},a=n(e,{});for(const m in a)s[m]=uw(a[m]);let{initial:i,animate:o}=e;const c=Xb(e),u=qI(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const f=d?o:i;if(f&&typeof f!="boolean"&&!Kb(f)){const m=Array.isArray(f)?f:[f];for(let p=0;p<m.length;p++){const x=s8(e,m[p]);if(x){const{transitionEnd:w,transition:v,...C}=x;for(const k in C){let b=C[k];if(Array.isArray(b)){const j=d?b.length-1:0;b=b[j]}b!==null&&(s[k]=b)}for(const k in w)s[k]=w[k]}}}return s}const ZI=e=>(t,r)=>{const n=S.useContext(qb),s=S.useContext(Vb),a=()=>LY(e,t,n,s);return r?a():Ak(a)};function a8(e,t,r){const{style:n}=e,s={};for(const a in n)(Io(n[a])||t.style&&Io(t.style[a])||KI(a,e)||r?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const $Y=ZI({scrapeMotionValuesFromProps:a8,createRenderState:r8});function eR(e,t,r){const n=a8(e,t,r);for(const s in e)if(Io(e[s])||Io(t[s])){const a=Lp.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=e[s]}return n}const zY=ZI({scrapeMotionValuesFromProps:eR,createRenderState:JI}),UY=Symbol.for("motionComponentSymbol");function Kg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function WY(e,t,r){return S.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Kg(r)&&(r.current=n))},[t])}const i8=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HY="framerAppearId",tR="data-"+i8(HY),rR=S.createContext({});function GY(e,t,r,n,s){const{visualElement:a}=S.useContext(qb),i=S.useContext(GI),o=S.useContext(Vb),c=S.useContext(Qk).reducedMotion,u=S.useRef(null);n=n||i.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,f=S.useContext(rR);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&VY(u.current,r,s,f);const m=S.useRef(!1);S.useInsertionEffect(()=>{d&&m.current&&d.update(r,o)});const p=r[tR],x=S.useRef(!!p&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return ZD(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),S.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),x.current=!1),d.enteringChildren=void 0)}),d}function VY(e,t,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:nR(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&Kg(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function nR(e){if(e)return e.options.allowProjection!==!1?e.projection:nR(e.parent)}function B_(e,{forwardMotionProps:t=!1}={},r,n){r&&vY(r);const s=n8(e)?zY:$Y;function a(o,c){let u;const d={...S.useContext(Qk),...o,layoutId:qY(o)},{isStatic:f}=d,m=kY(o),p=s(o,f);if(!f&&jk){KY();const x=XY(d);u=x.MeasureLayout,m.visualElement=GY(e,p,d,n,x.ProjectionNode)}return l.jsxs(qb.Provider,{value:m,children:[u&&m.visualElement?l.jsx(u,{visualElement:m.visualElement,...d}):null,RY(e,o,WY(p,m.visualElement,c),p,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=S.forwardRef(a);return i[UY]=e,i}function qY({layoutId:e}){const t=S.useContext(Ek).id;return t&&e!==void 0?t+"-"+e:e}function KY(e,t){S.useContext(GI).strict}function XY(e){const{drag:t,layout:r}=yp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function YY(e,t){if(typeof Proxy>"u")return B_;const r=new Map,n=(a,i)=>B_(a,i,e,t),s=(a,i)=>n(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?n:(r.has(i)||r.set(i,B_(i,void 0,e,t)),r.get(i))})}function sR({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function JY({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function QY(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function $_(e){return e===void 0||e===1}function OS({scale:e,scaleX:t,scaleY:r}){return!$_(e)||!$_(t)||!$_(r)}function Kh(e){return OS(e)||aR(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function aR(e){return ON(e.x)||ON(e.y)}function ON(e){return e&&e!=="0%"}function Nw(e,t,r){const n=e-r,s=t*n;return r+s}function DN(e,t,r,n,s){return s!==void 0&&(e=Nw(e,s,n)),Nw(e,r,n)+t}function DS(e,t=0,r=1,n,s){e.min=DN(e.min,t,r,n,s),e.max=DN(e.max,t,r,n,s)}function iR(e,{x:t,y:r}){DS(e.x,t.translate,t.scale,t.originPoint),DS(e.y,r.translate,r.scale,r.originPoint)}const IN=.999999999999,RN=1.0000000000001;function ZY(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Yg(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,iR(e,i)),n&&Kh(a.latestValues)&&Yg(e,a.latestValues))}t.x<RN&&t.x>IN&&(t.x=1),t.y<RN&&t.y>IN&&(t.y=1)}function Xg(e,t){e.min=e.min+t,e.max=e.max+t}function LN(e,t,r,n,s=.5){const a=ma(e.min,e.max,s);DS(e,t,r,a,n)}function Yg(e,t){LN(e.x,t.x,t.scaleX,t.scale,t.originX),LN(e.y,t.y,t.scaleY,t.scale,t.originY)}function oR(e,t){return sR(QY(e.getBoundingClientRect(),t))}function eJ(e,t,r){const n=oR(e,r),{scroll:s}=t;return s&&(Xg(n.x,s.offset.x),Xg(n.y,s.offset.y)),n}const BN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jg=()=>({x:BN(),y:BN()}),$N=()=>({min:0,max:0}),qa=()=>({x:$N(),y:$N()}),IS={current:null},lR={current:!1};function tJ(){if(lR.current=!0,!!jk)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>IS.current=e.matches;e.addEventListener("change",t),t()}else IS.current=!1}const rJ=new WeakMap;function nJ(e,t,r){for(const n in t){const s=t[n],a=r[n];if(Io(s))e.addValue(n,s);else if(Io(a))e.addValue(n,xp(s,{owner:e}));else if(a!==s)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(n);e.addValue(n,xp(i!==void 0?i:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const zN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sJ{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=qk,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=bl.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,sa.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=Xb(r),this.isVariantNode=qI(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const m in f){const p=f[m];c[m]!==void 0&&Io(p)&&p.set(c[m])}}mount(t){this.current=t,rJ.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),lR.current||tJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:IS.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Zf(this.notifyUpdate),Zf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Bp.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&sa.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in yp){const r=yp[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qa()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<zN.length;n++){const s=zN[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=nJ(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=xp(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(eI(n)||rI(n))?n=parseFloat(n):!mY(n)&&eh.test(r)&&(n=RI(t,r)),this.setBaseTarget(t,Io(n)?n.get():n)),Io(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=s8(this.props,r,this.presenceContext?.custom);a&&(n=a[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Io(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Dk),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Yk.render(this.render)}}class cR extends sJ{constructor(){super(...arguments),this.KeyframeResolver=rY}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Io(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function uR(e,{style:t,vars:r},n,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,n);for(i in r)a.setProperty(i,r[i])}function aJ(e){return window.getComputedStyle(e)}class iJ extends cR{constructor(){super(...arguments),this.type="html",this.renderInstance=uR}readValueFromInstance(t,r){if(Bp.has(r))return this.projection?.isProjecting?NS(r):bX(t,r);{const n=aJ(t),s=(Lk(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return oR(t,r)}build(t,r,n){t8(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return a8(t,r,n)}}const dR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oJ(e,t,r,n){uR(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(dR.has(s)?s:i8(s),t.attrs[s])}class lJ extends cR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qa}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Bp.has(r)){const n=II(r);return n&&n.default||0}return r=dR.has(r)?r:i8(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return eR(t,r,n)}build(t,r,n){YI(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){oJ(t,r,n,s)}mount(t){this.isSVGTag=QI(t.tagName),super.mount(t)}}const cJ=(e,t)=>n8(e)?new lJ(t):new iJ(t,{allowProjection:e!==S.Fragment});function np(e,t,r){const n=e.getProps();return s8(n,t,r!==void 0?r:n.custom,e)}const RS=e=>Array.isArray(e);function uJ(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,xp(r))}function dJ(e){return RS(e)?e[e.length-1]||0:e}function fJ(e,t){const r=np(e,t);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const o=dJ(a[i]);uJ(e,i,o)}}function hJ(e){return!!(Io(e)&&e.add)}function LS(e,t){const r=e.getValue("willChange");if(hJ(r))return r.add(t);if(!r&&S0.WillChange){const n=new S0.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function fR(e){return e.props[tR]}const mJ=e=>e!==null;function gJ(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(mJ),a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const pJ={type:"spring",stiffness:500,damping:25,restSpeed:10},xJ=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),yJ={type:"keyframes",duration:.8},vJ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wJ=(e,{keyframes:t})=>t.length>2?yJ:Bp.has(e)?e.startsWith("scale")?xJ(t[1]):pJ:vJ;function bJ({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const o8=(e,t,r,n={},s,a)=>i=>{const o=Kk(n,e)||{},c=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-yd(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};bJ(o)||Object.assign(d,wJ(e,d)),d.duration&&(d.duration=yd(d.duration)),d.repeatDelay&&(d.repeatDelay=yd(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(MS(d),d.delay===0&&(f=!0)),(S0.instantAnimations||S0.skipAnimations)&&(f=!0,MS(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!a&&t.get()!==void 0){const m=gJ(d.keyframes,o);if(m!==void 0){sa.update(()=>{d.onUpdate(m),d.onComplete()});return}}return o.isSync?new Vk(d):new HX(d)};function _J({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function hR(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),m=o[d];if(m===void 0||u&&_J(u,d))continue;const p={delay:r,...Kk(a||{},d)},x=f.get();if(x!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===x&&!p.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const C=fR(e);if(C){const k=window.MotionHandoffAnimation(C,d,sa);k!==null&&(p.startTime=k,w=!0)}}LS(e,d),f.start(o8(d,f,m,e.shouldReduceMotion&&FI.has(d)?{type:!1}:p,e,w));const v=f.animation;v&&c.push(v)}return i&&Promise.all(c).then(()=>{sa.update(()=>{i&&fJ(e,i)})}),c}function mR(e,t,r,n=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,o=(i-1)*n;return typeof r=="function"?r(a,i):s===1?a*n:o-a*n}function BS(e,t,r={}){const n=np(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(hR(e,n,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return SJ(e,t,c,u,d,f,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[c,u]=o==="beforeChildren"?[a,i]:[i,a];return c().then(()=>u())}else return Promise.all([a(),i(r.delay)])}function SJ(e,t,r=0,n=0,s=0,a=1,i){const o=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),o.push(BS(c,t,{...i,delay:r+(typeof n=="function"?0:n)+mR(e.variantChildren,c,n,s,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(o)}function kJ(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>BS(e,a,r));n=Promise.all(s)}else if(typeof t=="string")n=BS(e,t,r);else{const s=typeof t=="function"?np(e,t,r.custom):t;n=Promise.all(hR(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function gR(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const TJ=e8.length;function pR(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?pR(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<TJ;r++){const n=e8[r],s=e.props[n];(yy(s)||s===!1)&&(t[n]=s)}return t}const CJ=[...Zk].reverse(),NJ=Zk.length;function EJ(e){return t=>Promise.all(t.map(({animation:r,options:n})=>kJ(e,r,n)))}function AJ(e){let t=EJ(e),r=UN(),n=!0;const s=c=>(u,d)=>{const f=np(e,d,c==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:m,transitionEnd:p,...x}=f;u={...u,...x,...p}}return u};function a(c){t=c(e)}function i(c){const{props:u}=e,d=pR(e.parent)||{},f=[],m=new Set;let p={},x=1/0;for(let v=0;v<NJ;v++){const C=CJ[v],k=r[C],b=u[C]!==void 0?u[C]:d[C],j=yy(b),A=C===c?k.isActive:null;A===!1&&(x=v);let F=b===d[C]&&b!==u[C]&&j;if(F&&n&&e.manuallyAnimateOnMount&&(F=!1),k.protectedKeys={...p},!k.isActive&&A===null||!b&&!k.prevProp||Kb(b)||typeof b=="boolean")continue;const D=jJ(k.prevProp,b);let M=D||C===c&&k.isActive&&!F&&j||v>x&&j,O=!1;const L=Array.isArray(b)?b:[b];let W=L.reduce(s(C),{});A===!1&&(W={});const{prevResolvedValues:re={}}=k,ie={...re,...W},xe=H=>{M=!0,m.has(H)&&(O=!0,m.delete(H)),k.needsAnimating[H]=!0;const Q=e.getValue(H);Q&&(Q.liveStyle=!1)};for(const H in ie){const Q=W[H],U=re[H];if(p.hasOwnProperty(H))continue;let V=!1;RS(Q)&&RS(U)?V=!gR(Q,U):V=Q!==U,V?Q!=null?xe(H):m.add(H):Q!==void 0&&m.has(H)?xe(H):k.protectedKeys[H]=!0}k.prevProp=b,k.prevResolvedValues=W,k.isActive&&(p={...p,...W}),n&&e.blockInitialAnimation&&(M=!1);const de=F&&D;M&&(!de||O)&&f.push(...L.map(H=>{const Q={type:C};if(typeof H=="string"&&n&&!de&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,V=np(U,H);if(U.enteringChildren&&V){const{delayChildren:X}=V.transition||{};Q.delay=mR(U.enteringChildren,e,X)}}return{animation:H,options:Q}}))}if(m.size){const v={};if(typeof u.initial!="boolean"){const C=np(e,Array.isArray(u.initial)?u.initial[0]:u.initial);C&&C.transition&&(v.transition=C.transition)}m.forEach(C=>{const k=e.getBaseTarget(C),b=e.getValue(C);b&&(b.liveStyle=!0),v[C]=k??null}),f.push({animation:v})}let w=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(f):Promise.resolve()}function o(c,u){if(r[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(c,u)),r[c].isActive=u;const d=i(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=UN(),n=!0}}}function jJ(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!gR(t,e):!1}function Wh(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function UN(){return{animate:Wh(!0),whileInView:Wh(),whileHover:Wh(),whileTap:Wh(),whileDrag:Wh(),whileFocus:Wh(),exit:Wh()}}class uh{constructor(t){this.isMounted=!1,this.node=t}update(){}}class PJ extends uh{constructor(t){super(t),t.animationState||(t.animationState=AJ(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Kb(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let MJ=0;class FJ extends uh{constructor(){super(...arguments),this.id=MJ++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const OJ={animation:{Feature:PJ},exit:{Feature:FJ}};function wy(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function ov(e){return{point:{x:e.pageX,y:e.pageY}}}const DJ=e=>t=>Jk(t)&&e(t,ov(t));function Kx(e,t,r,n){return wy(e,t,DJ(r),n)}const xR=1e-4,IJ=1-xR,RJ=1+xR,yR=.01,LJ=0-yR,BJ=0+yR;function tl(e){return e.max-e.min}function $J(e,t,r){return Math.abs(e-t)<=r}function WN(e,t,r,n=.5){e.origin=n,e.originPoint=ma(t.min,t.max,e.origin),e.scale=tl(r)/tl(t),e.translate=ma(r.min,r.max,e.origin)-e.originPoint,(e.scale>=IJ&&e.scale<=RJ||isNaN(e.scale))&&(e.scale=1),(e.translate>=LJ&&e.translate<=BJ||isNaN(e.translate))&&(e.translate=0)}function Xx(e,t,r,n){WN(e.x,t.x,r.x,n?n.originX:void 0),WN(e.y,t.y,r.y,n?n.originY:void 0)}function HN(e,t,r){e.min=r.min+t.min,e.max=e.min+tl(t)}function zJ(e,t,r){HN(e.x,t.x,r.x),HN(e.y,t.y,r.y)}function GN(e,t,r){e.min=t.min-r.min,e.max=e.min+tl(t)}function Yx(e,t,r){GN(e.x,t.x,r.x),GN(e.y,t.y,r.y)}function Lc(e){return[e("x"),e("y")]}const vR=({current:e})=>e?e.ownerDocument.defaultView:null,VN=(e,t)=>Math.abs(e-t);function UJ(e,t){const r=VN(e.x,t.x),n=VN(e.y,t.y);return Math.sqrt(r**2+n**2)}class wR{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=U_(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=UJ(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!x)return;const{point:w}=m,{timestamp:v}=no;this.history.push({...w,timestamp:v});const{onStart:C,onMove:k}=this.handlers;p||(C&&C(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),k&&k(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=z_(p,this.transformPagePoint),sa.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:x,onSessionEnd:w,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=U_(m.type==="pointercancel"?this.lastMoveEventInfo:z_(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,C),w&&w(m,C)},!Jk(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=ov(t),c=z_(o,this.transformPagePoint),{point:u}=c,{timestamp:d}=no;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,U_(c,this.history)),this.removeListeners=sv(Kx(this.contextWindow,"pointermove",this.handlePointerMove),Kx(this.contextWindow,"pointerup",this.handlePointerUp),Kx(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Zf(this.updatePoint)}}function z_(e,t){return t?{point:t(e.point)}:e}function qN(e,t){return{x:e.x-t.x,y:e.y-t.y}}function U_({point:e},t){return{point:e,delta:qN(e,bR(t)),offset:qN(e,WJ(t)),velocity:HJ(t,.1)}}function WJ(e){return e[0]}function bR(e){return e[e.length-1]}function HJ(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=bR(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>yd(t)));)r--;if(!n)return{x:0,y:0};const a=vd(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function GJ(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?ma(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?ma(r,e,n.max):Math.min(e,r)),e}function KN(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function VJ(e,{top:t,left:r,bottom:n,right:s}){return{x:KN(e.x,r,s),y:KN(e.y,t,n)}}function XN(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function qJ(e,t){return{x:XN(e.x,t.x),y:XN(e.y,t.y)}}function KJ(e,t){let r=.5;const n=tl(e),s=tl(t);return s>n?r=gy(t.min,t.max-n,e.min):n>s&&(r=gy(e.min,e.max-s,t.min)),_0(0,1,r)}function XJ(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const $S=.35;function YJ(e=$S){return e===!1?e=0:e===!0&&(e=$S),{x:YN(e,"left","right"),y:YN(e,"top","bottom")}}function YN(e,t,r){return{min:JN(e,t),max:JN(e,r)}}function JN(e,t){return typeof e=="number"?e:e[t]||0}const JJ=new WeakMap;class QJ{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qa(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ov(f).point)},i=(f,m)=>{const{drag:p,dragPropagation:x,onDragStart:w}=this.getProps();if(p&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=iY(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Lc(C=>{let k=this.getAxisMotionValue(C).get()||0;if(wd.test(k)){const{projection:b}=this.visualElement;if(b&&b.layout){const j=b.layout.layoutBox[C];j&&(k=tl(j)*(parseFloat(k)/100))}}this.originPoint[C]=k}),w&&sa.postRender(()=>w(f,m)),LS(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:w,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:C}=m;if(x&&this.currentDirection===null){this.currentDirection=ZJ(C),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",m.point,C),this.updateAxis("y",m.point,C),this.visualElement.render(),v&&v(f,m)},c=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Lc(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new wR(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:vR(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&sa.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!_2(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=GJ(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Kg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=VJ(n.layoutBox,t):this.constraints=!1,this.elastic=YJ(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Lc(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=XJ(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Kg(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=eJ(n,s.root,this.visualElement.getTransformPagePoint());let i=qJ(s.layout.layoutBox,a);if(r){const o=r(JY(i));this.hasMutatedConstraints=!!o,o&&(i=sR(o))}return i}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=Lc(d=>{if(!_2(d,r,this.currentDirection))return;let f=c&&c[d]||{};i&&(f={min:0,max:0});const m=s?200:1e6,p=s?40:1e7,x={type:"inertia",velocity:n?t[d]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return LS(this.visualElement,t),n.start(o8(t,n,0,r,this.visualElement,!1))}stopAnimation(){Lc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Lc(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Lc(r=>{const{drag:n}=this.getProps();if(!_2(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[r];a.set(t[r]-ma(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Kg(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Lc(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const c=o.get();s[i]=KJ({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Lc(i=>{if(!_2(i,t,null))return;const o=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];o.set(ma(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;JJ.set(this.visualElement,this);const t=this.visualElement.current,r=Kx(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Kg(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),sa.read(n);const i=wy(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Lc(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())}));return()=>{i(),r(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=$S,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function _2(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function ZJ(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class eQ extends uh{constructor(t){super(t),this.removeGroupControls=Vc,this.removeListeners=Vc,this.controls=new QJ(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vc}unmount(){this.removeGroupControls(),this.removeListeners()}}const QN=e=>(t,r)=>{e&&sa.postRender(()=>e(t,r))};class tQ extends uh{constructor(){super(...arguments),this.removePointerDownListener=Vc}onPointerDown(t){this.session=new wR(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vR(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:QN(t),onStart:QN(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&sa.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=Kx(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const dw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ZN(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const M1={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(sn.test(e))e=parseFloat(e);else return e;const r=ZN(e,t.target.x),n=ZN(e,t.target.y);return`${r}% ${n}%`}},rQ={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=eh.parse(e);if(s.length>5)return n;const a=eh.createTransformer(e),i=typeof s[0]!="number"?1:0,o=r.x.scale*t.x,c=r.y.scale*t.y;s[0+i]/=o,s[1+i]/=c;const u=ma(o,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let W_=!1;class nQ extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;TY(sQ),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),W_&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),dw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:i}=n;return i&&(i.isPresent=a,W_=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||sa.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Yk.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;W_=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function _R(e){const[t,r]=HI(),n=S.useContext(Ek);return l.jsx(nQ,{...e,layoutGroup:n,switchLayoutGroup:S.useContext(rR),isPresent:t,safeToRemove:r})}const sQ={borderRadius:{...M1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:M1,borderTopRightRadius:M1,borderBottomLeftRadius:M1,borderBottomRightRadius:M1,boxShadow:rQ};function aQ(e,t,r){const n=Io(e)?e:xp(e);return n.start(o8("",n,t,r)),n.animation}const iQ=(e,t)=>e.depth-t.depth;class oQ{constructor(){this.children=[],this.isDirty=!1}add(t){Pk(this.children,t),this.isDirty=!0}remove(t){Mk(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(iQ),this.isDirty=!1,this.children.forEach(t)}}function lQ(e,t){const r=bl.now(),n=({timestamp:s})=>{const a=s-r;a>=t&&(Zf(n),e(a-t))};return sa.setup(n,!0),()=>Zf(n)}const SR=["TopLeft","TopRight","BottomLeft","BottomRight"],cQ=SR.length,eE=e=>typeof e=="string"?parseFloat(e):e,tE=e=>typeof e=="number"||sn.test(e);function uQ(e,t,r,n,s,a){s?(e.opacity=ma(0,r.opacity??1,dQ(n)),e.opacityExit=ma(t.opacity??1,0,fQ(n))):a&&(e.opacity=ma(t.opacity??1,r.opacity??1,n));for(let i=0;i<cQ;i++){const o=`border${SR[i]}Radius`;let c=rE(t,o),u=rE(r,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||tE(c)===tE(u)?(e[o]=Math.max(ma(eE(c),eE(u),n),0),(wd.test(u)||wd.test(c))&&(e[o]+="%")):e[o]=u}(t.rotate||r.rotate)&&(e.rotate=ma(t.rotate||0,r.rotate||0,n))}function rE(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const dQ=kR(0,.5,uI),fQ=kR(.5,.95,Vc);function kR(e,t,r){return n=>n<e?0:n>t?1:r(gy(e,t,n))}function nE(e,t){e.min=t.min,e.max=t.max}function Pc(e,t){nE(e.x,t.x),nE(e.y,t.y)}function sE(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function aE(e,t,r,n,s){return e-=t,e=Nw(e,1/r,n),s!==void 0&&(e=Nw(e,1/s,n)),e}function hQ(e,t=0,r=1,n=.5,s,a=e,i=e){if(wd.test(t)&&(t=parseFloat(t),t=ma(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=ma(a.min,a.max,n);e===a&&(o-=t),e.min=aE(e.min,t,r,o,s),e.max=aE(e.max,t,r,o,s)}function iE(e,t,[r,n,s],a,i){hQ(e,t[r],t[n],t[s],t.scale,a,i)}const mQ=["x","scaleX","originX"],gQ=["y","scaleY","originY"];function oE(e,t,r,n){iE(e.x,t,mQ,r?r.x:void 0,n?n.x:void 0),iE(e.y,t,gQ,r?r.y:void 0,n?n.y:void 0)}function lE(e){return e.translate===0&&e.scale===1}function TR(e){return lE(e.x)&&lE(e.y)}function cE(e,t){return e.min===t.min&&e.max===t.max}function pQ(e,t){return cE(e.x,t.x)&&cE(e.y,t.y)}function uE(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function CR(e,t){return uE(e.x,t.x)&&uE(e.y,t.y)}function dE(e){return tl(e.x)/tl(e.y)}function fE(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class xQ{constructor(){this.members=[]}add(t){Pk(this.members,t),t.scheduleRender()}remove(t){if(Mk(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yQ(e,t,r){let n="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=r?.z||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:m,skewX:p,skewY:x}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),m&&(n+=`rotateY(${m}deg) `),p&&(n+=`skewX(${p}deg) `),x&&(n+=`skewY(${x}deg) `)}const o=e.x.scale*t.x,c=e.y.scale*t.y;return(o!==1||c!==1)&&(n+=`scale(${o}, ${c})`),n||"none"}const H_=["","X","Y","Z"],vQ=1e3;let wQ=0;function G_(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function NR(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=fR(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",sa,!(s||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&NR(n)}function ER({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t?.()){this.id=wQ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(SQ),this.nodes.forEach(NQ),this.nodes.forEach(EQ),this.nodes.forEach(kQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new oQ)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Dk),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const c=this.eventHandlers.get(i);c&&c.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=WI(i)&&!fY(i),this.instance=i;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const m=()=>this.root.updateBlockedByResize=!1;sa.read(()=>{f=window.innerWidth}),e(i,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,d&&d(),d=lQ(m,250),dw.hasAnimatedSinceResize&&(dw.hasAnimatedSinceResize=!1,this.nodes.forEach(gE)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||FQ,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=u.getProps(),C=!this.targetLayout||!CR(this.targetLayout,p),k=!f&&m;if(this.options.layoutRoot||this.resumeFrom||k||f&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...Kk(x,"layout"),onPlay:w,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,k)}else f||gE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(AQ),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&NR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hE);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mE);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(CQ),this.nodes.forEach(bQ),this.nodes.forEach(_Q)):this.nodes.forEach(mE),this.clearAllSnapshots();const o=bl.now();no.delta=_0(0,1e3/60,o-no.timestamp),no.timestamp=o,no.isProcessing=!0,F_.update.process(no),F_.preRender.process(no),F_.render.process(no),no.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Yk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(TQ),this.sharedNodes.forEach(jQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!tl(this.snapshot.measuredBox.x)&&!tl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qa(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!TR(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||Kh(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return i&&(c=this.removeTransform(c)),OQ(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return qa();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(DQ))){const{scroll:u}=this.root;u&&(Xg(o.x,u.offset.x),Xg(o.y,u.offset.y))}return o}removeElementScroll(i){const o=qa();if(Pc(o,i),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&Pc(o,i),Xg(o.x,d.offset.x),Xg(o.y,d.offset.y))}return o}applyTransform(i,o=!1){const c=qa();Pc(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Yg(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Kh(d.latestValues)&&Yg(c,d.latestValues)}return Kh(this.latestValues)&&Yg(c,this.latestValues),c}removeTransform(i){const o=qa();Pc(o,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Kh(u.latestValues))continue;OS(u.latestValues)&&u.updateSnapshot();const d=qa(),f=u.measurePageBox();Pc(d,f),oE(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Kh(this.latestValues)&&oE(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==no.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=no.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qa(),this.relativeTargetOrigin=qa(),Yx(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Pc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qa(),this.targetWithTransforms=qa()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Pc(this.target,this.layout.layoutBox),iR(this.target,this.targetDelta)):Pc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qa(),this.relativeTargetOrigin=qa(),Yx(this.relativeTargetOrigin,this.target,m.target),Pc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||OS(this.parent.latestValues)||aR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===no.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Pc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;ZY(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=qa());const{target:p}=i;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sE(this.prevProjectionDelta.x,this.projectionDelta.x),sE(this.prevProjectionDelta.y,this.projectionDelta.y)),Xx(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!fE(this.projectionDelta.x,this.prevProjectionDelta.x)||!fE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Jg(),this.projectionDelta=Jg(),this.projectionDeltaWithTransform=Jg()}setAnimationOrigin(i,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Jg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=qa(),p=c?c.source:void 0,x=this.layout?this.layout.source:void 0,w=p!==x,v=this.getStack(),C=!v||v.members.length<=1,k=!!(w&&!C&&this.options.crossfade===!0&&!this.path.some(MQ));this.animationProgress=0;let b;this.mixTargetDelta=j=>{const A=j/1e3;pE(f.x,i.x,A),pE(f.y,i.y,A),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yx(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PQ(this.relativeTarget,this.relativeTargetOrigin,m,A),b&&pQ(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=qa()),Pc(b,this.relativeTarget)),w&&(this.animationValues=d,uQ(d,u,this.latestValues,A,k,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Zf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sa.update(()=>{dw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=xp(0)),this.currentAnimation=aQ(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vQ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=i;if(!(!o||!c||!u)){if(this!==i&&this.layout&&u&&AR(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||qa();const f=tl(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+f;const m=tl(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+m}Pc(o,c),Yg(o,d),Xx(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new xQ),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&G_("z",i,u,this.animationValues);for(let d=0;d<H_.length;d++)G_(`rotate${H_[d]}`,i,u,this.animationValues),G_(`skew${H_[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=uw(o?.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=uw(o?.pointerEvents)||""),this.hasProjected&&!Kh(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=yQ(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),i.transform=f;const{x:m,y:p}=this.projectionDelta;i.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in vy){if(d[x]===void 0)continue;const{correct:w,applyTo:v,isCSSVariable:C}=vy[x],k=f==="none"?d[x]:w(d[x],u);if(v){const b=v.length;for(let j=0;j<b;j++)i[v[j]]=k}else C?this.options.visualElement.renderState.vars[x]=k:i[x]=k}this.options.layoutId&&(i.pointerEvents=u===this?uw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(hE),this.root.sharedNodes.clear()}}}function bQ(e){e.updateLayout()}function _Q(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?Lc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],m=tl(f);f.min=r[d].min,f.max=f.min+m}):AR(s,t.layoutBox,r)&&Lc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],m=tl(r[d]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+m)});const i=Jg();Xx(i,r,t.layoutBox);const o=Jg();a?Xx(o,e.applyTransform(n,!0),t.measuredBox):Xx(o,r,t.layoutBox);const c=!TR(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:m}=d;if(f&&m){const p=qa();Yx(p,t.layoutBox,f.layoutBox);const x=qa();Yx(x,r,m.layoutBox),CR(p,x)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=p,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function SQ(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function kQ(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function TQ(e){e.clearSnapshot()}function hE(e){e.clearMeasurements()}function mE(e){e.isLayoutDirty=!1}function CQ(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function gE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function NQ(e){e.resolveTargetDelta()}function EQ(e){e.calcProjection()}function AQ(e){e.resetSkewAndRotation()}function jQ(e){e.removeLeadSnapshot()}function pE(e,t,r){e.translate=ma(t.translate,0,r),e.scale=ma(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function xE(e,t,r,n){e.min=ma(t.min,r.min,n),e.max=ma(t.max,r.max,n)}function PQ(e,t,r,n){xE(e.x,t.x,r.x,n),xE(e.y,t.y,r.y,n)}function MQ(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const FQ={duration:.45,ease:[.4,0,.1,1]},yE=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),vE=yE("applewebkit/")&&!yE("chrome/")?Math.round:Vc;function wE(e){e.min=vE(e.min),e.max=vE(e.max)}function OQ(e){wE(e.x),wE(e.y)}function AR(e,t,r){return e==="position"||e==="preserve-aspect"&&!$J(dE(t),dE(r),.2)}function DQ(e){return e!==e.root&&e.scroll?.wasRoot}const IQ=ER({attachResizeListener:(e,t)=>wy(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),V_={current:void 0},jR=ER({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!V_.current){const e=new IQ({});e.mount(window),e.setOptions({layoutScroll:!0}),V_.current=e}return V_.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),RQ={pan:{Feature:tQ},drag:{Feature:eQ,ProjectionNode:jR,MeasureLayout:_R}};function bE(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&sa.postRender(()=>a(t,ov(t)))}class LQ extends uh{mount(){const{current:t}=this.node;t&&(this.unmount=oY(t,(r,n)=>(bE(this.node,n,"Start"),s=>bE(this.node,s,"End"))))}unmount(){}}class BQ extends uh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sv(wy(this.node.current,"focus",()=>this.onFocus()),wy(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function _E(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&sa.postRender(()=>a(t,ov(t)))}class $Q extends uh{mount(){const{current:t}=this.node;t&&(this.unmount=dY(t,(r,n)=>(_E(this.node,n,"Start"),(s,{success:a})=>_E(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const zS=new WeakMap,q_=new WeakMap,zQ=e=>{const t=zS.get(e.target);t&&t(e)},UQ=e=>{e.forEach(zQ)};function WQ({root:e,...t}){const r=e||document;q_.has(r)||q_.set(r,{});const n=q_.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(UQ,{root:e,...t})),n[s]}function HQ(e,t,r){const n=WQ(t);return zS.set(e,r),n.observe(e),()=>{zS.delete(e),n.unobserve(e)}}const GQ={some:0,all:1};class VQ extends uh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=t,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:GQ[s]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),m=u?d:f;m&&m(c)};return HQ(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(qQ(t,r))&&this.startObserver()}unmount(){}}function qQ({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const KQ={inView:{Feature:VQ},tap:{Feature:$Q},focus:{Feature:BQ},hover:{Feature:LQ}},XQ={layout:{ProjectionNode:jR,MeasureLayout:_R}},YQ={...OJ,...KQ,...RQ,...XQ},Nt=YY(YQ,cJ),xt=({children:e,variant:t="primary",size:r="md",onClick:n,disabled:s=!1,className:a="",...i})=>{const o="font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer",c={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",outline:"bg-transparent text-blue-600 border-2 border-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-700 focus:ring-gray-500"},u={xs:"px-2 py-1 text-xs",sm:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm",md:"px-3 py-1.5 text-sm sm:px-4 sm:py-2 sm:text-base",lg:"px-4 py-2 text-base sm:px-6 sm:py-3 sm:text-lg",icon:"p-0 flex items-center justify-center"},d=s?"opacity-50 cursor-not-allowed":"";return l.jsx(Nt.button,{className:`${o} ${c[t]} ${u[r]} ${d} ${a}`,onClick:n,disabled:s,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},...i,children:e})},pn=({size:e="md",color:t="blue",className:r=""})=>{const n={sm:"w-4 h-4",small:"w-4 h-4",md:"w-6 h-6",medium:"w-6 h-6",lg:"w-8 h-8",large:"w-8 h-8",xl:"w-12 h-12"},s={blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",gray:"border-gray-600"};return l.jsx(Nt.div,{className:`
        inline-block border-2 border-gray-300 border-t-current rounded-full animate-spin
        ${n[e]} ${s[t]} ${r}
      `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},Ou=({type:e="info",message:t="",duration:r=3e3,closable:n=!0,onClose:s,className:a="",...i})=>{const[o,c]=S.useState(!0),[u,d]=S.useState(!1),f=S.useRef(null),m=S.useRef(null);S.useEffect(()=>{if(r>0)return m.current=setTimeout(()=>{p()},r),()=>{m.current&&clearTimeout(m.current)}},[r]);const p=S.useCallback(()=>{u||(d(!0),m.current&&clearTimeout(m.current),setTimeout(()=>{c(!1),s&&s()},300))},[u,s]),x=S.useCallback(C=>{C.key==="Escape"&&p()},[p]);if(!o)return null;const w=["notification",`notification-${e}`,o?"notification-visible":"",u?"notification-exiting":"",a].filter(Boolean).join(" "),v=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{ref:f,className:w,role:"alert","aria-live":"polite",onKeyDown:x,tabIndex:-1,...i,children:l.jsxs("div",{className:"notification-content",children:[l.jsx("div",{className:"notification-icon","aria-hidden":"true",children:v()}),l.jsx("div",{className:"notification-body",children:l.jsx("div",{className:"notification-message",children:t})}),n&&l.jsx("button",{className:"notification-close",onClick:p,type:"button","aria-label":"Close notification",children:""})]})})},_i=()=>{const[e,t]=S.useState([]),r=S.useCallback((a,i="info",o={})=>{const c=Date.now()+Math.random(),u={id:c,message:a,type:i,...o};return t(d=>[...d,u]),o.duration!==0&&setTimeout(()=>{n(c)},o.duration||3e3),c},[]),n=S.useCallback(a=>{t(i=>i.filter(o=>o.id!==a))},[]),s=S.useCallback(()=>{t([])},[]);return{notifications:e,showNotification:r,removeNotification:n,clearAllNotifications:s}},Zl=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(null),[s,a]=S.useState(null),i=S.useRef(null);S.useRef(new Map);const o=S.useRef(0),c=3,u=1e3,d=S.useCallback(()=>{i.current&&(i.current.abort(),i.current=null)},[]);S.useEffect(()=>d,[d]);const f=S.useCallback(async(z,K={})=>{try{t(!0),n(null),i.current=new AbortController;const te=K.method||"POST",se={method:te,headers:{"Content-Type":"application/json",...K.headers},signal:i.current.signal,...K};te!=="GET"&&te!=="HEAD"&&(se.body=JSON.stringify(K.data||{})),console.log(`[API] Making request to: ${z}`,se);const pe=await fetch(z,se);if(!pe.ok)throw new Error(`HTTP error! status: ${pe.status}`);const oe=await pe.json();if(console.log("[API] Response received:",oe),oe.success)return a(oe),o.current=0,oe;throw new Error(oe.error||oe.message||"Request failed")}catch(te){if(te.name==="AbortError")return console.log("[API] Request was aborted"),null;if(console.error("[API] Request failed:",te),n(te.message||"Request failed"),o.current<c){o.current++;const se=u*Math.pow(2,o.current-1);return console.log(`[API] Retrying in ${se}ms (attempt ${o.current}/${c})`),await new Promise(pe=>setTimeout(pe,se)),f(z,K)}throw te}finally{t(!1),i.current=null}},[]),m=S.useCallback(async(z,K={})=>{try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())throw new Error("No valid authentication token found");return await window.tokenManager.makeAuthenticatedRequest(z,K)}catch(te){throw console.error("[API] Authenticated request failed:",te),te}},[]),p=S.useCallback(async(z,K)=>{try{const te=`/.netlify/functions/get-test-questions?test_type=${z}&test_id=${K}`;console.log(`[API] Getting test info for ${z}_${K}`);const pe=await(await m(te)).json();if(pe.success)return console.log("[API] Test info retrieved successfully:",pe.test_info),pe.test_info;throw new Error(pe.error||"Failed to get test info")}catch(te){throw console.error("[API] Failed to get test info:",te),te}},[m]),x=S.useCallback(async(z,K)=>{try{const te=`/.netlify/functions/get-test-questions?test_type=${z}&test_id=${K}`;console.log(`[API] Getting test questions for ${z}_${K}`);const pe=await(await m(te)).json();if(pe.success)return console.log("[API] Test questions retrieved successfully:",pe.questions),pe.questions;throw new Error(pe.error||"Failed to get test questions")}catch(te){throw console.error("[API] Failed to get test questions:",te),te}},[m]),w=S.useCallback(async()=>{try{const z="/.netlify/functions/get-student-active-tests";console.log("[API] Loading student active tests");const te=await(await m(z)).json();if(te.success)return console.log("[API] Student active tests loaded successfully:",te.tests),te.tests;throw new Error(te.error||"Failed to load student active tests")}catch(z){throw console.error("[API] Failed to load student active tests:",z),z}},[m]),v=S.useCallback(async(z,K,te)=>{try{let se;switch(z){case"true_false":se="/.netlify/functions/submit-true-false-test";break;case"multiple_choice":se="/.netlify/functions/submit-multiple-choice-test";break;case"input":se="/.netlify/functions/submit-input-test";break;case"matching_type":se="/.netlify/functions/submit-matching-type-test";break;case"speaking":se="/.netlify/functions/submit-speaking-test";break;default:throw new Error(`Unknown test type: ${z}`)}console.log(`[API] Submitting ${z} test:`,te);const oe=await(await m(se,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(te)})).json();if(oe.success)return console.log("[API] Test submitted successfully:",oe),oe;throw new Error(oe.error||"Failed to submit test")}catch(se){throw console.error("[API] Failed to submit test:",se),se}},[m]),C=S.useCallback(async z=>{try{const K="/.netlify/functions/save-multiple-choice-test";console.log("[API] Saving multiple choice test:",z);const se=await(await m(K,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(se.success)return console.log("[API] Multiple choice test saved successfully:",se),se;throw new Error(se.error||"Failed to save multiple choice test")}catch(K){throw console.error("[API] Failed to save multiple choice test:",K),K}},[m]),k=S.useCallback(async z=>{try{const K="/.netlify/functions/save-true-false-test";console.log("[API] Saving true/false test:",z);const se=await(await m(K,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(se.success)return console.log("[API] True/false test saved successfully:",se),se;throw new Error(se.error||"Failed to save true/false test")}catch(K){throw console.error("[API] Failed to save true/false test:",K),K}},[m]),b=S.useCallback(async z=>{try{const K="/.netlify/functions/save-input-test";console.log("[API] Saving input test:",z);const se=await(await m(K,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(se.success)return console.log("[API] Input test saved successfully:",se),se;throw new Error(se.error||"Failed to save input test")}catch(K){throw console.error("[API] Failed to save input test:",K),K}},[m]),j=S.useCallback(async z=>{try{const K="/.netlify/functions/assign-test";console.log("[API] Assigning test to classes:",z);const se=await(await m(K,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(se.success)return console.log("[API] Test assigned successfully:",se),se;throw new Error(se.error||"Failed to assign test")}catch(K){throw console.error("[API] Failed to assign test:",K),K}},[m]),A=S.useCallback(async()=>{try{const z="/.netlify/functions/get-teacher-active-tests";console.log("[API] Loading teacher active tests");const te=await(await m(z)).json();if(te.success)return console.log("[API] Teacher active tests loaded successfully:",te.tests),te.tests;throw new Error(te.error||"Failed to load teacher active tests")}catch(z){throw console.error("[API] Failed to load teacher active tests:",z),z}},[m]),F=S.useCallback(async()=>{try{const z="/.netlify/functions/get-all-users";console.log("[API] Getting all users");const te=await(await m(z)).json();if(te.success)return console.log("[API] All users loaded successfully:",te.users),te.users;throw new Error(te.error||"Failed to get all users")}catch(z){throw console.error("[API] Failed to get all users:",z),z}},[m]),D=S.useCallback(async()=>{try{const z="/.netlify/functions/get-all-teachers";console.log("[API] Getting all teachers");const te=await(await m(z)).json();if(te.success)return console.log("[API] All teachers loaded successfully:",te.teachers),te.teachers;throw new Error(te.error||"Failed to get all teachers")}catch(z){throw console.error("[API] Failed to get all teachers:",z),z}},[m]),M=S.useCallback(async()=>{try{const z="/.netlify/functions/get-all-subjects";console.log("[API] Getting all subjects");const te=await(await m(z)).json();if(te.success)return console.log("[API] All subjects loaded successfully:",te.subjects),te.subjects;throw new Error(te.error||"Failed to get all subjects")}catch(z){throw console.error("[API] Failed to get all subjects:",z),z}},[m]),O=S.useCallback(()=>{n(null)},[]),L=S.useCallback(()=>{a(null)},[]),W=S.useCallback(()=>{t(!1),n(null),a(null),o.current=0,d()},[d]),re=S.useCallback(async(z,K={})=>{const se=await(await m(z,{...K,method:"GET"})).json();if(se.success)return se;throw new Error(se.error||"Request failed")},[m]),ie=S.useCallback(async(z,K,te={})=>{const pe=await(await m(z,{...te,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})).json();if(pe.success)return pe;throw new Error(pe.error||"Request failed")},[m]),xe=S.useCallback(async(z,K,te={})=>{const pe=await(await m(z,{...te,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(K)})).json();if(pe.success)return pe;throw new Error(pe.error||"Request failed")},[m]),de=S.useCallback(async(z,K={})=>{const se=await(await m(z,{...K,method:"DELETE"})).json();if(se.success)return se;throw new Error(se.error||"Request failed")},[m]),fe=S.useCallback(async z=>{try{const K="/.netlify/functions/submit-speaking-test";console.log("[API] Submitting speaking test:",z);const se=await(await m(K,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(se.success)return console.log("[API] Speaking test submitted successfully:",se),se;throw new Error(se.error||"Failed to submit speaking test")}catch(K){throw console.error("[API] Failed to submit speaking test:",K),K}},[m]),H=S.useCallback(async z=>{try{const K=`/.netlify/functions/get-speaking-test-new?action=test&test_id=${z}`;console.log("[API] Getting speaking test:",z);const se=await(await m(K,{method:"GET"})).json();if(se.success)return console.log("[API] Speaking test loaded successfully:",se),se;throw new Error(se.error||"Failed to load speaking test")}catch(K){throw console.error("[API] Failed to load speaking test:",K),K}},[m]),Q=S.useCallback(async z=>{try{const K=`/.netlify/functions/get-speaking-test-new?action=questions&test_id=${z}`;console.log("[API] Getting speaking test questions:",z);const se=await(await m(K,{method:"GET"})).json();if(se.success)return console.log("[API] Speaking test questions loaded successfully:",se),se;throw new Error(se.error||"Failed to load speaking test questions")}catch(K){throw console.error("[API] Failed to load speaking test questions:",K),K}},[m]),U=S.useCallback(async z=>{try{const K="/.netlify/functions/upload-speaking-audio";console.log("[API] Uploading speaking audio");const se=await(await m(K,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(se.success)return console.log("[API] Audio uploaded successfully:",se),se;throw new Error(se.error||"Failed to upload audio")}catch(K){throw console.error("[API] Failed to upload audio:",K),K}},[m]),V=S.useCallback(async z=>{try{const K=`/.netlify/functions/get-speaking-test-new?action=audio&file_path=${encodeURIComponent(z)}`;console.log("[API] Getting speaking audio:",z);const se=await(await m(K,{method:"GET"})).json();if(se.success)return console.log("[API] Audio URL retrieved successfully:",se),se;throw new Error(se.error||"Failed to get audio")}catch(K){throw console.error("[API] Failed to get audio:",K),K}},[m]),X=S.useCallback(async(z,K)=>{try{const te=`/.netlify/functions/check-test-completion?test_id=${z}&test_type=${K}`;console.log("[API] Checking test completion:",z,K);const pe=await(await m(te,{method:"GET"})).json();if(pe.success)return console.log("[API] Test completion status:",pe),pe;throw new Error(pe.error||"Failed to check test completion")}catch(te){throw console.error("[API] Failed to check test completion:",te),te}},[m]);return{loading:e,error:r,data:s,sendRequest:f,makeAuthenticatedRequest:m,get:re,post:ie,put:xe,delete:de,getTestInfo:p,getTestQuestions:x,loadStudentActiveTests:w,submitTest:v,submitSpeakingTest:fe,getSpeakingTest:H,getSpeakingTestQuestions:Q,uploadSpeakingAudio:U,getSpeakingAudio:V,checkTestCompletion:X,saveMultipleChoiceTest:C,saveTrueFalseTest:k,saveInputTest:b,assignTestToClasses:j,loadTeacherActiveTests:A,getAllUsers:F,getAllTeachers:D,getAllSubjects:M,clearError:O,clearData:L,reset:W,cleanup:d}},JQ="modulepreload",QQ=function(e){return"/"+e},SE={},co=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};var i=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=u(r.map(d=>{if(d=QQ(d),d in SE)return;SE[d]=!0;const f=d.endsWith(".css"),m=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":JQ,f||(p.as="script"),p.crossOrigin="",p.href=d,c&&p.setAttribute("nonce",c),document.head.appendChild(p),f)return new Promise((x,w)=>{p.addEventListener("load",x),p.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})};var fw={exports:{}},F1={},K_={},X_={},kE;function Mn(){return kE||(kE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof _w<"u"?_w:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:r(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(X_)),X_}var Y_={},TE;function Fa(){return TE||(TE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Mn();class r{constructor(j=[1,0,0,1,0,0]){this.dirty=!1,this.m=j&&j.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(j){j.m[0]=this.m[0],j.m[1]=this.m[1],j.m[2]=this.m[2],j.m[3]=this.m[3],j.m[4]=this.m[4],j.m[5]=this.m[5]}point(j){const A=this.m;return{x:A[0]*j.x+A[2]*j.y+A[4],y:A[1]*j.x+A[3]*j.y+A[5]}}translate(j,A){return this.m[4]+=this.m[0]*j+this.m[2]*A,this.m[5]+=this.m[1]*j+this.m[3]*A,this}scale(j,A){return this.m[0]*=j,this.m[1]*=j,this.m[2]*=A,this.m[3]*=A,this}rotate(j){const A=Math.cos(j),F=Math.sin(j),D=this.m[0]*A+this.m[2]*F,M=this.m[1]*A+this.m[3]*F,O=this.m[0]*-F+this.m[2]*A,L=this.m[1]*-F+this.m[3]*A;return this.m[0]=D,this.m[1]=M,this.m[2]=O,this.m[3]=L,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(j,A){const F=this.m[0]+this.m[2]*A,D=this.m[1]+this.m[3]*A,M=this.m[2]+this.m[0]*j,O=this.m[3]+this.m[1]*j;return this.m[0]=F,this.m[1]=D,this.m[2]=M,this.m[3]=O,this}multiply(j){const A=this.m[0]*j.m[0]+this.m[2]*j.m[1],F=this.m[1]*j.m[0]+this.m[3]*j.m[1],D=this.m[0]*j.m[2]+this.m[2]*j.m[3],M=this.m[1]*j.m[2]+this.m[3]*j.m[3],O=this.m[0]*j.m[4]+this.m[2]*j.m[5]+this.m[4],L=this.m[1]*j.m[4]+this.m[3]*j.m[5]+this.m[5];return this.m[0]=A,this.m[1]=F,this.m[2]=D,this.m[3]=M,this.m[4]=O,this.m[5]=L,this}invert(){const j=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),A=this.m[3]*j,F=-this.m[1]*j,D=-this.m[2]*j,M=this.m[0]*j,O=j*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),L=j*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=A,this.m[1]=F,this.m[2]=D,this.m[3]=M,this.m[4]=O,this.m[5]=L,this}getMatrix(){return this.m}decompose(){const j=this.m[0],A=this.m[1],F=this.m[2],D=this.m[3],M=this.m[4],O=this.m[5],L=j*D-A*F,W={x:M,y:O,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(j!=0||A!=0){const re=Math.sqrt(j*j+A*A);W.rotation=A>0?Math.acos(j/re):-Math.acos(j/re),W.scaleX=re,W.scaleY=L/re,W.skewX=(j*F+A*D)/L,W.skewY=0}else if(F!=0||D!=0){const re=Math.sqrt(F*F+D*D);W.rotation=Math.PI/2-(D>0?Math.acos(-F/re):-Math.acos(F/re)),W.scaleX=L/re,W.scaleY=re,W.skewX=0,W.skewY=(j*F+A*D)/L}return W.rotation=e.Util._getRotation(W.rotation),W}}e.Transform=r;const n="[object Array]",s="[object Number]",a="[object String]",i="[object Boolean]",o=Math.PI/180,c=180/Math.PI,u="#",d="",f="0",m="Konva warning: ",p="Konva error: ",x="rgb(",w={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let C=[];const k=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(b){setTimeout(b,60)};e.Util={_isElement(b){return!!(b&&b.nodeType==1)},_isFunction(b){return!!(b&&b.constructor&&b.call&&b.apply)},_isPlainObject(b){return!!b&&b.constructor===Object},_isArray(b){return Object.prototype.toString.call(b)===n},_isNumber(b){return Object.prototype.toString.call(b)===s&&!isNaN(b)&&isFinite(b)},_isString(b){return Object.prototype.toString.call(b)===a},_isBoolean(b){return Object.prototype.toString.call(b)===i},isObject(b){return b instanceof Object},isValidSelector(b){if(typeof b!="string")return!1;const j=b[0];return j==="#"||j==="."||j===j.toUpperCase()},_sign(b){return b===0||b>0?1:-1},requestAnimFrame(b){C.push(b),C.length===1&&k(function(){const j=C;C=[],j.forEach(function(A){A()})})},createCanvasElement(){const b=document.createElement("canvas");try{b.style=b.style||{}}catch{}return b},createImageElement(){return document.createElement("img")},_isInDocument(b){for(;b=b.parentNode;)if(b==document)return!0;return!1},_urlToImage(b,j){const A=e.Util.createImageElement();A.onload=function(){j(A)},A.src=b},_rgbToHex(b,j,A){return((1<<24)+(b<<16)+(j<<8)+A).toString(16).slice(1)},_hexToRgb(b){b=b.replace(u,d);const j=parseInt(b,16);return{r:j>>16&255,g:j>>8&255,b:j&255}},getRandomColor(){let b=(Math.random()*16777215<<0).toString(16);for(;b.length<6;)b=f+b;return u+b},getRGB(b){let j;return b in w?(j=w[b],{r:j[0],g:j[1],b:j[2]}):b[0]===u?this._hexToRgb(b.substring(1)):b.substr(0,4)===x?(j=v.exec(b.replace(/ /g,"")),{r:parseInt(j[1],10),g:parseInt(j[2],10),b:parseInt(j[3],10)}):{r:0,g:0,b:0}},colorToRGBA(b){return b=b||"black",e.Util._namedColorToRBA(b)||e.Util._hex3ColorToRGBA(b)||e.Util._hex4ColorToRGBA(b)||e.Util._hex6ColorToRGBA(b)||e.Util._hex8ColorToRGBA(b)||e.Util._rgbColorToRGBA(b)||e.Util._rgbaColorToRGBA(b)||e.Util._hslColorToRGBA(b)},_namedColorToRBA(b){const j=w[b.toLowerCase()];return j?{r:j[0],g:j[1],b:j[2],a:1}:null},_rgbColorToRGBA(b){if(b.indexOf("rgb(")===0){b=b.match(/rgb\(([^)]+)\)/)[1];const j=b.split(/ *, */).map(Number);return{r:j[0],g:j[1],b:j[2],a:1}}},_rgbaColorToRGBA(b){if(b.indexOf("rgba(")===0){b=b.match(/rgba\(([^)]+)\)/)[1];const j=b.split(/ *, */).map((A,F)=>A.slice(-1)==="%"?F===3?parseInt(A)/100:parseInt(A)/100*255:Number(A));return{r:j[0],g:j[1],b:j[2],a:j[3]}}},_hex8ColorToRGBA(b){if(b[0]==="#"&&b.length===9)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:parseInt(b.slice(7,9),16)/255}},_hex6ColorToRGBA(b){if(b[0]==="#"&&b.length===7)return{r:parseInt(b.slice(1,3),16),g:parseInt(b.slice(3,5),16),b:parseInt(b.slice(5,7),16),a:1}},_hex4ColorToRGBA(b){if(b[0]==="#"&&b.length===5)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:parseInt(b[4]+b[4],16)/255}},_hex3ColorToRGBA(b){if(b[0]==="#"&&b.length===4)return{r:parseInt(b[1]+b[1],16),g:parseInt(b[2]+b[2],16),b:parseInt(b[3]+b[3],16),a:1}},_hslColorToRGBA(b){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(b)){const[j,...A]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b),F=Number(A[0])/360,D=Number(A[1])/100,M=Number(A[2])/100;let O,L,W;if(D===0)return W=M*255,{r:Math.round(W),g:Math.round(W),b:Math.round(W),a:1};M<.5?O=M*(1+D):O=M+D-M*D;const re=2*M-O,ie=[0,0,0];for(let xe=0;xe<3;xe++)L=F+1/3*-(xe-1),L<0&&L++,L>1&&L--,6*L<1?W=re+(O-re)*6*L:2*L<1?W=O:3*L<2?W=re+(O-re)*(2/3-L)*6:W=re,ie[xe]=W*255;return{r:Math.round(ie[0]),g:Math.round(ie[1]),b:Math.round(ie[2]),a:1}}},haveIntersection(b,j){return!(j.x>b.x+b.width||j.x+j.width<b.x||j.y>b.y+b.height||j.y+j.height<b.y)},cloneObject(b){const j={};for(const A in b)this._isPlainObject(b[A])?j[A]=this.cloneObject(b[A]):this._isArray(b[A])?j[A]=this.cloneArray(b[A]):j[A]=b[A];return j},cloneArray(b){return b.slice(0)},degToRad(b){return b*o},radToDeg(b){return b*c},_degToRad(b){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(b)},_radToDeg(b){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(b)},_getRotation(b){return t.Konva.angleDeg?e.Util.radToDeg(b):b},_capitalize(b){return b.charAt(0).toUpperCase()+b.slice(1)},throw(b){throw new Error(p+b)},error(b){console.error(p+b)},warn(b){t.Konva.showWarnings&&console.warn(m+b)},each(b,j){for(const A in b)j(A,b[A])},_inRange(b,j,A){return j<=b&&b<A},_getProjectionToSegment(b,j,A,F,D,M){let O,L,W;const re=(b-A)*(b-A)+(j-F)*(j-F);if(re==0)O=b,L=j,W=(D-A)*(D-A)+(M-F)*(M-F);else{const ie=((D-b)*(A-b)+(M-j)*(F-j))/re;ie<0?(O=b,L=j,W=(b-D)*(b-D)+(j-M)*(j-M)):ie>1?(O=A,L=F,W=(A-D)*(A-D)+(F-M)*(F-M)):(O=b+ie*(A-b),L=j+ie*(F-j),W=(O-D)*(O-D)+(L-M)*(L-M))}return[O,L,W]},_getProjectionToLine(b,j,A){const F=e.Util.cloneObject(b);let D=Number.MAX_VALUE;return j.forEach(function(M,O){if(!A&&O===j.length-1)return;const L=j[(O+1)%j.length],W=e.Util._getProjectionToSegment(M.x,M.y,L.x,L.y,b.x,b.y),re=W[0],ie=W[1],xe=W[2];xe<D&&(F.x=re,F.y=ie,D=xe)}),F},_prepareArrayForTween(b,j,A){const F=[],D=[];if(b.length>j.length){const O=j;j=b,b=O}for(let O=0;O<b.length;O+=2)F.push({x:b[O],y:b[O+1]});for(let O=0;O<j.length;O+=2)D.push({x:j[O],y:j[O+1]});const M=[];return D.forEach(function(O){const L=e.Util._getProjectionToLine(O,F,A);M.push(L.x),M.push(L.y)}),M},_prepareToStringify(b){let j;b.visitedByCircularReferenceRemoval=!0;for(const A in b)if(b.hasOwnProperty(A)&&b[A]&&typeof b[A]=="object"){if(j=Object.getOwnPropertyDescriptor(b,A),b[A].visitedByCircularReferenceRemoval||e.Util._isElement(b[A]))if(j.configurable)delete b[A];else return null;else if(e.Util._prepareToStringify(b[A])===null)if(j.configurable)delete b[A];else return null}return delete b.visitedByCircularReferenceRemoval,b},_assign(b,j){for(const A in j)b[A]=j[A];return b},_getFirstPointerId(b){return b.touches?b.changedTouches[0].identifier:b.pointerId||999},releaseCanvas(...b){t.Konva.releaseCanvasOnDestroy&&b.forEach(j=>{j.width=0,j.height=0})},drawRoundedRectPath(b,j,A,F){let D=0,M=0,O=0,L=0;typeof F=="number"?D=M=O=L=Math.min(F,j/2,A/2):(D=Math.min(F[0]||0,j/2,A/2),M=Math.min(F[1]||0,j/2,A/2),L=Math.min(F[2]||0,j/2,A/2),O=Math.min(F[3]||0,j/2,A/2)),b.moveTo(D,0),b.lineTo(j-M,0),b.arc(j-M,M,M,Math.PI*3/2,0,!1),b.lineTo(j,A-L),b.arc(j-L,A-L,L,0,Math.PI/2,!1),b.lineTo(O,A),b.arc(O,A-O,O,Math.PI/2,Math.PI,!1),b.lineTo(0,D),b.arc(D,D,D,Math.PI,Math.PI*3/2,!1)}}})(Y_)),Y_}var O1={},t0={},r0={},CE;function PR(){if(CE)return r0;CE=1,Object.defineProperty(r0,"__esModule",{value:!0}),r0.HitContext=r0.SceneContext=r0.Context=void 0;const e=Fa(),t=Mn();function r(C){const k=[],b=C.length,j=e.Util;for(let A=0;A<b;A++){let F=C[A];j._isNumber(F)?F=Math.round(F*1e3)/1e3:j._isString(F)||(F=F+""),k.push(F)}return k}const n=",",s="(",a=")",i="([",o="])",c=";",u="()",d="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],m=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],p=100;let x=class{constructor(k){this.canvas=k,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(k){k.fillEnabled()&&this._fill(k)}_fill(k){}strokeShape(k){k.hasStroke()&&this._stroke(k)}_stroke(k){}fillStrokeShape(k){k.attrs.fillAfterStrokeEnabled?(this.strokeShape(k),this.fillShape(k)):(this.fillShape(k),this.strokeShape(k))}getTrace(k,b){let j=this.traceArr,A=j.length,F="",D,M,O,L;for(D=0;D<A;D++)M=j[D],O=M.method,O?(L=M.args,F+=O,k?F+=u:e.Util._isArray(L[0])?F+=i+L.join(n)+o:(b&&(L=L.map(W=>typeof W=="number"?Math.floor(W):W)),F+=s+L.join(n)+a)):(F+=M.property,k||(F+=d+M.val)),F+=c;return F}clearTrace(){this.traceArr=[]}_trace(k){let b=this.traceArr,j;b.push(k),j=b.length,j>=p&&b.shift()}reset(){const k=this.getCanvas().getPixelRatio();this.setTransform(1*k,0,0,1*k,0,0)}getCanvas(){return this.canvas}clear(k){const b=this.getCanvas();k?this.clearRect(k.x||0,k.y||0,k.width||0,k.height||0):this.clearRect(0,0,b.getWidth()/b.pixelRatio,b.getHeight()/b.pixelRatio)}_applyLineCap(k){const b=k.attrs.lineCap;b&&this.setAttr("lineCap",b)}_applyOpacity(k){const b=k.getAbsoluteOpacity();b!==1&&this.setAttr("globalAlpha",b)}_applyLineJoin(k){const b=k.attrs.lineJoin;b&&this.setAttr("lineJoin",b)}setAttr(k,b){this._context[k]=b}arc(k,b,j,A,F,D){this._context.arc(k,b,j,A,F,D)}arcTo(k,b,j,A,F){this._context.arcTo(k,b,j,A,F)}beginPath(){this._context.beginPath()}bezierCurveTo(k,b,j,A,F,D){this._context.bezierCurveTo(k,b,j,A,F,D)}clearRect(k,b,j,A){this._context.clearRect(k,b,j,A)}clip(...k){this._context.clip.apply(this._context,k)}closePath(){this._context.closePath()}createImageData(k,b){const j=arguments;if(j.length===2)return this._context.createImageData(k,b);if(j.length===1)return this._context.createImageData(k)}createLinearGradient(k,b,j,A){return this._context.createLinearGradient(k,b,j,A)}createPattern(k,b){return this._context.createPattern(k,b)}createRadialGradient(k,b,j,A,F,D){return this._context.createRadialGradient(k,b,j,A,F,D)}drawImage(k,b,j,A,F,D,M,O,L){const W=arguments,re=this._context;W.length===3?re.drawImage(k,b,j):W.length===5?re.drawImage(k,b,j,A,F):W.length===9&&re.drawImage(k,b,j,A,F,D,M,O,L)}ellipse(k,b,j,A,F,D,M,O){this._context.ellipse(k,b,j,A,F,D,M,O)}isPointInPath(k,b,j,A){return j?this._context.isPointInPath(j,k,b,A):this._context.isPointInPath(k,b,A)}fill(...k){this._context.fill.apply(this._context,k)}fillRect(k,b,j,A){this._context.fillRect(k,b,j,A)}strokeRect(k,b,j,A){this._context.strokeRect(k,b,j,A)}fillText(k,b,j,A){A?this._context.fillText(k,b,j,A):this._context.fillText(k,b,j)}measureText(k){return this._context.measureText(k)}getImageData(k,b,j,A){return this._context.getImageData(k,b,j,A)}lineTo(k,b){this._context.lineTo(k,b)}moveTo(k,b){this._context.moveTo(k,b)}rect(k,b,j,A){this._context.rect(k,b,j,A)}roundRect(k,b,j,A,F){this._context.roundRect(k,b,j,A,F)}putImageData(k,b,j){this._context.putImageData(k,b,j)}quadraticCurveTo(k,b,j,A){this._context.quadraticCurveTo(k,b,j,A)}restore(){this._context.restore()}rotate(k){this._context.rotate(k)}save(){this._context.save()}scale(k,b){this._context.scale(k,b)}setLineDash(k){this._context.setLineDash?this._context.setLineDash(k):"mozDash"in this._context?this._context.mozDash=k:"webkitLineDash"in this._context&&(this._context.webkitLineDash=k)}getLineDash(){return this._context.getLineDash()}setTransform(k,b,j,A,F,D){this._context.setTransform(k,b,j,A,F,D)}stroke(k){k?this._context.stroke(k):this._context.stroke()}strokeText(k,b,j,A){this._context.strokeText(k,b,j,A)}transform(k,b,j,A,F,D){this._context.transform(k,b,j,A,F,D)}translate(k,b){this._context.translate(k,b)}_enableTrace(){let k=this,b=f.length,j=this.setAttr,A,F;const D=function(M){let O=k[M],L;k[M]=function(){return F=r(Array.prototype.slice.call(arguments,0)),L=O.apply(k,arguments),k._trace({method:M,args:F}),L}};for(A=0;A<b;A++)D(f[A]);k.setAttr=function(){j.apply(k,arguments);const M=arguments[0];let O=arguments[1];(M==="shadowOffsetX"||M==="shadowOffsetY"||M==="shadowBlur")&&(O=O/this.canvas.getPixelRatio()),k._trace({property:M,val:O})}}_applyGlobalCompositeOperation(k){const b=k.attrs.globalCompositeOperation;!b||b==="source-over"||this.setAttr("globalCompositeOperation",b)}};r0.Context=x,m.forEach(function(C){Object.defineProperty(x.prototype,C,{get(){return this._context[C]},set(k){this._context[C]=k}})});class w extends x{constructor(k,{willReadFrequently:b=!1}={}){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:b})}_fillColor(k){const b=k.fill();this.setAttr("fillStyle",b),k._fillFunc(this)}_fillPattern(k){this.setAttr("fillStyle",k._getFillPattern()),k._fillFunc(this)}_fillLinearGradient(k){const b=k._getLinearGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fillRadialGradient(k){const b=k._getRadialGradient();b&&(this.setAttr("fillStyle",b),k._fillFunc(this))}_fill(k){const b=k.fill(),j=k.getFillPriority();if(b&&j==="color"){this._fillColor(k);return}const A=k.getFillPatternImage();if(A&&j==="pattern"){this._fillPattern(k);return}const F=k.getFillLinearGradientColorStops();if(F&&j==="linear-gradient"){this._fillLinearGradient(k);return}const D=k.getFillRadialGradientColorStops();if(D&&j==="radial-gradient"){this._fillRadialGradient(k);return}b?this._fillColor(k):A?this._fillPattern(k):F?this._fillLinearGradient(k):D&&this._fillRadialGradient(k)}_strokeLinearGradient(k){const b=k.getStrokeLinearGradientStartPoint(),j=k.getStrokeLinearGradientEndPoint(),A=k.getStrokeLinearGradientColorStops(),F=this.createLinearGradient(b.x,b.y,j.x,j.y);if(A){for(let D=0;D<A.length;D+=2)F.addColorStop(A[D],A[D+1]);this.setAttr("strokeStyle",F)}}_stroke(k){const b=k.dash(),j=k.getStrokeScaleEnabled();if(k.hasStroke()){if(!j){this.save();const F=this.getCanvas().getPixelRatio();this.setTransform(F,0,0,F,0,0)}this._applyLineCap(k),b&&k.dashEnabled()&&(this.setLineDash(b),this.setAttr("lineDashOffset",k.dashOffset())),this.setAttr("lineWidth",k.strokeWidth()),k.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),k.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(k):this.setAttr("strokeStyle",k.stroke()),k._strokeFunc(this),j||this.restore()}}_applyShadow(k){var b,j,A;const F=(b=k.getShadowRGBA())!==null&&b!==void 0?b:"black",D=(j=k.getShadowBlur())!==null&&j!==void 0?j:5,M=(A=k.getShadowOffset())!==null&&A!==void 0?A:{x:0,y:0},O=k.getAbsoluteScale(),L=this.canvas.getPixelRatio(),W=O.x*L,re=O.y*L;this.setAttr("shadowColor",F),this.setAttr("shadowBlur",D*Math.min(Math.abs(W),Math.abs(re))),this.setAttr("shadowOffsetX",M.x*W),this.setAttr("shadowOffsetY",M.y*re)}}r0.SceneContext=w;class v extends x{constructor(k){super(k),this._context=k._canvas.getContext("2d",{willReadFrequently:!0})}_fill(k){this.save(),this.setAttr("fillStyle",k.colorKey),k._fillFuncHit(this),this.restore()}strokeShape(k){k.hasHitStroke()&&this._stroke(k)}_stroke(k){if(k.hasHitStroke()){const b=k.getStrokeScaleEnabled();if(!b){this.save();const F=this.getCanvas().getPixelRatio();this.setTransform(F,0,0,F,0,0)}this._applyLineCap(k);const j=k.hitStrokeWidth(),A=j==="auto"?k.strokeWidth():j;this.setAttr("lineWidth",A),this.setAttr("strokeStyle",k.colorKey),k._strokeFuncHit(this),b||this.restore()}}}return r0.HitContext=v,r0}var NE;function Yb(){if(NE)return t0;NE=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.HitCanvas=t0.SceneCanvas=t0.Canvas=void 0;const e=Fa(),t=PR(),r=Mn();let n;function s(){if(n)return n;const c=e.Util.createCanvasElement(),u=c.getContext("2d");return n=(function(){const d=r.Konva._global.devicePixelRatio||1,f=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return d/f})(),e.Util.releaseCanvas(c),n}let a=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const f=(u||{}).pixelRatio||r.Konva.pixelRatio||s();this.pixelRatio=f,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const d=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,d){this.setWidth(u||0),this.setHeight(d||0)}toDataURL(u,d){try{return this._canvas.toDataURL(u,d)}catch{try{return this._canvas.toDataURL()}catch(m){return e.Util.error("Unable to get data URL. "+m.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};t0.Canvas=a;class i extends a{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new t.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}t0.SceneCanvas=i;class o extends a{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(u.width,u.height)}}return t0.HitCanvas=o,t0}var J_={},EE;function l8(){return EE||(EE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Mn(),r=Fa();e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((a,i)=>{const{node:o}=a,c=o.getStage();c.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=r.Util._getFirstPointerId(n));const u=c._changedPointerPositions.find(d=>d.id===a.pointerId);if(u){if(a.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(u.x-a.startPointerPos.x),Math.abs(u.y-a.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,a),s.push(o)}}),s.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(a=>{const{node:i}=a,o=i.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const u=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;u&&s.indexOf(u)===-1&&s.push(u)}),s.forEach(a=>{a.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,a)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(J_)),J_}var Q_={},xl={},AE;function Gn(){if(AE)return xl;AE=1,Object.defineProperty(xl,"__esModule",{value:!0}),xl.RGBComponent=n,xl.alphaComponent=s,xl.getNumberValidator=a,xl.getNumberOrArrayOfNumbersValidator=i,xl.getNumberOrAutoValidator=o,xl.getStringValidator=c,xl.getStringOrGradientValidator=u,xl.getFunctionValidator=d,xl.getNumberArrayValidator=f,xl.getBooleanValidator=m,xl.getComponentValidator=p;const e=Mn(),t=Fa();function r(x){return t.Util._isString(x)?'"'+x+'"':Object.prototype.toString.call(x)==="[object Number]"||t.Util._isBoolean(x)?x:Object.prototype.toString.call(x)}function n(x){return x>255?255:x<0?0:Math.round(x)}function s(x){return x>1?1:x<1e-4?1e-4:x}function a(){if(e.Konva.isUnminified)return function(x,w){return t.Util._isNumber(x)||t.Util.warn(r(x)+' is a not valid value for "'+w+'" attribute. The value should be a number.'),x}}function i(x){if(e.Konva.isUnminified)return function(w,v){let C=t.Util._isNumber(w),k=t.Util._isArray(w)&&w.length==x;return!C&&!k&&t.Util.warn(r(w)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+x+")"),w}}function o(){if(e.Konva.isUnminified)return function(x,w){return t.Util._isNumber(x)||x==="auto"||t.Util.warn(r(x)+' is a not valid value for "'+w+'" attribute. The value should be a number or "auto".'),x}}function c(){if(e.Konva.isUnminified)return function(x,w){return t.Util._isString(x)||t.Util.warn(r(x)+' is a not valid value for "'+w+'" attribute. The value should be a string.'),x}}function u(){if(e.Konva.isUnminified)return function(x,w){const v=t.Util._isString(x),C=Object.prototype.toString.call(x)==="[object CanvasGradient]"||x&&x.addColorStop;return v||C||t.Util.warn(r(x)+' is a not valid value for "'+w+'" attribute. The value should be a string or a native gradient.'),x}}function d(){if(e.Konva.isUnminified)return function(x,w){return t.Util._isFunction(x)||t.Util.warn(r(x)+' is a not valid value for "'+w+'" attribute. The value should be a function.'),x}}function f(){if(e.Konva.isUnminified)return function(x,w){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&x instanceof v||(t.Util._isArray(x)?x.forEach(function(C){t.Util._isNumber(C)||t.Util.warn('"'+w+'" attribute has non numeric element '+C+". Make sure that all elements are numbers.")}):t.Util.warn(r(x)+' is a not valid value for "'+w+'" attribute. The value should be a array of numbers.')),x}}function m(){if(e.Konva.isUnminified)return function(x,w){return x===!0||x===!1||t.Util.warn(r(x)+' is a not valid value for "'+w+'" attribute. The value should be a boolean.'),x}}function p(x){if(e.Konva.isUnminified)return function(w,v){return w==null||t.Util.isObject(w)||t.Util.warn(r(w)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+x),w}}return xl}var jE;function Ln(){return jE||(jE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Fa(),r=Gn(),n="get",s="set";e.Factory={addGetterSetter(a,i,o,c,u){e.Factory.addGetter(a,i,o),e.Factory.addSetter(a,i,c,u),e.Factory.addOverloadedGetterSetter(a,i)},addGetter(a,i,o){const c=n+t.Util._capitalize(i);a.prototype[c]=a.prototype[c]||function(){const u=this.attrs[i];return u===void 0?o:u}},addSetter(a,i,o,c){const u=s+t.Util._capitalize(i);a.prototype[u]||e.Factory.overWriteSetter(a,i,o,c)},overWriteSetter(a,i,o,c){const u=s+t.Util._capitalize(i);a.prototype[u]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,i)),this._setAttr(i,d),c&&c.call(this),this}},addComponentsGetterSetter(a,i,o,c,u){const d=o.length,f=t.Util._capitalize,m=n+f(i),p=s+f(i);a.prototype[m]=function(){const w={};for(let v=0;v<d;v++){const C=o[v];w[C]=this.getAttr(i+f(C))}return w};const x=(0,r.getComponentValidator)(o);a.prototype[p]=function(w){const v=this.attrs[i];c&&(w=c.call(this,w,i)),x&&x.call(this,w,i);for(const C in w)w.hasOwnProperty(C)&&this._setAttr(i+f(C),w[C]);return w||o.forEach(C=>{this._setAttr(i+f(C),void 0)}),this._fireChangeEvent(i,v,w),u&&u.call(this),this},e.Factory.addOverloadedGetterSetter(a,i)},addOverloadedGetterSetter(a,i){const o=t.Util._capitalize(i),c=s+o,u=n+o;a.prototype[i]=function(){return arguments.length?(this[c](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(a,i,o,c){t.Util.error("Adding deprecated "+i);const u=n+t.Util._capitalize(i),d=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[u]=function(){t.Util.error(d);const f=this.attrs[i];return f===void 0?o:f},e.Factory.addSetter(a,i,c,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(a,i)},backCompat(a,i){t.Util.each(i,function(o,c){const u=a.prototype[c],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function m(){u.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}a.prototype[o]=m,a.prototype[d]=m,a.prototype[f]=m})},afterSetFilter(){this._filterUpToDate=!1}}})(Q_)),Q_}var PE;function Ya(){if(PE)return O1;PE=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.Node=void 0;const e=Yb(),t=l8(),r=Ln(),n=Mn(),s=Fa(),a=Gn(),i="absoluteOpacity",o="allEventListeners",c="absoluteTransform",u="absoluteScale",d="canvas",f="Change",m="children",p="konva",x="listening",w="mouseenter",v="mouseleave",C="pointerenter",k="pointerleave",b="touchenter",j="touchleave",A="set",F="Shape",D=" ",M="stage",O="transform",L="Stage",W="visible",re=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(D);let ie=1,xe=class US{constructor(H){this._id=ie++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(H),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(H){(H===O||H===c)&&this._cache.get(H)?this._cache.get(H).dirty=!0:H?this._cache.delete(H):this._cache.clear()}_getCache(H,Q){let U=this._cache.get(H);return(U===void 0||(H===O||H===c)&&U.dirty===!0)&&(U=Q.call(this),this._cache.set(H,U)),U}_calculate(H,Q,U){if(!this._attachedDepsListeners.get(H)){const V=Q.map(X=>X+"Change.konva").join(D);this.on(V,()=>{this._clearCache(H)}),this._attachedDepsListeners.set(H,!0)}return this._getCache(H,U)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(H){this._clearCache(H),H===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:H,filter:Q,hit:U,buffer:V}=this._cache.get(d);s.Util.releaseCanvas(H,Q,U,V),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(H){const Q=H||{};let U={};(Q.x===void 0||Q.y===void 0||Q.width===void 0||Q.height===void 0)&&(U=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let V=Math.ceil(Q.width||U.width),X=Math.ceil(Q.height||U.height),z=Q.pixelRatio,K=Q.x===void 0?Math.floor(U.x):Q.x,te=Q.y===void 0?Math.floor(U.y):Q.y,se=Q.offset||0,pe=Q.drawBorder||!1,oe=Q.hitCanvasPixelRatio||1;if(!V||!X){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const ye=Math.abs(Math.round(U.x)-K)>.5?1:0,we=Math.abs(Math.round(U.y)-te)>.5?1:0;V+=se*2+ye,X+=se*2+we,K-=se,te-=se;const Se=new e.SceneCanvas({pixelRatio:z,width:V,height:X}),Ie=new e.SceneCanvas({pixelRatio:z,width:0,height:0,willReadFrequently:!0}),me=new e.HitCanvas({pixelRatio:oe,width:V,height:X}),_e=Se.getContext(),We=me.getContext(),Ue=new e.SceneCanvas({width:Se.width/Se.pixelRatio+Math.abs(K),height:Se.height/Se.pixelRatio+Math.abs(te),pixelRatio:Se.pixelRatio}),St=Ue.getContext();return me.isCache=!0,Se.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,Q.imageSmoothingEnabled===!1&&(Se.getContext()._context.imageSmoothingEnabled=!1,Ie.getContext()._context.imageSmoothingEnabled=!1),_e.save(),We.save(),St.save(),_e.translate(-K,-te),We.translate(-K,-te),St.translate(-K,-te),Ue.x=K,Ue.y=te,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this.drawScene(Se,this,Ue),this.drawHit(me,this),this._isUnderCache=!1,_e.restore(),We.restore(),pe&&(_e.save(),_e.beginPath(),_e.rect(0,0,V,X),_e.closePath(),_e.setAttr("strokeStyle","red"),_e.setAttr("lineWidth",5),_e.stroke(),_e.restore()),this._cache.set(d,{scene:Se,filter:Ie,hit:me,buffer:Ue,x:K,y:te}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(H){throw new Error('abstract "getClientRect" method call')}_transformedRect(H,Q){const U=[{x:H.x,y:H.y},{x:H.x+H.width,y:H.y},{x:H.x+H.width,y:H.y+H.height},{x:H.x,y:H.y+H.height}];let V=1/0,X=1/0,z=-1/0,K=-1/0;const te=this.getAbsoluteTransform(Q);return U.forEach(function(se){const pe=te.point(se);V===void 0&&(V=z=pe.x,X=K=pe.y),V=Math.min(V,pe.x),X=Math.min(X,pe.y),z=Math.max(z,pe.x),K=Math.max(K,pe.y)}),{x:V,y:X,width:z-V,height:K-X}}_drawCachedSceneCanvas(H){H.save(),H._applyOpacity(this),H._applyGlobalCompositeOperation(this);const Q=this._getCanvasCache();H.translate(Q.x,Q.y);const U=this._getCachedSceneCanvas(),V=U.pixelRatio;H.drawImage(U._canvas,0,0,U.width/V,U.height/V),H.restore()}_drawCachedHitCanvas(H){const Q=this._getCanvasCache(),U=Q.hit;H.save(),H.translate(Q.x,Q.y),H.drawImage(U._canvas,0,0,U.width/U.pixelRatio,U.height/U.pixelRatio),H.restore()}_getCachedSceneCanvas(){let H=this.filters(),Q=this._getCanvasCache(),U=Q.scene,V=Q.filter,X=V.getContext(),z,K,te,se;if(H){if(!this._filterUpToDate){const pe=U.pixelRatio;V.setSize(U.width/U.pixelRatio,U.height/U.pixelRatio);try{for(z=H.length,X.clear(),X.drawImage(U._canvas,0,0,U.getWidth()/pe,U.getHeight()/pe),K=X.getImageData(0,0,V.getWidth(),V.getHeight()),te=0;te<z;te++){if(se=H[te],typeof se!="function"){s.Util.error("Filter should be type of function, but got "+typeof se+" instead. Please check correct filters");continue}se.call(this,K),X.putImageData(K,0,0)}}catch(oe){s.Util.error("Unable to apply filter. "+oe.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return V}return U}on(H,Q){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const U=H.split(D);for(let V=0;V<U.length;V++){const z=U[V].split("."),K=z[0],te=z[1]||"";this.eventListeners[K]||(this.eventListeners[K]=[]),this.eventListeners[K].push({name:te,handler:Q})}return this}off(H,Q){let U=(H||"").split(D),V=U.length,X,z,K,te,se,pe;if(this._cache&&this._cache.delete(o),!H)for(z in this.eventListeners)this._off(z);for(X=0;X<V;X++)if(K=U[X],te=K.split("."),se=te[0],pe=te[1],se)this.eventListeners[se]&&this._off(se,pe,Q);else for(z in this.eventListeners)this._off(z,pe,Q);return this}dispatchEvent(H){const Q={target:this,type:H.type,evt:H};return this.fire(H.type,Q),this}addEventListener(H,Q){return this.on(H,function(U){Q.call(this,U.evt)}),this}removeEventListener(H){return this.off(H),this}_delegate(H,Q,U){const V=this;this.on(H,function(X){const z=X.target.findAncestors(Q,!0,V);for(let K=0;K<z.length;K++)X=s.Util.cloneObject(X),X.currentTarget=z[K],U.call(z[K],X)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(M),this._clearSelfAndDescendantCache(W),this._clearSelfAndDescendantCache(x)}_remove(){this._clearCaches();const H=this.getParent();H&&H.children&&(H.children.splice(this.index,1),H._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(H){const Q="get"+s.Util._capitalize(H);return s.Util._isFunction(this[Q])?this[Q]():this.attrs[H]}getAncestors(){let H=this.getParent(),Q=[];for(;H;)Q.push(H),H=H.getParent();return Q}getAttrs(){return this.attrs||{}}setAttrs(H){return this._batchTransformChanges(()=>{let Q,U;if(!H)return this;for(Q in H)Q!==m&&(U=A+s.Util._capitalize(Q),s.Util._isFunction(this[U])?this[U](H[Q]):this._setAttr(Q,H[Q]))}),this}isListening(){return this._getCache(x,this._isListening)}_isListening(H){if(!this.listening())return!1;const U=this.getParent();return U&&U!==H&&this!==H?U._isListening(H):!0}isVisible(){return this._getCache(W,this._isVisible)}_isVisible(H){if(!this.visible())return!1;const U=this.getParent();return U&&U!==H&&this!==H?U._isVisible(H):!0}shouldDrawHit(H,Q=!1){if(H)return this._isVisible(H)&&this._isListening(H);const U=this.getLayer();let V=!1;t.DD._dragElements.forEach(z=>{z.dragStatus==="dragging"&&(z.node.nodeType==="Stage"||z.node.getLayer()===U)&&(V=!0)});const X=!Q&&!n.Konva.hitOnDragEnabled&&(V||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!X}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let H=this.getDepth(),Q=this,U=0,V,X,z,K;function te(pe){for(V=[],X=pe.length,z=0;z<X;z++)K=pe[z],U++,K.nodeType!==F&&(V=V.concat(K.getChildren().slice())),K._id===Q._id&&(z=X);V.length>0&&V[0].getDepth()<=H&&te(V)}const se=this.getStage();return Q.nodeType!==L&&se&&te(se.getChildren()),U}getDepth(){let H=0,Q=this.parent;for(;Q;)H++,Q=Q.parent;return H}_batchTransformChanges(H){this._batchingTransformChange=!0,H(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(O),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(H){return this._batchTransformChanges(()=>{this.x(H.x),this.y(H.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const H=this.getStage();if(!H)return null;const Q=H.getPointerPosition();if(!Q)return null;const U=this.getAbsoluteTransform().copy();return U.invert(),U.point(Q)}getAbsolutePosition(H){let Q=!1,U=this.parent;for(;U;){if(U.isCached()){Q=!0;break}U=U.parent}Q&&!H&&(H=!0);const V=this.getAbsoluteTransform(H).getMatrix(),X=new s.Transform,z=this.offset();return X.m=V.slice(),X.translate(z.x,z.y),X.getTranslation()}setAbsolutePosition(H){const{x:Q,y:U,...V}=this._clearTransform();this.attrs.x=Q,this.attrs.y=U,this._clearCache(O);const X=this._getAbsoluteTransform().copy();return X.invert(),X.translate(H.x,H.y),H={x:this.attrs.x+X.getTranslation().x,y:this.attrs.y+X.getTranslation().y},this._setTransform(V),this.setPosition({x:H.x,y:H.y}),this._clearCache(O),this._clearSelfAndDescendantCache(c),this}_setTransform(H){let Q;for(Q in H)this.attrs[Q]=H[Q]}_clearTransform(){const H={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,H}move(H){let Q=H.x,U=H.y,V=this.x(),X=this.y();return Q!==void 0&&(V+=Q),U!==void 0&&(X+=U),this.setPosition({x:V,y:X}),this}_eachAncestorReverse(H,Q){let U=[],V=this.getParent(),X,z;if(!(Q&&Q._id===this._id)){for(U.unshift(this);V&&(!Q||V._id!==Q._id);)U.unshift(V),V=V.parent;for(X=U.length,z=0;z<X;z++)H(U[z])}}rotate(H){return this.rotation(this.rotation()+H),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const H=this.index,Q=this.parent.getChildren().length;return H<Q-1?(this.parent.children.splice(H,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const H=this.index,Q=this.parent.getChildren().length;return H<Q-1?(this.parent.children.splice(H,1),this.parent.children.splice(H+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const H=this.index;return H>0?(this.parent.children.splice(H,1),this.parent.children.splice(H-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const H=this.index;return H>0?(this.parent.children.splice(H,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(H){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(H<0||H>=this.parent.children.length)&&s.Util.warn("Unexpected value "+H+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const Q=this.index;return this.parent.children.splice(Q,1),this.parent.children.splice(H,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let H=this.opacity();const Q=this.getParent();return Q&&!Q._isUnderCache&&(H*=Q.getAbsoluteOpacity()),H}moveTo(H){return this.getParent()!==H&&(this._remove(),H.add(this)),this}toObject(){let H=this.getAttrs(),Q,U,V,X,z;const K={attrs:{},className:this.getClassName()};for(Q in H)U=H[Q],z=s.Util.isObject(U)&&!s.Util._isPlainObject(U)&&!s.Util._isArray(U),!z&&(V=typeof this[Q]=="function"&&this[Q],delete H[Q],X=V?V.call(this):null,H[Q]=U,X!==U&&(K.attrs[Q]=U));return s.Util._prepareToStringify(K)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(H,Q,U){const V=[];Q&&this._isMatch(H)&&V.push(this);let X=this.parent;for(;X;){if(X===U)return V;X._isMatch(H)&&V.push(X),X=X.parent}return V}isAncestorOf(H){return!1}findAncestor(H,Q,U){return this.findAncestors(H,Q,U)[0]}_isMatch(H){if(!H)return!1;if(typeof H=="function")return H(this);let Q=H.replace(/ /g,"").split(","),U=Q.length,V,X;for(V=0;V<U;V++)if(X=Q[V],s.Util.isValidSelector(X)||(s.Util.warn('Selector "'+X+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),X.charAt(0)==="#"){if(this.id()===X.slice(1))return!0}else if(X.charAt(0)==="."){if(this.hasName(X.slice(1)))return!0}else if(this.className===X||this.nodeType===X)return!0;return!1}getLayer(){const H=this.getParent();return H?H.getLayer():null}getStage(){return this._getCache(M,this._getStage)}_getStage(){const H=this.getParent();return H?H.getStage():null}fire(H,Q={},U){return Q.target=Q.target||this,U?this._fireAndBubble(H,Q):this._fire(H,Q),this}getAbsoluteTransform(H){return H?this._getAbsoluteTransform(H):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(H){let Q;if(H)return Q=new s.Transform,this._eachAncestorReverse(function(U){const V=U.transformsEnabled();V==="all"?Q.multiply(U.getTransform()):V==="position"&&Q.translate(U.x()-U.offsetX(),U.y()-U.offsetY())},H),Q;{Q=this._cache.get(c)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(Q):Q.reset();const U=this.transformsEnabled();if(U==="all")Q.multiply(this.getTransform());else if(U==="position"){const V=this.attrs.x||0,X=this.attrs.y||0,z=this.attrs.offsetX||0,K=this.attrs.offsetY||0;Q.translate(V-z,X-K)}return Q.dirty=!1,Q}}getAbsoluteScale(H){let Q=this;for(;Q;)Q._isUnderCache&&(H=Q),Q=Q.getParent();const V=this.getAbsoluteTransform(H).decompose();return{x:V.scaleX,y:V.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(O,this._getTransform)}_getTransform(){var H,Q;const U=this._cache.get(O)||new s.Transform;U.reset();const V=this.x(),X=this.y(),z=n.Konva.getAngle(this.rotation()),K=(H=this.attrs.scaleX)!==null&&H!==void 0?H:1,te=(Q=this.attrs.scaleY)!==null&&Q!==void 0?Q:1,se=this.attrs.skewX||0,pe=this.attrs.skewY||0,oe=this.attrs.offsetX||0,ye=this.attrs.offsetY||0;return(V!==0||X!==0)&&U.translate(V,X),z!==0&&U.rotate(z),(se!==0||pe!==0)&&U.skew(se,pe),(K!==1||te!==1)&&U.scale(K,te),(oe!==0||ye!==0)&&U.translate(-1*oe,-1*ye),U.dirty=!1,U}clone(H){let Q=s.Util.cloneObject(this.attrs),U,V,X,z,K;for(U in H)Q[U]=H[U];const te=new this.constructor(Q);for(U in this.eventListeners)for(V=this.eventListeners[U],X=V.length,z=0;z<X;z++)K=V[z],K.name.indexOf(p)<0&&(te.eventListeners[U]||(te.eventListeners[U]=[]),te.eventListeners[U].push(K));return te}_toKonvaCanvas(H){H=H||{};const Q=this.getClientRect(),U=this.getStage(),V=H.x!==void 0?H.x:Math.floor(Q.x),X=H.y!==void 0?H.y:Math.floor(Q.y),z=H.pixelRatio||1,K=new e.SceneCanvas({width:H.width||Math.ceil(Q.width)||(U?U.width():0),height:H.height||Math.ceil(Q.height)||(U?U.height():0),pixelRatio:z}),te=K.getContext(),se=new e.SceneCanvas({width:K.width/K.pixelRatio+Math.abs(V),height:K.height/K.pixelRatio+Math.abs(X),pixelRatio:K.pixelRatio});return H.imageSmoothingEnabled===!1&&(te._context.imageSmoothingEnabled=!1),te.save(),(V||X)&&te.translate(-1*V,-1*X),this.drawScene(K,void 0,se),te.restore(),K}toCanvas(H){return this._toKonvaCanvas(H)._canvas}toDataURL(H){H=H||{};const Q=H.mimeType||null,U=H.quality||null,V=this._toKonvaCanvas(H).toDataURL(Q,U);return H.callback&&H.callback(V),V}toImage(H){return new Promise((Q,U)=>{try{const V=H?.callback;V&&delete H.callback,s.Util._urlToImage(this.toDataURL(H),function(X){Q(X),V?.(X)})}catch(V){U(V)}})}toBlob(H){return new Promise((Q,U)=>{try{const V=H?.callback;V&&delete H.callback,this.toCanvas(H).toBlob(X=>{Q(X),V?.(X)},H?.mimeType,H?.quality)}catch(V){U(V)}})}setSize(H){return this.width(H.width),this.height(H.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(H,Q,U){let V=this.eventListeners[H],X,z,K;for(X=0;X<V.length;X++)if(z=V[X].name,K=V[X].handler,(z!=="konva"||Q==="konva")&&(!Q||z===Q)&&(!U||U===K)){if(V.splice(X,1),V.length===0){delete this.eventListeners[H];break}X--}}_fireChangeEvent(H,Q,U){this._fire(H+f,{oldVal:Q,newVal:U})}addName(H){if(!this.hasName(H)){const Q=this.name(),U=Q?Q+" "+H:H;this.name(U)}return this}hasName(H){if(!H)return!1;const Q=this.name();return Q?(Q||"").split(/\s/g).indexOf(H)!==-1:!1}removeName(H){const Q=(this.name()||"").split(/\s/g),U=Q.indexOf(H);return U!==-1&&(Q.splice(U,1),this.name(Q.join(" "))),this}setAttr(H,Q){const U=this[A+s.Util._capitalize(H)];return s.Util._isFunction(U)?U.call(this,Q):this._setAttr(H,Q),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const H=this.getLayer()||this.getStage();H?.batchDraw()}}_setAttr(H,Q){const U=this.attrs[H];U===Q&&!s.Util.isObject(Q)||(Q==null?delete this.attrs[H]:this.attrs[H]=Q,this._shouldFireChangeEvents&&this._fireChangeEvent(H,U,Q),this._requestDraw())}_setComponentAttr(H,Q,U){let V;U!==void 0&&(V=this.attrs[H],V||(this.attrs[H]=this.getAttr(H)),this.attrs[H][Q]=U,this._fireChangeEvent(H,V,U))}_fireAndBubble(H,Q,U){Q&&this.nodeType===F&&(Q.target=this);const V=[w,v,C,k,b,j];if(!(V.indexOf(H)!==-1&&(U&&(this===U||this.isAncestorOf&&this.isAncestorOf(U))||this.nodeType==="Stage"&&!U))){this._fire(H,Q);const z=V.indexOf(H)!==-1&&U&&U.isAncestorOf&&U.isAncestorOf(this)&&!U.isAncestorOf(this.parent);(Q&&!Q.cancelBubble||!Q)&&this.parent&&this.parent.isListening()&&!z&&(U&&U.parent?this._fireAndBubble.call(this.parent,H,Q,U):this._fireAndBubble.call(this.parent,H,Q))}}_getProtoListeners(H){var Q,U,V;const X=(Q=this._cache.get(o))!==null&&Q!==void 0?Q:{};let z=X?.[H];if(z===void 0){z=[];let K=Object.getPrototypeOf(this);for(;K;){const te=(V=(U=K.eventListeners)===null||U===void 0?void 0:U[H])!==null&&V!==void 0?V:[];z.push(...te),K=Object.getPrototypeOf(K)}X[H]=z,this._cache.set(o,X)}return z}_fire(H,Q){Q=Q||{},Q.currentTarget=this,Q.type=H;const U=this._getProtoListeners(H);if(U)for(let X=0;X<U.length;X++)U[X].handler.call(this,Q);const V=this.eventListeners[H];if(V)for(let X=0;X<V.length;X++)V[X].handler.call(this,Q)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(H){const Q=H?H.pointerId:void 0,U=this.getStage(),V=this.getAbsolutePosition();if(!U)return;const X=U._getPointerById(Q)||U._changedPointerPositions[0]||V;t.DD._dragElements.set(this._id,{node:this,startPointerPos:X,offset:{x:X.x-V.x,y:X.y-V.y},dragStatus:"ready",pointerId:Q})}startDrag(H,Q=!0){t.DD._dragElements.has(this._id)||this._createDragElement(H);const U=t.DD._dragElements.get(this._id);U.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:H&&H.evt},Q)}_setDragPosition(H,Q){const U=this.getStage()._getPointerById(Q.pointerId);if(!U)return;let V={x:U.x-Q.offset.x,y:U.y-Q.offset.y};const X=this.dragBoundFunc();if(X!==void 0){const z=X.call(this,V,H);z?V=z:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==V.x||this._lastPos.y!==V.y)&&(this.setAbsolutePosition(V),this._requestDraw()),this._lastPos=V}stopDrag(H){const Q=t.DD._dragElements.get(this._id);Q&&(Q.dragStatus="stopped"),t.DD._endDragBefore(H),t.DD._endDragAfter(H)}setDraggable(H){this._setAttr("draggable",H),this._dragChange()}isDragging(){const H=t.DD._dragElements.get(this._id);return H?H.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(H){if(!(!(H.evt.button!==void 0)||n.Konva.dragButtons.indexOf(H.evt.button)>=0)||this.isDragging())return;let V=!1;t.DD._dragElements.forEach(X=>{this.isAncestorOf(X.node)&&(V=!0)}),V||this._createDragElement(H)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const Q=t.DD._dragElements.get(this._id),U=Q&&Q.dragStatus==="dragging",V=Q&&Q.dragStatus==="ready";U?this.stopDrag():V&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(H={x:0,y:0}){const Q=this.getStage();if(!Q)return!1;const U={x:-H.x,y:-H.y,width:Q.width()+2*H.x,height:Q.height()+2*H.y};return s.Util.haveIntersection(U,this.getClientRect())}static create(H,Q){return s.Util._isString(H)&&(H=JSON.parse(H)),this._createNode(H,Q)}static _createNode(H,Q){let U=US.prototype.getClassName.call(H),V=H.children,X,z,K;Q&&(H.attrs.container=Q),n.Konva[U]||(s.Util.warn('Can not find a node with class name "'+U+'". Fallback to "Shape".'),U="Shape");const te=n.Konva[U];if(X=new te(H.attrs),V)for(z=V.length,K=0;K<z;K++)X.add(US._createNode(V[K]));return X}};O1.Node=xe,xe.prototype.nodeType="Node",xe.prototype._attrsAffectingSize=[],xe.prototype.eventListeners={},xe.prototype.on.call(xe.prototype,re,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(O),this._clearSelfAndDescendantCache(c)}),xe.prototype.on.call(xe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(W)}),xe.prototype.on.call(xe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(x)}),xe.prototype.on.call(xe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const de=r.Factory.addGetterSetter;return de(xe,"zIndex"),de(xe,"absolutePosition"),de(xe,"position"),de(xe,"x",0,(0,a.getNumberValidator)()),de(xe,"y",0,(0,a.getNumberValidator)()),de(xe,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),de(xe,"opacity",1,(0,a.getNumberValidator)()),de(xe,"name","",(0,a.getStringValidator)()),de(xe,"id","",(0,a.getStringValidator)()),de(xe,"rotation",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(xe,"scale",["x","y"]),de(xe,"scaleX",1,(0,a.getNumberValidator)()),de(xe,"scaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(xe,"skew",["x","y"]),de(xe,"skewX",0,(0,a.getNumberValidator)()),de(xe,"skewY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(xe,"offset",["x","y"]),de(xe,"offsetX",0,(0,a.getNumberValidator)()),de(xe,"offsetY",0,(0,a.getNumberValidator)()),de(xe,"dragDistance",void 0,(0,a.getNumberValidator)()),de(xe,"width",0,(0,a.getNumberValidator)()),de(xe,"height",0,(0,a.getNumberValidator)()),de(xe,"listening",!0,(0,a.getBooleanValidator)()),de(xe,"preventDefault",!0,(0,a.getBooleanValidator)()),de(xe,"filters",void 0,function(fe){return this._filterUpToDate=!1,fe}),de(xe,"visible",!0,(0,a.getBooleanValidator)()),de(xe,"transformsEnabled","all",(0,a.getStringValidator)()),de(xe,"size"),de(xe,"dragBoundFunc"),de(xe,"draggable",!1,(0,a.getBooleanValidator)()),r.Factory.backCompat(xe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),O1}var D1={},ME;function Jb(){if(ME)return D1;ME=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.Container=void 0;const e=Ln(),t=Ya(),r=Gn();let n=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){const i=this.children||[];return a?i.filter(a):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let o=0;o<a.length;o++)this.add(a[o]);return this}const i=a[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const i=this._generalFind(a,!0);return i.length>0?i[0]:void 0}_generalFind(a,i){const o=[];return this._descendants(c=>{const u=c._isMatch(a);return u&&o.push(c),!!(u&&i)}),o}_descendants(a){let i=!1;const o=this.getChildren();for(const c of o){if(i=a(c),i)return!0;if(c.hasChildren()&&(i=c._descendants(a),i))return!0}return!1}toObject(){const a=t.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(i=>{a.children.push(i.toObject())}),a}isAncestorOf(a){let i=a.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(a){const i=t.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(o){i.add(o.clone())}),i}getAllIntersections(a){const i=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(a)&&i.push(o)}),i}_clearSelfAndDescendantCache(a){var i;super._clearSelfAndDescendantCache(a),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(o){o._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(i,o){i.index=o}),this._requestDraw()}drawScene(a,i,o){const c=this.getLayer(),u=a||c&&c.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),m=f&&f.scene,p=u&&u.isCache;if(!this.isVisible()&&!p)return this;if(m){d.save();const x=this.getAbsoluteTransform(i).getMatrix();d.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,i,o);return this}drawHit(a,i){if(!this.shouldDrawHit(i))return this;const o=this.getLayer(),c=a||o&&o.hitCanvas,u=c&&c.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const m=this.getAbsoluteTransform(i).getMatrix();u.transform(m[0],m[1],m[2],m[3],m[4],m[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",c,i);return this}_drawChildren(a,i,o,c){var u;const d=i&&i.getContext(),f=this.clipWidth(),m=this.clipHeight(),p=this.clipFunc(),x=typeof f=="number"&&typeof m=="number"||p,w=o===this;if(x){d.save();const C=this.getAbsoluteTransform(o);let k=C.getMatrix();d.transform(k[0],k[1],k[2],k[3],k[4],k[5]),d.beginPath();let b;if(p)b=p.call(this,d,this);else{const j=this.clipX(),A=this.clipY();d.rect(j||0,A||0,f,m)}d.clip.apply(d,b),k=C.copy().invert().getMatrix(),d.transform(k[0],k[1],k[2],k[3],k[4],k[5])}const v=!w&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";v&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(C){C[a](i,o,c)}),v&&d.restore(),x&&d.restore()}getClientRect(a={}){var i;const o=a.skipTransform,c=a.relativeTo;let u,d,f,m,p={x:1/0,y:1/0,width:0,height:0};const x=this;(i=this.children)===null||i===void 0||i.forEach(function(C){if(!C.visible())return;const k=C.getClientRect({relativeTo:x,skipShadow:a.skipShadow,skipStroke:a.skipStroke});k.width===0&&k.height===0||(u===void 0?(u=k.x,d=k.y,f=k.x+k.width,m=k.y+k.height):(u=Math.min(u,k.x),d=Math.min(d,k.y),f=Math.max(f,k.x+k.width),m=Math.max(m,k.y+k.height)))});const w=this.find("Shape");let v=!1;for(let C=0;C<w.length;C++)if(w[C]._isVisible(this)){v=!0;break}return v&&u!==void 0?p={x:u,y:d,width:f-u,height:m-d}:p={x:0,y:0,width:0,height:0},o?p:this._transformedRect(p,c)}};return D1.Container=n,e.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(n,"clipX",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipY",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipWidth",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipHeight",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipFunc"),D1}var Z_={},Ff={},FE;function MR(){if(FE)return Ff;FE=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.getCapturedShape=n,Ff.createEvent=s,Ff.hasPointerCapture=a,Ff.setPointerCapture=i,Ff.releaseCapture=o;const e=Mn(),t=new Map,r=e.Konva._global.PointerEvent!==void 0;function n(c){return t.get(c)}function s(c){return{evt:c,pointerId:c.pointerId}}function a(c,u){return t.get(c)===u}function i(c,u){o(c),u.getStage()&&(t.set(c,u),r&&u._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function o(c,u){const d=t.get(c);if(!d)return;const f=d.getStage();f&&f.content,t.delete(c),r&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return Ff}var OE;function ZQ(){return OE||(OE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Fa(),r=Ln(),n=Jb(),s=Mn(),a=Yb(),i=l8(),o=Mn(),c=MR(),u="Stage",d="string",f="px",m="mouseout",p="mouseleave",x="mouseover",w="mouseenter",v="mousemove",C="mousedown",k="mouseup",b="pointermove",j="pointerdown",A="pointerup",F="pointercancel",D="lostpointercapture",M="pointerout",O="pointerleave",L="pointerover",W="pointerenter",re="contextmenu",ie="touchstart",xe="touchend",de="touchmove",fe="touchcancel",H="wheel",Q=5,U=[[w,"_pointerenter"],[C,"_pointerdown"],[v,"_pointermove"],[k,"_pointerup"],[p,"_pointerleave"],[ie,"_pointerdown"],[de,"_pointermove"],[xe,"_pointerup"],[fe,"_pointercancel"],[x,"_pointerover"],[H,"_wheel"],[re,"_contextmenu"],[j,"_pointerdown"],[b,"_pointermove"],[A,"_pointerup"],[F,"_pointercancel"],[O,"_pointerleave"],[D,"_lostpointercapture"]],V={mouse:{[M]:m,[O]:p,[L]:x,[W]:w,[b]:v,[j]:C,[A]:k,[F]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[M]:"touchout",[O]:"touchleave",[L]:"touchover",[W]:"touchenter",[b]:de,[j]:ie,[A]:xe,[F]:fe,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[M]:M,[O]:O,[L]:L,[W]:W,[b]:b,[j]:j,[A]:A,[F]:F,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},X=pe=>pe.indexOf("pointer")>=0?"pointer":pe.indexOf("touch")>=0?"touch":"mouse",z=pe=>{const oe=X(pe);if(oe==="pointer")return s.Konva.pointerEventsEnabled&&V.pointer;if(oe==="touch")return V.touch;if(oe==="mouse")return V.mouse};function K(pe={}){return(pe.clipFunc||pe.clipWidth||pe.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),pe}const te="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class se extends n.Container{constructor(oe){super(K(oe)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{K(this.attrs)}),this._checkVisibility()}_validateAdd(oe){const ye=oe.getType()==="Layer",we=oe.getType()==="FastLayer";ye||we||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const oe=this.visible()?"":"none";this.content.style.display=oe}setContainer(oe){if(typeof oe===d){let ye;if(oe.charAt(0)==="."){const we=oe.slice(1);oe=document.getElementsByClassName(we)[0]}else oe.charAt(0)!=="#"?ye=oe:ye=oe.slice(1),oe=document.getElementById(ye);if(!oe)throw"Can not find container in document with id "+ye}return this._setAttr("container",oe),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),oe.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const oe=this.children,ye=oe.length;for(let we=0;we<ye;we++)oe[we].clear();return this}clone(oe){return oe||(oe={}),oe.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,oe)}destroy(){super.destroy();const oe=this.content;oe&&t.Util._isInDocument(oe)&&this.container().removeChild(oe);const ye=e.stages.indexOf(this);return ye>-1&&e.stages.splice(ye,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const oe=this._pointerPositions[0]||this._changedPointerPositions[0];return oe?{x:oe.x,y:oe.y}:(t.Util.warn(te),null)}_getPointerById(oe){return this._pointerPositions.find(ye=>ye.id===oe)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(oe){oe=oe||{},oe.x=oe.x||0,oe.y=oe.y||0,oe.width=oe.width||this.width(),oe.height=oe.height||this.height();const ye=new a.SceneCanvas({width:oe.width,height:oe.height,pixelRatio:oe.pixelRatio||1}),we=ye.getContext()._context,Se=this.children;return(oe.x||oe.y)&&we.translate(-1*oe.x,-1*oe.y),Se.forEach(function(Ie){if(!Ie.isVisible())return;const me=Ie._toKonvaCanvas(oe);we.drawImage(me._canvas,oe.x,oe.y,me.getWidth()/me.getPixelRatio(),me.getHeight()/me.getPixelRatio())}),ye}getIntersection(oe){if(!oe)return null;const ye=this.children,we=ye.length,Se=we-1;for(let Ie=Se;Ie>=0;Ie--){const me=ye[Ie].getIntersection(oe);if(me)return me}return null}_resizeDOM(){const oe=this.width(),ye=this.height();this.content&&(this.content.style.width=oe+f,this.content.style.height=ye+f),this.bufferCanvas.setSize(oe,ye),this.bufferHitCanvas.setSize(oe,ye),this.children.forEach(we=>{we.setSize({width:oe,height:ye}),we.draw()})}add(oe,...ye){if(arguments.length>1){for(let Se=0;Se<arguments.length;Se++)this.add(arguments[Se]);return this}super.add(oe);const we=this.children.length;return we>Q&&t.Util.warn("The stage has "+we+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),oe.setSize({width:this.width(),height:this.height()}),oe.draw(),s.Konva.isBrowser&&this.content.appendChild(oe.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(oe){return c.hasPointerCapture(oe,this)}setPointerCapture(oe){c.setPointerCapture(oe,this)}releaseCapture(oe){c.releaseCapture(oe,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&U.forEach(([oe,ye])=>{this.content.addEventListener(oe,we=>{this[ye](we)},{passive:!1})})}_pointerenter(oe){this.setPointersPositions(oe);const ye=z(oe.type);ye&&this._fire(ye.pointerenter,{evt:oe,target:this,currentTarget:this})}_pointerover(oe){this.setPointersPositions(oe);const ye=z(oe.type);ye&&this._fire(ye.pointerover,{evt:oe,target:this,currentTarget:this})}_getTargetShape(oe){let ye=this[oe+"targetShape"];return ye&&!ye.getStage()&&(ye=null),ye}_pointerleave(oe){const ye=z(oe.type),we=X(oe.type);if(!ye)return;this.setPointersPositions(oe);const Se=this._getTargetShape(we),Ie=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;Se&&Ie?(Se._fireAndBubble(ye.pointerout,{evt:oe}),Se._fireAndBubble(ye.pointerleave,{evt:oe}),this._fire(ye.pointerleave,{evt:oe,target:this,currentTarget:this}),this[we+"targetShape"]=null):Ie&&(this._fire(ye.pointerleave,{evt:oe,target:this,currentTarget:this}),this._fire(ye.pointerout,{evt:oe,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(oe){const ye=z(oe.type),we=X(oe.type);if(!ye)return;this.setPointersPositions(oe);let Se=!1;this._changedPointerPositions.forEach(Ie=>{const me=this.getIntersection(Ie);if(i.DD.justDragged=!1,s.Konva["_"+we+"ListenClick"]=!0,!me||!me.isListening()){this[we+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&me.setPointerCapture(Ie.id),this[we+"ClickStartShape"]=me,me._fireAndBubble(ye.pointerdown,{evt:oe,pointerId:Ie.id}),Se=!0;const _e=oe.type.indexOf("touch")>=0;me.preventDefault()&&oe.cancelable&&_e&&oe.preventDefault()}),Se||this._fire(ye.pointerdown,{evt:oe,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(oe){const ye=z(oe.type),we=X(oe.type);if(!ye||(s.Konva.isDragging()&&i.DD.node.preventDefault()&&oe.cancelable&&oe.preventDefault(),this.setPointersPositions(oe),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const Ie={};let me=!1;const _e=this._getTargetShape(we);this._changedPointerPositions.forEach(We=>{const Ue=c.getCapturedShape(We.id)||this.getIntersection(We),St=We.id,Ze={evt:oe,pointerId:St},Kt=_e!==Ue;if(Kt&&_e&&(_e._fireAndBubble(ye.pointerout,{...Ze},Ue),_e._fireAndBubble(ye.pointerleave,{...Ze},Ue)),Ue){if(Ie[Ue._id])return;Ie[Ue._id]=!0}Ue&&Ue.isListening()?(me=!0,Kt&&(Ue._fireAndBubble(ye.pointerover,{...Ze},_e),Ue._fireAndBubble(ye.pointerenter,{...Ze},_e),this[we+"targetShape"]=Ue),Ue._fireAndBubble(ye.pointermove,{...Ze})):_e&&(this._fire(ye.pointerover,{evt:oe,target:this,currentTarget:this,pointerId:St}),this[we+"targetShape"]=null)}),me||this._fire(ye.pointermove,{evt:oe,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(oe){const ye=z(oe.type),we=X(oe.type);if(!ye)return;this.setPointersPositions(oe);const Se=this[we+"ClickStartShape"],Ie=this[we+"ClickEndShape"],me={};let _e=!1;this._changedPointerPositions.forEach(We=>{const Ue=c.getCapturedShape(We.id)||this.getIntersection(We);if(Ue){if(Ue.releaseCapture(We.id),me[Ue._id])return;me[Ue._id]=!0}const St=We.id,Ze={evt:oe,pointerId:St};let Kt=!1;s.Konva["_"+we+"InDblClickWindow"]?(Kt=!0,clearTimeout(this[we+"DblTimeout"])):i.DD.justDragged||(s.Konva["_"+we+"InDblClickWindow"]=!0,clearTimeout(this[we+"DblTimeout"])),this[we+"DblTimeout"]=setTimeout(function(){s.Konva["_"+we+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),Ue&&Ue.isListening()?(_e=!0,this[we+"ClickEndShape"]=Ue,Ue._fireAndBubble(ye.pointerup,{...Ze}),s.Konva["_"+we+"ListenClick"]&&Se&&Se===Ue&&(Ue._fireAndBubble(ye.pointerclick,{...Ze}),Kt&&Ie&&Ie===Ue&&Ue._fireAndBubble(ye.pointerdblclick,{...Ze}))):(this[we+"ClickEndShape"]=null,s.Konva["_"+we+"ListenClick"]&&this._fire(ye.pointerclick,{evt:oe,target:this,currentTarget:this,pointerId:St}),Kt&&this._fire(ye.pointerdblclick,{evt:oe,target:this,currentTarget:this,pointerId:St}))}),_e||this._fire(ye.pointerup,{evt:oe,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+we+"ListenClick"]=!1,oe.cancelable&&we!=="touch"&&we!=="pointer"&&oe.preventDefault()}_contextmenu(oe){this.setPointersPositions(oe);const ye=this.getIntersection(this.getPointerPosition());ye&&ye.isListening()?ye._fireAndBubble(re,{evt:oe}):this._fire(re,{evt:oe,target:this,currentTarget:this})}_wheel(oe){this.setPointersPositions(oe);const ye=this.getIntersection(this.getPointerPosition());ye&&ye.isListening()?ye._fireAndBubble(H,{evt:oe}):this._fire(H,{evt:oe,target:this,currentTarget:this})}_pointercancel(oe){this.setPointersPositions(oe);const ye=c.getCapturedShape(oe.pointerId)||this.getIntersection(this.getPointerPosition());ye&&ye._fireAndBubble(A,c.createEvent(oe)),c.releaseCapture(oe.pointerId)}_lostpointercapture(oe){c.releaseCapture(oe.pointerId)}setPointersPositions(oe){const ye=this._getContentPosition();let we=null,Se=null;oe=oe||window.event,oe.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(oe.touches,Ie=>{this._pointerPositions.push({id:Ie.identifier,x:(Ie.clientX-ye.left)/ye.scaleX,y:(Ie.clientY-ye.top)/ye.scaleY})}),Array.prototype.forEach.call(oe.changedTouches||oe.touches,Ie=>{this._changedPointerPositions.push({id:Ie.identifier,x:(Ie.clientX-ye.left)/ye.scaleX,y:(Ie.clientY-ye.top)/ye.scaleY})})):(we=(oe.clientX-ye.left)/ye.scaleX,Se=(oe.clientY-ye.top)/ye.scaleY,this.pointerPos={x:we,y:Se},this._pointerPositions=[{x:we,y:Se,id:t.Util._getFirstPointerId(oe)}],this._changedPointerPositions=[{x:we,y:Se,id:t.Util._getFirstPointerId(oe)}])}_setPointerPosition(oe){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(oe)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const oe=this.content.getBoundingClientRect();return{top:oe.top,left:oe.left,scaleX:oe.width/this.content.clientWidth||1,scaleY:oe.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const oe=this.container();if(!oe)throw"Stage has no container. A container is required.";oe.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),oe.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(oe){oe.batchDraw()}),this}}e.Stage=se,se.prototype.nodeType=u,(0,o._registerNode)(se),r.Factory.addGetterSetter(se,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(pe=>{pe.batchDraw()})})})(Z_)),Z_}var I1={},e3={},DE;function Gi(){return DE||(DE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Mn(),r=Fa(),n=Ln(),s=Ya(),a=Gn(),i=Mn(),o=MR(),c="hasShadow",u="shadowRGBA",d="patternImage",f="linearGradient",m="radialGradient";let p;function x(){return p||(p=r.Util.createCanvasElement().getContext("2d"),p)}e.shapes={};function w(O){const L=this.attrs.fillRule;L?O.fill(L):O.fill()}function v(O){O.stroke()}function C(O){const L=this.attrs.fillRule;L?O.fill(L):O.fill()}function k(O){O.stroke()}function b(){this._clearCache(c)}function j(){this._clearCache(u)}function A(){this._clearCache(d)}function F(){this._clearCache(f)}function D(){this._clearCache(m)}class M extends s.Node{constructor(L){super(L);let W;for(;W=r.Util.getRandomColor(),!(W&&!(W in e.shapes)););this.colorKey=W,e.shapes[W]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const W=x().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(W&&W.setTransform){const re=new r.Transform;re.translate(this.fillPatternX(),this.fillPatternY()),re.rotate(t.Konva.getAngle(this.fillPatternRotation())),re.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),re.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const ie=re.getMatrix(),xe=typeof DOMMatrix>"u"?{a:ie[0],b:ie[1],c:ie[2],d:ie[3],e:ie[4],f:ie[5]}:new DOMMatrix(ie);W.setTransform(xe)}return W}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const L=this.fillLinearGradientColorStops();if(L){const W=x(),re=this.fillLinearGradientStartPoint(),ie=this.fillLinearGradientEndPoint(),xe=W.createLinearGradient(re.x,re.y,ie.x,ie.y);for(let de=0;de<L.length;de+=2)xe.addColorStop(L[de],L[de+1]);return xe}}_getRadialGradient(){return this._getCache(m,this.__getRadialGradient)}__getRadialGradient(){const L=this.fillRadialGradientColorStops();if(L){const W=x(),re=this.fillRadialGradientStartPoint(),ie=this.fillRadialGradientEndPoint(),xe=W.createRadialGradient(re.x,re.y,this.fillRadialGradientStartRadius(),ie.x,ie.y,this.fillRadialGradientEndRadius());for(let de=0;de<L.length;de+=2)xe.addColorStop(L[de],L[de+1]);return xe}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const L=r.Util.colorToRGBA(this.shadowColor());if(L)return"rgba("+L.r+","+L.g+","+L.b+","+L.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const L=this.hitStrokeWidth();return L==="auto"?this.hasStroke():this.strokeEnabled()&&!!L}intersects(L){const W=this.getStage();if(!W)return!1;const re=W.bufferHitCanvas;return re.getContext().clear(),this.drawHit(re,void 0,!0),re.context.getImageData(Math.round(L.x),Math.round(L.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(L){var W;if(!((W=this.attrs.perfectDrawEnabled)!==null&&W!==void 0?W:!0))return!1;const ie=L||this.hasFill(),xe=this.hasStroke(),de=this.getAbsoluteOpacity()!==1;if(ie&&xe&&de)return!0;const fe=this.hasShadow(),H=this.shadowForStrokeEnabled();return!!(ie&&xe&&fe&&H)}setStrokeHitEnabled(L){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),L?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const L=this.size();return{x:this._centroid?-L.width/2:0,y:this._centroid?-L.height/2:0,width:L.width,height:L.height}}getClientRect(L={}){let W=!1,re=this.getParent();for(;re;){if(re.isCached()){W=!0;break}re=re.getParent()}const ie=L.skipTransform,xe=L.relativeTo||W&&this.getStage()||void 0,de=this.getSelfRect(),H=!L.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Q=de.width+H,U=de.height+H,V=!L.skipShadow&&this.hasShadow(),X=V?this.shadowOffsetX():0,z=V?this.shadowOffsetY():0,K=Q+Math.abs(X),te=U+Math.abs(z),se=V&&this.shadowBlur()||0,pe=K+se*2,oe=te+se*2,ye={width:pe,height:oe,x:-(H/2+se)+Math.min(X,0)+de.x,y:-(H/2+se)+Math.min(z,0)+de.y};return ie?ye:this._transformedRect(ye,xe)}drawScene(L,W,re){const ie=this.getLayer(),xe=L||ie.getCanvas(),de=xe.getContext(),fe=this._getCanvasCache(),H=this.getSceneFunc(),Q=this.hasShadow();let U;const V=W===this;if(!this.isVisible()&&!V)return this;if(fe){de.save();const X=this.getAbsoluteTransform(W).getMatrix();return de.transform(X[0],X[1],X[2],X[3],X[4],X[5]),this._drawCachedSceneCanvas(de),de.restore(),this}if(!H)return this;if(de.save(),this._useBufferCanvas()){U=this.getStage();const X=re||U.bufferCanvas,z=X.getContext();z.clear(),z.save(),z._applyLineJoin(this);const K=this.getAbsoluteTransform(W).getMatrix();z.transform(K[0],K[1],K[2],K[3],K[4],K[5]),H.call(this,z,this),z.restore();const te=X.pixelRatio;Q&&de._applyShadow(this),de._applyOpacity(this),de._applyGlobalCompositeOperation(this),de.drawImage(X._canvas,X.x||0,X.y||0,X.width/te,X.height/te)}else{if(de._applyLineJoin(this),!V){const X=this.getAbsoluteTransform(W).getMatrix();de.transform(X[0],X[1],X[2],X[3],X[4],X[5]),de._applyOpacity(this),de._applyGlobalCompositeOperation(this)}Q&&de._applyShadow(this),H.call(this,de,this)}return de.restore(),this}drawHit(L,W,re=!1){if(!this.shouldDrawHit(W,re))return this;const ie=this.getLayer(),xe=L||ie.hitCanvas,de=xe&&xe.getContext(),fe=this.hitFunc()||this.sceneFunc(),H=this._getCanvasCache(),Q=H&&H.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),Q){de.save();const V=this.getAbsoluteTransform(W).getMatrix();return de.transform(V[0],V[1],V[2],V[3],V[4],V[5]),this._drawCachedHitCanvas(de),de.restore(),this}if(!fe)return this;if(de.save(),de._applyLineJoin(this),!(this===W)){const V=this.getAbsoluteTransform(W).getMatrix();de.transform(V[0],V[1],V[2],V[3],V[4],V[5])}return fe.call(this,de,this),de.restore(),this}drawHitFromCache(L=0){const W=this._getCanvasCache(),re=this._getCachedSceneCanvas(),ie=W.hit,xe=ie.getContext(),de=ie.getWidth(),fe=ie.getHeight();xe.clear(),xe.drawImage(re._canvas,0,0,de,fe);try{const H=xe.getImageData(0,0,de,fe),Q=H.data,U=Q.length,V=r.Util._hexToRgb(this.colorKey);for(let X=0;X<U;X+=4)Q[X+3]>L?(Q[X]=V.r,Q[X+1]=V.g,Q[X+2]=V.b,Q[X+3]=255):Q[X+3]=0;xe.putImageData(H,0,0)}catch(H){r.Util.error("Unable to draw hit graph from cached scene canvas. "+H.message)}return this}hasPointerCapture(L){return o.hasPointerCapture(L,this)}setPointerCapture(L){o.setPointerCapture(L,this)}releaseCapture(L){o.releaseCapture(L,this)}}e.Shape=M,M.prototype._fillFunc=w,M.prototype._strokeFunc=v,M.prototype._fillFuncHit=C,M.prototype._strokeFuncHit=k,M.prototype._centroid=!1,M.prototype.nodeType="Shape",(0,i._registerNode)(M),M.prototype.eventListeners={},M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",b),M.prototype.on.call(M.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",j),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",A),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",F),M.prototype.on.call(M.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",D),n.Factory.addGetterSetter(M,"stroke",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(M,"strokeWidth",2,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(M,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(M,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(M,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(M,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(M,"lineJoin"),n.Factory.addGetterSetter(M,"lineCap"),n.Factory.addGetterSetter(M,"sceneFunc"),n.Factory.addGetterSetter(M,"hitFunc"),n.Factory.addGetterSetter(M,"dash"),n.Factory.addGetterSetter(M,"dashOffset",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(M,"shadowColor",void 0,(0,a.getStringValidator)()),n.Factory.addGetterSetter(M,"shadowBlur",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(M,"shadowOpacity",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(M,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(M,"shadowOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(M,"shadowOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillPatternImage"),n.Factory.addGetterSetter(M,"fill",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(M,"fillPatternX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillPatternY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(M,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(M,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(M,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(M,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(M,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(M,"fillEnabled",!0),n.Factory.addGetterSetter(M,"strokeEnabled",!0),n.Factory.addGetterSetter(M,"shadowEnabled",!0),n.Factory.addGetterSetter(M,"dashEnabled",!0),n.Factory.addGetterSetter(M,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(M,"fillPriority","color"),n.Factory.addComponentsGetterSetter(M,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(M,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(M,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(M,"fillPatternScaleX",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(M,"fillPatternScaleY",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(M,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(M,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(M,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(M,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(M,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(M,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(M,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(M,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(M,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(M,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(M,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(M,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(M,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(M,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(M,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(M,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(M,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(M,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(M,"fillPatternRotation",0),n.Factory.addGetterSetter(M,"fillRule",void 0,(0,a.getStringValidator)()),n.Factory.backCompat(M,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(e3)),e3}var IE;function FR(){if(IE)return I1;IE=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.Layer=void 0;const e=Fa(),t=Jb(),r=Ya(),n=Ln(),s=Yb(),a=Gn(),i=Gi(),o=Mn(),c="#",u="beforeDraw",d="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=f.length;class p extends t.Container{constructor(w){super(w),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(w){return this.getContext().clear(w),this.getHitCanvas().getContext().clear(w),this}setZIndex(w){super.setZIndex(w);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),w<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[w+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);const w=this.getStage();return w&&w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){const w=this.getStage();if(w){const v=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){const w=this.getStage();if(w){const v=w.children;w.content&&(w.content.removeChild(this.getNativeCanvasElement()),w.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const w=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),w&&w.parentNode&&e.Util._isInDocument(w)&&w.parentNode.removeChild(w),this}getStage(){return this.parent}setSize({width:w,height:v}){return this.canvas.setSize(w,v),this.hitCanvas.setSize(w,v),this._setSmoothEnabled(),this}_validateAdd(w){const v=w.getType();v!=="Group"&&v!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(w){return w=w||{},w.width=w.width||this.getWidth(),w.height=w.height||this.getHeight(),w.x=w.x!==void 0?w.x:this.x(),w.y=w.y!==void 0?w.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,w)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(w){if(!this.isListening()||!this.isVisible())return null;let v=1,C=!1;for(;;){for(let k=0;k<m;k++){const b=f[k],j=this._getIntersection({x:w.x+b.x*v,y:w.y+b.y*v}),A=j.shape;if(A)return A;if(C=!!j.antialiased,!j.antialiased)break}if(C)v+=1;else return null}}_getIntersection(w){const v=this.hitCanvas.pixelRatio,C=this.hitCanvas.context.getImageData(Math.round(w.x*v),Math.round(w.y*v),1,1).data,k=C[3];if(k===255){const b=e.Util._rgbToHex(C[0],C[1],C[2]),j=i.shapes[c+b];return j?{shape:j}:{antialiased:!0}}else if(k>0)return{antialiased:!0};return{}}drawScene(w,v,C){const k=this.getLayer(),b=w||k&&k.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&b.getContext().clear(),t.Container.prototype.drawScene.call(this,b,v,C),this._fire(d,{node:this}),this}drawHit(w,v){const C=this.getLayer(),k=w||C&&C.hitCanvas;return C&&C.clearBeforeDraw()&&C.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,k,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(w){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(w)}getHitGraphEnabled(w){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const w=this.parent;!!this.hitCanvas._canvas.parentNode?w.content.removeChild(this.hitCanvas._canvas):w.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return I1.Layer=p,p.prototype.nodeType="Layer",(0,o._registerNode)(p),n.Factory.addGetterSetter(p,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(p,"clearBeforeDraw",!0),n.Factory.addGetterSetter(p,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),I1}var R1={},RE;function eZ(){if(RE)return R1;RE=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.FastLayer=void 0;const e=Fa(),t=FR(),r=Mn();class n extends t.Layer{constructor(a){super(a),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}return R1.FastLayer=n,n.prototype.nodeType="FastLayer",(0,r._registerNode)(n),R1}var L1={},LE;function c8(){if(LE)return L1;LE=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.Group=void 0;const e=Fa(),t=Jb(),r=Mn();class n extends t.Container{_validateAdd(a){const i=a.getType();i!=="Group"&&i!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return L1.Group=n,n.prototype.nodeType="Group",(0,r._registerNode)(n),L1}var B1={},BE;function u8(){if(BE)return B1;BE=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.Animation=void 0;const e=Mn(),t=Fa(),r=(function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}})();let n=class Bg{constructor(a,i){this.id=Bg.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=a,this.setLayers(i)}setLayers(a){let i=[];return a&&(i=Array.isArray(a)?a:[a]),this.layers=i,this}getLayers(){return this.layers}addLayer(a){const i=this.layers,o=i.length;for(let c=0;c<o;c++)if(i[c]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const i=Bg.animations,o=i.length;for(let c=0;c<o;c++)if(i[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),Bg._addAnimation(this),this}stop(){return Bg._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const i=a.id,o=this.animations,c=o.length;for(let u=0;u<c;u++)if(o[u].id===i){this.animations.splice(u,1);break}}static _runFrames(){const a={},i=this.animations;for(let o=0;o<i.length;o++){const c=i[o],u=c.layers,d=c.func;c._updateFrameObject(r());const f=u.length;let m;if(d?m=d.call(c,c.frame)!==!1:m=!0,!!m)for(let p=0;p<f;p++){const x=u[p];x._id!==void 0&&(a[x._id]=x)}}for(const o in a)a.hasOwnProperty(o)&&a[o].batchDraw()}static _animationLoop(){const a=Bg;a.animations.length?(a._runFrames(),t.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return B1.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,B1}var t3={},$E;function tZ(){return $E||($E=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Fa(),r=u8(),n=Ya(),s=Mn(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=1,o=2,c=3,u=["fill","stroke","shadowColor"];let d=0;class f{constructor(x,w,v,C,k,b,j){this.prop=x,this.propFunc=w,this.begin=C,this._pos=C,this.duration=b,this._change=0,this.prevPos=0,this.yoyo=j,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=k-this.begin,this.pause()}fire(x){const w=this[x];w&&w()}setTime(x){x>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():x<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=x,this.update())}getTime(){return this._time}setPosition(x){this.prevPos=this._pos,this.propFunc(x),this._pos=x}getPosition(x){return x===void 0&&(x=this._time),this.func(x,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(x){this.pause(),this._time=x,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const x=this.getTimer()-this._startTime;this.state===o?this.setTime(x):this.state===c&&this.setTime(this.duration-x)}pause(){this.state=i,this.fire("onPause")}getTimer(){return new Date().getTime()}}class m{constructor(x){const w=this,v=x.node,C=v._id,k=x.easing||e.Easings.Linear,b=!!x.yoyo;let j,A;typeof x.duration>"u"?j=.3:x.duration===0?j=.001:j=x.duration,this.node=v,this._id=d++;const F=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);F||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){w.tween.onEnterFrame()},F),this.tween=new f(A,function(D){w._tweenFunc(D)},k,0,1,j*1e3,b),this._addListeners(),m.attrs[C]||(m.attrs[C]={}),m.attrs[C][this._id]||(m.attrs[C][this._id]={}),m.tweens[C]||(m.tweens[C]={});for(A in x)a[A]===void 0&&this._addAttr(A,x[A]);this.reset(),this.onFinish=x.onFinish,this.onReset=x.onReset,this.onUpdate=x.onUpdate}_addAttr(x,w){const v=this.node,C=v._id;let k,b,j,A,F;const D=m.tweens[C][x];D&&delete m.attrs[C][D][x];let M=v.getAttr(x);if(t.Util._isArray(w))if(k=[],b=Math.max(w.length,M.length),x==="points"&&w.length!==M.length&&(w.length>M.length?(A=M,M=t.Util._prepareArrayForTween(M,w,v.closed())):(j=w,w=t.Util._prepareArrayForTween(w,M,v.closed()))),x.indexOf("fill")===0)for(let O=0;O<b;O++)if(O%2===0)k.push(w[O]-M[O]);else{const L=t.Util.colorToRGBA(M[O]);F=t.Util.colorToRGBA(w[O]),M[O]=L,k.push({r:F.r-L.r,g:F.g-L.g,b:F.b-L.b,a:F.a-L.a})}else for(let O=0;O<b;O++)k.push(w[O]-M[O]);else u.indexOf(x)!==-1?(M=t.Util.colorToRGBA(M),F=t.Util.colorToRGBA(w),k={r:F.r-M.r,g:F.g-M.g,b:F.b-M.b,a:F.a-M.a}):k=w-M;m.attrs[C][this._id][x]={start:M,diff:k,end:w,trueEnd:j,trueStart:A},m.tweens[C][x]=this._id}_tweenFunc(x){const w=this.node,v=m.attrs[w._id][this._id];let C,k,b,j,A,F,D,M;for(C in v){if(k=v[C],b=k.start,j=k.diff,M=k.end,t.Util._isArray(b))if(A=[],D=Math.max(b.length,M.length),C.indexOf("fill")===0)for(F=0;F<D;F++)F%2===0?A.push((b[F]||0)+j[F]*x):A.push("rgba("+Math.round(b[F].r+j[F].r*x)+","+Math.round(b[F].g+j[F].g*x)+","+Math.round(b[F].b+j[F].b*x)+","+(b[F].a+j[F].a*x)+")");else for(F=0;F<D;F++)A.push((b[F]||0)+j[F]*x);else u.indexOf(C)!==-1?A="rgba("+Math.round(b.r+j.r*x)+","+Math.round(b.g+j.g*x)+","+Math.round(b.b+j.b*x)+","+(b.a+j.a*x)+")":A=b+j*x;w.setAttr(C,A)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const x=this.node,w=m.attrs[x._id][this._id];w.points&&w.points.trueEnd&&x.setAttr("points",w.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const x=this.node,w=m.attrs[x._id][this._id];w.points&&w.points.trueStart&&x.points(w.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(x){return this.tween.seek(x*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const x=this.node._id,w=this._id,v=m.tweens[x];this.pause(),this.anim&&this.anim.stop();for(const C in v)delete m.tweens[x][C];delete m.attrs[x][w],m.tweens[x]&&(Object.keys(m.tweens[x]).length===0&&delete m.tweens[x],Object.keys(m.attrs[x]).length===0&&delete m.attrs[x])}}e.Tween=m,m.attrs={},m.tweens={},n.Node.prototype.to=function(p){const x=p.onFinish;p.node=this,p.onFinish=function(){this.destroy(),x&&x()},new m(p).play()},e.Easings={BackEaseIn(p,x,w,v){return w*(p/=v)*p*((1.70158+1)*p-1.70158)+x},BackEaseOut(p,x,w,v){return w*((p=p/v-1)*p*((1.70158+1)*p+1.70158)+1)+x},BackEaseInOut(p,x,w,v){let C=1.70158;return(p/=v/2)<1?w/2*(p*p*(((C*=1.525)+1)*p-C))+x:w/2*((p-=2)*p*(((C*=1.525)+1)*p+C)+2)+x},ElasticEaseIn(p,x,w,v,C,k){let b=0;return p===0?x:(p/=v)===1?x+w:(k||(k=v*.3),!C||C<Math.abs(w)?(C=w,b=k/4):b=k/(2*Math.PI)*Math.asin(w/C),-(C*Math.pow(2,10*(p-=1))*Math.sin((p*v-b)*(2*Math.PI)/k))+x)},ElasticEaseOut(p,x,w,v,C,k){let b=0;return p===0?x:(p/=v)===1?x+w:(k||(k=v*.3),!C||C<Math.abs(w)?(C=w,b=k/4):b=k/(2*Math.PI)*Math.asin(w/C),C*Math.pow(2,-10*p)*Math.sin((p*v-b)*(2*Math.PI)/k)+w+x)},ElasticEaseInOut(p,x,w,v,C,k){let b=0;return p===0?x:(p/=v/2)===2?x+w:(k||(k=v*(.3*1.5)),!C||C<Math.abs(w)?(C=w,b=k/4):b=k/(2*Math.PI)*Math.asin(w/C),p<1?-.5*(C*Math.pow(2,10*(p-=1))*Math.sin((p*v-b)*(2*Math.PI)/k))+x:C*Math.pow(2,-10*(p-=1))*Math.sin((p*v-b)*(2*Math.PI)/k)*.5+w+x)},BounceEaseOut(p,x,w,v){return(p/=v)<1/2.75?w*(7.5625*p*p)+x:p<2/2.75?w*(7.5625*(p-=1.5/2.75)*p+.75)+x:p<2.5/2.75?w*(7.5625*(p-=2.25/2.75)*p+.9375)+x:w*(7.5625*(p-=2.625/2.75)*p+.984375)+x},BounceEaseIn(p,x,w,v){return w-e.Easings.BounceEaseOut(v-p,0,w,v)+x},BounceEaseInOut(p,x,w,v){return p<v/2?e.Easings.BounceEaseIn(p*2,0,w,v)*.5+x:e.Easings.BounceEaseOut(p*2-v,0,w,v)*.5+w*.5+x},EaseIn(p,x,w,v){return w*(p/=v)*p+x},EaseOut(p,x,w,v){return-w*(p/=v)*(p-2)+x},EaseInOut(p,x,w,v){return(p/=v/2)<1?w/2*p*p+x:-w/2*(--p*(p-2)-1)+x},StrongEaseIn(p,x,w,v){return w*(p/=v)*p*p*p*p+x},StrongEaseOut(p,x,w,v){return w*((p=p/v-1)*p*p*p*p+1)+x},StrongEaseInOut(p,x,w,v){return(p/=v/2)<1?w/2*p*p*p*p*p+x:w/2*((p-=2)*p*p*p*p+2)+x},Linear(p,x,w,v){return w*p/v+x}}})(t3)),t3}var zE;function WS(){return zE||(zE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Mn(),r=Fa(),n=Ya(),s=Jb(),a=ZQ(),i=FR(),o=eZ(),c=c8(),u=l8(),d=Gi(),f=u8(),m=tZ(),p=PR(),x=Yb();e.Konva=r.Util._assign(t.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:c.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:m.Tween,Easings:m.Easings,Context:p.Context,Canvas:x.Canvas}),e.default=e.Konva})(K_)),K_}var $1={},UE;function rZ(){if(UE)return $1;UE=1,Object.defineProperty($1,"__esModule",{value:!0}),$1.Arc=void 0;const e=Ln(),t=Gi(),r=Mn(),n=Gn(),s=Mn();class a extends t.Shape{_sceneFunc(o){const c=r.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,c,u),o.arc(0,0,this.innerRadius(),c,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),c=this.outerRadius(),u=this.clockwise(),d=r.Konva.getAngle(u?360-this.angle():this.angle()),f=Math.cos(Math.min(d,Math.PI)),m=1,p=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),x=Math.sin(Math.min(d,Math.PI/2)),w=f*(f>0?o:c),v=m*c,C=p*(p>0?o:c),k=x*(x>0?c:o);return{x:w,y:u?-1*k:C,width:v-w,height:k-C}}}return $1.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1,(0,n.getBooleanValidator)()),$1}var z1={},U1={},WE;function OR(){if(WE)return U1;WE=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.Line=void 0;const e=Ln(),t=Mn(),r=Gi(),n=Gn();function s(o,c,u,d,f,m,p){const x=Math.sqrt(Math.pow(u-o,2)+Math.pow(d-c,2)),w=Math.sqrt(Math.pow(f-u,2)+Math.pow(m-d,2)),v=p*x/(x+w),C=p*w/(x+w),k=u-v*(f-o),b=d-v*(m-c),j=u+C*(f-o),A=d+C*(m-c);return[k,b,j,A]}function a(o,c){const u=o.length,d=[];for(let f=2;f<u-2;f+=2){const m=s(o[f-2],o[f-1],o[f],o[f+1],o[f+2],o[f+3],c);isNaN(m[0])||(d.push(m[0]),d.push(m[1]),d.push(o[f]),d.push(o[f+1]),d.push(m[2]),d.push(m[3]))}return d}class i extends r.Shape{constructor(c){super(c),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(c){const u=this.points(),d=u.length,f=this.tension(),m=this.closed(),p=this.bezier();if(!d)return;let x=0;if(c.beginPath(),c.moveTo(u[0],u[1]),f!==0&&d>4){const w=this.getTensionPoints(),v=w.length;for(x=m?0:4,m||c.quadraticCurveTo(w[0],w[1],w[2],w[3]);x<v-2;)c.bezierCurveTo(w[x++],w[x++],w[x++],w[x++],w[x++],w[x++]);m||c.quadraticCurveTo(w[v-2],w[v-1],u[d-2],u[d-1])}else if(p)for(x=2;x<d;)c.bezierCurveTo(u[x++],u[x++],u[x++],u[x++],u[x++],u[x++]);else for(x=2;x<d;x+=2)c.lineTo(u[x],u[x+1]);m?(c.closePath(),c.fillStrokeShape(this)):c.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const c=this.points(),u=c.length,d=this.tension(),f=s(c[u-2],c[u-1],c[0],c[1],c[2],c[3],d),m=s(c[u-4],c[u-3],c[u-2],c[u-1],c[0],c[1],d),p=a(c,d);return[f[2],f[3]].concat(p).concat([m[0],m[1],c[u-2],c[u-1],m[2],m[3],f[0],f[1],c[0],c[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let c=this.points();if(c.length<4)return{x:c[0]||0,y:c[1]||0,width:0,height:0};this.tension()!==0?c=[c[0],c[1],...this._getTensionPoints(),c[c.length-2],c[c.length-1]]:c=this.points();let u=c[0],d=c[0],f=c[1],m=c[1],p,x;for(let w=0;w<c.length/2;w++)p=c[w*2],x=c[w*2+1],u=Math.min(u,p),d=Math.max(d,p),f=Math.min(f,x),m=Math.max(m,x);return{x:u,y:f,width:d-u,height:m-f}}}return U1.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,n.getNumberArrayValidator)()),U1}var W1={},r3={},HE;function nZ(){return HE||(HE=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(i,o,c)=>{let u,d;const m=c/2;u=0;for(let p=0;p<20;p++)d=m*e.tValues[20][p]+m,u+=e.cValues[20][p]*n(i,o,d);return m*u};e.getCubicArcLength=t;const r=(i,o,c)=>{c===void 0&&(c=1);const u=i[0]-2*i[1]+i[2],d=o[0]-2*o[1]+o[2],f=2*i[1]-2*i[0],m=2*o[1]-2*o[0],p=4*(u*u+d*d),x=4*(u*f+d*m),w=f*f+m*m;if(p===0)return c*Math.sqrt(Math.pow(i[2]-i[0],2)+Math.pow(o[2]-o[0],2));const v=x/(2*p),C=w/p,k=c+v,b=C-v*v,j=k*k+b>0?Math.sqrt(k*k+b):0,A=v*v+b>0?Math.sqrt(v*v+b):0,F=v+Math.sqrt(v*v+b)!==0?b*Math.log(Math.abs((k+j)/(v+A))):0;return Math.sqrt(p)/2*(k*j-v*A+F)};e.getQuadraticArcLength=r;function n(i,o,c){const u=s(1,c,i),d=s(1,c,o),f=u*u+d*d;return Math.sqrt(f)}const s=(i,o,c)=>{const u=c.length-1;let d,f;if(u===0)return 0;if(i===0){f=0;for(let m=0;m<=u;m++)f+=e.binomialCoefficients[u][m]*Math.pow(1-o,u-m)*Math.pow(o,m)*c[m];return f}else{d=new Array(u);for(let m=0;m<u;m++)d[m]=u*(c[m+1]-c[m]);return s(i-1,o,d)}},a=(i,o,c)=>{let u=1,d=i/o,f=(i-c(d))/o,m=0;for(;u>.001;){const p=c(d+f),x=Math.abs(i-p)/o;if(x<u)u=x,d+=f;else{const w=c(d-f),v=Math.abs(i-w)/o;v<u?(u=v,d-=f):f/=2}if(m++,m>500)break}return d};e.t2length=a})(r3)),r3}var GE;function d8(){if(GE)return W1;GE=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.Path=void 0;const e=Ln(),t=Mn(),r=Gi(),n=nZ();class s extends r.Shape{constructor(i){super(i),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=s.parsePathData(this.data()),this.pathLength=s.getPathLength(this.dataArray)}_sceneFunc(i){const o=this.dataArray;i.beginPath();let c=!1;for(let u=0;u<o.length;u++){const d=o[u].command,f=o[u].points;switch(d){case"L":i.lineTo(f[0],f[1]);break;case"M":i.moveTo(f[0],f[1]);break;case"C":i.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":i.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const m=f[0],p=f[1],x=f[2],w=f[3],v=f[4],C=f[5],k=f[6],b=f[7],j=x>w?x:w,A=x>w?1:x/w,F=x>w?w/x:1;i.translate(m,p),i.rotate(k),i.scale(A,F),i.arc(0,0,j,v,v+C,1-b),i.scale(1/A,1/F),i.rotate(-k),i.translate(-m,-p);break;case"z":c=!0,i.closePath();break}}!c&&!this.hasFill()?i.strokeShape(this):i.fillStrokeShape(this)}getSelfRect(){let i=[];this.dataArray.forEach(function(p){if(p.command==="A"){const x=p.points[4],w=p.points[5],v=p.points[4]+w;let C=Math.PI/180;if(Math.abs(x-v)<C&&(C=Math.abs(x-v)),w<0)for(let k=x-C;k>v;k-=C){const b=s.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],k,0);i.push(b.x,b.y)}else for(let k=x+C;k<v;k+=C){const b=s.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],k,0);i.push(b.x,b.y)}}else if(p.command==="C")for(let x=0;x<=1;x+=.01){const w=s.getPointOnCubicBezier(x,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);i.push(w.x,w.y)}else i=i.concat(p.points)});let o=i[0],c=i[0],u=i[1],d=i[1],f,m;for(let p=0;p<i.length/2;p++)f=i[p*2],m=i[p*2+1],isNaN(f)||(o=Math.min(o,f),c=Math.max(c,f)),isNaN(m)||(u=Math.min(u,m),d=Math.max(d,m));return{x:o,y:u,width:c-o,height:d-u}}getLength(){return this.pathLength}getPointAtLength(i){return s.getPointAtLengthOfDataArray(i,this.dataArray)}static getLineLength(i,o,c,u){return Math.sqrt((c-i)*(c-i)+(u-o)*(u-o))}static getPathLength(i){let o=0;for(let c=0;c<i.length;++c)o+=i[c].pathLength;return o}static getPointAtLengthOfDataArray(i,o){let c,u=0,d=o.length;if(!d)return null;for(;u<d&&i>o[u].pathLength;)i-=o[u].pathLength,++u;if(u===d)return c=o[u-1].points.slice(-2),{x:c[0],y:c[1]};if(i<.01)return o[u].command==="M"?(c=o[u].points.slice(0,2),{x:c[0],y:c[1]}):{x:o[u].start.x,y:o[u].start.y};const f=o[u],m=f.points;switch(f.command){case"L":return s.getPointOnLine(i,f.start.x,f.start.y,m[0],m[1]);case"C":return s.getPointOnCubicBezier((0,n.t2length)(i,s.getPathLength(o),j=>(0,n.getCubicArcLength)([f.start.x,m[0],m[2],m[4]],[f.start.y,m[1],m[3],m[5]],j)),f.start.x,f.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return s.getPointOnQuadraticBezier((0,n.t2length)(i,s.getPathLength(o),j=>(0,n.getQuadraticArcLength)([f.start.x,m[0],m[2]],[f.start.y,m[1],m[3]],j)),f.start.x,f.start.y,m[0],m[1],m[2],m[3]);case"A":const p=m[0],x=m[1],w=m[2],v=m[3],C=m[5],k=m[6];let b=m[4];return b+=C*i/f.pathLength,s.getPointOnEllipticalArc(p,x,w,v,b,k)}return null}static getPointOnLine(i,o,c,u,d,f,m){f=f??o,m=m??c;const p=this.getLineLength(o,c,u,d);if(p<1e-10)return{x:o,y:c};if(u===o)return{x:f,y:m+(d>c?i:-i)};const x=(d-c)/(u-o),w=Math.sqrt(i*i/(1+x*x))*(u<o?-1:1),v=x*w;if(Math.abs(m-c-x*(f-o))<1e-10)return{x:f+w,y:m+v};const C=((f-o)*(u-o)+(m-c)*(d-c))/(p*p),k=o+C*(u-o),b=c+C*(d-c),j=this.getLineLength(f,m,k,b),A=Math.sqrt(i*i-j*j),F=Math.sqrt(A*A/(1+x*x))*(u<o?-1:1),D=x*F;return{x:k+F,y:b+D}}static getPointOnCubicBezier(i,o,c,u,d,f,m,p,x){function w(A){return A*A*A}function v(A){return 3*A*A*(1-A)}function C(A){return 3*A*(1-A)*(1-A)}function k(A){return(1-A)*(1-A)*(1-A)}const b=p*w(i)+f*v(i)+u*C(i)+o*k(i),j=x*w(i)+m*v(i)+d*C(i)+c*k(i);return{x:b,y:j}}static getPointOnQuadraticBezier(i,o,c,u,d,f,m){function p(k){return k*k}function x(k){return 2*k*(1-k)}function w(k){return(1-k)*(1-k)}const v=f*p(i)+u*x(i)+o*w(i),C=m*p(i)+d*x(i)+c*w(i);return{x:v,y:C}}static getPointOnEllipticalArc(i,o,c,u,d,f){const m=Math.cos(f),p=Math.sin(f),x={x:c*Math.cos(d),y:u*Math.sin(d)};return{x:i+(x.x*m-x.y*p),y:o+(x.x*p+x.y*m)}}static parsePathData(i){if(!i)return[];let o=i;const c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let v=0;v<c.length;v++)o=o.replace(new RegExp(c[v],"g"),"|"+c[v]);const u=o.split("|"),d=[],f=[];let m=0,p=0;const x=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let w;for(let v=1;v<u.length;v++){let C=u[v],k=C.charAt(0);for(C=C.slice(1),f.length=0;w=x.exec(C);)f.push(w[0]);const b=[];for(let j=0,A=f.length;j<A;j++){if(f[j]==="00"){b.push(0,0);continue}const F=parseFloat(f[j]);isNaN(F)?b.push(0):b.push(F)}for(;b.length>0&&!isNaN(b[0]);){let j="",A=[];const F=m,D=p;let M,O,L,W,re,ie,xe,de,fe,H;switch(k){case"l":m+=b.shift(),p+=b.shift(),j="L",A.push(m,p);break;case"L":m=b.shift(),p=b.shift(),A.push(m,p);break;case"m":const Q=b.shift(),U=b.shift();if(m+=Q,p+=U,j="M",d.length>2&&d[d.length-1].command==="z"){for(let V=d.length-2;V>=0;V--)if(d[V].command==="M"){m=d[V].points[0]+Q,p=d[V].points[1]+U;break}}A.push(m,p),k="l";break;case"M":m=b.shift(),p=b.shift(),j="M",A.push(m,p),k="L";break;case"h":m+=b.shift(),j="L",A.push(m,p);break;case"H":m=b.shift(),j="L",A.push(m,p);break;case"v":p+=b.shift(),j="L",A.push(m,p);break;case"V":p=b.shift(),j="L",A.push(m,p);break;case"C":A.push(b.shift(),b.shift(),b.shift(),b.shift()),m=b.shift(),p=b.shift(),A.push(m,p);break;case"c":A.push(m+b.shift(),p+b.shift(),m+b.shift(),p+b.shift()),m+=b.shift(),p+=b.shift(),j="C",A.push(m,p);break;case"S":O=m,L=p,M=d[d.length-1],M.command==="C"&&(O=m+(m-M.points[2]),L=p+(p-M.points[3])),A.push(O,L,b.shift(),b.shift()),m=b.shift(),p=b.shift(),j="C",A.push(m,p);break;case"s":O=m,L=p,M=d[d.length-1],M.command==="C"&&(O=m+(m-M.points[2]),L=p+(p-M.points[3])),A.push(O,L,m+b.shift(),p+b.shift()),m+=b.shift(),p+=b.shift(),j="C",A.push(m,p);break;case"Q":A.push(b.shift(),b.shift()),m=b.shift(),p=b.shift(),A.push(m,p);break;case"q":A.push(m+b.shift(),p+b.shift()),m+=b.shift(),p+=b.shift(),j="Q",A.push(m,p);break;case"T":O=m,L=p,M=d[d.length-1],M.command==="Q"&&(O=m+(m-M.points[0]),L=p+(p-M.points[1])),m=b.shift(),p=b.shift(),j="Q",A.push(O,L,m,p);break;case"t":O=m,L=p,M=d[d.length-1],M.command==="Q"&&(O=m+(m-M.points[0]),L=p+(p-M.points[1])),m+=b.shift(),p+=b.shift(),j="Q",A.push(O,L,m,p);break;case"A":W=b.shift(),re=b.shift(),ie=b.shift(),xe=b.shift(),de=b.shift(),fe=m,H=p,m=b.shift(),p=b.shift(),j="A",A=this.convertEndpointToCenterParameterization(fe,H,m,p,xe,de,W,re,ie);break;case"a":W=b.shift(),re=b.shift(),ie=b.shift(),xe=b.shift(),de=b.shift(),fe=m,H=p,m+=b.shift(),p+=b.shift(),j="A",A=this.convertEndpointToCenterParameterization(fe,H,m,p,xe,de,W,re,ie);break}d.push({command:j||k,points:A,start:{x:F,y:D},pathLength:this.calcLength(F,D,j||k,A)})}(k==="z"||k==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(i,o,c,u){let d,f,m,p;const x=s;switch(c){case"L":return x.getLineLength(i,o,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([i,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([i,u[0],u[2]],[o,u[1],u[3]],1);case"A":d=0;const w=u[4],v=u[5],C=u[4]+v;let k=Math.PI/180;if(Math.abs(w-C)<k&&(k=Math.abs(w-C)),f=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],w,0),v<0)for(p=w-k;p>C;p-=k)m=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],p,0),d+=x.getLineLength(f.x,f.y,m.x,m.y),f=m;else for(p=w+k;p<C;p+=k)m=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],p,0),d+=x.getLineLength(f.x,f.y,m.x,m.y),f=m;return m=x.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],C,0),d+=x.getLineLength(f.x,f.y,m.x,m.y),d}return 0}static convertEndpointToCenterParameterization(i,o,c,u,d,f,m,p,x){const w=x*(Math.PI/180),v=Math.cos(w)*(i-c)/2+Math.sin(w)*(o-u)/2,C=-1*Math.sin(w)*(i-c)/2+Math.cos(w)*(o-u)/2,k=v*v/(m*m)+C*C/(p*p);k>1&&(m*=Math.sqrt(k),p*=Math.sqrt(k));let b=Math.sqrt((m*m*(p*p)-m*m*(C*C)-p*p*(v*v))/(m*m*(C*C)+p*p*(v*v)));d===f&&(b*=-1),isNaN(b)&&(b=0);const j=b*m*C/p,A=b*-p*v/m,F=(i+c)/2+Math.cos(w)*j-Math.sin(w)*A,D=(o+u)/2+Math.sin(w)*j+Math.cos(w)*A,M=function(de){return Math.sqrt(de[0]*de[0]+de[1]*de[1])},O=function(de,fe){return(de[0]*fe[0]+de[1]*fe[1])/(M(de)*M(fe))},L=function(de,fe){return(de[0]*fe[1]<de[1]*fe[0]?-1:1)*Math.acos(O(de,fe))},W=L([1,0],[(v-j)/m,(C-A)/p]),re=[(v-j)/m,(C-A)/p],ie=[(-1*v-j)/m,(-1*C-A)/p];let xe=L(re,ie);return O(re,ie)<=-1&&(xe=Math.PI),O(re,ie)>=1&&(xe=0),f===0&&xe>0&&(xe=xe-2*Math.PI),f===1&&xe<0&&(xe=xe+2*Math.PI),[F,D,m,p,W,xe,w,f]}}return W1.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"data"),W1}var VE;function sZ(){if(VE)return z1;VE=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.Arrow=void 0;const e=Ln(),t=OR(),r=Gn(),n=Mn(),s=d8();class a extends t.Line{_sceneFunc(o){super._sceneFunc(o);const c=Math.PI*2,u=this.points();let d=u;const f=this.tension()!==0&&u.length>4;f&&(d=this.getTensionPoints());const m=this.pointerLength(),p=u.length;let x,w;if(f){const k=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[p-2],u[p-1]],b=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",k),j=s.Path.getPointOnQuadraticBezier(Math.min(1,1-m/b),k[0],k[1],k[2],k[3],k[4],k[5]);x=u[p-2]-j.x,w=u[p-1]-j.y}else x=u[p-2]-u[p-4],w=u[p-1]-u[p-3];const v=(Math.atan2(w,x)+c)%c,C=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[p-2],u[p-1]),o.rotate(v),o.moveTo(0,0),o.lineTo(-m,C/2),o.lineTo(-m,-C/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),f?(x=(d[0]+d[2])/2-u[0],w=(d[1]+d[3])/2-u[1]):(x=u[2]-u[0],w=u[3]-u[1]),o.rotate((Math.atan2(-w,-x)+c)%c),o.moveTo(0,0),o.lineTo(-m,C/2),o.lineTo(-m,-C/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),c=this.pointerWidth()/2;return{x:o.x,y:o.y-c,width:o.width,height:o.height+c*2}}}return z1.Arrow=a,a.prototype.className="Arrow",(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"pointerLength",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerWidth",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerAtBeginning",!1),e.Factory.addGetterSetter(a,"pointerAtEnding",!0),z1}var H1={},qE;function aZ(){if(qE)return H1;qE=1,Object.defineProperty(H1,"__esModule",{value:!0}),H1.Circle=void 0;const e=Ln(),t=Gi(),r=Gn(),n=Mn();class s extends t.Shape{_sceneFunc(i){i.beginPath(),i.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius()!==i/2&&this.radius(i/2)}setHeight(i){this.radius()!==i/2&&this.radius(i/2)}}return H1.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),H1}var G1={},KE;function iZ(){if(KE)return G1;KE=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.Ellipse=void 0;const e=Ln(),t=Gi(),r=Gn(),n=Mn();class s extends t.Shape{_sceneFunc(i){const o=this.radiusX(),c=this.radiusY();i.beginPath(),i.save(),o!==c&&i.scale(1,c/o),i.arc(0,0,o,0,Math.PI*2,!1),i.restore(),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(i){this.radiusX(i/2)}setHeight(i){this.radiusY(i/2)}}return G1.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),e.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),e.Factory.addGetterSetter(s,"radiusX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"radiusY",0,(0,r.getNumberValidator)()),G1}var V1={},XE;function oZ(){if(XE)return V1;XE=1,Object.defineProperty(V1,"__esModule",{value:!0}),V1.Image=void 0;const e=Fa(),t=Ln(),r=Gi(),n=Mn(),s=Gn();class a extends r.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",c=>{this._removeImageLoad(c.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),c=this.hasShadow();return o&&c?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const c=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),f=this.attrs.image;let m;if(f){const p=this.attrs.cropWidth,x=this.attrs.cropHeight;p&&x?m=[f,this.cropX(),this.cropY(),p,x,0,0,c,u]:m=[f,0,0,c,u]}(this.hasFill()||this.hasStroke()||d)&&(o.beginPath(),d?e.Util.drawRoundedRectPath(o,c,u,d):o.rect(0,0,c,u),o.closePath(),o.fillStrokeShape(this)),f&&(d&&o.clip(),o.drawImage.apply(o,m))}_hitFunc(o){const c=this.width(),u=this.height(),d=this.cornerRadius();o.beginPath(),d?e.Util.drawRoundedRectPath(o,c,u,d):o.rect(0,0,c,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,c;return(o=this.attrs.width)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.width}getHeight(){var o,c;return(o=this.attrs.height)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.height}static fromURL(o,c,u=null){const d=e.Util.createImageElement();d.onload=function(){const f=new a({image:d});c(f)},d.onerror=u,d.crossOrigin="Anonymous",d.src=o}}return V1.Image=a,a.prototype.className="Image",(0,n._registerNode)(a),t.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(a,"image"),t.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(a,"cropX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropHeight",0,(0,s.getNumberValidator)()),V1}var Hh={},YE;function lZ(){if(YE)return Hh;YE=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.Tag=Hh.Label=void 0;const e=Ln(),t=Gi(),r=c8(),n=Gn(),s=Mn(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="Change.konva",o="none",c="up",u="right",d="down",f="left",m=a.length;class p extends r.Group{constructor(v){super(v),this.on("add.konva",function(C){this._addListeners(C.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let C=this,k;const b=function(){C._sync()};for(k=0;k<m;k++)v.on(a[k]+i,b)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),C=this.getTag(),k,b,j,A,F,D,M;if(v&&C){switch(k=v.width(),b=v.height(),j=C.pointerDirection(),A=C.pointerWidth(),M=C.pointerHeight(),F=0,D=0,j){case c:F=k/2,D=-1*M;break;case u:F=k+A,D=b/2;break;case d:F=k/2,D=b+M;break;case f:F=-1*A,D=b/2;break}C.setAttrs({x:-1*F,y:-1*D,width:k,height:b}),v.setAttrs({x:-1*F,y:-1*D})}}}Hh.Label=p,p.prototype.className="Label",(0,s._registerNode)(p);class x extends t.Shape{_sceneFunc(v){const C=this.width(),k=this.height(),b=this.pointerDirection(),j=this.pointerWidth(),A=this.pointerHeight(),F=this.cornerRadius();let D=0,M=0,O=0,L=0;typeof F=="number"?D=M=O=L=Math.min(F,C/2,k/2):(D=Math.min(F[0]||0,C/2,k/2),M=Math.min(F[1]||0,C/2,k/2),L=Math.min(F[2]||0,C/2,k/2),O=Math.min(F[3]||0,C/2,k/2)),v.beginPath(),v.moveTo(D,0),b===c&&(v.lineTo((C-j)/2,0),v.lineTo(C/2,-1*A),v.lineTo((C+j)/2,0)),v.lineTo(C-M,0),v.arc(C-M,M,M,Math.PI*3/2,0,!1),b===u&&(v.lineTo(C,(k-A)/2),v.lineTo(C+j,k/2),v.lineTo(C,(k+A)/2)),v.lineTo(C,k-L),v.arc(C-L,k-L,L,0,Math.PI/2,!1),b===d&&(v.lineTo((C+j)/2,k),v.lineTo(C/2,k+A),v.lineTo((C-j)/2,k)),v.lineTo(O,k),v.arc(O,k-O,O,Math.PI/2,Math.PI,!1),b===f&&(v.lineTo(0,(k+A)/2),v.lineTo(-1*j,k/2),v.lineTo(0,(k-A)/2)),v.lineTo(0,D),v.arc(D,D,D,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,C=0,k=this.pointerWidth(),b=this.pointerHeight(),j=this.pointerDirection(),A=this.width(),F=this.height();return j===c?(C-=b,F+=b):j===d?F+=b:j===f?(v-=k*1.5,A+=k):j===u&&(A+=k*1.5),{x:v,y:C,width:A,height:F}}}return Hh.Tag=x,x.prototype.className="Tag",(0,s._registerNode)(x),e.Factory.addGetterSetter(x,"pointerDirection",o),e.Factory.addGetterSetter(x,"pointerWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"pointerHeight",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(x,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),Hh}var q1={},JE;function DR(){if(JE)return q1;JE=1,Object.defineProperty(q1,"__esModule",{value:!0}),q1.Rect=void 0;const e=Ln(),t=Gi(),r=Mn(),n=Fa(),s=Gn();class a extends t.Shape{_sceneFunc(o){const c=this.cornerRadius(),u=this.width(),d=this.height();o.beginPath(),c?n.Util.drawRoundedRectPath(o,u,d,c):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}}return q1.Rect=a,a.prototype.className="Rect",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),q1}var K1={},QE;function cZ(){if(QE)return K1;QE=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.RegularPolygon=void 0;const e=Ln(),t=Gi(),r=Gn(),n=Mn();class s extends t.Shape{_sceneFunc(i){const o=this._getPoints();i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let c=1;c<o.length;c++)i.lineTo(o[c].x,o[c].y);i.closePath(),i.fillStrokeShape(this)}_getPoints(){const i=this.attrs.sides,o=this.attrs.radius||0,c=[];for(let u=0;u<i;u++)c.push({x:o*Math.sin(u*2*Math.PI/i),y:-1*o*Math.cos(u*2*Math.PI/i)});return c}getSelfRect(){const i=this._getPoints();let o=i[0].x,c=i[0].y,u=i[0].x,d=i[0].y;return i.forEach(f=>{o=Math.min(o,f.x),c=Math.max(c,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:o,y:u,width:c-o,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius(i/2)}setHeight(i){this.radius(i/2)}}return K1.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"sides",0,(0,r.getNumberValidator)()),K1}var X1={},ZE;function uZ(){if(ZE)return X1;ZE=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.Ring=void 0;const e=Ln(),t=Gi(),r=Gn(),n=Mn(),s=Math.PI*2;class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,s,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),s,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}return X1.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),X1}var Y1={},e9;function dZ(){if(e9)return Y1;e9=1,Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.Sprite=void 0;const e=Ln(),t=Gi(),r=u8(),n=Gn(),s=Mn();class a extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new r.Animation(()=>{const c=this._updated;return this._updated=!1,c}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],m=this.frameOffsets(),p=f[d+0],x=f[d+1],w=f[d+2],v=f[d+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,w,v),o.closePath(),o.fillStrokeShape(this)),C)if(m){const k=m[c],b=u*2;o.drawImage(C,p,x,w,v,k[b+0],k[b+1],w,v)}else o.drawImage(C,p,x,w,v,0,0,w,v)}_hitFunc(o){const c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],m=this.frameOffsets(),p=f[d+2],x=f[d+3];if(o.beginPath(),m){const w=m[c],v=u*2;o.rect(w[v+0],w[v+1],p,x)}else o.rect(0,0,p,x);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),c=this.animation(),u=this.animations(),d=u[c],f=d.length/4;o<f-1?this.frameIndex(o+1):this.frameIndex(0)}}return Y1.Sprite=a,a.prototype.className="Sprite",(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"animation"),e.Factory.addGetterSetter(a,"animations"),e.Factory.addGetterSetter(a,"frameOffsets"),e.Factory.addGetterSetter(a,"image"),e.Factory.addGetterSetter(a,"frameIndex",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"frameRate",17,(0,n.getNumberValidator)()),e.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Y1}var J1={},t9;function fZ(){if(t9)return J1;t9=1,Object.defineProperty(J1,"__esModule",{value:!0}),J1.Star=void 0;const e=Ln(),t=Gi(),r=Gn(),n=Mn();class s extends t.Shape{_sceneFunc(i){const o=this.innerRadius(),c=this.outerRadius(),u=this.numPoints();i.beginPath(),i.moveTo(0,0-c);for(let d=1;d<u*2;d++){const f=d%2===0?c:o,m=f*Math.sin(d*Math.PI/u),p=-1*f*Math.cos(d*Math.PI/u);i.lineTo(m,p)}i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(i){this.outerRadius(i/2)}setHeight(i){this.outerRadius(i/2)}}return J1.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"numPoints",5,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),J1}var Mg={},r9;function IR(){if(r9)return Mg;r9=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.Text=void 0,Mg.stringToArray=i;const e=Fa(),t=Ln(),r=Gi(),n=Mn(),s=Gn(),a=Mn();function i(z){return[...z].reduce((K,te,se,pe)=>{if(new RegExp("\\p{Emoji}","u").test(te)){const oe=pe[se+1];oe&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(oe)?(K.push(te+oe),pe[se+1]=""):K.push(te)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(te+(pe[se+1]||""))?K.push(te+pe[se+1]):se>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(te)?K[K.length-1]+=te:te&&K.push(te);return K},[])}const o="auto",c="center",u="inherit",d="justify",f="Change.konva",m="2d",p="-",x="left",w="text",v="Text",C="top",k="bottom",b="middle",j="normal",A="px ",F=" ",D="right",M="rtl",O="word",L="char",W="none",re="",ie=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],xe=ie.length;function de(z){return z.split(",").map(K=>{K=K.trim();const te=K.indexOf(" ")>=0,se=K.indexOf('"')>=0||K.indexOf("'")>=0;return te&&!se&&(K=`"${K}"`),K}).join(", ")}let fe;function H(){return fe||(fe=e.Util.createCanvasElement().getContext(m),fe)}function Q(z){z.fillText(this._partialText,this._partialTextX,this._partialTextY)}function U(z){z.setAttr("miterLimit",2),z.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function V(z){return z=z||{},!z.fillLinearGradientColorStops&&!z.fillRadialGradientColorStops&&!z.fillPatternImage&&(z.fill=z.fill||"black"),z}class X extends r.Shape{constructor(K){super(V(K)),this._partialTextX=0,this._partialTextY=0;for(let te=0;te<xe;te++)this.on(ie[te]+f,this._setTextData);this._setTextData()}_sceneFunc(K){const te=this.textArr,se=te.length;if(!this.text())return;let pe=this.padding(),oe=this.fontSize(),ye=this.lineHeight()*oe,we=this.verticalAlign(),Se=this.direction(),Ie=0,me=this.align(),_e=this.getWidth(),We=this.letterSpacing(),Ue=this.fill(),St=this.textDecoration(),Ze=St.indexOf("underline")!==-1,Kt=St.indexOf("line-through")!==-1,yt;Se=Se===u?K.direction:Se;let Rt=ye/2,At=b;if(n.Konva._fixTextRendering){const wt=this.measureSize("M");At="alphabetic",Rt=(wt.fontBoundingBoxAscent-wt.fontBoundingBoxDescent)/2+ye/2}for(Se===M&&K.setAttr("direction",Se),K.setAttr("font",this._getContextFont()),K.setAttr("textBaseline",At),K.setAttr("textAlign",x),we===b?Ie=(this.getHeight()-se*ye-pe*2)/2:we===k&&(Ie=this.getHeight()-se*ye-pe*2),K.translate(pe,Ie+pe),yt=0;yt<se;yt++){let wt=0,Ft=0;const or=te[yt],dr=or.text,nr=or.width,Xe=or.lastInParagraph;if(K.save(),me===D?wt+=_e-nr-pe*2:me===c&&(wt+=(_e-nr-pe*2)/2),Ze){K.save(),K.beginPath();const Qe=n.Konva._fixTextRendering?Math.round(oe/4):Math.round(oe/2),ut=wt,mt=Rt+Ft+Qe;K.moveTo(ut,mt);const ht=me===d&&!Xe?_e-pe*2:nr;K.lineTo(ut+Math.round(ht),mt),K.lineWidth=oe/15;const Ot=this._getLinearGradient();K.strokeStyle=Ot||Ue,K.stroke(),K.restore()}if(Kt){K.save(),K.beginPath();const Qe=n.Konva._fixTextRendering?-Math.round(oe/4):0;K.moveTo(wt,Rt+Ft+Qe);const ut=me===d&&!Xe?_e-pe*2:nr;K.lineTo(wt+Math.round(ut),Rt+Ft+Qe),K.lineWidth=oe/15;const mt=this._getLinearGradient();K.strokeStyle=mt||Ue,K.stroke(),K.restore()}if(Se!==M&&(We!==0||me===d)){const Qe=dr.split(" ").length-1,ut=i(dr);for(let mt=0;mt<ut.length;mt++){const ht=ut[mt];ht===" "&&!Xe&&me===d&&(wt+=(_e-pe*2-nr)/Qe),this._partialTextX=wt,this._partialTextY=Rt+Ft,this._partialText=ht,K.fillStrokeShape(this),wt+=this.measureSize(ht).width+We}}else We!==0&&K.setAttr("letterSpacing",`${We}px`),this._partialTextX=wt,this._partialTextY=Rt+Ft,this._partialText=dr,K.fillStrokeShape(this);K.restore(),se>1&&(Rt+=ye)}}_hitFunc(K){const te=this.getWidth(),se=this.getHeight();K.beginPath(),K.rect(0,0,te,se),K.closePath(),K.fillStrokeShape(this)}setText(K){const te=e.Util._isString(K)?K:K==null?"":K+"";return this._setAttr(w,te),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(K){var te,se,pe,oe,ye,we,Se,Ie,me,_e,We;let Ue=H(),St=this.fontSize(),Ze;Ue.save(),Ue.font=this._getContextFont(),Ze=Ue.measureText(K),Ue.restore();const Kt=St/100;return{actualBoundingBoxAscent:(te=Ze.actualBoundingBoxAscent)!==null&&te!==void 0?te:71.58203125*Kt,actualBoundingBoxDescent:(se=Ze.actualBoundingBoxDescent)!==null&&se!==void 0?se:0,actualBoundingBoxLeft:(pe=Ze.actualBoundingBoxLeft)!==null&&pe!==void 0?pe:-7.421875*Kt,actualBoundingBoxRight:(oe=Ze.actualBoundingBoxRight)!==null&&oe!==void 0?oe:75.732421875*Kt,alphabeticBaseline:(ye=Ze.alphabeticBaseline)!==null&&ye!==void 0?ye:0,emHeightAscent:(we=Ze.emHeightAscent)!==null&&we!==void 0?we:100*Kt,emHeightDescent:(Se=Ze.emHeightDescent)!==null&&Se!==void 0?Se:-20*Kt,fontBoundingBoxAscent:(Ie=Ze.fontBoundingBoxAscent)!==null&&Ie!==void 0?Ie:91*Kt,fontBoundingBoxDescent:(me=Ze.fontBoundingBoxDescent)!==null&&me!==void 0?me:21*Kt,hangingBaseline:(_e=Ze.hangingBaseline)!==null&&_e!==void 0?_e:72.80000305175781*Kt,ideographicBaseline:(We=Ze.ideographicBaseline)!==null&&We!==void 0?We:-21*Kt,width:Ze.width,height:St}}_getContextFont(){return this.fontStyle()+F+this.fontVariant()+F+(this.fontSize()+A)+de(this.fontFamily())}_addTextLine(K){this.align()===d&&(K=K.trim());const se=this._getTextWidth(K);return this.textArr.push({text:K,width:se,lastInParagraph:!1})}_getTextWidth(K){const te=this.letterSpacing(),se=K.length;return H().measureText(K).width+te*se}_setTextData(){let K=this.text().split(`
`),te=+this.fontSize(),se=0,pe=this.lineHeight()*te,oe=this.attrs.width,ye=this.attrs.height,we=oe!==o&&oe!==void 0,Se=ye!==o&&ye!==void 0,Ie=this.padding(),me=oe-Ie*2,_e=ye-Ie*2,We=0,Ue=this.wrap(),St=Ue!==W,Ze=Ue!==L&&St,Kt=this.ellipsis();this.textArr=[],H().font=this._getContextFont();const yt=Kt?this._getTextWidth(re):0;for(let Rt=0,At=K.length;Rt<At;++Rt){let wt=K[Rt],Ft=this._getTextWidth(wt);if(we&&Ft>me)for(;wt.length>0;){let or=0,dr=i(wt).length,nr="",Xe=0;for(;or<dr;){const Qe=or+dr>>>1,ut=i(wt),mt=ut.slice(0,Qe+1).join(""),ht=this._getTextWidth(mt);(Kt&&Se&&We+pe>_e?ht+yt:ht)<=me?(or=Qe+1,nr=mt,Xe=ht):dr=Qe}if(nr){if(Ze){const mt=i(wt),ht=i(nr),Ot=mt[ht.length],nt=Ot===F||Ot===p;let sr;if(nt&&Xe<=me)sr=ht.length;else{const kr=ht.lastIndexOf(F),Er=ht.lastIndexOf(p);sr=Math.max(kr,Er)+1}sr>0&&(or=sr,nr=mt.slice(0,or).join(""),Xe=this._getTextWidth(nr))}if(nr=nr.trimRight(),this._addTextLine(nr),se=Math.max(se,Xe),We+=pe,this._shouldHandleEllipsis(We)){this._tryToAddEllipsisToLastLine();break}if(wt=i(wt).slice(or).join("").trimLeft(),wt.length>0&&(Ft=this._getTextWidth(wt),Ft<=me)){this._addTextLine(wt),We+=pe,se=Math.max(se,Ft);break}}else break}else this._addTextLine(wt),We+=pe,se=Math.max(se,Ft),this._shouldHandleEllipsis(We)&&Rt<At-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),Se&&We+pe>_e)break}this.textHeight=te,this.textWidth=se}_shouldHandleEllipsis(K){const te=+this.fontSize(),se=this.lineHeight()*te,pe=this.attrs.height,oe=pe!==o&&pe!==void 0,ye=this.padding(),we=pe-ye*2;return!(this.wrap()!==W)||oe&&K+se>we}_tryToAddEllipsisToLastLine(){const K=this.attrs.width,te=K!==o&&K!==void 0,se=this.padding(),pe=K-se*2,oe=this.ellipsis(),ye=this.textArr[this.textArr.length-1];!ye||!oe||(te&&(this._getTextWidth(ye.text+re)<pe||(ye.text=ye.text.slice(0,ye.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ye.text+re))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const K=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,te=this.hasShadow();return K&&te?!0:super._useBufferCanvas()}}return Mg.Text=X,X.prototype._fillFunc=Q,X.prototype._strokeFunc=U,X.prototype.className=v,X.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(X),t.Factory.overWriteSetter(X,"width",(0,s.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(X,"height",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(X,"direction",u),t.Factory.addGetterSetter(X,"fontFamily","Arial"),t.Factory.addGetterSetter(X,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(X,"fontStyle",j),t.Factory.addGetterSetter(X,"fontVariant",j),t.Factory.addGetterSetter(X,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(X,"align",x),t.Factory.addGetterSetter(X,"verticalAlign",C),t.Factory.addGetterSetter(X,"lineHeight",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(X,"wrap",O),t.Factory.addGetterSetter(X,"ellipsis",!1,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(X,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(X,"text","",(0,s.getStringValidator)()),t.Factory.addGetterSetter(X,"textDecoration",""),Mg}var Q1={},n9;function hZ(){if(n9)return Q1;n9=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.TextPath=void 0;const e=Fa(),t=Ln(),r=Gi(),n=d8(),s=IR(),a=Gn(),i=Mn(),o="",c="normal";function u(m){m.fillText(this.partialText,0,0)}function d(m){m.strokeText(this.partialText,0,0)}class f extends r.Shape{constructor(p){super(p),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(p){if(!this.attrs.data)return null;const x=this.pathLength;return p-1>x?null:n.Path.getPointAtLengthOfDataArray(p,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(p){p.setAttr("font",this._getContextFont()),p.setAttr("textBaseline",this.textBaseline()),p.setAttr("textAlign","left"),p.save();const x=this.textDecoration(),w=this.fill(),v=this.fontSize(),C=this.glyphInfo;x==="underline"&&p.beginPath();for(let k=0;k<C.length;k++){p.save();const b=C[k].p0;p.translate(b.x,b.y),p.rotate(C[k].rotation),this.partialText=C[k].text,p.fillStrokeShape(this),x==="underline"&&(k===0&&p.moveTo(0,v/2+1),p.lineTo(v,v/2+1)),p.restore()}x==="underline"&&(p.strokeStyle=w,p.lineWidth=v/20,p.stroke()),p.restore()}_hitFunc(p){p.beginPath();const x=this.glyphInfo;if(x.length>=1){const w=x[0].p0;p.moveTo(w.x,w.y)}for(let w=0;w<x.length;w++){const v=x[w].p1;p.lineTo(v.x,v.y)}p.setAttr("lineWidth",this.fontSize()),p.setAttr("strokeStyle",this.colorKey),p.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(p){return s.Text.prototype.setText.call(this,p)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(p){const w=this.dummyCanvas.getContext("2d");w.save(),w.font=this._getContextFont();const v=w.measureText(p);return w.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:p,height:x}=this._getTextSize(this.attrs.text);if(this.textWidth=p,this.textHeight=x,this.glyphInfo=[],!this.attrs.data)return null;const w=this.letterSpacing(),v=this.align(),C=this.kerningFunc(),k=Math.max(this.textWidth+((this.attrs.text||"").length-1)*w,0);let b=0;v==="center"&&(b=Math.max(0,this.pathLength/2-k/2)),v==="right"&&(b=Math.max(0,this.pathLength-k));const j=(0,s.stringToArray)(this.text());let A=b;for(let F=0;F<j.length;F++){const D=this._getPointAtLength(A);if(!D)return;let M=this._getTextSize(j[F]).width+w;if(j[F]===" "&&v==="justify"){const xe=this.text().split(" ").length-1;M+=(this.pathLength-k)/xe}const O=this._getPointAtLength(A+M);if(!O)return;const L=n.Path.getLineLength(D.x,D.y,O.x,O.y);let W=0;if(C)try{W=C(j[F-1],j[F])*this.fontSize()}catch{W=0}D.x+=W,O.x+=W,this.textWidth+=W;const re=n.Path.getPointOnLine(W+L/2,D.x,D.y,O.x,O.y),ie=Math.atan2(O.y-D.y,O.x-D.x);this.glyphInfo.push({transposeX:re.x,transposeY:re.y,text:j[F],rotation:ie,p0:D,p1:O}),A+=M}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const p=[];this.glyphInfo.forEach(function(A){p.push(A.p0.x),p.push(A.p0.y),p.push(A.p1.x),p.push(A.p1.y)});let x=p[0]||0,w=p[0]||0,v=p[1]||0,C=p[1]||0,k,b;for(let A=0;A<p.length/2;A++)k=p[A*2],b=p[A*2+1],x=Math.min(x,k),w=Math.max(w,k),v=Math.min(v,b),C=Math.max(C,b);const j=this.fontSize();return{x:x-j/2,y:v-j/2,width:w-x+j,height:C-v+j}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}return Q1.TextPath=f,f.prototype._fillFunc=u,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=u,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",c),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",c),t.Factory.addGetterSetter(f,"text",o),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),Q1}var Z1={},s9;function mZ(){if(s9)return Z1;s9=1,Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.Transformer=void 0;const e=Fa(),t=Ln(),r=Ya(),n=Gi(),s=DR(),a=c8(),i=Mn(),o=Gn(),c=Mn(),u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(M=>M+`.${u}`).join(" "),f="nodesRect",m=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],p={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},x="ontouchstart"in i.Konva._global;function w(M,O,L){if(M==="rotater")return L;O+=e.Util.degToRad(p[M]||0);const W=(e.Util.radToDeg(O)%360+360)%360;return e.Util._inRange(W,315+22.5,360)||e.Util._inRange(W,0,22.5)?"ns-resize":e.Util._inRange(W,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(W,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(W,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(W,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(W,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(W,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(W,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+W),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function C(M){return{x:M.x+M.width/2*Math.cos(M.rotation)+M.height/2*Math.sin(-M.rotation),y:M.y+M.height/2*Math.cos(M.rotation)+M.width/2*Math.sin(M.rotation)}}function k(M,O,L){const W=L.x+(M.x-L.x)*Math.cos(O)-(M.y-L.y)*Math.sin(O),re=L.y+(M.x-L.x)*Math.sin(O)+(M.y-L.y)*Math.cos(O);return{...M,rotation:M.rotation+O,x:W,y:re}}function b(M,O){const L=C(M);return k(M,O,L)}function j(M,O,L){let W=O;for(let re=0;re<M.length;re++){const ie=i.Konva.getAngle(M[re]),xe=Math.abs(ie-O)%(Math.PI*2);Math.min(xe,Math.PI*2-xe)<L&&(W=ie)}return W}let A=0;class F extends a.Group{constructor(O){super(O),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(O){return this.setNode(O),this}setNode(O){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([O])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(O=[]){this._nodes&&this._nodes.length&&this.detach();const L=O.filter(re=>re.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=O=L,O.length===1&&this.useSingleNodeRotation()?this.rotation(O[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(re=>{const ie=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(re._attrsAffectingSize.length){const xe=re._attrsAffectingSize.map(de=>de+"Change."+this._getEventNamespace()).join(" ");re.on(xe,ie)}re.on(m.map(xe=>xe+`.${this._getEventNamespace()}`).join(" "),ie),re.on(`absoluteTransformChange.${this._getEventNamespace()}`,ie),this._proxyDrag(re)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(O){let L;O.on(`dragstart.${this._getEventNamespace()}`,W=>{L=O.getAbsolutePosition(),!this.isDragging()&&O!==this.findOne(".back")&&this.startDrag(W,!1)}),O.on(`dragmove.${this._getEventNamespace()}`,W=>{if(!L)return;const re=O.getAbsolutePosition(),ie=re.x-L.x,xe=re.y-L.y;this.nodes().forEach(de=>{if(de===O||de.isDragging())return;const fe=de.getAbsolutePosition();de.setAbsolutePosition({x:fe.x+ie,y:fe.y+xe}),de.startDrag(W)}),L=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(O=>{O.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(O,L=this.rotation(),W){const re=O.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),ie=O.getAbsoluteScale(W),xe=O.getAbsolutePosition(W),de=re.x*ie.x-O.offsetX()*ie.x,fe=re.y*ie.y-O.offsetY()*ie.y,H=(i.Konva.getAngle(O.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),Q={x:xe.x+de*Math.cos(H)+fe*Math.sin(-H),y:xe.y+fe*Math.cos(H)+de*Math.sin(H),width:re.width*ie.x,height:re.height*ie.y,rotation:H};return k(Q,-i.Konva.getAngle(L),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const L=[];this.nodes().map(H=>{const Q=H.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),U=[{x:Q.x,y:Q.y},{x:Q.x+Q.width,y:Q.y},{x:Q.x+Q.width,y:Q.y+Q.height},{x:Q.x,y:Q.y+Q.height}],V=H.getAbsoluteTransform();U.forEach(function(X){const z=V.point(X);L.push(z)})});const W=new e.Transform;W.rotate(-i.Konva.getAngle(this.rotation()));let re=1/0,ie=1/0,xe=-1/0,de=-1/0;L.forEach(function(H){const Q=W.point(H);re===void 0&&(re=xe=Q.x,ie=de=Q.y),re=Math.min(re,Q.x),ie=Math.min(ie,Q.y),xe=Math.max(xe,Q.x),de=Math.max(de,Q.y)}),W.invert();const fe=W.point({x:re,y:ie});return{x:fe.x,y:fe.y,width:xe-re,height:de-ie,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(O=>{this._createAnchor(O)}),this._createAnchor("rotater")}_createAnchor(O){const L=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:O+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:x?10:"auto"}),W=this;L.on("mousedown touchstart",function(re){W._handleMouseDown(re)}),L.on("dragstart",re=>{L.stopDrag(),re.cancelBubble=!0}),L.on("dragend",re=>{re.cancelBubble=!0}),L.on("mouseenter",()=>{const re=i.Konva.getAngle(this.rotation()),ie=this.rotateAnchorCursor(),xe=w(O,re,ie);L.getStage().content&&(L.getStage().content.style.cursor=xe),this._cursorChange=!0}),L.on("mouseout",()=>{L.getStage().content&&(L.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(L)}_createBack(){const O=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(L,W){const re=W.getParent(),ie=re.padding();L.beginPath(),L.rect(-ie,-ie,W.width()+ie*2,W.height()+ie*2),L.moveTo(W.width()/2,-ie),re.rotateEnabled()&&re.rotateLineVisible()&&L.lineTo(W.width()/2,-re.rotateAnchorOffset()*e.Util._sign(W.height())-ie),L.fillStrokeShape(W)},hitFunc:(L,W)=>{if(!this.shouldOverdrawWholeArea())return;const re=this.padding();L.beginPath(),L.rect(-re,-re,W.width()+re*2,W.height()+re*2),L.fillStrokeShape(W)}});this.add(O),this._proxyDrag(O),O.on("dragstart",L=>{L.cancelBubble=!0}),O.on("dragmove",L=>{L.cancelBubble=!0}),O.on("dragend",L=>{L.cancelBubble=!0}),this.on("dragmove",L=>{this.update()})}_handleMouseDown(O){if(this._transforming)return;this._movingAnchorName=O.target.name().split(" ")[0];const L=this._getNodeRect(),W=L.width,re=L.height,ie=Math.sqrt(Math.pow(W,2)+Math.pow(re,2));this.sin=Math.abs(re/ie),this.cos=Math.abs(W/ie),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const xe=O.target.getAbsolutePosition(),de=O.target.getStage().getPointerPosition();this._anchorDragOffset={x:de.x-xe.x,y:de.y-xe.y},A++,this._fire("transformstart",{evt:O.evt,target:this.getNode()}),this._nodes.forEach(fe=>{fe._fire("transformstart",{evt:O.evt,target:fe})})}_handleMouseMove(O){let L,W,re;const ie=this.findOne("."+this._movingAnchorName),xe=ie.getStage();xe.setPointersPositions(O);const de=xe.getPointerPosition();let fe={x:de.x-this._anchorDragOffset.x,y:de.y-this._anchorDragOffset.y};const H=ie.getAbsolutePosition();this.anchorDragBoundFunc()&&(fe=this.anchorDragBoundFunc()(H,fe,O)),ie.setAbsolutePosition(fe);const Q=ie.getAbsolutePosition();if(H.x===Q.x&&H.y===Q.y)return;if(this._movingAnchorName==="rotater"){const pe=this._getNodeRect();L=ie.x()-pe.width/2,W=-ie.y()+pe.height/2;let oe=Math.atan2(-W,L)+Math.PI/2;pe.height<0&&(oe-=Math.PI);const we=i.Konva.getAngle(this.rotation())+oe,Se=i.Konva.getAngle(this.rotationSnapTolerance()),me=j(this.rotationSnaps(),we,Se)-pe.rotation,_e=b(pe,me);this._fitNodesInto(_e,O);return}const U=this.shiftBehavior();let V;U==="inverted"?V=this.keepRatio()&&!O.shiftKey:U==="none"?V=this.keepRatio():V=this.keepRatio()||O.shiftKey;let X=this.centeredScaling()||O.altKey;if(this._movingAnchorName==="top-left"){if(V){const pe=X?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};re=Math.sqrt(Math.pow(pe.x-ie.x(),2)+Math.pow(pe.y-ie.y(),2));const oe=this.findOne(".top-left").x()>pe.x?-1:1,ye=this.findOne(".top-left").y()>pe.y?-1:1;L=re*this.cos*oe,W=re*this.sin*ye,this.findOne(".top-left").x(pe.x-L),this.findOne(".top-left").y(pe.y-W)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(ie.y());else if(this._movingAnchorName==="top-right"){if(V){const pe=X?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};re=Math.sqrt(Math.pow(ie.x()-pe.x,2)+Math.pow(pe.y-ie.y(),2));const oe=this.findOne(".top-right").x()<pe.x?-1:1,ye=this.findOne(".top-right").y()>pe.y?-1:1;L=re*this.cos*oe,W=re*this.sin*ye,this.findOne(".top-right").x(pe.x+L),this.findOne(".top-right").y(pe.y-W)}var z=ie.position();this.findOne(".top-left").y(z.y),this.findOne(".bottom-right").x(z.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(ie.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(ie.x());else if(this._movingAnchorName==="bottom-left"){if(V){const pe=X?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};re=Math.sqrt(Math.pow(pe.x-ie.x(),2)+Math.pow(ie.y()-pe.y,2));const oe=pe.x<ie.x()?-1:1,ye=ie.y()<pe.y?-1:1;L=re*this.cos*oe,W=re*this.sin*ye,ie.x(pe.x-L),ie.y(pe.y+W)}z=ie.position(),this.findOne(".top-left").x(z.x),this.findOne(".bottom-right").y(z.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(ie.y());else if(this._movingAnchorName==="bottom-right"){if(V){const pe=X?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};re=Math.sqrt(Math.pow(ie.x()-pe.x,2)+Math.pow(ie.y()-pe.y,2));const oe=this.findOne(".bottom-right").x()<pe.x?-1:1,ye=this.findOne(".bottom-right").y()<pe.y?-1:1;L=re*this.cos*oe,W=re*this.sin*ye,this.findOne(".bottom-right").x(pe.x+L),this.findOne(".bottom-right").y(pe.y+W)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(X=this.centeredScaling()||O.altKey,X){const pe=this.findOne(".top-left"),oe=this.findOne(".bottom-right"),ye=pe.x(),we=pe.y(),Se=this.getWidth()-oe.x(),Ie=this.getHeight()-oe.y();oe.move({x:-ye,y:-we}),pe.move({x:Se,y:Ie})}const K=this.findOne(".top-left").getAbsolutePosition();L=K.x,W=K.y;const te=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),se=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:L,y:W,width:te,height:se,rotation:i.Konva.getAngle(this.rotation())},O)}_handleMouseUp(O){this._removeEvents(O)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(O){var L;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const W=this.getNode();A--,this._fire("transformend",{evt:O,target:W}),(L=this.getLayer())===null||L===void 0||L.batchDraw(),W&&this._nodes.forEach(re=>{var ie;re._fire("transformend",{evt:O,target:re}),(ie=re.getLayer())===null||ie===void 0||ie.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(O,L){const W=this._getNodeRect(),re=1;if(e.Util._inRange(O.width,-this.padding()*2-re,re)){this.update();return}if(e.Util._inRange(O.height,-this.padding()*2-re,re)){this.update();return}const ie=new e.Transform;if(ie.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("left")>=0){const V=ie.point({x:-this.padding()*2,y:0});O.x+=V.x,O.y+=V.y,O.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=V.x,this._anchorDragOffset.y-=V.y}else if(this._movingAnchorName&&O.width<0&&this._movingAnchorName.indexOf("right")>=0){const V=ie.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=V.x,this._anchorDragOffset.y-=V.y,O.width+=this.padding()*2}if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("top")>=0){const V=ie.point({x:0,y:-this.padding()*2});O.x+=V.x,O.y+=V.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=V.x,this._anchorDragOffset.y-=V.y,O.height+=this.padding()*2}else if(this._movingAnchorName&&O.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const V=ie.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=V.x,this._anchorDragOffset.y-=V.y,O.height+=this.padding()*2}if(this.boundBoxFunc()){const V=this.boundBoxFunc()(W,O);V?O=V:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const xe=1e7,de=new e.Transform;de.translate(W.x,W.y),de.rotate(W.rotation),de.scale(W.width/xe,W.height/xe);const fe=new e.Transform,H=O.width/xe,Q=O.height/xe;this.flipEnabled()===!1?(fe.translate(O.x,O.y),fe.rotate(O.rotation),fe.translate(O.width<0?O.width:0,O.height<0?O.height:0),fe.scale(Math.abs(H),Math.abs(Q))):(fe.translate(O.x,O.y),fe.rotate(O.rotation),fe.scale(H,Q));const U=fe.multiply(de.invert());this._nodes.forEach(V=>{var X;const z=V.getParent().getAbsoluteTransform(),K=V.getTransform().copy();K.translate(V.offsetX(),V.offsetY());const te=new e.Transform;te.multiply(z.copy().invert()).multiply(U).multiply(z).multiply(K);const se=te.decompose();V.setAttrs(se),(X=V.getLayer())===null||X===void 0||X.batchDraw()}),this.rotation(e.Util._getRotation(O.rotation)),this._nodes.forEach(V=>{this._fire("transform",{evt:L,target:V}),V._fire("transform",{evt:L,target:V})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(O,L){this.findOne(O).setAttrs(L)}update(){var O;const L=this._getNodeRect();this.rotation(e.Util._getRotation(L.rotation));const W=L.width,re=L.height,ie=this.enabledAnchors(),xe=this.resizeEnabled(),de=this.padding(),fe=this.anchorSize(),H=this.find("._anchor");H.forEach(U=>{U.setAttrs({width:fe,height:fe,offsetX:fe/2,offsetY:fe/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:fe/2+de,offsetY:fe/2+de,visible:xe&&ie.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:W/2,y:0,offsetY:fe/2+de,visible:xe&&ie.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:W,y:0,offsetX:fe/2-de,offsetY:fe/2+de,visible:xe&&ie.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:re/2,offsetX:fe/2+de,visible:xe&&ie.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:W,y:re/2,offsetX:fe/2-de,visible:xe&&ie.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:re,offsetX:fe/2+de,offsetY:fe/2-de,visible:xe&&ie.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:W/2,y:re,offsetY:fe/2-de,visible:xe&&ie.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:W,y:re,offsetX:fe/2-de,offsetY:fe/2-de,visible:xe&&ie.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:W/2,y:-this.rotateAnchorOffset()*e.Util._sign(re)-de,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:W,height:re,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const Q=this.anchorStyleFunc();Q&&H.forEach(U=>{Q(U)}),(O=this.getLayer())===null||O===void 0||O.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const O=this.findOne("."+this._movingAnchorName);O&&O.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(O){return r.Node.prototype.clone.call(this,O)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Z1.Transformer=F,F.isTransforming=()=>A>0;function D(M){return M instanceof Array||e.Util.warn("enabledAnchors value should be an array"),M instanceof Array&&M.forEach(function(O){v.indexOf(O)===-1&&e.Util.warn("Unknown anchor name: "+O+". Available names are: "+v.join(", "))}),M||[]}return F.prototype.className="Transformer",(0,c._registerNode)(F),t.Factory.addGetterSetter(F,"enabledAnchors",v,D),t.Factory.addGetterSetter(F,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(F,"resizeEnabled",!0),t.Factory.addGetterSetter(F,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(F,"rotateEnabled",!0),t.Factory.addGetterSetter(F,"rotateLineVisible",!0),t.Factory.addGetterSetter(F,"rotationSnaps",[]),t.Factory.addGetterSetter(F,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(F,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(F,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(F,"borderEnabled",!0),t.Factory.addGetterSetter(F,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(F,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(F,"anchorFill","white"),t.Factory.addGetterSetter(F,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(F,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(F,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(F,"borderDash"),t.Factory.addGetterSetter(F,"keepRatio",!0),t.Factory.addGetterSetter(F,"shiftBehavior","default"),t.Factory.addGetterSetter(F,"centeredScaling",!1),t.Factory.addGetterSetter(F,"ignoreStroke",!1),t.Factory.addGetterSetter(F,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(F,"nodes"),t.Factory.addGetterSetter(F,"node"),t.Factory.addGetterSetter(F,"boundBoxFunc"),t.Factory.addGetterSetter(F,"anchorDragBoundFunc"),t.Factory.addGetterSetter(F,"anchorStyleFunc"),t.Factory.addGetterSetter(F,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(F,"useSingleNodeRotation",!0),t.Factory.backCompat(F,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Z1}var ex={},a9;function gZ(){if(a9)return ex;a9=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.Wedge=void 0;const e=Ln(),t=Gi(),r=Mn(),n=Gn(),s=Mn();class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}return ex.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1),e.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),ex}var tx={},i9;function pZ(){if(i9)return tx;i9=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.Blur=void 0;const e=Ln(),t=Ya(),r=Gn();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(c,u){const d=c.data,f=c.width,m=c.height;let p,x,w,v,C,k,b,j,A,F,D,M,O,L,W,re,ie,xe,de,fe;const H=u+u+1,Q=f-1,U=m-1,V=u+1,X=V*(V+1)/2,z=new n,K=s[u],te=a[u];let se=null,pe=z,oe=null,ye=null;for(let we=1;we<H;we++)pe=pe.next=new n,we===V&&(se=pe);pe.next=z,w=x=0;for(let we=0;we<m;we++){M=O=L=W=v=C=k=b=0,j=V*(re=d[x]),A=V*(ie=d[x+1]),F=V*(xe=d[x+2]),D=V*(de=d[x+3]),v+=X*re,C+=X*ie,k+=X*xe,b+=X*de,pe=z;for(let Se=0;Se<V;Se++)pe.r=re,pe.g=ie,pe.b=xe,pe.a=de,pe=pe.next;for(let Se=1;Se<V;Se++)p=x+((Q<Se?Q:Se)<<2),v+=(pe.r=re=d[p])*(fe=V-Se),C+=(pe.g=ie=d[p+1])*fe,k+=(pe.b=xe=d[p+2])*fe,b+=(pe.a=de=d[p+3])*fe,M+=re,O+=ie,L+=xe,W+=de,pe=pe.next;oe=z,ye=se;for(let Se=0;Se<f;Se++)d[x+3]=de=b*K>>te,de!==0?(de=255/de,d[x]=(v*K>>te)*de,d[x+1]=(C*K>>te)*de,d[x+2]=(k*K>>te)*de):d[x]=d[x+1]=d[x+2]=0,v-=j,C-=A,k-=F,b-=D,j-=oe.r,A-=oe.g,F-=oe.b,D-=oe.a,p=w+((p=Se+u+1)<Q?p:Q)<<2,M+=oe.r=d[p],O+=oe.g=d[p+1],L+=oe.b=d[p+2],W+=oe.a=d[p+3],v+=M,C+=O,k+=L,b+=W,oe=oe.next,j+=re=ye.r,A+=ie=ye.g,F+=xe=ye.b,D+=de=ye.a,M-=re,O-=ie,L-=xe,W-=de,ye=ye.next,x+=4;w+=f}for(let we=0;we<f;we++){O=L=W=M=C=k=b=v=0,x=we<<2,j=V*(re=d[x]),A=V*(ie=d[x+1]),F=V*(xe=d[x+2]),D=V*(de=d[x+3]),v+=X*re,C+=X*ie,k+=X*xe,b+=X*de,pe=z;for(let Ie=0;Ie<V;Ie++)pe.r=re,pe.g=ie,pe.b=xe,pe.a=de,pe=pe.next;let Se=f;for(let Ie=1;Ie<=u;Ie++)x=Se+we<<2,v+=(pe.r=re=d[x])*(fe=V-Ie),C+=(pe.g=ie=d[x+1])*fe,k+=(pe.b=xe=d[x+2])*fe,b+=(pe.a=de=d[x+3])*fe,M+=re,O+=ie,L+=xe,W+=de,pe=pe.next,Ie<U&&(Se+=f);x=we,oe=z,ye=se;for(let Ie=0;Ie<m;Ie++)p=x<<2,d[p+3]=de=b*K>>te,de>0?(de=255/de,d[p]=(v*K>>te)*de,d[p+1]=(C*K>>te)*de,d[p+2]=(k*K>>te)*de):d[p]=d[p+1]=d[p+2]=0,v-=j,C-=A,k-=F,b-=D,j-=oe.r,A-=oe.g,F-=oe.b,D-=oe.a,p=we+((p=Ie+V)<U?p:U)*f<<2,v+=M+=oe.r=d[p],C+=O+=oe.g=d[p+1],k+=L+=oe.b=d[p+2],b+=W+=oe.a=d[p+3],oe=oe.next,j+=re=ye.r,A+=ie=ye.g,F+=xe=ye.b,D+=de=ye.a,M-=re,O-=ie,L-=xe,W-=de,ye=ye.next,x+=f}}const o=function(u){const d=Math.round(this.blurRadius());d>0&&i(u,d)};return tx.Blur=o,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),tx}var rx={},o9;function xZ(){if(o9)return rx;o9=1,Object.defineProperty(rx,"__esModule",{value:!0}),rx.Brighten=void 0;const e=Ln(),t=Ya(),r=Gn(),n=function(s){const a=this.brightness()*255,i=s.data,o=i.length;for(let c=0;c<o;c+=4)i[c]+=a,i[c+1]+=a,i[c+2]+=a};return rx.Brighten=n,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),rx}var nx={},l9;function yZ(){if(l9)return nx;l9=1,Object.defineProperty(nx,"__esModule",{value:!0}),nx.Contrast=void 0;const e=Ln(),t=Ya(),r=Gn(),n=function(s){const a=Math.pow((this.contrast()+100)/100,2),i=s.data,o=i.length;let c=150,u=150,d=150;for(let f=0;f<o;f+=4)c=i[f],u=i[f+1],d=i[f+2],c/=255,c-=.5,c*=a,c+=.5,c*=255,u/=255,u-=.5,u*=a,u+=.5,u*=255,d/=255,d-=.5,d*=a,d+=.5,d*=255,c=c<0?0:c>255?255:c,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,i[f]=c,i[f+1]=u,i[f+2]=d};return nx.Contrast=n,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),nx}var sx={},c9;function vZ(){if(c9)return sx;c9=1,Object.defineProperty(sx,"__esModule",{value:!0}),sx.Emboss=void 0;const e=Ln(),t=Ya(),r=Fa(),n=Gn(),s=function(a){const i=this.embossStrength()*10,o=this.embossWhiteLevel()*255,c=this.embossDirection(),u=this.embossBlend(),d=a.data,f=a.width,m=a.height,p=f*4;let x=0,w=0,v=m;switch(c){case"top-left":x=-1,w=-1;break;case"top":x=-1,w=0;break;case"top-right":x=-1,w=1;break;case"right":x=0,w=1;break;case"bottom-right":x=1,w=1;break;case"bottom":x=1,w=0;break;case"bottom-left":x=1,w=-1;break;case"left":x=0,w=-1;break;default:r.Util.error("Unknown emboss direction: "+c)}do{const C=(v-1)*p;let k=x;v+k<1&&(k=0),v+k>m&&(k=0);const b=(v-1+k)*f*4;let j=f;do{const A=C+(j-1)*4;let F=w;j+F<1&&(F=0),j+F>f&&(F=0);const D=b+(j-1+F)*4,M=d[A]-d[D],O=d[A+1]-d[D+1],L=d[A+2]-d[D+2];let W=M;const re=W>0?W:-W,ie=O>0?O:-O,xe=L>0?L:-L;if(ie>re&&(W=O),xe>re&&(W=L),W*=i,u){const de=d[A]+W,fe=d[A+1]+W,H=d[A+2]+W;d[A]=de>255?255:de<0?0:de,d[A+1]=fe>255?255:fe<0?0:fe,d[A+2]=H>255?255:H<0?0:H}else{let de=o-W;de<0?de=0:de>255&&(de=255),d[A]=d[A+1]=d[A+2]=de}}while(--j)}while(--v)};return sx.Emboss=s,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),sx}var ax={},u9;function wZ(){if(u9)return ax;u9=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.Enhance=void 0;const e=Ln(),t=Ya(),r=Gn();function n(a,i,o,c,u){const d=o-i,f=u-c;if(d===0)return c+f/2;if(f===0)return c;let m=(a-i)/d;return m=f*m+c,m}const s=function(a){const i=a.data,o=i.length;let c=i[0],u=c,d,f=i[1],m=f,p,x=i[2],w=x,v;const C=this.enhance();if(C===0)return;for(let M=0;M<o;M+=4)d=i[M+0],d<c?c=d:d>u&&(u=d),p=i[M+1],p<f?f=p:p>m&&(m=p),v=i[M+2],v<x?x=v:v>w&&(w=v);u===c&&(u=255,c=0),m===f&&(m=255,f=0),w===x&&(w=255,x=0);let k,b,j,A,F,D;if(C>0)k=u+C*(255-u),b=c-C*(c-0),j=m+C*(255-m),A=f-C*(f-0),F=w+C*(255-w),D=x-C*(x-0);else{const M=(u+c)*.5;k=u+C*(u-M),b=c+C*(c-M);const O=(m+f)*.5;j=m+C*(m-O),A=f+C*(f-O);const L=(w+x)*.5;F=w+C*(w-L),D=x+C*(x-L)}for(let M=0;M<o;M+=4)i[M+0]=n(i[M+0],c,u,b,k),i[M+1]=n(i[M+1],f,m,A,j),i[M+2]=n(i[M+2],x,w,D,F)};return ax.Enhance=s,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ax}var ix={},d9;function bZ(){if(d9)return ix;d9=1,Object.defineProperty(ix,"__esModule",{value:!0}),ix.Grayscale=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=.34*r[s]+.5*r[s+1]+.16*r[s+2];r[s]=a,r[s+1]=a,r[s+2]=a}};return ix.Grayscale=e,ix}var ox={},f9;function _Z(){if(f9)return ox;f9=1,Object.defineProperty(ox,"__esModule",{value:!0}),ox.HSL=void 0;const e=Ln(),t=Ya(),r=Gn();e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter);const n=function(s){const a=s.data,i=a.length,o=1,c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=o*c*Math.cos(u*Math.PI/180),m=o*c*Math.sin(u*Math.PI/180),p=.299*o+.701*f+.167*m,x=.587*o-.587*f+.33*m,w=.114*o-.114*f-.497*m,v=.299*o-.299*f-.328*m,C=.587*o+.413*f+.035*m,k=.114*o-.114*f+.293*m,b=.299*o-.3*f+1.25*m,j=.587*o-.586*f-1.05*m,A=.114*o+.886*f-.2*m;let F,D,M,O;for(let L=0;L<i;L+=4)F=a[L+0],D=a[L+1],M=a[L+2],O=a[L+3],a[L+0]=p*F+x*D+w*M+d,a[L+1]=v*F+C*D+k*M+d,a[L+2]=b*F+j*D+A*M+d,a[L+3]=O};return ox.HSL=n,ox}var lx={},h9;function SZ(){if(h9)return lx;h9=1,Object.defineProperty(lx,"__esModule",{value:!0}),lx.HSV=void 0;const e=Ln(),t=Ya(),r=Gn(),n=function(s){const a=s.data,i=a.length,o=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=o*c*Math.cos(u*Math.PI/180),f=o*c*Math.sin(u*Math.PI/180),m=.299*o+.701*d+.167*f,p=.587*o-.587*d+.33*f,x=.114*o-.114*d-.497*f,w=.299*o-.299*d-.328*f,v=.587*o+.413*d+.035*f,C=.114*o-.114*d+.293*f,k=.299*o-.3*d+1.25*f,b=.587*o-.586*d-1.05*f,j=.114*o+.886*d-.2*f;for(let A=0;A<i;A+=4){const F=a[A+0],D=a[A+1],M=a[A+2],O=a[A+3];a[A+0]=m*F+p*D+x*M,a[A+1]=w*F+v*D+C*M,a[A+2]=k*F+b*D+j*M,a[A+3]=O}};return lx.HSV=n,e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),lx}var cx={},m9;function kZ(){if(m9)return cx;m9=1,Object.defineProperty(cx,"__esModule",{value:!0}),cx.Invert=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2]};return cx.Invert=e,cx}var ux={},g9;function TZ(){if(g9)return ux;g9=1,Object.defineProperty(ux,"__esModule",{value:!0}),ux.Kaleidoscope=void 0;const e=Ln(),t=Ya(),r=Fa(),n=Gn(),s=function(o,c,u){const d=o.data,f=c.data,m=o.width,p=o.height,x=u.polarCenterX||m/2,w=u.polarCenterY||p/2;let v=Math.sqrt(x*x+w*w),C=m-x,k=p-w;const b=Math.sqrt(C*C+k*k);v=b>v?b:v;const j=p,A=m,F=360/A*Math.PI/180;for(let D=0;D<A;D+=1){const M=Math.sin(D*F),O=Math.cos(D*F);for(let L=0;L<j;L+=1){C=Math.floor(x+v*L/j*O),k=Math.floor(w+v*L/j*M);let W=(k*m+C)*4;const re=d[W+0],ie=d[W+1],xe=d[W+2],de=d[W+3];W=(D+L*m)*4,f[W+0]=re,f[W+1]=ie,f[W+2]=xe,f[W+3]=de}}},a=function(o,c,u){const d=o.data,f=c.data,m=o.width,p=o.height,x=u.polarCenterX||m/2,w=u.polarCenterY||p/2;let v=Math.sqrt(x*x+w*w),C=m-x,k=p-w;const b=Math.sqrt(C*C+k*k);v=b>v?b:v;const j=p,A=m,F=0;let D,M;for(C=0;C<m;C+=1)for(k=0;k<p;k+=1){const O=C-x,L=k-w,W=Math.sqrt(O*O+L*L)*j/v;let re=(Math.atan2(L,O)*180/Math.PI+360+F)%360;re=re*A/360,D=Math.floor(re),M=Math.floor(W);let ie=(M*m+D)*4;const xe=d[ie+0],de=d[ie+1],fe=d[ie+2],H=d[ie+3];ie=(k*m+C)*4,f[ie+0]=xe,f[ie+1]=de,f[ie+2]=fe,f[ie+3]=H}},i=function(o){const c=o.width,u=o.height;let d,f,m,p,x,w,v,C,k,b,j=Math.round(this.kaleidoscopePower());const A=Math.round(this.kaleidoscopeAngle()),F=Math.floor(c*(A%360)/360);if(j<1)return;const D=r.Util.createCanvasElement();D.width=c,D.height=u;const M=D.getContext("2d").getImageData(0,0,c,u);r.Util.releaseCanvas(D),s(o,M,{polarCenterX:c/2,polarCenterY:u/2});let O=c/Math.pow(2,j);for(;O<=8;)O=O*2,j-=1;O=Math.ceil(O);let L=O,W=0,re=L,ie=1;for(F+O>c&&(W=L,re=0,ie=-1),f=0;f<u;f+=1)for(d=W;d!==re;d+=ie)m=Math.round(d+F)%c,k=(c*f+m)*4,x=M.data[k+0],w=M.data[k+1],v=M.data[k+2],C=M.data[k+3],b=(c*f+d)*4,M.data[b+0]=x,M.data[b+1]=w,M.data[b+2]=v,M.data[b+3]=C;for(f=0;f<u;f+=1)for(L=Math.floor(O),p=0;p<j;p+=1){for(d=0;d<L+1;d+=1)k=(c*f+d)*4,x=M.data[k+0],w=M.data[k+1],v=M.data[k+2],C=M.data[k+3],b=(c*f+L*2-d-1)*4,M.data[b+0]=x,M.data[b+1]=w,M.data[b+2]=v,M.data[b+3]=C;L*=2}a(M,o,{})};return ux.Kaleidoscope=i,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),ux}var dx={},p9;function CZ(){if(p9)return dx;p9=1,Object.defineProperty(dx,"__esModule",{value:!0}),dx.Mask=void 0;const e=Ln(),t=Ya(),r=Gn();function n(m,p,x){let w=(x*m.width+p)*4;const v=[];return v.push(m.data[w++],m.data[w++],m.data[w++],m.data[w++]),v}function s(m,p){return Math.sqrt(Math.pow(m[0]-p[0],2)+Math.pow(m[1]-p[1],2)+Math.pow(m[2]-p[2],2))}function a(m){const p=[0,0,0];for(let x=0;x<m.length;x++)p[0]+=m[x][0],p[1]+=m[x][1],p[2]+=m[x][2];return p[0]/=m.length,p[1]/=m.length,p[2]/=m.length,p}function i(m,p){const x=n(m,0,0),w=n(m,m.width-1,0),v=n(m,0,m.height-1),C=n(m,m.width-1,m.height-1),k=p||10;if(s(x,w)<k&&s(w,C)<k&&s(C,v)<k&&s(v,x)<k){const b=a([w,x,C,v]),j=[];for(let A=0;A<m.width*m.height;A++){const F=s(b,[m.data[A*4],m.data[A*4+1],m.data[A*4+2]]);j[A]=F<k?0:255}return j}}function o(m,p){for(let x=0;x<m.width*m.height;x++)m.data[4*x+3]=p[x]}function c(m,p,x){const w=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(w.length)),C=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let j=0;j<p;j++){const A=b*p+j;let F=0;for(let D=0;D<v;D++)for(let M=0;M<v;M++){const O=b+D-C,L=j+M-C;if(O>=0&&O<x&&L>=0&&L<p){const W=O*p+L,re=w[D*v+M];F+=m[W]*re}}k[A]=F===2040?255:0}return k}function u(m,p,x){const w=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(w.length)),C=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let j=0;j<p;j++){const A=b*p+j;let F=0;for(let D=0;D<v;D++)for(let M=0;M<v;M++){const O=b+D-C,L=j+M-C;if(O>=0&&O<x&&L>=0&&L<p){const W=O*p+L,re=w[D*v+M];F+=m[W]*re}}k[A]=F>=1020?255:0}return k}function d(m,p,x){const w=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(w.length)),C=Math.floor(v/2),k=[];for(let b=0;b<x;b++)for(let j=0;j<p;j++){const A=b*p+j;let F=0;for(let D=0;D<v;D++)for(let M=0;M<v;M++){const O=b+D-C,L=j+M-C;if(O>=0&&O<x&&L>=0&&L<p){const W=O*p+L,re=w[D*v+M];F+=m[W]*re}}k[A]=F}return k}const f=function(m){const p=this.threshold();let x=i(m,p);return x&&(x=c(x,m.width,m.height),x=u(x,m.width,m.height),x=d(x,m.width,m.height),o(m,x)),m};return dx.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),dx}var fx={},x9;function NZ(){if(x9)return fx;x9=1,Object.defineProperty(fx,"__esModule",{value:!0}),fx.Noise=void 0;const e=Ln(),t=Ya(),r=Gn(),n=function(s){const a=this.noise()*255,i=s.data,o=i.length,c=a/2;for(let u=0;u<o;u+=4)i[u+0]+=c-2*c*Math.random(),i[u+1]+=c-2*c*Math.random(),i[u+2]+=c-2*c*Math.random()};return fx.Noise=n,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),fx}var hx={},y9;function EZ(){if(y9)return hx;y9=1,Object.defineProperty(hx,"__esModule",{value:!0}),hx.Pixelate=void 0;const e=Ln(),t=Fa(),r=Ya(),n=Gn(),s=function(a){let i=Math.ceil(this.pixelSize()),o=a.width,c=a.height,u=Math.ceil(o/i),d=Math.ceil(c/i),f=a.data;if(i<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let m=0;m<u;m+=1)for(let p=0;p<d;p+=1){let x=0,w=0,v=0,C=0;const k=m*i,b=k+i,j=p*i,A=j+i;let F=0;for(let D=k;D<b;D+=1)if(!(D>=o))for(let M=j;M<A;M+=1){if(M>=c)continue;const O=(o*M+D)*4;x+=f[O+0],w+=f[O+1],v+=f[O+2],C+=f[O+3],F+=1}x=x/F,w=w/F,v=v/F,C=C/F;for(let D=k;D<b;D+=1)if(!(D>=o))for(let M=j;M<A;M+=1){if(M>=c)continue;const O=(o*M+D)*4;f[O+0]=x,f[O+1]=w,f[O+2]=v,f[O+3]=C}}};return hx.Pixelate=s,e.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),hx}var mx={},v9;function AZ(){if(v9)return mx;v9=1,Object.defineProperty(mx,"__esModule",{value:!0}),mx.Posterize=void 0;const e=Ln(),t=Ya(),r=Gn(),n=function(s){const a=Math.round(this.levels()*254)+1,i=s.data,o=i.length,c=255/a;for(let u=0;u<o;u+=1)i[u]=Math.floor(i[u]/c)*c};return mx.Posterize=n,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),mx}var gx={},w9;function jZ(){if(w9)return gx;w9=1,Object.defineProperty(gx,"__esModule",{value:!0}),gx.RGB=void 0;const e=Ln(),t=Ya(),r=Gn(),n=function(s){const a=s.data,i=a.length,o=this.red(),c=this.green(),u=this.blue();for(let d=0;d<i;d+=4){const f=(.34*a[d]+.5*a[d+1]+.16*a[d+2])/255;a[d]=f*o,a[d+1]=f*c,a[d+2]=f*u,a[d+3]=a[d+3]}};return gx.RGB=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),gx}var px={},b9;function PZ(){if(b9)return px;b9=1,Object.defineProperty(px,"__esModule",{value:!0}),px.RGBA=void 0;const e=Ln(),t=Ya(),r=Gn(),n=function(s){const a=s.data,i=a.length,o=this.red(),c=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<i;f+=4){const m=1-d;a[f]=o*d+a[f]*m,a[f+1]=c*d+a[f+1]*m,a[f+2]=u*d+a[f+2]*m}};return px.RGBA=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),px}var xx={},_9;function MZ(){if(_9)return xx;_9=1,Object.defineProperty(xx,"__esModule",{value:!0}),xx.Sepia=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=r[s+0],i=r[s+1],o=r[s+2];r[s+0]=Math.min(255,a*.393+i*.769+o*.189),r[s+1]=Math.min(255,a*.349+i*.686+o*.168),r[s+2]=Math.min(255,a*.272+i*.534+o*.131)}};return xx.Sepia=e,xx}var yx={},S9;function FZ(){if(S9)return yx;S9=1,Object.defineProperty(yx,"__esModule",{value:!0}),yx.Solarize=void 0;const e=function(t){const r=t.data,n=t.width,s=t.height,a=n*4;let i=s;do{const o=(i-1)*a;let c=n;do{const u=o+(c-1)*4;let d=r[u],f=r[u+1],m=r[u+2];d>127&&(d=255-d),f>127&&(f=255-f),m>127&&(m=255-m),r[u]=d,r[u+1]=f,r[u+2]=m}while(--c)}while(--i)};return yx.Solarize=e,yx}var vx={},k9;function OZ(){if(k9)return vx;k9=1,Object.defineProperty(vx,"__esModule",{value:!0}),vx.Threshold=void 0;const e=Ln(),t=Ya(),r=Gn(),n=function(s){const a=this.threshold()*255,i=s.data,o=i.length;for(let c=0;c<o;c+=1)i[c]=i[c]<a?0:255};return vx.Threshold=n,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),vx}var T9;function DZ(){if(T9)return F1;T9=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.Konva=void 0;const e=WS(),t=rZ(),r=sZ(),n=aZ(),s=iZ(),a=oZ(),i=lZ(),o=OR(),c=d8(),u=DR(),d=cZ(),f=uZ(),m=dZ(),p=fZ(),x=IR(),w=hZ(),v=mZ(),C=gZ(),k=pZ(),b=xZ(),j=yZ(),A=vZ(),F=wZ(),D=bZ(),M=_Z(),O=SZ(),L=kZ(),W=TZ(),re=CZ(),ie=NZ(),xe=EZ(),de=AZ(),fe=jZ(),H=PZ(),Q=MZ(),U=FZ(),V=OZ();return F1.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:r.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:a.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:c.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:m.Sprite,Star:p.Star,Text:x.Text,TextPath:w.TextPath,Transformer:v.Transformer,Wedge:C.Wedge,Filters:{Blur:k.Blur,Brighten:b.Brighten,Contrast:j.Contrast,Emboss:A.Emboss,Enhance:F.Enhance,Grayscale:D.Grayscale,HSL:M.HSL,HSV:O.HSV,Invert:L.Invert,Kaleidoscope:W.Kaleidoscope,Mask:re.Mask,Noise:ie.Noise,Pixelate:xe.Pixelate,Posterize:de.Posterize,RGB:fe.RGB,RGBA:H.RGBA,Sepia:Q.Sepia,Solarize:U.Solarize,Threshold:V.Threshold}}),F1}var IZ=fw.exports,C9;function RZ(){if(C9)return fw.exports;C9=1,Object.defineProperty(IZ,"__esModule",{value:!0});const e=DZ();return fw.exports=e.Konva,fw.exports}var RR=RZ();const LZ=eu(RR),BZ=OD({__proto__:null,default:LZ},[RR]);var S2={exports:{}},N9;function $Z(){return N9||(N9=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var r=WS();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return r.Konva}});const n=WS();e.exports=n.Konva})(S2,S2.exports)),S2.exports}var zZ=$Z();const by=eu(zZ);var n3={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s3,E9;function UZ(){return E9||(E9=1,s3=function(t){var r={},n=lh(),s=Sk(),a=Object.assign;function i(y){for(var _="https://reactjs.org/docs/error-decoder.html?invariant="+y,I=1;I<arguments.length;I++)_+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),x=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),A=Symbol.iterator;function F(y){return y===null||typeof y!="object"?null:(y=A&&y[A]||y["@@iterator"],typeof y=="function"?y:null)}function D(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case d:return"Fragment";case u:return"Portal";case m:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case C:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case x:return(y.displayName||"Context")+".Consumer";case p:return(y._context.displayName||"Context")+".Provider";case w:var _=y.render;return y=y.displayName,y||(y=_.displayName||_.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case k:return _=y.displayName||null,_!==null?_:D(y.type)||"Memo";case b:_=y._payload,y=y._init;try{return D(y(_))}catch{}}return null}function M(y){var _=y.type;switch(y.tag){case 24:return"Cache";case 9:return(_.displayName||"Context")+".Consumer";case 10:return(_._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=_.render,y=y.displayName||y.name||"",_.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return _;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(_);case 8:return _===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof _=="function")return _.displayName||_.name||null;if(typeof _=="string")return _}return null}function O(y){var _=y,I=y;if(y.alternate)for(;_.return;)_=_.return;else{y=_;do _=y,(_.flags&4098)!==0&&(I=_.return),y=_.return;while(y)}return _.tag===3?I:null}function L(y){if(O(y)!==y)throw Error(i(188))}function W(y){var _=y.alternate;if(!_){if(_=O(y),_===null)throw Error(i(188));return _!==y?null:y}for(var I=y,q=_;;){var ne=I.return;if(ne===null)break;var he=ne.alternate;if(he===null){if(q=ne.return,q!==null){I=q;continue}break}if(ne.child===he.child){for(he=ne.child;he;){if(he===I)return L(ne),y;if(he===q)return L(ne),_;he=he.sibling}throw Error(i(188))}if(I.return!==q.return)I=ne,q=he;else{for(var Fe=!1,ft=ne.child;ft;){if(ft===I){Fe=!0,I=ne,q=he;break}if(ft===q){Fe=!0,q=ne,I=he;break}ft=ft.sibling}if(!Fe){for(ft=he.child;ft;){if(ft===I){Fe=!0,I=he,q=ne;break}if(ft===q){Fe=!0,q=he,I=ne;break}ft=ft.sibling}if(!Fe)throw Error(i(189))}}if(I.alternate!==q)throw Error(i(190))}if(I.tag!==3)throw Error(i(188));return I.stateNode.current===I?y:_}function re(y){return y=W(y),y!==null?ie(y):null}function ie(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var _=ie(y);if(_!==null)return _;y=y.sibling}return null}function xe(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){if(y.tag!==4){var _=xe(y);if(_!==null)return _}y=y.sibling}return null}var de=Array.isArray,fe=t.getPublicInstance,H=t.getRootHostContext,Q=t.getChildHostContext,U=t.prepareForCommit,V=t.resetAfterCommit,X=t.createInstance,z=t.appendInitialChild,K=t.finalizeInitialChildren,te=t.prepareUpdate,se=t.shouldSetTextContent,pe=t.createTextInstance,oe=t.scheduleTimeout,ye=t.cancelTimeout,we=t.noTimeout,Se=t.isPrimaryRenderer,Ie=t.supportsMutation,me=t.supportsPersistence,_e=t.supportsHydration,We=t.getInstanceFromNode,Ue=t.preparePortalMount,St=t.getCurrentEventPriority,Ze=t.detachDeletedInstance,Kt=t.supportsMicrotasks,yt=t.scheduleMicrotask,Rt=t.supportsTestSelectors,At=t.findFiberRoot,wt=t.getBoundingRect,Ft=t.getTextContent,or=t.isHiddenSubtree,dr=t.matchAccessibilityRole,nr=t.setFocusIfFocusable,Xe=t.setupIntersectionObserver,Qe=t.appendChild,ut=t.appendChildToContainer,mt=t.commitTextUpdate,ht=t.commitMount,Ot=t.commitUpdate,nt=t.insertBefore,sr=t.insertInContainerBefore,kr=t.removeChild,Er=t.removeChildFromContainer,Gr=t.resetTextContent,Ar=t.hideInstance,vr=t.hideTextInstance,Ee=t.unhideInstance,Be=t.unhideTextInstance,qe=t.clearContainer,Ye=t.cloneInstance,Lt=t.createContainerChildSet,ze=t.appendChildToContainerChildSet,it=t.finalizeContainerChildren,Le=t.replaceContainerChildren,st=t.cloneHiddenInstance,rt=t.cloneHiddenTextInstance,qt=t.canHydrateInstance,Xt=t.canHydrateTextInstance,Yt=t.canHydrateSuspenseInstance,Z=t.isSuspenseInstancePending,ae=t.isSuspenseInstanceFallback,jt=t.getSuspenseInstanceFallbackErrorDetails,G=t.registerSuspenseInstanceRetry,ue=t.getNextHydratableSibling,Ce=t.getFirstHydratableChild,be=t.getFirstHydratableChildWithinContainer,Me=t.getFirstHydratableChildWithinSuspenseInstance,De=t.hydrateInstance,Ve=t.hydrateTextInstance,bt=t.hydrateSuspenseInstance,ot=t.getNextHydratableInstanceAfterSuspenseInstance,dt=t.commitHydratedContainer,ee=t.commitHydratedSuspenseInstance,je=t.clearSuspenseBoundary,ge=t.clearSuspenseBoundaryFromContainer,Ke=t.shouldDeleteUnhydratedTailInstances,tt=t.didNotMatchHydratedContainerTextInstance,Tt=t.didNotMatchHydratedTextInstance,cr;function Vt(y){if(cr===void 0)try{throw Error()}catch(I){var _=I.stack.trim().match(/\n( *(at )?)/);cr=_&&_[1]||""}return`
`+cr+y}var $t=!1;function mr(y,_){if(!y||$t)return"";$t=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(_)if(_=function(){throw Error()},Object.defineProperty(_.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_,[])}catch(xr){var q=xr}Reflect.construct(y,[],_)}else{try{_.call()}catch(xr){q=xr}y.call(_.prototype)}else{try{throw Error()}catch(xr){q=xr}y()}}catch(xr){if(xr&&q&&typeof xr.stack=="string"){for(var ne=xr.stack.split(`
`),he=q.stack.split(`
`),Fe=ne.length-1,ft=he.length-1;1<=Fe&&0<=ft&&ne[Fe]!==he[ft];)ft--;for(;1<=Fe&&0<=ft;Fe--,ft--)if(ne[Fe]!==he[ft]){if(Fe!==1||ft!==1)do if(Fe--,ft--,0>ft||ne[Fe]!==he[ft]){var It=`
`+ne[Fe].replace(" at new "," at ");return y.displayName&&It.includes("<anonymous>")&&(It=It.replace("<anonymous>",y.displayName)),It}while(1<=Fe&&0<=ft);break}}}finally{$t=!1,Error.prepareStackTrace=I}return(y=y?y.displayName||y.name:"")?Vt(y):""}var Zr=Object.prototype.hasOwnProperty,jr=[],Pr=-1;function xn(y){return{current:y}}function Kr(y){0>Pr||(y.current=jr[Pr],jr[Pr]=null,Pr--)}function Ir(y,_){Pr++,jr[Pr]=y.current,y.current=_}var Os={},Yn=xn(Os),Vn=xn(!1),ts=Os;function Bs(y,_){var I=y.type.contextTypes;if(!I)return Os;var q=y.stateNode;if(q&&q.__reactInternalMemoizedUnmaskedChildContext===_)return q.__reactInternalMemoizedMaskedChildContext;var ne={},he;for(he in I)ne[he]=_[he];return q&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=_,y.__reactInternalMemoizedMaskedChildContext=ne),ne}function hn(y){return y=y.childContextTypes,y!=null}function Pe(){Kr(Vn),Kr(Yn)}function Ut(y,_,I){if(Yn.current!==Os)throw Error(i(168));Ir(Yn,_),Ir(Vn,I)}function Vr(y,_,I){var q=y.stateNode;if(_=_.childContextTypes,typeof q.getChildContext!="function")return I;q=q.getChildContext();for(var ne in q)if(!(ne in _))throw Error(i(108,M(y)||"Unknown",ne));return a({},I,q)}function Xr(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||Os,ts=Yn.current,Ir(Yn,y),Ir(Vn,Vn.current),!0}function xs(y,_,I){var q=y.stateNode;if(!q)throw Error(i(169));I?(y=Vr(y,_,ts),q.__reactInternalMemoizedMergedChildContext=y,Kr(Vn),Kr(Yn),Ir(Yn,y)):Kr(Vn),Ir(Vn,I)}var Dn=Math.clz32?Math.clz32:tr,Je=Math.log,Pt=Math.LN2;function tr(y){return y>>>=0,y===0?32:31-(Je(y)/Pt|0)|0}var Jt=64,Bn=4194304;function vt(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function Re(y,_){var I=y.pendingLanes;if(I===0)return 0;var q=0,ne=y.suspendedLanes,he=y.pingedLanes,Fe=I&268435455;if(Fe!==0){var ft=Fe&~ne;ft!==0?q=vt(ft):(he&=Fe,he!==0&&(q=vt(he)))}else Fe=I&~ne,Fe!==0?q=vt(Fe):he!==0&&(q=vt(he));if(q===0)return 0;if(_!==0&&_!==q&&(_&ne)===0&&(ne=q&-q,he=_&-_,ne>=he||ne===16&&(he&4194240)!==0))return _;if((q&4)!==0&&(q|=I&16),_=y.entangledLanes,_!==0)for(y=y.entanglements,_&=q;0<_;)I=31-Dn(_),ne=1<<I,q|=y[I],_&=~ne;return q}function Qt(y,_){switch(y){case 1:case 2:case 4:return _+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bt(y,_){for(var I=y.suspendedLanes,q=y.pingedLanes,ne=y.expirationTimes,he=y.pendingLanes;0<he;){var Fe=31-Dn(he),ft=1<<Fe,It=ne[Fe];It===-1?((ft&I)===0||(ft&q)!==0)&&(ne[Fe]=Qt(ft,_)):It<=_&&(y.expiredLanes|=ft),he&=~ft}}function Or(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function Zt(){var y=Jt;return Jt<<=1,(Jt&4194240)===0&&(Jt=64),y}function on(y){for(var _=[],I=0;31>I;I++)_.push(y);return _}function Cn(y,_,I){y.pendingLanes|=_,_!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,_=31-Dn(_),y[_]=I}function _t(y,_){var I=y.pendingLanes&~_;y.pendingLanes=_,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=_,y.mutableReadLanes&=_,y.entangledLanes&=_,_=y.entanglements;var q=y.eventTimes;for(y=y.expirationTimes;0<I;){var ne=31-Dn(I),he=1<<ne;_[ne]=0,q[ne]=-1,y[ne]=-1,I&=~he}}function pr(y,_){var I=y.entangledLanes|=_;for(y=y.entanglements;I;){var q=31-Dn(I),ne=1<<q;ne&_|y[q]&_&&(y[q]|=_),I&=~ne}}var gt=0;function En(y){return y&=-y,1<y?4<y?(y&268435455)!==0?16:536870912:4:1}var rn=s.unstable_scheduleCallback,Lr=s.unstable_cancelCallback,$n=s.unstable_shouldYield,ds=s.unstable_requestPaint,Cs=s.unstable_now,xo=s.unstable_ImmediatePriority,tc=s.unstable_UserBlockingPriority,Ds=s.unstable_NormalPriority,Sh=s.unstable_IdlePriority,Al=null,Qa=null;function rc(y){if(Qa&&typeof Qa.onCommitFiberRoot=="function")try{Qa.onCommitFiberRoot(Al,y,void 0,(y.current.flags&128)===128)}catch{}}function nc(y,_){return y===_&&(y!==0||1/y===1/_)||y!==y&&_!==_}var ln=typeof Object.is=="function"?Object.is:nc,yo=null,sc=!1,au=!1;function Za(y){yo===null?yo=[y]:yo.push(y)}function Wo(y){sc=!0,Za(y)}function Oa(){if(!au&&yo!==null){au=!0;var y=0,_=gt;try{var I=yo;for(gt=1;y<I.length;y++){var q=I[y];do q=q(!0);while(q!==null)}yo=null,sc=!1}catch(ne){throw yo!==null&&(yo=yo.slice(y+1)),rn(xo,Oa),ne}finally{gt=_,au=!1}}return null}var ar=[],Zs=0,iu=null,jl=0,Da=[],fs=0,hs=null,vn=1,vo="";function wo(y,_){ar[Zs++]=jl,ar[Zs++]=iu,iu=y,jl=_}function kh(y,_,I){Da[fs++]=vn,Da[fs++]=vo,Da[fs++]=hs,hs=y;var q=vn;y=vo;var ne=32-Dn(q)-1;q&=~(1<<ne),I+=1;var he=32-Dn(_)+ne;if(30<he){var Fe=ne-ne%5;he=(q&(1<<Fe)-1).toString(32),q>>=Fe,ne-=Fe,vn=1<<32-Dn(_)+ne|I<<ne|q,vo=he+y}else vn=1<<he|I<<ne|q,vo=y}function jd(y){y.return!==null&&(wo(y,1),kh(y,1,0))}function Pd(y){for(;y===iu;)iu=ar[--Zs],ar[Zs]=null,jl=ar[--Zs],ar[Zs]=null;for(;y===hs;)hs=Da[--fs],Da[fs]=null,vo=Da[--fs],Da[fs]=null,vn=Da[--fs],Da[fs]=null}var Ia=null,di=null,ys=!1,Md=!1,ll=null;function f1(y,_){var I=Yo(5,null,null,0);I.elementType="DELETED",I.stateNode=_,I.return=y,_=y.deletions,_===null?(y.deletions=[I],y.flags|=16):_.push(I)}function bo(y,_){switch(y.tag){case 5:return _=qt(_,y.type,y.pendingProps),_!==null?(y.stateNode=_,Ia=y,di=Ce(_),!0):!1;case 6:return _=Xt(_,y.pendingProps),_!==null?(y.stateNode=_,Ia=y,di=null,!0):!1;case 13:if(_=Yt(_),_!==null){var I=hs!==null?{id:vn,overflow:vo}:null;return y.memoizedState={dehydrated:_,treeContext:I,retryLane:1073741824},I=Yo(18,null,null,0),I.stateNode=_,I.return=y,y.child=I,Ia=y,di=null,!0}return!1;default:return!1}}function cn(y){return(y.mode&1)!==0&&(y.flags&128)===0}function Fd(y){if(ys){var _=di;if(_){var I=_;if(!bo(y,_)){if(cn(y))throw Error(i(418));_=ue(I);var q=Ia;_&&bo(y,_)?f1(q,I):(y.flags=y.flags&-4097|2,ys=!1,Ia=y)}}else{if(cn(y))throw Error(i(418));y.flags=y.flags&-4097|2,ys=!1,Ia=y}}}function Od(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Ia=y}function Bu(y){if(!_e||y!==Ia)return!1;if(!ys)return Od(y),ys=!0,!1;if(y.tag!==3&&(y.tag!==5||Ke(y.type)&&!se(y.type,y.memoizedProps))){var _=di;if(_){if(cn(y))throw Th(),Error(i(418));for(;_;)f1(y,_),_=ue(_)}}if(Od(y),y.tag===13){if(!_e)throw Error(i(316));if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));di=ot(y)}else di=Ia?ue(y.stateNode):null;return!0}function Th(){for(var y=di;y;)y=ue(y)}function ou(){_e&&(di=Ia=null,Md=ys=!1)}function $u(y){ll===null?ll=[y]:ll.push(y)}var h1=o.ReactCurrentBatchConfig;function Dd(y,_){if(ln(y,_))return!0;if(typeof y!="object"||y===null||typeof _!="object"||_===null)return!1;var I=Object.keys(y),q=Object.keys(_);if(I.length!==q.length)return!1;for(q=0;q<I.length;q++){var ne=I[q];if(!Zr.call(_,ne)||!ln(y[ne],_[ne]))return!1}return!0}function og(y){switch(y.tag){case 5:return Vt(y.type);case 16:return Vt("Lazy");case 13:return Vt("Suspense");case 19:return Vt("SuspenseList");case 0:case 2:case 15:return y=mr(y.type,!1),y;case 11:return y=mr(y.type.render,!1),y;case 1:return y=mr(y.type,!0),y;default:return""}}function cl(y,_,I){if(y=I.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(i(309));var q=I.stateNode}if(!q)throw Error(i(147,y));var ne=q,he=""+y;return _!==null&&_.ref!==null&&typeof _.ref=="function"&&_.ref._stringRef===he?_.ref:(_=function(Fe){var ft=ne.refs;Fe===null?delete ft[he]:ft[he]=Fe},_._stringRef=he,_)}if(typeof y!="string")throw Error(i(284));if(!I._owner)throw Error(i(290,y))}return y}function U0(y,_){throw y=Object.prototype.toString.call(_),Error(i(31,y==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":y))}function Ch(y){var _=y._init;return _(y._payload)}function Nh(y){function _(Mt,pt){if(y){var zt=Mt.deletions;zt===null?(Mt.deletions=[pt],Mt.flags|=16):zt.push(pt)}}function I(Mt,pt){if(!y)return null;for(;pt!==null;)_(Mt,pt),pt=pt.sibling;return null}function q(Mt,pt){for(Mt=new Map;pt!==null;)pt.key!==null?Mt.set(pt.key,pt):Mt.set(pt.index,pt),pt=pt.sibling;return Mt}function ne(Mt,pt){return Mt=id(Mt,pt),Mt.index=0,Mt.sibling=null,Mt}function he(Mt,pt,zt){return Mt.index=zt,y?(zt=Mt.alternate,zt!==null?(zt=zt.index,zt<pt?(Mt.flags|=2,pt):zt):(Mt.flags|=2,pt)):(Mt.flags|=1048576,pt)}function Fe(Mt){return y&&Mt.alternate===null&&(Mt.flags|=2),Mt}function ft(Mt,pt,zt,Cr){return pt===null||pt.tag!==6?(pt=kf(zt,Mt.mode,Cr),pt.return=Mt,pt):(pt=ne(pt,zt),pt.return=Mt,pt)}function It(Mt,pt,zt,Cr){var Hr=zt.type;return Hr===d?Rr(Mt,pt,zt.props.children,Cr,zt.key):pt!==null&&(pt.elementType===Hr||typeof Hr=="object"&&Hr!==null&&Hr.$$typeof===b&&Ch(Hr)===pt.type)?(Cr=ne(pt,zt.props),Cr.ref=cl(Mt,pt,zt),Cr.return=Mt,Cr):(Cr=kg(zt.type,zt.key,zt.props,null,Mt.mode,Cr),Cr.ref=cl(Mt,pt,zt),Cr.return=Mt,Cr)}function xr(Mt,pt,zt,Cr){return pt===null||pt.tag!==4||pt.stateNode.containerInfo!==zt.containerInfo||pt.stateNode.implementation!==zt.implementation?(pt=Tg(zt,Mt.mode,Cr),pt.return=Mt,pt):(pt=ne(pt,zt.children||[]),pt.return=Mt,pt)}function Rr(Mt,pt,zt,Cr,Hr){return pt===null||pt.tag!==7?(pt=mi(zt,Mt.mode,Cr,Hr),pt.return=Mt,pt):(pt=ne(pt,zt),pt.return=Mt,pt)}function mn(Mt,pt,zt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return pt=kf(""+pt,Mt.mode,zt),pt.return=Mt,pt;if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case c:return zt=kg(pt.type,pt.key,pt.props,null,Mt.mode,zt),zt.ref=cl(Mt,null,pt),zt.return=Mt,zt;case u:return pt=Tg(pt,Mt.mode,zt),pt.return=Mt,pt;case b:var Cr=pt._init;return mn(Mt,Cr(pt._payload),zt)}if(de(pt)||F(pt))return pt=mi(pt,Mt.mode,zt,null),pt.return=Mt,pt;U0(Mt,pt)}return null}function Tr(Mt,pt,zt,Cr){var Hr=pt!==null?pt.key:null;if(typeof zt=="string"&&zt!==""||typeof zt=="number")return Hr!==null?null:ft(Mt,pt,""+zt,Cr);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case c:return zt.key===Hr?It(Mt,pt,zt,Cr):null;case u:return zt.key===Hr?xr(Mt,pt,zt,Cr):null;case b:return Hr=zt._init,Tr(Mt,pt,Hr(zt._payload),Cr)}if(de(zt)||F(zt))return Hr!==null?null:Rr(Mt,pt,zt,Cr,null);U0(Mt,zt)}return null}function Es(Mt,pt,zt,Cr,Hr){if(typeof Cr=="string"&&Cr!==""||typeof Cr=="number")return Mt=Mt.get(zt)||null,ft(pt,Mt,""+Cr,Hr);if(typeof Cr=="object"&&Cr!==null){switch(Cr.$$typeof){case c:return Mt=Mt.get(Cr.key===null?zt:Cr.key)||null,It(pt,Mt,Cr,Hr);case u:return Mt=Mt.get(Cr.key===null?zt:Cr.key)||null,xr(pt,Mt,Cr,Hr);case b:var kn=Cr._init;return Es(Mt,pt,zt,kn(Cr._payload),Hr)}if(de(Cr)||F(Cr))return Mt=Mt.get(zt)||null,Rr(pt,Mt,Cr,Hr,null);U0(pt,Cr)}return null}function cs(Mt,pt,zt,Cr){for(var Hr=null,kn=null,gn=pt,Hn=pt=0,Wa=null;gn!==null&&Hn<zt.length;Hn++){gn.index>Hn?(Wa=gn,gn=null):Wa=gn.sibling;var Rn=Tr(Mt,gn,zt[Hn],Cr);if(Rn===null){gn===null&&(gn=Wa);break}y&&gn&&Rn.alternate===null&&_(Mt,gn),pt=he(Rn,pt,Hn),kn===null?Hr=Rn:kn.sibling=Rn,kn=Rn,gn=Wa}if(Hn===zt.length)return I(Mt,gn),ys&&wo(Mt,Hn),Hr;if(gn===null){for(;Hn<zt.length;Hn++)gn=mn(Mt,zt[Hn],Cr),gn!==null&&(pt=he(gn,pt,Hn),kn===null?Hr=gn:kn.sibling=gn,kn=gn);return ys&&wo(Mt,Hn),Hr}for(gn=q(Mt,gn);Hn<zt.length;Hn++)Wa=Es(gn,Mt,Hn,zt[Hn],Cr),Wa!==null&&(y&&Wa.alternate!==null&&gn.delete(Wa.key===null?Hn:Wa.key),pt=he(Wa,pt,Hn),kn===null?Hr=Wa:kn.sibling=Wa,kn=Wa);return y&&gn.forEach(function(Oi){return _(Mt,Oi)}),ys&&wo(Mt,Hn),Hr}function Qi(Mt,pt,zt,Cr){var Hr=F(zt);if(typeof Hr!="function")throw Error(i(150));if(zt=Hr.call(zt),zt==null)throw Error(i(151));for(var kn=Hr=null,gn=pt,Hn=pt=0,Wa=null,Rn=zt.next();gn!==null&&!Rn.done;Hn++,Rn=zt.next()){gn.index>Hn?(Wa=gn,gn=null):Wa=gn.sibling;var Oi=Tr(Mt,gn,Rn.value,Cr);if(Oi===null){gn===null&&(gn=Wa);break}y&&gn&&Oi.alternate===null&&_(Mt,gn),pt=he(Oi,pt,Hn),kn===null?Hr=Oi:kn.sibling=Oi,kn=Oi,gn=Wa}if(Rn.done)return I(Mt,gn),ys&&wo(Mt,Hn),Hr;if(gn===null){for(;!Rn.done;Hn++,Rn=zt.next())Rn=mn(Mt,Rn.value,Cr),Rn!==null&&(pt=he(Rn,pt,Hn),kn===null?Hr=Rn:kn.sibling=Rn,kn=Rn);return ys&&wo(Mt,Hn),Hr}for(gn=q(Mt,gn);!Rn.done;Hn++,Rn=zt.next())Rn=Es(gn,Mt,Hn,Rn.value,Cr),Rn!==null&&(y&&Rn.alternate!==null&&gn.delete(Rn.key===null?Hn:Rn.key),pt=he(Rn,pt,Hn),kn===null?Hr=Rn:kn.sibling=Rn,kn=Rn);return y&&gn.forEach(function(s_){return _(Mt,s_)}),ys&&wo(Mt,Hn),Hr}function Ec(Mt,pt,zt,Cr){if(typeof zt=="object"&&zt!==null&&zt.type===d&&zt.key===null&&(zt=zt.props.children),typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case c:e:{for(var Hr=zt.key,kn=pt;kn!==null;){if(kn.key===Hr){if(Hr=zt.type,Hr===d){if(kn.tag===7){I(Mt,kn.sibling),pt=ne(kn,zt.props.children),pt.return=Mt,Mt=pt;break e}}else if(kn.elementType===Hr||typeof Hr=="object"&&Hr!==null&&Hr.$$typeof===b&&Ch(Hr)===kn.type){I(Mt,kn.sibling),pt=ne(kn,zt.props),pt.ref=cl(Mt,kn,zt),pt.return=Mt,Mt=pt;break e}I(Mt,kn);break}else _(Mt,kn);kn=kn.sibling}zt.type===d?(pt=mi(zt.props.children,Mt.mode,Cr,zt.key),pt.return=Mt,Mt=pt):(Cr=kg(zt.type,zt.key,zt.props,null,Mt.mode,Cr),Cr.ref=cl(Mt,pt,zt),Cr.return=Mt,Mt=Cr)}return Fe(Mt);case u:e:{for(kn=zt.key;pt!==null;){if(pt.key===kn)if(pt.tag===4&&pt.stateNode.containerInfo===zt.containerInfo&&pt.stateNode.implementation===zt.implementation){I(Mt,pt.sibling),pt=ne(pt,zt.children||[]),pt.return=Mt,Mt=pt;break e}else{I(Mt,pt);break}else _(Mt,pt);pt=pt.sibling}pt=Tg(zt,Mt.mode,Cr),pt.return=Mt,Mt=pt}return Fe(Mt);case b:return kn=zt._init,Ec(Mt,pt,kn(zt._payload),Cr)}if(de(zt))return cs(Mt,pt,zt,Cr);if(F(zt))return Qi(Mt,pt,zt,Cr);U0(Mt,zt)}return typeof zt=="string"&&zt!==""||typeof zt=="number"?(zt=""+zt,pt!==null&&pt.tag===6?(I(Mt,pt.sibling),pt=ne(pt,zt),pt.return=Mt,Mt=pt):(I(Mt,pt),pt=kf(zt,Mt.mode,Cr),pt.return=Mt,Mt=pt),Fe(Mt)):I(Mt,pt)}return Ec}var lu=Nh(!0),lg=Nh(!1),W0=xn(null),Id=null,cu=null,Rd=null;function H0(){Rd=cu=Id=null}function cg(y,_,I){Se?(Ir(W0,_._currentValue),_._currentValue=I):(Ir(W0,_._currentValue2),_._currentValue2=I)}function zu(y){var _=W0.current;Kr(W0),Se?y._currentValue=_:y._currentValue2=_}function Ho(y,_,I){for(;y!==null;){var q=y.alternate;if((y.childLanes&_)!==_?(y.childLanes|=_,q!==null&&(q.childLanes|=_)):q!==null&&(q.childLanes&_)!==_&&(q.childLanes|=_),y===I)break;y=y.return}}function ac(y,_){Id=y,Rd=cu=null,y=y.dependencies,y!==null&&y.firstContext!==null&&((y.lanes&_)!==0&&(la=!0),y.firstContext=null)}function Ti(y){var _=Se?y._currentValue:y._currentValue2;if(Rd!==y)if(y={context:y,memoizedValue:_,next:null},cu===null){if(Id===null)throw Error(i(308));cu=y,Id.dependencies={lanes:0,firstContext:y}}else cu=cu.next=y;return _}var ic=null;function G0(y){ic===null?ic=[y]:ic.push(y)}function V0(y,_,I,q){var ne=_.interleaved;return ne===null?(I.next=I,G0(_)):(I.next=ne.next,ne.next=I),_.interleaved=I,Ki(y,q)}function Ki(y,_){y.lanes|=_;var I=y.alternate;for(I!==null&&(I.lanes|=_),I=y,y=y.return;y!==null;)y.childLanes|=_,I=y.alternate,I!==null&&(I.childLanes|=_),I=y,y=y.return;return I.tag===3?I.stateNode:null}var fi=!1;function Ld(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bd(y,_){y=y.updateQueue,_.updateQueue===y&&(_.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function Pl(y,_){return{eventTime:y,lane:_,tag:0,payload:null,callback:null,next:null}}function Ml(y,_,I){var q=y.updateQueue;if(q===null)return null;if(q=q.shared,(bn&2)!==0){var ne=q.pending;return ne===null?_.next=_:(_.next=ne.next,ne.next=_),q.pending=_,Ki(y,I)}return ne=q.interleaved,ne===null?(_.next=_,G0(q)):(_.next=ne.next,ne.next=_),q.interleaved=_,Ki(y,I)}function Uu(y,_,I){if(_=_.updateQueue,_!==null&&(_=_.shared,(I&4194240)!==0)){var q=_.lanes;q&=y.pendingLanes,I|=q,_.lanes=I,pr(y,I)}}function oc(y,_){var I=y.updateQueue,q=y.alternate;if(q!==null&&(q=q.updateQueue,I===q)){var ne=null,he=null;if(I=I.firstBaseUpdate,I!==null){do{var Fe={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};he===null?ne=he=Fe:he=he.next=Fe,I=I.next}while(I!==null);he===null?ne=he=_:he=he.next=_}else ne=he=_;I={baseState:q.baseState,firstBaseUpdate:ne,lastBaseUpdate:he,shared:q.shared,effects:q.effects},y.updateQueue=I;return}y=I.lastBaseUpdate,y===null?I.firstBaseUpdate=_:y.next=_,I.lastBaseUpdate=_}function ul(y,_,I,q){var ne=y.updateQueue;fi=!1;var he=ne.firstBaseUpdate,Fe=ne.lastBaseUpdate,ft=ne.shared.pending;if(ft!==null){ne.shared.pending=null;var It=ft,xr=It.next;It.next=null,Fe===null?he=xr:Fe.next=xr,Fe=It;var Rr=y.alternate;Rr!==null&&(Rr=Rr.updateQueue,ft=Rr.lastBaseUpdate,ft!==Fe&&(ft===null?Rr.firstBaseUpdate=xr:ft.next=xr,Rr.lastBaseUpdate=It))}if(he!==null){var mn=ne.baseState;Fe=0,Rr=xr=It=null,ft=he;do{var Tr=ft.lane,Es=ft.eventTime;if((q&Tr)===Tr){Rr!==null&&(Rr=Rr.next={eventTime:Es,lane:0,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null});e:{var cs=y,Qi=ft;switch(Tr=_,Es=I,Qi.tag){case 1:if(cs=Qi.payload,typeof cs=="function"){mn=cs.call(Es,mn,Tr);break e}mn=cs;break e;case 3:cs.flags=cs.flags&-65537|128;case 0:if(cs=Qi.payload,Tr=typeof cs=="function"?cs.call(Es,mn,Tr):cs,Tr==null)break e;mn=a({},mn,Tr);break e;case 2:fi=!0}}ft.callback!==null&&ft.lane!==0&&(y.flags|=64,Tr=ne.effects,Tr===null?ne.effects=[ft]:Tr.push(ft))}else Es={eventTime:Es,lane:Tr,tag:ft.tag,payload:ft.payload,callback:ft.callback,next:null},Rr===null?(xr=Rr=Es,It=mn):Rr=Rr.next=Es,Fe|=Tr;if(ft=ft.next,ft===null){if(ft=ne.shared.pending,ft===null)break;Tr=ft,ft=Tr.next,Tr.next=null,ne.lastBaseUpdate=Tr,ne.shared.pending=null}}while(!0);if(Rr===null&&(It=mn),ne.baseState=It,ne.firstBaseUpdate=xr,ne.lastBaseUpdate=Rr,_=ne.shared.interleaved,_!==null){ne=_;do Fe|=ne.lane,ne=ne.next;while(ne!==_)}else he===null&&(ne.shared.lanes=0);gu|=Fe,y.lanes=Fe,y.memoizedState=mn}}function q0(y,_,I){if(y=_.effects,_.effects=null,y!==null)for(_=0;_<y.length;_++){var q=y[_],ne=q.callback;if(ne!==null){if(q.callback=null,q=I,typeof ne!="function")throw Error(i(191,ne));ne.call(q)}}}var lc={},Xi=xn(lc),Wu=xn(lc),Fl=xn(lc);function ei(y){if(y===lc)throw Error(i(174));return y}function K0(y,_){Ir(Fl,_),Ir(Wu,y),Ir(Xi,lc),y=H(_),Kr(Xi),Ir(Xi,y)}function uu(){Kr(Xi),Kr(Wu),Kr(Fl)}function Eh(y){var _=ei(Fl.current),I=ei(Xi.current);_=Q(I,y.type,_),I!==_&&(Ir(Wu,y),Ir(Xi,_))}function X0(y){Wu.current===y&&(Kr(Xi),Kr(Wu))}var js=xn(0);function $d(y){for(var _=y;_!==null;){if(_.tag===13){var I=_.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||Z(I)||ae(I)))return _}else if(_.tag===19&&_.memoizedProps.revealOrder!==void 0){if((_.flags&128)!==0)return _}else if(_.child!==null){_.child.return=_,_=_.child;continue}if(_===y)break;for(;_.sibling===null;){if(_.return===null||_.return===y)return null;_=_.return}_.sibling.return=_.return,_=_.sibling}return null}var Y0=[];function ug(){for(var y=0;y<Y0.length;y++){var _=Y0[y];Se?_._workInProgressVersionPrimary=null:_._workInProgressVersionSecondary=null}Y0.length=0}var Is=o.ReactCurrentDispatcher,cc=o.ReactCurrentBatchConfig,uc=0,os=null,$s=null,zs=null,dc=!1,Hu=!1,Ci=0,du=0;function Ne(){throw Error(i(321))}function ea(y,_){if(_===null)return!1;for(var I=0;I<_.length&&I<y.length;I++)if(!ln(y[I],_[I]))return!1;return!0}function Ra(y,_,I,q,ne,he){if(uc=he,os=_,_.memoizedState=null,_.updateQueue=null,_.lanes=0,Is.current=y===null||y.memoizedState===null?rf:Gd,y=I(q,ne),Hu){he=0;do{if(Hu=!1,Ci=0,25<=he)throw Error(i(301));he+=1,zs=$s=null,_.updateQueue=null,Is.current=Vd,y=I(q,ne)}while(Hu)}if(Is.current=fu,_=$s!==null&&$s.next!==null,uc=0,zs=$s=os=null,dc=!1,_)throw Error(i(300));return y}function zd(){var y=Ci!==0;return Ci=0,y}function ti(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zs===null?os.memoizedState=zs=y:zs=zs.next=y,zs}function oa(){if($s===null){var y=os.alternate;y=y!==null?y.memoizedState:null}else y=$s.next;var _=zs===null?os.memoizedState:zs.next;if(_!==null)zs=_,$s=y;else{if(y===null)throw Error(i(310));$s=y,y={memoizedState:$s.memoizedState,baseState:$s.baseState,baseQueue:$s.baseQueue,queue:$s.queue,next:null},zs===null?os.memoizedState=zs=y:zs=zs.next=y}return zs}function Ni(y,_){return typeof _=="function"?_(y):_}function Gu(y){var _=oa(),I=_.queue;if(I===null)throw Error(i(311));I.lastRenderedReducer=y;var q=$s,ne=q.baseQueue,he=I.pending;if(he!==null){if(ne!==null){var Fe=ne.next;ne.next=he.next,he.next=Fe}q.baseQueue=ne=he,I.pending=null}if(ne!==null){he=ne.next,q=q.baseState;var ft=Fe=null,It=null,xr=he;do{var Rr=xr.lane;if((uc&Rr)===Rr)It!==null&&(It=It.next={lane:0,action:xr.action,hasEagerState:xr.hasEagerState,eagerState:xr.eagerState,next:null}),q=xr.hasEagerState?xr.eagerState:y(q,xr.action);else{var mn={lane:Rr,action:xr.action,hasEagerState:xr.hasEagerState,eagerState:xr.eagerState,next:null};It===null?(ft=It=mn,Fe=q):It=It.next=mn,os.lanes|=Rr,gu|=Rr}xr=xr.next}while(xr!==null&&xr!==he);It===null?Fe=q:It.next=ft,ln(q,_.memoizedState)||(la=!0),_.memoizedState=q,_.baseState=Fe,_.baseQueue=It,I.lastRenderedState=q}if(y=I.interleaved,y!==null){ne=y;do he=ne.lane,os.lanes|=he,gu|=he,ne=ne.next;while(ne!==y)}else ne===null&&(I.lanes=0);return[_.memoizedState,I.dispatch]}function hi(y){var _=oa(),I=_.queue;if(I===null)throw Error(i(311));I.lastRenderedReducer=y;var q=I.dispatch,ne=I.pending,he=_.memoizedState;if(ne!==null){I.pending=null;var Fe=ne=ne.next;do he=y(he,Fe.action),Fe=Fe.next;while(Fe!==ne);ln(he,_.memoizedState)||(la=!0),_.memoizedState=he,_.baseQueue===null&&(_.baseState=he),I.lastRenderedState=he}return[he,q]}function Ah(){}function _o(y,_){var I=os,q=oa(),ne=_(),he=!ln(q.memoizedState,ne);if(he&&(q.memoizedState=ne,la=!0),q=q.queue,Wd(Q0.bind(null,I,q,y),[y]),q.getSnapshot!==_||he||zs!==null&&zs.memoizedState.tag&1){if(I.flags|=2048,fc(9,dg.bind(null,I,q,ne,_),void 0,null),vs===null)throw Error(i(349));(uc&30)!==0||J0(I,_,ne)}return ne}function J0(y,_,I){y.flags|=16384,y={getSnapshot:_,value:I},_=os.updateQueue,_===null?(_={lastEffect:null,stores:null},os.updateQueue=_,_.stores=[y]):(I=_.stores,I===null?_.stores=[y]:I.push(y))}function dg(y,_,I,q){_.value=I,_.getSnapshot=q,Z0(_)&&dl(y)}function Q0(y,_,I){return I(function(){Z0(_)&&dl(y)})}function Z0(y){var _=y.getSnapshot;y=y.value;try{var I=_();return!ln(y,I)}catch{return!0}}function dl(y){var _=Ki(y,1);_!==null&&Mi(_,y,1,-1)}function Ud(y){var _=ti();return typeof y=="function"&&(y=y()),_.memoizedState=_.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:y},_.queue=y,y=y.dispatch=hg.bind(null,os,y),[_.memoizedState,y]}function fc(y,_,I,q){return y={tag:y,create:_,destroy:I,deps:q,next:null},_=os.updateQueue,_===null?(_={lastEffect:null,stores:null},os.updateQueue=_,_.lastEffect=y.next=y):(I=_.lastEffect,I===null?_.lastEffect=y.next=y:(q=I.next,I.next=y,y.next=q,_.lastEffect=y)),y}function ef(){return oa().memoizedState}function Vu(y,_,I,q){var ne=ti();os.flags|=y,ne.memoizedState=fc(1|_,I,void 0,q===void 0?null:q)}function Ol(y,_,I,q){var ne=oa();q=q===void 0?null:q;var he=void 0;if($s!==null){var Fe=$s.memoizedState;if(he=Fe.destroy,q!==null&&ea(q,Fe.deps)){ne.memoizedState=fc(_,I,he,q);return}}os.flags|=y,ne.memoizedState=fc(1|_,I,he,q)}function jh(y,_){return Vu(8390656,8,y,_)}function Wd(y,_){return Ol(2048,8,y,_)}function fg(y,_){return Ol(4,2,y,_)}function rs(y,_){return Ol(4,4,y,_)}function Hd(y,_){if(typeof _=="function")return y=y(),_(y),function(){_(null)};if(_!=null)return y=y(),_.current=y,function(){_.current=null}}function qu(y,_,I){return I=I!=null?I.concat([y]):null,Ol(4,4,Hd.bind(null,_,y),I)}function hc(){}function mc(y,_){var I=oa();_=_===void 0?null:_;var q=I.memoizedState;return q!==null&&_!==null&&ea(_,q[1])?q[0]:(I.memoizedState=[y,_],y)}function gc(y,_){var I=oa();_=_===void 0?null:_;var q=I.memoizedState;return q!==null&&_!==null&&ea(_,q[1])?q[0]:(y=y(),I.memoizedState=[y,_],y)}function Ku(y,_,I){return(uc&21)===0?(y.baseState&&(y.baseState=!1,la=!0),y.memoizedState=I):(ln(I,_)||(I=Zt(),os.lanes|=I,gu|=I,y.baseState=!0),_)}function tf(y,_){var I=gt;gt=I!==0&&4>I?I:4,y(!0);var q=cc.transition;cc.transition={};try{y(!1),_()}finally{gt=I,cc.transition=q}}function pc(){return oa().memoizedState}function m1(y,_,I){var q=Ua(y);if(I={lane:q,action:I,hasEagerState:!1,eagerState:null,next:null},Ph(y))mg(_,I);else if(I=V0(y,_,I,q),I!==null){var ne=Ps();Mi(I,y,q,ne),Xu(I,_,q)}}function hg(y,_,I){var q=Ua(y),ne={lane:q,action:I,hasEagerState:!1,eagerState:null,next:null};if(Ph(y))mg(_,ne);else{var he=y.alternate;if(y.lanes===0&&(he===null||he.lanes===0)&&(he=_.lastRenderedReducer,he!==null))try{var Fe=_.lastRenderedState,ft=he(Fe,I);if(ne.hasEagerState=!0,ne.eagerState=ft,ln(ft,Fe)){var It=_.interleaved;It===null?(ne.next=ne,G0(_)):(ne.next=It.next,It.next=ne),_.interleaved=ne;return}}catch{}finally{}I=V0(y,_,ne,q),I!==null&&(ne=Ps(),Mi(I,y,q,ne),Xu(I,_,q))}}function Ph(y){var _=y.alternate;return y===os||_!==null&&_===os}function mg(y,_){Hu=dc=!0;var I=y.pending;I===null?_.next=_:(_.next=I.next,I.next=_),y.pending=_}function Xu(y,_,I){if((I&4194240)!==0){var q=_.lanes;q&=y.pendingLanes,I|=q,_.lanes=I,pr(y,I)}}var fu={readContext:Ti,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},rf={readContext:Ti,useCallback:function(y,_){return ti().memoizedState=[y,_===void 0?null:_],y},useContext:Ti,useEffect:jh,useImperativeHandle:function(y,_,I){return I=I!=null?I.concat([y]):null,Vu(4194308,4,Hd.bind(null,_,y),I)},useLayoutEffect:function(y,_){return Vu(4194308,4,y,_)},useInsertionEffect:function(y,_){return Vu(4,2,y,_)},useMemo:function(y,_){var I=ti();return _=_===void 0?null:_,y=y(),I.memoizedState=[y,_],y},useReducer:function(y,_,I){var q=ti();return _=I!==void 0?I(_):_,q.memoizedState=q.baseState=_,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:_},q.queue=y,y=y.dispatch=m1.bind(null,os,y),[q.memoizedState,y]},useRef:function(y){var _=ti();return y={current:y},_.memoizedState=y},useState:Ud,useDebugValue:hc,useDeferredValue:function(y){return ti().memoizedState=y},useTransition:function(){var y=Ud(!1),_=y[0];return y=tf.bind(null,y[1]),ti().memoizedState=y,[_,y]},useMutableSource:function(){},useSyncExternalStore:function(y,_,I){var q=os,ne=ti();if(ys){if(I===void 0)throw Error(i(407));I=I()}else{if(I=_(),vs===null)throw Error(i(349));(uc&30)!==0||J0(q,_,I)}ne.memoizedState=I;var he={value:I,getSnapshot:_};return ne.queue=he,jh(Q0.bind(null,q,he,y),[y]),q.flags|=2048,fc(9,dg.bind(null,q,he,I,_),void 0,null),I},useId:function(){var y=ti(),_=vs.identifierPrefix;if(ys){var I=vo,q=vn;I=(q&~(1<<32-Dn(q)-1)).toString(32)+I,_=":"+_+"R"+I,I=Ci++,0<I&&(_+="H"+I.toString(32)),_+=":"}else I=du++,_=":"+_+"r"+I.toString(32)+":";return y.memoizedState=_},unstable_isNewReconciler:!1},Gd={readContext:Ti,useCallback:mc,useContext:Ti,useEffect:Wd,useImperativeHandle:qu,useInsertionEffect:fg,useLayoutEffect:rs,useMemo:gc,useReducer:Gu,useRef:ef,useState:function(){return Gu(Ni)},useDebugValue:hc,useDeferredValue:function(y){var _=oa();return Ku(_,$s.memoizedState,y)},useTransition:function(){var y=Gu(Ni)[0],_=oa().memoizedState;return[y,_]},useMutableSource:Ah,useSyncExternalStore:_o,useId:pc,unstable_isNewReconciler:!1},Vd={readContext:Ti,useCallback:mc,useContext:Ti,useEffect:Wd,useImperativeHandle:qu,useInsertionEffect:fg,useLayoutEffect:rs,useMemo:gc,useReducer:hi,useRef:ef,useState:function(){return hi(Ni)},useDebugValue:hc,useDeferredValue:function(y){var _=oa();return $s===null?_.memoizedState=y:Ku(_,$s.memoizedState,y)},useTransition:function(){var y=hi(Ni)[0],_=oa().memoizedState;return[y,_]},useMutableSource:Ah,useSyncExternalStore:_o,useId:pc,unstable_isNewReconciler:!1};function Ei(y,_){if(y&&y.defaultProps){_=a({},_),y=y.defaultProps;for(var I in y)_[I]===void 0&&(_[I]=y[I]);return _}return _}function nf(y,_,I,q){_=y.memoizedState,I=I(q,_),I=I==null?_:a({},_,I),y.memoizedState=I,y.lanes===0&&(y.updateQueue.baseState=I)}var Yu={isMounted:function(y){return(y=y._reactInternals)?O(y)===y:!1},enqueueSetState:function(y,_,I){y=y._reactInternals;var q=Ps(),ne=Ua(y),he=Pl(q,ne);he.payload=_,I!=null&&(he.callback=I),_=Ml(y,he,ne),_!==null&&(Mi(_,y,ne,q),Uu(_,y,ne))},enqueueReplaceState:function(y,_,I){y=y._reactInternals;var q=Ps(),ne=Ua(y),he=Pl(q,ne);he.tag=1,he.payload=_,I!=null&&(he.callback=I),_=Ml(y,he,ne),_!==null&&(Mi(_,y,ne,q),Uu(_,y,ne))},enqueueForceUpdate:function(y,_){y=y._reactInternals;var I=Ps(),q=Ua(y),ne=Pl(I,q);ne.tag=2,_!=null&&(ne.callback=_),_=Ml(y,ne,q),_!==null&&(Mi(_,y,q,I),Uu(_,y,q))}};function gg(y,_,I,q,ne,he,Fe){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(q,he,Fe):_.prototype&&_.prototype.isPureReactComponent?!Dd(I,q)||!Dd(ne,he):!0}function Mh(y,_,I){var q=!1,ne=Os,he=_.contextType;return typeof he=="object"&&he!==null?he=Ti(he):(ne=hn(_)?ts:Yn.current,q=_.contextTypes,he=(q=q!=null)?Bs(y,ne):Os),_=new _(I,he),y.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Yu,y.stateNode=_,_._reactInternals=y,q&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=ne,y.__reactInternalMemoizedMaskedChildContext=he),_}function qd(y,_,I,q){y=_.state,typeof _.componentWillReceiveProps=="function"&&_.componentWillReceiveProps(I,q),typeof _.UNSAFE_componentWillReceiveProps=="function"&&_.UNSAFE_componentWillReceiveProps(I,q),_.state!==y&&Yu.enqueueReplaceState(_,_.state,null)}function Dl(y,_,I,q){var ne=y.stateNode;ne.props=I,ne.state=y.memoizedState,ne.refs={},Ld(y);var he=_.contextType;typeof he=="object"&&he!==null?ne.context=Ti(he):(he=hn(_)?ts:Yn.current,ne.context=Bs(y,he)),ne.state=y.memoizedState,he=_.getDerivedStateFromProps,typeof he=="function"&&(nf(y,_,he,I),ne.state=y.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof ne.getSnapshotBeforeUpdate=="function"||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(_=ne.state,typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount(),_!==ne.state&&Yu.enqueueReplaceState(ne,ne.state,null),ul(y,I,ne,q),ne.state=y.memoizedState),typeof ne.componentDidMount=="function"&&(y.flags|=4194308)}function Ai(y,_){try{var I="",q=_;do I+=og(q),q=q.return;while(q);var ne=I}catch(he){ne=`
Error generating stack: `+he.message+`
`+he.stack}return{value:y,source:_,stack:ne,digest:null}}function Il(y,_,I){return{value:y,source:null,stack:I??null,digest:_??null}}function So(y,_){try{console.error(_.value)}catch(I){setTimeout(function(){throw I})}}var Kd=typeof WeakMap=="function"?WeakMap:Map;function fl(y,_,I){I=Pl(-1,I),I.tag=3,I.payload={element:null};var q=_.value;return I.callback=function(){ra||(ra=!0,va=q),So(y,_)},I}function sf(y,_,I){I=Pl(-1,I),I.tag=3;var q=y.type.getDerivedStateFromError;if(typeof q=="function"){var ne=_.value;I.payload=function(){return q(ne)},I.callback=function(){So(y,_)}}var he=y.stateNode;return he!==null&&typeof he.componentDidCatch=="function"&&(I.callback=function(){So(y,_),typeof q!="function"&&(Rl===null?Rl=new Set([this]):Rl.add(this));var Fe=_.stack;this.componentDidCatch(_.value,{componentStack:Fe!==null?Fe:""})}),I}function af(y,_,I){var q=y.pingCache;if(q===null){q=y.pingCache=new Kd;var ne=new Set;q.set(_,ne)}else ne=q.get(_),ne===void 0&&(ne=new Set,q.set(_,ne));ne.has(I)||(ne.add(I),y=qv.bind(null,y,_,I),_.then(y,y))}function pg(y){do{var _;if((_=y.tag===13)&&(_=y.memoizedState,_=_!==null?_.dehydrated!==null:!0),_)return y;y=y.return}while(y!==null);return null}function xc(y,_,I,q,ne){return(y.mode&1)===0?(y===_?y.flags|=65536:(y.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(_=Pl(-1,1),_.tag=2,Ml(I,_,1))),I.lanes|=1),y):(y.flags|=65536,y.lanes=ne,y)}var Ju=o.ReactCurrentOwner,la=!1;function La(y,_,I,q){_.child=y===null?lg(_,null,I,q):lu(_,y.child,I,q)}function of(y,_,I,q,ne){I=I.render;var he=_.ref;return ac(_,ne),q=Ra(y,_,I,q,he,ne),I=zd(),y!==null&&!la?(_.updateQueue=y.updateQueue,_.flags&=-2053,y.lanes&=~ne,Ko(y,_,ne)):(ys&&I&&jd(_),_.flags|=1,La(y,_,q,ne),_.child)}function yc(y,_,I,q,ne){if(y===null){var he=I.type;return typeof he=="function"&&!_f(he)&&he.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(_.tag=15,_.type=he,Go(y,_,he,q,ne)):(y=kg(I.type,null,q,_,_.mode,ne),y.ref=_.ref,y.return=_,_.child=y)}if(he=y.child,(y.lanes&ne)===0){var Fe=he.memoizedProps;if(I=I.compare,I=I!==null?I:Dd,I(Fe,q)&&y.ref===_.ref)return Ko(y,_,ne)}return _.flags|=1,y=id(he,q),y.ref=_.ref,y.return=_,_.child=y}function Go(y,_,I,q,ne){if(y!==null){var he=y.memoizedProps;if(Dd(he,q)&&y.ref===_.ref)if(la=!1,_.pendingProps=q=he,(y.lanes&ne)!==0)(y.flags&131072)!==0&&(la=!0);else return _.lanes=y.lanes,Ko(y,_,ne)}return Vo(y,_,I,q,ne)}function ls(y,_,I){var q=_.pendingProps,ne=q.children,he=y!==null?y.memoizedState:null;if(q.mode==="hidden")if((_.mode&1)===0)_.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ir(rd,za),za|=I;else{if((I&1073741824)===0)return y=he!==null?he.baseLanes|I:I,_.lanes=_.childLanes=1073741824,_.memoizedState={baseLanes:y,cachePool:null,transitions:null},_.updateQueue=null,Ir(rd,za),za|=y,null;_.memoizedState={baseLanes:0,cachePool:null,transitions:null},q=he!==null?he.baseLanes:I,Ir(rd,za),za|=q}else he!==null?(q=he.baseLanes|I,_.memoizedState=null):q=I,Ir(rd,za),za|=q;return La(y,_,ne,I),_.child}function Jn(y,_){var I=_.ref;(y===null&&I!==null||y!==null&&y.ref!==I)&&(_.flags|=512,_.flags|=2097152)}function Vo(y,_,I,q,ne){var he=hn(I)?ts:Yn.current;return he=Bs(_,he),ac(_,ne),I=Ra(y,_,I,q,he,ne),q=zd(),y!==null&&!la?(_.updateQueue=y.updateQueue,_.flags&=-2053,y.lanes&=~ne,Ko(y,_,ne)):(ys&&q&&jd(_),_.flags|=1,La(y,_,I,ne),_.child)}function ya(y,_,I,q,ne){if(hn(I)){var he=!0;Xr(_)}else he=!1;if(ac(_,ne),_.stateNode===null)ed(y,_),Mh(_,I,q),Dl(_,I,q,ne),q=!0;else if(y===null){var Fe=_.stateNode,ft=_.memoizedProps;Fe.props=ft;var It=Fe.context,xr=I.contextType;typeof xr=="object"&&xr!==null?xr=Ti(xr):(xr=hn(I)?ts:Yn.current,xr=Bs(_,xr));var Rr=I.getDerivedStateFromProps,mn=typeof Rr=="function"||typeof Fe.getSnapshotBeforeUpdate=="function";mn||typeof Fe.UNSAFE_componentWillReceiveProps!="function"&&typeof Fe.componentWillReceiveProps!="function"||(ft!==q||It!==xr)&&qd(_,Fe,q,xr),fi=!1;var Tr=_.memoizedState;Fe.state=Tr,ul(_,q,Fe,ne),It=_.memoizedState,ft!==q||Tr!==It||Vn.current||fi?(typeof Rr=="function"&&(nf(_,I,Rr,q),It=_.memoizedState),(ft=fi||gg(_,I,ft,q,Tr,It,xr))?(mn||typeof Fe.UNSAFE_componentWillMount!="function"&&typeof Fe.componentWillMount!="function"||(typeof Fe.componentWillMount=="function"&&Fe.componentWillMount(),typeof Fe.UNSAFE_componentWillMount=="function"&&Fe.UNSAFE_componentWillMount()),typeof Fe.componentDidMount=="function"&&(_.flags|=4194308)):(typeof Fe.componentDidMount=="function"&&(_.flags|=4194308),_.memoizedProps=q,_.memoizedState=It),Fe.props=q,Fe.state=It,Fe.context=xr,q=ft):(typeof Fe.componentDidMount=="function"&&(_.flags|=4194308),q=!1)}else{Fe=_.stateNode,Bd(y,_),ft=_.memoizedProps,xr=_.type===_.elementType?ft:Ei(_.type,ft),Fe.props=xr,mn=_.pendingProps,Tr=Fe.context,It=I.contextType,typeof It=="object"&&It!==null?It=Ti(It):(It=hn(I)?ts:Yn.current,It=Bs(_,It));var Es=I.getDerivedStateFromProps;(Rr=typeof Es=="function"||typeof Fe.getSnapshotBeforeUpdate=="function")||typeof Fe.UNSAFE_componentWillReceiveProps!="function"&&typeof Fe.componentWillReceiveProps!="function"||(ft!==mn||Tr!==It)&&qd(_,Fe,q,It),fi=!1,Tr=_.memoizedState,Fe.state=Tr,ul(_,q,Fe,ne);var cs=_.memoizedState;ft!==mn||Tr!==cs||Vn.current||fi?(typeof Es=="function"&&(nf(_,I,Es,q),cs=_.memoizedState),(xr=fi||gg(_,I,xr,q,Tr,cs,It)||!1)?(Rr||typeof Fe.UNSAFE_componentWillUpdate!="function"&&typeof Fe.componentWillUpdate!="function"||(typeof Fe.componentWillUpdate=="function"&&Fe.componentWillUpdate(q,cs,It),typeof Fe.UNSAFE_componentWillUpdate=="function"&&Fe.UNSAFE_componentWillUpdate(q,cs,It)),typeof Fe.componentDidUpdate=="function"&&(_.flags|=4),typeof Fe.getSnapshotBeforeUpdate=="function"&&(_.flags|=1024)):(typeof Fe.componentDidUpdate!="function"||ft===y.memoizedProps&&Tr===y.memoizedState||(_.flags|=4),typeof Fe.getSnapshotBeforeUpdate!="function"||ft===y.memoizedProps&&Tr===y.memoizedState||(_.flags|=1024),_.memoizedProps=q,_.memoizedState=cs),Fe.props=q,Fe.state=cs,Fe.context=It,q=xr):(typeof Fe.componentDidUpdate!="function"||ft===y.memoizedProps&&Tr===y.memoizedState||(_.flags|=4),typeof Fe.getSnapshotBeforeUpdate!="function"||ft===y.memoizedProps&&Tr===y.memoizedState||(_.flags|=1024),q=!1)}return Ba(y,_,I,q,he,ne)}function Ba(y,_,I,q,ne,he){Jn(y,_);var Fe=(_.flags&128)!==0;if(!q&&!Fe)return ne&&xs(_,I,!1),Ko(y,_,he);q=_.stateNode,Ju.current=_;var ft=Fe&&typeof I.getDerivedStateFromError!="function"?null:q.render();return _.flags|=1,y!==null&&Fe?(_.child=lu(_,y.child,null,he),_.child=lu(_,null,ft,he)):La(y,_,ft,he),_.memoizedState=q.state,ne&&xs(_,I,!0),_.child}function vc(y){var _=y.stateNode;_.pendingContext?Ut(y,_.pendingContext,_.pendingContext!==_.context):_.context&&Ut(y,_.context,!1),K0(y,_.containerInfo)}function wc(y,_,I,q,ne){return ou(),$u(ne),_.flags|=256,La(y,_,I,q),_.child}var ca={dehydrated:null,treeContext:null,retryLane:0};function bc(y){return{baseLanes:y,cachePool:null,transitions:null}}function lf(y,_,I){var q=_.pendingProps,ne=js.current,he=!1,Fe=(_.flags&128)!==0,ft;if((ft=Fe)||(ft=y!==null&&y.memoizedState===null?!1:(ne&2)!==0),ft?(he=!0,_.flags&=-129):(y===null||y.memoizedState!==null)&&(ne|=1),Ir(js,ne&1),y===null)return Fd(_),y=_.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?((_.mode&1)===0?_.lanes=1:ae(y)?_.lanes=8:_.lanes=1073741824,null):(Fe=q.children,y=q.fallback,he?(q=_.mode,he=_.child,Fe={mode:"hidden",children:Fe},(q&1)===0&&he!==null?(he.childLanes=0,he.pendingProps=Fe):he=Sf(Fe,q,0,null),y=mi(y,q,I,null),he.return=_,y.return=_,he.sibling=y,_.child=he,_.child.memoizedState=bc(I),_.memoizedState=ca,y):hu(_,Fe));if(ne=y.memoizedState,ne!==null&&(ft=ne.dehydrated,ft!==null))return cf(y,_,Fe,q,ft,ne,I);if(he){he=q.fallback,Fe=_.mode,ne=y.child,ft=ne.sibling;var It={mode:"hidden",children:q.children};return(Fe&1)===0&&_.child!==ne?(q=_.child,q.childLanes=0,q.pendingProps=It,_.deletions=null):(q=id(ne,It),q.subtreeFlags=ne.subtreeFlags&14680064),ft!==null?he=id(ft,he):(he=mi(he,Fe,I,null),he.flags|=2),he.return=_,q.return=_,q.sibling=he,_.child=q,q=he,he=_.child,Fe=y.child.memoizedState,Fe=Fe===null?bc(I):{baseLanes:Fe.baseLanes|I,cachePool:null,transitions:Fe.transitions},he.memoizedState=Fe,he.childLanes=y.childLanes&~I,_.memoizedState=ca,q}return he=y.child,y=he.sibling,q=id(he,{mode:"visible",children:q.children}),(_.mode&1)===0&&(q.lanes=I),q.return=_,q.sibling=null,y!==null&&(I=_.deletions,I===null?(_.deletions=[y],_.flags|=16):I.push(y)),_.child=q,_.memoizedState=null,q}function hu(y,_){return _=Sf({mode:"visible",children:_},y.mode,0,null),_.return=y,y.child=_}function Qu(y,_,I,q){return q!==null&&$u(q),lu(_,y.child,null,I),y=hu(_,_.pendingProps.children),y.flags|=2,_.memoizedState=null,y}function cf(y,_,I,q,ne,he,Fe){if(I)return _.flags&256?(_.flags&=-257,q=Il(Error(i(422))),Qu(y,_,Fe,q)):_.memoizedState!==null?(_.child=y.child,_.flags|=128,null):(he=q.fallback,ne=_.mode,q=Sf({mode:"visible",children:q.children},ne,0,null),he=mi(he,ne,Fe,null),he.flags|=2,q.return=_,he.return=_,q.sibling=he,_.child=q,(_.mode&1)!==0&&lu(_,y.child,null,Fe),_.child.memoizedState=bc(Fe),_.memoizedState=ca,he);if((_.mode&1)===0)return Qu(y,_,Fe,null);if(ae(ne))return q=jt(ne).digest,he=Error(i(419)),q=Il(he,q,void 0),Qu(y,_,Fe,q);if(I=(Fe&y.childLanes)!==0,la||I){if(q=vs,q!==null){switch(Fe&-Fe){case 4:ne=2;break;case 16:ne=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ne=32;break;case 536870912:ne=268435456;break;default:ne=0}ne=(ne&(q.suspendedLanes|Fe))!==0?0:ne,ne!==0&&ne!==he.retryLane&&(he.retryLane=ne,Ki(y,ne),Mi(q,y,ne,-1))}return bf(),q=Il(Error(i(421))),Qu(y,_,Fe,q)}return Z(ne)?(_.flags|=128,_.child=y.child,_=Xv.bind(null,y),G(ne,_),null):(y=he.treeContext,_e&&(di=Me(ne),Ia=_,ys=!0,ll=null,Md=!1,y!==null&&(Da[fs++]=vn,Da[fs++]=vo,Da[fs++]=hs,vn=y.id,vo=y.overflow,hs=_)),_=hu(_,q.children),_.flags|=4096,_)}function qo(y,_,I){y.lanes|=_;var q=y.alternate;q!==null&&(q.lanes|=_),Ho(y.return,_,I)}function Zu(y,_,I,q,ne){var he=y.memoizedState;he===null?y.memoizedState={isBackwards:_,rendering:null,renderingStartTime:0,last:q,tail:I,tailMode:ne}:(he.isBackwards=_,he.rendering=null,he.renderingStartTime=0,he.last=q,he.tail=I,he.tailMode=ne)}function uf(y,_,I){var q=_.pendingProps,ne=q.revealOrder,he=q.tail;if(La(y,_,q.children,I),q=js.current,(q&2)!==0)q=q&1|2,_.flags|=128;else{if(y!==null&&(y.flags&128)!==0)e:for(y=_.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&qo(y,I,_);else if(y.tag===19)qo(y,I,_);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===_)break e;for(;y.sibling===null;){if(y.return===null||y.return===_)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}q&=1}if(Ir(js,q),(_.mode&1)===0)_.memoizedState=null;else switch(ne){case"forwards":for(I=_.child,ne=null;I!==null;)y=I.alternate,y!==null&&$d(y)===null&&(ne=I),I=I.sibling;I=ne,I===null?(ne=_.child,_.child=null):(ne=I.sibling,I.sibling=null),Zu(_,!1,ne,I,he);break;case"backwards":for(I=null,ne=_.child,_.child=null;ne!==null;){if(y=ne.alternate,y!==null&&$d(y)===null){_.child=ne;break}y=ne.sibling,ne.sibling=I,I=ne,ne=y}Zu(_,!0,I,null,he);break;case"together":Zu(_,!1,null,null,void 0);break;default:_.memoizedState=null}return _.child}function ed(y,_){(_.mode&1)===0&&y!==null&&(y.alternate=null,_.alternate=null,_.flags|=2)}function Ko(y,_,I){if(y!==null&&(_.dependencies=y.dependencies),gu|=_.lanes,(I&_.childLanes)===0)return null;if(y!==null&&_.child!==y.child)throw Error(i(153));if(_.child!==null){for(y=_.child,I=id(y,y.pendingProps),_.child=I,I.return=_;y.sibling!==null;)y=y.sibling,I=I.sibling=id(y,y.pendingProps),I.return=_;I.sibling=null}return _.child}function mu(y,_,I){switch(_.tag){case 3:vc(_),ou();break;case 5:Eh(_);break;case 1:hn(_.type)&&Xr(_);break;case 4:K0(_,_.stateNode.containerInfo);break;case 10:cg(_,_.type._context,_.memoizedProps.value);break;case 13:var q=_.memoizedState;if(q!==null)return q.dehydrated!==null?(Ir(js,js.current&1),_.flags|=128,null):(I&_.child.childLanes)!==0?lf(y,_,I):(Ir(js,js.current&1),y=Ko(y,_,I),y!==null?y.sibling:null);Ir(js,js.current&1);break;case 19:if(q=(I&_.childLanes)!==0,(y.flags&128)!==0){if(q)return uf(y,_,I);_.flags|=128}var ne=_.memoizedState;if(ne!==null&&(ne.rendering=null,ne.tail=null,ne.lastEffect=null),Ir(js,js.current),q)break;return null;case 22:case 23:return _.lanes=0,ls(y,_,I)}return Ko(y,_,I)}function ji(y){y.flags|=4}function td(y,_){if(y!==null&&y.child===_.child)return!0;if((_.flags&16)!==0)return!1;for(y=_.child;y!==null;){if((y.flags&12854)!==0||(y.subtreeFlags&12854)!==0)return!1;y=y.sibling}return!0}var _c,Sc,N,T;if(Ie)_c=function(y,_){for(var I=_.child;I!==null;){if(I.tag===5||I.tag===6)z(y,I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===_)break;for(;I.sibling===null;){if(I.return===null||I.return===_)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},Sc=function(){},N=function(y,_,I,q,ne){if(y=y.memoizedProps,y!==q){var he=_.stateNode,Fe=ei(Xi.current);I=te(he,I,y,q,ne,Fe),(_.updateQueue=I)&&ji(_)}},T=function(y,_,I,q){I!==q&&ji(_)};else if(me){_c=function(y,_,I,q){for(var ne=_.child;ne!==null;){if(ne.tag===5){var he=ne.stateNode;I&&q&&(he=st(he,ne.type,ne.memoizedProps,ne)),z(y,he)}else if(ne.tag===6)he=ne.stateNode,I&&q&&(he=rt(he,ne.memoizedProps,ne)),z(y,he);else if(ne.tag!==4){if(ne.tag===22&&ne.memoizedState!==null)he=ne.child,he!==null&&(he.return=ne),_c(y,ne,!0,!0);else if(ne.child!==null){ne.child.return=ne,ne=ne.child;continue}}if(ne===_)break;for(;ne.sibling===null;){if(ne.return===null||ne.return===_)return;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}};var P=function(y,_,I,q){for(var ne=_.child;ne!==null;){if(ne.tag===5){var he=ne.stateNode;I&&q&&(he=st(he,ne.type,ne.memoizedProps,ne)),ze(y,he)}else if(ne.tag===6)he=ne.stateNode,I&&q&&(he=rt(he,ne.memoizedProps,ne)),ze(y,he);else if(ne.tag!==4){if(ne.tag===22&&ne.memoizedState!==null)he=ne.child,he!==null&&(he.return=ne),P(y,ne,!0,!0);else if(ne.child!==null){ne.child.return=ne,ne=ne.child;continue}}if(ne===_)break;for(;ne.sibling===null;){if(ne.return===null||ne.return===_)return;ne=ne.return}ne.sibling.return=ne.return,ne=ne.sibling}};Sc=function(y,_){var I=_.stateNode;if(!td(y,_)){y=I.containerInfo;var q=Lt(y);P(q,_,!1,!1),I.pendingChildren=q,ji(_),it(y,q)}},N=function(y,_,I,q,ne){var he=y.stateNode,Fe=y.memoizedProps;if((y=td(y,_))&&Fe===q)_.stateNode=he;else{var ft=_.stateNode,It=ei(Xi.current),xr=null;Fe!==q&&(xr=te(ft,I,Fe,q,ne,It)),y&&xr===null?_.stateNode=he:(he=Ye(he,xr,I,Fe,q,_,y,ft),K(he,I,q,ne,It)&&ji(_),_.stateNode=he,y?ji(_):_c(he,_,!1,!1))}},T=function(y,_,I,q){I!==q?(y=ei(Fl.current),I=ei(Xi.current),_.stateNode=pe(q,y,I,_),ji(_)):_.stateNode=y.stateNode}}else Sc=function(){},N=function(){},T=function(){};function B(y,_){if(!ys)switch(y.tailMode){case"hidden":_=y.tail;for(var I=null;_!==null;)_.alternate!==null&&(I=_),_=_.sibling;I===null?y.tail=null:I.sibling=null;break;case"collapsed":I=y.tail;for(var q=null;I!==null;)I.alternate!==null&&(q=I),I=I.sibling;q===null?_||y.tail===null?y.tail=null:y.tail.sibling=null:q.sibling=null}}function J(y){var _=y.alternate!==null&&y.alternate.child===y.child,I=0,q=0;if(_)for(var ne=y.child;ne!==null;)I|=ne.lanes|ne.childLanes,q|=ne.subtreeFlags&14680064,q|=ne.flags&14680064,ne.return=y,ne=ne.sibling;else for(ne=y.child;ne!==null;)I|=ne.lanes|ne.childLanes,q|=ne.subtreeFlags,q|=ne.flags,ne.return=y,ne=ne.sibling;return y.subtreeFlags|=q,y.childLanes=I,_}function ce(y,_,I){var q=_.pendingProps;switch(Pd(_),_.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return J(_),null;case 1:return hn(_.type)&&Pe(),J(_),null;case 3:return I=_.stateNode,uu(),Kr(Vn),Kr(Yn),ug(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(y===null||y.child===null)&&(Bu(_)?ji(_):y===null||y.memoizedState.isDehydrated&&(_.flags&256)===0||(_.flags|=1024,ll!==null&&(_g(ll),ll=null))),Sc(y,_),J(_),null;case 5:X0(_),I=ei(Fl.current);var ne=_.type;if(y!==null&&_.stateNode!=null)N(y,_,ne,q,I),y.ref!==_.ref&&(_.flags|=512,_.flags|=2097152);else{if(!q){if(_.stateNode===null)throw Error(i(166));return J(_),null}if(y=ei(Xi.current),Bu(_)){if(!_e)throw Error(i(175));y=De(_.stateNode,_.type,_.memoizedProps,I,y,_,!Md),_.updateQueue=y,y!==null&&ji(_)}else{var he=X(ne,q,I,y,_);_c(he,_,!1,!1),_.stateNode=he,K(he,ne,q,I,y)&&ji(_)}_.ref!==null&&(_.flags|=512,_.flags|=2097152)}return J(_),null;case 6:if(y&&_.stateNode!=null)T(y,_,y.memoizedProps,q);else{if(typeof q!="string"&&_.stateNode===null)throw Error(i(166));if(y=ei(Fl.current),I=ei(Xi.current),Bu(_)){if(!_e)throw Error(i(176));if(y=_.stateNode,I=_.memoizedProps,(q=Ve(y,I,_,!Md))&&(ne=Ia,ne!==null))switch(ne.tag){case 3:tt(ne.stateNode.containerInfo,y,I,(ne.mode&1)!==0);break;case 5:Tt(ne.type,ne.memoizedProps,ne.stateNode,y,I,(ne.mode&1)!==0)}q&&ji(_)}else _.stateNode=pe(q,y,I,_)}return J(_),null;case 13:if(Kr(js),q=_.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(ys&&di!==null&&(_.mode&1)!==0&&(_.flags&128)===0)Th(),ou(),_.flags|=98560,ne=!1;else if(ne=Bu(_),q!==null&&q.dehydrated!==null){if(y===null){if(!ne)throw Error(i(318));if(!_e)throw Error(i(344));if(ne=_.memoizedState,ne=ne!==null?ne.dehydrated:null,!ne)throw Error(i(317));bt(ne,_)}else ou(),(_.flags&128)===0&&(_.memoizedState=null),_.flags|=4;J(_),ne=!1}else ll!==null&&(_g(ll),ll=null),ne=!0;if(!ne)return _.flags&65536?_:null}return(_.flags&128)!==0?(_.lanes=I,_):(I=q!==null,I!==(y!==null&&y.memoizedState!==null)&&I&&(_.child.flags|=8192,(_.mode&1)!==0&&(y===null||(js.current&1)!==0?Ls===0&&(Ls=3):bf())),_.updateQueue!==null&&(_.flags|=4),J(_),null);case 4:return uu(),Sc(y,_),y===null&&Ue(_.stateNode.containerInfo),J(_),null;case 10:return zu(_.type._context),J(_),null;case 17:return hn(_.type)&&Pe(),J(_),null;case 19:if(Kr(js),ne=_.memoizedState,ne===null)return J(_),null;if(q=(_.flags&128)!==0,he=ne.rendering,he===null)if(q)B(ne,!1);else{if(Ls!==0||y!==null&&(y.flags&128)!==0)for(y=_.child;y!==null;){if(he=$d(y),he!==null){for(_.flags|=128,B(ne,!1),y=he.updateQueue,y!==null&&(_.updateQueue=y,_.flags|=4),_.subtreeFlags=0,y=I,I=_.child;I!==null;)q=I,ne=y,q.flags&=14680066,he=q.alternate,he===null?(q.childLanes=0,q.lanes=ne,q.child=null,q.subtreeFlags=0,q.memoizedProps=null,q.memoizedState=null,q.updateQueue=null,q.dependencies=null,q.stateNode=null):(q.childLanes=he.childLanes,q.lanes=he.lanes,q.child=he.child,q.subtreeFlags=0,q.deletions=null,q.memoizedProps=he.memoizedProps,q.memoizedState=he.memoizedState,q.updateQueue=he.updateQueue,q.type=he.type,ne=he.dependencies,q.dependencies=ne===null?null:{lanes:ne.lanes,firstContext:ne.firstContext}),I=I.sibling;return Ir(js,js.current&1|2),_.child}y=y.sibling}ne.tail!==null&&Cs()>Ih&&(_.flags|=128,q=!0,B(ne,!1),_.lanes=4194304)}else{if(!q)if(y=$d(he),y!==null){if(_.flags|=128,q=!0,y=y.updateQueue,y!==null&&(_.updateQueue=y,_.flags|=4),B(ne,!0),ne.tail===null&&ne.tailMode==="hidden"&&!he.alternate&&!ys)return J(_),null}else 2*Cs()-ne.renderingStartTime>Ih&&I!==1073741824&&(_.flags|=128,q=!0,B(ne,!1),_.lanes=4194304);ne.isBackwards?(he.sibling=_.child,_.child=he):(y=ne.last,y!==null?y.sibling=he:_.child=he,ne.last=he)}return ne.tail!==null?(_=ne.tail,ne.rendering=_,ne.tail=_.sibling,ne.renderingStartTime=Cs(),_.sibling=null,y=js.current,Ir(js,q?y&1|2:y&1),_):(J(_),null);case 22:case 23:return Sg(),I=_.memoizedState!==null,y!==null&&y.memoizedState!==null!==I&&(_.flags|=8192),I&&(_.mode&1)!==0?(za&1073741824)!==0&&(J(_),Ie&&_.subtreeFlags&6&&(_.flags|=8192)):J(_),null;case 24:return null;case 25:return null}throw Error(i(156,_.tag))}function ve(y,_){switch(Pd(_),_.tag){case 1:return hn(_.type)&&Pe(),y=_.flags,y&65536?(_.flags=y&-65537|128,_):null;case 3:return uu(),Kr(Vn),Kr(Yn),ug(),y=_.flags,(y&65536)!==0&&(y&128)===0?(_.flags=y&-65537|128,_):null;case 5:return X0(_),null;case 13:if(Kr(js),y=_.memoizedState,y!==null&&y.dehydrated!==null){if(_.alternate===null)throw Error(i(340));ou()}return y=_.flags,y&65536?(_.flags=y&-65537|128,_):null;case 19:return Kr(js),null;case 4:return uu(),null;case 10:return zu(_.type._context),null;case 22:case 23:return Sg(),null;case 24:return null;default:return null}}var Te=!1,Oe=!1,Ge=typeof WeakSet=="function"?WeakSet:Set,$e=null;function at(y,_){var I=y.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(q){Ms(y,_,q)}else I.current=null}function Ct(y,_,I){try{I()}catch(q){Ms(y,_,q)}}var rr=!1;function Nr(y,_){for(U(y.containerInfo),$e=_;$e!==null;)if(y=$e,_=y.child,(y.subtreeFlags&1028)!==0&&_!==null)_.return=y,$e=_;else for(;$e!==null;){y=$e;try{var I=y.alternate;if((y.flags&1024)!==0)switch(y.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var q=I.memoizedProps,ne=I.memoizedState,he=y.stateNode,Fe=he.getSnapshotBeforeUpdate(y.elementType===y.type?q:Ei(y.type,q),ne);he.__reactInternalSnapshotBeforeUpdate=Fe}break;case 3:Ie&&qe(y.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(ft){Ms(y,y.return,ft)}if(_=y.sibling,_!==null){_.return=y.return,$e=_;break}$e=y.return}return I=rr,rr=!1,I}function Mr(y,_,I){var q=_.updateQueue;if(q=q!==null?q.lastEffect:null,q!==null){var ne=q=q.next;do{if((ne.tag&y)===y){var he=ne.destroy;ne.destroy=void 0,he!==void 0&&Ct(_,I,he)}ne=ne.next}while(ne!==q)}}function wn(y,_){if(_=_.updateQueue,_=_!==null?_.lastEffect:null,_!==null){var I=_=_.next;do{if((I.tag&y)===y){var q=I.create;I.destroy=q()}I=I.next}while(I!==_)}}function yn(y){var _=y.ref;if(_!==null){var I=y.stateNode;switch(y.tag){case 5:y=fe(I);break;default:y=I}typeof _=="function"?_(y):_.current=y}}function Sn(y){var _=y.alternate;_!==null&&(y.alternate=null,Sn(_)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(_=y.stateNode,_!==null&&Ze(_)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function In(y){return y.tag===5||y.tag===3||y.tag===4}function zn(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||In(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function ua(y,_,I){var q=y.tag;if(q===5||q===6)y=y.stateNode,_?sr(I,y,_):ut(I,y);else if(q!==4&&(y=y.child,y!==null))for(ua(y,_,I),y=y.sibling;y!==null;)ua(y,_,I),y=y.sibling}function Us(y,_,I){var q=y.tag;if(q===5||q===6)y=y.stateNode,_?nt(I,y,_):Qe(I,y);else if(q!==4&&(y=y.child,y!==null))for(Us(y,_,I),y=y.sibling;y!==null;)Us(y,_,I),y=y.sibling}var Un=null,da=!1;function un(y,_,I){for(I=I.child;I!==null;)Wn(y,_,I),I=I.sibling}function Wn(y,_,I){if(Qa&&typeof Qa.onCommitFiberUnmount=="function")try{Qa.onCommitFiberUnmount(Al,I)}catch{}switch(I.tag){case 5:Oe||at(I,_);case 6:if(Ie){var q=Un,ne=da;Un=null,un(y,_,I),Un=q,da=ne,Un!==null&&(da?Er(Un,I.stateNode):kr(Un,I.stateNode))}else un(y,_,I);break;case 18:Ie&&Un!==null&&(da?ge(Un,I.stateNode):je(Un,I.stateNode));break;case 4:Ie?(q=Un,ne=da,Un=I.stateNode.containerInfo,da=!0,un(y,_,I),Un=q,da=ne):(me&&(q=I.stateNode.containerInfo,ne=Lt(q),Le(q,ne)),un(y,_,I));break;case 0:case 11:case 14:case 15:if(!Oe&&(q=I.updateQueue,q!==null&&(q=q.lastEffect,q!==null))){ne=q=q.next;do{var he=ne,Fe=he.destroy;he=he.tag,Fe!==void 0&&((he&2)!==0||(he&4)!==0)&&Ct(I,_,Fe),ne=ne.next}while(ne!==q)}un(y,_,I);break;case 1:if(!Oe&&(at(I,_),q=I.stateNode,typeof q.componentWillUnmount=="function"))try{q.props=I.memoizedProps,q.state=I.memoizedState,q.componentWillUnmount()}catch(ft){Ms(I,_,ft)}un(y,_,I);break;case 21:un(y,_,I);break;case 22:I.mode&1?(Oe=(q=Oe)||I.memoizedState!==null,un(y,_,I),Oe=q):un(y,_,I);break;default:un(y,_,I)}}function qn(y){var _=y.updateQueue;if(_!==null){y.updateQueue=null;var I=y.stateNode;I===null&&(I=y.stateNode=new Ge),_.forEach(function(q){var ne=t_.bind(null,y,q);I.has(q)||(I.add(q),q.then(ne,ne))})}}function An(y,_){var I=_.deletions;if(I!==null)for(var q=0;q<I.length;q++){var ne=I[q];try{var he=y,Fe=_;if(Ie){var ft=Fe;e:for(;ft!==null;){switch(ft.tag){case 5:Un=ft.stateNode,da=!1;break e;case 3:Un=ft.stateNode.containerInfo,da=!0;break e;case 4:Un=ft.stateNode.containerInfo,da=!0;break e}ft=ft.return}if(Un===null)throw Error(i(160));Wn(he,Fe,ne),Un=null,da=!1}else Wn(he,Fe,ne);var It=ne.alternate;It!==null&&(It.return=null),ne.return=null}catch(xr){Ms(ne,_,xr)}}if(_.subtreeFlags&12854)for(_=_.child;_!==null;)ms(_,y),_=_.sibling}function ms(y,_){var I=y.alternate,q=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(An(_,y),jn(y),q&4){try{Mr(3,y,y.return),wn(3,y)}catch(Tr){Ms(y,y.return,Tr)}try{Mr(5,y,y.return)}catch(Tr){Ms(y,y.return,Tr)}}break;case 1:An(_,y),jn(y),q&512&&I!==null&&at(I,I.return);break;case 5:if(An(_,y),jn(y),q&512&&I!==null&&at(I,I.return),Ie){if(y.flags&32){var ne=y.stateNode;try{Gr(ne)}catch(Tr){Ms(y,y.return,Tr)}}if(q&4&&(ne=y.stateNode,ne!=null)){var he=y.memoizedProps;if(I=I!==null?I.memoizedProps:he,q=y.type,_=y.updateQueue,y.updateQueue=null,_!==null)try{Ot(ne,_,q,I,he,y)}catch(Tr){Ms(y,y.return,Tr)}}}break;case 6:if(An(_,y),jn(y),q&4&&Ie){if(y.stateNode===null)throw Error(i(162));ne=y.stateNode,he=y.memoizedProps,I=I!==null?I.memoizedProps:he;try{mt(ne,I,he)}catch(Tr){Ms(y,y.return,Tr)}}break;case 3:if(An(_,y),jn(y),q&4){if(Ie&&_e&&I!==null&&I.memoizedState.isDehydrated)try{dt(_.containerInfo)}catch(Tr){Ms(y,y.return,Tr)}if(me){ne=_.containerInfo,he=_.pendingChildren;try{Le(ne,he)}catch(Tr){Ms(y,y.return,Tr)}}}break;case 4:if(An(_,y),jn(y),q&4&&me){he=y.stateNode,ne=he.containerInfo,he=he.pendingChildren;try{Le(ne,he)}catch(Tr){Ms(y,y.return,Tr)}}break;case 13:An(_,y),jn(y),ne=y.child,ne.flags&8192&&(he=ne.memoizedState!==null,ne.stateNode.isHidden=he,!he||ne.alternate!==null&&ne.alternate.memoizedState!==null||(xf=Cs())),q&4&&qn(y);break;case 22:var Fe=I!==null&&I.memoizedState!==null;if(y.mode&1?(Oe=(I=Oe)||Fe,An(_,y),Oe=I):An(_,y),jn(y),q&8192){if(I=y.memoizedState!==null,(y.stateNode.isHidden=I)&&!Fe&&(y.mode&1)!==0)for($e=y,q=y.child;q!==null;){for(_=$e=q;$e!==null;){Fe=$e;var ft=Fe.child;switch(Fe.tag){case 0:case 11:case 14:case 15:Mr(4,Fe,Fe.return);break;case 1:at(Fe,Fe.return);var It=Fe.stateNode;if(typeof It.componentWillUnmount=="function"){var xr=Fe,Rr=Fe.return;try{var mn=xr;It.props=mn.memoizedProps,It.state=mn.memoizedState,It.componentWillUnmount()}catch(Tr){Ms(xr,Rr,Tr)}}break;case 5:at(Fe,Fe.return);break;case 22:if(Fe.memoizedState!==null){Yd(_);continue}}ft!==null?(ft.return=Fe,$e=ft):Yd(_)}q=q.sibling}if(Ie){e:if(q=null,Ie)for(_=y;;){if(_.tag===5){if(q===null){q=_;try{ne=_.stateNode,I?Ar(ne):Ee(_.stateNode,_.memoizedProps)}catch(Tr){Ms(y,y.return,Tr)}}}else if(_.tag===6){if(q===null)try{he=_.stateNode,I?vr(he):Be(he,_.memoizedProps)}catch(Tr){Ms(y,y.return,Tr)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===y)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===y)break e;for(;_.sibling===null;){if(_.return===null||_.return===y)break e;q===_&&(q=null),_=_.return}q===_&&(q=null),_.sibling.return=_.return,_=_.sibling}}}break;case 19:An(_,y),jn(y),q&4&&qn(y);break;case 21:break;default:An(_,y),jn(y)}}function jn(y){var _=y.flags;if(_&2){try{if(Ie){e:{for(var I=y.return;I!==null;){if(In(I)){var q=I;break e}I=I.return}throw Error(i(160))}switch(q.tag){case 5:var ne=q.stateNode;q.flags&32&&(Gr(ne),q.flags&=-33);var he=zn(y);Us(y,he,ne);break;case 3:case 4:var Fe=q.stateNode.containerInfo,ft=zn(y);ua(y,ft,Fe);break;default:throw Error(i(161))}}}catch(It){Ms(y,y.return,It)}y.flags&=-3}_&4096&&(y.flags&=-4097)}function $a(y,_,I){$e=y,df(y)}function df(y,_,I){for(var q=(y.mode&1)!==0;$e!==null;){var ne=$e,he=ne.child;if(ne.tag===22&&q){var Fe=ne.memoizedState!==null||Te;if(!Fe){var ft=ne.alternate,It=ft!==null&&ft.memoizedState!==null||Oe;ft=Te;var xr=Oe;if(Te=Fe,(Oe=It)&&!xr)for($e=ne;$e!==null;)Fe=$e,It=Fe.child,Fe.tag===22&&Fe.memoizedState!==null?ff(ne):It!==null?(It.return=Fe,$e=It):ff(ne);for(;he!==null;)$e=he,df(he),he=he.sibling;$e=ne,Te=ft,Oe=xr}Xd(y)}else(ne.subtreeFlags&8772)!==0&&he!==null?(he.return=ne,$e=he):Xd(y)}}function Xd(y){for(;$e!==null;){var _=$e;if((_.flags&8772)!==0){var I=_.alternate;try{if((_.flags&8772)!==0)switch(_.tag){case 0:case 11:case 15:Oe||wn(5,_);break;case 1:var q=_.stateNode;if(_.flags&4&&!Oe)if(I===null)q.componentDidMount();else{var ne=_.elementType===_.type?I.memoizedProps:Ei(_.type,I.memoizedProps);q.componentDidUpdate(ne,I.memoizedState,q.__reactInternalSnapshotBeforeUpdate)}var he=_.updateQueue;he!==null&&q0(_,he,q);break;case 3:var Fe=_.updateQueue;if(Fe!==null){if(I=null,_.child!==null)switch(_.child.tag){case 5:I=fe(_.child.stateNode);break;case 1:I=_.child.stateNode}q0(_,Fe,I)}break;case 5:var ft=_.stateNode;I===null&&_.flags&4&&ht(ft,_.type,_.memoizedProps,_);break;case 6:break;case 4:break;case 12:break;case 13:if(_e&&_.memoizedState===null){var It=_.alternate;if(It!==null){var xr=It.memoizedState;if(xr!==null){var Rr=xr.dehydrated;Rr!==null&&ee(Rr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Oe||_.flags&512&&yn(_)}catch(mn){Ms(_,_.return,mn)}}if(_===y){$e=null;break}if(I=_.sibling,I!==null){I.return=_.return,$e=I;break}$e=_.return}}function Yd(y){for(;$e!==null;){var _=$e;if(_===y){$e=null;break}var I=_.sibling;if(I!==null){I.return=_.return,$e=I;break}$e=_.return}}function ff(y){for(;$e!==null;){var _=$e;try{switch(_.tag){case 0:case 11:case 15:var I=_.return;try{wn(4,_)}catch(It){Ms(_,I,It)}break;case 1:var q=_.stateNode;if(typeof q.componentDidMount=="function"){var ne=_.return;try{q.componentDidMount()}catch(It){Ms(_,ne,It)}}var he=_.return;try{yn(_)}catch(It){Ms(_,he,It)}break;case 5:var Fe=_.return;try{yn(_)}catch(It){Ms(_,Fe,It)}}}catch(It){Ms(_,_.return,It)}if(_===y){$e=null;break}var ft=_.sibling;if(ft!==null){ft.return=_.return,$e=ft;break}$e=_.return}}var ko=0,Yi=1,kc=2,hf=3,Fh=4;if(typeof Symbol=="function"&&Symbol.for){var Xo=Symbol.for;ko=Xo("selector.component"),Yi=Xo("selector.has_pseudo_class"),kc=Xo("selector.role"),hf=Xo("selector.test_id"),Fh=Xo("selector.text")}function Tc(y){var _=We(y);if(_!=null){if(typeof _.memoizedProps["data-testname"]!="string")throw Error(i(364));return _}if(y=At(y),y===null)throw Error(i(362));return y.stateNode.current}function Oh(y,_){switch(_.$$typeof){case ko:if(y.type===_.value)return!0;break;case Yi:e:{_=_.value,y=[y,0];for(var I=0;I<y.length;){var q=y[I++],ne=y[I++],he=_[ne];if(q.tag!==5||!or(q)){for(;he!=null&&Oh(q,he);)ne++,he=_[ne];if(ne===_.length){_=!0;break e}else for(q=q.child;q!==null;)y.push(q,ne),q=q.sibling}}_=!1}return _;case kc:if(y.tag===5&&dr(y.stateNode,_.value))return!0;break;case Fh:if((y.tag===5||y.tag===6)&&(y=Ft(y),y!==null&&0<=y.indexOf(_.value)))return!0;break;case hf:if(y.tag===5&&(y=y.memoizedProps["data-testname"],typeof y=="string"&&y.toLowerCase()===_.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function xg(y){switch(y.$$typeof){case ko:return"<"+(D(y.value)||"Unknown")+">";case Yi:return":has("+(xg(y)||"")+")";case kc:return'[role="'+y.value+'"]';case Fh:return'"'+y.value+'"';case hf:return'[data-testname="'+y.value+'"]';default:throw Error(i(365))}}function Cc(y,_){var I=[];y=[y,0];for(var q=0;q<y.length;){var ne=y[q++],he=y[q++],Fe=_[he];if(ne.tag!==5||!or(ne)){for(;Fe!=null&&Oh(ne,Fe);)he++,Fe=_[he];if(he===_.length)I.push(ne);else for(ne=ne.child;ne!==null;)y.push(ne,he),ne=ne.sibling}}return I}function Nc(y,_){if(!Rt)throw Error(i(363));y=Tc(y),y=Cc(y,_),_=[],y=Array.from(y);for(var I=0;I<y.length;){var q=y[I++];if(q.tag===5)or(q)||_.push(q.stateNode);else for(q=q.child;q!==null;)y.push(q),q=q.sibling}return _}var yg=Math.ceil,Dh=o.ReactCurrentDispatcher,mf=o.ReactCurrentOwner,ta=o.ReactCurrentBatchConfig,bn=0,vs=null,Rs=null,fa=0,za=0,rd=xn(0),Ls=0,gf=null,gu=0,Ns=0,pf=0,Jd=null,Pi=null,xf=0,Ih=1/0,Ji=null;function gs(){Ih=Cs()+500}var ra=!1,va=null,Rl=null,nd=!1,hl=null,vg=0,wa=0,Rh=null,yf=-1,vf=0;function Ps(){return(bn&6)!==0?Cs():yf!==-1?yf:yf=Cs()}function Ua(y){return(y.mode&1)===0?1:(bn&2)!==0&&fa!==0?fa&-fa:h1.transition!==null?(vf===0&&(vf=Zt()),vf):(y=gt,y!==0?y:St())}function Mi(y,_,I,q){if(50<wa)throw wa=0,Rh=null,Error(i(185));Cn(y,I,q),((bn&2)===0||y!==vs)&&(y===vs&&((bn&2)===0&&(Ns|=I),Ls===4&&pu(y,fa)),Fi(y,q),I===1&&bn===0&&(_.mode&1)===0&&(gs(),sc&&Oa()))}function Fi(y,_){var I=y.callbackNode;Bt(y,_);var q=Re(y,y===vs?fa:0);if(q===0)I!==null&&Lr(I),y.callbackNode=null,y.callbackPriority=0;else if(_=q&-q,y.callbackPriority!==_){if(I!=null&&Lr(I),_===1)y.tag===0?Wo(g1.bind(null,y)):Za(g1.bind(null,y)),Kt?yt(function(){(bn&6)===0&&Oa()}):rn(xo,Oa),I=null;else{switch(En(q)){case 1:I=xo;break;case 4:I=tc;break;case 16:I=Ds;break;case 536870912:I=Sh;break;default:I=Ds}I=_1(I,wg.bind(null,y))}y.callbackPriority=_,y.callbackNode=I}}function wg(y,_){if(yf=-1,vf=0,(bn&6)!==0)throw Error(i(327));var I=y.callbackNode;if(xu()&&y.callbackNode!==I)return null;var q=Re(y,y===vs?fa:0);if(q===0)return null;if((q&30)!==0||(q&y.expiredLanes)!==0||_)_=Qd(y,q);else{_=q;var ne=bn;bn|=2;var he=x1();(vs!==y||fa!==_)&&(Ji=null,gs(),sd(y,_));do try{y1();break}catch(ft){wf(y,ft)}while(!0);H0(),Dh.current=he,bn=ne,Rs!==null?_=0:(vs=null,fa=0,_=Ls)}if(_!==0){if(_===2&&(ne=Or(y),ne!==0&&(q=ne,_=bg(y,ne))),_===1)throw I=gf,sd(y,0),pu(y,q),Fi(y,Cs()),I;if(_===6)pu(y,q);else{if(ne=y.current.alternate,(q&30)===0&&!Hv(ne)&&(_=Qd(y,q),_===2&&(he=Or(y),he!==0&&(q=he,_=bg(y,he))),_===1))throw I=gf,sd(y,0),pu(y,q),Fi(y,Cs()),I;switch(y.finishedWork=ne,y.finishedLanes=q,_){case 0:case 1:throw Error(i(345));case 2:ad(y,Pi,Ji);break;case 3:if(pu(y,q),(q&130023424)===q&&(_=xf+500-Cs(),10<_)){if(Re(y,0)!==0)break;if(ne=y.suspendedLanes,(ne&q)!==q){Ps(),y.pingedLanes|=y.suspendedLanes&ne;break}y.timeoutHandle=oe(ad.bind(null,y,Pi,Ji),_);break}ad(y,Pi,Ji);break;case 4:if(pu(y,q),(q&4194240)===q)break;for(_=y.eventTimes,ne=-1;0<q;){var Fe=31-Dn(q);he=1<<Fe,Fe=_[Fe],Fe>ne&&(ne=Fe),q&=~he}if(q=ne,q=Cs()-q,q=(120>q?120:480>q?480:1080>q?1080:1920>q?1920:3e3>q?3e3:4320>q?4320:1960*yg(q/1960))-q,10<q){y.timeoutHandle=oe(ad.bind(null,y,Pi,Ji),q);break}ad(y,Pi,Ji);break;case 5:ad(y,Pi,Ji);break;default:throw Error(i(329))}}}return Fi(y,Cs()),y.callbackNode===I?wg.bind(null,y):null}function bg(y,_){var I=Jd;return y.current.memoizedState.isDehydrated&&(sd(y,_).flags|=256),y=Qd(y,_),y!==2&&(_=Pi,Pi=I,_!==null&&_g(_)),y}function _g(y){Pi===null?Pi=y:Pi.push.apply(Pi,y)}function Hv(y){for(var _=y;;){if(_.flags&16384){var I=_.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var q=0;q<I.length;q++){var ne=I[q],he=ne.getSnapshot;ne=ne.value;try{if(!ln(he(),ne))return!1}catch{return!1}}}if(I=_.child,_.subtreeFlags&16384&&I!==null)I.return=_,_=I;else{if(_===y)break;for(;_.sibling===null;){if(_.return===null||_.return===y)return!0;_=_.return}_.sibling.return=_.return,_=_.sibling}}return!0}function pu(y,_){for(_&=~pf,_&=~Ns,y.suspendedLanes|=_,y.pingedLanes&=~_,y=y.expirationTimes;0<_;){var I=31-Dn(_),q=1<<I;y[I]=-1,_&=~q}}function g1(y){if((bn&6)!==0)throw Error(i(327));xu();var _=Re(y,0);if((_&1)===0)return Fi(y,Cs()),null;var I=Qd(y,_);if(y.tag!==0&&I===2){var q=Or(y);q!==0&&(_=q,I=bg(y,q))}if(I===1)throw I=gf,sd(y,0),pu(y,_),Fi(y,Cs()),I;if(I===6)throw Error(i(345));return y.finishedWork=y.current.alternate,y.finishedLanes=_,ad(y,Pi,Ji),Fi(y,Cs()),null}function p1(y){hl!==null&&hl.tag===0&&(bn&6)===0&&xu();var _=bn;bn|=1;var I=ta.transition,q=gt;try{if(ta.transition=null,gt=1,y)return y()}finally{gt=q,ta.transition=I,bn=_,(bn&6)===0&&Oa()}}function Sg(){za=rd.current,Kr(rd)}function sd(y,_){y.finishedWork=null,y.finishedLanes=0;var I=y.timeoutHandle;if(I!==we&&(y.timeoutHandle=we,ye(I)),Rs!==null)for(I=Rs.return;I!==null;){var q=I;switch(Pd(q),q.tag){case 1:q=q.type.childContextTypes,q!=null&&Pe();break;case 3:uu(),Kr(Vn),Kr(Yn),ug();break;case 5:X0(q);break;case 4:uu();break;case 13:Kr(js);break;case 19:Kr(js);break;case 10:zu(q.type._context);break;case 22:case 23:Sg()}I=I.return}if(vs=y,Rs=y=id(y.current,null),fa=za=_,Ls=0,gf=null,pf=Ns=gu=0,Pi=Jd=null,ic!==null){for(_=0;_<ic.length;_++)if(I=ic[_],q=I.interleaved,q!==null){I.interleaved=null;var ne=q.next,he=I.pending;if(he!==null){var Fe=he.next;he.next=ne,q.next=Fe}I.pending=q}ic=null}return y}function wf(y,_){do{var I=Rs;try{if(H0(),Is.current=fu,dc){for(var q=os.memoizedState;q!==null;){var ne=q.queue;ne!==null&&(ne.pending=null),q=q.next}dc=!1}if(uc=0,zs=$s=os=null,Hu=!1,Ci=0,mf.current=null,I===null||I.return===null){Ls=1,gf=_,Rs=null;break}e:{var he=y,Fe=I.return,ft=I,It=_;if(_=fa,ft.flags|=32768,It!==null&&typeof It=="object"&&typeof It.then=="function"){var xr=It,Rr=ft,mn=Rr.tag;if((Rr.mode&1)===0&&(mn===0||mn===11||mn===15)){var Tr=Rr.alternate;Tr?(Rr.updateQueue=Tr.updateQueue,Rr.memoizedState=Tr.memoizedState,Rr.lanes=Tr.lanes):(Rr.updateQueue=null,Rr.memoizedState=null)}var Es=pg(Fe);if(Es!==null){Es.flags&=-257,xc(Es,Fe,ft,he,_),Es.mode&1&&af(he,xr,_),_=Es,It=xr;var cs=_.updateQueue;if(cs===null){var Qi=new Set;Qi.add(It),_.updateQueue=Qi}else cs.add(It);break e}else{if((_&1)===0){af(he,xr,_),bf();break e}It=Error(i(426))}}else if(ys&&ft.mode&1){var Ec=pg(Fe);if(Ec!==null){(Ec.flags&65536)===0&&(Ec.flags|=256),xc(Ec,Fe,ft,he,_),$u(Ai(It,ft));break e}}he=It=Ai(It,ft),Ls!==4&&(Ls=2),Jd===null?Jd=[he]:Jd.push(he),he=Fe;do{switch(he.tag){case 3:he.flags|=65536,_&=-_,he.lanes|=_;var Mt=fl(he,It,_);oc(he,Mt);break e;case 1:ft=It;var pt=he.type,zt=he.stateNode;if((he.flags&128)===0&&(typeof pt.getDerivedStateFromError=="function"||zt!==null&&typeof zt.componentDidCatch=="function"&&(Rl===null||!Rl.has(zt)))){he.flags|=65536,_&=-_,he.lanes|=_;var Cr=sf(he,ft,_);oc(he,Cr);break e}}he=he.return}while(he!==null)}w1(I)}catch(Hr){_=Hr,Rs===I&&I!==null&&(Rs=I=I.return);continue}break}while(!0)}function x1(){var y=Dh.current;return Dh.current=fu,y===null?fu:y}function bf(){(Ls===0||Ls===3||Ls===2)&&(Ls=4),vs===null||(gu&268435455)===0&&(Ns&268435455)===0||pu(vs,fa)}function Qd(y,_){var I=bn;bn|=2;var q=x1();(vs!==y||fa!==_)&&(Ji=null,sd(y,_));do try{Gv();break}catch(ne){wf(y,ne)}while(!0);if(H0(),bn=I,Dh.current=q,Rs!==null)throw Error(i(261));return vs=null,fa=0,Ls}function Gv(){for(;Rs!==null;)v1(Rs)}function y1(){for(;Rs!==null&&!$n();)v1(Rs)}function v1(y){var _=Yv(y.alternate,y,za);y.memoizedProps=y.pendingProps,_===null?w1(y):Rs=_,mf.current=null}function w1(y){var _=y;do{var I=_.alternate;if(y=_.return,(_.flags&32768)===0){if(I=ce(I,_,za),I!==null){Rs=I;return}}else{if(I=ve(I,_),I!==null){I.flags&=32767,Rs=I;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{Ls=6,Rs=null;return}}if(_=_.sibling,_!==null){Rs=_;return}Rs=_=y}while(_!==null);Ls===0&&(Ls=5)}function ad(y,_,I){var q=gt,ne=ta.transition;try{ta.transition=null,gt=1,Vv(y,_,I,q)}finally{ta.transition=ne,gt=q}return null}function Vv(y,_,I,q){do xu();while(hl!==null);if((bn&6)!==0)throw Error(i(327));I=y.finishedWork;var ne=y.finishedLanes;if(I===null)return null;if(y.finishedWork=null,y.finishedLanes=0,I===y.current)throw Error(i(177));y.callbackNode=null,y.callbackPriority=0;var he=I.lanes|I.childLanes;if(_t(y,he),y===vs&&(Rs=vs=null,fa=0),(I.subtreeFlags&2064)===0&&(I.flags&2064)===0||nd||(nd=!0,_1(Ds,function(){return xu(),null})),he=(I.flags&15990)!==0,(I.subtreeFlags&15990)!==0||he){he=ta.transition,ta.transition=null;var Fe=gt;gt=1;var ft=bn;bn|=4,mf.current=null,Nr(y,I),ms(I,y),V(y.containerInfo),y.current=I,$a(I),ds(),bn=ft,gt=Fe,ta.transition=he}else y.current=I;if(nd&&(nd=!1,hl=y,vg=ne),he=y.pendingLanes,he===0&&(Rl=null),rc(I.stateNode),Fi(y,Cs()),_!==null)for(q=y.onRecoverableError,I=0;I<_.length;I++)ne=_[I],q(ne.value,{componentStack:ne.stack,digest:ne.digest});if(ra)throw ra=!1,y=va,va=null,y;return(vg&1)!==0&&y.tag!==0&&xu(),he=y.pendingLanes,(he&1)!==0?y===Rh?wa++:(wa=0,Rh=y):wa=0,Oa(),null}function xu(){if(hl!==null){var y=En(vg),_=ta.transition,I=gt;try{if(ta.transition=null,gt=16>y?16:y,hl===null)var q=!1;else{if(y=hl,hl=null,vg=0,(bn&6)!==0)throw Error(i(331));var ne=bn;for(bn|=4,$e=y.current;$e!==null;){var he=$e,Fe=he.child;if(($e.flags&16)!==0){var ft=he.deletions;if(ft!==null){for(var It=0;It<ft.length;It++){var xr=ft[It];for($e=xr;$e!==null;){var Rr=$e;switch(Rr.tag){case 0:case 11:case 15:Mr(8,Rr,he)}var mn=Rr.child;if(mn!==null)mn.return=Rr,$e=mn;else for(;$e!==null;){Rr=$e;var Tr=Rr.sibling,Es=Rr.return;if(Sn(Rr),Rr===xr){$e=null;break}if(Tr!==null){Tr.return=Es,$e=Tr;break}$e=Es}}}var cs=he.alternate;if(cs!==null){var Qi=cs.child;if(Qi!==null){cs.child=null;do{var Ec=Qi.sibling;Qi.sibling=null,Qi=Ec}while(Qi!==null)}}$e=he}}if((he.subtreeFlags&2064)!==0&&Fe!==null)Fe.return=he,$e=Fe;else e:for(;$e!==null;){if(he=$e,(he.flags&2048)!==0)switch(he.tag){case 0:case 11:case 15:Mr(9,he,he.return)}var Mt=he.sibling;if(Mt!==null){Mt.return=he.return,$e=Mt;break e}$e=he.return}}var pt=y.current;for($e=pt;$e!==null;){Fe=$e;var zt=Fe.child;if((Fe.subtreeFlags&2064)!==0&&zt!==null)zt.return=Fe,$e=zt;else e:for(Fe=pt;$e!==null;){if(ft=$e,(ft.flags&2048)!==0)try{switch(ft.tag){case 0:case 11:case 15:wn(9,ft)}}catch(Hr){Ms(ft,ft.return,Hr)}if(ft===Fe){$e=null;break e}var Cr=ft.sibling;if(Cr!==null){Cr.return=ft.return,$e=Cr;break e}$e=ft.return}}if(bn=ne,Oa(),Qa&&typeof Qa.onPostCommitFiberRoot=="function")try{Qa.onPostCommitFiberRoot(Al,y)}catch{}q=!0}return q}finally{gt=I,ta.transition=_}}return!1}function b1(y,_,I){_=Ai(I,_),_=fl(y,_,1),y=Ml(y,_,1),_=Ps(),y!==null&&(Cn(y,1,_),Fi(y,_))}function Ms(y,_,I){if(y.tag===3)b1(y,y,I);else for(;_!==null;){if(_.tag===3){b1(_,y,I);break}else if(_.tag===1){var q=_.stateNode;if(typeof _.type.getDerivedStateFromError=="function"||typeof q.componentDidCatch=="function"&&(Rl===null||!Rl.has(q))){y=Ai(I,y),y=sf(_,y,1),_=Ml(_,y,1),y=Ps(),_!==null&&(Cn(_,1,y),Fi(_,y));break}}_=_.return}}function qv(y,_,I){var q=y.pingCache;q!==null&&q.delete(_),_=Ps(),y.pingedLanes|=y.suspendedLanes&I,vs===y&&(fa&I)===I&&(Ls===4||Ls===3&&(fa&130023424)===fa&&500>Cs()-xf?sd(y,0):pf|=I),Fi(y,_)}function Kv(y,_){_===0&&((y.mode&1)===0?_=1:(_=Bn,Bn<<=1,(Bn&130023424)===0&&(Bn=4194304)));var I=Ps();y=Ki(y,_),y!==null&&(Cn(y,_,I),Fi(y,I))}function Xv(y){var _=y.memoizedState,I=0;_!==null&&(I=_.retryLane),Kv(y,I)}function t_(y,_){var I=0;switch(y.tag){case 13:var q=y.stateNode,ne=y.memoizedState;ne!==null&&(I=ne.retryLane);break;case 19:q=y.stateNode;break;default:throw Error(i(314))}q!==null&&q.delete(_),Kv(y,I)}var Yv;Yv=function(y,_,I){if(y!==null)if(y.memoizedProps!==_.pendingProps||Vn.current)la=!0;else{if((y.lanes&I)===0&&(_.flags&128)===0)return la=!1,mu(y,_,I);la=(y.flags&131072)!==0}else la=!1,ys&&(_.flags&1048576)!==0&&kh(_,jl,_.index);switch(_.lanes=0,_.tag){case 2:var q=_.type;ed(y,_),y=_.pendingProps;var ne=Bs(_,Yn.current);ac(_,I),ne=Ra(null,_,q,y,ne,I);var he=zd();return _.flags|=1,typeof ne=="object"&&ne!==null&&typeof ne.render=="function"&&ne.$$typeof===void 0?(_.tag=1,_.memoizedState=null,_.updateQueue=null,hn(q)?(he=!0,Xr(_)):he=!1,_.memoizedState=ne.state!==null&&ne.state!==void 0?ne.state:null,Ld(_),ne.updater=Yu,_.stateNode=ne,ne._reactInternals=_,Dl(_,q,y,I),_=Ba(null,_,q,!0,he,I)):(_.tag=0,ys&&he&&jd(_),La(null,_,ne,I),_=_.child),_;case 16:q=_.elementType;e:{switch(ed(y,_),y=_.pendingProps,ne=q._init,q=ne(q._payload),_.type=q,ne=_.tag=r_(q),y=Ei(q,y),ne){case 0:_=Vo(null,_,q,y,I);break e;case 1:_=ya(null,_,q,y,I);break e;case 11:_=of(null,_,q,y,I);break e;case 14:_=yc(null,_,q,Ei(q.type,y),I);break e}throw Error(i(306,q,""))}return _;case 0:return q=_.type,ne=_.pendingProps,ne=_.elementType===q?ne:Ei(q,ne),Vo(y,_,q,ne,I);case 1:return q=_.type,ne=_.pendingProps,ne=_.elementType===q?ne:Ei(q,ne),ya(y,_,q,ne,I);case 3:e:{if(vc(_),y===null)throw Error(i(387));q=_.pendingProps,he=_.memoizedState,ne=he.element,Bd(y,_),ul(_,q,null,I);var Fe=_.memoizedState;if(q=Fe.element,_e&&he.isDehydrated)if(he={element:q,isDehydrated:!1,cache:Fe.cache,pendingSuspenseBoundaries:Fe.pendingSuspenseBoundaries,transitions:Fe.transitions},_.updateQueue.baseState=he,_.memoizedState=he,_.flags&256){ne=Ai(Error(i(423)),_),_=wc(y,_,q,I,ne);break e}else if(q!==ne){ne=Ai(Error(i(424)),_),_=wc(y,_,q,I,ne);break e}else for(_e&&(di=be(_.stateNode.containerInfo),Ia=_,ys=!0,ll=null,Md=!1),I=lg(_,null,q,I),_.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(ou(),q===ne){_=Ko(y,_,I);break e}La(y,_,q,I)}_=_.child}return _;case 5:return Eh(_),y===null&&Fd(_),q=_.type,ne=_.pendingProps,he=y!==null?y.memoizedProps:null,Fe=ne.children,se(q,ne)?Fe=null:he!==null&&se(q,he)&&(_.flags|=32),Jn(y,_),La(y,_,Fe,I),_.child;case 6:return y===null&&Fd(_),null;case 13:return lf(y,_,I);case 4:return K0(_,_.stateNode.containerInfo),q=_.pendingProps,y===null?_.child=lu(_,null,q,I):La(y,_,q,I),_.child;case 11:return q=_.type,ne=_.pendingProps,ne=_.elementType===q?ne:Ei(q,ne),of(y,_,q,ne,I);case 7:return La(y,_,_.pendingProps,I),_.child;case 8:return La(y,_,_.pendingProps.children,I),_.child;case 12:return La(y,_,_.pendingProps.children,I),_.child;case 10:e:{if(q=_.type._context,ne=_.pendingProps,he=_.memoizedProps,Fe=ne.value,cg(_,q,Fe),he!==null)if(ln(he.value,Fe)){if(he.children===ne.children&&!Vn.current){_=Ko(y,_,I);break e}}else for(he=_.child,he!==null&&(he.return=_);he!==null;){var ft=he.dependencies;if(ft!==null){Fe=he.child;for(var It=ft.firstContext;It!==null;){if(It.context===q){if(he.tag===1){It=Pl(-1,I&-I),It.tag=2;var xr=he.updateQueue;if(xr!==null){xr=xr.shared;var Rr=xr.pending;Rr===null?It.next=It:(It.next=Rr.next,Rr.next=It),xr.pending=It}}he.lanes|=I,It=he.alternate,It!==null&&(It.lanes|=I),Ho(he.return,I,_),ft.lanes|=I;break}It=It.next}}else if(he.tag===10)Fe=he.type===_.type?null:he.child;else if(he.tag===18){if(Fe=he.return,Fe===null)throw Error(i(341));Fe.lanes|=I,ft=Fe.alternate,ft!==null&&(ft.lanes|=I),Ho(Fe,I,_),Fe=he.sibling}else Fe=he.child;if(Fe!==null)Fe.return=he;else for(Fe=he;Fe!==null;){if(Fe===_){Fe=null;break}if(he=Fe.sibling,he!==null){he.return=Fe.return,Fe=he;break}Fe=Fe.return}he=Fe}La(y,_,ne.children,I),_=_.child}return _;case 9:return ne=_.type,q=_.pendingProps.children,ac(_,I),ne=Ti(ne),q=q(ne),_.flags|=1,La(y,_,q,I),_.child;case 14:return q=_.type,ne=Ei(q,_.pendingProps),ne=Ei(q.type,ne),yc(y,_,q,ne,I);case 15:return Go(y,_,_.type,_.pendingProps,I);case 17:return q=_.type,ne=_.pendingProps,ne=_.elementType===q?ne:Ei(q,ne),ed(y,_),_.tag=1,hn(q)?(y=!0,Xr(_)):y=!1,ac(_,I),Mh(_,q,ne),Dl(_,q,ne,I),Ba(null,_,q,!0,y,I);case 19:return uf(y,_,I);case 22:return ls(y,_,I)}throw Error(i(156,_.tag))};function _1(y,_){return rn(y,_)}function Jv(y,_,I,q){this.tag=y,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=_,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yo(y,_,I,q){return new Jv(y,_,I,q)}function _f(y){return y=y.prototype,!(!y||!y.isReactComponent)}function r_(y){if(typeof y=="function")return _f(y)?1:0;if(y!=null){if(y=y.$$typeof,y===w)return 11;if(y===k)return 14}return 2}function id(y,_){var I=y.alternate;return I===null?(I=Yo(y.tag,_,y.key,y.mode),I.elementType=y.elementType,I.type=y.type,I.stateNode=y.stateNode,I.alternate=y,y.alternate=I):(I.pendingProps=_,I.type=y.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=y.flags&14680064,I.childLanes=y.childLanes,I.lanes=y.lanes,I.child=y.child,I.memoizedProps=y.memoizedProps,I.memoizedState=y.memoizedState,I.updateQueue=y.updateQueue,_=y.dependencies,I.dependencies=_===null?null:{lanes:_.lanes,firstContext:_.firstContext},I.sibling=y.sibling,I.index=y.index,I.ref=y.ref,I}function kg(y,_,I,q,ne,he){var Fe=2;if(q=y,typeof y=="function")_f(y)&&(Fe=1);else if(typeof y=="string")Fe=5;else e:switch(y){case d:return mi(I.children,ne,he,_);case f:Fe=8,ne|=8;break;case m:return y=Yo(12,I,_,ne|2),y.elementType=m,y.lanes=he,y;case v:return y=Yo(13,I,_,ne),y.elementType=v,y.lanes=he,y;case C:return y=Yo(19,I,_,ne),y.elementType=C,y.lanes=he,y;case j:return Sf(I,ne,he,_);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case p:Fe=10;break e;case x:Fe=9;break e;case w:Fe=11;break e;case k:Fe=14;break e;case b:Fe=16,q=null;break e}throw Error(i(130,y==null?y:typeof y,""))}return _=Yo(Fe,I,_,ne),_.elementType=y,_.type=q,_.lanes=he,_}function mi(y,_,I,q){return y=Yo(7,y,q,_),y.lanes=I,y}function Sf(y,_,I,q){return y=Yo(22,y,q,_),y.elementType=j,y.lanes=I,y.stateNode={isHidden:!1},y}function kf(y,_,I){return y=Yo(6,y,null,_),y.lanes=I,y}function Tg(y,_,I){return _=Yo(4,y.children!==null?y.children:[],y.key,_),_.lanes=I,_.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},_}function Qv(y,_,I,q,ne){this.tag=_,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=we,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=on(0),this.expirationTimes=on(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=on(0),this.identifierPrefix=q,this.onRecoverableError=ne,_e&&(this.mutableSourceEagerHydrationData=null)}function S1(y,_,I,q,ne,he,Fe,ft,It){return y=new Qv(y,_,I,ft,It),_===1?(_=1,he===!0&&(_|=8)):_=0,he=Yo(3,null,null,_),y.current=he,he.stateNode=y,he.memoizedState={element:q,isDehydrated:I,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ld(he),y}function Cg(y){if(!y)return Os;y=y._reactInternals;e:{if(O(y)!==y||y.tag!==1)throw Error(i(170));var _=y;do{switch(_.tag){case 3:_=_.stateNode.context;break e;case 1:if(hn(_.type)){_=_.stateNode.__reactInternalMemoizedMergedChildContext;break e}}_=_.return}while(_!==null);throw Error(i(171))}if(y.tag===1){var I=y.type;if(hn(I))return Vr(y,I,_)}return _}function Zd(y){var _=y._reactInternals;if(_===void 0)throw typeof y.render=="function"?Error(i(188)):(y=Object.keys(y).join(","),Error(i(268,y)));return y=re(_),y===null?null:y.stateNode}function Ng(y,_){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var I=y.retryLane;y.retryLane=I!==0&&I<_?I:_}}function Tf(y,_){Ng(y,_),(y=y.alternate)&&Ng(y,_)}function n_(y){return y=re(y),y===null?null:y.stateNode}function Zv(){return null}return r.attemptContinuousHydration=function(y){if(y.tag===13){var _=Ki(y,134217728);if(_!==null){var I=Ps();Mi(_,y,134217728,I)}Tf(y,134217728)}},r.attemptDiscreteHydration=function(y){if(y.tag===13){var _=Ki(y,1);if(_!==null){var I=Ps();Mi(_,y,1,I)}Tf(y,1)}},r.attemptHydrationAtCurrentPriority=function(y){if(y.tag===13){var _=Ua(y),I=Ki(y,_);if(I!==null){var q=Ps();Mi(I,y,_,q)}Tf(y,_)}},r.attemptSynchronousHydration=function(y){switch(y.tag){case 3:var _=y.stateNode;if(_.current.memoizedState.isDehydrated){var I=vt(_.pendingLanes);I!==0&&(pr(_,I|1),Fi(_,Cs()),(bn&6)===0&&(gs(),Oa()))}break;case 13:p1(function(){var q=Ki(y,1);if(q!==null){var ne=Ps();Mi(q,y,1,ne)}}),Tf(y,1)}},r.batchedUpdates=function(y,_){var I=bn;bn|=1;try{return y(_)}finally{bn=I,bn===0&&(gs(),sc&&Oa())}},r.createComponentSelector=function(y){return{$$typeof:ko,value:y}},r.createContainer=function(y,_,I,q,ne,he,Fe){return S1(y,_,!1,null,I,q,ne,he,Fe)},r.createHasPseudoClassSelector=function(y){return{$$typeof:Yi,value:y}},r.createHydrationContainer=function(y,_,I,q,ne,he,Fe,ft,It){return y=S1(I,q,!0,y,ne,he,Fe,ft,It),y.context=Cg(null),I=y.current,q=Ps(),ne=Ua(I),he=Pl(q,ne),he.callback=_??null,Ml(I,he,ne),y.current.lanes=ne,Cn(y,ne,q),Fi(y,q),y},r.createPortal=function(y,_,I){var q=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:q==null?null:""+q,children:y,containerInfo:_,implementation:I}},r.createRoleSelector=function(y){return{$$typeof:kc,value:y}},r.createTestNameSelector=function(y){return{$$typeof:hf,value:y}},r.createTextSelector=function(y){return{$$typeof:Fh,value:y}},r.deferredUpdates=function(y){var _=gt,I=ta.transition;try{return ta.transition=null,gt=16,y()}finally{gt=_,ta.transition=I}},r.discreteUpdates=function(y,_,I,q,ne){var he=gt,Fe=ta.transition;try{return ta.transition=null,gt=1,y(_,I,q,ne)}finally{gt=he,ta.transition=Fe,bn===0&&gs()}},r.findAllNodes=Nc,r.findBoundingRects=function(y,_){if(!Rt)throw Error(i(363));_=Nc(y,_),y=[];for(var I=0;I<_.length;I++)y.push(wt(_[I]));for(_=y.length-1;0<_;_--){I=y[_];for(var q=I.x,ne=q+I.width,he=I.y,Fe=he+I.height,ft=_-1;0<=ft;ft--)if(_!==ft){var It=y[ft],xr=It.x,Rr=xr+It.width,mn=It.y,Tr=mn+It.height;if(q>=xr&&he>=mn&&ne<=Rr&&Fe<=Tr){y.splice(_,1);break}else if(q!==xr||I.width!==It.width||Tr<he||mn>Fe){if(!(he!==mn||I.height!==It.height||Rr<q||xr>ne)){xr>q&&(It.width+=xr-q,It.x=q),Rr<ne&&(It.width=ne-xr),y.splice(_,1);break}}else{mn>he&&(It.height+=mn-he,It.y=he),Tr<Fe&&(It.height=Fe-mn),y.splice(_,1);break}}}return y},r.findHostInstance=Zd,r.findHostInstanceWithNoPortals=function(y){return y=W(y),y=y!==null?xe(y):null,y===null?null:y.stateNode},r.findHostInstanceWithWarning=function(y){return Zd(y)},r.flushControlled=function(y){var _=bn;bn|=1;var I=ta.transition,q=gt;try{ta.transition=null,gt=1,y()}finally{gt=q,ta.transition=I,bn=_,bn===0&&(gs(),Oa())}},r.flushPassiveEffects=xu,r.flushSync=p1,r.focusWithin=function(y,_){if(!Rt)throw Error(i(363));for(y=Tc(y),_=Cc(y,_),_=Array.from(_),y=0;y<_.length;){var I=_[y++];if(!or(I)){if(I.tag===5&&nr(I.stateNode))return!0;for(I=I.child;I!==null;)_.push(I),I=I.sibling}}return!1},r.getCurrentUpdatePriority=function(){return gt},r.getFindAllNodesFailureDescription=function(y,_){if(!Rt)throw Error(i(363));var I=0,q=[];y=[Tc(y),0];for(var ne=0;ne<y.length;){var he=y[ne++],Fe=y[ne++],ft=_[Fe];if((he.tag!==5||!or(he))&&(Oh(he,ft)&&(q.push(xg(ft)),Fe++,Fe>I&&(I=Fe)),Fe<_.length))for(he=he.child;he!==null;)y.push(he,Fe),he=he.sibling}if(I<_.length){for(y=[];I<_.length;I++)y.push(xg(_[I]));return`findAllNodes was able to match part of the selector:
  `+(q.join(" > ")+`

No matching component was found for:
  `)+y.join(" > ")}return null},r.getPublicRootInstance=function(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return fe(y.child.stateNode);default:return y.child.stateNode}},r.injectIntoDevTools=function(y){if(y={bundleType:y.bundleType,version:y.version,rendererPackageName:y.rendererPackageName,rendererConfig:y.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:n_,findFiberByHostInstance:y.findFiberByHostInstance||Zv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")y=!1;else{var _=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(_.isDisabled||!_.supportsFiber)y=!0;else{try{Al=_.inject(y),Qa=_}catch{}y=!!_.checkDCE}}return y},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(y,_,I,q){if(!Rt)throw Error(i(363));y=Nc(y,_);var ne=Xe(y,I,q).disconnect;return{disconnect:function(){ne()}}},r.registerMutableSourceForHydration=function(y,_){var I=_._getVersion;I=I(_._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[_,I]:y.mutableSourceEagerHydrationData.push(_,I)},r.runWithPriority=function(y,_){var I=gt;try{return gt=y,_()}finally{gt=I}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(y,_,I,q){var ne=_.current,he=Ps(),Fe=Ua(ne);return I=Cg(I),_.context===null?_.context=I:_.pendingContext=I,_=Pl(he,Fe),_.payload={element:y},q=q===void 0?null:q,q!==null&&(_.callback=q),y=Ml(ne,_,Fe),y!==null&&(Mi(y,ne,Fe,he),Uu(y,ne,Fe)),Fe},r}),s3}var A9;function WZ(){return A9||(A9=1,n3.exports=UZ()),n3.exports}var HZ=WZ();const GZ=eu(HZ);var a3={exports:{}},Of={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j9;function VZ(){return j9||(j9=1,Of.ConcurrentRoot=1,Of.ContinuousEventPriority=4,Of.DefaultEventPriority=16,Of.DiscreteEventPriority=1,Of.IdleEventPriority=536870912,Of.LegacyRoot=0),Of}var P9;function qZ(){return P9||(P9=1,a3.exports=VZ()),a3.exports}var LR=qZ(),KZ=Mn();const M9={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let F9=!1,O9=!1;const f8=".react-konva-event";let BR=!1;function XZ(e){BR=e}const YZ=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,JZ=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,QZ={};function Qb(e,t,r=QZ){if(!F9&&"zIndex"in t&&(console.warn(JZ),F9=!0),!O9&&t.draggable){var n=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;n&&!s&&(console.warn(YZ),O9=!0)}for(var a in r)if(!M9[a]){var i=a.slice(0,2)==="on",o=r[a]!==t[a];if(i&&o){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e.off(c,r[a])}var u=!t.hasOwnProperty(a);u&&e.setAttr(a,void 0)}var d=BR||t._useStrictMode,f={},m=!1;const p={};for(var a in t)if(!M9[a]){var i=a.slice(0,2)==="on",x=r[a]!==t[a];if(i&&x){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),t[a]&&(p[c]=t[a])}!i&&(t[a]!==r[a]||d&&t[a]!==e.getAttr(a))&&(m=!0,f[a]=t[a])}m&&(e.setAttrs(f),dh(e));for(var c in p)e.on(c+f8,p[c])}function dh(e){if(!KZ.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var i3=Sk();const $R={},ZZ={};by.Node.prototype._applyProps=Qb;function eee(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),dh(e)}function tee(e,t,r){let n=by[e];n||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=by.Group);const s={},a={};for(var i in t){var o=i.slice(0,2)==="on";o?a[i]=t[i]:s[i]=t[i]}const c=new n(s);return Qb(c,a),c}function ree(e,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function nee(e,t,r){return!1}function see(e){return e}function aee(){return null}function iee(){return null}function oee(e,t,r,n){return ZZ}function lee(){}function cee(e){}function uee(e,t){return!1}function dee(){return $R}function fee(){return $R}const hee=setTimeout,mee=clearTimeout,gee=-1;function pee(e,t){return!1}const xee=!1,yee=!0,vee=!0;function wee(e,t){t.parent===e?t.moveToTop():e.add(t),dh(e)}function bee(e,t){t.parent===e?t.moveToTop():e.add(t),dh(e)}function zR(e,t,r){t._remove(),e.add(t),t.setZIndex(r.getZIndex()),dh(e)}function _ee(e,t,r){zR(e,t,r)}function See(e,t){t.destroy(),t.off(f8),dh(e)}function kee(e,t){t.destroy(),t.off(f8),dh(e)}function Tee(e,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function Cee(e,t,r){}function Nee(e,t,r,n,s){Qb(e,s,n)}function Eee(e){e.hide(),dh(e)}function Aee(e){}function jee(e,t){(t.visible==null||t.visible)&&e.show()}function Pee(e,t){}function Mee(e){}function Fee(){}const Oee=()=>LR.DefaultEventPriority,Dee=Object.freeze(Object.defineProperty({__proto__:null,appendChild:wee,appendChildToContainer:bee,appendInitialChild:eee,cancelTimeout:mee,clearContainer:Mee,commitMount:Cee,commitTextUpdate:Tee,commitUpdate:Nee,createInstance:tee,createTextInstance:ree,detachDeletedInstance:Fee,finalizeInitialChildren:nee,getChildHostContext:fee,getCurrentEventPriority:Oee,getPublicInstance:see,getRootHostContext:dee,hideInstance:Eee,hideTextInstance:Aee,idlePriority:i3.unstable_IdlePriority,insertBefore:zR,insertInContainerBefore:_ee,isPrimaryRenderer:xee,noTimeout:gee,now:i3.unstable_now,prepareForCommit:aee,preparePortalMount:iee,prepareUpdate:oee,removeChild:See,removeChildFromContainer:kee,resetAfterCommit:lee,resetTextContent:cee,run:i3.unstable_runWithPriority,scheduleTimeout:hee,shouldDeprioritizeSubtree:uee,shouldSetTextContent:pee,supportsMutation:vee,unhideInstance:jee,unhideTextInstance:Pee,warnsIfNotActing:yee},Symbol.toStringTag,{value:"Module"}));var Iee=Object.defineProperty,Ree=Object.defineProperties,Lee=Object.getOwnPropertyDescriptors,D9=Object.getOwnPropertySymbols,Bee=Object.prototype.hasOwnProperty,$ee=Object.prototype.propertyIsEnumerable,I9=(e,t,r)=>t in e?Iee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R9=(e,t)=>{for(var r in t||(t={}))Bee.call(t,r)&&I9(e,r,t[r]);if(D9)for(var r of D9(t))$ee.call(t,r)&&I9(e,r,t[r]);return e},zee=(e,t)=>Ree(e,Lee(t)),L9,B9;typeof window<"u"&&((L9=window.document)!=null&&L9.createElement||((B9=window.navigator)==null?void 0:B9.product)==="ReactNative")?S.useLayoutEffect:S.useEffect;function UR(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=e.child;for(;n;){const s=UR(n,t,r);if(s)return s;n=n.sibling}}function WR(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const $9=console.error;console.error=function(){const e=[...arguments].join("");if(e?.startsWith("Warning:")&&e.includes("useContext")){console.error=$9;return}return $9.apply(this,arguments)};const h8=WR(S.createContext(null));class HR extends S.Component{render(){return S.createElement(h8.Provider,{value:this._reactInternals},this.props.children)}}function Uee(){const e=S.useContext(h8);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=S.useId();return S.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const s=UR(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}});if(s)return s}},[e,t])}function Wee(){const e=Uee(),[t]=S.useState(()=>new Map);t.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const s=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;s&&s!==h8&&!t.has(s)&&t.set(s,S.useContext(WR(s)))}r=r.return}return t}function GR(){const e=Wee();return S.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>S.createElement(t,null,S.createElement(r.Provider,zee(R9({},n),{value:e.get(r)}))),t=>S.createElement(HR,R9({},t))),[e])}function Hee(e){const t=Hs.useRef({});return Hs.useLayoutEffect(()=>{t.current=e}),Hs.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const Gee=e=>{const t=Hs.useRef(null),r=Hs.useRef(null),n=Hs.useRef(null),s=Hee(e),a=GR(),i=o=>{const{forwardedRef:c}=e;c&&(typeof c=="function"?c(o):c.current=o)};return Hs.useLayoutEffect(()=>(r.current=new by.Stage({width:e.width,height:e.height,container:t.current}),i(r.current),n.current=Qg.createContainer(r.current,LR.LegacyRoot,!1,null),Qg.updateContainer(Hs.createElement(a,{},e.children),n.current),()=>{by.isBrowser&&(i(null),Qg.updateContainer(null,n.current,null),r.current.destroy())}),[]),Hs.useLayoutEffect(()=>{i(r.current),Qb(r.current,e,s),Qg.updateContainer(Hs.createElement(a,{},e.children),n.current,null)}),Hs.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},_m="Layer",Vee="FastLayer",Eu="Group",qee="Label",Ui="Rect",qf="Circle",Kee="Ellipse",Xee="Wedge",so="Line",Yee="Sprite",VR="Image",md="Text",Jee="TextPath",Qee="Star",Zee="Ring",ete="Arc",tte="Tag",rte="Path",nte="RegularPolygon",HS="Arrow",ste="Shape",qR="Transformer",ate="18.2.13",Qg=GZ(Dee);Qg.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Hs.version,rendererPackageName:"react-konva"});const Sm=Hs.forwardRef((e,t)=>Hs.createElement(HR,{},Hs.createElement(Gee,{...e,forwardedRef:t}))),ite=XZ,ote=Object.freeze(Object.defineProperty({__proto__:null,Arc:ete,Arrow:HS,Circle:qf,Ellipse:Kee,FastLayer:Vee,Group:Eu,Image:VR,KonvaRenderer:Qg,Label:qee,Layer:_m,Line:so,Path:rte,Rect:Ui,RegularPolygon:nte,Ring:Zee,Shape:ste,Sprite:Yee,Stage:Sm,Star:Qee,Tag:tte,Text:md,TextPath:Jee,Transformer:qR,Wedge:Xee,useContextBridge:GR,useStrictMode:ite,version:ate},Symbol.toStringTag,{value:"Module"})),er=({children:e,hover:t=!0,className:r="",paddingClass:n="p-6",...s})=>{const a=`
    bg-white rounded-xl shadow-md border border-gray-200 ${n}
    ${t?"hover:shadow-lg hover:-translate-y-1 transition-all duration-200":""}
    ${r}
  `;return l.jsx(Nt.div,{className:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},...s,children:e})},lte=({children:e,className:t=""})=>l.jsx("div",{className:`border-b border-gray-200 pb-4 mb-4 ${t}`,children:e}),cte=({children:e,className:t=""})=>l.jsx("h3",{className:`text-xl font-semibold text-gray-800 ${t}`,children:e}),ute=({children:e,className:t=""})=>l.jsx("div",{className:`py-4 ${t}`,children:e}),dte=({children:e,className:t=""})=>l.jsx("div",{className:`border-t border-gray-200 pt-4 mt-4 ${t}`,children:e});er.Header=lte;er.Title=cte;er.Body=ute;er.Footer=dte;const Ka=({isOpen:e=!1,onClose:t,title:r="",children:n,size:s="medium",showCloseButton:a=!0,closeOnBackdropClick:i=!0,className:o="",...c})=>{const u=f=>{i&&f.target===f.currentTarget&&t()};Hs.useEffect(()=>{const f=x=>{x.key==="Escape"&&t()},m=window;m.__modalOpenCount||(m.__modalOpenCount=0);let p;return e&&(document.addEventListener("keydown",f),p=document.body.style.overflow,m.__modalOpenCount===0&&(document.body.style.overflow="hidden"),m.__modalOpenCount+=1),()=>{document.removeEventListener("keydown",f),m.__modalOpenCount&&m.__modalOpenCount>0&&(m.__modalOpenCount-=1),m.__modalOpenCount===0&&(p!==void 0?document.body.style.overflow=p||"":document.body.style.overflow="")}},[e,t]);const d={small:"max-w-md",medium:"max-w-lg",large:"max-w-4xl"};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:u,role:"dialog","aria-modal":"true","aria-label":r,...c,children:l.jsxs("div",{className:`
          bg-white rounded-xl shadow-md border border-gray-200 p-8
          hover:shadow-lg hover:-translate-y-1 transition-all duration-200
          w-full ${d[s]} mx-auto
          ${o}
        `,onClick:f=>f.stopPropagation(),children:[(r||a)&&l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r&&l.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:r}),a&&l.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-all duration-200 rounded-full p-2 text-2xl font-bold leading-none","aria-label":"Close modal",children:""})]}),l.jsx("div",{className:"space-y-6",children:n})]})}):null},fte=e=>{const[t,r]=S.useState({width:800,height:600}),n=S.useRef(null),s=S.useCallback(()=>{if(e.current){e.current.getBoundingClientRect();const a=Math.min(1200,window.innerWidth*.8),i=Math.min(800,window.innerHeight*.6),o=4/3;let c=a,u=c/o;u>i&&(u=i,c=u*o),r({width:c,height:u})}},[e]);return S.useEffect(()=>(s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[s]),{canvasSize:t,stageRef:n,updateCanvasSize:s}},hte=e=>{const[t,r]=S.useState({width:800,height:600}),[n,s]=S.useState({}),a=S.useCallback(()=>{if(e.current){const o=e.current.getBoundingClientRect();r({width:o.width,height:Math.max(400,o.height)})}},[e]),i=S.useCallback(o=>o<480?{stageHeight:300,blockMinSize:50,fontSize:12,padding:10,touchTargetSize:44,arrowThickness:4}:o<768?{stageHeight:400,blockMinSize:60,fontSize:14,padding:15,touchTargetSize:44,arrowThickness:4}:o<1024?{stageHeight:500,blockMinSize:70,fontSize:16,padding:20,touchTargetSize:40,arrowThickness:3}:{stageHeight:600,blockMinSize:80,fontSize:18,padding:25,touchTargetSize:32,arrowThickness:2},[]);return S.useEffect(()=>{const o=i(t.width);s(o)},[t.width,i]),S.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[a]),{containerSize:t,responsiveSettings:n,updateSize:a}},z9={convertToOriginal:(e,t,r)=>r?{x:Number(((e-r.x)/r.scale).toFixed(4)),y:Number(((t-r.y)/r.scale).toFixed(4))}:{x:e,y:t},convertToCanvas:(e,t,r)=>r?{x:Number((r.x+e*r.scale).toFixed(4)),y:Number((r.y+t*r.scale).toFixed(4))}:{x:e,y:t},isPointInImage:(e,t)=>t?e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height:!1,calculateImageScale:(e,t)=>{if(!e||!t)return 1;const r=40,n=t.width-r,s=t.height-r;return Math.min(n/e.width,s/e.height)},calculateImageInfo:(e,t)=>{if(!e||!t)return null;const r=40,n=t.width-r,s=t.height-r,a=Math.min(n/e.width,s/e.height),i=e.width*a,o=e.height*a,c=(t.width-i)/2,u=(t.height-o)/2;return{x:c,y:u,width:i,height:o,scale:a,originalWidth:e.width,originalHeight:e.height}}},mte=e=>{const t=S.useCallback((n,s)=>z9.convertToOriginal(n,s,e),[e]),r=S.useCallback((n,s)=>z9.convertToCanvas(n,s,e),[e]);return{convertToOriginal:t,convertToCanvas:r}},wx={create:(e,t,r,n,s)=>({id:s,x:e-r/2,y:t-n/2,width:Math.max(r,30),height:Math.max(n,10),fill:"rgba(0, 123, 255, 0.15)",stroke:"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),validate:e=>e.width>0&&e.height>0,findAtPosition:(e,t,r)=>e.find(n=>t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height),generateId:()=>`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},$g={create:(e,t,r,n,s,a,i)=>({id:i,startX:e,startY:t,endX:r,endY:n,startBlock:s,endBlock:a,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,pointerLength:10,pointerWidth:10}),snapToNearestBlock:(e,t,r,n=60)=>{let s=null,a=1/0;for(const i of r){const o=i.x+i.width/2,c=i.y+i.height/2,u=Math.sqrt(Math.pow(e-o,2)+Math.pow(t-c,2));u<=n&&u<a&&(a=u,s=i)}return s?{x:s.x+s.width/2,y:s.y+s.height/2,blockId:s.id,block:s,distance:a}:null},validate:(e,t,r,n,s)=>$g.snapToNearestBlock(e,t,s)!==null,generateId:()=>`arrow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},o3={create:(e,t,r)=>({id:r,blockId:e,word:t}),update:(e,t,r)=>e.map(n=>n.blockId===t?{...n,word:r}:n),delete:(e,t)=>e.filter(r=>r.blockId!==t),generateId:e=>`word_${e}`,validate:e=>e&&e.trim().length>0},gte=async e=>{const t=[];if(e.size>512e3){const n=(e.size/1024).toFixed(1);t.push(`Image is too large (${n}KB). Maximum allowed size is 500KB. Please compress or resize your image.`)}return new Promise(n=>{const s=new Image;s.onload=()=>{(s.width>4e3||s.height>4e3)&&t.push(`Image is too large (${s.width}x${s.height} pixels). Maximum allowed dimensions are 4000x4000 pixels. Please resize your image.`),n({valid:t.length===0,errors:t,dimensions:{width:s.width,height:s.height}})},s.onerror=()=>{t.push("Invalid image file"),n({valid:!1,errors:t})},s.src=URL.createObjectURL(e)})},pte=(e,t=500)=>new Promise(r=>{const n=document.createElement("canvas"),s=n.getContext("2d"),a=new Image;a.onload=()=>{let{width:i,height:o}=a;const c=2e3;if(i>c||o>c){const f=Math.min(c/i,c/o);i*=f,o*=f}n.width=i,n.height=o,s.drawImage(a,0,0,i,o);let u=.8;const d=()=>{n.toBlob(f=>{f.size<=t*1024||u<=.1?r(f):(u-=.1,d())},"image/jpeg",u)};d()},a.onerror=()=>{r(e)},a.src=URL.createObjectURL(e)}),xte=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=s=>t(s.target.result),n.onerror=s=>r(s),n.readAsDataURL(e)}),yte=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return{blockMinSize:e?60:40,arrowThickness:e?4:2,touchTargetSize:e?44:32,doubleTapDelay:e?300:200,isMobile:e}},vte={testData:{blocks:[],words:[],arrows:[],imageUrl:null},canvas:{size:{width:800,height:600},image:null,imageInfo:null,selectedTool:"edit"},creation:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null},ui:{selectedBlock:null,showWordPanel:!1,isLoading:!1,error:null,showImageSizeModal:!1,imageSizeError:null}},wte=(e,t)=>{switch(t.type){case"SET_CANVAS_SIZE":return{...e,canvas:{...e.canvas,size:t.payload}};case"SET_IMAGE":return{...e,canvas:{...e.canvas,image:t.payload}};case"SET_IMAGE_INFO":return{...e,canvas:{...e.canvas,imageInfo:t.payload}};case"SET_SELECTED_TOOL":return{...e,canvas:{...e.canvas,selectedTool:t.payload}};case"ADD_BLOCK":return{...e,testData:{...e.testData,blocks:[...e.testData.blocks,t.payload]}};case"ADD_WORD":return{...e,testData:{...e.testData,words:[...e.testData.words,t.payload]}};case"ADD_ARROW":return{...e,testData:{...e.testData,arrows:[...e.testData.arrows,t.payload]}};case"UPDATE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.map(r=>r.id===t.payload.id?{...r,...t.payload.updates}:r)}};case"DELETE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.filter(r=>r.id!==t.payload),words:e.testData.words.filter(r=>r.blockId!==t.payload),arrows:e.testData.arrows.filter(r=>r.startBlock!==t.payload&&r.endBlock!==t.payload)}};case"UPDATE_WORDS":return{...e,testData:{...e.testData,words:t.payload}};case"SET_CREATION_STATE":return{...e,creation:{...e.creation,...t.payload}};case"SET_UI_STATE":return{...e,ui:{...e.ui,...t.payload}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:t.payload}};case"SET_ERROR":return{...e,ui:{...e.ui,error:t.payload}};case"SHOW_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!0,imageSizeError:t.payload}};case"HIDE_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!1,imageSizeError:null}};case"RESET_TESTDATA":return{...e,testData:{blocks:[],words:[],arrows:[],imageUrl:e.testData.imageUrl}};default:return e}},bte=({testName:e="",showQuestionCount:t=!0,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const[o,c]=S.useReducer(wte,vte),{showNotification:u}=_i(),{makeAuthenticatedRequest:d}=Zl(),{user:f}=Js(),m=S.useRef(null),p=S.useRef(null),x=S.useRef(null),w=S.useRef({}),v=S.useRef({}),{canvasSize:C,stageRef:k}=fte(m),{containerSize:b,responsiveSettings:j}=hte(m),[A,F]=S.useState(null);S.useEffect(()=>{if(!o.canvas.image||!m.current)return;const X=m.current?.clientWidth||800,z=m.current?.clientHeight||600,K=X/o.canvas.image.width,te=z/o.canvas.image.height,se=Math.min(K,te,1),pe=o.canvas.image.width*se,oe=o.canvas.image.height*se,ye=(X-pe)/2,we=(z-oe)/2;F({x:ye,y:we,width:pe,height:oe,scaleX:se,scaleY:se,scale:se,image:o.canvas.image})},[o.canvas.image,m.current?.clientWidth,m.current?.clientHeight]);const{convertToOriginal:D}=mte(A);S.useEffect(()=>{c({type:"SET_CANVAS_SIZE",payload:C})},[C]),S.useEffect(()=>{A&&c({type:"SET_IMAGE_INFO",payload:A})},[A]),S.useEffect(()=>{const X=x.current;if(!X)return;const z=o.ui.selectedBlock?.id?w.current[o.ui.selectedBlock.id]:null;z?(X.nodes([z]),X.getLayer()?.batchDraw()):(X.nodes([]),X.getLayer()?.batchDraw())},[o.ui.selectedBlock]);const M=S.useCallback(()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:null}}),c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null}}),c({type:"RESET_TESTDATA"}),c({type:"SET_ERROR",payload:null})},[]),O=S.useCallback(async X=>{const z=X.target.files[0];if(!z){u("Please select a file","error");return}try{c({type:"SET_LOADING",payload:!0});const K=await gte(z);if(!K.valid){c({type:"SHOW_IMAGE_SIZE_MODAL",payload:{errors:K.errors,fileSize:(z.size/1024).toFixed(1),dimensions:K.dimensions}});return}let te=z;if(z.size>500*1024){u("Image is large, compressing to meet size requirements...","info");try{te=await pte(z,500);const oe=(z.size/1024).toFixed(1),ye=(te.size/1024).toFixed(1);u(`Image compressed from ${oe}KB to ${ye}KB`,"success")}catch{u("Failed to compress image. Please try a smaller image.","error");return}}const se=await xte(te),pe=new Image;pe.crossOrigin="anonymous",pe.onload=()=>{c({type:"SET_IMAGE",payload:pe}),c({type:"SET_UI_STATE",payload:{imageUrl:se}}),u("Image uploaded successfully!","success")},pe.onerror=()=>{u("Failed to load image","error")},pe.src=se}catch(K){console.error("Image upload error:",K),u("Error processing image","error")}finally{c({type:"SET_LOADING",payload:!1})}},[u]),L=S.useCallback(X=>{const z=k.current;if(!z)return;const K=z.getPointerPosition();if(K){if(o.canvas.selectedTool==="create"){const te=wx.findAtPosition(o.testData.blocks,K.x,K.y);if(te){c({type:"SET_UI_STATE",payload:{selectedBlock:te}});return}c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!0,blockCreationStart:{x:K.x,y:K.y}}})}else if(o.canvas.selectedTool==="edit"){const te=wx.findAtPosition(o.testData.blocks,K.x,K.y);c(te?{type:"SET_UI_STATE",payload:{selectedBlock:te}}:{type:"SET_UI_STATE",payload:{selectedBlock:null}})}else if(o.canvas.selectedTool==="arrow"){const te=X.target===z,se=wx.findAtPosition(o.testData.blocks,K.x,K.y);(te||!se)&&c({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!0,arrowStart:{x:K.x,y:K.y}}})}}},[o.canvas.selectedTool,A,o.testData.blocks]),W=S.useCallback(X=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const z=k.current;if(!z)return;const K=z.getPointerPosition();if(!K)return;const te=Math.abs(K.x-o.creation.blockCreationStart.x),se=Math.abs(K.y-o.creation.blockCreationStart.y),pe=10,oe=Math.max(te,pe),ye=Math.max(se,pe);c({type:"SET_CREATION_STATE",payload:{previewBlock:{x:Math.min(K.x,o.creation.blockCreationStart.x),y:Math.min(K.y,o.creation.blockCreationStart.y),width:oe,height:ye,fill:"rgba(0, 123, 255, 0.3)",stroke:"#007bff",strokeWidth:2,dash:[5,5],opacity:.7}}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const z=k.current;if(!z)return;const K=z.getPointerPosition();if(!K)return;c({type:"SET_CREATION_STATE",payload:{previewArrow:{startX:o.creation.arrowStart.x,startY:o.creation.arrowStart.y,endX:K.x,endY:K.y,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,dash:[5,5],opacity:.7}}})}},[o.creation]),re=S.useCallback(X=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const z=k.current;if(!z)return;const K=z.getPointerPosition();if(!K)return;const te=Math.abs(K.x-o.creation.blockCreationStart.x),se=Math.abs(K.y-o.creation.blockCreationStart.y),pe=10,oe=Math.max(te,pe),ye=Math.max(se,pe),we=Math.min(K.x,o.creation.blockCreationStart.x)+oe/2,Se=Math.min(K.y,o.creation.blockCreationStart.y)+ye/2,Ie=wx.generateId(),me=wx.create(we,Se,oe,ye,Ie),_e=o3.create(Ie,`Word ${o.testData.blocks.length+1}`,o3.generateId(Ie));c({type:"ADD_BLOCK",payload:me}),c({type:"ADD_WORD",payload:_e}),c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,blockCreationStart:null,previewBlock:null}}),o.testData.blocks.length===0&&c({type:"SET_UI_STATE",payload:{showWordPanel:!0}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const z=k.current;if(!z)return;const K=z.getPointerPosition();if(!K)return;if($g.validate(o.creation.arrowStart.x,o.creation.arrowStart.y,K.x,K.y,o.testData.blocks)){const te=$g.snapToNearestBlock(o.creation.arrowStart.x,o.creation.arrowStart.y,o.testData.blocks),se=$g.snapToNearestBlock(K.x,K.y,o.testData.blocks),pe=te?te.x:o.creation.arrowStart.x,oe=te?te.y:o.creation.arrowStart.y,ye=se?se.x:K.x,we=se?se.y:K.y,Se=$g.generateId(),Ie=yte(),me=$g.create(pe,oe,ye,we,te?te.blockId:null,se?se.blockId:null,Se,{strokeWidth:Ie.arrowThickness,isMobile:Ie.isMobile});c({type:"ADD_ARROW",payload:me}),u("Arrow created successfully!","success")}else u("Arrow must start near a block!","error");c({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!1,arrowStart:null,previewArrow:null}})}},[o.creation,o.testData.blocks,u]),ie=S.useCallback(X=>{X.evt.preventDefault(),L(X)},[L]),xe=S.useCallback(X=>{X.evt.preventDefault(),W(X)},[W]),de=S.useCallback(X=>{X.evt.preventDefault(),re(X)},[re]),fe=S.useCallback(async()=>{console.log(" [MatchingTestCreator] handleSaveTest clicked");const X=H();if(Object.keys(X).length>0){console.warn(" [MatchingTestCreator] Validation errors:",X),u("Please fix validation errors before saving","error");return}try{console.log(" [MatchingTestCreator] Preparing data to save...",{blocks:o.testData.blocks.length,words:o.testData.words.length,arrows:o.testData.arrows.length,imageUrl:o.ui.imageUrl?"present":"missing"}),c({type:"SET_LOADING",payload:!0});let z=o.ui.imageUrl;if(o.ui.imageUrl&&o.ui.imageUrl.startsWith("data:")){const te=await d("/.netlify/functions/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:o.ui.imageUrl,folder:"matching_tests"})}),se=await te.json();if(te.ok&&se.success&&se.url)z=se.url;else throw new Error(se.message||"Upload failed")}const K=o.testData.blocks.map((te,se)=>{let pe;if(A){const we=D(te.x,te.y),Se=D(te.x+te.width,te.y+te.height);pe={x:we.x,y:we.y,width:Number((Se.x-we.x).toFixed(4)),height:Number((Se.y-we.y).toFixed(4))}}else pe={x:Number(te.x.toFixed(4)),y:Number(te.y.toFixed(4)),width:Number(te.width.toFixed(4)),height:Number(te.height.toFixed(4))};const oe=o.testData.words.find(we=>we.blockId===te.id),ye=o.testData.arrows.find(we=>we.startBlock===te.id);return{question_id:se+1,word:oe?.word||`Word ${se+1}`,block_coordinates:pe,has_arrow:!!ye,arrow:ye&&A?(()=>{const we=D(ye.startX,ye.startY),Se=D(ye.endX,ye.endY),Ie=we.x/A.originalWidth*100,me=we.y/A.originalHeight*100,_e=Se.x/A.originalWidth*100,We=Se.y/A.originalHeight*100;return{start_x:Number(we.x.toFixed(4)),start_y:Number(we.y.toFixed(4)),end_x:Number(Se.x.toFixed(4)),end_y:Number(Se.y.toFixed(4)),rel_start_x:Number(Ie.toFixed(4)),rel_start_y:Number(me.toFixed(4)),rel_end_x:Number(_e.toFixed(4)),rel_end_y:Number(We.toFixed(4)),image_width:A.originalWidth,image_height:A.originalHeight,style:ye.style||{color:"#dc3545",thickness:3}}})():null}});r&&(console.log(" [MatchingTestCreator] Calling onTestSaved with processed data"),r({success:!0,message:"Test data prepared for assignment",blocks:o.testData.blocks,words:o.testData.words,arrows:o.testData.arrows,imageUrl:z,processedQuestions:K}))}catch(z){console.error("Save error:",z),u(`Error saving test: ${z.message}`,"error")}finally{c({type:"SET_LOADING",payload:!1})}},[o.testData,o.ui.imageUrl,A,D,d,r,u,e,f]),H=S.useCallback(()=>{const X={};return e.trim()||(X.testName="Test name is required"),o.testData.blocks.length===0&&(X.blocks="At least one block is required"),X},[e,o.testData.blocks.length]),Q=()=>l.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border-b",children:[l.jsx(xt,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"create"}),variant:o.canvas.selectedTool==="create"?"primary":"secondary",size:"sm",children:" Create Blocks"}),l.jsx(xt,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"edit"}),variant:o.canvas.selectedTool==="edit"?"primary":"secondary",size:"sm",children:" Edit Blocks"}),l.jsx(xt,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"arrow"}),variant:o.canvas.selectedTool==="arrow"?"primary":"secondary",size:"sm",children:" Draw Arrows"}),l.jsx(xt,{onClick:M,variant:"secondary",size:"sm",children:" Reset"}),l.jsx(xt,{onClick:()=>p.current?.click(),variant:"secondary",size:"sm",children:" Upload Image"}),l.jsx("div",{className:"text-xs text-gray-500 text-center col-span-full",children:"Max size: 500KB  Max dimensions: 4000x4000px"})]}),U=()=>l.jsx(Sm,{width:b.width,height:j.stageHeight,ref:k,onMouseDown:L,onMouseMove:W,onMouseUp:re,onTouchStart:ie,onTouchMove:xe,onTouchEnd:de,className:o.canvas.selectedTool==="arrow"||o.canvas.selectedTool==="create"?"cursor-crosshair":"cursor-default",children:l.jsxs(_m,{children:[o.canvas.image&&A&&l.jsx(VR,{image:o.canvas.image,x:A.x,y:A.y,width:A.width,height:A.height}),o.testData.blocks.map(X=>l.jsxs(Eu,{ref:z=>{z&&(v.current[X.id]=z)},draggable:o.canvas.selectedTool==="edit",x:X.x,y:X.y,onMouseEnter:z=>{const K=z.target.getStage()?.container();K&&(K.style.cursor=o.ui.selectedBlock?.id===X.id?"nwse-resize":"move")},onMouseLeave:z=>{const K=z.target.getStage()?.container();K&&(K.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onDragStart:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:X}})},onDragEnd:z=>{const{x:K,y:te}=z.target.position();c({type:"UPDATE_BLOCK",payload:{id:X.id,updates:{x:K,y:te}}})},onClick:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:X}})},onTap:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:X}})},children:[l.jsx(Ui,{ref:z=>{z&&(w.current[X.id]=z)},width:X.width,height:X.height,fill:X.fill,stroke:X.stroke,strokeWidth:X.strokeWidth,cornerRadius:X.cornerRadius,shadowColor:X.shadowColor,shadowBlur:X.shadowBlur,shadowOffset:X.shadowOffset,shadowOpacity:X.shadowOpacity,draggable:o.canvas.selectedTool==="edit",onDragEnd:z=>{const{x:K,y:te}=z.target.getParent().position();c({type:"UPDATE_BLOCK",payload:{id:X.id,updates:{x:K,y:te}}})},onMouseEnter:z=>{const K=z.target.getStage()?.container();K&&(K.style.cursor=o.ui.selectedBlock?.id===X.id?"nwse-resize":"move")},onMouseLeave:z=>{const K=z.target.getStage()?.container();K&&(K.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onTransformEnd:z=>{const K=w.current[X.id];if(!K)return;const te=Math.max(10,K.width()*K.scaleX()),se=Math.max(10,K.height()*K.scaleY());K.scaleX(1),K.scaleY(1),c({type:"UPDATE_BLOCK",payload:{id:X.id,updates:{width:te,height:se}}})}}),l.jsx(md,{x:2,y:2,text:`${o.testData.blocks.indexOf(X)+1}`,fontSize:Math.min(j.fontSize,Math.max(8,X.width/4)),fontFamily:"Arial",fill:"#333",fontStyle:"bold",listening:!1})]},X.id)),l.jsx(qR,{ref:x,rotateEnabled:!1,flipEnabled:!1,boundBoxFunc:(X,z)=>({...z,width:Math.max(z.width,10),height:Math.max(z.height,10)})}),o.testData.arrows.map(X=>l.jsx(HS,{points:[X.startX,X.startY,X.endX,X.endY],stroke:X.stroke,fill:X.fill,strokeWidth:X.strokeWidth||j.arrowThickness,pointerLength:X.pointerLength,pointerWidth:X.pointerWidth},X.id)),o.creation.previewBlock&&l.jsx(Ui,{x:o.creation.previewBlock.x,y:o.creation.previewBlock.y,width:o.creation.previewBlock.width,height:o.creation.previewBlock.height,fill:o.creation.previewBlock.fill,stroke:o.creation.previewBlock.stroke,strokeWidth:o.creation.previewBlock.strokeWidth,dash:o.creation.previewBlock.dash,opacity:o.creation.previewBlock.opacity}),o.creation.previewArrow&&l.jsx(HS,{points:[o.creation.previewArrow.startX,o.creation.previewArrow.startY,o.creation.previewArrow.endX,o.creation.previewArrow.endY],stroke:o.creation.previewArrow.stroke,fill:o.creation.previewArrow.fill,strokeWidth:o.creation.previewArrow.strokeWidth,dash:o.creation.previewArrow.dash,opacity:o.creation.previewArrow.opacity})]})}),V=S.useMemo(()=>o.testData.blocks.length===0?null:l.jsxs("div",{className:"word-panel bg-gray-50 border-t border-gray-200 p-4 w-full",style:{height:"min(400px, 40vh)",overflowY:"auto"},children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Words (Auto-created with blocks)"}),l.jsx("div",{className:"space-y-2",children:o.testData.words.map(X=>{const z=o.testData.blocks.find(K=>K.id===X.blockId);return l.jsxs("div",{className:"p-2 bg-white rounded border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("span",{className:"text-xs text-gray-500",children:["Block ",o.testData.blocks.indexOf(z)+1]}),l.jsx("button",{onClick:()=>c({type:"DELETE_BLOCK",payload:z.id}),className:"text-red-500 hover:text-red-700 text-xs",children:""})]}),l.jsx("input",{type:"text",value:X.word,onChange:K=>{const te=o3.update(o.testData.words,X.blockId,K.target.value);c({type:"UPDATE_WORDS",payload:te})},className:"w-full text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter word text"})]},X.blockId)})})]}),[o.testData.words,o.testData.blocks]);return l.jsxs(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col h-screen bg-gray-100",children:[l.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("div",{children:l.jsx("div",{className:"mt-2 text-sm text-gray-600",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Test Name:"})," ",e||"Untitled Test"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Questions:"})," ",o.testData.blocks.length," (auto-generated from blocks)"]})]})})})})}),Q(),l.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[l.jsx("div",{ref:m,className:"bg-white border overflow-auto",style:{minHeight:`${j.stageHeight}px`,maxHeight:"calc(100vh - 200px)",height:"auto",padding:`${j.padding}px`},children:U()}),V]}),l.jsx("div",{className:"bg-white border-t p-4",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(xt,{onClick:fe,disabled:a||o.ui.isLoading,variant:"primary",size:"lg",children:a||o.ui.isLoading?l.jsx(pn,{size:"sm"}):"Save Test"})})}),l.jsx("input",{ref:p,type:"file",accept:"image/*,application/pdf",onChange:O,className:"hidden"}),l.jsx(Ka,{isOpen:o.ui.showImageSizeModal,onClose:()=>c({type:"HIDE_IMAGE_SIZE_MODAL"}),title:" Image Too Large",size:"medium",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("span",{className:"text-red-600 text-2xl mr-2",children:""}),l.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Image Size Issues"})]}),l.jsx("div",{className:"text-red-700",children:o.ui.imageSizeError?.errors.map((X,z)=>l.jsxs("div",{className:"mb-2",children:[" ",X]},z))})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Current Image Details:"}),l.jsxs("div",{className:"text-blue-700 space-y-1",children:[l.jsxs("div",{children:[" File size: ",o.ui.imageSizeError?.fileSize,"KB"]}),o.ui.imageSizeError?.dimensions&&l.jsxs("div",{children:[" Dimensions: ",o.ui.imageSizeError.dimensions.width,"  ",o.ui.imageSizeError.dimensions.height," pixels"]})]})]}),l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:" Requirements:"}),l.jsxs("div",{className:"text-green-700 space-y-1",children:[l.jsx("div",{children:" Maximum file size: 500KB"}),l.jsx("div",{children:" Maximum dimensions: 4000  4000 pixels"}),l.jsx("div",{children:" Supported formats: All image formats (JPEG, PNG, WebP, etc.)"})]})]}),l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:" How to Fix:"}),l.jsxs("div",{className:"text-yellow-700 space-y-1",children:[l.jsx("div",{children:" Use an image editor to resize your image"}),l.jsx("div",{children:" Compress the image using online tools"}),l.jsx("div",{children:" Try a different image with smaller dimensions"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(xt,{onClick:()=>c({type:"HIDE_IMAGE_SIZE_MODAL"}),variant:"secondary",children:"Close"}),l.jsx(xt,{onClick:()=>{c({type:"HIDE_IMAGE_SIZE_MODAL"}),p.current?.click()},variant:"primary",children:"Try Another Image"})]})]})})]})},$p=S.createContext(null);function _te(e,t){return{getTheme:function(){return t??null}}}function Nd(){const e=S.useContext($p);return e==null&&(function(t,...r){const n=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of r)s.append("v",a);throw n.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),e}function hr(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const Lu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ste=Lu&&"documentMode"in document?document.documentMode:null,hd=Lu&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),km=Lu&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Ew=!(!Lu||!("InputEvent"in window)||Ste)&&"getTargetRanges"in new window.InputEvent("input"),_y=Lu&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),vp=Lu&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,kte=Lu&&/Android/.test(navigator.userAgent),KR=Lu&&/^(?=.*Chrome).*/i.test(navigator.userAgent),U9=Lu&&kte&&KR,Aw=Lu&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!KR;function XR(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const Tte=1,Cte=3,Nte=9,Ete=11,Tm=0,YR=1,wp=2,Ate=0,jte=1,Pte=2,jw=4,Pw=8,m8=128,Mte=1792|(112|(3|jw|Pw)|m8),g8=1,p8=2,x8=3,y8=4,v8=5,w8=6,Zb=_y||vp||Aw?"":"",k0=`

`,Fte=km?"":Zb,Cm={bold:1,capitalize:1024,code:16,highlight:m8,italic:2,lowercase:256,strikethrough:jw,subscript:32,superscript:64,underline:Pw,uppercase:512},Ote={directionless:1,unmergeable:2},W9={center:p8,end:w8,justify:y8,left:g8,right:x8,start:v8},Dte={[p8]:"center",[w8]:"end",[y8]:"justify",[g8]:"left",[x8]:"right",[v8]:"start"},Ite={normal:0,segmented:2,token:1},Rte={[Ate]:"normal",[Pte]:"segmented",[jte]:"token"},H9="$config";function JR(e,t,r,n,s,a){let i=e.getFirstChild();for(;i!==null;){const o=i.__key;i.__parent===t&&(Wt(i)&&JR(i,o,r,n,s,a),r.has(o)||a.delete(o),s.push(o)),i=i.getNextSibling()}}const Lte=100;let GS=!1,b8=0;function Bte(e){b8=e.timeStamp}function l3(e,t,r){const n=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||n&&e.previousSibling===s)||n&&c4(e,r)!==void 0}function $te(e,t,r){const n=Du(Kc(r));let s=null,a=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,a=n.focusOffset);const i=e.nodeValue;i!==null&&z8(t,i,s,a,!1)}function zte(e,t,r){if(lr(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return P0(t)&&r.isAttached()}function Ute(e,t,r,n){for(let s=e;s&&!Ure(s);s=mv(s)){const a=c4(s,t);if(a!==void 0){const i=oi(a,r);if(i)return as(i)||!qs(s)?void 0:[s,i]}else if(s===n)return[n,qL(r)]}}function QR(e,t,r){GS=!0;const n=performance.now()-b8>Lte;try{Ul(e,(()=>{const s=_r()||(function(m){return m.getEditorState().read((()=>{const p=_r();return p!==null?p.clone():null}))})(e),a=new Map,i=e.getRootElement(),o=e._editorState,c=e._blockCursorElement;let u=!1,d="";for(let m=0;m<t.length;m++){const p=t[m],x=p.type,w=p.target,v=Ute(w,e,o,i);if(!v)continue;const[C,k]=v;if(x==="characterData")n&&Sr(k)&&P0(w)&&zte(s,w,k)&&$te(w,k,e);else if(x==="childList"){u=!0;const b=p.addedNodes;for(let F=0;F<b.length;F++){const D=b[F],M=GL(D),O=D.parentNode;if(O!=null&&D!==c&&M===null&&!l3(D,O,e)){if(km){const L=(qs(D)?D.innerText:null)||D.nodeValue;L&&(d+=L)}O.removeChild(D)}}const j=p.removedNodes,A=j.length;if(A>0){let F=0;for(let D=0;D<A;D++){const M=j[D];(l3(M,w,e)||c===M)&&(w.appendChild(M),F++)}A!==F&&a.set(C,k)}}}if(a.size>0)for(const[m,p]of a)p.reconcileObservedMutation(m,e);const f=r.takeRecords();if(f.length>0){for(let m=0;m<f.length;m++){const p=f[m],x=p.addedNodes,w=p.target;for(let v=0;v<x.length;v++){const C=x[v],k=C.parentNode;k==null||C.nodeName!=="BR"||l3(C,w,e)||k.removeChild(C)}}r.takeRecords()}s!==null&&(u&&mo(s),km&&JL(e)&&s.insertRawText(d))}))}finally{GS=!1}}function ZR(e){const t=e._observer;t!==null&&QR(e,t.takeRecords(),t)}function eL(e){(function(t){b8===0&&Kc(t).addEventListener("textInput",Bte,!0)})(e),e._observer=new MutationObserver(((t,r)=>{QR(e,t,r)}))}function Wte(e){const t=new Map,r=new Set;for(let n=typeof e=="function"?e:e.replace;n.prototype&&n.prototype.getType!==void 0;n=Object.getPrototypeOf(n)){const{ownNodeConfig:s}=V8(n);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&r.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:r,sharedConfigMap:t}}let Hte=class tL{constructor(t,r,n=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=r,this.unknownState=n,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,o=a!==void 0?a:(function(c,u,d){let f=d.size;if(u)for(const m in u){const p=c.get(m);p&&d.has(p)||f++}return f})(i,n,s);this.size=o}getValue(t){const r=this.knownState.get(t);if(r!==void 0)return r;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(n=t.parse(s)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},r={};for(const[n,s]of this.knownState)n.isEqual(s,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(s);for(const n of this.sharedNodeState.flatKeys)n in t&&(r[n]=t[n],delete t[n]);return G9(t)&&(r.$=t),r}getWritable(t){if(this.node===t)return this;const{sharedNodeState:r,unknownState:n}=this,s=new Map(this.knownState);return new tL(t,r,(function(a,i,o){let c;if(o)for(const[u,d]of Object.entries(o)){const f=a.get(u);f?i.has(f)||i.set(f,f.parse(d)):(c=c||{},c[u]=d)}return c})(r.sharedConfigMap,s,n),s,this.size)}updateFromKnown(t,r){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&n in a||(a&&(delete a[n],this.unknownState=G9(a)),this.size++),s.set(t,r)}updateFromUnknown(t,r){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(r)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=r)}updateFromJSON(t){const{knownState:r}=this;for(const n of r.keys())r.set(n,n.defaultValue);if(this.size=r.size,this.unknownState=void 0,t)for(const[n,s]of Object.entries(t))this.updateFromUnknown(n,s)}};function Gte(e){const t=e.getWritable(),r=t.__state?t.__state.getWritable(t):new Hte(t,rL(t));return t.__state=r,r}function rL(e){return e.__state?e.__state.sharedNodeState:UL(gv(),e.getType()).sharedNodeState}function G9(e){if(e)for(const t in e)return e}function V9(e,t,r){for(const[n,s]of t.knownState){if(e.has(n.key))continue;e.add(n.key);const a=r?r.getValue(n):n.defaultValue;if(a!==s&&!n.isEqual(a,s))return!0}return!1}function q9(e,t,r){const{unknownState:n}=t,s=r?r.unknownState:void 0;if(n){for(const[a,i]of Object.entries(n))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function K9(e,t){const r=e.__state;return r&&r.node===e?r.getWritable(t):r}function X9(e,t){const r=e.__mode,n=e.__format,s=e.__style,a=t.__mode,i=t.__format,o=t.__style,c=e.__state,u=t.__state;return(r===null||r===a)&&(n===null||n===i)&&(s===null||s===o)&&(e.__state===null||c===u||(function(d,f){if(d===f)return!0;if(d&&f&&d.size!==f.size)return!1;const m=new Set;return!(d&&V9(m,d,f)||f&&V9(m,f,d)||d&&q9(m,d,f)||f&&q9(m,f,d))})(c,u))}function Y9(e,t){const r=e.mergeWithSibling(t),n=xa()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function J9(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&Sr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(X9(t,n)){n=Y9(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&Sr(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(X9(n,r)){n=Y9(n,r);break}break}r.remove()}}else n.remove()}function Mw(e){return Q9(e.anchor),Q9(e.focus),e}function Q9(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),Sr(n)){e.set(n.__key,s?n.getTextContentSize():0,"text",!0);break}if(!Wt(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element",!0)}}let Nm,Lo,Sy,e4,VS,qS,Em,Pu,KS,ky,xi="",dd=null,fd="",o0="",zg=!1,Fw=!1;function Ow(e,t){const r=Em.get(e);if(t!==null){const n=QS(e);n.parentNode===t&&t.removeChild(n)}if(Pu.has(e)||Lo._keyToDOMMap.delete(e),Wt(r)){const n=Iw(r,Em);XS(n,0,n.length-1,null)}r!==void 0&&U8(ky,Sy,e4,r,"destroyed")}function XS(e,t,r,n){let s=t;for(;s<=r;++s){const a=e[s];a!==void 0&&Ow(a,n)}}function Gh(e,t){e.setProperty("text-align",t)}const Vte="40px";function nL(e,t){const r=Nm.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||Vte;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function sL(e,t){const r=e.style;t===0?Gh(r,""):t===g8?Gh(r,"left"):t===p8?Gh(r,"center"):t===x8?Gh(r,"right"):t===y8?Gh(r,"justify"):t===v8?Gh(r,"start"):t===w8&&Gh(r,"end")}function YS(e,t){const r=(function(n){const s=n.__dir;if(s!==null)return s;if(wi(n))return null;const a=n.getParentOrThrow();return wi(a)&&a.__dir===null?"auto":null})(t);r!==null?e.dir=r:e.removeAttribute("dir")}function Dw(e,t){const r=Pu.get(e);r===void 0&&hr(60);const n=r.createDOM(Nm,Lo);if((function(s,a,i){const o=i._keyToDOMMap;(function(c,u,d){const f=`__lexicalKey_${u._key}`;c[f]=d})(a,i,s),o.set(s,a)})(e,n,Lo),Sr(r)?n.setAttribute("data-lexical-text","true"):as(r)&&n.setAttribute("data-lexical-decorator","true"),Wt(r)){const s=r.__indent,a=r.__size;if(YS(n,r),s!==0&&nL(n,s),a!==0){const o=a-1;JS(Iw(r,Pu),r,0,o,r.getDOMSlot(n))}const i=r.__format;i!==0&&sL(n,i),r.isInline()||aL(null,r,n),u4(r)&&(xi+=k0,o0+=k0)}else{const s=r.getTextContent();if(as(r)){const a=r.decorate(Lo,Nm);a!==null&&iL(e,a),n.contentEditable="false"}xi+=s,o0+=s}return t!==null&&t.insertChild(n),U8(ky,Sy,e4,r,"created"),n}function JS(e,t,r,n,s){const a=xi;xi="";let i=r;for(;i<=n;++i){Dw(e[i],s);const o=Pu.get(e[i]);o!==null&&Sr(o)&&(dd===null&&(dd=o.getFormat()),fd===""&&(fd=o.getStyle()))}u4(t)&&(xi+=k0),s.element.__lexicalTextContent=xi,xi=a+xi}function Z9(e,t){if(e){const r=e.__last;if(r){const n=t.get(r);if(n)return p0(n)?"line-break":as(n)&&n.isInline()?"decorator":null}return"empty"}return null}function aL(e,t,r){const n=Z9(e,Em),s=Z9(t,Pu);n!==s&&t.getDOMSlot(r).setManagedLineBreak(s)}function qte(e,t,r){var n;dd=null,fd="",(function(s,a,i){const o=xi,c=s.__size,u=a.__size;xi="";const d=i.element;if(c===1&&u===1){const f=s.__first,m=a.__first;if(f===m)Ix(f,d);else{const x=QS(f),w=Dw(m,null);try{d.replaceChild(w,x)}catch(v){if(typeof v=="object"&&v!=null){const C=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${w.tagName} key: ${m}}, old child: {tag: ${x.tagName}, key: ${f}}.`;throw new Error(C)}throw v}Ow(f,null)}const p=Pu.get(m);Sr(p)&&(dd===null&&(dd=p.getFormat()),fd===""&&(fd=p.getStyle()))}else{const f=Iw(s,Em),m=Iw(a,Pu);if(f.length!==c&&hr(227),m.length!==u&&hr(228),c===0)u!==0&&JS(m,a,0,u-1,i);else if(u===0){if(c!==0){const p=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;XS(f,0,c-1,p?null:d),p&&(d.textContent="")}}else(function(p,x,w,v,C,k){const b=v-1,j=C-1;let A,F,D=k.getFirstChild(),M=0,O=0;for(;M<=b&&O<=j;){const re=x[M],ie=w[O];if(re===ie)D=c3(Ix(ie,k.element)),M++,O++;else{A===void 0&&(A=new Set(x)),F===void 0&&(F=new Set(w));const de=F.has(re),fe=A.has(ie);if(de)if(fe){const H=Am(Lo,ie);H===D?D=c3(Ix(ie,k.element)):(k.withBefore(D).insertChild(H),Ix(ie,k.element)),M++,O++}else Dw(ie,k.withBefore(D)),O++;else D=c3(QS(re)),Ow(re,k.element),M++}const xe=Pu.get(ie);xe!==null&&Sr(xe)&&(dd===null&&(dd=xe.getFormat()),fd===""&&(fd=xe.getStyle()))}const L=M>b,W=O>j;if(L&&!W){const re=w[j+1],ie=re===void 0?null:Lo.getElementByKey(re);JS(w,p,O,j,k.withBefore(ie))}else W&&!L&&XS(x,M,b,k.element)})(a,f,m,c,u,i)}u4(a)&&(xi+=k0),d.__lexicalTextContent=xi,xi=o+xi})(e,t,t.getDOMSlot(r)),n=t,dd==null||dd===n.__textFormat||Fw||n.setTextFormat(dd),(function(s){fd===""||fd===s.__textStyle||Fw||s.setTextStyle(fd)})(t)}function Iw(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&hr(101),r.push(n),n=s.__next}return r}function Ix(e,t){const r=Em.get(e);let n=Pu.get(e);r!==void 0&&n!==void 0||hr(61);const s=zg||qS.has(e)||VS.has(e),a=Am(Lo,e);if(r===n&&!s){if(Wt(r)){const i=a.__lexicalTextContent;i!==void 0&&(xi+=i,o0+=i)}else{const i=r.getTextContent();o0+=i,xi+=i}return a}if(r!==n&&s&&U8(ky,Sy,e4,n,"updated"),n.updateDOM(r,a,Nm)){const i=Dw(e,null);return t===null&&hr(62),t.replaceChild(i,a),Ow(e,null),i}if(Wt(r)&&Wt(n)){const i=n.__indent;(zg||i!==r.__indent)&&nL(a,i);const o=n.__format;if((zg||o!==r.__format)&&sL(a,o),s&&(qte(r,n,a),wi(n)||n.isInline()||aL(r,n,a)),u4(n)&&(xi+=k0,o0+=k0),(zg||n.__dir!==r.__dir)&&(YS(a,n),wi(n)&&!zg))for(const c of n.getChildren())Wt(c)&&YS(Am(Lo,c.getKey()),c)}else{const i=n.getTextContent();if(as(n)){const o=n.decorate(Lo,Nm);o!==null&&iL(e,o)}xi+=i,o0+=i}if(!Fw&&wi(n)&&n.__cachedText!==o0){const i=n.getWritable();i.__cachedText=o0,n=i}return a}function iL(e,t){let r=Lo._pendingDecorators;const n=Lo._decorators;if(r===null){if(n[e]===t)return;r=VL(Lo)}r[e]=t}function c3(e){let t=e.nextSibling;return t!==null&&t===Lo._blockCursorElement&&(t=t.nextSibling),t}function Kte(e,t,r,n,s,a){xi="",o0="",zg=n===wp,Lo=r,Nm=r._config,Sy=r._nodes,e4=Lo._listeners.mutation,VS=s,qS=a,Em=e._nodeMap,Pu=t._nodeMap,Fw=t._readOnly,KS=new Map(r._keyToDOMMap);const i=new Map;return ky=i,Ix("root",null),Lo=void 0,Sy=void 0,VS=void 0,qS=void 0,Em=void 0,Pu=void 0,Nm=void 0,KS=void 0,ky=void 0,i}function QS(e){const t=KS.get(e);return t===void 0&&hr(75,e),t}function tn(e){return{type:e}}const oL=tn("SELECTION_CHANGE_COMMAND"),Xte=tn("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),_8=tn("CLICK_COMMAND"),dm=tn("DELETE_CHARACTER_COMMAND"),sp=tn("INSERT_LINE_BREAK_COMMAND"),Ty=tn("INSERT_PARAGRAPH_COMMAND"),ap=tn("CONTROLLED_TEXT_INSERTION_COMMAND"),S8=tn("PASTE_COMMAND"),ZS=tn("REMOVE_TEXT_COMMAND"),Cy=tn("DELETE_WORD_COMMAND"),Ny=tn("DELETE_LINE_COMMAND"),Ro=tn("FORMAT_TEXT_COMMAND"),k8=tn("UNDO_COMMAND"),T8=tn("REDO_COMMAND"),Yte=tn("KEYDOWN_COMMAND"),lL=tn("KEY_ARROW_RIGHT_COMMAND"),Jte=tn("MOVE_TO_END"),cL=tn("KEY_ARROW_LEFT_COMMAND"),Qte=tn("MOVE_TO_START"),uL=tn("KEY_ARROW_UP_COMMAND"),dL=tn("KEY_ARROW_DOWN_COMMAND"),Rw=tn("KEY_ENTER_COMMAND"),fL=tn("KEY_SPACE_COMMAND"),hL=tn("KEY_BACKSPACE_COMMAND"),mL=tn("KEY_ESCAPE_COMMAND"),gL=tn("KEY_DELETE_COMMAND"),pL=tn("KEY_TAB_COMMAND"),Zte=tn("INSERT_TAB_COMMAND"),ere=tn("INDENT_CONTENT_COMMAND"),eA=tn("OUTDENT_CONTENT_COMMAND"),xL=tn("DROP_COMMAND"),yL=tn("FORMAT_ELEMENT_COMMAND"),vL=tn("DRAGSTART_COMMAND"),wL=tn("DRAGOVER_COMMAND"),tre=tn("DRAGEND_COMMAND"),t4=tn("COPY_COMMAND"),C8=tn("CUT_COMMAND"),e6=tn("SELECT_ALL_COMMAND"),rre=tn("CLEAR_EDITOR_COMMAND"),nre=tn("CLEAR_HISTORY_COMMAND"),k2=tn("CAN_REDO_COMMAND"),T2=tn("CAN_UNDO_COMMAND"),sre=tn("FOCUS_COMMAND"),are=tn("BLUR_COMMAND"),ire=tn("KEY_MODIFIER_COMMAND"),n0=Object.freeze({}),t6=30,r6=[["keydown",function(e,t){if(Jx=e.timeStamp,bL=e.key,!t.isComposing()&&!Dr(t,Yte,e)&&e.key!=null){if(u3&&EA(e))return Ul(t,(()=>{C2(t,d3)})),u3=!1,void(d3="");if((function(r){return ws(r,"ArrowRight",{shiftKey:"any"})})(e))Dr(t,lL,e);else if((function(r){return ws(r,"ArrowRight",a0)})(e))Dr(t,Jte,e);else if((function(r){return ws(r,"ArrowLeft",{shiftKey:"any"})})(e))Dr(t,cL,e);else if((function(r){return ws(r,"ArrowLeft",a0)})(e))Dr(t,Qte,e);else if((function(r){return ws(r,"ArrowUp",{altKey:"any",shiftKey:"any"})})(e))Dr(t,uL,e);else if((function(r){return ws(r,"ArrowDown",{altKey:"any",shiftKey:"any"})})(e))Dr(t,dL,e);else if((function(r){return ws(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(e))Qx=!0,Dr(t,Rw,e);else if((function(r){return r.key===" "})(e))Dr(t,fL,e);else if((function(r){return hd&&ws(r,"o",{ctrlKey:!0})})(e))e.preventDefault(),Qx=!0,Dr(t,sp,!0);else if((function(r){return ws(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(e))Qx=!1,Dr(t,Rw,e);else if((function(r){return ws(r,"Backspace",{shiftKey:"any"})||hd&&ws(r,"h",{ctrlKey:!0})})(e))EA(e)?Dr(t,hL,e):(e.preventDefault(),Dr(t,dm,!0));else if((function(r){return r.key==="Escape"})(e))Dr(t,mL,e);else if((function(r){return ws(r,"Delete",{})||hd&&ws(r,"d",{ctrlKey:!0})})(e))(function(r){return r.key==="Delete"})(e)?Dr(t,gL,e):(e.preventDefault(),Dr(t,dm,!1));else if((function(r){return ws(r,"Backspace",NA)})(e))e.preventDefault(),Dr(t,Cy,!0);else if((function(r){return ws(r,"Delete",NA)})(e))e.preventDefault(),Dr(t,Cy,!1);else if((function(r){return hd&&ws(r,"Backspace",{metaKey:!0})})(e))e.preventDefault(),Dr(t,Ny,!0);else if((function(r){return hd&&(ws(r,"Delete",{metaKey:!0})||ws(r,"k",{ctrlKey:!0}))})(e))e.preventDefault(),Dr(t,Ny,!1);else if((function(r){return ws(r,"b",a0)})(e))e.preventDefault(),Dr(t,Ro,"bold");else if((function(r){return ws(r,"u",a0)})(e))e.preventDefault(),Dr(t,Ro,"underline");else if((function(r){return ws(r,"i",a0)})(e))e.preventDefault(),Dr(t,Ro,"italic");else if((function(r){return ws(r,"Tab",{shiftKey:"any"})})(e))Dr(t,pL,e);else if((function(r){return ws(r,"z",a0)})(e))e.preventDefault(),Dr(t,k8,void 0);else if((function(r){return hd?ws(r,"z",{metaKey:!0,shiftKey:!0}):ws(r,"y",{ctrlKey:!0})||ws(r,"z",{ctrlKey:!0,shiftKey:!0})})(e))e.preventDefault(),Dr(t,T8,void 0);else{const r=t._editorState._selection;r===null||lr(r)?AA(e)&&(e.preventDefault(),Dr(t,e6,e)):(function(n){return ws(n,"c",a0)})(e)?(e.preventDefault(),Dr(t,t4,e)):(function(n){return ws(n,"x",a0)})(e)?(e.preventDefault(),Dr(t,C8,e)):AA(e)&&(e.preventDefault(),Dr(t,e6,e))}(function(r){return r.ctrlKey||r.shiftKey||r.altKey||r.metaKey})(e)&&Dr(t,ire,e)}}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;Hp(r)&&n!=="touch"&&n!=="pen"&&e.button===0&&Ul(t,(()=>{kA(r)||(s6=!0)}))}],["compositionstart",function(e,t){Ul(t,(()=>{const r=_r();if(lr(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();lo(n.key),(e.timeStamp<Jx+t6||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||Sr(s)&&s.getStyle()!==r.style)&&Dr(t,ap,Fte)}}))}],["compositionend",function(e,t){km?bx=!0:vp||!_y&&!Aw?Ul(t,(()=>{C2(t,e.data)})):(u3=!0,d3=e.data)}],["input",function(e,t){e.stopPropagation(),Ul(t,(()=>{if(qs(e.target)&&kA(e.target))return;const r=_r(),n=e.data,s=CL(e);if(n!=null&&lr(r)&&kL(r,s,n,e.timeStamp,!1)){bx&&(C2(t,n),bx=!1);const a=r.anchor.getNode(),i=Du(Kc(t));if(i===null)return;const o=r.isBackward(),c=o?r.anchor.offset:r.focus.offset,u=o?r.focus.offset:r.anchor.offset;Ew&&!r.isCollapsed()&&Sr(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,c)+n+a.getTextContent().slice(c+u)===YL(i.anchorNode)||Dr(t,ap,n);const d=n.length;km&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=d),_y||vp||Aw||!t.isComposing()||(Jx=0,lo(null))}else $8(!1,t,n!==null?n:void 0),bx&&(C2(t,n||void 0),bx=!1);(function(){oo();const a=xa();ZR(a)})()}),{event:e}),Ug=null}],["click",function(e,t){Ul(t,(()=>{const r=_r(),n=Du(Kc(t)),s=Wp();if(n){if(lr(r)){const a=r.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&r.isCollapsed()&&!wi(i)&&ia().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s))n.removeAllRanges(),r.dirty=!0;else if(e.detail===3&&!r.isCollapsed()&&i!==r.focus.getNode()){const o=(function(c,u){let d=c;for(;d!==ia()&&d!=null;){if(u(d))return d;d=d.getParent()}return null})(i,(c=>Wt(c)&&!c.isInline()));Wt(o)&&o.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=n.anchorNode;(qs(a)||P0(a))&&mo(A8(s,n,t,e))}}Dr(t,_8,e)}))}],["cut",n0],["copy",n0],["dragstart",n0],["dragover",n0],["dragend",n0],["paste",n0],["focus",n0],["blur",n0],["drop",n0]];Ew&&r6.push(["beforeinput",(e,t)=>(function(r,n){const s=r.inputType,a=CL(r);s==="deleteCompositionText"||km&&JL(n)||s!=="insertCompositionText"&&Ul(n,(()=>{const i=_r();if(s==="deleteContentBackward"){if(i===null){const p=Wp();if(!lr(p))return;mo(p.clone())}if(lr(i)){const p=i.anchor.key===i.focus.key;if(o=r.timeStamp,bL==="MediaLast"&&o<Jx+t6&&n.isComposing()&&p){if(lo(null),Jx=0,setTimeout((()=>{Ul(n,(()=>{lo(null)}))}),t6),lr(i)){const x=i.anchor.getNode();x.markDirty(),Sr(x)||hr(142),TL(i,x)}}else{lo(null),r.preventDefault();const x=i.anchor.getNode(),w=x.getTextContent(),v=x.canInsertTextAfter(),C=i.anchor.offset===0&&i.focus.offset===w.length;let k=U9&&p&&!C&&v;if(k&&i.isCollapsed()&&(k=!as(c6(i.anchor,!0))),!k){Dr(n,dm,!0);const b=_r();U9&&lr(b)&&b.isCollapsed()&&(Qh=b,setTimeout((()=>Qh=null)))}}return}}var o;if(!lr(i))return;const c=r.data;Ug!==null&&$8(!1,n,Ug),i.dirty&&Ug===null||!i.isCollapsed()||wi(i.anchor.getNode())||a===null||i.applyDOMRange(a),Ug=null;const u=i.anchor,d=i.focus,f=u.getNode(),m=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Dr(n,ap,r);break;case"insertFromComposition":lo(null),Dr(n,ap,r);break;case"insertLineBreak":lo(null),Dr(n,sp,!1);break;case"insertParagraph":lo(null),Qx&&!vp?(Qx=!1,Dr(n,sp,!1)):Dr(n,Ty,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Dr(n,S8,r);break;case"deleteByComposition":(function(p,x){return p!==x||Wt(p)||Wt(x)||!fm(p)||!fm(x)})(f,m)&&Dr(n,ZS,r);break;case"deleteByDrag":case"deleteByCut":Dr(n,ZS,r);break;case"deleteContent":Dr(n,dm,!1);break;case"deleteWordBackward":Dr(n,Cy,!0);break;case"deleteWordForward":Dr(n,Cy,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Dr(n,Ny,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Dr(n,Ny,!1);break;case"formatStrikeThrough":Dr(n,Ro,"strikethrough");break;case"formatBold":Dr(n,Ro,"bold");break;case"formatItalic":Dr(n,Ro,"italic");break;case"formatUnderline":Dr(n,Ro,"underline");break;case"historyUndo":Dr(n,k8,void 0);break;case"historyRedo":Dr(n,T8,void 0)}else{if(c===`
`)r.preventDefault(),Dr(n,sp,!1);else if(c===k0)r.preventDefault(),Dr(n,Ty,void 0);else if(c==null&&r.dataTransfer){const p=r.dataTransfer.getData("text/plain");r.preventDefault(),i.insertRawText(p)}else c!=null&&kL(i,a,c,r.timeStamp,!0)?(r.preventDefault(),Dr(n,ap,c)):Ug=c;_L=r.timeStamp}}))})(e,t)]);let Jx=0,bL=null,_L=0,Ug=null;const Lw=new WeakMap;let n6=!1,s6=!1,Qx=!1,bx=!1,u3=!1,d3="",Qh=null,SL=[0,"",0,"root",0];function kL(e,t,r,n,s){const a=e.anchor,i=e.focus,o=a.getNode(),c=xa(),u=Du(Kc(c)),d=u!==null?u.anchorNode:null,f=a.key,m=c.getElementByKey(f),p=r.length;return f!==i.key||!Sr(o)||(!s&&(!Ew||_L<n+50)||o.isDirty()&&p<2||KL(r))&&a.offset!==i.offset&&!o.isComposing()||i0(o)||o.isDirty()&&p>1||(s||!Ew)&&m!==null&&!o.isComposing()&&d!==bp(m)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||(function(x,w){if(w.isSegmented())return!0;if(!x.isCollapsed())return!1;const v=x.anchor.offset,C=w.getParentOrThrow(),k=fm(w);return v===0?!w.canInsertTextBefore()||!C.canInsertTextBefore()&&!w.isComposing()||k||(function(b){const j=b.getPreviousSibling();return(Sr(j)||Wt(j)&&j.isInline())&&!j.canInsertTextAfter()})(w):v===w.getTextContentSize()&&(!w.canInsertTextAfter()||!C.canInsertTextAfter()&&!w.isComposing()||k)})(e,o)}function tA(e,t){return P0(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function rA(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:i}=e;n6&&(n6=!1,tA(n,s)&&tA(a,i)&&!Qh)||Ul(t,(()=>{if(!r)return void mo(null);if(!hv(t,n,a))return;let o=_r();if(Qh&&lr(o)&&o.isCollapsed()){const c=o.anchor,u=Qh.anchor;(c.key===u.key&&c.offset===u.offset+1||c.offset===1&&u.getNode().is(c.getNode().getPreviousSibling()))&&(o=Qh.clone(),mo(o))}if(Qh=null,lr(o)){const c=o.anchor,u=c.getNode();if(o.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(o.dirty=!0);const d=Kc(t).event,f=d?d.timeStamp:performance.now(),[m,p,x,w,v]=SL,C=ia(),k=t.isComposing()===!1&&C.getTextContent()==="";if(f<v+200&&c.offset===x&&c.key===w)hw(o,m,p);else if(c.type==="text")Sr(u)||hr(141),TL(o,u);else if(c.type==="element"&&!k){Wt(u)||hr(259);const b=c.getNode();b.isEmpty()?(function(j,A){const F=A.getTextFormat(),D=A.getTextStyle();hw(j,F,D)})(o,b):hw(o,0,"")}}else{const d=c.key,f=o.focus.key,m=o.getNodes(),p=m.length,x=o.isBackward(),w=x?i:s,v=x?s:i,C=x?f:d,k=x?d:f;let b=Mte,j=!1;for(let A=0;A<p;A++){const F=m[A],D=F.getTextContentSize();if(Sr(F)&&D!==0&&!(A===0&&F.__key===C&&w===D||A===p-1&&F.__key===k&&v===0)&&(j=!0,b&=F.getFormat(),b===0))break}o.format=j?b:0}}Dr(t,oL,void 0)}))}function hw(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function TL(e,t){hw(e,t.getFormat(),t.getStyle())}function CL(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function C2(e,t){const r=e._compositionKey;if(lo(null),r!==null&&t!=null){if(t===""){const n=oi(r),s=bp(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&Sr(n)&&z8(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=_r();if(lr(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void Dr(e,Rw,null)}}}$8(!0,e,t)}function NL(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const ip=new Map;function EL(e){const t=Bre(e.target);if(t===null)return;const r=WL(t.anchorNode);if(r===null)return;s6&&(s6=!1,Ul(r,(()=>{const c=Wp(),u=t.anchorNode;(qs(u)||P0(u))&&mo(A8(c,t,r,e))})));const n=B8(r),s=n[n.length-1],a=s._key,i=ip.get(a),o=i||s;o!==r&&rA(t,o,!1),rA(t,r,!0),r!==s?ip.set(a,r):i&&ip.delete(a)}function nA(e){e._lexicalHandled=!0}function sA(e){return e._lexicalHandled===!0}function ore(e){const t=e.ownerDocument,r=Lw.get(t);if(r===void 0)return;const n=r-1;n>=0||hr(164),Lw.set(t,n),n===0&&t.removeEventListener("selectionchange",EL);const s=l4(e);L8(s)?((function(i){if(i._parentEditor!==null){const o=B8(i),c=o[o.length-1]._key;ip.get(c)===i&&ip.delete(c)}else ip.delete(i._key)})(s),e.__lexicalEditor=null):s&&hr(198);const a=NL(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function a6(e,t,r){oo();const n=e.__key,s=e.getParent();if(s===null)return;const a=(function(o){const c=_r();if(!lr(c)||!Wt(o))return c;const{anchor:u,focus:d}=c,f=u.getNode(),m=d.getNode();return u6(f,o)&&u.set(o.__key,0,"element"),u6(m,o)&&d.set(o.__key,0,"element"),c})(e);let i=!1;if(lr(a)&&t){const o=a.anchor,c=a.focus;o.key===n&&($w(o,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),c.key===n&&($w(c,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else Eo(a)&&t&&e.isSelected()&&e.selectPrevious();if(lr(a)&&t&&!i){const o=e.getIndexWithinParent();hm(e),Bw(a,s,o,-1)}else hm(e);r||nl(s)||s.canBeEmpty()||!s.isEmpty()||a6(s,t),t&&a&&wi(s)&&s.isEmpty()&&s.selectEnd()}class zp{static getType(){const{ownNodeType:t}=V8(this);return t===void 0&&hr(64,this.name),t}static clone(t){hr(65,this.name)}$config(){return{}}config(t,r){const n=r.extends||Object.getPrototypeOf(this.constructor);return Object.assign(r,{extends:n,type:t}),{[t]:r}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),Pre(this,t)}getType(){return this.__type}isInline(){hr(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=oi(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||_r();if(r==null)return!1;const n=r.getNodes().some((s=>s.__key===this.__key));if(Sr(this))return n;if(lr(r)&&r.anchor.type==="element"&&r.focus.type==="element"){if(r.isCollapsed())return!1;const s=this.getParent();if(as(this)&&this.isInline()&&s){const a=r.isBackward()?r.focus:r.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:oi(t)}getParentOrThrow(){const t=this.getParent();return t===null&&hr(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if(nl(r))return Wt(t)||t===this&&as(t)||hr(194),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&hr(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:oi(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:oi(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=Wt(this)?this:this.getParent(),n=Wt(t)?t:t.getParent(),s=r&&n?gw(r,n):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const r=gw(this,t);return r!==null&&(r.type==="descendant"||(r.type==="branch"?tB(r)===-1:(r.type!=="same"&&r.type!=="ancestor"&&hr(279),!1)))}isParentOf(t){const r=gw(this,t);return r!==null&&r.type==="ancestor"}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),n.push(a)),a===t)break;const o=Wt(a)?r?a.getFirstChild():a.getLastChild():null;if(o!==null){a=o;continue}const c=r?a.getNextSibling():a.getPreviousSibling();if(c!==null){a=c;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||n.push(u),u===t)break;let d=null,f=u;do{if(f===null&&hr(68),d=r?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;d!==null||s.has(f.__key)||n.push(f)}while(d===null);a=d}return r||n.reverse(),n}isDirty(){const t=xa()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=oi(this.__key);return t===null&&hr(113),t}getWritable(){oo();const t=hh(),r=xa(),n=t._nodeMap,s=this.__key,a=this.getLatest(),i=r._cloneNotNeeded,o=_r();if(o!==null&&o.setCachedNodes(null),i.has(s))return Ww(a),a;const c=H8(a);return i.add(s),Ww(c),n.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){hr(70)}updateDOM(t,r,n){hr(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){hr(18,this.name)}updateFromJSON(t){return(function(r,n){const s=r.getWritable(),a=n.$;let i=a;for(const o of rL(s).flatKeys)o in n&&(i!==void 0&&i!==a||(i={...a}),i[o]=n[o]);return(s.__state||i)&&Gte(r).updateFromJSON(i),s})(this,t)}static transform(){return null}remove(t){a6(this,!0,t)}replace(t,r){oo();let n=_r();n!==null&&(n=n.clone()),x3(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,o=t.getWritable(),c=this.getParentOrThrow().getWritable(),u=c.__size;hm(o);const d=s.getPreviousSibling(),f=s.getNextSibling(),m=s.__prev,p=s.__next,x=s.__parent;if(a6(s,!1,!0),d===null?c.__first=i:d.getWritable().__next=i,o.__prev=m,f===null?c.__last=i:f.getWritable().__prev=i,o.__next=p,o.__parent=x,c.__size=u,r&&(Wt(this)&&Wt(o)||hr(139),this.getChildren().forEach((w=>{o.append(w)}))),lr(n)){mo(n);const w=n.anchor,v=n.focus;w.key===a&&lA(w,o),v.key===a&&lA(v,o)}return Uf()===a&&lo(i),o}insertAfter(t,r=!0){oo(),x3(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=_r();let o=!1,c=!1;if(a!==null){const p=t.getIndexWithinParent();if(hm(s),lr(i)){const x=a.__key,w=i.anchor,v=i.focus;o=w.type==="element"&&w.key===x&&w.offset===p+1,c=v.type==="element"&&v.key===x&&v.offset===p+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),f=s.__key,m=n.__next;if(u===null?d.__last=f:u.getWritable().__prev=f,d.__size++,n.__next=f,s.__next=m,s.__prev=n.__key,s.__parent=n.__parent,r&&lr(i)){const p=this.getIndexWithinParent();Bw(i,d,p+1);const x=d.__key;o&&i.anchor.set(x,p+2,"element"),c&&i.focus.set(x,p+2,"element")}return t}insertBefore(t,r=!0){oo(),x3(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.__key;hm(s);const i=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),c=n.__prev,u=this.getIndexWithinParent();i===null?o.__first=a:i.getWritable().__next=a,o.__size++,n.__prev=a,s.__prev=c,s.__next=n.__key,s.__parent=n.__parent;const d=_r();return r&&lr(d)&&Bw(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return Vs()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){oo();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(Wt(n))return n.select();if(!Sr(n)){const a=n.getIndexWithinParent()+1;return s.select(a,a)}return n.select(t,r)}selectNext(t,r){oo();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(Wt(n))return n.select(0,0);if(!Sr(n)){const a=n.getIndexWithinParent();return s.select(a,a)}return n.select(t,r)}markDirty(){this.getWritable()}reconcileObservedMutation(t,r){this.markDirty()}}class lv extends zp{static getType(){return"linebreak"}static clone(t){return new lv(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(r){const n=r.parentElement;if(n!==null&&Hw(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&N2(s)){const a=n.lastChild;if(a===r||a.previousSibling===r&&N2(a))return!0}}return!1})(t)||(function(r){const n=r.parentElement;if(n!==null&&Hw(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&N2(s))return!1;const a=n.lastChild;if(a===r||a.previousSibling===r&&N2(a))return!0}return!1})(t)?null:{conversion:lre,priority:0}}}static importJSON(t){return Sd().updateFromJSON(t)}}function lre(e){return{node:Sd()}}function Sd(){return il(new lv)}function p0(e){return e instanceof lv}function N2(e){return P0(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function f3(e,t){return 16&t?"code":t&m8?"mark":32&t?"sub":64&t?"sup":null}function h3(e,t){return 1&t?"strong":2&t?"em":"span"}function AL(e,t,r,n,s){const a=n.classList;let i=op(s,"base");i!==void 0&&a.add(...i),i=op(s,"underlineStrikethrough");let o=!1;const c=t&Pw&&t&jw;i!==void 0&&(r&Pw&&r&jw?(o=!0,c||a.add(...i)):c&&a.remove(...i));for(const u in Cm){const d=Cm[u];if(i=op(s,u),i!==void 0)if(r&d){if(o&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!c||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function jL(e,t,r){const n=t.firstChild,s=r.isComposing(),a=e+(s?Zb:"");if(n==null)t.textContent=a;else{const i=n.nodeValue;if(i!==a)if(s||km){const[o,c,u]=(function(d,f){const m=d.length,p=f.length;let x=0,w=0;for(;x<m&&x<p&&d[x]===f[x];)x++;for(;w+x<m&&w+x<p&&d[m-w-1]===f[p-w-1];)w++;return[x,m-x-w,f.slice(x,p-w)]})(i,a);c!==0&&n.deleteData(o,c),n.insertData(o,u)}else n.nodeValue=a}}function aA(e,t,r,n,s,a){jL(s,e,t);const i=a.theme.text;i!==void 0&&AL(0,0,n,e,i)}function E2(e,t){const r=document.createElement(t);return r.appendChild(e),r}class fh extends zp{static getType(){return"text"}static clone(t){return new fh(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return Rte[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Uf()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=Cm[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return Uw(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const n=this.__format,s=f3(0,n),a=h3(0,n),i=s===null?a:s,o=document.createElement(i);let c=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(a),o.appendChild(c)),aA(c,this,0,n,this.__text,t);const u=this.__style;return u!==""&&(o.style.cssText=u),o}updateDOM(t,r,n){const s=this.__text,a=t.__format,i=this.__format,o=f3(0,a),c=f3(0,i),u=h3(0,a),d=h3(0,i);if((o===null?u:o)!==(c===null?d:c))return!0;if(o===c&&u!==d){const w=r.firstChild;w==null&&hr(48);const v=document.createElement(d);return aA(v,this,0,i,s,n),r.replaceChild(v,w),!1}let f=r;c!==null&&o!==null&&(f=r.firstChild,f==null&&hr(49)),jL(s,f,this);const m=n.theme.text;m!==void 0&&a!==i&&AL(0,a,i,f,m);const p=t.__style,x=this.__style;return p!==x&&(r.style.cssText=x),!1}static importDOM(){return{"#text":()=>({conversion:fre,priority:0}),b:()=>({conversion:ure,priority:0}),code:()=>({conversion:s0,priority:0}),em:()=>({conversion:s0,priority:0}),i:()=>({conversion:s0,priority:0}),mark:()=>({conversion:s0,priority:0}),s:()=>({conversion:s0,priority:0}),span:()=>({conversion:cre,priority:0}),strong:()=>({conversion:s0,priority:0}),sub:()=>({conversion:s0,priority:0}),sup:()=>({conversion:s0,priority:0}),u:()=>({conversion:s0,priority:0})}}static importJSON(t){return Ca().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return qs(r)||hr(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=E2(r,"b")),this.hasFormat("italic")&&(r=E2(r,"i")),this.hasFormat("strikethrough")&&(r=E2(r,"s")),this.hasFormat("underline")&&(r=E2(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?Cm[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?Ote[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=Uw(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=Ite[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){oo();let n=t,s=r;const a=_r(),i=this.getTextContent(),o=this.__key;if(typeof i=="string"){const c=i.length;n===void 0&&(n=c),s===void 0&&(s=c)}else n=0,s=0;if(!lr(a))return FL(o,n,o,s,"text","text");{const c=Uf();c!==a.anchor.key&&c!==a.focus.key||lo(o),a.setTextNodeRange(this,n,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const a=this.getWritable(),i=a.__text,o=n.length;let c=t;c<0&&(c=o+c,c<0&&(c=0));const u=_r();if(s&&lr(u)){const f=t+o;u.setTextNodeRange(a,f,a,f)}const d=i.slice(0,c)+n+i.slice(c+r);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){oo();const r=this.getLatest(),n=r.getTextContent();if(n==="")return[];const s=r.__key,a=Uf(),i=n.length;t.sort(((M,O)=>M-O)),t.push(i);const o=[],c=t.length;for(let M=0,O=0;M<i&&O<=c;O++){const L=t[O];L>M&&(o.push(n.slice(M,L)),M=L)}const u=o.length;if(u===1)return[r];const d=o[0],f=r.getParent();let m;const p=r.getFormat(),x=r.getStyle(),w=r.__detail;let v=!1,C=null,k=null;const b=_r();if(lr(b)){const[M,O]=b.isBackward()?[b.focus,b.anchor]:[b.anchor,b.focus];M.type==="text"&&M.key===s&&(C=M),O.type==="text"&&O.key===s&&(k=O)}r.isSegmented()?(m=Ca(d),m.__format=p,m.__style=x,m.__detail=w,m.__state=K9(r,m),v=!0):m=r.setTextContent(d);const j=[m];for(let M=1;M<u;M++){const O=Ca(o[M]);O.__format=p,O.__style=x,O.__detail=w,O.__state=K9(r,O);const L=O.__key;a===s&&lo(L),j.push(O)}const A=C?C.offset:null,F=k?k.offset:null;let D=0;for(const M of j){if(!C&&!k)break;const O=D+M.getTextContentSize();if(C!==null&&A!==null&&A<=O&&A>=D&&(C.set(M.getKey(),A-D,"text"),A<O&&(C=null)),k!==null&&F!==null&&F<=O&&F>=D){k.set(M.getKey(),F-D,"text");break}D=O}if(f!==null){(function(L){const W=L.getPreviousSibling(),re=L.getNextSibling();W!==null&&Ww(W),re!==null&&Ww(re)})(this);const M=f.getWritable(),O=this.getIndexWithinParent();v?(M.splice(O,0,j),this.remove()):M.splice(O,1,j),lr(b)&&Bw(b,f,O,u-1)}return j}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||hr(50);const n=this.__key,s=t.__key,a=this.__text,i=a.length;Uf()===s&&lo(n);const o=_r();if(lr(o)){const f=o.anchor,m=o.focus;f!==null&&f.key===s&&gA(f,r,n,t,i),m!==null&&m.key===s&&gA(m,r,n,t,i)}const c=t.__text,u=r?c+a:a+c;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function cre(e){return{forChild:N8(e.style),node:null}}function ure(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:N8(t.style,r?void 0:"bold"),node:null}}const iA=new WeakMap;function dre(e){if(!qs(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function fre(e){const t=e;e.parentElement===null&&hr(129);let r=t.textContent||"";if((function(n){let s,a=n.parentNode;const i=[n];for(;a!==null&&(s=iA.get(a))===void 0&&!dre(a);)i.push(a),a=a.parentNode;const o=s===void 0?a:s;for(let c=0;c<i.length;c++)iA.set(i[c],o);return o})(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],a=n.length;for(let i=0;i<a;i++){const o=n[i];o===`
`||o===`\r
`?s.push(Sd()):o==="	"?s.push(Up()):o!==""&&s.push(Ca(o))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=oA(n,!1))!==null;){const a=n.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=oA(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:Ca(r)}}function oA(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const a=r.parentElement;if(a===null)return null;r=a}if(r=n,qs(r)){const a=r.style.display;if(a===""&&!h6(r)||a!==""&&!a.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(P0(r))return r;if(r.nodeName==="BR")return null}}const hre={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function s0(e){const t=hre[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:N8(e.style,t),node:null}}function Ca(e=""){return il(new fh(e))}function Sr(e){return e instanceof fh}function N8(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",a=n.includes("line-through"),i=e.fontStyle==="italic",o=n.includes("underline"),c=e.verticalAlign;return u=>(Sr(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),o&&!u.hasFormat("underline")&&u.toggleFormat("underline"),c!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),c!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class cv extends fh{static getType(){return"tab"}static clone(t){return new cv(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const r=super.createDOM(t),n=op(t.theme,"tab");return n!==void 0&&r.classList.add(...n),r}static importJSON(t){return Up().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&hr(126),super.setTextContent("	")}spliceText(t,r,n,s){return n===""&&r===0||n==="	"&&r===1||hr(286),this}setDetail(t){return t!==2&&hr(127),this}setMode(t){return t!=="normal"&&hr(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function Up(){return il(new cv)}function r4(e){return e instanceof cv}class mre{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:eB(Wc(T0(this,"next")),Wc(T0(t,"next")))<0}getNode(){const t=oi(this.key);return t===null&&hr(20),t}set(t,r,n,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===r&&this.type===n||(this.key=t,this.offset=r,this.type=n,uv()||(Uf()===i&&lo(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function kd(e,t,r){return new mre(e,t,r)}function m3(e,t){let r=t.__key,n=e.offset,s="element";if(Sr(t)){s="text";const a=t.getTextContentSize();n>a&&(n=a)}else if(!Wt(t)){const a=t.getNextSibling();if(Sr(a))r=a.__key,n=0,s="text";else{const i=t.getParent();i&&(r=i.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function lA(e,t){if(Wt(t)){const r=t.getLastDescendant();Wt(r)||Sr(r)?m3(e,r):m3(e,t)}else m3(e,t)}class n4{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!Eo(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every((s=>n.has(s)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new n4(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let a;if(Sr(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<n;i++)r[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const a=oi(s);a!==null&&n.push(a)}return uv()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}deleteNodes(){const t=this.getNodes();if((_r()||Wp())===this&&t[0]){const r=ho(t[0],"next");Qre(rh(r,r))}for(const r of t)r.remove()}}function lr(e){return e instanceof qm}class qm{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!lr(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=(function(n){const s=[],[a,i]=n.getTextSlices();a&&s.push(a.caret.origin);const o=new Set,c=new Set;for(const u of n)if(bd(u)){const{origin:d}=u;s.length===0?o.add(d):(c.add(d),s.push(d))}else{const{origin:d}=u;Wt(d)&&c.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),Mm(n.focus)&&Wt(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=Xc(n.focus.origin,"previous");bd(u)&&o.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=X8(u))o.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!Wt(u)||c.has(u)||u.isEmpty()||o.has(u))break;s.pop()}if(s.length===0&&n.isCollapsed()){const u=Wc(n.anchor),d=Wc(n.anchor.getFlipped()),f=p=>Kf(p)?p.origin:p.getNodeAtCaret(),m=f(u)||f(d)||(n.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(m)}return s})(nB(DA(this),"next"));return uv()||(this._cachedNodes=r),r}setTextNodeRange(t,r,n,s){this.anchor.set(t.__key,r,"text"),this.focus.set(n.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[o,c]=i6(this);let u="",d=!0;for(let f=0;f<t.length;f++){const m=t[f];if(Wt(m)&&!m.isInline())d||(u+=`
`),d=!m.isEmpty();else if(d=!1,Sr(m)){let p=m.getTextContent();m===r?m===n?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(p=o<c?p.slice(o,c):p.slice(c,o)):p=i?p.slice(o):p.slice(c):m===n&&(p=i?p.slice(0,c):p.slice(0,o)),u+=p}else!as(m)&&!p0(m)||m===n&&this.isCollapsed()||(u+=m.getTextContent())}return u}applyDOMRange(t){const r=xa(),n=r.getEditorState()._selection,s=ML(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),Mw(this)}clone(){const t=this.anchor,r=this.focus;return new qm(kd(t.key,t.offset,t.type),kd(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=Uw(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=Cm[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let a=0;a<s;a++){const i=r[a];i===`
`||i===`\r
`?n.push(Sd()):i==="	"?n.push(Up()):n.push(Ca(i))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,a=this.style;let i=r,o=n;!this.isCollapsed()&&n.isBefore(r)&&(i=n,o=r),i.type==="element"&&(function(v,C,k,b){const j=v.getNode(),A=j.getChildAtIndex(v.offset),F=Ca();if(F.setFormat(k),F.setStyle(b),O8(A))A.splice(0,0,[F]);else{const D=wi(j)?Vs().append(F):F;A===null?j.append(D):A.insertBefore(D)}v.is(C)&&C.set(F.__key,0,"text"),v.set(F.__key,0,"text")})(i,o,s,a),o.type==="element"&&Om(o,Wc(T0(o,"next")));const c=i.offset;let u=o.offset;const d=this.getNodes(),f=d.length;let m=d[0];Sr(m)||hr(26);const p=m.getTextContent().length,x=m.getParentOrThrow();let w=d[f-1];if(f===1&&o.type==="element"&&(u=p,o.set(i.key,u,"text")),this.isCollapsed()&&c===p&&(i0(m)||!m.canInsertTextAfter()||!x.canInsertTextAfter()&&m.getNextSibling()===null)){let v=m.getNextSibling();if(Sr(v)&&v.canInsertTextBefore()&&!i0(v)||(v=Ca(),v.setFormat(s),v.setStyle(a),x.canInsertTextAfter()?m.insertAfter(v):x.insertAfter(v)),v.select(0,0),m=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&c===0&&(i0(m)||!m.canInsertTextBefore()||!x.canInsertTextBefore()&&m.getPreviousSibling()===null)){let v=m.getPreviousSibling();if(Sr(v)&&!i0(v)||(v=Ca(),v.setFormat(s),x.canInsertTextBefore()?m.insertBefore(v):x.insertBefore(v)),v.select(),m=v,t!=="")return void this.insertText(t)}else if(m.isSegmented()&&c!==p){const v=Ca(m.getTextContent());v.setFormat(s),m.replace(v),m=v}else if(!this.isCollapsed()&&t!==""){const v=w.getParent();if(!x.canInsertTextBefore()||!x.canInsertTextAfter()||Wt(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),PL(this.anchor,this.focus,null),void this.insertText(t)}if(f===1){if(fm(m)){const b=Ca(t);return b.select(),void m.replace(b)}const v=m.getFormat(),C=m.getStyle();if(c!==u||v===s&&C===a){if(r4(m)){const b=Ca(t);return b.setFormat(s),b.setStyle(a),b.select(),void m.replace(b)}}else{if(m.getTextContent()!==""){const b=Ca(t);if(b.setFormat(s),b.setStyle(a),b.select(),c===0)m.insertBefore(b,!1);else{const[j]=m.splitText(c);j.insertAfter(b,!1)}return void(b.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}m.setFormat(s),m.setStyle(a)}const k=u-c;m=m.spliceText(c,k,t,!0),m.getTextContent()===""?m.remove():this.anchor.type==="text"&&(m.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=C))}else{const v=new Set([...m.getParentKeys(),...w.getParentKeys()]),C=Wt(m)?m:m.getParentOrThrow();let k=Wt(w)?w:w.getParentOrThrow(),b=w;if(!C.is(k)&&k.isInline())do b=k,k=k.getParentOrThrow();while(k.isInline());if(o.type==="text"&&(u!==0||w.getTextContent()==="")||o.type==="element"&&w.getIndexWithinParent()<u)if(Sr(w)&&!fm(w)&&u!==w.getTextContentSize()){if(w.isSegmented()){const M=Ca(w.getTextContent());w.replace(M),w=M}wi(o.getNode())||o.type!=="text"||(w=w.spliceText(0,u,"")),v.add(w.__key)}else{const M=w.getParentOrThrow();M.canBeEmpty()||M.getChildrenSize()!==1?w.remove():M.remove()}else v.add(w.__key);const j=k.getChildren(),A=new Set(d),F=C.is(k),D=C.isInline()&&m.getNextSibling()===null?C:m;for(let M=j.length-1;M>=0;M--){const O=j[M];if(O.is(m)||Wt(O)&&O.isParentOf(m))break;O.isAttached()&&(!A.has(O)||O.is(b)?F||D.insertAfter(O,!1):O.remove())}if(!F){let M=k,O=null;for(;M!==null;){const L=M.getChildren(),W=L.length;(W===0||L[W-1].is(O))&&(v.delete(M.__key),O=M),M=M.getParent()}}if(fm(m))if(c===p)m.select();else{const M=Ca(t);M.select(),m.replace(M)}else m=m.spliceText(c,p-c,t,!0),m.getTextContent()===""?m.remove():m.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let M=1;M<f;M++){const O=d[M],L=O.__key;v.has(L)||O.remove()}}}removeText(){const t=_r()===this;pw(this,Zre(DA(this))),t&&_r()!==this&&mo(this)}formatText(t,r=null){if(this.isCollapsed())return this.toggleFormat(t),void lo(null);const n=this.getNodes(),s=[];for(const j of n)Sr(j)&&s.push(j);const a=j=>{n.forEach((A=>{if(Wt(A)){const F=A.getFormatFlags(t,j);A.setTextFormat(F)}}))},i=s.length;if(i===0)return this.toggleFormat(t),lo(null),void a(r);const o=this.anchor,c=this.focus,u=this.isBackward(),d=u?c:o,f=u?o:c;let m=0,p=s[0],x=d.type==="element"?0:d.offset;if(d.type==="text"&&x===p.getTextContentSize()&&(m=1,p=s[1],x=0),p==null)return;const w=p.getFormatFlags(t,r);a(w);const v=i-1;let C=s[v];const k=f.type==="text"?f.offset:C.getTextContentSize();if(p.is(C)){if(x===k)return;if(i0(p)||x===0&&k===p.getTextContentSize())p.setFormat(w);else{const j=p.splitText(x,k),A=x===0?j[0]:j[1];A.setFormat(w),d.type==="text"&&d.set(A.__key,0,"text"),f.type==="text"&&f.set(A.__key,k-x,"text")}return void(this.format=w)}x===0||i0(p)||([,p]=p.splitText(x),x=0),p.setFormat(w);const b=C.getFormatFlags(t,w);k>0&&(k===C.getTextContentSize()||i0(C)||([C]=C.splitText(k)),C.setFormat(b));for(let j=m+1;j<v;j++){const A=s[j],F=A.getFormatFlags(t,b);A.setFormat(F)}d.type==="text"&&d.set(p.__key,x,"text"),f.type==="text"&&f.set(C.__key,k,"text"),this.format=w|b}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const x=_r();return lr(x)||hr(134),x.insertNodes(t)}const r=(this.isBackward()?this.focus:this.anchor).getNode(),n=v3(r,Uc),s=t[t.length-1];if(Wt(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const x=g3(this);n.splice(x,0,t),s.selectEnd()}return}if(!t.some((x=>(Wt(x)||as(x))&&!x.isInline()))){Wt(n)||hr(211,r.constructor.name,r.getType());const x=g3(this);return n.splice(x,0,t),void s.selectEnd()}const a=(function(x){const w=Vs();let v=null;for(let C=0;C<x.length;C++){const k=x[C],b=p0(k);if(b||as(k)&&k.isInline()||Wt(k)&&k.isInline()||Sr(k)||k.isParentRequired()){if(v===null&&(v=k.createParentElementNode(),w.append(v),b))continue;v!==null&&v.append(k)}else w.append(k),v=null}return w})(t),i=a.getLastDescendant(),o=a.getChildren(),c=!Wt(n)||!n.isEmpty()?this.insertParagraph():null,u=o[o.length-1];let d=o[0];var f;Wt(f=d)&&Uc(f)&&!f.isEmpty()&&Wt(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(Wt(n)||hr(211,r.constructor.name,r.getType()),n.append(...d.getChildren()),d=o[1]),d&&(n===null&&hr(212,r.constructor.name,r.getType()),(function(x,w,v){const C=w.getParentOrThrow().getLastChild();let k=w;const b=[w];for(;k!==C;)k.getNextSibling()||hr(140),k=k.getNextSibling(),b.push(k);let j=x;for(const A of b)j=j.insertAfter(A)})(n,d));const m=v3(i,Uc);c&&Wt(m)&&(c.canMergeWhenEmpty()||Uc(u))&&(m.append(...c.getChildren()),c.remove()),Wt(n)&&n.isEmpty()&&n.remove(),i.selectEnd();const p=Wt(n)?n.getLastChild():null;p0(p)&&m!==n&&p.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=Vs();return ia().splice(this.anchor.offset,0,[i]),i.select(),i}const t=g3(this),r=v3(this.anchor.getNode(),Uc);Wt(r)||hr(213);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],a=r.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const r=Sd();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,a=this.focus;let i=t[0],o=t[n];const[c,u]=i6(this);if(r===0)return[];if(r===1){if(Sr(i)&&!this.isCollapsed()){const f=c>u?u:c,m=c>u?c:u,p=i.splitText(f,m),x=f===0?p[0]:p[1];return x!=null?[x]:[]}return[i]}const d=s.isBefore(a);if(Sr(i)){const f=d?c:u;f===i.getTextContentSize()?t.shift():f!==0&&([,i]=i.splitText(f),t[0]=i)}if(Sr(o)){const f=o.getTextContent().length,m=d?u:c;m===0?t.pop():m!==f&&([o]=o.splitText(m),t[n]=o)}return t}modify(t,r,n){if(pA(this,t,r,n))return;const s=t==="move",a=xa(),i=Du(Kc(a));if(!i)return;const o=a._blockCursorElement,c=a._rootElement,u=this.focus.getNode();if(c===null||o===null||!Wt(u)||u.isInline()||u.canBeEmpty()||d6(o,a,c),this.dirty){let d=Am(a,this.anchor.key),f=Am(a,this.focus.key);this.anchor.type==="text"&&(d=bp(d)),this.focus.type==="text"&&(f=bp(f)),d&&f&&OL(i,d,this.anchor.offset,f,this.focus.offset)}if((function(d,f,m,p){d.modify(f,m,p)})(i,t,r?"backward":"forward",n),i.rangeCount>0){const d=i.getRangeAt(0),f=this.anchor.getNode(),m=wi(f)?f:Rre(f);if(this.applyDOMRange(d),this.dirty=!0,!s){const p=this.getNodes(),x=[];let w=!1;for(let v=0;v<p.length;v++){const C=p[v];u6(C,m)?x.push(C):w=!0}if(w&&x.length>0)if(r){const v=x[0];Wt(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=x[x.length-1];Wt(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||(function(v){const C=v.focus,k=v.anchor,b=k.key,j=k.offset,A=k.type;k.set(C.key,C.offset,C.type,!0),C.set(b,j,A,!0)})(this)}}n==="lineboundary"&&pA(this,t,r,n,"decorators")}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&Wt(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),a=r.getNextSibling()||(s===null?null:s.getNextSibling());if(Wt(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const a=J8(T0(n,t?"previous":"next"));if(a.getTextSlices().every((o=>o===null||o.distance===0))){let o={type:"initial"};for(const c of a.iterNodeCarets("shadowRoot"))if(bd(c)){if(!c.origin.isInline()){if(c.origin.isShadowRoot()){if(o.type==="merge-block")break;if(Wt(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=Wc(c);pw(this,rh(u,u)),a.anchor.origin.remove()}return}o.type!=="merge-next-block"&&o.type!=="merge-block"||(o={block:o.block,caret:c,type:"merge-block"})}}else{if(o.type==="merge-block")break;if(Mm(c)){if(Wt(c.origin)){if(c.origin.isInline()){if(!c.origin.isParentOf(a.anchor.origin))break}else o={block:c.origin,type:"merge-next-block"};continue}if(as(c.origin)){if(!c.origin.isIsolated())if(o.type==="merge-next-block"&&(c.origin.isKeyboardSelectable()||!c.origin.isInline())&&Wt(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=E8();u.add(c.origin.getKey()),mo(u)}else c.origin.remove();return}break}}if(o.type==="merge-block"){const{caret:c,block:u}=o;return pw(this,rh(!c.origin.isEmpty()&&u.isEmpty()?Z8(ho(u,c.direction)):a.anchor,c)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&uA(this,n.getNode()))return}else{const o=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,o!==null&&o.isSegmented()){const c=i.offset,u=o.getTextContentSize();if(o.is(s)||t&&c!==u||!t&&c!==0)return void dA(o,t,c)}else if(s!==null&&s.isSegmented()){const c=n.offset,u=s.getTextContentSize();if(s.is(o)||t&&c!==0||!t&&c!==u)return void dA(s,t,c)}(function(c,u){const d=c.anchor,f=c.focus,m=d.getNode(),p=f.getNode();if(m===p&&d.type==="text"&&f.type==="text"){const x=d.offset,w=f.offset,v=x<w,C=v?x:w,k=v?w:x,b=k-1;C!==b&&(function(j){return!(KL(j)||gre(j))})(m.getTextContent().slice(C,k))&&(u?f.set(f.key,b,f.type):d.set(d.key,b,d.type))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&wi(n.getParent())&&n.getPreviousSibling()===null&&uA(this,n)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function Eo(e){return e instanceof n4}function cA(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function i6(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[cA(r),cA(n)]}function uA(e,t){for(let r=t;r;r=r.getParent()){if(Wt(r)){if(r.collapseAtStart(e))return!0;if(nl(r))break}if(r.getPreviousSibling())break}return!1}const gre=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function dA(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,o=0;for(let u=0;u<a;u++){const d=u===a-1;if(o=i,i+=s[u].length,t&&i===r||i>r||d){s.splice(u,1),d&&(o=void 0);break}}const c=s.join("").trim();c===""?n.remove():(n.setTextContent(c),n.select(o,o))}function fA(e,t,r,n){let s,a=t;if(qs(e)){let i=!1;const o=e.childNodes,c=o.length,u=n._blockCursorElement;a===c&&(i=!0,a=c-1);let d=o[a],f=!1;if(d===u)d=o[a+1],f=!0;else if(u!==null){const m=u.parentNode;e===m&&t>Array.prototype.indexOf.call(m.children,u)&&a--}if(s=Zg(d),Sr(s))a=Xf(s,i?"next":"previous");else{let m=Zg(e);if(m===null)return null;if(Wt(m)){const p=n.getElementByKey(m.getKey());p===null&&hr(214),[m,a]=m.getDOMSlot(p).resolveChildIndex(m,p,e,t),Wt(m)||hr(215),i&&a>=m.getChildrenSize()&&(a=Math.max(0,m.getChildrenSize()-1));let w=m.getChildAtIndex(a);if(Wt(w)&&(function(v,C,k){const b=v.getParent();return k===null||b===null||!b.canBeEmpty()||b!==k.getNode()})(w,0,r)){const v=i?w.getLastDescendant():w.getFirstDescendant();v===null?m=w:(w=v,m=Wt(w)?w:w.getParentOrThrow()),a=0}Sr(w)?(s=w,m=null,a=Xf(w,i?"next":"previous")):w!==m&&i&&!f&&(Wt(m)||hr(216),a=Math.min(m.getChildrenSize(),a+1))}else{const p=m.getIndexWithinParent();a=t===0&&as(m)&&Zg(e)===m?p:p+1,m=m.getParentOrThrow()}if(Wt(m))return kd(m.__key,a,"element")}}else s=Zg(e);return Sr(s)?kd(s.__key,Xf(s,a,"clamp"),"text"):null}function hA(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((r||!t)&&a===null&&Wt(i)&&i.isInline()){const o=i.getPreviousSibling();Sr(o)&&e.set(o.__key,o.getTextContent().length,"text")}}else Wt(a)&&!r&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):Sr(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(n===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&Wt(a)&&a.isInline())e.set(a.__key,0,"element");else if((r||t)&&a===null&&Wt(i)&&i.isInline()&&!i.canInsertTextAfter()){const o=i.getNextSibling();Sr(o)&&e.set(o.__key,0,"text")}}}function PL(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);hA(e,n,s),hA(t,!n,s),s&&t.set(e.key,e.offset,e.type);const a=xa();if(a.isComposing()&&a._compositionKey!==e.key&&lr(r)){const i=r.anchor,o=r.focus;e.set(i.key,i.offset,i.type,!0),t.set(o.key,o.offset,o.type,!0)}}}function ML(e,t,r,n,s,a){if(e===null||r===null||!hv(s,e,r))return null;const i=fA(e,t,lr(a)?a.anchor:null,s);if(i===null)return null;const o=fA(r,n,lr(a)?a.focus:null,s);if(o===null)return null;if(i.type==="element"&&o.type==="element"){const c=Zg(e),u=Zg(r);if(as(c)&&as(u))return null}return PL(i,o,a),[i,o]}function o6(e){return Wt(e)&&!e.isInline()}function FL(e,t,r,n,s,a){const i=hh(),o=new qm(kd(e,t,s),kd(r,n,a),0,"");return o.dirty=!0,i._selection=o,o}function s4(){const e=kd("root",0,"element"),t=kd("root",0,"element");return new qm(e,t,0,"")}function E8(){return new n4(new Set)}function A8(e,t,r,n){const s=r._window;if(s===null)return null;const a=n||s.event,i=a?a.type:void 0,o=i==="selectionchange",c=!GS&&(o||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,f,m;if(lr(e)&&!c)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,f=t.anchorOffset,m=t.focusOffset,o&&lr(e)&&!hv(r,u,d))return e.clone();const p=ML(u,f,d,m,r,e);if(p===null)return null;const[x,w]=p;return new qm(x,w,lr(e)?e.format:0,lr(e)?e.style:"")}function _r(){return hh()._selection}function Wp(){return xa()._editorState._selection}function Bw(e,t,r,n=1){const s=e.anchor,a=e.focus,i=s.getNode(),o=a.getNode();if(!t.is(i)&&!t.is(o))return;const c=t.__key;if(e.isCollapsed()){const u=s.offset;if(r<=u&&n>0||r<u&&n<0){const d=Math.max(0,u+n);s.set(c,d,"element"),a.set(c,d,"element"),mA(e)}}else{const u=e.isBackward(),d=u?a:s,f=d.getNode(),m=u?s:a,p=m.getNode();if(t.is(f)){const x=d.offset;(r<=x&&n>0||r<x&&n<0)&&d.set(c,Math.max(0,x+n),"element")}if(t.is(p)){const x=m.offset;(r<=x&&n>0||r<x&&n<0)&&m.set(c,Math.max(0,x+n),"element")}}mA(e)}function mA(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,a=t.getNode(),i=n.getNode();if(e.isCollapsed()){if(!Wt(a))return;const o=a.getChildrenSize(),c=r>=o,u=c?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(Sr(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),n.set(u.__key,d,"text")}}else{if(Wt(a)){const o=a.getChildrenSize(),c=r>=o,u=c?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(Sr(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(Wt(i)){const o=i.getChildrenSize(),c=s>=o,u=c?i.getChildAtIndex(o-1):i.getChildAtIndex(s);if(Sr(u)){let d=0;c&&(d=u.getTextContentSize()),n.set(u.__key,d,"text")}}}}function $w(e,t,r,n,s){let a=null,i=0,o=null;n!==null?(a=n.__key,Sr(n)?(i=n.getTextContentSize(),o="text"):Wt(n)&&(i=n.getChildrenSize(),o="element")):s!==null&&(a=s.__key,Sr(s)?o="text":Wt(s)&&(o="element")),a!==null&&o!==null?e.set(a,i,o):(i=t.getIndexWithinParent(),i===-1&&(i=r.getChildrenSize()),e.set(r.__key,i,"element"))}function gA(e,t,r,n,s){e.type==="text"?e.set(r,e.offset+(t?0:s),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function OL(e,t,r,n,s){try{e.setBaseAndExtent(t,r,n,s)}catch{}}function pre(e,t,r,n,s,a,i){const o=n.anchorNode,c=n.focusNode,u=n.anchorOffset,d=n.focusOffset,f=document.activeElement;if(s.has($L)&&f!==a||f!==null&&R8(f))return;if(!lr(t))return void(e!==null&&hv(r,o,c)&&n.removeAllRanges());const m=t.anchor,p=t.focus,x=m.key,w=p.key,v=Am(r,x),C=Am(r,w),k=m.offset,b=p.offset,j=t.format,A=t.style,F=t.isCollapsed();let D=v,M=C,O=!1;if(m.type==="text"){D=bp(v);const de=m.getNode();O=de.getFormat()!==j||de.getStyle()!==A}else lr(e)&&e.anchor.type==="text"&&(O=!0);var L,W,re,ie,xe;if(p.type==="text"&&(M=bp(C)),D!==null&&M!==null&&(F&&(e===null||O||lr(e)&&(e.format!==j||e.style!==A))&&(L=j,W=A,re=k,ie=x,xe=performance.now(),SL=[L,W,re,ie,xe]),u!==k||d!==b||o!==D||c!==M||n.type==="Range"&&F||(f!==null&&a.contains(f)||a.focus({preventScroll:!0}),m.type==="element"))){if(OL(n,D,k,M,b),!s.has(Sre)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const de=lr(t)&&t.anchor.type==="element"?D.childNodes[k]||null:n.rangeCount>0?n.getRangeAt(0):null;if(de!==null){let fe;if(de instanceof Text){const H=document.createRange();H.selectNode(de),fe=H.getBoundingClientRect()}else fe=de.getBoundingClientRect();(function(H,Q,U){const V=QL(U),X=W8(V);if(V===null||X===null)return;let{top:z,bottom:K}=Q,te=0,se=0,pe=U;for(;pe!==null;){const oe=pe===V.body;if(oe)te=0,se=Kc(H).innerHeight;else{const we=pe.getBoundingClientRect();te=we.top,se=we.bottom}let ye=0;if(z<te?ye=-(te-z):K>se&&(ye=K-se),ye!==0)if(oe)X.scrollBy(0,ye);else{const we=pe.scrollTop;pe.scrollTop+=ye;const Se=pe.scrollTop-we;z-=Se,K-=Se}if(oe)break;pe=mv(pe)}})(r,fe,a)}}n6=!0}}function xre(e){let t=_r()||Wp();t===null&&(t=ia().selectEnd()),t.insertNodes(e)}function g3(e){let t=e;e.isCollapsed()||t.removeText();const r=_r();lr(r)&&(t=r),lr(t)||hr(161);const n=t.anchor;let s=n.getNode(),a=n.offset;for(;!Uc(s);){const i=s;if([s,a]=yre(s,a),i.is(s))break}return a}function yre(e,t){const r=e.getParent();if(!r){const s=Vs();return ia().append(s),s.select(),[ia(),0]}if(Sr(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const a=t===0?0:1;return[r,s[0].getIndexWithinParent()+a]}if(!Wt(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new qm(kd(e.__key,t,"element"),kd(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}function pA(e,t,r,n,s="decorators-and-blocks"){if(t==="move"&&n==="character"&&!e.isCollapsed()){const[d,f]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return f.set(d.key,d.offset,d.type),!0}const a=T0(e.focus,r?"previous":"next"),i=n==="lineboundary",o=t==="move";let c=a,u=s==="decorators-and-blocks";if(!rB(c)){for(const d of c){u=!1;const{origin:f}=d;if(!as(f)||f.isIsolated()||(c=d,!i||!f.isInline()))break}if(u)for(const d of J8(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(bd(d))d.origin.isInline()||(c=d);else{if(Wt(d.origin))continue;as(d.origin)&&!d.origin.isInline()&&(c=d)}break}}if(c===a)return!1;if(o&&!i&&as(c.origin)&&c.origin.isKeyboardSelectable()){const d=E8();return d.add(c.origin.getKey()),mo(d),!0}return c=Wc(c),o&&Om(e.anchor,c),Om(e.focus,c),u||!i}let Bi=null,$i=null,Sl=!1,p3=!1,mw=0;const xA={characterData:!0,childList:!0,subtree:!0};function uv(){return Sl||Bi!==null&&Bi._readOnly}function oo(){Sl&&hr(13)}function DL(){mw>99&&hr(14)}function hh(){return Bi===null&&hr(195,IL()),Bi}function xa(){return $i===null&&hr(196,IL()),$i}function IL(){let e=0;const t=new Set,r=o4.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=l4(s);if(L8(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===r&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function vre(){return $i}function yA(e,t,r){const n=t.__type,s=UL(e,n);let a=r.get(n);a===void 0&&(a=Array.from(s.transforms),r.set(n,a));const i=a.length;for(let o=0;o<i&&(a[o](t),t.isAttached());o++);}function vA(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function RL(e,t){if(!t)return;const r=e._updateTags;let n=t;Array.isArray(t)||(n=[t]);for(const s of n)r.add(s)}function wre(e){return j8(e,xa()._nodes)}function j8(e,t){const r=e.type,n=t.get(r);n===void 0&&hr(17,r);const s=n.klass;e.type!==s.getType()&&hr(18,s.name);const a=s.importJSON(e),i=e.children;if(Wt(a)&&Array.isArray(i))for(let o=0;o<i.length;o++){const c=j8(i[o],t);a.append(c)}return a}function wA(e,t,r){const n=Bi,s=Sl,a=$i;Bi=t,Sl=!0,$i=e;try{return r()}finally{Bi=n,Sl=s,$i=a}}function l0(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const a=e._editorState,i=a._selection,o=r._selection,c=e._dirtyType!==Tm,u=Bi,d=Sl,f=$i,m=e._updating,p=e._observer;let x=null;if(e._pendingEditorState=null,e._editorState=r,!s&&c&&p!==null){$i=e,Bi=r,Sl=!1,e._updating=!0;try{const F=e._dirtyType,D=e._dirtyElements,M=e._dirtyLeaves;p.disconnect(),x=Kte(a,r,e,F,D,M)}catch(F){if(F instanceof Error&&e._onError(F),p3)throw F;return zL(e,null,n,r),eL(e),e._dirtyType=wp,p3=!0,l0(e,a),void(p3=!1)}finally{p.observe(n,xA),e._updating=m,Bi=u,Sl=d,$i=f}}r._readOnly||(r._readOnly=!0);const w=e._dirtyLeaves,v=e._dirtyElements,C=e._normalizedNodes,k=e._updateTags,b=e._deferred;c&&(e._dirtyType=Tm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),(function(F,D){const M=F._decorators;let O=F._pendingDecorators||M;const L=D._nodeMap;let W;for(W in O)L.has(W)||(O===M&&(O=VL(F)),delete O[W])})(e,r);const j=s?null:Du(Kc(e));if(e._editable&&j!==null&&(c||o===null||o.dirty)&&n!==null&&!k.has(kre)){$i=e,Bi=r;try{if(p!==null&&p.disconnect(),c||o===null||o.dirty){const F=e._blockCursorElement;F!==null&&d6(F,e,n),pre(i,o,e,j,k,n)}(function(F,D,M){let O=F._blockCursorElement;if(lr(M)&&M.isCollapsed()&&M.anchor.type==="element"&&D.contains(document.activeElement)){const L=M.anchor,W=L.getNode(),re=L.offset;let ie=!1,xe=null;if(re===W.getChildrenSize())y3(W.getChildAtIndex(re-1))&&(ie=!0);else{const de=W.getChildAtIndex(re);if(de!==null&&y3(de)){const fe=de.getPreviousSibling();(fe===null||y3(fe))&&(ie=!0,xe=F.getElementByKey(de.__key))}}if(ie){const de=F.getElementByKey(W.__key);return O===null&&(F._blockCursorElement=O=(function(fe){const H=fe.theme,Q=document.createElement("div");Q.contentEditable="false",Q.setAttribute("data-lexical-cursor","true");let U=H.blockCursor;if(U!==void 0){if(typeof U=="string"){const V=XR(U);U=H.blockCursor=V}U!==void 0&&Q.classList.add(...U)}return Q})(F._config)),D.style.caretColor="transparent",void(xe===null?de.appendChild(O):de.insertBefore(O,xe))}}O!==null&&d6(O,F,D)})(e,n,o)}finally{p!==null&&p.observe(n,xA),$i=f,Bi=u}}x!==null&&(function(F,D,M,O,L){const W=Array.from(F._listeners.mutation),re=W.length;for(let ie=0;ie<re;ie++){const[xe,de]=W[ie];for(const fe of de){const H=D.get(fe);H!==void 0&&xe(H,{dirtyLeaves:O,prevEditorState:L,updateTags:M})}}})(e,x,k,w,a),lr(o)||o===null||i!==null&&i.is(o)||e.dispatchCommand(oL,void 0);const A=e._pendingDecorators;A!==null&&(e._decorators=A,e._pendingDecorators=null,Zx("decorator",e,!0,A)),(function(F,D,M){const O=TA(D),L=TA(M);O!==L&&Zx("textcontent",F,!0,L)})(e,t||a,r),Zx("update",e,!0,{dirtyElements:v,dirtyLeaves:w,editorState:r,mutatedNodes:x,normalizedNodes:C,prevEditorState:t||a,tags:k}),(function(F,D){if(F._deferred=[],D.length!==0){const M=F._updating;F._updating=!0;try{for(let O=0;O<D.length;O++)D[O]()}finally{F._updating=M}}})(e,b),(function(F){const D=F._updates;if(D.length!==0){const M=D.shift();if(M){const[O,L]=M;a4(F,O,L)}}})(e)}function Zx(e,t,r,...n){const s=t._updating;t._updating=r;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,n)}finally{t._updating=s}}function bA(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[a,i]=s,o=e._pendingEditorState;let c;i!==void 0&&(c=i.onUpdate,i.skipTransforms&&(n=!0),i.discrete&&(o===null&&hr(191),o._flushSync=!0),c&&e._deferred.push(c),RL(e,i.tag)),o==null?a4(e,a,i):a()}}return n}function a4(e,t,r){const n=e._updateTags;let s,a=!1,i=!1;r!==void 0&&(s=r.onUpdate,RL(e,r.tag),a=r.skipTransforms||!1,i=r.discrete||!1),s&&e._deferred.push(s);const o=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=LL(c||o),u=!0),c._flushSync=i;const d=Bi,f=Sl,m=$i,p=e._updating;Bi=c,Sl=!1,e._updating=!0,$i=e;const x=e._headless||e.getRootElement()===null;D8(null);try{u&&(x?o._selection!==null&&(c._selection=o._selection.clone()):c._selection=(function(k,b){const j=k.getEditorState()._selection,A=Du(Kc(k));return lr(j)||j==null?A8(j,A,k,b):j.clone()})(e,r&&r.event||null));const v=e._compositionKey;t(),a=bA(e,a),(function(k,b){const j=b.getEditorState()._selection,A=k._selection;if(lr(A)){const F=A.anchor,D=A.focus;let M;if(F.type==="text"&&(M=F.getNode(),M.selectionTransform(j,A)),D.type==="text"){const O=D.getNode();M!==O&&O.selectionTransform(j,A)}}})(c,e),e._dirtyType!==Tm&&(a?(function(k,b){const j=b._dirtyLeaves,A=k._nodeMap;for(const F of j){const D=A.get(F);Sr(D)&&D.isAttached()&&D.isSimpleText()&&!D.isUnmergeable()&&J9(D)}})(c,e):(function(k,b){const j=b._dirtyLeaves,A=b._dirtyElements,F=k._nodeMap,D=Uf(),M=new Map;let O=j,L=O.size,W=A,re=W.size;for(;L>0||re>0;){if(L>0){b._dirtyLeaves=new Set;for(const ie of O){const xe=F.get(ie);Sr(xe)&&xe.isAttached()&&xe.isSimpleText()&&!xe.isUnmergeable()&&J9(xe),xe!==void 0&&vA(xe,D)&&yA(b,xe,M),j.add(ie)}if(O=b._dirtyLeaves,L=O.size,L>0){mw++;continue}}b._dirtyLeaves=new Set,b._dirtyElements=new Map,W.delete("root")&&W.set("root",!0);for(const ie of W){const xe=ie[0],de=ie[1];if(A.set(xe,de),!de)continue;const fe=F.get(xe);fe!==void 0&&vA(fe,D)&&yA(b,fe,M)}O=b._dirtyLeaves,L=O.size,W=b._dirtyElements,re=W.size,mw++}b._dirtyLeaves=j,b._dirtyElements=A})(c,e),bA(e),(function(k,b,j,A){const F=k._nodeMap,D=b._nodeMap,M=[];for(const[O]of A){const L=D.get(O);L!==void 0&&(L.isAttached()||(Wt(L)&&JR(L,O,F,D,M,A),F.has(O)||A.delete(O),M.push(O)))}for(const O of M)D.delete(O);for(const O of j){const L=D.get(O);L===void 0||L.isAttached()||(F.has(O)||j.delete(O),D.delete(O))}})(o,c,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(c._flushSync=!0);const C=c._selection;if(lr(C)){const k=c._nodeMap,b=C.anchor.key,j=C.focus.key;k.get(b)!==void 0&&k.get(j)!==void 0||hr(19)}else Eo(C)&&C._nodes.size===0&&(c._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=o,e._dirtyType=wp,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void l0(e)}finally{Bi=d,Sl=f,$i=m,e._updating=p,mw=0}e._dirtyType!==Tm||e._deferred.length>0||(function(v,C){const k=C.getEditorState()._selection,b=v._selection;if(b!==null){if(b.dirty||!b.is(k))return!0}else if(k!==null)return!0;return!1})(c,e)?c._flushSync?(c._flushSync=!1,l0(e)):u&&Are((()=>{l0(e)})):(c._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function Ul(e,t,r){$i===e&&r===void 0?t():a4(e,t,r)}class ey{constructor(t,r,n){this.element=t,this.before=r||null,this.after=n||null}withBefore(t){return new ey(this.element,t,this.after)}withAfter(t){return new ey(this.element,this.before,t)}withElement(t){return this.element===t?this:new ey(t,this.before,this.after)}insertChild(t){const r=this.before||this.getManagedLineBreak();return r!==null&&r.parentElement!==this.element&&hr(222),this.element.insertBefore(t,r),this}removeChild(t){return t.parentElement!==this.element&&hr(223),this.element.removeChild(t),this}replaceChild(t,r){return r.parentElement!==this.element&&hr(224),this.element.replaceChild(t,r),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const r=t==="decorator"&&(vp||_y);this.insertManagedLineBreak(r)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const r=this.element,n=t.nodeName==="IMG"?t.nextSibling:null;n&&r.removeChild(n),r.removeChild(t),r.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const r=this.getManagedLineBreak();if(r){if(t===(r.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,s=this.before,a=document.createElement("br");if(n.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",n.insertBefore(i,a),n.__lexicalLineBreak=i}else n.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let r=this.after;r!==null;r=r.previousSibling)t++;return t}resolveChildIndex(t,r,n,s){if(n===this.element){const c=this.getFirstChildOffset();return[t,Math.min(c+t.getChildrenSize(),Math.max(c,s))]}const a=_A(r,n);a.push(s);const i=_A(r,this.element);let o=t.getIndexWithinParent();for(let c=0;c<i.length;c++){const u=a[c],d=i[c];if(u===void 0||u<d)break;if(u>d){o+=1;break}}return[t.getParentOrThrow(),o]}}function _A(e,t){const r=[];let n=t;for(;n!==e&&n!==null;n=n.parentNode){let s=0;for(let a=n.previousSibling;a!==null;a=a.previousSibling)s++;r.push(s)}return n!==e&&hr(225),r.reverse()}class $o extends zp{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return Dte[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=xa()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(Sr(r)&&t.push(r),Wt(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Wt(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;Wt(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const a=r[n-1];return Wt(a)&&a.getLastDescendant()||a||null}const s=r[t];return Wt(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:oi(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&hr(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:oi(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&hr(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContent(),Wt(a)&&s!==n-1&&!a.isInline()&&(t+=k0)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContentSize(),Wt(a)&&s!==n-1&&!a.isInline()&&(t+=k0.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=W9[t];return!!(this.getFormat()&r)}return!1}hasTextFormat(t){const r=Cm[t];return!!(this.getTextFormat()&r)}getFormatFlags(t,r){return Uw(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){oo();const n=_r();let s=t,a=r;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const c=this.getFirstChild();if(Sr(c)||Wt(c))return c.select(0,0)}else if(!(t!==void 0&&t!==i||r!==void 0&&r!==i)){const c=this.getLastChild();if(Sr(c)||Wt(c))return c.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const o=this.__key;return lr(n)?(n.anchor.set(o,s,"element"),n.focus.set(o,a,"element"),n.dirty=!0,n):FL(o,s,o,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((r=>r.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?W9[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,a=this.getChildrenSize(),i=this.getWritable();t+r<=a||hr(226,String(t),String(r),String(a));const o=i.__key,c=[],u=[],d=this.getChildAtIndex(t+r);let f=null,m=a-r+s;if(t!==0)if(t===a)f=this.getLastChild();else{const x=this.getChildAtIndex(t);x!==null&&(f=x.getPreviousSibling())}if(r>0){let x=f===null?this.getFirstChild():f.getNextSibling();for(let w=0;w<r;w++){x===null&&hr(100);const v=x.getNextSibling(),C=x.__key;hm(x.getWritable()),u.push(C),x=v}}let p=f;for(let x=0;x<s;x++){const w=n[x];p!==null&&w.is(p)&&(f=p=p.getPreviousSibling());const v=w.getWritable();v.__parent===o&&m--,hm(v);const C=w.__key;if(p===null)i.__first=C,v.__prev=null;else{const k=p.getWritable();k.__next=C,v.__prev=k.__key}w.__key===o&&hr(76),v.__parent=o,c.push(C),p=w}if(t+r===a)p!==null&&(p.getWritable().__next=null,i.__last=p.__key);else if(d!==null){const x=d.getWritable();if(p!==null){const w=p.getWritable();x.__prev=p.__key,w.__next=d.__key}else x.__prev=null}if(i.__size=m,u.length){const x=_r();if(lr(x)){const w=new Set(u),v=new Set(c),{anchor:C,focus:k}=x;SA(C,w,v)&&$w(C,C.getNode(),this,f,d),SA(k,w,v)&&$w(k,k.getNode(),this,f,d),m!==0||this.canBeEmpty()||nl(this)||this.remove()}}return i}getDOMSlot(t){return new ey(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(qs(r)){const n=this.getIndent();n>0&&(r.style.paddingInlineStart=40*n+"px");const s=this.getDirection();s&&(r.dir=s)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),n=this.getTextStyle();return r!==0&&(t.textFormat=r),n!==""&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const n=this.getDOMSlot(t);let s=n.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=r.getElementByKey(a.getKey());i!==null&&(s==null?(n.insertChild(i),s=i):s!==i&&n.replaceChild(i,s),s=s.nextSibling)}}}function Wt(e){return e instanceof $o}function SA(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}class P8 extends zp{decorate(t,r){hr(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function as(e){return e instanceof P8}class dv extends $o{static getType(){return"root"}static clone(){return new dv}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){hr(51)}getTextContent(){const t=this.__cachedText;return!uv()&&xa()._dirtyType!==Tm||t===null?super.getTextContent():t}remove(){hr(52)}replace(t){hr(53)}insertBefore(t){hr(54)}insertAfter(t){hr(55)}updateDOM(t,r){return!1}splice(t,r,n){for(const s of n)Wt(s)||as(s)||hr(282);return super.splice(t,r,n)}static importJSON(t){return ia().updateFromJSON(t)}collapseAtStart(){return!0}}function wi(e){return e instanceof dv}function LL(e){return new i4(new Map(e._nodeMap))}function M8(){return new i4(new Map([["root",new dv]]))}function BL(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&hr(130,r.name),Wt(e)){const n=t.children;Array.isArray(n)||hr(59,r.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=BL(s[a]);n.push(i)}}return t}class i4{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,r){return wA(r&&r.editor||null,this,t)}clone(t){const r=new i4(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return wA(null,this,(()=>({root:BL(ia())})))}}const zw="historic",bre="history-push",ty="history-merge",_re="paste",$L="collaboration",Sre="skip-scroll-into-view",kre="skip-dom-selection";class F8 extends $o{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class fv extends $o{static getType(){return"paragraph"}static clone(t){return new fv(t.__key)}createDOM(t){const r=document.createElement("p"),n=op(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:Tre,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(qs(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n)}return{element:r}}static importJSON(t){return Vs().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,r){const n=Vs();n.setTextFormat(t.format),n.setTextStyle(t.style);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||Sr(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function Tre(e){const t=Vs();return e.style&&(t.setFormat(e.style.textAlign),G8(e,t)),{node:t}}function Vs(){return il(new fv)}function O8(e){return e instanceof fv}const Xn=0,Wg=1,Cre=4;function zL(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=M8(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=Tm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function Nre(e){const t=e||{},r=vre(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,a=t.disableEvents||!1,i=M8(),o=t.namespace||(s!==null?s._config.namespace:XL()),c=t.editorState,u=[dv,fh,lv,cv,fv,F8,...t.nodes||[]],{onError:d,html:f}=t,m=t.editable===void 0||t.editable;let p;if(e===void 0&&r!==null)p=r._nodes;else{p=new Map;for(let w=0;w<u.length;w++){let v=u[w],C=null,k=null;if(typeof v!="function"){const D=v;v=D.replace,C=D.with,k=D.withKlass||null}const{ownNodeConfig:b}=V8(v),j=v.getType(),A=v.transform(),F=new Set;b&&b.$transform&&F.add(b.$transform),A!==null&&F.add(A),p.set(j,{exportDOM:f&&f.export?f.export.get(v):void 0,klass:v,replace:C,replaceWithKlass:k,sharedNodeState:Wte(u[w]),transforms:F})}}const x=new o4(i,s,p,{disableEvents:a,namespace:o,theme:n},d||console.error,(function(w,v){const C=new Map,k=new Set,b=j=>{Object.keys(j).forEach((A=>{let F=C.get(A);F===void 0&&(F=[],C.set(A,F)),F.push(j[A])}))};return w.forEach((j=>{const A=j.klass.importDOM;if(A==null||k.has(A))return;k.add(A);const F=A.call(j.klass);F!==null&&b(F)})),v&&b(v),C})(p,f?f.import:void 0),m,e);return c!==void 0&&(x._pendingEditorState=c,x._dirtyType=wp),x}class o4{constructor(t,r,n,s,a,i,o,c){this._createEditorArgs=c,this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Tm,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=XL(),this._onError=a,this._htmlConversions=i,this._editable=o,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&hr(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&hr(36,String(t));const i=a[n];return i.add(r),()=>{i.delete(r),a.every((o=>o.size===0))&&s.delete(t)}}registerMutationListener(t,r,n){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(r);i===void 0&&(i=new Set,a.set(r,i)),i.add(s);const o=n&&n.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(r,s),()=>{i.delete(s),i.size===0&&a.delete(r)}}getRegisteredNode(t){const r=this._nodes.get(t.getType());return r===void 0&&hr(37,t.name),r}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,r){const n=this._editorState,s=MA(n).get(r.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,r){const n=this.getRegisteredNode(t);return n.transforms.add(r),n}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],a=n.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,r);s.push(i)}return(function(i,o){const c=MA(i.getEditorState()),u=[];for(const d of o){const f=c.get(d);f&&u.push(f)}u.length!==0&&i.update((()=>{for(const d of u)for(const f of d.keys()){const m=oi(f);m&&m.markDirty()}}),i._pendingEditorState===null?{tag:ty}:void 0)})(this,s.map((i=>i.klass.getType()))),()=>{s.forEach((i=>i.transforms.delete(r)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return Dr(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=op(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,zL(this,r,t,s),r!==null&&(this._config.disableEvents||ore(r),n!=null&&r.classList.remove(...n)),t!==null){const a=W8(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=wp,eL(this),this._updateTags.add(ty),l0(this),this._config.disableEvents||(function(o,c){const u=o.ownerDocument,d=Lw.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",EL),Lw.set(u,(d||0)+1),o.__lexicalEditor=c;const f=NL(o);for(let m=0;m<r6.length;m++){const[p,x]=r6[m],w=typeof x=="function"?v=>{sA(v)||(nA(v),(c.isEditable()||p==="click")&&x(v,c))}:v=>{if(sA(v))return;nA(v);const C=c.isEditable();switch(p){case"cut":return C&&Dr(c,C8,v);case"copy":return Dr(c,t4,v);case"paste":return C&&Dr(c,S8,v);case"dragstart":return C&&Dr(c,vL,v);case"dragover":return C&&Dr(c,wL,v);case"dragend":return C&&Dr(c,tre,v);case"focus":return C&&Dr(c,sre,v);case"blur":return C&&Dr(c,are,v);case"drop":return C&&Dr(c,xL,v)}};o.addEventListener(p,w),f.push((()=>{o.removeEventListener(p,w)}))}})(t,this),n!=null&&t.classList.add(...n)}else this._window=null,this._updateTags.add(ty),l0(this);Zx("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&hr(38);let n=t;n._readOnly&&(n=LL(t),n._selection=t._selection?t._selection.clone():null),ZR(this);const s=this._pendingEditorState,a=this._updateTags,i=r!==void 0?r.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),l0(this)),this._pendingEditorState=n,this._dirtyType=wp,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||l0(this)}parseEditorState(t,r){return(function(n,s,a){const i=M8(),o=Bi,c=Sl,u=$i,d=s._dirtyElements,f=s._dirtyLeaves,m=s._cloneNotNeeded,p=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,Bi=i,Sl=!1,$i=s,D8(null);try{const x=s._nodes;j8(n.root,x),a&&a(),i._readOnly=!0}catch(x){x instanceof Error&&s._onError(x)}finally{s._dirtyElements=d,s._dirtyLeaves=f,s._cloneNotNeeded=m,s._dirtyType=p,Bi=o,Sl=c,$i=u}return i})(typeof t=="string"?JSON.parse(t):t,this,r)}read(t){return l0(this),this.getEditorState().read(t,{editor:this})}update(t,r){(function(n,s,a){n._updating?n._updates.push([s,a]):a4(n,s,a)})(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),Ul(this,(()=>{const s=_r(),a=ia();s!==null?s.dirty||mo(s.clone()):a.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),Ore("focus"),Dre((()=>{n.removeAttribute("autocapitalize"),t&&t()}))})),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=Du(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,Zx("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}o4.version="0.35.0+prod.esm";let l6=null;function D8(e){l6=e}let Ere=1;function UL(e,t){const r=I8(e,t);return r===void 0&&hr(30,t),r}function I8(e,t){return e._nodes.get(t)}const Are=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function kA(e){return as(th(e))}function R8(e){const t=document.activeElement;if(!qs(t))return!1;const r=t.nodeName;return as(th(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&l4(t)==null)}function hv(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!R8(t)&&WL(t)===e}catch{return!1}}function L8(e){return e instanceof o4}function WL(e){let t=e;for(;t!=null;){const r=l4(t);if(L8(r))return r;t=mv(t)}return null}function l4(e){return e?e.__lexicalEditor:null}function fm(e){return r4(e)||e.isToken()}function i0(e){return fm(e)||e.isSegmented()}function P0(e){return Hp(e)&&e.nodeType===Cte}function jre(e){return Hp(e)&&e.nodeType===Nte}function bp(e){let t=e;for(;t!=null;){if(P0(t))return t;t=t.firstChild}return null}function Uw(e,t,r){const n=Cm[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function HL(e){return Sr(e)||p0(e)||as(e)}function Pre(e,t){const r=(function(){const i=l6;return l6=null,i})();if((t=t||r&&r.__key)!=null)return void(e.__key=t);oo(),DL();const n=xa(),s=hh(),a=""+Ere++;s._nodeMap.set(a,e),Wt(e)?n._dirtyElements.set(a,!0):n._dirtyLeaves.add(a),n._cloneNotNeeded.add(a),n._dirtyType=YR,e.__key=a}function hm(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,o=s!==null?s.__key:null,c=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(n.__first=i),a===null&&(n.__last=o),c!==null&&(c.__next=i),u!==null&&(u.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function Ww(e){DL();const t=e.getLatest(),r=t.__parent,n=hh(),s=xa(),a=n._nodeMap,i=s._dirtyElements;r!==null&&(function(c,u,d){let f=c;for(;f!==null;){if(d.has(f))return;const m=u.get(f);if(m===void 0)break;d.set(f,!1),f=m.__parent}})(r,a,i);const o=t.__key;s._dirtyType=YR,Wt(e)?i.set(o,!0):s._dirtyLeaves.add(o)}function lo(e){oo();const t=xa(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=oi(r);n!==null&&n.getWritable()}if(e!==null){const n=oi(e);n!==null&&n.getWritable()}}}function Uf(){return uv()?null:xa()._compositionKey}function oi(e,t){const r=(t||hh())._nodeMap.get(e);return r===void 0?null:r}function GL(e,t){const r=c4(e,xa());return r!==void 0?oi(r,t):null}function c4(e,t){return e[`__lexicalKey_${t._key}`]}function th(e,t){let r=e;for(;r!=null;){const n=GL(r,t);if(n!==null)return n;r=mv(r)}return null}function VL(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function TA(e){return e.read((()=>ia().getTextContent()))}function ia(){return qL(hh())}function qL(e){return e._nodeMap.get("root")}function mo(e){oo();const t=hh();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function Zg(e){const t=xa(),r=(function(n,s){let a=n;for(;a!=null;){const i=c4(a,s);if(i!==void 0)return i;a=mv(a)}return null})(e,t);return r===null?e===t.getRootElement()?oi("root"):null:oi(r)}function KL(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function B8(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function XL(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function YL(e){return P0(e)?e.nodeValue:null}function $8(e,t,r){const n=Du(Kc(t));if(n===null)return;const s=n.anchorNode;let{anchorOffset:a,focusOffset:i}=n;if(s!==null){let o=YL(s);const c=th(s);if(o!==null&&Sr(c)){if(o===Zb&&r){const u=r.length;o=r,a=u,i=u}o!==null&&z8(c,o,a,i,e)}}}function z8(e,t,r,n,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let o=t;(i||s)&&t[t.length-1]===Zb&&(o=t.slice(0,-1));const c=a.getTextContent();if(s||o!==c){if(o===""){if(lo(null),_y||vp||Aw)a.remove();else{const w=xa();setTimeout((()=>{w.update((()=>{a.isAttached()&&a.remove()}))}),20)}return}const u=a.getParent(),d=Wp(),f=a.getTextContentSize(),m=Uf(),p=a.getKey();if(a.isToken()||m!==null&&p===m&&!i||lr(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===f&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const x=_r();if(!lr(x)||r===null||n===null)return void CA(a,o,x);if(x.setTextNodeRange(a,r,a,n),a.isSegmented()){const w=Ca(a.getTextContent());a.replace(w),a=w}CA(a,o,x)}}}function CA(e,t,r){if(e.setTextContent(t),lr(r)){const n=e.getKey();for(const s of["anchor","focus"]){const a=r[s];a.type==="text"&&a.key===n&&(a.offset=Xf(e,a.offset,"clamp"))}}}function A2(e,t,r){const n=t[r]||!1;return n==="any"||n===e[r]}function Mre(e,t){return A2(e,t,"altKey")&&A2(e,t,"ctrlKey")&&A2(e,t,"shiftKey")&&A2(e,t,"metaKey")}function ws(e,t,r){return Mre(e,r)&&e.key.toLowerCase()===t.toLowerCase()}const a0={ctrlKey:!hd,metaKey:hd},NA={altKey:hd,ctrlKey:!hd};function EA(e){return e.key==="Backspace"}function AA(e){return ws(e,"a",a0)}function Fre(e){const t=ia();if(lr(e)){const r=e.anchor,n=e.focus,s=r.getNode().getTopLevelElementOrThrow().getParentOrThrow();return r.set(s.getKey(),0,"element"),n.set(s.getKey(),s.getChildrenSize(),"element"),Mw(e),e}{const r=t.select(0,t.getChildrenSize());return mo(Mw(r)),r}}function op(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const a=XR(s);return r[t]=a,a}return s}function U8(e,t,r,n,s){if(r.size===0)return;const a=n.__type,i=n.__key,o=t.get(a);o===void 0&&hr(33,a);const c=o.klass;let u=e.get(c);u===void 0&&(u=new Map,e.set(c,u));const d=u.get(i),f=d==="destroyed"&&s==="created";(d===void 0||f)&&u.set(i,f?"updated":s)}function jA(e,t,r){const n=e.getParent();let s=r,a=e;return n!==null&&(t&&r===0?(s=a.getIndexWithinParent(),a=n):t||r!==a.getChildrenSize()||(s=a.getIndexWithinParent()+1,a=n)),a.getChildAtIndex(t?s-1:s)}function c6(e,t){const r=e.offset;if(e.type==="element")return jA(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?jA(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function JL(e){const t=Kc(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function Dr(e,t,r){return(function(n,s,a){const i=B8(n);for(let o=4;o>=0;o--)for(let c=0;c<i.length;c++){const u=i[c],d=u._commands.get(s);if(d!==void 0){const f=d[o];if(f!==void 0){const m=Array.from(f),p=m.length;let x=!1;if(Ul(u,(()=>{for(let w=0;w<p;w++)if(m[w](a,n))return void(x=!0)})),x)return x}}}return!1})(e,t,r)}function u4(e){return!wi(e)&&!e.isLastChild()&&!e.isInline()}function Am(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&hr(75,t),r}function mv(e){const t=e.assignedSlot||e.parentElement;return f6(t)?t.host:t}function QL(e){return jre(e)?e:qs(e)?e.ownerDocument:null}function Ore(e){oo(),xa()._updateTags.add(e)}function Dre(e){oo(),xa()._deferred.push(e)}function u6(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function W8(e){const t=QL(e);return t?t.defaultView:null}function Kc(e){const t=e._window;return t===null&&hr(78),t}function Ire(e){return Wt(e)&&e.isInline()||as(e)&&e.isInline()}function Rre(e){let t=e.getParentOrThrow();for(;t!==null;){if(nl(t))return t;t=t.getParentOrThrow()}return t}function nl(e){return wi(e)||Wt(e)&&e.isShadowRoot()}function il(e){const t=xa(),r=e.getType(),n=I8(t,r);n===void 0&&hr(200,e.constructor.name,r);const{replace:s,replaceWithKlass:a}=n;if(s!==null){const i=s(e),o=i.constructor;return a!==null?i instanceof a||hr(201,a.name,a.getType(),o.name,o.getType(),e.constructor.name,r):i instanceof e.constructor&&o!==e.constructor||hr(202,o.name,o.getType(),e.constructor.name,r),i.__key===e.__key&&hr(203,e.constructor.name,r,o.name,o.getType()),i}return e}function x3(e,t){!wi(e.getParent())||Wt(t)||as(t)||hr(99)}function Lre(e){const t=oi(e);return t===null&&hr(63,e),t}function y3(e){return(as(e)||Wt(e)&&!e.canBeEmpty())&&!e.isInline()}function d6(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function Du(e){return Lu?(e||window).getSelection():null}function Bre(e){const t=W8(e);return t?t.getSelection():null}function ZL(e){return qs(e)&&e.tagName==="A"}function qs(e){return Hp(e)&&e.nodeType===Tte}function Hp(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function f6(e){return Hp(e)&&e.nodeType===Ete}function h6(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function Hw(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function Uc(e){if(as(e)&&!e.isInline())return!0;if(!Wt(e)||nl(e))return!1;const t=e.getFirstChild(),r=t===null||p0(t)||Sr(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function v3(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function gv(){return xa()}const PA=new WeakMap,$re=new Map;function MA(e){if(!e._readOnly&&e.isEmpty())return $re;e._readOnly||hr(192);let t=PA.get(e);return t||(t=(function(r){const n=new Map;for(const[s,a]of r._nodeMap){const i=a.__type;let o=n.get(i);o||(o=new Map,n.set(i,o)),o.set(s,a)}return n})(e),PA.set(e,t)),t}function H8(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function G8(e,t){const r=parseInt(e.style.paddingInlineStart,10)||0,n=Math.round(r/40);t.setIndent(n)}function zre(e){e.__lexicalUnmanaged=!0}function Ure(e){return e.__lexicalUnmanaged===!0}function _x(e,t){return(function(r,n){return Object.prototype.hasOwnProperty.call(r,n)})(e,t)&&e[t]!==zp[t]}function V8(e){const t=H9 in e.prototype?e.prototype[H9]():void 0,r=(function(i){return i===P8||i===$o||i===zp})(e),n=!r&&_x(e,"getType")?e.getType():void 0;let s,a=n;if(t)if(n)s=t[n];else for(const[i,o]of Object.entries(t))a=i,s=o;if(!r&&a&&(_x(e,"getType")||(e.getType=()=>a),_x(e,"clone")||(e.clone=i=>(D8(i),new e)),_x(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!_x(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function Wre(e){const t=gv();return oo(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const Hre={next:"previous",previous:"next"};class q8{constructor(t){this.origin=t}[Symbol.iterator](){return Q8({hasNext:Mm,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return ho(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return ho(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,r){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(n===null?this.insert(t):n.replace(t,r)),this}splice(t,r,n="next"){const s=n===this.direction?r:Array.from(r).reverse();let a=this;const i=this.getParentAtCaret(),o=new Map;for(let c=a.getAdjacentCaret();c!==null&&o.size<t;c=c.getAdjacentCaret()){const u=c.origin.getWritable();o.set(u.getKey(),u)}for(const c of s){if(o.size>0){const u=a.getNodeAtCaret();if(u){if(o.delete(u.getKey()),o.delete(c.getKey()),!(u.is(c)||a.origin.is(c))){const d=c.getParent();d&&d.is(i)&&c.remove(),u.replace(c)}}else u===null&&hr(263,Array.from(o).join(" "))}else a.insert(c);a=ho(c,this.direction)}for(const c of o.values())c.remove();return this}}class Ey extends q8{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Xc(t,this.direction)}getParentCaret(t="root"){return ho(K8(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Gp(this.direction);return ho(this.getNodeAtCaret(),t)||Xc(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof Ey&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const Gre={root:wi,shadowRoot:nl};function Gp(e){return Hre[e]}function K8(e,t="root"){return Gre[t](e)?null:e}class jm extends q8{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ho(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Wt(this.origin)?Xc(this.origin,this.direction):null}getParentCaret(t="root"){return ho(K8(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Gp(this.direction);return ho(this.getNodeAtCaret(),t)||Xc(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof jm&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof jm||t instanceof Pm)&&this.direction===t.direction&&this.origin.is(t.origin)}}class Pm extends q8{type="text";constructor(t,r){super(t),this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Fm(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return ho(K8(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Fm(this.origin,Gp(this.direction),this.offset)}isSamePointCaret(t){return t instanceof Pm&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof jm||t instanceof Pm)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return ho(this.origin,this.direction)}}function Kf(e){return e instanceof Pm}function Mm(e){return e instanceof jm}function bd(e){return e instanceof Ey}const Vre={next:class extends Pm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Pm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},qre={next:class extends jm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends jm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Kre={next:class extends Ey{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends Ey{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function ho(e,t){return e?new qre[t](e):null}function Fm(e,t,r){return e?new Vre[t](e,Xf(e,r)):null}function Xf(e,t,r="error"){const n=e.getTextContentSize();let s=t==="next"?n:t==="previous"?0:t;return(s<0||s>n)&&(r!=="clamp"&&(function(a,...i){const o=new URL("https://lexical.dev/docs/error"),c=new URLSearchParams;c.append("code",a);for(const u of i)c.append("v",u);o.search=c.toString(),console.warn(`Minified Lexical warning #${a}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(t),String(n),e.getKey()),s=s<0?0:n),s}function FA(e,t){return new Yre(e,t)}function Xc(e,t){return Wt(e)?new Kre[t](e):null}function Xre(e){return e&&e.getChildCaret()||e}function X8(e){return e&&Xre(e.getAdjacentCaret())}class Y8{type="node-caret-range";constructor(t,r,n){this.anchor=t,this.focus=r,this.direction=n}getLatest(){const t=this.anchor.getLatest(),r=this.focus.getLatest();return t===this.anchor&&r===this.focus?this:new Y8(t,r,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return Kf(a)?(function(i,o){const{direction:c,origin:u}=i,d=Xf(u,o==="focus"?Gp(c):c);return FA(i,d-i.offset)})(a,s):null},r=t("anchor"),n=t("focus");if(r&&n){const{caret:s}=r,{caret:a}=n;if(s.isSameNodeCaret(a))return[FA(s,a.offset-s.offset),null]}return[r,n]}iterNodeCarets(t="root"){const r=Kf(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),s=Kf(n),a=i=>i.isSameNodeCaret(n)?null:X8(i)||i.getParentCaret(t);return Q8({hasNext:i=>i!==null&&!(s&&n.isSameNodeCaret(i)),initial:r.isSameNodeCaret(n)?null:a(r),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class Yre{type="slice";constructor(t,r){this.caret=t,this.distance=r}getSliceIndices(){const{distance:t,caret:{offset:r}}=this,n=r+t;return n<r?[n,r]:[r,n]}getTextContent(){const[t,r]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,r)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:r}}=this,[n,s]=this.getSliceIndices(),a=t.getTextContent();return Fm(t.setTextContent(a.slice(0,n)+a.slice(s)),r,n)}}function J8(e){return rh(e,ho(ia(),e.direction))}function Jre(e){return rh(e,e)}function rh(e,t){return e.direction!==t.direction&&hr(265),new Y8(e,t,e.direction)}function Q8(e){const{initial:t,hasNext:r,step:n,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!r(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=n(a),i}}}function eB(e,t){const r=gw(e.origin,t.origin);switch(r===null&&hr(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{const n=e.type==="text",s=t.type==="text";return n&&s?(function(a,i){return Math.sign(a-i)})(e.offset,t.offset):e.type===t.type?0:n?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return tB(r)}}function tB(e){const{a:t,b:r}=e,n=t.__key,s=r.__key;let a=t,i=r;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===n)return 1}return a===null?1:-1}function j2(e,t){return t.is(e)}function OA(e){return Wt(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function gw(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const r=new Map;for(let[n,s]=OA(e);n;s=n,n=n.getParent())r.set(n,s);for(let[n,s]=OA(t);n;s=n,n=n.getParent()){const a=r.get(n);if(a!==void 0)return a===null?(j2(e,n)||hr(276),{commonAncestor:n,type:"ancestor"}):s===null?(j2(t,n)||hr(277),{commonAncestor:n,type:"descendant"}):((Wt(a)||j2(e,a))&&(Wt(s)||j2(t,s))&&n.is(a.getParent())&&n.is(s.getParent())||hr(278),{a,b:s,commonAncestor:n,type:"branch"})}return null}function T0(e,t){const{type:r,key:n,offset:s}=e,a=Lre(e.key);return r==="text"?(Sr(a)||hr(266,a.getType(),n),Fm(a,t,s)):(Wt(a)||hr(267,a.getType(),n),ene(a,e.offset,t))}function Om(e,t){const{origin:r,direction:n}=t,s=n==="next";Kf(t)?e.set(r.getKey(),t.offset,"text"):Mm(t)?Sr(r)?e.set(r.getKey(),Xf(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(s?1:0),"element"):(bd(t)&&Wt(r)||hr(268),e.set(r.getKey(),s?0:r.getChildrenSize(),"element"))}function Qre(e){const t=_r(),r=lr(t)?t:s4();return pw(r,e),mo(r),r}function pw(e,t){Om(e.anchor,t.anchor),Om(e.focus,t.focus)}function DA(e){const{anchor:t,focus:r}=e,n=T0(t,"next"),s=T0(r,"next"),a=eB(n,s)<=0?"next":"previous";return rh(_p(n,a),_p(s,a))}function Z8(e){const{direction:t,origin:r}=e,n=ho(r,Gp(t)).getNodeAtCaret();return n?ho(n,t):Xc(r.getParentOrThrow(),t)}function IA(e,t="root"){const r=[e];for(let n=bd(e)?e.getParentCaret(t):e.getSiblingCaret();n!==null;n=n.getParentCaret(t))r.push(Z8(n));return r}function w3(e){return!!e&&e.origin.isAttached()}function Zre(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const r="root",n="next";let s=t;const a=nB(e,n),i=IA(a.anchor,r),o=IA(a.focus.getFlipped(),r),c=new Set,u=[];for(const x of a.iterNodeCarets(r))if(bd(x))c.add(x.origin.getKey());else if(Mm(x)){const{origin:w}=x;Wt(w)&&!c.has(w.getKey())||u.push(w)}for(const x of u)x.remove();for(const x of a.getTextSlices()){if(!x)continue;const{origin:w}=x.caret,v=w.getTextContentSize(),C=Z8(ho(w,n)),k=w.getMode();if(Math.abs(x.distance)===v&&s==="removeEmptySlices"||k==="token"&&x.distance!==0)C.remove();else if(x.distance!==0){s="removeEmptySlices";let b=x.removeTextSlice();const j=x.caret.origin;if(k==="segmented"){const A=b.origin,F=Ca(A.getTextContent()).setStyle(A.getStyle()).setFormat(A.getFormat());C.replaceOrInsert(F),b=Fm(F,n,b.offset)}j.is(i[0].origin)&&(i[0]=b),j.is(o[0].origin)&&(o[0]=b.getFlipped())}}let d,f;for(const x of i)if(w3(x)){d=Wc(x);break}for(const x of o)if(w3(x)){f=Wc(x);break}const m=(function(x,w,v){if(!x||!w)return null;const C=x.getParentAtCaret(),k=w.getParentAtCaret();if(!C||!k)return null;const b=C.getParents().reverse();b.push(C);const j=k.getParents().reverse();j.push(k);const A=Math.min(b.length,j.length);let F;for(F=0;F<A&&b[F]===j[F];F++);const D=(L,W)=>{let re;for(let ie=F;ie<L.length;ie++){const xe=L[ie];if(nl(xe))return;!re&&W(xe)&&(re=xe)}return re},M=D(b,Uc),O=M&&D(j,(L=>v.has(L.getKey())&&Uc(L)));return M&&O?[M,O]:null})(d,f,c);if(m){const[x,w]=m;Xc(x,"previous").splice(0,w.getChildren()),w.remove()}const p=[d,f,...i,...o].find(w3);if(p)return Jre(_p(Wc(p),e.direction));hr(269,JSON.stringify(i.map((x=>x.origin.__key))))}function Wc(e){const t=(function(s){let a=s;for(;bd(a);){const i=X8(a);if(!bd(i))break;a=i}return a})(e.getLatest()),{direction:r}=t;if(Sr(t.origin))return Kf(t)?t:Fm(t.origin,r,r);const n=t.getAdjacentCaret();return Mm(n)&&Sr(n.origin)?Fm(n.origin,r,Gp(r)):t}function rB(e){return Kf(e)&&e.offset!==Xf(e.origin,e.direction)}function _p(e,t){return e.direction===t?e:e.getFlipped()}function nB(e,t){return e.direction===t?e:rh(_p(e.focus,t),_p(e.anchor,t))}function ene(e,t,r){let n=Xc(e,"next");for(let s=0;s<t;s++){const a=n.getAdjacentCaret();if(a===null)break;n=a}return _p(n,r)}const sB=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,tne=sB?S.useLayoutEffect:S.useEffect,P2={tag:ty};function aB({initialConfig:e,children:t}){const r=S.useMemo((()=>{const{theme:n,namespace:s,nodes:a,onError:i,editorState:o,html:c}=e,u=_te(null,n),d=Nre({editable:e.editable,html:c,namespace:s,nodes:a,onError:f=>i(f,d),theme:n});return(function(f,m){if(m!==null){if(m===void 0)f.update((()=>{const p=ia();if(p.isEmpty()){const x=Vs();p.append(x);const w=sB?document.activeElement:null;(_r()!==null||w!==null&&w===f.getRootElement())&&x.select()}}),P2);else if(m!==null)switch(typeof m){case"string":{const p=f.parseEditorState(m);f.setEditorState(p,P2);break}case"object":f.setEditorState(m,P2);break;case"function":f.update((()=>{ia().isEmpty()&&m(f)}),P2)}}})(d,o),[d,u]}),[]);return tne((()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)}),[]),l.jsx($p.Provider,{value:r,children:t})}const rne=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?S.useLayoutEffect:S.useEffect;function nne(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function sne(){return(function(e){const[t]=Nd(),r=S.useMemo((()=>e(t)),[t,e]),[n,s]=S.useState((()=>r.initialValueFn())),a=S.useRef(n);return rne((()=>{const{initialValueFn:i,subscribe:o}=r,c=i();return a.current!==c&&(a.current=c,s(c)),o((u=>{a.current=u,s(u)}))}),[r,e]),n})(nne)}function ane(){return ia().getTextContent()}function ine(e,t=!0){if(e)return!1;let r=ane();return t&&(r=r.trim()),r===""}function one(e){if(!ine(e,!1))return!1;const t=ia().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(as(s))return!1;if(Wt(s)){if(!O8(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let o=0;o<i;o++){const c=a[n];if(!Sr(c))return!1}}}return!0}function iB(e){return()=>one(e)}const m6=new Map;function oB(e){const t={};if(!e)return t;const r=e.split(";");for(const n of r)if(n!==""){const[s,a]=n.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function RA(e){let t=m6.get(e);return t===void 0&&(t=oB(e),m6.set(e,t)),t}function lB(e){const t=gv().getElementByKey(e.getKey());if(t===null)return null;const r=t.ownerDocument.defaultView;return r===null?null:r.getComputedStyle(t)}function cB(e){return lB(wi(e)?e:e.getParentOrThrow())}function LA(e){const t=cB(e);return t!==null&&t.direction==="rtl"}function uB(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!i0(t)&&r!==null){const[n,s]=r,a=e.isBackward(),i=n.getNode(),o=s.getNode(),c=t.is(i),u=t.is(o);if(c||u){const[d,f]=i6(e),m=i.is(o),p=t.is(a?o:i),x=t.is(a?i:o);let w,v=0;m?(v=d>f?f:d,w=d>f?d:f):p?(v=a?f:d,w=void 0):x&&(v=0,w=a?d:f),t.__text=t.__text.slice(v,w)}}return t}function lne(e){const t=e.getStyle(),r=oB(t);m6.set(t,r)}function cne(e,t){const r=e.getFormatType(),n=e.getIndent();r!==t.getFormatType()&&t.setFormat(r),n!==t.getIndent()&&t.setIndent(n)}function lp(e,t,r=cne){if(e===null)return;const n=e.getStartEndPoints(),s=new Map;let a=null;if(n){const[i,o]=n;a=s4(),a.anchor.set(i.key,i.offset,i.type),a.focus.set(o.key,o.offset,o.type);const c=b3(i.getNode(),Uc),u=b3(o.getNode(),Uc);Wt(c)&&s.set(c.getKey(),c),Wt(u)&&s.set(u.getKey(),u)}for(const i of e.getNodes())if(Wt(i)&&Uc(i))s.set(i.getKey(),i);else if(n===null){const o=b3(i,Uc);Wt(o)&&s.set(o.getKey(),o)}for(const[i,o]of s){const c=t();r(o,c),o.replace(c,!0),a&&(i===a.anchor.key&&a.anchor.set(c.getKey(),a.anchor.offset,a.anchor.type),i===a.focus.key&&a.focus.set(c.getKey(),a.focus.offset,a.focus.type))}a&&e.is(_r())&&mo(a)}function dB(e){const t=fB(e);return t!==null&&t.writingMode==="vertical-rl"}function fB(e){const t=e.anchor.getNode();return Wt(t)?lB(t):cB(t)}function BA(e,t){let r=dB(e)?!t:t;hB(e)&&(r=!r);const n=T0(e.focus,r?"previous":"next");if(rB(n))return!1;for(const s of J8(n)){if(bd(s))return!s.origin.isInline();if(!Wt(s.origin)){if(as(s.origin))return!0;break}}return!1}function une(e,t,r,n){e.modify(t?"extend":"move",r,n)}function hB(e){const t=fB(e);return t!==null&&t.direction==="rtl"}function $A(e,t,r){const n=hB(e);let s;s=dB(e)||n?!r:r,une(e,t,s,"character")}function b3(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function dne(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const mB=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,fne=mB&&"documentMode"in document?document.documentMode:null;!(!mB||!("InputEvent"in window)||fne)&&"getTargetRanges"in new window.InputEvent("input");function gB(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}function Km(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function yi(e,...t){const r=gB(...t);r.length>0&&e.classList.add(...r)}function Yf(e,...t){const r=gB(...t);r.length>0&&e.classList.remove(...r)}function hne(e){return e?e.getAdjacentCaret():null}function mne(e,t){let r=e;for(;r!=null;){if(r instanceof t)return r;r=r.getParent()}return null}function gne(e){const t=d4(e,(r=>Wt(r)&&!r.isInline()));return Wt(t)||dne(4,e.__key),t}const d4=(e,t)=>{let r=e;for(;r!==ia()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function rm(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function pB(e,t){const r=[],n=Array.from(e).reverse();for(let s=n.pop();s!==void 0;s=n.pop())if(t(s))r.push(s);else if(Wt(s))for(const a of pne(s))n.push(a);return r}function pne(e){return xne(Xc(e,"previous"))}function xne(e){return Q8({hasNext:Mm,initial:e.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function yne(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=n.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const o=i.payload;if(o&&o.functionId==="makeChanges"){const c=o.args;if(c){const[u,d,f,m,p,x]=c;e.update((()=>{const w=_r();if(lr(w)){const v=w.anchor;let C=v.getNode(),k=0,b=0;if(Sr(C)&&u>=0&&d>=0&&(k=u,b=u+d,w.setTextNodeRange(C,k,C,b)),k===b&&f===""||(w.insertRawText(f),C=v.getNode()),Sr(C)){k=m,b=m+p;const j=C.getTextContentSize();k=k>j?j:k,b=b>j?j:b,w.setTextNodeRange(C,k,C,b)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function vne(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let a=0;a<r.length;a++){const i=r[a];if(!yB.has(i.nodeName)){const o=vB(i,e,s,!1);o!==null&&(n=n.concat(o))}}return(function(a){for(const i of a)i.getNextSibling()instanceof F8&&i.insertAfter(Sd());for(const i of a){const o=i.getChildren();for(const c of o)i.insertBefore(c);i.remove()}})(s),n}function wne(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=ia().getChildren();for(let s=0;s<n.length;s++)xB(e,n[s],r,t);return r.innerHTML}function xB(e,t,r,n=null){let s=n===null||t.isSelected(n);const a=Wt(t)&&t.excludeFromCopy("html");let i=t;if(n!==null){let p=H8(t);p=Sr(p)&&n!==null?uB(n,p):p,i=p}const o=Wt(i)?i.getChildren():[],c=I8(e,i.getType());let u;u=c&&c.exportDOM!==void 0?c.exportDOM(e,i):i.exportDOM(e);const{element:d,after:f}=u;if(!d)return!1;const m=document.createDocumentFragment();for(let p=0;p<o.length;p++){const x=o[p],w=xB(e,x,m,n);!s&&Wt(t)&&w&&t.extractWithChild(x,n,"html")&&(s=!0)}if(s&&!a){if((qs(d)||f6(d))&&d.append(m),r.append(d),f){const p=f.call(i,d);p&&(f6(d)?d.replaceChildren(p):d.replaceWith(p))}}else r.append(m);return s}const yB=new Set(["STYLE","SCRIPT"]);function vB(e,t,r,n,s=new Map,a){let i=[];if(yB.has(e.nodeName))return i;let o=null;const c=(function(x,w){const{nodeName:v}=x,C=w._htmlConversions.get(v.toLowerCase());let k=null;if(C!==void 0)for(const b of C){const j=b(x);j!==null&&(k===null||(k.priority||0)<=(j.priority||0))&&(k=j)}return k!==null?k.conversion:null})(e,t),u=c?c(e):null;let d=null;if(u!==null){d=u.after;const x=u.node;if(o=Array.isArray(x)?x[x.length-1]:x,o!==null){for(const[,w]of s)if(o=w(o,a),!o)break;o&&i.push(...Array.isArray(x)?x:[o])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const f=e.childNodes;let m=[];const p=(o==null||!nl(o))&&(o!=null&&o6(o)||n);for(let x=0;x<f.length;x++)m.push(...vB(f[x],t,r,p,new Map(s),o));return d!=null&&(m=d(m)),Hw(e)&&(m=bne(e,m,p?()=>{const x=new F8;return r.push(x),x}:Vs)),o==null?m.length>0?i=i.concat(m):Hw(e)&&(function(x){return x.nextSibling==null||x.previousSibling==null?!1:h6(x.nextSibling)&&h6(x.previousSibling)})(e)&&(i=i.concat(Sd())):Wt(o)&&o.append(...m),i}function bne(e,t,r){const n=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const o=t[i];if(o6(o))n&&!o.getFormat()&&o.setFormat(n),s.push(o);else if(a.push(o),i===t.length-1||i<t.length-1&&o6(t[i+1])){const c=r();c.setFormat(n),c.append(...a),s.push(c),a=[]}}return s}function Gw(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function _ne(e,t=_r()){return t==null&&Gw(166),lr(t)&&t.isCollapsed()||t.getNodes().length===0?"":wne(e,t)}function Sne(e,t=_r()){return t==null&&Gw(166),lr(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(kne(e,t))}function zA(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return UA(r,Tne(o.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const o=new DOMParser().parseFromString((function(c){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(c):c})(s),"text/html");return UA(r,vne(r,o),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(lr(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let c=0;c<o.length;c++){const u=_r();if(lr(u)){const d=o[c];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([Up()]):u.insertText(d)}}}else t.insertRawText(i)}function UA(e,t,r){e.dispatchCommand(Xte,{nodes:t,selection:r})||(r.insertNodes(t),(function(n){if(lr(n)&&n.isCollapsed()){const s=n.anchor;let a=null;const i=T0(s,"previous");if(i)if(Kf(i))a=i.origin;else{const o=rh(i,Xc(ia(),"next").getFlipped());for(const c of o){if(Sr(c.origin)){a=c.origin;break}if(Wt(c.origin)&&!c.origin.isInline())break}}if(a&&Sr(a)){const o=a.getFormat(),c=a.getStyle();n.format===o&&n.style===c||(n.format=o,n.style=c,n.dirty=!0)}}})(r))}function wB(e,t,r,n=[]){let s=t===null||r.isSelected(t);const a=Wt(r)&&r.excludeFromCopy("html");let i=r;if(t!==null){let u=H8(r);u=Sr(u)&&t!==null?uB(t,u):u,i=u}const o=Wt(i)?i.getChildren():[],c=(function(u){const d=u.exportJSON(),f=u.constructor;if(d.type!==f.getType()&&Gw(58,f.name),Wt(u)){const m=d.children;Array.isArray(m)||Gw(59,f.name)}return d})(i);if(Sr(i)){const u=i.__text;u.length>0?c.text=u:s=!1}for(let u=0;u<o.length;u++){const d=o[u],f=wB(e,t,d,c.children);!s&&Wt(r)&&f&&r.extractWithChild(d,t,"clone")&&(s=!0)}if(s&&!a)n.push(c);else if(Array.isArray(c.children))for(let u=0;u<c.children.length;u++){const d=c.children[u];n.push(d)}return s}function kne(e,t){const r=[],n=ia().getChildren();for(let s=0;s<n.length;s++)wB(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function Tne(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=wre(n);Sr(s)&&lne(s),t.push(s)}return t}let Fg=null;async function WA(e,t,r){if(Fg!==null)return!1;if(t!==null)return new Promise(((u,d)=>{e.update((()=>{u(HA(e,t,r))}))}));const n=e.getRootElement(),s=e._window||window,a=window.document,i=Du(s);if(n===null||i===null)return!1;const o=a.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(a.createTextNode("#")),n.append(o);const c=new Range;return c.setStart(o,0),c.setEnd(o,1),i.removeAllRanges(),i.addRange(c),new Promise(((u,d)=>{const f=e.registerCommand(t4,(m=>(rm(m,ClipboardEvent)&&(f(),Fg!==null&&(window.clearTimeout(Fg),Fg=null),u(HA(e,m,r))),!0)),Cre);Fg=window.setTimeout((()=>{f(),Fg=null,u(!1)}),50),a.execCommand("copy"),o.remove()}))}function HA(e,t,r){if(r===void 0){const s=Du(e._window);if(!s)return!1;const a=s.anchorNode,i=s.focusNode;if(a!==null&&i!==null&&!hv(e,a,i))return!1;const o=_r();if(o===null)return!1;r=Nne(o)}t.preventDefault();const n=t.clipboardData;return n!==null&&(Ene(n,r),!0)}const Cne=[["text/html",_ne],["application/x-lexical-editor",Sne]];function Nne(e=_r()){const t={"text/plain":e?e.getTextContent():""};if(e){const r=gv();for(const[n,s]of Cne){const a=s(r,e);a!==null&&(t[n]=a)}}return t}function Ene(e,t){for(const r in t){const n=t[r];n!==void 0&&e.setData(r,n)}}function GA(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const Vp=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Ane=Vp&&"documentMode"in document?document.documentMode:null,jne=!(!Vp||!("InputEvent"in window)||Ane)&&"getTargetRanges"in new window.InputEvent("input"),Pne=Vp&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),VA=Vp&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Mne=Vp&&/^(?=.*Chrome).*/i.test(navigator.userAgent),Fne=Vp&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!Mne,qA=tn("DRAG_DROP_PASTE_FILE");let pv=class bB extends $o{static getType(){return"quote"}static clone(t){return new bB(t.__key)}createDOM(t){const r=document.createElement("blockquote");return yi(r,t.theme.quote),r}updateDOM(t,r){return!1}static importDOM(){return{blockquote:t=>({conversion:One,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(qs(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return xv().updateFromJSON(t)}insertNewAfter(t,r){const n=Vs(),s=this.getDirection();return n.setDirection(s),this.insertAfter(n,r),n}collapseAtStart(){const t=Vs();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function xv(){return il(new pv)}function KA(e){return e instanceof pv}let yv=class _B extends $o{static getType(){return"heading"}static clone(t){return new _B(t.__tag,t.__key)}constructor(t,r){super(r),this.__tag=t}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,n=document.createElement(r),s=t.theme.heading;if(s!==void 0){const a=s[r];yi(n,a)}return n}updateDOM(t,r,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:Og,priority:0}),h2:t=>({conversion:Og,priority:0}),h3:t=>({conversion:Og,priority:0}),h4:t=>({conversion:Og,priority:0}),h5:t=>({conversion:Og,priority:0}),h6:t=>({conversion:Og,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&XA(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>XA(t)?{conversion:r=>({node:Wf("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(qs(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return Wf(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const n=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&n===s.getTextContentSize()||!t?Vs():Wf(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,r),n===0&&!this.isEmpty()&&t){const o=Vs();o.select(),this.replace(o,!0)}return a}collapseAtStart(){const t=this.isEmpty()?Vs():Wf(this.getTag());return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}extractWithChild(){return!0}};function XA(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function Og(e){const t=e.nodeName.toLowerCase();let r=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(r=Wf(t),e.style!==null&&(G8(e,r),r.setFormat(e.style.textAlign))),{node:r}}function One(e){const t=xv();return e.style!==null&&(t.setFormat(e.style.textAlign),G8(e,t)),{node:t}}function Wf(e="h1"){return il(new yv(e))}function Dne(e){return e instanceof yv}function M2(e){let t=null;if(rm(e,DragEvent)?t=e.dataTransfer:rm(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function YA(e){const t=_r();if(!lr(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const a=n[s],i=a.getKey();if(r.has(i))continue;const o=d4(a,(u=>Wt(u)&&!u.isInline()));if(o===null)continue;const c=o.getKey();o.canIndent()&&!r.has(c)&&(r.add(c),e(o))}return r.size>0}function JA(e){const t=th(e);return as(t)}function _3(e){for(const t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function Ine(e){return Km(e.registerCommand(_8,(t=>{const r=_r();return!!Eo(r)&&(r.clear(),!0)}),Xn),e.registerCommand(dm,(t=>{const r=_r();return lr(r)?(r.deleteCharacter(t),!0):!!Eo(r)&&(r.deleteNodes(),!0)}),Xn),e.registerCommand(Cy,(t=>{const r=_r();return!!lr(r)&&(r.deleteWord(t),!0)}),Xn),e.registerCommand(Ny,(t=>{const r=_r();return!!lr(r)&&(r.deleteLine(t),!0)}),Xn),e.registerCommand(ap,(t=>{const r=_r();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)zA(n,r,e);else if(lr(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0}),Xn),e.registerCommand(ZS,(()=>{const t=_r();return!!lr(t)&&(t.removeText(),!0)}),Xn),e.registerCommand(Ro,(t=>{const r=_r();return!!lr(r)&&(r.formatText(t),!0)}),Xn),e.registerCommand(yL,(t=>{const r=_r();if(!lr(r)&&!Eo(r))return!1;const n=r.getNodes();for(const s of n){const a=d4(s,(i=>Wt(i)&&!i.isInline()));a!==null&&a.setFormat(t)}return!0}),Xn),e.registerCommand(sp,(t=>{const r=_r();return!!lr(r)&&(r.insertLineBreak(t),!0)}),Xn),e.registerCommand(Ty,(()=>{const t=_r();return!!lr(t)&&(t.insertParagraph(),!0)}),Xn),e.registerCommand(Zte,(()=>(xre([Up()]),!0)),Xn),e.registerCommand(ere,(()=>YA((t=>{const r=t.getIndent();t.setIndent(r+1)}))),Xn),e.registerCommand(eA,(()=>YA((t=>{const r=t.getIndent();r>0&&t.setIndent(Math.max(0,r-1))}))),Xn),e.registerCommand(uL,(t=>{const r=_r();if(Eo(r)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(lr(r)){const n=c6(r.focus,!0);if(!t.shiftKey&&as(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),Xn),e.registerCommand(dL,(t=>{const r=_r();if(Eo(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(lr(r)){if((function(s){const a=s.focus;return a.key==="root"&&a.offset===ia().getChildrenSize()})(r))return t.preventDefault(),!0;const n=c6(r.focus,!1);if(!t.shiftKey&&as(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),Xn),e.registerCommand(cL,(t=>{const r=_r();if(Eo(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),LA(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!lr(r))return!1;if(BA(r,!0)){const n=t.shiftKey;return t.preventDefault(),$A(r,n,!0),!0}return!1}),Xn),e.registerCommand(lL,(t=>{const r=_r();if(Eo(r)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),LA(s[0])?s[0].selectPrevious():s[0].selectNext(0,0),!0}if(!lr(r))return!1;const n=t.shiftKey;return!!BA(r,!1)&&(t.preventDefault(),$A(r,n,!1),!0)}),Xn),e.registerCommand(hL,(t=>{if(JA(t.target))return!1;const r=_r();if(lr(r)){if((function(n){if(!n.isCollapsed())return!1;const{anchor:s}=n;if(s.offset!==0)return!1;const a=s.getNode();if(wi(a))return!1;const i=gne(a);return i.getIndent()>0&&(i.is(a)||a.is(i.getFirstDescendant()))})(r))return t.preventDefault(),e.dispatchCommand(eA,void 0);if(VA&&navigator.language==="ko-KR")return!1}else if(!Eo(r))return!1;return t.preventDefault(),e.dispatchCommand(dm,!0)}),Xn),e.registerCommand(gL,(t=>{if(JA(t.target))return!1;const r=_r();return!(!lr(r)&&!Eo(r))&&(t.preventDefault(),e.dispatchCommand(dm,!1))}),Xn),e.registerCommand(Rw,(t=>{const r=_r();if(!lr(r))return!1;if(_3(r),t!==null){if((VA||Pne||Fne)&&jne)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(sp,!1)}return e.dispatchCommand(Ty,void 0)}),Xn),e.registerCommand(mL,(()=>{const t=_r();return!!lr(t)&&(e.blur(),!0)}),Xn),e.registerCommand(xL,(t=>{const[,r]=M2(t);if(r.length>0){const s=GA(t.clientX,t.clientY);if(s!==null){const{offset:a,node:i}=s,o=th(i);if(o!==null){const c=s4();if(Sr(o))c.anchor.set(o.getKey(),a,"text"),c.focus.set(o.getKey(),a,"text");else{const d=o.getParentOrThrow().getKey(),f=o.getIndexWithinParent()+1;c.anchor.set(d,f,"element"),c.focus.set(d,f,"element")}const u=Mw(c);mo(u)}e.dispatchCommand(qA,r)}return t.preventDefault(),!0}const n=_r();return!!lr(n)}),Xn),e.registerCommand(vL,(t=>{const[r]=M2(t),n=_r();return!(r&&!lr(n))}),Xn),e.registerCommand(wL,(t=>{const[r]=M2(t),n=_r();if(r&&!lr(n))return!1;const s=GA(t.clientX,t.clientY);if(s!==null){const a=th(s.node);as(a)&&t.preventDefault()}return!0}),Xn),e.registerCommand(e6,(()=>(Fre(),!0)),Xn),e.registerCommand(t4,(t=>(WA(e,rm(t,ClipboardEvent)?t:null),!0)),Xn),e.registerCommand(C8,(t=>((async function(r,n){await WA(n,rm(r,ClipboardEvent)?r:null),n.update((()=>{const s=_r();lr(s)?s.removeText():Eo(s)&&s.getNodes().forEach((a=>a.remove()))}))})(t,e),!0)),Xn),e.registerCommand(S8,(t=>{const[,r,n]=M2(t);return r.length>0&&!n?(e.dispatchCommand(qA,r),!0):Hp(t.target)&&R8(t.target)?!1:_r()!==null&&((function(s,a){s.preventDefault(),a.update((()=>{const i=_r(),o=rm(s,InputEvent)||rm(s,KeyboardEvent)?null:s.clipboardData;o!=null&&i!==null&&zA(o,i,a)}),{tag:_re})})(t,e),!0)}),Xn),e.registerCommand(fL,(t=>{const r=_r();return lr(r)&&_3(r),!1}),Xn),e.registerCommand(pL,(t=>{const r=_r();return lr(r)&&_3(r),!1}),Xn))}const g6=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?S.useLayoutEffect:S.useEffect;function QA(e){return e.getEditorState().read(iB(e.isComposing()))}function SB({contentEditable:e,placeholder:t=null,ErrorBoundary:r}){const[n]=Nd(),s=(function(a,i){const[o,c]=S.useState((()=>a.getDecorators()));return g6((()=>a.registerDecoratorListener((u=>{yS.flushSync((()=>{c(u)}))}))),[a]),S.useEffect((()=>{c(a.getDecorators())}),[a]),S.useMemo((()=>{const u=[],d=Object.keys(o);for(let f=0;f<d.length;f++){const m=d[f],p=l.jsx(i,{onError:w=>a._onError(w),children:l.jsx(S.Suspense,{fallback:null,children:o[m]})}),x=a.getElementByKey(m);x!==null&&u.push(yS.createPortal(p,x,m))}return u}),[i,o,a])})(n,r);return(function(a){g6((()=>Km(Ine(a),yne(a))),[a])})(n),l.jsxs(l.Fragment,{children:[e,l.jsx(Rne,{content:t}),s]})}function Rne({content:e}){const[t]=Nd(),r=(function(s){const[a,i]=S.useState((()=>QA(s)));return g6((()=>{function o(){const c=QA(s);i(c)}return o(),Km(s.registerUpdateListener((()=>{o()})),s.registerEditableListener((()=>{o()})))}),[s]),a})(t),n=sne();return r?typeof e=="function"?e(n):e:null}const kB=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?S.useLayoutEffect:S.useEffect;function Lne({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:n,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:o,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:f,ariaRequired:m,autoCapitalize:p,className:x,id:w,role:v="textbox",spellCheck:C=!0,style:k,tabIndex:b,"data-testid":j,...A},F){const[D,M]=S.useState(e.isEditable()),O=S.useCallback((W=>{W&&W.ownerDocument&&W.ownerDocument.defaultView?e.setRootElement(W):e.setRootElement(null)}),[e]),L=S.useMemo((()=>(function(...W){return re=>{W.forEach((ie=>{typeof ie=="function"?ie(re):ie!=null&&(ie.current=re)}))}})(F,O)),[O,F]);return kB((()=>(M(e.isEditable()),e.registerEditableListener((W=>{M(W)})))),[e]),l.jsx("div",{"aria-activedescendant":D?t:void 0,"aria-autocomplete":D?r:"none","aria-controls":D?n:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":D&&v==="combobox"?!!i:void 0,...o!=null?{"aria-invalid":o}:{},"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":D?f:void 0,"aria-readonly":!D||void 0,"aria-required":m,autoCapitalize:p,className:x,contentEditable:D,"data-testid":j,id:w,ref:L,role:v,spellCheck:C,style:k,tabIndex:b,...A})}const Bne=S.forwardRef(Lne);function ZA(e){return e.getEditorState().read(iB(e.isComposing()))}const TB=S.forwardRef($ne);function $ne(e,t){const{placeholder:r,...n}=e,[s]=Nd();return l.jsxs(l.Fragment,{children:[l.jsx(Bne,{editor:s,...n,ref:t}),r!=null&&l.jsx(zne,{editor:s,content:r})]})}function zne({content:e,editor:t}){const r=(function(i){const[o,c]=S.useState((()=>ZA(i)));return kB((()=>{function u(){const d=ZA(i);c(d)}return u(),Km(i.registerUpdateListener((()=>{u()})),i.registerEditableListener((()=>{u()})))}),[i]),o})(t),[n,s]=S.useState(t.isEditable());if(S.useLayoutEffect((()=>(s(t.isEditable()),t.registerEditableListener((i=>{s(i)})))),[t]),!r)return null;let a=null;return typeof e=="function"?a=e(n):e!==null&&(a=e),a===null?null:l.jsx("div",{"aria-hidden":!0,children:a})}const F2=0,p6=1,x6=2,Tu=0,Une=1,ej=2,Wne=3,Hne=4;function Gne(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return Tu;const a=t._selection,i=e._selection;if(s)return Une;if(!(lr(a)&&lr(i)&&i.isCollapsed()&&a.isCollapsed()))return Tu;const o=(function(C,k,b){const j=C._nodeMap,A=[];for(const F of k){const D=j.get(F);D!==void 0&&A.push(D)}for(const[F,D]of b){if(!D)continue;const M=j.get(F);M===void 0||wi(M)||A.push(M)}return A})(t,r,n);if(o.length===0)return Tu;if(o.length>1){const C=t._nodeMap,k=C.get(a.anchor.key),b=C.get(i.anchor.key);return k&&b&&!e._nodeMap.has(k.__key)&&Sr(k)&&k.__text.length===1&&a.anchor.offset===1?ej:Tu}const c=o[0],u=e._nodeMap.get(c.__key);if(!Sr(u)||!Sr(c)||u.__mode!==c.__mode)return Tu;const d=u.__text,f=c.__text;if(d===f)return Tu;const m=a.anchor,p=i.anchor;if(m.key!==p.key||m.type!=="text")return Tu;const x=m.offset,w=p.offset,v=f.length-d.length;return v===1&&w===x-1?ej:v===-1&&w===x+1?Wne:v===-1&&w===x?Hne:Tu}function Vne(e,t){let r=Date.now(),n=Tu;return(s,a,i,o,c,u)=>{const d=Date.now();if(u.has(zw))return n=Tu,r=d,x6;const f=Gne(s,a,o,c,e.isComposing()),m=(()=>{const p=i===null||i.editor===e,x=u.has(bre);if(!x&&p&&u.has(ty))return F2;if(s===null)return p6;const w=a._selection;return o.size>0||c.size>0?x===!1&&f!==Tu&&f===n&&d<r+t&&p||o.size===1&&(function(v,C,k){const b=C._nodeMap.get(v),j=k._nodeMap.get(v),A=C._selection,F=k._selection;return!(lr(A)&&lr(F)&&A.anchor.type==="element"&&A.focus.type==="element"&&F.anchor.type==="text"&&F.focus.type==="text"||!Sr(b)||!Sr(j)||b.__parent!==j.__parent)&&JSON.stringify(C.read((()=>b.exportJSON())))===JSON.stringify(k.read((()=>j.exportJSON())))})(Array.from(o)[0],s,a)?F2:p6:w!==null?F2:x6})();return r=d,n=f,m}}function tj(e){e.undoStack=[],e.redoStack=[],e.current=null}function qne(e,t,r){const n=Vne(e,r);return Km(e.registerCommand(k8,(()=>((function(a,i){const o=i.redoStack,c=i.undoStack;if(c.length!==0){const u=i.current,d=c.pop();u!==null&&(o.push(u),a.dispatchCommand(k2,!0)),c.length===0&&a.dispatchCommand(T2,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:zw})}})(e,t),!0)),Xn),e.registerCommand(T8,(()=>((function(a,i){const o=i.redoStack,c=i.undoStack;if(o.length!==0){const u=i.current;u!==null&&(c.push(u),a.dispatchCommand(T2,!0));const d=o.pop();o.length===0&&a.dispatchCommand(k2,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:zw})}})(e,t),!0)),Xn),e.registerCommand(rre,(()=>(tj(t),!1)),Xn),e.registerCommand(nre,(()=>(tj(t),e.dispatchCommand(k2,!1),e.dispatchCommand(T2,!1),!0)),Xn),e.registerUpdateListener((({editorState:a,prevEditorState:i,dirtyLeaves:o,dirtyElements:c,tags:u})=>{const d=t.current,f=t.redoStack,m=t.undoStack,p=d===null?null:d.editorState;if(d!==null&&a===p)return;const x=n(i,a,d,o,c,u);if(x===p6)f.length!==0&&(t.redoStack=[],e.dispatchCommand(k2,!1)),d!==null&&(m.push({...d}),e.dispatchCommand(T2,!0));else if(x===x6)return;t.current={editor:e,editorState:a}})))}function Kne(){return{current:null,redoStack:[],undoStack:[]}}function CB({delay:e,externalHistoryState:t}){const[r]=Nd();return(function(n,s,a=1e3){const i=S.useMemo((()=>s||Kne()),[s]);S.useEffect((()=>qne(n,i,a)),[a,n,i])})(r,t,e),null}function NB({defaultSelection:e}){const[t]=Nd();return S.useEffect((()=>{t.focus((()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})}),{defaultSelection:e})}),[e,t]),null}function y6(e,t){return y6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},y6(e,t)}var rj={error:null},Xne=(function(e){var t,r;function n(){for(var a,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(a=e.call.apply(e,[this].concat(o))||this).state=rj,a.resetErrorBoundary=function(){for(var u,d=arguments.length,f=new Array(d),m=0;m<d;m++)f[m]=arguments[m];a.props.onReset==null||(u=a.props).onReset.apply(u,f),a.reset()},a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,y6(t,r),n.getDerivedStateFromError=function(a){return{error:a}};var s=n.prototype;return s.reset=function(){this.setState(rj)},s.componentDidCatch=function(a,i){var o,c;(o=(c=this.props).onError)==null||o.call(c,a,i)},s.componentDidUpdate=function(a,i){var o,c,u,d,f=this.state.error,m=this.props.resetKeys;f!==null&&i.error!==null&&((u=a.resetKeys)===void 0&&(u=[]),(d=m)===void 0&&(d=[]),u.length!==d.length||u.some((function(p,x){return!Object.is(p,d[x])})))&&((o=(c=this.props).onResetKeysChange)==null||o.call(c,a.resetKeys,m),this.reset())},s.render=function(){var a=this.state.error,i=this.props,o=i.fallbackRender,c=i.FallbackComponent,u=i.fallback;if(a!==null){var d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(S.isValidElement(u))return u;if(typeof o=="function")return o(d);if(c)return S.createElement(c,d);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n})(S.Component);function EB({children:e,onError:t}){return l.jsx(Xne,{fallback:l.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}const e7=/^(\d+(?:\.\d+)?)px$/,cp={BOTH:3,NO_STATUS:0,ROW:1};class qp extends $o{static getType(){return"tablecell"}static clone(t){return new qp(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:nj,priority:0}),th:t=>({conversion:nj,priority:0})}}static importJSON(t){return AB().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=cp.NO_STATUS,r=1,n,s){super(s),this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),v6(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),yi(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(qs(r.element)){const n=r.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...v6(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=cp.BOTH){const n=this.getWritable();return n.__headerState=t&r|n.__headerState&~r,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==cp.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function v6(e){return e==="middle"||e==="bottom"}function nj(e){const t=e,r=e.nodeName.toLowerCase();let n;e7.test(t.style.width)&&(n=parseFloat(t.style.width));const s=AB(r==="th"?cp.ROW:cp.NO_STATUS,t.colSpan,n);s.__rowSpan=t.rowSpan;const a=t.style.backgroundColor;a!==""&&(s.__backgroundColor=a);const i=t.style.verticalAlign;v6(i)&&(s.__verticalAlign=i);const o=t.style,c=(o&&o.textDecoration||"").split(" "),u=o.fontWeight==="700"||o.fontWeight==="bold",d=c.includes("line-through"),f=o.fontStyle==="italic",m=c.includes("underline");return{after:p=>{const x=[];let w=null;const v=()=>{if(w){const C=w.getFirstChild();p0(C)&&w.getChildrenSize()===1&&C.remove()}};for(const C of p)Ire(C)||Sr(C)||p0(C)?(Sr(C)&&(u&&C.toggleFormat("bold"),d&&C.toggleFormat("strikethrough"),f&&C.toggleFormat("italic"),m&&C.toggleFormat("underline")),w?w.append(C):(w=Vs().append(C),x.push(w))):(x.push(C),v(),w=null);return v(),x.length===0&&x.push(Vs()),x},node:s}}function AB(e=cp.NO_STATUS,t=1,r){return il(new qp(e,t,r))}function Ay(e){return e instanceof qp}function w6(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class Kp extends $o{static getType(){return"tablerow"}static clone(t){return new Kp(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:Yne,priority:0})}}static importJSON(t){return jB().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,r){super(r),this.__height=t}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),yi(r,t.theme.tableRow),r}extractWithChild(t,r,n){return n==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function Yne(e){const t=e;let r;return e7.test(t.style.height)&&(r=parseFloat(t.style.height)),{after:n=>pB(n,Ay),node:jB(r)}}function jB(e){return il(new Kp(e))}function PB(e){return e instanceof Kp}const MB=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Jne=MB&&"documentMode"in document?document.documentMode:null;MB&&"InputEvent"in window&&!Jne&&new window.InputEvent("input");function Qne(e,t,r){const n=[];let s=null,a=null;function i(c){let u=n[c];return u===void 0&&(n[c]=u=[]),u}const o=e.getChildren();for(let c=0;c<o.length;c++){const u=o[c];PB(u)||w6(209);const d=i(c);for(let f=u.getFirstChild(),m=0;f!=null;f=f.getNextSibling()){for(Ay(f)||w6(147);d[m]!==void 0;)m++;const p={cell:f,startColumn:m,startRow:c},{__rowSpan:x,__colSpan:w}=f;for(let v=0;v<x&&!(c+v>=o.length);v++){const C=i(c+v);for(let k=0;k<w;k++)C[m+k]=p}}}return[n,s,a]}function Sx(e){return qs(e)&&e.nodeName==="TABLE"}function Zne(e,t){for(let r=t,n=null;r!==null;r=r.getParent()){if(e.is(r))return n;Ay(r)&&(n=r)}return null}function ese(e,t,r){return Zne(e,th(t,r))}function sj(e,t,r){if(!t.theme.tableAlignment)return;const n=[],s=[];for(const a of["center","right"]){const i=t.theme.tableAlignment[a];i&&(a===r?s:n).push(i)}Yf(e,...n),yi(e,...s)}const tse=new WeakSet;function aj(e=gv()){return tse.has(e)}class vv extends $o{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new vv(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:rse,priority:1})}}static importJSON(t){return FB().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,n){return n==="html"}getDOMSlot(t){const r=Sx(t)?t:t.querySelector("table");return Sx(r)||w6(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const s=document.createElement("colgroup");if(n.appendChild(s),zre(s),yi(n,t.theme.table),this.updateTableElement(null,n,t),aj(r)){const a=document.createElement("div"),i=t.theme.tableScrollableWrapper;return i?yi(a,i):a.style.cssText="overflow-x: auto;",a.appendChild(n),this.updateTableWrapper(null,a,n,t),a}return n}updateTableWrapper(t,r,n,s){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&(function(a,i,o,c){c>0?(yi(a,o.theme.tableFrozenColumn),i.setAttribute("data-lexical-frozen-column","true")):(Yf(a,o.theme.tableFrozenColumn),i.removeAttribute("data-lexical-frozen-column"))})(r,n,s,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&(function(a,i,o,c){c>0?(yi(a,o.theme.tableFrozenRow),i.setAttribute("data-lexical-frozen-row","true")):(Yf(a,o.theme.tableFrozenRow),i.removeAttribute("data-lexical-frozen-row"))})(r,n,s,this.__frozenRowCount)}updateTableElement(t,r,n){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&(function(s,a,i){i?(yi(s,a.theme.tableRowStriping),s.setAttribute("data-lexical-row-striping","true")):(Yf(s,a.theme.tableRowStriping),s.removeAttribute("data-lexical-row-striping"))})(r,n,this.__rowStriping),(function(s,a,i,o){const c=s.querySelector("colgroup");if(!c)return;const u=[];for(let d=0;d<i;d++){const f=document.createElement("col"),m=o&&o[d];m&&(f.style.width=`${m}px`),u.push(f)}c.replaceChildren(...u)})(r,0,this.getColumnCount(),this.getColWidths()),sj(r,n,this.getFormatType())}updateDOM(t,r,n){const s=this.getDOMSlot(r).element;return r===s===aj()||(qs(a=r)&&a.nodeName==="DIV"&&this.updateTableWrapper(t,r,s,n),this.updateTableElement(t,s,n),!1);var a}exportDOM(t){const r=super.exportDOM(t),{element:n}=r;return{after:s=>{if(r.after&&(s=r.after(s)),!Sx(s)&&qs(s)&&(s=s.querySelector("table")),!Sx(s))return null;sj(s,t._config,this.getFormatType());const[a]=Qne(this),i=new Map;for(const d of a)for(const f of d){const m=f.cell.getKey();i.has(m)||i.set(m,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const o=new Set;for(const d of s.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=d.getAttribute("data-temporary-table-cell-lexical-key");if(f){const m=i.get(f);if(d.removeAttribute("data-temporary-table-cell-lexical-key"),m){i.delete(f);for(let p=0;p<m.colSpan;p++)o.add(p+m.startColumn)}}}const c=s.querySelector(":scope > colgroup");if(c){const d=Array.from(s.querySelectorAll(":scope > colgroup > col")).filter(((f,m)=>o.has(m)));c.replaceChildren(...d)}const u=s.querySelectorAll(":scope > tr");if(u.length>0){const d=document.createElement("tbody");for(const f of u)d.appendChild(f);s.append(d)}return s},element:!Sx(n)&&qs(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:n,domRows:s}=r;for(let a=0;a<n;a++){const i=s[a];if(i!=null)for(let o=0;o<i.length;o++){const c=i[o];if(c==null)continue;const{elem:u}=c,d=ese(this,u);if(d!==null&&t.is(d))return{x:o,y:a}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,n){const{domRows:s}=n,a=s[r];if(a==null)return null;const i=a[t<a.length?t:a.length-1];return i??null}getDOMCellFromCordsOrThrow(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(!s)throw new Error("Cell not found at cords.");return s}getCellNodeFromCords(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(s==null)return null;const a=th(s.elem);return Ay(a)?a:null}getCellNodeFromCordsOrThrow(t,r,n){const s=this.getCellNodeFromCords(t,r,n);if(!s)throw new Error("Node at cords not TableCellNode.");return s}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach((n=>{Ay(n)&&(r+=n.getColSpan())})),r}}function rse(e){const t=FB();e.hasAttribute("data-lexical-row-striping")&&t.setRowStriping(!0),e.hasAttribute("data-lexical-frozen-column")&&t.setFrozenColumns(1),e.hasAttribute("data-lexical-frozen-row")&&t.setFrozenRows(1);const r=e.querySelector(":scope > colgroup");if(r){let n=[];for(const s of r.querySelectorAll(":scope > col")){let a=s.style.width||"";if(!e7.test(a)&&(a=s.getAttribute("width")||"",!/^\d+$/.test(a))){n=void 0;break}n.push(parseFloat(a))}n&&t.setColWidths(n)}return{after:n=>pB(n,PB),node:t}}function FB(){return il(new vv)}function Hf(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function b6(e){let t=1,r=e.getParent();for(;r!=null;){if(us(r)){const n=r.getParent();if(_n(n)){t++,r=n.getParent();continue}Hf(40)}return t}return t}function _6(e){let t=e.getParent();_n(t)||Hf(40);let r=t;for(;r!==null;)r=r.getParent(),_n(r)&&(t=r);return t}function OB(e){let t=[];const r=e.getChildren().filter(us);for(let n=0;n<r.length;n++){const s=r[n],a=s.getFirstChild();_n(a)?t=t.concat(OB(a)):t.push(s)}return t}function gd(e){return us(e)&&_n(e.getFirstChild())}function ij(e){return Yl().append(e)}function DB(e,t){return us(e)&&(t.length===0||t.length===1&&e.is(t[0])&&e.getChildrenSize()===0)}function oj(e){const t=_r();if(t!==null){let r=t.getNodes();if(lr(t)){const s=t.getStartEndPoints();s===null&&Hf(143);const[a]=s,i=a.getNode(),o=i.getParent();if(nl(i)){const c=i.getFirstChild();if(c)r=c.selectStart().getNodes();else{const u=Vs();i.append(u),r=u.select().getNodes()}}else if(DB(i,r)){const c=kl(e);if(nl(o)){i.replace(c);const u=Yl();Wt(i)&&(u.setFormat(i.getFormatType()),u.setIndent(i.getIndent())),c.append(u)}else if(us(i)){const u=i.getParentOrThrow();Dm(c,u.getChildren()),u.replace(c)}return}}const n=new Set;for(let s=0;s<r.length;s++){const a=r[s];if(Wt(a)&&a.isEmpty()&&!us(a)&&!n.has(a.getKey())){lj(a,e);continue}let i=HL(a)?a.getParent():us(a)&&a.isEmpty()?a:null;for(;i!=null;){const o=i.getKey();if(_n(i)){if(!n.has(o)){const c=kl(e);Dm(c,i.getChildren()),i.replace(c),n.add(o)}break}{const c=i.getParent();if(nl(c)&&!n.has(o)){n.add(o),lj(i,e);break}i=c}}}}}function Dm(e,t){e.splice(e.getChildrenSize(),0,t)}function lj(e,t){if(_n(e))return e;const r=e.getPreviousSibling(),n=e.getNextSibling(),s=Yl();let a;if(Dm(s,e.getChildren()),_n(r)&&t===r.getListType())r.append(s),_n(n)&&t===n.getListType()&&(Dm(r,n.getChildren()),n.remove()),a=r;else if(_n(n)&&t===n.getListType())n.getFirstChildOrThrow().insertBefore(s),a=n;else{const i=kl(t);i.append(s),e.replace(i),a=i}return s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),e.remove(),a}function t7(e,t){const r=e.getLastChild(),n=t.getFirstChild();r&&n&&gd(r)&&gd(n)&&(t7(r.getFirstChild(),n.getFirstChild()),n.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function nse(){const e=_r();if(lr(e)){const t=new Set,r=e.getNodes(),n=e.anchor.getNode();if(DB(n,r))t.add(_6(n));else for(let s=0;s<r.length;s++){const a=r[s];if(HL(a)){const i=mne(a,M0);i!=null&&t.add(_6(i))}}for(const s of t){let a=s;const i=OB(s);for(const o of i){const c=Vs().setTextStyle(e.style).setTextFormat(e.format);Dm(c,o.getChildren()),a.insertAfter(c),a=c,o.__key===e.anchor.key&&Om(e.anchor,Wc(Xc(c,"next"))),o.__key===e.focus.key&&Om(e.focus,Wc(Xc(c,"next"))),o.remove()}s.remove()}}}function IB(e){const t=e.getListType()!=="check";let r=e.getStart();for(const n of e.getChildren())us(n)&&(n.getValue()!==r&&n.setValue(r),t&&n.getLatest().__checked!=null&&n.setChecked(void 0),_n(n.getFirstChild())||r++)}function sse(e){const t=new Set;if(gd(e)||t.has(e.getKey()))return;const r=e.getParent(),n=e.getNextSibling(),s=e.getPreviousSibling();if(gd(n)&&gd(s)){const a=s.getFirstChild();if(_n(a)){a.append(e);const i=n.getFirstChild();_n(i)&&(Dm(a,i.getChildren()),n.remove(),t.add(n.getKey()))}}else if(gd(n)){const a=n.getFirstChild();if(_n(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(gd(s)){const a=s.getFirstChild();_n(a)&&a.append(e)}else if(_n(r)){const a=Yl().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=kl(r.getListType()).setTextFormat(r.getTextFormat()).setTextStyle(r.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):n?n.insertBefore(a):r.append(a)}}function ase(e){if(gd(e))return;const t=e.getParent(),r=t?t.getParent():void 0;if(_n(r?r.getParent():void 0)&&us(r)&&_n(t)){const n=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(n))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),t.isEmpty()&&r.remove();else{const a=t.getListType(),i=Yl(),o=kl(a);i.append(o),e.getPreviousSiblings().forEach((d=>o.append(d)));const c=Yl(),u=kl(a);c.append(u),Dm(u,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(c),r.replace(e)}}}function ise(){const e=_r();if(!lr(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!us(t)||t.getChildrenSize()!==0)return!1;const r=_6(t),n=t.getParent();_n(n)||Hf(40);const s=n.getParent();let a;if(nl(s))a=Vs(),r.insertAfter(a);else{if(!us(s))return!1;a=Yl(),s.insertAfter(a)}a.setTextStyle(e.style).setTextFormat(e.format).select();const i=t.getNextSiblings();if(i.length>0){const o=kl(n.getListType());if(us(a)){const c=Yl();c.append(o),a.insertAfter(c)}else a.insertAfter(o);o.append(...i)}return(function(o){let c=o;for(;c.getNextSibling()==null&&c.getPreviousSibling()==null;){const u=c.getParent();if(u==null||!us(u)&&!_n(u))break;c=u}c.remove()})(t),!0}function Vw(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}let M0=class extends $o{$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const r=t.getParent();_n(r)&&r.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:$o,importDOM:{li:()=>({conversion:ose,priority:0})}})}constructor(t=1,r=void 0,n){super(n),this.__value=t===void 0?1:t,this.__checked=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const r=document.createElement("li");return this.updateListItemDOM(null,r,t),r}updateListItemDOM(t,r,n){const s=this.getParent();_n(s)&&s.getListType()==="check"&&(function(o,c,u,d){_n(c.getFirstChild())?(o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.removeAttribute("aria-checked")):(o.setAttribute("role","checkbox"),o.setAttribute("tabIndex","-1"),u&&c.__checked===u.__checked||o.setAttribute("aria-checked",c.getChecked()?"true":"false"))})(r,this,t),r.value=this.__value,(function(o,c,u){const d=[],f=[],m=c.list,p=m?m.listitem:void 0;let x;if(m&&m.nested&&(x=m.nested.listitem),p!==void 0&&d.push(...Vw(p)),m){const w=u.getParent(),v=_n(w)&&w.getListType()==="check",C=u.getChecked();v&&!C||f.push(m.listitemUnchecked),v&&C||f.push(m.listitemChecked),v&&d.push(C?m.listitemChecked:m.listitemUnchecked)}if(x!==void 0){const w=Vw(x);u.getChildren().some((v=>_n(v)))?d.push(...w):f.push(...w)}f.length>0&&Yf(o,...f),d.length>0&&yi(o,...d)})(r,n.theme,this);const a=t?t.__style:"",i=this.__style;a!==i&&(i===""?r.removeAttribute("style"):r.style.cssText=i),(function(o,c,u){const d=RA(c.__textStyle);for(const f in d)o.style.setProperty(`--listitem-marker-${f}`,d[f]);if(u)for(const f in RA(u.__textStyle))f in d||o.style.removeProperty(`--listitem-marker-${f}`)})(r,this,t)}updateDOM(t,r,n){const s=r;return this.updateListItemDOM(t,s,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const r=this.createDOM(t._config),n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();return s&&(r.dir=s),{element:r}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let r=0;r<t.length;r++){const n=t[r];if(Wt(n)&&this.canMergeWith(n)){const s=n.getChildren();this.append(...s),n.remove()}else super.append(n)}return this}replace(t,r){if(us(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!_n(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const s=kl(n.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}n.insertAfter(t),t.insertAfter(s)}return r&&(Wt(t)||Hf(139),this.getChildren().forEach((s=>{t.append(s)}))),this.remove(),n.getChildrenSize()===0&&n.remove(),t}insertAfter(t,r=!0){const n=this.getParentOrThrow();if(_n(n)||Hf(39),us(t))return super.insertAfter(t,r);const s=this.getNextSiblings();if(n.insertAfter(t,r),s.length!==0){const a=kl(n.getListType());s.forEach((i=>a.append(i))),t.insertAfter(a,r)}return t}remove(t){const r=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),r&&n&&gd(r)&&gd(n)&&(t7(r.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,r=!0){const n=Yl().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,r),n}collapseAtStart(t){const r=Vs();this.getChildren().forEach((i=>r.append(i)));const n=this.getParentOrThrow(),s=n.getParentOrThrow(),a=us(s);if(n.getChildrenSize()===1)if(a)n.remove(),s.select();else{n.insertBefore(r),n.remove();const i=t.anchor,o=t.focus,c=r.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(c,i.offset,"element"),o.type==="element"&&o.getNode().is(this)&&o.set(c,o.offset,"element")}else n.insertBefore(r),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const r=this.getWritable();return r.__value=t,r}getChecked(){const t=this.getLatest();let r;const n=this.getParent();return _n(n)&&(r=n.getListType()),r==="check"?!!t.__checked:void 0}setChecked(t){const r=this.getWritable();return r.__checked=t,r}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let r=t.getParentOrThrow(),n=0;for(;us(r);)r=r.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){typeof t!="number"&&Hf(117),(t=Math.floor(t))>=0||Hf(199);let r=this.getIndent();for(;r!==t;)r<t?(sse(this),r++):(ase(this),r--);return this}canInsertAfter(t){return us(t)}canReplaceWith(t){return us(t)}canMergeWith(t){return us(t)||O8(t)}extractWithChild(t,r){if(!lr(r))return!1;const n=r.anchor.getNode(),s=r.focus.getNode();return this.isParentOf(n)&&this.isParentOf(s)&&this.getTextContent().length===r.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return kl("bullet")}canMergeWhenEmpty(){return!0}};function ose(e){if(e.classList.contains("task-list-item")){for(const r of e.children)if(r.tagName==="INPUT")return lse(r)}const t=e.getAttribute("aria-checked");return{node:Yl(t==="true"||t!=="false"&&void 0)}}function lse(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:Yl(e.hasAttribute("checked"))}}function Yl(e){return il(new M0(void 0,e))}function us(e){return e instanceof M0}let mh=class extends $o{$config(){return this.config("list",{$transform:t=>{(function(r){const n=r.getNextSibling();_n(n)&&r.getListType()===n.getListType()&&t7(r,n)})(t),IB(t)},extends:$o,importDOM:{ol:()=>({conversion:uj,priority:0}),ul:()=>({conversion:uj,priority:0})}})}constructor(t="number",r=1,n){super(n);const s=use[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const r=this.getWritable();return r.__listType=t,r.__tag=t==="number"?"ol":"ul",r}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const r=this.getWritable();return r.__start=t,r}createDOM(t,r){const n=this.__tag,s=document.createElement(n);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,cj(s,t.theme,this),s}updateDOM(t,r,n){return t.__tag!==this.__tag||(cj(r,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const r=this.createDOM(t._config,t);return qs(r)&&(this.__start!==1&&r.setAttribute("start",String(this.__start)),this.__listType==="check"&&r.setAttribute("__lexicalListType","check")),{element:r}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,r,n){let s=n;for(let a=0;a<n.length;a++){const i=n[a];us(i)||(s===n&&(s=[...n]),s[a]=Yl().append(!Wt(i)||_n(i)||i.isInline()?i:Ca(i.getTextContent())))}return super.splice(t,r,s)}extractWithChild(t){return us(t)}};function cj(e,t,r){const n=[],s=[],a=t.list;if(a!==void 0){const i=a[`${r.__tag}Depth`]||[],o=b6(r)-1,c=o%i.length,u=i[c],d=a[r.__tag];let f;const m=a.nested,p=a.checklist;if(m!==void 0&&m.list&&(f=m.list),d!==void 0&&n.push(d),p!==void 0&&r.__listType==="check"&&n.push(p),u!==void 0){n.push(...Vw(u));for(let x=0;x<i.length;x++)x!==c&&s.push(r.__tag+x)}if(f!==void 0){const x=Vw(f);o>1?n.push(...x):s.push(...x)}}s.length>0&&Yf(e,...s),n.length>0&&yi(e,...n)}function cse(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(us(n)){t.push(n);const s=n.getChildren();s.length>1&&s.forEach((a=>{_n(a)&&t.push(ij(a))}))}else t.push(ij(n))}return t}function uj(e){const t=e.nodeName.toLowerCase();let r=null;return t==="ol"?r=kl("number",e.start):t==="ul"&&(r=(function(n){if(n.getAttribute("__lexicallisttype")==="check"||n.classList.contains("contains-task-list"))return!0;for(const s of n.childNodes)if(qs(s)&&s.hasAttribute("aria-checked"))return!0;return!1})(e)?kl("check"):kl("bullet")),{after:cse,node:r}}const use={ol:"number",ul:"bullet"};function kl(e="number",t=1){return il(new mh(e,t))}function _n(e){return e instanceof mh}const dse=tn("UPDATE_LIST_START_COMMAND"),r7=tn("INSERT_UNORDERED_LIST_COMMAND"),n7=tn("INSERT_ORDERED_LIST_COMMAND"),s7=tn("REMOVE_LIST_COMMAND");function fse(e){return Km(e.registerCommand(n7,(()=>(oj("number"),!0)),Wg),e.registerCommand(dse,(t=>{const{listNodeKey:r,newStart:n}=t,s=oi(r);return!!_n(s)&&(s.getListType()==="number"&&(s.setStart(n),IB(s)),!0)}),Wg),e.registerCommand(r7,(()=>(oj("bullet"),!0)),Wg),e.registerCommand(s7,(()=>(nse(),!0)),Wg),e.registerCommand(Ty,(()=>ise()),Wg),e.registerNodeTransform(M0,(t=>{const r=t.getFirstChild();if(r){if(Sr(r)){const n=r.getStyle(),s=r.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==s&&t.setTextFormat(s)}}else{const n=_r();lr(n)&&(n.style!==t.getTextStyle()||n.format!==t.getTextFormat())&&n.isCollapsed()&&t.is(n.anchor.getNode())&&t.setTextStyle(n.style).setTextFormat(n.format)}})),e.registerNodeTransform(fh,(t=>{const r=t.getParent();if(us(r)&&t.is(r.getFirstChild())){const n=t.getStyle(),s=t.getFormat();n===r.getTextStyle()&&s===r.getTextFormat()||r.setTextStyle(n).setTextFormat(s)}})))}function hse(e){const t=r=>{const n=r.getParent();if(_n(r.getFirstChild())||!_n(n))return;const s=d4(r,(a=>us(a)&&_n(a.getParent())&&us(a.getPreviousSibling())));if(s===null&&r.getIndent()>0)r.setIndent(0);else if(us(s)){const a=s.getPreviousSibling();if(us(a)){const i=(function(c){let u=c,d=u.getFirstChild();for(;_n(d);){const f=d.getLastChild();if(!us(f))break;u=f,d=u.getFirstChild()}return u})(a),o=i.getParent();if(_n(o)){const c=b6(o);c+1<b6(n)&&r.setIndent(c)}}}};return e.registerNodeTransform(mh,(r=>{const n=[r];for(;n.length>0;){const s=n.shift();if(_n(s)){for(const a of s.getChildren())if(us(a)){t(a);const i=a.getFirstChild();_n(i)&&n.push(i)}}}}))}var S3={exports:{}},dj;function mse(){return dj||(dj=1,(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=(function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function k(b){return b instanceof c?new c(b.type,k(b.content),b.alias):Array.isArray(b)?b.map(k):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(k){return Object.prototype.toString.call(k).slice(8,-1)},objId:function(k){return k.__id||Object.defineProperty(k,"__id",{value:++a}),k.__id},clone:function k(b,j){j=j||{};var A,F;switch(o.util.type(b)){case"Object":if(F=o.util.objId(b),j[F])return j[F];A={},j[F]=A;for(var D in b)b.hasOwnProperty(D)&&(A[D]=k(b[D],j));return A;case"Array":return F=o.util.objId(b),j[F]?j[F]:(A=[],j[F]=A,b.forEach(function(M,O){A[O]=k(M,j)}),A);default:return b}},getLanguage:function(k){for(;k;){var b=s.exec(k.className);if(b)return b[1].toLowerCase();k=k.parentElement}return"none"},setLanguage:function(k,b){k.className=k.className.replace(RegExp(s,"gi"),""),k.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(A){var k=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(k){var b=document.getElementsByTagName("script");for(var j in b)if(b[j].src==k)return b[j]}return null}},isActive:function(k,b,j){for(var A="no-"+b;k;){var F=k.classList;if(F.contains(b))return!0;if(F.contains(A))return!1;k=k.parentElement}return!!j}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(k,b){var j=o.util.clone(o.languages[k]);for(var A in b)j[A]=b[A];return j},insertBefore:function(k,b,j,A){A=A||o.languages;var F=A[k],D={};for(var M in F)if(F.hasOwnProperty(M)){if(M==b)for(var O in j)j.hasOwnProperty(O)&&(D[O]=j[O]);j.hasOwnProperty(M)||(D[M]=F[M])}var L=A[k];return A[k]=D,o.languages.DFS(o.languages,function(W,re){re===L&&W!=k&&(this[W]=D)}),D},DFS:function k(b,j,A,F){F=F||{};var D=o.util.objId;for(var M in b)if(b.hasOwnProperty(M)){j.call(b,M,b[M],A||M);var O=b[M],L=o.util.type(O);L==="Object"&&!F[D(O)]?(F[D(O)]=!0,k(O,j,null,F)):L==="Array"&&!F[D(O)]&&(F[D(O)]=!0,k(O,j,M,F))}}},plugins:{},highlightAll:function(k,b){o.highlightAllUnder(document,k,b)},highlightAllUnder:function(k,b,j){var A={callback:j,container:k,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),o.hooks.run("before-all-elements-highlight",A);for(var F=0,D;D=A.elements[F++];)o.highlightElement(D,b===!0,A.callback)},highlightElement:function(k,b,j){var A=o.util.getLanguage(k),F=o.languages[A];o.util.setLanguage(k,A);var D=k.parentElement;D&&D.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(D,A);var M=k.textContent,O={element:k,language:A,grammar:F,code:M};function L(re){O.highlightedCode=re,o.hooks.run("before-insert",O),O.element.innerHTML=O.highlightedCode,o.hooks.run("after-highlight",O),o.hooks.run("complete",O),j&&j.call(O.element)}if(o.hooks.run("before-sanity-check",O),D=O.element.parentElement,D&&D.nodeName.toLowerCase()==="pre"&&!D.hasAttribute("tabindex")&&D.setAttribute("tabindex","0"),!O.code){o.hooks.run("complete",O),j&&j.call(O.element);return}if(o.hooks.run("before-highlight",O),!O.grammar){L(o.util.encode(O.code));return}if(b&&n.Worker){var W=new Worker(o.filename);W.onmessage=function(re){L(re.data)},W.postMessage(JSON.stringify({language:O.language,code:O.code,immediateClose:!0}))}else L(o.highlight(O.code,O.grammar,O.language))},highlight:function(k,b,j){var A={code:k,grammar:b,language:j};if(o.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=o.tokenize(A.code,A.grammar),o.hooks.run("after-tokenize",A),c.stringify(o.util.encode(A.tokens),A.language)},tokenize:function(k,b){var j=b.rest;if(j){for(var A in j)b[A]=j[A];delete b.rest}var F=new f;return m(F,F.head,k),d(k,F,b,F.head,0),x(F)},hooks:{all:{},add:function(k,b){var j=o.hooks.all;j[k]=j[k]||[],j[k].push(b)},run:function(k,b){var j=o.hooks.all[k];if(!(!j||!j.length))for(var A=0,F;F=j[A++];)F(b)}},Token:c};n.Prism=o;function c(k,b,j,A){this.type=k,this.content=b,this.alias=j,this.length=(A||"").length|0}c.stringify=function k(b,j){if(typeof b=="string")return b;if(Array.isArray(b)){var A="";return b.forEach(function(L){A+=k(L,j)}),A}var F={type:b.type,content:k(b.content,j),tag:"span",classes:["token",b.type],attributes:{},language:j},D=b.alias;D&&(Array.isArray(D)?Array.prototype.push.apply(F.classes,D):F.classes.push(D)),o.hooks.run("wrap",F);var M="";for(var O in F.attributes)M+=" "+O+'="'+(F.attributes[O]||"").replace(/"/g,"&quot;")+'"';return"<"+F.tag+' class="'+F.classes.join(" ")+'"'+M+">"+F.content+"</"+F.tag+">"};function u(k,b,j,A){k.lastIndex=b;var F=k.exec(j);if(F&&A&&F[1]){var D=F[1].length;F.index+=D,F[0]=F[0].slice(D)}return F}function d(k,b,j,A,F,D){for(var M in j)if(!(!j.hasOwnProperty(M)||!j[M])){var O=j[M];O=Array.isArray(O)?O:[O];for(var L=0;L<O.length;++L){if(D&&D.cause==M+","+L)return;var W=O[L],re=W.inside,ie=!!W.lookbehind,xe=!!W.greedy,de=W.alias;if(xe&&!W.pattern.global){var fe=W.pattern.toString().match(/[imsuy]*$/)[0];W.pattern=RegExp(W.pattern.source,fe+"g")}for(var H=W.pattern||W,Q=A.next,U=F;Q!==b.tail&&!(D&&U>=D.reach);U+=Q.value.length,Q=Q.next){var V=Q.value;if(b.length>k.length)return;if(!(V instanceof c)){var X=1,z;if(xe){if(z=u(H,U,k,ie),!z||z.index>=k.length)break;var pe=z.index,K=z.index+z[0].length,te=U;for(te+=Q.value.length;pe>=te;)Q=Q.next,te+=Q.value.length;if(te-=Q.value.length,U=te,Q.value instanceof c)continue;for(var se=Q;se!==b.tail&&(te<K||typeof se.value=="string");se=se.next)X++,te+=se.value.length;X--,V=k.slice(U,te),z.index-=U}else if(z=u(H,0,V,ie),!z)continue;var pe=z.index,oe=z[0],ye=V.slice(0,pe),we=V.slice(pe+oe.length),Se=U+V.length;D&&Se>D.reach&&(D.reach=Se);var Ie=Q.prev;ye&&(Ie=m(b,Ie,ye),U+=ye.length),p(b,Ie,X);var me=new c(M,re?o.tokenize(oe,re):oe,de,oe);if(Q=m(b,Ie,me),we&&m(b,Q,we),X>1){var _e={cause:M+","+L,reach:Se};d(k,b,j,Q.prev,U,_e),D&&_e.reach>D.reach&&(D.reach=_e.reach)}}}}}}function f(){var k={value:null,prev:null,next:null},b={value:null,prev:k,next:null};k.next=b,this.head=k,this.tail=b,this.length=0}function m(k,b,j){var A=b.next,F={value:j,prev:b,next:A};return b.next=F,A.prev=F,k.length++,F}function p(k,b,j){for(var A=b.next,F=0;F<j&&A!==k.tail;F++)A=A.next;b.next=A,A.prev=b,k.length-=F}function x(k){for(var b=[],j=k.head.next;j!==k.tail;)b.push(j.value),j=j.next;return b}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(k){var b=JSON.parse(k.data),j=b.language,A=b.code,F=b.immediateClose;n.postMessage(o.highlight(A,o.languages[j],j)),F&&n.close()},!1)),o;var w=o.util.currentScript();w&&(o.filename=w.src,w.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var C=document.readyState;C==="loading"||C==="interactive"&&w&&w.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o})(t);e.exports&&(e.exports=r),typeof _w<"u"&&(_w.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+a]={pattern:/[\s\S]+/,inside:r.languages[a]};var c={};c[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,s){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:r.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,(function(n){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var a=n.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))})(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,(function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",s=function(w,v){return" Error "+w+" while fetching file: "+v},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",c="loading",u="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+c+'"])';function m(w,v,C){var k=new XMLHttpRequest;k.open("GET",w,!0),k.onreadystatechange=function(){k.readyState==4&&(k.status<400&&k.responseText?v(k.responseText):k.status>=400?C(s(k.status,k.statusText)):C(a))},k.send(null)}function p(w){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(w||"");if(v){var C=Number(v[1]),k=v[2],b=v[3];return k?b?[C,Number(b)]:[C,void 0]:[C,C]}}r.hooks.add("before-highlightall",function(w){w.selector+=", "+f}),r.hooks.add("before-sanity-check",function(w){var v=w.element;if(v.matches(f)){w.code="",v.setAttribute(o,c);var C=v.appendChild(document.createElement("CODE"));C.textContent=n;var k=v.getAttribute("data-src"),b=w.language;if(b==="none"){var j=(/\.(\w+)$/.exec(k)||[,"none"])[1];b=i[j]||j}r.util.setLanguage(C,b),r.util.setLanguage(v,b);var A=r.plugins.autoloader;A&&A.loadLanguages(b),m(k,function(F){v.setAttribute(o,u);var D=p(v.getAttribute("data-range"));if(D){var M=F.split(/\r\n?|\n/g),O=D[0],L=D[1]==null?M.length:D[1];O<0&&(O+=M.length),O=Math.max(0,Math.min(O-1,M.length)),L<0&&(L+=M.length),L=Math.max(0,Math.min(L,M.length)),F=M.slice(O,L).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(O+1))}C.textContent=F,r.highlightElement(C)},function(F){v.setAttribute(o,d),C.textContent=F})}}),r.plugins.fileHighlight={highlight:function(v){for(var C=(v||document).querySelectorAll(f),k=0,b;b=C[k++];)r.highlightElement(b)}};var x=!1;r.fileHighlight=function(){x||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),x=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(S3)),S3.exports}mse();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};s["language-"+r]={pattern:/[\s\S]+/,inside:Prism.languages[r]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var n=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return n}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(f){d!==f&&(e.languages.markdown[d].inside.content.inside[f]=e.languages.markdown[f])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function f(m){if(!(!m||typeof m=="string"))for(var p=0,x=m.length;p<x;p++){var w=m[p];if(w.type!=="code"){f(w.content);continue}var v=w.content[1],C=w.content[3];if(v&&C&&v.type==="code-language"&&C.type==="code-block"&&typeof v.content=="string"){var k=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");k=(/[a-z][\w-]*/i.exec(k)||[""])[0].toLowerCase();var b="language-"+k;C.alias?typeof C.alias=="string"?C.alias=[C.alias,b]:C.alias.push(b):C.alias=[b]}}}f(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var f="",m=0,p=d.classes.length;m<p;m++){var x=d.classes[m],w=/language-(.+)/.exec(x);if(w){f=w[1];break}}var v=e.languages[f];if(v)d.content=e.highlight(u(d.content),v,f);else if(f&&f!=="none"&&e.plugins.autoloader){var C="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=C,e.plugins.autoloader.loadLanguages(f,function(){var k=document.getElementById(C);k&&(k.innerHTML=e.highlight(k.textContent,e.languages[f],f))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},c=String.fromCodePoint||String.fromCharCode;function u(d){var f=d.replace(i,"");return f=f.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,p){if(p=p.toLowerCase(),p[0]==="#"){var x;return p[1]==="x"?x=parseInt(p.slice(2),16):x=Number(p.slice(1)),c(x)}else{var w=o[p];return w||m}}),f}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var fj={},hj;function gse(){return hj||(hj=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),fj}gse();var mj={},gj;function pse(){return gj||(gj=1,(function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string})(Prism)),mj}pse();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var pj={},xj;function xse(){return xj||(xj=1,(function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript})(Prism)),pj}xse();var yj={},vj;function yse(){return vj||(vj=1,(function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),yj}yse();var wj={},bj;function vse(){return bj||(bj=1,(function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])})(Prism)),wj}vse();function RB(e,t){for(const r of e.childNodes){if(qs(r)&&r.tagName===t)return!0;RB(r,t)}return!1}const Rx="data-language",kx="data-highlight-language",O2="data-theme";class Xm extends $o{static getType(){return"code"}static clone(t){return new Xm(t.__language,t.__key)}constructor(t,r){super(r),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const r=document.createElement("code");yi(r,t.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(Rx,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(kx,n));const s=this.getTheme();s&&r.setAttribute(O2,s);const a=this.getStyle();return a&&r.setAttribute("style",a),r}updateDOM(t,r,n){const s=this.__language,a=t.__language;s?s!==a&&r.setAttribute(Rx,s):a&&r.removeAttribute(Rx);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&r.setAttribute(kx,s):r.removeAttribute(kx):i&&s&&r.setAttribute(kx,s);const o=this.__theme,c=t.__theme;o?o!==c&&r.setAttribute(O2,o):c&&r.removeAttribute(O2);const u=this.__style,d=t.__style;return u?u!==d&&r.setAttribute("style",u):d&&r.removeAttribute("style"),!1}exportDOM(t){const r=document.createElement("pre");yi(r,t._config.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute(Rx,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(kx,n));const s=this.getTheme();s&&r.setAttribute(O2,s);const a=this.getStyle();return a&&r.setAttribute("style",a),{element:r}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||RB(t,"BR"))?{conversion:_j,priority:1}:null,div:()=>({conversion:wse,priority:1}),pre:()=>({conversion:_j,priority:0}),table:t=>k3(t)?{conversion:bse,priority:3}:null,td:t=>{const r=t,n=r.closest("table");return r.classList.contains("js-file-line")||n&&k3(n)?{conversion:Sj,priority:3}:null},tr:t=>{const r=t.closest("table");return r&&k3(r)?{conversion:Sj,priority:3}:null}}}static importJSON(t){return f0().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,r=!0){const n=this.getChildren(),s=n.length;if(s>=2&&n[s-1].getTextContent()===`
`&&n[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){n[s-1].remove(),n[s-2].remove();const c=Vs();return this.insertAfter(c,r),c}const{anchor:a,focus:i}=t,o=(a.isBefore(i)?a:i).getNode();if(Sr(o)){let c=Sse(o);const u=[];for(;;)if(r4(c))u.push(Up()),c=c.getNextSibling();else{if(!$B(c))break;{let v=0;const C=c.getTextContent(),k=c.getTextContentSize();for(;v<k&&C[v]===" ";)v++;if(v!==0&&u.push(BB(" ".repeat(v))),v!==k)break;c=c.getNextSibling()}}const d=o.splitText(a.offset)[0],f=a.offset===0?0:1,m=d.getIndexWithinParent()+f,p=o.getParentOrThrow(),x=[Sd(),...u];p.splice(m,0,x);const w=u[u.length-1];w?w.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(a7(o)){const{offset:c}=t.anchor;o.splice(c,0,[Sd()]),o.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){const t=Vs();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}setLanguage(t){const r=this.getWritable();return r.__language=t||void 0,r}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const r=this.getWritable();return r.__isSyntaxHighlightSupported=t,r}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const r=this.getWritable();return r.__theme=t||void 0,r}getTheme(){return this.getLatest().__theme}}function f0(e,t){return Wre(Xm).setLanguage(e).setTheme(t)}function a7(e){return e instanceof Xm}function _j(e){return{node:f0(e.getAttribute(Rx))}}function wse(e){const t=e,r=kj(t);return r||(function(n){let s=n.parentElement;for(;s!==null;){if(kj(s))return!0;s=s.parentElement}return!1})(t)?{node:r?f0():null}:{node:null}}function bse(){return{node:f0()}}function Sj(){return{node:null}}function kj(e){return e.style.fontFamily.match("monospace")!==null}function k3(e){return e.classList.contains("js-file-line-container")}let f4=class LB extends fh{constructor(t="",r,n){super(t,n),this.__highlightType=r}static getType(){return"code-highlight"}static clone(t){return new LB(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const r=this.getWritable();return r.__highlightType=t||void 0,r}canHaveFormat(){return!1}createDOM(t){const r=super.createDOM(t),n=T3(t.theme,this.__highlightType);return yi(r,n),r}updateDOM(t,r,n){const s=super.updateDOM(t,r,n),a=T3(n.theme,t.__highlightType),i=T3(n.theme,this.__highlightType);return a!==i&&(a&&Yf(r,a),i&&yi(r,i)),s}static importJSON(t){return BB().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return f0()}};function T3(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function BB(e="",t){return il(new f4(e,t))}function $B(e){return e instanceof f4}function _se(e,t){let r=e;for(let n=ho(e,t);n&&($B(n.origin)||r4(n.origin));n=hne(n))r=n.origin;return r}function Sse(e){return _se(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(r){var n=t[r],s=[];/^\w+$/.test(r)||s.push(/\w+/.exec(r)[0]),r==="diff"&&s.push("bold"),e.languages.diff[r]={pattern:RegExp("^(?:["+n+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(r)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);const kse=new Set(["http:","https:","mailto:","sms:","tel:"]);class gh extends $o{static getType(){return"link"}static clone(t){return new gh(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",r={},n){super(n);const{target:s=null,rel:a=null,title:i=null}=r;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const r=document.createElement("a");return this.updateLinkDOM(null,r,t),yi(r,t.theme.link),r}updateLinkDOM(t,r,n){if(ZL(r)){t&&t.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?r[s]=i:r.removeAttribute(s))}}}updateDOM(t,r,n){return this.updateLinkDOM(t,r,n),!1}static importDOM(){return{a:t=>({conversion:Tse,priority:1})}}static importJSON(t){return qw().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=Cj(t);try{const r=new URL(Cj(t));if(!kse.has(r.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const r=this.getWritable();return r.__url=t,r}getTarget(){return this.getLatest().__target}setTarget(t){const r=this.getWritable();return r.__target=t,r}getRel(){return this.getLatest().__rel}setRel(t){const r=this.getWritable();return r.__rel=t,r}getTitle(){return this.getLatest().__title}setTitle(t){const r=this.getWritable();return r.__title=t,r}insertNewAfter(t,r=!0){const n=qw(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,r),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!lr(r))return!1;const s=r.anchor.getNode(),a=r.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&r.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function Tse(e){let t=null;if(ZL(e)){const r=e.textContent;(r!==null&&r!==""||e.children.length>0)&&(t=qw(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function qw(e="",t){return il(new gh(e,t))}function Cse(e){return e instanceof gh}class Xp extends gh{constructor(t="",r={},n){super(t,r,n),this.__isUnlinked=r.isUnlinked!==void 0&&r.isUnlinked!==null&&r.isUnlinked}static getType(){return"autolink"}static clone(t){return new Xp(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const r=this.getWritable();return r.__isUnlinked=t,r}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,r,n){return super.updateDOM(t,r,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return Tj().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,r=!0){const n=this.getParentOrThrow().insertNewAfter(t,r);if(Wt(n)){const s=Tj(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(s),s}return null}}function Tj(e="",t){return il(new Xp(e,t))}function Nse(e){return e instanceof Xp}const Ese=/^\+?[0-9\s()-]{5,}$/;function Cj(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:Ese.test(e)?`tel:${e}`:`https://${e}`}function S6(e,t){const r={};for(const n of e){const s=t(n);s&&(r[s]?r[s].push(n):r[s]=[n])}return r}function Ase(e){const t=S6(e,(r=>r.type));return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const Nj=/[!-/:-@[-`{-~\s]/;function jse(e){return Sr(e)&&!e.hasFormat("code")}function Pse(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function Ej(e,t,r){const n=r.length;for(let s=t;s>=n;s--){const a=s-n;if(zB(e,a,r,0,n)&&e[a+n]!==" ")return a}return-1}function zB(e,t,r,n,s){for(let a=0;a<s;a++)if(e[t+a]!==r[n+a])return!1;return!0}function Mse(e,t=h4){const r=Ase(t),n=S6(r.textFormat,(({tag:i})=>i[i.length-1])),s=S6(r.textMatch,(({trigger:i})=>i));for(const i of t){const o=i.type;if(o==="element"||o==="text-match"||o==="multiline-element"){const c=i.dependencies;for(const u of c)e.hasNode(u)||Pse(173,u.getType())}}const a=(i,o,c)=>{(function(u,d,f,m){const p=u.getParent();if(!nl(p)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExp:w,replace:v}of m){const C=x.match(w);if(C&&C[0].length===(C[0].endsWith(" ")?f:f-1)){const k=d.getNextSiblings(),[b,j]=d.splitText(f);if(v(u,j?[j,...k]:k,C,!1)!==!1)return b.remove(),!0}}return!1})(i,o,c,r.element)||(function(u,d,f,m){const p=u.getParent();if(!nl(p)||u.getFirstChild()!==d)return!1;const x=d.getTextContent();if(x[f-1]!==" ")return!1;for(const{regExpStart:w,replace:v,regExpEnd:C}of m){if(C&&!("optional"in C)||C&&"optional"in C&&!C.optional)continue;const k=x.match(w);if(k&&k[0].length===(k[0].endsWith(" ")?f:f-1)){const b=d.getNextSiblings(),[j,A]=d.splitText(f);if(v(u,A?[A,...b]:b,k,null,null,!1)!==!1)return j.remove(),!0}}return!1})(i,o,c,r.multilineElement)||(function(u,d,f){let m=u.getTextContent();const p=f[m[d-1]];if(p==null)return!1;d<m.length&&(m=m.slice(0,d));for(const x of p){if(!x.replace||!x.regExp)continue;const w=m.match(x.regExp);if(w===null)continue;const v=w.index||0,C=v+w[0].length;let k;return v===0?[k]=u.splitText(C):[,k]=u.splitText(v,C),k.selectNext(0,0),x.replace(k,w),!0}return!1})(o,c,s)||(function(u,d,f){const m=u.getTextContent(),p=d-1,x=m[p],w=f[x];if(!w)return!1;for(const v of w){const{tag:C}=v,k=C.length,b=p-k+1;if(k>1&&!zB(m,b,C,0,k)||m[b-1]===" ")continue;const j=m[p+1];if(v.intraword===!1&&j&&!Nj.test(j))continue;const A=u;let F=A,D=Ej(m,b,C),M=F;for(;D<0&&(M=M.getPreviousSibling())&&!p0(M);)if(Sr(M)){if(M.hasFormat("code"))continue;const H=M.getTextContent();F=M,D=Ej(H,H.length,C)}if(D<0||F===A&&D+k===b)continue;const O=F.getTextContent();if(D>0&&O[D-1]===x)continue;const L=O[D-1];if(v.intraword===!1&&L&&!Nj.test(L))continue;const W=A.getTextContent(),re=W.slice(0,b)+W.slice(p+1);A.setTextContent(re);const ie=F===A?re:O;F.setTextContent(ie.slice(0,D)+ie.slice(D+k));const xe=_r(),de=s4();mo(de);const fe=p-k*(F===A?2:1)+1;de.anchor.set(F.__key,D,"text"),de.focus.set(A.__key,fe,"text");for(const H of v.format)de.hasFormat(H)||de.formatText(H);de.anchor.set(de.focus.key,de.focus.offset,de.focus.type);for(const H of v.format)de.hasFormat(H)&&de.toggleFormat(H);return lr(xe)&&(de.format=xe.format),!0}})(o,c,n)};return e.registerUpdateListener((({tags:i,dirtyLeaves:o,editorState:c,prevEditorState:u})=>{if(i.has($L)||i.has(zw)||e.isComposing())return;const d=c.read(_r),f=u.read(_r);if(!lr(f)||!lr(d)||!d.isCollapsed()||d.is(f))return;const m=d.anchor.key,p=d.anchor.offset,x=c._nodeMap.get(m);!Sr(x)||!o.has(m)||p!==1&&p>f.anchor.offset+1||e.update((()=>{if(!jse(x))return;const w=x.getParent();w===null||a7(w)||a(w,x,d.anchor.offset)}))}))}const Fse=/^(\s*)(\d{1,})\.\s/,Ose=/^(\s*)[-*+]\s/,Dse=/^(#{1,6})\s/,Ise=/^>\s/,Rse=/^[ \t]*```([\w-]+)?/,Lse=/[ \t]*```$/,UB=e=>(t,r,n,s)=>{const a=e(n);a.append(...r),t.replace(a),s||a.select(0,0)},WB=e=>(t,r,n,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),o=Yl(e==="check"?n[3]==="x":void 0);if(_n(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(o):i.append(o),t.remove()}else if(_n(a)&&a.getListType()===e)a.append(o),t.remove();else{const u=kl(e,e==="number"?Number(n[2]):void 0);u.append(o),t.replace(u)}o.append(...r),s||o.select(0,0);const c=(function(u){const d=u.match(/\t/g),f=u.match(/ /g);let m=0;return d&&(m+=d.length),f&&(m+=Math.floor(f.length/4)),m})(n[1]);c&&o.setIndent(c)},i7=(e,t,r)=>{const n=[],s=e.getChildren();let a=0;for(const i of s)if(us(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(_n(d)){n.push(i7(d,t,r+1));continue}}const o=" ".repeat(4*r),c=e.getListType(),u=c==="number"?`${e.getStart()+a}. `:c==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";n.push(o+u+t(i)),a++}return n.join(`
`)},Bse={dependencies:[yv],export:(e,t)=>{if(!Dne(e))return null;const r=Number(e.getTag().slice(1));return"#".repeat(r)+" "+t(e)},regExp:Dse,replace:UB((e=>{const t="h"+e[1].length;return Wf(t)})),type:"element"},$se={dependencies:[pv],export:(e,t)=>{if(!KA(e))return null;const r=t(e).split(`
`),n=[];for(const s of r)n.push("> "+s);return n.join(`
`)},regExp:Ise,replace:(e,t,r,n)=>{if(n){const a=e.getPreviousSibling();if(KA(a))return a.splice(a.getChildrenSize(),0,[Sd(),...t]),void e.remove()}const s=xv();s.append(...t),e.replace(s),n||s.select(0,0)},type:"element"},zse={dependencies:[Xm],export:e=>{if(!a7(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:Lse},regExpStart:Rse,replace:(e,t,r,n,s,a)=>{let i,o;if(!t&&s){if(s.length===1)n?(i=f0(),o=r[1]+s[0]):(i=f0(r[1]),o=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=f0(r[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();o=s.join(`
`)}const c=Ca(o);i.append(c),e.append(i)}else t&&UB((c=>f0(c?c[1]:void 0)))(e,t,r,a)},type:"multiline-element"},Use={dependencies:[mh,M0],export:(e,t)=>_n(e)?i7(e,t,0):null,regExp:Ose,replace:WB("bullet"),type:"element"},Wse={dependencies:[mh,M0],export:(e,t)=>_n(e)?i7(e,t,0):null,regExp:Fse,replace:WB("number"),type:"element"},Hse={format:["code"],tag:"`",type:"text-format"},Gse={format:["highlight"],tag:"==",type:"text-format"},Vse={format:["bold","italic"],tag:"***",type:"text-format"},qse={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},Kse={format:["bold"],tag:"**",type:"text-format"},Xse={format:["bold"],intraword:!1,tag:"__",type:"text-format"},Yse={format:["strikethrough"],tag:"~~",type:"text-format"},Jse={format:["italic"],tag:"*",type:"text-format"},Qse={format:["italic"],intraword:!1,tag:"_",type:"text-format"},Zse={dependencies:[gh],export:(e,t,r)=>{if(!Cse(e)||Nse(e))return null;const n=e.getTitle(),s=t(e);return n?`[${s}](${e.getURL()} "${n}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,r,n,s]=t,a=qw(n,{title:s}),i=r.split("[").length-1,o=r.split("]").length-1;let c=r,u="";if(i<o)return;if(i>o){const f=r.split("[");u="["+f[0],c=f.slice(1).join("[")}const d=Ca(c);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(Ca(u)),d},trigger:")",type:"text-match"},eae=[Bse,$se,Use,Wse],tae=[zse],rae=[Hse,Vse,qse,Kse,Xse,Gse,Jse,Qse,Yse],nae=[Zse],h4=[...eae,...tae,...rae,...nae];function Aj(e,t){return e.getEditorState().read((()=>{const r=oi(t);return r!==null&&r.isSelected()}))}function sae(e){const[t]=Nd(),[r,n]=S.useState((()=>Aj(t,e)));return S.useEffect((()=>{let s=!0;const a=t.registerUpdateListener((()=>{s&&n(Aj(t,e))}));return()=>{s=!1,a()}}),[t,e]),[r,S.useCallback((s=>{t.update((()=>{let a=_r();Eo(a)||(a=E8(),mo(a)),Eo(a)&&(s?a.add(e):a.delete(e))}))}),[t,e]),S.useCallback((()=>{t.update((()=>{const s=_r();Eo(s)&&s.clear()}))}),[t])]}function aae({nodeKey:e}){const[t]=Nd(),[r,n,s]=sae(e);return S.useEffect((()=>Km(t.registerCommand(_8,(a=>{const i=t.getElementByKey(e);return a.target===i&&(a.shiftKey||s(),n(!r),!0)}),Wg))),[s,t,r,e,n]),S.useEffect((()=>{const a=t.getElementByKey(e),i=t._config.theme.hrSelected??"selected";a!==null&&(r?yi(a,i):Yf(a,i))}),[t,r,e]),null}class wv extends P8{static getType(){return"horizontalrule"}static clone(t){return new wv(t.__key)}static importJSON(t){return o7().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:iae,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const r=document.createElement("hr");return yi(r,t.theme.hr),r}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return l.jsx(aae,{nodeKey:this.__key})}}function iae(){return{node:o7()}}function o7(){return il(new wv)}function oae(e){return e instanceof wv}const lae=[{dependencies:[wv],export:e=>oae(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,r,n)=>{const s=o7();n||e.getNextSibling()!=null?e.replace(s):e.insertBefore(s),s.selectNext()},type:"element"},...h4];function HB({transformers:e=lae}){const[t]=Nd();return S.useEffect((()=>Mse(t,e)),[t,e]),null}function GB({hasStrictIndent:e=!1}){const[t]=Nd();return S.useEffect((()=>{if(!t.hasNodes([mh,M0]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),S.useEffect((()=>{if(e)return hse(t)}),[t,e]),(function(r){S.useEffect((()=>fse(r)),[r])})(t),null}const cae=({onChange:e})=>{const[t]=S.useContext($p)||[];return S.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{ia().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},uae=()=>{const[e]=S.useContext($p)||[],t=S.useCallback(()=>{e&&e.dispatchCommand(Ro,"bold")},[e]),r=S.useCallback(()=>{e&&e.dispatchCommand(Ro,"italic")},[e]),n=S.useCallback(()=>{e&&e.dispatchCommand(Ro,"underline")},[e]),s=S.useCallback(()=>{e&&e.dispatchCommand(Ro,"strikethrough")},[e]),a=S.useCallback(p=>{e&&e.update(()=>{const x=_r();lr(x)&&lp(x,()=>Wf(p))})},[e]),i=S.useCallback(()=>{e&&e.update(()=>{const p=_r();lr(p)&&lp(p,()=>Vs())})},[e]);S.useCallback(()=>{e&&e.update(()=>{const p=_r();lr(p)&&lp(p,()=>xv())})},[e]);const o=S.useCallback(()=>{e&&e.dispatchCommand(r7)},[e]),c=S.useCallback(()=>{e&&e.dispatchCommand(n7)},[e]),u=S.useCallback(()=>{e&&e.dispatchCommand(s7)},[e]),d=S.useCallback(p=>{e&&e.update(()=>{const x=_r();lr(x)&&x.getNodes().forEach(w=>{Sr(w)&&w.setStyle(`color: ${p}`)})})},[e]),f=S.useCallback(p=>{e&&e.update(()=>{const x=_r();lr(x)&&x.getNodes().forEach(v=>{if(Sr(v)){const C=v.getStyle(),k=C?C.replace(/font-size:\s*\d+px;?\s*/g,"").trim():"",b=k?`${k}; font-size: ${p}px;`:`font-size: ${p}px;`;v.setStyle(b)}})})},[e]),m=S.useCallback(p=>{e&&e.dispatchCommand(yL,p)},[e]);return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:t,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),l.jsx("button",{type:"button",onClick:r,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),l.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),l.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:()=>a("h1"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),l.jsx("button",{type:"button",onClick:()=>a("h2"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),l.jsx("button",{type:"button",onClick:()=>a("h3"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),l.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:" List"}),l.jsx("button",{type:"button",onClick:c,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1. List"}),l.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:"No List"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Color:"}),l.jsx("button",{type:"button",onClick:()=>d("#000000"),className:"w-6 h-6 bg-black border border-gray-300 rounded hover:bg-gray-800",title:"Black"}),l.jsx("button",{type:"button",onClick:()=>d("#ff0000"),className:"w-6 h-6 bg-red-500 border border-gray-300 rounded hover:bg-red-600",title:"Red"}),l.jsx("button",{type:"button",onClick:()=>d("#0000ff"),className:"w-6 h-6 bg-blue-500 border border-gray-300 rounded hover:bg-blue-600",title:"Blue"}),l.jsx("button",{type:"button",onClick:()=>d("#008000"),className:"w-6 h-6 bg-green-500 border border-gray-300 rounded hover:bg-green-600",title:"Green"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Size:"}),l.jsx("button",{type:"button",onClick:()=>f(12),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Small",children:"12px"}),l.jsx("button",{type:"button",onClick:()=>f(16),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Normal",children:"16px"}),l.jsx("button",{type:"button",onClick:()=>f(20),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Large",children:"20px"}),l.jsx("button",{type:"button",onClick:()=>f(24),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Extra Large",children:"24px"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Align:"}),l.jsx("button",{type:"button",onClick:()=>m("left"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Left",children:""}),l.jsx("button",{type:"button",onClick:()=>m("center"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Center",children:""}),l.jsx("button",{type:"button",onClick:()=>m("right"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Right",children:""})]})]})},dae=({value:e,onChange:t,placeholder:r})=>{const n={namespace:"LexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[yv,mh,M0,pv,Xm,f4,vv,qp,Kp,Xp,gh],onError:s=>{console.error("Lexical error:",s)},editorState:e?(()=>{try{const s=JSON.parse(e);return JSON.stringify(s)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return l.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:l.jsxs(aB,{initialConfig:n,children:[l.jsx(uae,{}),l.jsx(cae,{onChange:t}),l.jsxs("div",{className:"relative",children:[l.jsx(SB,{contentEditable:l.jsx(TB,{className:"p-4 min-h-32 focus:outline-none",placeholder:r}),placeholder:l.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:EB}),l.jsx(CB,{}),l.jsx(NB,{}),l.jsx(GB,{}),l.jsx(HB,{transformers:h4})]})]})})},fae=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Js(),{post:o}=Zl(),{showNotification:c}=_i(),[u,d]=S.useState({test_name:e,num_questions:1,passing_score:100,questions:[{id:1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048}]}),[f,m]=S.useState({isLoading:!1,error:null,showPreview:!0});S.useEffect(()=>{d(C=>({...C,test_name:e||""}))},[e]);const p=()=>{if(u.num_questions>=3){m(b=>({...b,error:"Maximum 3 questions allowed for performance reasons"}));return}const k={id:Math.max(...u.questions.map(b=>b.id))+1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048};d(b=>({...b,num_questions:b.num_questions+1,questions:[...b.questions,k]}))},x=C=>{u.questions.length<=1||d(k=>({...k,num_questions:k.num_questions-1,questions:k.questions.filter(b=>b.id!==C)}))},w=(C,k)=>{d(b=>({...b,questions:b.questions.map(j=>j.id===C?{...j,question_json:k}:j)}))},v=async()=>{if(!u.test_name.trim()){m(C=>({...C,error:"Test name is required"}));return}if(u.questions.some(C=>!C.question_json.trim())){m(C=>({...C,error:"All questions must have content"}));return}m(C=>({...C,isLoading:!0,error:null}));try{const C={test_name:u.test_name,num_questions:u.num_questions,passing_score:u.passing_score,questions:u.questions.map((k,b)=>({question_id:b+1,question_json:k.question_json,canvas_width:k.canvas_width,canvas_height:k.canvas_height,max_canvas_width:k.max_canvas_width,max_canvas_height:k.max_canvas_height}))};t&&t(C)}catch(C){console.error("Error preparing drawing test:",C),m(k=>({...k,error:"Failed to prepare drawing test. Please try again."})),c("Failed to prepare drawing test","error")}finally{m(C=>({...C,isLoading:!1}))}};return l.jsxs("div",{className:"drawing-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Drawing Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a test where students draw based on your instructions"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Drawing Questions (",u.num_questions,"/3)"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 3 questions for optimal performance"})]}),l.jsxs(xt,{onClick:p,disabled:u.num_questions>=3,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Question"]})]}),l.jsx("div",{className:"space-y-4",children:u.questions.map((C,k)=>l.jsxs(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"text-md font-medium text-gray-800",children:["Text ",k+1]}),u.questions.length>1&&l.jsx(xt,{onClick:()=>x(C.id),variant:"secondary",size:"sm",className:"text-red-600 hover:text-red-700",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Content *"}),l.jsx(dae,{value:C.question_json,onChange:b=>w(C.id,b),placeholder:""})]})]},C.id))})]}),f.error&&l.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700",children:f.error}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(xt,{onClick:r,variant:"secondary",disabled:f.isLoading,children:"Cancel"}),l.jsx(xt,{onClick:v,variant:"primary",disabled:f.isLoading||!u.test_name.trim(),className:"flex items-center gap-2",children:f.isLoading?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white"}),"Saving..."]}):"Save Test"})]})]})},hae=({onChange:e})=>{const[t]=S.useContext($p)||[];return S.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{ia().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},mae=({onAddBlank:e,blankCount:t})=>{const[r]=S.useContext($p)||[],n=S.useCallback(()=>{r&&r.dispatchCommand(Ro,"bold")},[r]),s=S.useCallback(()=>{r&&r.dispatchCommand(Ro,"italic")},[r]),a=S.useCallback(()=>{r&&r.dispatchCommand(Ro,"underline")},[r]),i=S.useCallback(()=>{r&&r.dispatchCommand(Ro,"strikethrough")},[r]),o=S.useCallback(x=>{r&&r.update(()=>{const w=_r();lr(w)&&lp(w,()=>Wf(x))})},[r]),c=S.useCallback(()=>{r&&r.update(()=>{const x=_r();lr(x)&&lp(x,()=>Vs())})},[r]),u=S.useCallback(()=>{r&&r.update(()=>{const x=_r();lr(x)&&lp(x,()=>xv())})},[r]),d=S.useCallback(()=>{r&&r.dispatchCommand(r7)},[r]),f=S.useCallback(()=>{r&&r.dispatchCommand(n7)},[r]),m=S.useCallback(()=>{r&&r.dispatchCommand(s7)},[r]),p=S.useCallback(()=>{!r||!e||(r.update(()=>{const x=_r();if(lr(x)){const v=`${t+1}_________`,C=Ca(v);C.setStyle("background-color: #f0f9ff; border: 1px dashed #3b82f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;"),x.insertNodes([C])}}),e())},[r,e,t]);return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),l.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),l.jsx("button",{type:"button",onClick:a,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),l.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:()=>o("h1"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),l.jsx("button",{type:"button",onClick:()=>o("h2"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),l.jsx("button",{type:"button",onClick:()=>o("h3"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),l.jsx("button",{type:"button",onClick:c,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"}),l.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Quote",children:'"'})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:d,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:""}),l.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1."}),l.jsx("button",{type:"button",onClick:m,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:""})]}),e&&l.jsx("div",{className:"flex items-center gap-1 border-l border-gray-300 pl-2",children:l.jsxs("button",{type:"button",onClick:p,className:"px-3 py-1 text-sm font-medium bg-blue-500 text-white border border-blue-600 rounded hover:bg-blue-600 transition-colors",title:"Add Blank",children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"inline mr-1",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Blank"]})})]})},gae=({value:e,onChange:t,placeholder:r,onAddBlank:n,blankCount:s=0})=>{const a={namespace:"FillBlanksLexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[yv,mh,M0,pv,Xm,f4,vv,qp,Kp,Xp,gh],onError:i=>{console.error("Lexical error:",i)},editorState:e?(()=>{try{const i=JSON.parse(e);return JSON.stringify(i)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return l.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:l.jsxs(aB,{initialConfig:a,children:[l.jsx(mae,{onAddBlank:n,blankCount:s}),l.jsx(hae,{onChange:t}),l.jsxs("div",{className:"relative",children:[l.jsx(SB,{contentEditable:l.jsx(TB,{className:"p-4 min-h-32 focus:outline-none"}),placeholder:l.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:EB}),l.jsx(CB,{}),l.jsx(NB,{}),l.jsx(GB,{}),l.jsx(HB,{transformers:h4})]})]})})},pae=({testName:e="",allowedTime:t=null,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const{user:o}=Js(),{post:c}=Zl(),{showNotification:u}=_i(),[d,f]=S.useState({test_name:e,test_text:"",num_questions:1,num_blanks:0,passing_score:100,separate_type:!0,allowed_time:t,blanks:[]}),[m,p]=S.useState({isLoading:!1,error:null,showPreview:!0});S.useEffect(()=>{f(D=>({...D,test_name:e||"",allowed_time:t}))},[e,t]);const x=D=>{f(M=>({...M,test_text:D}))},w=()=>{const M={id:d.blanks.length+1,position:0,question:"",options:["","","",""],correct_answer:""};f(O=>({...O,blanks:[...O.blanks,M],num_blanks:O.num_blanks+1}))},v=D=>{f(M=>({...M,blanks:M.blanks.filter(O=>O.id!==D),num_blanks:M.num_blanks-1}))},C=D=>{f(M=>({...M,blanks:M.blanks.map(O=>O.id===D?{...O,options:[...O.options,""]}:O)}))},k=(D,M)=>{f(O=>({...O,blanks:O.blanks.map(L=>L.id===D?{...L,options:L.options.filter((W,re)=>re!==M),correct_answer:L.correct_answer===String.fromCharCode(65+M)?"":L.correct_answer}:L)}))},b=(D,M,O)=>{f(L=>({...L,blanks:L.blanks.map(W=>W.id===D?{...W,options:W.options.map((re,ie)=>ie===M?O:re)}:W)}))},j=(D,M)=>{console.log(" [DEBUG] updateBlankQuestion called:",{blankId:D,question:M}),f(O=>({...O,blanks:O.blanks.map(L=>L.id===D?{...L,question:M}:L)})),console.log(" [DEBUG] updateBlankQuestion completed")},A=(D,M)=>{f(O=>({...O,blanks:O.blanks.map(L=>L.id===D?{...L,correct_answer:M}:L)}))},F=async()=>{if(!d.test_name.trim()){p(D=>({...D,error:"Test name is required"}));return}if(!d.test_text.trim()){p(D=>({...D,error:"Test text is required"}));return}if(d.blanks.length===0){p(D=>({...D,error:"At least one blank is required"}));return}if(console.log(" [DEBUG] Validating blanks:",d.blanks),d.blanks.forEach((D,M)=>{console.log(` [DEBUG] Blank ${M+1}:`,{question:D.question,questionTrimmed:D.question?.trim(),correct_answer:D.correct_answer,options:D.options})}),d.separate_type===!1){if(d.blanks.some(D=>!D.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing correct answer"),p(D=>({...D,error:"All blanks must have correct answers"}));return}}else if(d.blanks.some(D=>!D.question.trim()||!D.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing question or correct answer"),p(D=>({...D,error:"All blanks must have question text and correct answer"}));return}console.log(" [DEBUG] Validation passed - all blanks have question and correct answer"),p(D=>({...D,isLoading:!0,error:null}));try{const D={test_name:d.test_name,test_text:d.test_text,num_questions:d.blanks.length,num_blanks:d.blanks.length,separate_type:d.separate_type,passing_score:d.passing_score,allowed_time:d.allowed_time,blanks:d.blanks.map((M,O)=>({question_id:O+1,question_json:M.question,question:M.question,options:M.options,correct_answer:M.correct_answer,blank_positions:{},blank_options:M.options||[],correct_answers:[M.correct_answer]}))};console.log(" [DEBUG] Calling onTestSaved with data:",D),r?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),r(D),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(D){console.error("Error preparing fill blanks test:",D),p(M=>({...M,error:"Failed to prepare fill blanks test. Please try again."})),u("Failed to prepare fill blanks test","error")}finally{p(D=>({...D,isLoading:!1}))}};return l.jsxs("div",{className:"fill-blanks-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Fill Blanks Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a test with text content and multiple choice blanks"}),m.error&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-600 text-sm",children:m.error})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!0?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(D=>({...D,separate_type:!0})),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:d.separate_type===!0,onChange:()=>f(D=>({...D,separate_type:!0})),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Separate Mode"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Multiple choice questions below the text"})]}),l.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!1?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(D=>({...D,separate_type:!1})),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:d.separate_type===!1,onChange:()=>f(D=>({...D,separate_type:!1})),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Inline Mode"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Dropdown for option inside the text"})]})]}),l.jsx(gae,{value:d.test_text,onChange:x,placeholder:"Type your text here. Use the 'Add Blank' button in the toolbar to insert blanks.",onAddBlank:w,blankCount:d.blanks.length})]}),d.separate_type===!0&&l.jsx("div",{className:"space-y-4",children:d.blanks.map((D,M)=>l.jsxs(er,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-md font-medium",children:["Blank ",D.id," Configuration"]}),l.jsx(xt,{variant:"danger",size:"small",onClick:()=>v(D.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question Text for Blank ",D.id," *"]}),l.jsx("input",{type:"text",placeholder:"Enter question text for this blank",value:D.question,onChange:O=>j(D.id,O.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),D.options.map((O,L)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+L)}),l.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+L)}`,value:O||"",onChange:W=>b(D.id,L,W.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),D.options.length>2&&l.jsx(xt,{variant:"danger",size:"small",onClick:()=>k(D.id,L),className:"px-2 py-1 text-sm",children:""})]},L)),D.options.length<6&&l.jsx(xt,{variant:"secondary",size:"small",onClick:()=>C(D.id),className:"w-full",children:"+ Add Option"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{value:D.correct_answer||"",onChange:O=>A(D.id,O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),D.options.filter(O=>O.trim().length>0).map((O,L)=>l.jsxs("option",{value:String.fromCharCode(65+L),children:[String.fromCharCode(65+L),") ",O]},L))]})]})]},D.id))}),d.separate_type===!1&&l.jsx("div",{className:"space-y-4",children:d.blanks.map((D,M)=>l.jsxs(er,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-md font-medium",children:["Blank ",D.id," Options"]}),l.jsx(xt,{variant:"danger",size:"small",onClick:()=>v(D.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),D.options.map((O,L)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+L)}),l.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+L)}`,value:O||"",onChange:W=>b(D.id,L,W.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),D.options.length>2&&l.jsx(xt,{variant:"danger",size:"small",onClick:()=>k(D.id,L),className:"px-2 py-1 text-sm",children:""})]},L)),D.options.length<6&&l.jsx(xt,{variant:"secondary",size:"small",onClick:()=>C(D.id),className:"w-full",children:"+ Add Option"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{value:D.correct_answer||"",onChange:O=>A(D.id,O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),D.options.filter(O=>O.trim().length>0).map((O,L)=>l.jsxs("option",{value:String.fromCharCode(65+L),children:[String.fromCharCode(65+L),") ",O]},L))]})]})]},D.id))}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx(xt,{onClick:n,variant:"secondary",disabled:a,children:"Cancel"}),l.jsx(xt,{onClick:F,variant:"primary",disabled:a||d.blanks.length===0,children:a?l.jsx(pn,{size:"sm"}):"Save Test"})]})]})},xae=[{value:"A1",label:"A1 (Beginner)",description:"Basic vocabulary, simple sentences"},{value:"A2",label:"A2 (Elementary)",description:"Everyday vocabulary, present/past tenses"},{value:"B1",label:"B1 (Intermediate)",description:"Varied vocabulary, complex sentences"},{value:"B2",label:"B2 (Upper-Intermediate)",description:"Advanced vocabulary, sophisticated structures"},{value:"C1",label:"C1 (Advanced)",description:"Nuanced vocabulary, complex discourse"},{value:"C2",label:"C2 (Proficiency)",description:"Native-like fluency and accuracy"}],yae=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{showNotification:i}=_i(),[o,c]=S.useState({min_words:50,questions:[{question_id:1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}),[u,d]=S.useState(!1),f=S.useCallback((C,k)=>{c(b=>({...b,[C]:k}))},[]),m=S.useCallback((C,k,b)=>{c(j=>({...j,questions:j.questions.map((A,F)=>F===C?{...A,[k]:b}:A)}))},[]),p=S.useCallback(()=>{c(C=>({...C,questions:[...C.questions,{question_id:C.questions.length+1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}))},[]),x=S.useCallback(C=>{o.questions.length>1&&c(k=>({...k,questions:k.questions.filter((b,j)=>j!==C)}))},[o.questions.length]),w=S.useCallback(()=>{const C={};return o.min_words<10&&(C.min_words="Minimum word count must be at least 10 words"),o.questions.forEach((k,b)=>{k.prompt.trim()||(C[`question_${b}_prompt`]="Question prompt is required")}),C},[o]),v=S.useCallback(async C=>{C.preventDefault();const k=w();if(Object.keys(k).length>0){i("Please fix the validation errors","error");return}d(!0);try{const b={test_name:e,time_limit:300,min_duration:30,max_duration:600,max_attempts:3,min_words:o.min_words,passing_score:50,allowed_time:null,questions:o.questions.map((j,A)=>({question_id:A+1,prompt:j.prompt,expected_duration:j.expected_duration,difficulty_level:j.difficulty_level}))};console.log(" [DEBUG] Calling onTestSaved with data:",b),t?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),t(b),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(b){console.error("Error preparing speaking test:",b),i("Failed to prepare speaking test","error")}finally{d(!1)}},[o,w,i,t,e]);return u||s?l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx(pn,{}),l.jsx("span",{className:"ml-2",children:"Creating speaking test..."})]}):l.jsxs("div",{className:"speaking-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Speaking Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a speaking test where students record audio responses with AI-powered feedback"})]}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Scoring Settings"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count *"}),l.jsx("input",{type:"number",min:"10",max:"1000",value:o.min_words,onChange:C=>f("min_words",parseInt(C.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.min_words&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.min_words})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),l.jsx(xt,{type:"button",variant:"outline",onClick:p,children:"Add Question"})]}),o.questions.length>1&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Multiple Questions Detected"}),l.jsx("div",{className:"mt-1 text-sm text-blue-700",children:l.jsxs("p",{children:["You have ",o.questions.length," questions in this test.",l.jsx("strong",{children:" Only one question will be randomly selected"})," and shown to each student. This ensures fair distribution across your question pool."]})})]})]})}),o.questions.map((C,k)=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-medium",children:["Question ",k+1]}),o.questions.length>1&&l.jsx(xt,{type:"button",variant:"outline",size:"sm",onClick:()=>x(k),className:"text-red-600 hover:text-red-700",children:"Remove"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Prompt *"}),l.jsx("textarea",{value:C.prompt,onChange:b=>m(k,"prompt",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter the question prompt for students"}),a[`question_${k}_prompt`]&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:a[`question_${k}_prompt`]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Duration (seconds)"}),l.jsx("input",{type:"number",min:"10",max:"600",value:C.expected_duration||"",onChange:b=>m(k,"expected_duration",b.target.value?parseInt(b.target.value):null),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEFR Level"}),l.jsx("select",{value:C.difficulty_level,onChange:b=>m(k,"difficulty_level",b.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:xae.map(b=>l.jsxs("option",{value:b.value,children:[b.label," - ",b.description]},b.value))}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the appropriate CEFR level for this question. This will be used by AI to evaluate students appropriately."})]})]})]})]},k))]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[l.jsx(xt,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),l.jsx(xt,{type:"submit",variant:"primary",disabled:u||s,children:u||s?"Creating...":"Create Speaking Test"})]})]})]})},VB=(e,t)=>{const[r,n]=S.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error reading localStorage key "${e}":`,i),t}}),s=S.useCallback(i=>{try{const o=i instanceof Function?i(r):i;n(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}},[e,r]),a=S.useCallback(()=>{try{window.localStorage.removeItem(e),n(t)}catch(i){console.error(`Error removing localStorage key "${e}":`,i)}},[e,t]);return[r,s,a]},m4=()=>{const e=S.useCallback((c,u=null)=>{try{const d=window.localStorage.getItem(c);return d?JSON.parse(d):u}catch(d){return console.error(`Error reading localStorage key "${c}":`,d),u}},[]),t=S.useCallback((c,u)=>{try{window.localStorage.setItem(c,JSON.stringify(u))}catch(d){console.error(`Error setting localStorage key "${c}":`,d)}},[]),r=S.useCallback(c=>{try{window.localStorage.removeItem(c)}catch(u){console.error(`Error removing localStorage key "${c}":`,u)}},[]),n=S.useCallback(()=>{if(confirm("Are you sure you want to clear all local storage? This cannot be undone."))try{window.localStorage.clear(),window.showNotification?window.showNotification("All local storage cleared!","success"):console.log("All local storage cleared!")}catch(c){console.error("Error clearing localStorage:",c)}},[]),s=S.useCallback(()=>{try{const c={};for(let m=0;m<window.localStorage.length;m++){const p=window.localStorage.key(m);p&&(c[p]=window.localStorage.getItem(p))}const u=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="localStorage_backup.json",f.click(),URL.revokeObjectURL(d),window.showNotification?window.showNotification("Local storage exported!","success"):console.log("Local storage exported!")}catch(c){console.error("Error exporting localStorage data:",c)}},[]),a=S.useCallback(()=>{try{window.localStorage.clear()}catch(c){console.error("Error clearing localStorage:",c)}},[]),i=S.useCallback(()=>{try{const c={};for(let u=0;u<window.localStorage.length;u++){const d=window.localStorage.key(u);d&&(c[d]=window.localStorage.getItem(d))}return c}catch(c){return console.error("Error exporting localStorage data:",c),{}}},[]),o=S.useCallback(c=>{try{Object.entries(c).forEach(([u,d])=>{window.localStorage.setItem(u,d)})}catch(u){console.error("Error importing localStorage data:",u)}},[]);return{getItem:e,setItem:t,removeItem:r,clearAll:a,clearAllLocalStorage:n,exportLocalStorage:s,exportData:i,importData:o}};var Lx={exports:{}},C3={exports:{}},N3,jj;function vae(){if(jj)return N3;jj=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return N3=e,N3}var E3,Pj;function wae(){if(Pj)return E3;Pj=1;var e=vae();function t(){}function r(){}return r.resetWarningCache=t,E3=function(){function n(i,o,c,u,d,f){if(f!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return a.PropTypes=a,a},E3}var Mj;function bae(){return Mj||(Mj=1,C3.exports=wae()()),C3.exports}var xw={exports:{}},_ae=xw.exports,Fj;function Sae(){return Fj||(Fj=1,(function(e,t){(function(n,s){e.exports=s()})(typeof self<"u"?self:_ae,function(){return(function(){var r={};(function(){r.d=function(N,T){for(var P in T)r.o(T,P)&&!r.o(N,P)&&Object.defineProperty(N,P,{enumerable:!0,get:T[P]})}})(),(function(){r.o=function(N,T){return Object.prototype.hasOwnProperty.call(N,T)}})();var n={};r.d(n,{default:function(){return Sc}});class s{constructor(T,P){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;let B="KaTeX parse error: "+T,J,ce;const ve=P&&P.loc;if(ve&&ve.start<=ve.end){const Oe=ve.lexer.input;J=ve.start,ce=ve.end,J===Oe.length?B+=" at end of input: ":B+=" at position "+(J+1)+": ";const Ge=Oe.slice(J,ce).replace(/[^]/g,"$&");let $e;J>15?$e=""+Oe.slice(J-15,J):$e=Oe.slice(0,J);let at;ce+15<Oe.length?at=Oe.slice(ce,ce+15)+"":at=Oe.slice(ce),B+=$e+Ge+at}const Te=new Error(B);return Te.name="ParseError",Te.__proto__=s.prototype,Te.position=J,J!=null&&ce!=null&&(Te.length=ce-J),Te.rawMessage=T,Te}}s.prototype.__proto__=Error.prototype;var a=s;const i=function(N,T){return N===void 0?T:N},o=/([A-Z])/g,c=function(N){return N.replace(o,"-$1").toLowerCase()},u={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},d=/[&><"']/g;function f(N){return String(N).replace(d,T=>u[T])}const m=function(N){return N.type==="ordgroup"||N.type==="color"?N.body.length===1?m(N.body[0]):N:N.type==="font"?m(N.body):N},p=function(N){const T=m(N);return T.type==="mathord"||T.type==="textord"||T.type==="atom"},x=function(N){if(!N)throw new Error("Expected non-null, but got "+String(N));return N};var v={deflt:i,escape:f,hyphenate:c,getBaseElem:m,isCharacterBox:p,protocolFromUrl:function(N){const T=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(N);return T?T[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(T[1])?null:T[1].toLowerCase():"_relative"}};const C={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:N=>"#"+N},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(N,T)=>(T.push(N),T)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:N=>Math.max(0,N),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:N=>Math.max(0,N),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:N=>Math.max(0,N),cli:"-e, --max-expand <n>",cliProcessor:N=>N==="Infinity"?1/0:parseInt(N)},globalGroup:{type:"boolean",cli:!1}};function k(N){if(N.default)return N.default;const T=N.type,P=Array.isArray(T)?T[0]:T;if(typeof P!="string")return P.enum[0];switch(P){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class b{constructor(T){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,T=T||{};for(const P in C)if(C.hasOwnProperty(P)){const B=C[P];this[P]=T[P]!==void 0?B.processor?B.processor(T[P]):T[P]:k(B)}}reportNonstrict(T,P,B){let J=this.strict;if(typeof J=="function"&&(J=J(T,P,B)),!(!J||J==="ignore")){if(J===!0||J==="error")throw new a("LaTeX-incompatible input and strict mode is set to 'error': "+(P+" ["+T+"]"),B);J==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(P+" ["+T+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+J+"': "+P+" ["+T+"]"))}}useStrictBehavior(T,P,B){let J=this.strict;if(typeof J=="function")try{J=J(T,P,B)}catch{J="error"}return!J||J==="ignore"?!1:J===!0||J==="error"?!0:J==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(P+" ["+T+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+J+"': "+P+" ["+T+"]")),!1)}isTrusted(T){if(T.url&&!T.protocol){const B=v.protocolFromUrl(T.url);if(B==null)return!1;T.protocol=B}return!!(typeof this.trust=="function"?this.trust(T):this.trust)}}class j{constructor(T,P,B){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=T,this.size=P,this.cramped=B}sup(){return ie[xe[this.id]]}sub(){return ie[de[this.id]]}fracNum(){return ie[fe[this.id]]}fracDen(){return ie[H[this.id]]}cramp(){return ie[Q[this.id]]}text(){return ie[U[this.id]]}isTight(){return this.size>=2}}const A=0,F=1,D=2,M=3,O=4,L=5,W=6,re=7,ie=[new j(A,0,!1),new j(F,0,!0),new j(D,1,!1),new j(M,1,!0),new j(O,2,!1),new j(L,2,!0),new j(W,3,!1),new j(re,3,!0)],xe=[O,L,O,L,W,re,W,re],de=[L,L,L,L,re,re,re,re],fe=[D,M,O,L,W,re,W,re],H=[M,M,L,L,re,re,re,re],Q=[F,F,M,M,L,L,re,re],U=[A,F,D,M,D,M,D,M];var V={DISPLAY:ie[A],TEXT:ie[D],SCRIPT:ie[O],SCRIPTSCRIPT:ie[W]};const X=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function z(N){for(let T=0;T<X.length;T++){const P=X[T];for(let B=0;B<P.blocks.length;B++){const J=P.blocks[B];if(N>=J[0]&&N<=J[1])return P.name}}return null}const K=[];X.forEach(N=>N.blocks.forEach(T=>K.push(...T)));function te(N){for(let T=0;T<K.length;T+=2)if(N>=K[T]&&N<=K[T+1])return!0;return!1}const se=80,pe=function(N,T){return"M95,"+(622+N+T)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+N/2.075+" -"+N+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+N)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+N)+" "+T+"h400000v"+(40+N)+"h-400000z"},oe=function(N,T){return"M263,"+(601+N+T)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+N/2.084+" -"+N+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+N)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+N)+" "+T+"h400000v"+(40+N)+"h-400000z"},ye=function(N,T){return"M983 "+(10+N+T)+`
l`+N/3.13+" -"+N+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+N)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+N)+" "+T+"h400000v"+(40+N)+"h-400000z"},we=function(N,T){return"M424,"+(2398+N+T)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+N/4.223+" -"+N+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+N)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+N)+" "+T+`
h400000v`+(40+N)+"h-400000z"},Se=function(N,T){return"M473,"+(2713+N+T)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+N/5.298+" -"+N+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+N)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+N)+" "+T+"h400000v"+(40+N)+"H1017.7z"},Ie=function(N){const T=N/2;return"M400000 "+N+" H0 L"+T+" 0 l65 45 L145 "+(N-80)+" H400000z"},me=function(N,T,P){const B=P-54-T-N;return"M702 "+(N+T)+"H400000"+(40+N)+`
H742v`+B+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+T+"H400000v"+(40+N)+"H742z"},_e=function(N,T,P){T=1e3*T;let B="";switch(N){case"sqrtMain":B=pe(T,se);break;case"sqrtSize1":B=oe(T,se);break;case"sqrtSize2":B=ye(T,se);break;case"sqrtSize3":B=we(T,se);break;case"sqrtSize4":B=Se(T,se);break;case"sqrtTall":B=me(T,se,P)}return B},We=function(N,T){switch(N){case"":return"M291 0 H417 V"+T+" H291z M291 0 H417 V"+T+" H291z";case"":return"M145 0 H188 V"+T+" H145z M145 0 H188 V"+T+" H145z";case"":return"M145 0 H188 V"+T+" H145z M145 0 H188 V"+T+" H145z"+("M367 0 H410 V"+T+" H367z M367 0 H410 V"+T+" H367z");case"":return"M457 0 H583 V"+T+" H457z M457 0 H583 V"+T+" H457z";case"":return"M319 0 H403 V"+T+" H319z M319 0 H403 V"+T+" H319z";case"":return"M263 0 H347 V"+T+" H263z M263 0 H347 V"+T+" H263z";case"":return"M384 0 H504 V"+T+" H384z M384 0 H504 V"+T+" H384z";case"":return"M312 0 H355 V"+T+" H312z M312 0 H355 V"+T+" H312z";case"":return"M257 0 H300 V"+T+" H257z M257 0 H300 V"+T+" H257z"+("M478 0 H521 V"+T+" H478z M478 0 H521 V"+T+" H478z");default:return""}},Ue={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},St=function(N,T){switch(N){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+T+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+T+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+T+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+T+" v1759 h84z";case"vert":return"M145 15 v585 v"+T+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-T+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+T+" v585 h43z";case"doublevert":return"M145 15 v585 v"+T+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-T+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+T+` v585 h43z
M367 15 v585 v`+T+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-T+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+T+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+T+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+T+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+T+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+T+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+T+` v602 h84z
M403 1759 V0 H319 V1759 v`+T+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+T+` v602 h84z
M347 1759 V0 h-84 V1759 v`+T+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(T+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(T+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(T+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(T+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};var Ze={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}};const Kt={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},yt={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function Rt(N,T){Ze[N]=T}function At(N,T,P){if(!Ze[T])throw new Error("Font metrics not found for font: "+T+".");let B=N.charCodeAt(0),J=Ze[T][B];if(!J&&N[0]in yt&&(B=yt[N[0]].charCodeAt(0),J=Ze[T][B]),!J&&P==="text"&&te(B)&&(J=Ze[T][77]),J)return{depth:J[0],height:J[1],italic:J[2],skew:J[3],width:J[4]}}const wt={};function Ft(N){let T;if(N>=5?T=0:N>=3?T=1:T=2,!wt[T]){const P=wt[T]={cssEmPerMu:Kt.quad[T]/18};for(const B in Kt)Kt.hasOwnProperty(B)&&(P[B]=Kt[B][T])}return wt[T]}const or=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],dr=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],nr=function(N,T){return T.size<2?N:or[N-1][T.size-1]};class Xe{constructor(T){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=T.style,this.color=T.color,this.size=T.size||Xe.BASESIZE,this.textSize=T.textSize||this.size,this.phantom=!!T.phantom,this.font=T.font||"",this.fontFamily=T.fontFamily||"",this.fontWeight=T.fontWeight||"",this.fontShape=T.fontShape||"",this.sizeMultiplier=dr[this.size-1],this.maxSize=T.maxSize,this.minRuleThickness=T.minRuleThickness,this._fontMetrics=void 0}extend(T){const P={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(const B in T)T.hasOwnProperty(B)&&(P[B]=T[B]);return new Xe(P)}havingStyle(T){return this.style===T?this:this.extend({style:T,size:nr(this.textSize,T)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(T){return this.size===T&&this.textSize===T?this:this.extend({style:this.style.text(),size:T,textSize:T,sizeMultiplier:dr[T-1]})}havingBaseStyle(T){T=T||this.style.text();const P=nr(Xe.BASESIZE,T);return this.size===P&&this.textSize===Xe.BASESIZE&&this.style===T?this:this.extend({style:T,size:P})}havingBaseSizing(){let T;switch(this.style.id){case 4:case 5:T=3;break;case 6:case 7:T=1;break;default:T=6}return this.extend({style:this.style.text(),size:T})}withColor(T){return this.extend({color:T})}withPhantom(){return this.extend({phantom:!0})}withFont(T){return this.extend({font:T})}withTextFontFamily(T){return this.extend({fontFamily:T,font:""})}withTextFontWeight(T){return this.extend({fontWeight:T,font:""})}withTextFontShape(T){return this.extend({fontShape:T,font:""})}sizingClasses(T){return T.size!==this.size?["sizing","reset-size"+T.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Xe.BASESIZE?["sizing","reset-size"+this.size,"size"+Xe.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=Ft(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Xe.BASESIZE=6;var Qe=Xe;const ut={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},mt={ex:!0,em:!0,mu:!0},ht=function(N){return typeof N!="string"&&(N=N.unit),N in ut||N in mt||N==="ex"},Ot=function(N,T){let P;if(N.unit in ut)P=ut[N.unit]/T.fontMetrics().ptPerEm/T.sizeMultiplier;else if(N.unit==="mu")P=T.fontMetrics().cssEmPerMu;else{let B;if(T.style.isTight()?B=T.havingStyle(T.style.text()):B=T,N.unit==="ex")P=B.fontMetrics().xHeight;else if(N.unit==="em")P=B.fontMetrics().quad;else throw new a("Invalid unit: '"+N.unit+"'");B!==T&&(P*=B.sizeMultiplier/T.sizeMultiplier)}return Math.min(N.number*P,T.maxSize)},nt=function(N){return+N.toFixed(4)+"em"},sr=function(N){return N.filter(T=>T).join(" ")},kr=function(N,T,P){if(this.classes=N||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=P||{},T){T.style.isTight()&&this.classes.push("mtight");const B=T.getColor();B&&(this.style.color=B)}},Er=function(N){const T=document.createElement(N);T.className=sr(this.classes);for(const P in this.style)this.style.hasOwnProperty(P)&&(T.style[P]=this.style[P]);for(const P in this.attributes)this.attributes.hasOwnProperty(P)&&T.setAttribute(P,this.attributes[P]);for(let P=0;P<this.children.length;P++)T.appendChild(this.children[P].toNode());return T},Gr=/[\s"'>/=\x00-\x1f]/,Ar=function(N){let T="<"+N;this.classes.length&&(T+=' class="'+v.escape(sr(this.classes))+'"');let P="";for(const B in this.style)this.style.hasOwnProperty(B)&&(P+=v.hyphenate(B)+":"+this.style[B]+";");P&&(T+=' style="'+v.escape(P)+'"');for(const B in this.attributes)if(this.attributes.hasOwnProperty(B)){if(Gr.test(B))throw new a("Invalid attribute name '"+B+"'");T+=" "+B+'="'+v.escape(this.attributes[B])+'"'}T+=">";for(let B=0;B<this.children.length;B++)T+=this.children[B].toMarkup();return T+="</"+N+">",T};class vr{constructor(T,P,B,J){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,kr.call(this,T,B,J),this.children=P||[]}setAttribute(T,P){this.attributes[T]=P}hasClass(T){return this.classes.includes(T)}toNode(){return Er.call(this,"span")}toMarkup(){return Ar.call(this,"span")}}class Ee{constructor(T,P,B,J){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,kr.call(this,P,J),this.children=B||[],this.setAttribute("href",T)}setAttribute(T,P){this.attributes[T]=P}hasClass(T){return this.classes.includes(T)}toNode(){return Er.call(this,"a")}toMarkup(){return Ar.call(this,"a")}}class Be{constructor(T,P,B){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=P,this.src=T,this.classes=["mord"],this.style=B}hasClass(T){return this.classes.includes(T)}toNode(){const T=document.createElement("img");T.src=this.src,T.alt=this.alt,T.className="mord";for(const P in this.style)this.style.hasOwnProperty(P)&&(T.style[P]=this.style[P]);return T}toMarkup(){let T='<img src="'+v.escape(this.src)+'"'+(' alt="'+v.escape(this.alt)+'"'),P="";for(const B in this.style)this.style.hasOwnProperty(B)&&(P+=v.hyphenate(B)+":"+this.style[B]+";");return P&&(T+=' style="'+v.escape(P)+'"'),T+="'/>",T}}const qe={:"",:"",:"",:""};class Ye{constructor(T,P,B,J,ce,ve,Te,Oe){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=T,this.height=P||0,this.depth=B||0,this.italic=J||0,this.skew=ce||0,this.width=ve||0,this.classes=Te||[],this.style=Oe||{},this.maxFontSize=0;const Ge=z(this.text.charCodeAt(0));Ge&&this.classes.push(Ge+"_fallback"),/[]/.test(this.text)&&(this.text=qe[this.text])}hasClass(T){return this.classes.includes(T)}toNode(){const T=document.createTextNode(this.text);let P=null;this.italic>0&&(P=document.createElement("span"),P.style.marginRight=nt(this.italic)),this.classes.length>0&&(P=P||document.createElement("span"),P.className=sr(this.classes));for(const B in this.style)this.style.hasOwnProperty(B)&&(P=P||document.createElement("span"),P.style[B]=this.style[B]);return P?(P.appendChild(T),P):T}toMarkup(){let T=!1,P="<span";this.classes.length&&(T=!0,P+=' class="',P+=v.escape(sr(this.classes)),P+='"');let B="";this.italic>0&&(B+="margin-right:"+this.italic+"em;");for(const ce in this.style)this.style.hasOwnProperty(ce)&&(B+=v.hyphenate(ce)+":"+this.style[ce]+";");B&&(T=!0,P+=' style="'+v.escape(B)+'"');const J=v.escape(this.text);return T?(P+=">",P+=J,P+="</span>",P):J}}class Lt{constructor(T,P){this.children=void 0,this.attributes=void 0,this.children=T||[],this.attributes=P||{}}toNode(){const P=document.createElementNS("http://www.w3.org/2000/svg","svg");for(const B in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,B)&&P.setAttribute(B,this.attributes[B]);for(let B=0;B<this.children.length;B++)P.appendChild(this.children[B].toNode());return P}toMarkup(){let T='<svg xmlns="http://www.w3.org/2000/svg"';for(const P in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,P)&&(T+=" "+P+'="'+v.escape(this.attributes[P])+'"');T+=">";for(let P=0;P<this.children.length;P++)T+=this.children[P].toMarkup();return T+="</svg>",T}}class ze{constructor(T,P){this.pathName=void 0,this.alternate=void 0,this.pathName=T,this.alternate=P}toNode(){const P=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?P.setAttribute("d",this.alternate):P.setAttribute("d",Ue[this.pathName]),P}toMarkup(){return this.alternate?'<path d="'+v.escape(this.alternate)+'"/>':'<path d="'+v.escape(Ue[this.pathName])+'"/>'}}class it{constructor(T){this.attributes=void 0,this.attributes=T||{}}toNode(){const P=document.createElementNS("http://www.w3.org/2000/svg","line");for(const B in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,B)&&P.setAttribute(B,this.attributes[B]);return P}toMarkup(){let T="<line";for(const P in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,P)&&(T+=" "+P+'="'+v.escape(this.attributes[P])+'"');return T+="/>",T}}function Le(N){if(N instanceof Ye)return N;throw new Error("Expected symbolNode but got "+String(N)+".")}function st(N){if(N instanceof vr)return N;throw new Error("Expected span<HtmlDomNode> but got "+String(N)+".")}const rt={bin:1,close:1,inner:1,open:1,punct:1,rel:1},qt={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Xt={math:{},text:{}};var Yt=Xt;function Z(N,T,P,B,J,ce){Xt[N][J]={font:T,group:P,replace:B},ce&&B&&(Xt[N][B]=Xt[N][J])}const ae="math",jt="text",G="main",ue="ams",Ce="accent-token",be="bin",Me="close",De="inner",Ve="mathord",bt="op-token",ot="open",dt="punct",ee="rel",je="spacing",ge="textord";Z(ae,G,ee,"","\\equiv",!0),Z(ae,G,ee,"","\\prec",!0),Z(ae,G,ee,"","\\succ",!0),Z(ae,G,ee,"","\\sim",!0),Z(ae,G,ee,"","\\perp"),Z(ae,G,ee,"","\\preceq",!0),Z(ae,G,ee,"","\\succeq",!0),Z(ae,G,ee,"","\\simeq",!0),Z(ae,G,ee,"","\\mid",!0),Z(ae,G,ee,"","\\ll",!0),Z(ae,G,ee,"","\\gg",!0),Z(ae,G,ee,"","\\asymp",!0),Z(ae,G,ee,"","\\parallel"),Z(ae,G,ee,"","\\bowtie",!0),Z(ae,G,ee,"","\\smile",!0),Z(ae,G,ee,"","\\sqsubseteq",!0),Z(ae,G,ee,"","\\sqsupseteq",!0),Z(ae,G,ee,"","\\doteq",!0),Z(ae,G,ee,"","\\frown",!0),Z(ae,G,ee,"","\\ni",!0),Z(ae,G,ee,"","\\propto",!0),Z(ae,G,ee,"","\\vdash",!0),Z(ae,G,ee,"","\\dashv",!0),Z(ae,G,ee,"","\\owns"),Z(ae,G,dt,".","\\ldotp"),Z(ae,G,dt,"","\\cdotp"),Z(ae,G,ge,"#","\\#"),Z(jt,G,ge,"#","\\#"),Z(ae,G,ge,"&","\\&"),Z(jt,G,ge,"&","\\&"),Z(ae,G,ge,"","\\aleph",!0),Z(ae,G,ge,"","\\forall",!0),Z(ae,G,ge,"","\\hbar",!0),Z(ae,G,ge,"","\\exists",!0),Z(ae,G,ge,"","\\nabla",!0),Z(ae,G,ge,"","\\flat",!0),Z(ae,G,ge,"","\\ell",!0),Z(ae,G,ge,"","\\natural",!0),Z(ae,G,ge,"","\\clubsuit",!0),Z(ae,G,ge,"","\\wp",!0),Z(ae,G,ge,"","\\sharp",!0),Z(ae,G,ge,"","\\diamondsuit",!0),Z(ae,G,ge,"","\\Re",!0),Z(ae,G,ge,"","\\heartsuit",!0),Z(ae,G,ge,"","\\Im",!0),Z(ae,G,ge,"","\\spadesuit",!0),Z(ae,G,ge,"","\\S",!0),Z(jt,G,ge,"","\\S"),Z(ae,G,ge,"","\\P",!0),Z(jt,G,ge,"","\\P"),Z(ae,G,ge,"","\\dag"),Z(jt,G,ge,"","\\dag"),Z(jt,G,ge,"","\\textdagger"),Z(ae,G,ge,"","\\ddag"),Z(jt,G,ge,"","\\ddag"),Z(jt,G,ge,"","\\textdaggerdbl"),Z(ae,G,Me,"","\\rmoustache",!0),Z(ae,G,ot,"","\\lmoustache",!0),Z(ae,G,Me,"","\\rgroup",!0),Z(ae,G,ot,"","\\lgroup",!0),Z(ae,G,be,"","\\mp",!0),Z(ae,G,be,"","\\ominus",!0),Z(ae,G,be,"","\\uplus",!0),Z(ae,G,be,"","\\sqcap",!0),Z(ae,G,be,"","\\ast"),Z(ae,G,be,"","\\sqcup",!0),Z(ae,G,be,"","\\bigcirc",!0),Z(ae,G,be,"","\\bullet",!0),Z(ae,G,be,"","\\ddagger"),Z(ae,G,be,"","\\wr",!0),Z(ae,G,be,"","\\amalg"),Z(ae,G,be,"&","\\And"),Z(ae,G,ee,"","\\longleftarrow",!0),Z(ae,G,ee,"","\\Leftarrow",!0),Z(ae,G,ee,"","\\Longleftarrow",!0),Z(ae,G,ee,"","\\longrightarrow",!0),Z(ae,G,ee,"","\\Rightarrow",!0),Z(ae,G,ee,"","\\Longrightarrow",!0),Z(ae,G,ee,"","\\leftrightarrow",!0),Z(ae,G,ee,"","\\longleftrightarrow",!0),Z(ae,G,ee,"","\\Leftrightarrow",!0),Z(ae,G,ee,"","\\Longleftrightarrow",!0),Z(ae,G,ee,"","\\mapsto",!0),Z(ae,G,ee,"","\\longmapsto",!0),Z(ae,G,ee,"","\\nearrow",!0),Z(ae,G,ee,"","\\hookleftarrow",!0),Z(ae,G,ee,"","\\hookrightarrow",!0),Z(ae,G,ee,"","\\searrow",!0),Z(ae,G,ee,"","\\leftharpoonup",!0),Z(ae,G,ee,"","\\rightharpoonup",!0),Z(ae,G,ee,"","\\swarrow",!0),Z(ae,G,ee,"","\\leftharpoondown",!0),Z(ae,G,ee,"","\\rightharpoondown",!0),Z(ae,G,ee,"","\\nwarrow",!0),Z(ae,G,ee,"","\\rightleftharpoons",!0),Z(ae,ue,ee,"","\\nless",!0),Z(ae,ue,ee,"","\\@nleqslant"),Z(ae,ue,ee,"","\\@nleqq"),Z(ae,ue,ee,"","\\lneq",!0),Z(ae,ue,ee,"","\\lneqq",!0),Z(ae,ue,ee,"","\\@lvertneqq"),Z(ae,ue,ee,"","\\lnsim",!0),Z(ae,ue,ee,"","\\lnapprox",!0),Z(ae,ue,ee,"","\\nprec",!0),Z(ae,ue,ee,"","\\npreceq",!0),Z(ae,ue,ee,"","\\precnsim",!0),Z(ae,ue,ee,"","\\precnapprox",!0),Z(ae,ue,ee,"","\\nsim",!0),Z(ae,ue,ee,"","\\@nshortmid"),Z(ae,ue,ee,"","\\nmid",!0),Z(ae,ue,ee,"","\\nvdash",!0),Z(ae,ue,ee,"","\\nvDash",!0),Z(ae,ue,ee,"","\\ntriangleleft"),Z(ae,ue,ee,"","\\ntrianglelefteq",!0),Z(ae,ue,ee,"","\\subsetneq",!0),Z(ae,ue,ee,"","\\@varsubsetneq"),Z(ae,ue,ee,"","\\subsetneqq",!0),Z(ae,ue,ee,"","\\@varsubsetneqq"),Z(ae,ue,ee,"","\\ngtr",!0),Z(ae,ue,ee,"","\\@ngeqslant"),Z(ae,ue,ee,"","\\@ngeqq"),Z(ae,ue,ee,"","\\gneq",!0),Z(ae,ue,ee,"","\\gneqq",!0),Z(ae,ue,ee,"","\\@gvertneqq"),Z(ae,ue,ee,"","\\gnsim",!0),Z(ae,ue,ee,"","\\gnapprox",!0),Z(ae,ue,ee,"","\\nsucc",!0),Z(ae,ue,ee,"","\\nsucceq",!0),Z(ae,ue,ee,"","\\succnsim",!0),Z(ae,ue,ee,"","\\succnapprox",!0),Z(ae,ue,ee,"","\\ncong",!0),Z(ae,ue,ee,"","\\@nshortparallel"),Z(ae,ue,ee,"","\\nparallel",!0),Z(ae,ue,ee,"","\\nVDash",!0),Z(ae,ue,ee,"","\\ntriangleright"),Z(ae,ue,ee,"","\\ntrianglerighteq",!0),Z(ae,ue,ee,"","\\@nsupseteqq"),Z(ae,ue,ee,"","\\supsetneq",!0),Z(ae,ue,ee,"","\\@varsupsetneq"),Z(ae,ue,ee,"","\\supsetneqq",!0),Z(ae,ue,ee,"","\\@varsupsetneqq"),Z(ae,ue,ee,"","\\nVdash",!0),Z(ae,ue,ee,"","\\precneqq",!0),Z(ae,ue,ee,"","\\succneqq",!0),Z(ae,ue,ee,"","\\@nsubseteqq"),Z(ae,ue,be,"","\\unlhd"),Z(ae,ue,be,"","\\unrhd"),Z(ae,ue,ee,"","\\nleftarrow",!0),Z(ae,ue,ee,"","\\nrightarrow",!0),Z(ae,ue,ee,"","\\nLeftarrow",!0),Z(ae,ue,ee,"","\\nRightarrow",!0),Z(ae,ue,ee,"","\\nleftrightarrow",!0),Z(ae,ue,ee,"","\\nLeftrightarrow",!0),Z(ae,ue,ee,"","\\vartriangle"),Z(ae,ue,ge,"","\\hslash"),Z(ae,ue,ge,"","\\triangledown"),Z(ae,ue,ge,"","\\lozenge"),Z(ae,ue,ge,"","\\circledS"),Z(ae,ue,ge,"","\\circledR"),Z(jt,ue,ge,"","\\circledR"),Z(ae,ue,ge,"","\\measuredangle",!0),Z(ae,ue,ge,"","\\nexists"),Z(ae,ue,ge,"","\\mho"),Z(ae,ue,ge,"","\\Finv",!0),Z(ae,ue,ge,"","\\Game",!0),Z(ae,ue,ge,"","\\backprime"),Z(ae,ue,ge,"","\\blacktriangle"),Z(ae,ue,ge,"","\\blacktriangledown"),Z(ae,ue,ge,"","\\blacksquare"),Z(ae,ue,ge,"","\\blacklozenge"),Z(ae,ue,ge,"","\\bigstar"),Z(ae,ue,ge,"","\\sphericalangle",!0),Z(ae,ue,ge,"","\\complement",!0),Z(ae,ue,ge,"","\\eth",!0),Z(jt,G,ge,"",""),Z(ae,ue,ge,"","\\diagup"),Z(ae,ue,ge,"","\\diagdown"),Z(ae,ue,ge,"","\\square"),Z(ae,ue,ge,"","\\Box"),Z(ae,ue,ge,"","\\Diamond"),Z(ae,ue,ge,"","\\yen",!0),Z(jt,ue,ge,"","\\yen",!0),Z(ae,ue,ge,"","\\checkmark",!0),Z(jt,ue,ge,"","\\checkmark"),Z(ae,ue,ge,"","\\beth",!0),Z(ae,ue,ge,"","\\daleth",!0),Z(ae,ue,ge,"","\\gimel",!0),Z(ae,ue,ge,"","\\digamma",!0),Z(ae,ue,ge,"","\\varkappa"),Z(ae,ue,ot,"","\\@ulcorner",!0),Z(ae,ue,Me,"","\\@urcorner",!0),Z(ae,ue,ot,"","\\@llcorner",!0),Z(ae,ue,Me,"","\\@lrcorner",!0),Z(ae,ue,ee,"","\\leqq",!0),Z(ae,ue,ee,"","\\leqslant",!0),Z(ae,ue,ee,"","\\eqslantless",!0),Z(ae,ue,ee,"","\\lesssim",!0),Z(ae,ue,ee,"","\\lessapprox",!0),Z(ae,ue,ee,"","\\approxeq",!0),Z(ae,ue,be,"","\\lessdot"),Z(ae,ue,ee,"","\\lll",!0),Z(ae,ue,ee,"","\\lessgtr",!0),Z(ae,ue,ee,"","\\lesseqgtr",!0),Z(ae,ue,ee,"","\\lesseqqgtr",!0),Z(ae,ue,ee,"","\\doteqdot"),Z(ae,ue,ee,"","\\risingdotseq",!0),Z(ae,ue,ee,"","\\fallingdotseq",!0),Z(ae,ue,ee,"","\\backsim",!0),Z(ae,ue,ee,"","\\backsimeq",!0),Z(ae,ue,ee,"","\\subseteqq",!0),Z(ae,ue,ee,"","\\Subset",!0),Z(ae,ue,ee,"","\\sqsubset",!0),Z(ae,ue,ee,"","\\preccurlyeq",!0),Z(ae,ue,ee,"","\\curlyeqprec",!0),Z(ae,ue,ee,"","\\precsim",!0),Z(ae,ue,ee,"","\\precapprox",!0),Z(ae,ue,ee,"","\\vartriangleleft"),Z(ae,ue,ee,"","\\trianglelefteq"),Z(ae,ue,ee,"","\\vDash",!0),Z(ae,ue,ee,"","\\Vvdash",!0),Z(ae,ue,ee,"","\\smallsmile"),Z(ae,ue,ee,"","\\smallfrown"),Z(ae,ue,ee,"","\\bumpeq",!0),Z(ae,ue,ee,"","\\Bumpeq",!0),Z(ae,ue,ee,"","\\geqq",!0),Z(ae,ue,ee,"","\\geqslant",!0),Z(ae,ue,ee,"","\\eqslantgtr",!0),Z(ae,ue,ee,"","\\gtrsim",!0),Z(ae,ue,ee,"","\\gtrapprox",!0),Z(ae,ue,be,"","\\gtrdot"),Z(ae,ue,ee,"","\\ggg",!0),Z(ae,ue,ee,"","\\gtrless",!0),Z(ae,ue,ee,"","\\gtreqless",!0),Z(ae,ue,ee,"","\\gtreqqless",!0),Z(ae,ue,ee,"","\\eqcirc",!0),Z(ae,ue,ee,"","\\circeq",!0),Z(ae,ue,ee,"","\\triangleq",!0),Z(ae,ue,ee,"","\\thicksim"),Z(ae,ue,ee,"","\\thickapprox"),Z(ae,ue,ee,"","\\supseteqq",!0),Z(ae,ue,ee,"","\\Supset",!0),Z(ae,ue,ee,"","\\sqsupset",!0),Z(ae,ue,ee,"","\\succcurlyeq",!0),Z(ae,ue,ee,"","\\curlyeqsucc",!0),Z(ae,ue,ee,"","\\succsim",!0),Z(ae,ue,ee,"","\\succapprox",!0),Z(ae,ue,ee,"","\\vartriangleright"),Z(ae,ue,ee,"","\\trianglerighteq"),Z(ae,ue,ee,"","\\Vdash",!0),Z(ae,ue,ee,"","\\shortmid"),Z(ae,ue,ee,"","\\shortparallel"),Z(ae,ue,ee,"","\\between",!0),Z(ae,ue,ee,"","\\pitchfork",!0),Z(ae,ue,ee,"","\\varpropto"),Z(ae,ue,ee,"","\\blacktriangleleft"),Z(ae,ue,ee,"","\\therefore",!0),Z(ae,ue,ee,"","\\backepsilon"),Z(ae,ue,ee,"","\\blacktriangleright"),Z(ae,ue,ee,"","\\because",!0),Z(ae,ue,ee,"","\\llless"),Z(ae,ue,ee,"","\\gggtr"),Z(ae,ue,be,"","\\lhd"),Z(ae,ue,be,"","\\rhd"),Z(ae,ue,ee,"","\\eqsim",!0),Z(ae,G,ee,"","\\Join"),Z(ae,ue,ee,"","\\Doteq",!0),Z(ae,ue,be,"","\\dotplus",!0),Z(ae,ue,be,"","\\smallsetminus"),Z(ae,ue,be,"","\\Cap",!0),Z(ae,ue,be,"","\\Cup",!0),Z(ae,ue,be,"","\\doublebarwedge",!0),Z(ae,ue,be,"","\\boxminus",!0),Z(ae,ue,be,"","\\boxplus",!0),Z(ae,ue,be,"","\\divideontimes",!0),Z(ae,ue,be,"","\\ltimes",!0),Z(ae,ue,be,"","\\rtimes",!0),Z(ae,ue,be,"","\\leftthreetimes",!0),Z(ae,ue,be,"","\\rightthreetimes",!0),Z(ae,ue,be,"","\\curlywedge",!0),Z(ae,ue,be,"","\\curlyvee",!0),Z(ae,ue,be,"","\\circleddash",!0),Z(ae,ue,be,"","\\circledast",!0),Z(ae,ue,be,"","\\centerdot"),Z(ae,ue,be,"","\\intercal",!0),Z(ae,ue,be,"","\\doublecap"),Z(ae,ue,be,"","\\doublecup"),Z(ae,ue,be,"","\\boxtimes",!0),Z(ae,ue,ee,"","\\dashrightarrow",!0),Z(ae,ue,ee,"","\\dashleftarrow",!0),Z(ae,ue,ee,"","\\leftleftarrows",!0),Z(ae,ue,ee,"","\\leftrightarrows",!0),Z(ae,ue,ee,"","\\Lleftarrow",!0),Z(ae,ue,ee,"","\\twoheadleftarrow",!0),Z(ae,ue,ee,"","\\leftarrowtail",!0),Z(ae,ue,ee,"","\\looparrowleft",!0),Z(ae,ue,ee,"","\\leftrightharpoons",!0),Z(ae,ue,ee,"","\\curvearrowleft",!0),Z(ae,ue,ee,"","\\circlearrowleft",!0),Z(ae,ue,ee,"","\\Lsh",!0),Z(ae,ue,ee,"","\\upuparrows",!0),Z(ae,ue,ee,"","\\upharpoonleft",!0),Z(ae,ue,ee,"","\\downharpoonleft",!0),Z(ae,G,ee,"","\\origof",!0),Z(ae,G,ee,"","\\imageof",!0),Z(ae,ue,ee,"","\\multimap",!0),Z(ae,ue,ee,"","\\leftrightsquigarrow",!0),Z(ae,ue,ee,"","\\rightrightarrows",!0),Z(ae,ue,ee,"","\\rightleftarrows",!0),Z(ae,ue,ee,"","\\twoheadrightarrow",!0),Z(ae,ue,ee,"","\\rightarrowtail",!0),Z(ae,ue,ee,"","\\looparrowright",!0),Z(ae,ue,ee,"","\\curvearrowright",!0),Z(ae,ue,ee,"","\\circlearrowright",!0),Z(ae,ue,ee,"","\\Rsh",!0),Z(ae,ue,ee,"","\\downdownarrows",!0),Z(ae,ue,ee,"","\\upharpoonright",!0),Z(ae,ue,ee,"","\\downharpoonright",!0),Z(ae,ue,ee,"","\\rightsquigarrow",!0),Z(ae,ue,ee,"","\\leadsto"),Z(ae,ue,ee,"","\\Rrightarrow",!0),Z(ae,ue,ee,"","\\restriction"),Z(ae,G,ge,"","`"),Z(ae,G,ge,"$","\\$"),Z(jt,G,ge,"$","\\$"),Z(jt,G,ge,"$","\\textdollar"),Z(ae,G,ge,"%","\\%"),Z(jt,G,ge,"%","\\%"),Z(ae,G,ge,"_","\\_"),Z(jt,G,ge,"_","\\_"),Z(jt,G,ge,"_","\\textunderscore"),Z(ae,G,ge,"","\\angle",!0),Z(ae,G,ge,"","\\infty",!0),Z(ae,G,ge,"","\\prime"),Z(ae,G,ge,"","\\triangle"),Z(ae,G,ge,"","\\Gamma",!0),Z(ae,G,ge,"","\\Delta",!0),Z(ae,G,ge,"","\\Theta",!0),Z(ae,G,ge,"","\\Lambda",!0),Z(ae,G,ge,"","\\Xi",!0),Z(ae,G,ge,"","\\Pi",!0),Z(ae,G,ge,"","\\Sigma",!0),Z(ae,G,ge,"","\\Upsilon",!0),Z(ae,G,ge,"","\\Phi",!0),Z(ae,G,ge,"","\\Psi",!0),Z(ae,G,ge,"","\\Omega",!0),Z(ae,G,ge,"A",""),Z(ae,G,ge,"B",""),Z(ae,G,ge,"E",""),Z(ae,G,ge,"Z",""),Z(ae,G,ge,"H",""),Z(ae,G,ge,"I",""),Z(ae,G,ge,"K",""),Z(ae,G,ge,"M",""),Z(ae,G,ge,"N",""),Z(ae,G,ge,"O",""),Z(ae,G,ge,"P",""),Z(ae,G,ge,"T",""),Z(ae,G,ge,"X",""),Z(ae,G,ge,"","\\neg",!0),Z(ae,G,ge,"","\\lnot"),Z(ae,G,ge,"","\\top"),Z(ae,G,ge,"","\\bot"),Z(ae,G,ge,"","\\emptyset"),Z(ae,ue,ge,"","\\varnothing"),Z(ae,G,Ve,"","\\alpha",!0),Z(ae,G,Ve,"","\\beta",!0),Z(ae,G,Ve,"","\\gamma",!0),Z(ae,G,Ve,"","\\delta",!0),Z(ae,G,Ve,"","\\epsilon",!0),Z(ae,G,Ve,"","\\zeta",!0),Z(ae,G,Ve,"","\\eta",!0),Z(ae,G,Ve,"","\\theta",!0),Z(ae,G,Ve,"","\\iota",!0),Z(ae,G,Ve,"","\\kappa",!0),Z(ae,G,Ve,"","\\lambda",!0),Z(ae,G,Ve,"","\\mu",!0),Z(ae,G,Ve,"","\\nu",!0),Z(ae,G,Ve,"","\\xi",!0),Z(ae,G,Ve,"","\\omicron",!0),Z(ae,G,Ve,"","\\pi",!0),Z(ae,G,Ve,"","\\rho",!0),Z(ae,G,Ve,"","\\sigma",!0),Z(ae,G,Ve,"","\\tau",!0),Z(ae,G,Ve,"","\\upsilon",!0),Z(ae,G,Ve,"","\\phi",!0),Z(ae,G,Ve,"","\\chi",!0),Z(ae,G,Ve,"","\\psi",!0),Z(ae,G,Ve,"","\\omega",!0),Z(ae,G,Ve,"","\\varepsilon",!0),Z(ae,G,Ve,"","\\vartheta",!0),Z(ae,G,Ve,"","\\varpi",!0),Z(ae,G,Ve,"","\\varrho",!0),Z(ae,G,Ve,"","\\varsigma",!0),Z(ae,G,Ve,"","\\varphi",!0),Z(ae,G,be,"","*",!0),Z(ae,G,be,"+","+"),Z(ae,G,be,"","-",!0),Z(ae,G,be,"","\\cdot",!0),Z(ae,G,be,"","\\circ",!0),Z(ae,G,be,"","\\div",!0),Z(ae,G,be,"","\\pm",!0),Z(ae,G,be,"","\\times",!0),Z(ae,G,be,"","\\cap",!0),Z(ae,G,be,"","\\cup",!0),Z(ae,G,be,"","\\setminus",!0),Z(ae,G,be,"","\\land"),Z(ae,G,be,"","\\lor"),Z(ae,G,be,"","\\wedge",!0),Z(ae,G,be,"","\\vee",!0),Z(ae,G,ge,"","\\surd"),Z(ae,G,ot,"","\\langle",!0),Z(ae,G,ot,"","\\lvert"),Z(ae,G,ot,"","\\lVert"),Z(ae,G,Me,"?","?"),Z(ae,G,Me,"!","!"),Z(ae,G,Me,"","\\rangle",!0),Z(ae,G,Me,"","\\rvert"),Z(ae,G,Me,"","\\rVert"),Z(ae,G,ee,"=","="),Z(ae,G,ee,":",":"),Z(ae,G,ee,"","\\approx",!0),Z(ae,G,ee,"","\\cong",!0),Z(ae,G,ee,"","\\ge"),Z(ae,G,ee,"","\\geq",!0),Z(ae,G,ee,"","\\gets"),Z(ae,G,ee,">","\\gt",!0),Z(ae,G,ee,"","\\in",!0),Z(ae,G,ee,"","\\@not"),Z(ae,G,ee,"","\\subset",!0),Z(ae,G,ee,"","\\supset",!0),Z(ae,G,ee,"","\\subseteq",!0),Z(ae,G,ee,"","\\supseteq",!0),Z(ae,ue,ee,"","\\nsubseteq",!0),Z(ae,ue,ee,"","\\nsupseteq",!0),Z(ae,G,ee,"","\\models"),Z(ae,G,ee,"","\\leftarrow",!0),Z(ae,G,ee,"","\\le"),Z(ae,G,ee,"","\\leq",!0),Z(ae,G,ee,"<","\\lt",!0),Z(ae,G,ee,"","\\rightarrow",!0),Z(ae,G,ee,"","\\to"),Z(ae,ue,ee,"","\\ngeq",!0),Z(ae,ue,ee,"","\\nleq",!0),Z(ae,G,je,"","\\ "),Z(ae,G,je,"","\\space"),Z(ae,G,je,"","\\nobreakspace"),Z(jt,G,je,"","\\ "),Z(jt,G,je,""," "),Z(jt,G,je,"","\\space"),Z(jt,G,je,"","\\nobreakspace"),Z(ae,G,je,null,"\\nobreak"),Z(ae,G,je,null,"\\allowbreak"),Z(ae,G,dt,",",","),Z(ae,G,dt,";",";"),Z(ae,ue,be,"","\\barwedge",!0),Z(ae,ue,be,"","\\veebar",!0),Z(ae,G,be,"","\\odot",!0),Z(ae,G,be,"","\\oplus",!0),Z(ae,G,be,"","\\otimes",!0),Z(ae,G,ge,"","\\partial",!0),Z(ae,G,be,"","\\oslash",!0),Z(ae,ue,be,"","\\circledcirc",!0),Z(ae,ue,be,"","\\boxdot",!0),Z(ae,G,be,"","\\bigtriangleup"),Z(ae,G,be,"","\\bigtriangledown"),Z(ae,G,be,"","\\dagger"),Z(ae,G,be,"","\\diamond"),Z(ae,G,be,"","\\star"),Z(ae,G,be,"","\\triangleleft"),Z(ae,G,be,"","\\triangleright"),Z(ae,G,ot,"{","\\{"),Z(jt,G,ge,"{","\\{"),Z(jt,G,ge,"{","\\textbraceleft"),Z(ae,G,Me,"}","\\}"),Z(jt,G,ge,"}","\\}"),Z(jt,G,ge,"}","\\textbraceright"),Z(ae,G,ot,"{","\\lbrace"),Z(ae,G,Me,"}","\\rbrace"),Z(ae,G,ot,"[","\\lbrack",!0),Z(jt,G,ge,"[","\\lbrack",!0),Z(ae,G,Me,"]","\\rbrack",!0),Z(jt,G,ge,"]","\\rbrack",!0),Z(ae,G,ot,"(","\\lparen",!0),Z(ae,G,Me,")","\\rparen",!0),Z(jt,G,ge,"<","\\textless",!0),Z(jt,G,ge,">","\\textgreater",!0),Z(ae,G,ot,"","\\lfloor",!0),Z(ae,G,Me,"","\\rfloor",!0),Z(ae,G,ot,"","\\lceil",!0),Z(ae,G,Me,"","\\rceil",!0),Z(ae,G,ge,"\\","\\backslash"),Z(ae,G,ge,"","|"),Z(ae,G,ge,"","\\vert"),Z(jt,G,ge,"|","\\textbar",!0),Z(ae,G,ge,"","\\|"),Z(ae,G,ge,"","\\Vert"),Z(jt,G,ge,"","\\textbardbl"),Z(jt,G,ge,"~","\\textasciitilde"),Z(jt,G,ge,"\\","\\textbackslash"),Z(jt,G,ge,"^","\\textasciicircum"),Z(ae,G,ee,"","\\uparrow",!0),Z(ae,G,ee,"","\\Uparrow",!0),Z(ae,G,ee,"","\\downarrow",!0),Z(ae,G,ee,"","\\Downarrow",!0),Z(ae,G,ee,"","\\updownarrow",!0),Z(ae,G,ee,"","\\Updownarrow",!0),Z(ae,G,bt,"","\\coprod"),Z(ae,G,bt,"","\\bigvee"),Z(ae,G,bt,"","\\bigwedge"),Z(ae,G,bt,"","\\biguplus"),Z(ae,G,bt,"","\\bigcap"),Z(ae,G,bt,"","\\bigcup"),Z(ae,G,bt,"","\\int"),Z(ae,G,bt,"","\\intop"),Z(ae,G,bt,"","\\iint"),Z(ae,G,bt,"","\\iiint"),Z(ae,G,bt,"","\\prod"),Z(ae,G,bt,"","\\sum"),Z(ae,G,bt,"","\\bigotimes"),Z(ae,G,bt,"","\\bigoplus"),Z(ae,G,bt,"","\\bigodot"),Z(ae,G,bt,"","\\oint"),Z(ae,G,bt,"","\\oiint"),Z(ae,G,bt,"","\\oiiint"),Z(ae,G,bt,"","\\bigsqcup"),Z(ae,G,bt,"","\\smallint"),Z(jt,G,De,"","\\textellipsis"),Z(ae,G,De,"","\\mathellipsis"),Z(jt,G,De,"","\\ldots",!0),Z(ae,G,De,"","\\ldots",!0),Z(ae,G,De,"","\\@cdots",!0),Z(ae,G,De,"","\\ddots",!0),Z(ae,G,ge,"","\\varvdots"),Z(jt,G,ge,"","\\varvdots"),Z(ae,G,Ce,"","\\acute"),Z(ae,G,Ce,"","\\grave"),Z(ae,G,Ce,"","\\ddot"),Z(ae,G,Ce,"~","\\tilde"),Z(ae,G,Ce,"","\\bar"),Z(ae,G,Ce,"","\\breve"),Z(ae,G,Ce,"","\\check"),Z(ae,G,Ce,"^","\\hat"),Z(ae,G,Ce,"","\\vec"),Z(ae,G,Ce,"","\\dot"),Z(ae,G,Ce,"","\\mathring"),Z(ae,G,Ve,"","\\@imath"),Z(ae,G,Ve,"","\\@jmath"),Z(ae,G,ge,"",""),Z(ae,G,ge,"",""),Z(jt,G,ge,"","\\i",!0),Z(jt,G,ge,"","\\j",!0),Z(jt,G,ge,"","\\ss",!0),Z(jt,G,ge,"","\\ae",!0),Z(jt,G,ge,"","\\oe",!0),Z(jt,G,ge,"","\\o",!0),Z(jt,G,ge,"","\\AE",!0),Z(jt,G,ge,"","\\OE",!0),Z(jt,G,ge,"","\\O",!0),Z(jt,G,Ce,"","\\'"),Z(jt,G,Ce,"","\\`"),Z(jt,G,Ce,"","\\^"),Z(jt,G,Ce,"","\\~"),Z(jt,G,Ce,"","\\="),Z(jt,G,Ce,"","\\u"),Z(jt,G,Ce,"","\\."),Z(jt,G,Ce,"","\\c"),Z(jt,G,Ce,"","\\r"),Z(jt,G,Ce,"","\\v"),Z(jt,G,Ce,"",'\\"'),Z(jt,G,Ce,"","\\H"),Z(jt,G,Ce,"","\\textcircled");const Ke={"--":!0,"---":!0,"``":!0,"''":!0};Z(jt,G,ge,"","--",!0),Z(jt,G,ge,"","\\textendash"),Z(jt,G,ge,"","---",!0),Z(jt,G,ge,"","\\textemdash"),Z(jt,G,ge,"","`",!0),Z(jt,G,ge,"","\\textquoteleft"),Z(jt,G,ge,"","'",!0),Z(jt,G,ge,"","\\textquoteright"),Z(jt,G,ge,"","``",!0),Z(jt,G,ge,"","\\textquotedblleft"),Z(jt,G,ge,"","''",!0),Z(jt,G,ge,"","\\textquotedblright"),Z(ae,G,ge,"","\\degree",!0),Z(jt,G,ge,"","\\degree"),Z(jt,G,ge,"","\\textdegree",!0),Z(ae,G,ge,"","\\pounds"),Z(ae,G,ge,"","\\mathsterling",!0),Z(jt,G,ge,"","\\pounds"),Z(jt,G,ge,"","\\textsterling",!0),Z(ae,ue,ge,"","\\maltese"),Z(jt,ue,ge,"","\\maltese");const tt='0123456789/@."';for(let N=0;N<tt.length;N++){const T=tt.charAt(N);Z(ae,G,ge,T,T)}const Tt='0123456789!@*()-=+";:?/.,';for(let N=0;N<Tt.length;N++){const T=Tt.charAt(N);Z(jt,G,ge,T,T)}const cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let N=0;N<cr.length;N++){const T=cr.charAt(N);Z(ae,G,Ve,T,T),Z(jt,G,ge,T,T)}Z(ae,ue,ge,"C",""),Z(jt,ue,ge,"C",""),Z(ae,ue,ge,"H",""),Z(jt,ue,ge,"H",""),Z(ae,ue,ge,"N",""),Z(jt,ue,ge,"N",""),Z(ae,ue,ge,"P",""),Z(jt,ue,ge,"P",""),Z(ae,ue,ge,"Q",""),Z(jt,ue,ge,"Q",""),Z(ae,ue,ge,"R",""),Z(jt,ue,ge,"R",""),Z(ae,ue,ge,"Z",""),Z(jt,ue,ge,"Z",""),Z(ae,G,Ve,"h",""),Z(jt,G,Ve,"h","");let Vt="";for(let N=0;N<cr.length;N++){const T=cr.charAt(N);Vt=String.fromCharCode(55349,56320+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,56372+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,56424+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,56580+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,56684+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,56736+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,56788+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,56840+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,56944+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),N<26&&(Vt=String.fromCharCode(55349,56632+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,56476+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt))}Vt="",Z(ae,G,Ve,"k",Vt),Z(jt,G,ge,"k",Vt);for(let N=0;N<10;N++){const T=N.toString();Vt=String.fromCharCode(55349,57294+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,57314+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,57324+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt),Vt=String.fromCharCode(55349,57334+N),Z(ae,G,Ve,T,Vt),Z(jt,G,ge,T,Vt)}const $t="";for(let N=0;N<$t.length;N++){const T=$t.charAt(N);Z(ae,G,Ve,T,T),Z(jt,G,ge,T,T)}const mr=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Zr=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],jr=function(N,T){const P=N.charCodeAt(0),B=N.charCodeAt(1),J=(P-55296)*1024+(B-56320)+65536,ce=T==="math"?0:1;if(119808<=J&&J<120484){const ve=Math.floor((J-119808)/26);return[mr[ve][2],mr[ve][ce]]}else if(120782<=J&&J<=120831){const ve=Math.floor((J-120782)/10);return[Zr[ve][2],Zr[ve][ce]]}else{if(J===120485||J===120486)return[mr[0][2],mr[0][ce]];if(120486<J&&J<120782)return["",""];throw new a("Unsupported character: "+N)}};class Pr{constructor(T){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=T,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(T){return this.classes.includes(T)}toNode(){const T=document.createDocumentFragment();for(let P=0;P<this.children.length;P++)T.appendChild(this.children[P].toNode());return T}toMarkup(){let T="";for(let P=0;P<this.children.length;P++)T+=this.children[P].toMarkup();return T}toText(){const T=P=>P.toText();return this.children.map(T).join("")}}const xn=function(N,T,P){return Yt[P][N]&&Yt[P][N].replace&&(N=Yt[P][N].replace),{value:N,metrics:At(N,T,P)}},Kr=function(N,T,P,B,J){const ce=xn(N,T,P),ve=ce.metrics;N=ce.value;let Te;if(ve){let Oe=ve.italic;(P==="text"||B&&B.font==="mathit")&&(Oe=0),Te=new Ye(N,ve.height,ve.depth,Oe,ve.skew,ve.width,J)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+N+"' in style '"+T+"' and mode '"+P+"'")),Te=new Ye(N,0,0,0,0,0,J);if(B){Te.maxFontSize=B.sizeMultiplier,B.style.isTight()&&Te.classes.push("mtight");const Oe=B.getColor();Oe&&(Te.style.color=Oe)}return Te},Ir=function(N,T,P,B){return B===void 0&&(B=[]),P.font==="boldsymbol"&&xn(N,"Main-Bold",T).metrics?Kr(N,"Main-Bold",T,P,B.concat(["mathbf"])):N==="\\"||Yt[T][N].font==="main"?Kr(N,"Main-Regular",T,P,B):Kr(N,"AMS-Regular",T,P,B.concat(["amsrm"]))},Os=function(N,T,P,B,J){return J!=="textord"&&xn(N,"Math-BoldItalic",T).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},Yn=function(N,T,P){const B=N.mode,J=N.text,ce=["mord"],ve=B==="math"||B==="text"&&T.font,Te=ve?T.font:T.fontFamily;let Oe="",Ge="";if(J.charCodeAt(0)===55349&&([Oe,Ge]=jr(J,B)),Oe.length>0)return Kr(J,Oe,B,T,ce.concat(Ge));if(Te){let $e,at;if(Te==="boldsymbol"){const Ct=Os(J,B,T,ce,P);$e=Ct.fontName,at=[Ct.fontClass]}else ve?($e=Jt[Te].fontName,at=[Te]):($e=tr(Te,T.fontWeight,T.fontShape),at=[Te,T.fontWeight,T.fontShape]);if(xn(J,$e,B).metrics)return Kr(J,$e,B,T,ce.concat(at));if(Ke.hasOwnProperty(J)&&$e.slice(0,10)==="Typewriter"){const Ct=[];for(let rr=0;rr<J.length;rr++)Ct.push(Kr(J[rr],$e,B,T,ce.concat(at)));return Xr(Ct)}}if(P==="mathord")return Kr(J,"Math-Italic",B,T,ce.concat(["mathnormal"]));if(P==="textord"){const $e=Yt[B][J]&&Yt[B][J].font;if($e==="ams"){const at=tr("amsrm",T.fontWeight,T.fontShape);return Kr(J,at,B,T,ce.concat("amsrm",T.fontWeight,T.fontShape))}else if($e==="main"||!$e){const at=tr("textrm",T.fontWeight,T.fontShape);return Kr(J,at,B,T,ce.concat(T.fontWeight,T.fontShape))}else{const at=tr($e,T.fontWeight,T.fontShape);return Kr(J,at,B,T,ce.concat(at,T.fontWeight,T.fontShape))}}else throw new Error("unexpected type: "+P+" in makeOrd")},Vn=(N,T)=>{if(sr(N.classes)!==sr(T.classes)||N.skew!==T.skew||N.maxFontSize!==T.maxFontSize)return!1;if(N.classes.length===1){const P=N.classes[0];if(P==="mbin"||P==="mord")return!1}for(const P in N.style)if(N.style.hasOwnProperty(P)&&N.style[P]!==T.style[P])return!1;for(const P in T.style)if(T.style.hasOwnProperty(P)&&N.style[P]!==T.style[P])return!1;return!0},ts=N=>{for(let T=0;T<N.length-1;T++){const P=N[T],B=N[T+1];P instanceof Ye&&B instanceof Ye&&Vn(P,B)&&(P.text+=B.text,P.height=Math.max(P.height,B.height),P.depth=Math.max(P.depth,B.depth),P.italic=B.italic,N.splice(T+1,1),T--)}return N},Bs=function(N){let T=0,P=0,B=0;for(let J=0;J<N.children.length;J++){const ce=N.children[J];ce.height>T&&(T=ce.height),ce.depth>P&&(P=ce.depth),ce.maxFontSize>B&&(B=ce.maxFontSize)}N.height=T,N.depth=P,N.maxFontSize=B},hn=function(N,T,P,B){const J=new vr(N,T,P,B);return Bs(J),J},Pe=(N,T,P,B)=>new vr(N,T,P,B),Ut=function(N,T,P){const B=hn([N],[],T);return B.height=Math.max(P||T.fontMetrics().defaultRuleThickness,T.minRuleThickness),B.style.borderBottomWidth=nt(B.height),B.maxFontSize=1,B},Vr=function(N,T,P,B){const J=new Ee(N,T,P,B);return Bs(J),J},Xr=function(N){const T=new Pr(N);return Bs(T),T},xs=function(N,T){return N instanceof Pr?hn([],[N],T):N},Dn=function(N){if(N.positionType==="individualShift"){const P=N.children,B=[P[0]],J=-P[0].shift-P[0].elem.depth;let ce=J;for(let ve=1;ve<P.length;ve++){const Te=-P[ve].shift-ce-P[ve].elem.depth,Oe=Te-(P[ve-1].elem.height+P[ve-1].elem.depth);ce=ce+Te,B.push({type:"kern",size:Oe}),B.push(P[ve])}return{children:B,depth:J}}let T;if(N.positionType==="top"){let P=N.positionData;for(let B=0;B<N.children.length;B++){const J=N.children[B];P-=J.type==="kern"?J.size:J.elem.height+J.elem.depth}T=P}else if(N.positionType==="bottom")T=-N.positionData;else{const P=N.children[0];if(P.type!=="elem")throw new Error('First child must have type "elem".');if(N.positionType==="shift")T=-P.elem.depth-N.positionData;else if(N.positionType==="firstBaseline")T=-P.elem.depth;else throw new Error("Invalid positionType "+N.positionType+".")}return{children:N.children,depth:T}},Je=function(N,T){const{children:P,depth:B}=Dn(N);let J=0;for(let rr=0;rr<P.length;rr++){const Nr=P[rr];if(Nr.type==="elem"){const Mr=Nr.elem;J=Math.max(J,Mr.maxFontSize,Mr.height)}}J+=2;const ce=hn(["pstrut"],[]);ce.style.height=nt(J);const ve=[];let Te=B,Oe=B,Ge=B;for(let rr=0;rr<P.length;rr++){const Nr=P[rr];if(Nr.type==="kern")Ge+=Nr.size;else{const Mr=Nr.elem,wn=Nr.wrapperClasses||[],yn=Nr.wrapperStyle||{},Sn=hn(wn,[ce,Mr],void 0,yn);Sn.style.top=nt(-J-Ge-Mr.depth),Nr.marginLeft&&(Sn.style.marginLeft=Nr.marginLeft),Nr.marginRight&&(Sn.style.marginRight=Nr.marginRight),ve.push(Sn),Ge+=Mr.height+Mr.depth}Te=Math.min(Te,Ge),Oe=Math.max(Oe,Ge)}const $e=hn(["vlist"],ve);$e.style.height=nt(Oe);let at;if(Te<0){const rr=hn([],[]),Nr=hn(["vlist"],[rr]);Nr.style.height=nt(-Te);const Mr=hn(["vlist-s"],[new Ye("")]);at=[hn(["vlist-r"],[$e,Mr]),hn(["vlist-r"],[Nr])]}else at=[hn(["vlist-r"],[$e])];const Ct=hn(["vlist-t"],at);return at.length===2&&Ct.classes.push("vlist-t2"),Ct.height=Oe,Ct.depth=-Te,Ct},Pt=(N,T)=>{const P=hn(["mspace"],[],T),B=Ot(N,T);return P.style.marginRight=nt(B),P},tr=function(N,T,P){let B="";switch(N){case"amsrm":B="AMS";break;case"textrm":B="Main";break;case"textsf":B="SansSerif";break;case"texttt":B="Typewriter";break;default:B=N}let J;return T==="textbf"&&P==="textit"?J="BoldItalic":T==="textbf"?J="Bold":T==="textit"?J="Italic":J="Regular",B+"-"+J},Jt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Bn={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]};var Re={fontMap:Jt,makeSymbol:Kr,mathsym:Ir,makeSpan:hn,makeSvgSpan:Pe,makeLineSpan:Ut,makeAnchor:Vr,makeFragment:Xr,wrapFragment:xs,makeVList:Je,makeOrd:Yn,makeGlue:Pt,staticSvg:function(N,T){const[P,B,J]=Bn[N],ce=new ze(P),ve=new Lt([ce],{width:nt(B),height:nt(J),style:"width:"+nt(B),viewBox:"0 0 "+1e3*B+" "+1e3*J,preserveAspectRatio:"xMinYMin"}),Te=Pe(["overlay"],[ve],T);return Te.height=J,Te.style.height=nt(J),Te.style.width=nt(B),Te},svgData:Bn,tryCombineChars:ts};const Qt={number:3,unit:"mu"},Bt={number:4,unit:"mu"},Or={number:5,unit:"mu"},Zt={mord:{mop:Qt,mbin:Bt,mrel:Or,minner:Qt},mop:{mord:Qt,mop:Qt,mrel:Or,minner:Qt},mbin:{mord:Bt,mop:Bt,mopen:Bt,minner:Bt},mrel:{mord:Or,mop:Or,mopen:Or,minner:Or},mopen:{},mclose:{mop:Qt,mbin:Bt,mrel:Or,minner:Qt},mpunct:{mord:Qt,mop:Qt,mrel:Or,mopen:Qt,mclose:Qt,mpunct:Qt,minner:Qt},minner:{mord:Qt,mop:Qt,mbin:Bt,mrel:Or,mopen:Qt,mpunct:Qt,minner:Qt}},on={mord:{mop:Qt},mop:{mord:Qt,mop:Qt},mbin:{},mrel:{},mopen:{},mclose:{mop:Qt},mpunct:{},minner:{mop:Qt}},Cn={},_t={},pr={};function gt(N){let{type:T,names:P,props:B,handler:J,htmlBuilder:ce,mathmlBuilder:ve}=N;const Te={type:T,numArgs:B.numArgs,argTypes:B.argTypes,allowedInArgument:!!B.allowedInArgument,allowedInText:!!B.allowedInText,allowedInMath:B.allowedInMath===void 0?!0:B.allowedInMath,numOptionalArgs:B.numOptionalArgs||0,infix:!!B.infix,primitive:!!B.primitive,handler:J};for(let Oe=0;Oe<P.length;++Oe)Cn[P[Oe]]=Te;T&&(ce&&(_t[T]=ce),ve&&(pr[T]=ve))}function En(N){let{type:T,htmlBuilder:P,mathmlBuilder:B}=N;gt({type:T,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:P,mathmlBuilder:B})}const rn=function(N){return N.type==="ordgroup"&&N.body.length===1?N.body[0]:N},Lr=function(N){return N.type==="ordgroup"?N.body:[N]},$n=Re.makeSpan,ds=["leftmost","mbin","mopen","mrel","mop","mpunct"],Cs=["rightmost","mrel","mclose","mpunct"],xo={display:V.DISPLAY,text:V.TEXT,script:V.SCRIPT,scriptscript:V.SCRIPTSCRIPT},tc={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Ds=function(N,T,P,B){B===void 0&&(B=[null,null]);const J=[];for(let Ge=0;Ge<N.length;Ge++){const $e=ln(N[Ge],T);if($e instanceof Pr){const at=$e.children;J.push(...at)}else J.push($e)}if(Re.tryCombineChars(J),!P)return J;let ce=T;if(N.length===1){const Ge=N[0];Ge.type==="sizing"?ce=T.havingSize(Ge.size):Ge.type==="styling"&&(ce=T.havingStyle(xo[Ge.style]))}const ve=$n([B[0]||"leftmost"],[],T),Te=$n([B[1]||"rightmost"],[],T),Oe=P==="root";return Sh(J,(Ge,$e)=>{const at=$e.classes[0],Ct=Ge.classes[0];at==="mbin"&&Cs.includes(Ct)?$e.classes[0]="mord":Ct==="mbin"&&ds.includes(at)&&(Ge.classes[0]="mord")},{node:ve},Te,Oe),Sh(J,(Ge,$e)=>{const at=rc($e),Ct=rc(Ge),rr=at&&Ct?Ge.hasClass("mtight")?on[at][Ct]:Zt[at][Ct]:null;if(rr)return Re.makeGlue(rr,ce)},{node:ve},Te,Oe),J},Sh=function(N,T,P,B,J){B&&N.push(B);let ce=0;for(;ce<N.length;ce++){const ve=N[ce],Te=Al(ve);if(Te){Sh(Te.children,T,P,null,J);continue}const Oe=!ve.hasClass("mspace");if(Oe){const Ge=T(ve,P.node);Ge&&(P.insertAfter?P.insertAfter(Ge):(N.unshift(Ge),ce++))}Oe?P.node=ve:J&&ve.hasClass("newline")&&(P.node=$n(["leftmost"])),P.insertAfter=(Ge=>$e=>{N.splice(Ge+1,0,$e),ce++})(ce)}B&&N.pop()},Al=function(N){return N instanceof Pr||N instanceof Ee||N instanceof vr&&N.hasClass("enclosing")?N:null},Qa=function(N,T){const P=Al(N);if(P){const B=P.children;if(B.length){if(T==="right")return Qa(B[B.length-1],"right");if(T==="left")return Qa(B[0],"left")}}return N},rc=function(N,T){return N?(T&&(N=Qa(N,T)),tc[N.classes[0]]||null):null},nc=function(N,T){const P=["nulldelimiter"].concat(N.baseSizingClasses());return $n(T.concat(P))},ln=function(N,T,P){if(!N)return $n();if(_t[N.type]){let B=_t[N.type](N,T);if(P&&T.size!==P.size){B=$n(T.sizingClasses(P),[B],T);const J=T.sizeMultiplier/P.sizeMultiplier;B.height*=J,B.depth*=J}return B}else throw new a("Got group of unknown type: '"+N.type+"'")};function yo(N,T){const P=$n(["base"],N,T),B=$n(["strut"]);return B.style.height=nt(P.height+P.depth),P.depth&&(B.style.verticalAlign=nt(-P.depth)),P.children.unshift(B),P}function sc(N,T){let P=null;N.length===1&&N[0].type==="tag"&&(P=N[0].tag,N=N[0].body);const B=Ds(N,T,"root");let J;B.length===2&&B[1].hasClass("tag")&&(J=B.pop());const ce=[];let ve=[];for(let Ge=0;Ge<B.length;Ge++)if(ve.push(B[Ge]),B[Ge].hasClass("mbin")||B[Ge].hasClass("mrel")||B[Ge].hasClass("allowbreak")){let $e=!1;for(;Ge<B.length-1&&B[Ge+1].hasClass("mspace")&&!B[Ge+1].hasClass("newline");)Ge++,ve.push(B[Ge]),B[Ge].hasClass("nobreak")&&($e=!0);$e||(ce.push(yo(ve,T)),ve=[])}else B[Ge].hasClass("newline")&&(ve.pop(),ve.length>0&&(ce.push(yo(ve,T)),ve=[]),ce.push(B[Ge]));ve.length>0&&ce.push(yo(ve,T));let Te;P?(Te=yo(Ds(P,T,!0)),Te.classes=["tag"],ce.push(Te)):J&&ce.push(J);const Oe=$n(["katex-html"],ce);if(Oe.setAttribute("aria-hidden","true"),Te){const Ge=Te.children[0];Ge.style.height=nt(Oe.height+Oe.depth),Oe.depth&&(Ge.style.verticalAlign=nt(-Oe.depth))}return Oe}function au(N){return new Pr(N)}class Za{constructor(T,P,B){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=T,this.attributes={},this.children=P||[],this.classes=B||[]}setAttribute(T,P){this.attributes[T]=P}getAttribute(T){return this.attributes[T]}toNode(){const T=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const P in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,P)&&T.setAttribute(P,this.attributes[P]);this.classes.length>0&&(T.className=sr(this.classes));for(let P=0;P<this.children.length;P++)if(this.children[P]instanceof Wo&&this.children[P+1]instanceof Wo){let B=this.children[P].toText()+this.children[++P].toText();for(;this.children[P+1]instanceof Wo;)B+=this.children[++P].toText();T.appendChild(new Wo(B).toNode())}else T.appendChild(this.children[P].toNode());return T}toMarkup(){let T="<"+this.type;for(const P in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,P)&&(T+=" "+P+'="',T+=v.escape(this.attributes[P]),T+='"');this.classes.length>0&&(T+=' class ="'+v.escape(sr(this.classes))+'"'),T+=">";for(let P=0;P<this.children.length;P++)T+=this.children[P].toMarkup();return T+="</"+this.type+">",T}toText(){return this.children.map(T=>T.toText()).join("")}}class Wo{constructor(T){this.text=void 0,this.text=T}toNode(){return document.createTextNode(this.text)}toMarkup(){return v.escape(this.toText())}toText(){return this.text}}class Oa{constructor(T){this.width=void 0,this.character=void 0,this.width=T,T>=.05555&&T<=.05556?this.character="":T>=.1666&&T<=.1667?this.character="":T>=.2222&&T<=.2223?this.character="":T>=.2777&&T<=.2778?this.character="":T>=-.05556&&T<=-.05555?this.character="":T>=-.1667&&T<=-.1666?this.character="":T>=-.2223&&T<=-.2222?this.character="":T>=-.2778&&T<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);{const T=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return T.setAttribute("width",nt(this.width)),T}}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+nt(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var ar={MathNode:Za,TextNode:Wo,SpaceNode:Oa,newDocumentFragment:au};const Zs=function(N,T,P){return Yt[T][N]&&Yt[T][N].replace&&N.charCodeAt(0)!==55349&&!(Ke.hasOwnProperty(N)&&P&&(P.fontFamily&&P.fontFamily.slice(4,6)==="tt"||P.font&&P.font.slice(4,6)==="tt"))&&(N=Yt[T][N].replace),new ar.TextNode(N)},iu=function(N){return N.length===1?N[0]:new ar.MathNode("mrow",N)},jl=function(N,T){if(T.fontFamily==="texttt")return"monospace";if(T.fontFamily==="textsf")return T.fontShape==="textit"&&T.fontWeight==="textbf"?"sans-serif-bold-italic":T.fontShape==="textit"?"sans-serif-italic":T.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(T.fontShape==="textit"&&T.fontWeight==="textbf")return"bold-italic";if(T.fontShape==="textit")return"italic";if(T.fontWeight==="textbf")return"bold";const P=T.font;if(!P||P==="mathnormal")return null;const B=N.mode;if(P==="mathit")return"italic";if(P==="boldsymbol")return N.type==="textord"?"bold":"bold-italic";if(P==="mathbf")return"bold";if(P==="mathbb")return"double-struck";if(P==="mathsfit")return"sans-serif-italic";if(P==="mathfrak")return"fraktur";if(P==="mathscr"||P==="mathcal")return"script";if(P==="mathsf")return"sans-serif";if(P==="mathtt")return"monospace";let J=N.text;if(["\\imath","\\jmath"].includes(J))return null;Yt[B][J]&&Yt[B][J].replace&&(J=Yt[B][J].replace);const ce=Re.fontMap[P].fontName;return At(J,ce,B)?Re.fontMap[P].variant:null};function Da(N){if(!N)return!1;if(N.type==="mi"&&N.children.length===1){const T=N.children[0];return T instanceof Wo&&T.text==="."}else if(N.type==="mo"&&N.children.length===1&&N.getAttribute("separator")==="true"&&N.getAttribute("lspace")==="0em"&&N.getAttribute("rspace")==="0em"){const T=N.children[0];return T instanceof Wo&&T.text===","}else return!1}const fs=function(N,T,P){if(N.length===1){const ce=vn(N[0],T);return P&&ce instanceof Za&&ce.type==="mo"&&(ce.setAttribute("lspace","0em"),ce.setAttribute("rspace","0em")),[ce]}const B=[];let J;for(let ce=0;ce<N.length;ce++){const ve=vn(N[ce],T);if(ve instanceof Za&&J instanceof Za){if(ve.type==="mtext"&&J.type==="mtext"&&ve.getAttribute("mathvariant")===J.getAttribute("mathvariant")){J.children.push(...ve.children);continue}else if(ve.type==="mn"&&J.type==="mn"){J.children.push(...ve.children);continue}else if(Da(ve)&&J.type==="mn"){J.children.push(...ve.children);continue}else if(ve.type==="mn"&&Da(J))ve.children=[...J.children,...ve.children],B.pop();else if((ve.type==="msup"||ve.type==="msub")&&ve.children.length>=1&&(J.type==="mn"||Da(J))){const Te=ve.children[0];Te instanceof Za&&Te.type==="mn"&&(Te.children=[...J.children,...Te.children],B.pop())}else if(J.type==="mi"&&J.children.length===1){const Te=J.children[0];if(Te instanceof Wo&&Te.text===""&&(ve.type==="mo"||ve.type==="mi"||ve.type==="mn")){const Oe=ve.children[0];Oe instanceof Wo&&Oe.text.length>0&&(Oe.text=Oe.text.slice(0,1)+""+Oe.text.slice(1),B.pop())}}}B.push(ve),J=ve}return B},hs=function(N,T,P){return iu(fs(N,T,P))},vn=function(N,T){if(!N)return new ar.MathNode("mrow");if(pr[N.type])return pr[N.type](N,T);throw new a("Got group of unknown type: '"+N.type+"'")};function vo(N,T,P,B,J){const ce=fs(N,P);let ve;ce.length===1&&ce[0]instanceof Za&&["mrow","mtable"].includes(ce[0].type)?ve=ce[0]:ve=new ar.MathNode("mrow",ce);const Te=new ar.MathNode("annotation",[new ar.TextNode(T)]);Te.setAttribute("encoding","application/x-tex");const Oe=new ar.MathNode("semantics",[ve,Te]),Ge=new ar.MathNode("math",[Oe]);Ge.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),B&&Ge.setAttribute("display","block");const $e=J?"katex":"katex-mathml";return Re.makeSpan([$e],[Ge])}const wo=function(N){return new Qe({style:N.displayMode?V.DISPLAY:V.TEXT,maxSize:N.maxSize,minRuleThickness:N.minRuleThickness})},kh=function(N,T){if(T.displayMode){const P=["katex-display"];T.leqno&&P.push("leqno"),T.fleqn&&P.push("fleqn"),N=Re.makeSpan(P,[N])}return N},jd=function(N,T,P){const B=wo(P);let J;if(P.output==="mathml")return vo(N,T,B,P.displayMode,!0);if(P.output==="html"){const ce=sc(N,B);J=Re.makeSpan(["katex"],[ce])}else{const ce=vo(N,T,B,P.displayMode,!1),ve=sc(N,B);J=Re.makeSpan(["katex"],[ce,ve])}return kh(J,P)},Pd=function(N,T,P){const B=wo(P),J=sc(N,B),ce=Re.makeSpan(["katex"],[J]);return kh(ce,P)},Ia={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},di=function(N){const T=new ar.MathNode("mo",[new ar.TextNode(Ia[N.replace(/^\\/,"")])]);return T.setAttribute("stretchy","true"),T},ys={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Md=function(N){return N.type==="ordgroup"?N.body.length:1};var bo={encloseSpan:function(N,T,P,B,J){let ce;const ve=N.height+N.depth+P+B;if(/fbox|color|angl/.test(T)){if(ce=Re.makeSpan(["stretchy",T],[],J),T==="fbox"){const Te=J.color&&J.getColor();Te&&(ce.style.borderColor=Te)}}else{const Te=[];/^[bx]cancel$/.test(T)&&Te.push(new it({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(T)&&Te.push(new it({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));const Oe=new Lt(Te,{width:"100%",height:nt(ve)});ce=Re.makeSvgSpan([],[Oe],J)}return ce.height=ve,ce.style.height=nt(ve),ce},mathMLnode:di,svgSpan:function(N,T){function P(){let ve=4e5;const Te=N.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(Te)){const Ge=Md(N.base);let $e,at,Ct;if(Ge>5)Te==="widehat"||Te==="widecheck"?($e=420,ve=2364,Ct=.42,at=Te+"4"):($e=312,ve=2340,Ct=.34,at="tilde4");else{const Mr=[1,1,2,2,3,3][Ge];Te==="widehat"||Te==="widecheck"?(ve=[0,1062,2364,2364,2364][Mr],$e=[0,239,300,360,420][Mr],Ct=[0,.24,.3,.3,.36,.42][Mr],at=Te+Mr):(ve=[0,600,1033,2339,2340][Mr],$e=[0,260,286,306,312][Mr],Ct=[0,.26,.286,.3,.306,.34][Mr],at="tilde"+Mr)}const rr=new ze(at),Nr=new Lt([rr],{width:"100%",height:nt(Ct),viewBox:"0 0 "+ve+" "+$e,preserveAspectRatio:"none"});return{span:Re.makeSvgSpan([],[Nr],T),minWidth:0,height:Ct}}else{const Oe=[],Ge=ys[Te],[$e,at,Ct]=Ge,rr=Ct/1e3,Nr=$e.length;let Mr,wn;if(Nr===1){const yn=Ge[3];Mr=["hide-tail"],wn=[yn]}else if(Nr===2)Mr=["halfarrow-left","halfarrow-right"],wn=["xMinYMin","xMaxYMin"];else if(Nr===3)Mr=["brace-left","brace-center","brace-right"],wn=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Nr+" children.");for(let yn=0;yn<Nr;yn++){const Sn=new ze($e[yn]),In=new Lt([Sn],{width:"400em",height:nt(rr),viewBox:"0 0 "+ve+" "+Ct,preserveAspectRatio:wn[yn]+" slice"}),zn=Re.makeSvgSpan([Mr[yn]],[In],T);if(Nr===1)return{span:zn,minWidth:at,height:rr};zn.style.height=nt(rr),Oe.push(zn)}return{span:Re.makeSpan(["stretchy"],Oe,T),minWidth:at,height:rr}}}const{span:B,minWidth:J,height:ce}=P();return B.height=ce,B.style.height=nt(ce),J>0&&(B.style.minWidth=nt(J)),B}};function cn(N,T){if(!N||N.type!==T)throw new Error("Expected node of type "+T+", but got "+(N?"node of type "+N.type:String(N)));return N}function Fd(N){const T=Od(N);if(!T)throw new Error("Expected node of symbol group type, but got "+(N?"node of type "+N.type:String(N)));return T}function Od(N){return N&&(N.type==="atom"||qt.hasOwnProperty(N.type))?N:null}const Bu=(N,T)=>{let P,B,J;N&&N.type==="supsub"?(B=cn(N.base,"accent"),P=B.base,N.base=P,J=st(ln(N,T)),N.base=B):(B=cn(N,"accent"),P=B.base);const ce=ln(P,T.havingCrampedStyle()),ve=B.isShifty&&v.isCharacterBox(P);let Te=0;if(ve){const Ct=v.getBaseElem(P),rr=ln(Ct,T.havingCrampedStyle());Te=Le(rr).skew}const Oe=B.label==="\\c";let Ge=Oe?ce.height+ce.depth:Math.min(ce.height,T.fontMetrics().xHeight),$e;if(B.isStretchy)$e=bo.svgSpan(B,T),$e=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ce},{type:"elem",elem:$e,wrapperClasses:["svg-align"],wrapperStyle:Te>0?{width:"calc(100% - "+nt(2*Te)+")",marginLeft:nt(2*Te)}:void 0}]},T);else{let Ct,rr;B.label==="\\vec"?(Ct=Re.staticSvg("vec",T),rr=Re.svgData.vec[1]):(Ct=Re.makeOrd({mode:B.mode,text:B.label},T,"textord"),Ct=Le(Ct),Ct.italic=0,rr=Ct.width,Oe&&(Ge+=Ct.depth)),$e=Re.makeSpan(["accent-body"],[Ct]);const Nr=B.label==="\\textcircled";Nr&&($e.classes.push("accent-full"),Ge=ce.height);let Mr=Te;Nr||(Mr-=rr/2),$e.style.left=nt(Mr),B.label==="\\textcircled"&&($e.style.top=".2em"),$e=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ce},{type:"kern",size:-Ge},{type:"elem",elem:$e}]},T)}const at=Re.makeSpan(["mord","accent"],[$e],T);return J?(J.children[0]=at,J.height=Math.max(at.height,J.height),J.classes[0]="mord",J):at},Th=(N,T)=>{const P=N.isStretchy?bo.mathMLnode(N.label):new ar.MathNode("mo",[Zs(N.label,N.mode)]),B=new ar.MathNode("mover",[vn(N.base,T),P]);return B.setAttribute("accent","true"),B},ou=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(N=>"\\"+N).join("|"));gt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(N,T)=>{const P=rn(T[0]),B=!ou.test(N.funcName),J=!B||N.funcName==="\\widehat"||N.funcName==="\\widetilde"||N.funcName==="\\widecheck";return{type:"accent",mode:N.parser.mode,label:N.funcName,isStretchy:B,isShifty:J,base:P}},htmlBuilder:Bu,mathmlBuilder:Th}),gt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(N,T)=>{const P=T[0];let B=N.parser.mode;return B==="math"&&(N.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+N.funcName+" works only in text mode"),B="text"),{type:"accent",mode:B,label:N.funcName,isStretchy:!1,isShifty:!0,base:P}},htmlBuilder:Bu,mathmlBuilder:Th}),gt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(N,T)=>{let{parser:P,funcName:B}=N;const J=T[0];return{type:"accentUnder",mode:P.mode,label:B,base:J}},htmlBuilder:(N,T)=>{const P=ln(N.base,T),B=bo.svgSpan(N,T),J=N.label==="\\utilde"?.12:0,ce=Re.makeVList({positionType:"top",positionData:P.height,children:[{type:"elem",elem:B,wrapperClasses:["svg-align"]},{type:"kern",size:J},{type:"elem",elem:P}]},T);return Re.makeSpan(["mord","accentunder"],[ce],T)},mathmlBuilder:(N,T)=>{const P=bo.mathMLnode(N.label),B=new ar.MathNode("munder",[vn(N.base,T),P]);return B.setAttribute("accentunder","true"),B}});const $u=N=>{const T=new ar.MathNode("mpadded",N?[N]:[]);return T.setAttribute("width","+0.6em"),T.setAttribute("lspace","0.3em"),T};gt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(N,T,P){let{parser:B,funcName:J}=N;return{type:"xArrow",mode:B.mode,label:J,body:T[0],below:P[0]}},htmlBuilder(N,T){const P=T.style;let B=T.havingStyle(P.sup());const J=Re.wrapFragment(ln(N.body,B,T),T),ce=N.label.slice(0,2)==="\\x"?"x":"cd";J.classes.push(ce+"-arrow-pad");let ve;N.below&&(B=T.havingStyle(P.sub()),ve=Re.wrapFragment(ln(N.below,B,T),T),ve.classes.push(ce+"-arrow-pad"));const Te=bo.svgSpan(N,T),Oe=-T.fontMetrics().axisHeight+.5*Te.height;let Ge=-T.fontMetrics().axisHeight-.5*Te.height-.111;(J.depth>.25||N.label==="\\xleftequilibrium")&&(Ge-=J.depth);let $e;if(ve){const at=-T.fontMetrics().axisHeight+ve.height+.5*Te.height+.111;$e=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:J,shift:Ge},{type:"elem",elem:Te,shift:Oe},{type:"elem",elem:ve,shift:at}]},T)}else $e=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:J,shift:Ge},{type:"elem",elem:Te,shift:Oe}]},T);return $e.children[0].children[0].children[1].classes.push("svg-align"),Re.makeSpan(["mrel","x-arrow"],[$e],T)},mathmlBuilder(N,T){const P=bo.mathMLnode(N.label);P.setAttribute("minsize",N.label.charAt(0)==="x"?"1.75em":"3.0em");let B;if(N.body){const J=$u(vn(N.body,T));if(N.below){const ce=$u(vn(N.below,T));B=new ar.MathNode("munderover",[P,ce,J])}else B=new ar.MathNode("mover",[P,J])}else if(N.below){const J=$u(vn(N.below,T));B=new ar.MathNode("munder",[P,J])}else B=$u(),B=new ar.MathNode("mover",[P,B]);return B}});const h1=Re.makeSpan;function Dd(N,T){const P=Ds(N.body,T,!0);return h1([N.mclass],P,T)}function og(N,T){let P;const B=fs(N.body,T);return N.mclass==="minner"?P=new ar.MathNode("mpadded",B):N.mclass==="mord"?N.isCharacterBox?(P=B[0],P.type="mi"):P=new ar.MathNode("mi",B):(N.isCharacterBox?(P=B[0],P.type="mo"):P=new ar.MathNode("mo",B),N.mclass==="mbin"?(P.attributes.lspace="0.22em",P.attributes.rspace="0.22em"):N.mclass==="mpunct"?(P.attributes.lspace="0em",P.attributes.rspace="0.17em"):N.mclass==="mopen"||N.mclass==="mclose"?(P.attributes.lspace="0em",P.attributes.rspace="0em"):N.mclass==="minner"&&(P.attributes.lspace="0.0556em",P.attributes.width="+0.1111em")),P}gt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(N,T){let{parser:P,funcName:B}=N;const J=T[0];return{type:"mclass",mode:P.mode,mclass:"m"+B.slice(5),body:Lr(J),isCharacterBox:v.isCharacterBox(J)}},htmlBuilder:Dd,mathmlBuilder:og});const cl=N=>{const T=N.type==="ordgroup"&&N.body.length?N.body[0]:N;return T.type==="atom"&&(T.family==="bin"||T.family==="rel")?"m"+T.family:"mord"};gt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(N,T){let{parser:P}=N;return{type:"mclass",mode:P.mode,mclass:cl(T[0]),body:Lr(T[1]),isCharacterBox:v.isCharacterBox(T[1])}}}),gt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(N,T){let{parser:P,funcName:B}=N;const J=T[1],ce=T[0];let ve;B!=="\\stackrel"?ve=cl(J):ve="mrel";const Te={type:"op",mode:J.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:B!=="\\stackrel",body:Lr(J)},Oe={type:"supsub",mode:ce.mode,base:Te,sup:B==="\\underset"?null:ce,sub:B==="\\underset"?ce:null};return{type:"mclass",mode:P.mode,mclass:ve,body:[Oe],isCharacterBox:v.isCharacterBox(Oe)}},htmlBuilder:Dd,mathmlBuilder:og}),gt({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(N,T){let{parser:P}=N;return{type:"pmb",mode:P.mode,mclass:cl(T[0]),body:Lr(T[0])}},htmlBuilder(N,T){const P=Ds(N.body,T,!0),B=Re.makeSpan([N.mclass],P,T);return B.style.textShadow="0.02em 0.01em 0.04px",B},mathmlBuilder(N,T){const P=fs(N.body,T),B=new ar.MathNode("mstyle",P);return B.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),B}});const U0={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Ch=()=>({type:"styling",body:[],mode:"math",style:"display"}),Nh=N=>N.type==="textord"&&N.text==="@",lu=(N,T)=>(N.type==="mathord"||N.type==="atom")&&N.text===T;function lg(N,T,P){const B=U0[N];switch(B){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return P.callFunction(B,[T[0]],[T[1]]);case"\\uparrow":case"\\downarrow":{const J=P.callFunction("\\\\cdleft",[T[0]],[]),ce={type:"atom",text:B,mode:"math",family:"rel"},ve=P.callFunction("\\Big",[ce],[]),Te=P.callFunction("\\\\cdright",[T[1]],[]),Oe={type:"ordgroup",mode:"math",body:[J,ve,Te]};return P.callFunction("\\\\cdparent",[Oe],[])}case"\\\\cdlongequal":return P.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const J={type:"textord",text:"\\Vert",mode:"math"};return P.callFunction("\\Big",[J],[])}default:return{type:"textord",text:" ",mode:"math"}}}function W0(N){const T=[];for(N.gullet.beginGroup(),N.gullet.macros.set("\\cr","\\\\\\relax"),N.gullet.beginGroup();;){T.push(N.parseExpression(!1,"\\\\")),N.gullet.endGroup(),N.gullet.beginGroup();const ce=N.fetch().text;if(ce==="&"||ce==="\\\\")N.consume();else if(ce==="\\end"){T[T.length-1].length===0&&T.pop();break}else throw new a("Expected \\\\ or \\cr or \\end",N.nextToken)}let P=[];const B=[P];for(let ce=0;ce<T.length;ce++){const ve=T[ce];let Te=Ch();for(let Oe=0;Oe<ve.length;Oe++)if(!Nh(ve[Oe]))Te.body.push(ve[Oe]);else{P.push(Te),Oe+=1;const Ge=Fd(ve[Oe]).text,$e=new Array(2);if($e[0]={type:"ordgroup",mode:"math",body:[]},$e[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(Ge)>-1))if("<>AV".indexOf(Ge)>-1)for(let rr=0;rr<2;rr++){let Nr=!0;for(let Mr=Oe+1;Mr<ve.length;Mr++){if(lu(ve[Mr],Ge)){Nr=!1,Oe=Mr;break}if(Nh(ve[Mr]))throw new a("Missing a "+Ge+" character to complete a CD arrow.",ve[Mr]);$e[rr].body.push(ve[Mr])}if(Nr)throw new a("Missing a "+Ge+" character to complete a CD arrow.",ve[Oe])}else throw new a('Expected one of "<>AV=|." after @',ve[Oe]);const Ct={type:"styling",body:[lg(Ge,$e,N)],mode:"math",style:"display"};P.push(Ct),Te=Ch()}ce%2===0?P.push(Te):P.shift(),P=[],B.push(P)}N.gullet.endGroup(),N.gullet.endGroup();const J=new Array(B[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:B,arraystretch:1,addJot:!0,rowGaps:[null],cols:J,colSeparationType:"CD",hLinesBeforeRow:new Array(B.length+1).fill([])}}gt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(N,T){let{parser:P,funcName:B}=N;return{type:"cdlabel",mode:P.mode,side:B.slice(4),label:T[0]}},htmlBuilder(N,T){const P=T.havingStyle(T.style.sup()),B=Re.wrapFragment(ln(N.label,P,T),T);return B.classes.push("cd-label-"+N.side),B.style.bottom=nt(.8-B.depth),B.height=0,B.depth=0,B},mathmlBuilder(N,T){let P=new ar.MathNode("mrow",[vn(N.label,T)]);return P=new ar.MathNode("mpadded",[P]),P.setAttribute("width","0"),N.side==="left"&&P.setAttribute("lspace","-1width"),P.setAttribute("voffset","0.7em"),P=new ar.MathNode("mstyle",[P]),P.setAttribute("displaystyle","false"),P.setAttribute("scriptlevel","1"),P}}),gt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(N,T){let{parser:P}=N;return{type:"cdlabelparent",mode:P.mode,fragment:T[0]}},htmlBuilder(N,T){const P=Re.wrapFragment(ln(N.fragment,T),T);return P.classes.push("cd-vert-arrow"),P},mathmlBuilder(N,T){return new ar.MathNode("mrow",[vn(N.fragment,T)])}}),gt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(N,T){let{parser:P}=N;const J=cn(T[0],"ordgroup").body;let ce="";for(let Oe=0;Oe<J.length;Oe++){const Ge=cn(J[Oe],"textord");ce+=Ge.text}let ve=parseInt(ce),Te;if(isNaN(ve))throw new a("\\@char has non-numeric argument "+ce);if(ve<0||ve>=1114111)throw new a("\\@char with invalid code point "+ce);return ve<=65535?Te=String.fromCharCode(ve):(ve-=65536,Te=String.fromCharCode((ve>>10)+55296,(ve&1023)+56320)),{type:"textord",mode:P.mode,text:Te}}});const Id=(N,T)=>{const P=Ds(N.body,T.withColor(N.color),!1);return Re.makeFragment(P)},cu=(N,T)=>{const P=fs(N.body,T.withColor(N.color)),B=new ar.MathNode("mstyle",P);return B.setAttribute("mathcolor",N.color),B};gt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(N,T){let{parser:P}=N;const B=cn(T[0],"color-token").color,J=T[1];return{type:"color",mode:P.mode,color:B,body:Lr(J)}},htmlBuilder:Id,mathmlBuilder:cu}),gt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(N,T){let{parser:P,breakOnTokenText:B}=N;const J=cn(T[0],"color-token").color;P.gullet.macros.set("\\current@color",J);const ce=P.parseExpression(!0,B);return{type:"color",mode:P.mode,color:J,body:ce}},htmlBuilder:Id,mathmlBuilder:cu}),gt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(N,T,P){let{parser:B}=N;const J=B.gullet.future().text==="["?B.parseSizeGroup(!0):null,ce=!B.settings.displayMode||!B.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:B.mode,newLine:ce,size:J&&cn(J,"size").value}},htmlBuilder(N,T){const P=Re.makeSpan(["mspace"],[],T);return N.newLine&&(P.classes.push("newline"),N.size&&(P.style.marginTop=nt(Ot(N.size,T)))),P},mathmlBuilder(N,T){const P=new ar.MathNode("mspace");return N.newLine&&(P.setAttribute("linebreak","newline"),N.size&&P.setAttribute("height",nt(Ot(N.size,T)))),P}});const Rd={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},H0=N=>{const T=N.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(T))throw new a("Expected a control sequence",N);return T},cg=N=>{let T=N.gullet.popToken();return T.text==="="&&(T=N.gullet.popToken(),T.text===" "&&(T=N.gullet.popToken())),T},zu=(N,T,P,B)=>{let J=N.gullet.macros.get(P.text);J==null&&(P.noexpand=!0,J={tokens:[P],numArgs:0,unexpandable:!N.gullet.isExpandable(P.text)}),N.gullet.macros.set(T,J,B)};gt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(N){let{parser:T,funcName:P}=N;T.consumeSpaces();const B=T.fetch();if(Rd[B.text])return(P==="\\global"||P==="\\\\globallong")&&(B.text=Rd[B.text]),cn(T.parseFunction(),"internal");throw new a("Invalid token after macro prefix",B)}}),gt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(N){let{parser:T,funcName:P}=N,B=T.gullet.popToken();const J=B.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(J))throw new a("Expected a control sequence",B);let ce=0,ve;const Te=[[]];for(;T.gullet.future().text!=="{";)if(B=T.gullet.popToken(),B.text==="#"){if(T.gullet.future().text==="{"){ve=T.gullet.future(),Te[ce].push("{");break}if(B=T.gullet.popToken(),!/^[1-9]$/.test(B.text))throw new a('Invalid argument number "'+B.text+'"');if(parseInt(B.text)!==ce+1)throw new a('Argument number "'+B.text+'" out of order');ce++,Te.push([])}else{if(B.text==="EOF")throw new a("Expected a macro definition");Te[ce].push(B.text)}let{tokens:Oe}=T.gullet.consumeArg();return ve&&Oe.unshift(ve),(P==="\\edef"||P==="\\xdef")&&(Oe=T.gullet.expandTokens(Oe),Oe.reverse()),T.gullet.macros.set(J,{tokens:Oe,numArgs:ce,delimiters:Te},P===Rd[P]),{type:"internal",mode:T.mode}}}),gt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(N){let{parser:T,funcName:P}=N;const B=H0(T.gullet.popToken());T.gullet.consumeSpaces();const J=cg(T);return zu(T,B,J,P==="\\\\globallet"),{type:"internal",mode:T.mode}}}),gt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(N){let{parser:T,funcName:P}=N;const B=H0(T.gullet.popToken()),J=T.gullet.popToken(),ce=T.gullet.popToken();return zu(T,B,ce,P==="\\\\globalfuture"),T.gullet.pushToken(ce),T.gullet.pushToken(J),{type:"internal",mode:T.mode}}});const Ho=function(N,T,P){const B=Yt.math[N]&&Yt.math[N].replace,J=At(B||N,T,P);if(!J)throw new Error("Unsupported symbol "+N+" and font size "+T+".");return J},ac=function(N,T,P,B){const J=P.havingBaseStyle(T),ce=Re.makeSpan(B.concat(J.sizingClasses(P)),[N],P),ve=J.sizeMultiplier/P.sizeMultiplier;return ce.height*=ve,ce.depth*=ve,ce.maxFontSize=J.sizeMultiplier,ce},Ti=function(N,T,P){const B=T.havingBaseStyle(P),J=(1-T.sizeMultiplier/B.sizeMultiplier)*T.fontMetrics().axisHeight;N.classes.push("delimcenter"),N.style.top=nt(J),N.height-=J,N.depth+=J},ic=function(N,T,P,B,J,ce){const ve=Re.makeSymbol(N,"Main-Regular",J,B),Te=ac(ve,T,B,ce);return P&&Ti(Te,B,T),Te},G0=function(N,T,P,B){return Re.makeSymbol(N,"Size"+T+"-Regular",P,B)},V0=function(N,T,P,B,J,ce){const ve=G0(N,T,J,B),Te=ac(Re.makeSpan(["delimsizing","size"+T],[ve],B),V.TEXT,B,ce);return P&&Ti(Te,B,V.TEXT),Te},Ki=function(N,T,P){let B;return T==="Size1-Regular"?B="delim-size1":B="delim-size4",{type:"elem",elem:Re.makeSpan(["delimsizinginner",B],[Re.makeSpan([],[Re.makeSymbol(N,T,P)])])}},fi=function(N,T,P){const B=Ze["Size4-Regular"][N.charCodeAt(0)]?Ze["Size4-Regular"][N.charCodeAt(0)][4]:Ze["Size1-Regular"][N.charCodeAt(0)][4],J=new ze("inner",We(N,Math.round(1e3*T))),ce=new Lt([J],{width:nt(B),height:nt(T),style:"width:"+nt(B),viewBox:"0 0 "+1e3*B+" "+Math.round(1e3*T),preserveAspectRatio:"xMinYMin"}),ve=Re.makeSvgSpan([],[ce],P);return ve.height=T,ve.style.height=nt(T),ve.style.width=nt(B),{type:"elem",elem:ve}},Ld=.008,Bd={type:"kern",size:-1*Ld},Pl=["|","\\lvert","\\rvert","\\vert"],Ml=["\\|","\\lVert","\\rVert","\\Vert"],Uu=function(N,T,P,B,J,ce){let ve,Te,Oe,Ge,$e="",at=0;ve=Oe=Ge=N,Te=null;let Ct="Size1-Regular";N==="\\uparrow"?Oe=Ge="":N==="\\Uparrow"?Oe=Ge="":N==="\\downarrow"?ve=Oe="":N==="\\Downarrow"?ve=Oe="":N==="\\updownarrow"?(ve="\\uparrow",Oe="",Ge="\\downarrow"):N==="\\Updownarrow"?(ve="\\Uparrow",Oe="",Ge="\\Downarrow"):Pl.includes(N)?(Oe="",$e="vert",at=333):Ml.includes(N)?(Oe="",$e="doublevert",at=556):N==="["||N==="\\lbrack"?(ve="",Oe="",Ge="",Ct="Size4-Regular",$e="lbrack",at=667):N==="]"||N==="\\rbrack"?(ve="",Oe="",Ge="",Ct="Size4-Regular",$e="rbrack",at=667):N==="\\lfloor"||N===""?(Oe=ve="",Ge="",Ct="Size4-Regular",$e="lfloor",at=667):N==="\\lceil"||N===""?(ve="",Oe=Ge="",Ct="Size4-Regular",$e="lceil",at=667):N==="\\rfloor"||N===""?(Oe=ve="",Ge="",Ct="Size4-Regular",$e="rfloor",at=667):N==="\\rceil"||N===""?(ve="",Oe=Ge="",Ct="Size4-Regular",$e="rceil",at=667):N==="("||N==="\\lparen"?(ve="",Oe="",Ge="",Ct="Size4-Regular",$e="lparen",at=875):N===")"||N==="\\rparen"?(ve="",Oe="",Ge="",Ct="Size4-Regular",$e="rparen",at=875):N==="\\{"||N==="\\lbrace"?(ve="",Te="",Ge="",Oe="",Ct="Size4-Regular"):N==="\\}"||N==="\\rbrace"?(ve="",Te="",Ge="",Oe="",Ct="Size4-Regular"):N==="\\lgroup"||N===""?(ve="",Ge="",Oe="",Ct="Size4-Regular"):N==="\\rgroup"||N===""?(ve="",Ge="",Oe="",Ct="Size4-Regular"):N==="\\lmoustache"||N===""?(ve="",Ge="",Oe="",Ct="Size4-Regular"):(N==="\\rmoustache"||N==="")&&(ve="",Ge="",Oe="",Ct="Size4-Regular");const rr=Ho(ve,Ct,J),Nr=rr.height+rr.depth,Mr=Ho(Oe,Ct,J),wn=Mr.height+Mr.depth,yn=Ho(Ge,Ct,J),Sn=yn.height+yn.depth;let In=0,zn=1;if(Te!==null){const ms=Ho(Te,Ct,J);In=ms.height+ms.depth,zn=2}const ua=Nr+Sn+In,Us=Math.max(0,Math.ceil((T-ua)/(zn*wn))),Un=ua+Us*zn*wn;let da=B.fontMetrics().axisHeight;P&&(da*=B.sizeMultiplier);const un=Un/2-da,Wn=[];if($e.length>0){const ms=Un-Nr-Sn,jn=Math.round(Un*1e3),$a=St($e,Math.round(ms*1e3)),df=new ze($e,$a),Xd=(at/1e3).toFixed(3)+"em",Yd=(jn/1e3).toFixed(3)+"em",ff=new Lt([df],{width:Xd,height:Yd,viewBox:"0 0 "+at+" "+jn}),ko=Re.makeSvgSpan([],[ff],B);ko.height=jn/1e3,ko.style.width=Xd,ko.style.height=Yd,Wn.push({type:"elem",elem:ko})}else{if(Wn.push(Ki(Ge,Ct,J)),Wn.push(Bd),Te===null){const ms=Un-Nr-Sn+2*Ld;Wn.push(fi(Oe,ms,B))}else{const ms=(Un-Nr-Sn-In)/2+2*Ld;Wn.push(fi(Oe,ms,B)),Wn.push(Bd),Wn.push(Ki(Te,Ct,J)),Wn.push(Bd),Wn.push(fi(Oe,ms,B))}Wn.push(Bd),Wn.push(Ki(ve,Ct,J))}const qn=B.havingBaseStyle(V.TEXT),An=Re.makeVList({positionType:"bottom",positionData:un,children:Wn},qn);return ac(Re.makeSpan(["delimsizing","mult"],[An],qn),V.TEXT,B,ce)},oc=80,ul=.08,q0=function(N,T,P,B,J){const ce=_e(N,B,P),ve=new ze(N,ce),Te=new Lt([ve],{width:"400em",height:nt(T),viewBox:"0 0 400000 "+P,preserveAspectRatio:"xMinYMin slice"});return Re.makeSvgSpan(["hide-tail"],[Te],J)},lc=function(N,T){const P=T.havingBaseSizing(),B=$d("\\surd",N*P.sizeMultiplier,X0,P);let J=P.sizeMultiplier;const ce=Math.max(0,T.minRuleThickness-T.fontMetrics().sqrtRuleThickness);let ve,Te=0,Oe=0,Ge=0,$e;return B.type==="small"?(Ge=1e3+1e3*ce+oc,N<1?J=1:N<1.4&&(J=.7),Te=(1+ce+ul)/J,Oe=(1+ce)/J,ve=q0("sqrtMain",Te,Ge,ce,T),ve.style.minWidth="0.853em",$e=.833/J):B.type==="large"?(Ge=(1e3+oc)*ei[B.size],Oe=(ei[B.size]+ce)/J,Te=(ei[B.size]+ce+ul)/J,ve=q0("sqrtSize"+B.size,Te,Ge,ce,T),ve.style.minWidth="1.02em",$e=1/J):(Te=N+ce+ul,Oe=N+ce,Ge=Math.floor(1e3*N+ce)+oc,ve=q0("sqrtTall",Te,Ge,ce,T),ve.style.minWidth="0.742em",$e=1.056),ve.height=Oe,ve.style.height=nt(Te),{span:ve,advanceWidth:$e,ruleWidth:(T.fontMetrics().sqrtRuleThickness+ce)*J}},Xi=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Wu=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],Fl=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],ei=[0,1.2,1.8,2.4,3],K0=function(N,T,P,B,J){if(N==="<"||N==="\\lt"||N===""?N="\\langle":(N===">"||N==="\\gt"||N==="")&&(N="\\rangle"),Xi.includes(N)||Fl.includes(N))return V0(N,T,!1,P,B,J);if(Wu.includes(N))return Uu(N,ei[T],!1,P,B,J);throw new a("Illegal delimiter: '"+N+"'")},uu=[{type:"small",style:V.SCRIPTSCRIPT},{type:"small",style:V.SCRIPT},{type:"small",style:V.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Eh=[{type:"small",style:V.SCRIPTSCRIPT},{type:"small",style:V.SCRIPT},{type:"small",style:V.TEXT},{type:"stack"}],X0=[{type:"small",style:V.SCRIPTSCRIPT},{type:"small",style:V.SCRIPT},{type:"small",style:V.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],js=function(N){if(N.type==="small")return"Main-Regular";if(N.type==="large")return"Size"+N.size+"-Regular";if(N.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+N.type+"' here.")},$d=function(N,T,P,B){const J=Math.min(2,3-B.style.size);for(let ce=J;ce<P.length&&P[ce].type!=="stack";ce++){const ve=Ho(N,js(P[ce]),"math");let Te=ve.height+ve.depth;if(P[ce].type==="small"){const Oe=B.havingBaseStyle(P[ce].style);Te*=Oe.sizeMultiplier}if(Te>T)return P[ce]}return P[P.length-1]},Y0=function(N,T,P,B,J,ce){N==="<"||N==="\\lt"||N===""?N="\\langle":(N===">"||N==="\\gt"||N==="")&&(N="\\rangle");let ve;Fl.includes(N)?ve=uu:Xi.includes(N)?ve=X0:ve=Eh;const Te=$d(N,T,ve,B);return Te.type==="small"?ic(N,Te.style,P,B,J,ce):Te.type==="large"?V0(N,Te.size,P,B,J,ce):Uu(N,T,P,B,J,ce)};var Is={sqrtImage:lc,sizedDelim:K0,sizeToMaxHeight:ei,customSizedDelim:Y0,leftRightDelim:function(N,T,P,B,J,ce){const ve=B.fontMetrics().axisHeight*B.sizeMultiplier,Te=901,Oe=5/B.fontMetrics().ptPerEm,Ge=Math.max(T-ve,P+ve),$e=Math.max(Ge/500*Te,2*Ge-Oe);return Y0(N,$e,!0,B,J,ce)}};const cc={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},uc=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function os(N,T){const P=Od(N);if(P&&uc.includes(P.text))return P;throw P?new a("Invalid delimiter '"+P.text+"' after '"+T.funcName+"'",N):new a("Invalid delimiter type '"+N.type+"'",N)}gt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(N,T)=>{const P=os(T[0],N);return{type:"delimsizing",mode:N.parser.mode,size:cc[N.funcName].size,mclass:cc[N.funcName].mclass,delim:P.text}},htmlBuilder:(N,T)=>N.delim==="."?Re.makeSpan([N.mclass]):Is.sizedDelim(N.delim,N.size,T,N.mode,[N.mclass]),mathmlBuilder:N=>{const T=[];N.delim!=="."&&T.push(Zs(N.delim,N.mode));const P=new ar.MathNode("mo",T);N.mclass==="mopen"||N.mclass==="mclose"?P.setAttribute("fence","true"):P.setAttribute("fence","false"),P.setAttribute("stretchy","true");const B=nt(Is.sizeToMaxHeight[N.size]);return P.setAttribute("minsize",B),P.setAttribute("maxsize",B),P}});function $s(N){if(!N.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}gt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(N,T)=>{const P=N.parser.gullet.macros.get("\\current@color");if(P&&typeof P!="string")throw new a("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:N.parser.mode,delim:os(T[0],N).text,color:P}}}),gt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(N,T)=>{const P=os(T[0],N),B=N.parser;++B.leftrightDepth;const J=B.parseExpression(!1);--B.leftrightDepth,B.expect("\\right",!1);const ce=cn(B.parseFunction(),"leftright-right");return{type:"leftright",mode:B.mode,body:J,left:P.text,right:ce.delim,rightColor:ce.color}},htmlBuilder:(N,T)=>{$s(N);const P=Ds(N.body,T,!0,["mopen","mclose"]);let B=0,J=0,ce=!1;for(let Oe=0;Oe<P.length;Oe++)P[Oe].isMiddle?ce=!0:(B=Math.max(P[Oe].height,B),J=Math.max(P[Oe].depth,J));B*=T.sizeMultiplier,J*=T.sizeMultiplier;let ve;if(N.left==="."?ve=nc(T,["mopen"]):ve=Is.leftRightDelim(N.left,B,J,T,N.mode,["mopen"]),P.unshift(ve),ce)for(let Oe=1;Oe<P.length;Oe++){const $e=P[Oe].isMiddle;$e&&(P[Oe]=Is.leftRightDelim($e.delim,B,J,$e.options,N.mode,[]))}let Te;if(N.right===".")Te=nc(T,["mclose"]);else{const Oe=N.rightColor?T.withColor(N.rightColor):T;Te=Is.leftRightDelim(N.right,B,J,Oe,N.mode,["mclose"])}return P.push(Te),Re.makeSpan(["minner"],P,T)},mathmlBuilder:(N,T)=>{$s(N);const P=fs(N.body,T);if(N.left!=="."){const B=new ar.MathNode("mo",[Zs(N.left,N.mode)]);B.setAttribute("fence","true"),P.unshift(B)}if(N.right!=="."){const B=new ar.MathNode("mo",[Zs(N.right,N.mode)]);B.setAttribute("fence","true"),N.rightColor&&B.setAttribute("mathcolor",N.rightColor),P.push(B)}return iu(P)}}),gt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(N,T)=>{const P=os(T[0],N);if(!N.parser.leftrightDepth)throw new a("\\middle without preceding \\left",P);return{type:"middle",mode:N.parser.mode,delim:P.text}},htmlBuilder:(N,T)=>{let P;if(N.delim===".")P=nc(T,[]);else{P=Is.sizedDelim(N.delim,1,T,N.mode,[]);const B={delim:N.delim,options:T};P.isMiddle=B}return P},mathmlBuilder:(N,T)=>{const P=N.delim==="\\vert"||N.delim==="|"?Zs("|","text"):Zs(N.delim,N.mode),B=new ar.MathNode("mo",[P]);return B.setAttribute("fence","true"),B.setAttribute("lspace","0.05em"),B.setAttribute("rspace","0.05em"),B}});const zs=(N,T)=>{const P=Re.wrapFragment(ln(N.body,T),T),B=N.label.slice(1);let J=T.sizeMultiplier,ce,ve=0;const Te=v.isCharacterBox(N.body);if(B==="sout")ce=Re.makeSpan(["stretchy","sout"]),ce.height=T.fontMetrics().defaultRuleThickness/J,ve=-.5*T.fontMetrics().xHeight;else if(B==="phase"){const Ge=Ot({number:.6,unit:"pt"},T),$e=Ot({number:.35,unit:"ex"},T),at=T.havingBaseSizing();J=J/at.sizeMultiplier;const Ct=P.height+P.depth+Ge+$e;P.style.paddingLeft=nt(Ct/2+Ge);const rr=Math.floor(1e3*Ct*J),Nr=Ie(rr),Mr=new Lt([new ze("phase",Nr)],{width:"400em",height:nt(rr/1e3),viewBox:"0 0 400000 "+rr,preserveAspectRatio:"xMinYMin slice"});ce=Re.makeSvgSpan(["hide-tail"],[Mr],T),ce.style.height=nt(Ct),ve=P.depth+Ge+$e}else{/cancel/.test(B)?Te||P.classes.push("cancel-pad"):B==="angl"?P.classes.push("anglpad"):P.classes.push("boxpad");let Ge=0,$e=0,at=0;/box/.test(B)?(at=Math.max(T.fontMetrics().fboxrule,T.minRuleThickness),Ge=T.fontMetrics().fboxsep+(B==="colorbox"?0:at),$e=Ge):B==="angl"?(at=Math.max(T.fontMetrics().defaultRuleThickness,T.minRuleThickness),Ge=4*at,$e=Math.max(0,.25-P.depth)):(Ge=Te?.2:0,$e=Ge),ce=bo.encloseSpan(P,B,Ge,$e,T),/fbox|boxed|fcolorbox/.test(B)?(ce.style.borderStyle="solid",ce.style.borderWidth=nt(at)):B==="angl"&&at!==.049&&(ce.style.borderTopWidth=nt(at),ce.style.borderRightWidth=nt(at)),ve=P.depth+$e,N.backgroundColor&&(ce.style.backgroundColor=N.backgroundColor,N.borderColor&&(ce.style.borderColor=N.borderColor))}let Oe;if(N.backgroundColor)Oe=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:ce,shift:ve},{type:"elem",elem:P,shift:0}]},T);else{const Ge=/cancel|phase/.test(B)?["svg-align"]:[];Oe=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:P,shift:0},{type:"elem",elem:ce,shift:ve,wrapperClasses:Ge}]},T)}return/cancel/.test(B)&&(Oe.height=P.height,Oe.depth=P.depth),/cancel/.test(B)&&!Te?Re.makeSpan(["mord","cancel-lap"],[Oe],T):Re.makeSpan(["mord"],[Oe],T)},dc=(N,T)=>{let P=0;const B=new ar.MathNode(N.label.indexOf("colorbox")>-1?"mpadded":"menclose",[vn(N.body,T)]);switch(N.label){case"\\cancel":B.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":B.setAttribute("notation","downdiagonalstrike");break;case"\\phase":B.setAttribute("notation","phasorangle");break;case"\\sout":B.setAttribute("notation","horizontalstrike");break;case"\\fbox":B.setAttribute("notation","box");break;case"\\angl":B.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(P=T.fontMetrics().fboxsep*T.fontMetrics().ptPerEm,B.setAttribute("width","+"+2*P+"pt"),B.setAttribute("height","+"+2*P+"pt"),B.setAttribute("lspace",P+"pt"),B.setAttribute("voffset",P+"pt"),N.label==="\\fcolorbox"){const J=Math.max(T.fontMetrics().fboxrule,T.minRuleThickness);B.setAttribute("style","border: "+J+"em solid "+String(N.borderColor))}break;case"\\xcancel":B.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return N.backgroundColor&&B.setAttribute("mathbackground",N.backgroundColor),B};gt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(N,T,P){let{parser:B,funcName:J}=N;const ce=cn(T[0],"color-token").color,ve=T[1];return{type:"enclose",mode:B.mode,label:J,backgroundColor:ce,body:ve}},htmlBuilder:zs,mathmlBuilder:dc}),gt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(N,T,P){let{parser:B,funcName:J}=N;const ce=cn(T[0],"color-token").color,ve=cn(T[1],"color-token").color,Te=T[2];return{type:"enclose",mode:B.mode,label:J,backgroundColor:ve,borderColor:ce,body:Te}},htmlBuilder:zs,mathmlBuilder:dc}),gt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(N,T){let{parser:P}=N;return{type:"enclose",mode:P.mode,label:"\\fbox",body:T[0]}}}),gt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(N,T){let{parser:P,funcName:B}=N;const J=T[0];return{type:"enclose",mode:P.mode,label:B,body:J}},htmlBuilder:zs,mathmlBuilder:dc}),gt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(N,T){let{parser:P}=N;return{type:"enclose",mode:P.mode,label:"\\angl",body:T[0]}}});const Hu={};function Ci(N){let{type:T,names:P,props:B,handler:J,htmlBuilder:ce,mathmlBuilder:ve}=N;const Te={type:T,numArgs:B.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:J};for(let Oe=0;Oe<P.length;++Oe)Hu[P[Oe]]=Te;ce&&(_t[T]=ce),ve&&(pr[T]=ve)}const du={};function Ne(N,T){du[N]=T}class ea{constructor(T,P,B){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=T,this.start=P,this.end=B}static range(T,P){return P?!T||!T.loc||!P.loc||T.loc.lexer!==P.loc.lexer?null:new ea(T.loc.lexer,T.loc.start,P.loc.end):T&&T.loc}}class Ra{constructor(T,P){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=T,this.loc=P}range(T,P){return new Ra(P,ea.range(this,T))}}function zd(N){const T=[];N.consumeSpaces();let P=N.fetch().text;for(P==="\\relax"&&(N.consume(),N.consumeSpaces(),P=N.fetch().text);P==="\\hline"||P==="\\hdashline";)N.consume(),T.push(P==="\\hdashline"),N.consumeSpaces(),P=N.fetch().text;return T}const ti=N=>{if(!N.parser.settings.displayMode)throw new a("{"+N.envName+"} can be used only in display mode.")};function oa(N){if(N.indexOf("ed")===-1)return N.indexOf("*")===-1}function Ni(N,T,P){let{hskipBeforeAndAfter:B,addJot:J,cols:ce,arraystretch:ve,colSeparationType:Te,autoTag:Oe,singleRow:Ge,emptySingleRow:$e,maxNumCols:at,leqno:Ct}=T;if(N.gullet.beginGroup(),Ge||N.gullet.macros.set("\\cr","\\\\\\relax"),!ve){const zn=N.gullet.expandMacroAsText("\\arraystretch");if(zn==null)ve=1;else if(ve=parseFloat(zn),!ve||ve<0)throw new a("Invalid \\arraystretch: "+zn)}N.gullet.beginGroup();let rr=[];const Nr=[rr],Mr=[],wn=[],yn=Oe!=null?[]:void 0;function Sn(){Oe&&N.gullet.macros.set("\\@eqnsw","1",!0)}function In(){yn&&(N.gullet.macros.get("\\df@tag")?(yn.push(N.subparse([new Ra("\\df@tag")])),N.gullet.macros.set("\\df@tag",void 0,!0)):yn.push(!!Oe&&N.gullet.macros.get("\\@eqnsw")==="1"))}for(Sn(),wn.push(zd(N));;){let zn=N.parseExpression(!1,Ge?"\\end":"\\\\");N.gullet.endGroup(),N.gullet.beginGroup(),zn={type:"ordgroup",mode:N.mode,body:zn},P&&(zn={type:"styling",mode:N.mode,style:P,body:[zn]}),rr.push(zn);const ua=N.fetch().text;if(ua==="&"){if(at&&rr.length===at){if(Ge||Te)throw new a("Too many tab characters: &",N.nextToken);N.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}N.consume()}else if(ua==="\\end"){In(),rr.length===1&&zn.type==="styling"&&zn.body[0].body.length===0&&(Nr.length>1||!$e)&&Nr.pop(),wn.length<Nr.length+1&&wn.push([]);break}else if(ua==="\\\\"){N.consume();let Us;N.gullet.future().text!==" "&&(Us=N.parseSizeGroup(!0)),Mr.push(Us?Us.value:null),In(),wn.push(zd(N)),rr=[],Nr.push(rr),Sn()}else throw new a("Expected & or \\\\ or \\cr or \\end",N.nextToken)}return N.gullet.endGroup(),N.gullet.endGroup(),{type:"array",mode:N.mode,addJot:J,arraystretch:ve,body:Nr,cols:ce,rowGaps:Mr,hskipBeforeAndAfter:B,hLinesBeforeRow:wn,colSeparationType:Te,tags:yn,leqno:Ct}}function Gu(N){return N.slice(0,1)==="d"?"display":"text"}const hi=function(N,T){let P,B;const J=N.body.length,ce=N.hLinesBeforeRow;let ve=0,Te=new Array(J);const Oe=[],Ge=Math.max(T.fontMetrics().arrayRuleWidth,T.minRuleThickness),$e=1/T.fontMetrics().ptPerEm;let at=5*$e;N.colSeparationType&&N.colSeparationType==="small"&&(at=.2778*(T.havingStyle(V.SCRIPT).sizeMultiplier/T.sizeMultiplier));const Ct=N.colSeparationType==="CD"?Ot({number:3,unit:"ex"},T):12*$e,rr=3*$e,Nr=N.arraystretch*Ct,Mr=.7*Nr,wn=.3*Nr;let yn=0;function Sn(un){for(let Wn=0;Wn<un.length;++Wn)Wn>0&&(yn+=.25),Oe.push({pos:yn,isDashed:un[Wn]})}for(Sn(ce[0]),P=0;P<N.body.length;++P){const un=N.body[P];let Wn=Mr,qn=wn;ve<un.length&&(ve=un.length);const An=new Array(un.length);for(B=0;B<un.length;++B){const $a=ln(un[B],T);qn<$a.depth&&(qn=$a.depth),Wn<$a.height&&(Wn=$a.height),An[B]=$a}const ms=N.rowGaps[P];let jn=0;ms&&(jn=Ot(ms,T),jn>0&&(jn+=wn,qn<jn&&(qn=jn),jn=0)),N.addJot&&(qn+=rr),An.height=Wn,An.depth=qn,yn+=Wn,An.pos=yn,yn+=qn+jn,Te[P]=An,Sn(ce[P+1])}const In=yn/2+T.fontMetrics().axisHeight,zn=N.cols||[],ua=[];let Us,Un;const da=[];if(N.tags&&N.tags.some(un=>un))for(P=0;P<J;++P){const un=Te[P],Wn=un.pos-In,qn=N.tags[P];let An;qn===!0?An=Re.makeSpan(["eqn-num"],[],T):qn===!1?An=Re.makeSpan([],[],T):An=Re.makeSpan([],Ds(qn,T,!0),T),An.depth=un.depth,An.height=un.height,da.push({type:"elem",elem:An,shift:Wn})}for(B=0,Un=0;B<ve||Un<zn.length;++B,++Un){let un=zn[Un]||{},Wn=!0;for(;un.type==="separator";){if(Wn||(Us=Re.makeSpan(["arraycolsep"],[]),Us.style.width=nt(T.fontMetrics().doubleRuleSep),ua.push(Us)),un.separator==="|"||un.separator===":"){const ms=un.separator==="|"?"solid":"dashed",jn=Re.makeSpan(["vertical-separator"],[],T);jn.style.height=nt(yn),jn.style.borderRightWidth=nt(Ge),jn.style.borderRightStyle=ms,jn.style.margin="0 "+nt(-Ge/2);const $a=yn-In;$a&&(jn.style.verticalAlign=nt(-$a)),ua.push(jn)}else throw new a("Invalid separator type: "+un.separator);Un++,un=zn[Un]||{},Wn=!1}if(B>=ve)continue;let qn;(B>0||N.hskipBeforeAndAfter)&&(qn=v.deflt(un.pregap,at),qn!==0&&(Us=Re.makeSpan(["arraycolsep"],[]),Us.style.width=nt(qn),ua.push(Us)));let An=[];for(P=0;P<J;++P){const ms=Te[P],jn=ms[B];if(!jn)continue;const $a=ms.pos-In;jn.depth=ms.depth,jn.height=ms.height,An.push({type:"elem",elem:jn,shift:$a})}An=Re.makeVList({positionType:"individualShift",children:An},T),An=Re.makeSpan(["col-align-"+(un.align||"c")],[An]),ua.push(An),(B<ve-1||N.hskipBeforeAndAfter)&&(qn=v.deflt(un.postgap,at),qn!==0&&(Us=Re.makeSpan(["arraycolsep"],[]),Us.style.width=nt(qn),ua.push(Us)))}if(Te=Re.makeSpan(["mtable"],ua),Oe.length>0){const un=Re.makeLineSpan("hline",T,Ge),Wn=Re.makeLineSpan("hdashline",T,Ge),qn=[{type:"elem",elem:Te,shift:0}];for(;Oe.length>0;){const An=Oe.pop(),ms=An.pos-In;An.isDashed?qn.push({type:"elem",elem:Wn,shift:ms}):qn.push({type:"elem",elem:un,shift:ms})}Te=Re.makeVList({positionType:"individualShift",children:qn},T)}if(da.length===0)return Re.makeSpan(["mord"],[Te],T);{let un=Re.makeVList({positionType:"individualShift",children:da},T);return un=Re.makeSpan(["tag"],[un],T),Re.makeFragment([Te,un])}},Ah={c:"center ",l:"left ",r:"right "},_o=function(N,T){const P=[],B=new ar.MathNode("mtd",[],["mtr-glue"]),J=new ar.MathNode("mtd",[],["mml-eqn-num"]);for(let at=0;at<N.body.length;at++){const Ct=N.body[at],rr=[];for(let Nr=0;Nr<Ct.length;Nr++)rr.push(new ar.MathNode("mtd",[vn(Ct[Nr],T)]));N.tags&&N.tags[at]&&(rr.unshift(B),rr.push(B),N.leqno?rr.unshift(J):rr.push(J)),P.push(new ar.MathNode("mtr",rr))}let ce=new ar.MathNode("mtable",P);const ve=N.arraystretch===.5?.1:.16+N.arraystretch-1+(N.addJot?.09:0);ce.setAttribute("rowspacing",nt(ve));let Te="",Oe="";if(N.cols&&N.cols.length>0){const at=N.cols;let Ct="",rr=!1,Nr=0,Mr=at.length;at[0].type==="separator"&&(Te+="top ",Nr=1),at[at.length-1].type==="separator"&&(Te+="bottom ",Mr-=1);for(let wn=Nr;wn<Mr;wn++)at[wn].type==="align"?(Oe+=Ah[at[wn].align],rr&&(Ct+="none "),rr=!0):at[wn].type==="separator"&&rr&&(Ct+=at[wn].separator==="|"?"solid ":"dashed ",rr=!1);ce.setAttribute("columnalign",Oe.trim()),/[sd]/.test(Ct)&&ce.setAttribute("columnlines",Ct.trim())}if(N.colSeparationType==="align"){const at=N.cols||[];let Ct="";for(let rr=1;rr<at.length;rr++)Ct+=rr%2?"0em ":"1em ";ce.setAttribute("columnspacing",Ct.trim())}else N.colSeparationType==="alignat"||N.colSeparationType==="gather"?ce.setAttribute("columnspacing","0em"):N.colSeparationType==="small"?ce.setAttribute("columnspacing","0.2778em"):N.colSeparationType==="CD"?ce.setAttribute("columnspacing","0.5em"):ce.setAttribute("columnspacing","1em");let Ge="";const $e=N.hLinesBeforeRow;Te+=$e[0].length>0?"left ":"",Te+=$e[$e.length-1].length>0?"right ":"";for(let at=1;at<$e.length-1;at++)Ge+=$e[at].length===0?"none ":$e[at][0]?"dashed ":"solid ";return/[sd]/.test(Ge)&&ce.setAttribute("rowlines",Ge.trim()),Te!==""&&(ce=new ar.MathNode("menclose",[ce]),ce.setAttribute("notation",Te.trim())),N.arraystretch&&N.arraystretch<1&&(ce=new ar.MathNode("mstyle",[ce]),ce.setAttribute("scriptlevel","1")),ce},J0=function(N,T){N.envName.indexOf("ed")===-1&&ti(N);const P=[],B=N.envName.indexOf("at")>-1?"alignat":"align",J=N.envName==="split",ce=Ni(N.parser,{cols:P,addJot:!0,autoTag:J?void 0:oa(N.envName),emptySingleRow:!0,colSeparationType:B,maxNumCols:J?2:void 0,leqno:N.parser.settings.leqno},"display");let ve,Te=0;const Oe={type:"ordgroup",mode:N.mode,body:[]};if(T[0]&&T[0].type==="ordgroup"){let $e="";for(let at=0;at<T[0].body.length;at++){const Ct=cn(T[0].body[at],"textord");$e+=Ct.text}ve=Number($e),Te=ve*2}const Ge=!Te;ce.body.forEach(function($e){for(let at=1;at<$e.length;at+=2){const Ct=cn($e[at],"styling");cn(Ct.body[0],"ordgroup").body.unshift(Oe)}if(Ge)Te<$e.length&&(Te=$e.length);else{const at=$e.length/2;if(ve<at)throw new a("Too many math in a row: "+("expected "+ve+", but got "+at),$e[0])}});for(let $e=0;$e<Te;++$e){let at="r",Ct=0;$e%2===1?at="l":$e>0&&Ge&&(Ct=1),P[$e]={type:"align",align:at,pregap:Ct,postgap:0}}return ce.colSeparationType=Ge?"align":"alignat",ce};Ci({type:"array",names:["array","darray"],props:{numArgs:1},handler(N,T){const J=(Od(T[0])?[T[0]]:cn(T[0],"ordgroup").body).map(function(ve){const Oe=Fd(ve).text;if("lcr".indexOf(Oe)!==-1)return{type:"align",align:Oe};if(Oe==="|")return{type:"separator",separator:"|"};if(Oe===":")return{type:"separator",separator:":"};throw new a("Unknown column alignment: "+Oe,ve)}),ce={cols:J,hskipBeforeAndAfter:!0,maxNumCols:J.length};return Ni(N.parser,ce,Gu(N.envName))},htmlBuilder:hi,mathmlBuilder:_o}),Ci({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(N){const T={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[N.envName.replace("*","")];let P="c";const B={hskipBeforeAndAfter:!1,cols:[{type:"align",align:P}]};if(N.envName.charAt(N.envName.length-1)==="*"){const ve=N.parser;if(ve.consumeSpaces(),ve.fetch().text==="["){if(ve.consume(),ve.consumeSpaces(),P=ve.fetch().text,"lcr".indexOf(P)===-1)throw new a("Expected l or c or r",ve.nextToken);ve.consume(),ve.consumeSpaces(),ve.expect("]"),ve.consume(),B.cols=[{type:"align",align:P}]}}const J=Ni(N.parser,B,Gu(N.envName)),ce=Math.max(0,...J.body.map(ve=>ve.length));return J.cols=new Array(ce).fill({type:"align",align:P}),T?{type:"leftright",mode:N.mode,body:[J],left:T[0],right:T[1],rightColor:void 0}:J},htmlBuilder:hi,mathmlBuilder:_o}),Ci({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(N){const T={arraystretch:.5},P=Ni(N.parser,T,"script");return P.colSeparationType="small",P},htmlBuilder:hi,mathmlBuilder:_o}),Ci({type:"array",names:["subarray"],props:{numArgs:1},handler(N,T){const J=(Od(T[0])?[T[0]]:cn(T[0],"ordgroup").body).map(function(ve){const Oe=Fd(ve).text;if("lc".indexOf(Oe)!==-1)return{type:"align",align:Oe};throw new a("Unknown column alignment: "+Oe,ve)});if(J.length>1)throw new a("{subarray} can contain only one column");let ce={cols:J,hskipBeforeAndAfter:!1,arraystretch:.5};if(ce=Ni(N.parser,ce,"script"),ce.body.length>0&&ce.body[0].length>1)throw new a("{subarray} can contain only one column");return ce},htmlBuilder:hi,mathmlBuilder:_o}),Ci({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(N){const T={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},P=Ni(N.parser,T,Gu(N.envName));return{type:"leftright",mode:N.mode,body:[P],left:N.envName.indexOf("r")>-1?".":"\\{",right:N.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:hi,mathmlBuilder:_o}),Ci({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:J0,htmlBuilder:hi,mathmlBuilder:_o}),Ci({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(N){["gather","gather*"].includes(N.envName)&&ti(N);const T={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:oa(N.envName),emptySingleRow:!0,leqno:N.parser.settings.leqno};return Ni(N.parser,T,"display")},htmlBuilder:hi,mathmlBuilder:_o}),Ci({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:J0,htmlBuilder:hi,mathmlBuilder:_o}),Ci({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(N){ti(N);const T={autoTag:oa(N.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:N.parser.settings.leqno};return Ni(N.parser,T,"display")},htmlBuilder:hi,mathmlBuilder:_o}),Ci({type:"array",names:["CD"],props:{numArgs:0},handler(N){return ti(N),W0(N.parser)},htmlBuilder:hi,mathmlBuilder:_o}),Ne("\\nonumber","\\gdef\\@eqnsw{0}"),Ne("\\notag","\\nonumber"),gt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(N,T){throw new a(N.funcName+" valid only within array environment")}});var Q0=Hu;gt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(N,T){let{parser:P,funcName:B}=N;const J=T[0];if(J.type!=="ordgroup")throw new a("Invalid environment name",J);let ce="";for(let ve=0;ve<J.body.length;++ve)ce+=cn(J.body[ve],"textord").text;if(B==="\\begin"){if(!Q0.hasOwnProperty(ce))throw new a("No such environment: "+ce,J);const ve=Q0[ce],{args:Te,optArgs:Oe}=P.parseArguments("\\begin{"+ce+"}",ve),Ge={mode:P.mode,envName:ce,parser:P},$e=ve.handler(Ge,Te,Oe);P.expect("\\end",!1);const at=P.nextToken,Ct=cn(P.parseFunction(),"environment");if(Ct.name!==ce)throw new a("Mismatch: \\begin{"+ce+"} matched by \\end{"+Ct.name+"}",at);return $e}return{type:"environment",mode:P.mode,name:ce,nameGroup:J}}});const Z0=(N,T)=>{const P=N.font,B=T.withFont(P);return ln(N.body,B)},dl=(N,T)=>{const P=N.font,B=T.withFont(P);return vn(N.body,B)},Ud={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};gt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(N,T)=>{let{parser:P,funcName:B}=N;const J=rn(T[0]);let ce=B;return ce in Ud&&(ce=Ud[ce]),{type:"font",mode:P.mode,font:ce.slice(1),body:J}},htmlBuilder:Z0,mathmlBuilder:dl}),gt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(N,T)=>{let{parser:P}=N;const B=T[0],J=v.isCharacterBox(B);return{type:"mclass",mode:P.mode,mclass:cl(B),body:[{type:"font",mode:P.mode,font:"boldsymbol",body:B}],isCharacterBox:J}}}),gt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(N,T)=>{let{parser:P,funcName:B,breakOnTokenText:J}=N;const{mode:ce}=P,ve=P.parseExpression(!0,J),Te="math"+B.slice(1);return{type:"font",mode:ce,font:Te,body:{type:"ordgroup",mode:P.mode,body:ve}}},htmlBuilder:Z0,mathmlBuilder:dl});const fc=(N,T)=>{let P=T;return N==="display"?P=P.id>=V.SCRIPT.id?P.text():V.DISPLAY:N==="text"&&P.size===V.DISPLAY.size?P=V.TEXT:N==="script"?P=V.SCRIPT:N==="scriptscript"&&(P=V.SCRIPTSCRIPT),P},ef=(N,T)=>{const P=fc(N.size,T.style),B=P.fracNum(),J=P.fracDen();let ce;ce=T.havingStyle(B);const ve=ln(N.numer,ce,T);if(N.continued){const Sn=8.5/T.fontMetrics().ptPerEm,In=3.5/T.fontMetrics().ptPerEm;ve.height=ve.height<Sn?Sn:ve.height,ve.depth=ve.depth<In?In:ve.depth}ce=T.havingStyle(J);const Te=ln(N.denom,ce,T);let Oe,Ge,$e;N.hasBarLine?(N.barSize?(Ge=Ot(N.barSize,T),Oe=Re.makeLineSpan("frac-line",T,Ge)):Oe=Re.makeLineSpan("frac-line",T),Ge=Oe.height,$e=Oe.height):(Oe=null,Ge=0,$e=T.fontMetrics().defaultRuleThickness);let at,Ct,rr;P.size===V.DISPLAY.size||N.size==="display"?(at=T.fontMetrics().num1,Ge>0?Ct=3*$e:Ct=7*$e,rr=T.fontMetrics().denom1):(Ge>0?(at=T.fontMetrics().num2,Ct=$e):(at=T.fontMetrics().num3,Ct=3*$e),rr=T.fontMetrics().denom2);let Nr;if(Oe){const Sn=T.fontMetrics().axisHeight;at-ve.depth-(Sn+.5*Ge)<Ct&&(at+=Ct-(at-ve.depth-(Sn+.5*Ge))),Sn-.5*Ge-(Te.height-rr)<Ct&&(rr+=Ct-(Sn-.5*Ge-(Te.height-rr)));const In=-(Sn-.5*Ge);Nr=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Te,shift:rr},{type:"elem",elem:Oe,shift:In},{type:"elem",elem:ve,shift:-at}]},T)}else{const Sn=at-ve.depth-(Te.height-rr);Sn<Ct&&(at+=.5*(Ct-Sn),rr+=.5*(Ct-Sn)),Nr=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Te,shift:rr},{type:"elem",elem:ve,shift:-at}]},T)}ce=T.havingStyle(P),Nr.height*=ce.sizeMultiplier/T.sizeMultiplier,Nr.depth*=ce.sizeMultiplier/T.sizeMultiplier;let Mr;P.size===V.DISPLAY.size?Mr=T.fontMetrics().delim1:P.size===V.SCRIPTSCRIPT.size?Mr=T.havingStyle(V.SCRIPT).fontMetrics().delim2:Mr=T.fontMetrics().delim2;let wn,yn;return N.leftDelim==null?wn=nc(T,["mopen"]):wn=Is.customSizedDelim(N.leftDelim,Mr,!0,T.havingStyle(P),N.mode,["mopen"]),N.continued?yn=Re.makeSpan([]):N.rightDelim==null?yn=nc(T,["mclose"]):yn=Is.customSizedDelim(N.rightDelim,Mr,!0,T.havingStyle(P),N.mode,["mclose"]),Re.makeSpan(["mord"].concat(ce.sizingClasses(T)),[wn,Re.makeSpan(["mfrac"],[Nr]),yn],T)},Vu=(N,T)=>{let P=new ar.MathNode("mfrac",[vn(N.numer,T),vn(N.denom,T)]);if(!N.hasBarLine)P.setAttribute("linethickness","0px");else if(N.barSize){const J=Ot(N.barSize,T);P.setAttribute("linethickness",nt(J))}const B=fc(N.size,T.style);if(B.size!==T.style.size){P=new ar.MathNode("mstyle",[P]);const J=B.size===V.DISPLAY.size?"true":"false";P.setAttribute("displaystyle",J),P.setAttribute("scriptlevel","0")}if(N.leftDelim!=null||N.rightDelim!=null){const J=[];if(N.leftDelim!=null){const ce=new ar.MathNode("mo",[new ar.TextNode(N.leftDelim.replace("\\",""))]);ce.setAttribute("fence","true"),J.push(ce)}if(J.push(P),N.rightDelim!=null){const ce=new ar.MathNode("mo",[new ar.TextNode(N.rightDelim.replace("\\",""))]);ce.setAttribute("fence","true"),J.push(ce)}return iu(J)}return P};gt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(N,T)=>{let{parser:P,funcName:B}=N;const J=T[0],ce=T[1];let ve,Te=null,Oe=null,Ge="auto";switch(B){case"\\dfrac":case"\\frac":case"\\tfrac":ve=!0;break;case"\\\\atopfrac":ve=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":ve=!1,Te="(",Oe=")";break;case"\\\\bracefrac":ve=!1,Te="\\{",Oe="\\}";break;case"\\\\brackfrac":ve=!1,Te="[",Oe="]";break;default:throw new Error("Unrecognized genfrac command")}switch(B){case"\\dfrac":case"\\dbinom":Ge="display";break;case"\\tfrac":case"\\tbinom":Ge="text";break}return{type:"genfrac",mode:P.mode,continued:!1,numer:J,denom:ce,hasBarLine:ve,leftDelim:Te,rightDelim:Oe,size:Ge,barSize:null}},htmlBuilder:ef,mathmlBuilder:Vu}),gt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(N,T)=>{let{parser:P,funcName:B}=N;const J=T[0],ce=T[1];return{type:"genfrac",mode:P.mode,continued:!0,numer:J,denom:ce,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),gt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(N){let{parser:T,funcName:P,token:B}=N,J;switch(P){case"\\over":J="\\frac";break;case"\\choose":J="\\binom";break;case"\\atop":J="\\\\atopfrac";break;case"\\brace":J="\\\\bracefrac";break;case"\\brack":J="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:T.mode,replaceWith:J,token:B}}});const Ol=["display","text","script","scriptscript"],jh=function(N){let T=null;return N.length>0&&(T=N,T=T==="."?null:T),T};gt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(N,T){let{parser:P}=N;const B=T[4],J=T[5],ce=rn(T[0]),ve=ce.type==="atom"&&ce.family==="open"?jh(ce.text):null,Te=rn(T[1]),Oe=Te.type==="atom"&&Te.family==="close"?jh(Te.text):null,Ge=cn(T[2],"size");let $e,at=null;Ge.isBlank?$e=!0:(at=Ge.value,$e=at.number>0);let Ct="auto",rr=T[3];if(rr.type==="ordgroup"){if(rr.body.length>0){const Nr=cn(rr.body[0],"textord");Ct=Ol[Number(Nr.text)]}}else rr=cn(rr,"textord"),Ct=Ol[Number(rr.text)];return{type:"genfrac",mode:P.mode,numer:B,denom:J,continued:!1,hasBarLine:$e,barSize:at,leftDelim:ve,rightDelim:Oe,size:Ct}},htmlBuilder:ef,mathmlBuilder:Vu}),gt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(N,T){let{parser:P,funcName:B,token:J}=N;return{type:"infix",mode:P.mode,replaceWith:"\\\\abovefrac",size:cn(T[0],"size").value,token:J}}}),gt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(N,T)=>{let{parser:P,funcName:B}=N;const J=T[0],ce=x(cn(T[1],"infix").size),ve=T[2],Te=ce.number>0;return{type:"genfrac",mode:P.mode,numer:J,denom:ve,continued:!1,hasBarLine:Te,barSize:ce,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:ef,mathmlBuilder:Vu});const Wd=(N,T)=>{const P=T.style;let B,J;N.type==="supsub"?(B=N.sup?ln(N.sup,T.havingStyle(P.sup()),T):ln(N.sub,T.havingStyle(P.sub()),T),J=cn(N.base,"horizBrace")):J=cn(N,"horizBrace");const ce=ln(J.base,T.havingBaseStyle(V.DISPLAY)),ve=bo.svgSpan(J,T);let Te;if(J.isOver?(Te=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:ce},{type:"kern",size:.1},{type:"elem",elem:ve}]},T),Te.children[0].children[0].children[1].classes.push("svg-align")):(Te=Re.makeVList({positionType:"bottom",positionData:ce.depth+.1+ve.height,children:[{type:"elem",elem:ve},{type:"kern",size:.1},{type:"elem",elem:ce}]},T),Te.children[0].children[0].children[0].classes.push("svg-align")),B){const Oe=Re.makeSpan(["mord",J.isOver?"mover":"munder"],[Te],T);J.isOver?Te=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:Oe},{type:"kern",size:.2},{type:"elem",elem:B}]},T):Te=Re.makeVList({positionType:"bottom",positionData:Oe.depth+.2+B.height+B.depth,children:[{type:"elem",elem:B},{type:"kern",size:.2},{type:"elem",elem:Oe}]},T)}return Re.makeSpan(["mord",J.isOver?"mover":"munder"],[Te],T)};gt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(N,T){let{parser:P,funcName:B}=N;return{type:"horizBrace",mode:P.mode,label:B,isOver:/^\\over/.test(B),base:T[0]}},htmlBuilder:Wd,mathmlBuilder:(N,T)=>{const P=bo.mathMLnode(N.label);return new ar.MathNode(N.isOver?"mover":"munder",[vn(N.base,T),P])}}),gt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(N,T)=>{let{parser:P}=N;const B=T[1],J=cn(T[0],"url").url;return P.settings.isTrusted({command:"\\href",url:J})?{type:"href",mode:P.mode,href:J,body:Lr(B)}:P.formatUnsupportedCmd("\\href")},htmlBuilder:(N,T)=>{const P=Ds(N.body,T,!1);return Re.makeAnchor(N.href,[],P,T)},mathmlBuilder:(N,T)=>{let P=hs(N.body,T);return P instanceof Za||(P=new Za("mrow",[P])),P.setAttribute("href",N.href),P}}),gt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(N,T)=>{let{parser:P}=N;const B=cn(T[0],"url").url;if(!P.settings.isTrusted({command:"\\url",url:B}))return P.formatUnsupportedCmd("\\url");const J=[];for(let ve=0;ve<B.length;ve++){let Te=B[ve];Te==="~"&&(Te="\\textasciitilde"),J.push({type:"textord",mode:"text",text:Te})}const ce={type:"text",mode:P.mode,font:"\\texttt",body:J};return{type:"href",mode:P.mode,href:B,body:Lr(ce)}}}),gt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(N,T){let{parser:P}=N;return{type:"hbox",mode:P.mode,body:Lr(T[0])}},htmlBuilder(N,T){const P=Ds(N.body,T,!1);return Re.makeFragment(P)},mathmlBuilder(N,T){return new ar.MathNode("mrow",fs(N.body,T))}}),gt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(N,T)=>{let{parser:P,funcName:B,token:J}=N;const ce=cn(T[0],"raw").string,ve=T[1];P.settings.strict&&P.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");let Te;const Oe={};switch(B){case"\\htmlClass":Oe.class=ce,Te={command:"\\htmlClass",class:ce};break;case"\\htmlId":Oe.id=ce,Te={command:"\\htmlId",id:ce};break;case"\\htmlStyle":Oe.style=ce,Te={command:"\\htmlStyle",style:ce};break;case"\\htmlData":{const Ge=ce.split(",");for(let $e=0;$e<Ge.length;$e++){const at=Ge[$e].split("=");if(at.length!==2)throw new a("Error parsing key-value for \\htmlData");Oe["data-"+at[0].trim()]=at[1].trim()}Te={command:"\\htmlData",attributes:Oe};break}default:throw new Error("Unrecognized html command")}return P.settings.isTrusted(Te)?{type:"html",mode:P.mode,attributes:Oe,body:Lr(ve)}:P.formatUnsupportedCmd(B)},htmlBuilder:(N,T)=>{const P=Ds(N.body,T,!1),B=["enclosing"];N.attributes.class&&B.push(...N.attributes.class.trim().split(/\s+/));const J=Re.makeSpan(B,P,T);for(const ce in N.attributes)ce!=="class"&&N.attributes.hasOwnProperty(ce)&&J.setAttribute(ce,N.attributes[ce]);return J},mathmlBuilder:(N,T)=>hs(N.body,T)}),gt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(N,T)=>{let{parser:P}=N;return{type:"htmlmathml",mode:P.mode,html:Lr(T[0]),mathml:Lr(T[1])}},htmlBuilder:(N,T)=>{const P=Ds(N.html,T,!1);return Re.makeFragment(P)},mathmlBuilder:(N,T)=>hs(N.mathml,T)});const rs=function(N){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(N))return{number:+N,unit:"bp"};{const T=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(N);if(!T)throw new a("Invalid size: '"+N+"' in \\includegraphics");const P={number:+(T[1]+T[2]),unit:T[3]};if(!ht(P))throw new a("Invalid unit: '"+P.unit+"' in \\includegraphics.");return P}};gt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(N,T,P)=>{let{parser:B}=N,J={number:0,unit:"em"},ce={number:.9,unit:"em"},ve={number:0,unit:"em"},Te="";if(P[0]){const $e=cn(P[0],"raw").string.split(",");for(let at=0;at<$e.length;at++){const Ct=$e[at].split("=");if(Ct.length===2){const rr=Ct[1].trim();switch(Ct[0].trim()){case"alt":Te=rr;break;case"width":J=rs(rr);break;case"height":ce=rs(rr);break;case"totalheight":ve=rs(rr);break;default:throw new a("Invalid key: '"+Ct[0]+"' in \\includegraphics.")}}}}const Oe=cn(T[0],"url").url;return Te===""&&(Te=Oe,Te=Te.replace(/^.*[\\/]/,""),Te=Te.substring(0,Te.lastIndexOf("."))),B.settings.isTrusted({command:"\\includegraphics",url:Oe})?{type:"includegraphics",mode:B.mode,alt:Te,width:J,height:ce,totalheight:ve,src:Oe}:B.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(N,T)=>{const P=Ot(N.height,T);let B=0;N.totalheight.number>0&&(B=Ot(N.totalheight,T)-P);let J=0;N.width.number>0&&(J=Ot(N.width,T));const ce={height:nt(P+B)};J>0&&(ce.width=nt(J)),B>0&&(ce.verticalAlign=nt(-B));const ve=new Be(N.src,N.alt,ce);return ve.height=P,ve.depth=B,ve},mathmlBuilder:(N,T)=>{const P=new ar.MathNode("mglyph",[]);P.setAttribute("alt",N.alt);const B=Ot(N.height,T);let J=0;if(N.totalheight.number>0&&(J=Ot(N.totalheight,T)-B,P.setAttribute("valign",nt(-J))),P.setAttribute("height",nt(B+J)),N.width.number>0){const ce=Ot(N.width,T);P.setAttribute("width",nt(ce))}return P.setAttribute("src",N.src),P}}),gt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(N,T){let{parser:P,funcName:B}=N;const J=cn(T[0],"size");if(P.settings.strict){const ce=B[1]==="m",ve=J.value.unit==="mu";ce?(ve||P.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+B+" supports only mu units, "+("not "+J.value.unit+" units")),P.mode!=="math"&&P.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+B+" works only in math mode")):ve&&P.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+B+" doesn't support mu units")}return{type:"kern",mode:P.mode,dimension:J.value}},htmlBuilder(N,T){return Re.makeGlue(N.dimension,T)},mathmlBuilder(N,T){const P=Ot(N.dimension,T);return new ar.SpaceNode(P)}}),gt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(N,T)=>{let{parser:P,funcName:B}=N;const J=T[0];return{type:"lap",mode:P.mode,alignment:B.slice(5),body:J}},htmlBuilder:(N,T)=>{let P;N.alignment==="clap"?(P=Re.makeSpan([],[ln(N.body,T)]),P=Re.makeSpan(["inner"],[P],T)):P=Re.makeSpan(["inner"],[ln(N.body,T)]);const B=Re.makeSpan(["fix"],[]);let J=Re.makeSpan([N.alignment],[P,B],T);const ce=Re.makeSpan(["strut"]);return ce.style.height=nt(J.height+J.depth),J.depth&&(ce.style.verticalAlign=nt(-J.depth)),J.children.unshift(ce),J=Re.makeSpan(["thinbox"],[J],T),Re.makeSpan(["mord","vbox"],[J],T)},mathmlBuilder:(N,T)=>{const P=new ar.MathNode("mpadded",[vn(N.body,T)]);if(N.alignment!=="rlap"){const B=N.alignment==="llap"?"-1":"-0.5";P.setAttribute("lspace",B+"width")}return P.setAttribute("width","0px"),P}}),gt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(N,T){let{funcName:P,parser:B}=N;const J=B.mode;B.switchMode("math");const ce=P==="\\("?"\\)":"$",ve=B.parseExpression(!1,ce);return B.expect(ce),B.switchMode(J),{type:"styling",mode:B.mode,style:"text",body:ve}}}),gt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(N,T){throw new a("Mismatched "+N.funcName)}});const Hd=(N,T)=>{switch(T.style.size){case V.DISPLAY.size:return N.display;case V.TEXT.size:return N.text;case V.SCRIPT.size:return N.script;case V.SCRIPTSCRIPT.size:return N.scriptscript;default:return N.text}};gt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(N,T)=>{let{parser:P}=N;return{type:"mathchoice",mode:P.mode,display:Lr(T[0]),text:Lr(T[1]),script:Lr(T[2]),scriptscript:Lr(T[3])}},htmlBuilder:(N,T)=>{const P=Hd(N,T),B=Ds(P,T,!1);return Re.makeFragment(B)},mathmlBuilder:(N,T)=>{const P=Hd(N,T);return hs(P,T)}});const qu=(N,T,P,B,J,ce,ve)=>{N=Re.makeSpan([],[N]);const Te=P&&v.isCharacterBox(P);let Oe,Ge;if(T){const Ct=ln(T,B.havingStyle(J.sup()),B);Ge={elem:Ct,kern:Math.max(B.fontMetrics().bigOpSpacing1,B.fontMetrics().bigOpSpacing3-Ct.depth)}}if(P){const Ct=ln(P,B.havingStyle(J.sub()),B);Oe={elem:Ct,kern:Math.max(B.fontMetrics().bigOpSpacing2,B.fontMetrics().bigOpSpacing4-Ct.height)}}let $e;if(Ge&&Oe){const Ct=B.fontMetrics().bigOpSpacing5+Oe.elem.height+Oe.elem.depth+Oe.kern+N.depth+ve;$e=Re.makeVList({positionType:"bottom",positionData:Ct,children:[{type:"kern",size:B.fontMetrics().bigOpSpacing5},{type:"elem",elem:Oe.elem,marginLeft:nt(-ce)},{type:"kern",size:Oe.kern},{type:"elem",elem:N},{type:"kern",size:Ge.kern},{type:"elem",elem:Ge.elem,marginLeft:nt(ce)},{type:"kern",size:B.fontMetrics().bigOpSpacing5}]},B)}else if(Oe){const Ct=N.height-ve;$e=Re.makeVList({positionType:"top",positionData:Ct,children:[{type:"kern",size:B.fontMetrics().bigOpSpacing5},{type:"elem",elem:Oe.elem,marginLeft:nt(-ce)},{type:"kern",size:Oe.kern},{type:"elem",elem:N}]},B)}else if(Ge){const Ct=N.depth+ve;$e=Re.makeVList({positionType:"bottom",positionData:Ct,children:[{type:"elem",elem:N},{type:"kern",size:Ge.kern},{type:"elem",elem:Ge.elem,marginLeft:nt(ce)},{type:"kern",size:B.fontMetrics().bigOpSpacing5}]},B)}else return N;const at=[$e];if(Oe&&ce!==0&&!Te){const Ct=Re.makeSpan(["mspace"],[],B);Ct.style.marginRight=nt(ce),at.unshift(Ct)}return Re.makeSpan(["mop","op-limits"],at,B)},hc=["\\smallint"],mc=(N,T)=>{let P,B,J=!1,ce;N.type==="supsub"?(P=N.sup,B=N.sub,ce=cn(N.base,"op"),J=!0):ce=cn(N,"op");const ve=T.style;let Te=!1;ve.size===V.DISPLAY.size&&ce.symbol&&!hc.includes(ce.name)&&(Te=!0);let Oe;if(ce.symbol){const at=Te?"Size2-Regular":"Size1-Regular";let Ct="";if((ce.name==="\\oiint"||ce.name==="\\oiiint")&&(Ct=ce.name.slice(1),ce.name=Ct==="oiint"?"\\iint":"\\iiint"),Oe=Re.makeSymbol(ce.name,at,"math",T,["mop","op-symbol",Te?"large-op":"small-op"]),Ct.length>0){const rr=Oe.italic,Nr=Re.staticSvg(Ct+"Size"+(Te?"2":"1"),T);Oe=Re.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Oe,shift:0},{type:"elem",elem:Nr,shift:Te?.08:0}]},T),ce.name="\\"+Ct,Oe.classes.unshift("mop"),Oe.italic=rr}}else if(ce.body){const at=Ds(ce.body,T,!0);at.length===1&&at[0]instanceof Ye?(Oe=at[0],Oe.classes[0]="mop"):Oe=Re.makeSpan(["mop"],at,T)}else{const at=[];for(let Ct=1;Ct<ce.name.length;Ct++)at.push(Re.mathsym(ce.name[Ct],ce.mode,T));Oe=Re.makeSpan(["mop"],at,T)}let Ge=0,$e=0;return(Oe instanceof Ye||ce.name==="\\oiint"||ce.name==="\\oiiint")&&!ce.suppressBaseShift&&(Ge=(Oe.height-Oe.depth)/2-T.fontMetrics().axisHeight,$e=Oe.italic),J?qu(Oe,P,B,T,ve,$e,Ge):(Ge&&(Oe.style.position="relative",Oe.style.top=nt(Ge)),Oe)},gc=(N,T)=>{let P;if(N.symbol)P=new Za("mo",[Zs(N.name,N.mode)]),hc.includes(N.name)&&P.setAttribute("largeop","false");else if(N.body)P=new Za("mo",fs(N.body,T));else{P=new Za("mi",[new Wo(N.name.slice(1))]);const B=new Za("mo",[Zs("","text")]);N.parentIsSupSub?P=new Za("mrow",[P,B]):P=au([P,B])}return P},Ku={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};gt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(N,T)=>{let{parser:P,funcName:B}=N,J=B;return J.length===1&&(J=Ku[J]),{type:"op",mode:P.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:J}},htmlBuilder:mc,mathmlBuilder:gc}),gt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(N,T)=>{let{parser:P}=N;const B=T[0];return{type:"op",mode:P.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Lr(B)}},htmlBuilder:mc,mathmlBuilder:gc});const tf={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};gt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(N){let{parser:T,funcName:P}=N;return{type:"op",mode:T.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:P}},htmlBuilder:mc,mathmlBuilder:gc}),gt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(N){let{parser:T,funcName:P}=N;return{type:"op",mode:T.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:P}},htmlBuilder:mc,mathmlBuilder:gc}),gt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(N){let{parser:T,funcName:P}=N,B=P;return B.length===1&&(B=tf[B]),{type:"op",mode:T.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:B}},htmlBuilder:mc,mathmlBuilder:gc});const pc=(N,T)=>{let P,B,J=!1,ce;N.type==="supsub"?(P=N.sup,B=N.sub,ce=cn(N.base,"operatorname"),J=!0):ce=cn(N,"operatorname");let ve;if(ce.body.length>0){const Te=ce.body.map(Ge=>{const $e=Ge.text;return typeof $e=="string"?{type:"textord",mode:Ge.mode,text:$e}:Ge}),Oe=Ds(Te,T.withFont("mathrm"),!0);for(let Ge=0;Ge<Oe.length;Ge++){const $e=Oe[Ge];$e instanceof Ye&&($e.text=$e.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}ve=Re.makeSpan(["mop"],Oe,T)}else ve=Re.makeSpan(["mop"],[],T);return J?qu(ve,P,B,T,T.style,0,0):ve};gt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(N,T)=>{let{parser:P,funcName:B}=N;const J=T[0];return{type:"operatorname",mode:P.mode,body:Lr(J),alwaysHandleSupSub:B==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:pc,mathmlBuilder:(N,T)=>{let P=fs(N.body,T.withFont("mathrm")),B=!0;for(let ve=0;ve<P.length;ve++){const Te=P[ve];if(!(Te instanceof ar.SpaceNode))if(Te instanceof ar.MathNode)switch(Te.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{const Oe=Te.children[0];Te.children.length===1&&Oe instanceof ar.TextNode?Oe.text=Oe.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):B=!1;break}default:B=!1}else B=!1}if(B){const ve=P.map(Te=>Te.toText()).join("");P=[new ar.TextNode(ve)]}const J=new ar.MathNode("mi",P);J.setAttribute("mathvariant","normal");const ce=new ar.MathNode("mo",[Zs("","text")]);return N.parentIsSupSub?new ar.MathNode("mrow",[J,ce]):ar.newDocumentFragment([J,ce])}}),Ne("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),En({type:"ordgroup",htmlBuilder(N,T){return N.semisimple?Re.makeFragment(Ds(N.body,T,!1)):Re.makeSpan(["mord"],Ds(N.body,T,!0),T)},mathmlBuilder(N,T){return hs(N.body,T,!0)}}),gt({type:"overline",names:["\\overline"],props:{numArgs:1},handler(N,T){let{parser:P}=N;const B=T[0];return{type:"overline",mode:P.mode,body:B}},htmlBuilder(N,T){const P=ln(N.body,T.havingCrampedStyle()),B=Re.makeLineSpan("overline-line",T),J=T.fontMetrics().defaultRuleThickness,ce=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P},{type:"kern",size:3*J},{type:"elem",elem:B},{type:"kern",size:J}]},T);return Re.makeSpan(["mord","overline"],[ce],T)},mathmlBuilder(N,T){const P=new ar.MathNode("mo",[new ar.TextNode("")]);P.setAttribute("stretchy","true");const B=new ar.MathNode("mover",[vn(N.body,T),P]);return B.setAttribute("accent","true"),B}}),gt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(N,T)=>{let{parser:P}=N;const B=T[0];return{type:"phantom",mode:P.mode,body:Lr(B)}},htmlBuilder:(N,T)=>{const P=Ds(N.body,T.withPhantom(),!1);return Re.makeFragment(P)},mathmlBuilder:(N,T)=>{const P=fs(N.body,T);return new ar.MathNode("mphantom",P)}}),gt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(N,T)=>{let{parser:P}=N;const B=T[0];return{type:"hphantom",mode:P.mode,body:B}},htmlBuilder:(N,T)=>{let P=Re.makeSpan([],[ln(N.body,T.withPhantom())]);if(P.height=0,P.depth=0,P.children)for(let B=0;B<P.children.length;B++)P.children[B].height=0,P.children[B].depth=0;return P=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P}]},T),Re.makeSpan(["mord"],[P],T)},mathmlBuilder:(N,T)=>{const P=fs(Lr(N.body),T),B=new ar.MathNode("mphantom",P),J=new ar.MathNode("mpadded",[B]);return J.setAttribute("height","0px"),J.setAttribute("depth","0px"),J}}),gt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(N,T)=>{let{parser:P}=N;const B=T[0];return{type:"vphantom",mode:P.mode,body:B}},htmlBuilder:(N,T)=>{const P=Re.makeSpan(["inner"],[ln(N.body,T.withPhantom())]),B=Re.makeSpan(["fix"],[]);return Re.makeSpan(["mord","rlap"],[P,B],T)},mathmlBuilder:(N,T)=>{const P=fs(Lr(N.body),T),B=new ar.MathNode("mphantom",P),J=new ar.MathNode("mpadded",[B]);return J.setAttribute("width","0px"),J}}),gt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(N,T){let{parser:P}=N;const B=cn(T[0],"size").value,J=T[1];return{type:"raisebox",mode:P.mode,dy:B,body:J}},htmlBuilder(N,T){const P=ln(N.body,T),B=Ot(N.dy,T);return Re.makeVList({positionType:"shift",positionData:-B,children:[{type:"elem",elem:P}]},T)},mathmlBuilder(N,T){const P=new ar.MathNode("mpadded",[vn(N.body,T)]),B=N.dy.number+N.dy.unit;return P.setAttribute("voffset",B),P}}),gt({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(N){let{parser:T}=N;return{type:"internal",mode:T.mode}}}),gt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(N,T,P){let{parser:B}=N;const J=P[0],ce=cn(T[0],"size"),ve=cn(T[1],"size");return{type:"rule",mode:B.mode,shift:J&&cn(J,"size").value,width:ce.value,height:ve.value}},htmlBuilder(N,T){const P=Re.makeSpan(["mord","rule"],[],T),B=Ot(N.width,T),J=Ot(N.height,T),ce=N.shift?Ot(N.shift,T):0;return P.style.borderRightWidth=nt(B),P.style.borderTopWidth=nt(J),P.style.bottom=nt(ce),P.width=B,P.height=J+ce,P.depth=-ce,P.maxFontSize=J*1.125*T.sizeMultiplier,P},mathmlBuilder(N,T){const P=Ot(N.width,T),B=Ot(N.height,T),J=N.shift?Ot(N.shift,T):0,ce=T.color&&T.getColor()||"black",ve=new ar.MathNode("mspace");ve.setAttribute("mathbackground",ce),ve.setAttribute("width",nt(P)),ve.setAttribute("height",nt(B));const Te=new ar.MathNode("mpadded",[ve]);return J>=0?Te.setAttribute("height",nt(J)):(Te.setAttribute("height",nt(J)),Te.setAttribute("depth",nt(-J))),Te.setAttribute("voffset",nt(J)),Te}});function hg(N,T,P){const B=Ds(N,T,!1),J=T.sizeMultiplier/P.sizeMultiplier;for(let ce=0;ce<B.length;ce++){const ve=B[ce].classes.indexOf("sizing");ve<0?Array.prototype.push.apply(B[ce].classes,T.sizingClasses(P)):B[ce].classes[ve+1]==="reset-size"+T.size&&(B[ce].classes[ve+1]="reset-size"+P.size),B[ce].height*=J,B[ce].depth*=J}return Re.makeFragment(B)}const Ph=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];gt({type:"sizing",names:Ph,props:{numArgs:0,allowedInText:!0},handler:(N,T)=>{let{breakOnTokenText:P,funcName:B,parser:J}=N;const ce=J.parseExpression(!1,P);return{type:"sizing",mode:J.mode,size:Ph.indexOf(B)+1,body:ce}},htmlBuilder:(N,T)=>{const P=T.havingSize(N.size);return hg(N.body,P,T)},mathmlBuilder:(N,T)=>{const P=T.havingSize(N.size),B=fs(N.body,P),J=new ar.MathNode("mstyle",B);return J.setAttribute("mathsize",nt(P.sizeMultiplier)),J}}),gt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(N,T,P)=>{let{parser:B}=N,J=!1,ce=!1;const ve=P[0]&&cn(P[0],"ordgroup");if(ve){let Oe="";for(let Ge=0;Ge<ve.body.length;++Ge)if(Oe=ve.body[Ge].text,Oe==="t")J=!0;else if(Oe==="b")ce=!0;else{J=!1,ce=!1;break}}else J=!0,ce=!0;const Te=T[0];return{type:"smash",mode:B.mode,body:Te,smashHeight:J,smashDepth:ce}},htmlBuilder:(N,T)=>{const P=Re.makeSpan([],[ln(N.body,T)]);if(!N.smashHeight&&!N.smashDepth)return P;if(N.smashHeight&&(P.height=0,P.children))for(let J=0;J<P.children.length;J++)P.children[J].height=0;if(N.smashDepth&&(P.depth=0,P.children))for(let J=0;J<P.children.length;J++)P.children[J].depth=0;const B=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P}]},T);return Re.makeSpan(["mord"],[B],T)},mathmlBuilder:(N,T)=>{const P=new ar.MathNode("mpadded",[vn(N.body,T)]);return N.smashHeight&&P.setAttribute("height","0px"),N.smashDepth&&P.setAttribute("depth","0px"),P}}),gt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(N,T,P){let{parser:B}=N;const J=P[0],ce=T[0];return{type:"sqrt",mode:B.mode,body:ce,index:J}},htmlBuilder(N,T){let P=ln(N.body,T.havingCrampedStyle());P.height===0&&(P.height=T.fontMetrics().xHeight),P=Re.wrapFragment(P,T);const J=T.fontMetrics().defaultRuleThickness;let ce=J;T.style.id<V.TEXT.id&&(ce=T.fontMetrics().xHeight);let ve=J+ce/4;const Te=P.height+P.depth+ve+J,{span:Oe,ruleWidth:Ge,advanceWidth:$e}=Is.sqrtImage(Te,T),at=Oe.height-Ge;at>P.height+P.depth+ve&&(ve=(ve+at-P.height-P.depth)/2);const Ct=Oe.height-P.height-ve-Ge;P.style.paddingLeft=nt($e);const rr=Re.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P,wrapperClasses:["svg-align"]},{type:"kern",size:-(P.height+Ct)},{type:"elem",elem:Oe},{type:"kern",size:Ge}]},T);if(N.index){const Nr=T.havingStyle(V.SCRIPTSCRIPT),Mr=ln(N.index,Nr,T),wn=.6*(rr.height-rr.depth),yn=Re.makeVList({positionType:"shift",positionData:-wn,children:[{type:"elem",elem:Mr}]},T),Sn=Re.makeSpan(["root"],[yn]);return Re.makeSpan(["mord","sqrt"],[Sn,rr],T)}else return Re.makeSpan(["mord","sqrt"],[rr],T)},mathmlBuilder(N,T){const{body:P,index:B}=N;return B?new ar.MathNode("mroot",[vn(P,T),vn(B,T)]):new ar.MathNode("msqrt",[vn(P,T)])}});const Xu={display:V.DISPLAY,text:V.TEXT,script:V.SCRIPT,scriptscript:V.SCRIPTSCRIPT};gt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(N,T){let{breakOnTokenText:P,funcName:B,parser:J}=N;const ce=J.parseExpression(!0,P),ve=B.slice(1,B.length-5);return{type:"styling",mode:J.mode,style:ve,body:ce}},htmlBuilder(N,T){const P=Xu[N.style],B=T.havingStyle(P).withFont("");return hg(N.body,B,T)},mathmlBuilder(N,T){const P=Xu[N.style],B=T.havingStyle(P),J=fs(N.body,B),ce=new ar.MathNode("mstyle",J),Te={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[N.style];return ce.setAttribute("scriptlevel",Te[0]),ce.setAttribute("displaystyle",Te[1]),ce}});const fu=function(N,T){const P=N.base;return P?P.type==="op"?P.limits&&(T.style.size===V.DISPLAY.size||P.alwaysHandleSupSub)?mc:null:P.type==="operatorname"?P.alwaysHandleSupSub&&(T.style.size===V.DISPLAY.size||P.limits)?pc:null:P.type==="accent"?v.isCharacterBox(P.base)?Bu:null:P.type==="horizBrace"&&!N.sub===P.isOver?Wd:null:null};En({type:"supsub",htmlBuilder(N,T){const P=fu(N,T);if(P)return P(N,T);const{base:B,sup:J,sub:ce}=N,ve=ln(B,T);let Te,Oe;const Ge=T.fontMetrics();let $e=0,at=0;const Ct=B&&v.isCharacterBox(B);if(J){const In=T.havingStyle(T.style.sup());Te=ln(J,In,T),Ct||($e=ve.height-In.fontMetrics().supDrop*In.sizeMultiplier/T.sizeMultiplier)}if(ce){const In=T.havingStyle(T.style.sub());Oe=ln(ce,In,T),Ct||(at=ve.depth+In.fontMetrics().subDrop*In.sizeMultiplier/T.sizeMultiplier)}let rr;T.style===V.DISPLAY?rr=Ge.sup1:T.style.cramped?rr=Ge.sup3:rr=Ge.sup2;const Nr=T.sizeMultiplier,Mr=nt(.5/Ge.ptPerEm/Nr);let wn=null;if(Oe){const In=N.base&&N.base.type==="op"&&N.base.name&&(N.base.name==="\\oiint"||N.base.name==="\\oiiint");(ve instanceof Ye||In)&&(wn=nt(-ve.italic))}let yn;if(Te&&Oe){$e=Math.max($e,rr,Te.depth+.25*Ge.xHeight),at=Math.max(at,Ge.sub2);const zn=4*Ge.defaultRuleThickness;if($e-Te.depth-(Oe.height-at)<zn){at=zn-($e-Te.depth)+Oe.height;const Us=.8*Ge.xHeight-($e-Te.depth);Us>0&&($e+=Us,at-=Us)}const ua=[{type:"elem",elem:Oe,shift:at,marginRight:Mr,marginLeft:wn},{type:"elem",elem:Te,shift:-$e,marginRight:Mr}];yn=Re.makeVList({positionType:"individualShift",children:ua},T)}else if(Oe){at=Math.max(at,Ge.sub1,Oe.height-.8*Ge.xHeight);const In=[{type:"elem",elem:Oe,marginLeft:wn,marginRight:Mr}];yn=Re.makeVList({positionType:"shift",positionData:at,children:In},T)}else if(Te)$e=Math.max($e,rr,Te.depth+.25*Ge.xHeight),yn=Re.makeVList({positionType:"shift",positionData:-$e,children:[{type:"elem",elem:Te,marginRight:Mr}]},T);else throw new Error("supsub must have either sup or sub.");const Sn=rc(ve,"right")||"mord";return Re.makeSpan([Sn],[ve,Re.makeSpan(["msupsub"],[yn])],T)},mathmlBuilder(N,T){let P=!1,B,J;N.base&&N.base.type==="horizBrace"&&(J=!!N.sup,J===N.base.isOver&&(P=!0,B=N.base.isOver)),N.base&&(N.base.type==="op"||N.base.type==="operatorname")&&(N.base.parentIsSupSub=!0);const ce=[vn(N.base,T)];N.sub&&ce.push(vn(N.sub,T)),N.sup&&ce.push(vn(N.sup,T));let ve;if(P)ve=B?"mover":"munder";else if(N.sub)if(N.sup){const Te=N.base;Te&&Te.type==="op"&&Te.limits&&T.style===V.DISPLAY||Te&&Te.type==="operatorname"&&Te.alwaysHandleSupSub&&(T.style===V.DISPLAY||Te.limits)?ve="munderover":ve="msubsup"}else{const Te=N.base;Te&&Te.type==="op"&&Te.limits&&(T.style===V.DISPLAY||Te.alwaysHandleSupSub)||Te&&Te.type==="operatorname"&&Te.alwaysHandleSupSub&&(Te.limits||T.style===V.DISPLAY)?ve="munder":ve="msub"}else{const Te=N.base;Te&&Te.type==="op"&&Te.limits&&(T.style===V.DISPLAY||Te.alwaysHandleSupSub)||Te&&Te.type==="operatorname"&&Te.alwaysHandleSupSub&&(Te.limits||T.style===V.DISPLAY)?ve="mover":ve="msup"}return new ar.MathNode(ve,ce)}}),En({type:"atom",htmlBuilder(N,T){return Re.mathsym(N.text,N.mode,T,["m"+N.family])},mathmlBuilder(N,T){const P=new ar.MathNode("mo",[Zs(N.text,N.mode)]);if(N.family==="bin"){const B=jl(N,T);B==="bold-italic"&&P.setAttribute("mathvariant",B)}else N.family==="punct"?P.setAttribute("separator","true"):(N.family==="open"||N.family==="close")&&P.setAttribute("stretchy","false");return P}});const rf={mi:"italic",mn:"normal",mtext:"normal"};En({type:"mathord",htmlBuilder(N,T){return Re.makeOrd(N,T,"mathord")},mathmlBuilder(N,T){const P=new ar.MathNode("mi",[Zs(N.text,N.mode,T)]),B=jl(N,T)||"italic";return B!==rf[P.type]&&P.setAttribute("mathvariant",B),P}}),En({type:"textord",htmlBuilder(N,T){return Re.makeOrd(N,T,"textord")},mathmlBuilder(N,T){const P=Zs(N.text,N.mode,T),B=jl(N,T)||"normal";let J;return N.mode==="text"?J=new ar.MathNode("mtext",[P]):/[0-9]/.test(N.text)?J=new ar.MathNode("mn",[P]):N.text==="\\prime"?J=new ar.MathNode("mo",[P]):J=new ar.MathNode("mi",[P]),B!==rf[J.type]&&J.setAttribute("mathvariant",B),J}});const Gd={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Vd={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};En({type:"spacing",htmlBuilder(N,T){if(Vd.hasOwnProperty(N.text)){const P=Vd[N.text].className||"";if(N.mode==="text"){const B=Re.makeOrd(N,T,"textord");return B.classes.push(P),B}else return Re.makeSpan(["mspace",P],[Re.mathsym(N.text,N.mode,T)],T)}else{if(Gd.hasOwnProperty(N.text))return Re.makeSpan(["mspace",Gd[N.text]],[],T);throw new a('Unknown type of space "'+N.text+'"')}},mathmlBuilder(N,T){let P;if(Vd.hasOwnProperty(N.text))P=new ar.MathNode("mtext",[new ar.TextNode("")]);else{if(Gd.hasOwnProperty(N.text))return new ar.MathNode("mspace");throw new a('Unknown type of space "'+N.text+'"')}return P}});const Ei=()=>{const N=new ar.MathNode("mtd",[]);return N.setAttribute("width","50%"),N};En({type:"tag",mathmlBuilder(N,T){const P=new ar.MathNode("mtable",[new ar.MathNode("mtr",[Ei(),new ar.MathNode("mtd",[hs(N.body,T)]),Ei(),new ar.MathNode("mtd",[hs(N.tag,T)])])]);return P.setAttribute("width","100%"),P}});const nf={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Yu={"\\textbf":"textbf","\\textmd":"textmd"},gg={"\\textit":"textit","\\textup":"textup"},Mh=(N,T)=>{const P=N.font;if(P){if(nf[P])return T.withTextFontFamily(nf[P]);if(Yu[P])return T.withTextFontWeight(Yu[P]);if(P==="\\emph")return T.fontShape==="textit"?T.withTextFontShape("textup"):T.withTextFontShape("textit")}else return T;return T.withTextFontShape(gg[P])};gt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(N,T){let{parser:P,funcName:B}=N;const J=T[0];return{type:"text",mode:P.mode,body:Lr(J),font:B}},htmlBuilder(N,T){const P=Mh(N,T),B=Ds(N.body,P,!0);return Re.makeSpan(["mord","text"],B,P)},mathmlBuilder(N,T){const P=Mh(N,T);return hs(N.body,P)}}),gt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(N,T){let{parser:P}=N;return{type:"underline",mode:P.mode,body:T[0]}},htmlBuilder(N,T){const P=ln(N.body,T),B=Re.makeLineSpan("underline-line",T),J=T.fontMetrics().defaultRuleThickness,ce=Re.makeVList({positionType:"top",positionData:P.height,children:[{type:"kern",size:J},{type:"elem",elem:B},{type:"kern",size:3*J},{type:"elem",elem:P}]},T);return Re.makeSpan(["mord","underline"],[ce],T)},mathmlBuilder(N,T){const P=new ar.MathNode("mo",[new ar.TextNode("")]);P.setAttribute("stretchy","true");const B=new ar.MathNode("munder",[vn(N.body,T),P]);return B.setAttribute("accentunder","true"),B}}),gt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(N,T){let{parser:P}=N;return{type:"vcenter",mode:P.mode,body:T[0]}},htmlBuilder(N,T){const P=ln(N.body,T),B=T.fontMetrics().axisHeight,J=.5*(P.height-B-(P.depth+B));return Re.makeVList({positionType:"shift",positionData:J,children:[{type:"elem",elem:P}]},T)},mathmlBuilder(N,T){return new ar.MathNode("mpadded",[vn(N.body,T)],["vcenter"])}}),gt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(N,T,P){throw new a("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(N,T){const P=qd(N),B=[],J=T.havingStyle(T.style.text());for(let ce=0;ce<P.length;ce++){let ve=P[ce];ve==="~"&&(ve="\\textasciitilde"),B.push(Re.makeSymbol(ve,"Typewriter-Regular",N.mode,J,["mord","texttt"]))}return Re.makeSpan(["mord","text"].concat(J.sizingClasses(T)),Re.tryCombineChars(B),J)},mathmlBuilder(N,T){const P=new ar.TextNode(qd(N)),B=new ar.MathNode("mtext",[P]);return B.setAttribute("mathvariant","monospace"),B}});const qd=N=>N.body.replace(/ /g,N.star?"":"");var Ai=Cn;const Il=`[ \r
	]`,So="\\\\[a-zA-Z@]+",Kd="\\\\[^\uD800-\uDFFF]",fl="("+So+")"+Il+"*",sf=`\\\\(
|[ \r	]+
?)[ \r	]*`,af="[-]",pg=new RegExp(af+"+$"),xc="("+Il+"+)|"+(sf+"|")+"([!-\\[\\]---]"+(af+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(af+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+fl)+("|"+Kd+")");class Ju{constructor(T,P){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=T,this.settings=P,this.tokenRegex=new RegExp(xc,"g"),this.catcodes={"%":14,"~":13}}setCatcode(T,P){this.catcodes[T]=P}lex(){const T=this.input,P=this.tokenRegex.lastIndex;if(P===T.length)return new Ra("EOF",new ea(this,P,P));const B=this.tokenRegex.exec(T);if(B===null||B.index!==P)throw new a("Unexpected character: '"+T[P]+"'",new Ra(T[P],new ea(this,P,P+1)));const J=B[6]||B[3]||(B[2]?"\\ ":" ");if(this.catcodes[J]===14){const ce=T.indexOf(`
`,this.tokenRegex.lastIndex);return ce===-1?(this.tokenRegex.lastIndex=T.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=ce+1,this.lex()}return new Ra(J,new ea(this,P,this.tokenRegex.lastIndex))}}class la{constructor(T,P){T===void 0&&(T={}),P===void 0&&(P={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=P,this.builtins=T,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new a("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");const T=this.undefStack.pop();for(const P in T)T.hasOwnProperty(P)&&(T[P]==null?delete this.current[P]:this.current[P]=T[P])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(T){return this.current.hasOwnProperty(T)||this.builtins.hasOwnProperty(T)}get(T){return this.current.hasOwnProperty(T)?this.current[T]:this.builtins[T]}set(T,P,B){if(B===void 0&&(B=!1),B){for(let J=0;J<this.undefStack.length;J++)delete this.undefStack[J][T];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][T]=P)}else{const J=this.undefStack[this.undefStack.length-1];J&&!J.hasOwnProperty(T)&&(J[T]=this.current[T])}P==null?delete this.current[T]:this.current[T]=P}}var of=du;Ne("\\noexpand",function(N){const T=N.popToken();return N.isExpandable(T.text)&&(T.noexpand=!0,T.treatAsRelax=!0),{tokens:[T],numArgs:0}}),Ne("\\expandafter",function(N){const T=N.popToken();return N.expandOnce(!0),{tokens:[T],numArgs:0}}),Ne("\\@firstoftwo",function(N){return{tokens:N.consumeArgs(2)[0],numArgs:0}}),Ne("\\@secondoftwo",function(N){return{tokens:N.consumeArgs(2)[1],numArgs:0}}),Ne("\\@ifnextchar",function(N){const T=N.consumeArgs(3);N.consumeSpaces();const P=N.future();return T[0].length===1&&T[0][0].text===P.text?{tokens:T[1],numArgs:0}:{tokens:T[2],numArgs:0}}),Ne("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Ne("\\TextOrMath",function(N){const T=N.consumeArgs(2);return N.mode==="text"?{tokens:T[0],numArgs:0}:{tokens:T[1],numArgs:0}});const yc={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Ne("\\char",function(N){let T=N.popToken(),P,B="";if(T.text==="'")P=8,T=N.popToken();else if(T.text==='"')P=16,T=N.popToken();else if(T.text==="`")if(T=N.popToken(),T.text[0]==="\\")B=T.text.charCodeAt(1);else{if(T.text==="EOF")throw new a("\\char` missing argument");B=T.text.charCodeAt(0)}else P=10;if(P){if(B=yc[T.text],B==null||B>=P)throw new a("Invalid base-"+P+" digit "+T.text);let J;for(;(J=yc[N.future().text])!=null&&J<P;)B*=P,B+=J,N.popToken()}return"\\@char{"+B+"}"});const Go=(N,T,P,B)=>{let J=N.consumeArg().tokens;if(J.length!==1)throw new a("\\newcommand's first argument must be a macro name");const ce=J[0].text,ve=N.isDefined(ce);if(ve&&!T)throw new a("\\newcommand{"+ce+"} attempting to redefine "+(ce+"; use \\renewcommand"));if(!ve&&!P)throw new a("\\renewcommand{"+ce+"} when command "+ce+" does not yet exist; use \\newcommand");let Te=0;if(J=N.consumeArg().tokens,J.length===1&&J[0].text==="["){let Oe="",Ge=N.expandNextToken();for(;Ge.text!=="]"&&Ge.text!=="EOF";)Oe+=Ge.text,Ge=N.expandNextToken();if(!Oe.match(/^\s*[0-9]+\s*$/))throw new a("Invalid number of arguments: "+Oe);Te=parseInt(Oe),J=N.consumeArg().tokens}return ve&&B||N.macros.set(ce,{tokens:J,numArgs:Te}),""};Ne("\\newcommand",N=>Go(N,!1,!0,!1)),Ne("\\renewcommand",N=>Go(N,!0,!1,!1)),Ne("\\providecommand",N=>Go(N,!0,!0,!0)),Ne("\\message",N=>{const T=N.consumeArgs(1)[0];return console.log(T.reverse().map(P=>P.text).join("")),""}),Ne("\\errmessage",N=>{const T=N.consumeArgs(1)[0];return console.error(T.reverse().map(P=>P.text).join("")),""}),Ne("\\show",N=>{const T=N.popToken(),P=T.text;return console.log(T,N.macros.get(P),Ai[P],Yt.math[P],Yt.text[P]),""}),Ne("\\bgroup","{"),Ne("\\egroup","}"),Ne("~","\\nobreakspace"),Ne("\\lq","`"),Ne("\\rq","'"),Ne("\\aa","\\r a"),Ne("\\AA","\\r A"),Ne("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}"),Ne("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),Ne("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}"),Ne("","\\mathscr{B}"),Ne("","\\mathscr{E}"),Ne("","\\mathscr{F}"),Ne("","\\mathscr{H}"),Ne("","\\mathscr{I}"),Ne("","\\mathscr{L}"),Ne("","\\mathscr{M}"),Ne("","\\mathscr{R}"),Ne("","\\mathfrak{C}"),Ne("","\\mathfrak{H}"),Ne("","\\mathfrak{Z}"),Ne("\\Bbbk","\\Bbb{k}"),Ne("","\\cdotp"),Ne("\\llap","\\mathllap{\\textrm{#1}}"),Ne("\\rlap","\\mathrlap{\\textrm{#1}}"),Ne("\\clap","\\mathclap{\\textrm{#1}}"),Ne("\\mathstrut","\\vphantom{(}"),Ne("\\underbar","\\underline{\\text{#1}}"),Ne("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),Ne("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}"),Ne("\\ne","\\neq"),Ne("","\\neq"),Ne("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}"),Ne("","\\notin"),Ne("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}"),Ne("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}"),Ne("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}"),Ne("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}"),Ne("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}"),Ne("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}"),Ne("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}"),Ne("","\\perp"),Ne("","\\mathclose{!\\mkern-0.8mu!}"),Ne("","\\notni"),Ne("","\\ulcorner"),Ne("","\\urcorner"),Ne("","\\llcorner"),Ne("","\\lrcorner"),Ne("","\\copyright"),Ne("","\\textregistered"),Ne("","\\textregistered"),Ne("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),Ne("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),Ne("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),Ne("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),Ne("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),Ne("","\\vdots"),Ne("\\varGamma","\\mathit{\\Gamma}"),Ne("\\varDelta","\\mathit{\\Delta}"),Ne("\\varTheta","\\mathit{\\Theta}"),Ne("\\varLambda","\\mathit{\\Lambda}"),Ne("\\varXi","\\mathit{\\Xi}"),Ne("\\varPi","\\mathit{\\Pi}"),Ne("\\varSigma","\\mathit{\\Sigma}"),Ne("\\varUpsilon","\\mathit{\\Upsilon}"),Ne("\\varPhi","\\mathit{\\Phi}"),Ne("\\varPsi","\\mathit{\\Psi}"),Ne("\\varOmega","\\mathit{\\Omega}"),Ne("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Ne("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax"),Ne("\\boxed","\\fbox{$\\displaystyle{#1}$}"),Ne("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Ne("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Ne("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;"),Ne("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}"),Ne("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");const ls={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Ne("\\dots",function(N){let T="\\dotso";const P=N.expandAfterFuture().text;return P in ls?T=ls[P]:(P.slice(0,4)==="\\not"||P in Yt.math&&["bin","rel"].includes(Yt.math[P].group))&&(T="\\dotsb"),T});const Jn={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Ne("\\dotso",function(N){return N.future().text in Jn?"\\ldots\\,":"\\ldots"}),Ne("\\dotsc",function(N){const T=N.future().text;return T in Jn&&T!==","?"\\ldots\\,":"\\ldots"}),Ne("\\cdots",function(N){return N.future().text in Jn?"\\@cdots\\,":"\\@cdots"}),Ne("\\dotsb","\\cdots"),Ne("\\dotsm","\\cdots"),Ne("\\dotsi","\\!\\cdots"),Ne("\\dotsx","\\ldots\\,"),Ne("\\DOTSI","\\relax"),Ne("\\DOTSB","\\relax"),Ne("\\DOTSX","\\relax"),Ne("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Ne("\\,","\\tmspace+{3mu}{.1667em}"),Ne("\\thinspace","\\,"),Ne("\\>","\\mskip{4mu}"),Ne("\\:","\\tmspace+{4mu}{.2222em}"),Ne("\\medspace","\\:"),Ne("\\;","\\tmspace+{5mu}{.2777em}"),Ne("\\thickspace","\\;"),Ne("\\!","\\tmspace-{3mu}{.1667em}"),Ne("\\negthinspace","\\!"),Ne("\\negmedspace","\\tmspace-{4mu}{.2222em}"),Ne("\\negthickspace","\\tmspace-{5mu}{.277em}"),Ne("\\enspace","\\kern.5em "),Ne("\\enskip","\\hskip.5em\\relax"),Ne("\\quad","\\hskip1em\\relax"),Ne("\\qquad","\\hskip2em\\relax"),Ne("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Ne("\\tag@paren","\\tag@literal{({#1})}"),Ne("\\tag@literal",N=>{if(N.macros.get("\\df@tag"))throw new a("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),Ne("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),Ne("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Ne("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Ne("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Ne("\\newline","\\\\\\relax"),Ne("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");const Vo=nt(Ze["Main-Regular"][84][1]-.7*Ze["Main-Regular"][65][1]);Ne("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+Vo+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),Ne("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+Vo+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),Ne("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Ne("\\@hspace","\\hskip #1\\relax"),Ne("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Ne("\\ordinarycolon",":"),Ne("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),Ne("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),Ne("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),Ne("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),Ne("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),Ne("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),Ne("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),Ne("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),Ne("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),Ne("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),Ne("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),Ne("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),Ne("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),Ne("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),Ne("","\\dblcolon"),Ne("","\\eqcolon"),Ne("","\\coloneqq"),Ne("","\\eqqcolon"),Ne("","\\Coloneqq"),Ne("\\ratio","\\vcentcolon"),Ne("\\coloncolon","\\dblcolon"),Ne("\\colonequals","\\coloneqq"),Ne("\\coloncolonequals","\\Coloneqq"),Ne("\\equalscolon","\\eqqcolon"),Ne("\\equalscoloncolon","\\Eqqcolon"),Ne("\\colonminus","\\coloneq"),Ne("\\coloncolonminus","\\Coloneq"),Ne("\\minuscolon","\\eqcolon"),Ne("\\minuscoloncolon","\\Eqcolon"),Ne("\\coloncolonapprox","\\Colonapprox"),Ne("\\coloncolonsim","\\Colonsim"),Ne("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Ne("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Ne("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),Ne("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),Ne("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}"),Ne("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Ne("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Ne("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Ne("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Ne("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),Ne("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),Ne("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),Ne("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),Ne("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}"),Ne("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}"),Ne("\\ngeqq","\\html@mathml{\\@ngeqq}{}"),Ne("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}"),Ne("\\nleqq","\\html@mathml{\\@nleqq}{}"),Ne("\\nleqslant","\\html@mathml{\\@nleqslant}{}"),Ne("\\nshortmid","\\html@mathml{\\@nshortmid}{}"),Ne("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}"),Ne("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}"),Ne("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}"),Ne("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}"),Ne("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}"),Ne("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}"),Ne("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}"),Ne("\\imath","\\html@mathml{\\@imath}{}"),Ne("\\jmath","\\html@mathml{\\@jmath}{}"),Ne("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),Ne("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}"),Ne("","\\llbracket"),Ne("","\\rrbracket"),Ne("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}"),Ne("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}"),Ne("","\\lBrace"),Ne("","\\rBrace"),Ne("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}"),Ne("","\\minuso"),Ne("\\darr","\\downarrow"),Ne("\\dArr","\\Downarrow"),Ne("\\Darr","\\Downarrow"),Ne("\\lang","\\langle"),Ne("\\rang","\\rangle"),Ne("\\uarr","\\uparrow"),Ne("\\uArr","\\Uparrow"),Ne("\\Uarr","\\Uparrow"),Ne("\\N","\\mathbb{N}"),Ne("\\R","\\mathbb{R}"),Ne("\\Z","\\mathbb{Z}"),Ne("\\alef","\\aleph"),Ne("\\alefsym","\\aleph"),Ne("\\Alpha","\\mathrm{A}"),Ne("\\Beta","\\mathrm{B}"),Ne("\\bull","\\bullet"),Ne("\\Chi","\\mathrm{X}"),Ne("\\clubs","\\clubsuit"),Ne("\\cnums","\\mathbb{C}"),Ne("\\Complex","\\mathbb{C}"),Ne("\\Dagger","\\ddagger"),Ne("\\diamonds","\\diamondsuit"),Ne("\\empty","\\emptyset"),Ne("\\Epsilon","\\mathrm{E}"),Ne("\\Eta","\\mathrm{H}"),Ne("\\exist","\\exists"),Ne("\\harr","\\leftrightarrow"),Ne("\\hArr","\\Leftrightarrow"),Ne("\\Harr","\\Leftrightarrow"),Ne("\\hearts","\\heartsuit"),Ne("\\image","\\Im"),Ne("\\infin","\\infty"),Ne("\\Iota","\\mathrm{I}"),Ne("\\isin","\\in"),Ne("\\Kappa","\\mathrm{K}"),Ne("\\larr","\\leftarrow"),Ne("\\lArr","\\Leftarrow"),Ne("\\Larr","\\Leftarrow"),Ne("\\lrarr","\\leftrightarrow"),Ne("\\lrArr","\\Leftrightarrow"),Ne("\\Lrarr","\\Leftrightarrow"),Ne("\\Mu","\\mathrm{M}"),Ne("\\natnums","\\mathbb{N}"),Ne("\\Nu","\\mathrm{N}"),Ne("\\Omicron","\\mathrm{O}"),Ne("\\plusmn","\\pm"),Ne("\\rarr","\\rightarrow"),Ne("\\rArr","\\Rightarrow"),Ne("\\Rarr","\\Rightarrow"),Ne("\\real","\\Re"),Ne("\\reals","\\mathbb{R}"),Ne("\\Reals","\\mathbb{R}"),Ne("\\Rho","\\mathrm{P}"),Ne("\\sdot","\\cdot"),Ne("\\sect","\\S"),Ne("\\spades","\\spadesuit"),Ne("\\sub","\\subset"),Ne("\\sube","\\subseteq"),Ne("\\supe","\\supseteq"),Ne("\\Tau","\\mathrm{T}"),Ne("\\thetasym","\\vartheta"),Ne("\\weierp","\\wp"),Ne("\\Zeta","\\mathrm{Z}"),Ne("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Ne("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Ne("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),Ne("\\bra","\\mathinner{\\langle{#1}|}"),Ne("\\ket","\\mathinner{|{#1}\\rangle}"),Ne("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Ne("\\Bra","\\left\\langle#1\\right|"),Ne("\\Ket","\\left|#1\\right\\rangle");const ya=N=>T=>{const P=T.consumeArg().tokens,B=T.consumeArg().tokens,J=T.consumeArg().tokens,ce=T.consumeArg().tokens,ve=T.macros.get("|"),Te=T.macros.get("\\|");T.macros.beginGroup();const Oe=at=>Ct=>{N&&(Ct.macros.set("|",ve),J.length&&Ct.macros.set("\\|",Te));let rr=at;return!at&&J.length&&Ct.future().text==="|"&&(Ct.popToken(),rr=!0),{tokens:rr?J:B,numArgs:0}};T.macros.set("|",Oe(!1)),J.length&&T.macros.set("\\|",Oe(!0));const Ge=T.consumeArg().tokens,$e=T.expandTokens([...ce,...Ge,...P]);return T.macros.endGroup(),{tokens:$e.reverse(),numArgs:0}};Ne("\\bra@ket",ya(!1)),Ne("\\bra@set",ya(!0)),Ne("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}"),Ne("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}"),Ne("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}"),Ne("\\angln","{\\angl n}"),Ne("\\blue","\\textcolor{##6495ed}{#1}"),Ne("\\orange","\\textcolor{##ffa500}{#1}"),Ne("\\pink","\\textcolor{##ff00af}{#1}"),Ne("\\red","\\textcolor{##df0030}{#1}"),Ne("\\green","\\textcolor{##28ae7b}{#1}"),Ne("\\gray","\\textcolor{gray}{#1}"),Ne("\\purple","\\textcolor{##9d38bd}{#1}"),Ne("\\blueA","\\textcolor{##ccfaff}{#1}"),Ne("\\blueB","\\textcolor{##80f6ff}{#1}"),Ne("\\blueC","\\textcolor{##63d9ea}{#1}"),Ne("\\blueD","\\textcolor{##11accd}{#1}"),Ne("\\blueE","\\textcolor{##0c7f99}{#1}"),Ne("\\tealA","\\textcolor{##94fff5}{#1}"),Ne("\\tealB","\\textcolor{##26edd5}{#1}"),Ne("\\tealC","\\textcolor{##01d1c1}{#1}"),Ne("\\tealD","\\textcolor{##01a995}{#1}"),Ne("\\tealE","\\textcolor{##208170}{#1}"),Ne("\\greenA","\\textcolor{##b6ffb0}{#1}"),Ne("\\greenB","\\textcolor{##8af281}{#1}"),Ne("\\greenC","\\textcolor{##74cf70}{#1}"),Ne("\\greenD","\\textcolor{##1fab54}{#1}"),Ne("\\greenE","\\textcolor{##0d923f}{#1}"),Ne("\\goldA","\\textcolor{##ffd0a9}{#1}"),Ne("\\goldB","\\textcolor{##ffbb71}{#1}"),Ne("\\goldC","\\textcolor{##ff9c39}{#1}"),Ne("\\goldD","\\textcolor{##e07d10}{#1}"),Ne("\\goldE","\\textcolor{##a75a05}{#1}"),Ne("\\redA","\\textcolor{##fca9a9}{#1}"),Ne("\\redB","\\textcolor{##ff8482}{#1}"),Ne("\\redC","\\textcolor{##f9685d}{#1}"),Ne("\\redD","\\textcolor{##e84d39}{#1}"),Ne("\\redE","\\textcolor{##bc2612}{#1}"),Ne("\\maroonA","\\textcolor{##ffbde0}{#1}"),Ne("\\maroonB","\\textcolor{##ff92c6}{#1}"),Ne("\\maroonC","\\textcolor{##ed5fa6}{#1}"),Ne("\\maroonD","\\textcolor{##ca337c}{#1}"),Ne("\\maroonE","\\textcolor{##9e034e}{#1}"),Ne("\\purpleA","\\textcolor{##ddd7ff}{#1}"),Ne("\\purpleB","\\textcolor{##c6b9fc}{#1}"),Ne("\\purpleC","\\textcolor{##aa87ff}{#1}"),Ne("\\purpleD","\\textcolor{##7854ab}{#1}"),Ne("\\purpleE","\\textcolor{##543b78}{#1}"),Ne("\\mintA","\\textcolor{##f5f9e8}{#1}"),Ne("\\mintB","\\textcolor{##edf2df}{#1}"),Ne("\\mintC","\\textcolor{##e0e5cc}{#1}"),Ne("\\grayA","\\textcolor{##f6f7f7}{#1}"),Ne("\\grayB","\\textcolor{##f0f1f2}{#1}"),Ne("\\grayC","\\textcolor{##e3e5e6}{#1}"),Ne("\\grayD","\\textcolor{##d6d8da}{#1}"),Ne("\\grayE","\\textcolor{##babec2}{#1}"),Ne("\\grayF","\\textcolor{##888d93}{#1}"),Ne("\\grayG","\\textcolor{##626569}{#1}"),Ne("\\grayH","\\textcolor{##3b3e40}{#1}"),Ne("\\grayI","\\textcolor{##21242c}{#1}"),Ne("\\kaBlue","\\textcolor{##314453}{#1}"),Ne("\\kaGreen","\\textcolor{##71B307}{#1}");const Ba={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class vc{constructor(T,P,B){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=P,this.expansionCount=0,this.feed(T),this.macros=new la(of,P.macros),this.mode=B,this.stack=[]}feed(T){this.lexer=new Ju(T,this.settings)}switchMode(T){this.mode=T}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(T){this.stack.push(T)}pushTokens(T){this.stack.push(...T)}scanArgument(T){let P,B,J;if(T){if(this.consumeSpaces(),this.future().text!=="[")return null;P=this.popToken(),{tokens:J,end:B}=this.consumeArg(["]"])}else({tokens:J,start:P,end:B}=this.consumeArg());return this.pushToken(new Ra("EOF",B.loc)),this.pushTokens(J),new Ra("",ea.range(P,B))}consumeSpaces(){for(;this.future().text===" ";)this.stack.pop()}consumeArg(T){const P=[],B=T&&T.length>0;B||this.consumeSpaces();const J=this.future();let ce,ve=0,Te=0;do{if(ce=this.popToken(),P.push(ce),ce.text==="{")++ve;else if(ce.text==="}"){if(--ve,ve===-1)throw new a("Extra }",ce)}else if(ce.text==="EOF")throw new a("Unexpected end of input in a macro argument, expected '"+(T&&B?T[Te]:"}")+"'",ce);if(T&&B)if((ve===0||ve===1&&T[Te]==="{")&&ce.text===T[Te]){if(++Te,Te===T.length){P.splice(-Te,Te);break}}else Te=0}while(ve!==0||B);return J.text==="{"&&P[P.length-1].text==="}"&&(P.pop(),P.shift()),P.reverse(),{tokens:P,start:J,end:ce}}consumeArgs(T,P){if(P){if(P.length!==T+1)throw new a("The length of delimiters doesn't match the number of args!");const J=P[0];for(let ce=0;ce<J.length;ce++){const ve=this.popToken();if(J[ce]!==ve.text)throw new a("Use of the macro doesn't match its definition",ve)}}const B=[];for(let J=0;J<T;J++)B.push(this.consumeArg(P&&P[J+1]).tokens);return B}countExpansion(T){if(this.expansionCount+=T,this.expansionCount>this.settings.maxExpand)throw new a("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(T){const P=this.popToken(),B=P.text,J=P.noexpand?null:this._getExpansion(B);if(J==null||T&&J.unexpandable){if(T&&J==null&&B[0]==="\\"&&!this.isDefined(B))throw new a("Undefined control sequence: "+B);return this.pushToken(P),!1}this.countExpansion(1);let ce=J.tokens;const ve=this.consumeArgs(J.numArgs,J.delimiters);if(J.numArgs){ce=ce.slice();for(let Te=ce.length-1;Te>=0;--Te){let Oe=ce[Te];if(Oe.text==="#"){if(Te===0)throw new a("Incomplete placeholder at end of macro body",Oe);if(Oe=ce[--Te],Oe.text==="#")ce.splice(Te+1,1);else if(/^[1-9]$/.test(Oe.text))ce.splice(Te,2,...ve[+Oe.text-1]);else throw new a("Not a valid argument number",Oe)}}}return this.pushTokens(ce),ce.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){const T=this.stack.pop();return T.treatAsRelax&&(T.text="\\relax"),T}throw new Error}expandMacro(T){return this.macros.has(T)?this.expandTokens([new Ra(T)]):void 0}expandTokens(T){const P=[],B=this.stack.length;for(this.pushTokens(T);this.stack.length>B;)if(this.expandOnce(!0)===!1){const J=this.stack.pop();J.treatAsRelax&&(J.noexpand=!1,J.treatAsRelax=!1),P.push(J)}return this.countExpansion(P.length),P}expandMacroAsText(T){const P=this.expandMacro(T);return P&&P.map(B=>B.text).join("")}_getExpansion(T){const P=this.macros.get(T);if(P==null)return P;if(T.length===1){const J=this.lexer.catcodes[T];if(J!=null&&J!==13)return}const B=typeof P=="function"?P(this):P;if(typeof B=="string"){let J=0;if(B.indexOf("#")!==-1){const Ge=B.replace(/##/g,"");for(;Ge.indexOf("#"+(J+1))!==-1;)++J}const ce=new Ju(B,this.settings),ve=[];let Te=ce.lex();for(;Te.text!=="EOF";)ve.push(Te),Te=ce.lex();return ve.reverse(),{tokens:ve,numArgs:J}}return B}isDefined(T){return this.macros.has(T)||Ai.hasOwnProperty(T)||Yt.math.hasOwnProperty(T)||Yt.text.hasOwnProperty(T)||Ba.hasOwnProperty(T)}isExpandable(T){const P=this.macros.get(T);return P!=null?typeof P=="string"||typeof P=="function"||!P.unexpandable:Ai.hasOwnProperty(T)&&!Ai[T].primitive}}const wc=/^[]/,ca=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),bc={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},lf={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class hu{constructor(T,P){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new vc(T,P,this.mode),this.settings=P,this.leftrightDepth=0}expect(T,P){if(P===void 0&&(P=!0),this.fetch().text!==T)throw new a("Expected '"+T+"', got '"+this.fetch().text+"'",this.fetch());P&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(T){this.mode=T,this.gullet.switchMode(T)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{const T=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),T}finally{this.gullet.endGroups()}}subparse(T){const P=this.nextToken;this.consume(),this.gullet.pushToken(new Ra("}")),this.gullet.pushTokens(T);const B=this.parseExpression(!1);return this.expect("}"),this.nextToken=P,B}parseExpression(T,P){const B=[];for(;;){this.mode==="math"&&this.consumeSpaces();const J=this.fetch();if(hu.endOfExpression.indexOf(J.text)!==-1||P&&J.text===P||T&&Ai[J.text]&&Ai[J.text].infix)break;const ce=this.parseAtom(P);if(ce){if(ce.type==="internal")continue}else break;B.push(ce)}return this.mode==="text"&&this.formLigatures(B),this.handleInfixNodes(B)}handleInfixNodes(T){let P=-1,B;for(let J=0;J<T.length;J++)if(T[J].type==="infix"){if(P!==-1)throw new a("only one infix operator per group",T[J].token);P=J,B=T[J].replaceWith}if(P!==-1&&B){let J,ce;const ve=T.slice(0,P),Te=T.slice(P+1);ve.length===1&&ve[0].type==="ordgroup"?J=ve[0]:J={type:"ordgroup",mode:this.mode,body:ve},Te.length===1&&Te[0].type==="ordgroup"?ce=Te[0]:ce={type:"ordgroup",mode:this.mode,body:Te};let Oe;return B==="\\\\abovefrac"?Oe=this.callFunction(B,[J,T[P],ce],[]):Oe=this.callFunction(B,[J,ce],[]),[Oe]}else return T}handleSupSubscript(T){const P=this.fetch(),B=P.text;this.consume(),this.consumeSpaces();let J;do{var ce;J=this.parseGroup(T)}while(((ce=J)==null?void 0:ce.type)==="internal");if(!J)throw new a("Expected group after '"+B+"'",P);return J}formatUnsupportedCmd(T){const P=[];for(let ce=0;ce<T.length;ce++)P.push({type:"textord",mode:"text",text:T[ce]});const B={type:"text",mode:this.mode,body:P};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[B]}}parseAtom(T){const P=this.parseGroup("atom",T);if(P?.type==="internal"||this.mode==="text")return P;let B,J;for(;;){this.consumeSpaces();const ce=this.fetch();if(ce.text==="\\limits"||ce.text==="\\nolimits"){if(P&&P.type==="op"){const ve=ce.text==="\\limits";P.limits=ve,P.alwaysHandleSupSub=!0}else if(P&&P.type==="operatorname")P.alwaysHandleSupSub&&(P.limits=ce.text==="\\limits");else throw new a("Limit controls must follow a math operator",ce);this.consume()}else if(ce.text==="^"){if(B)throw new a("Double superscript",ce);B=this.handleSupSubscript("superscript")}else if(ce.text==="_"){if(J)throw new a("Double subscript",ce);J=this.handleSupSubscript("subscript")}else if(ce.text==="'"){if(B)throw new a("Double superscript",ce);const ve={type:"textord",mode:this.mode,text:"\\prime"},Te=[ve];for(this.consume();this.fetch().text==="'";)Te.push(ve),this.consume();this.fetch().text==="^"&&Te.push(this.handleSupSubscript("superscript")),B={type:"ordgroup",mode:this.mode,body:Te}}else if(ca[ce.text]){const ve=wc.test(ce.text),Te=[];for(Te.push(new Ra(ca[ce.text])),this.consume();;){const Ge=this.fetch().text;if(!ca[Ge]||wc.test(Ge)!==ve)break;Te.unshift(new Ra(ca[Ge])),this.consume()}const Oe=this.subparse(Te);ve?J={type:"ordgroup",mode:"math",body:Oe}:B={type:"ordgroup",mode:"math",body:Oe}}else break}return B||J?{type:"supsub",mode:this.mode,base:P,sup:B,sub:J}:P}parseFunction(T,P){const B=this.fetch(),J=B.text,ce=Ai[J];if(!ce)return null;if(this.consume(),P&&P!=="atom"&&!ce.allowedInArgument)throw new a("Got function '"+J+"' with no arguments"+(P?" as "+P:""),B);if(this.mode==="text"&&!ce.allowedInText)throw new a("Can't use function '"+J+"' in text mode",B);if(this.mode==="math"&&ce.allowedInMath===!1)throw new a("Can't use function '"+J+"' in math mode",B);const{args:ve,optArgs:Te}=this.parseArguments(J,ce);return this.callFunction(J,ve,Te,B,T)}callFunction(T,P,B,J,ce){const ve={funcName:T,parser:this,token:J,breakOnTokenText:ce},Te=Ai[T];if(Te&&Te.handler)return Te.handler(ve,P,B);throw new a("No function handler for "+T)}parseArguments(T,P){const B=P.numArgs+P.numOptionalArgs;if(B===0)return{args:[],optArgs:[]};const J=[],ce=[];for(let ve=0;ve<B;ve++){let Te=P.argTypes&&P.argTypes[ve];const Oe=ve<P.numOptionalArgs;(P.primitive&&Te==null||P.type==="sqrt"&&ve===1&&ce[0]==null)&&(Te="primitive");const Ge=this.parseGroupOfType("argument to '"+T+"'",Te,Oe);if(Oe)ce.push(Ge);else if(Ge!=null)J.push(Ge);else throw new a("Null argument, please report this as a bug")}return{args:J,optArgs:ce}}parseGroupOfType(T,P,B){switch(P){case"color":return this.parseColorGroup(B);case"size":return this.parseSizeGroup(B);case"url":return this.parseUrlGroup(B);case"math":case"text":return this.parseArgumentGroup(B,P);case"hbox":{const J=this.parseArgumentGroup(B,"text");return J!=null?{type:"styling",mode:J.mode,body:[J],style:"text"}:null}case"raw":{const J=this.parseStringGroup("raw",B);return J!=null?{type:"raw",mode:"text",string:J.text}:null}case"primitive":{if(B)throw new a("A primitive argument cannot be optional");const J=this.parseGroup(T);if(J==null)throw new a("Expected group as "+T,this.fetch());return J}case"original":case null:case void 0:return this.parseArgumentGroup(B);default:throw new a("Unknown group type as "+T,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(T,P){const B=this.gullet.scanArgument(P);if(B==null)return null;let J="",ce;for(;(ce=this.fetch()).text!=="EOF";)J+=ce.text,this.consume();return this.consume(),B.text=J,B}parseRegexGroup(T,P){const B=this.fetch();let J=B,ce="",ve;for(;(ve=this.fetch()).text!=="EOF"&&T.test(ce+ve.text);)J=ve,ce+=J.text,this.consume();if(ce==="")throw new a("Invalid "+P+": '"+B.text+"'",B);return B.range(J,ce)}parseColorGroup(T){const P=this.parseStringGroup("color",T);if(P==null)return null;const B=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(P.text);if(!B)throw new a("Invalid color: '"+P.text+"'",P);let J=B[0];return/^[0-9a-f]{6}$/i.test(J)&&(J="#"+J),{type:"color-token",mode:this.mode,color:J}}parseSizeGroup(T){let P,B=!1;if(this.gullet.consumeSpaces(),!T&&this.gullet.future().text!=="{"?P=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):P=this.parseStringGroup("size",T),!P)return null;!T&&P.text.length===0&&(P.text="0pt",B=!0);const J=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(P.text);if(!J)throw new a("Invalid size: '"+P.text+"'",P);const ce={number:+(J[1]+J[2]),unit:J[3]};if(!ht(ce))throw new a("Invalid unit: '"+ce.unit+"'",P);return{type:"size",mode:this.mode,value:ce,isBlank:B}}parseUrlGroup(T){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);const P=this.parseStringGroup("url",T);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),P==null)return null;const B=P.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:B}}parseArgumentGroup(T,P){const B=this.gullet.scanArgument(T);if(B==null)return null;const J=this.mode;P&&this.switchMode(P),this.gullet.beginGroup();const ce=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();const ve={type:"ordgroup",mode:this.mode,loc:B.loc,body:ce};return P&&this.switchMode(J),ve}parseGroup(T,P){const B=this.fetch(),J=B.text;let ce;if(J==="{"||J==="\\begingroup"){this.consume();const ve=J==="{"?"}":"\\endgroup";this.gullet.beginGroup();const Te=this.parseExpression(!1,ve),Oe=this.fetch();this.expect(ve),this.gullet.endGroup(),ce={type:"ordgroup",mode:this.mode,loc:ea.range(B,Oe),body:Te,semisimple:J==="\\begingroup"||void 0}}else if(ce=this.parseFunction(P,T)||this.parseSymbol(),ce==null&&J[0]==="\\"&&!Ba.hasOwnProperty(J)){if(this.settings.throwOnError)throw new a("Undefined control sequence: "+J,B);ce=this.formatUnsupportedCmd(J),this.consume()}return ce}formLigatures(T){let P=T.length-1;for(let B=0;B<P;++B){const J=T[B],ce=J.text;ce==="-"&&T[B+1].text==="-"&&(B+1<P&&T[B+2].text==="-"?(T.splice(B,3,{type:"textord",mode:"text",loc:ea.range(J,T[B+2]),text:"---"}),P-=2):(T.splice(B,2,{type:"textord",mode:"text",loc:ea.range(J,T[B+1]),text:"--"}),P-=1)),(ce==="'"||ce==="`")&&T[B+1].text===ce&&(T.splice(B,2,{type:"textord",mode:"text",loc:ea.range(J,T[B+1]),text:ce+ce}),P-=1)}}parseSymbol(){const T=this.fetch();let P=T.text;if(/^\\verb[^a-zA-Z]/.test(P)){this.consume();let ce=P.slice(5);const ve=ce.charAt(0)==="*";if(ve&&(ce=ce.slice(1)),ce.length<2||ce.charAt(0)!==ce.slice(-1))throw new a(`\\verb assertion failed --
                    please report what input caused this bug`);return ce=ce.slice(1,-1),{type:"verb",mode:"text",body:ce,star:ve}}lf.hasOwnProperty(P[0])&&!Yt[this.mode][P[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+P[0]+'" used in math mode',T),P=lf[P[0]]+P.slice(1));const B=pg.exec(P);B&&(P=P.substring(0,B.index),P==="i"?P="":P==="j"&&(P=""));let J;if(Yt[this.mode][P]){this.settings.strict&&this.mode==="math"&&$t.indexOf(P)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+P[0]+'" used in math mode',T);const ce=Yt[this.mode][P].group,ve=ea.range(T);let Te;if(rt.hasOwnProperty(ce)){const Oe=ce;Te={type:"atom",mode:this.mode,family:Oe,loc:ve,text:P}}else Te={type:ce,mode:this.mode,loc:ve,text:P};J=Te}else if(P.charCodeAt(0)>=128)this.settings.strict&&(te(P.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+P[0]+'" used in math mode',T):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+P[0]+'"'+(" ("+P.charCodeAt(0)+")"),T)),J={type:"textord",mode:"text",loc:ea.range(T),text:P};else return null;if(this.consume(),B)for(let ce=0;ce<B[0].length;ce++){const ve=B[0][ce];if(!bc[ve])throw new a("Unknown accent ' "+ve+"'",T);const Te=bc[ve][this.mode]||bc[ve].text;if(!Te)throw new a("Accent "+ve+" unsupported in "+this.mode+" mode",T);J={type:"accent",mode:this.mode,loc:ea.range(T),label:Te,isStretchy:!1,isShifty:!0,base:J}}return J}}hu.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var cf=function(N,T){if(!(typeof N=="string"||N instanceof String))throw new TypeError("KaTeX can only parse string typed expression");const P=new hu(N,T);delete P.gullet.macros.current["\\df@tag"];let B=P.parse();if(delete P.gullet.macros.current["\\current@color"],delete P.gullet.macros.current["\\color"],P.gullet.macros.get("\\df@tag")){if(!T.displayMode)throw new a("\\tag works only in display equations");B=[{type:"tag",mode:"text",body:B,tag:P.subparse([new Ra("\\df@tag")])}]}return B};let qo=function(N,T,P){T.textContent="";const B=Ko(N,P).toNode();T.appendChild(B)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),qo=function(){throw new a("KaTeX doesn't work in quirks mode.")});const Zu=function(N,T){return Ko(N,T).toMarkup()},uf=function(N,T){const P=new b(T);return cf(N,P)},ed=function(N,T,P){if(P.throwOnError||!(N instanceof a))throw N;const B=Re.makeSpan(["katex-error"],[new Ye(T)]);return B.setAttribute("title",N.toString()),B.setAttribute("style","color:"+P.errorColor),B},Ko=function(N,T){const P=new b(T);try{const B=cf(N,P);return jd(B,N,P)}catch(B){return ed(B,N,P)}};var _c={version:"0.16.25",render:qo,renderToString:Zu,ParseError:a,SETTINGS_SCHEMA:C,__parse:uf,__renderToDomTree:Ko,__renderToHTMLTree:function(N,T){const P=new b(T);try{const B=cf(N,P);return Pd(B,N,P)}catch(B){return ed(B,N,P)}},__setFontMetrics:Rt,__defineSymbol:Z,__defineFunction:gt,__defineMacro:Ne,__domTree:{Span:vr,Anchor:Ee,SymbolNode:Ye,SvgNode:Lt,PathNode:ze,LineNode:it}},Sc=_c;return n=n.default,n})()})})(xw)),xw.exports}var kae=Lx.exports,Oj;function Tae(){return Oj||(Oj=1,(function(e,t){(function(r,n){n(t,lh(),bae(),Sae())})(kae,function(r,n,s,a){Object.defineProperty(r,"__esModule",{value:!0});function i(v,C){for(var k in C)Object.defineProperty(v,k,{enumerable:!0,get:C[k]})}i(r,{BlockMath:()=>x,InlineMath:()=>w}),n=u(n),s=o(s),a=o(a);function o(v){return v&&v.__esModule?v:{default:v}}function c(v){if(typeof WeakMap!="function")return null;var C=new WeakMap,k=new WeakMap;return(c=function(b){return b?k:C})(v)}function u(v,C){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var k=c(C);if(k&&k.has(v))return k.get(v);var b={},j=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in v)if(A!=="default"&&Object.prototype.hasOwnProperty.call(v,A)){var F=j?Object.getOwnPropertyDescriptor(v,A):null;F&&(F.get||F.set)?Object.defineProperty(b,A,F):b[A]=v[A]}return b.default=v,k&&k.set(v,b),b}const d=(v,{displayMode:C})=>{const k=({children:b,errorColor:j,math:A,renderError:F})=>{const D=A??b,{html:M,error:O}=(0,n.useMemo)(()=>{try{return{html:a.default.renderToString(D,{displayMode:C,errorColor:j,throwOnError:!!F}),error:void 0}}catch(L){if(L instanceof a.default.ParseError||L instanceof TypeError)return{error:L};throw L}},[D,j,F]);return O?F?F(O):n.default.createElement(v,{html:`${O.message}`}):n.default.createElement(v,{html:M})};return k.propTypes={children:s.default.string,errorColor:s.default.string,math:s.default.string,renderError:s.default.func},k},f={html:s.default.string.isRequired},m=({html:v})=>n.default.createElement("div",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:v}});m.propTypes=f;const p=({html:v})=>n.default.createElement("span",{"data-testid":"react-katex",dangerouslySetInnerHTML:{__html:v}});p.propTypes=f;const x=d(m,{displayMode:!0}),w=d(p,{displayMode:!1})})})(Lx,Lx.exports)),Lx.exports}var Dj=Tae();function Po({content:e,errorFallback:t=!0}){if(!e||typeof e!="string")return l.jsx("span",{children:e});const r=[];let n=0;const s=/(\$\$[\s\S]*?\$\$|\$[\s\S]*?\$)/g;let a;for(;(a=s.exec(e))!==null;){a.index>n&&r.push({type:"text",content:e.substring(n,a.index)});const i=a[0];i.startsWith("$$")&&i.endsWith("$$")?r.push({type:"display",content:i.slice(2,-2)}):i.startsWith("$")&&i.endsWith("$")&&r.push({type:"inline",content:i.slice(1,-1)}),n=s.lastIndex}return n<e.length&&r.push({type:"text",content:e.substring(n)}),r.length===0?l.jsx("span",{children:e}):l.jsx("span",{children:r.map((i,o)=>i.type==="text"?l.jsx("span",{children:i.content},o):i.type==="inline"?l.jsx(Dj.InlineMath,{math:i.content,renderError:c=>(console.warn("KaTeX rendering error for inline math:",i.content,c),t?l.jsxs("span",{className:"text-red-500",children:["$",i.content,"$"]}):l.jsx("span",{className:"text-red-500",children:"[Invalid LaTeX]"}))},o):i.type==="display"?l.jsx(Dj.BlockMath,{math:i.content,renderError:c=>(console.warn("KaTeX rendering error for display math:",i.content,c),t?l.jsxs("div",{className:"text-red-500",children:["$$",i.content,"$$"]}):l.jsx("div",{className:"text-red-500",children:"[Invalid LaTeX]"}))},o):null)})}const Cae=({question:e,testId:t,testType:r="true_false",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onSave:c,isEditing:u=!1,isSaving:d=!1,validationErrors:f={},showCorrectAnswers:m=!1,studentId:p=null})=>{const{getItem:x,setItem:w}=m4();_i(),S.useRef(null);const[v,C]=S.useState(""),[k,b]=S.useState(""),[j,A]=S.useState(""),[F,D]=S.useState(!1),[M,O]=S.useState(!0),[L,W]=S.useState(""),[re,ie]=S.useState(!1),[xe,de]=S.useState(null);S.useEffect(()=>{if(e&&(A(e.question||""),b(e.correct_answer||""),n==="student"&&p)){const se=x(`test_progress_${p}_${r}_${t}_${e.question_id}`);se&&C(se)}},[e,t,r,n,x]),S.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" TrueFalseQuestion syncing with parent studentAnswer:",a),C(a))},[a,n]),S.useEffect(()=>{if(n==="student"&&v&&t&&e?.question_id&&p){const se=setTimeout(()=>{ie(!0),w(`test_progress_${p}_${r}_${t}_${e.question_id}`,v),de(new Date().toLocaleTimeString()),setTimeout(()=>ie(!1),1e3)},1e3);return()=>clearTimeout(se)}},[v,t,r,e?.question_id,n,p,w]),S.useEffect(()=>{if(n==="teacher"&&(j||k)){const se=setTimeout(()=>{ie(!0);const pe={question:j,correct_answer:k,timestamp:Date.now()};w(`teacher_form_${r}_${t}`,pe),de(new Date().toLocaleTimeString()),setTimeout(()=>ie(!1),1e3)},2e3);return()=>clearTimeout(se)}},[j,k,t,r,n,w]);const fe=S.useCallback(se=>{n==="student"&&(C(se),i&&i(e.question_id,se),U(se))},[n,e?.question_id,i]),H=S.useCallback(se=>{A(se),o&&o(e.question_id,se),V(se)},[e?.question_id,o]),Q=S.useCallback(se=>{b(se),o&&o(e.question_id,{...e,correct_answer:se}),X(se)},[e,o]),U=S.useCallback(se=>{if(n==="student"){if(!se){O(!1),W("Please select an answer");return}O(!0),W("")}},[n]),V=S.useCallback(se=>{if(n==="teacher"){if(!se||se.trim().length<10){O(!1),W("Question must be at least 10 characters long");return}O(!0),W("")}},[n]),X=S.useCallback(se=>{if(n==="teacher"){if(!se){O(!1),W("Please select a correct answer");return}O(!0),W("")}},[n]),z=S.useCallback(()=>{if(n!=="teacher"||!c)return;const se={question_id:e.question_id,question:j,correct_answer:k,type:"true_false"};c(se)},[n,c,e?.question_id,j,k]);S.useCallback(se=>se?se.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>"):"",[]);const K=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e?.question_id]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[re&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),xe&&!re&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",xe]})]})]}),l.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",children:l.jsx(Po,{content:j||""})}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="true"?"border-blue-500 bg-blue-50":"border-gray-200"} ${m&&k==="true"?"ring-2 ring-green-400":""}`,children:[l.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"true",checked:v==="true",onChange:()=>fe("true"),className:"sr-only","aria-label":"True"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="true"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${v==="false"?"border-blue-500 bg-blue-50":"border-gray-200"} ${m&&k==="false"?"ring-2 ring-green-400":""}`,children:[l.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"false",checked:v==="false",onChange:()=>fe("false"),className:"sr-only","aria-label":"False"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${v==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:v==="false"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]}),!M&&L&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:L})]}),te=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[re&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),xe&&!re&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",xe]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsx("textarea",{id:`question_${e?.question_id}`,value:j,onChange:se=>H(se.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Correct Answer *"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="true"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[l.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"true",checked:k==="true",onChange:()=>Q("true"),className:"sr-only","aria-label":"True"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="true"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${k==="false"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[l.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"false",checked:k==="false",onChange:()=>Q("false"),className:"sr-only","aria-label":"False"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${k==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:k==="false"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]})]})]}),!M&&L&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:L}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(xt,{variant:"success",onClick:z,disabled:!M||d,className:"w-full sm:w-auto",children:d?l.jsx(pn,{size:"small"}):"Save Question"})})]});return l.jsx("div",{className:"true-false-question-container",children:n==="student"?K():te()})},Nae=({question:e,testId:t,testType:r="multiple_choice",mode:n="student",studentAnswer:s,onAnswerChange:a,onQuestionChange:i,onOptionAdd:o,onOptionRemove:c,onSave:u,isEditing:d=!1,isSaving:f=!1,validationErrors:m={},showCorrectAnswers:p=!1,studentId:x=null,displayNumber:w})=>{const{getItem:v,setItem:C}=m4(),{showNotification:k}=_i();S.useRef(null);const[b,j]=S.useState(""),[A,F]=S.useState(["","","",""]),[D,M]=S.useState(""),[O,L]=S.useState(""),[W,re]=S.useState(!1),[ie,xe]=S.useState(!0),[de,fe]=S.useState(""),[H,Q]=S.useState(!1),[U,V]=S.useState(null);S.useEffect(()=>{if(e&&(L(e.question||""),F(e.options||["","","",""]),M(e.correct_answer||""),n==="student"&&x)){const _e=v(`test_progress_${x}_${r}_${t}_${e.question_id}`);_e&&j(_e)}},[e,t,r,n,v]),S.useEffect(()=>{n==="student"&&s!==void 0&&s!==null&&(console.log(" MultipleChoiceQuestion syncing with parent studentAnswer:",s),j(s))},[s,n]),S.useEffect(()=>{if(n==="student"&&b&&t&&e?.question_id&&x){const _e=setTimeout(()=>{Q(!0),C(`test_progress_${x}_${r}_${t}_${e.question_id}`,b),V(new Date().toLocaleTimeString()),setTimeout(()=>Q(!1),1e3)},1e3);return()=>clearTimeout(_e)}},[b,t,r,e?.question_id,n,x,C]),S.useEffect(()=>{if(n==="teacher"&&(O||A.some(_e=>_e.trim()))){const _e=setTimeout(()=>{Q(!0);const We={question:O,options:A,correct_answer:D,timestamp:Date.now()};C(`teacher_form_${r}_${t}`,We),V(new Date().toLocaleTimeString()),setTimeout(()=>Q(!1),1e3)},2e3);return()=>clearTimeout(_e)}},[O,A,D,t,r,n,C]),S.useCallback(_e=>{if(n!=="student")return;const We=String(_e);j(We),a&&a(e.question_id,We),pe(We)},[n,e?.question_id,a]);const X=S.useCallback(_e=>{L(_e),i&&i(e.question_id,_e),oe(_e)},[e?.question_id,i]),z=S.useCallback((_e,We)=>{const Ue=[...A];Ue[_e]=We,F(Ue),i&&i(e.question_id,{...e,options:Ue}),ye(Ue)},[A,e,i]),K=S.useCallback(_e=>{M(_e),i&&i(e.question_id,{...e,correct_answer:_e}),we(_e)},[e,i]),te=S.useCallback(()=>{if(A.length<6){const _e=[...A,""];F(_e),o&&o(e.question_id,_e)}else k("Maximum 6 options allowed","warning")},[A,e?.question_id,o,k]),se=S.useCallback(_e=>{if(A.length>2){const We=A.filter((Ue,St)=>St!==_e);if(F(We),D===String.fromCharCode(65+_e))M("");else if(D&&String.fromCharCode(65+_e)<D){const Ue=String.fromCharCode(65+_e-1);M(Ue)}c&&c(e.question_id,We)}else k("Minimum 2 options required","warning")},[A,D,e?.question_id,c,k]),pe=S.useCallback(_e=>{if(n==="student"){if(!_e){xe(!1),fe("Please select an answer");return}xe(!0),e?.correct_answer&&_e===e.correct_answer?fe(" Correct answer!"):e?.correct_answer?fe(" Incorrect answer"):fe("Answer selected")}},[n,e?.correct_answer]),oe=S.useCallback(_e=>!_e||_e.trim().length<10?(xe(!1),fe("Question must be at least 10 characters long"),!1):(xe(!0),fe(""),!0),[]),ye=S.useCallback(_e=>{if(n!=="teacher")return;if(_e.filter(Ue=>Ue.trim().length>0).length<2){xe(!1),fe("At least 2 options must be filled");return}if(_e.some(Ue=>Ue.trim().length>0&&Ue.trim().length<3)){xe(!1),fe("Each option must be at least 3 characters long");return}xe(!0),fe("")},[n]),we=S.useCallback(_e=>{if(n==="teacher"){if(!_e){xe(!1),fe("Please select a correct answer");return}xe(!0),fe("")}},[n]),Se=S.useCallback(()=>{if(n!=="teacher"||!u)return;const _e={question_id:e.question_id,question:O,options:A.filter(We=>We.trim().length>0),correct_answer:D,type:"multiple_choice"};u(_e)},[n,u,e?.question_id,O,A,D]);return S.useCallback(_e=>_e?_e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/\n/g,"<br>"):"",[]),n==="teacher"?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[H&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),U&&!H&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",U]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsx("textarea",{id:`question_${e?.question_id}`,value:O,onChange:_e=>X(_e.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Answer Options *"}),l.jsx(xt,{variant:"secondary",size:"small",onClick:te,disabled:A.length>=6,className:"px-3 py-1 text-sm",children:"+ Add Option"})]}),l.jsx("div",{className:"space-y-3",children:A.map((_e,We)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+We)}),l.jsx("input",{type:"text",value:_e,onChange:Ue=>z(We,Ue.target.value),placeholder:`Option ${String.fromCharCode(65+We)}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0}),A.length>2&&l.jsx(xt,{variant:"danger",size:"small",onClick:()=>se(We),className:"px-2 py-1 text-sm",children:""})]},We))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`correct_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{id:`correct_${e?.question_id}`,value:D,onChange:_e=>K(_e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0,children:[l.jsx("option",{value:"",children:"Select correct answer"}),A.map((_e,We)=>{if(!_e.trim())return null;const Ue=String.fromCharCode(65+We);return l.jsxs("option",{value:Ue,children:[Ue,") ",_e]},We)})]})]})]}),!ie&&de&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:de}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(xt,{variant:"success",onClick:Se,disabled:!ie||f,className:"w-full sm:w-auto",children:f?l.jsx(pn,{size:"small"}):"Save Question"})})]}):l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof w=="number"?w:e?.question_id]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[H&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),U&&!H&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",U]})]})]}),l.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",children:l.jsx(Po,{content:O||""})}),l.jsx("div",{className:"space-y-3",children:A.map((_e,We)=>l.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${b===String.fromCharCode(65+We)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[l.jsx("input",{type:"radio",name:`mcq_${t}_${e?.question_id}`,value:String.fromCharCode(65+We),checked:b===String.fromCharCode(65+We),onChange:Ue=>{j(Ue.target.value),a&&a(e?.question_id,Ue.target.value)},className:"mr-3"}),l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600 mr-3",children:String.fromCharCode(65+We)}),l.jsx("span",{className:"flex-1",children:l.jsx(Po,{content:_e||`Option ${String.fromCharCode(65+We)}`})})]},We))}),!ie&&de&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:de})]})},qB=Hs.forwardRef(({initialValue:e="",selectedText:t="",onValueChange:r},n)=>{const[s,a]=S.useState(e||""),[i,o]=S.useState("normal"),[c,u]=S.useState(null),d=S.useRef(null);S.useEffect(()=>{e&&a(e)},[e]),S.useEffect(()=>{r&&r(s)},[s,r]);const f=C=>{if(C.key==="Tab"&&i==="numerator"){C.preventDefault(),o("denominator");const k=s;if(!k.match(/\\frac\{[^}]*\}\{([^}]*)\}$/)){const j=k.replace(/\\frac\{([^}]*)\}\{?\}$/,"\\frac{$1}{}");a(j)}return}if(C.key==="Escape"){o("normal"),u(null);return}C.key.length===1&&!C.ctrlKey&&!C.metaKey&&(C.preventDefault(),m(C.key))},m=C=>{let k=s;switch(i){case"normal":k+=C;break;case"superscript":if(!k.includes("^{"))k+=`^{${C}}`,o("normal");else{const j=k.match(/^(.+)\{(\d*)\}$/);j?k=`${j[1]}{${j[2]}${C}}`:k=k.replace(/\{([^}]*)\}$/,`{$1${C}}`)}break;case"inside-sqrt":k.includes("\\sqrt{")?k=k.replace(/\{([^}]*)\}$/,`{$1${C}}`):k=`\\sqrt{${C}}`;break;case"numerator":if(!k.includes("\\frac{"))k=`\\frac{${C}}{}`;else{const j=k.match(/\\frac\{([^}]*)\}\{([^}]*)\}/);j?k=`\\frac{${j[1]}${C}}{${j[2]}}`:k=k.replace(/\\frac\{([^}]*)\}(\{\})?$/,`\\frac{$1${C}}{}`)}break;case"denominator":const b=k.match(/\\frac\{([^}]*)\}\{([^}]*)\}/);b?k=`\\frac{${b[1]}}{${b[2]}${C}}`:k=k.replace(/\\frac\{([^}]*)\}(\{\})?$/,`\\frac{$1}{${C}}`);break}a(k)},p=()=>{s===""?(a("x^{}"),o("superscript")):(a(s+"^{}"),o("superscript")),d.current?.focus()},x=()=>{t?(a(`\\sqrt{${t}}`),o("normal")):(a(s===""?"\\sqrt{}":s+"\\sqrt{}"),o("inside-sqrt")),d.current?.focus()},w=()=>{a(s===""?"\\frac{}{}":s+"\\frac{}{}"),o("numerator"),d.current?.focus()},v=()=>s;return Hs.useImperativeHandle(n,()=>({getValue:v,setValue:C=>a(C),focus:()=>d.current?.focus()})),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"border rounded-lg p-3 bg-gray-50",children:[l.jsx("input",{ref:d,type:"text",value:s,onChange:C=>{i==="normal"&&a(C.target.value)},onKeyDown:f,placeholder:"Type LaTeX or use buttons below",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Mode: ",l.jsx("span",{className:"font-semibold",children:i}),i!=="normal"&&l.jsx("span",{className:"ml-2 text-blue-600",children:"(Press Escape to exit mode)"})]})]}),l.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview:"}),l.jsx("div",{className:"min-h-[60px] p-3 bg-white rounded border",children:s?l.jsx(Po,{content:`$${s}$`}):l.jsx("span",{className:"text-gray-400 italic",children:"Preview will appear here..."})})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 rounded-lg border",children:[l.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",title:"Insert Exponent",children:"x"}),l.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",title:"Insert Square Root",children:""}),l.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",title:"Insert Fraction",children:"a/b"})]})]})});qB.displayName="CustomMathEditor";function Eae({isOpen:e,onClose:t,onInsert:r,initialValue:n="",selectedText:s="",fieldType:a="question"}){const[i,o]=S.useState(n||""),c=S.useRef(null);Hs.useEffect(()=>{o(e&&n||"")},[e,n]);const u=f=>{o(f)},d=()=>{if(i){let f=i;!f.startsWith("$")&&!f.endsWith("$")&&(f=`$${f}$`),r(f)}t()};return l.jsx(Ka,{isOpen:e,onClose:t,title:"Insert Math Formula",size:"large",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx(qB,{ref:c,initialValue:n,selectedText:s,onValueChange:u}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[l.jsx(xt,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),l.jsx(xt,{type:"button",variant:"primary",onClick:d,disabled:!i,children:"Insert"})]})]})})}function Bx({onInsert:e,selectedText:t="",initialValue:r="",fieldType:n="question"}){const[s,a]=S.useState(!1),[i,o]=S.useState(""),c=()=>{const f=document.activeElement;if(f&&(f.tagName==="INPUT"||f.tagName==="TEXTAREA")){const m=f.selectionStart||0,p=f.selectionEnd||0,x=f.value.substring(m,p);o(x||t)}else o(t);a(!0)},u=f=>{e&&f&&e(f),a(!1)},d=()=>{a(!1)};return l.jsxs(l.Fragment,{children:[l.jsx(xt,{type:"button",variant:"outline",size:"sm",onClick:c,title:"Insert Math Formula",className:"flex items-center justify-center p-2",children:l.jsx("span",{className:"text-lg font-semibold",children:""})}),s&&l.jsx(Eae,{isOpen:s,onClose:d,onInsert:u,initialValue:r,selectedText:i||t,fieldType:n})]})}const Aae=({question:e,testId:t,testType:r="input",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onAnswerAdd:c,onAnswerRemove:u,onSave:d,isEditing:f=!1,isSaving:m=!1,validationErrors:p={},showCorrectAnswers:x=!1,studentId:w=null})=>{const{getItem:v,setItem:C}=m4(),{showNotification:k}=_i(),b=S.useRef(null),[j,A]=S.useState(""),[F,D]=S.useState([""]),[M,O]=S.useState(!1),[L,W]=S.useState(!0),[re,ie]=S.useState(""),[xe,de]=S.useState(!1);S.useEffect(()=>{if(n==="student"&&e?.question_id&&t&&r&&w){const pe=`test_progress_${w}_${r}_${t}_${e.question_id}`,oe=v(pe);oe&&A(oe)}},[e?.question_id,r,t,n,w,v]),S.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" InputQuestion syncing with parent studentAnswer:",a),A(a))},[a,n]),S.useEffect(()=>{n==="teacher"&&e?.answers&&D(e.answers.length>0?e.answers:[""])},[e?.answers,n]),S.useEffect(()=>{if(n==="student"&&j&&e?.question_id&&t&&r&&w){const pe=setTimeout(()=>{de(!0),C(`test_progress_${w}_${r}_${t}_${e.question_id}`,j),setTimeout(()=>de(!1),1e3)},1e3);return()=>clearTimeout(pe)}},[j,e?.question_id,r,t,n,w,C]),S.useEffect(()=>{if(n==="teacher"&&F&&o){const pe=setTimeout(()=>{o({...e,answers:F.filter(oe=>oe.trim())})},500);return()=>clearTimeout(pe)}},[F,e,n,o]);const fe=S.useCallback(pe=>{A(pe);const oe=pe.trim().length>0;W(oe),ie(oe?"":"Please enter an answer"),i&&i(e.question_id,pe)},[e?.question_id,i]),H=S.useCallback((pe,oe)=>{const ye=[...F];ye[pe]=oe,D(ye),i&&i(e.question_id,ye)},[F,e?.question_id,i]),Q=S.useCallback(()=>{if(n==="teacher"){const pe=[...F,""];D(pe),c&&c(e.question_id,pe)}},[F,e?.question_id,n,c]),U=S.useCallback(pe=>{if(n==="teacher"&&F.length>1){const oe=F.filter((ye,we)=>we!==pe);D(oe),u&&u(e.question_id,oe)}},[F,e?.question_id,n,u]),V=S.useCallback(()=>{if(n==="student"){const pe=j.trim().length>0;return W(pe),ie(pe?"":"Please enter an answer"),pe}else if(n==="teacher"){const pe=F.some(oe=>oe.trim().length>0);return W(pe),ie(pe?"":"Please enter at least one correct answer"),pe}return!0},[j,F,n]);S.useCallback(pe=>pe?pe.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>"):"",[]);const X=S.useCallback(()=>{O(!0)},[]),z=S.useCallback(()=>{O(!1),V()},[V]),K=S.useCallback(pe=>{pe.key==="Enter"&&n==="student"&&j.trim()&&(C(`test_progress_${r}_${t}_${e.question_id}`,j),k("Answer saved","success"))},[j,r,t,e?.question_id,n,C,k]),te=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",typeof s=="number"?s:e.question_id]}),xe&&l.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]})]}),l.jsx("div",{className:"question-text mb-6 text-gray-700 leading-relaxed",children:l.jsx(Po,{content:e.question||""})}),l.jsx("div",{className:"space-y-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{ref:b,type:"text",id:`input_${e.question_id}`,placeholder:"Enter your answer here...",value:j,onChange:pe=>fe(pe.target.value),onFocus:X,onBlur:z,onKeyPress:K,className:`flex-1 px-4 py-3 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${L?M?"border-blue-500":"border-gray-300 hover:border-gray-400":"border-red-300 focus:border-red-500 focus:ring-red-500"}`,"data-question-id":e.question_id,"aria-label":`Answer for question ${e.question_id}`,"aria-invalid":!L,"aria-describedby":L?void 0:`error-${e.question_id}`}),l.jsx(Bx,{onInsert:pe=>{fe(j+pe)},initialValue:j,fieldType:"answer"})]})}),x&&e.correct_answers&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[l.jsx("h5",{className:"text-sm font-semibold text-green-800 mb-2",children:"Correct Answers:"}),l.jsx("ul",{className:"space-y-1",children:e.correct_answers.map((pe,oe)=>l.jsxs("li",{className:"text-green-700 text-sm",children:[" ",l.jsx(Po,{content:pe})]},oe))})]})]}),se=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e.question_id||"New"]}),m&&l.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e.question_id||"new"}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsx("input",{type:"text",id:`question_${e.question_id||"new"}`,value:e.question||"",onChange:pe=>o&&o({...e,question:pe.target.value}),placeholder:"Enter question text",className:`w-full px-4 py-3 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${p.question?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:border-blue-500"}`}),p.question&&l.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:p.question})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answers *"}),l.jsx(xt,{type:"button",variant:"secondary",size:"small",onClick:Q,className:"px-3 py-1 text-sm",children:"+ Add Answer"})]}),l.jsx("div",{className:"space-y-3",children:F.map((pe,oe)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:oe+1}),l.jsx("input",{type:"text",value:pe,onChange:ye=>H(oe,ye.target.value),placeholder:`Correct answer ${oe+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e.question_id,"data-answer-index":oe}),F.length>1&&l.jsx(xt,{type:"button",variant:"danger",size:"small",onClick:()=>U(oe),className:"px-2 py-1 text-sm",children:" Remove"})]},oe))}),p.answers&&l.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:p.answers})]})]}),d&&l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(xt,{type:"button",variant:"success",onClick:d,disabled:m,className:"w-full sm:w-auto",children:m?l.jsx(pn,{size:"small"}):"Save Question"})})]});return l.jsx("div",{className:`input-question-container ${n} ${M?"focused":""}`,children:n==="student"?te():se()})},Yp=(e,t,r)=>{const[n,s]=S.useState(!1),[a,i]=S.useState(0),[o,c]=S.useState(!1),u=S.useRef(!1);S.useEffect(()=>{if(!e||!t||!r)return;const v=`anti_cheating_${r}_${e}_${t}`,C=ja(v);C&&(i(C.tabSwitches||0),c(C.isCheating||!1))},[e,t,r]);const d=S.useCallback(()=>{if(console.log(" handleTabSwitch called - isTracking:",u.current),!u.current){console.log(" Not tracking, returning early");return}console.log(" Tab switch detected - starting 7 second timer...");const v=Date.now();setTimeout(()=>{const C=Date.now()-v;console.log(" Timer completed - time hidden:",C,"ms"),C>=6500?(console.log(" Tab was hidden for sufficient time - counting as tab switch"),i(k=>{const b=k+1,j=b>=2;console.log(" Tab switch count updated:",{newCount:b,cheating:j}),c(j);const A=`anti_cheating_${r}_${e}_${t}`;return ha(A,{tabSwitches:b,isCheating:j},120*1e3),b})):console.log(" Tab was not hidden long enough - not counting as switch")},7e3)},[e,t,r]),f=S.useCallback(()=>{u.current&&(console.log(" Visibility change detected:",{hidden:document.hidden,isTracking:u.current}),document.hidden?d():console.log(" Tab became visible"))},[d]),m=S.useCallback(()=>{console.log(" startTracking called - setting up anti-cheating detection"),console.log(" Current document.hidden state:",document.hidden),console.log(" Current document.visibilityState:",document.visibilityState),s(!0),u.current=!0,document.addEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners added (visibilitychange only)")},[f]),p=S.useCallback(()=>{console.log(" stopTracking called - removing anti-cheating detection"),s(!1),u.current=!1,document.removeEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners removed")},[f]),x=S.useCallback(()=>{const v={caught_cheating:o,visibility_change_times:a};return console.log(" getCheatingData called:",v),v},[o,a]),w=S.useCallback(()=>{r&&e&&t&&Ip(r,e,t),i(0),c(!1),console.log(" Anti-cheating data deleted from localStorage")},[r,e,t]);return{startTracking:m,stopTracking:p,clearData:w,getCheatingData:x,tabSwitches:a,isCheating:o,isTracking:n}},jae=({testData:e,onTestComplete:t,onBackToCabinet:r,isTestComplete:n=!1,testScore:s=null})=>{const[a,i]=S.useState(null),[o,c]=S.useState(null);S.useEffect(()=>{(async()=>{try{const[Ft,or]=await Promise.all([co(()=>Promise.resolve().then(()=>ote),void 0),co(()=>Promise.resolve().then(()=>BZ),void 0)]);i(Ft),c(or.default)}catch(Ft){console.error("Failed to load Konva:",Ft)}})()},[]);const u=()=>a?{Stage:a.Stage,Layer:a.Layer,Rect:a.Rect,Arrow:a.Arrow,KonvaImage:a.Image,KonvaText:a.Text,Group:a.Group}:null,[d,f]=S.useState({}),[m,p]=S.useState({}),[x,w]=S.useState(0),[v,C]=S.useState(!1),[k,b]=S.useState(null),[j,A]=S.useState(0),[F,D]=S.useState(0),[M,O]=S.useState(null),[L,W]=S.useState(null),[re,ie]=S.useState(!1),[xe,de]=S.useState(!1),[fe,H]=S.useState(!1),{showNotification:Q}=_i(),{makeAuthenticatedRequest:U}=Zl(),{user:V}=Js(),{startTracking:X,stopTracking:z,getCheatingData:K,clearData:te}=Yp("matching_type",e?.id,V?.student_id||V?.id),se=S.useRef(null),pe=S.useRef(null),oe=S.useRef(null),ye=S.useRef(0),[we,Se]=S.useState(400);S.useRef({});const Ie=S.useCallback(()=>{ie(!0)},[]),me=S.useCallback(()=>{p({}),f({}),ie(!1)},[]),_e=S.useCallback(()=>{de(!0)},[]),We=S.useCallback(()=>{de(!1),r()},[r]),Ue=S.useMemo(()=>{if(!e)return null;const wt=e.blocks.map(dr=>{let nr=dr.coordinates;if(typeof nr=="string")try{nr=JSON.parse(nr)}catch(Xe){console.error(" Failed to parse coordinates:",Xe),nr={x:0,y:0,width:100,height:100}}return nr={x:(typeof nr.x=="number"?nr.x:Number(nr.x))||0,y:(typeof nr.y=="number"?nr.y:Number(nr.y))||0,width:(typeof nr.width=="number"?nr.width:Number(nr.width))||30,height:(typeof nr.height=="number"?nr.height:Number(nr.height))||10},{id:dr.id,word:dr.word,coordinates:nr,hasArrow:dr.hasArrow,arrow:dr.arrow}}),Ft=Array.isArray(e.arrows)?e.arrows:[],or=e.words.map(dr=>({id:dr.id,word:dr.word,blockId:null,isPlaced:!1,isCorrect:!1}));return{blocks:wt,arrows:Ft,words:or}},[e]);S.useEffect(()=>{if(!e?.image_url)return;const wt=new Image;wt.crossOrigin="anonymous",wt.onload=()=>{console.log(" Image loaded successfully"),A(wt.width),D(wt.height);const Ft=se.current?.clientWidth||800,or=se.current?.clientHeight||600,dr=Ft/wt.width,nr=or/wt.height,Xe=Math.min(dr,nr,1),Qe=wt.width*Xe,ut=wt.height*Xe,mt=(Ft-Qe)/2,ht=(or-ut)/2;b({x:mt,y:ht,width:Qe,height:ut,scaleX:Xe,scaleY:Xe,scale:Xe,image:wt}),ye.current=se.current?.clientWidth||800,console.log(" Image info calculated:",{x:mt,y:ht,width:Qe,height:ut,scaleX:Xe,scaleY:Xe})},wt.onerror=()=>{console.error(" Failed to load image"),Q("Failed to load test image","error")},wt.src=e.image_url},[e?.image_url,Q]),S.useEffect(()=>{if(!Ue||!k)return;const wt=ye.current||se.current?.clientWidth||800,Ft=12,or=38;let dr=k.x,nr=k.y+k.height+Ft;const Xe=k.x+k.width,Qe={};Ue.words.forEach(ht=>{if(!Object.prototype.hasOwnProperty.call(m,ht.id)){const Ot=typeof ht.word=="string"?ht.word:"",nt=Math.max(60,Ot.length*8+20);dr+nt>Math.min(wt-Ft,Xe)&&(dr=k.x,nr+=or),d[ht.id]||(Qe[ht.id]={x:dr,y:nr}),dr+=nt+Ft}}),Object.keys(Qe).length&&f(ht=>({...ht,...Qe}));const ut=Object.values(Qe).reduce((ht,Ot)=>Math.max(ht,Ot.y),nr),mt=Math.max(k.y+k.height+Ft,ut+or+Ft);Se(Math.max(400,Math.ceil(mt)))},[Ue,k,m,d]);const St=S.useCallback(()=>{if(!k||!Ue)return[];const wt=u();return wt?Ue.blocks.map(Ft=>{const or=Ft.coordinates;let dr,nr,Xe,Qe;dr=k.x+or.x*(k.scale??k.scaleX),nr=k.y+or.y*(k.scale??k.scaleY),Xe=or.width*(k.scale??k.scaleX),Qe=or.height*(k.scale??k.scaleY);const ut=m[Ft.id];return l.jsxs(wt.Group,{children:[l.jsx(wt.Rect,{x:dr,y:nr,width:Xe,height:Qe,fill:ut?"rgba(40, 167, 69, 0.4)":M===Ft.id?"rgba(0, 123, 255, 0.25)":"rgba(0, 123, 255, 0.15)",stroke:ut?"#28a745":M===Ft.id?"#0056b3":"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:ut?"rgba(40, 167, 69, 0.3)":"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),ut&&l.jsx(wt.KonvaText,{x:dr+5,y:nr+Qe/2-10,width:Xe-10,height:20,text:Ue.words.find(mt=>mt.id===ut)?.word||"",fontSize:Math.min(12,Xe/8),fontFamily:"Arial",fill:"#2c3e50",align:"center",verticalAlign:"middle",listening:!1})]},Ft.id)}):[]},[k,Ue,m,a]),Ze=S.useCallback(()=>{if(!k||!Ue)return[];const wt=u();return wt?(console.log(" Processing arrows:",Ue.arrows),Ue.arrows.map(Ft=>{if(console.log(" Arrow data:",Ft),!Ft.start||!Ft.end)return console.warn(" Arrow missing start/end coordinates:",Ft),null;let or,dr,nr,Xe;if(Ft.rel_start_x!==null&&Ft.rel_start_y!==null&&Ft.rel_end_x!==null&&Ft.rel_end_y!==null&&Ft.image_width&&Ft.image_height&&Ft.image_width>0&&Ft.image_height>0){const Qe=Ft.image_width,ut=Ft.image_height,mt=k.width/Qe,ht=k.height/ut;or=k.x+Number(Ft.rel_start_x)/100*Qe*mt,dr=k.y+Number(Ft.rel_start_y)/100*ut*ht,nr=k.x+Number(Ft.rel_end_x)/100*Qe*mt,Xe=k.y+Number(Ft.rel_end_y)/100*ut*ht}else{const Qe=k.scale??k.scaleX??1,ut=Number(Ft.start.x),mt=Number(Ft.start.y),ht=Number(Ft.end.x),Ot=Number(Ft.end.y);ut<=k.width+1&&ht<=k.width+1&&mt<=k.height+1&&Ot<=k.height+1?(or=k.x+(isNaN(ut)?0:ut),dr=k.y+(isNaN(mt)?0:mt),nr=k.x+(isNaN(ht)?0:ht),Xe=k.y+(isNaN(Ot)?0:Ot)):(or=k.x+(isNaN(ut)?0:ut)*Qe,dr=k.y+(isNaN(mt)?0:mt)*Qe,nr=k.x+(isNaN(ht)?0:ht)*Qe,Xe=k.y+(isNaN(Ot)?0:Ot)*Qe)}return l.jsx(wt.Arrow,{points:[or,dr,nr,Xe],stroke:Ft.style?.color||"#dc3545",fill:Ft.style?.color||"#dc3545",strokeWidth:Ft.style?.thickness||3,pointerLength:10,pointerWidth:10},Ft.id)}).filter(Boolean)):[]},[k,Ue,a]),Kt=S.useCallback(()=>{if(!Ue)return[];const wt=u();return wt?Ue.words.map(Ft=>{const or=d[Ft.id]||{x:0,y:0},dr=typeof Ft.word=="string"?Ft.word:"",nr=Math.max(60,dr.length*8+20);return Object.values(m).includes(Ft.id)?null:l.jsxs(wt.Group,{x:or.x,y:or.y,draggable:!0,onDragEnd:Qe=>yt(Qe,Ft.id),children:[l.jsx(wt.Rect,{width:nr,height:34,fill:"#ffffff",stroke:"#ced4da",strokeWidth:1,cornerRadius:4,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5,shadowOffset:{x:0,y:2},shadowOpacity:.3,listening:!0}),l.jsx(wt.KonvaText,{text:dr,fontSize:14,fontFamily:"Arial",fill:"#343a40",padding:8,align:"center",verticalAlign:"middle",width:nr,height:34,listening:!1})]},Ft.id)}):[]},[Ue,d,m,k,a]),yt=S.useCallback((wt,Ft)=>{const or=wt.target.x(),dr=wt.target.y();if(f(nt=>({...nt,[Ft]:{x:or,y:dr}})),!k||!Ue)return;const nr=Ue.words.find(nt=>nt.id===Ft);if(!nr)return;const Xe=typeof nr.word=="string"?nr.word:"",Qe=Math.max(60,Xe.length*8+20),ut={x:or,y:dr,width:Qe,height:34},mt=k.scale??k.scaleX??1,ht=(nt,sr)=>!(sr.x>nt.x+nt.width||sr.x+sr.width<nt.x||sr.y>nt.y+nt.height||sr.y+sr.height<nt.y),Ot=Ue.blocks.find(nt=>{const sr=nt.coordinates,kr={x:k.x+sr.x*mt,y:k.y+sr.y*mt,width:sr.width*mt,height:sr.height*mt};return ht(ut,kr)});if(Ot){p(Ar=>({...Ar,[Ot.id]:Ft}));const nt=Ot.coordinates,sr=k.x+nt.x*mt,kr=k.y+nt.y*mt,Er=nt.width*mt,Gr=nt.height*mt;f(Ar=>({...Ar,[Ft]:{x:sr+(Er-Qe)/2,y:kr+(Gr-34)/2}})),Q(`Word "${nr.word}" placed in block`,"success")}},[k,Ue,Q]),Rt=S.useCallback(()=>{if(!Ue)return 0;const wt=Ue.words.length,Ft=Object.keys(m).length;return wt>0?Ft/wt*100:0},[Ue,m]);S.useEffect(()=>{const wt=Rt();w(wt)},[Rt]),S.useEffect(()=>{if(e&&!L){const wt=new Date;W(wt),console.log(" Test timer started at:",wt.toISOString()),X(),console.log(" Anti-cheating tracking started")}},[e,L,X]);const At=S.useCallback(async()=>{if(Ue){C(!0);try{const wt=Ue.words.length;let Ft=0;console.log(" Scoring check - placedWords:",m),console.log(" Scoring check - blocks:",Ue.blocks.map(vr=>({id:vr.id,word:vr.word}))),console.log(" Scoring check - words:",Ue.words.map(vr=>({id:vr.id,word:vr.word}))),Ue.blocks.forEach(vr=>{const Ee=m[vr.id];if(console.log(` Block ${vr.id} (expects "${vr.word}") has placed word ID: ${Ee}`),Ee){const Be=Ue.words.find(qe=>qe.id===Ee);console.log(" Placed word:",Be),Be&&Be.word===vr.word?(Ft++,console.log(` Correct! Block ${vr.id} has correct word "${Be.word}"`)):console.log(` Incorrect! Block ${vr.id} expected "${vr.word}" but got "${Be?.word||"nothing"}"`)}else console.log(` Block ${vr.id} has no word placed`)});const or=Ft,dr=wt;console.log(` Final Score: ${or}/${dr} (${Math.round(or/dr*100)}%)`);const nr=new Date,Xe=L?Math.round((nr-L)/1e3):0,Qe=L?L.toISOString():nr.toISOString();console.log(" Test timing:",{startedAt:Qe,endTime:nr.toISOString(),timeTaken:`${Xe} seconds`});const ut=K();console.log(" Anti-cheating data for submission:",ut);const mt=V.student_id,ht=`retest_assignment_id_${mt}_matching_type_${e.id}`,Ot=localStorage.getItem(ht),{academicCalendarService:nt}=await co(async()=>{const{academicCalendarService:vr}=await Promise.resolve().then(()=>p4);return{academicCalendarService:vr}},void 0);await nt.loadAcademicCalendar();const kr=nt.getCurrentTerm()?.id;if(!kr)throw new Error("No current academic period found");const Er={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:mt,academic_period_id:kr,answers:m,score:or,maxScore:dr,time_taken:Xe,started_at:Qe,submitted_at:nr.toISOString(),caught_cheating:ut.caught_cheating,visibility_change_times:ut.visibility_change_times,retest_assignment_id:Ot?Number(Ot):null,parent_test_id:e.id};console.log(" Submitting test data:",Er);const Ar=await(await U("/.netlify/functions/submit-matching-type-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Er)})).json();if(console.log(" Submission response:",Ar),Ar.success){if(Q("Test submitted successfully!","success"),z(),te(),V?.student_id&&Ip(V.student_id,"matching_type",e.id),!!Ot&&V?.student_id){let Be=3;try{const Lt=localStorage.getItem(`student_active_tests_${V.student_id}`);if(Lt){const it=JSON.parse(Lt)?.tests?.find(Le=>Le.test_id===e.id&&Le.test_type==="matching_type");it&&(Be=it.retest_attempts_left||it.max_attempts||3)}}catch(Lt){console.error("Error checking active tests cache:",Lt)}const Ye=(or>0&&dr>0?or/dr*100:0)>=50;if(Ye){const Lt=`retest_attempt${Be}_${V.student_id}_matching_type_${e.id}`;localStorage.setItem(Lt,"true"),console.log(" Passed retest, marking last-slot key:",Lt);let ze=0;for(let st=1;st<=10;st++){const rt=`retest_attempt${st}_${V.student_id}_matching_type_${e.id}`;localStorage.getItem(rt)==="true"&&ze++}const it=`test_completed_${V.student_id}_matching_type_${e.id}`;localStorage.setItem(it,"true"),console.log(" Marked retest as completed (student passed):",it);const Le=`retest_attempts_${V.student_id}_matching_type_${e.id}`;localStorage.setItem(Le,JSON.stringify({used:ze,max:Be})),console.log(" Set retest attempts metadata (student passed):",Le,{used:ze,max:Be})}else{let Lt=1;for(let rt=1;rt<=10;rt++){const qt=`retest_attempt${rt}_${V.student_id}_matching_type_${e.id}`;if(localStorage.getItem(qt)!=="true"){Lt=rt;break}}const ze=`retest_attempt${Lt}_${V.student_id}_matching_type_${e.id}`;localStorage.setItem(ze,"true"),console.log(" Marked retest attempt as completed:",ze);let it=0;for(let rt=1;rt<=10;rt++){const qt=`retest_attempt${rt}_${V.student_id}_matching_type_${e.id}`;localStorage.getItem(qt)==="true"&&it++}const Le=Be-it,st=Le<=0||Ye;if(console.log(" Retest completion check:",{usedAttempts:it,maxAttempts:Be,attemptsLeft:Le,passed:Ye,shouldComplete:st}),st){const rt=`test_completed_${V.student_id}_matching_type_${e.id}`;localStorage.setItem(rt,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",rt);const qt=`retest_attempts_${V.student_id}_matching_type_${e.id}`;localStorage.setItem(qt,JSON.stringify({used:it,max:Be})),console.log(" Set retest attempts metadata (attempts exhausted):",qt,{used:it,max:Be})}}}else if(V?.student_id){const Be=`test_completed_${V.student_id}_matching_type_${e.id}`;localStorage.setItem(Be,"true"),console.log(" Test marked as completed in localStorage:",Be)}if(V?.student_id){const{setCachedData:Be,CACHE_TTL:qe}=await co(async()=>{const{setCachedData:Lt,CACHE_TTL:ze}=await Promise.resolve().then(()=>Vg);return{setCachedData:Lt,CACHE_TTL:ze}},void 0),Ye=`student_results_table_${V.student_id}`;Be(Ye,Ar,qe.student_results_table),console.log(" Test results cached with key:",Ye)}const Ee=`retest1_${mt}_matching_type_${e.id}`;localStorage.removeItem(Ee),localStorage.removeItem(ht),t&&t(or)}else throw new Error(Ar.message||"Failed to submit test")}catch(wt){console.error(" Error submitting test:",wt),Q(`Error submitting test: ${wt.message}`,"error")}finally{C(!1)}}},[Ue,m,e,V,L,U,Q,t]);return!e||!Ue?l.jsx(pn,{}):l.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(xt,{onClick:_e,variant:"outline",size:"sm",children:"Back to Cabinet"})}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:e.test_name})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-sm text-gray-500",children:"Progress"}),l.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[Math.round(x),"%"]})]})]}),l.jsx("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${x}%`}})})]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:l.jsx("div",{className:"lg:col-span-3",children:l.jsxs(er,{className:"p-4",children:[l.jsx("div",{className:"mb-4 text-center",children:l.jsx(xt,{onClick:Ie,variant:"secondary",children:"Reset"})}),l.jsx("div",{ref:se,className:"w-full bg-gray-100 rounded-lg overflow-hidden",style:{height:`${we}px`},children:k&&a?(()=>{const{Stage:wt,Layer:Ft,KonvaImage:or}=u();return l.jsxs(wt,{ref:pe,width:se.current?.clientWidth||800,height:we,children:[l.jsxs(Ft,{children:[l.jsx(or,{ref:oe,image:k.image,x:k.x,y:k.y,width:k.width,height:k.height,listening:!1}),St(),Ze()]}),l.jsx(Ft,{listening:!0,children:Kt()})]})})():k?l.jsxs("div",{className:"flex items-center justify-center h-full",children:[l.jsx(pn,{size:"lg"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading Konva canvas..."})]}):null}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx(xt,{onClick:()=>H(!0),disabled:v||x<100,children:v?"Submitting...":"Submit Test"})})]})})}),l.jsx(Ka,{isOpen:re,onClose:()=>ie(!1),title:"Reset Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and placed words."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>ie(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:me,variant:"primary",children:"Reset"})]})]})}),l.jsx(Ka,{isOpen:xe,onClose:()=>de(!1),title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet? Your progress will be saved but you will exit the test."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>de(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:We,variant:"primary",children:"Go Back"})]})]})}),l.jsx(Ka,{isOpen:fe,onClose:()=>H(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>H(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:()=>{H(!1),At()},variant:"primary",children:"Submit"})]})]})})]})})},Pae=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Js(),{makeAuthenticatedRequest:o}=Zl(),{showNotification:c}=_i(),[u,d]=S.useState([{leftWord:"",rightWord:""},{leftWord:"",rightWord:""},{leftWord:"",rightWord:""}]),[f,m]=S.useState("drag"),[p,x]=S.useState(!1),[w,v]=S.useState(null),C=S.useCallback(()=>{d(D=>[...D,{leftWord:"",rightWord:""}])},[]),k=S.useCallback(D=>{u.length>1&&d(M=>M.filter((O,L)=>L!==D))},[u.length]),b=S.useCallback((D,M)=>{d(O=>O.map((L,W)=>W===D?{...L,leftWord:M}:L))},[]),j=S.useCallback((D,M)=>{d(O=>O.map((L,W)=>W===D?{...L,rightWord:M}:L))},[]),A=S.useCallback(()=>u.every(D=>D.leftWord.trim()&&D.rightWord.trim()),[u]),F=S.useCallback(async()=>{if(!A()){c("Please fill in all word pairs","error");return}x(!0),v(null);try{const D=u.map((O,L)=>({question_id:L+1,left_word:O.leftWord.trim(),right_word:O.rightWord.trim()})),M={test_name:e,num_questions:D.length,interaction_type:f,questions:D};console.log(" Saving word matching test:",M),t({testName:e,numQuestions:D.length,interactionType:f,wordPairs:u,questions:D})}catch(D){console.error("Error saving word matching test:",D),v(D.message),c("Failed to save test: "+D.message,"error")}finally{x(!1)}},[e,u,f,A,o,c,t]);return l.jsxs(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-6xl mx-auto p-0",children:[l.jsx(er,{className:"mb-6",children:l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Interaction Type"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="drag"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>m("drag"),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:f==="drag",onChange:()=>m("drag"),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Drag & Drop"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Students drag words from left list to right list"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" Easier for younger students",l.jsx("br",{})," Visual feedback on placement",l.jsx("br",{})," Mobile-friendly"]})]}),l.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="arrow"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>m("arrow"),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:f==="arrow",onChange:()=>m("arrow"),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Draw Arrows"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Students draw arrows connecting matching words"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" More challenging",l.jsx("br",{})," Better for visual learners",l.jsx("br",{})," Requires precision"]})]})]})]})}),l.jsx(er,{className:"mb-6",children:l.jsxs("div",{className:"word-pairs-section",children:[l.jsxs("div",{className:"pairs-header flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Word Pairs"}),l.jsx(xt,{onClick:C,size:"sm",children:"+ Add Pair"})]}),l.jsx("div",{className:"pairs-list space-y-3 p-0 md:p-4",children:u.map((D,M)=>l.jsxs("div",{className:"word-pair-row flex items-center space-x-2 md:space-x-4 p-2 md:p-4 bg-gray-50 rounded-lg border",children:[l.jsx("div",{className:"pair-number flex-shrink-0",children:l.jsx("span",{className:"number-badge w-6 h-6 md:w-8 md:h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs md:text-sm font-semibold",children:M+1})}),l.jsx("div",{className:"left-word flex-1",children:l.jsx("input",{type:"text",value:D.leftWord,onChange:O=>b(M,O.target.value),placeholder:"Left word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),l.jsx("div",{className:"pair-arrow flex-shrink-0 text-gray-500 text-lg md:text-xl",children:""}),l.jsx("div",{className:"right-word flex-1",children:l.jsx("input",{type:"text",value:D.rightWord,onChange:O=>j(M,O.target.value),placeholder:"Right word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),l.jsx("div",{className:"pair-actions flex-shrink-0",children:l.jsx(xt,{onClick:()=>k(M),variant:"outline",size:"sm",className:"remove-btn w-6 h-6 md:w-8 md:h-8 p-0 text-red-500 hover:bg-red-50",disabled:u.length<=1,children:""})})]},M))})]})}),l.jsx(er,{className:"mb-6",children:l.jsxs("div",{className:"preview-section",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),l.jsx("div",{className:"preview-pairs space-y-2",children:u.map((D,M)=>l.jsxs("div",{className:"preview-pair flex items-center space-x-2 text-sm",children:[l.jsxs("span",{className:"preview-number font-semibold text-blue-600",children:[M+1,"."]}),l.jsx("span",{className:"preview-left px-2 py-1 bg-white rounded border",children:D.leftWord||"Left word"}),l.jsx("span",{className:"preview-arrow text-gray-500",children:""}),l.jsx("span",{className:"preview-right px-2 py-1 bg-white rounded border",children:D.rightWord||"Right word"})]},M))})]})}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsx(xt,{onClick:F,disabled:!A()||p,className:"px-8",children:p?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test"}),l.jsx(xt,{onClick:r,variant:"secondary",children:"Cancel"})]}),w&&l.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-600",children:w})})]})},Mae=(e,t)=>{const[r,n,s]=VB(`test_progress_${e}_${t}`,{}),[a,i]=S.useState(!1),[o,c]=S.useState(0),[u,d]=S.useState(0),[f,m]=S.useState(!1),[p,x]=S.useState(null),w=S.useRef(null),v=S.useRef(null),C=S.useCallback((U,V)=>{if(!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}n(X=>({...X,[U]:V})),console.log(`Saved progress for question ${U}:`,V)},[n]),k=S.useCallback(U=>!window.tokenManager||!window.tokenManager.isAuthenticated()?(console.warn("[WARN] Cannot get progress: No valid JWT token"),null):r[U]||null,[r]),b=S.useCallback(()=>{if(console.log(`[DEBUG] clearTestProgress called with testType: ${e}, testId: ${t}`),!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const U=`test_progress_${e}_${t}`;console.log(`[DEBUG] Removing localStorage key: ${U}`);const V=Object.keys(r).length>0;s(),console.log(V?`[DEBUG] Progress cleared for test ${e}_${t}`:`[DEBUG] No progress found to clear for test ${e}_${t}`)},[s,e,t,r]),j=S.useCallback(()=>{w.current&&(j(w.current),w.current=null),v.current&&(j(v.current),v.current=null)},[]),A=S.useCallback(()=>{console.log(`[DEBUG] setupProgressTrackingForPage called with testType: ${e}, testId: ${t}`),v.current=setInterval(()=>{console.log("[DEBUG] Auto-saving progress..."),L()},3e4),console.log("[DEBUG] Progress tracking interval set up (30 seconds)")},[e,t]),F=S.useCallback(()=>{console.log(`[DEBUG] updateProgressDisplayForPage called with testType: ${e}, testId: ${t}`);const U=O(),V=u>0?Math.round(U/u*100):0;return console.log(`[DEBUG] Progress: ${U}/${u} questions answered`),console.log(`[DEBUG] Progress bar updated: ${V}%`),{answeredQuestions:U,totalQuestions:u,percentage:V}},[e,t,u]),D=S.useCallback(()=>{console.log("[DEBUG] updateSubmitButtonStateForPage called");const U=O();console.log(`[DEBUG] Submit button state check: ${U}/${u} questions answered`);const V=U===u&&u>0;return console.log(V?"[DEBUG] Submit button enabled - all questions answered":"[DEBUG] Submit button disabled - not all questions answered"),V},[u]),M=S.useCallback(()=>{console.log(`[DEBUG] loadSavedProgressForPage called with testType: ${e}, testId: ${t}`);try{if(console.log("[DEBUG] Loaded progress from localStorage:",r),Object.keys(r).length===0){console.log("[DEBUG] No saved progress found");return}const U=Object.keys(r).length;c(U),console.log(`[DEBUG] Restored ${U} answered questions`)}catch(U){console.error("[ERROR] Failed to load saved progress:",U),x(U.message)}},[e,t,r]),O=S.useCallback(()=>{console.log(`[DEBUG] getAnsweredQuestionsCountForPage called with testType: ${e}`);const U=Object.keys(r).length;return c(U),console.log(`[DEBUG] Found ${U} answered questions`),U},[e,r]),L=S.useCallback(()=>{console.log(`[DEBUG] saveProgressForPage called with testType: ${e}, testId: ${t}`);try{console.log("[DEBUG] Progress saved:",r)}catch(U){console.error("[ERROR] Failed to save progress:",U),x(U.message)}},[e,t,r]),W=S.useCallback(()=>{try{const U=`test_completed_${e}_${t}`,V=localStorage.getItem(U)==="true";return i(V),V}catch(U){return console.error("Error checking test completion:",U),!1}},[e,t]),re=S.useCallback(()=>{try{const U=`test_completed_${e}_${t}`;localStorage.setItem(U,"true"),i(!0),console.log(`Test ${e}_${t} marked as completed`)}catch(U){console.error("Error marking test completed:",U)}},[e,t]),ie=S.useCallback(()=>{console.log("Marking test completed in UI:",{testType:e,testId:t}),re()},[e,t,re]),xe=S.useCallback(U=>{try{const V=`test_creation_state_${e}_${t}`;localStorage.setItem(V,JSON.stringify(U)),console.log("Test creation state saved:",U)}catch(V){console.error("Error saving test creation state:",V)}},[e,t]),de=S.useCallback(()=>{try{const U=`test_creation_state_${e}_${t}`;localStorage.removeItem(U),console.log("Test creation state cleared")}catch(U){console.error("Error clearing test creation state:",U)}},[e,t]),fe=S.useCallback((U,V)=>{try{const X=`test_step_${e}_${t}_${U}`;localStorage.setItem(X,JSON.stringify(V)),console.log(`Step ${U} data saved:`,V)}catch(X){console.error(`Error saving step ${U} data:`,X)}},[e,t]),H=S.useCallback(U=>{try{const V=`test_step_${e}_${t}_${U}`,X=localStorage.getItem(V);return X?JSON.parse(X):null}catch(V){return console.error(`Error restoring step ${U} data:`,V),null}},[e,t]),Q=S.useCallback(()=>{try{const U=`test_creation_state_${e}_${t}`,V=localStorage.getItem(U);return V?JSON.parse(V):null}catch(U){return console.error("Error restoring test creation state:",U),null}},[e,t]);return S.useEffect(()=>()=>{j()},[e,t,A,M,j]),S.useEffect(()=>{O()},[r,O]),{progress:r,isCompleted:a,answeredCount:o,totalQuestions:u,isLoading:f,error:p,saveProgress:C,getProgress:k,clearProgress:b,clearInterval:j,setupProgressTracking:A,updateProgress:F,updateSubmitButton:D,loadProgress:M,getAnsweredCount:O,saveProgressForPage:L,checkCompleted:W,markCompleted:re,markCompletedUI:ie,saveState:xe,clearState:de,saveStepData:fe,restoreStepData:H,restoreState:Q,setTotalQuestions:d,setError:x}},Fae=({testData:e,onTestComplete:t,onBackToCabinet:r})=>{const{user:n}=Js(),{makeAuthenticatedRequest:s}=Zl(),{showNotification:a}=_i(),[i,o]=S.useState({width:window.innerWidth,height:window.innerHeight});S.useEffect(()=>{const Xe=()=>{o({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",Xe),()=>window.removeEventListener("resize",Xe)},[]);const{getCheatingData:c,stopTracking:u,clearData:d}=Yp(),[f,m]=S.useState(null),[p,x]=S.useState({}),[w,v]=S.useState(null),C=S.useRef(null),[k,b]=S.useState(800),j={VERY_SMALL:400,MOBILE:600,TABLET:900},A={VERY_SMALL:.6,MOBILE:.8,TABLET:.9,DESKTOP:1},F={CANVAS_HEIGHT:400,BLOCK_WIDTH:140,BLOCK_HEIGHT:50,BLOCK_SPACING:80,MARGIN:50},D=i.width<j.VERY_SMALL,M=i.width>=j.VERY_SMALL&&i.width<j.MOBILE,O=i.width>=j.MOBILE&&i.width<j.TABLET;i.width>=j.TABLET;const L=D?A.VERY_SMALL:M?A.MOBILE:O?A.TABLET:A.DESKTOP;S.useEffect(()=>{const Xe=()=>{if(C.current){const ut=C.current.clientWidth;console.log(" Container width detected:",ut),ut>0&&b(ut)}};Xe();const Qe=[setTimeout(Xe,50),setTimeout(Xe,100),setTimeout(Xe,200),setTimeout(Xe,500)];return window.addEventListener("resize",Xe),()=>{Qe.forEach(ut=>clearTimeout(ut)),window.removeEventListener("resize",Xe)}},[f]);const W=F.BLOCK_WIDTH*L,re=F.BLOCK_HEIGHT*L,ie=F.BLOCK_SPACING*L,xe=F.MARGIN*L,de=xe;console.log(" Mobile Debug:",{screenWidth:i.width,containerWidth:C.current?.clientWidth,canvasWidth:k,scale:L,blockWidth:W,margin:xe,leftBlockX:de,displayDataLoaded:!!f});const fe=de+W+20+W+xe,H=fe<=k;let Q,U=W,V=re;if(H)Q=Math.min(Math.max(de+W+20,k-W-xe),k-W-xe);else{const Xe=k-xe*2,Qe=Math.floor((Xe-20)/2);U=Math.max(60,Qe),V=Math.max(30,V*(U/W)),Q=de+U+20,console.log(" Very small screen - adjusted block size:",{availableWidth:Xe,maxBlockWidth:Qe,actualBlockWidth:U,actualBlockHeight:V})}console.log(" Right Block Position:",{rightBlockX:Q,rightBlockRightEdge:Q+U,canvasWidth:k,fits:Q+U<=k,canFitSideBySide:H,minRequiredWidth:fe});const X=xe,z={DRAGGED_WORD:Math.max(8,14*L),ORIGINAL_WORD:Math.max(10,16*L),LEFT_WORD:Math.max(10,14*L)},K=Math.max(1,3*L),te=S.useCallback((Xe,Qe,ut)=>{if(!Xe)return V;const mt=Qe*.55,ht=Math.floor(ut/mt),Ot=Math.ceil(Xe.length/ht),nt=Qe*1.1,sr=12*L,kr=Ot*nt+sr,Er=Math.max(V*.8,30*L);return Math.max(Er,kr)},[V,L]),pe=S.useCallback(()=>{if(!f?.leftWords||!f?.rightWords)return F.CANVAS_HEIGHT*L;let Xe=xe*2;for(let ut=0;ut<f.leftWords.length;ut++){const mt=f.leftWords[ut],ht=f.rightWords[ut],Ot=te(mt,z.LEFT_WORD,U),nt=te(ht,z.ORIGINAL_WORD,U),sr=Math.max(Ot,nt);Xe+=sr,ut<f.leftWords.length-1&&(Xe+=20*L)}const Qe=F.CANVAS_HEIGHT*L;return Math.max(Qe,Xe)},[f,te,z,U,xe,L])();S.useCallback((Xe,Qe)=>{if(!Xe||!Qe)return ie;const ut=Xe.map((Ot,nt)=>{const sr=Qe[nt],kr=te(Ot,z.LEFT_WORD,U),Er=te(sr,z.ORIGINAL_WORD,U);return Math.max(kr,Er)}),mt=Math.max(...ut),ht=20*L;return mt+ht},[ie,te,z,U,L]);const ye=S.useCallback(()=>{if(!f?.leftWords||!f?.rightWords)return[];const Xe=[];let Qe=xe;for(let ut=0;ut<f.leftWords.length;ut++){const mt=f.leftWords[ut],ht=f.rightWords[ut],Ot=te(mt,z.LEFT_WORD,U),nt=te(ht,z.ORIGINAL_WORD,U),sr=Math.max(Ot,nt);Xe.push({y:Qe,leftHeight:Ot,rightHeight:nt,rowHeight:sr}),Qe+=sr+20*L}return Xe},[f,te,z,U,xe,L])(),[we,Se]=S.useState([]),[Ie,me]=S.useState(!1),[_e,We]=S.useState(!1),[Ue,St]=S.useState(null),[Ze,Kt]=S.useState(!1),[yt,Rt]=S.useState(!1);S.useEffect(()=>{if(e){if(console.log(" WordMatchingStudent: Initializing test data:",e),console.log(" Interaction type:",e.interaction_type),console.log(" Left words:",e.leftWords),console.log(" Right words:",e.rightWords),console.log(" Correct pairs:",e.correctPairs),!Array.isArray(e.leftWords)||!Array.isArray(e.rightWords)){console.error(" Invalid data structure - leftWords or rightWords not arrays:",{leftWords:e.leftWords,rightWords:e.rightWords});return}if(m(e),St(new Date),n?.student_id){const Xe=`test_progress_${n.student_id}_word_matching_${e.id}`,Qe=ja(Xe);Qe&&(x(Qe.answers||{}),Se(Qe.arrows||[]),St(new Date(Qe.startTime)),console.log(" Test progress restored:",Qe))}}},[e,n?.student_id]),S.useEffect(()=>{if(f&&Ue&&n?.student_id){const Xe=setInterval(()=>{const Qe={answers:p,arrows:we,startTime:Ue.toISOString()},ut=`test_progress_${n.student_id}_word_matching_${e.id}`;ha(ut,Qe,Aa.test_progress),console.log(" Progress auto-saved")},3e4);return()=>clearInterval(Xe)}},[f,p,we,Ue,n?.student_id,e?.id]);const At=S.useCallback((Xe,Qe)=>{if(console.log(" handleWordClick called:",{side:Xe,index:Qe,interactionType:e?.interaction_type,selectedWord:w}),e?.interaction_type!=="arrow"){console.log(" Not arrow mode, ignoring click");return}if(w){if(w.side===Xe&&w.index===Qe)console.log(" Deselecting word"),v(null);else if(w.side!==Xe){console.log(" Creating arrow connection:",{startWord:w,endWord:{side:Xe,index:Qe}});const ut={id:Date.now().toString(),startWord:w,endWord:{side:Xe,index:Qe},color:"#3B82F6"};Se(mt=>{const ht=[...mt,ut];return console.log(" Updated arrows:",ht),ht}),x(mt=>{const ht={...mt,[w.index]:Qe};return console.log(" Updated answers:",ht),ht}),v(null)}}else console.log(" Selecting word:",{side:Xe,index:Qe}),v({side:Xe,index:Qe})},[w,e?.interaction_type]);S.useCallback((Xe,Qe)=>{e.interaction_type==="drag"&&x(ut=>({...ut,[Xe]:Qe}))},[e?.interaction_type]);const wt=S.useCallback(()=>{Kt(!0)},[]),Ft=S.useCallback(()=>{x({}),Se([]),v(null),Kt(!1)},[]),or=S.useCallback(()=>{Rt(!0)},[]),dr=S.useCallback(()=>{Rt(!1),r&&r()},[r]),nr=S.useCallback(async()=>{if(f){me(!0);try{const Xe=f?.leftWords?.length||0;let Qe=0,ut={};e.interaction_type==="drag"?Object.entries(p).forEach(([ze,it])=>{const Le=f?.correctPairs?.[ze];it===Le&&Qe++,ut[ze]=it}):we.forEach(ze=>{const it=ze.startWord.side==="left"?ze.startWord.index:ze.endWord.index,Le=ze.startWord.side==="right"?ze.startWord.index:ze.endWord.index;f?.correctPairs?.[it]===Le&&Qe++,ut[it]=Le});const mt=Qe,ht=Xe;console.log(` Final Score: ${mt}/${ht} (${Math.round(mt/ht*100)}%)`);const Ot=new Date,nt=Ue?Math.round((Ot-Ue)/1e3):0,sr=Ue?Ue.toISOString():Ot.toISOString(),kr=c(),Er=n.student_id,Gr=`retest_assignment_id_${Er}_word_matching_${e.id}`,Ar=localStorage.getItem(Gr),{academicCalendarService:vr}=await co(async()=>{const{academicCalendarService:ze}=await Promise.resolve().then(()=>p4);return{academicCalendarService:ze}},void 0);await vr.loadAcademicCalendar();const Be=vr.getCurrentTerm()?.id;if(!Be)throw new Error("No current academic period found");const qe={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Er,academic_period_id:Be,parent_test_id:e.id,retest_assignment_id:Ar?Number(Ar):null,interaction_type:e.interaction_type,answers:ut,score:mt,maxScore:ht,time_taken:nt,started_at:sr,submitted_at:Ot.toISOString(),caught_cheating:kr.caught_cheating,visibility_change_times:kr.visibility_change_times};console.log(" Submission data being sent:",qe),console.log(" TestData structure:",e),console.log(" Submitting test results...");const Ye=await s("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(qe)});console.log(" Submission response received:",Ye.status);const Lt=await Ye.json();if(Lt.success){if(a("Test submitted successfully!","success"),u(),d(),n?.student_id&&Ip(n.student_id,"word_matching",e.id),!!Ar&&n?.student_id){let it=3;try{const rt=localStorage.getItem(`student_active_tests_${n.student_id}`);if(rt){const Xt=JSON.parse(rt)?.tests?.find(Yt=>Yt.test_id===e.id&&Yt.test_type==="word_matching");Xt&&(it=Xt.retest_attempts_left||Xt.max_attempts||3)}}catch(rt){console.error("Error checking active tests cache:",rt)}const st=(mt>0&&ht>0?mt/ht*100:0)>=50;if(st){const rt=`retest_attempt${it}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(rt,"true"),console.log(" Passed retest, marking last-slot key:",rt);let qt=0;for(let Z=1;Z<=10;Z++){const ae=`retest_attempt${Z}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(ae)==="true"&&qt++}const Xt=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Xt,"true"),console.log(" Marked retest as completed (student passed):",Xt);const Yt=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Yt,JSON.stringify({used:qt,max:it})),console.log(" Set retest attempts metadata (student passed):",Yt,{used:qt,max:it})}else{let rt=1;for(let ae=1;ae<=10;ae++){const jt=`retest_attempt${ae}_${n.student_id}_word_matching_${e.id}`;if(localStorage.getItem(jt)!=="true"){rt=ae;break}}const qt=`retest_attempt${rt}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(qt,"true"),console.log(" Marked retest attempt as completed:",qt);let Xt=0;for(let ae=1;ae<=10;ae++){const jt=`retest_attempt${ae}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(jt)==="true"&&Xt++}const Yt=it-Xt,Z=Yt<=0||st;if(console.log(" Retest completion check:",{usedAttempts:Xt,maxAttempts:it,attemptsLeft:Yt,passed:st,shouldComplete:Z}),Z){const ae=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(ae,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",ae);const jt=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(jt,JSON.stringify({used:Xt,max:it})),console.log(" Set retest attempts metadata (attempts exhausted):",jt,{used:Xt,max:it})}}}else if(n?.student_id){const it=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(it,"true"),console.log(" Test marked as completed in localStorage:",it)}if(n?.student_id){const it=`student_results_table_${n.student_id}`;ha(it,Lt,Aa.student_results_table),console.log(" Test results cached with key:",it)}if(n?.student_id){const it=`retest1_${Er}_word_matching_${e.id}`;localStorage.removeItem(it),localStorage.removeItem(Gr)}t&&t(mt),me(!1)}else throw new Error(Lt.message||"Failed to submit test")}catch(Xe){console.error("Error submitting test:",Xe),me(!1)}}},[f,p,we,e,n,Ue,c,u,d,s,t]);return f?l.jsxs(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-4xl mx-auto p-6",children:[l.jsx(Ka,{isOpen:Ie,onClose:()=>{},title:"Submitting",size:"small",children:l.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[l.jsx(pn,{size:"lg",className:"mb-3"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Submitting test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your results"})]})}),l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(xt,{onClick:or,variant:"outline",size:"sm",disabled:Ie,children:"Back to Cabinet"})}),l.jsx(er,{className:"mb-6",children:l.jsxs("div",{className:"text-left",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.test_name}),l.jsx("p",{className:"text-gray-600",children:e.interaction_type==="drag"?"Drag words from left to right to match them":"Click on the word or phrase on the left, then click on the matching word or phrase on the right to connect them"})]})}),e.interaction_type==="drag"?l.jsx(er,{className:"mb-6",children:l.jsx("div",{ref:C,className:"relative w-full",children:l.jsx(Sm,{width:k,height:pe,className:`border-2 border-gray-200 rounded-lg ${Ie?"pointer-events-none opacity-50":""}`,children:l.jsxs(_m,{children:[f.leftWords.map((Xe,Qe)=>{const ut=p[Qe]!==void 0,mt=te(Xe,z.LEFT_WORD,U),ht=ye[Qe],Ot=ht?ht.y:X+Qe*ie;return l.jsxs(Eu,{x:de,y:Ot,draggable:!ut,onDragStart:nt=>{nt.target.moveToTop()},onDragEnd:nt=>{nt.target.getStage();const sr=f.rightWords,kr=U+60,Er=V+30,Gr=Q-30,Ar=X-15;console.log(" Drop detection - Word dropped at:",nt.target.x(),nt.target.y());for(let vr=0;vr<sr.length;vr++){const Ee=ye[vr],Be=Ee?Ee.y:Ar+vr*ie,qe=Gr,Ye=Gr+kr,Lt=Be,ze=Be+Er;if(console.log(` Checking drop zone ${vr}:`,{left:qe,right:Ye,top:Lt,bottom:ze,word:sr[vr]}),nt.target.x()>=qe&&nt.target.x()<=Ye&&nt.target.y()>=Lt&&nt.target.y()<=ze){console.log(` Match found! Word "${f.leftWords[Qe]}" matched with "${sr[vr]}"`),x(it=>({...it,[Qe]:vr}));break}}console.log(" No match found, resetting position"),nt.target.position({x:de,y:Ot})},children:[l.jsx(Ui,{width:U,height:mt,fill:ut?"#e5e7eb":"#3b82f6",stroke:ut?"#9ca3af":"#1d4ed8",strokeWidth:2,cornerRadius:8,opacity:ut?.5:1}),l.jsx(md,{text:Xe,x:U/2,y:mt/2,fontSize:z.LEFT_WORD,fontFamily:"Arial",fill:ut?"#dc2626":"white",align:"center",verticalAlign:"middle",width:U,offsetX:U/2,offsetY:mt/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Qe}`)}),f.rightWords.map((Xe,Qe)=>{const ut=te(Xe,z.ORIGINAL_WORD,U),mt=ye[Qe],ht=mt?mt.y:X+Qe*ie,Ot=Object.keys(p).find(nt=>p[nt]===Qe);return l.jsxs(Eu,{x:Q,y:ht,children:[l.jsx(Ui,{width:U,height:ut,fill:Ot?"#10b981":"#f3f4f6",stroke:Ot?"#059669":"#d1d5db",strokeWidth:2,cornerRadius:8}),l.jsx(md,{text:Xe,x:U/2,y:ut/2,fontSize:z.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:U,offsetX:U/2,offsetY:ut/2,wrap:"word",ellipsis:!0,listening:!1}),Ot&&l.jsx(md,{text:f.leftWords[Ot],x:U/2,y:ut/4,fontSize:z.DRAGGED_WORD,fontFamily:"Arial",fill:"#dc2626",align:"center",verticalAlign:"middle",width:U,offsetX:U/2,offsetY:ut/8,wrap:"word",ellipsis:!0})]},`right-${Qe}`)})]})})})}):l.jsx(er,{className:"mb-6",children:l.jsx("div",{ref:C,className:"relative w-full",children:l.jsx(Sm,{width:k,height:pe,className:`border-2 border-gray-200 rounded-lg ${Ie?"pointer-events-none opacity-50":""}`,children:l.jsxs(_m,{children:[f?.leftWords?.map((Xe,Qe)=>{const ut=te(Xe,z.LEFT_WORD,U),mt=ye[Qe],ht=mt?mt.y:X+Qe*ie,Ot=w?.side==="left"&&w?.index===Qe;return l.jsxs(Eu,{x:de,y:ht,onClick:()=>At("left",Qe),children:[l.jsx(Ui,{width:U,height:ut,fill:Ot?"#3b82f6":"#f3f4f6",stroke:Ot?"#1d4ed8":"#d1d5db",strokeWidth:Ot?3:2,cornerRadius:8}),l.jsx(md,{text:Xe,x:U/2,y:ut/2,fontSize:z.LEFT_WORD,fontFamily:"Arial",fill:Ot?"white":"#374151",align:"center",verticalAlign:"middle",width:U,offsetX:U/2,offsetY:ut/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Qe}`)}),f?.rightWords?.map((Xe,Qe)=>{const ut=te(Xe,z.ORIGINAL_WORD,U),mt=ye[Qe],ht=mt?mt.y:X+Qe*ie,Ot=w?.side==="right"&&w?.index===Qe;return l.jsxs(Eu,{x:Q,y:ht,onClick:()=>At("right",Qe),children:[l.jsx(Ui,{width:U,height:ut,fill:Ot?"#3b82f6":"#f3f4f6",stroke:Ot?"#1d4ed8":"#d1d5db",strokeWidth:Ot?3:2,cornerRadius:8}),l.jsx(md,{text:Xe,x:U/2,y:ut/2,fontSize:z.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:U,offsetX:U/2,offsetY:ut/2,wrap:"word",ellipsis:!0,listening:!1})]},`right-${Qe}`)}),we.map((Xe,Qe)=>{const ut=f?.leftWords?.[Xe.startWord.index],mt=f?.rightWords?.[Xe.endWord.index],ht=te(ut,z.LEFT_WORD,U),Ot=te(mt,z.ORIGINAL_WORD,U),nt=ye[Xe.startWord.index],sr=ye[Xe.endWord.index],kr=nt?nt.y+ht/2:X+Xe.startWord.index*ie+ht/2,Er=sr?sr.y+Ot/2:X+Xe.endWord.index*ie+Ot/2;return l.jsx(so,{points:[de+U+20,kr,Q-20,Er],stroke:Xe.color||"#3b82f6",strokeWidth:K,lineCap:"round",lineJoin:"round"},Qe)})]})})})}),l.jsx(er,{children:l.jsxs("div",{className:`submit-section flex justify-center space-x-4 ${Ie?"pointer-events-none opacity-50":""}`,children:[l.jsx(xt,{onClick:wt,variant:"outline",disabled:Ie,children:"Reset"}),l.jsx(xt,{onClick:()=>We(!0),disabled:Ie,className:"px-8",children:Ie?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white",className:"mr-2"}),"Submitting..."]}):"Submit Test"})]})}),l.jsx(Ka,{isOpen:Ze&&!Ie,onClose:()=>Kt(!1),title:"Reset Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and answers."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>Kt(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:Ft,variant:"primary",children:"Reset"})]})]})}),l.jsx(Ka,{isOpen:yt,onClose:()=>Rt(!1),title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to leave the test? Your progress will be saved."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>Rt(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:dr,variant:"primary",children:"Leave"})]})]})}),l.jsx(Ka,{isOpen:_e,onClose:()=>We(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>We(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:()=>{We(!1),nr()},variant:"primary",children:"Submit"})]})]})})]}):l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx(pn,{size:"lg"})})},Oae=({id:e,x:t,y:r,width:n,height:s,text:a,fontSize:i,color:o,isSelected:c,onSelect:u,onUpdate:d,onDelete:f})=>{const[m,p]=S.useState(!1),x=S.useRef(!1),w=S.useRef(null),v=S.useRef({x:0,y:0}),C=S.useRef(null),k=5,b=()=>{x.current=!0,p(!0)},j=()=>{if(x.current=!1,p(!1),C.current)try{C.current.draggable(!1)}catch{}},A=()=>{w.current&&(clearTimeout(w.current),w.current=null)};S.useEffect(()=>()=>{A()},[]),S.useEffect(()=>{if(C.current)try{C.current.draggable(x.current)}catch{}},[m]);const F=M=>{M.cancelBubble=!0,d(e,{isEditing:!0})},D=M=>{d(e,{x:M.target.x(),y:M.target.y()})};return l.jsxs(Eu,{ref:C,x:t,y:r,draggable:m,dragBoundFunc:M=>x.current?M:{x:t,y:r},name:"textbox-group",onClick:M=>{M.cancelBubble=!0,u(e)},onTap:M=>{M.cancelBubble=!0,u(e),A()},onDblClick:F,onDblTap:F,onPointerDown:M=>{M.cancelBubble=!0;const O=M.evt||{};v.current={x:O.clientX??0,y:O.clientY??0},A(),w.current=setTimeout(()=>{b()},400)},onPointerMove:M=>{if(!w.current)return;const O=M.evt||{},L=Math.abs((O.clientX??0)-v.current.x),W=Math.abs((O.clientY??0)-v.current.y);(L>k||W>k)&&A()},onPointerUp:M=>{M.cancelBubble=!0,A(),j()},onPointerLeave:()=>{A(),j()},onDragEnd:M=>{D(M),j()},children:[l.jsx(Ui,{width:n,height:s,fill:c?"#fef3c7":"#ffffff",stroke:c?"#f59e0b":"#d1d5db",strokeWidth:c?2:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1},name:"textbox-rect",onTap:M=>{M.cancelBubble=!0,u(e),A()},onDblTap:M=>{M.cancelBubble=!0,F(M)}}),l.jsx(md,{text:a,width:n,height:s,padding:8,align:"left",verticalAlign:"top",fontSize:i,fill:o,wrap:"word",name:"textbox-text",onTap:M=>{M.cancelBubble=!0,u(e),A()},onDblTap:M=>{M.cancelBubble=!0,F(M)}})]})},Dae=({x:e,y:t,width:r,height:n,initialText:s,onSave:a,onCancel:i})=>{const o=S.useRef(null);S.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const c=u=>{u.key==="Enter"&&!u.shiftKey?(u.preventDefault(),a(o.current.value)):u.key==="Escape"&&i()};return l.jsx("textarea",{ref:o,defaultValue:s,style:{position:"absolute",top:t,left:e,width:r,height:n,fontSize:"14px",border:"2px solid #f59e0b",borderRadius:"6px",padding:"8px",background:"white",resize:"none",outline:"none",fontFamily:"inherit",lineHeight:"1.4",zIndex:1e3},onKeyDown:c,onBlur:()=>a(o.current.value)})},Iae=({width:e,height:t,lines:r,onDrawingChange:n,currentTool:s,currentColor:a,currentThickness:i,zoom:o,onZoomChange:c,isPanning:u,isFullscreen:d,constrainPanPosition:f,handleWheel:m,stageRef:p,setIsPanning:x,responsiveDimensions:w,canvasSize:v,question:C,textBoxes:k,setTextBoxes:b,selectedTextBox:j,setSelectedTextBox:A,handleTextBoxSelect:F,handleTextBoxUpdate:D,handleTextBoxDelete:M,isEditingText:O,editingTextBox:L,setIsEditingText:W,setEditingTextBox:re,setCurrentTool:ie})=>{const[xe,de]=S.useState(!1),[fe,H]=S.useState([]),[Q,U]=S.useState(null),[V,X]=S.useState(null),z=S.useRef(null),[K,te]=S.useState(.25),[se,pe]=S.useState({x:0,y:0}),oe=S.useRef(null),ye=S.useRef(null),we=S.useRef(!1),Se=6;S.useEffect(()=>{const Le=()=>{const st=z.current;if(!st)return;const rt=st.clientWidth||1,qt=st.clientHeight||1,Xt=Math.min(rt/(v.width||1),qt/(v.height||1));te(Math.min(Xt,1))};return Le(),window.addEventListener("resize",Le),()=>window.removeEventListener("resize",Le)},[v.width,v.height,d]);const Ie=Le=>{const st=p.current,rt=st.getPointerPosition();if(s==="pan"){if(Ye(Le.target))try{st.draggable(!1),we.current=!0}catch{}return}if(s==="text"){const Xt={x:(rt.x-st.x())/st.scaleX(),y:(rt.y-st.y())/st.scaleY()};oe.current={...Xt},ye.current={x:rt.x,y:rt.y};return}de(!0);const qt={x:(rt.x-st.x())/st.scaleX(),y:(rt.y-st.y())/st.scaleY()};X(qt),s==="pencil"?H([{x:qt.x,y:qt.y,color:a,thickness:i}]):s==="eraser"?H([{x:qt.x,y:qt.y,color:a,thickness:i,tool:"eraser"}]):["line","rectangle","circle"].includes(s)&&U({type:s,startX:qt.x,startY:qt.y,endX:qt.x,endY:qt.y,color:a,thickness:i})},me=Le=>{const st=p.current,rt=st.getPointerPosition(),qt={x:(rt.x-st.x())/st.scaleX(),y:(rt.y-st.y())/st.scaleY()};if(pe(qt),s!=="pan"){if(s==="text"&&oe.current&&ye.current){const Xt=Math.abs(rt.x-ye.current.x),Yt=Math.abs(rt.y-ye.current.y);(Xt>Se||Yt>Se)&&(oe.current=null)}if(xe)if(s==="pencil"){const Xt=[...fe,{x:qt.x,y:qt.y,color:a,thickness:i}];H(Xt)}else if(s==="eraser"){const Xt=[...fe,{x:qt.x,y:qt.y,color:a,thickness:i,tool:"eraser"}];H(Xt)}else["line","rectangle","circle"].includes(s)&&Q&&U({...Q,endX:qt.x,endY:qt.y})}},_e=Le=>{const st=p.current;if(s==="pan"){if(we.current){try{st.draggable(!0)}catch{}we.current=!1}return}if(s==="text"&&oe.current){const rt=Le&&Le.target;if(rt&&typeof rt.name=="function"&&rt.name()==="canvas-bg"){const Xt={id:Date.now(),x:oe.current.x,y:oe.current.y,width:150,height:60,text:"Double-click to edit",fontSize:14,color:"#000000"};b(Yt=>[...Yt,Xt]),A(Xt.id)}oe.current=null,ye.current=null}if(xe){if(s==="pencil"){const rt=[...r,fe];n(rt),H([])}else if(s==="eraser"){const rt=[...r,fe];n(rt),H([])}else if(["line","rectangle","circle"].includes(s)&&Q){const rt=[...r,Q];n(rt),U(null)}de(!1),X(null)}},[We,Ue]=S.useState(null),[St,Ze]=S.useState(null),[Kt,yt]=S.useState(!1),[Rt,At]=S.useState(null),[wt,Ft]=S.useState(!1),[or,dr]=S.useState(!1),[nr,Xe]=S.useState([]),[Qe,ut]=S.useState(null),[mt,ht]=S.useState({totalGestures:0,zoomGestures:0,panGestures:0,combinedGestures:0,averageResponseTime:0});let Ot=null;const sr=(window.devicePixelRatio||1)>1.5,kr={scaleDelta:sr?.03:.04,centerDelta:sr?4:6,minTouchDistance:8,gestureHysteresis:.02},Er=()=>{Ft(!1),At(null),Ue(null),Ze(null),de(!1),X(null),dr(!1),ut(null),Ot&&(cancelAnimationFrame(Ot),Ot=null),p.current&&p.current.stop()},Gr=Le=>{if(Le.length<2)return 0;const st=Le[0],rt=Le[1];return Math.sqrt(Math.pow(rt.clientX-st.clientX,2)+Math.pow(rt.clientY-st.clientY,2))},Ar=Le=>{if(Le.length<2)return null;const st=Le[0],rt=Le[1];return{x:(st.clientX+rt.clientX)/2,y:(st.clientY+rt.clientY)/2}},vr=Le=>{Xe(st=>[...st,{type:Le,timestamp:Date.now()}].slice(-5))},Ee=()=>{const Le=Date.now(),st=nr.filter(Xt=>Le-Xt.timestamp<500);if(st.length<2)return 0;const rt=st[st.length-1],qt=st[st.length-2];return rt.type===qt.type?kr.gestureHysteresis:0},Be=(Le,st)=>{ht(rt=>({totalGestures:rt.totalGestures+1,zoomGestures:Le.includes("zoom")?rt.zoomGestures+1:rt.zoomGestures,panGestures:Le.includes("pan")?rt.panGestures+1:rt.panGestures,combinedGestures:Le==="zoom+pan"?rt.combinedGestures+1:rt.combinedGestures,averageResponseTime:(rt.averageResponseTime+st)/2}))},qe=(Le,st,rt,qt)=>{const Xt=p.current,Yt=Xt.scaleX(),Z=Xt.position();let ae=Yt,jt=Z;if(Le){const Ce=rt/We,be=Yt*Ce,Me=C?.max_canvas_width||1536,De=C?.max_canvas_height||2048,Ve=Me/v.width,bt=De/v.height,ot=Math.min(Ve,bt,1);ae=Math.max(.25,Math.min(ot,be));const dt=qt,ee={x:(dt.x-Xt.x())/Yt,y:(dt.y-Xt.y())/Yt};jt={x:dt.x-ee.x*ae,y:dt.y-ee.y*ae}}if(st){const Ce=qt.x-St.x,be=qt.y-St.y;Le?jt={x:jt.x+Ce,y:jt.y+be}:jt={x:Z.x+Ce,y:Z.y+be}}Ot||(Ot=requestAnimationFrame(()=>{Xt.scale({x:ae,y:ae}),Xt.position(jt),Xt.batchDraw(),Ot=null})),Le&&st?(At("zoom+pan"),dr(!0)):Le?(At("zoom"),dr(!0)):st&&At("pan");const ue=Date.now()-(Qe||Date.now());Be(Le&&st?"zoom+pan":Le?"zoom":"pan",ue),console.log(" Combined gesture",{doZoom:Le,doPan:st,scale:ae.toFixed(2),pos:jt})},Ye=Le=>{if(!Le||typeof Le.name!="function")return!1;if((Le.name()||"").includes("textbox-"))return!0;const rt=Le.getParent&&Le.getParent();return rt&&typeof rt.name=="function"&&(rt.name()||"").includes("textbox-")},Lt=Le=>{const st=Le.evt.touches,rt=Le.target;if(Ye(rt)){if(s==="pan"&&p.current)try{p.current.draggable(!1),we.current=!0}catch{}return}st.length===2?(Le.evt.preventDefault(),Ft(!0),At(null),Ue(Gr(st)),Ze(Ar(st)),de(!1),ut(Date.now())):st.length===1&&(Ft(!1),At(null),Ie(Le))},ze=Le=>{const st=Le.evt.touches,rt=Le.target;if(!Ye(rt))if(st.length===2&&wt){Le.evt.preventDefault();const qt=p.current,Xt=Gr(st),Yt=Ar(st);if(We&&St&&qt&&Xt>kr.minTouchDistance){const Z=Math.abs(Xt/We-1),ae=Math.sqrt(Math.pow(Yt.x-St.x,2)+Math.pow(Yt.y-St.y,2)),jt=Ee(),G=kr.scaleDelta-jt,ue=kr.centerDelta-jt*10,Ce=Z>G,be=ae>ue;(Ce||be)&&(qe(Ce,be,Xt,Yt),Ce&&be?vr("zoom+pan"):Ce?vr("zoom"):be&&vr("pan")),console.log(" Gesture Debug",{scaleDelta:Z.toFixed(3),centerDelta:ae.toFixed(1),doZoom:Ce,doPan:be,hysteresis:jt.toFixed(3),adjustedScaleDelta:G.toFixed(3),adjustedCenterDelta:ue.toFixed(1),gestureHistory:nr.slice(-3)})}Ue(Xt),Ze(Yt)}else st.length===1&&!wt&&(Le.evt.preventDefault(),me())},it=Le=>{const st=Le.evt.touches,rt=Le.target;Ye(rt)||(st.length===0?(_e(Le),Er(),dr(!1)):st.length===1&&(Ft(!1),At(null),Ue(null),Ze(null),dr(!1)))};return l.jsx("div",{className:"relative w-full block sm:flex sm:justify-center",children:l.jsx("div",{className:"w-full max-w-full block sm:flex sm:justify-center",children:l.jsxs("div",{className:"relative",style:{border:d&&(w.width<window.innerWidth-40||w.height<window.innerHeight-40)?"2px solid #000000":"none",borderRadius:"8px",overflow:"hidden"},children:[l.jsx("div",{ref:z,className:"w-full h-full",style:{touchAction:"manipulation"},children:l.jsx(Sm,{ref:p,width:w.width,height:w.height,scaleX:d?w.zoom:o,scaleY:d?w.zoom:o,onMouseDown:Ie,onMousemove:me,onMouseup:_e,onTouchStart:Lt,onTouchMove:ze,onTouchEnd:it,onWheel:m||(()=>{}),onDragStart:()=>{console.log(" Drag started"),s==="pan"&&x(!0)},onDragEnd:()=>{if(console.log(" Drag ended"),s==="pan"&&(x(!1),f)){const Le=p.current,st=z.current,rt=st?.clientWidth||w.width,qt=st?.clientHeight||w.height,Xt=v.width*Le.scaleX(),Yt=v.height*Le.scaleY(),Z=Le.x(),ae=Le.y();(Z>rt||Z<-Xt||ae>qt||ae<-Yt)&&f(Le)}},draggable:s==="pan"&&o>.25,className:`border-0 rounded-none shadow-none sm:border sm:rounded-lg sm:shadow-sm ${s==="pan"?"cursor-grab":u?"cursor-grabbing":"cursor-crosshair"}`,style:{width:"100%",height:"auto"},onLoad:()=>{console.log(" DrawingTestStudent - Stage loaded with dimensions:",w.width,"x",w.height),console.log(" DrawingTestStudent - Canvas size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Current zoom level:",o),console.log(" DrawingTestStudent - Effective display size:",Math.round(v.width*o),"x",Math.round(v.height*o)),console.log(" DrawingTestStudent - Total pixels displayed:",Math.round(v.width*o*v.height*o))},children:l.jsxs(_m,{children:[l.jsx(Ui,{x:0,y:0,width:v.width,height:v.height,fill:"white",name:"canvas-bg"}),r.map((Le,st)=>{if(Array.isArray(Le)){const rt=Le[0]?.tool==="eraser";return l.jsx(so,{points:Le.flatMap(qt=>[qt.x,qt.y]),stroke:rt?"black":Le[0]?.color||"#000000",strokeWidth:rt?(Le[0]?.thickness||2)*7:Le[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:rt?"destination-out":"source-over"},st)}else{if(Le.type==="line")return l.jsx(so,{points:[Le.startX,Le.startY,Le.endX,Le.endY],stroke:Le.color,strokeWidth:Le.thickness,lineCap:"round"},st);if(Le.type==="rectangle"){const rt=Math.abs(Le.endX-Le.startX),qt=Math.abs(Le.endY-Le.startY),Xt=Math.min(Le.startX,Le.endX),Yt=Math.min(Le.startY,Le.endY);return l.jsx(Ui,{x:Xt,y:Yt,width:rt,height:qt,stroke:Le.color,strokeWidth:Le.thickness,fill:"transparent"},st)}else if(Le.type==="circle"){const rt=Math.sqrt(Math.pow(Le.endX-Le.startX,2)+Math.pow(Le.endY-Le.startY,2))/2,qt=(Le.startX+Le.endX)/2,Xt=(Le.startY+Le.endY)/2;return l.jsx(qf,{x:qt,y:Xt,radius:rt,stroke:Le.color,strokeWidth:Le.thickness,fill:"transparent"},st)}}return null}),k.map(Le=>l.jsx(Oae,{...Le,isSelected:j===Le.id,onSelect:F,onUpdate:D,onDelete:M},Le.id)),s==="pencil"&&l.jsx(so,{points:fe.flatMap(Le=>[Le.x,Le.y]),stroke:a,strokeWidth:i,tension:.5,lineCap:"round",lineJoin:"round"}),s==="eraser"&&l.jsx(so,{points:fe.flatMap(Le=>[Le.x,Le.y]),stroke:"black",strokeWidth:i*7,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:"destination-out"}),Q&&Q.type==="line"&&l.jsx(so,{points:[Q.startX,Q.startY,Q.endX,Q.endY],stroke:Q.color,strokeWidth:Q.thickness,lineCap:"round"}),Q&&Q.type==="rectangle"&&l.jsx(Ui,{x:Math.min(Q.startX,Q.endX),y:Math.min(Q.startY,Q.endY),width:Math.abs(Q.endX-Q.startX),height:Math.abs(Q.endY-Q.startY),stroke:Q.color,strokeWidth:Q.thickness,fill:"transparent"}),Q&&Q.type==="circle"&&l.jsx(qf,{x:(Q.startX+Q.endX)/2,y:(Q.startY+Q.endY)/2,radius:Math.sqrt(Math.pow(Q.endX-Q.startX,2)+Math.pow(Q.endY-Q.startY,2))/2,stroke:Q.color,strokeWidth:Q.thickness,fill:"transparent"}),s==="eraser"&&l.jsx(qf,{x:se.x,y:se.y,radius:i*7/2,stroke:"#666666",strokeWidth:2,fill:"rgba(102, 102, 102, 0.2)",dash:[5,5],listening:!1}),s==="pencil"&&l.jsx(so,{points:[se.x-10,se.y,se.x+10,se.y,se.x,se.y-10,se.x,se.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="line"&&l.jsx(so,{points:[se.x-10,se.y,se.x+10,se.y,se.x,se.y-10,se.x,se.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="rectangle"&&l.jsx(so,{points:[se.x-10,se.y,se.x+10,se.y,se.x,se.y-10,se.x,se.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="circle"&&l.jsx(so,{points:[se.x-10,se.y,se.x+10,se.y,se.x,se.y-10,se.x,se.y+10],stroke:"#666666",strokeWidth:1,listening:!1})]})})}),O&&L&&l.jsx(Dae,{x:L.x,y:L.y,width:L.width,height:L.height,initialText:L.text,onSave:Le=>{D(L.id,{text:Le}),W(!1),re(null)},onCancel:()=>{W(!1),re(null)}}),l.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[l.jsx("button",{onClick:()=>{const Le=p.current,st=Le.scaleX(),rt=C?.max_canvas_width||1536,qt=C?.max_canvas_height||2048,Xt=rt/v.width,Yt=qt/v.height,Z=Math.min(Xt,Yt,5),ae=Math.min(Z,Le.scaleX()*1.2);Le.scale({x:ae,y:ae}),Le.batchDraw(),console.log(" DrawingTestStudent - Zoom In button:",st.toFixed(2),"->",ae.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*ae),"x",Math.round(v.height*ae)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*ae*v.height*ae),"pixels"),c(ae)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom In",children:"+"}),l.jsx("button",{onClick:()=>{const Le=p.current,st=Le.scaleX(),rt=Math.max(.25,Le.scaleX()*.8);Le.scale({x:rt,y:rt}),Le.batchDraw(),console.log(" DrawingTestStudent - Zoom Out button:",st.toFixed(2),"->",rt.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*rt),"x",Math.round(v.height*rt)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*rt*v.height*rt),"pixels"),c(rt)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom Out",children:""}),l.jsx("button",{onClick:()=>{const Le=p.current,st=Le.scaleX();Le.scale({x:1,y:1}),Le.position({x:0,y:0}),Le.batchDraw(),console.log(" DrawingTestStudent - Reset zoom:",st.toFixed(2),"-> 1.00"),console.log(" DrawingTestStudent - Reset effective size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Reset resolution:",v.width*v.height,"pixels"),c(1)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 text-xs",title:"Reset Zoom",children:"1:1"})]}),l.jsxs("div",{className:"absolute bottom-2 left-2 bg-white border border-gray-300 rounded px-2 py-1 text-xs text-gray-600 shadow-sm",children:[Math.round(o*100),"%"]})]})})})},Rae=({content:e})=>{if(!e)return l.jsx("div",{className:"text-gray-500 italic",children:"No instructions provided"});const t=n=>{if(!n)return"";if(n.type==="text"){let s=n.text||"";if(n.format&&(n.format&1&&(s=`<strong>${s}</strong>`),n.format&2&&(s=`<em>${s}</em>`),n.format&8&&(s=`<u>${s}</u>`),n.format&16&&(s=`<s>${s}</s>`)),n.style){const a=n.style.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}if(n.textStyle){const a=n.textStyle.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}return s}if(n.type==="paragraph"){const s=n.children?n.children.map(t).join(""):"";let a="text-left";return n.format&&(n.format==="center"?a="text-center":n.format==="right"?a="text-right":n.format==="left"&&(a="text-left")),`<p class="${a}">${s}</p>`}if(n.type==="heading"){const s=n.tag||"h1",a=n.children?n.children.map(t).join(""):"";return`<${s}>${a}</${s}>`}if(n.type==="list"){const s=n.listType==="bullet"?"ul":"ol",a=n.children?n.children.map(i=>{if(i.type==="listitem"){const o=i.children?i.children.map(t).join(""):"";let c="margin: 4px 0; display: list-item;";return i.format&&(i.format==="center"?c+=" text-align: center;":i.format==="right"?c+=" text-align: right;":i.format==="left"&&(c+=" text-align: left;")),`<li style="${c}">${o}</li>`}return""}).join(""):"";return`<${s} style="margin: 8px 0; padding-left: 20px; list-style-type: ${n.listType==="bullet"?"disc":"decimal"}; display: block;">${a}</${s}>`}return n.children?n.children.map(t).join(""):""};let r=e;if(typeof e=="string"&&e.startsWith("{"))try{const n=JSON.parse(e);n.text?r=n.text:n.content?r=n.content:n.root&&n.root.children&&(r=n.root.children.map(t).join(""))}catch(n){console.log("Failed to parse Lexical content:",n)}return l.jsx("div",{className:"max-w-none rich-text-content",style:{lineHeight:"1.6",fontSize:"14px"},dangerouslySetInnerHTML:{__html:r}})},Lae=({question:e,questionIndex:t,studentAnswer:r,onAnswerChange:n,mode:s,testId:a,testType:i})=>{_i();const[o,c]=S.useState([]),[u,d]=S.useState(!0),[f,m]=S.useState("pencil"),[p,x]=S.useState("#000000"),[w,v]=S.useState(2),[C,k]=S.useState([]),[b,j]=S.useState(-1),[A,F]=S.useState({width:600,height:800}),[D,M]=S.useState(1),[O,L]=S.useState(!1),[W,re]=S.useState(!1),[ie,xe]=S.useState(!1),[de,fe]=S.useState([]),[H,Q]=S.useState(null),[U,V]=S.useState(!1),[X,z]=S.useState(null),K=b>0,te=b<C.length-1,[se,pe]=S.useState(!1),oe=S.useRef(null),ye=S.useRef(null),[we,Se]=S.useState({width:600,height:800}),Ie=S.useRef(!1),[me,_e]=S.useState(.25),We=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#808080","#FFC0CB","#A52A2A","#000080"];S.useEffect(()=>{const Xe=()=>{xe(window.innerWidth>=1024)};return Xe(),window.addEventListener("resize",Xe),()=>window.removeEventListener("resize",Xe)},[]),S.useEffect(()=>{if(e){const Xe=e.max_canvas_width||1536,Qe=e.max_canvas_height||2048,ut=e.canvas_width||600,mt=e.canvas_height||800;if(F({width:Xe,height:Qe}),Ie.current)console.log(" DrawingTestStudent - Preserving user zoom:",D.toFixed(2));else{M(1),Ie.current=!0;const Ot=(ut-Xe*1)/2,nt=(mt-Qe*1)/2;if(!isNaN(Ot)&&!isNaN(nt)&&oe.current){const sr={x:Ot,y:nt};oe.current.position(sr),oe.current.batchDraw()}console.log(" DrawingTestStudent - Canvas size set:",Xe,"x",Qe),console.log(" DrawingTestStudent - Viewport size:",ut,"x",mt),console.log(" DrawingTestStudent - Initial zoom:",1 .toFixed(2)),console.log(" DrawingTestStudent - Image resolution:",Xe*Qe,"pixels"),console.log(" DrawingTestStudent - Aspect ratio:",(Xe/Qe).toFixed(2))}if(r&&typeof r=="string")try{const ht=JSON.parse(r);ht.lines?c(ht.lines):c(ht),ht.textBoxes&&fe(ht.textBoxes)}catch{console.log("No valid drawing data found")}d(!1)}},[e,r]),S.useEffect(()=>{const Xe=()=>{const Qe=ye.current;if(!Qe)return;const ut=Qe.clientWidth||1,mt=Qe.clientHeight||1,ht=Math.min(ut/(A.width||1),mt/(A.height||1));_e(Math.min(ht,1))};return Xe(),window.addEventListener("resize",Xe),()=>window.removeEventListener("resize",Xe)},[A.width,A.height,se]);const Ue=Xe=>{c(Xe);const Qe={lines:Xe,textBoxes:de};n(e.question_id,JSON.stringify(Qe)),St(Xe,de)},St=(Xe,Qe=de)=>{const ut=C.slice(0,b+1);ut.push({lines:[...Xe],textBoxes:[...Qe]}),k(ut),j(ut.length-1)},Ze=()=>{if(K){const Xe=b-1,Qe=C[Xe];if(Qe&&typeof Qe=="object"&&Qe.lines){c([...Qe.lines]),fe([...Qe.textBoxes]);const ut={lines:Qe.lines,textBoxes:Qe.textBoxes};n(e.question_id,JSON.stringify(ut))}else{const ut=Qe||[];c([...ut]),n(e.question_id,JSON.stringify(ut))}j(Xe)}},Kt=()=>{if(te){const Xe=b+1,Qe=C[Xe];if(Qe&&typeof Qe=="object"&&Qe.lines){c([...Qe.lines]),fe([...Qe.textBoxes]);const ut={lines:Qe.lines,textBoxes:Qe.textBoxes};n(e.question_id,JSON.stringify(ut))}else{const ut=Qe||[];c([...ut]),n(e.question_id,JSON.stringify(ut))}j(Xe)}},yt=()=>{c([]),fe([]),Q(null),n(e.question_id,"")},Rt=Xe=>{Q(Xe)},At=(Xe,Qe)=>{const ut=de.map(ht=>ht.id===Xe?{...ht,...Qe}:ht);fe(ut),St(o,ut);const mt={lines:o,textBoxes:ut};if(n(e.question_id,JSON.stringify(mt)),Qe.isEditing){const ht=de.find(Ot=>Ot.id===Xe);z(ht),V(!0)}},wt=Xe=>{const Qe=de.filter(mt=>mt.id!==Xe);fe(Qe),H===Xe&&Q(null),St(o,Qe);const ut={lines:o,textBoxes:Qe};n(e.question_id,JSON.stringify(ut))},Ft=()=>{if(se){const ut=e?.canvas_width||600,mt=e?.canvas_height||800,ht=window.innerWidth-40,Ot=window.innerHeight-40,nt=ht/ut,sr=Ot/mt,kr=Math.min(nt,sr,1);return{width:ut,height:mt,zoom:kr}}const Xe=e?.canvas_width||600,Qe=e?.canvas_height||800;return{width:Xe,height:Qe,zoom:1}};S.useEffect(()=>{const Xe=()=>{Se(Ft())};return Xe(),window.addEventListener("resize",Xe),()=>window.removeEventListener("resize",Xe)},[se,A]);const or=Xe=>{Xe.evt.preventDefault();const Qe=oe.current,ut=Qe.scaleX(),mt=Qe.getPointerPosition(),ht={x:(mt.x-Qe.x())/ut,y:(mt.y-Qe.y())/ut},Ot=Xe.evt.deltaY>0?ut*.9:ut*1.1,nt=e?.max_canvas_width||1536,sr=e?.max_canvas_height||2048,kr=nt/A.width,Er=sr/A.height,Gr=Math.min(kr,Er,1),Ar=Math.max(me,Math.min(Gr,Ot)),vr={x:mt.x-ht.x*Ar,y:mt.y-ht.y*Ar};if(Ar<=me&&ye.current){const Ee=ye.current.clientWidth||1,Be=ye.current.clientHeight||1;vr.x=(Ee-A.width*Ar)/2,vr.y=(Be-A.height*Ar)/2}Qe.scale({x:Ar,y:Ar}),Qe.position(vr),Qe.batchDraw(),console.log(" DrawingTestStudent - Wheel zoom:",ut.toFixed(2),"->",Ar.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(A.width*Ar),"x",Math.round(A.height*Ar)),console.log(" DrawingTestStudent - New resolution:",Math.round(A.width*Ar*A.height*Ar),"pixels"),M(Ar),Ie.current=!0},dr=Xe=>{const Qe=Xe.scaleX(),ut=ye.current,mt=ut?.clientWidth||we.width,ht=ut?.clientHeight||we.height,Ot=A.width*Qe,nt=A.height*Qe;if(Qe<=me){const qe=(mt-Ot)/2,Ye=(ht-nt)/2;Xe.position({x:qe,y:Ye}),Xe.batchDraw();return}if(Ot<=mt&&nt<=ht){const qe=(mt-Ot)/2,Ye=(ht-nt)/2;Xe.position({x:qe,y:Ye}),Xe.batchDraw();return}const sr=Math.max(0,Ot-mt),kr=Math.max(0,nt-ht),Er=-sr,Gr=-kr,Ar=Xe.x(),vr=Xe.y(),Ee=Math.max(Er,Math.min(sr,Ar)),Be=Math.max(Gr,Math.min(kr,vr));(Ee!==Ar||Be!==vr)&&(Xe.position({x:Ee,y:Be}),Xe.batchDraw())},nr=()=>{if(se)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const Xe=ye.current;Xe&&(Xe.requestFullscreen?Xe.requestFullscreen():Xe.webkitRequestFullscreen?Xe.webkitRequestFullscreen():Xe.msRequestFullscreen&&Xe.msRequestFullscreen())}};return S.useEffect(()=>{const Xe=()=>{pe(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",Xe),document.addEventListener("webkitfullscreenchange",Xe),document.addEventListener("msfullscreenchange",Xe),()=>{document.removeEventListener("fullscreenchange",Xe),document.removeEventListener("webkitfullscreenchange",Xe),document.removeEventListener("msfullscreenchange",Xe)}},[]),S.useEffect(()=>()=>{oe.current&&oe.current.stop()},[]),u?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(pn,{})}):e?l.jsxs("div",{className:`drawing-question w-full max-w-full mx-0 p-0 sm:p-2 ${se?"fixed inset-0 z-50 bg-white overflow-y-auto":""}`,children:[!se&&l.jsx("div",{className:"mb-4",children:l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",t+1]})}),!se&&e.question_json&&e.question_json.trim()&&l.jsxs("div",{className:"mb-2 p-2 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Task:"}),l.jsx("div",{className:"text-gray-700",children:l.jsx(Rae,{content:e.question_json})})]}),!se&&l.jsx(er,{className:"p-1 sm:p-2 mb-2",children:l.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"hidden sm:block text-sm text-gray-700",children:"Tool:"}),l.jsxs("div",{className:"flex flex-nowrap sm:flex-wrap gap-1 overflow-x-auto",children:[l.jsx("button",{onClick:()=>m("pencil"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pencil"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pencil (Freehand drawing)",children:""}),l.jsx("button",{onClick:()=>m("line"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="line"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Line",children:""}),l.jsx("button",{onClick:()=>m("rectangle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="rectangle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Rectangle",children:""}),l.jsx("button",{onClick:()=>m("circle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="circle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Circle",children:""}),l.jsx("button",{onClick:()=>m("eraser"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="eraser"?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Eraser",children:""}),l.jsx("button",{onClick:()=>m("text"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="text"?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Text Box",children:""}),l.jsx("button",{onClick:()=>m("pan"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pan"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pan (Move canvas)",children:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-gray-700",children:"History:"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:Ze,disabled:!K,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${K?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:""}),l.jsx("button",{onClick:Kt,disabled:!te,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${te?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:""})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>L(!O),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:p}}),l.jsx("span",{className:"text-xs sm:text-sm text-gray-700",children:"Color"})]}),O&&l.jsx("div",{className:"absolute top-full left-0 mt-2 p-4 bg-white border border-gray-300 rounded-lg shadow-lg z-30 min-w-max",children:l.jsx("div",{className:"flex flex-wrap gap-2 max-w-xs",children:We.map(Xe=>l.jsx("button",{onClick:()=>{x(Xe),L(!1)},className:`w-10 h-10 rounded border-2 hover:scale-110 transition-transform flex-shrink-0 ${p===Xe?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:Xe},title:Xe},Xe))})})]}),l.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[l.jsx("label",{className:"text-xs sm:text-sm text-gray-700",children:"Thickness:"}),l.jsx("input",{type:"range",min:"1",max:"10",value:w,onChange:Xe=>v(parseInt(Xe.target.value)),className:"w-16 sm:w-20"}),l.jsxs("span",{className:"text-xs text-gray-500 w-6 sm:w-8",children:[w,"px"]})]}),l.jsx(xt,{onClick:yt,variant:"secondary",size:"sm",children:"Clear"})]})}),l.jsx(er,{paddingClass:"p-0 sm:p-2",children:l.jsxs("div",{ref:ye,className:"w-full drawing-canvas-container relative p-0 m-0",children:[l.jsx(Iae,{width:A.width,height:A.height,lines:o,onDrawingChange:Ue,currentTool:f,currentColor:p,currentThickness:w,zoom:D,onZoomChange:M,isPanning:W,isFullscreen:se,constrainPanPosition:dr,handleWheel:or,stageRef:oe,setIsPanning:re,responsiveDimensions:we,canvasSize:A,question:e,textBoxes:de,setTextBoxes:fe,selectedTextBox:H,setSelectedTextBox:Q,handleTextBoxSelect:Rt,handleTextBoxUpdate:At,handleTextBoxDelete:wt,isEditingText:U,editingTextBox:X,setIsEditingText:V,setEditingTextBox:z,setCurrentTool:m}),l.jsx("button",{onClick:nr,className:"absolute top-2 left-2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-lg transition-all duration-200 z-10",title:se?"Exit Fullscreen":"Enter Fullscreen",children:se?l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})]}):l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-500",children:"No drawing question data available"})})})},A3={enhanceUserData(e,t){const r={id:e.id||e.student_id||e.teacher_id,username:e.username||e.student_id,name:e.name||e.first_name,surname:e.surname||e.last_name,nickname:e.nickname,role:t,is_active:e.is_active!==void 0?e.is_active:!0,created_at:e.created_at,updated_at:e.updated_at};switch(t){case"student":return{...r,student_id:e.student_id,grade:e.grade,class:e.class,number:e.number,subjects:e.subjects||[]};case"teacher":return{...r,teacher_id:e.teacher_id,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,subjects:e.subjects||[]};case"admin":return{...r,admin_id:e.admin_id,permissions:e.permissions||["all"]};default:return r}},async studentLogin(e){console.log("Trying student login...");try{const t=await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e.username,password:e.password})}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.student,role:"student",response:t};throw new Error(r.message||"Student login failed")}catch(t){throw console.error("Student login error:",t),new Error(t.message||"Student login failed")}},async teacherLogin(e){console.log("Trying teacher login...");try{const t=await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.teacher,role:"teacher",response:t};throw new Error(r.message||"Teacher login failed")}catch(t){throw console.error("Teacher login error:",t),new Error(t.message||"Teacher login failed")}},async adminLogin(e){console.log("Trying admin login...");try{const t=await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.admin,role:"admin",response:t};throw new Error(r.message||"Admin login failed")}catch(t){throw console.error("Admin login error:",t),new Error(t.message||"Admin login failed")}},async login(e){const{username:t,password:r}=e;console.log("Attempting login with:",t,r);try{if(t==="admin"){const o=await this.adminLogin(e),c=await o.json();return await this.handleLoginResponse(o,"admin",c)}const n=await this.teacherLogin(e),s=await n.json();if(n.ok&&s.success)return await this.handleLoginResponse(n,"teacher",s);const a=await this.studentLogin(e),i=await a.json();return a.ok&&i.success?await this.handleLoginResponse(a,"student",i):(this.handleLoginFailure(),{success:!1,message:"Login failed. Please check your credentials and try again."})}catch(n){return console.error("Login error:",n),this.handleLoginFailure(),{success:!1,message:n.message||"Login failed"}}},async handleLoginResponse(e,t,r){if(e.ok&&r.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),this.handleLoginFailure(),{success:!1,message:"JWT system not available"};if(r.accessToken&&r.role)try{window.tokenManager.setTokens(r.accessToken,r.role),window.roleBasedLoader.setupAccessAfterLogin()}catch(n){return console.error("[ERROR] Failed to initialize JWT system:",n),this.handleLoginFailure(),{success:!1,message:"Failed to initialize JWT system"}}return this.resetLoginForm(),await this.handlePostLoginActions(r,t),{success:!0,data:r,role:t}}return{success:!1,message:"Login failed"}},async handlePostLoginActions(e,t){console.log(`Handling post-login actions for role: ${t}`);try{switch(t){case"student":e.student&&(this.populateStudentInfo(e.student),window.loadStudentData&&await window.loadStudentData());break;case"teacher":e.teacher&&(this.populateTeacherInfo(e.teacher),window.loadTeacherData&&await window.loadTeacherData());break;case"admin":e.admin&&window.loadAdminData&&await window.loadAdminData();break;default:console.warn(`Unknown role for post-login actions: ${t}`)}}catch(r){console.error("Error in post-login actions:",r)}},handleLoginFailure(){console.log("All login attempts failed"),this.resetLoginForm(),window.showNotification&&window.showNotification("Login failed. Please check your credentials and try again.","error")},resetLoginForm(){const e=document.getElementById("unifiedLoginForm");if(e){e.querySelectorAll("input").forEach(n=>{n.disabled=!1,n.style.opacity="1",n.style.cursor="text",n.removeAttribute("readonly"),n.style.pointerEvents="auto"});const r=e.querySelector('button[type="submit"]');r&&(r.disabled=!1,r.style.opacity="1",r.style.cursor="pointer",r.style.pointerEvents="auto",r.innerHTML="Login"),e.classList.remove("test-submitting","disabled"),e.style.pointerEvents="auto",console.log("Login form reset successfully - all inputs re-enabled")}},async logout(){console.log(" Logout initiated...");try{return window.tokenManager&&window.tokenManager.logout(),window.roleBasedLoader&&window.roleBasedLoader.reloadRoleAccess(),window.clearTestLocalStorage&&window.clearTestLocalStorage(),this.resetInterfaceAfterSessionClear(),console.log(" Logout completed - user session cleared, test data cleared, and interface reset"),{success:!0}}catch(e){return console.error("Logout error:",e),this.resetInterfaceAfterSessionClear(),{success:!0}}},resetInterfaceAfterSessionClear(){try{window.forceLogout=!0,window.preventAutoLogin=!0,window.isClearingSession=!0,window.forceLogoutComplete=!0,document.querySelectorAll(".section").forEach(s=>{s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0"}),document.querySelectorAll('[id$="-cabinet"], [id$="-container"], [id*="cabinet"], [id*="container"]').forEach(s=>{s.id&&s.id!=="login-section"&&(s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0")}),document.body.classList.remove("student-logged-in","teacher-logged-in","admin-logged-in"),document.body.classList.add("force-logout");const r=document.getElementById("login-section");r&&(r.classList.add("active"),r.style.display="block",r.style.visibility="visible",r.style.opacity="1"),document.querySelectorAll("input, select, textarea").forEach(s=>{s.type!=="hidden"&&(s.value="",s.checked=!1)}),console.log(" Interface reset to login state")}catch(e){console.error("Error resetting interface:",e),localStorage.clear(),sessionStorage.clear(),window.location.reload()}},async changePassword(e){try{return{success:!0,message:(await _a.post("/auth/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword})).data.message}}catch(t){throw new Error(t.response?.data?.message||"Password change failed")}},async verifyToken(e){try{const t=await _a.get("/auth/verify",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,valid:t.data.valid,user:t.data.user}}catch(t){return{success:!1,valid:!1,error:t.message}}},async refreshToken(e){try{const t=await _a.post("/auth/refresh",{refreshToken:e});return{success:!0,token:t.data.token,refreshToken:t.data.refreshToken}}catch(t){throw new Error(t.response?.data?.message||"Token refresh failed")}},async getUserProfile(){try{return{success:!0,user:(await _a.get("/auth/profile")).data.user}}catch(e){throw new Error(e.response?.data?.message||"Failed to get user profile")}},async updateUserProfile(e){try{return{success:!0,user:(await _a.put("/auth/profile",e)).data.user}}catch(t){throw new Error(t.response?.data?.message||"Failed to update user profile")}},populateStudentInfo(e){console.log("=== populateStudentInfo called ==="),console.log("Student object:",e);const t=document.getElementById("studentName");if(t){const s=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=s,console.log("Set student name to:",s)}const r=document.getElementById("studentGrade");r&&(r.textContent=e?.grade||"",console.log("Set student grade to:",e?.grade));const n=document.getElementById("studentClass");n&&(n.textContent=e?.class||"",console.log("Set student class to:",e?.class)),console.log("Student info populated successfully")},populateTeacherInfo(e){console.log("=== populateTeacherInfo called ==="),console.log("Teacher object:",e);const t=document.getElementById("teacherName");if(t){const n=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=n,console.log("Set teacher name to:",n)}const r=document.getElementById("teacherUsername");r&&(r.textContent=e?.username||"",console.log("Set teacher username to:",e?.username)),console.log("Teacher info populated successfully")},getCurrentTeacherId(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.sub?e.role==="teacher"?(console.log(`[DEBUG] Found teacher ID from JWT: ${e.sub}`),e.sub):(console.warn(`[WARN] Unsupported role for teacher function: ${e.role}`),null):(console.warn("[WARN] No teacher ID found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher ID from JWT:",e),null}},getCurrentAdmin(){const e=window.tokenManager?.getToken();if(!e)return null;const t=window.tokenManager.decodeToken(e);if(!t||t.role!=="admin")throw new Error("getCurrentAdmin() called by non-admin user");return{id:t.sub,username:t.username,role:t.role}},getCurrentTeacherUsername(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.username?(console.log(`[DEBUG] Found teacher username from JWT: ${e.username}`),e.username):(console.warn("[WARN] No teacher username found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher username from JWT:",e),null}},isAdmin(){try{const e=window.tokenManager?.getToken();if(!e)return!1;const t=window.tokenManager.decodeToken(e);return t&&t.role==="admin"}catch(e){return console.error("[ERROR] Error checking admin status:",e),!1}},getCurrentAdminId(){try{const e=this.getCurrentAdmin();return e?e.id:null}catch(e){return console.error("[ERROR] Error getting admin ID:",e),null}}},Bae=()=>{const e=Nl(),{login:t,setUserData:r,isAuthenticated:n,user:s}=Js(),[a,i]=S.useState({username:"",password:""}),[o,c]=S.useState(!1),[u,d]=S.useState(""),[f,m]=S.useState([]),[p,x]=S.useState(!1);S.useEffect(()=>{w()},[]);const w=S.useCallback(async()=>{console.log("Checking for existing JWT session...");try{(window.forceLogout||window.preventAutoLogin)&&(window.forceLogout=!1,window.preventAutoLogin=!1)}catch{}if(window.tokenManager)if(await window.tokenManager.isAuthenticated()){console.log("JWT session valid, checking user role...");try{const re=await window.tokenManager.getAccessToken(),ie=window.tokenManager.decodeToken(re);ie&&ie.role?console.log("User role from JWT:",ie.role):console.log("No valid role found in JWT, showing login")}catch(re){console.error("Error decoding JWT token:",re)}}else console.log("No valid JWT session found, showing login");else console.log("No tokenManager found, showing login")},[]),v=S.useCallback(async W=>{if(W.preventDefault(),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),M("Please wait for the logout process to complete.","warning");return}const{username:re,password:ie}=a;if(!re||!ie){d("Please enter both username and password");return}c(!0),d("");try{let xe,de;re==="admin"?(xe=await A3.adminLogin({username:re,password:ie}),de=el.ADMIN):/^\d+$/.test(re)?(xe=await A3.studentLogin({username:re,password:ie}),de=el.STUDENT):(xe=await A3.teacherLogin({username:re,password:ie}),de=el.TEACHER);let fe,H;if(xe.response?(fe=xe,H=xe.response):(fe=await xe.json(),H=xe),await C(H,de,fe)){M("Login successful!","success");try{if("credentials"in navigator&&window.PasswordCredential&&a?.username&&a?.password){const Q=new window.PasswordCredential({id:String(a.username),password:String(a.password)});await navigator.credentials.store(Q)}}catch{}try{window.forceLogout=!1,window.preventAutoLogin=!1}catch{}}}catch(xe){console.error("Login error:",xe),d("Invalid username or password")}finally{c(!1)}},[a]),C=S.useCallback(async(W,re,ie)=>{if(W.ok&&ie.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),F(),!1;try{ie.token&&(window.tokenManager.setTokens(ie.token,re),ie.refreshToken&&window.tokenManager.setRefreshToken(ie.refreshToken),console.log("JWT token stored successfully"));const xe={...ie.data,...ie,role:re};return r(xe),await k(xe),!0}catch(xe){return console.error("Error handling login response:",xe),F(xe),!1}}else return console.error("Login failed:",ie.error||"Unknown error"),d(ie.error||"Login failed. Please check your credentials."),!1},[t]),k=S.useCallback(async W=>{if(console.log("Handling post-login actions for role:",W.role),p){console.log(" Post-login already handled, skipping");return}x(!0);try{switch(W.role){case el.STUDENT:await b(W),e("/student");break;case el.TEACHER:await j(W),e("/teacher");break;case el.ADMIN:await A(W),e("/admin");break;default:console.error("Unknown user role:",W.role),F()}}catch(re){console.error("Error in post-login actions:",re),F(re)}},[e,p]);S.useEffect(()=>{n||x(!1)},[n]);const b=S.useCallback(async W=>{console.log("Populating student info:",W)},[]),j=S.useCallback(async W=>{console.log("Populating teacher info:",W)},[]),A=S.useCallback(async W=>{console.log("Populating admin info:",W)},[]),F=S.useCallback((W=null)=>{console.error("Login failure:",W),d("Login failed. Please check your credentials and try again."),D()},[]),D=S.useCallback(()=>{i({username:"",password:""}),d(""),c(!1)},[]),M=S.useCallback((W,re)=>{const ie={id:Date.now(),message:W,type:re,timestamp:new Date};m(xe=>[...xe,ie]),setTimeout(()=>{m(xe=>xe.filter(de=>de.id!==ie.id))},Ym.NOTIFICATION_DURATION)},[]),O=S.useCallback(W=>{const{name:re,value:ie}=W.target;i(xe=>({...xe,[re]:ie})),u&&d("")},[u]),L=S.useCallback(W=>{W.key==="Enter"&&!o&&v(W)},[v,o]);return l.jsxs(Nt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsxs(Nt.div,{className:"w-full max-w-md",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsxs(Nt.div,{className:"text-center mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsx(Nt.div,{className:"flex justify-center mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring"},children:l.jsx("img",{src:"/pics/logo_mws.png",alt:"MWS Logo",className:"h-16 w-16 object-contain"})}),l.jsx(Nt.h1,{className:"text-3xl font-bold text-gray-900 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.3},children:"Mathayom Watsing School"}),l.jsx(Nt.p,{className:"text-lg text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.3},children:"Test Management System"})]}),l.jsxs(Nt.div,{className:"bg-white rounded-xl shadow-2xl p-8",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,duration:.5,type:"spring"},children:[l.jsx(Nt.h2,{className:"text-2xl font-semibold text-gray-900 text-center mb-6",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"Login"}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs(Nt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9,duration:.3},children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),l.jsx(Nt.input,{type:"text",id:"username",name:"username",value:a.username,onChange:O,onKeyDown:L,placeholder:"Enter your username",required:!0,autoComplete:"username",autoCapitalize:"none",spellCheck:!1,disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),l.jsxs(Nt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.3},children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx(Nt.input,{type:"password",id:"password",name:"password",value:a.password,onChange:O,onKeyDown:L,placeholder:"Enter your password",required:!0,autoComplete:"current-password",disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed","aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02},transition:{duration:.2}})]}),l.jsx(wl,{children:u&&l.jsx(Nt.div,{id:"error-message",className:"bg-red-50 border border-red-200 rounded-lg p-3",role:"alert","aria-live":"polite",initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.3},children:l.jsx("p",{className:"text-sm text-red-600",children:u})})}),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1,duration:.3},children:l.jsx(xt,{type:"submit",variant:"primary",size:"lg",disabled:o,className:"w-full",children:o?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",className:"mr-2"}),"Logging in..."]}):"Login"})})]})]})]}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:l.jsx(wl,{children:f.map(W=>l.jsx(Nt.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,type:"spring"},children:l.jsx(Ou,{type:W.type,message:W.message,onClose:()=>m(re=>re.filter(ie=>ie.id!==W.id))})},W.id))})})]})},na={async getStudentData(){console.log("getStudentData called - loading student subjects");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-subjects")).json();if(t.success)return console.log("Student data loaded successfully:",t.subjects),t.subjects;throw new Error(t.error||"Failed to load student data")}catch(e){throw console.error("Error loading student data:",e),e}},getStudentSubjects(e){return console.log("getStudentSubjects called with subjects:",e),e.map(t=>({id:t.id||t.subject_id,name:t.subject,grade:t.grade,class:t.class,testResults:t.test_results||[]}))},async getTeacherData(){console.log("getTeacherData called - loading teacher subjects");try{const e=await this.getCurrentTeacherId();if(!e)throw new Error("No valid teacher session found");const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-subjects")).json();if(r.success)return console.log("Teacher data loaded successfully:",r.subjects),{teacher_id:e,subjects:r.subjects,hasSubjects:r.subjects.length>0};throw new Error(r.error||"Failed to load teacher data")}catch(e){throw console.error("Error loading teacher data:",e),e}},getTeacherSubjects(e){return console.log("getTeacherSubjects called with subjects:",e),e.map(t=>{let r=[];return t.classes&&Array.isArray(t.classes)&&(r=t.classes.map(n=>({grade:n.grade,class:n.class,className:n.class}))),{id:t.subject_id,name:t.subject,classes:r,assignments:t.assignments||[],description:t.description||""}})},getGradeButtons(){return console.log("getGradeButtons called"),["M1","M2","M3","M4","M5","M6"].map(t=>({id:t,name:t,classes:this.generateClassButtons(t)}))},generateClassButtons(e){const t=[];for(let r=1;r<=10;r++)t.push({id:`${e}_${r}`,name:`${e}/${r}`,grade:e,class:r});return t},async getAdminData(){console.log("getAdminData called - loading admin data");try{if(!await this.getCurrentAdminId())throw new Error("No valid admin session found");const[t,r,n]=await Promise.allSettled([this.getAllTeachers(),this.getAllSubjects(),this.getAllUsers()]);return{teachers:t.status==="fulfilled"?t.value:[],subjects:r.status==="fulfilled"?r.value:[],users:n.status==="fulfilled"?n.value:[],loadedAt:new Date().toISOString()}}catch(e){throw console.error("Error loading admin data:",e),e}},async saveTeacherSubjects(e){console.log("saveTeacherSubjects called with subjects:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-teacher-subjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subjects:e})})).json();if(r.success)return console.log("Teacher subjects saved successfully"),r;throw new Error(r.error||"Failed to save teacher subjects")}catch(t){throw console.error("Error saving teacher subjects:",t),t}},async deleteTeacherSubject(e){console.log("deleteTeacherSubject called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/delete-teacher-subject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher subject assignment deleted successfully"),r;throw new Error(r.error||"Failed to delete teacher subject assignment")}catch(t){throw console.error("Error deleting teacher subject assignment:",t),t}},async getSubjectsDropdown(){console.log("getSubjectsDropdown called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("Subjects dropdown data loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,value:r.subject_name}));throw new Error(t.error||"Failed to load subjects dropdown")}catch(e){throw console.error("Error loading subjects dropdown:",e),e}},async getGradesAndClasses(){console.log("getGradesAndClasses called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-grades-classes")).json();if(t.success)return console.log("Grades and classes loaded successfully"),t.data;throw new Error(t.message||"Failed to load grades and classes")}catch(e){throw console.error("Error loading grades and classes:",e),e}},async saveSubjectClasses(e,t){console.log("saveSubjectClasses called with subjectId:",e,"classes:",t);try{const r=await this.getCurrentTeacherId();if(!r)throw new Error("No valid teacher session found");const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-subject-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacher_id:r,subject_id:e,classes:t})})).json();if(s.success)return console.log("Subject classes saved successfully"),s;throw new Error(s.error||"Failed to save subject classes")}catch(r){throw console.error("Error saving subject classes:",r),r}},async getAllSubjects(){console.log("getAllSubjects called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("All subjects loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,description:r.description||"",created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all subjects")}catch(e){throw console.error("Error loading all subjects:",e),e}},async getSubjectsForSelection(){console.log("getSubjectsForSelection called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-subjects")).json();if(t.success)return console.log("Subjects for selection loaded successfully"),t.subjects;throw new Error(t.message||"Failed to load subjects for selection")}catch(e){throw console.error("Error loading subjects for selection:",e),e}},async addAcademicYear(e){console.log("addAcademicYear called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/add-academic-year",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Academic year added successfully"),r;throw new Error(r.error||"Failed to add academic year")}catch(t){throw console.error("Error adding academic year:",t),t}},async getAllUsers(){console.log("getAllUsers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-users")).json();if(t.success)return console.log("All users loaded successfully"),t.users.map(r=>({id:r.id,student_id:r.student_id,grade:r.grade,class:r.class,number:r.number,name:r.name,surname:r.surname,nickname:r.nickname,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all users")}catch(e){throw console.error("Error loading all users:",e),e}},async getAllTeachers(){console.log("getAllTeachers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-teachers")).json();if(t.success)return console.log("All teachers loaded successfully"),t.teachers.map(r=>({id:r.id,teacher_id:r.teacher_id,username:r.username,name:r.name,surname:r.surname,email:r.email,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all teachers")}catch(e){throw console.error("Error loading all teachers:",e),e}},async createUser(e){console.log("createUser called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("User created successfully"),r;throw new Error(r.error||"Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}},async updateUser(e,t){console.log("updateUser called with userId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-user/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("User updated successfully"),n;throw new Error(n.error||"Failed to update user")}catch(r){throw console.error("Error updating user:",r),r}},async createTeacher(e){console.log("createTeacher called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-teacher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher created successfully"),r;throw new Error(r.error||"Failed to create teacher")}catch(t){throw console.error("Error creating teacher:",t),t}},async updateTeacher(e,t){console.log("updateTeacher called with teacherId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-teacher/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("Teacher updated successfully"),n;throw new Error(n.error||"Failed to update teacher")}catch(r){throw console.error("Error updating teacher:",r),r}},async updateStudentInfo(e){console.log("updateStudentInfo called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-student-info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Student info updated successfully"),r;throw new Error(r.error||"Failed to update student info")}catch(t){throw console.error("Error updating student info:",t),t}},async changePassword(e){console.log("changePassword called");let t;if(e.studentId)t="/.netlify/functions/change-student-password";else if(e.username)t="/.netlify/functions/change-teacher-password";else throw new Error("Invalid password data: missing studentId or username");try{const n=await(await window.tokenManager.makeAuthenticatedRequest(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(n.success)return console.log("Password changed successfully"),n;throw new Error(n.error||"Failed to change password")}catch(r){throw console.error("Error changing password:",r),r}},async getCurrentTeacherId(){try{const{SecureToken:e}=await co(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>uN);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.teacher_id||r.sub||null}catch(e){return console.error("Error getting current teacher ID:",e),null}},async getCurrentAdminId(){try{const{SecureToken:e}=await co(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>uN);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.admin_id||r.sub||null}catch(e){return console.error("Error getting current admin ID:",e),null}}},KB=S.createContext(),XB=({children:e})=>{const[t,r]=S.useState(null),[n,s]=S.useState([]),[a,i]=S.useState([]),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,m]=S.useState([]),[p,x]=S.useState([]),[w,v]=S.useState([]),[C,k]=S.useState(!1),[b,j]=S.useState(null),[A,F]=S.useState(!1),[D,M]=S.useState(!1),[O,L]=S.useState(!1),[W,re]=S.useState(null),[ie,xe]=S.useState(null),[de,fe]=S.useState(null),H=S.useCallback(async()=>{try{k(!0),j(null);const Be=`student_subjects_${t?.student_id||t?.id||""}`;console.log(" UserContext: Checking cache for key:",Be);const qe=ja(Be);if(qe){console.log(" UserContext: Cache HIT! Using cached student data"),s(qe),Q(qe);return}console.log(" UserContext: Cache MISS! Fetching from API");const Ye=await na.getStudentData();if(Ye)s(Ye),Q(Ye),console.log(" UserContext: Caching student data with key:",Be),ha(Be,Ye,Aa.student_subjects);else throw new Error("No subjects data received")}catch(Ee){j(Ee.message||"Failed to load student data"),console.error("Error loading student data:",Ee)}finally{k(!1)}},[t?.student_id,t?.id]),Q=Ee=>{console.log("Displaying student subjects:",Ee),s(Ee)},U=S.useCallback(async()=>{try{if(k(!0),j(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid teacher session found in loadTeacherData, redirecting to login"),j("No valid teacher session found");return}const Be=`teacher_subjects_${t?.teacher_id||t?.id||""}`,qe=ja(Be);if(qe){s(qe),qe.length===0?sr():V(qe);return}const Ye=await na.getTeacherSubjects();if(Ye.success)s(Ye.subjects),ha(Be,Ye.subjects,Aa.teacher_subjects),Ye.subjects.length===0?sr():V(Ye.subjects);else throw new Error(Ye.message||"Failed to load teacher data")}catch(Ee){j(Ee.message||"Failed to load teacher data"),console.error("Error loading teacher data:",Ee)}finally{k(!1)}},[t?.teacher_id,t?.id]),V=Ee=>{console.log("Showing main cabinet with subjects:",Ee),s(Ee)},X=Ee=>{console.log("Displaying grade buttons:",Ee),c(Ee)},z=async()=>{try{if(k(!0),j(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid admin session found in loadAdminData, redirecting to login"),j("No valid admin session found");return}await Promise.all([_e(),At(),pe()])}catch(Ee){j(Ee.message||"Failed to load admin data"),console.error("Error loading admin data:",Ee)}finally{k(!1)}},K=Ee=>{console.log(" populateStudentInfoDirectly called with:",Ee);try{r(Ee),console.log(" Set student profile:",Ee)}catch(Be){console.error("Error populating student info:",Be)}},te=Ee=>{console.log("=== populateStudentInfo called ==="),r(Ee)},se=Ee=>{console.log("=== populateTeacherInfo called ==="),r(Ee)},pe=S.useCallback(async()=>{try{k(!0);const Ee="admin_users_",Be=ja(Ee);if(Be){d(Be),oe(Be);return}const qe=await na.getAllUsers();if(qe.success)d(qe.users),oe(qe.users),ha(Ee,qe.users,Aa.admin_users);else throw new Error(qe.message||"Failed to load users")}catch(Ee){j(Ee.message||"Failed to load users"),console.error("Error loading users:",Ee)}finally{k(!1)}},[]),oe=Ee=>{console.log("Displaying all users:",Ee),d(Ee)},ye=(Ee,Be)=>{console.log("Displaying users table:",Ee,Be),d(Ee)},we=()=>{console.log("Toggling users content")},Se=()=>{console.log("Showing add user form"),F(!0)},Ie=()=>{console.log("Hiding add user form"),F(!1)},me=Ee=>{console.log("Editing user row:",Ee);const Be=u.find(qe=>qe.id===Ee);re(Be)},_e=S.useCallback(async()=>{try{const Ee="admin_teachers_",Be=ja(Ee);if(Be){m(Be),We(Be);return}const qe=await na.getAllTeachers();if(qe.success)m(qe.teachers),We(qe.teachers),ha(Ee,qe.teachers,Aa.admin_teachers);else throw new Error(qe.message||"Failed to load teachers")}catch(Ee){j(Ee.message||"Failed to load teachers"),console.error("Error loading teachers:",Ee)}},[]),We=Ee=>{console.log("Displaying all teachers:",Ee),m(Ee)},Ue=(Ee,Be)=>{console.log("Displaying teachers table:",Ee,Be),m(Ee)},St=()=>{console.log("Toggling teachers content")},Ze=()=>{console.log("Showing add teacher form"),M(!0)},Kt=()=>{console.log("Hiding add teacher form"),M(!1)},yt=Ee=>{console.log("Editing teacher:",Ee);const Be=f.find(qe=>qe.id===Ee);xe(Be)},Rt=Ee=>{console.log("Editing teacher row:",Ee);const Be=f.find(qe=>qe.id===Ee);xe(Be)},At=S.useCallback(async()=>{try{const Ee="admin_subjects_",Be=ja(Ee);if(Be){x(Be),wt(Be);return}const qe=await na.getAllSubjects();if(qe.success)x(qe.subjects),wt(qe.subjects),ha(Ee,qe.subjects,Aa.admin_subjects);else throw new Error(qe.message||"Failed to load subjects")}catch(Ee){j(Ee.message||"Failed to load subjects"),console.error("Error loading subjects:",Ee)}},[]),wt=Ee=>{console.log("Displaying all subjects:",Ee),x(Ee)},Ft=(Ee,Be)=>{console.log("Displaying subjects table:",Ee,Be),x(Ee)},or=()=>{console.log("Toggling subjects content")},dr=()=>{console.log("Showing add subject form"),L(!0)},nr=()=>{console.log("Hiding add subject form"),L(!1)},Xe=Ee=>{console.log("Editing subject row:",Ee);const Be=p.find(qe=>qe.id===Ee);fe(Be)},Qe=Ee=>{console.log("Displaying academic year:",Ee),v(Ee)},ut=()=>{console.log("Showing add academic year form")},mt=()=>{console.log("Hiding add academic year form")},ht=Ee=>{console.log("Handling add academic year:",Ee)},Ot=()=>{console.log("Toggling academic year content")},nt=()=>{console.log("Showing academic year editor")},sr=()=>{console.log("Showing subject selection")},kr=()=>{console.log("Showing main cabinet")},Er=Ee=>{r(Be=>({...Be,...Ee}))},Gr=()=>{r(null),s([]),i([]),c([]),d([]),m([]),x([]),v([]),j(null)},Ar=S.useCallback(Ee=>{Gr(),Ee&&Ck(Ee)},[]),vr={userProfile:t,userSubjects:n,userClasses:a,userGrades:o,allUsers:u,allTeachers:f,allSubjects:p,academicYears:w,isLoading:C,error:b,showUserForm:A,showTeacherForm:D,showSubjectForm:O,editingUser:W,editingTeacher:ie,editingSubject:de,loadStudentData:H,displayStudentSubjects:Q,populateStudentInfoDirectly:K,populateStudentInfo:te,loadTeacherData:U,showMainCabinetWithSubjects:V,displayGradeButtons:X,populateTeacherInfo:se,showSubjectSelection:sr,showMainCabinet:kr,loadAdminData:z,getAllUsers:pe,displayAllUsers:oe,displayUsersTable:ye,toggleUsersContent:we,showAddUserForm:Se,hideAddUserForm:Ie,editUserRow:me,loadAllTeachers:_e,displayAllTeachers:We,displayTeachersTable:Ue,toggleTeachersContent:St,showAddTeacherForm:Ze,hideAddTeacherForm:Kt,editTeacher:yt,editTeacherRow:Rt,loadAllSubjects:At,displayAllSubjects:wt,displaySubjectsTable:Ft,toggleSubjectsContent:or,showAddSubjectForm:dr,hideAddSubjectForm:nr,editSubjectRow:Xe,displayAcademicYear:Qe,showAddAcademicYearForm:ut,hideAddAcademicYearForm:mt,handleAddAcademicYear:ht,toggleAcademicYearContent:Ot,showAcademicYearEditor:nt,updateUserProfile:Er,clearUserData:Gr,clearUserDataWithCache:Ar,setUserProfile:r,setUserSubjects:s,setUserClasses:i,setUserGrades:c,setAllUsers:d,setAllTeachers:m,setAllSubjects:x,setAcademicYears:v,setError:j};return l.jsx(KB.Provider,{value:vr,children:e})},g4=()=>{const e=S.useContext(KB);if(!e)throw new Error("useUser must be used within a UserProvider");return e},Tx={STUDENT_LOGIN:"/.netlify/functions/student-login",TEACHER_LOGIN:"/.netlify/functions/teacher-login",ADMIN_LOGIN:"/.netlify/functions/admin-login",CHANGE_PASSWORD:"/.netlify/functions/change-password",GET_TEST_QUESTIONS:"/.netlify/functions/get-test-questions",SUBMIT_MULTIPLE_CHOICE_TEST:"/.netlify/functions/submit-multiple-choice-test",SUBMIT_TRUE_FALSE_TEST:"/.netlify/functions/submit-true-false-test",SUBMIT_INPUT_TEST:"/.netlify/functions/submit-input-test",SUBMIT_MATCHING_TEST:"/.netlify/functions/submit-matching-test",SUBMIT_DRAWING_TEST:"/.netlify/functions/submit-drawing-test",GET_STUDENT_SUBJECTS:"/.netlify/functions/get-student-subjects",GET_TEACHER_SUBJECTS:"/.netlify/functions/get-teacher-subjects",GET_ALL_USERS:"/.netlify/functions/get-all-users",GET_ALL_TEACHERS:"/.netlify/functions/get-all-teachers",GET_ALL_SUBJECTS:"/.netlify/functions/get-all-subjects",GET_ACADEMIC_YEAR:"/.netlify/functions/get-academic-year",SAVE_MULTIPLE_CHOICE_TEST:"/.netlify/functions/save-multiple-choice-test",SAVE_TRUE_FALSE_TEST:"/.netlify/functions/save-true-false-test",SAVE_INPUT_TEST:"/.netlify/functions/save-input-test",SAVE_MATCHING_TEST:"/.netlify/functions/save-matching-test",SAVE_DRAWING_TEST:"/.netlify/functions/save-drawing-test",UPDATE_DRAWING_TEST_SCORE:"/.netlify/functions/update-drawing-test-score",UPDATE_SPEAKING_TEST_SCORE:"/.netlify/functions/update-speaking-test-score",ASSIGN_TEST_TO_CLASSES:"/.netlify/functions/assign-test-to-classes",GET_TEACHER_ACTIVE_TESTS:"/.netlify/functions/get-teacher-active-tests",GET_STUDENT_ACTIVE_TESTS:"/.netlify/functions/get-student-active-tests"},_s={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false",INPUT:"input",MATCHING:"matching_type",WORD_MATCHING:"word_matching",DRAWING:"drawing",FILL_BLANKS:"fill_blanks"},el={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"};Array.from({length:10},(e,t)=>t+1);const Ym={NOTIFICATION_DURATION:3e3},Jf=(e,t,r)=>{if(!e||!Array.isArray(e)||e.length===0)return{score:0,total:0,percentage:0};let n=0;return e.forEach((s,a)=>{const i=Array.isArray(t)?t[a]:t[String(s.question_id||s.id||a)];i!=null&&Sp(s,i,r)&&n++}),{score:n,total:e.length,percentage:Math.round(n/e.length*100)}},jy=(e,t)=>{console.log(" Getting correct answer for question:",e,"testType:",t);let r="";switch(t){case _s.TRUE_FALSE:r=e.correct_answer?"true":"false",console.log(" TRUE_FALSE correct_answer from question:",r,typeof r);break;case _s.MULTIPLE_CHOICE:const n=e.correct_answer.charCodeAt(0)-65,s=`option_${String.fromCharCode(97+n)}`,a=e[s];a?r=a:r=`Option ${e.correct_answer}`;break;case _s.INPUT:e.correct_answers&&Array.isArray(e.correct_answers)?r=e.correct_answers.join(", "):r=e.correct_answer||"Unknown";break;case _s.MATCHING:r=e.correct_answer||e.answer;break;case _s.WORD_MATCHING:r=e.correct_answer||e.answer;break;case _s.DRAWING:r="Drawing required";break;case _s.FILL_BLANKS:e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?r=e.correct_answers[0]:r=e.correct_answer||"Unknown";break;default:r="Unknown"}return console.log(" Correct answer:",r),r},Sp=(e,t,r)=>{if(console.log("[DEBUG] checkAnswerCorrectness called for question:",e,"studentAnswer:",t,"testType:",r),!t||t==="")return console.log("[DEBUG] No student answer provided"),!1;let n=!1;switch(r){case _s.TRUE_FALSE:n=t.toLowerCase()==="true"===e.correct_answer;break;case _s.MULTIPLE_CHOICE:let a="";if(typeof t=="string"){const o=t.trim();if(/^[a-z]$/i.test(o))a=o.toUpperCase();else if(/^\d+$/.test(o)){const c=parseInt(o,10),u=c>=0?c:NaN;Number.isNaN(u)||(a=String.fromCharCode(65+u))}}else if(typeof t=="number"){const o=t;Number.isNaN(o)||(a=String.fromCharCode(65+o))}n=a!==""&&a===String(e.correct_answer||"").toUpperCase();break;case _s.INPUT:if(e.correct_answers&&Array.isArray(e.correct_answers)){const o=t.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();n=e.correct_answers.some(c=>{const u=c.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1})}else{const o=t.toLowerCase().trim(),c=e.correct_answer.toLowerCase().trim();o===c?n=!0:c&&o.includes(c)?c.length===1?n=o.startsWith(c)||o.endsWith(c):n=!0:n=!1}break;case _s.MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case _s.WORD_MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case _s.DRAWING:console.warn("Drawing tests should not be auto-scored!"),n=!1;break;case _s.FILL_BLANKS:const i=e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?e.correct_answers[0]:e.correct_answer;if(i&&t){let o="";if(typeof t=="string"){const c=t.trim();if(/^[a-z]$/i.test(c))o=c.toUpperCase();else if(/^\d+$/.test(c)){const u=parseInt(c,10),d=u>=0?u:NaN;Number.isNaN(d)||(o=String.fromCharCode(65+d))}}else if(typeof t=="number"){const c=t;Number.isNaN(c)||(o=String.fromCharCode(65+c))}n=o!==""&&o===String(i||"").toUpperCase()}break;default:console.warn(`[WARN] Unknown test type for answer checking: ${r}`),n=!1}return console.log(`[DEBUG] Answer correctness: ${n}`),n};class $ae{constructor(){this.academicCalendar=null,this.loaded=!1}async loadAcademicCalendar(){if(this.loaded)return this.academicCalendar;try{const t=async n=>{const s=await fetch(n,{headers:{Accept:"application/json"},credentials:"include"}),a=s.headers&&s.headers.get&&s.headers.get("content-type")||"";if(!s.ok)throw new Error(`HTTP ${s.status}`);if(!a.includes("application/json"))throw new Error("Non-JSON response");return await s.json()};let r=null;if(r=await t("/academic_year.json"),!Array.isArray(r))throw new Error("Invalid academic calendar format");return this.academicCalendar=r,this.loaded=!0,console.log(" Academic calendar loaded:",this.academicCalendar.length,"terms"),this.academicCalendar}catch(t){return console.error(" Error loading academic calendar:",t),null}}getCurrentTerm(){if(!this.academicCalendar)return null;const t=new Date;return this.academicCalendar.find(n=>{const s=new Date(n.start_date),a=new Date(n.end_date);return t>=s&&t<=a})}getCurrentSemester(){const t=this.getCurrentTerm();if(!t)return null;const r=t.semester,n=this.academicCalendar.filter(s=>s.semester===r&&s.academic_year===t.academic_year);return{semester:r,currentTerm:t,allTerms:n}}getCurrentAcademicPeriodId(){return this.getCurrentTerm()?.id||null}getSemesterTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.semester===t):[]}getAcademicYearTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.academic_year===t):[]}getCurrentSemesterWithTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,allTerms:s,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getCurrentSemesterTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getTermById(t){return this.academicCalendar?this.academicCalendar.find(r=>r.id===t):null}isCurrentTerm(t){return this.getCurrentTerm()?.id===t}getAcademicYears(){return this.academicCalendar?[...new Set(this.academicCalendar.map(r=>r.academic_year))].sort():[]}getAcademicYearSemesterTerms(t,r){return this.academicCalendar?this.academicCalendar.filter(n=>n.academic_year===t&&n.semester===r):[]}}const Iu=new $ae,p4=Object.freeze(Object.defineProperty({__proto__:null,academicCalendarService:Iu},Symbol.toStringTag,{value:"Module"})),Kn={async getTestInfo(e,t){console.log(`[DEBUG] getTestInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test info data received:",s),s.success)return console.log("[DEBUG] Test info retrieved successfully"),s.test_info;throw new Error(s.error||"Failed to get test info")}catch(r){throw console.error("[ERROR] Failed to get test info:",r),r}},async getTestQuestions(e,t){console.log(`[DEBUG] getTestQuestions called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions data received:",s),s.success)return console.log("[DEBUG] Test questions retrieved successfully"),s.questions;throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions:",r),r}},async getTestQuestionsWithInfo(e,t){console.log(`[DEBUG] getTestQuestionsWithInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions with info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions with info data received:",s),s.success)return console.log("[DEBUG] Test questions with info retrieved successfully"),{questions:s.questions,testInfo:s.test_info};throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions with info:",r),r}},async getActiveTests(){console.log("getActiveTests called - extracting studentId from JWT token");try{const e="/.netlify/functions/get-student-active-tests";console.log("[DEBUG] Fetching active tests from:",e);const t=await window.tokenManager.makeAuthenticatedRequest(e);if(console.log("[DEBUG] Response status:",t.status),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Active tests data received:",r),r.success)return console.log("[DEBUG] Active tests retrieved successfully"),r.tests;throw new Error(r.error||"Failed to get active tests")}catch(e){throw console.error("[ERROR] Failed to get active tests:",e),e}},async getTeacherTests(e=!1){console.log("getTeacherTests called - extracting teacherId from JWT token");try{const t="/.netlify/functions/get-teacher-active-tests",r=e?`${t}?ts=${Date.now()}`:t;console.log("[DEBUG] Fetching teacher tests from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Teacher tests data received:",s),s.success)return console.log("[DEBUG] Teacher tests retrieved successfully"),s.tests;throw new Error(s.error||"Failed to get teacher tests")}catch(t){throw console.error("[ERROR] Failed to get teacher tests:",t),t}},async submitTest(e,t,r,n={},s=null){console.log("Submitting test:",{testType:e,testId:t});try{if(Object.keys(r).length===0)throw new Error("Please answer at least one question before submitting.");let a;try{const j=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`)).json();if(j.success)a=j.test_info;else throw new Error("Failed to get test information")}catch(b){console.error("Error getting test info:",b);const j=await this.getTestQuestions(e,t);a={test_name:`Test ${t}`,num_questions:j.length}}const i=await this.getTestQuestions(e,t);let o,c;if(e==="drawing")o=null,c=null;else{const b=n?.answers_by_id?n.answers_by_id:r;o=Jf(i,b,e).score,c=a.num_questions}const u=this.transformAnswersForSubmission(r,e),d=a.teacher_id||null,f=a.subject_id||null,m=s?.student_id||s?.id||(window.tokenManager?.getCurrentUser?window.tokenManager.getCurrentUser()?.student_id||window.tokenManager.getCurrentUser()?.id:null);await Iu.loadAcademicCalendar();const x=Iu.getCurrentTerm()?.id;if(!x)throw new Error("No current academic period found");const w={test_id:t,test_name:a.test_name,test_type:e,teacher_id:d,subject_id:f,student_id:m,academic_period_id:x,answers:u,score:o,maxScore:c,time_taken:n.time_taken||null,started_at:n.started_at||null,submitted_at:n.submitted_at||new Date().toISOString(),caught_cheating:n.caught_cheating||!1,visibility_change_times:n.visibility_change_times||0,answers_by_id:n.answers_by_id||null,question_order:n.question_order||null,retest_assignment_id:n.retest_assignment_id||null,parent_test_id:n.parent_test_id||t};console.log(" testService retest_assignment_id:",n.retest_assignment_id),console.log(" testService timingData:",n),console.log(" testService commonData.retest_assignment_id:",w.retest_assignment_id);let v;switch(e){case"multiple_choice":v="/.netlify/functions/submit-multiple-choice-test";break;case"true_false":v="/.netlify/functions/submit-true-false-test";break;case"input":v="/.netlify/functions/submit-input-test";break;case"matching_type":v="/.netlify/functions/submit-matching-type-test";break;case"word_matching":v="/.netlify/functions/submit-word-matching-test";break;case"drawing":v="/.netlify/functions/submit-drawing-test";break;case"fill_blanks":v="/.netlify/functions/submit-fill-blanks-test";break;default:throw new Error(`Unsupported test type: ${e}`)}console.log("Submitting to:",v),console.log("Submission data:",w),console.log("Submission data JSON:",JSON.stringify(w,null,2)),console.log(" Final submission retest_assignment_id:",w.retest_assignment_id);const C=await window.tokenManager.makeAuthenticatedRequest(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const k=await C.json();if(console.log("Test submission result:",k),k.success)return this.clearTestProgress(e,t),{success:!0,score:o,maxScore:c,result:k};throw new Error(k.error||"Failed to submit test")}catch(a){throw console.error("Error submitting test:",a),a}},async createTest(e){try{return(await _a.post("/tests/create",e)).data}catch(t){throw new Error(t.message||"Failed to create test")}},async updateTest(e,t,r){try{return(await _a.put(`/tests/${e}/${t}`,r)).data}catch(n){throw new Error(n.message||"Failed to update test")}},async deleteTest(e,t){try{return(await _a.delete(`/tests/${e}/${t}`)).data}catch(r){throw new Error(r.message||"Failed to delete test")}},async duplicateTest(e,t){try{return(await _a.post(`/tests/${e}/${t}/duplicate`)).data}catch(r){throw new Error(r.message||"Failed to duplicate test")}},async publishTest(e,t){try{return(await _a.post(`/tests/${e}/${t}/publish`)).data}catch(r){throw new Error(r.message||"Failed to publish test")}},async unpublishTest(e,t){try{return(await _a.post(`/tests/${e}/${t}/unpublish`)).data}catch(r){throw new Error(r.message||"Failed to unpublish test")}},async removeClassAssignment(e,t,r){try{return(await _a.delete(`/tests/${e}/${t}/assignments/${r}`)).data}catch(n){throw new Error(n.message||"Failed to remove class assignment")}},async getTestStatistics(e,t){try{return(await _a.get(`/tests/${e}/${t}/statistics`)).data}catch(r){throw new Error(r.message||"Failed to get test statistics")}},async exportTest(e,t,r="json"){try{return(await _a.get(`/tests/${e}/${t}/export?format=${r}`)).data}catch(n){throw new Error(n.message||"Failed to export test")}},async importTest(e,t){try{return(await _a.uploadFile(`/tests/import?type=${t}`,e)).data}catch(r){throw new Error(r.message||"Failed to import test")}},async getTestResults(e,t){try{return(await _a.get(`/tests/${e}/${t}/results`)).data}catch(r){throw new Error(r.message||"Failed to get test results")}},async getStudentTestResults(){try{console.log("[DEBUG] Fetching student test results from: /.netlify/functions/get-student-test-results");const e=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-test-results");if(console.log("[DEBUG] Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(console.log("[DEBUG] Student test results data received:",t),t.success)return console.log("[DEBUG] Student test results retrieved successfully"),t;throw new Error(t.error||"Failed to get student test results")}catch(e){throw console.error("[ERROR] Failed to get student test results:",e),new Error(e.message||"Failed to get student test results")}},async getClassResults(e,t,r){try{return(await _a.get(`/tests/class-results/${e}/${t}/${r}`)).data}catch(n){throw new Error(n.message||"Failed to get class results")}},async saveTestProgress(e,t,r){try{return(await _a.post(`/tests/${e}/${t}/progress`,{progress:r})).data}catch(n){throw new Error(n.message||"Failed to save test progress")}},async getTestProgress(e,t){try{return(await _a.get(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to get test progress")}},async clearTestProgress(e,t){try{return(await _a.delete(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to clear test progress")}},async validateTestData(e){try{return(await _a.post("/tests/validate",e)).data}catch(t){throw new Error(t.message||"Failed to validate test data")}},async getTestPreview(e,t){try{return(await _a.get(`/tests/${e}/${t}/preview`)).data}catch(r){throw new Error(r.message||"Failed to get test preview")}},isAnswerCorrect(e,t,r,n){switch(n){case"multiple_choice":return String.fromCharCode(65+parseInt(t))===r.correct_answer;case"true_false":return t.toLowerCase()==="true"===r.correct_answer;case"input":const i=r.correct_answers||[],o=t.toLowerCase().trim();return i.some(c=>{const u=c.toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1});case"matching_type":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"word_matching":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"drawing":return t&&t!=="No answer";default:return!1}},transformAnswersForSubmission(e,t){switch(t){case"multiple_choice":return e;case"true_false":return e;case"input":return e;case"matching_type":return e;case"word_matching":return e;case"drawing":if(Array.isArray(e)&&e.length>0)try{const r=e[0];return typeof r=="string"&&r.startsWith("[")?JSON.parse(r):e}catch(r){return console.warn("Failed to parse drawing answers:",r),e}return e;default:return e}},async markTestCompleted(e,t){try{console.log(`[DEBUG] markTestCompleted called with testType: ${e}, testId: ${t}`);const r=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/mark-test-completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const n=await r.json();if(console.log("[DEBUG] Mark test completed response:",n),n.success)return console.log(`Test ${e}_${t} marked as completed successfully`),{success:!0,message:n.message};throw new Error(n.error||"Failed to mark test as completed")}catch(r){throw console.error("Error marking test completed:",r),r}},clearTestProgress(e,t){try{const r=`test_progress_${e}_${t}`;localStorage.removeItem(r),console.log(`Test progress cleared for ${e}_${t}`)}catch(r){console.error("Error clearing test progress:",r)}},async saveMultipleChoiceTest(e){console.log("[DEBUG] saveMultipleChoiceTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-multiple-choice-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save multiple choice test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving multiple choice test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveTrueFalseTest(e){console.log("[DEBUG] saveTrueFalseTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-true-false-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save true/false test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving true/false test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveInputTest(e){console.log("[DEBUG] saveInputTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-input-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save input test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving input test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveMatchingTest(e){console.log("[DEBUG] saveMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"matching_type",num_questions:e.num_blocks})})).json();return console.log("[DEBUG] Save matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveWordMatchingTest(e){console.log("[DEBUG] saveWordMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"word_matching"})})).json();return console.log("[DEBUG] Save word matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving word matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveDrawingTest(e){console.log("[DEBUG] saveDrawingTest called with:",e);try{const t={...e,test_type:"drawing"},n=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();return console.log("[DEBUG] Save drawing test response:",n),n.success?{success:!0,data:{test_id:n.test_id}}:{success:!1,message:n.message||"Failed to save test"}}catch(t){return console.error("Error saving drawing test:",t),{success:!1,message:"Error saving test: "+t.message}}},async getDrawingTest(e){console.log("[DEBUG] getDrawingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-drawing-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get drawing test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting drawing test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitDrawingTest(e,t,r,n){console.log("[DEBUG] submitDrawingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-drawing-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit drawing test response:",a),a.success?{success:!0,data:a.data}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting drawing test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async updateDrawingTestScore(e,t,r){console.log("[DEBUG] updateDrawingTestScore called with:",{resultId:e,score:t,maxScore:r});try{const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-drawing-test-score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result_id:e,score:t,max_score:r})})).json();return console.log("[DEBUG] Update drawing test score response:",s),s.success?{success:!0,data:s.data}:{success:!1,message:s.message||"Failed to update score"}}catch(n){return console.error("Error updating drawing test score:",n),{success:!1,message:"Error updating score: "+n.message}}},async getWordMatchingTest(e){console.log("[DEBUG] getWordMatchingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-word-matching-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get word matching test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting word matching test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitWordMatchingTest(e,t,r,n){console.log("[DEBUG] submitWordMatchingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit word matching test response:",a),a.success?{success:!0,result:a.result}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting word matching test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async assignTestToClasses(e){console.log("[DEBUG] assignTestToClasses called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save test with assignments response:",r),r.success?{success:!0,message:"Test assigned successfully"}:{success:!1,message:r.message||"Failed to assign test"}}catch(t){return console.error("Error assigning test to classes:",t),{success:!1,message:"Error assigning test: "+t.message}}},async removeClassAssignment(e){console.log("[DEBUG] removeClassAssignment called with assignmentId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/remove-class-assignment?assignment_id=${e}`,{method:"DELETE"})).json();return console.log("[DEBUG] Remove class assignment response:",r),r.success?{success:!0,message:"Assignment removed successfully"}:{success:!1,message:r.message||"Failed to remove assignment"}}catch(t){return console.error("Error removing class assignment:",t),{success:!1,message:"Error removing assignment: "+t.message}}}},YB=S.createContext(),JB=({children:e})=>{const[t,r]=S.useState(null),[n,s]=S.useState([]),[a,i]=S.useState({}),[o,c]=S.useState({}),[u,d]=S.useState(!1),[f,m]=S.useState(null),[p,x]=S.useState([]),[w,v]=S.useState(!1),[C,k]=S.useState(null),[b,j]=S.useState({isOpen:!1,testType:null,testId:null,testName:null,questions:[]}),[A,F]=S.useState(null),[D,M]=S.useState(0),{getItem:O,setItem:L,removeItem:W}=VB();S.useEffect(()=>{let Ee;return u&&A&&(Ee=setInterval(()=>{const Be=Math.floor((Date.now()-A)/1e3);M(Be)},1e3)),()=>{Ee&&clearInterval(Ee)}},[u,A]);const re=async(Ee,Be)=>{try{v(!0),k(null),console.log(`[DEBUG] loadTestForPage called with testType: ${Ee}, testId: ${Be}`);const qe=await Kn.getTestInfo(Ee,Be);console.log("[DEBUG] Test info retrieved:",qe);const Ye=await Kn.getTestQuestions(Ee,Be);console.log("[DEBUG] Test questions retrieved:",Ye),r({...qe,testType:Ee,testId:Be}),s(Ye),d(!0),F(Date.now()),M(0),ie(Ee,Be),console.log("[DEBUG] Test loaded successfully")}catch(qe){k(qe.message||"Failed to load test"),console.error("Error loading test:",qe)}finally{v(!1)}},ie=(Ee,Be)=>{try{const qe=`test_progress_${Ee}_${Be}`,Ye=O(qe);Ye&&(i(Ye.answers||{}),c(Ye.progress||{}))}catch(qe){console.error("Error loading saved progress:",qe)}},xe=(Ee,Be,qe,Ye)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}const ze=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${Ee}_${Be}`,it={...a,[qe]:Ye},Le={...o,[qe]:{answered:!0,timestamp:Date.now()}};i(it),c(Le),L(ze,{answers:it,progress:Le,lastSaved:Date.now()}),console.log(`Saved progress for question ${qe}:`,Ye)}catch(Lt){console.error("Error saving test progress:",Lt)}},de=(Ee,Be,qe)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated())return console.warn("[WARN] Cannot get progress: No valid JWT token"),null;const Lt=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${Ee}_${Be}`;return O(Lt)?.answers?.[qe]||null}catch(Ye){return console.error("Error getting test progress:",Ye),null}},fe=(Ee,Be)=>{try{if(console.log(`[DEBUG] clearTestProgress called with testType: ${Ee}, testId: ${Be}`),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const qe=window.tokenManager?.getDecodedToken()?.sub||"unknown",Ye=`test_progress_${qe}_${Ee}_${Be}`;console.log(`[DEBUG] Removing localStorage key: ${Ye}`);const Lt=O(Ye)!==null;W(Ye),i({}),c({});for(let ze=0;ze<localStorage.length;ze++){const it=localStorage.key(ze);it&&it.startsWith(`test_progress_${qe}_${Ee}_${Be}_`)&&(localStorage.removeItem(it),console.log(`[DEBUG] Cleared individual question key: ${it}`))}console.log(Lt?`[DEBUG] Progress cleared for test ${Ee}_${Be}`:`[DEBUG] No progress found to clear for test ${Ee}_${Be}`)}catch(qe){console.error("Error clearing test progress:",qe)}},H=async(Ee,Be,qe="")=>{try{v(!0),k(null),console.log("Submitting test:",{testType:Ee,testId:Be});const Ye=pe(Ee,Be);if(Object.keys(Ye).length===0){k("Please answer at least one question before submitting.");return}let Lt;try{Lt=await Kn.getTestInfo(Ee,Be)}catch(Xt){console.error("Error getting test info:",Xt);const Yt=await Kn.getTestQuestions(Ee,Be);Lt={test_name:`Test ${Be}`,num_questions:Yt.length}}const ze=await Kn.getTestQuestions(Ee,Be),it=Jf(ze,Ye,Ee),Le=Lt.num_questions,st=ye(Ye,Ee),rt={test_id:Be,test_name:Lt.test_name,score:it,maxScore:Le,answers:st},qt=await Kn.submitTest(Ee,Be,rt);if(qt.success){if(m(qt.result),X(Ee,Be,qe),fe(Ee,Be),qe){const Xt=`student_results_table_${qe}`;Ee!=="drawing"?(console.log(" TestContext: Caching test results after submission with key:",Xt),ha(Xt,qt.result,Aa.student_results_table)):console.log(" TestContext: Skipping cache for drawing test submission (teacher-scored).")}return qe&&Ip(qe,Ee,Be),d(!1),qt.results}else throw new Error(qt.message||"Test submission failed")}catch(Ye){throw k(Ye.message||"Failed to submit test"),Ye}finally{v(!1)}},Q=(Ee,Be,qe)=>{m({testType:Ee,testId:Be,answers:qe}),d(!1)},U=()=>{r(null),s([]),i({}),c({}),d(!1),m(null),k(null),F(null),M(0)},V=(Ee,Be,qe="")=>{try{const Ye=`test_completed_${qe}_${Ee}_${Be}`;return O(Ye)===!0}catch(Ye){return console.error("Error checking test completion:",Ye),!1}},X=(Ee,Be,qe="")=>{try{const Ye=`test_completed_${qe}_${Ee}_${Be}`;L(Ye,!0)}catch(Ye){console.error("Error marking test completed:",Ye)}},z=Ee=>Object.keys(a).length,K=()=>{const Ee=z(t?.testType),Be=n.length;return{canSubmit:Ee===Be,answeredCount:Ee,totalQuestions:Be}},te=()=>{t&&fe(t.testType,t.testId),U()},se=(Ee="")=>{try{const Be=`student_results_table_${Ee}`;console.log(" TestContext: Clearing test results cache:",Be),localStorage.removeItem(Be),console.log(" TestContext: Test results cache cleared")}catch(Be){console.error("Error clearing test results cache:",Be)}},pe=(Ee,Be)=>({...a}),oe=(Ee,Be,qe=null)=>{try{if(!Ee)return"No answer";switch(Be){case"true_false":return Ee?"True":"False";case"multiple_choice":if(qe&&typeof Ee=="string"&&!isNaN(parseInt(Ee))){const Ye=parseInt(Ee),Lt=`option_${String.fromCharCode(97+Ye)}`,ze=qe[Lt];if(ze)return ze}return String(Ee).toUpperCase();case"input":return String(Ee);case"matching_type":return typeof Ee=="object"?Object.entries(Ee).map(([Ye,Lt])=>`${Ye}  ${Lt}`).join(", "):String(Ee);case"word_matching":return typeof Ee=="object"?Object.entries(Ee).map(([Ye,Lt])=>`${Ye}  ${Lt}`).join(", "):String(Ee);case"drawing":return"Drawing submitted";default:return String(Ee)}}catch(Ye){return console.error("Error formatting student answer:",Ye),"Error displaying answer"}},ye=(Ee,Be)=>{try{if(!Ee||typeof Ee!="object")return{};const qe={};return Object.entries(Ee).forEach(([Ye,Lt])=>{if(Lt!=null)switch(Be){case"true_false":qe[Ye]=!!Lt;break;case"multiple_choice":qe[Ye]=String(Lt).toUpperCase();break;case"input":qe[Ye]=String(Lt).trim();break;case"matching_type":typeof Lt=="object"?qe[Ye]=Lt:qe[Ye]=String(Lt);break;case"word_matching":typeof Lt=="object"?qe[Ye]=Lt:qe[Ye]=String(Lt);break;case"drawing":qe[Ye]=Lt;break;default:qe[Ye]=Lt}}),qe}catch(qe){return console.error("Error transforming answers for submission:",qe),Ee||{}}},we=S.useCallback(async(Ee="")=>{try{v(!0);const Be=`student_active_tests_${Ee}`,qe=ja(Be);if(qe)return x(qe),qe;const Ye=await Kn.getActiveTests();return x(Ye),ha(Be,Ye,Aa.student_active_tests),Ye}catch(Be){return k(Be.message||"Failed to load active tests"),x([]),[]}finally{v(!1)}},[]),Se=async()=>{try{return v(!0),await Kn.getTeacherTests()}catch(Ee){return k(Ee.message||"Failed to load teacher tests"),[]}finally{v(!1)}},Ie=async Ee=>{try{return v(!0),await Kn.createTest(Ee)}catch(Be){throw k(Be.message||"Failed to create test"),Be}finally{v(!1)}},me=async(Ee,Be)=>{try{return v(!0),await Kn.deleteTest(Ee,Be)}catch(qe){throw k(qe.message||"Failed to delete test"),qe}finally{v(!1)}},_e=async(Ee,Be)=>{try{return await Kn.getTestInfo(Ee,Be)}catch(qe){throw console.error("Error getting test info:",qe),qe}},We=async(Ee,Be)=>{try{return await Kn.getTestQuestions(Ee,Be)}catch(qe){throw console.error("Error getting test questions:",qe),qe}},Ue=async(Ee,Be,qe)=>{try{console.log("Showing test results:",{testType:Ee,testId:Be,studentAnswers:qe});const Ye=await _e(Ee,Be),Lt=await We(Ee,Be);Kt(Ye,Lt,Ee,qe),d(!1),console.log("Test results displayed successfully")}catch(Ye){console.error("Error showing test results:",Ye),k("Failed to display test results"),m({testType:Ee,testId:Be,answers:qe,showResults:!0,error:"Could not load detailed results"}),d(!1)}},St=async(Ee,Be,qe)=>{try{v(!0);const Ye=await _e(Ee,Be),Lt=await We(Ee,Be);Kt(Ye,Lt,Ee,qe)}catch(Ye){k(Ye.message||"Failed to load test results")}finally{v(!1)}},Ze=S.useCallback(async(Ee="")=>{try{v(!0);const Be=`student_results_table_${Ee}`;console.log(" TestContext: Checking cache for key:",Be);const qe=ja(Be);if(qe)return console.log(" TestContext: Cache HIT! Using cached test results"),m(qe),qe;console.log(" TestContext: Cache MISS! Fetching from API");const Ye=await Kn.getStudentTestResults();return console.log(" TestContext: Test results loaded:",Ye),console.log(" TestContext: Results data:",Ye?.results||Ye),console.log(" TestContext: Results length:",Ye?.results?.length||0),m(Ye),console.log(" TestContext: Caching test results with key:",Be),console.log(" TestContext: Results being cached:",Ye),console.log(" TestContext: Results.results being cached:",Ye.results),ha(Be,Ye,Aa.student_results_table),Ye}catch(Be){throw console.error("Error loading test results:",Be),k(Be.message||"Failed to load test results"),Be}finally{v(!1)}},[]),Kt=(Ee,Be,qe,Ye)=>{try{console.log("Displaying test results:",{testInfo:Ee,questions:Be,testType:qe,studentAnswers:Ye});const Lt=Jf(Be,Ye,qe),ze=Ee?.num_questions||Be?.length||0,it=ze>0?Math.round(Lt/ze*100):0,Le=it>=60,st=Be.map((rt,qt)=>{const Xt=rt.question_id||rt.id,Yt=Ye[Xt],Z=Sp(rt,Yt,qe);return{questionNumber:qt+1,question:rt.question||rt.question_text,userAnswer:oe(Yt,qe),correctAnswer:jy(rt,qe),isCorrect:Z,questionType:qe}});m({testInfo:Ee,questions:Be,testType:qe,studentAnswers:Ye,showResults:!0,score:Lt,totalQuestions:ze,percentage:it,passed:Le,questionAnalysis:st,timestamp:new Date().toISOString()}),c(rt=>({...rt,score:Lt,totalQuestions:ze,percentage:it,passed:Le,lastUpdated:Date.now()})),yt(),console.log(`Test results displayed: ${Lt}/${ze} (${it}%) - ${Le?"PASSED":"FAILED"}`)}catch(Lt){console.error("Error displaying test results:",Lt),k("Failed to display test results")}},yt=S.useCallback(()=>{try{console.log("Setting up test results page event listeners");const Ee=ze=>{if(ze.key==="Escape"&&te(),ze.ctrlKey&&ze.key==="p"&&(ze.preventDefault(),window.print()),ze.key==="Enter"&&f&&!f.passed){const it=document.getElementById("retake-test-button");it&&it.click()}},Be=()=>{window.print()},qe=()=>{if(f){const ze=`Test: ${f.testInfo?.test_name||"Test"}
Score: ${f.score}/${f.totalQuestions} (${f.percentage}%)
Status: ${f.passed?"PASSED":"FAILED"}
Completed: ${new Date(f.timestamp).toLocaleString()}`;navigator.clipboard.writeText(ze).then(()=>{console.log("Results copied to clipboard")}).catch(it=>{console.error("Failed to copy results:",it)})}};document.addEventListener("keydown",Ee);const Ye=document.getElementById("print-results");Ye&&Ye.addEventListener("click",Be);const Lt=document.getElementById("copy-results");return Lt&&Lt.addEventListener("click",qe),()=>{document.removeEventListener("keydown",Ee),Ye&&Ye.removeEventListener("click",Be),Lt&&Lt.removeEventListener("click",qe)}}catch(Ee){console.error("Error setting up test results page event listeners:",Ee)}},[te,f]),Rt=async(Ee,Be,qe)=>{try{v(!0),k(null),console.log("Viewing test details:",{testType:Ee,testId:Be,testName:qe}),j({isOpen:!0,testType:Ee,testId:Be,testName:qe,questions:[],isLoading:!0});const Ye=await Kn.getTestQuestions(Ee,Be);Ye&&Ye.length>0?(j({isOpen:!0,testType:Ee,testId:Be,testName:qe,questions:Ye,isLoading:!1}),console.log(`Test details loaded: ${Ye.length} questions`)):(k("Could not load test questions. Please try again."),j({isOpen:!0,testType:Ee,testId:Be,testName:qe,questions:[],isLoading:!1,error:"No questions available for this test"}))}catch(Ye){console.error("Error loading test details:",Ye),k("Error loading test details. Please try again."),j({isOpen:!0,testType:Ee,testId:Be,testName:qe,questions:[],isLoading:!1,error:Ye.message||"Failed to load test details"})}finally{v(!1)}},At=(Ee,Be,qe,Ye)=>{try{console.log("Showing test details modal:",{testType:Ee,testId:Be,testName:qe,questions:Ye}),j({isOpen:!0,testType:Ee,testId:Be,testName:qe,questions:Ye||[],isLoading:!1,error:null})}catch(Lt){console.error("Error showing test details modal:",Lt),k("Failed to show test details modal")}},wt=()=>{try{console.log("Closing test details modal"),j({isOpen:!1,testType:null,testId:null,testName:null,questions:[],isLoading:!1,error:null})}catch(Ee){console.error("Error closing test details modal:",Ee)}},Ft=(Ee,Be)=>{try{switch(Be){case"multiple_choice":return l.jsxs("div",{className:"answer-options",children:[l.jsx("p",{children:l.jsx("strong",{children:"Options:"})}),l.jsxs("p",{children:["A) ",Ee.option_a||"No text"]}),l.jsxs("p",{children:["B) ",Ee.option_b||"No text"]}),Ee.option_c&&l.jsxs("p",{children:["C) ",Ee.option_c]}),Ee.option_d&&l.jsxs("p",{children:["D) ",Ee.option_d]}),Ee.option_e&&l.jsxs("p",{children:["E) ",Ee.option_e]}),Ee.option_f&&l.jsxs("p",{children:["F) ",Ee.option_f]}),l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",Ee.correct_answer||"Not specified"]})})]});case"true_false":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",Ee.correct_answer?"True":"False"]})})});case"input":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",Ee.correct_answer||"Not specified"]})})});case"matching_type":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",Ee.correct_answer?JSON.stringify(Ee.correct_answer):"Not specified"]})})});case"word_matching":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",Ee.correct_answer?JSON.stringify(Ee.correct_answer):"Not specified"]})})});default:return l.jsx("p",{children:"Unknown question type"})}}catch(qe){return console.error("Error formatting question answer display:",qe),l.jsx("p",{children:"Error displaying question"})}},or=(Ee,Be)=>{try{console.log("Navigating to test:",{testType:Ee,testId:Be}),r({testType:Ee,testId:Be}),d(!0),re(Ee,Be)}catch(qe){console.error("Error navigating to test:",qe),k("Failed to navigate to test")}},dr=()=>{try{console.log("Hiding test sections"),r(null),s([]),i({}),c({}),d(!1),m(null),k(null)}catch(Ee){console.error("Error hiding test sections:",Ee)}},nr=(Ee,Be,qe,Ye)=>{try{console.log("Displaying test on page:",{testInfo:Ee,questions:Be,testType:qe,testId:Ye}),r({...Ee,testType:qe,testId:Ye}),s(Be),d(!0),ie(qe,Ye),nt(qe,Ye),ht(qe,Ye)}catch(Lt){console.error("Error displaying test on page:",Lt),k("Failed to display test on page")}},Xe=(Ee,Be,qe)=>{try{return console.log("Rendering questions for page:",{questions:Ee,testType:Be,testId:qe}),!Ee||!Array.isArray(Ee)?(console.warn("Invalid questions array for rendering"),[]):Ee.map((Ye,Lt)=>{const ze=it=>{const Le={...a,[Ye.question_id]:it};i(Le),xe(Be,qe,Ye.question_id,it)};return{question:Ye,index:Lt,testType:Be,testId:qe,studentAnswer:a[Ye.question_id]||"",onAnswerChange:ze}})}catch(Ye){return console.error("Error rendering questions for page:",Ye),[]}},Qe=S.useCallback((Ee,Be)=>{try{if(!Ee||!Be){console.warn("Cannot save progress: missing testType or testId");return}const qe=`test_progress_${Ee}_${Be}`,Ye={answers:a,progress:o,lastSaved:Date.now(),testType:Ee,testId:Be};L(qe,Ye),console.log(`Progress saved for test ${Ee}_${Be}:`,Ye)}catch(qe){console.error("Error saving progress for page:",qe)}},[a,o,L]),ut=S.useCallback(Ee=>{try{return!a||Object.keys(a).length===0?0:Object.values(a).filter(qe=>qe==null?!1:typeof qe=="string"?qe.trim()!=="":typeof qe=="object"?Object.keys(qe).length>0:!0).length}catch(Be){return console.error("Error getting answered questions count for page:",Be),0}},[a]),mt=S.useCallback((Ee,Be)=>{try{console.log("Updating progress display for page:",{testType:Ee,testId:Be});const qe=ut(Ee),Ye=n.length,Lt=Ye>0?Math.round(qe/Ye*100):0,ze=qe===Ye&&Ye>0;c(rt=>({...rt,answeredCount:qe,totalQuestions:Ye,percentage:Lt,canSubmit:ze,remainingQuestions:Ye-qe,lastUpdated:Date.now()}));const it=document.getElementById("progress-bar"),Le=document.getElementById("progress-text"),st=document.getElementById("submit-test-button");return it&&(it.style.width=`${Lt}%`,it.className=it.className.replace(/bg-\w+-\d+/,""),Lt>=100?it.classList.add("bg-green-500"):Lt>=80?it.classList.add("bg-blue-500"):Lt>=60?it.classList.add("bg-yellow-500"):Lt>=40?it.classList.add("bg-orange-500"):it.classList.add("bg-red-500")),Le&&(Le.textContent=`${qe}/${Ye} questions answered (${Lt}%)`),st&&(st.disabled=!ze,ze?(st.textContent=" Submit Test",st.classList.remove("bg-gray-400"),st.classList.add("bg-green-600","hover:bg-green-700")):(st.textContent=` Complete ${Ye-qe} more question${Ye-qe!==1?"s":""}`,st.classList.remove("bg-green-600","hover:bg-green-700"),st.classList.add("bg-gray-400"))),{answeredCount:qe,totalQuestions:Ye,percentage:Lt,canSubmit:ze}}catch(qe){return console.error("Error updating progress display for page:",qe),{answeredCount:0,totalQuestions:0,percentage:0,canSubmit:!1}}},[n.length,ut]),ht=S.useCallback((Ee,Be)=>{try{console.log("Setting up test page event listeners:",{testType:Ee,testId:Be});const qe=setInterval(()=>{Object.keys(a).length>0&&(Qe(Ee,Be),console.log("Auto-saved progress for test:",Ee,Be))},3e4),Ye=setInterval(()=>{mt(Ee,Be)},2e3),Lt=rt=>{rt.key==="Escape"&&window.confirm("Are you sure you want to exit the test? Your progress will be saved.")&&te(),rt.ctrlKey&&rt.key==="s"&&(rt.preventDefault(),Qe(Ee,Be),console.log("Manual save triggered")),rt.key},ze=rt=>{Object.keys(a).length>0&&(rt.preventDefault(),rt.returnValue="Your test progress will be saved. Are you sure you want to leave?")},it=()=>{document.hidden&&(console.log("Tab became hidden - saving progress"),Qe(Ee,Be))},Le=()=>{console.log("Window focused - updating progress"),mt(Ee,Be)},st=()=>{console.log("Window blurred - saving progress"),Qe(Ee,Be)};return document.addEventListener("keydown",Lt),window.addEventListener("beforeunload",ze),document.addEventListener("visibilitychange",it),window.addEventListener("focus",Le),window.addEventListener("blur",st),window.testIntervals||(window.testIntervals={}),window.testIntervals[`autosave_${Ee}_${Be}`]=qe,window.testIntervals[`progress_${Ee}_${Be}`]=Ye,()=>{clearInterval(qe),clearInterval(Ye),document.removeEventListener("keydown",Lt),window.removeEventListener("beforeunload",ze),document.removeEventListener("visibilitychange",it),window.removeEventListener("focus",Le),window.removeEventListener("blur",st),window.testIntervals&&(delete window.testIntervals[`autosave_${Ee}_${Be}`],delete window.testIntervals[`progress_${Ee}_${Be}`])}}catch(qe){console.error("Error setting up test page event listeners:",qe)}},[a,Qe,mt,te]),Ot=S.useCallback(()=>{try{const Ee=ut(t?.testType),Be=n.length,qe=Ee===Be&&Be>0,Ye=document.getElementById("submit-test-button");return Ye&&(Ye.disabled=!qe,Ye.textContent=qe?"Submit Test":`Complete ${Be-Ee} more questions`),{canSubmit:qe,answeredCount:Ee,totalQuestions:Be}}catch(Ee){return console.error("Error updating submit button state for page:",Ee),{canSubmit:!1,answeredCount:0,totalQuestions:0}}},[t,n.length,ut]),nt=S.useCallback((Ee,Be)=>{try{console.log("Setting up progress tracking for page:",{testType:Ee,testId:Be});const qe=setInterval(()=>{mt(Ee,Be),Ot()},1e3),Ye=setInterval(()=>{Object.keys(a).length>0&&Qe(Ee,Be)},3e4);return window.testIntervals||(window.testIntervals={}),window.testIntervals[`progress_${Ee}_${Be}`]=qe,window.testIntervals[`autosave_${Ee}_${Be}`]=Ye,()=>{clearInterval(qe),clearInterval(Ye),window.testIntervals&&(delete window.testIntervals[`progress_${Ee}_${Be}`],delete window.testIntervals[`autosave_${Ee}_${Be}`])}}catch(qe){console.error("Error setting up progress tracking for page:",qe)}},[a,mt,Ot,Qe]),sr=S.useCallback(async(Ee,Be)=>{const qe=document.getElementById("submit-test-button");try{const Ye=ut(Ee),Lt=n.length;if(Ye<Lt){k(`Please answer all ${Lt} questions before submitting.`);return}if(!window.confirm("Are you sure you want to submit your test? This action cannot be undone."))return;qe&&(qe.disabled=!0,qe.innerHTML=`
          <div class="flex items-center justify-center space-x-2">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
            <span>Submitting...</span>
          </div>
        `),await H(Ee,Be)&&(fe(Ee,Be),Q(Ee,Be,a),console.log("Test submitted successfully!"))}catch(Ye){console.error("Error submitting test from page:",Ye),k("Failed to submit test. Please try again."),qe&&(qe.disabled=!1,qe.textContent="Submit Test")}},[ut,n.length,H,fe,Q,a]),kr=S.useCallback(()=>{try{if(!t)return null;const Ee=["true_false","multiple_choice","input","matching_type","word_matching"];return Ee.includes(t.testType)?t.testType:Ee.includes(t.test_type)?t.test_type:null}catch(Ee){return console.error("Error getting current test type:",Ee),null}},[t]),Er=S.useCallback((Ee,Be)=>{try{console.log("Clearing progress tracking interval:",{testType:Ee,testId:Be});const qe=`progress_interval_${Ee}_${Be}`,Ye=`autosave_interval_${Ee}_${Be}`;window.testIntervals&&(window.testIntervals[qe]&&(clearInterval(window.testIntervals[qe]),delete window.testIntervals[qe]),window.testIntervals[Ye]&&(clearInterval(window.testIntervals[Ye]),delete window.testIntervals[Ye])),console.log(`Cleared progress tracking intervals for test ${Ee}_${Be}`)}catch(qe){console.error("Error clearing progress tracking interval:",qe)}},[]),vr={currentTest:t,testQuestions:n,studentAnswers:a,testProgress:o,isTestActive:u,testResults:f,activeTests:p,isLoading:w,error:C,testDetailsModal:b,testStartTime:A,timeElapsed:D,loadTestForPage:re,submitTest:H,navigateToTestResults:Q,navigateBackToCabinet:U,clearTestDataAndReturnToCabinet:te,saveTestProgress:xe,getTestProgress:de,clearTestProgress:fe,loadSavedProgressForPage:ie,isTestCompleted:V,markTestCompleted:X,markTestCompletedInUI:(Ee,Be)=>{console.log("Marking test completed in UI:",{testType:Ee,testId:Be}),X(Ee,Be)},getAnsweredQuestionsCount:z,updateSubmitButtonState:K,updateSubmitButtonStateForPage:Ot,loadStudentActiveTests:we,loadActiveTests:we,loadTeacherActiveTests:Se,getTestInfo:_e,getTestQuestions:We,createTest:Ie,deleteTest:me,showTestResults:Ue,loadTestResults:Ze,loadTestResultsForPage:St,displayTestResultsOnPage:Kt,setupTestResultsPageEventListeners:yt,clearTestResultsCache:se,viewTestDetails:Rt,showTestDetailsModal:At,closeTestDetailsModal:wt,getQuestionAnswerDisplay:Ft,navigateToTest:or,hideTestSections:dr,displayTestOnPage:nr,renderQuestionsForPage:Xe,setupTestPageEventListeners:ht,setupProgressTrackingForPage:nt,updateProgressDisplayForPage:mt,submitTestFromPage:sr,getAnsweredQuestionsCountForPage:ut,getCurrentTestType:kr,saveProgressForPage:Qe,clearProgressTrackingInterval:Er,collectTestAnswers:pe,calculateTestScore:Jf,checkAnswerCorrectness:Sp,formatStudentAnswerForDisplay:oe,getCorrectAnswer:jy,transformAnswersForSubmission:ye,clearAllTestData:()=>{try{console.log("Clearing old test data from localStorage (older than 15 days)...");const Be=Date.now()-360*60*60*1e3,qe=[];for(let Ye=0;Ye<localStorage.length;Ye++){const Lt=localStorage.key(Ye);if(!(!Lt||!((Lt.startsWith("test_")||Lt.startsWith("student_")||Lt.startsWith("teacher_")||Lt.startsWith("admin_")||Lt.includes("progress")||Lt.includes("answers"))&&!Lt.includes("test_completed_"))))try{const it=localStorage.getItem(Lt);if(!it){qe.push(Lt);continue}let Le=null;if(it.startsWith("{")||it.startsWith("[")){const st=JSON.parse(it),rt=st.timestamp||st.lastSaved||st.lastTickAt||st.createdAt||st.updatedAt||st.startedAt||st.started_at||st.created_at;rt&&(Le=new Date(rt).getTime())}if(!Le){const st=`${Lt}__ts`,rt=localStorage.getItem(st);rt&&(Le=parseInt(rt)||null)}if(!Le)continue;Le<Be&&qe.push(Lt)}catch{continue}}return qe.forEach(Ye=>{console.log(`Removing old localStorage key: ${Ye}`),W(Ye)}),console.log(`Cleared ${qe.length} old test-related items from localStorage`),{success:!0,clearedCount:qe.length}}catch(Ee){return console.error("Error clearing old test data:",Ee),{success:!1,error:Ee.message}}},setCurrentTest:r,setTestQuestions:s,setStudentAnswers:i,setTestProgress:c,setIsTestActive:d,setTestResults:m,setError:k};return l.jsx(YB.Provider,{value:vr,children:e})},bv=()=>{const e=S.useContext(YB);if(!e)throw new Error("useTest must be used within a TestProvider");return e},$x=window.location.hostname==="mathayomwatsing.netlify.app";$x&&(console.log=()=>{},console.debug=()=>{},console.info=()=>{},console.warn=()=>{});const Ae={debug:(e,...t)=>{$x||console.log(e,...t)},warn:(e,...t)=>{$x||console.warn(e,...t)},error:(e,...t)=>{console.error(e,...t)},info:(e,...t)=>{$x||console.info(e,...t)},isEnabled:()=>!$x},_v=({testResults:e,onBackToCabinet:t,onRetakeTest:r,isLoading:n=!1,caught_cheating:s=!1,visibility_change_times:a=0})=>{if(!e||!e.showResults)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-500",children:"No test results to display"})})});const{testInfo:i,testType:o,score:c,totalQuestions:u,percentage:d,passed:f,questionAnalysis:m,timestamp:p}=e,x=C=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[C]||C,w=C=>C>=80?"text-green-600 bg-green-50":C>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",v=C=>C?"text-green-600 bg-green-100 border-green-200":"text-red-600 bg-red-100 border-red-200";return n?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading test results..."})]})}):l.jsx("div",{className:"bg-gray-50 py-8 overflow-y-auto",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs(Nt.div,{className:"bg-white rounded-lg shadow-lg p-6 mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(e?.caught_cheating||s)&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm text-red-700",children:[l.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",e?.visibility_change_times||a||0," times during the test."]})})]})}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Test Results"}),l.jsx("h2",{className:"text-xl text-gray-700 mb-1",children:i?.test_name||"Test"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[x(o),"  Completed on ",new Date(p).toLocaleDateString()]})]}),l.jsx("div",{className:"text-right",children:l.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${v(f)}`,children:f?" PASSED":" FAILED"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-900",children:c}),l.jsx("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-900",children:u}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total Questions"})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:`text-3xl font-bold ${w(d).split(" ")[0]}`,children:[d,"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Score"})]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-6",children:l.jsx(Nt.div,{className:`h-3 rounded-full ${w(d).split(" ")[1]}`,initial:{width:0},animate:{width:`${d}%`},transition:{duration:1,ease:"easeOut"}})}),l.jsx("div",{className:"flex flex-wrap gap-3",children:l.jsx(xt,{onClick:t,variant:"primary",className:"flex items-center gap-2",children:" Back to Cabinet"})})]}),o!=="matching_type"&&o!=="word_matching"&&l.jsxs(Nt.div,{className:"bg-white rounded-lg shadow-lg p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Question Review"}),l.jsx("div",{className:"space-y-4",children:m.map((C,k)=>l.jsxs(Nt.div,{className:`p-4 rounded-lg border-2 ${C.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:k*.1},children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Question ",C.questionNumber]}),l.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${C.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.isCorrect?" Correct":" Incorrect"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Question:"}),l.jsx("div",{className:"text-gray-700 bg-gray-100 p-3 rounded",children:l.jsx(Po,{content:C.question||""})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Your Answer:"}),l.jsx("div",{className:`p-3 rounded ${C.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:C.userAnswer?l.jsx(Po,{content:C.userAnswer}):"No answer provided"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-800 font-medium mb-2",children:"Correct Answer:"}),l.jsx("div",{className:"bg-blue-100 text-blue-800 p-3 rounded",children:l.jsx(Po,{content:C.correctAnswer||""})})]})]})]},k))})]}),l.jsxs(Nt.div,{className:"bg-white rounded-lg shadow-lg p-6 mt-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[l.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Summary Statistics"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.filter(C=>C.isCorrect).length}),l.jsx("div",{className:"text-sm text-blue-600",children:"Correct"})]}),l.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-red-600",children:m.filter(C=>!C.isCorrect).length}),l.jsx("div",{className:"text-sm text-red-600",children:"Incorrect"})]}),l.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[l.jsxs("div",{className:"text-2xl font-bold text-gray-600",children:[Math.round(m.filter(C=>C.isCorrect).length/u*100),"%"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Accuracy"})]}),l.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u}),l.jsx("div",{className:"text-sm text-purple-600",children:"Total"})]})]})]})]})})},QB=({isOpen:e,onClose:t,testType:r,testId:n,testName:s,questions:a=[],isLoading:i=!1})=>{if(!e)return null;const o=f=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[f]||f,c=f=>({multiple_choice:"",true_false:"",input:"",matching_type:""})[f]||"",u=(f,m)=>{switch(m){case"multiple_choice":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[f.option_a&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"A"}),l.jsx("span",{className:"text-gray-700",children:f.option_a})]}),f.option_b&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"B"}),l.jsx("span",{className:"text-gray-700",children:f.option_b})]}),f.option_c&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"C"}),l.jsx("span",{className:"text-gray-700",children:f.option_c})]}),f.option_d&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"D"}),l.jsx("span",{className:"text-gray-700",children:f.option_d})]}),f.option_e&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"E"}),l.jsx("span",{className:"text-gray-700",children:f.option_e})]}),f.option_f&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),l.jsx("span",{className:"text-gray-700",children:f.option_f})]})]})]});case"true_false":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"T"}),l.jsx("span",{className:"text-gray-700",children:"True"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),l.jsx("span",{className:"text-gray-700",children:"False"})]})]})]});case"input":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Answer Format:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("span",{className:"text-gray-600 italic",children:"Type your answer in the text input field"})})]});case"matching_type":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Instructions:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("span",{className:"text-gray-600 italic",children:"Match the items by connecting them with lines or selecting pairs"})})]});default:return null}},d=(f,m)=>{if(!f.correct_answer)return null;let p="";switch(m){case"multiple_choice":p=f.correct_answer.toUpperCase();break;case"true_false":p=f.correct_answer?"True":"False";break;case"input":p=f.correct_answer;break;case"matching_type":p=typeof f.correct_answer=="object"?JSON.stringify(f.correct_answer):f.correct_answer;break;default:p=String(f.correct_answer)}return l.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[l.jsx("p",{className:"font-medium text-green-800 mb-1",children:"Correct Answer:"}),l.jsx("p",{className:"text-green-700 font-mono",children:p})]})};return l.jsx(wl,{children:l.jsxs(Nt.div,{className:"fixed inset-0 z-50 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[l.jsx(Nt.div,{className:"fixed inset-0 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),l.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:l.jsxs(Nt.div,{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("span",{className:"text-2xl",children:c(r)}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s||"Test Details"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[o(r),"  ",a.length," Questions"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(xt,{onClick:()=>window.print(),variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Print"}),l.jsx(xt,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Close"})]})]}),l.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:i?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading test details..."})]})}):a.length===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Questions Available"}),l.jsx("p",{className:"text-gray-500",children:"This test doesn't have any questions yet."})]}):l.jsx("div",{className:"space-y-6",children:a.map((f,m)=>l.jsxs(Nt.div,{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1,duration:.3},children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:["Question ",m+1]}),l.jsx("span",{className:"text-gray-500 text-sm",children:o(r)})]})}),l.jsx("div",{className:"mb-4",children:l.jsx("p",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:f.question||f.question_text})}),u(f,r),d(f,r)]},f.id||f.question_id||m))})}),l.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50",children:[l.jsx("div",{className:"text-sm text-gray-600",children:a.length>0&&l.jsxs("span",{children:["Showing ",a.length," question",a.length!==1?"s":""]})}),l.jsx("div",{className:"flex items-center space-x-3",children:l.jsx(xt,{onClick:t,variant:"primary",className:"flex items-center space-x-2",children:"Close"})})]})]})})]})})},zae=({answeredCount:e=0,totalQuestions:t=0,timeElapsed:r=0,onSubmitTest:n,isSubmitting:s=!1,canSubmit:a=!1,className:i=""})=>{const o=t>0?Math.round(e/t*100):0,c=t-e,u=m=>{const p=Math.floor(m/3600),x=Math.floor(m%3600/60),w=m%60;return p>0?`${p}:${x.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`:`${x}:${w.toString().padStart(2,"0")}`},d=m=>m>=100?"bg-green-500":m>=80?"bg-blue-500":m>=60?"bg-yellow-500":m>=40?"bg-orange-500":"bg-red-500",f=m=>m>=100?"text-green-600":m>=80?"text-blue-600":m>=60?"text-yellow-600":m>=40?"text-orange-600":"text-red-600";return l.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 ${i}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Progress"}),l.jsx("div",{className:"flex items-center space-x-4",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:"text-sm font-mono text-gray-600",children:u(r)})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progress"}),l.jsxs("span",{className:`text-sm font-semibold ${f(o)}`,children:[o,"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:l.jsx(Nt.div,{className:`h-full ${d(o)} transition-colors duration-300`,initial:{width:0},animate:{width:`${o}%`},transition:{duration:.5,ease:"easeOut"}})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[l.jsxs("div",{className:"text-center p-2 sm:p-3 bg-blue-50 rounded-lg",children:[l.jsx("div",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:e}),l.jsx("div",{className:"text-xs text-blue-600",children:"Answered"})]}),l.jsxs("div",{className:"text-center p-2 sm:p-3 bg-gray-50 rounded-lg",children:[l.jsx("div",{className:"text-lg sm:text-2xl font-bold text-gray-600",children:c}),l.jsx("div",{className:"text-xs text-gray-600",children:"Remaining"})]}),l.jsxs("div",{className:"text-center p-2 sm:p-3 bg-purple-50 rounded-lg",children:[l.jsx("div",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:t}),l.jsx("div",{className:"text-xs text-purple-600",children:"Total"})]})]}),l.jsx("div",{className:"mb-4",children:e===t?l.jsx(Nt.div,{className:"flex items-center justify-center p-3 bg-green-50 border border-green-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:l.jsx("span",{className:"text-green-600 font-medium",children:" All questions answered! Ready to submit."})}):c===1?l.jsx(Nt.div,{className:"flex items-center justify-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:l.jsx("span",{className:"text-yellow-600 font-medium",children:"Almost there! 1 question remaining."})}):l.jsx("div",{className:"flex items-center justify-center p-3 bg-gray-50 border border-gray-200 rounded-lg",children:l.jsxs("span",{className:"text-gray-600 font-medium",children:[c," questions remaining"]})})}),a&&l.jsx("div",{className:"flex justify-center",children:l.jsx(Nt.button,{onClick:n,disabled:s,className:`px-8 py-3 rounded-lg font-semibold text-white transition-all duration-300 ${s?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl"}`,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},children:s?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),l.jsx("span",{children:"Submitting..."})]}):l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Submit Test"})]})})})]})},Uae=({testText:e,blanks:t,separateType:r=!0,testId:n,testName:s="Unknown Test",teacherId:a="Unknown Teacher",subjectId:i,onTestComplete:o,onAnswerChange:c})=>{if(console.log(" FillBlanksTestStudent Props Debug:"),console.log("- testText:",e),console.log("- blanks:",t),console.log("- separateType:",r),console.log("- testId:",n),console.log("- testName:",s),console.log("- teacherId:",a),console.log("- subjectId:",i),!e||!t||!Array.isArray(t))return console.log(" FillBlanksTestStudent: Missing test data"),l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx(er,{className:"max-w-md w-full",children:l.jsxs(er.Body,{className:"text-center",children:[l.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load fill blanks test data"}),l.jsx(xt,{onClick:()=>window.history.back(),variant:"primary",children:"Back to Dashboard"})]})})});const[u,d]=S.useState({}),[f,m]=S.useState(!1),[p,x]=S.useState(null),[w,v]=S.useState(null),[C,k]=S.useState(!1),[b,j]=S.useState(null),{showNotification:A}=_i(),{makeAuthenticatedRequest:F}=Zl(),{user:D}=Js(),{startTracking:M,stopTracking:O,getCheatingData:L,clearData:W}=Yp("fill_blanks",n,D?.student_id||D?.id);m4();const re=S.useCallback((fe,H)=>{try{let Q=fe;if(typeof fe=="string"&&fe.startsWith("{"))try{const z=JSON.parse(fe);z.root&&z.root.children&&(Q=z.root.children.map(K=>K.children?K.children.map(te=>te.style&&te.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":te.text||"").join(""):"").join(" "))}catch(z){console.error("Error parsing Lexical JSON:",z)}let U=Q;H.forEach((z,K)=>{const te=`[${K+1}_________]`;U=U.replace("[BLANK_PLACEHOLDER]",te)});const X=U.split(/(\[\d+_________\])/).map((z,K)=>z.match(/\[\d+_________\]/)?l.jsx("span",{className:"inline-block px-3 py-1 mx-1 bg-purple-100 text-purple-800 border-2 border-purple-400 rounded-lg font-mono font-bold shadow-sm",children:z},K):l.jsx("span",{children:z},K));return l.jsx("div",{className:"prose max-w-none mb-6",children:l.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:X})})}catch(Q){return console.error("Error rendering text with blanks:",Q),l.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[]),ie=S.useCallback((fe,H)=>{try{let Q=fe;if(typeof fe=="string"&&fe.startsWith("{"))try{const z=JSON.parse(fe);z.root&&z.root.children&&(Q=z.root.children.map(K=>K.children?K.children.map(te=>te.style&&te.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":te.text||"").join(""):"").join(" "))}catch(z){console.error("Error parsing Lexical JSON:",z)}const U=[];H.forEach((z,K)=>{const te=u[z.id],se=te?z.options[te.charCodeAt(0)-65]:null,pe=se?l.jsx("span",{className:"inline-block px-3 py-2 bg-green-100 text-green-800 rounded-lg border-2 border-green-400 cursor-pointer hover:bg-green-200 hover:border-green-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(z.id),children:se},K):l.jsxs("span",{className:"inline-block px-3 py-2 bg-purple-100 text-purple-800 rounded-lg border-2 border-purple-400 cursor-pointer hover:bg-purple-200 hover:border-purple-500 transition-all duration-200 font-bold shadow-sm",onClick:()=>v(z.id),children:[K+1,"_________"]},K);U.push(pe),Q=Q.replace("[BLANK_PLACEHOLDER]",`__BLANK_${z.id}__`)});const V=Q.split(/__BLANK_\d+__/),X=[];for(let z=0;z<V.length;z++)V[z]&&X.push(l.jsx("span",{children:V[z]},`text-${z}`)),z<U.length&&X.push(U[z]);return l.jsx("div",{className:"prose max-w-none mb-6",children:l.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:X})})}catch(Q){return console.error("Error rendering text with inline blanks:",Q),l.jsx("div",{className:"text-red-500",children:"Error loading test content"})}},[u]),xe=S.useCallback((fe,H)=>{const Q={...u,[fe]:H};d(Q),c&&c(fe,H)},[u,c]),de=S.useCallback(fe=>l.jsx("div",{className:"space-y-6",children:fe.map((H,Q)=>{const U=H.blank_options||H.options||[];H.correct_answers;const V=H.question_json||H.question||`Blank ${Q+1}`;return console.log(` Blank ${Q+1} question text:`,V),l.jsxs(er,{className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",Q+1]}),l.jsx("p",{className:"text-gray-600 mb-4",children:V})]}),l.jsx("div",{className:"space-y-3",children:U.filter(X=>X&&X.trim().length>0).map((X,z)=>l.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors",children:[l.jsx("input",{type:"radio",name:`blank_${H.question_id||H.id||Q}`,value:String.fromCharCode(65+z),checked:u[H.question_id||H.id||Q]===String.fromCharCode(65+z),onChange:K=>xe(H.question_id||H.id||Q,K.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),l.jsxs("span",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+z)}),l.jsx("span",{className:"text-gray-700",children:X})]})]},z))})]},H.question_id||H.id||Q)})}),[u,xe]);return S.useEffect(()=>{if(n&&D?.student_id){x(new Date),M(),console.log(" Anti-cheating tracking started for fill blanks test");const H=`test_progress_${D.student_id}_fill_blanks_${n}`,Q=ja(H);Q&&(d(Q.answers||{}),x(new Date(Q.startTime)),console.log(" Fill blanks test progress restored:",Q))}},[n,D?.student_id,t,M]),S.useEffect(()=>{if(p&&D?.student_id&&n){const fe=setInterval(()=>{const H={answers:u,startTime:p.toISOString()},Q=`test_progress_${D.student_id}_fill_blanks_${n}`;ha(Q,H,Aa.test_progress),console.log(" Fill blanks progress auto-saved")},3e4);return()=>clearInterval(fe)}},[p,u,D?.student_id,n]),S.useEffect(()=>()=>{O(),W(),console.log(" Fill blanks test component unmounted - anti-cheating cleanup")},[O,W]),S.useCallback(async()=>{m(!0);try{const fe=t.length;let H=0;t.forEach((_e,We)=>{const Ue=u[_e.id];Ue&&Ue===_e.correct_answer&&H++});const Q=H,U=fe;console.log(` Fill Blanks Score: ${Q}/${U} (${Math.round(Q/U*100)}%)`);const V=new Date,X=p?Math.round((V-p)/1e3):0,z=p?p.toISOString():V.toISOString(),K=L();console.log(" Anti-cheating data for fill blanks submission:",K);const te=D.student_id,se=`retest_assignment_id_${te}_fill_blanks_${n}`,pe=localStorage.getItem(se),{academicCalendarService:oe}=await co(async()=>{const{academicCalendarService:_e}=await Promise.resolve().then(()=>p4);return{academicCalendarService:_e}},void 0);await oe.loadAcademicCalendar();const we=oe.getCurrentTerm()?.id;if(!we)throw new Error("No current academic period found");const Se={test_id:n,test_name:s,teacher_id:a||null,subject_id:i||null,student_id:te,academic_period_id:we,parent_test_id:n,retest_assignment_id:pe?Number(pe):null,answers:u,score:Q,maxScore:U,time_taken:X,started_at:z,submitted_at:V.toISOString(),caught_cheating:K.caught_cheating,visibility_change_times:K.visibility_change_times};console.log(" Submitting fill blanks test:",Se);const me=await(await F("/.netlify/functions/submit-fill-blanks-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)})).json();if(me.success){if(A("Test submitted successfully!","success"),O(),W(),console.log(" Anti-cheating tracking stopped and data cleared for fill blanks test"),D?.student_id&&(Ip(D.student_id,"fill_blanks",n),console.log(" Fill blanks test data cleared from cache")),!!pe&&D?.student_id){let We=3;try{const Ze=localStorage.getItem(`student_active_tests_${D.student_id}`);if(Ze){const yt=JSON.parse(Ze)?.tests?.find(Rt=>Rt.test_id===n&&Rt.test_type==="fill_blanks");yt&&(We=yt.retest_attempts_left||yt.max_attempts||3)}}catch(Ze){console.error("Error checking active tests cache:",Ze)}const St=(Q>0&&U>0?Q/U*100:0)>=50;if(St){const Ze=`retest_attempt${We}_${D.student_id}_fill_blanks_${n}`;localStorage.setItem(Ze,"true"),console.log(" Passed retest, marking last-slot key:",Ze);let Kt=0;for(let At=1;At<=10;At++){const wt=`retest_attempt${At}_${D.student_id}_fill_blanks_${n}`;localStorage.getItem(wt)==="true"&&Kt++}const yt=`test_completed_${D.student_id}_fill_blanks_${n}`;localStorage.setItem(yt,"true"),console.log(" Marked retest as completed (student passed):",yt);const Rt=`retest_attempts_${D.student_id}_fill_blanks_${n}`;localStorage.setItem(Rt,JSON.stringify({used:Kt,max:We})),console.log(" Set retest attempts metadata (student passed):",Rt,{used:Kt,max:We})}else{let Ze=1;for(let wt=1;wt<=10;wt++){const Ft=`retest_attempt${wt}_${D.student_id}_fill_blanks_${n}`;if(localStorage.getItem(Ft)!=="true"){Ze=wt;break}}const Kt=`retest_attempt${Ze}_${D.student_id}_fill_blanks_${n}`;localStorage.setItem(Kt,"true"),console.log(" Marked retest attempt as completed:",Kt);let yt=0;for(let wt=1;wt<=10;wt++){const Ft=`retest_attempt${wt}_${D.student_id}_fill_blanks_${n}`;localStorage.getItem(Ft)==="true"&&yt++}const Rt=We-yt,At=Rt<=0||St;if(console.log(" Retest completion check:",{usedAttempts:yt,maxAttempts:We,attemptsLeft:Rt,passed:St,shouldComplete:At}),At){const wt=`test_completed_${D.student_id}_fill_blanks_${n}`;localStorage.setItem(wt,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",wt);const Ft=`retest_attempts_${D.student_id}_fill_blanks_${n}`;localStorage.setItem(Ft,JSON.stringify({used:yt,max:We})),console.log(" Set retest attempts metadata (attempts exhausted):",Ft,{used:yt,max:We})}}}else if(D?.student_id){const We=`test_completed_${D.student_id}_fill_blanks_${n}`;localStorage.setItem(We,"true"),console.log(" Fill blanks test marked as completed in localStorage:",We)}if(D?.student_id){const We=`retest1_${te}_fill_blanks_${n}`;localStorage.removeItem(We),localStorage.removeItem(se)}if(D?.student_id){const We=`student_results_table_${D.student_id}`;ha(We,me,Aa.student_results_table),console.log(" Fill blanks test results cached with key:",We)}setShowSubmitModal(!1),setTimeout(()=>{o&&o(Q)},2e3)}else throw new Error(me.message||"Failed to submit test")}catch(fe){console.error("Error submitting test:",fe),A("Error submitting test. Please try again.","error")}finally{m(!1)}},[u,t,n,s,a,i,p,L,O,W,F,A,o,D]),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-4",children:l.jsxs(er,{children:[f&&l.jsx(er.Header,{children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Submitting..."})]})})}),l.jsx(er.Body,{children:r===!0?l.jsxs(l.Fragment,{children:[re(e,t),de(t)]}):l.jsx(l.Fragment,{children:ie(e,t)})}),r===!1&&w&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Select Answer"}),l.jsx("div",{className:"space-y-2",children:t.find(fe=>fe.id===w)?.options.filter(fe=>fe.trim().length>0).map((fe,H)=>l.jsxs("button",{onClick:()=>{xe(w,String.fromCharCode(65+H)),v(null)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 rounded-lg border border-gray-200",children:[l.jsxs("span",{className:"font-semibold text-blue-600 mr-2",children:[String.fromCharCode(65+H),")"]}),fe]},H))}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx(xt,{onClick:()=>v(null),variant:"secondary",size:"sm",children:"Cancel"})})]})}),l.jsx(er.Footer,{children:l.jsx("div",{className:"flex gap-3"})})]})})};let Wae=class{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data"}getToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setToken(t){localStorage.setItem(this.tokenKey,t)}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){this.setToken(t),this.setUserData({role:r}),localStorage.setItem("accessToken",t)}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])),n=Date.now()/1e3;return r.exp>n}catch(r){return console.error("Error decoding token:",r),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey)}logout(){this.clearAuth(),window.location.href="/login"}getAuthHeader(){const t=this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401){if(await this.refreshToken())return s.Authorization=`Bearer ${this.getToken()}`,fetch(t,{...r,headers:s});throw this.logout(),new Error("Authentication failed")}return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return this.setToken(n.accessToken),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}getAccessToken(){return this.getToken()}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(r){return console.error("Error decoding token:",r),null}}init(){return this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}};const kp=new Wae;window.tokenManager=kp;typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{kp.init()}):kp.init());const ZB=async(e,t,r,n,s=!1)=>{try{console.log(" Fetching teacher student results:",{teacherId:e,grade:t,className:r,termId:n,forceRefresh:s});const a=s?`&_t=${Date.now()}`:"",o=await(await kp.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-student-results?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}${a}`,{cache:s?"no-cache":"default",headers:s?{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}:{}})).json();if(o.success)return console.log(" Teacher student results loaded:",o.results.length,"results"),console.log(" Students loaded:",o.students?.length||0,"students"),{success:!0,results:o.results,students:o.students||[],count:o.results.length,student_count:o.student_count||0};throw new Error(o.error||"Failed to load teacher student results")}catch(a){return console.error("Error fetching teacher student results:",a),{success:!1,error:a.message,results:[]}}},e$=async(e,t)=>{try{console.log(" Fetching student results view:",{studentId:e,academicPeriodId:t});const r=t?`&academic_period_id=${t}`:"",s=await(await kp.makeAuthenticatedRequest(`/.netlify/functions/get-student-results-view?student_id=${e}${r}`)).json();if(s.success)return console.log(" Student results view loaded:",s.results.length,"results"),{success:!0,results:s.results,count:s.results.length};throw new Error(s.error||"Failed to load student results view")}catch(r){return console.error("Error fetching student results view:",r),{success:!1,error:r.message,results:[]}}},Hae=async(e,t,r,n)=>{try{console.log(" Fetching class summary:",{teacherId:e,grade:t,className:r,academicPeriodId:n});const a=await(await kp.makeAuthenticatedRequest(`/.netlify/functions/get-class-summary?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}`)).json();if(a.success)return console.log(" Class summary loaded:",a.summary),{success:!0,summary:a.summary,hasData:!!a.summary};throw new Error(a.error||"Failed to load class summary")}catch(s){return console.error("Error fetching class summary:",s),{success:!1,error:s.message,summary:null}}},Gae=async(e,t,r,n,s={})=>{try{const a=await ZB(e,t,r,n);if(!a.success)return a;let i=a.results;return s.subject&&(i=i.filter(o=>o.subject&&o.subject.toLowerCase().includes(s.subject.toLowerCase()))),s.testType&&(i=i.filter(o=>o.test_type===s.testType)),s.minScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100>=s.minScore)),s.maxScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100<=s.maxScore)),s.passed!==void 0&&(i=i.filter(o=>o.score>=o.passing_score===s.passed)),{success:!0,results:i,count:i.length,originalCount:a.results.length}}catch(a){return console.error("Error filtering teacher student results:",a),{success:!1,error:a.message,results:[]}}},Vae=async(e,t,r={})=>{try{const n=await e$(e,t);if(!n.success)return n;let s=n.results;return r.subject&&(s=s.filter(a=>a.subject&&a.subject.toLowerCase().includes(r.subject.toLowerCase()))),r.testType&&(s=s.filter(a=>a.test_type===r.testType)),r.semester&&(s=s.filter(a=>a.semester===r.semester)),r.passed!==void 0&&(s=s.filter(a=>a.score>=a.passing_score===r.passed)),{success:!0,results:s,count:s.length,originalCount:n.results.length}}catch(n){return console.error("Error filtering student results view:",n),{success:!1,error:n.message,results:[]}}},qae={getTeacherStudentResults:ZB,getStudentResultsView:e$,getClassSummary:Hae,getTeacherStudentResultsFiltered:Gae,getStudentResultsViewFiltered:Vae};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Xae=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Ij=e=>{const t=Xae(e);return t.charAt(0).toUpperCase()+t.slice(1)},t$=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Yae=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qae=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},c)=>S.createElement("svg",{ref:c,...Jae,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:t$("lucide",s),...!a&&!Yae(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>S.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=(e,t)=>{const r=S.forwardRef(({className:n,...s},a)=>S.createElement(Qae,{ref:a,iconNode:t,className:t$(`lucide-${Kae(Ij(e))}`,`lucide-${e}`,n),...s}));return r.displayName=Ij(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zae=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],eie=Jp("download",Zae);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tie=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],rie=Jp("maximize-2",tie);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nie=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],sie=Jp("rotate-cw",nie);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aie=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],r$=Jp("x",aie);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iie=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],oie=Jp("zoom-in",iie);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lie=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],cie=Jp("zoom-out",lie),_u={WIDTH:1536,HEIGHT:2048,ASPECT_RATIO:1536/2048},n$={MIN:.25,MAX:1,INITIAL:.25,STEP:.1},Vh={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",ERASER:"eraser"},Rj={CURSOR_COLOR:"#ff0000",CURSOR_OPACITY:.3},Lj={ERASER_TO_THICKNESS_RATIO:2.5,THICKNESS_TO_ERASER_RATIO:.4},Kw={MAX_ENTRIES:10,MAX_MEMORY_KB:500,COMPRESSION_THRESHOLD:200},s$=e=>{try{const t=JSON.stringify(e);return new Blob([t]).size/1024}catch(t){return console.warn("Error calculating memory usage:",t),0}},uie=e=>Array.isArray(e)?e.map(t=>Array.isArray(t)?die(t):t):e,die=e=>{if(e.length<=2)return e;const t=[e[0]],r=2;for(let n=1;n<e.length-1;n++){const s=e[n-1],a=e[n];e[n+1],Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))>r&&t.push(a)}return t.push(e[e.length-1]),t},fie=(e,t=Date.now())=>{const r=s$(e);return{data:[...e],timestamp:t,memoryUsage:r,compressed:r>Kw.COMPRESSION_THRESHOLD}},Bj=(e,t,r)=>{const n=fie(t),s=s$(t),a=e.slice(0,r+1);a.push(n);let i=a;return s>Kw.MAX_MEMORY_KB&&(i=hie(a)),i.length>Kw.MAX_ENTRIES&&(i=i.slice(-10)),{history:i,index:i.length-1}},hie=e=>e.map(t=>t.memoryUsage>Kw.COMPRESSION_THRESHOLD?{...t,data:uie(t.data),compressed:!0}:t),$j=(e,t)=>{if(t<0||t>=e.length)return[];const r=e[t];return r?r.compressed?mie(r.data):[...r.data]:[]},mie=e=>[...e],zj=e=>e>0,Uj=(e,t)=>e<t-1,gie=()=>({history:[],index:-1}),pie=()=>{const[e,t]=S.useState({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null}),[r,n]=S.useState([]),[s,a]=S.useState([]),i=S.useCallback(A=>{t(F=>({...F,...A}))},[]),o=S.useCallback(()=>{t({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null})},[]),c=S.useCallback(A=>{const F={x:A.x,y:A.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(D=>({...D,isDrawing:!0,currentLine:[F]})):["line","rectangle","circle"].includes(e.currentTool)&&t(D=>({...D,isDrawing:!0,currentShape:{type:e.currentTool,startX:A.x,startY:A.y,endX:A.x,endY:A.y,color:e.currentColor,thickness:e.currentThickness}}))},[e.currentTool,e.currentColor,e.currentThickness]),u=S.useCallback(A=>{if(!e.isDrawing)return;const F={x:A.x,y:A.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(D=>({...D,currentLine:[...D.currentLine,F]})):e.currentShape&&t(D=>({...D,currentShape:{...D.currentShape,endX:A.x,endY:A.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape]),d=S.useCallback(()=>{if(!e.isDrawing)return;let A=r;if(e.currentTool==="pencil"&&e.currentLine.length>0?(A=[...r,e.currentLine],n(A)):e.currentShape&&(A=[...r,e.currentShape],n(A)),A!==r){const F=Bj(e.drawingHistory,A,e.historyIndex);t(D=>({...D,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:F.history,historyIndex:F.index}))}else t(F=>({...F,isDrawing:!1,currentLine:[],currentShape:null}))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,r,e.drawingHistory,e.historyIndex]),f=S.useCallback(A=>Math.round(A*Lj.ERASER_TO_THICKNESS_RATIO),[]),m=S.useCallback(A=>Math.round(A*Lj.THICKNESS_TO_ERASER_RATIO),[]),p=S.useCallback(A=>{t(F=>({...F,currentThickness:A,eraserSize:f(A)}))},[f]),x=S.useCallback(A=>{t(F=>({...F,eraserSize:A,currentThickness:m(A)}))},[m]),w=S.useCallback(A=>{const F=Bj(e.drawingHistory,A,e.historyIndex);t(D=>({...D,drawingHistory:F.history,historyIndex:F.index}))},[e.drawingHistory,e.historyIndex]),v=S.useCallback(()=>{if(zj(e.historyIndex)){const A=e.historyIndex-1,F=$j(e.drawingHistory,A);n([...F]),t(D=>({...D,historyIndex:A}))}},[e.historyIndex,e.drawingHistory]),C=S.useCallback(()=>{if(Uj(e.historyIndex,e.drawingHistory.length)){const A=e.historyIndex+1,F=$j(e.drawingHistory,A);n([...F]),t(D=>({...D,historyIndex:A}))}},[e.historyIndex,e.drawingHistory]),k=S.useCallback(()=>{const A=gie();t(F=>({...F,drawingHistory:A.history,historyIndex:A.index}))},[]),b=zj(e.historyIndex),j=Uj(e.historyIndex,e.drawingHistory.length);return{drawingState:e,setDrawingState:t,drawingData:r,setDrawingData:n,textBoxes:s,setTextBoxes:a,updateDrawingState:i,resetDrawingState:o,startDrawing:c,continueDrawing:u,finishDrawing:d,handleThicknessChange:p,handleEraserSizeChange:x,saveToHistoryState:w,undo:v,redo:C,clearHistoryState:k,canUndoState:b,canRedoState:j}},Wj={SCALE_DELTA:.05,CENTER_DELTA:20},ep=e=>{if(e.length<2)return 0;const t=e[0],r=e[1];return Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2))},Rf=e=>{if(e.length<2)return null;const t=e[0],r=e[1];return{x:(t.clientX+r.clientX)/2,y:(t.clientY+r.clientY)/2}},xie=(e,t)=>{if(e.length!==2||!t)return null;const r=ep(e),n=ep(t),s=Rf(e),a=Rf(t);if(n===0)return null;const i=Math.abs(r/n-1),o=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return i>Wj.SCALE_DELTA?"zoom":o>Wj.CENTER_DELTA?"pan":null},yie=e=>{let t;return function(){const r=arguments,n=this;t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e.apply(n,r),t=null})}},Hg=(e,t)=>{const r=t.getPointerPosition();return{x:(r.x-t.x())/t.scaleX(),y:(r.y-t.y())/t.scaleY()}},Mc={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",PAN:"pan"},Xw={color:"#000000",thickness:2},Hj=(e,t,r)=>({x:e.x,y:e.y,color:t||Xw.color,thickness:r||Xw.thickness}),vie=(e,t,r,n,s)=>({type:e,startX:t.x,startY:t.y,endX:r.x,endY:r.y,color:n||Xw.color,thickness:s||Xw.thickness}),a$=(e,t,r,n,s,a)=>{const i=e-r,o=t-n,c=s-r,u=a-n,d=i*c+o*u,f=c*c+u*u;let m=-1;f!==0&&(m=d/f);let p,x;m<0?(p=r,x=n):m>1?(p=s,x=a):(p=r+m*c,x=n+m*u);const w=e-p,v=t-x;return Math.sqrt(w*w+v*v)},wie=(e,t)=>{if(t.length===0)return[e];const r=t.sort((a,i)=>a.index-i.index),n=[];let s=0;for(const a of r)a.index>s&&n.push(e.slice(s,a.index+1)),s=a.index+1;return s<e.length&&n.push(e.slice(s)),n.filter(a=>a.length>0)},bie=(e,t,r,n)=>{const s=[],a=r/2;for(let i=0;i<n.length-1;i++){const o=n[i],c=n[i+1],u=a$(e,t,o.x,o.y,c.x,c.y);u<=a&&s.push({index:i,point:{x:o.x,y:o.y},distance:u})}return s},_ie=(e,t,r,n)=>{const s=bie(t,r,n,e);return s.length===0?[e]:wie(e,s)},Sie=(e,t,r,n)=>{if(n.type==="rectangle"){const s=Math.min(n.startX,n.endX),a=Math.min(n.startY,n.endY),i=Math.abs(n.endX-n.startX),o=Math.abs(n.endY-n.startY);return e>=s&&e<=s+i&&t>=a&&t<=a+o}else if(n.type==="circle"){const s=(n.startX+n.endX)/2,a=(n.startY+n.endY)/2,i=Math.sqrt(Math.pow(n.endX-n.startX,2)+Math.pow(n.endY-n.startY,2))/2;return Math.sqrt(Math.pow(e-s,2)+Math.pow(t-a,2))<=i}return!1},Gj=(e,t,r,n)=>{const s=[];for(const a of n)if(Array.isArray(a)){const i=_ie(a,e,t,r);s.push(...i)}else a.type==="line"?a$(e,t,a.startX,a.startY,a.endX,a.endY)>r/2&&s.push(a):(a.type==="rectangle"||a.type==="circle")&&(Sie(e,t,r,a)||s.push(a));return s},kie=(e,t,r,n,s,a,i,o,c)=>{const[u,d]=S.useState({isActive:!1,type:null,lastDistance:null,lastCenter:null}),f=S.useCallback(F=>{if(F.evt.preventDefault(),F.evt.stopPropagation(),e.currentTool===Mc.PAN)return;const D=F.target.getStage(),M=Hg(F,D),O=Hj(M,e.currentColor,e.currentThickness);e.currentTool===Mc.PENCIL?t(L=>({...L,isDrawing:!0,currentLine:[O]})):[Mc.LINE,Mc.RECTANGLE,Mc.CIRCLE].includes(e.currentTool)&&t(L=>({...L,isDrawing:!0,currentShape:vie(e.currentTool,M,M,e.currentColor,e.currentThickness)}))},[e.currentTool,e.currentColor,e.currentThickness,t]),m=S.useCallback(F=>{const D=Gj(F.x,F.y,e.eraserSize,r);n(D),s(D)},[e.eraserSize,r,n,s]),p=S.useCallback(F=>{o&&(a(),w("Undo",F))},[o,a]),x=S.useCallback(F=>{c&&(i(),w("Redo",F))},[c,i]),w=S.useCallback((F,D)=>{const M=D.target.getStage(),O=Hg(D,M),L=new Konva.Circle({x:O.x,y:O.y,radius:20,stroke:"#4CAF50",strokeWidth:3,opacity:.8,listening:!1});M.add(L),L.to({scaleX:2,scaleY:2,opacity:0,duration:.3,onFinish:()=>{L.destroy()}})},[]),v=S.useCallback(F=>{if(F.evt.preventDefault(),F.evt.stopPropagation(),!e.isDrawing)return;const D=F.target.getStage(),M=Hg(F,D),O=Hj(M,e.currentColor,e.currentThickness);e.currentTool===Mc.PENCIL?t(L=>({...L,currentLine:[...L.currentLine,O]})):e.currentShape&&t(L=>({...L,currentShape:{...L.currentShape,endX:M.x,endY:M.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape,t]),C=S.useCallback(F=>{F&&F.evt&&(F.evt.preventDefault(),F.evt.stopPropagation()),e.isDrawing&&(e.currentTool===Mc.PENCIL&&e.currentLine.length>0?n(D=>[...D,e.currentLine]):e.currentShape&&n(D=>[...D,e.currentShape]),t(D=>({...D,isDrawing:!1,currentLine:[],currentShape:null})))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,n,t]),k=S.useCallback(F=>{F.evt.preventDefault(),F.evt.stopPropagation();const D=F.evt.touches;if(D.length===2)d({isActive:!0,type:"pan",lastDistance:ep(D),lastCenter:Rf(D)});else if(D.length===1)if(e.currentTool===Mc.ERASER){const M=F.target.getStage(),O=Hg(F,M);m(O)}else e.currentTool===Mc.UNDO?p(F):e.currentTool===Mc.REDO?x(F):f(F)},[ep,Rf,f,e.currentTool,m,p,x]),b=S.useCallback(yie(F=>{F.evt.preventDefault(),F.evt.stopPropagation();const D=F.evt.touches;if(D.length===2&&u.isActive){const M=xie(D,u);if(M==="zoom"){const O=ep(D),L=Rf(D),W=O/u.lastDistance,re=Math.max(.25,Math.min(1,e.zoom*W));t(ie=>({...ie,zoom:re,position:{x:L.x-(L.x-ie.position.x)*(re/ie.zoom),y:L.y-(L.y-ie.position.y)*(re/ie.zoom)}}))}else if(M==="pan"){const O=Rf(D),L=O.x-u.lastCenter.x,W=O.y-u.lastCenter.y;t(re=>({...re,position:{x:re.position.x+L,y:re.position.y+W}}))}d(O=>({...O,lastDistance:ep(D),lastCenter:Rf(D)}))}else if(D.length===1)if(e.currentTool===Mc.ERASER){const M=F.target.getStage(),O=Hg(F,M),L=Gj(O.x,O.y,e.eraserSize,r);n(L)}else if(e.currentTool===Mc.PAN){const M=Rf(D),O=M.x-u.lastCenter.x,L=M.y-u.lastCenter.y;t(W=>({...W,position:{x:W.position.x+O,y:W.position.y+L}})),d(W=>({...W,lastCenter:M}))}else v(F)}),[u,e.zoom,t,v]),j=S.useCallback(F=>{b(F)},[b]),A=S.useCallback(F=>{F.evt.preventDefault(),F.evt.stopPropagation();const D=F.evt.touches;D.length===0?(C(F),d({isActive:!1,type:null,lastDistance:null,lastCenter:null})):D.length===1&&d(M=>({...M,isActive:!1}))},[C]);return{handleTouchStart:k,handleTouchMove:j,handleTouchEnd:A,handleEraserStart:m,handleUndoTouch:p,handleRedoTouch:x,showTouchFeedback:w}},Tie=(e,t)=>{const[r,n]=S.useState(e.MIN),[s,a]=S.useState({x:0,y:0}),i=S.useCallback((m,p,x)=>{const w=Math.max(e.MIN,Math.min(e.MAX,m));if(p){const v=w/r,C={x:p.x-(p.x-s.x)*v,y:p.y-(p.y-s.y)*v};return{zoom:w,position:C}}else{const v=t.width*w,C=t.height*w,k={x:(x.width-v)/2,y:(x.height-C)/2};return{zoom:w,position:k}}},[r,s,e,t]),o=S.useCallback(()=>{const m=Math.min(r*(1+e.STEP),e.MAX);n(m)},[r,e]),c=S.useCallback(()=>{const m=Math.max(r/(1+e.STEP),e.MIN);n(m)},[r,e]),u=S.useCallback((m,p,x)=>{const w=i(m,p,x);n(w.zoom),a(w.position)},[i]),d=S.useCallback((m,p)=>{a(x=>({x:x.x+m,y:x.y+p}))},[]),f=S.useCallback(()=>{n(e.INITIAL),a({x:0,y:0})},[e.INITIAL]);return{zoom:r,setZoom:n,position:s,setPosition:a,handleZoomIn:o,handleZoomOut:c,handleZoomToPoint:u,handlePan:d,resetZoom:f}},Cie=e=>{const[t,r]=S.useState([]),[n,s]=S.useState(0),a=S.useCallback(f=>{if(console.log("parseDrawingData - input drawing:",f),console.log("parseDrawingData - drawing.answers:",f?.answers),!f?.answers)return console.log("parseDrawingData - no answers found, returning empty array"),[];try{if(typeof f.answers=="string"){console.log("parseDrawingData - parsing string answers");const m=JSON.parse(f.answers);return console.log("parseDrawingData - parsed string result:",m),m&&typeof m=="object"&&m.lines&&console.log("parseDrawingData - new format detected with lines and textBoxes"),m}if(f.answers&&typeof f.answers=="object"&&f.answers.lines)return console.log("parseDrawingData - answers is new format object"),f.answers;if(Array.isArray(f.answers)){if(console.log("parseDrawingData - answers is array"),f.answers.every(p=>typeof p=="string"))try{const p=f.answers.map(x=>{try{return JSON.parse(x)}catch{return x}});return console.log("parseDrawingData - parsed array elements"),p}catch{return console.log("parseDrawingData - failed to parse array elements, returning raw"),f.answers}return f.answers}return console.log("parseDrawingData - answers is neither string nor array, returning empty array"),[]}catch(m){return console.error("Error parsing drawing data:",m),[]}},[]),i=S.useCallback(f=>{if(console.log("processQuestions - input answers:",f),console.log("processQuestions - answers type:",typeof f),console.log("processQuestions - answers isArray:",Array.isArray(f)),f&&typeof f=="object"&&f.lines){console.log("processQuestions - new format detected with lines and textBoxes"),console.log("processQuestions - lines count:",f.lines?.length),console.log("processQuestions - textBoxes count:",f.textBoxes?.length);const p=o(f.lines);return console.log("processQuestions - canvas groups:",p),console.log("processQuestions - number of canvas groups:",p.length),p.map((x,w)=>(console.log(`processQuestions - canvas ${w} strokes:`,x),console.log(`processQuestions - canvas ${w} stroke count:`,x.length),{questionNumber:w+1,drawingData:x,textBoxes:f.textBoxes||[]}))}if(Array.isArray(f)&&f.every(p=>p&&typeof p=="object"&&p.lines))return console.log("processQuestions - array of {lines,textBoxes} detected"),f.map((p,x)=>({questionNumber:x+1,drawingData:p.lines||[],textBoxes:p.textBoxes||[]}));if(!Array.isArray(f))return console.log("processQuestions - answers is not array or object, returning empty array"),[];console.log("processQuestions - processing",f.length,"answers (old format)");const m=o(f);return console.log("processQuestions - canvas groups:",m),console.log("processQuestions - number of canvas groups:",m.length),m.map((p,x)=>(console.log(`processQuestions - canvas ${x} strokes:`,p),console.log(`processQuestions - canvas ${x} stroke count:`,p.length),{questionNumber:x+1,drawingData:p,textBoxes:[]}))},[]),o=S.useCallback(f=>{console.log("groupStrokesByCanvas - input answers:",f);const m=c(f);return console.log("groupStrokesByCanvas - using strategy:",m),m==="by_question_boundary"?u(f):m==="by_stroke_type"?d(f):[f]},[]),c=S.useCallback(f=>{console.log("determineGroupingStrategy - analyzing answers:",f);let m=0,p=0;return f.forEach(x=>{Array.isArray(x)?m++:typeof x=="object"&&p++}),console.log("determineGroupingStrategy - arrayCount:",m,"objectCount:",p),m>0&&p>0?"by_stroke_type":f.length>3?"by_question_boundary":"single_canvas"},[]),u=S.useCallback(f=>{console.log("groupByQuestionBoundary - grouping answers:",f);const m=[];let p=[];const x=Math.ceil(f.length/2);for(let w=0;w<f.length;w++)p.push(f[w]),(w+1)%x===0&&w<f.length-1&&(m.push([...p]),p=[]);return p.length>0&&m.push(p),console.log("groupByQuestionBoundary - result:",m),m},[]),d=S.useCallback(f=>{console.log("groupByStrokeType - grouping answers:",f);const m=[],p=[];f.forEach(w=>{Array.isArray(w)?m.push(w):typeof w=="object"&&p.push(w)});const x=[];return m.length>0&&x.push(m),p.length>0&&x.push(p),console.log("groupByStrokeType - result:",x),x},[]);return S.useEffect(()=>{if(e){console.log("useDataParsing - drawing object:",e),console.log("useDataParsing - drawing.answers:",e.answers),console.log("useDataParsing - drawing.answers type:",typeof e.answers),console.log("useDataParsing - drawing.answers length:",e.answers?.length);const f=a(e);console.log("useDataParsing - parsed answers:",f),console.log("useDataParsing - parsed answers type:",typeof f),console.log("useDataParsing - parsed answers length:",f?.length);const m=i(f);console.log("useDataParsing - processed questions:",m),console.log("useDataParsing - processed questions length:",m?.length),m.length>0&&(console.log("useDataParsing - first question drawingData:",m[0]?.drawingData),console.log("useDataParsing - first question drawingData length:",m[0]?.drawingData?.length)),r(m),s(0)}},[e,a,i]),{questionsData:t,setQuestionsData:r,currentQuestionIndex:n,setCurrentQuestionIndex:s,parseDrawingData:a,processQuestions:i}},Vj={MIN:.25,INITIAL:1},Nie=(e,t)=>{const[r,n]=S.useState(!1),[s,a]=S.useState(null),i=S.useCallback(()=>{document.fullscreenElement||(a({zoom:e.zoom,position:{...e.position}}),document.documentElement.requestFullscreen().then(()=>{n(!0),t(c=>({...c,zoom:Vj.MIN,position:{x:0,y:0},isFullscreen:!0}))}).catch(c=>{console.error("Error entering fullscreen:",c)}))},[e.zoom,e.position,t]),o=S.useCallback(()=>{document.fullscreenElement&&document.exitFullscreen().then(()=>{n(!1),s?(t(c=>({...c,zoom:s.zoom,position:s.position,isFullscreen:!1})),a(null)):t(c=>({...c,zoom:Vj.INITIAL,position:{x:0,y:0},isFullscreen:!1}))}).catch(c=>{console.error("Error exiting fullscreen:",c)})},[s,t]);return{isFullscreen:r,enterFullscreen:i,exitFullscreen:o}},i$=S.forwardRef(({drawingData:e,textBoxes:t=[],drawingState:r,canvasSize:n,zoom:s,position:a,onTouchStart:i,onTouchMove:o,onTouchEnd:c,mousePosition:u,isMouseOverCanvas:d,isEraserDrawing:f},m)=>{const p=S.useRef(null),[x,w]=S.useState(.25),[v,C]=S.useState(null),[k,b]=S.useState({x:0,y:0}),[j,A]=S.useState(!1),F=S.useCallback(({x:V,y:X,size:z,visible:K,isDrawing:te})=>!K||!V||!X?null:l.jsx(qf,{x:V,y:X,radius:z/2,stroke:Rj.CURSOR_COLOR,strokeWidth:2,dash:[5,5],opacity:te?.8:Rj.CURSOR_OPACITY,listening:!1,zIndex:1e3}),[]),D=S.useCallback(V=>{if(r.currentTool===Vh.ERASER){const X=V.target.getStage(),z=Hg(V,X);b(z)}},[r.currentTool]),M=S.useCallback(()=>{r.currentTool===Vh.ERASER&&A(!0)},[r.currentTool]),O=S.useCallback(()=>{A(!1)},[]);S.useEffect(()=>{const V=m.current;if(V)return V.on("mousemove",D),V.on("mouseenter",M),V.on("mouseleave",O),()=>{V.off("mousemove",D),V.off("mouseenter",M),V.off("mouseleave",O)}},[D,M,O,m]),S.useEffect(()=>{const V=n.width??n.WIDTH,X=n.height??n.HEIGHT,z=()=>{const K=p.current;if(!K)return;const te=K.clientWidth||1,se=K.clientHeight||1,pe=Math.abs(r.rotation%180)===90,oe=pe?X:V,ye=pe?V:X,we=Math.min(te/(oe||1),se/(ye||1));w(Math.min(we,1))};return z(),window.addEventListener("resize",z),()=>window.removeEventListener("resize",z)},[n.width,n.height,n.WIDTH,n.HEIGHT,r.rotation]);const L=S.useMemo(()=>{const V=p.current;if(!V||!v)return 0;const X=V.clientWidth||1,z=V.clientHeight||1,K=Math.min(X/Math.max(v.width,1),z/Math.max(v.height,1));return Math.min(K,n$.MAX)},[v]),W=S.useMemo(()=>Math.max(s,x||1),[s,x]),re=S.useMemo(()=>{const V=n.width??n.WIDTH,X=n.height??n.HEIGHT;if(!p.current)return{x:0,y:0};const z=p.current.clientWidth||1,K=p.current.clientHeight||1,te=(z-V*W)/2,se=(K-X*W)/2;return s<=x?{x:te,y:se}:{x:a.x!==void 0?a.x:te,y:a.y!==void 0?a.y:se}},[a,s,x,W,n.width,n.height,v,L]);S.useEffect(()=>{if(!Array.isArray(e)||e.length===0){C(null);return}let V=1/0,X=1/0,z=-1/0,K=-1/0;const te=(ye,we)=>{Number.isFinite(ye)&&Number.isFinite(we)&&(ye<V&&(V=ye),we<X&&(X=we),ye>z&&(z=ye),we>K&&(K=we))};if(e.forEach(ye=>{if(Array.isArray(ye))ye.forEach(we=>te(we.x,we.y));else if(ye&&typeof ye=="object"){if(ye.type==="line")te(ye.startX,ye.startY),te(ye.endX,ye.endY);else if(ye.type==="rectangle")te(ye.startX,ye.startY),te(ye.endX,ye.endY);else if(ye.type==="circle"){const we=Math.sqrt(Math.pow(ye.endX-ye.startX,2)+Math.pow(ye.endY-ye.startY,2))/2,Se=(ye.startX+ye.endX)/2,Ie=(ye.startY+ye.endY)/2;te(Se-we,Ie-we),te(Se+we,Ie+we)}}}),!Number.isFinite(V)||!Number.isFinite(X)||!Number.isFinite(z)||!Number.isFinite(K)){C(null);return}const se=16,pe=Math.max(1,z-V+se*2),oe=Math.max(1,K-X+se*2);C({minX:V-se,minY:X-se,width:pe,height:oe})},[e]),S.useEffect(()=>{console.log("CanvasViewer - drawingData:",e),console.log("CanvasViewer - drawingData length:",e?.length),console.log("CanvasViewer - textBoxes:",t),console.log("CanvasViewer - textBoxes length:",t?.length),e&&e.length>0&&console.log("CanvasViewer - first item:",e[0]),t&&t.length>0&&console.log("CanvasViewer - first textBox:",t[0])},[e,t]),S.useEffect(()=>{const V=n.width??n.WIDTH,X=n.height??n.HEIGHT;console.log("CanvasViewer - canvas dimensions:",{width:V,height:X}),console.log("CanvasViewer - zoom:",s,"fitZoom:",x,"displayScale:",W),console.log("CanvasViewer - stagePosition:",re)},[n,s,x,W,re]);const ie=(V,X)=>{if(console.log(`CanvasViewer - rendering element ${X}:`,V),Array.isArray(V))return console.log(`CanvasViewer - rendering line with ${V.length} points`),l.jsx(so,{points:V.flatMap(z=>[z.x,z.y]),stroke:V[0]?.color||"#000000",strokeWidth:V[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},X);if(V.type==="line")return l.jsx(so,{points:[V.startX,V.startY,V.endX,V.endY],stroke:V.color,strokeWidth:V.thickness,lineCap:"round"},X);if(V.type==="rectangle"){const z=Math.abs(V.endX-V.startX),K=Math.abs(V.endY-V.startY),te=Math.min(V.startX,V.endX),se=Math.min(V.startY,V.endY);return l.jsx(Ui,{x:te,y:se,width:z,height:K,stroke:V.color,strokeWidth:V.thickness,fill:"transparent"},X)}else if(V.type==="circle"){const z=Math.sqrt(Math.pow(V.endX-V.startX,2)+Math.pow(V.endY-V.startY,2))/2,K=(V.startX+V.endX)/2,te=(V.startY+V.endY)/2;return l.jsx(qf,{x:K,y:te,radius:z,stroke:V.color,strokeWidth:V.thickness,fill:"transparent"},X)}return null},xe=()=>{if(!r.isDrawing)return null;if(r.currentTool===Vh.PENCIL&&r.currentLine.length>0)return l.jsx(so,{points:r.currentLine.flatMap(V=>[V.x,V.y]),stroke:r.currentColor,strokeWidth:r.currentThickness,tension:.5,lineCap:"round",lineJoin:"round"});if(r.currentShape){const{type:V,startX:X,startY:z,endX:K,endY:te,color:se,thickness:pe}=r.currentShape;if(V===Vh.LINE)return l.jsx(so,{points:[X,z,K,te],stroke:se,strokeWidth:pe,lineCap:"round"});if(V===Vh.RECTANGLE){const oe=Math.abs(K-X),ye=Math.abs(te-z),we=Math.min(X,K),Se=Math.min(z,te);return l.jsx(Ui,{x:we,y:Se,width:oe,height:ye,stroke:se,strokeWidth:pe,fill:"transparent"})}else if(V===Vh.CIRCLE){const oe=Math.sqrt(Math.pow(K-X,2)+Math.pow(te-z,2))/2,ye=(X+K)/2,we=(z+te)/2;return l.jsx(qf,{x:ye,y:we,radius:oe,stroke:se,strokeWidth:pe,fill:"transparent"})}}return null},de=r.isFullscreen?{position:"fixed",inset:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",zIndex:60}:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},fe={transform:`rotate(${r.rotation}deg)`,transformOrigin:"center center"},H=S.useCallback(V=>{V.preventDefault(),V.stopPropagation()},[]),Q=S.useCallback(V=>{V.preventDefault(),V.stopPropagation()},[]),U=S.useCallback(V=>{V.preventDefault(),V.stopPropagation()},[]);return l.jsx("div",{style:{...de,touchAction:"none",WebkitTouchCallout:"none"},ref:p,className:"select-none",onTouchStart:H,onTouchMove:Q,onTouchEnd:U,children:l.jsx("div",{style:{...fe,touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onTouchStart:H,onTouchMove:Q,onTouchEnd:U,children:l.jsx(Sm,{ref:m,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),scaleX:W,scaleY:W,x:re.x,y:re.y,onTouchStart:i,onTouchMove:o,onTouchEnd:c,children:l.jsxs(_m,{children:[l.jsx(Ui,{x:0,y:0,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),fill:"white"}),e.map((V,X)=>(console.log(`CanvasViewer - mapping item ${X}:`,V),ie(V,X))),t&&t.map((V,X)=>l.jsx(Ui,{x:V.x,y:V.y,width:V.width,height:V.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}},`textbox-${X}`)),t&&t.map((V,X)=>l.jsx(md,{x:V.x+8,y:V.y+8,width:V.width-16,height:V.height-16,text:V.text,fontSize:V.fontSize||14,fill:V.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"},`text-${X}`)),xe(),r.currentTool===Vh.ERASER&&l.jsx(F,{x:k.x,y:k.y,size:r.eraserSize,visible:j,isDrawing:f})]})})})})});i$.displayName="CanvasViewer";function Eie({containerRef:e,canvasSize:t,rotation:r=0}){const[n,s]=S.useState(1),[a,i]=S.useState({x:0,y:0}),o=S.useRef({width:1,height:1}),c=S.useRef(.01),u=S.useRef(0),d=S.useRef(!1),f=S.useCallback(()=>{const j=t?.width??t?.WIDTH??0,A=t?.height??t?.HEIGHT??0,F=Math.abs(r%180)===90;return{width:F?A:j,height:F?j:A}},[t,r]),m=S.useCallback(()=>{const j=e?.current;if(!j)return{width:1,height:1};const A=j.clientWidth||1,F=j.clientHeight||1;return o.current={width:A,height:F},{width:A,height:F}},[e]),p=S.useCallback(()=>{const{width:j,height:A}=o.current,{width:F,height:D}=f(),M=j/Math.max(F,1),O=A/Math.max(D,1);return Math.min(M,O,1)*.98},[f]),x=S.useCallback(j=>{const{width:A,height:F}=o.current,{width:D,height:M}=f(),O=Math.max(c.current,Math.min(j,1.5));let L=(A-D*O)/2,W=(F-M*O)/2;const re=A-D*O,ie=F-M*O;L=Math.min(Math.max(0,L),Math.max(0,re)),W=Math.min(Math.max(0,W),Math.max(0,ie));try{console.log("[Camera] centerAtScale",{targetScale:j,clampedScale:O,container:{containerW:A,containerH:F},canvas:{canvasW:D,canvasH:M},translate:{x:L,y:W},rotation:r})}catch{}i({x:L,y:W}),s(O)},[f]),w=S.useCallback(()=>{const{width:j,height:A}=m(),{width:F,height:D}=f(),M=p();let O=(j-F*M)/2,L=(A-D*M)/2;const W=j-F*M,re=A-D*M;O=Math.min(Math.max(0,O),Math.max(0,W)),L=Math.min(Math.max(0,L),Math.max(0,re));try{console.log("[Camera] fitCanvas",{scale:M,container:{containerW:j,containerH:A},canvas:{canvasW:F,canvasH:D},translate:{x:O,y:L},rotation:r})}catch{}s(M),i({x:O,y:L}),c.current=M,d.current=!1},[f,m,p]),v=S.useCallback(()=>{const{width:j,height:A}=m(),{width:F,height:D}=f(),M=(j-F)/2,O=(A-D)/2;s(1),i({x:M,y:O})},[f,m]),C=S.useCallback((j,A)=>{const{width:F,height:D}=o.current,{width:M,height:O}=f(),L=Math.max(c.current,Math.min(j,1.5));if(A&&Number.isFinite(A.x)&&Number.isFinite(A.y)){const W={x:(A.x-a.x)/n,y:(A.y-a.y)/n},re=A.x-W.x*L,ie=A.y-W.y*L;try{console.log("[Camera] zoomTo(pointer) ->",{from:n,to:L})}catch{}s(L),i({x:re,y:ie}),u.current=Date.now()+400,d.current=!0}else{let W=(F-M*L)/2,re=(D-O*L)/2;const ie=F-M*L,xe=D-O*L;W=Math.min(Math.max(0,W),Math.max(0,ie)),re=Math.min(Math.max(0,re),Math.max(0,xe));try{console.log("[Camera] zoomTo(center) ->",{from:n,to:L})}catch{}s(L),i({x:W,y:re}),u.current=Date.now()+400,d.current=!0}},[f,n,a]),k=S.useCallback((j,A)=>{const F=n*j,{width:D,height:M}=o.current,O={x:D/2,y:M/2};C(F,A||O)},[n,C]),b=S.useCallback((j,A)=>{i(F=>({x:F.x+j,y:F.y+A})),u.current=Date.now()+200,d.current=!0},[]);return S.useEffect(()=>{const j=e?.current;if(!j)return;const A=new ResizeObserver(()=>{m();const F=p();if(c.current=F,!(Date.now()<u.current)&&!d.current){try{console.log("[Camera] resize centerAtScale",{scale:n})}catch{}x(n)}});return A.observe(j),m(),()=>A.disconnect()},[e,m,p,x,n]),S.useEffect(()=>{d.current=!1,c.current=p(),x(n)},[r,t?.width,t?.height,t?.WIDTH,t?.HEIGHT,p,x,n]),S.useMemo(()=>({scale:n,translate:a,setScale:s,setTranslate:i,centerAtScale:x,fitCanvas:w,oneToOne:v,zoomTo:C,zoomByFactor:k,panBy:b}),[n,a,x,w,v,C,k,b])}const Cx=new Map,o$=S.forwardRef(({drawingData:e,textBoxes:t=[],canvasSize:r,rotation:n=0,onScaleChange:s,persistKey:a="viewer",onTextBoxEdit:i},o)=>{const c=S.useRef(null),u=S.useRef(null),d=Eie({containerRef:c,canvasSize:r,rotation:n}),[f,m]=S.useState({width:1,height:1}),p=S.useRef(null),x=S.useRef(null),[w,v]=S.useState(null);S.useEffect(()=>{console.log("[ViewerCanvas] drawingData received:",e),console.log("[ViewerCanvas] drawingData length:",e?.length),e&&e.length>0&&console.log("[ViewerCanvas] First drawing element:",e[0]),console.log("[ViewerCanvas] textBoxes:",t),console.log("[ViewerCanvas] textBoxes length:",t?.length)},[e]),S.useEffect(()=>{typeof s=="function"&&s(d.scale);try{console.log("[ViewerCanvas] scale changed",{scale:d.scale})}catch{}if(a){const U=Cx.get(a)||{};Cx.set(a,{...U,scale:d.scale})}},[d.scale,s]),S.useEffect(()=>{if(a){const U=Cx.get(a)||{};Cx.set(a,{...U,translate:{x:d.translate.x,y:d.translate.y}})}},[a,d.translate.x,d.translate.y]),S.useImperativeHandle(o,()=>({zoomIn:U=>d.zoomByFactor(1.1,U),zoomOut:U=>d.zoomByFactor(1/1.1,U),fitCanvas:()=>d.fitCanvas(),oneToOne:()=>d.oneToOne(),getScale:()=>d.scale,getStage:()=>u.current,getPointerPosition:()=>u.current?.getPointerPosition?.(),exportPNGFullCanvas:()=>{const U=u.current;if(!U)return null;const V=r?.width??r?.WIDTH??1536,X=r?.height??r?.HEIGHT??2048,z={scaleX:U.scaleX(),scaleY:U.scaleY(),x:U.x(),y:U.y(),width:U.width(),height:U.height()},K=p.current,te=x.current,se=K?{x:K.x(),y:K.y(),scaleX:K.scaleX(),scaleY:K.scaleY()}:null,pe=te?{x:te.x(),y:te.y(),rotation:te.rotation()}:null;try{return U.scale({x:1,y:1}),U.position({x:0,y:0}),U.size({width:V,height:X}),K&&(K.position({x:0,y:0}),K.scale({x:1,y:1})),te&&(te.position({x:0,y:0}),te.rotation(0)),U.batchDraw(),U.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:V,height:X})}finally{te&&pe&&(te.position({x:pe.x,y:pe.y}),te.rotation(pe.rotation)),K&&se&&(K.position({x:se.x,y:se.y}),K.scale({x:se.scaleX,y:se.scaleY})),U.scale({x:z.scaleX,y:z.scaleY}),U.position({x:z.x,y:z.y}),U.size({width:z.width,height:z.height}),U.batchDraw()}}}),[d]),S.useEffect(()=>{const U=c.current;if(!U)return;const V=()=>{m({width:U.clientWidth||1,height:U.clientHeight||1})};V();const X=new ResizeObserver(V);return X.observe(U),()=>X.disconnect()},[]),S.useEffect(()=>{if(!Array.isArray(e)||e.length===0){v(null);return}let U=1/0,V=1/0,X=-1/0,z=-1/0;const K=(oe,ye)=>{Number.isFinite(oe)&&Number.isFinite(ye)&&(oe<U&&(U=oe),ye<V&&(V=ye),oe>X&&(X=oe),ye>z&&(z=ye))};if(e.forEach(oe=>{if(Array.isArray(oe))oe.forEach(ye=>K(ye.x,ye.y));else if(oe&&typeof oe=="object"){if(oe.type==="line")K(oe.startX,oe.startY),K(oe.endX,oe.endY);else if(oe.type==="rectangle")K(oe.startX,oe.startY),K(oe.endX,oe.endY);else if(oe.type==="circle"){const ye=Math.hypot(oe.endX-oe.startX,oe.endY-oe.startY)/2,we=(oe.startX+oe.endX)/2,Se=(oe.startY+oe.endY)/2;K(we-ye,Se-ye),K(we+ye,Se+ye)}}}),!Number.isFinite(U)||!Number.isFinite(V)||!Number.isFinite(X)||!Number.isFinite(z)){v(null);return}const te=16,se=Math.max(1,X-U+te*2),pe=Math.max(1,z-V+te*2);v({minX:U-te,minY:V-te,width:se,height:pe,centerX:U-te+se/2,centerY:V-te+pe/2})},[e]);const C=S.useMemo(()=>{if(!w)return{scale:1,x:0,y:0};const U=r?.width??r?.WIDTH??1536,V=r?.height??r?.HEIGHT??2048,X=Math.min(U/Math.max(1,w.width),V/Math.max(1,w.height),1),z=w.width*X,K=w.height*X,te=(U-z)/2,se=(V-K)/2,pe=te-w.minX*X,oe=se-w.minY*X;return{scale:X,x:pe,y:oe}},[w,r?.width,r?.height,r?.WIDTH,r?.HEIGHT]),k=S.useRef(!1);S.useEffect(()=>{if(k.current)return;const U=a?Cx.get(a):null;U&&Number.isFinite(U.scale)&&U.translate&&Number.isFinite(U.translate.x)&&Number.isFinite(U.translate.y)?(d.setScale(U.scale),d.setTranslate(U.translate)):d.fitCanvas(),k.current=!0},[a,d]),S.useEffect(()=>{try{console.log("[ViewerCanvas] rotation changed",{rotation:n,scale:d.scale,translate:d.translate})}catch{}d.fitCanvas()},[n]),S.useEffect(()=>{d.centerAtScale(d.scale)},[n]);const b=U=>{U.evt.preventDefault();const V=u.current;if(!V)return;const X=V.getPointerPosition(),z=Math.pow(1.0015,-U.evt.deltaY);d.zoomByFactor(z,X)},j=S.useRef(!1),A=S.useRef({x:0,y:0}),F=()=>{const U=c.current;if(!U)return 1;const V=U.clientWidth||1,X=U.clientHeight||1,z=r?.width??r?.WIDTH??1,K=r?.height??r?.HEIGHT??1,te=Math.abs(n%180)===90,se=te?K:z,pe=te?z:K,oe=Math.min(V/se,X/pe);return Math.min(oe,1)},D=U=>{const V=F();d.scale<=V||(j.current=!0,A.current={x:U.evt.clientX,y:U.evt.clientY})},M=U=>{if(!j.current)return;const V=U.evt.clientX-A.current.x,X=U.evt.clientY-A.current.y;A.current={x:U.evt.clientX,y:U.evt.clientY},d.panBy(V,X)},O=()=>{j.current=!1},L=1536,W=2048,re=(U,V)=>{if(console.log(`[ViewerCanvas] Rendering drawing element ${V}:`,U),Array.isArray(U))return console.log(`[ViewerCanvas] Array item with ${U.length} points:`,U.slice(0,3)),l.jsx(so,{points:U.flatMap(X=>[X.x,X.y]),stroke:U[0]?.color||"#000000",strokeWidth:U[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},V);if(U?.type==="line")return l.jsx(so,{points:[U.startX,U.startY,U.endX,U.endY],stroke:U.color,strokeWidth:U.thickness,lineCap:"round"},V);if(U?.type==="rectangle"){const X=Math.abs(U.endX-U.startX),z=Math.abs(U.endY-U.startY),K=Math.min(U.startX,U.endX),te=Math.min(U.startY,U.endY);return l.jsx(Ui,{x:K,y:te,width:X,height:z,stroke:U.color,strokeWidth:U.thickness,fill:"transparent"},V)}else if(U?.type==="circle"){const X=Math.sqrt(Math.pow(U.endX-U.startX,2)+Math.pow(U.endY-U.startY,2))/2,z=(U.startX+U.endX)/2,K=(U.startY+U.endY)/2;return l.jsx(qf,{x:z,y:K,radius:X,stroke:U.color,strokeWidth:U.thickness,fill:"transparent"},V)}return null},ie=S.useRef(new Map),xe=S.useRef(null),de=S.useRef({x:0,y:0}),fe=S.useCallback(U=>{const V=c.current;V&&(V.setPointerCapture?.(U.pointerId),ie.current.set(U.pointerId,{x:U.clientX,y:U.clientY}),A.current={x:U.clientX,y:U.clientY})},[]),H=S.useCallback(U=>{const V=ie.current;if(V.has(U.pointerId)){if(V.set(U.pointerId,{x:U.clientX,y:U.clientY}),V.size===2){const X=Array.from(V.values()),z=X[1].x-X[0].x,K=X[1].y-X[0].y,te=Math.hypot(z,K),se={x:(X[0].x+X[1].x)/2,y:(X[0].y+X[1].y)/2},pe=u.current,oe=pe&&pe.getPointerPosition()||se;if(xe.current!=null){const ye=te/Math.max(1,xe.current);d.zoomByFactor(ye,oe)}xe.current=te,de.current=oe}else if(V.size===1){const X=F();if(d.scale<=X)return;const z=U.clientX-A.current.x,K=U.clientY-A.current.y;A.current={x:U.clientX,y:U.clientY},d.panBy(z,K)}}},[]),Q=S.useCallback(U=>{const V=c.current;V&&(V.releasePointerCapture?.(U.pointerId),ie.current.delete(U.pointerId),ie.current.size<2&&(xe.current=null),j.current=!1)},[]);return l.jsx("div",{ref:c,style:{width:"100%",height:"100%",display:"block",backgroundColor:"transparent",touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onPointerDown:fe,onPointerMove:H,onPointerUp:Q,children:l.jsx(Sm,{ref:u,width:f.width,height:f.height,onWheel:b,onMouseDown:D,onMouseMove:M,onMouseUp:O,onMouseLeave:O,children:l.jsx(_m,{children:l.jsx(Eu,{ref:p,x:d.translate.x,y:d.translate.y,scaleX:d.scale,scaleY:d.scale,children:(()=>{const U=(n%360+360)%360;let V=0,X=0;U===90?V=W:U===180?(V=L,X=W):U===270&&(X=L);try{console.log("[ViewerCanvas] rotatedGroup offset",{rotation:n,norm:U,tx:V,ty:X,canvasW:L,canvasH:W})}catch{}return l.jsxs(Eu,{ref:x,x:V,y:X,rotation:n,children:[l.jsx(Ui,{x:0,y:0,width:L,height:W,fill:"white"}),l.jsxs(Eu,{x:C.x,y:C.y,scaleX:C.scale,scaleY:C.scale,children:[Array.isArray(e)?(console.log("[ViewerCanvas] Rendering",e.length,"drawing elements"),e.map((z,K)=>re(z,K))):null,Array.isArray(t)&&t.map((z,K)=>l.jsxs(Eu,{x:z.x,y:z.y,children:[l.jsx(Ui,{width:z.width,height:z.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}}),l.jsx(md,{text:z.text,x:8,y:8,width:Math.max(0,(z.width||0)-16),height:Math.max(0,(z.height||0)-16),fontSize:z.fontSize||14,fill:z.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"})]},`tb-${K}`))]})]})})()})})})})});o$.displayName="ViewerCanvas";const Aie=({zoom:e,onZoomIn:t,onZoomOut:r,onRotate:n,onDownload:s,onFullscreen:a,isFullscreen:i})=>l.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 items-center justify-center",children:[l.jsx(xt,{onClick:t,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom In",children:l.jsx(oie,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(xt,{onClick:r,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom Out",children:l.jsx(cie,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(xt,{onClick:n,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Rotate",children:l.jsx(sie,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(xt,{onClick:s,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Download",children:l.jsx(eie,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(xt,{onClick:a,variant:"secondary",size:"icon",className:"w-10 h-10",title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?l.jsx(r$,{className:"w-4 h-4 mx-auto my-auto"}):l.jsx(rie,{className:"w-4 h-4 mx-auto my-auto"})})]}),jie=({currentQuestion:e,totalQuestions:t,onPrevious:r,onNext:n,drawingDataLength:s})=>t<=1?null:l.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(xt,{onClick:r,disabled:e===0,variant:"outline",size:"sm",children:"Previous"}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",e+1," of ",t]}),l.jsx(xt,{onClick:n,disabled:e===t-1,variant:"outline",size:"sm",children:"Next"})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:[s," lines"]})]})}),l$=({drawing:e,isOpen:t,onClose:r,onScoreChange:n,onMaxScoreChange:s,isTeacherView:a=!1,onSaveScore:i})=>{const{drawingState:o,setDrawingState:c,drawingData:u,setDrawingData:d,textBoxes:f,setTextBoxes:m,saveToHistoryState:p,undo:x,redo:w,canUndoState:v,canRedoState:C}=pie(),{questionsData:k,currentQuestionIndex:b,setCurrentQuestionIndex:j}=Cie(e),{zoom:A,position:F,handleZoomIn:D,handleZoomOut:M}=Tie(n$,_u),{isFullscreen:O,enterFullscreen:L,exitFullscreen:W}=Nie(o,c),{handleTouchStart:re,handleTouchMove:ie,handleTouchEnd:xe}=kie(o,c,u,d,p,x,w,v,C),de=S.useRef(null),fe=S.useRef(null),[H,Q]=S.useState(1),[U,V]=S.useState(""),[X,z]=S.useState("");S.useEffect(()=>{if(console.log("DrawingModal - questionsData:",k),console.log("DrawingModal - currentQuestionIndex:",b),k.length>0){const Se=k[b]?.drawingData||[],Ie=k[b]?.textBoxes||[];console.log("DrawingModal - setting drawingData:",Se),console.log("DrawingModal - setting textBoxes:",Ie),d(Se),m(Ie)}},[k,b,d,m]),S.useEffect(()=>{t&&e&&(V((Number.isFinite(e.score)?e.score:0).toString()),z("10"))},[t,e]);const K=()=>{b>0&&j(b-1)},te=()=>{b<k.length-1&&j(b+1)},se=()=>{v&&x()},pe=()=>{C&&w()};S.useEffect(()=>{const Se=Ie=>{(Ie.ctrlKey||Ie.metaKey)&&(Ie.key==="z"&&!Ie.shiftKey?(Ie.preventDefault(),se()):(Ie.key==="y"||Ie.key==="z"&&Ie.shiftKey)&&(Ie.preventDefault(),pe()))};return document.addEventListener("keydown",Se),()=>document.removeEventListener("keydown",Se)},[se,pe]);const oe=()=>{c(Se=>({...Se,rotation:(Se.rotation+90)%360}))},ye=()=>{if(a&&fe.current){const _e=fe.current.exportPNGFullCanvas();if(!_e)return;const We=document.createElement("a");We.href=_e,We.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(We),We.click(),document.body.removeChild(We);return}const Se=de.current;if(!Se)return;const Ie=Se.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:_u.WIDTH,height:_u.HEIGHT}),me=document.createElement("a");me.href=Ie,me.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(me),me.click(),document.body.removeChild(me)},we=async()=>{if(!a)return r();const Se=parseInt(U,10),Ie=10;Number.isFinite(Se)&&(typeof i=="function"?await i({resultId:e.id,score:Math.max(0,Math.min(10,Se)),maxScore:Ie}):(n&&n(e.id,Se),s&&s(e.id,Ie))),r()};return!t||!e?null:l.jsx(wl,{children:l.jsx(Nt.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:l.jsxs(Nt.div,{className:"bg-white rounded-lg shadow-xl max-w-4xl h-[90vh] w-full mx-4 flex flex-col select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:Se=>Se.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Drawing Submission"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," ",e.surname," - ",e.test_name]})]}),l.jsx(xt,{onClick:r,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600",children:l.jsx(r$,{className:"w-5 h-5"})})]}),k.length>1&&l.jsx(jie,{currentQuestion:b,totalQuestions:k.length,onPrevious:K,onNext:te,drawingDataLength:k[b]?.drawingData?.length||0}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[l.jsxs("div",{className:"flex-1 min-h-0 relative overflow-hidden bg-gray-100 p-0 sm:p-4 select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},children:[a?l.jsx(o$,{ref:fe,drawingData:u,textBoxes:f,canvasSize:{width:_u.WIDTH,height:_u.HEIGHT,WIDTH:_u.WIDTH,HEIGHT:_u.HEIGHT},rotation:o.rotation,onScaleChange:Q}):l.jsx(i$,{ref:de,drawingData:u,textBoxes:f,drawingState:o,canvasSize:{width:_u.WIDTH,height:_u.HEIGHT,WIDTH:_u.WIDTH,HEIGHT:_u.HEIGHT},zoom:A,position:F,onTouchStart:re,onTouchMove:ie,onTouchEnd:xe,mousePosition:{x:0,y:0},isMouseOverCanvas:!1,isEraserDrawing:!1}),l.jsx(Aie,{zoom:a?H:A,onZoomIn:()=>{if(a&&fe.current){try{console.log("[ZoomButton] ZoomIn click (teacher)",{before:fe.current.getScale?.()})}catch{}fe.current.zoomIn(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomIn after",{after:fe.current.getScale?.()})}catch{}},0)}else D()},onZoomOut:()=>{if(a&&fe.current){try{console.log("[ZoomButton] ZoomOut click (teacher)",{before:fe.current.getScale?.()})}catch{}fe.current.zoomOut(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomOut after",{after:fe.current.getScale?.()})}catch{}},0)}else M()},onRotate:oe,onDownload:ye,onFullscreen:O?W:L,isFullscreen:O}),l.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-800 bg-opacity-70 text-white px-3 py-1 rounded-full text-sm",children:[Math.round((a?H:A)*100),"%"]})]}),a&&l.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Score:"}),l.jsx("input",{type:"number",min:"0",max:10,value:U,onChange:Se=>V(Se.target.value),className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max:"}),l.jsx("input",{type:"number",value:10,disabled:!0,className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded bg-gray-100"})]}),l.jsx(xt,{onClick:we,variant:"primary",size:"sm",children:"Save"})]})})]})]})})})},c$=({testType:e,testId:t,studentAnswers:r,onBackToCabinet:n,compact:s=!1,showAll:a=!1,onToggleShowAll:i,maxInitial:o=3})=>{const c=Nl(),{user:u,isAuthenticated:d}=Js(),{testResults:f,loadTestResults:m}=bv(),[p,x]=S.useState(!0),[w,v]=S.useState(""),[C,k]=S.useState([]),[b,j]=S.useState([]),[A,F]=S.useState(null),[D,M]=S.useState([]),[O,L]=S.useState(0),[W,re]=S.useState(0),[ie,xe]=S.useState(!1),[de,fe]=S.useState(null),H=S.useCallback(oe=>{const ye=oe.best_retest_score||oe.score,we=oe.best_retest_max_score||oe.max_score,Se=Math.round(ye/we*100);return{score:ye,maxScore:we,percentage:Se}},[]);S.useEffect(()=>{Q()},[e,t]),S.useEffect(()=>{!e&&!t&&(f&&f.results?(Ae.debug(" Using cached test results from TestContext"),j(f.results),x(!1)):V())},[e,t,f]);const Q=S.useCallback(async()=>{Ae.debug(" Initializing Student Results...");try{if(x(!0),v(""),!d||!u){Ae.debug(" User not authenticated"),v("User not authenticated");return}if(u.role!==el.STUDENT){Ae.error(" Invalid user role for student results:",u.role),v("Access denied. Student role required.");return}Ae.debug(" Loading test results..."),await m(u?.student_id||u?.id||""),e&&t&&r&&(Ae.debug(" Loading specific test results..."),await U(e,t,r)),Ae.debug(" Student Results initialization complete!")}catch(oe){Ae.error(" Error initializing student results:",oe),v("Failed to initialize student results")}finally{x(!1)}},[d,u,e,t,r,m]),U=S.useCallback(async(oe,ye,we)=>{Ae.debug(" Loading specific test results:",oe,ye);try{const Se=await Kn.getTestInfo(oe,ye);Ae.debug(" Test info loaded:",Se),F(Se);const Ie=await Kn.getTestQuestions(oe,ye);Ae.debug(" Test questions loaded:",Ie),M(Ie);const me=Jf(Ie,we,oe).score,_e=Ie.length>0?Math.round(me/Ie.length*100):0;L(me),re(_e),Ae.debug(" Test results calculated:",{score:me,percentage:_e})}catch(Se){throw Ae.error(" Error loading specific test results:",Se),Se}},[]),V=S.useCallback(async(oe=0)=>{Ae.debug(" Loading all student results using existing test results API...",oe>0?`(retry ${oe})`:"");try{if(!(u?.student_id||u?.sub))throw new Error("Student ID not found");const we=await Kn.getStudentTestResults();if(we.success){Ae.debug(" All student results loaded:",we.results.length,"results");const Se=we.results.map(Ie=>({...Ie,caught_cheating:Ie.caught_cheating||!1,visibility_change_times:Ie.visibility_change_times||0}));j(Se),fe(new Date),we.results.length===0&&oe===0&&(Ae.debug(" No results found, retrying in 2 seconds..."),setTimeout(()=>{V(1)},2e3))}else throw new Error(we.error||"Failed to load student results")}catch(ye){Ae.error(" Error loading all student results:",ye),v(ye.message)}},[u]),X=S.useCallback(oe=>({"Listening and Speaking":"L&S","Reading and Writing":"R&W","English for Career":"Eng for Career","Science Fundamental":"Science F","Science Supplementary":"Science S","Math Fundamental":"Math F","Math Supplementary":"Math S","English for Communication":"Eng for Comm"})[oe]||oe,[]),z=S.useCallback(oe=>{if(!oe||oe.length===0)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No results available"})});const ye=a?oe:oe.slice(0,o);return l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subject"}),l.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Result"}),l.jsx("th",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ye.map((we,Se)=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs font-medium text-gray-900",children:l.jsx("span",{className:"bg-blue-100 text-blue-800 px-0.5 sm:px-2 py-0.5 rounded text-xs",children:X(we.subject)})}),l.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-12 sm:max-w-none",children:we.teacher_name}),l.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500 truncate max-w-16 sm:max-w-none",children:we.test_name}),l.jsx("td",{className:"px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-gray-500",children:l.jsx("div",{className:"flex flex-col items-center space-y-1",children:we.test_type==="drawing"?we.score!==null?l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Ie,maxScore:me,percentage:_e}=H(we);return _e>=80?"bg-green-100 text-green-800":_e>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Ie,maxScore:me,percentage:_e}=H(we);return`${Ie}/${me} (${_e}%)`})()}):l.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):we.test_type==="speaking"?we.score!==null?l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Ie,maxScore:me,percentage:_e}=H(we);return _e>=80?"bg-green-100 text-green-800":_e>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Ie,maxScore:me,percentage:_e}=H(we);return`${Ie}/${me} (${_e}%)`})()}):l.jsx("span",{className:"px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold bg-gray-100 text-gray-800",children:"Pending Review"}):l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold ${(()=>{const{score:Ie,maxScore:me,percentage:_e}=H(we);return _e>=80?"bg-green-100 text-green-800":_e>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"})()}`,children:(()=>{const{score:Ie,maxScore:me,percentage:_e}=H(we);return`${Ie}/${me} (${_e}%)`})()})})}),l.jsx("td",{className:"hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500",children:new Date(we.submitted_at).toLocaleDateString()})]},Se))})]}),oe.length>o&&i&&l.jsx("div",{className:"text-center pt-4",children:l.jsx("button",{onClick:i,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:a?"Show Less":`Show ${oe.length-o} More`})})]})},[X,a,o,i]),K=S.useCallback((oe,ye)=>{if(Ae.debug(" formatAnswer called with:",{answer:oe,testType:ye,answerType:typeof oe}),!oe)return"No answer";switch(ye){case"true_false":const we=typeof oe=="boolean"?oe:oe==="true";return Ae.debug(" Boolean answer processed:",we),we?"True":"False";case"multiple_choice":return oe.toUpperCase();case"input":return oe;case"word_matching":return typeof oe=="object"?Object.entries(oe).map(([Se,Ie])=>`${Se}  ${Ie}`).join(", "):oe;case"drawing":return"Drawing submitted";default:return oe}},[]),te=S.useCallback(()=>!A||!D||!r?null:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Test Results: ",A.test_name||A.title||"Test"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600",children:O}),l.jsx("p",{className:"text-sm text-gray-500",children:"Correct Answers"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-900",children:D.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Total Questions"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:`text-3xl font-bold ${W>=80?"text-green-600":W>=60?"text-yellow-600":"text-red-600"}`,children:[W,"%"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Score"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions Review"}),l.jsx("div",{className:"space-y-4",children:D.map((oe,ye)=>{const we=r[ye],Se=jy(oe,e),Ie=Sp(oe,we,e);return l.jsxs("div",{className:`border rounded-lg p-4 ${Ie?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("h4",{className:"font-medium text-gray-900",children:["Question ",ye+1]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ie?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Ie?"Correct":"Incorrect"})]}),l.jsx("p",{className:"text-gray-700 mb-3",children:oe.question}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Your Answer:"}),l.jsx("p",{className:"text-sm text-gray-900",children:K(we,e)})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Correct Answer:"}),l.jsx("p",{className:"text-sm text-gray-900",children:K(Se,e)})]})]})]},ye)})})]})]}),[A,D,r,e,O,W,jy,Sp,K]),se=S.useCallback(()=>{if(!b||b.length===0)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No test results available yet."})});const oe={};return b.forEach(ye=>{const we=ye.subject||"Unknown Subject";oe[we]||(oe[we]=[]),oe[we].push(ye)}),l.jsx("div",{className:"space-y-6",children:Object.entries(oe).map(([ye,we])=>l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:ye})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Score"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:we.map((Se,Ie)=>{const{score:me,maxScore:_e,percentage:We}=H(Se),Ue=We>=80?"text-green-600":We>=60?"text-yellow-600":"text-red-600";return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:Se.test_name}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Se.teacher_name||"Unknown"}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:Ue,children:[me,"/",_e," (",We,"%)"]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(Se.submitted_at).toLocaleDateString()})]},Ie)})})]})})]},ye))})},[b]);S.useCallback(()=>{Ae.debug(" Clearing test data and returning to cabinet..."),F(null),M([]),setStudentAnswers(null),L(0),re(0),xe(!1),n?n():c("/student")},[n,c]);const pe=S.useCallback(()=>{Ae.debug(" Navigating back to cabinet..."),n?n():c("/student")},[n,c]);return S.useCallback((oe,ye)=>{const we={id:Date.now(),message:oe,type:ye,timestamp:new Date};k(Se=>[...Se,we]),setTimeout(()=>{k(Se=>Se.filter(Ie=>Ie.id!==we.id))},Ym.NOTIFICATION_DURATION)},[]),p?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Student Results..."})]})}):w?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:w}),l.jsx(xt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?l.jsxs("div",{children:[p?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(pn,{size:"md"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Loading results..."})]}):w?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-red-500 text-4xl mb-2",children:""}),l.jsx("p",{className:"text-red-600",children:w})]}):z(b),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:C.map(oe=>l.jsx(Ou,{type:oe.type,message:oe.message,onClose:()=>k(ye=>ye.filter(we=>we.id!==oe.id))},oe.id))})]}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Results"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",de?de.toLocaleString():"Never"]})]}),l.jsxs("div",{className:"flex space-x-3",children:[A&&l.jsx(xt,{variant:"outline",onClick:()=>xe(!ie),children:ie?"Hide Details":"Show Details"}),l.jsx(xt,{variant:"outline",onClick:pe,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:ie&&A?te():se()}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:C.map(oe=>l.jsx(Ou,{type:oe.type,message:oe.message,onClose:()=>k(ye=>ye.filter(we=>we.id!==oe.id))},oe.id))}),selectedDrawing&&l.jsx(l$,{drawing:selectedDrawing,isOpen:isDrawingModalOpen,onClose:()=>setIsDrawingModalOpen(!1)})]})},Pie=({isMenuOpen:e,onToggleMenu:t,onShowPasswordChange:r})=>{const n=Nl(),{user:s,isAuthenticated:a,logout:i}=Js(),{studentData:o,loadStudentData:c}=g4(),{activeTests:u,testResults:d,loadActiveTests:f,loadTestResults:m,viewTestDetails:p,testDetailsModal:x,closeTestDetailsModal:w}=bv(),[v,C]=S.useState(!0),[k,b]=S.useState(""),[j,A]=S.useState([]),[F,D]=S.useState(null),[M,O]=S.useState(!1),[L,W]=S.useState(null),[re,ie]=S.useState(null),[xe,de]=S.useState(new Set),[fe,H]=S.useState(!1),[Q,U]=S.useState(!1),[V,X]=S.useState(!1),[z,K]=S.useState(!1);S.useEffect(()=>{te()},[]),S.useEffect(()=>()=>{X(!1)},[]),S.useEffect(()=>{if(V){const _e=setTimeout(()=>{X(!1)},1e3);return()=>clearTimeout(_e)}},[V]);const te=S.useCallback(async()=>{Ae.debug(" Initializing Student Cabinet...");try{if(C(!0),b(""),!a||!s){Ae.debug(" User not authenticated, redirecting to login"),n("/login");return}if(s.role!==el.STUDENT){Ae.error(" Invalid user role for student cabinet:",s.role),b("Access denied. Student role required.");return}Ae.debug(" Loading active tests (single API call)...");const _e=s?.student_id||s?.id||"";if(se(_e)){Ae.debug(" Cache refresh triggered - clearing cache");try{const Ue=`student_active_tests_${_e}`,St=`student_results_table_${_e}`;localStorage.removeItem(Ue),localStorage.removeItem(St)}catch{}}else Ae.debug(" Using existing cache - no refresh needed");try{localStorage.removeItem(`student_active_tests_${_e}`)}catch{}await f(_e),Ae.debug(" Student Cabinet initialization complete!")}catch(_e){Ae.error(" Error initializing student cabinet:",_e),b("Failed to initialize student cabinet")}finally{C(!1)}},[a,s,n]),se=S.useCallback(_e=>{if(window.studentCabinetRefreshRequested)return window.studentCabinetRefreshRequested=!1,Ae.debug(" Manual refresh requested"),!0;if(window.recentTestCompleted)return window.recentTestCompleted=!1,Ae.debug(" Test completed - cache refresh triggered"),!0;const We=localStorage.getItem(`last_cabinet_refresh_${_e}`);if(We&&Date.now()-parseInt(We)>1800*1e3)return Ae.debug(" Time-based refresh triggered"),!0;try{for(let Ue=0;Ue<localStorage.length;Ue++){const St=localStorage.key(Ue);if(St&&St.startsWith(`retest_assignment_id_${_e}_`))return Ae.debug(" Retest assignment key detected, forcing cache refresh:",St),!0}}catch{}return Ae.debug(" No refresh triggers - using existing cache"),!1},[]);S.useCallback(async()=>{Ae.debug(" Calculating average score...");try{if(d&&d.length>0){const _e=d.reduce((Ue,St)=>{const Ze=St.best_retest_score||St.score,Kt=St.best_retest_max_score||St.max_score;return typeof Ze=="number"&&typeof Kt=="number"&&Kt>0?Ue+Math.round(Ze/Kt*100):Ue},0),We=Math.round(_e/d.length);ie(We),Ae.debug(" Average score calculated:",We)}}catch(_e){Ae.error(" Error calculating average score:",_e)}},[d]),S.useEffect(()=>{if(V){Ae.debug(" Skipping completed tests initialization during navigation");return}const _e=s?.student_id||s?.id;if(!_e){Ae.debug(" Student ID not available yet, skipping localStorage initialization");return}const We=new Set;for(let Ue=0;Ue<localStorage.length;Ue++){const St=localStorage.key(Ue);if(St&&St.startsWith(`test_completed_${_e}_`)&&localStorage.getItem(St)==="true"){const Kt=St.replace(`test_completed_${_e}_`,"").split("_");if(Kt.length>=2){const yt=Kt[0],Rt=Kt.slice(1).join("_"),At=`${yt}_${Rt}`;We.add(At),Ae.debug(" Found completed test in localStorage:",At)}}}de(We),K(!0),Ae.debug(" Initialized completed tests from localStorage:",Array.from(We))},[s?.student_id,s?.id,V]),S.useEffect(()=>{Ae.debug(" testResults structure:",d);const _e=d?.results||d;if(Ae.debug(" resultsArray:",_e),_e&&_e.length>0){const We=s?.student_id||s?.id||"",Ue=new Set;_e.forEach(St=>{const Ze=`${St.test_type}_${St.test_id}`;Ue.add(Ze),localStorage.setItem(`test_completed_${We}_${St.test_type}_${St.test_id}`,"true")}),de(St=>{const Ze=new Set([...St,...Ue]);return Ae.debug(" Updated completed tests (merged):",Array.from(Ze)),Ze})}},[d,s?.student_id,s?.id]);const pe=S.useCallback(async(_e,We,Ue=!1,St=null)=>{Ae.debug(" Checking test completion:",_e,We,"retestAvailable:",Ue);try{const Ze=s?.student_id||s?.id||"";if(Ue){Ae.debug(" Retest available from backend, checking attempt limits.");const At=[];for(let or=1;or<=10;or++){const dr=`retest_attempt${or}_${Ze}_${_e}_${We}`;localStorage.getItem(dr)==="true"&&At.push(dr)}const wt=At.length,Ft=St?.retest_attempts_left||St?.max_attempts||3;return Ae.debug(" Current attempts:",wt,"Max attempts:",Ft,"Attempt keys:",At),wt>=Ft?(Ae.debug(" Maximum retest attempts reached in localStorage"),!0):(Ae.debug(" Retest attempts available, allowing start."),!1)}const Kt=`test_completed_${Ze}_${_e}_${We}`,yt=localStorage.getItem(Kt);if(Ae.debug(" localStorage key:",Kt),Ae.debug(" localStorage value:",yt),_e==="word_matching"){Ae.debug(" Debug: All localStorage keys for student",Ze);for(let At=0;At<localStorage.length;At++){const wt=localStorage.key(At);wt&&wt.includes(Ze)&&wt.includes("word_matching")&&Ae.debug(" Found word_matching key:",wt,"=",localStorage.getItem(wt))}}if(yt==="true")return Ae.debug(" Found completion status in local storage:",yt),!0;const Rt=d?.results||d;return Rt&&Rt.length>0&&(Ae.debug(" Checking database results:",Rt.length,"results"),Rt.some(wt=>(Ae.debug(" Checking result:",wt.test_type,wt.test_id,"vs",_e,We),wt.test_type===_e&&wt.test_id===We)))?(Ae.debug(" Found completion status in database results"),localStorage.setItem(Kt,"true"),!0):(Ae.debug(" Test not completed according to local storage or database"),!1)}catch(Ze){return Ae.error(" Error checking test completion:",Ze),!1}},[d,s?.student_id,s?.id]),oe=S.useCallback((_e,We)=>{const Ue={id:Date.now(),message:_e,type:We,timestamp:new Date};A(St=>[...St,Ue]),setTimeout(()=>{A(St=>St.filter(Ze=>Ze.id!==Ue.id))},Ym.NOTIFICATION_DURATION)},[]),ye=S.useCallback(async _e=>{Ae.debug(" Showing test details:",_e);try{await p(_e.test_type,_e.test_id,_e.test_name)}catch(We){Ae.error("Error loading test details:",We),oe("Failed to load test details","error")}},[p,oe]),we=S.useCallback(_e=>{Ae.debug(" Starting test:",_e);const We=`${_e.test_type}_${_e.test_id}`;if(xe.has(We)&&!_e?.retest_available){oe("This test has already been completed","warning");return}if(Ae.debug(" Checking retest conditions:"),Ae.debug(" test.retest_available:",_e?.retest_available),Ae.debug(" testKey:",We),Ae.debug(" completedTests.has(testKey):",xe.has(We)),Ae.debug(" completedTests:",Array.from(xe)),_e?.retest_available){const Ue=s?.student_id||s?.id||"",St=`retest1_${Ue}_${_e.test_type}_${_e.test_id}`;localStorage.setItem(St,"true"),Ae.debug(" Set retest key:",St);try{const Ze=`test_completed_${Ue}_${_e.test_type}_${_e.test_id}`;localStorage.removeItem(Ze);const Kt=`${_e.test_type}_${_e.test_id}`;localStorage.removeItem(Kt),Ae.debug(" Cleared completion keys for retest:",Ze,Kt);const yt=`retest_in_progress_${Ue}_${_e.test_type}_${_e.test_id}`;localStorage.setItem(yt,"1"),Ae.debug(" Set in-progress retest lock:",yt);try{const Rt=`anti_cheating_${Ue}_${_e.test_type}_${_e.test_id}`;localStorage.removeItem(Rt);const At=`speaking_test_data_${Ue}_${_e.test_id}`;localStorage.removeItem(At);const wt=`speaking_progress_${_e.test_id}`;localStorage.removeItem(wt);const Ft=`_${Ue}_${_e.test_type}_${_e.test_id}`,or=[];for(let nr=0;nr<localStorage.length;nr++){const Xe=localStorage.key(nr);Xe&&(Xe.endsWith(Ft)||Xe.includes(`answers_${Ue}_${_e.test_type}_${_e.test_id}`)||Xe.includes(`progress_${Ue}_${_e.test_type}_${_e.test_id}`)||Xe.includes(`state_${Ue}_${_e.test_type}_${_e.test_id}`)||Xe.includes(`selected_${Ue}_${_e.test_type}_${_e.test_id}`))&&or.push(Xe)}or.forEach(nr=>localStorage.removeItem(nr)),Ae.debug(" Cleared generic cached keys for retest start:",or);const dr=`retest_attempts_${Ue}_${_e.test_type}_${_e.test_id}`;Ae.debug(" Cleared per-test cached keys for retest start:",{antiCheatKey:Rt,speakingCacheKey:At,speakingProgressKey:wt})}catch{}}catch{}if(Ae.debug(" Test retest_assignment_id:",_e.retest_assignment_id),Ae.debug(" Test retest_assignment_id type:",typeof _e.retest_assignment_id),_e?.retest_assignment_id){const Ze=`retest_assignment_id_${Ue}_${_e.test_type}_${_e.test_id}`;localStorage.setItem(Ze,String(_e.retest_assignment_id)),Ae.debug(" Set retest assignment ID:",Ze,"=",_e.retest_assignment_id)}else Ae.debug(" No retest assignment ID found in test data")}else Ae.debug(" Retest assignment ID storage skipped - retest not available");if(X(!0),Ae.debug(" Set isStartingTest to true for test:",_e.test_type),_e.test_type==="matching_type"){Ae.debug(" Redirecting to matching test page for testId:",_e.test_id),n(`/student/matching-test/${_e.test_id}`);return}if(_e.test_type==="word_matching"){Ae.debug(" Redirecting to word matching test page for testId:",_e.test_id),n(`/student/word-matching-test/${_e.test_id}`);return}if(_e.test_type==="speaking"){Ae.debug(" Redirecting to speaking test page for testId:",_e.test_id),n(`/student/speaking-test/${_e.test_id}`);return}n(`/student/test/${_e.test_type}/${_e.test_id}`)},[n,xe,oe,s?.student_id,s?.id]),Se=S.useCallback(()=>{H(_e=>!_e)},[]),Ie=S.useCallback(()=>{U(_e=>!_e)},[]),me=S.useCallback(async _e=>{if(Ae.debug(" Starting test:",_e),V){Ae.debug(" Test already starting, ignoring click");return}try{if(await pe(_e.test_type,_e.test_id,_e?.retest_available,_e)&&!_e?.retest_available){oe("This test has already been completed","warning");return}we(_e)}catch(We){Ae.error(" Error starting test:",We),oe("Failed to start test. Please try again.","error")}},[pe,we,oe,V]);return S.useCallback(_e=>{Ae.debug(" Viewing test details:",_e),ye(_e)},[ye]),v?l.jsx(Nt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l.jsxs(Nt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx(pn,{size:"lg"}),l.jsx(Nt.p,{className:"mt-4 text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.3},children:"Loading Student Cabinet..."})]})}):k?l.jsx(Nt.div,{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l.jsx(Nt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:l.jsxs(Nt.div,{className:"bg-white border border-red-200 rounded-xl p-8 max-w-md shadow-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,duration:.3},children:[l.jsx(Nt.div,{className:"text-4xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3,type:"spring"},children:""}),l.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Cabinet Error"}),l.jsx("p",{className:"text-red-600 mb-6",children:k}),l.jsx(xt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):l.jsxs(Nt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(Nt.div,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-6",children:[l.jsxs(Nt.div,{className:"flex items-center space-x-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(Nt.div,{className:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:l.jsx("span",{className:"text-white font-semibold text-xl",children:s?.name?.charAt(0)||"S"})})}),l.jsxs("div",{children:[l.jsxs("h1",{className:"text-lg sm:text-xl md:text-2xl font-bold text-white",children:[s?.name," ",s?.surname]}),l.jsxs("p",{className:"text-blue-100 text-sm sm:text-base md:text-lg",children:["Grade ",s?.grade," - Class ",s?.class]})]})]}),l.jsxs(Nt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsxs("button",{onClick:t,className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",style:{zIndex:1e3},children:[l.jsx("span",{className:"hidden sm:inline",children:"Menu"}),l.jsx(Nt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:e?180:0},transition:{duration:.2},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),l.jsx(wl,{children:e&&l.jsx(Nt.div,{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:l.jsxs("div",{className:"py-2",children:[l.jsx(Nt.button,{onClick:r,className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),l.jsx(Nt.button,{onClick:()=>{t(),i()},className:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),l.jsxs(Nt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:l.jsx("div",{className:"lg:col-span-1 space-y-6",children:re!==null&&l.jsx(Nt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.5},children:l.jsxs(er,{children:[l.jsx(er.Header,{children:l.jsx(er.Title,{children:"Average Score"})}),l.jsx(er.Body,{children:l.jsxs(Nt.div,{className:"text-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.8,duration:.3},children:[l.jsxs(Nt.div,{className:"text-4xl font-bold text-blue-600 mb-2",initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.5,type:"spring"},children:[re,"%"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Overall Performance"})]})})]})})})}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsxs(er,{children:[l.jsx(er.Header,{children:l.jsx(er.Title,{className:"text-center",children:"Active Tests"})}),l.jsx(er.Body,{children:u&&u.length>0?l.jsxs("div",{className:"relative",children:[Ae.debug(" Rendering overlay, isStartingTest:",V),V&&l.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg border-2 border-blue-200",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Starting test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait..."})]})}),l.jsxs("div",{className:"space-y-4",children:[(fe?u:u.slice(0,3)).map((_e,We)=>l.jsx(Nt.div,{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:fe?0:.7+We*.1,duration:.3},whileHover:{scale:1.02},children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[l.jsx("h3",{className:"text-sm sm:text-lg font-medium text-gray-900 w-16 sm:w-auto break-words leading-tight line-clamp-2 sm:line-clamp-none",children:_e.test_name}),l.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:_e.subject}),l.jsx("span",{className:"text-gray-500",children:_e.teacher_name}),l.jsxs("span",{className:"text-gray-500",children:[l.jsx("span",{className:"sm:hidden",children:new Date(_e.assigned_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})}),l.jsx("span",{className:"hidden sm:inline",children:new Date(_e.assigned_at).toLocaleDateString()})]})]})}),l.jsx("div",{className:"flex space-x-2 ml-4",children:(()=>{const Ue=`${_e.test_type}_${_e.test_id}`,St=xe.has(Ue);if(!z)return l.jsx(xt,{variant:"secondary",size:"sm",disabled:!0,className:"bg-gray-100 text-gray-500 border-gray-200",children:"Loading..."});if(St&&_e?.retest_available){const Ze=s?.student_id||s?.id||"";let Kt=!1;try{const yt=localStorage.getItem(`retest_attempts_${Ze}_${_e.test_type}_${_e.test_id}`);if(yt){const Rt=JSON.parse(yt);typeof Rt?.used=="number"&&typeof Rt?.max=="number"&&Rt.used>=Rt.max&&(Kt=!0)}}catch{}return Kt?l.jsx(xt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):l.jsx(xt,{variant:"primary",size:"sm",onClick:()=>me(_e),disabled:V,children:"Start Retest"})}return St?l.jsx(xt,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):(Ae.debug(" Button render, isStartingTest:",V,"test:",_e.test_type),l.jsx(xt,{variant:"primary",size:"sm",onClick:()=>me(_e),disabled:V,children:"Start Test"}))})()})]})},`${_e.test_type}_${_e.test_id}`)),u.length>3&&l.jsx("div",{className:"text-center pt-2",children:l.jsx("button",{onClick:Se,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:fe?"Show Less":`Show ${u.length-3} More`})})]})]}):l.jsxs(Nt.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.3},children:[l.jsx(Nt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.5,type:"spring"},children:""}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Active Tests"}),l.jsx("p",{className:"text-gray-500",children:"No active tests available for your class at the moment."})]})})]})}),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:l.jsxs(er,{children:[l.jsx(er.Header,{children:l.jsx(er.Title,{children:"Test Results"})}),l.jsx(er.Body,{children:d&&d.showResults?l.jsx(_v,{testResults:d,onBackToCabinet:()=>{setTestResults(null)},onRetakeTest:(_e,We)=>{f(),setTestResults(null)},isLoading:v}):l.jsx(c$,{compact:!0,showAll:Q,onToggleShowAll:Ie,maxInitial:3})})]})})]})]}),l.jsx(QB,{isOpen:x.isOpen,onClose:w,testType:x.testType,testId:x.testId,testName:x.testName,questions:x.questions||[],isLoading:x.isLoading||!1}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:j.map(_e=>l.jsx(Ou,{type:_e.type,message:_e.message,onClose:()=>A(We=>We.filter(Ue=>Ue.id!==_e.id))},_e.id))})]})},Mie=({testInfo:e,questions:t,testType:r,studentAnswers:n,onBackToCabinet:s,checkAnswerCorrectness:a,formatStudentAnswerForDisplay:i,getCorrectAnswer:o})=>{const[c,u]=S.useState(0),[d,f]=S.useState(0),[m,p]=S.useState(!0);if(S.useEffect(()=>{const v=()=>{try{const C=Jf(t,n,r).score,k=e?.num_questions||t?.length||0,b=k>0?Math.round(C/k*100):0;u(C),f(b),p(!1)}catch(C){console.error("Error calculating test results:",C),u(0),f(0),p(!1)}};t&&t.length>0?v():p(!1)},[t,n,r,e,Jf]),m)return l.jsx("div",{className:"flex justify-center items-center min-h-64",children:l.jsx("div",{className:"text-lg",children:"Calculating results..."})});const x=e?.num_questions||t?.length||0,w=e?.test_name||e?.title||"Test";return l.jsxs("div",{className:"test-results-page max-w-4xl mx-auto p-6 overflow-y-auto min-h-screen",children:[l.jsx(er,{className:"mb-6",children:l.jsxs("div",{className:"results-header text-center",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Test Results: ",w]}),l.jsx("p",{className:"text-gray-600",children:r==="matching_type"?"Matching Test":r==="multiple_choice"?"Multiple Choice Test":r==="true_false"?"True/False Test":r==="input"?"Input Test":r==="drawing"?"Drawing Test":"Test"})]})}),l.jsx(er,{className:"mb-6",children:l.jsxs("div",{className:"results-summary",children:[l.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-4 text-center",children:["Your Score: ",c," / ",x," (",d,"%)"]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4 mb-4",children:l.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${d>=80?"bg-green-500":d>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${d}%`}})}),l.jsx("div",{className:"text-center",children:l.jsx("p",{className:`text-lg font-medium ${d>=80?"text-green-600":d>=60?"text-yellow-600":"text-red-600"}`,children:d>=80?"Excellent!":d>=60?"Good job!":"Keep practicing!"})})]})}),t&&t.length>0&&l.jsx(er,{className:"mb-6",children:l.jsxs("div",{className:"questions-review",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Question Review"}),l.jsx("div",{className:"space-y-4",children:t.map((v,C)=>{const k=n[String(v.question_id)]||"No answer";console.log(" TestResultsDisplay - Question",C+1,":",{question:v,studentAnswer:k,testType:r});const b=a(v,k,r);return console.log(" TestResultsDisplay - isCorrect result:",b),l.jsxs("div",{className:`question-review p-4 rounded-lg border-2 ${b?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[l.jsxs("div",{className:"question-review-header flex justify-between items-start mb-3",children:[l.jsxs("h4",{className:"text-lg font-medium text-gray-800",children:["Question ",C+1]}),l.jsx("span",{className:`text-2xl font-bold ${b?"text-green-600":"text-red-600"}`,children:b?"":""})]}),l.jsx("div",{className:"question-text mb-3",children:l.jsx("p",{className:"text-gray-700 font-medium",children:v.question})}),l.jsxs("div",{className:"answer-section space-y-2",children:[l.jsxs("p",{className:"student-answer",children:[l.jsx("strong",{className:"text-gray-600",children:"Your Answer:"})," ",l.jsx("span",{className:`font-medium ${b?"text-green-700":"text-red-700"}`,children:i(k,r,v)})]}),!b&&l.jsxs("p",{className:"correct-answer",children:[l.jsx("strong",{className:"text-gray-600",children:"Correct Answer:"})," ",l.jsx("span",{className:"text-green-700 font-medium",children:r==="multiple_choice"?String(v.correct_answer||"").toUpperCase():i(o(v,r),r,v)})]})]})]},v.question_id||C)})})]})}),l.jsx(er,{children:l.jsx("div",{className:"results-actions text-center",children:l.jsx(xt,{onClick:s,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 text-lg font-medium",children:"Back to Cabinet"})})})]})};class Fie{constructor(){this.activeRequests=new Map,this.completedRequests=new Map,this.maxCacheSize=100,this.cacheTimeout=3e4}generateKey(t,r,n={}){const s=Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{});return`${t}_${r}_${JSON.stringify(s)}`}isRequestInProgress(t){return this.activeRequests.has(t)}getCachedResult(t){const r=this.completedRequests.get(t);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.result:null}startRequest(t,r){return this.activeRequests.set(t,r),r.finally(()=>{this.activeRequests.delete(t)}),r}cacheResult(t,r){if(this.completedRequests.size>=this.maxCacheSize){const n=this.completedRequests.keys().next().value;this.completedRequests.delete(n)}this.completedRequests.set(t,{result:r,timestamp:Date.now()})}async deduplicateApiCall(t,r,n,s){const a=this.generateKey(t,r,n);if(this.isRequestInProgress(a))return console.log(" API deduplication: Request already in progress, waiting...",a),this.activeRequests.get(a);const i=this.getCachedResult(a);if(i)return console.log(" API deduplication: Using cached result",a),i;console.log(" API deduplication: Making new request",a);const o=this.startRequest(a,s());try{const c=await o;return this.cacheResult(a,c),c}catch(c){throw c}}clearCache(){this.activeRequests.clear(),this.completedRequests.clear(),console.log(" API deduplication: Cache cleared")}}const qj=new Fie,Oie=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(null,n),t)}},Die=({onBackToCabinet:e,currentTest:t})=>{const r=Nl(),{user:n,isAuthenticated:s}=Js(),{activeTests:a,loadActiveTests:i}=bv(),o=S.useCallback(Oie((ze,it,Le)=>{try{if(window.skipInitialProgressSave&&Le.answers&&Le.answers.length===0){Ae.debug(" Skipping empty progress save during restoration"),window.skipInitialProgressSave=!1;return}const rt=`test_progress_${n?.student_id||n?.id||"unknown"}_${ze}_${it}`,qt=localStorage.getItem(rt);if(qt&&Le.answers&&Le.answers.length===0)try{const Xt=JSON.parse(qt);if(Xt.answers&&Xt.answers.length>0){Ae.debug(" Skipping empty progress save - existing progress is better:",Xt.answers);return}}catch{}localStorage.setItem(rt,JSON.stringify(Le)),Ae.debug(`Saved test progress for ${ze}_${it}:`,Le)}catch(st){Ae.error("Error saving test progress:",st)}},1e3),[n?.student_id,n?.id]),c=S.useCallback((ze,it,Le)=>{o(ze,it,Le)},[o]),u=S.useCallback((ze,it)=>{try{const st=`test_progress_${n?.student_id||n?.id||"unknown"}_${ze}_${it}`,rt=localStorage.getItem(st);return rt?JSON.parse(rt):null}catch(Le){return Ae.error("Error getting test progress:",Le),null}},[n?.student_id,n?.id]),d=S.useCallback((ze,it)=>{try{const Le=n?.student_id||n?.id||"unknown",st=`test_progress_${Le}_${ze}_${it}`;localStorage.removeItem(st);for(let rt=0;rt<localStorage.length;rt++){const qt=localStorage.key(rt);qt&&qt.startsWith(`test_progress_${Le}_${ze}_${it}_`)&&(localStorage.removeItem(qt),Ae.debug(` Cleared individual question key: ${qt}`))}Ae.debug(`Cleared test progress for ${ze}_${it}`)}catch(Le){Ae.error("Error clearing test progress:",Le)}},[n?.student_id,n?.id]),[f,m]=S.useState(!0),[p,x]=S.useState(!1),[w,v]=S.useState(""),[C,k]=S.useState(!1),[b,j]=S.useState(""),[A,F]=S.useState([]),[D,M]=S.useState(t?"test":"list"),[O,L]=S.useState(null),[W,re]=S.useState(null),[ie,xe]=S.useState(null),[de,fe]=S.useState([]),[H,Q]=S.useState([]),[U,V]=S.useState(0),[X,z]=S.useState(0),[K,te]=S.useState(null),se=Hs.useRef(null),pe=Hs.useRef(null),[oe,ye]=S.useState(!1),[we,Se]=S.useState(!1),[Ie,me]=S.useState(null),[_e,We]=S.useState(null),[Ue,St]=S.useState(!1),[Ze,Kt]=S.useState(!1),[yt,Rt]=S.useState({isInitialized:!1,initializationId:null,lastTestId:null,initializationCount:0}),[At,wt]=S.useState({isRestored:!1,restoredTestId:null,restorationCount:0}),{startTracking:Ft,stopTracking:or,getCheatingData:dr,clearData:nr,isCheating:Xe,tabSwitches:Qe}=Yp(O?.test_type,O?.test_id,n?.student_id||n?.id);S.useEffect(()=>{(()=>{const it=[];for(let Le=0;Le<localStorage.length;Le++){const st=localStorage.key(Le);if(st&&st.startsWith("test_progress_")&&!st.includes("_51712_")&&!st.includes("_51736_")){const rt=st.split("_");rt.length===4&&rt[0]==="test"&&rt[1]==="progress"&&it.push(st)}}it.forEach(Le=>{localStorage.removeItem(Le),Ae.debug(" Cleared old cache key:",Le)})})()},[]);const ut=S.useCallback(()=>{const ze=O?.test_id,it=n?.student_id||n?.id;if(!it||!ze)return Ae.debug(" Skipping initialization - missing required data:",{studentId:it,currentTestId:ze}),!1;const Le=`${it}_${ze}_${Date.now()}`;return yt.isInitialized&&yt.lastTestId===ze?(Ae.debug(" Already initialized for this test - skipping"),!1):yt.initializationId?(Ae.debug(" Initialization in progress - skipping duplicate"),!1):(Ae.debug(" Starting initialization:",Le),Rt({isInitialized:!1,initializationId:Le,lastTestId:ze}),!0)},[yt,O,n?.student_id,n?.id]),mt=S.useCallback(()=>{Rt(ze=>({...ze,isInitialized:!0,initializationId:null})),Ae.debug(" Initialization completed")},[]),ht=S.useCallback(async()=>{Ae.debug(" Initializing Student Tests...");try{if(m(!0),j(""),!s||!n){Ae.debug(" User not authenticated"),j("User not authenticated");return}if(n.role!==el.STUDENT){Ae.error(" Invalid user role for student tests:",n.role),j("Access denied. Student role required.");return}Ae.debug(" Loading active tests..."),await i(),mt(),Ae.debug(" Student Tests initialization complete!")}catch(ze){Ae.error(" Error initializing student tests:",ze),j("Failed to initialize student tests")}finally{m(!1)}},[s,n,i,mt]);S.useEffect(()=>{ut()&&ht()},[ut,ht]),S.useEffect(()=>{t&&(Ae.debug(" Auto-starting test from prop:",t),k(!0),sr(t))},[t]),S.useCallback(async()=>{Ae.debug(" Loading student active tests...");try{const ze=await Kn.getActiveTests();Ae.debug(" Active tests loaded:",ze);const it=ze.map(Le=>({...Le,subject_id:Le.subject_id||Le.subjectId,teacher_id:Le.teacher_id||Le.teacherId,is_active:Le.is_active!==void 0?Le.is_active:!0,created_at:Le.created_at||Le.createdAt,updated_at:Le.updated_at||Le.updatedAt}));return We(new Date),it}catch(ze){throw Ae.error(" Error loading active tests:",ze),ze}},[]),S.useCallback(async(ze,it)=>{Ae.debug(" Checking test completion:",ze,it);try{const Le=u(ze,it);return Le&&Le.completed}catch(Le){return Ae.error(" Error checking test completion:",Le),!1}},[u]),S.useEffect(()=>{if(de.length>0&&O?.test_id){const ze=setTimeout(()=>{let it=!1;const Le=new Array(de.length).fill("");if(de.forEach((st,rt)=>{const Xt=`test_progress_${n?.student_id||n?.id||"unknown"}_${W}_${O?.test_id}_${st.question_id}`,Yt=localStorage.getItem(Xt);if(Yt){const Z=Yt.replace(/^"(.*)"$/,"$1");Le[rt]=Z,it=!0}}),it){Q(Le);const st=Le.filter(qt=>qt&&typeof qt=="string"&&qt.trim()!=="").length,rt=de.length>0?st/de.length*100:0;V(rt)}},100);return()=>clearTimeout(ze)}},[de,W,O?.test_id]);const Ot=S.useCallback(async(ze,it)=>{Ae.debug(" Marking test as completed:",ze,it);try{const Le=u(ze,it)||{};Le.completed=!0,Le.completedAt=new Date().toISOString(),c(ze,it,Le);const rt=`test_completed_${n?.student_id||n?.id||""}_${ze}_${it}`;localStorage.setItem(rt,"true"),Ae.debug(" Test completion marked in localStorage:",rt),Ae.debug(" localStorage value after setting:",localStorage.getItem(rt)),Ee("Test marked as completed","success")}catch(Le){Ae.error(" Error marking test as completed:",Le),Ee("Failed to mark test as completed","error")}},[u,c]),nt=S.useCallback(ze=>{Ae.debug(" Showing test details:",ze),me(ze),Se(!0)},[]),sr=S.useCallback(async ze=>{Ae.debug(" Starting test:",ze);let it=Date.now(),Le;try{v(""),x(!0),it=Date.now();const st=()=>{const ge=Date.now()-it,tt=Math.max(0,250-ge);setTimeout(()=>{m(!1),x(!1)},tt)};let rt=!1;Le=setTimeout(()=>{rt=!0,v("Loading is taking longer than expected...")},15e3);const Xt=`test_completed_${n?.student_id||n?.id||""}_${ze.test_type}_${ze.test_id}`,Yt=localStorage.getItem(Xt)==="true";if(Yt&&!ze?.retest_available){Ae.debug(" Test already completed, redirecting to main cabinet"),Ee("This test has already been completed","info"),r("/student");return}if(Yt&&ze?.retest_available&&Ae.debug(" Test completed but retest available, allowing retest"),ze.test_type===_s.MATCHING){Ae.debug(" Redirecting to matching test page for testId:",ze.test_id),r(`/student/matching-test/${ze.test_id}`);return}if(ze.test_type===_s.WORD_MATCHING){Ae.debug(" Redirecting to word matching test page for testId:",ze.test_id),r(`/student/word-matching-test/${ze.test_id}`);return}L(ze),re(ze.test_type),wt({isRestored:!1,restoredTestId:null,restorationCount:0});const[Z,ae]=await Promise.all([qj.deduplicateApiCall("GET",`test-info-${ze.test_type}-${ze.test_id}`,{testType:ze.test_type,testId:ze.test_id},()=>Kn.getTestInfo(ze.test_type,ze.test_id)),qj.deduplicateApiCall("GET",`test-questions-${ze.test_type}-${ze.test_id}`,{testType:ze.test_type,testId:ze.test_id},()=>Kn.getTestQuestions(ze.test_type,ze.test_id))]);xe(Z);let jt=ae;try{if(!!Z?.is_shuffled){const Ke=n?.student_id||n?.id||"unknown",tt=`${Ke}:${ze.test_type}:${ze.test_id}`,Tt=Array.from(tt).reduce(($t,mr)=>($t<<5)-$t+mr.charCodeAt(0),0)>>>0,cr=`test_shuffle_order_${Ke}_${ze.test_type}_${ze.test_id}`,Vt=localStorage.getItem(cr);if(Vt){const $t=JSON.parse(Vt),mr=new Map(ae.map(Zr=>[Zr.question_id,Zr]));jt=$t.map(Zr=>mr.get(Zr)).filter(Boolean)}else{const mr=function(jr){return function(){var Pr=jr+=1831565813;return Pr=Math.imul(Pr^Pr>>>15,Pr|1),Pr^=Pr+Math.imul(Pr^Pr>>>7,Pr|61),((Pr^Pr>>>14)>>>0)/4294967296}}(Tt);jt=[...ae];for(let jr=jt.length-1;jr>0;jr--){const Pr=Math.floor(mr()*(jr+1));[jt[jr],jt[Pr]]=[jt[Pr],jt[jr]]}const Zr=jt.map(jr=>jr.question_id);localStorage.setItem(cr,JSON.stringify(Zr))}}}catch(ge){Ae.error("Shuffle error (ignored):",ge)}fe(jt),st();const G=ze.test_id;if(At.isRestored&&At.restoredTestId===G){Ae.debug(" Progress already restored for this test - skipping");return}Ae.debug(" Starting progress restoration for test:",ze.test_type,ze.test_id),wt(ge=>({...ge,restorationCount:ge.restorationCount+1}));const ue=n?.student_id||n?.id||"unknown",Ce=`test_progress_${ue}_${ze.test_type}_${ze.test_id}`,be=localStorage.getItem(Ce);Ae.debug(" Checking main progress key:",Ce),Ae.debug(" Main progress data:",be);let Me=new Array(ae.length).fill("");if(be)try{const ge=JSON.parse(be);Ae.debug(" Parsed progress data:",ge),ge.answers&&Array.isArray(ge.answers)&&(Me=ge.answers,Ae.debug(" Loaded answers from main progress:",Me))}catch(ge){Ae.error(" Error parsing main progress:",ge)}ae.forEach((ge,Ke)=>{const tt=`test_progress_${ue}_${ze.test_type}_${ze.test_id}_${ge.question_id}`,Tt=localStorage.getItem(tt);if(Ae.debug(` Checking individual answer for question ${ge.question_id}:`,Tt),Tt){const cr=Tt.replace(/^"(.*)"$/,"$1");Me[Ke]=cr,Ae.debug(` Loaded individual answer for question ${ge.question_id}:`,cr)}}),Ae.debug(" Final initial answers after loading all sources:",Me);const De=Me.filter(ge=>ge&&typeof ge=="string"&&ge.trim()!=="").length;if(De>0){Ae.debug(` Restoring progress: ${De}/${ae.length} questions answered`),Q(Me);const ge=ae.length>0?De/ae.length*100:0;V(ge),Ae.debug(` Progress restored: ${ge}% complete`)}else Ae.debug(" No existing progress found - starting fresh"),Q(Me),V(0);wt(ge=>({...ge,isRestored:!0,restoredTestId:G})),De>0&&(Ae.debug(" Existing progress found - preventing overwrite during initialization"),window.skipInitialProgressSave=!0);const Ve=Number(Z?.allowed_time||0),bt=n?.student_id||n?.id||"unknown";if(se.current=`test_timer_${bt}_${ze.test_type}_${ze.test_id}`,Ve>0)try{const ge=localStorage.getItem(se.current),Ke=Date.now();if(ge){const tt=JSON.parse(ge),Tt=Math.floor((Ke-new Date(tt.lastTickAt).getTime())/1e3),cr=Math.max(0,Number(tt.remainingSeconds||Ve)-Math.max(0,Tt));z(cr),pe.current=Ke}else z(Ve),pe.current=Ke,localStorage.setItem(se.current,JSON.stringify({remainingSeconds:Ve,lastTickAt:new Date(Ke).toISOString(),startedAt:new Date(Ke).toISOString()}))}catch(ge){Ae.error("Timer cache init error:",ge),z(Ve)}else z(0);const ot=new Date;te(ot),Ae.debug(" Test timer started at:",ot.toISOString());const dt=n?.student_id||n?.id||"unknown",ee=`anti_cheating_${dt}_${ze.test_type}_${ze.test_id}`,je=localStorage.getItem(ee);if(Ae.debug(" Checking for anti-cheating data with key:",ee),Ae.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),Ae.debug(" Current test details:",{testType:ze.test_type,testId:ze.test_id,studentId:dt}),je)try{const ge=JSON.parse(je);Ae.debug(" Found existing anti-cheating data for THIS test:",ge),Ae.debug(" Visibility change times for this test:",ge.tabSwitches||0),Ae.debug(" Cheating status for this test:",ge.isCheating||!1),ge.isCheating&&(Ae.debug(" WARNING: Student has been flagged for cheating in THIS test!"),Ae.debug(" Tab switches detected in this test:",ge.tabSwitches),Ee(` Warning: Suspicious activity detected in this test (${ge.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(ge){Ae.error(" Error parsing existing anti-cheating data:",ge)}else Ae.debug(" No existing anti-cheating data found for this test - starting fresh");Ft(),Ae.debug(" Anti-cheating tracking started"),M("test"),Ae.debug(" Test started successfully")}catch(st){Ae.error(" Error starting test:",st),Ee("Failed to start test","error"),v("Failed to load test data. Please try again.")}finally{const st=Date.now()-it,qt=Math.max(0,250-st);setTimeout(()=>{m(!1),x(!1)},qt),k(!1);try{Le&&clearTimeout(Le)}catch{}}},[u]),kr=S.useCallback(async()=>{if(!O||!ie||!de||!H){Ee("No test data to submit","error");return}Ae.debug(" Submitting test:",O);try{ye(!0);const ze=Jf(de,H,O.test_type),it=new Date,Le=K?Math.round((it-K)/1e3):0,st=K?K.toISOString():it.toISOString();Ae.debug(" Test timing:",{startedAt:st,endTime:it.toISOString(),timeTaken:`${Le} seconds`});const rt=dr();Ae.debug(" Anti-cheating data for submission:",rt);const qt={};de.forEach((Yt,Z)=>{qt[Yt.question_id]=H[Z]??""}),O.test_type==="drawing"&&(Ae.debug(" Drawing test answers being submitted:",H),Ae.debug(" Drawing test answers type:",typeof H[0]),Ae.debug(" Drawing test answers content:",H[0]));const Xt=await Kn.submitTest(O.test_type,O.test_id,H,{time_taken:(()=>{const Yt=Number(ie?.allowed_time||0);return Yt>0?Math.min(Le,Yt):Le})(),started_at:st,submitted_at:it.toISOString(),answers_by_id:qt,question_order:de.map(Yt=>Yt.question_id),caught_cheating:rt.caught_cheating,visibility_change_times:rt.visibility_change_times,retest_assignment_id:(()=>{const Z=`retest_assignment_id_${n?.student_id||n?.id||""}_${O.test_type}_${O.test_id}`,ae=localStorage.getItem(Z);return Ae.debug(" Frontend retest key:",Z),Ae.debug(" Frontend retest assignment ID from localStorage:",ae),Ae.debug(" Frontend retest assignment ID converted:",ae?Number(ae):null),Ae.debug(" Frontend current test data:",O),Ae.debug(" Frontend current test retest_assignment_id:",O.retest_assignment_id),ae?Number(ae):null})(),parent_test_id:O.test_id},n);if(Ae.debug(" Test submission result:",Xt),Xt.success){window.recentTestCompleted=!0,Ae.debug(" Test completed - cache refresh triggered");const Yt=n?.student_id||n?.id||"",Z=`retest_assignment_id_${Yt}_${O.test_type}_${O.test_id}`;if(!!localStorage.getItem(Z)){const be=O?.retest_attempts_left||O?.max_attempts||3,Me=(Xt?.percentage_score??0)>=50;if(Me){const De=`retest_attempt${be}_${Yt}_${O.test_type}_${O.test_id}`;localStorage.setItem(De,"true"),Ae.debug(" Passed retest, marking last-slot key:",De);let Ve=0;for(let ot=1;ot<=10;ot++){const dt=`retest_attempt${ot}_${Yt}_${O.test_type}_${O.test_id}`;localStorage.getItem(dt)==="true"&&Ve++}if(Yt&&O.test_type&&O.test_id){const ot=`test_completed_${Yt}_${O.test_type}_${O.test_id}`;localStorage.setItem(ot,"true"),Ae.debug(" Marked retest as completed (student passed):",ot);const dt=`retest_attempts_${Yt}_${O.test_type}_${O.test_id}`;localStorage.setItem(dt,JSON.stringify({used:Ve,max:be})),Ae.debug(" Set retest attempts metadata (student passed):",dt,{used:Ve,max:be})}const bt=`retest1_${Yt}_${O.test_type}_${O.test_id}`;localStorage.removeItem(bt)}else{let De=1;for(let ee=1;ee<=10;ee++){const je=`retest_attempt${ee}_${Yt}_${O.test_type}_${O.test_id}`;if(localStorage.getItem(je)!=="true"){De=ee;break}}const Ve=`retest_attempt${De}_${Yt}_${O.test_type}_${O.test_id}`;localStorage.setItem(Ve,"true"),Ae.debug(" Marked retest attempt as completed:",Ve);let bt=0;for(let ee=1;ee<=10;ee++){const je=`retest_attempt${ee}_${Yt}_${O.test_type}_${O.test_id}`;localStorage.getItem(je)==="true"&&bt++}const ot=be-bt,dt=ot<=0||Me;if(Ae.debug(" Retest completion check:",{usedAttempts:bt,maxAttempts:be,attemptsLeft:ot,passed:Me,shouldComplete:dt}),dt&&Yt&&O.test_type&&O.test_id){const ee=`test_completed_${Yt}_${O.test_type}_${O.test_id}`;localStorage.setItem(ee,"true"),Ae.debug(" Marked retest as completed (attempts exhausted or passed):",ee);const je=`retest_attempts_${Yt}_${O.test_type}_${O.test_id}`;localStorage.setItem(je,JSON.stringify({used:bt,max:be})),Ae.debug(" Set retest attempts metadata (attempts exhausted):",je,{used:bt,max:be})}if(bt>=be){const ee=`retest1_${Yt}_${O.test_type}_${O.test_id}`;localStorage.removeItem(ee)}}}if(Ae.debug(" Marking test as completed..."),await Ot(O.test_type,O.test_id),O.test_type!=="drawing"){Ae.debug(" Caching test results after submission...");const Me=`student_results_table_${n?.student_id||n?.id||"unknown"}`,{setCachedData:De,CACHE_TTL:Ve}=await co(async()=>{const{setCachedData:bt,CACHE_TTL:ot}=await Promise.resolve().then(()=>Vg);return{setCachedData:bt,CACHE_TTL:ot}},void 0);De(Me,Xt,Ve.student_results_table),Ae.debug(" Test results cached with key:",Me)}else Ae.debug(" Drawing test submitted - not caching results (will appear after teacher grades)");Ae.debug(" Clearing test progress..."),d(O.test_type,O.test_id);try{const be=n?.student_id||n?.id||"unknown",Me=`test_timer_${be}_${O.test_type}_${O.test_id}`;localStorage.removeItem(Me);const De=`test_shuffle_order_${be}_${O.test_type}_${O.test_id}`;localStorage.removeItem(De)}catch{}if(n?.student_id){const be=`test_completed_${n.student_id}_${O.test_type}_${O.test_id}`;localStorage.setItem(be,"true"),Ae.debug(" Test marked as completed in localStorage:",be)}try{const be=n?.student_id||n?.id||"",Me=`retest1_${be}_${O.test_type}_${O.test_id}`,De=`retest_assignment_id_${be}_${O.test_type}_${O.test_id}`;localStorage.removeItem(Me),localStorage.removeItem(De),Ae.debug(" Cleared retest keys:",Me,De)}catch(be){Ae.warn("Failed to clear retest keys:",be)}Ae.debug(" Clearing test progress and anti-cheating data for THIS test only...");const jt=n?.student_id||n?.id||"unknown",G=[],ue=`test_progress_${jt}_${O.test_type}_${O.test_id}`,Ce=`anti_cheating_${jt}_${O.test_type}_${O.test_id}`;for(let be=0;be<localStorage.length;be++){const Me=localStorage.key(be);Me&&(Me===ue||Me===Ce)&&G.push(Me)}G.forEach(be=>{localStorage.removeItem(be),Ae.debug(` Cleared for THIS test only: ${be}`)}),Ae.debug(" Clearing anti-cheating data..."),or(),nr(),O.test_type!=="drawing"?M("results"):r("/student"),Ee("Test submitted successfully!","success"),Ae.debug(" Test submitted successfully")}else throw Ae.error(" Test submission failed:",Xt.error),new Error(Xt.error||"Failed to submit test")}catch(ze){Ae.error(" Error submitting test:",ze),Ee("Failed to submit test","error")}finally{ye(!1)}},[O,ie,de,H,Ot,d]);S.useCallback(()=>(Ae.debug(" Collecting test answers..."),H),[H]);const Er=S.useCallback(()=>{if(!de||!H)return;const ze=H.filter(Le=>Le&&typeof Le=="string"&&Le.trim()!=="").length,it=de.length>0?ze/de.length*100:0;if(V(it),Ae.debug(` Progress updated: ${ze}/${de.length} questions answered (${Math.round(it)}%)`),O){const Le={answers:H,progress:it,lastSaved:new Date().toISOString()};c(O.test_type,O.test_id,Le)}},[de,H,O,c]);S.useEffect(()=>{Er()},[Er]);const Gr=S.useCallback(()=>{if(!H)return 0;const ze=H.filter(it=>it&&typeof it=="string"&&it.trim()!=="").length;return Ae.debug(" getAnsweredCount:",{studentAnswers:H,answeredCount:ze,totalQuestions:de?.length}),ze},[H,de]),Ar=S.useCallback(()=>{if(Ae.debug(" Navigating back to cabinet..."),O&&n?.student_id){Ae.debug(" Cabinet navigation detected - counting as cheating attempt");const it=`anti_cheating_${n?.student_id||n?.id||"unknown"}_${O.test_type}_${O.test_id}`,Le=localStorage.getItem(it);let st=0,rt=!1;if(Le)try{const Z=JSON.parse(Le);st=Z.tabSwitches||0,rt=Z.isCheating||!1}catch(Z){Ae.error(" Error parsing existing anti-cheating data:",Z)}const qt=st+1,Xt=qt>=2;Ae.debug(` Tab switch count: ${st}  ${qt} (cheating: ${Xt})`);const Yt={tabSwitches:qt,isCheating:Xt,lastUpdated:new Date().toISOString()};localStorage.setItem(it,JSON.stringify(Yt)),Ae.debug(" Anti-cheating data updated for cabinet navigation:",Yt)}e?e():r("/student")},[e,r,O,n?.student_id]);S.useCallback(()=>{Ae.debug(" Showing test results..."),M("results")},[]);const vr=S.useCallback((ze,it,Le=null)=>{switch(Ae.debug(" Formatting student answer for display:",ze,"testType:",it,"question:",Le),it){case _s.MULTIPLE_CHOICE:if(ze.toString().startsWith("Option "))return ze;if(Le&&typeof ze=="string"&&!isNaN(parseInt(ze))){const st=parseInt(ze),rt=`option_${String.fromCharCode(97+st)}`,qt=Le[rt];if(qt)return Ae.debug(" Converted",ze,"to option text:",qt),qt;{const Xt=String.fromCharCode(65+st);return Ae.debug(" Converted",ze,"to",Xt),Xt}}else{if(typeof ze=="string"&&isNaN(parseInt(ze)))return Ae.debug(" Already formatted text:",ze),ze;{const st=String.fromCharCode(65+parseInt(ze));return Ae.debug(" Converted",ze,"to",st),st}}case _s.TRUE_FALSE:return ze==="true"?"True":"False";case _s.INPUT:return ze;case _s.MATCHING:return typeof ze=="object"?JSON.stringify(ze):ze;case _s.WORD_MATCHING:return typeof ze=="object"?JSON.stringify(ze):ze;case _s.DRAWING:return ze&&ze.trim()!==""?"Drawing submitted":"No drawing";case _s.FILL_BLANKS:return ze;default:return Ae.warn(" Unknown test type for answer formatting:",it),ze}},[]),Ee=S.useCallback((ze,it)=>{const Le={id:Date.now(),message:ze,type:it,timestamp:new Date};F(st=>[...st,Le]),setTimeout(()=>{F(st=>st.filter(rt=>rt.id!==Le.id))},Ym.NOTIFICATION_DURATION)},[]);S.useEffect(()=>{Er()},[Er]),S.useEffect(()=>{if(D!=="test")return;const ze=Number(ie?.allowed_time||0);if(!ze)return;const it=setInterval(()=>{z(Le=>{const st=Math.max(0,Le-1);try{const rt=Date.now();pe.current||(pe.current=rt),se.current&&localStorage.setItem(se.current,JSON.stringify({remainingSeconds:st,lastTickAt:new Date(rt).toISOString(),startedAt:K?K.toISOString():new Date(rt-(ze-st)*1e3).toISOString()}))}catch{}return st===0&&kr(),st})},1e3);return()=>clearInterval(it)},[D,ie?.allowed_time,kr,K]);const Be=S.useCallback((ze,it)=>{if(!ze)return null;const Le=(st,rt)=>{const qt=[...H];qt[it]=rt,Q(qt),Ae.debug(` Answer changed: question ${st} = ${rt}`),Ae.debug(" Updated studentAnswers:",qt)};switch(O.test_type){case _s.TRUE_FALSE:return l.jsx(Cae,{question:ze,questionIndex:it,studentAnswer:H[it]||"",onAnswerChange:Le,mode:"student",testId:O?.test_id,testType:W,displayNumber:it+1});case _s.MULTIPLE_CHOICE:return l.jsx(Nae,{question:ze,questionIndex:it,studentAnswer:H[it]||"",onAnswerChange:Le,mode:"student",testId:O?.test_id,testType:W,displayNumber:it+1});case _s.INPUT:return l.jsx(Aae,{question:ze,questionIndex:it,studentAnswer:H[it]||"",onAnswerChange:Le,mode:"student",testId:O?.test_id,testType:W,displayNumber:it+1});case _s.MATCHING:return Ae.error("Matching test reached renderQuestion - this should not happen"),l.jsxs("div",{className:"text-center p-8",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-4",children:"Matching Test"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Redirecting to matching test page..."}),l.jsx(xt,{onClick:()=>r("/student"),variant:"primary",children:"Back to Dashboard"})]});case _s.DRAWING:return l.jsx(Lae,{question:ze,questionIndex:it,studentAnswer:H[it]||"",onAnswerChange:Le,mode:"student",testId:O?.test_id,testType:W});case _s.FILL_BLANKS:return it===0?l.jsx(Uae,{testText:ie?.test_text,blanks:(de||[]).map((st,rt)=>({id:st.question_id||rt+1,options:st.blank_options||[],correct_answer:st.correct_answers?.[0]||st.correct_answer,question:st.question_json||""})),separateType:ie?.separate_type,testId:O?.test_id,testName:ie?.test_name||O?.test_name,teacherId:ie?.teacher_id||O?.teacher_id,subjectId:ie?.subject_id||O?.subject_id,onTestComplete:kr,onAnswerChange:(st,rt)=>{const qt=de.findIndex(Xt=>Xt.question_id===st);if(qt!==-1){const Xt=[...H];Xt[qt]=rt,Q(Xt),Ae.debug(` Fill Blanks answer changed: question ${st} = ${rt}`)}}},`fill-blanks-${O?.test_id}-${ie?.test_name}`):null;default:return l.jsx("div",{children:"Unsupported question type"})}},[O,H,W]);function qe(){return!O||!ie||!de?null:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:ie.test_name||ie.title||"Test"})}),l.jsx("div",{className:"mb-4",children:l.jsx(zae,{answeredCount:Gr(),totalQuestions:de.length,percentage:Math.round(U),timeElapsed:Number(ie?.allowed_time||0)>0?X:0,showDetails:!0})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Answer all questions below:"}),l.jsx("div",{className:"space-y-8",children:de.map((ze,it)=>l.jsx("div",{className:"question-container",children:Be(ze,it)},ze.question_id||it))})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx(xt,{variant:"primary",size:"lg",onClick:()=>St(!0),disabled:oe||Gr()<de.length,loading:oe,children:oe?"Submitting...":`Submit Test (${Gr()}/${de.length})`})})]})}if(f)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:t?"Starting Test...":"Loading Student Tests..."})]})});if(b)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Tests Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:b}),l.jsx(xt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx(Ka,{isOpen:Ze,onClose:()=>Kt(!1),title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>Kt(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:()=>{Kt(!1),Ar()},variant:"primary",children:"Go Back"})]})]})}),l.jsx(Ka,{isOpen:Ue,onClose:()=>St(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>St(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:()=>{St(!1),kr()},variant:"primary",children:"Submit"})]})]})}),l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Test"})}),l.jsx(xt,{variant:"outline",onClick:()=>Kt(!0),children:"Back to Cabinet"})]})})}),Xe&&D==="results"&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mx-4 sm:mx-6 lg:mx-8 mt-4",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm text-red-700",children:[l.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",Qe," times during the test."]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 overflow-y-auto",children:[!t&&D==="list"&&Ye(),D==="test"&&qe(),D==="results"&&Lt()]}),D==="test"&&p&&l.jsxs("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-[1px] flex flex-col items-center justify-center z-50",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-3 text-gray-700",children:"Preparing your test"}),w&&l.jsx("div",{className:"mt-3 text-sm text-gray-500",children:w})]}),l.jsx(QB,{isOpen:we,onClose:()=>Se(!1),testType:Ie?.test_type,testId:Ie?.test_id,testName:Ie?.test_name,questions:Ie?.questions,isLoading:f}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:A.map(ze=>l.jsx(Ou,{type:ze.type,message:ze.message,onClose:()=>F(it=>it.filter(Le=>Le.id!==ze.id))},ze.id))})]});function Ye(){return!a||a.length===0?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No active tests available for your class."})}):l.jsx("div",{className:"space-y-6",children:a.map((ze,it)=>l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ze.test_name}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Subject:"})," ",ze.subject]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Teacher:"})," ",ze.teacher_name]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Type:"})," ",ze.test_type]})]}),l.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Assigned: ",new Date(ze.assigned_at).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(xt,{variant:"outline",onClick:()=>nt(ze),disabled:C||f,children:"View Details"}),l.jsx(xt,{variant:"primary",onClick:()=>sr(ze),disabled:C||f,children:C?"Starting...":"Start Test"})]})]})},it))})}function Lt(){if(!O||!ie||!de||!H)return null;const ze={};return H.forEach((it,Le)=>{if(de[Le]){const st=de[Le].question_id||de[Le].id||Le;ze[String(st)]=it,Ae.debug(" Converting answer:",{index:Le,questionId:st,answer:it,question:de[Le]})}}),Ae.debug(" Final answersObject:",ze),Ae.debug(" Questions structure:",de.map(it=>({id:it.question_id,correct_answer:it.correct_answer}))),l.jsx(Mie,{testInfo:ie,questions:de,testType:O.test_type,studentAnswers:ze,onBackToCabinet:Ar,checkAnswerCorrectness:Sp,formatStudentAnswerForDisplay:vr,getCorrectAnswer:jy})}},Iie=()=>{const{testId:e}=Gb(),t=Nl(),{user:r}=Js(),{makeAuthenticatedRequest:n}=Zl(),{showNotification:s}=_i(),[a,i]=S.useState(null),[o,c]=S.useState(!0),[u,d]=S.useState(null),[f,m]=S.useState(null),[p,x]=S.useState(!1);Yp("matching_type",a?.id);const w=S.useCallback(()=>{if(!r?.student_id||!e)return!1;const j=`test_completed_${r.student_id}_matching_type_${e}`,A=localStorage.getItem(j)==="true",F=`retest1_${r.student_id}_matching_type_${e}`,D=localStorage.getItem(F)==="true";return A&&!D?(Ae.debug(" Test already completed, redirecting to cabinet"),s("This test has already been completed","info"),t("/student"),!0):!1},[r?.student_id,e,t,s]),v=S.useCallback(async()=>{if(!e){d("Test ID is required"),c(!1);return}if(!w())try{c(!0),d(null);const j=await n(`/.netlify/functions/get-matching-type-test?test_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!j.ok)throw new Error("Failed to load test data");const A=await j.json();if(!A.success)throw new Error(A.message||"Failed to load test");const F=A.data;Ae.debug(" Test data from get-matching-type-test:",F);const D=await n(`/.netlify/functions/get-test-questions?test_id=${e}&test_type=matching_type`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!D.ok)throw new Error("Failed to load test questions");const M=await D.json();if(!M.success)throw new Error(M.message||"Failed to load test questions");Ae.debug(" Questions data from get-test-questions:",M);const O={id:F.test_id,test_name:F.test_name,teacher_id:F.teacher_id,subject_id:F.subject_id,image_url:F.image_url,image:null,blocks:(()=>{if(Array.isArray(M.questions)&&M.questions.length>0){const L=M.questions[0];return Array.isArray(L.blocks)?L.blocks.map((W,re)=>{let ie=W.block_coordinates||W.coordinates||(typeof W.x=="number"?{x:W.x,y:W.y,width:W.width,height:W.height}:null);if(typeof ie=="string")try{ie=JSON.parse(ie)}catch{ie=null}return(!ie||typeof ie!="object")&&(ie={x:0,y:0,width:30,height:10}),ie={x:(typeof ie.x=="number"?ie.x:Number(ie.x))||0,y:(typeof ie.y=="number"?ie.y:Number(ie.y))||0,width:(typeof ie.width=="number"?ie.width:Number(ie.width))||30,height:(typeof ie.height=="number"?ie.height:Number(ie.height))||10},{id:W.block_id||W.question_id||W.id||re+1,word:W.word||`Word ${re+1}`,coordinates:ie,hasArrow:!!W.has_arrow,arrow:W.arrow||null}}):M.questions.map(W=>{Ae.debug(" Processing question:",W);let re;try{re=typeof W.block_coordinates=="string"?JSON.parse(W.block_coordinates):W.block_coordinates}catch{re={x:0,y:0,width:100,height:100}}return(!re||typeof re!="object")&&(re={x:0,y:0,width:100,height:100}),re={x:(typeof re.x=="number"?re.x:Number(re.x))||0,y:(typeof re.y=="number"?re.y:Number(re.y))||0,width:(typeof re.width=="number"?re.width:Number(re.width))||100,height:(typeof re.height=="number"?re.height:Number(re.height))||100},{id:W.question_id,word:W.word,coordinates:re,hasArrow:W.has_arrow,arrow:W.arrow}})}return[]})(),words:(()=>{if(Array.isArray(M.questions)&&M.questions.length>0){const L=M.questions[0];if(Array.isArray(L.words)){const W=L.words,re=Array.isArray(L.blocks)?L.blocks:[];return typeof W[0]=="string"?W.map((xe,de)=>({id:`w_${re[de]?.question_id||re[de]?.block_id||M.questions[de]?.question_id||de+1}_${de}`,word:String(xe),blockId:null,isPlaced:!1,isCorrect:!1})):W.map((xe,de)=>({id:`w_${xe.question_id||xe.id||de+1}_${de}`,word:xe.word||String(xe.text||""),blockId:null,isPlaced:!1,isCorrect:!1}))}return M.questions.map(W=>({id:`w_${W.question_id}`,word:W.word,blockId:null,isPlaced:!1,isCorrect:!1}))}return[]})(),arrows:F.arrows?F.arrows.map(L=>(Ae.debug(" Processing arrow:",L),{id:L.id,questionId:L.question_id,blockId:L.block_id||L.question_id,start:{x:Number(L.start_x)||0,y:Number(L.start_y)||0},end:{x:Number(L.end_x)||0,y:Number(L.end_y)||0},rel_start_x:L.rel_start_x!==null?Number(L.rel_start_x):null,rel_start_y:L.rel_start_y!==null?Number(L.rel_start_y):null,rel_end_x:L.rel_end_x!==null?Number(L.rel_end_x):null,rel_end_y:L.rel_end_y!==null?Number(L.rel_end_y):null,image_width:L.image_width?Number(L.image_width):null,image_height:L.image_height?Number(L.image_height):null,style:(typeof L.style=="string"?JSON.parse(L.style):L.style)||{color:"#dc3545",thickness:3}})):[]};if(F.image_url){const L=new Image;L.crossOrigin="anonymous",L.onload=()=>{O.image=L,i(O),c(!1)},L.onerror=()=>{Ae.warn("Failed to load test image"),i(O),c(!1)},L.src=F.image_url}else i(O),c(!1)}catch(j){Ae.error("Error loading test data:",j),d(j.message||"Failed to load test"),c(!1)}},[e,n]);S.useEffect(()=>{r?.student_id&&v()},[v,r?.student_id]);const C=S.useCallback(async j=>{Ae.debug("Test completed:",j),s("Test completed successfully!","success");const A=parseInt(j)||0,F=a?.blocks?.length||a?.words?.length||0,D=F>0?Math.round(A/F*100):0,M={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"matching_type",score:A,totalQuestions:F,percentage:D,passed:D>=60,questionAnalysis:a?.questions?.map((O,L)=>({questionNumber:L+1,isCorrect:L<A,userAnswer:L<A?`Matched: ${O.word}`:"Not answered",correctAnswer:`Match: ${O.word}`}))||Array.from({length:F},(O,L)=>({questionNumber:L+1,isCorrect:L<A,userAnswer:L<A?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};Ae.debug(" Using test results data:",M),m(M),x(!0)},[a,s]),k=S.useCallback(()=>{t("/student")},[t]),b=S.useCallback(()=>{x(!1),m(null),v()},[v]);return o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx(er,{className:"max-w-md w-full",children:l.jsxs(er.Body,{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading test..."})]})})}):u?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx(er,{className:"max-w-md w-full",children:l.jsxs(er.Body,{className:"text-center",children:[l.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-4",children:u}),l.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})}):a?p&&f?l.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:l.jsx(_v,{testResults:f,onBackToCabinet:k,onRetakeTest:b,isLoading:!1})}):l.jsx(jae,{testData:a,onTestComplete:C,onBackToCabinet:k}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx(er,{className:"max-w-md w-full",children:l.jsxs(er.Body,{className:"text-center",children:[l.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load test data"}),l.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})})},Rie=()=>{const{testId:e}=Gb(),t=Nl(),{user:r}=Js(),{makeAuthenticatedRequest:n}=Zl(),{showNotification:s}=_i(),[a,i]=S.useState(null),[o,c]=S.useState(!0),[u,d]=S.useState(null),[f,m]=S.useState(null),[p,x]=S.useState(!1),w=S.useCallback(()=>{if(!r?.student_id||!e)return!1;const b=`test_completed_${r.student_id}_word_matching_${e}`,j=`retest1_${r.student_id}_word_matching_${e}`;return localStorage.getItem(j)==="true"?!1:localStorage.getItem(b)==="true"},[r?.student_id,e]),v=S.useCallback(async()=>{if(!e){d("Test ID is required"),c(!1);return}if(w()){s("This test has already been completed","warning"),t("/student");return}c(!0),d(null);try{const b=`word_matching_test_${e}`,j=ja(b);if(j){if(Ae.debug(" Word matching test loaded from cache:",j),j.id){let D=j,M=Array.isArray(D.correctPairs)?D.correctPairs:D.correctPairs&&typeof D.correctPairs=="object"?Object.keys(D.correctPairs).map(O=>[Number(O),D.correctPairs[O]]).sort((O,L)=>O[0]-L[0]).map(([,O])=>O):null;if(Array.isArray(D.leftWords)&&Array.isArray(D.rightWords)&&Array.isArray(M)){const O=D.rightWords.map((de,fe)=>fe),L=D.leftWords.map((de,fe)=>fe);for(let de=O.length-1;de>0;de--){const fe=Math.floor(Math.random()*(de+1));[O[de],O[fe]]=[O[fe],O[de]]}for(let de=L.length-1;de>0;de--){const fe=Math.floor(Math.random()*(de+1));[L[de],L[fe]]=[L[fe],L[de]]}const W=O.map(de=>D.rightWords[de]),re=L.map(de=>D.leftWords[de]),ie=new Map(O.map((de,fe)=>[de,fe])),xe=L.map(de=>{const fe=M[de];return ie.get(fe)});D={...D,leftWords:re,rightWords:W,correctPairs:xe}}i(D)}else{let M={id:j.test_id,test_id:j.test_id,test_name:j.test_name,teacher_id:j.teacher_id,subject_id:j.subject_id,num_questions:j.num_questions,interaction_type:j.interaction_type,passing_score:j.passing_score,created_at:j.created_at,updated_at:j.updated_at,leftWords:j.leftWords,rightWords:j.rightWords,correctPairs:j.correctPairs,originalPairs:j.originalPairs},O=Array.isArray(M.correctPairs)?M.correctPairs:M.correctPairs&&typeof M.correctPairs=="object"?Object.keys(M.correctPairs).map(L=>[Number(L),M.correctPairs[L]]).sort((L,W)=>L[0]-W[0]).map(([,L])=>L):null;if(Array.isArray(M.leftWords)&&Array.isArray(M.rightWords)&&Array.isArray(O)){const L=M.rightWords.map((fe,H)=>H),W=M.leftWords.map((fe,H)=>H);for(let fe=L.length-1;fe>0;fe--){const H=Math.floor(Math.random()*(fe+1));[L[fe],L[H]]=[L[H],L[fe]]}for(let fe=W.length-1;fe>0;fe--){const H=Math.floor(Math.random()*(fe+1));[W[fe],W[H]]=[W[H],W[fe]]}const re=L.map(fe=>M.rightWords[fe]),ie=W.map(fe=>M.leftWords[fe]),xe=new Map(L.map((fe,H)=>[fe,H])),de=W.map(fe=>{const H=O[fe];return xe.get(H)});M={...M,leftWords:ie,rightWords:re,correctPairs:de}}i(M)}c(!1);return}const F=await(await n(`/.netlify/functions/get-word-matching-test?test_id=${e}`)).json();if(F.success){const D={id:F.data.test_id,test_id:F.data.test_id,test_name:F.data.test_name,teacher_id:F.data.teacher_id,subject_id:F.data.subject_id,num_questions:F.data.num_questions,interaction_type:F.data.interaction_type,passing_score:F.data.passing_score,created_at:F.data.created_at,updated_at:F.data.updated_at,leftWords:F.data.leftWords,rightWords:F.data.rightWords,correctPairs:F.data.correctPairs,originalPairs:F.data.originalPairs};let M=D,O=Array.isArray(M.correctPairs)?M.correctPairs:M.correctPairs&&typeof M.correctPairs=="object"?Object.keys(M.correctPairs).map(L=>[Number(L),M.correctPairs[L]]).sort((L,W)=>L[0]-W[0]).map(([,L])=>L):null;if(Array.isArray(M.leftWords)&&Array.isArray(M.rightWords)&&Array.isArray(O)){const L=M.rightWords.map((fe,H)=>H),W=M.leftWords.map((fe,H)=>H);for(let fe=L.length-1;fe>0;fe--){const H=Math.floor(Math.random()*(fe+1));[L[fe],L[H]]=[L[H],L[fe]]}for(let fe=W.length-1;fe>0;fe--){const H=Math.floor(Math.random()*(fe+1));[W[fe],W[H]]=[W[H],W[fe]]}const re=L.map(fe=>M.rightWords[fe]),ie=W.map(fe=>M.leftWords[fe]),xe=new Map(L.map((fe,H)=>[fe,H])),de=W.map(fe=>{const H=O[fe];return xe.get(H)});M={...M,leftWords:ie,rightWords:re,correctPairs:de}}i(M),ha(b,M,Aa.word_matching_test),Ae.debug(" Word matching test loaded from API and cached:",D)}else throw new Error(F.message||"Failed to load test")}catch(b){Ae.error("Error loading word matching test:",b),d(b.message),s("Failed to load test: "+b.message,"error")}finally{c(!1)}},[e,w,n,s,t]),C=S.useCallback(async b=>{Ae.debug("Test completed:",b),s("Test completed successfully!","success");const j=parseInt(b)||0,A=a?.num_questions||0,F=A>0?Math.round(j/A*100):0,D={showResults:!0,testInfo:{test_name:a?.test_name||"Test",id:a?.id,test_id:a?.id},testType:"word_matching",score:j,totalQuestions:A,percentage:F,passed:F>=60,questionAnalysis:Array.isArray(a?.correctPairs)?a.correctPairs.map((M,O)=>({questionNumber:O+1,isCorrect:O<j,userAnswer:O<j?`${M.left}  ${M.right}`:"Not answered",correctAnswer:`${M.left}  ${M.right}`})):Array.from({length:A},(M,O)=>({questionNumber:O+1,isCorrect:O<j,userAnswer:O<j?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};Ae.debug(" Using test results data:",D),m(D),x(!0)},[a,s]),k=S.useCallback(()=>{t("/student")},[t]);return S.useEffect(()=>{v()},[v]),o?l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsxs(er,{className:"p-8 text-center",children:[l.jsx(pn,{size:"lg",className:"mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading word matching test..."})]})}):u?l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx(er,{className:"p-8 text-center",children:l.jsxs("div",{className:"text-red-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-4",children:u}),l.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})}):a?p&&f?l.jsx("div",{className:"bg-gray-50 overflow-y-auto min-h-screen",children:l.jsx(_v,{testResults:f,onBackToCabinet:()=>{m(null),x(!1),t("/student")},onRetakeTest:(b,j)=>{m(null),x(!1),v()},isLoading:!1})}):l.jsx(Nt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"min-h-screen bg-gray-50 py-8",children:l.jsx(Fae,{testData:a,onTestComplete:C,onBackToCabinet:k})}):l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx(er,{className:"p-8 text-center",children:l.jsxs("div",{className:"text-gray-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Not Found"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"The requested test could not be found."}),l.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})})},Lie=S.forwardRef(({onRecordingComplete:e,minDuration:t=0,maxDuration:r=600,minWords:n=50,maxAttempts:s=3,currentAttempt:a=1},i)=>{const[o,c]=S.useState(!1),[u,d]=S.useState(!1),[f,m]=S.useState(0),[p,x]=S.useState(null),[w,v]=S.useState(null),[C,k]=S.useState("good"),b=S.useRef(null),j=S.useRef([]),A=S.useRef(null),F=S.useRef(null),D=S.useRef(null),M=S.useRef(null),O=S.useRef(null);S.useImperativeHandle(i,()=>({startRecording:()=>L(),stopRecording:()=>W(),pauseRecording:()=>re(),resumeRecording:()=>ie()}));const L=S.useCallback(async()=>{try{if(v(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");if(!window.isSecureContext&&!window.location.hostname.includes("localhost"))throw new Error("Microphone access requires HTTPS. Please use a secure connection.");const Q=window.AudioContext||window.webkitAudioContext;D.current||(D.current=new Q),D.current.state!=="running"&&await D.current.resume().catch(()=>{}),console.log(" Requesting microphone permission...");const U=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});console.log(" Microphone permission granted"),A.current=U;try{let te=document.getElementById("ios-audio-sink");te||(te=document.createElement("audio"),te.id="ios-audio-sink",te.muted=!0,te.playsInline=!0,te.style.display="none",document.body.appendChild(te)),te.srcObject=U,await te.play().catch(()=>{})}catch{}const V=D.current.createAnalyser();D.current.createMediaStreamSource(U).connect(V),V.fftSize=256,M.current=V,xe();let z="audio/webm;codecs=opus";typeof MediaRecorder<"u"&&MediaRecorder.isTypeSupported&&!MediaRecorder.isTypeSupported(z)&&(MediaRecorder.isTypeSupported("audio/mp4")?z="audio/mp4":MediaRecorder.isTypeSupported("audio/aac")?z="audio/aac":z="");const K=new MediaRecorder(U,z?{mimeType:z}:void 0);b.current=K,j.current=[],K.ondataavailable=te=>{te.data.size>0&&j.current.push(te.data)},K.onstop=()=>{const te=z&&z.startsWith("audio/")?z:"audio/webm",se=new Blob(j.current,{type:te});x(se),e(se,f),A.current&&A.current.getTracks().forEach(pe=>pe.stop()),O.current&&cancelAnimationFrame(O.current)},K.start(1e3),c(!0),m(0),F.current=setInterval(()=>{m(te=>{const se=te+1;return se>=r&&W(),se})},1e3)}catch(Q){console.error("Error starting recording:",Q);const U=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;Q.name==="NotAllowedError"?v(U?"Microphone access denied. Please go to Settings > Safari > Microphone and allow access, then refresh the page.":"Microphone access denied. Please allow microphone access in your browser settings and try again."):Q.name==="NotFoundError"?v("No microphone found. Please connect a microphone and try again."):Q.name==="NotSupportedError"?v("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox."):Q.message.includes("HTTPS")?v("Microphone access requires HTTPS. Please use a secure connection."):v(`Failed to access microphone: ${Q.message}`)}},[r]),W=S.useCallback(()=>{if(b.current&&o&&(b.current.stop(),c(!1),d(!1),F.current&&clearInterval(F.current),f<t)){v(`Recording must be at least ${t} seconds long.`);return}},[o,f,t,p,e]),re=S.useCallback(()=>{b.current&&o&&!u&&(b.current.pause(),d(!0),F.current&&clearInterval(F.current))},[o,u]),ie=S.useCallback(()=>{b.current&&o&&u&&(b.current.resume(),d(!1),F.current=setInterval(()=>{m(Q=>{const U=Q+1;return U>=r&&W(),U})},1e3))},[o,u,r,W]),xe=S.useCallback(()=>{if(!M.current)return;const Q=M.current,U=new Uint8Array(Q.frequencyBinCount),V=()=>{Q.getByteFrequencyData(U);const X=U.reduce((z,K)=>z+K,0)/U.length;X<10?k("poor"):X<30?k("fair"):k("good"),o&&(O.current=requestAnimationFrame(V))};V()},[o]),de=Q=>{const U=Math.floor(Q/60),V=Q%60;return`${U}:${V.toString().padStart(2,"0")}`},fe=()=>{switch(C){case"poor":return"text-red-600";case"fair":return"text-yellow-600";case"good":return"text-green-600";default:return"text-gray-600"}},H=()=>{switch(C){case"poor":return"Poor audio quality - speak closer to microphone";case"fair":return"Fair audio quality - good for recording";case"good":return"Excellent audio quality";default:return"Monitoring audio quality..."}};return l.jsxs("div",{className:"audio-recorder bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Record Your Response"}),l.jsx("p",{className:"text-gray-600",children:"Speak clearly and at a normal pace. You can pause and resume if needed."})]}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:de(f)}),l.jsx("div",{className:`text-sm ${fe()}`,children:H()}),u&&l.jsx("div",{className:"text-yellow-600 font-semibold mt-2",children:" Recording Paused"})]}),o&&l.jsx("div",{className:"mb-6",children:l.jsx("div",{className:"flex justify-center items-center space-x-1 h-8",children:Array.from({length:20},(Q,U)=>l.jsx("div",{className:"bg-blue-400 rounded-sm",style:{width:"4px",height:`${Math.random()*20+4}px`,animation:"pulse 0.5s ease-in-out infinite"}},U))})}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center mb-6",children:o?l.jsxs(l.Fragment,{children:[u?l.jsxs("button",{onClick:ie,className:"w-full sm:w-auto bg-green-600 text-white px-6 py-4 rounded-full hover:bg-green-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Resume"})]}):l.jsxs("button",{onClick:re,className:"w-full sm:w-auto bg-yellow-600 text-white px-6 py-4 rounded-full hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Pause"})]}),l.jsxs("button",{onClick:W,className:"w-full sm:w-auto bg-gray-600 text-white px-6 py-4 rounded-full hover:bg-gray-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Stop & Submit"})]})]}):l.jsxs("button",{onClick:L,className:"w-full sm:w-auto bg-red-600 text-white px-6 py-4 rounded-full hover:bg-red-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Start Recording"})]})}),w&&l.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-800",children:w})}),l.jsxs("div",{className:"mt-4 text-center text-sm text-gray-600",children:["Attempt ",a," of ",s,a<s&&l.jsx("span",{className:"ml-2 text-blue-600",children:"(You can re-record if needed)"})]})]})}),u$=({audioBlob:e,audioUrl:t,recordingTime:r,className:n=""})=>{const[s,a]=S.useState(!1),[i,o]=S.useState(0),[c,u]=S.useState(0),[d,f]=S.useState(1),[m,p]=S.useState(1),[x,w]=S.useState(!0),[v,C]=S.useState(""),[k,b]=S.useState(!1),[j,A]=S.useState(null),[F,D]=S.useState(!1),M=S.useRef(null),O=S.useRef(null),L=S.useRef(!1);S.useEffect(()=>()=>{L.current=!0},[]),S.useEffect(()=>{let U=!1;if(t)U||C(t);else if(e){if(!e||e.size===0){U||w(!1);return}if(!(e instanceof Blob)){console.error("audioBlob is not a Blob:",typeof e,e),U||w(!1);return}const V=URL.createObjectURL(e);return U||C(V),()=>{U=!0,URL.revokeObjectURL(V)}}return()=>{U=!0}},[e,t]),S.useEffect(()=>{let U=!1;const V=z=>{try{const K=new URL(z);return/\/storage\/v1\/object\/public\//.test(K.pathname)}catch{return!1}};async function X(z){if(!z||F||/\/object\/sign\//.test(z)||!V(z))return z;try{const te=new URL(z).pathname.replace(/^\/storage\/v1\/object\/public\//,""),se=te.split("/")[0],pe=te.substring(se.length+1),oe=await fetch(`/.netlify/functions/get-speaking-test-new?action=sign-audio&bucket=${encodeURIComponent(se)}&file_path=${encodeURIComponent(pe)}`);if(oe.ok){const{url:ye}=await oe.json();if(!U&&!L.current){D(!0);try{await fetch(ye,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}C(ye)}return ye}}catch{}return z}return(async()=>{if(t){const z=await X(t);try{await fetch(z,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}!U&&!L.current&&!F&&C(z)}})(),()=>{U=!0}},[t,F]),S.useEffect(()=>{let U=!1;return v&&(U||(b(!1),A(null),w(!0))),()=>{U=!0}},[v]),S.useEffect(()=>{if(M.current&&v){const U=M.current;let V=!1;try{U.src=v}catch{}U.load();const X=()=>{if(V||L.current)return;let me=U.duration;if(me===1/0)try{U.currentTime=1e101,U.ontimeupdate=()=>{if(V||L.current)return;U.ontimeupdate=null;const _e=U.duration;V||(u(isFinite(_e)&&_e>0?_e:0),U.currentTime=0,w(!1))};return}catch(_e){console.warn("Seek trick failed:",_e)}if(isNaN(me)||!isFinite(me)||me<=0){const _e=U.seekable&&U.seekable.length>0&&isFinite(U.seekable.end(0)),We=!_e&&U.buffered&&U.buffered.length>0&&isFinite(U.buffered.end(U.buffered.length-1));_e?me=U.seekable.end(0):We&&(me=U.buffered.end(U.buffered.length-1))}isNaN(me)||!isFinite(me)||me<=0?(console.warn("Invalid audio duration after fallbacks:",me),r&&r>0?V||u(r):V||u(0)):V||u(me),V||w(!1)},z=()=>{V||L.current||X()},K=()=>{V||L.current||X()},te=()=>{V||L.current||X()},se=()=>{V||L.current||X()},pe=()=>{V||L.current||o(U.currentTime)},oe=()=>{V||L.current||(a(!1),o(0))},ye=()=>{V||L.current||a(!0)},we=()=>{V||L.current||a(!1)},Se=me=>{if(V||L.current)return;console.error("Audio loading error:",me),console.error("Audio error details:",{error:U.error,networkState:U.networkState,readyState:U.readyState,src:U.src,currentSrc:U.currentSrc});const _e=U.error?.code;_e===4&&b(!0),A(U.error||{code:_e}),w(!1)},Ie=setTimeout(()=>{V||L.current||U.readyState===0&&w(!1)},6e3);return U.addEventListener("loadedmetadata",z),U.addEventListener("durationchange",K),U.addEventListener("canplay",te),U.addEventListener("canplaythrough",se),U.addEventListener("timeupdate",pe),U.addEventListener("ended",oe),U.addEventListener("play",ye),U.addEventListener("pause",we),U.addEventListener("error",Se),()=>{V=!0,clearTimeout(Ie),U.removeEventListener("loadedmetadata",z),U.removeEventListener("durationchange",K),U.removeEventListener("canplay",te),U.removeEventListener("canplaythrough",se),U.removeEventListener("timeupdate",pe),U.removeEventListener("ended",oe),U.removeEventListener("play",ye),U.removeEventListener("pause",we),U.removeEventListener("error",Se),U.pause(),U.src="",U.load()}}},[v,r]),S.useEffect(()=>{let U=!1;return r&&r>0&&(isNaN(c)||!isFinite(c)||c<=0)&&(U||u(r)),()=>{U=!0}},[r,c]);const W=()=>{M.current&&(s?M.current.pause():M.current.play().catch(U=>{console.error("Play failed:",U)}))},re=U=>{if(M.current&&O.current&&c>0){const V=O.current.getBoundingClientRect(),X=U.clientX-V.left,z=V.width,K=Math.max(0,Math.min(c,X/z*c));isFinite(K)&&K>=0&&(M.current.currentTime=K,o(K))}},ie=U=>{const V=parseFloat(U.target.value);f(V),M.current&&(M.current.volume=V)},xe=U=>{const V=parseFloat(U.target.value);p(V),M.current&&(M.current.playbackRate=V)},de=U=>{if(isNaN(U))return"0:00";const V=Math.floor(U/60),X=Math.floor(U%60);return`${V}:${X.toString().padStart(2,"0")}`};if(!e&&!t)return l.jsx("div",{className:`audio-player ${n}`,children:l.jsx("div",{className:"text-center text-gray-500 py-8",children:"No audio available"})});const H=(U=>{try{const X=(U||"").toLowerCase().split("?")[0].split("#")[0];return X.endsWith(".webm")?"audio/webm":X.endsWith(".mp3")?"audio/mpeg":X.endsWith(".m4a")?"audio/mp4":X.endsWith(".aac")?"audio/aac":X.endsWith(".wav")?"audio/wav":void 0}catch{return}})(v||t),Q=Hs.useMemo(()=>typeof window>"u"?!0:document.createElement("audio").canPlayType("audio/webm")!=="",[]);return l.jsxs("div",{className:`audio-player bg-gray-50 rounded-lg p-4 ${n}`,children:[l.jsx("audio",{ref:M,preload:"metadata",controls:!1,style:{display:"none"},crossOrigin:"anonymous",children:l.jsx("source",{src:v,type:H})}),x?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading audio..."})]}):k?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("p",{className:"text-sm text-red-600",children:"This audio format isn't supported by your browser."}),v?l.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,H?l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",H]}):null,l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Browser WebM support: ",Q?"Yes":"No",!Q&&" - Try using Chrome, Firefox, or Edge"]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Preferred format: WebM"})]}):j?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("p",{className:"text-sm text-red-600",children:"Playback failed. Please try opening the audio directly."}),v?l.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:"Open in new tab"}):null,H?l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Detected type: ",H]}):null]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{ref:O,className:"w-full bg-gray-200 rounded-full h-3 cursor-pointer hover:h-4 transition-all min-h-[24px]",onClick:re,children:l.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all",style:{width:`${i/c*100}%`}})}),l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2 font-medium",children:[l.jsx("span",{children:de(i)}),l.jsx("span",{children:de(c)})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:W,className:"bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center",children:s?l.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):l.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.617 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.617l3.766-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:d,onChange:ie,className:"w-24 h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer min-h-[20px]"}),l.jsxs("span",{className:"text-sm text-gray-600 w-10 font-medium",children:[Math.round(d*100),"%"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Speed:"}),l.jsxs("select",{value:m,onChange:xe,className:"text-sm border border-gray-300 rounded px-2 py-1",children:[l.jsx("option",{value:"0.5",children:"0.5x"}),l.jsx("option",{value:"0.75",children:"0.75x"}),l.jsx("option",{value:"1",children:"1x"}),l.jsx("option",{value:"1.25",children:"1.25x"}),l.jsx("option",{value:"1.5",children:"1.5x"}),l.jsx("option",{value:"2",children:"2x"})]})]})]})]})]})},Bie=({transcript:e,scores:t,audioBlob:r,recordingTime:n,onReRecord:s,onFinalSubmit:a,canReRecord:i,attemptNumber:o,maxAttempts:c,isSubmitting:u=!1})=>{const[d,f]=S.useState(!1);console.log(" FeedbackDisplay received recordingTime:",n);const m=(v,C)=>{const k=v/C*100;return k>=80?"text-green-600":k>=60?"text-yellow-600":"text-red-600"},p=(v,C)=>{const k=v/C*100;return k>=90?"A+":k>=80?"A":k>=70?"B":k>=60?"C":k>=50?"D":"F"},x=()=>p(t?.overall_score||0,100),w=()=>m(t?.overall_score||0,100);return console.log(" FeedbackDisplay received scores:",t),console.log(" Individual score values:",{grammar_score:t?.grammar_score,vocabulary_score:t?.vocabulary_score,pronunciation_score:t?.pronunciation_score,fluency_score:t?.fluency_score,content_score:t?.content_score}),l.jsxs("div",{className:"feedback-display bg-white rounded-lg shadow-lg p-3 sm:p-6",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Speaking Test Results"}),l.jsx("p",{className:"text-gray-600",children:"Review your performance and decide whether to submit or re-record."})]}),l.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-3 sm:p-6 rounded-lg mb-6",children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:`text-4xl font-bold ${w()}`,children:[t?.overall_score||0,"/100"]}),l.jsxs("div",{className:`text-2xl font-semibold ${w()} mt-2`,children:["Grade: ",x()]}),l.jsx("div",{className:"text-gray-600 mt-2",children:t?.overall_score>=80?"Excellent work!":t?.overall_score>=60?"Good job!":t?.overall_score>=50?"Not bad, but could be better.":"Keep practicing!"})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Grammar"}),l.jsxs("span",{className:`font-bold ${m(t?.grammar_score||0,25)}`,children:[t?.grammar_score||0,"/25"]})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[t?.grammar_mistakes||0," mistakes found"]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Vocabulary"}),l.jsxs("span",{className:`font-bold ${m(t?.vocabulary_score||0,20)}`,children:[t?.vocabulary_score||0,"/20"]})]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[t?.vocabulary_mistakes||0," vocabulary issues"]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Pronunciation"}),l.jsxs("span",{className:`font-bold ${m(t?.pronunciation_score||0,15)}`,children:[t?.pronunciation_score||0,"/15"]})]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Clarity and accuracy"}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Fluency"}),l.jsxs("span",{className:`font-bold ${m(t?.fluency_score||0,20)}`,children:[t?.fluency_score||0,"/20"]})]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Pace, pauses, and flow"}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Content"}),l.jsxs("span",{className:`font-bold ${m(t?.content_score||0,20)}`,children:[t?.content_score||0,"/20"]})]}),l.jsx("div",{className:"text-sm text-gray-600",children:"How well addressed the prompt"}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:`${Math.min((t?.content_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:"bg-white border rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Word Count"}),l.jsxs("span",{className:"font-bold text-gray-700",children:[t?.word_count||0," words"]})]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Total words spoken"}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:l.jsx("div",{className:"bg-gray-600 h-2 rounded-full",style:{width:`${Math.min((t?.word_count||0)/100*100,100)}%`}})})]})]}),r&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Your Recording"}),l.jsx(u$,{audioBlob:r,recordingTime:n})]}),t?.feedback&&l.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-blue-50 p-3 sm:p-6 rounded-lg border border-green-200",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("span",{className:"text-green-600 text-2xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-green-800 mb-3 text-lg",children:"AI Feedback"}),l.jsx("p",{className:"text-gray-700 leading-relaxed",children:t.feedback})]})]})}),t?.improved_transcript&&l.jsxs("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-3 sm:p-4",children:[l.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[l.jsx("span",{className:"text-green-600 text-lg",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Improved Version"}),l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Here's how your response could be improved with better grammar and vocabulary:"})]})]}),l.jsx("div",{className:"bg-white border border-green-200 rounded p-3",children:l.jsx("p",{className:"text-gray-800 leading-relaxed",children:t.improved_transcript})})]}),l.jsx("div",{className:"mb-6",children:l.jsx("button",{onClick:()=>f(!d),className:"text-blue-600 hover:text-blue-800 text-sm",children:d?"Hide Details":"Show Details"})}),d&&l.jsxs("div",{className:"mb-6 bg-blue-50 p-3 sm:p-4 rounded-lg",children:[l.jsx("h4",{className:"font-semibold mb-3",children:"Detailed Analysis"}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Word Count Analysis:"}),l.jsxs("span",{className:"ml-2 text-gray-700",children:["You spoke ",t?.word_count||0," words.",t?.word_count>=50?" Great job meeting the minimum requirement!":" Consider speaking more to meet the minimum word requirement."]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Grammar Analysis:"}),l.jsx("span",{className:"ml-2 text-gray-700",children:t?.grammar_mistakes===0?"Perfect grammar!":`Found ${t?.grammar_mistakes||0} grammar ${t?.grammar_mistakes===1?"mistake":"mistakes"}.`}),t?.grammar_corrections&&t.grammar_corrections.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:t.grammar_corrections.map((v,C)=>l.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-2 sm:p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-red-600 font-mono text-sm",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-red-600",children:v.mistake}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),l.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[l.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},C))})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Vocabulary Analysis:"}),l.jsx("span",{className:"ml-2 text-gray-700",children:t?.vocabulary_mistakes===0?"Excellent vocabulary usage!":`Found ${t?.vocabulary_mistakes||0} vocabulary ${t?.vocabulary_mistakes===1?"issue":"issues"}.`}),t?.vocabulary_corrections&&t.vocabulary_corrections.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:t.vocabulary_corrections.map((v,C)=>l.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded p-2 sm:p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-purple-600 font-mono text-sm",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-purple-600",children:v.mistake}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium text-green-600",children:v.correction})]}),l.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[l.jsx("strong",{children:"Explanation:"})," ",v.explanation]})]})]})},C))})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Pronunciation Analysis:"}),l.jsx("span",{className:"ml-2 text-gray-700",children:t?.pronunciation_corrections&&t.pronunciation_corrections.length>0?`Found ${t.pronunciation_corrections.length} pronunciation ${t.pronunciation_corrections.length===1?"tip":"tips"} to help improve clarity.`:"Great pronunciation! Your speech was clear and easy to understand."})]}),t?.pronunciation_corrections&&t.pronunciation_corrections.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Pronunciation Tips:"}),l.jsx("div",{className:"mt-2 space-y-2",children:t.pronunciation_corrections.map((v,C)=>l.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded p-2 sm:p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-orange-600 font-mono text-sm",children:""}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-orange-700",children:v.word}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium text-green-700",children:v.correction})]})})]})},C))})]}),t?.language_use_corrections&&t.language_use_corrections.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Language Use Suggestions:"}),l.jsx("div",{className:"mt-2 space-y-2",children:t.language_use_corrections.map((v,C)=>l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 sm:p-3",children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:"text-blue-600 font-mono text-sm",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-blue-700",children:v.mistake}),l.jsx("span",{className:"mx-2",children:""}),l.jsx("span",{className:"font-medium text-green-700",children:v.suggestion})]}),v.explanation&&l.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:[l.jsx("strong",{children:"Why:"})," ",v.explanation]})]})]})},C))})]})]})]}),l.jsxs("div",{className:"text-sm text-gray-600 mb-3",children:["Attempt ",o," of ",c]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center",children:[i&&l.jsxs("button",{onClick:s,className:"w-full sm:w-auto bg-yellow-600 text-white px-4 py-2.5 rounded-lg hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium",children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Re-record"})]}),l.jsx("button",{onClick:a,disabled:u,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium ${u?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"} text-white`,children:u?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),l.jsx("span",{children:"Submitting..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Submit Final"})]})})]}),!i&&l.jsx("div",{className:"mt-4 p-2 sm:p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:l.jsxs("p",{className:"text-yellow-800 text-sm",children:[l.jsx("strong",{children:"Maximum attempts reached."}),' This is your final attempt. Click "Submit Final" to complete the test.']})})]})},$ie=({testData:e,onComplete:t,onExit:r,onTestComplete:n})=>{const[s,a]=S.useState("recording"),[i,o]=S.useState(null),[c,u]=S.useState(""),[d,f]=S.useState(null),[m,p]=S.useState(!1),[x,w]=S.useState(!1),[v,C]=S.useState(!1),[k,b]=S.useState(null),[j,A]=S.useState(1),[F]=S.useState(e.max_attempts||3),[D,M]=S.useState(!1),[O,L]=S.useState(0),[W,re]=S.useState(!1),[ie,xe]=S.useState(0),[de,fe]=S.useState(null),H=Zl(),{user:Q}=Js(),{makeAuthenticatedRequest:U}=H,V=S.useRef(null);S.useEffect(()=>{if(e?.test_id&&Q?.student_id){const Se=`speaking_attempts_${Q.student_id}_${e.test_id}`,Ie=localStorage.getItem(Se);if(Ie){const me=parseInt(Ie,10);me>0&&me<=F&&(A(me),console.log(" Loaded attempts from localStorage:",me))}}},[e,Q,F]),S.useEffect(()=>{if(e&&!de){const Se=new Date;fe(Se),console.log(" Speaking test timer started at:",Se.toISOString())}},[e,de]),S.useEffect(()=>{let Se=0;s==="recording"?Se=25:s==="processing"?Se=50:s==="feedback"?Se=75:s==="completed"&&(Se=100),xe(Se)},[s]),S.useEffect(()=>{(async()=>{try{if(!window.isSecureContext&&!window.location.hostname.includes("localhost")){b("Microphone access requires HTTPS. Please use a secure connection.");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){b("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");return}if(navigator.permissions)try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?(M(!0),console.log(" Microphone permission already granted")):console.log(" Microphone permission not yet granted - user will need to click record button")}catch(Ie){console.log(" Could not check microphone permission status:",Ie)}}catch(Ie){console.error(" Error checking microphone permission:",Ie)}})()},[]),S.useEffect(()=>{const Se=setInterval(()=>{i&&s==="recording"&&X()},3e4);return()=>clearInterval(Se)},[i,s]);const X=S.useCallback(async()=>{try{const Se={test_id:e.test_id,audio_blob:i?await z(i):null,attempt_number:j,step:s,timestamp:new Date().toISOString()};localStorage.setItem(`speaking_progress_${e.test_id}`,JSON.stringify(Se))}catch(Se){console.error("Failed to save progress:",Se)}},[e.test_id,i,j,s]),z=Se=>new Promise((Ie,me)=>{const _e=new FileReader;_e.onloadend=()=>{const Ue=_e.result.split(",")[1];Ie(Ue)},_e.onerror=me,_e.readAsDataURL(Se)}),K=S.useCallback(Se=>{if(e?.test_id&&Q?.student_id){const Ie=`speaking_attempts_${Q.student_id}_${e.test_id}`;localStorage.setItem(Ie,Se.toString()),console.log(" Saved attempts to localStorage:",Se)}},[e,Q]),te=S.useCallback(async(Se,Ie,me,_e,We)=>{if(e?.test_id&&Q?.student_id)try{const{setCachedData:Ue,CACHE_TTL:St}=await co(async()=>{const{setCachedData:Rt,CACHE_TTL:At}=await Promise.resolve().then(()=>Vg);return{setCachedData:Rt,CACHE_TTL:At}},void 0),Ze=`speaking_test_data_${Q.student_id}_${e.test_id}`,yt={audioBlob:Se?await z(Se):null,transcript:Ie,scores:me,recordingTime:_e,currentStep:We,timestamp:Date.now()};Ue(Ze,yt,St.speaking_test_data),console.log(" Saved speaking test data to cache:",Ze)}catch(Ue){console.error("Failed to save speaking test data to cache:",Ue)}},[e,Q]),se=S.useCallback(async()=>{if(e?.test_id&&Q?.student_id)try{const{getCachedData:Se}=await co(async()=>{const{getCachedData:_e}=await Promise.resolve().then(()=>Vg);return{getCachedData:_e}},void 0),Ie=`speaking_test_data_${Q.student_id}_${e.test_id}`,me=Se(Ie);if(me){if(console.log(" Loaded speaking test data from cache:",me),me.audioBlob){const _e=new Blob([Uint8Array.from(atob(me.audioBlob),We=>We.charCodeAt(0))],{type:"audio/webm"});o(_e)}return me.transcript&&u(me.transcript),me.scores&&f(me.scores),me.recordingTime&&L(me.recordingTime),me.currentStep&&a(me.currentStep),!0}}catch(Se){console.error("Failed to load speaking test data from cache:",Se)}return!1},[e,Q]);S.useEffect(()=>{if(e?.test_id&&Q?.student_id){try{const Se=Q.student_id,Ie=`retest_assignment_id_${Se}_speaking_${e.test_id}`,me=`retest_in_progress_${Se}_speaking_${e.test_id}`;if(!!localStorage.getItem(Ie)||!!localStorage.getItem(me)){const We=`speaking_test_data_${Se}_${e.test_id}`,Ue=`anti_cheating_${Se}_speaking_${e.test_id}`,St=`speaking_progress_${e.test_id}`;localStorage.removeItem(We),localStorage.removeItem(Ue),localStorage.removeItem(St),console.log(" Cleared speaking per-test cache for retest start:",{cacheKey:We,antiCheatKey:Ue,progressKey:St})}}catch{}se()}},[e,Q,se]),S.useEffect(()=>{e?.test_id&&Q?.student_id&&(i||c||d)&&te(i,c,d,O,s)},[i,c,d,O,s,e,Q,te]);const pe=S.useCallback(async(Se,Ie)=>{if(W){console.log(" Already processing, skipping duplicate call");return}console.log(" Recording completed, duration:",Ie),re(!0),o(Se),L(Ie),a("processing"),b(null);try{const me=await z(Se),_e=new Date,We=e.start_time?Math.round((_e-e.start_time)/1e3):0,Ue=e.start_time?new Date(e.start_time).toISOString():_e.toISOString(),St=Q.student_id,Ze=`retest_assignment_id_${St}_speaking_${e.test_id}`,Kt=localStorage.getItem(Ze),yt={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:St,question_id:e.question_id||1,audio_blob:me,audio_duration:Se.duration||0,time_taken:We,started_at:Ue,submitted_at:_e.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:Kt?Number(Kt):null,parent_test_id:e.test_id};console.log(" Submitting speaking test:",yt),console.log(" Processing audio with AI...");try{const At=await(await U("/.netlify/functions/process-speaking-audio-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e.test_id,question_id:e.question_id||1,audio_blob:me})})).json();if(At.success){console.log(" AI Analysis Result:",At),u(At.transcript);const wt=At.transcript?At.transcript.split(/\s+/).filter(dr=>dr.length>0).length:0;console.log(" Word Count Verification:",{aiCount:At.word_count,actualCount:wt,transcript:At.transcript});const Ft=wt,or={overall_score:At.overall_score,word_count:Ft,grammar_score:At.grammar_score,vocabulary_score:At.vocabulary_score,pronunciation_score:At.pronunciation_score,fluency_score:At.fluency_score,content_score:At.content_score,grammar_mistakes:At.grammar_mistakes,vocabulary_mistakes:At.vocabulary_mistakes,feedback:At.feedback,improved_transcript:At.improved_transcript,grammar_corrections:At.grammar_corrections||[],vocabulary_corrections:At.vocabulary_corrections||[],language_use_corrections:At.language_use_corrections||[],pronunciation_corrections:At.pronunciation_corrections||[],ai_feedback:At.ai_feedback||null};console.log(" Mapped Scores:",or),console.log(" Individual scores check:",{grammar_score:At.grammar_score,vocabulary_score:At.vocabulary_score,pronunciation_score:At.pronunciation_score,fluency_score:At.fluency_score,content_score:At.content_score}),f(or),a("feedback")}else throw new Error(At.message||"Failed to process audio with AI");localStorage.removeItem(`speaking_progress_${e.test_id}`)}catch(Rt){console.error("Speaking test submission error:",Rt),Rt.message.includes("No valid authentication token found")?(b("Your session has expired. Please refresh the page and try again."),setTimeout(()=>{window.location.reload()},3e3)):b(Rt.message),a("recording")}}catch(me){console.error("Speaking test submission error:",me),b(me.message),a("recording")}finally{re(!1)}},[e,Q,U,j,K,W]);S.useEffect(()=>{s==="processing"&&!c&&!d&&(console.log(' Detected stuck "processing" state on reload. Attempting recovery...'),i?(console.log(" Resuming processing from cached audio blob..."),pe(i,O)):(console.log(" No cached audio blob found. Resetting to recording step."),a("recording")))},[s,c,d,i,O,pe]);const oe=S.useCallback(()=>{if(j<F){o(null),u(""),f(null),b(null),re(!1);const Se=j+1;A(Se),K(Se),a("recording")}else b("Maximum attempts reached")},[j,F,K]),ye=S.useCallback(async()=>{if(!(!c||!d)){p(!0);try{const Se=new Date,Ie=e.start_time?Math.round((Se-e.start_time)/1e3):0,me=e.start_time?new Date(e.start_time).toISOString():Se.toISOString(),_e=Q.student_id,We=`retest_assignment_id_${_e}_speaking_${e.test_id}`,Ue=localStorage.getItem(We),{academicCalendarService:St}=await co(async()=>{const{academicCalendarService:wt}=await Promise.resolve().then(()=>p4);return{academicCalendarService:wt}},void 0);await St.loadAcademicCalendar();const Kt=St.getCurrentTerm()?.id;if(!Kt)throw new Error("No current academic period found");const yt={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:_e,academic_period_id:Kt,question_id:e.question_id||1,audio_blob:i?await z(i):null,audio_duration:i?.duration||0,time_taken:Ie,started_at:me,submitted_at:Se.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:Ue?Number(Ue):null,parent_test_id:e.test_id,transcript:c,scores:d,final_submission:!0};console.log(" Final submission:",yt),console.log(" Making final submission request...");const Rt=await U("/.netlify/functions/submit-speaking-test-final",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(yt)});console.log(" Final submission response status:",Rt.status);const At=await Rt.json();if(console.log(" Final submission result:",At),At.success){if(Q?.student_id){const ht=`test_completed_${Q.student_id}_speaking_${e.test_id}`;localStorage.setItem(ht,"true"),console.log(" Speaking test marked as completed in localStorage:",ht);const Ot=`retest_in_progress_${Q.student_id}_speaking_${e.test_id}`;localStorage.removeItem(Ot),console.log(" Cleared in-progress retest lock:",Ot);const nt=`speaking_attempts_${Q.student_id}_${e.test_id}`;localStorage.removeItem(nt),console.log(" Cleared attempts from localStorage upon submission");const{clearTestData:sr}=await co(async()=>{const{clearTestData:kr}=await Promise.resolve().then(()=>Vg);return{clearTestData:kr}},void 0);sr(Q.student_id,"speaking_test_data",e.test_id),console.log(" Cleared speaking test data from cache upon submission");try{const kr=`anti_cheating_${Q.student_id}_speaking_${e.test_id}`;localStorage.removeItem(kr),console.log(" Cleared anti-cheating key:",kr)}catch{}}console.log(" Caching speaking test results after submission...");const Ft=`student_results_table_${Q?.student_id||Q?.id||"unknown"}`,{setCachedData:or,getCachedData:dr,CACHE_TTL:nr,clearTestData:Xe}=await co(async()=>{const{setCachedData:ht,getCachedData:Ot,CACHE_TTL:nt,clearTestData:sr}=await Promise.resolve().then(()=>Vg);return{setCachedData:ht,getCachedData:Ot,CACHE_TTL:nt,clearTestData:sr}},void 0),Qe={id:Date.now(),test_id:e.test_id,test_type:"speaking",test_name:e.test_name,score:Math.round(d.overall_score/10),max_score:10,percentage:d.overall_score,caught_cheating:!1,visibility_change_times:0,is_completed:!0,submitted_at:new Date().toISOString(),subject:"Listening and Speaking",teacher_name:e.teacher_name||"Unknown"};let ut={success:!0,results:[],count:0};try{const ht=dr(Ft);ht&&Array.isArray(ht.results)&&(ut.results=ht.results.slice())}catch{}if(ut.results.unshift(Qe),ut.count=ut.results.length,or(Ft,ut,nr.student_results_table),console.log(" Speaking test results cached (merged) with key:",Ft),Q?.student_id&&Xe(Q.student_id,"speaking",e.test_id),!!Ue&&Q?.student_id){let ht=3;try{const sr=localStorage.getItem(`student_active_tests_${Q.student_id}`);if(sr){const Er=JSON.parse(sr)?.tests?.find(Gr=>Gr.test_id===e.test_id&&Gr.test_type==="speaking");Er&&(ht=Er.retest_attempts_left||Er.max_attempts||3)}}catch(sr){console.error("Error checking active tests cache:",sr)}const nt=(d?.overall_score??0)>=50;if(nt){const sr=`retest_attempt${ht}_${Q.student_id}_speaking_${e.test_id}`;localStorage.setItem(sr,"true"),console.log(" Passed retest, marking last-slot key:",sr);let kr=0;for(let Ar=1;Ar<=10;Ar++){const vr=`retest_attempt${Ar}_${Q.student_id}_speaking_${e.test_id}`;localStorage.getItem(vr)==="true"&&kr++}const Er=`test_completed_${Q.student_id}_speaking_${e.test_id}`;localStorage.setItem(Er,"true"),console.log(" Marked retest as completed (student passed):",Er);const Gr=`retest_attempts_${Q.student_id}_speaking_${e.test_id}`;localStorage.setItem(Gr,JSON.stringify({used:kr,max:ht})),console.log(" Set retest attempts metadata (student passed):",Gr,{used:kr,max:ht})}else{let sr=1;for(let vr=1;vr<=10;vr++){const Ee=`retest_attempt${vr}_${Q.student_id}_speaking_${e.test_id}`;if(localStorage.getItem(Ee)!=="true"){sr=vr;break}}const kr=`retest_attempt${sr}_${Q.student_id}_speaking_${e.test_id}`;localStorage.setItem(kr,"true"),console.log(" Marked retest attempt as completed:",kr);let Er=0;for(let vr=1;vr<=10;vr++){const Ee=`retest_attempt${vr}_${Q.student_id}_speaking_${e.test_id}`;localStorage.getItem(Ee)==="true"&&Er++}const Gr=ht-Er,Ar=Gr<=0||nt;if(console.log(" Retest completion check:",{usedAttempts:Er,maxAttempts:ht,attemptsLeft:Gr,passed:nt,shouldComplete:Ar}),Ar){const vr=`test_completed_${Q.student_id}_speaking_${e.test_id}`;localStorage.setItem(vr,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",vr);const Ee=`retest_attempts_${Q.student_id}_speaking_${e.test_id}`;localStorage.setItem(Ee,JSON.stringify({used:Er,max:ht})),console.log(" Set retest attempts metadata (attempts exhausted):",Ee,{used:Er,max:ht})}}}if(Q?.student_id){const ht=`retest1_${Q.student_id}_speaking_${e.test_id}`,Ot=`retest_assignment_id_${Q.student_id}_speaking_${e.test_id}`;localStorage.removeItem(ht),localStorage.removeItem(Ot)}try{n&&n(d.overall_score),typeof r=="function"&&r()}catch{}return}else throw new Error(At.message||"Failed to submit speaking test")}catch(Se){console.error("Speaking test submission error:",Se),b(Se.message)}finally{p(!1)}}},[e,Q,U,c,d,i,j,t]);S.useCallback(()=>{a("completed"),t({test_id:e.test_id,transcript:c,scores:d,attempt_number:j})},[e.test_id,c,d,j,t]);const we=()=>{switch(s){case"recording":return l.jsxs("div",{className:"speaking-test-recording",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:e.test_name}),l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Instructions:"}),l.jsx("p",{className:"text-gray-700 mb-4",children:e.prompt}),l.jsx("div",{className:"bg-blue-50 p-3 sm:p-4 rounded-lg",children:l.jsxs("p",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Requirements:"})," Minimum ",e.min_words||50," words, 0-",e.max_duration||600," seconds duration"]})})]}),l.jsx(Lie,{ref:V,onRecordingComplete:pe,minDuration:0,maxDuration:e.max_duration||600,minWords:e.min_words||50,maxAttempts:F,currentAttempt:j}),k&&l.jsx("div",{className:"mt-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-800",children:k})})]});case"processing":return l.jsxs("div",{className:"transcription-status bg-white rounded-lg shadow-lg p-4 sm:p-8 text-center",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-2xl font-semibold mb-2",children:"Processing Your Speech"}),l.jsx("p",{className:"text-lg text-blue-600",children:"Please wait while we process your audio..."})]}),l.jsxs("div",{className:"inline-flex space-x-1",children:[l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce"}),l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),l.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]});case"feedback":return console.log(" Rendering feedback step with Submit Final button"),l.jsx(Bie,{transcript:c,scores:d,audioBlob:i,recordingTime:O,onReRecord:oe,onFinalSubmit:()=>w(!0),canReRecord:j<F,attemptNumber:j,maxAttempts:F,isSubmitting:m});case"completed":const Se={showResults:!0,testInfo:{test_name:e?.test_name||"Speaking Test",id:e?.test_id,test_id:e?.test_id},testType:"speaking",score:d?.overall_score||0,totalQuestions:1,percentage:d?.overall_score||0,passed:(d?.overall_score||0)>=50,questionAnalysis:[{questionNumber:1,userAnswer:c,correctAnswer:"Speaking test completed",isCorrect:!0,score:d?.overall_score||0,maxScore:100,feedback:`Word Count: ${d?.word_count||0}, Grammar: ${d?.grammar_score||0}/40, Vocabulary: ${d?.vocab_score||0}/30`}],timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};return l.jsx("div",{className:"speaking-test-completed",children:l.jsx(_v,{testResults:Se,onBackToCabinet:()=>C(!0),onRetakeTest:()=>{a("recording"),u(""),f(null),o(null),A(1)},isLoading:!1})});default:return null}};return l.jsxs("div",{children:[l.jsx(Ka,{isOpen:x&&!m,onClose:()=>w(!1),title:"Submit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>w(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:()=>{w(!1),ye()},variant:"primary",children:"Submit"})]})]})}),l.jsx(Ka,{isOpen:v,onClose:()=>C(!1),title:"Exit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>C(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:()=>{C(!1),typeof r=="function"&&r()},variant:"primary",children:"Go Back"})]})]})}),l.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-3 sm:p-6",children:[k&&l.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-800",children:k})}),we()]})]})},zie=e=>function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296},Uie=(e,t,r)=>{if(e.length===1)return e[0];const n=`${r}:speaking:${t}`,s=Array.from(n).reduce((o,c)=>(o<<5)-o+c.charCodeAt(0),0)>>>0,a=zie(s),i=Math.floor(a()*e.length);return e[i]},Wie=()=>{const{testId:e}=Gb(),t=Nl(),{user:r}=Js(),n=Zl(),{showNotification:s}=_i(),[a,i]=S.useState(null),[o,c]=S.useState([]),[u,d]=S.useState(null),[f,m]=S.useState(!0),[p,x]=S.useState(null),[w,v]=S.useState(!1),[C,k]=S.useState(null),[b,j]=S.useState(!1),{startTracking:A,stopTracking:F}=Yp("speaking",e,r?.student_id||r?.id);S.useEffect(()=>{D(),M()},[e]),S.useEffect(()=>{if(a&&!w){Ae.debug(" Speaking test - initializing anti-cheating tracking");const re=r?.student_id||r?.id||"unknown",ie=`anti_cheating_${re}_speaking_${e}`,xe=localStorage.getItem(ie);if(Ae.debug(" Checking for anti-cheating data with key:",ie),Ae.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),Ae.debug(" Current test details:",{testType:"speaking",testId:e,studentId:re}),xe)try{const de=JSON.parse(xe);Ae.debug(" Found existing anti-cheating data for THIS speaking test:",de),Ae.debug(" Visibility change times for this test:",de.tabSwitches||0),Ae.debug(" Cheating status for this test:",de.isCheating||!1),de.isCheating&&(Ae.debug(" WARNING: Student has been flagged for cheating in THIS speaking test!"),Ae.debug(" Tab switches detected in this test:",de.tabSwitches),s(` Warning: Suspicious activity detected in this speaking test (${de.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(de){Ae.error(" Error parsing existing anti-cheating data:",de)}else Ae.debug(" No existing anti-cheating data found for this speaking test - starting fresh");A(),Ae.debug(" Anti-cheating tracking started for speaking test")}return()=>{a&&(Ae.debug(" Cleaning up anti-cheating tracking for speaking test"),F())}},[a,w,e,r?.student_id,r?.id,A,F,s]);const D=async()=>{try{m(!0);const re=await n.getSpeakingTest(e);if(re.success)i(re.test);else throw new Error(re.message||"Failed to load test");const ie=await n.getSpeakingTestQuestions(e);if(ie.success){const xe=ie.questions;c(xe);const de=r?.student_id||r?.id,fe=Uie(xe,e,de);d(fe),Ae.debug(" Selected question for student:",{studentId:de,testId:e,totalQuestions:xe.length,selectedQuestion:fe?.id,selectedPrompt:fe?.prompt?.substring(0,50)+"..."})}}catch(re){Ae.error("Error loading test data:",re),x(re.message)}finally{m(!1)}},M=()=>{const ie=`test_completed_${r?.student_id||r?.id}_speaking_${e}`;if(localStorage.getItem(ie)==="true"){v(!0);const de=localStorage.getItem(`speaking_test_result_${e}`);de&&k(JSON.parse(de))}},O=async re=>{try{v(!0),k(re),localStorage.setItem(`speaking_test_result_${e}`,JSON.stringify(re)),window.dispatchEvent(new CustomEvent("testCompleted",{detail:{testId:e,testType:"speaking"}})),setTimeout(()=>{t("/student")},2e3)}catch(ie){Ae.error("Error handling test completion:",ie)}},L=()=>{if(Ae.debug(" Navigating back to cabinet from speaking test..."),a&&r?.student_id){Ae.debug(" Cabinet navigation detected - counting as cheating attempt");const ie=`anti_cheating_${r?.student_id||r?.id||"unknown"}_speaking_${e}`,xe=localStorage.getItem(ie);let de=0,fe=!1;if(xe)try{const V=JSON.parse(xe);de=V.tabSwitches||0,fe=V.isCheating||!1}catch(V){Ae.error(" Error parsing existing anti-cheating data:",V)}const H=de+1,Q=H>=2;Ae.debug(` Tab switch count: ${de}  ${H} (cheating: ${Q})`);const U={tabSwitches:H,isCheating:Q,lastUpdated:new Date().toISOString()};localStorage.setItem(ie,JSON.stringify(U)),Ae.debug(" Anti-cheating data updated for cabinet navigation:",U)}t("/student")};if(f)return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),l.jsx(xt,{variant:"outline",onClick:()=>j(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),l.jsx("p",{className:"text-gray-600 mt-4",children:"Loading speaking test..."})]})})})]});if(p)return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),l.jsx(xt,{variant:"outline",onClick:()=>j(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-6",children:p})]})})})]});if(w&&C)return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test Results"})}),l.jsx(xt,{variant:"outline",onClick:()=>j(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx(_v,{testType:"speaking",testData:a,result:C,onRetake:()=>{v(!1),k(null);const re=JSON.parse(localStorage.getItem("userData")||"{}").student_id;localStorage.removeItem(`test_completed_${re}_speaking_${e}`)}})})]});if(!a||o.length===0)return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),l.jsx(xt,{variant:"outline",onClick:()=>j(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Test Data"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Unable to load test information"})]})})})]});const W=u;return l.jsxs("div",{className:"min-h-screen bg-gray-50 overflow-y-auto",children:[l.jsx(Ka,{isOpen:b,onClose:()=>j(!1),title:"Exit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(xt,{onClick:()=>j(!1),variant:"secondary",children:"Cancel"}),l.jsx(xt,{onClick:()=>{j(!1),L()},variant:"primary",children:"Go Back"})]})]})}),l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Speaking Test"})}),l.jsx(xt,{variant:"outline",onClick:()=>j(!0),children:"Back to Cabinet"})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.length>1&&u&&l.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs font-bold",children:"i"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Question Selection"}),l.jsx("div",{className:"mt-1 text-sm text-blue-700",children:l.jsxs("p",{children:["This test has ",o.length," questions. You have been assigned ",l.jsxs("strong",{children:["Question ",u.question_number]}),"."]})})]})]})}),l.jsx($ie,{testData:{...a,test_id:parseInt(e),question_id:W?.id,prompt:W?.prompt,start_time:Date.now()},onComplete:O,onExit:L,onTestComplete:O})]})]})},Hie=()=>{const{testType:e,testId:t}=Gb(),r=Nl(),{activeTests:n}=bv(),s=()=>{r("/student")},a=n.find(i=>i.test_type===e&&i.test_id===parseInt(t));return l.jsx(Die,{onBackToCabinet:s,currentTest:a||{test_type:e,test_id:parseInt(t)}})},Gie=()=>{const e=Nl(),{user:t,isAuthenticated:r,isLoading:n}=Js(),[s,a]=S.useState(!1),[i,o]=S.useState(!0),[c,u]=S.useState(""),[d,f]=S.useState([]),[m,p]=S.useState(!1),[x,w]=S.useState(!1),[v,C]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),k=S.useCallback(async()=>{Ae.debug(" Initializing Student Application...");try{if(o(!0),u(""),!r||!t){Ae.debug(" User not authenticated, redirecting to login"),e("/login");return}if(t.role!==el.STUDENT){Ae.error(" Invalid user role for student app:",t.role),u("Access denied. Student role required.");return}Ae.debug(" Initializing event listeners..."),b(),Ae.debug(" Setting up back to cabinet button listeners..."),j(),Ae.debug(" Setting up password change form listener..."),A(),Ae.debug(" Loading student data..."),await F(),Ae.debug(" Exposing student functions globally..."),D(),Ae.debug(" Populating student info from user data..."),ie(t),a(!0),Ae.debug(" Student Application initialization complete!")}catch(fe){Ae.error(" Error initializing student app:",fe),u("Failed to initialize student application")}finally{o(!1)}},[r,t,e]);S.useEffect(()=>{n||k()},[n,r,t,k]);const b=S.useCallback(()=>{Ae.debug(" Setting up student event listeners...");const fe=Q=>{m&&!Q.target.closest(".student-menu")&&p(!1)},H=Q=>{Q.key==="Escape"&&m&&p(!1)};return document.addEventListener("click",fe),document.addEventListener("keydown",H),()=>{document.removeEventListener("click",fe),document.removeEventListener("keydown",H)}},[m]),j=S.useCallback(()=>{Ae.debug(" Setting up back to cabinet listeners...")},[]),A=S.useCallback(()=>{Ae.debug(" Setting up password change form...")},[]),F=S.useCallback(async()=>{Ae.debug(" Loading student data...");try{Ae.debug(" Student data loaded successfully")}catch(fe){throw Ae.error(" Error loading student data:",fe),fe}},[]),D=S.useCallback(()=>{Ae.debug(" Exposing student functions globally..."),window.toggleStudentMenu=M,window.showChangePasswordTab=O,window.hideChangePasswordTab=L,window.navigateBackToCabinet=re,window.handlePasswordChange=W,window.populateStudentInfoDirectly=ie,Ae.debug(" All student functions exposed globally")},[]),M=S.useCallback(()=>{Ae.debug(" toggleStudentMenu called"),p(fe=>{const H=!fe;return Ae.debug(" Menu state changed from",fe,"to",H),H}),Ae.debug(" Toggled dropdown menu")},[]),O=S.useCallback(()=>{Ae.debug(" showChangePasswordTab called"),w(!0),p(!1)},[]),L=S.useCallback(()=>{Ae.debug(" hideChangePasswordTab called"),w(!1),C({currentPassword:"",newPassword:"",confirmPassword:""})},[]),W=S.useCallback(async fe=>{fe.preventDefault(),Ae.debug(" handlePasswordChange called");const{currentPassword:H,newPassword:Q,confirmPassword:U}=v;if(!H||!Q||!U){xe("Please fill in all fields","error");return}if(Q!==U){xe("New passwords do not match","error");return}if(Q.length<6){xe("New password must be at least 6 characters long","error");return}const V=/[a-zA-Z]/.test(Q),X=/[0-9]/.test(Q);if(!V||!X){xe("New password must contain both letters and numbers","error");return}if(!t||!t.student_id){xe("Session expired. Please login again.","error");return}const z=t.student_id;if(window.confirm("Are you sure you want to change your password?"))try{o(!0);const K=await na.changePassword({studentId:z,currentPassword:H,newPassword:Q});K.success?(xe("Password changed successfully!","success"),L()):xe(K.message||"Failed to change password","error")}catch(K){Ae.error("Password change error:",K),xe("Failed to change password. Please try again.","error")}finally{o(!1)}},[v,t]),re=S.useCallback(()=>{if(Ae.debug("[DEBUG] navigateBackToCabinet called"),!r||!t){Ae.warn("[WARN] No valid user found, redirecting to login"),e("/login");return}t.role===el.STUDENT?(Ae.debug("[DEBUG] Navigating to student cabinet"),e("/student")):(Ae.warn("[WARN] Unknown user role, redirecting to login"),e("/login"))},[r,t,e]),ie=S.useCallback(fe=>{Ae.debug(" populateStudentInfoDirectly called with:",fe);try{Ae.debug(" Student info populated successfully")}catch(H){Ae.error(" Error populating student info:",H)}},[]),xe=S.useCallback((fe,H)=>{const Q={id:Date.now(),message:fe,type:H,timestamp:new Date};f(U=>[...U,Q]),setTimeout(()=>{f(U=>U.filter(V=>V.id!==Q.id))},Ym.NOTIFICATION_DURATION)},[]),de=S.useCallback(fe=>{const{name:H,value:Q}=fe.target;C(U=>({...U,[H]:Q}))},[]);return i?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing Student Application..."})]})}):c?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Initialization Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:c}),l.jsx(xt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?l.jsxs("div",{className:"bg-gray-50",children:[l.jsxs(Tk,{children:[l.jsx(Na,{path:"/",element:l.jsxs("div",{className:"student-app",children:[l.jsx(Pie,{isMenuOpen:m,onToggleMenu:M,onShowPasswordChange:O}),x&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Change Password"}),l.jsxs("form",{onSubmit:W,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),l.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:de,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),l.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:de,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),l.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:v.confirmPassword,onChange:de,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx(xt,{type:"button",variant:"secondary",onClick:L,className:"flex-1",children:"Cancel"}),l.jsx(xt,{type:"submit",variant:"primary",disabled:i,className:"flex-1",children:i?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",className:"mr-2"}),"Changing..."]}):"Change Password"})]})]})]})})]})}),l.jsx(Na,{path:"/test/:testType/:testId",element:l.jsx(Hie,{})}),l.jsx(Na,{path:"matching-test/:testId",element:l.jsx(Iie,{})}),l.jsx(Na,{path:"word-matching-test/:testId",element:l.jsx(Rie,{})}),l.jsx(Na,{path:"speaking-test/:testId",element:l.jsx(Wie,{})}),l.jsx(Na,{path:"/results",element:l.jsx(c$,{})})]}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:d.map(fe=>l.jsx(Ou,{type:fe.type,message:fe.message,onClose:()=>f(H=>H.filter(Q=>Q.id!==fe.id))},fe.id))})]}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Setting up Student Application..."})]})})},Vie=()=>l.jsx(QD,{children:l.jsx(JB,{children:l.jsx(XB,{children:l.jsx(Gie,{})})})}),qie=({result:e,isOpen:t,onClose:r,initialTab:n="overview",editingSpeakingScore:s,tempSpeakingScore:a,isSavingSpeakingScore:i,onStartSpeakingScoreEdit:o,onSaveSpeakingScore:c,onCancelSpeakingScoreEdit:u,onTempSpeakingScoreChange:d})=>{const[f,m]=S.useState(n),p=S.useRef(!1);if(S.useEffect(()=>()=>{p.current=!0},[]),S.useEffect(()=>{t&&m(n)},[t,n]),!t||!e)return null;const x={test_id:e.test_id,test_name:e.test_name,subject_id:e.subject_id};let w=e?.__audioUrl||void 0;const v=w?void 0:e?.answers;typeof v=="string"?w=v:v&&typeof v=="object"&&(w=v.audio_url),S.useEffect(()=>{console.log("[SpeakingReview] Transcript sources",{fromResult:e?.transcript,fromAnswersObject:typeof v=="object"&&v?.transcript?v.transcript:void 0,hasAnswers:!!v,test_id:e?.test_id,student_id:e?.student_id})},[e?.test_id,e?.student_id]);const[C,k]=S.useState("");S.useEffect(()=>{const j=new AbortController;let A=!1;const F=e?.__studentId||e?.student_id;return!e?.transcript&&!(typeof v=="object"&&v?.transcript)&&e?.test_id&&F&&(async()=>{try{const D=`/.netlify/functions/get-speaking-test-new?action=transcript&test_id=${encodeURIComponent(e.test_id)}&student_id=${encodeURIComponent(F)}`;console.log("[SpeakingReview] Fetching transcript from API:",{url:D});const M=await(window.tokenManager?.getToken()||ka.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),O=await fetch(D,{headers:{Authorization:M?`Bearer ${M}`:""},signal:j.signal});console.log("[SpeakingReview] Transcript API response:",{ok:O.ok,status:O.status});const L=await O.json().catch(()=>({}));console.log("[SpeakingReview] Transcript API body:",L),!A&&!p.current&&(O.ok?k(L.transcript||""):console.warn("[SpeakingReview] Transcript API failed:",L?.error||"unknown error"))}catch(D){D.name!=="AbortError"&&!p.current&&console.error("[SpeakingReview] Transcript fetch error:",D)}})(),()=>{A=!0;try{j.abort()}catch{}}},[e]);const b={score:e.score,max_score:e.max_score,percentage:e.percentage,audio_url:w,transcript:e.transcript||C||(typeof v=="object"&&v?.transcript?v.transcript:void 0),time_taken:e.time_taken,started_at:e.started_at,submitted_at:e.submitted_at};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[l.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Speaking Test Review - ",x.test_name]}),l.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),l.jsx("div",{className:"border-b border-gray-200",children:l.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"audio",label:"Audio"},{id:"transcript",label:"Transcript"},{id:"analysis",label:"AI Analysis"},{id:"scoring",label:"Scoring"}].map(j=>l.jsx("button",{onClick:()=>m(j.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${f===j.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:j.label},j.id))})}),l.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f==="overview"&&l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Name"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:x.test_name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[b.score," / ",b.max_score]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Taken"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.time_taken?`${Math.floor(b.time_taken/60)}:${(b.time_taken%60).toString().padStart(2,"0")}`:"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:b.submitted_at?new Date(b.submitted_at).toLocaleString():"N/A"})]})]})}),f==="audio"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audio Recording"}),b.audio_url?l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Click the play button to listen to the student's recording:"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsx(u$,{audioUrl:b.audio_url,className:"w-full"})})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No audio recording available"})})]}),f==="transcript"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transcript"}),b.transcript?l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.transcript})}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No transcript available"})})]}),f==="analysis"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Analysis Results"}),(()=>{let j=e.ai_feedback;if(j&&typeof j=="string")try{j=JSON.parse(j)}catch{j=null}return j?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Overall Performance"}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-800",children:j.overall_score||0}),l.jsx("div",{className:"text-sm text-gray-600",children:"Overall Score (0-100)"})]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Category Breakdown"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[j.grammar_score||0,"/25"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Grammar"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-green-600",children:[j.vocabulary_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Vocabulary"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[j.pronunciation_score||0,"/15"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Pronunciation"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[j.fluency_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Fluency"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-red-600",children:[j.content_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Content"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Performance Metrics"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Word Count:"}),l.jsx("span",{className:"text-sm font-medium",children:j.word_count||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Grammar Mistakes:"}),l.jsx("span",{className:"text-sm font-medium text-red-600",children:j.grammar_mistakes||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Vocabulary Issues:"}),l.jsx("span",{className:"text-sm font-medium text-red-600",children:j.vocabulary_mistakes||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Difficulty Level:"}),l.jsx("span",{className:"text-sm font-medium",children:j.difficulty_level||"N/A"})]})]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"AI Feedback"}),j.feedback?l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:l.jsx("p",{className:"text-sm text-gray-700",children:j.feedback})}):l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("p",{className:"text-sm",children:"No AI feedback available"})})]})]}),j.improved_transcript&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Improved Transcript"}),l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:l.jsx("p",{className:"text-sm text-gray-700",children:j.improved_transcript})})]}),j.grammar_corrections&&j.grammar_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Grammar Corrections"}),l.jsx("div",{className:"space-y-3",children:j.grammar_corrections.map((A,F)=>l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-red-800",children:"Mistake:"})," ",A.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-green-800",children:"Correction:"})," ",A.correction]}),A.explanation&&l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[l.jsx("span",{className:"font-medium",children:"Explanation:"})," ",A.explanation]})]},F))})]}),j.vocabulary_corrections&&j.vocabulary_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Vocabulary Improvements"}),l.jsx("div",{className:"space-y-3",children:j.vocabulary_corrections.map((A,F)=>l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-yellow-800",children:"Original:"})," ",A.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-green-800",children:"Better:"})," ",A.correction]}),A.explanation&&l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[l.jsx("span",{className:"font-medium",children:"Explanation:"})," ",A.explanation]})]},F))})]}),j.language_use_corrections&&j.language_use_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Language Use Suggestions"}),l.jsx("div",{className:"space-y-3",children:j.language_use_corrections.map((A,F)=>l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-blue-800",children:"Original:"})," ",A.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-blue-800",children:"Suggestion:"})," ",A.suggestion]}),A.explanation&&l.jsx("div",{className:"text-xs text-blue-700 mt-1",children:A.explanation})]},F))})]})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No AI analysis available for this result"})})})()]}),f==="scoring"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center",children:"Score Details"}),s?l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 place-items-center",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Score"}),l.jsx("input",{type:"number",min:"0",max:b.max_score,value:a,onChange:j=>d(j.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Max Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.max_score," (Fixed)"]})]})]}),l.jsxs("div",{className:"flex justify-center space-x-3",children:[l.jsx("button",{onClick:c,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Score"}),l.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]}):l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("div",{className:"grid grid-cols-1 place-items-center gap-2",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Current Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[b.score," / ",b.max_score]})]})}),l.jsx("button",{onClick:()=>o(e.id,b.score),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mx-auto",children:"Edit Score"})]})]})]}),l.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:l.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})},Kie=({isOpen:e,onClose:t,testResult:r,questions:n,isLoadingQuestions:s})=>{const a=v=>{if(!v)return{};if(typeof v=="string")try{return JSON.parse(v)}catch{return{}}return v||{}},i=S.useMemo(()=>{const v=r?.answers;if(console.log(" [TestAnswerModal] Raw testResult.answers:",v),console.log(" [TestAnswerModal] Raw testResult.answers type:",typeof v),v&&typeof v=="object"&&v.answers_by_id)return console.log(" [TestAnswerModal] Found answers_by_id format"),console.log(" [TestAnswerModal] answers_by_id:",v.answers_by_id),console.log(" [TestAnswerModal] question_order:",v.question_order),v.answers_by_id||{};const C=a(v);return console.log(" [TestAnswerModal] Parsed student answers:",C),console.log(" [TestAnswerModal] Full testResult:",r),C},[r?.answers]),o=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((v,C)=>{const k=v.question_id||v.id||C+1,b=String(k),j=Number(k),A=i[b]!==void 0?i[b]:i[j]!==void 0?i[j]:i[k]!==void 0?i[k]:void 0,F=v.correct_answer,D=A===F,M=O=>{const L=`option_${O.toLowerCase()}`;return v[L]||O};return l.jsxs("tr",{className:D?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:C+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l.jsx(Po,{content:v.question||""})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:A?l.jsxs("span",{className:`font-medium ${D?"text-green-700":"text-red-700"}`,children:[A," - ",l.jsx(Po,{content:M(A)})]}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[F," - ",l.jsx(Po,{content:M(F)})]}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:D?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},b)})})]})}),c=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((v,C)=>{const k=v.question_id||v.id||C+1,b=String(k),j=Number(k),A=i[b]!==void 0?i[b]:i[j]!==void 0?i[j]:i[k]!==void 0?i[k]:void 0,F=v.correct_answer;let D;typeof A=="boolean"?D=A:typeof A=="string"?D=A.toLowerCase().trim()==="true":A===1||A==="1"?D=!0:A===0||A==="0"?D=!1:D=!!A;let M;typeof F=="boolean"?M=F:typeof F=="string"?M=F.toLowerCase().trim()==="true":M=!!F;const O=D===M;C===0&&console.log(" [TestAnswerModal] True/False First Question Debug:",{questionIdStr:b,studentAnswer:A,studentAnswerType:typeof A,normalizedStudentAnswer:D,correctAnswer:F,correctAnswerType:typeof F,normalizedCorrectAnswer:M,isCorrect:O});const L=A!=null?D:null,W=M;return l.jsxs("tr",{className:O?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:C+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l.jsx(Po,{content:v.question||""})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:L!==null?l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${L?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:L?"True":"False"}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${W?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:W?"True":"False"})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:O?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},b)})})]})}),u=()=>{if(!n||n.length===0)return l.jsx("p",{className:"text-gray-500",children:"No questions available"});const v=(C,k)=>{if(!C||!k||k.length===0)return!1;const b=String(C).toLowerCase().trim();return k.some(j=>{const A=String(j).toLowerCase().trim();return b===A||A.length>=2&&b.includes(A)?!0:A.length===1?b.startsWith(A)||b.endsWith(A):!1})};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer(s)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((C,k)=>{const b=C.question_id||C.id||k+1,j=String(b),A=Number(b),F=i[j]!==void 0?i[j]:i[A]!==void 0?i[A]:i[b]!==void 0?i[b]:void 0,D=Array.isArray(C.correct_answers)?C.correct_answers:C.correct_answer?[C.correct_answer]:[],M=v(F,D);return k===0&&console.log(" [TestAnswerModal] First question debug:",{questionIdNum:b,questionIdStr:j,questionIdNumKey:A,studentAnswer:F,studentAnswers:i,studentAnswersKeys:Object.keys(i),correctAnswers:D,question:C}),l.jsxs("tr",{className:M?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:k+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:l.jsx(Po,{content:C.question||""})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:F?l.jsx("span",{className:`font-medium ${M?"text-green-700":"text-red-700"}`,children:l.jsx(Po,{content:String(F)})}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:D.length>0?l.jsx("div",{className:"space-y-1",children:D.map((O,L)=>l.jsx("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:l.jsx(Po,{content:String(O)})},L))}):l.jsx("span",{className:"text-gray-400",children:"No correct answer defined"})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:M?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},j)})})]})})},d=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Left Word"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Match"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Match"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((v,C)=>{const k=v.question_id||v.id||C+1,b=String(k),j=Number(k),A=i[b]!==void 0?i[b]:i[j]!==void 0?i[j]:i[k]!==void 0?i[k]:void 0,F=v.left_word,D=v.right_word;let M=null,O=!1;if(A){if(typeof A=="object")M=A.definition||A.right||A.word,O=A.word===F&&(A.definition||A.right)===D;else if(typeof A=="string")try{const L=JSON.parse(A);M=L.definition||L.right||L.word,O=L.word===F&&(L.definition||L.right)===D}catch{M=A}}return l.jsxs("tr",{className:O?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:C+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:F}),l.jsx("td",{className:"px-4 py-3 text-sm",children:M?l.jsx("span",{className:O?"text-green-700 font-medium":"text-red-700 font-medium",children:M}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:D}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:O?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},b)})})]})}),f=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"space-y-6",children:n.map((v,C)=>{const k=v.question_id||v.id||C+1,b=String(k),j=Number(k);C===0&&console.log(" [TestAnswerModal] Fill Blanks First Question Debug:",{questionIdNum:k,questionIdStr:b,questionIdNumKey:j,question:v,studentAnswers:i,studentAnswersKeys:Object.keys(i),correctAnswers:v.correct_answers});const A=i[b]!==void 0?i[b]:i[j]!==void 0?i[j]:i[k]!==void 0?i[k]:void 0,F=Array.isArray(v.correct_answers)?v.correct_answers:[];let D=[];return Array.isArray(A)?D=A:A!=null?D=[A]:D=[],l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Question ",C+1]}),l.jsxs("div",{className:"space-y-3",children:[v.question_json&&l.jsx("div",{className:"text-sm text-gray-700 mb-4",children:typeof v.question_json=="string"?v.question_json:v.question_json.text||v.question_json.question||"Question text not available"}),l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Blank #"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map((M,O)=>{let L=D[O];const W=O+1,re=String(W),ie=Number(W);(L==null||L==="")&&(L=i[re]!==void 0?i[re]:i[ie]!==void 0?i[ie]:L),C===0&&O===0&&console.log(" [TestAnswerModal] Fill Blanks First Blank Debug:",{blankIndex:O,potentialBlankId:W,potentialBlankIdStr:re,potentialBlankIdNum:ie,studentAns:L,studentAnswersForQ:D,correctAns:M,studentAnswersKeys:Object.keys(i)});const xe=String(L||"").trim().toLowerCase()===String(M||"").trim().toLowerCase();return l.jsxs("tr",{className:xe?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:O+1}),l.jsx("td",{className:"px-4 py-2 text-sm",children:L?l.jsx("span",{className:xe?"text-green-700 font-medium":"text-red-700 font-medium",children:String(L)}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:String(M)}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:xe?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:""}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:""})})]},O)})})]})]})]},b)})}),m=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Matching type tests require visual comparison. Answers stored as connection pairs."}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Word"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Connection"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((v,C)=>{const k=v.question_id||v.id||C+1,b=String(k),j=Number(k),A=i[b]!==void 0?i[b]:i[j]!==void 0?i[j]:i[k]!==void 0?i[k]:void 0;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:v.word}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:A?typeof A=="object"?JSON.stringify(A):A:l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})})]},b)})})]})})]}),p=()=>{if(!r)return null;const v=r.test_type||r.testType;if(s)return l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx(pn,{size:"lg"}),l.jsx("span",{className:"ml-4 text-gray-600",children:"Loading questions..."})]});if(!n||n.length===0)return l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500",children:"Unable to load questions for this test."}),l.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Test ID: ",r.test_id,", Type: ",v]})]});switch(v){case"multiple_choice":return o();case"true_false":return c();case"input":return u();case"word_matching":return d();case"fill_blanks":return f();case"matching_type":return m();default:return l.jsxs("div",{className:"text-center py-8",children:[l.jsxs("p",{className:"text-gray-500",children:['Test type "',v,'" is not supported for answer viewing.']}),l.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Drawing and Speaking tests have their own dedicated modals."})]})}};if(!r)return null;r.test_type||r.testType;const x=`${r.name||""} ${r.surname||""}`.trim(),w=`${r.test_name||"Test"} - ${x||r.student_id}`;return l.jsxs(Ka,{isOpen:e,onClose:t,title:w,size:"large",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[l.jsxs("div",{className:"flex space-x-6",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Score"}),l.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[r.best_retest_score!==null&&r.best_retest_score!==void 0?`${r.best_retest_score} / ${r.best_retest_max_score||r.max_score||0}`:`${r.score||0} / ${r.max_score||0}`,r.best_retest_score!==null&&r.best_retest_score!==void 0&&l.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Retest Best)"})]})]}),r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0&&r.best_retest_percentage>0||r.percentage&&r.percentage>0?l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Percentage"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0?`${r.best_retest_percentage.toFixed(1)}%`:`${r.percentage?.toFixed(1)||"0.0"}%`})]}):null,r.subject&&r.subject!=="N/A"?l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Subject"}),l.jsx("div",{className:"text-sm font-medium text-gray-700",children:r.subject})]}):null]}),r.submitted_at&&l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Submitted"}),l.jsx("div",{className:"text-sm text-gray-700",children:new Date(r.submitted_at).toLocaleString()})]})]}),l.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:p()}),r.caught_cheating&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-red-800",children:[" This test was flagged for suspicious activity (visibility changes: ",r.visibility_change_times||0,")"]})})]})};class j3 extends Hs.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){if(console.error("ErrorBoundary caught an error:",t,r),t.message&&t.message.includes("Minified React error #300")){console.warn("React error #300 caught and handled by ErrorBoundary");return}}render(){return this.state.hasError?l.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[l.jsx("h3",{className:"text-red-800 font-medium",children:"Something went wrong"}),l.jsx("p",{className:"text-red-600 text-sm mt-1",children:"An error occurred while rendering this component."})]}):this.props.children}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Yw={};Yw.version="0.18.5";var d$=1252,Xie=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],l7={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},c7=function(e){Xie.indexOf(e)!=-1&&(d$=l7[0]=e)};function Yie(){c7(1252)}var Au=function(e){c7(e)};function u7(){Au(1200),Yie()}function Kj(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Jie(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function f$(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var zx=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Jie(e.slice(2)):t==254&&r==255?f$(e.slice(2)):t==65279?e.slice(1):e},D2=function(t){return String.fromCharCode(t)},Xj=function(t){return String.fromCharCode(t)},Py,Gf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function My(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),a=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,s=e.charCodeAt(u++),o=(n&15)<<2|s>>6,c=s&63,isNaN(n)?o=c=64:isNaN(s)&&(c=64),t+=Gf.charAt(a)+Gf.charAt(i)+Gf.charAt(o)+Gf.charAt(c);return t}function Jl(e){var t="",r=0,n=0,s=0,a=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)a=Gf.indexOf(e.charAt(u++)),i=Gf.indexOf(e.charAt(u++)),r=a<<2|i>>4,t+=String.fromCharCode(r),o=Gf.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Gf.indexOf(e.charAt(u++)),s=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var Pn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),F0=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function nh(e){return Pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function Yj(e){return Pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Vl=function(t){return Pn?F0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function x4(e){if(typeof ArrayBuffer>"u")return Vl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function ph(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Qie(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function d7(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return d7(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var zi=Pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:F0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Zie(e){for(var t=[],r=0,n=e.length+250,s=nh(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(t.push(s.slice(0,r)),r=0,s=nh(65535),n=65530)}return t.push(s.slice(0,r)),zi(t)}var sl=/\u0000/g,Ux=/[\u0001-\u0006]/g;function up(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function ju(e,t){var r=""+e;return r.length>=t?r:Ea("0",t-r.length)+r}function f7(e,t){var r=""+e;return r.length>=t?r:Ea(" ",t-r.length)+r}function Jw(e,t){var r=""+e;return r.length>=t?r:r+Ea(" ",t-r.length)}function eoe(e,t){var r=""+Math.round(e);return r.length>=t?r:Ea("0",t-r.length)+r}function toe(e,t){var r=""+e;return r.length>=t?r:Ea("0",t-r.length)+r}var Jj=Math.pow(2,32);function Dg(e,t){if(e>Jj||e<-Jj)return eoe(e,t);var r=Math.round(e);return toe(r,t)}function Qw(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var Qj=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],P3=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function roe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var en={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Zj={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},noe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Zw(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),o=f*i+a,d=f*u+c,!(s-f<5e-8));)s=1/(s-f),a=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=a):(d=u,o=i)),!r)return[0,n*o,d];var m=Math.floor(n*o/d);return[m,n*o-m*d,d]}function nm(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,i=[],o={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],a=c.getDay(),n<60&&(a=(a+6)%7),r&&(a=coe(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var h$=new Date(1899,11,31,0,0,0),soe=h$.getTime(),aoe=new Date(1900,2,1,0,0,0);function m$(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=aoe&&(r+=1440*60*1e3),(r-(soe+(e.getTimezoneOffset()-h$.getTimezoneOffset())*6e4))/(1440*60*1e3)}function h7(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function ioe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function ooe(e){var t=e<0?12:11,r=h7(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function loe(e){var t=h7(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Fy(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=ooe(e):t===10?r=e.toFixed(10).substr(0,12):r=loe(e),h7(ioe(r.toUpperCase()))}function Im(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Fy(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Yc(14,m$(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function coe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function uoe(e,t,r,n){var s="",a=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return P3[r.m-1][1];case 5:return P3[r.m-1][0];default:return P3[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return Qj[r.q][0];default:return Qj[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?ju(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),t==="s"?a===0?"0":""+a/i:(s=ju(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?ju(c,u):"";return d}function Vf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var g$=/%/g;function doe(e,t,r){var n=t.replace(g$,""),s=t.length-n.length;return x0(e,n,r*Math.pow(10,2*s))+Ea("%",s)}function foe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return x0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function p$(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+p$(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var x$=/# (\?+)( ?)\/( ?)(\d+)/;function hoe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?Ea(" ",e[1].length+1+e[4].length):f7(i,e[1].length)+e[2]+"/"+e[3]+ju(o,e[4].length))}function moe(e,t,r){return r+(t===0?"":""+t)+Ea(" ",e[1].length+2+e[4].length)}var y$=/^#*0*\.([0#]+)/,v$=/\).*[0#]/,w$=/\(###\) ###\\?-####/;function Qo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function eP(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function tP(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function goe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function poe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Oc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(v$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Oc("n",n,r):"("+Oc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return foe(e,t,r);if(t.indexOf("%")!==-1)return doe(e,t,r);if(t.indexOf("E")!==-1)return p$(t,r);if(t.charCodeAt(0)===36)return"$"+Oc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Dg(c,t.length);if(t.match(/^[#?]+$/))return s=Dg(r,0),s==="0"&&(s=""),s.length>t.length?s:Qo(t.substr(0,t.length-s.length))+s;if(a=t.match(x$))return hoe(a,c,u);if(t.match(/^#+0+$/))return u+Dg(c,t.length-t.indexOf("0"));if(a=t.match(y$))return s=eP(r,a[1].length).replace(/^([^\.]+)$/,"$1."+Qo(a[1])).replace(/\.$/,"."+Qo(a[1])).replace(/\.(\d*)$/,function(x,w){return"."+w+Ea("0",Qo(a[1]).length-w.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+eP(c,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Vf(Dg(c,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Oc(e,t,-r):Vf(""+(Math.floor(r)+goe(r,a[1].length)))+"."+ju(tP(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return Oc(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=up(Oc(e,t.replace(/[\\-]/g,""),r)),i=0,up(up(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(w$))return s=Oc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Zw(c,Math.pow(10,i)-1,!1),s=""+u,d=x0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=Jw(o[2],i),d.length<a[4].length&&(d=Qo(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=Zw(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?f7(o[1],i)+a[2]+"/"+a[3]+Jw(o[2],i):Ea(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=Dg(r,0),t.length<=s.length?s:Qo(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,m=t.length-s.length-f;return Qo(t.substr(0,f)+s+t.substr(t.length-m))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=tP(r,a[1].length),r<0?"-"+Oc(e,t,-r):Vf(poe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ju(0,3-x.length):"")+x})+"."+ju(i,a[1].length);switch(t){case"###,##0.00":return Oc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Vf(Dg(c,0));return p!=="0"?u+p:"";case"###,###.00":return Oc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Oc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function xoe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return x0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function yoe(e,t,r){var n=t.replace(g$,""),s=t.length-n.length;return x0(e,n,r*Math.pow(10,2*s))+Ea("%",s)}function b$(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+b$(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function cd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(v$)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?cd("n",n,r):"("+cd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return xoe(e,t,r);if(t.indexOf("%")!==-1)return yoe(e,t,r);if(t.indexOf("E")!==-1)return b$(t,r);if(t.charCodeAt(0)===36)return"$"+cd(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+ju(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Qo(t.substr(0,t.length-s.length))+s;if(a=t.match(x$))return moe(a,c,u);if(t.match(/^#+0+$/))return u+ju(c,t.length-t.indexOf("0"));if(a=t.match(y$))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Qo(a[1])).replace(/\.$/,"."+Qo(a[1])),s=s.replace(/\.(\d*)$/,function(x,w){return"."+w+Ea("0",Qo(a[1]).length-w.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Vf(""+c);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+cd(e,t,-r):Vf(""+r)+"."+Ea("0",a[1].length);if(a=t.match(/^#,#*,#0/))return cd(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=up(cd(e,t.replace(/[\\-]/g,""),r)),i=0,up(up(t.replace(/\\/g,"")).replace(/[0#]/g,function(x){return i<s.length?s.charAt(i++):x==="0"?"0":""}));if(t.match(w$))return s=cd(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=Zw(c,Math.pow(10,i)-1,!1),s=""+u,d=x0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=Jw(o[2],i),d.length<a[4].length&&(d=Qo(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=Zw(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?f7(o[1],i)+a[2]+"/"+a[3]+Jw(o[2],i):Ea(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Qo(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,m=t.length-s.length-f;return Qo(t.substr(0,f)+s+t.substr(t.length-m))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+cd(e,t,-r):Vf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?ju(0,3-x.length):"")+x})+"."+ju(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Vf(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return cd(e,t.slice(0,t.lastIndexOf(".")),r)+Qo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function x0(e,t,r){return(r|0)===r?cd(e,t,r):Oc(e,t,r)}function voe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var _$=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Qp(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Qw(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(_$))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function woe(e,t,r,n){for(var s=[],a="",i=0,o="",c="t",u,d,f,m="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!Qw(e,i))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(f=e.charCodeAt(++i))!==34&&i<e.length;)a+=String.fromCharCode(f);s[s.length]={t:"t",v:a},++i;break;case"\\":var p=e.charAt(++i),x=p==="("||p===")"?p:"t";s[s.length]={t:x,v:p},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=nm(t,r,e.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=nm(t,r),u==null))return"";for(a=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),s[s.length]={t:o,v:a},c=o;break;case"A":case"a":case"":var w={t:o,v:o};if(u==null&&(u=nm(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(w.v=u.H>=12?"P":"A"),w.t="T",m="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(w.v=u.H>=12?"PM":"AM"),w.t="T",i+=5,m="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(w.v=u.H>=12?"":""),w.t="T",i+=5,m="h"):(w.t="t",++i),u==null&&w.t==="T")return"";s[s.length]=w,c=o;break;case"[":for(a=o;e.charAt(i++)!=="]"&&i<e.length;)a+=e.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(_$)){if(u==null&&(u=nm(t,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},c=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Qp(e)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<e.length&&(o=e.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)a+=e.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++i;break}var v=0,C=0,k;for(i=s.length-1,c="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=m,c="h",v<1&&(v=1);break;case"s":(k=s[i].v.match(/\.0+$/))&&(C=Math.max(C,k[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=s[i].t;break;case"m":c==="s"&&(s[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[i].v.match(/[Hh]/)&&(v=1),v<2&&s[i].v.match(/[Mm]/)&&(v=2),v<3&&s[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var b="",j;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=uoe(s[i].t.charCodeAt(0),s[i].v,u,C),s[i].t="t";break;case"n":case"?":for(j=i+1;s[j]!=null&&((o=s[j].t)==="?"||o==="D"||(o===" "||o==="t")&&s[j+1]!=null&&(s[j+1].t==="?"||s[j+1].t==="t"&&s[j+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[j].v==="/"||s[j].v===" "&&s[j+1]!=null&&s[j+1].t=="?"));)s[i].v+=s[j].v,s[j]={v:"",t:";"},++j;b+=s[i].v,i=j-1;break;case"G":s[i].t="t",s[i].v=Im(t,r);break}var A="",F,D;if(b.length>0){b.charCodeAt(0)==40?(F=t<0&&b.charCodeAt(0)===45?-t:t,D=x0("n",b,F)):(F=t<0&&n>1?-t:t,D=x0("n",b,F),F<0&&s[0]&&s[0].t=="t"&&(D=D.substr(1),s[0].v="-"+s[0].v)),j=D.length-1;var M=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){M=i;break}var O=s.length;if(M===s.length&&D.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(j>=s[i].v.length-1?(j-=s[i].v.length,s[i].v=D.substr(j+1,s[i].v.length)):j<0?s[i].v="":(s[i].v=D.substr(0,j+1),j=-1),s[i].t="t",O=i);j>=0&&O<s.length&&(s[O].v=D.substr(0,j+1)+s[O].v)}else if(M!==s.length&&D.indexOf("E")===-1){for(j=D.indexOf(".")-1,i=M;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===M?s[i].v.indexOf(".")-1:s[i].v.length-1,A=s[i].v.substr(d+1);d>=0;--d)j>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(A=D.charAt(j--)+A);s[i].v=A,s[i].t="t",O=i}for(j>=0&&O<s.length&&(s[O].v=D.substr(0,j+1)+s[O].v),j=D.indexOf(".")+1,i=M;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==M)){for(d=s[i].v.indexOf(".")>-1&&i===M?s[i].v.indexOf(".")+1:0,A=s[i].v.substr(0,d);d<s[i].v.length;++d)j<D.length&&(A+=D.charAt(j++));s[i].v=A,s[i].t="t",O=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(F=n>1&&t<0&&i>0&&s[i-1].v==="-"?-t:t,s[i].v=x0(s[i].t,s[i].v,F),s[i].t="t");var L="";for(i=0;i!==s.length;++i)s[i]!=null&&(L+=s[i].v);return L}var rP=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function nP(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function boe(e,t){var r=voe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(rP),o=r[1].match(rP);return nP(t,i)?[n,r[0]]:nP(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function Yc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:en)[e],n==null&&(n=r.table&&r.table[Zj[e]]||en[Zj[e]]),n==null&&(n=noe[e]||"General");break}if(Qw(n,0))return Im(t,r);t instanceof Date&&(t=m$(t,r.date1904));var s=boe(n,t);if(Qw(s[1]))return Im(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return woe(s[1],t,r,s[0])}function y0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(en[r]==null){t<0&&(t=r);continue}if(en[r]==e){t=r;break}}t<0&&(t=391)}return en[t]=e,t}function y4(e){for(var t=0;t!=392;++t)e[t]!==void 0&&y0(e[t],t)}function Zp(){en=roe()}var _oe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},S$=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Soe(e){var t=typeof e=="number"?en[e]:e;return t=t.replace(S$,"(\\d+)"),new RegExp("^"+t+"$")}function koe(e,t,r){var n=-1,s=-1,a=-1,i=-1,o=-1,c=-1;(t.match(S$)||[]).forEach(function(f,m){var p=parseInt(r[m+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":a=p;break;case"h":i=p;break;case"s":c=p;break;case"m":i>=0?o=p:s=p;break}}),c>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var Toe=(function(){var e={};e.version="1.2.0";function t(){for(var D=0,M=new Array(256),O=0;O!=256;++O)D=O,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,M[O]=D;return typeof Int32Array<"u"?new Int32Array(M):M}var r=t();function n(D){var M=0,O=0,L=0,W=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)W[L]=D[L];for(L=0;L!=256;++L)for(O=D[L],M=256+L;M<4096;M+=256)O=W[M]=O>>>8^D[O&255];var re=[];for(L=1;L!=16;++L)re[L-1]=typeof Int32Array<"u"?W.subarray(L*256,L*256+256):W.slice(L*256,L*256+256);return re}var s=n(r),a=s[0],i=s[1],o=s[2],c=s[3],u=s[4],d=s[5],f=s[6],m=s[7],p=s[8],x=s[9],w=s[10],v=s[11],C=s[12],k=s[13],b=s[14];function j(D,M){for(var O=M^-1,L=0,W=D.length;L<W;)O=O>>>8^r[(O^D.charCodeAt(L++))&255];return~O}function A(D,M){for(var O=M^-1,L=D.length-15,W=0;W<L;)O=b[D[W++]^O&255]^k[D[W++]^O>>8&255]^C[D[W++]^O>>16&255]^v[D[W++]^O>>>24]^w[D[W++]]^x[D[W++]]^p[D[W++]]^m[D[W++]]^f[D[W++]]^d[D[W++]]^u[D[W++]]^c[D[W++]]^o[D[W++]]^i[D[W++]]^a[D[W++]]^r[D[W++]];for(L+=15;W<L;)O=O>>>8^r[(O^D[W++])&255];return~O}function F(D,M){for(var O=M^-1,L=0,W=D.length,re=0,ie=0;L<W;)re=D.charCodeAt(L++),re<128?O=O>>>8^r[(O^re)&255]:re<2048?(O=O>>>8^r[(O^(192|re>>6&31))&255],O=O>>>8^r[(O^(128|re&63))&255]):re>=55296&&re<57344?(re=(re&1023)+64,ie=D.charCodeAt(L++)&1023,O=O>>>8^r[(O^(240|re>>8&7))&255],O=O>>>8^r[(O^(128|re>>2&63))&255],O=O>>>8^r[(O^(128|ie>>6&15|(re&3)<<4))&255],O=O>>>8^r[(O^(128|ie&63))&255]):(O=O>>>8^r[(O^(224|re>>12&15))&255],O=O>>>8^r[(O^(128|re>>6&63))&255],O=O>>>8^r[(O^(128|re&63))&255]);return~O}return e.table=r,e.bstr=j,e.buf=A,e.str=F,e})(),qr=(function(){var t={};t.version="1.2.1";function r(G,ue){for(var Ce=G.split("/"),be=ue.split("/"),Me=0,De=0,Ve=Math.min(Ce.length,be.length);Me<Ve;++Me){if(De=Ce[Me].length-be[Me].length)return De;if(Ce[Me]!=be[Me])return Ce[Me]<be[Me]?-1:1}return Ce.length-be.length}function n(G){if(G.charAt(G.length-1)=="/")return G.slice(0,-1).indexOf("/")===-1?G:n(G.slice(0,-1));var ue=G.lastIndexOf("/");return ue===-1?G:G.slice(0,ue+1)}function s(G){if(G.charAt(G.length-1)=="/")return s(G.slice(0,-1));var ue=G.lastIndexOf("/");return ue===-1?G:G.slice(ue+1)}function a(G,ue){typeof ue=="string"&&(ue=new Date(ue));var Ce=ue.getHours();Ce=Ce<<6|ue.getMinutes(),Ce=Ce<<5|ue.getSeconds()>>>1,G.write_shift(2,Ce);var be=ue.getFullYear()-1980;be=be<<4|ue.getMonth()+1,be=be<<5|ue.getDate(),G.write_shift(2,be)}function i(G){var ue=G.read_shift(2)&65535,Ce=G.read_shift(2)&65535,be=new Date,Me=Ce&31;Ce>>>=5;var De=Ce&15;Ce>>>=4,be.setMilliseconds(0),be.setFullYear(Ce+1980),be.setMonth(De-1),be.setDate(Me);var Ve=ue&31;ue>>>=5;var bt=ue&63;return ue>>>=6,be.setHours(ue),be.setMinutes(bt),be.setSeconds(Ve<<1),be}function o(G){io(G,0);for(var ue={},Ce=0;G.l<=G.length-4;){var be=G.read_shift(2),Me=G.read_shift(2),De=G.l+Me,Ve={};switch(be){case 21589:Ce=G.read_shift(1),Ce&1&&(Ve.mtime=G.read_shift(4)),Me>5&&(Ce&2&&(Ve.atime=G.read_shift(4)),Ce&4&&(Ve.ctime=G.read_shift(4))),Ve.mtime&&(Ve.mt=new Date(Ve.mtime*1e3));break}G.l=De,ue[be]=Ve}return ue}var c;function u(){return c||(c={})}function d(G,ue){if(G[0]==80&&G[1]==75)return Ee(G,ue);if((G[0]|32)==109&&(G[1]|32)==105)return rt(G,ue);if(G.length<512)throw new Error("CFB file size "+G.length+" < 512");var Ce=3,be=512,Me=0,De=0,Ve=0,bt=0,ot=0,dt=[],ee=G.slice(0,512);io(ee,0);var je=f(ee);switch(Ce=je[0],Ce){case 3:be=512;break;case 4:be=4096;break;case 0:if(je[1]==0)return Ee(G,ue);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}be!==512&&(ee=G.slice(0,be),io(ee,28));var ge=G.slice(0,be);m(ee,Ce);var Ke=ee.read_shift(4,"i");if(Ce===3&&Ke!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Ke);ee.l+=4,Ve=ee.read_shift(4,"i"),ee.l+=4,ee.chk("00100000","Mini Stream Cutoff Size: "),bt=ee.read_shift(4,"i"),Me=ee.read_shift(4,"i"),ot=ee.read_shift(4,"i"),De=ee.read_shift(4,"i");for(var tt=-1,Tt=0;Tt<109&&(tt=ee.read_shift(4,"i"),!(tt<0));++Tt)dt[Tt]=tt;var cr=p(G,be);v(ot,De,cr,be,dt);var Vt=k(cr,Ve,dt,be);Vt[Ve].name="!Directory",Me>0&&bt!==ie&&(Vt[bt].name="!MiniFAT"),Vt[dt[0]].name="!FAT",Vt.fat_addrs=dt,Vt.ssz=be;var $t={},mr=[],Zr=[],jr=[];b(Ve,Vt,cr,mr,Me,$t,Zr,bt),x(Zr,jr,mr),mr.shift();var Pr={FileIndex:Zr,FullPaths:jr};return ue&&ue.raw&&(Pr.raw={header:ge,sectors:cr}),Pr}function f(G){if(G[G.l]==80&&G[G.l+1]==75)return[0,0];G.chk(xe,"Header Signature: "),G.l+=16;var ue=G.read_shift(2,"u");return[G.read_shift(2,"u"),ue]}function m(G,ue){var Ce=9;switch(G.l+=2,Ce=G.read_shift(2)){case 9:if(ue!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(ue!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}G.chk("0600","Mini Sector Shift: "),G.chk("000000000000","Reserved: ")}function p(G,ue){for(var Ce=Math.ceil(G.length/ue)-1,be=[],Me=1;Me<Ce;++Me)be[Me-1]=G.slice(Me*ue,(Me+1)*ue);return be[Ce-1]=G.slice(Ce*ue),be}function x(G,ue,Ce){for(var be=0,Me=0,De=0,Ve=0,bt=0,ot=Ce.length,dt=[],ee=[];be<ot;++be)dt[be]=ee[be]=be,ue[be]=Ce[be];for(;bt<ee.length;++bt)be=ee[bt],Me=G[be].L,De=G[be].R,Ve=G[be].C,dt[be]===be&&(Me!==-1&&dt[Me]!==Me&&(dt[be]=dt[Me]),De!==-1&&dt[De]!==De&&(dt[be]=dt[De])),Ve!==-1&&(dt[Ve]=be),Me!==-1&&be!=dt[be]&&(dt[Me]=dt[be],ee.lastIndexOf(Me)<bt&&ee.push(Me)),De!==-1&&be!=dt[be]&&(dt[De]=dt[be],ee.lastIndexOf(De)<bt&&ee.push(De));for(be=1;be<ot;++be)dt[be]===be&&(De!==-1&&dt[De]!==De?dt[be]=dt[De]:Me!==-1&&dt[Me]!==Me&&(dt[be]=dt[Me]));for(be=1;be<ot;++be)if(G[be].type!==0){if(bt=be,bt!=dt[bt])do bt=dt[bt],ue[be]=ue[bt]+"/"+ue[be];while(bt!==0&&dt[bt]!==-1&&bt!=dt[bt]);dt[be]=-1}for(ue[0]+="/",be=1;be<ot;++be)G[be].type!==2&&(ue[be]+="/")}function w(G,ue,Ce){for(var be=G.start,Me=G.size,De=[],Ve=be;Ce&&Me>0&&Ve>=0;)De.push(ue.slice(Ve*re,Ve*re+re)),Me-=re,Ve=Zh(Ce,Ve*4);return De.length===0?Ht(0):zi(De).slice(0,G.size)}function v(G,ue,Ce,be,Me){var De=ie;if(G===ie){if(ue!==0)throw new Error("DIFAT chain shorter than expected")}else if(G!==-1){var Ve=Ce[G],bt=(be>>>2)-1;if(!Ve)return;for(var ot=0;ot<bt&&(De=Zh(Ve,ot*4))!==ie;++ot)Me.push(De);v(Zh(Ve,be-4),ue-1,Ce,be,Me)}}function C(G,ue,Ce,be,Me){var De=[],Ve=[];Me||(Me=[]);var bt=be-1,ot=0,dt=0;for(ot=ue;ot>=0;){Me[ot]=!0,De[De.length]=ot,Ve.push(G[ot]);var ee=Ce[Math.floor(ot*4/be)];if(dt=ot*4&bt,be<4+dt)throw new Error("FAT boundary crossed: "+ot+" 4 "+be);if(!G[ee])break;ot=Zh(G[ee],dt)}return{nodes:De,data:gP([Ve])}}function k(G,ue,Ce,be){var Me=G.length,De=[],Ve=[],bt=[],ot=[],dt=be-1,ee=0,je=0,ge=0,Ke=0;for(ee=0;ee<Me;++ee)if(bt=[],ge=ee+ue,ge>=Me&&(ge-=Me),!Ve[ge]){ot=[];var tt=[];for(je=ge;je>=0;){tt[je]=!0,Ve[je]=!0,bt[bt.length]=je,ot.push(G[je]);var Tt=Ce[Math.floor(je*4/be)];if(Ke=je*4&dt,be<4+Ke)throw new Error("FAT boundary crossed: "+je+" 4 "+be);if(!G[Tt]||(je=Zh(G[Tt],Ke),tt[je]))break}De[ge]={nodes:bt,data:gP([ot])}}return De}function b(G,ue,Ce,be,Me,De,Ve,bt){for(var ot=0,dt=be.length?2:0,ee=ue[G].data,je=0,ge=0,Ke;je<ee.length;je+=128){var tt=ee.slice(je,je+128);io(tt,64),ge=tt.read_shift(2),Ke=w7(tt,0,ge-dt),be.push(Ke);var Tt={name:Ke,type:tt.read_shift(1),color:tt.read_shift(1),L:tt.read_shift(4,"i"),R:tt.read_shift(4,"i"),C:tt.read_shift(4,"i"),clsid:tt.read_shift(16),state:tt.read_shift(4,"i"),start:0,size:0},cr=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);cr!==0&&(Tt.ct=j(tt,tt.l-8));var Vt=tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2)+tt.read_shift(2);Vt!==0&&(Tt.mt=j(tt,tt.l-8)),Tt.start=tt.read_shift(4,"i"),Tt.size=tt.read_shift(4,"i"),Tt.size<0&&Tt.start<0&&(Tt.size=Tt.type=0,Tt.start=ie,Tt.name=""),Tt.type===5?(ot=Tt.start,Me>0&&ot!==ie&&(ue[ot].name="!StreamData")):Tt.size>=4096?(Tt.storage="fat",ue[Tt.start]===void 0&&(ue[Tt.start]=C(Ce,Tt.start,ue.fat_addrs,ue.ssz)),ue[Tt.start].name=Tt.name,Tt.content=ue[Tt.start].data.slice(0,Tt.size)):(Tt.storage="minifat",Tt.size<0?Tt.size=0:ot!==ie&&Tt.start!==ie&&ue[ot]&&(Tt.content=w(Tt,ue[ot].data,(ue[bt]||{}).data))),Tt.content&&io(Tt.content,0),De[Ke]=Tt,Ve.push(Tt)}}function j(G,ue){return new Date((Hl(G,ue+4)/1e7*Math.pow(2,32)+Hl(G,ue)/1e7-11644473600)*1e3)}function A(G,ue){return u(),d(c.readFileSync(G),ue)}function F(G,ue){var Ce=ue&&ue.type;switch(Ce||Pn&&Buffer.isBuffer(G)&&(Ce="buffer"),Ce||"base64"){case"file":return A(G,ue);case"base64":return d(Vl(Jl(G)),ue);case"binary":return d(Vl(G),ue)}return d(G,ue)}function D(G,ue){var Ce=ue||{},be=Ce.root||"Root Entry";if(G.FullPaths||(G.FullPaths=[]),G.FileIndex||(G.FileIndex=[]),G.FullPaths.length!==G.FileIndex.length)throw new Error("inconsistent CFB structure");G.FullPaths.length===0&&(G.FullPaths[0]=be+"/",G.FileIndex[0]={name:be,type:5}),Ce.CLSID&&(G.FileIndex[0].clsid=Ce.CLSID),M(G)}function M(G){var ue="Sh33tJ5";if(!qr.find(G,"/"+ue)){var Ce=Ht(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,G.FileIndex.push({name:ue,type:2,content:Ce,size:4,L:69,R:69,C:69}),G.FullPaths.push(G.FullPaths[0]+ue),O(G)}}function O(G,ue){D(G);for(var Ce=!1,be=!1,Me=G.FullPaths.length-1;Me>=0;--Me){var De=G.FileIndex[Me];switch(De.type){case 0:be?Ce=!0:(G.FileIndex.pop(),G.FullPaths.pop());break;case 1:case 2:case 5:be=!0,isNaN(De.R*De.L*De.C)&&(Ce=!0),De.R>-1&&De.L>-1&&De.R==De.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!ue)){var Ve=new Date(1987,1,19),bt=0,ot=Object.create?Object.create(null):{},dt=[];for(Me=0;Me<G.FullPaths.length;++Me)ot[G.FullPaths[Me]]=!0,G.FileIndex[Me].type!==0&&dt.push([G.FullPaths[Me],G.FileIndex[Me]]);for(Me=0;Me<dt.length;++Me){var ee=n(dt[Me][0]);be=ot[ee],be||(dt.push([ee,{name:s(ee).replace("/",""),type:1,clsid:fe,ct:Ve,mt:Ve,content:null}]),ot[ee]=!0)}for(dt.sort(function(Ke,tt){return r(Ke[0],tt[0])}),G.FullPaths=[],G.FileIndex=[],Me=0;Me<dt.length;++Me)G.FullPaths[Me]=dt[Me][0],G.FileIndex[Me]=dt[Me][1];for(Me=0;Me<dt.length;++Me){var je=G.FileIndex[Me],ge=G.FullPaths[Me];if(je.name=s(ge).replace("/",""),je.L=je.R=je.C=-(je.color=1),je.size=je.content?je.content.length:0,je.start=0,je.clsid=je.clsid||fe,Me===0)je.C=dt.length>1?1:-1,je.size=0,je.type=5;else if(ge.slice(-1)=="/"){for(bt=Me+1;bt<dt.length&&n(G.FullPaths[bt])!=ge;++bt);for(je.C=bt>=dt.length?-1:bt,bt=Me+1;bt<dt.length&&n(G.FullPaths[bt])!=n(ge);++bt);je.R=bt>=dt.length?-1:bt,je.type=1}else n(G.FullPaths[Me+1]||"")==n(ge)&&(je.R=Me+1),je.type=2}}}function L(G,ue){var Ce=ue||{};if(Ce.fileType=="mad")return qt(G,Ce);switch(O(G),Ce.fileType){case"zip":return qe(G,Ce)}var be=(function(Ke){for(var tt=0,Tt=0,cr=0;cr<Ke.FileIndex.length;++cr){var Vt=Ke.FileIndex[cr];if(Vt.content){var $t=Vt.content.length;$t>0&&($t<4096?tt+=$t+63>>6:Tt+=$t+511>>9)}}for(var mr=Ke.FullPaths.length+3>>2,Zr=tt+7>>3,jr=tt+127>>7,Pr=Zr+Tt+mr+jr,xn=Pr+127>>7,Kr=xn<=109?0:Math.ceil((xn-109)/127);Pr+xn+Kr+127>>7>xn;)Kr=++xn<=109?0:Math.ceil((xn-109)/127);var Ir=[1,Kr,xn,jr,mr,Tt,tt,0];return Ke.FileIndex[0].size=tt<<6,Ir[7]=(Ke.FileIndex[0].start=Ir[0]+Ir[1]+Ir[2]+Ir[3]+Ir[4]+Ir[5])+(Ir[6]+7>>3),Ir})(G),Me=Ht(be[7]<<9),De=0,Ve=0;{for(De=0;De<8;++De)Me.write_shift(1,de[De]);for(De=0;De<8;++De)Me.write_shift(2,0);for(Me.write_shift(2,62),Me.write_shift(2,3),Me.write_shift(2,65534),Me.write_shift(2,9),Me.write_shift(2,6),De=0;De<3;++De)Me.write_shift(2,0);for(Me.write_shift(4,0),Me.write_shift(4,be[2]),Me.write_shift(4,be[0]+be[1]+be[2]+be[3]-1),Me.write_shift(4,0),Me.write_shift(4,4096),Me.write_shift(4,be[3]?be[0]+be[1]+be[2]-1:ie),Me.write_shift(4,be[3]),Me.write_shift(-4,be[1]?be[0]-1:ie),Me.write_shift(4,be[1]),De=0;De<109;++De)Me.write_shift(-4,De<be[2]?be[1]+De:-1)}if(be[1])for(Ve=0;Ve<be[1];++Ve){for(;De<236+Ve*127;++De)Me.write_shift(-4,De<be[2]?be[1]+De:-1);Me.write_shift(-4,Ve===be[1]-1?ie:Ve+1)}var bt=function(Ke){for(Ve+=Ke;De<Ve-1;++De)Me.write_shift(-4,De+1);Ke&&(++De,Me.write_shift(-4,ie))};for(Ve=De=0,Ve+=be[1];De<Ve;++De)Me.write_shift(-4,H.DIFSECT);for(Ve+=be[2];De<Ve;++De)Me.write_shift(-4,H.FATSECT);bt(be[3]),bt(be[4]);for(var ot=0,dt=0,ee=G.FileIndex[0];ot<G.FileIndex.length;++ot)ee=G.FileIndex[ot],ee.content&&(dt=ee.content.length,!(dt<4096)&&(ee.start=Ve,bt(dt+511>>9)));for(bt(be[6]+7>>3);Me.l&511;)Me.write_shift(-4,H.ENDOFCHAIN);for(Ve=De=0,ot=0;ot<G.FileIndex.length;++ot)ee=G.FileIndex[ot],ee.content&&(dt=ee.content.length,!(!dt||dt>=4096)&&(ee.start=Ve,bt(dt+63>>6)));for(;Me.l&511;)Me.write_shift(-4,H.ENDOFCHAIN);for(De=0;De<be[4]<<2;++De){var je=G.FullPaths[De];if(!je||je.length===0){for(ot=0;ot<17;++ot)Me.write_shift(4,0);for(ot=0;ot<3;++ot)Me.write_shift(4,-1);for(ot=0;ot<12;++ot)Me.write_shift(4,0);continue}ee=G.FileIndex[De],De===0&&(ee.start=ee.size?ee.start-1:ie);var ge=De===0&&Ce.root||ee.name;if(dt=2*(ge.length+1),Me.write_shift(64,ge,"utf16le"),Me.write_shift(2,dt),Me.write_shift(1,ee.type),Me.write_shift(1,ee.color),Me.write_shift(-4,ee.L),Me.write_shift(-4,ee.R),Me.write_shift(-4,ee.C),ee.clsid)Me.write_shift(16,ee.clsid,"hex");else for(ot=0;ot<4;++ot)Me.write_shift(4,0);Me.write_shift(4,ee.state||0),Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(4,0),Me.write_shift(4,ee.start),Me.write_shift(4,ee.size),Me.write_shift(4,0)}for(De=1;De<G.FileIndex.length;++De)if(ee=G.FileIndex[De],ee.size>=4096)if(Me.l=ee.start+1<<9,Pn&&Buffer.isBuffer(ee.content))ee.content.copy(Me,Me.l,0,ee.size),Me.l+=ee.size+511&-512;else{for(ot=0;ot<ee.size;++ot)Me.write_shift(1,ee.content[ot]);for(;ot&511;++ot)Me.write_shift(1,0)}for(De=1;De<G.FileIndex.length;++De)if(ee=G.FileIndex[De],ee.size>0&&ee.size<4096)if(Pn&&Buffer.isBuffer(ee.content))ee.content.copy(Me,Me.l,0,ee.size),Me.l+=ee.size+63&-64;else{for(ot=0;ot<ee.size;++ot)Me.write_shift(1,ee.content[ot]);for(;ot&63;++ot)Me.write_shift(1,0)}if(Pn)Me.l=Me.length;else for(;Me.l<Me.length;)Me.write_shift(1,0);return Me}function W(G,ue){var Ce=G.FullPaths.map(function(ot){return ot.toUpperCase()}),be=Ce.map(function(ot){var dt=ot.split("/");return dt[dt.length-(ot.slice(-1)=="/"?2:1)]}),Me=!1;ue.charCodeAt(0)===47?(Me=!0,ue=Ce[0].slice(0,-1)+ue):Me=ue.indexOf("/")!==-1;var De=ue.toUpperCase(),Ve=Me===!0?Ce.indexOf(De):be.indexOf(De);if(Ve!==-1)return G.FileIndex[Ve];var bt=!De.match(Ux);for(De=De.replace(sl,""),bt&&(De=De.replace(Ux,"!")),Ve=0;Ve<Ce.length;++Ve)if((bt?Ce[Ve].replace(Ux,"!"):Ce[Ve]).replace(sl,"")==De||(bt?be[Ve].replace(Ux,"!"):be[Ve]).replace(sl,"")==De)return G.FileIndex[Ve];return null}var re=64,ie=-2,xe="d0cf11e0a1b11ae1",de=[208,207,17,224,161,177,26,225],fe="00000000000000000000000000000000",H={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ie,FREESECT:-1,HEADER_SIGNATURE:xe,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:fe,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Q(G,ue,Ce){u();var be=L(G,Ce);c.writeFileSync(ue,be)}function U(G){for(var ue=new Array(G.length),Ce=0;Ce<G.length;++Ce)ue[Ce]=String.fromCharCode(G[Ce]);return ue.join("")}function V(G,ue){var Ce=L(G,ue);switch(ue&&ue.type||"buffer"){case"file":return u(),c.writeFileSync(ue.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:U(Ce);case"base64":return My(typeof Ce=="string"?Ce:U(Ce));case"buffer":if(Pn)return Buffer.isBuffer(Ce)?Ce:F0(Ce);case"array":return typeof Ce=="string"?Vl(Ce):Ce}return Ce}var X;function z(G){try{var ue=G.InflateRaw,Ce=new ue;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)X=G;else throw new Error("zlib does not expose bytesRead")}catch(be){console.error("cannot use native zlib: "+(be.message||be))}}function K(G,ue){if(!X)return Ar(G,ue);var Ce=X.InflateRaw,be=new Ce,Me=be._processChunk(G.slice(G.l),be._finishFlushFlag);return G.l+=be.bytesRead,Me}function te(G){return X?X.deflateRawSync(G):mt(G)}var se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],pe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ye(G){var ue=(G<<1|G<<11)&139536|(G<<5|G<<15)&558144;return(ue>>16|ue>>8|ue)&255}for(var we=typeof Uint8Array<"u",Se=we?new Uint8Array(256):[],Ie=0;Ie<256;++Ie)Se[Ie]=ye(Ie);function me(G,ue){var Ce=Se[G&255];return ue<=8?Ce>>>8-ue:(Ce=Ce<<8|Se[G>>8&255],ue<=16?Ce>>>16-ue:(Ce=Ce<<8|Se[G>>16&255],Ce>>>24-ue))}function _e(G,ue){var Ce=ue&7,be=ue>>>3;return(G[be]|(Ce<=6?0:G[be+1]<<8))>>>Ce&3}function We(G,ue){var Ce=ue&7,be=ue>>>3;return(G[be]|(Ce<=5?0:G[be+1]<<8))>>>Ce&7}function Ue(G,ue){var Ce=ue&7,be=ue>>>3;return(G[be]|(Ce<=4?0:G[be+1]<<8))>>>Ce&15}function St(G,ue){var Ce=ue&7,be=ue>>>3;return(G[be]|(Ce<=3?0:G[be+1]<<8))>>>Ce&31}function Ze(G,ue){var Ce=ue&7,be=ue>>>3;return(G[be]|(Ce<=1?0:G[be+1]<<8))>>>Ce&127}function Kt(G,ue,Ce){var be=ue&7,Me=ue>>>3,De=(1<<Ce)-1,Ve=G[Me]>>>be;return Ce<8-be||(Ve|=G[Me+1]<<8-be,Ce<16-be)||(Ve|=G[Me+2]<<16-be,Ce<24-be)||(Ve|=G[Me+3]<<24-be),Ve&De}function yt(G,ue,Ce){var be=ue&7,Me=ue>>>3;return be<=5?G[Me]|=(Ce&7)<<be:(G[Me]|=Ce<<be&255,G[Me+1]=(Ce&7)>>8-be),ue+3}function Rt(G,ue,Ce){var be=ue&7,Me=ue>>>3;return Ce=(Ce&1)<<be,G[Me]|=Ce,ue+1}function At(G,ue,Ce){var be=ue&7,Me=ue>>>3;return Ce<<=be,G[Me]|=Ce&255,Ce>>>=8,G[Me+1]=Ce,ue+8}function wt(G,ue,Ce){var be=ue&7,Me=ue>>>3;return Ce<<=be,G[Me]|=Ce&255,Ce>>>=8,G[Me+1]=Ce&255,G[Me+2]=Ce>>>8,ue+16}function Ft(G,ue){var Ce=G.length,be=2*Ce>ue?2*Ce:ue+5,Me=0;if(Ce>=ue)return G;if(Pn){var De=Yj(be);if(G.copy)G.copy(De);else for(;Me<G.length;++Me)De[Me]=G[Me];return De}else if(we){var Ve=new Uint8Array(be);if(Ve.set)Ve.set(G);else for(;Me<Ce;++Me)Ve[Me]=G[Me];return Ve}return G.length=be,G}function or(G){for(var ue=new Array(G),Ce=0;Ce<G;++Ce)ue[Ce]=0;return ue}function dr(G,ue,Ce){var be=1,Me=0,De=0,Ve=0,bt=0,ot=G.length,dt=we?new Uint16Array(32):or(32);for(De=0;De<32;++De)dt[De]=0;for(De=ot;De<Ce;++De)G[De]=0;ot=G.length;var ee=we?new Uint16Array(ot):or(ot);for(De=0;De<ot;++De)dt[Me=G[De]]++,be<Me&&(be=Me),ee[De]=0;for(dt[0]=0,De=1;De<=be;++De)dt[De+16]=bt=bt+dt[De-1]<<1;for(De=0;De<ot;++De)bt=G[De],bt!=0&&(ee[De]=dt[bt+16]++);var je=0;for(De=0;De<ot;++De)if(je=G[De],je!=0)for(bt=me(ee[De],be)>>be-je,Ve=(1<<be+4-je)-1;Ve>=0;--Ve)ue[bt|Ve<<je]=je&15|De<<4;return be}var nr=we?new Uint16Array(512):or(512),Xe=we?new Uint16Array(32):or(32);if(!we){for(var Qe=0;Qe<512;++Qe)nr[Qe]=0;for(Qe=0;Qe<32;++Qe)Xe[Qe]=0}(function(){for(var G=[],ue=0;ue<32;ue++)G.push(5);dr(G,Xe,32);var Ce=[];for(ue=0;ue<=143;ue++)Ce.push(8);for(;ue<=255;ue++)Ce.push(9);for(;ue<=279;ue++)Ce.push(7);for(;ue<=287;ue++)Ce.push(8);dr(Ce,nr,288)})();var ut=(function(){for(var ue=we?new Uint8Array(32768):[],Ce=0,be=0;Ce<oe.length-1;++Ce)for(;be<oe[Ce+1];++be)ue[be]=Ce;for(;be<32768;++be)ue[be]=29;var Me=we?new Uint8Array(259):[];for(Ce=0,be=0;Ce<pe.length-1;++Ce)for(;be<pe[Ce+1];++be)Me[be]=Ce;function De(bt,ot){for(var dt=0;dt<bt.length;){var ee=Math.min(65535,bt.length-dt),je=dt+ee==bt.length;for(ot.write_shift(1,+je),ot.write_shift(2,ee),ot.write_shift(2,~ee&65535);ee-- >0;)ot[ot.l++]=bt[dt++]}return ot.l}function Ve(bt,ot){for(var dt=0,ee=0,je=we?new Uint16Array(32768):[];ee<bt.length;){var ge=Math.min(65535,bt.length-ee);if(ge<10){for(dt=yt(ot,dt,+(ee+ge==bt.length)),dt&7&&(dt+=8-(dt&7)),ot.l=dt/8|0,ot.write_shift(2,ge),ot.write_shift(2,~ge&65535);ge-- >0;)ot[ot.l++]=bt[ee++];dt=ot.l*8;continue}dt=yt(ot,dt,+(ee+ge==bt.length)+2);for(var Ke=0;ge-- >0;){var tt=bt[ee];Ke=(Ke<<5^tt)&32767;var Tt=-1,cr=0;if((Tt=je[Ke])&&(Tt|=ee&-32768,Tt>ee&&(Tt-=32768),Tt<ee))for(;bt[Tt+cr]==bt[ee+cr]&&cr<250;)++cr;if(cr>2){tt=Me[cr],tt<=22?dt=At(ot,dt,Se[tt+1]>>1)-1:(At(ot,dt,3),dt+=5,At(ot,dt,Se[tt-23]>>5),dt+=3);var Vt=tt<8?0:tt-4>>2;Vt>0&&(wt(ot,dt,cr-pe[tt]),dt+=Vt),tt=ue[ee-Tt],dt=At(ot,dt,Se[tt]>>3),dt-=3;var $t=tt<4?0:tt-2>>1;$t>0&&(wt(ot,dt,ee-Tt-oe[tt]),dt+=$t);for(var mr=0;mr<cr;++mr)je[Ke]=ee&32767,Ke=(Ke<<5^bt[ee])&32767,++ee;ge-=cr-1}else tt<=143?tt=tt+48:dt=Rt(ot,dt,1),dt=At(ot,dt,Se[tt]),je[Ke]=ee&32767,++ee}dt=At(ot,dt,0)-1}return ot.l=(dt+7)/8|0,ot.l}return function(ot,dt){return ot.length<8?De(ot,dt):Ve(ot,dt)}})();function mt(G){var ue=Ht(50+Math.floor(G.length*1.1)),Ce=ut(G,ue);return ue.slice(0,Ce)}var ht=we?new Uint16Array(32768):or(32768),Ot=we?new Uint16Array(32768):or(32768),nt=we?new Uint16Array(128):or(128),sr=1,kr=1;function Er(G,ue){var Ce=St(G,ue)+257;ue+=5;var be=St(G,ue)+1;ue+=5;var Me=Ue(G,ue)+4;ue+=4;for(var De=0,Ve=we?new Uint8Array(19):or(19),bt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ot=1,dt=we?new Uint8Array(8):or(8),ee=we?new Uint8Array(8):or(8),je=Ve.length,ge=0;ge<Me;++ge)Ve[se[ge]]=De=We(G,ue),ot<De&&(ot=De),dt[De]++,ue+=3;var Ke=0;for(dt[0]=0,ge=1;ge<=ot;++ge)ee[ge]=Ke=Ke+dt[ge-1]<<1;for(ge=0;ge<je;++ge)(Ke=Ve[ge])!=0&&(bt[ge]=ee[Ke]++);var tt=0;for(ge=0;ge<je;++ge)if(tt=Ve[ge],tt!=0){Ke=Se[bt[ge]]>>8-tt;for(var Tt=(1<<7-tt)-1;Tt>=0;--Tt)nt[Ke|Tt<<tt]=tt&7|ge<<3}var cr=[];for(ot=1;cr.length<Ce+be;)switch(Ke=nt[Ze(G,ue)],ue+=Ke&7,Ke>>>=3){case 16:for(De=3+_e(G,ue),ue+=2,Ke=cr[cr.length-1];De-- >0;)cr.push(Ke);break;case 17:for(De=3+We(G,ue),ue+=3;De-- >0;)cr.push(0);break;case 18:for(De=11+Ze(G,ue),ue+=7;De-- >0;)cr.push(0);break;default:cr.push(Ke),ot<Ke&&(ot=Ke);break}var Vt=cr.slice(0,Ce),$t=cr.slice(Ce);for(ge=Ce;ge<286;++ge)Vt[ge]=0;for(ge=be;ge<30;++ge)$t[ge]=0;return sr=dr(Vt,ht,286),kr=dr($t,Ot,30),ue}function Gr(G,ue){if(G[0]==3&&!(G[1]&3))return[nh(ue),2];for(var Ce=0,be=0,Me=Yj(ue||1<<18),De=0,Ve=Me.length>>>0,bt=0,ot=0;(be&1)==0;){if(be=We(G,Ce),Ce+=3,be>>>1)be>>1==1?(bt=9,ot=5):(Ce=Er(G,Ce),bt=sr,ot=kr);else{Ce&7&&(Ce+=8-(Ce&7));var dt=G[Ce>>>3]|G[(Ce>>>3)+1]<<8;if(Ce+=32,dt>0)for(!ue&&Ve<De+dt&&(Me=Ft(Me,De+dt),Ve=Me.length);dt-- >0;)Me[De++]=G[Ce>>>3],Ce+=8;continue}for(;;){!ue&&Ve<De+32767&&(Me=Ft(Me,De+32767),Ve=Me.length);var ee=Kt(G,Ce,bt),je=be>>>1==1?nr[ee]:ht[ee];if(Ce+=je&15,je>>>=4,(je>>>8&255)===0)Me[De++]=je;else{if(je==256)break;je-=257;var ge=je<8?0:je-4>>2;ge>5&&(ge=0);var Ke=De+pe[je];ge>0&&(Ke+=Kt(G,Ce,ge),Ce+=ge),ee=Kt(G,Ce,ot),je=be>>>1==1?Xe[ee]:Ot[ee],Ce+=je&15,je>>>=4;var tt=je<4?0:je-2>>1,Tt=oe[je];for(tt>0&&(Tt+=Kt(G,Ce,tt),Ce+=tt),!ue&&Ve<Ke&&(Me=Ft(Me,Ke+100),Ve=Me.length);De<Ke;)Me[De]=Me[De-Tt],++De}}}return ue?[Me,Ce+7>>>3]:[Me.slice(0,De),Ce+7>>>3]}function Ar(G,ue){var Ce=G.slice(G.l||0),be=Gr(Ce,ue);return G.l+=be[1],be[0]}function vr(G,ue){if(G)typeof console<"u"&&console.error(ue);else throw new Error(ue)}function Ee(G,ue){var Ce=G;io(Ce,0);var be=[],Me=[],De={FileIndex:be,FullPaths:Me};D(De,{root:ue.root});for(var Ve=Ce.length-4;(Ce[Ve]!=80||Ce[Ve+1]!=75||Ce[Ve+2]!=5||Ce[Ve+3]!=6)&&Ve>=0;)--Ve;Ce.l=Ve+4,Ce.l+=4;var bt=Ce.read_shift(2);Ce.l+=6;var ot=Ce.read_shift(4);for(Ce.l=ot,Ve=0;Ve<bt;++Ve){Ce.l+=20;var dt=Ce.read_shift(4),ee=Ce.read_shift(4),je=Ce.read_shift(2),ge=Ce.read_shift(2),Ke=Ce.read_shift(2);Ce.l+=8;var tt=Ce.read_shift(4),Tt=o(Ce.slice(Ce.l+je,Ce.l+je+ge));Ce.l+=je+ge+Ke;var cr=Ce.l;Ce.l=tt+4,Be(Ce,dt,ee,De,Tt),Ce.l=cr}return De}function Be(G,ue,Ce,be,Me){G.l+=2;var De=G.read_shift(2),Ve=G.read_shift(2),bt=i(G);if(De&8257)throw new Error("Unsupported ZIP encryption");for(var ot=G.read_shift(4),dt=G.read_shift(4),ee=G.read_shift(4),je=G.read_shift(2),ge=G.read_shift(2),Ke="",tt=0;tt<je;++tt)Ke+=String.fromCharCode(G[G.l++]);if(ge){var Tt=o(G.slice(G.l,G.l+ge));(Tt[21589]||{}).mt&&(bt=Tt[21589].mt),((Me||{})[21589]||{}).mt&&(bt=Me[21589].mt)}G.l+=ge;var cr=G.slice(G.l,G.l+dt);switch(Ve){case 8:cr=K(G,ee);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ve)}var Vt=!1;De&8&&(ot=G.read_shift(4),ot==134695760&&(ot=G.read_shift(4),Vt=!0),dt=G.read_shift(4),ee=G.read_shift(4)),dt!=ue&&vr(Vt,"Bad compressed size: "+ue+" != "+dt),ee!=Ce&&vr(Vt,"Bad uncompressed size: "+Ce+" != "+ee),Yt(be,Ke,cr,{unsafe:!0,mt:bt})}function qe(G,ue){var Ce=ue||{},be=[],Me=[],De=Ht(1),Ve=Ce.compression?8:0,bt=0,ot=0,dt=0,ee=0,je=0,ge=G.FullPaths[0],Ke=ge,tt=G.FileIndex[0],Tt=[],cr=0;for(ot=1;ot<G.FullPaths.length;++ot)if(Ke=G.FullPaths[ot].slice(ge.length),tt=G.FileIndex[ot],!(!tt.size||!tt.content||Ke=="Sh33tJ5")){var Vt=ee,$t=Ht(Ke.length);for(dt=0;dt<Ke.length;++dt)$t.write_shift(1,Ke.charCodeAt(dt)&127);$t=$t.slice(0,$t.l),Tt[je]=Toe.buf(tt.content,0);var mr=tt.content;Ve==8&&(mr=te(mr)),De=Ht(30),De.write_shift(4,67324752),De.write_shift(2,20),De.write_shift(2,bt),De.write_shift(2,Ve),tt.mt?a(De,tt.mt):De.write_shift(4,0),De.write_shift(-4,Tt[je]),De.write_shift(4,mr.length),De.write_shift(4,tt.content.length),De.write_shift(2,$t.length),De.write_shift(2,0),ee+=De.length,be.push(De),ee+=$t.length,be.push($t),ee+=mr.length,be.push(mr),De=Ht(46),De.write_shift(4,33639248),De.write_shift(2,0),De.write_shift(2,20),De.write_shift(2,bt),De.write_shift(2,Ve),De.write_shift(4,0),De.write_shift(-4,Tt[je]),De.write_shift(4,mr.length),De.write_shift(4,tt.content.length),De.write_shift(2,$t.length),De.write_shift(2,0),De.write_shift(2,0),De.write_shift(2,0),De.write_shift(2,0),De.write_shift(4,0),De.write_shift(4,Vt),cr+=De.l,Me.push(De),cr+=$t.length,Me.push($t),++je}return De=Ht(22),De.write_shift(4,101010256),De.write_shift(2,0),De.write_shift(2,0),De.write_shift(2,je),De.write_shift(2,je),De.write_shift(4,cr),De.write_shift(4,ee),De.write_shift(2,0),zi([zi(be),zi(Me),De])}var Ye={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Lt(G,ue){if(G.ctype)return G.ctype;var Ce=G.name||"",be=Ce.match(/\.([^\.]+)$/);return be&&Ye[be[1]]||ue&&(be=(Ce=ue).match(/[\.\\]([^\.\\])+$/),be&&Ye[be[1]])?Ye[be[1]]:"application/octet-stream"}function ze(G){for(var ue=My(G),Ce=[],be=0;be<ue.length;be+=76)Ce.push(ue.slice(be,be+76));return Ce.join(`\r
`)+`\r
`}function it(G){var ue=G.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(dt){var ee=dt.charCodeAt(0).toString(16).toUpperCase();return"="+(ee.length==1?"0"+ee:ee)});ue=ue.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ue.charAt(0)==`
`&&(ue="=0D"+ue.slice(1)),ue=ue.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],be=ue.split(`\r
`),Me=0;Me<be.length;++Me){var De=be[Me];if(De.length==0){Ce.push("");continue}for(var Ve=0;Ve<De.length;){var bt=76,ot=De.slice(Ve,Ve+bt);ot.charAt(bt-1)=="="?bt--:ot.charAt(bt-2)=="="?bt-=2:ot.charAt(bt-3)=="="&&(bt-=3),ot=De.slice(Ve,Ve+bt),Ve+=bt,Ve<De.length&&(ot+="="),Ce.push(ot)}}return Ce.join(`\r
`)}function Le(G){for(var ue=[],Ce=0;Ce<G.length;++Ce){for(var be=G[Ce];Ce<=G.length&&be.charAt(be.length-1)=="=";)be=be.slice(0,be.length-1)+G[++Ce];ue.push(be)}for(var Me=0;Me<ue.length;++Me)ue[Me]=ue[Me].replace(/[=][0-9A-Fa-f]{2}/g,function(De){return String.fromCharCode(parseInt(De.slice(1),16))});return Vl(ue.join(`\r
`))}function st(G,ue,Ce){for(var be="",Me="",De="",Ve,bt=0;bt<10;++bt){var ot=ue[bt];if(!ot||ot.match(/^\s*$/))break;var dt=ot.match(/^(.*?):\s*([^\s].*)$/);if(dt)switch(dt[1].toLowerCase()){case"content-location":be=dt[2].trim();break;case"content-type":De=dt[2].trim();break;case"content-transfer-encoding":Me=dt[2].trim();break}}switch(++bt,Me.toLowerCase()){case"base64":Ve=Vl(Jl(ue.slice(bt).join("")));break;case"quoted-printable":Ve=Le(ue.slice(bt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Me)}var ee=Yt(G,be.slice(Ce.length),Ve,{unsafe:!0});De&&(ee.ctype=De)}function rt(G,ue){if(U(G.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=ue&&ue.root||"",be=(Pn&&Buffer.isBuffer(G)?G.toString("binary"):U(G)).split(`\r
`),Me=0,De="";for(Me=0;Me<be.length;++Me)if(De=be[Me],!!/^Content-Location:/i.test(De)&&(De=De.slice(De.indexOf("file")),Ce||(Ce=De.slice(0,De.lastIndexOf("/")+1)),De.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),De.slice(0,Ce.length)!=Ce););var Ve=(be[1]||"").match(/boundary="(.*?)"/);if(!Ve)throw new Error("MAD cannot find boundary");var bt="--"+(Ve[1]||""),ot=[],dt=[],ee={FileIndex:ot,FullPaths:dt};D(ee);var je,ge=0;for(Me=0;Me<be.length;++Me){var Ke=be[Me];Ke!==bt&&Ke!==bt+"--"||(ge++&&st(ee,be.slice(je,Me),Ce),je=Me)}return ee}function qt(G,ue){var Ce=ue||{},be=Ce.boundary||"SheetJS";be="------="+be;for(var Me=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+be.slice(2)+'"',"","",""],De=G.FullPaths[0],Ve=De,bt=G.FileIndex[0],ot=1;ot<G.FullPaths.length;++ot)if(Ve=G.FullPaths[ot].slice(De.length),bt=G.FileIndex[ot],!(!bt.size||!bt.content||Ve=="Sh33tJ5")){Ve=Ve.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(cr){return"_x"+cr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(cr){return"_u"+cr.charCodeAt(0).toString(16)+"_"});for(var dt=bt.content,ee=Pn&&Buffer.isBuffer(dt)?dt.toString("binary"):U(dt),je=0,ge=Math.min(1024,ee.length),Ke=0,tt=0;tt<=ge;++tt)(Ke=ee.charCodeAt(tt))>=32&&Ke<128&&++je;var Tt=je>=ge*4/5;Me.push(be),Me.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Ve),Me.push("Content-Transfer-Encoding: "+(Tt?"quoted-printable":"base64")),Me.push("Content-Type: "+Lt(bt,Ve)),Me.push(""),Me.push(Tt?it(ee):ze(ee))}return Me.push(be+`--\r
`),Me.join(`\r
`)}function Xt(G){var ue={};return D(ue,G),ue}function Yt(G,ue,Ce,be){var Me=be&&be.unsafe;Me||D(G);var De=!Me&&qr.find(G,ue);if(!De){var Ve=G.FullPaths[0];ue.slice(0,Ve.length)==Ve?Ve=ue:(Ve.slice(-1)!="/"&&(Ve+="/"),Ve=(Ve+ue).replace("//","/")),De={name:s(ue),type:2},G.FileIndex.push(De),G.FullPaths.push(Ve),Me||qr.utils.cfb_gc(G)}return De.content=Ce,De.size=Ce?Ce.length:0,be&&(be.CLSID&&(De.clsid=be.CLSID),be.mt&&(De.mt=be.mt),be.ct&&(De.ct=be.ct)),De}function Z(G,ue){D(G);var Ce=qr.find(G,ue);if(Ce){for(var be=0;be<G.FileIndex.length;++be)if(G.FileIndex[be]==Ce)return G.FileIndex.splice(be,1),G.FullPaths.splice(be,1),!0}return!1}function ae(G,ue,Ce){D(G);var be=qr.find(G,ue);if(be){for(var Me=0;Me<G.FileIndex.length;++Me)if(G.FileIndex[Me]==be)return G.FileIndex[Me].name=s(Ce),G.FullPaths[Me]=Ce,!0}return!1}function jt(G){O(G,!0)}return t.find=W,t.read=F,t.parse=d,t.write=V,t.writeFile=Q,t.utils={cfb_new:Xt,cfb_add:Yt,cfb_del:Z,cfb_mov:ae,cfb_gc:jt,ReadShift:ry,CheckField:G$,prep_blob:io,bconcat:zi,use_zlib:z,_deflateRaw:mt,_inflateRaw:Ar,consts:H},t})();function Coe(e){return typeof e=="string"?x4(e):Array.isArray(e)?Qie(e):e}function Sv(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=x4(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?pd(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([Coe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=ph(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Noe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ma(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function sP(e,t){for(var r=[],n=Ma(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function v4(e){for(var t=[],r=Ma(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function w4(e){for(var t=[],r=Ma(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Eoe(e){for(var t=[],r=Ma(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var eb=new Date(1899,11,30,0,0,0);function bi(e,t){var r=e.getTime(),n=eb.getTime()+(e.getTimezoneOffset()-eb.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var k$=new Date,Aoe=eb.getTime()+(k$.getTimezoneOffset()-eb.getTimezoneOffset())*6e4,aP=k$.getTimezoneOffset();function b4(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Aoe),t.getTimezoneOffset()!==aP&&t.setTime(t.getTime()+(t.getTimezoneOffset()-aP)*6e4),t}function joe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[a],10)}return t}var iP=new Date("2017-02-19T19:06:09.000Z"),T$=isNaN(iP.getFullYear())?new Date("2/19/17"):iP,Poe=T$.getFullYear()==2017;function Ks(e,t){var r=new Date(e);if(Poe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(T$.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Rm(e,t){if(Pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return pd(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return pd(f$(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return pd(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return pd(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Xs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Xs(e[r]));return t}function Ea(e,t){for(var r="";r.length<t;)r+=e;return r}function Mu(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var Moe=["january","february","march","april","may","june","july","august","september","october","november","december"];function Tp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Moe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Foe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}})();function C$(e){return e?e.content&&e.type?Rm(e.content,!0):e.data?zx(e.data):e.asNodeBuffer&&Pn?zx(e.asNodeBuffer().toString("binary")):e.asBinary?zx(e.asBinary()):e._data&&e._data.getContent?zx(Rm(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function N$(e){if(!e)return null;if(e.data)return Kj(e.data);if(e.asNodeBuffer&&Pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?Kj(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Ooe(e){return e&&e.name.slice(-4)===".bin"?N$(e):C$(e)}function Bc(e,t){for(var r=e.FullPaths||Ma(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function m7(e,t){var r=Bc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function si(e,t,r){if(!r)return Ooe(m7(e,t));if(!t)return null;try{return si(e,t)}catch{return null}}function ql(e,t,r){if(!r)return C$(m7(e,t));if(!t)return null;try{return ql(e,t)}catch{return null}}function Doe(e,t,r){return N$(m7(e,t))}function oP(e){for(var t=e.FullPaths||Ma(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Nn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Pn?n=F0(r):n=Zie(r),qr.utils.cfb_add(e,t,n)}qr.utils.cfb_add(e,t,r)}else e.file(t,r)}function g7(){return qr.utils.cfb_new()}function E$(e,t){switch(t.type){case"base64":return qr.read(e,{type:"base64"});case"binary":return qr.read(e,{type:"binary"});case"buffer":case"array":return qr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Wx(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Ja=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Ioe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,lP=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Roe=/<[^>]*>/g,Uo=Ja.match(lP)?lP:Roe,Loe=/<\w*:/,Boe=/<(\/?)\w+:/;function an(e,t,r){for(var n={},s=0,a=0;s!==e.length&&!((a=e.charCodeAt(s))===32||a===10||a===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var i=e.match(Ioe),o=0,c="",u=0,d="",f="",m=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(m=(s=f.charCodeAt(a+1))==34||s==39?1:0,c=f.slice(a+1+m,f.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function Ed(e){return e.replace(Boe,"<$1")}var A$={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},p7=v4(A$),Zn=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(e,function(o,c){return A$[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}})(),x7=/[&<>'"]/g,$oe=/[\u0000-\u0008\u000b-\u001f]/g;function Ts(e){var t=e+"";return t.replace(x7,function(r){return p7[r]}).replace($oe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function cP(e){return Ts(e).replace(/ /g,"_x0020_")}var j$=/[\u0000-\u001f]/g;function y7(e){var t=e+"";return t.replace(x7,function(r){return p7[r]}).replace(/\n/g,"<br/>").replace(j$,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function zoe(e){var t=e+"";return t.replace(x7,function(r){return p7[r]}).replace(j$,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var uP=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function Uoe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Gs(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function M3(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,t+=String.fromCharCode(i);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function dP(e){var t=nh(2*e.length),r,n,s=1,a=0,i=0,o;for(n=0;n<e.length;n+=s)s=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[a++]=i&255,t[a++]=i>>>8,i=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function fP(e){return F0(e,"binary").toString("utf8")}var I2="foo bar baz",As=Pn&&(fP(I2)==M3(I2)&&fP||dP(I2)==M3(I2)&&dP)||M3,pd=Pn?function(e){return F0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Oy=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),P$=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),Woe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Hoe=/<\/?(?:vt:)?variant>/g,Goe=/<(?:vt:)([^>]*)>([\s\S]*)</;function hP(e,t){var r=an(e),n=e.match(Woe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(Hoe,"").match(Goe);i&&s.push({v:As(i[2]),t:i[1]})}),s}var M$=/(^\s|\s$|\n)/;function uo(e,t){return"<"+e+(t.match(M$)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Dy(e){return Ma(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function wr(e,t,r){return"<"+e+(r!=null?Dy(r):"")+(t!=null?(t.match(M$)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function k6(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Voe(e,t){switch(typeof e){case"string":var r=wr("vt:lpwstr",Ts(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return wr((e|0)==e?"vt:i4":"vt:r8",Ts(String(e)));case"boolean":return wr("vt:bool",e?"true":"false")}if(e instanceof Date)return wr("vt:filetime",k6(e));throw new Error("Unable to serialize "+e)}function v7(e){if(Pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return As(ph(d7(e)));throw new Error("Bad input format: expected Buffer or string")}var Iy=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,vi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Jm=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Wl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function qoe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Koe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var mP=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},gP=Pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:F0(t)})):mP(e)}:mP,pP=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(h0(e,s)));return n.join("").replace(sl,"")},w7=Pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(sl,""):pP(e,t,r)}:pP,xP=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},F$=Pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):xP(e,t,r)}:xP,yP=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Gg(e,s)));return n.join("")},kv=Pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):yP(t,r,n)}:yP,O$=function(e,t){var r=Hl(e,t);return r>0?kv(e,t+4,t+4+r-1):""},D$=O$,I$=function(e,t){var r=Hl(e,t);return r>0?kv(e,t+4,t+4+r-1):""},R$=I$,L$=function(e,t){var r=2*Hl(e,t);return r>0?kv(e,t+4,t+4+r-1):""},B$=L$,$$=function(t,r){var n=Hl(t,r);return n>0?w7(t,r+4,r+4+n):""},z$=$$,U$=function(e,t){var r=Hl(e,t);return r>0?kv(e,t+4,t+4+r):""},W$=U$,H$=function(e,t){return qoe(e,t)},tb=H$,b7=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Pn&&(D$=function(t,r){if(!Buffer.isBuffer(t))return O$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},R$=function(t,r){if(!Buffer.isBuffer(t))return I$(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},B$=function(t,r){if(!Buffer.isBuffer(t))return L$(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},z$=function(t,r){if(!Buffer.isBuffer(t))return $$(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},W$=function(t,r){if(!Buffer.isBuffer(t))return U$(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},tb=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):H$(t,r)},b7=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Gg=function(e,t){return e[t]},h0=function(e,t){return e[t+1]*256+e[t]},Xoe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Hl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Zh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Yoe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ry(e,t){var r="",n,s,a=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,Pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(h0(this,u)),u+=2;e*=2;break;case"utf8":r=kv(this,this.l,this.l+e);break;case"utf16le":e*=2,r=w7(this,this.l,this.l+e);break;case"wstr":return ry.call(this,e,"dbcs");case"lpstr-ansi":r=D$(this,this.l),e=4+Hl(this,this.l);break;case"lpstr-cp":r=R$(this,this.l),e=4+Hl(this,this.l);break;case"lpwstr":r=B$(this,this.l),e=4+2*Hl(this,this.l);break;case"lpp4":e=4+Hl(this,this.l),r=z$(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Hl(this,this.l),r=W$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=Gg(this,this.l+e++))!==0;)a.push(D2(i));r=a.join("");break;case"_wstr":for(e=0,r="";(i=h0(this,this.l+e))!==0;)a.push(D2(i)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Gg(this,u),this.l=u+1,o=ry.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(D2(h0(this,u))),u+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Gg(this,u),this.l=u+1,o=ry.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(D2(Gg(this,u))),u+=1}r=a.join("");break;default:switch(e){case 1:return n=Gg(this,this.l),this.l++,n;case 2:return n=(t==="i"?Xoe:h0)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Zh:Yoe)(this,this.l),this.l+=4,n):(s=Hl(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=tb(this,this.l):s=tb([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=F$(this,this.l,e);break}}return this.l+=e,r}var Joe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Qoe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Zoe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function ele(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Zoe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Joe(this,t,this.l);break;case 8:if(n=8,r==="f"){Koe(this,t,this.l);break}case 16:break;case-4:n=4,Qoe(this,t,this.l);break}return this.l+=n,this}function G$(e,t){var r=F$(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function io(e,t){e.l=t,e.read_shift=ry,e.chk=G$,e.write_shift=ele}function zo(e,t){e.l+=t}function Ht(e){var t=nh(e);return io(t,0),t}function O0(e,t,r){if(e){var n,s,a;io(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Uy[o]||Uy[65535];for(n=e.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=e.read_shift(1))&127)<<7*s;c=e.l+a;var d=u.f&&u.f(e,a,r);if(e.l=c,t(d,u,o))return}}}function Tl(){var e=[],t=Pn?256:2048,r=function(u){var d=Ht(u);return io(d,0),d},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},i=function(){return s(),zi(e)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:i,_bufs:e}}function ir(e,t,r,n){var s=+t,a;if(!isNaN(s)){n||(n=Uy[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&b7(r)&&e.push(r)}}function ny(e,t,r){var n=Xs(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function vP(e,t,r){var n=Xs(e);return n.s=ny(n.s,t.s,r),n.e=ny(n.e,t.s,r),n}function sy(e,t){if(e.cRel&&e.c<0)for(e=Xs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Xs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=nn(e);return!e.cRel&&e.cRel!=null&&(r=nle(r)),!e.rRel&&e.rRel!=null&&(r=tle(r)),r}function F3(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ga(e.s.c)+":"+(e.e.cRel?"":"$")+ga(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Xa(e.s.r)+":"+(e.e.rRel?"":"$")+Xa(e.e.r):sy(e.s,t.biff)+":"+sy(e.e,t.biff)}function _7(e){return parseInt(rle(e),10)-1}function Xa(e){return""+(e+1)}function tle(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function rle(e){return e.replace(/\$(\d+)$/,"$1")}function S7(e){for(var t=sle(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function ga(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function nle(e){return e.replace(/^([A-Z])/,"$$$1")}function sle(e){return e.replace(/^\$([A-Z])/,"$1")}function ale(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function pa(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function nn(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Cl(e){var t=e.indexOf(":");return t==-1?{s:pa(e),e:pa(e)}:{s:pa(e.slice(0,t)),e:pa(e.slice(t+1))}}function Tn(e,t){return typeof t>"u"||typeof t=="number"?Tn(e.s,e.e):(typeof e!="string"&&(e=nn(e)),typeof t!="string"&&(t=nn(t)),e==t?e:e+":"+t)}function es(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function wP(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Yc(e.z,r?bi(t):t)}catch{}try{return e.w=Yc((e.XF||{}).numFmtId||(r?14:0),r?bi(t):t)}catch{return""+t}}function C0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?D0[e.v]||e.v:t==null?wP(e,e.v):wP(e,t))}function xh(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function V$(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?pa(n.origin):n.origin;i=c.r,o=c.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=es(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[f].length;++m)if(!(typeof t[f][m]>"u")){var p={v:t[f][m]},x=i+f,w=o+m;if(u.s.r>x&&(u.s.r=x),u.s.c>w&&(u.s.c=w),u.e.r<x&&(u.e.r=x),u.e.c<w&&(u.e.c=w),t[f][m]&&typeof t[f][m]=="object"&&!Array.isArray(t[f][m])&&!(t[f][m]instanceof Date))p=t[f][m];else if(Array.isArray(p.v)&&(p.f=t[f][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||en[14],n.cellDates?(p.t="d",p.w=Yc(p.z,bi(p.v))):(p.t="n",p.v=bi(p.v),p.w=Yc(p.z,p.v))):p.t="s";if(s)a[x]||(a[x]=[]),a[x][w]&&a[x][w].z&&(p.z=a[x][w].z),a[x][w]=p;else{var v=nn({c:w,r:x});a[v]&&a[v].z&&(p.z=a[v].z),a[v]=p}}}return u.s.c<1e7&&(a["!ref"]=Tn(u)),a}function e1(e,t){return V$(null,e,t)}function ile(e){return e.read_shift(4,"i")}function Fu(e,t){return t||(t=Ht(4)),t.write_shift(4,e),t}function Bo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Wi(e,t){var r=!1;return t==null&&(r=!0,t=Ht(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function ole(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function lle(e,t){return t||(t=Ht(4)),t.write_shift(2,0),t.write_shift(2,0),t}function k7(e,t){var r=e.l,n=e.read_shift(1),s=Bo(e),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)a.push(ole(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function cle(e,t){var r=!1;return t==null&&(r=!0,t=Ht(15+4*e.t.length)),t.write_shift(1,0),Wi(e.t,t),r?t.slice(0,t.l):t}var ule=k7;function dle(e,t){var r=!1;return t==null&&(r=!0,t=Ht(23+4*e.t.length)),t.write_shift(1,1),Wi(e.t,t),t.write_shift(4,1),lle({},t),r?t.slice(0,t.l):t}function tu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Qm(e,t){return t==null&&(t=Ht(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Zm(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function eg(e,t){return t==null&&(t=Ht(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var fle=Bo,q$=Wi;function T7(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function rb(e,t){var r=!1;return t==null&&(r=!0,t=Ht(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var hle=Bo,T6=T7,C7=rb;function N7(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?tb([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Zh(t,0)>>2;return r?s/100:s}function K$(e,t){t==null&&(t=Ht(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function X$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function mle(e,t){return t||(t=Ht(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var tg=X$,t1=mle;function Do(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Lm(e,t){return(t||Ht(8)).write_shift(8,e,"f")}function gle(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=mm[s];u&&(t.rgb=Ly(u));break;case 2:t.rgb=Ly([i,o,c]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function nb(e,t){if(t||(t=Ht(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function ple(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function xle(e,t){t||(t=Ht(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Y$(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function yle(e){return Y$(e,1)}function vle(e){return Y$(e,2)}var E7=2,yl=3,R2=11,bP=12,sb=19,L2=64,wle=65,ble=71,_le=4108,Sle=4126,Ri=80,J$=81,kle=[Ri,J$],C6={1:{n:"CodePage",t:E7},2:{n:"Category",t:Ri},3:{n:"PresentationFormat",t:Ri},4:{n:"ByteCount",t:yl},5:{n:"LineCount",t:yl},6:{n:"ParagraphCount",t:yl},7:{n:"SlideCount",t:yl},8:{n:"NoteCount",t:yl},9:{n:"HiddenCount",t:yl},10:{n:"MultimediaClipCount",t:yl},11:{n:"ScaleCrop",t:R2},12:{n:"HeadingPairs",t:_le},13:{n:"TitlesOfParts",t:Sle},14:{n:"Manager",t:Ri},15:{n:"Company",t:Ri},16:{n:"LinksUpToDate",t:R2},17:{n:"CharacterCount",t:yl},19:{n:"SharedDoc",t:R2},22:{n:"HyperlinksChanged",t:R2},23:{n:"AppVersion",t:yl,p:"version"},24:{n:"DigSig",t:wle},26:{n:"ContentType",t:Ri},27:{n:"ContentStatus",t:Ri},28:{n:"Language",t:Ri},29:{n:"Version",t:Ri},255:{},2147483648:{n:"Locale",t:sb},2147483651:{n:"Behavior",t:sb},1919054434:{}},N6={1:{n:"CodePage",t:E7},2:{n:"Title",t:Ri},3:{n:"Subject",t:Ri},4:{n:"Author",t:Ri},5:{n:"Keywords",t:Ri},6:{n:"Comments",t:Ri},7:{n:"Template",t:Ri},8:{n:"LastAuthor",t:Ri},9:{n:"RevNumber",t:Ri},10:{n:"EditTime",t:L2},11:{n:"LastPrinted",t:L2},12:{n:"CreatedDate",t:L2},13:{n:"ModifiedDate",t:L2},14:{n:"PageCount",t:yl},15:{n:"WordCount",t:yl},16:{n:"CharCount",t:yl},17:{n:"Thumbnail",t:ble},18:{n:"Application",t:Ri},19:{n:"DocSecurity",t:yl},255:{},2147483648:{n:"Locale",t:sb},2147483651:{n:"Behavior",t:sb},1919054434:{}},_P={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Tle=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Cle(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Nle=Cle([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),mm=Xs(Nle),D0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Q$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},E6={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},B2={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function A7(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Ele(e){var t=A7();if(!e||!e.match)return t;var r={};if((e.match(Uo)||[]).forEach(function(n){var s=an(n);switch(s[0].replace(Loe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[E6[s.ContentType]]!==void 0&&t[E6[s.ContentType]].push(s.PartName);break}}),t.xmlns!==vi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Z$(e,t){var r=Eoe(E6),n=[],s;n[n.length]=Ja,n[n.length]=wr("Types",null,{xmlns:vi.CT,"xmlns:xsd":vi.xsd,"xmlns:xsi":vi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return wr("Default",null,{Extension:c[0],ContentType:c[1]})}));var a=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=wr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:B2[c][t.bookType]||B2[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=wr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:B2[c][t.bookType]||B2[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=wr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var On={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Ry(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ay(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(Uo)||[]).forEach(function(s){var a=an(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Wx(a.Target,t);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function dp(e){var t=[Ja,wr("Relationships",null,{xmlns:vi.RELS})];return Ma(e["!id"]).forEach(function(r){t[t.length]=wr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ss(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[On.HLINK,On.XPATH,On.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var Ale="application/vnd.oasis.opendocument.spreadsheet";function jle(e,t){for(var r=v7(e),n,s;n=Iy.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=an(n[0],!1),s.path=="/"&&s.type!==Ale)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Ple(e){var t=[Ja];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function SP(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Mle(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Fle(e){var t=[Ja];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(SP(e[r][0],e[r][1])),t.push(Mle("",e[r][0]));return t.push(SP("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function ez(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Yw.version+"</meta:generator></office:meta></office:document-meta>"}var qc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Ole=(function(){for(var e=new Array(qc.length),t=0;t<qc.length;++t){var r=qc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function tz(e){var t={};e=As(e);for(var r=0;r<qc.length;++r){var n=qc[r],s=e.match(Ole[r]);s!=null&&s.length>0&&(t[n[1]]=Zn(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ks(t[n[1]]))}return t}function O3(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Ts(t),n[n.length]=r?wr(e,t,r):uo(e,t))}function rz(e,t){var r=t||{},n=[Ja,wr("cp:coreProperties",null,{"xmlns:cp":vi.CORE_PROPS,"xmlns:dc":vi.dc,"xmlns:dcterms":vi.dcterms,"xmlns:dcmitype":vi.dcmitype,"xmlns:xsi":vi.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&O3("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:k6(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&O3("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:k6(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=qc.length;++a){var i=qc[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&O3(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var gm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],nz=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function sz(e,t,r,n){var s=[];if(typeof e=="string")s=hP(e,n);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(d){return{v:d}}));var i=typeof t=="string"?hP(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function Dle(e,t,r){var n={};return t||(t={}),e=As(e),gm.forEach(function(s){var a=(e.match(Oy(s[0]))||[])[1];switch(s[2]){case"string":a&&(t[s[1]]=Zn(a));break;case"bool":t[s[1]]=a==="true";break;case"raw":var i=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&sz(n.HeadingPairs,n.TitlesOfParts,t,r),t}function az(e){var t=[],r=wr;return e||(e={}),e.Application="SheetJS",t[t.length]=Ja,t[t.length]=wr("Properties",null,{xmlns:vi.EXT_PROPS,"xmlns:vt":vi.vt}),gm.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Ts(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Ts(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Ile=/<[^>]+>[^<]*/g;function Rle(e,t){var r={},n="",s=e.match(Ile);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=an(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Zn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Zn(d);break;case"bool":r[n]=Gs(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ks(d);break;case"cy":case"error":r[n]=Zn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function iz(e){var t=[Ja,wr("Properties",null,{xmlns:vi.CUST_PROPS,"xmlns:vt":vi.vt})];if(!e)return t.join("");var r=1;return Ma(e).forEach(function(s){++r,t[t.length]=wr("property",Voe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ts(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var A6={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},D3;function Lle(e,t,r){D3||(D3=v4(A6)),t=D3[t]||t,e[t]=r}function Ble(e,t){var r=[];return Ma(A6).map(function(n){for(var s=0;s<qc.length;++s)if(qc[s][1]==n)return qc[s];for(s=0;s<gm.length;++s)if(gm[s][1]==n)return gm[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(uo(A6[n[1]]||n[1],s))}}),wr("DocumentProperties",r.join(""),{xmlns:Wl.o})}function $le(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&Ma(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var i=0;i<qc.length;++i)if(a==qc[i][1])return;for(i=0;i<gm.length;++i)if(a==gm[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=e[a],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),s.push(wr(cP(a),o,{"dt:dt":c}))}}),t&&Ma(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var i=t[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(wr(cP(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Wl.o+'">'+s.join("")+"</"+n+">"}function j7(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function zle(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=Ht(8);return i.write_shift(4,n),i.write_shift(4,s),i}function oz(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function lz(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function cz(e,t,r){return t===31?lz(e):oz(e,t,r)}function j6(e,t,r){return cz(e,t,r===!1?0:4)}function Ule(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return cz(e,t,0)}function Wle(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(sl,""),e.l-s&2&&(e.l+=2)}return r}function Hle(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(sl,"");return r}function Gle(e){var t=e.l,r=ab(e,J$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=ab(e,yl);return[r,n]}function Vle(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Gle(e));return r}function kP(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var a=e.read_shift(4),i=e.read_shift(4);n[a]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(sl,"").replace(Ux,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function uz(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function qle(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function ab(e,t,r){var n=e.read_shift(2),s,a=r||{};if(e.l+=2,t!==bP&&n!==t&&kle.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===bP?n:t){case 2:return s=e.read_shift(2,"i"),a.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return oz(e,n,4).replace(sl,"");case 31:return lz(e);case 64:return j7(e);case 65:return uz(e);case 71:return qle(e);case 80:return j6(e,n,!a.raw).replace(sl,"");case 81:return Ule(e,n).replace(sl,"");case 4108:return Vle(e);case 4126:case 4127:return n==4127?Wle(e):Hle(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function TP(e,t){var r=Ht(4),n=Ht(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ht(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=zle(t);break;case 31:case 80:for(n=Ht(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return zi([r,n])}function CP(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,c=-1,u={};for(i=0;i!=s;++i){var d=e.read_shift(4),f=e.read_shift(4);a[i]=[d,f+r]}a.sort(function(k,b){return k[1]-b[1]});var m={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var p=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=a[i][1]&&(e.l=a[i][1],p=!1);break;case 4108:e.l<=a[i][1]&&(e.l=a[i][1],p=!1);break}if((!t||i==0)&&e.l<=a[i][1]&&(p=!1,e.l=a[i][1]),p)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var x=t[a[i][0]];if(m[x.n]=ab(e,x.t,{raw:!0}),x.p==="version"&&(m[x.n]=String(m[x.n]>>16)+"."+("0000"+String(m[x.n]&65535)).slice(-4)),x.n=="CodePage")switch(m[x.n]){case 0:m[x.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Au(o=m[x.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[x.n])}}else if(a[i][0]===1){if(o=m.CodePage=ab(e,E7),Au(o),c!==-1){var w=e.l;e.l=a[c][1],u=kP(e,o),e.l=w}}else if(a[i][0]===0){if(o===0){c=i,e.l=a[i+1][1];continue}u=kP(e,o)}else{var v=u[a[i][0]],C;switch(e[e.l]){case 65:e.l+=4,C=uz(e);break;case 30:e.l+=4,C=j6(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,C=j6(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,C=e.read_shift(4,"i");break;case 19:e.l+=4,C=e.read_shift(4);break;case 5:e.l+=4,C=e.read_shift(8,"f");break;case 11:e.l+=4,C=Ga(e,4);break;case 64:e.l+=4,C=Ks(j7(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[v]=C}}return e.l=r+n,m}var dz=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Kle(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function NP(e,t,r){var n=Ht(8),s=[],a=[],i=8,o=0,c=Ht(8),u=Ht(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),a.push(c),s.push(u),i+=8+c.length,!t){u=Ht(8),u.write_shift(4,0),s.unshift(u);var d=[Ht(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Ht(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=zi(d),a.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(dz.indexOf(e[o][0])>-1||nz.indexOf(e[o][0])>-1)&&e[o][1]!=null){var m=e[o][1],p=0;if(t){p=+t[e[o][0]];var x=r[p];if(x.p=="version"&&typeof m=="string"){var w=m.split(".");m=(+w[0]<<16)+(+w[1]||0)}c=TP(x.t,m)}else{var v=Kle(m);v==-1&&(v=31,m=String(m)),c=TP(v,m)}a.push(c),u=Ht(8),u.write_shift(4,t?p:2+o),s.push(u),i+=8+c.length}var C=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,C),C+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),zi([n].concat(s).concat(a))}function EP(e,t,r){var n=e.content;if(!n)return{};io(n,0);var s,a,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==qr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=CP(n,t),m={SystemIdentifier:u};for(var p in f)m[p]=f[p];if(m.FMTID=a,s===1)return m;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var x;try{x=CP(n,null)}catch{}for(p in x)m[p]=x[p];return m.FMTID=[a,i],m}function AP(e,t,r,n,s,a){var i=Ht(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,qr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var c=NP(e,r,n);if(o.push(c),s){var u=NP(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+c.length),o.push(u)}return zi(o)}function Df(e,t){return e.read_shift(t),null}function Xle(e,t){t||(t=Ht(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Yle(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Ga(e,t){return e.read_shift(t)===1}function Zo(e,t){return t||(t=Ht(2)),t.write_shift(2,+!!e),t}function ai(e){return e.read_shift(2,"u")}function $c(e,t){return t||(t=Ht(2)),t.write_shift(2,e),t}function fz(e,t){return Yle(e,t,ai)}function Jle(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function hz(e,t,r){return r||(r=Ht(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Tv(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return i}function Qle(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,c={};s&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*i),n&&(e.l+=o),c.t=d,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Zle(e){var t=e.t||"",r=Ht(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ht(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return zi(s)}function Bm(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function Cv(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Bm(e,n,r)}function rg(e,t,r){if(r.biff>5)return Cv(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function mz(e,t,r){return r||(r=Ht(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function ece(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function tce(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(sl,"");return n&&(e.l+=24),s}function rce(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(a>>1,"utf16le").replace(sl,"");return r+i}function nce(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return tce(e);case"0303000000000000c000000000000046":return rce(e);default:throw new Error("Unsupported Moniker "+r)}}function $2(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(sl,""):"";return r}function jP(e,t){t||(t=Ht(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function sce(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var a,i,o,c,u="",d,f;s&16&&(a=$2(e,r-e.l)),s&128&&(i=$2(e,r-e.l)),(s&257)===257&&(o=$2(e,r-e.l)),(s&257)===1&&(c=nce(e,r-e.l)),s&8&&(u=$2(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=j7(e)),e.l=r;var m=i||o||c||"";m&&u&&(m+="#"+u),m||(m="#"+u),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return d&&(p.guid=d),f&&(p.time=f),a&&(p.Tooltip=a),p}function ace(e){var t=Ht(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(a==28)n=n.slice(1),jP(n,t);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&jP(s>-1?n.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function gz(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function pz(e,t){var r=gz(e);return r[3]=0,r}function Ad(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function $m(e,t,r,n){return n||(n=Ht(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function ice(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function oce(e,t,r){return t===0?"":rg(e,t,r)}function lce(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[s,a,i]}function xz(e){var t=e.read_shift(2),r=N7(e);return[t,r]}function cce(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=Tv(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,s}function _4(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function yz(e,t){return t||(t=Ht(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function vz(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var uce=vz;function wz(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function dce(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function fce(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function No(e){e.l+=2,e.l+=e.read_shift(2)}var hce={0:No,4:No,5:No,6:No,7:fce,8:No,9:No,10:No,11:No,12:No,13:dce,14:No,15:No,16:No,17:No,18:No,19:No,20:No,21:wz};function mce(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(hce[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function z2(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function P7(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=Ht(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function gce(e,t){return t===0||e.read_shift(2),1200}function pce(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=rg(e,0,r);return e.read_shift(t+n-e.l),s}function xce(e,t){var r=!t||t.biff==8,n=Ht(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function yce(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function vce(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=Tv(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function wce(e,t){var r=!t||t.biff>=8?2:1,n=Ht(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function bce(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<r;++i)a.push(Qle(e));return a.Count=n,a.Unique=s,a}function _ce(e,t){var r=Ht(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=Zle(e[s]);var a=zi([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function Sce(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function kce(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Tce(e){var t=ice(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Cce(e){return e.read_shift(2),e.read_shift(4)}function PP(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function Nce(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function Ece(){var e=Ht(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Ace(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function jce(e){var t=Ht(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Pce(){}function Mce(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Tv(e,0,r),n}function Fce(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,a=Ht(s);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function Oce(e){var t=Ad(e);return t.isst=e.read_shift(4),t}function Dce(e,t,r,n){var s=Ht(10);return $m(e,t,n,s),s.write_shift(4,r),s}function Ice(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Ad(e);r.biff==2&&e.l++;var a=Cv(e,n-e.l,r);return s.val=a,s}function Rce(e,t,r,n,s){var a=!s||s.biff==8,i=Ht(8+ +a+(1+a)*r.length);return $m(e,t,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function Lce(e,t,r){var n=e.read_shift(2),s=rg(e,0,r);return[n,s]}function Bce(e,t,r,n){var s=r&&r.biff==5;n||(n=Ht(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var $ce=rg;function MP(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:i,c}}}function zce(e,t){var r=t.biff==8||!t.biff?4:2,n=Ht(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Uce(e){var t=e.read_shift(2),r=e.read_shift(2),n=xz(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Wce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(xz(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function Hce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function Gce(e,t,r,n){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return s.patternType=Tle[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function Vce(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Gce(e,t,n.fStyle,r),n}function FP(e,t,r,n){var s=r&&r.biff==5;n||(n=Ht(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function qce(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Kce(e){var t=Ht(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function OP(e,t,r){var n=Ad(e);(r.biff==2||t==9)&&++e.l;var s=Jle(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Xce(e,t,r,n,s,a){var i=Ht(8);return $m(e,t,n,i),hz(r,a,i),i}function Yce(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ad(e),s=Do(e);return n.val=s,n}function Jce(e,t,r,n){var s=Ht(14);return $m(e,t,n,s),Lm(r,s),s}var DP=oce;function Qce(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Bm(e,a),o=[];n>e.l;)o.push(Cv(e));return[a,s,i,o]}function IP(e,t,r){var n=e.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=cce(e,t-2,r)),a.body=s||e.read_shift(t-2),typeof s=="string"&&(a.Name=s),a}var Zce=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function RP(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Bm(e,i,r);s&32&&(u=Zce[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:mhe(e,d,r,o);return{chKey:a,Name:u,itab:c,rgce:f}}function bz(e,t,r){if(r.biff<8)return eue(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(lce(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function eue(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Tv(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function tue(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),a=Bm(e,n,r),i=Bm(e,s,r);return[a,i]}function rue(e,t,r){var n=vz(e);e.l++;var s=e.read_shift(1);return t-=8,[ghe(e,t,r),s,n]}function LP(e,t,r){var n=uce(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,fhe(e,t,r)]}function nue(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function sue(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=rg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},o,i,a]}}function aue(e,t,r){return sue(e,t,r)}function iue(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(_4(e));return r}function oue(e){var t=Ht(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)yz(e[r],t);return t}function lue(e,t,r){if(r&&r.biff<8)return uue(e,t,r);var n=wz(e),s=mce(e,t-22,n[1]);return{cmo:n,ft:s}}var cue={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function uue(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((cue[n]||zo)(e,t,r)),{cmo:[s,n,a],ft:i}}function due(e,t,r){var n=e.l,s="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:i=ece(e,6,r);var o=e.read_shift(2);e.read_shift(2),ai(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Bm(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function fue(e,t){var r=_4(e);e.l+=16;var n=sce(e,t-24);return[r,n]}function hue(e){var t=Ht(24),r=pa(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return zi([t,ace(e[1])])}function mue(e,t){e.read_shift(2);var r=_4(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(sl,""),[r,n]}function gue(e){var t=e[1].Tooltip,r=Ht(10+2*(t.length+1));r.write_shift(2,2048);var n=pa(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function pue(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=_P[r]||r,r=e.read_shift(2),t[1]=_P[r]||r,t}function xue(e){return e||(e=Ht(4)),e.write_shift(2,1),e.write_shift(2,1),e}function yue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(pz(e));return r}function vue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(pz(e));return r}function wue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function _z(e,t,r){if(!r.cellStyles)return zo(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:a,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function bue(e,t){var r=Ht(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function _ue(e,t){var r={};return t<32||(e.l+=16,r.header=Do(e),r.footer=Do(e),e.l+=2),r}function Sue(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function kue(e){for(var t=Ht(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Tue=Ad,Cue=fz,Nue=Cv;function Eue(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function Aue(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ad(e);++e.l;var s=rg(e,t-7,r);return n.t="str",n.val=s,n}function jue(e){var t=Ad(e);++e.l;var r=Do(e);return t.t="n",t.val=r,t}function Pue(e,t,r){var n=Ht(15);return jv(n,e,t),n.write_shift(8,r,"f"),n}function Mue(e){var t=Ad(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Fue(e,t,r){var n=Ht(9);return jv(n,e,t),n.write_shift(2,r),n}function Oue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Due(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Iue(e,t,r){var n=e.l+t,s=Ad(e),a=e.read_shift(2),i=Bm(e,a,r);return e.l=n,s.t="str",s.val=i,s}var Rue=[2,3,48,49,131,139,140,245],P6=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=v4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=nh(1);switch(c.type){case"base64":d=Vl(Jl(o));break;case"binary":d=Vl(o);break;case"buffer":case"array":d=o;break}io(d,0);var f=d.read_shift(1),m=!!(f&136),p=!1,x=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var w=0,v=521;f==2&&(w=d.read_shift(2)),d.l+=3,f!=2&&(w=d.read_shift(4)),w>1048576&&(w=1e6),f!=2&&(v=d.read_shift(2));var C=d.read_shift(2),k=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=e[d[d.l]]),d.l+=1,d.l+=2),x&&(d.l+=36);for(var b=[],j={},A=Math.min(d.length,f==2?521:v-10-(p?264:0)),F=x?32:11;d.l<A&&d[d.l]!=13;)switch(j={},j.name=Py.utils.decode(k,d.slice(d.l,d.l+F)).replace(/[\u0000\r\n].*$/g,""),d.l+=F,j.type=String.fromCharCode(d.read_shift(1)),f!=2&&!x&&(j.offset=d.read_shift(4)),j.len=d.read_shift(1),f==2&&(j.offset=d.read_shift(2)),j.dec=d.read_shift(1),j.name.length&&b.push(j),f!=2&&(d.l+=x?13:14),j.type){case"B":(!p||j.len!=8)&&c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var D=0,M=0;for(u[0]=[],M=0;M!=b.length;++M)u[0][M]=b[M].name;for(;w-- >0;){if(d[d.l]===42){d.l+=C;continue}for(++d.l,u[++D]=[],M=0,M=0;M!=b.length;++M){var O=d.slice(d.l,d.l+b[M].len);d.l+=b[M].len,io(O,0);var L=Py.utils.decode(k,O);switch(b[M].type){case"C":L.trim().length&&(u[D][M]=L.replace(/\s+$/,""));break;case"D":L.length===8?u[D][M]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):u[D][M]=L;break;case"F":u[D][M]=parseFloat(L.trim());break;case"+":case"I":u[D][M]=x?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":u[D][M]=!0;break;case"N":case"F":u[D][M]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[D][M]="##MEMO##"+(x?parseInt(L.trim(),10):O.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(u[D][M]=+L||0);break;case"@":u[D][M]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":u[D][M]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":u[D][M]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[D][M]=-O.read_shift(-8,"f");break;case"B":if(p&&b[M].len==8){u[D][M]=O.read_shift(8,"f");break}case"G":case"P":O.l+=b[M].len;break;case"0":if(b[M].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+b[M].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=b,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=e1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(o,c){try{return xh(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&Au(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Tl(),f=lb(o,{header:1,raw:!0,cellDates:!0}),m=f[0],p=f.slice(1),x=o["!cols"]||[],w=0,v=0,C=0,k=1;for(w=0;w<m.length;++w){if(((x[w]||{}).DBF||{}).name){m[w]=x[w].DBF.name,++C;continue}if(m[w]!=null){if(++C,typeof m[w]=="number"&&(m[w]=m[w].toString(10)),typeof m[w]!="string")throw new Error("DBF Invalid column name "+m[w]+" |"+typeof m[w]+"|");if(m.indexOf(m[w])!==w){for(v=0;v<1024;++v)if(m.indexOf(m[w]+"_"+v)==-1){m[w]+="_"+v;break}}}}var b=es(o["!ref"]),j=[],A=[],F=[];for(w=0;w<=b.e.c-b.s.c;++w){var D="",M="",O=0,L=[];for(v=0;v<p.length;++v)p[v][w]!=null&&L.push(p[v][w]);if(L.length==0||m[w]==null){j[w]="?";continue}for(v=0;v<L.length;++v){switch(typeof L[v]){case"number":M="B";break;case"string":M="C";break;case"boolean":M="L";break;case"object":M=L[v]instanceof Date?"D":"C";break;default:M="C"}O=Math.max(O,String(L[v]).length),D=D&&D!=M?"C":M}O>250&&(O=250),M=((x[w]||{}).DBF||{}).type,M=="C"&&x[w].DBF.len>O&&(O=x[w].DBF.len),D=="B"&&M=="N"&&(D="N",F[w]=x[w].DBF.dec,O=x[w].DBF.len),A[w]=D=="C"||M=="N"?O:a[D]||0,k+=A[w],j[w]=D}var W=d.next(32);for(W.write_shift(4,318902576),W.write_shift(4,p.length),W.write_shift(2,296+32*C),W.write_shift(2,k),w=0;w<4;++w)W.write_shift(4,0);for(W.write_shift(4,0|(+t[d$]||3)<<8),w=0,v=0;w<m.length;++w)if(m[w]!=null){var re=d.next(32),ie=(m[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);re.write_shift(1,ie,"sbcs"),re.write_shift(1,j[w]=="?"?"C":j[w],"sbcs"),re.write_shift(4,v),re.write_shift(1,A[w]||a[j[w]]||0),re.write_shift(1,F[w]||0),re.write_shift(1,2),re.write_shift(4,0),re.write_shift(1,0),re.write_shift(4,0),re.write_shift(4,0),v+=A[w]||a[j[w]]||0}var xe=d.next(264);for(xe.write_shift(4,13),w=0;w<65;++w)xe.write_shift(4,0);for(w=0;w<p.length;++w){var de=d.next(k);for(de.write_shift(1,0),v=0;v<m.length;++v)if(m[v]!=null)switch(j[v]){case"L":de.write_shift(1,p[w][v]==null?63:p[w][v]?84:70);break;case"B":de.write_shift(8,p[w][v]||0,"f");break;case"N":var fe="0";for(typeof p[w][v]=="number"&&(fe=p[w][v].toFixed(F[v]||0)),C=0;C<A[v]-fe.length;++C)de.write_shift(1,32);de.write_shift(1,fe,"sbcs");break;case"D":p[w][v]?(de.write_shift(4,("0000"+p[w][v].getFullYear()).slice(-4),"sbcs"),de.write_shift(2,("00"+(p[w][v].getMonth()+1)).slice(-2),"sbcs"),de.write_shift(2,("00"+p[w][v].getDate()).slice(-2),"sbcs")):de.write_shift(8,"00000000","sbcs");break;case"C":var H=String(p[w][v]!=null?p[w][v]:"").slice(0,A[v]);for(de.write_shift(1,H,"sbcs"),C=0;C<A[v]-H.length;++C)de.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}})(),Sz=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ma(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var x=e[p];return typeof x=="number"?Xj(x):x},n=function(m,p,x){var w=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return w==59?m:Xj(w)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return a(Jl(m),p);case"binary":return a(m,p);case"buffer":return a(Pn&&Buffer.isBuffer(m)?m.toString("binary"):ph(m),p);case"array":return a(Rm(m),p)}throw new Error("Unrecognized type "+p.type)}function a(m,p){var x=m.split(/[\n\r]+/),w=-1,v=-1,C=0,k=0,b=[],j=[],A=null,F={},D=[],M=[],O=[],L=0,W;for(+p.codepage>=0&&Au(+p.codepage);C!==x.length;++C){L=0;var re=x[C].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),ie=re.replace(/;;/g,"\0").split(";").map(function(se){return se.replace(/\u0000/g,";")}),xe=ie[0],de;if(re.length>0)switch(xe){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ie[1].charAt(0)=="P"&&j.push(re.slice(3).replace(/;;/g,";"));break;case"C":var fe=!1,H=!1,Q=!1,U=!1,V=-1,X=-1;for(k=1;k<ie.length;++k)switch(ie[k].charAt(0)){case"A":break;case"X":v=parseInt(ie[k].slice(1))-1,H=!0;break;case"Y":for(w=parseInt(ie[k].slice(1))-1,H||(v=0),W=b.length;W<=w;++W)b[W]=[];break;case"K":de=ie[k].slice(1),de.charAt(0)==='"'?de=de.slice(1,de.length-1):de==="TRUE"?de=!0:de==="FALSE"?de=!1:isNaN(Mu(de))?isNaN(Tp(de).getDate())||(de=Ks(de)):(de=Mu(de),A!==null&&Qp(A)&&(de=b4(de))),fe=!0;break;case"E":U=!0;var z=fp(ie[k].slice(1),{r:w,c:v});b[w][v]=[b[w][v],z];break;case"S":Q=!0,b[w][v]=[b[w][v],"S5S"];break;case"G":break;case"R":V=parseInt(ie[k].slice(1))-1;break;case"C":X=parseInt(ie[k].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+re)}if(fe&&(b[w][v]&&b[w][v].length==2?b[w][v][0]=de:b[w][v]=de,A=null),Q){if(U)throw new Error("SYLK shared formula cannot have own formula");var K=V>-1&&b[V][X];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");b[w][v][1]=zz(K[1],{r:w-V,c:v-X})}break;case"F":var te=0;for(k=1;k<ie.length;++k)switch(ie[k].charAt(0)){case"X":v=parseInt(ie[k].slice(1))-1,++te;break;case"Y":for(w=parseInt(ie[k].slice(1))-1,W=b.length;W<=w;++W)b[W]=[];break;case"M":L=parseInt(ie[k].slice(1))/20;break;case"F":break;case"G":break;case"P":A=j[parseInt(ie[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=ie[k].slice(1).split(" "),W=parseInt(O[0],10);W<=parseInt(O[1],10);++W)L=parseInt(O[2],10),M[W-1]=L===0?{hidden:!0}:{wch:L},sh(M[W-1]);break;case"C":v=parseInt(ie[k].slice(1))-1,M[v]||(M[v]={});break;case"R":w=parseInt(ie[k].slice(1))-1,D[w]||(D[w]={}),L>0?(D[w].hpt=L,D[w].hpx=Np(L)):L===0&&(D[w].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+re)}te<1&&(A=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+re)}}return D.length>0&&(F["!rows"]=D),M.length>0&&(F["!cols"]=M),p&&p.sheetRows&&(b=b.slice(0,p.sheetRows)),[b,F]}function i(m,p){var x=s(m,p),w=x[0],v=x[1],C=e1(w,p);return Ma(v).forEach(function(k){C[k]=v[k]}),C}function o(m,p){return xh(i(m,p),p)}function c(m,p,x,w){var v="C;Y"+(x+1)+";X"+(w+1)+";K";switch(m.t){case"n":v+=m.v||0,m.f&&!m.F&&(v+=";E"+R7(m.f,{r:x,c:w}));break;case"b":v+=m.v?"TRUE":"FALSE";break;case"e":v+=m.w||m.v;break;case"d":v+='"'+(m.w||m.v)+'"';break;case"s":v+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(m,p){p.forEach(function(x,w){var v="F;W"+(w+1)+" "+(w+1)+" ";x.hidden?v+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=By(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=$y(x.wpx)),typeof x.wch=="number"&&(v+=Math.round(x.wch))),v.charAt(v.length-1)!=" "&&m.push(v)})}function d(m,p){p.forEach(function(x,w){var v="F;";x.hidden?v+="M0;":x.hpt?v+="M"+20*x.hpt+";":x.hpx&&(v+="M"+20*zy(x.hpx)+";"),v.length>2&&m.push(v+"R"+(w+1))})}function f(m,p){var x=["ID;PWXL;N;E"],w=[],v=es(m["!ref"]),C,k=Array.isArray(m),b=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),m["!cols"]&&u(x,m["!cols"]),m["!rows"]&&d(x,m["!rows"]),x.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var j=v.s.r;j<=v.e.r;++j)for(var A=v.s.c;A<=v.e.c;++A){var F=nn({r:j,c:A});C=k?(m[j]||[])[A]:m[F],!(!C||C.v==null&&(!C.f||C.F))&&w.push(c(C,m,j,A))}return x.join(b)+b+w.join(b)+b+"E"+b}return{to_workbook:o,to_sheet:i,from_sheet:f}})(),kz=(function(){function e(a,i){switch(i.type){case"base64":return t(Jl(a),i);case"binary":return t(a,i);case"buffer":return t(Pn&&Buffer.isBuffer(a)?a.toString("binary"):ph(a),i);case"array":return t(Rm(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){for(var o=a.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var m=o[d].trim().split(","),p=m[0],x=m[1];++d;for(var w=o[d]||"";(w.match(/["]/g)||[]).length&1&&d<o.length-1;)w+=`
`+o[++d];switch(w=w.trim(),+p){case-1:if(w==="BOT"){f[++c]=[],u=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?f[c][u]=!0:w==="FALSE"?f[c][u]=!1:isNaN(Mu(x))?isNaN(Tp(x).getDate())?f[c][u]=x:f[c][u]=Ks(x):f[c][u]=Mu(x),++u;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),f[c][u++]=w!==""?w:null;break}if(w==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(a,i){return e1(e(a,i),i)}function n(a,i){return xh(r(a,i),i)}var s=(function(){var a=function(c,u,d,f,m){c.push(u),c.push(d+","+f),c.push('"'+m.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=es(c["!ref"]),f,m=Array.isArray(c);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var x=d.s.c;x<=d.e.c;++x){var w=nn({r:p,c:x});if(f=m?(c[p]||[])[x]:c[w],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Yc(f.z||en[14],bi(Ks(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var C=`\r
`,k=u.join(C);return k}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),Tz=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,m){for(var p=f.split(`
`),x=-1,w=-1,v=0,C=[];v!==p.length;++v){var k=p[v].trim().split(":");if(k[0]==="cell"){var b=pa(k[1]);if(C.length<=b.r)for(x=C.length;x<=b.r;++x)C[x]||(C[x]=[]);switch(x=b.r,w=b.c,k[2]){case"t":C[x][w]=e(k[3]);break;case"v":C[x][w]=+k[3];break;case"vtf":var j=k[k.length-1];case"vtc":switch(k[3]){case"nl":C[x][w]=!!+k[4];break;default:C[x][w]=+k[4];break}k[2]=="vtf"&&(C[x][w]=[C[x][w],j])}}}return m&&m.sheetRows&&(C=C.slice(0,m.sheetRows)),C}function n(f,m){return e1(r(f,m),m)}function s(f,m){return xh(n(f,m),m)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var m=[],p=[],x,w="",v=Cl(f["!ref"]),C=Array.isArray(f),k=v.s.r;k<=v.e.r;++k)for(var b=v.s.c;b<=v.e.c;++b)if(w=nn({r:k,c:b}),x=C?(f[k]||[])[b]:f[w],!(!x||x.v==null||x.t==="z")){switch(p=["cell",w,"t"],x.t){case"s":case"str":p.push(t(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=t(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=t(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var j=bi(Ks(x.v));p[2]="vtc",p[3]="nd",p[4]=""+j,p[5]=x.w||Yc(x.z||en[14],j);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(f){return[a,i,o,i,u(f),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),Cp=(function(){function e(d,f,m,p,x){x.raw?f[m][p]=d:d===""||(d==="TRUE"?f[m][p]=!0:d==="FALSE"?f[m][p]=!1:isNaN(Mu(d))?isNaN(Tp(d).getDate())?f[m][p]=d:f[m][p]=Ks(d):f[m][p]=Mu(d))}function t(d,f){var m=f||{},p=[];if(!d||d.length===0)return p;for(var x=d.split(/[\r\n]/),w=x.length-1;w>=0&&x[w].length===0;)--w;for(var v=10,C=0,k=0;k<=w;++k)C=x[k].indexOf(" "),C==-1?C=x[k].length:C++,v=Math.max(v,C);for(k=0;k<=w;++k){p[k]=[];var b=0;for(e(x[k].slice(0,v).trim(),p,k,b,m),b=1;b<=(x[k].length-v)/10+1;++b)e(x[k].slice(v+(b-1)*10,v+b*10).trim(),p,k,b,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var f={},m=!1,p=0,x=0;p<d.length;++p)(x=d.charCodeAt(p))==34?m=!m:!m&&x in r&&(f[x]=(f[x]||0)+1);x=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&x.push([f[p],p]);if(!x.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&x.push([f[p],p])}return x.sort(function(w,v){return w[0]-v[0]||n[w[1]]-n[v[1]]}),r[x.pop()[1]]||44}function a(d,f){var m=f||{},p="",x=m.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=s(d.slice(0,1024)):m&&m.FS?p=m.FS:p=s(d.slice(0,1024));var v=0,C=0,k=0,b=0,j=0,A=p.charCodeAt(0),F=!1,D=0,M=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var O=m.dateNF!=null?Soe(m.dateNF):null;function L(){var W=d.slice(b,j),re={};if(W.charAt(0)=='"'&&W.charAt(W.length-1)=='"'&&(W=W.slice(1,-1).replace(/""/g,'"')),W.length===0)re.t="z";else if(m.raw)re.t="s",re.v=W;else if(W.trim().length===0)re.t="s",re.v=W;else if(W.charCodeAt(0)==61)W.charCodeAt(1)==34&&W.charCodeAt(W.length-1)==34?(re.t="s",re.v=W.slice(2,-1).replace(/""/g,'"')):Q0e(W)?(re.t="n",re.f=W.slice(1)):(re.t="s",re.v=W);else if(W=="TRUE")re.t="b",re.v=!0;else if(W=="FALSE")re.t="b",re.v=!1;else if(!isNaN(k=Mu(W)))re.t="n",m.cellText!==!1&&(re.w=W),re.v=k;else if(!isNaN(Tp(W).getDate())||O&&W.match(O)){re.z=m.dateNF||en[14];var ie=0;O&&W.match(O)&&(W=koe(W,m.dateNF,W.match(O)||[]),ie=1),m.cellDates?(re.t="d",re.v=Ks(W,ie)):(re.t="n",re.v=bi(Ks(W,ie))),m.cellText!==!1&&(re.w=Yc(re.z,re.v instanceof Date?bi(re.v):re.v)),m.cellNF||delete re.z}else re.t="s",re.v=W;if(re.t=="z"||(m.dense?(x[v]||(x[v]=[]),x[v][C]=re):x[nn({c:C,r:v})]=re),b=j+1,M=d.charCodeAt(b),w.e.c<C&&(w.e.c=C),w.e.r<v&&(w.e.r=v),D==A)++C;else if(C=0,++v,m.sheetRows&&m.sheetRows<=v)return!0}e:for(;j<d.length;++j)switch(D=d.charCodeAt(j)){case 34:M===34&&(F=!F);break;case A:case 10:case 13:if(!F&&L())break e;break}return j-b>0&&L(),x["!ref"]=Tn(w),x}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):e1(t(d,f),f)}function o(d,f){var m="",p=f.type=="string"?[0,0,0,0]:G7(d,f);switch(f.type){case"base64":m=Jl(d);break;case"binary":m=d;break;case"buffer":f.codepage==65001?m=d.toString("utf8"):f.codepage&&typeof Py<"u"||(m=Pn&&Buffer.isBuffer(d)?d.toString("binary"):ph(d));break;case"array":m=Rm(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=As(m.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?m=As(m):f.type=="binary"&&typeof Py<"u",m.slice(0,19)=="socialcalc:version:"?Tz.to_sheet(f.type=="string"?m:As(m),f):i(m,f)}function c(d,f){return xh(o(d,f),f)}function u(d){for(var f=[],m=es(d["!ref"]),p,x=Array.isArray(d),w=m.s.r;w<=m.e.r;++w){for(var v=[],C=m.s.c;C<=m.e.c;++C){var k=nn({r:w,c:C});if(p=x?(d[w]||[])[C]:d[k],!p||p.v==null){v.push("          ");continue}for(var b=(p.w||(C0(p),p.w)||"").slice(0,10);b.length<10;)b+=" ";v.push(b+(C===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}})();function Lue(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=Sz.to_workbook(e,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Cp.to_workbook(e,t)}}var pm=(function(){function e(z,K,te){if(z){io(z,z.l||0);for(var se=te.Enum||V;z.l<z.length;){var pe=z.read_shift(2),oe=se[pe]||se[65535],ye=z.read_shift(2),we=z.l+ye,Se=oe.f&&oe.f(z,ye,te);if(z.l=we,K(Se,oe,pe))return}}}function t(z,K){switch(K.type){case"base64":return r(Vl(Jl(z)),K);case"binary":return r(Vl(z),K);case"buffer":case"array":return r(z,K)}throw"Unsupported type "+K.type}function r(z,K){if(!z)return z;var te=K||{},se=te.dense?[]:{},pe="Sheet1",oe="",ye=0,we={},Se=[],Ie=[],me={s:{r:0,c:0},e:{r:0,c:0}},_e=te.sheetRows||0;if(z[2]==0&&(z[3]==8||z[3]==9)&&z.length>=16&&z[14]==5&&z[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(z[2]==2)te.Enum=V,e(z,function(Ze,Kt,yt){switch(yt){case 0:te.vers=Ze,Ze>=4096&&(te.qpro=!0);break;case 6:me=Ze;break;case 204:Ze&&(oe=Ze);break;case 222:oe=Ze;break;case 15:case 51:te.qpro||(Ze[1].v=Ze[1].v.slice(1));case 13:case 14:case 16:yt==14&&(Ze[2]&112)==112&&(Ze[2]&15)>1&&(Ze[2]&15)<15&&(Ze[1].z=te.dateNF||en[14],te.cellDates&&(Ze[1].t="d",Ze[1].v=b4(Ze[1].v))),te.qpro&&Ze[3]>ye&&(se["!ref"]=Tn(me),we[pe]=se,Se.push(pe),se=te.dense?[]:{},me={s:{r:0,c:0},e:{r:0,c:0}},ye=Ze[3],pe=oe||"Sheet"+(ye+1),oe="");var Rt=te.dense?(se[Ze[0].r]||[])[Ze[0].c]:se[nn(Ze[0])];if(Rt){Rt.t=Ze[1].t,Rt.v=Ze[1].v,Ze[1].z!=null&&(Rt.z=Ze[1].z),Ze[1].f!=null&&(Rt.f=Ze[1].f);break}te.dense?(se[Ze[0].r]||(se[Ze[0].r]=[]),se[Ze[0].r][Ze[0].c]=Ze[1]):se[nn(Ze[0])]=Ze[1];break}},te);else if(z[2]==26||z[2]==14)te.Enum=X,z[2]==14&&(te.qpro=!0,z.l=0),e(z,function(Ze,Kt,yt){switch(yt){case 204:pe=Ze;break;case 22:Ze[1].v=Ze[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ze[3]>ye&&(se["!ref"]=Tn(me),we[pe]=se,Se.push(pe),se=te.dense?[]:{},me={s:{r:0,c:0},e:{r:0,c:0}},ye=Ze[3],pe="Sheet"+(ye+1)),_e>0&&Ze[0].r>=_e)break;te.dense?(se[Ze[0].r]||(se[Ze[0].r]=[]),se[Ze[0].r][Ze[0].c]=Ze[1]):se[nn(Ze[0])]=Ze[1],me.e.c<Ze[0].c&&(me.e.c=Ze[0].c),me.e.r<Ze[0].r&&(me.e.r=Ze[0].r);break;case 27:Ze[14e3]&&(Ie[Ze[14e3][0]]=Ze[14e3][1]);break;case 1537:Ie[Ze[0]]=Ze[1],Ze[0]==ye&&(pe=Ze[1]);break}},te);else throw new Error("Unrecognized LOTUS BOF "+z[2]);if(se["!ref"]=Tn(me),we[oe||pe]=se,Se.push(oe||pe),!Ie.length)return{SheetNames:Se,Sheets:we};for(var We={},Ue=[],St=0;St<Ie.length;++St)we[Se[St]]?(Ue.push(Ie[St]||Se[St]),We[Ie[St]]=we[Ie[St]]||we[Se[St]]):(Ue.push(Ie[St]),We[Ie[St]]={"!ref":"A1"});return{SheetNames:Ue,Sheets:We}}function n(z,K){var te=K||{};if(+te.codepage>=0&&Au(+te.codepage),te.type=="string")throw new Error("Cannot write WK1 to JS string");var se=Tl(),pe=es(z["!ref"]),oe=Array.isArray(z),ye=[];br(se,0,a(1030)),br(se,6,c(pe));for(var we=Math.min(pe.e.r,8191),Se=pe.s.r;Se<=we;++Se)for(var Ie=Xa(Se),me=pe.s.c;me<=pe.e.c;++me){Se===pe.s.r&&(ye[me]=ga(me));var _e=ye[me]+Ie,We=oe?(z[Se]||[])[me]:z[_e];if(!(!We||We.t=="z"))if(We.t=="n")(We.v|0)==We.v&&We.v>=-32768&&We.v<=32767?br(se,13,p(Se,me,We.v)):br(se,14,w(Se,me,We.v));else{var Ue=C0(We);br(se,15,f(Se,me,Ue.slice(0,239)))}}return br(se,1),se.end()}function s(z,K){var te=K||{};if(+te.codepage>=0&&Au(+te.codepage),te.type=="string")throw new Error("Cannot write WK3 to JS string");var se=Tl();br(se,0,i(z));for(var pe=0,oe=0;pe<z.SheetNames.length;++pe)(z.Sheets[z.SheetNames[pe]]||{})["!ref"]&&br(se,27,U(z.SheetNames[pe],oe++));var ye=0;for(pe=0;pe<z.SheetNames.length;++pe){var we=z.Sheets[z.SheetNames[pe]];if(!(!we||!we["!ref"])){for(var Se=es(we["!ref"]),Ie=Array.isArray(we),me=[],_e=Math.min(Se.e.r,8191),We=Se.s.r;We<=_e;++We)for(var Ue=Xa(We),St=Se.s.c;St<=Se.e.c;++St){We===Se.s.r&&(me[St]=ga(St));var Ze=me[St]+Ue,Kt=Ie?(we[We]||[])[St]:we[Ze];if(!(!Kt||Kt.t=="z"))if(Kt.t=="n")br(se,23,L(We,St,ye,Kt.v));else{var yt=C0(Kt);br(se,22,D(We,St,ye,yt.slice(0,239)))}}++ye}}return br(se,1),se.end()}function a(z){var K=Ht(2);return K.write_shift(2,z),K}function i(z){var K=Ht(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var te=0,se=0,pe=0,oe=0;oe<z.SheetNames.length;++oe){var ye=z.SheetNames[oe],we=z.Sheets[ye];if(!(!we||!we["!ref"])){++pe;var Se=Cl(we["!ref"]);te<Se.e.r&&(te=Se.e.r),se<Se.e.c&&(se=Se.e.c)}}return te>8191&&(te=8191),K.write_shift(2,te),K.write_shift(1,pe),K.write_shift(1,se),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function o(z,K,te){var se={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&te.qpro?(se.s.c=z.read_shift(1),z.l++,se.s.r=z.read_shift(2),se.e.c=z.read_shift(1),z.l++,se.e.r=z.read_shift(2),se):(se.s.c=z.read_shift(2),se.s.r=z.read_shift(2),K==12&&te.qpro&&(z.l+=2),se.e.c=z.read_shift(2),se.e.r=z.read_shift(2),K==12&&te.qpro&&(z.l+=2),se.s.c==65535&&(se.s.c=se.e.c=se.s.r=se.e.r=0),se)}function c(z){var K=Ht(8);return K.write_shift(2,z.s.c),K.write_shift(2,z.s.r),K.write_shift(2,z.e.c),K.write_shift(2,z.e.r),K}function u(z,K,te){var se=[{c:0,r:0},{t:"n",v:0},0,0];return te.qpro&&te.vers!=20768?(se[0].c=z.read_shift(1),se[3]=z.read_shift(1),se[0].r=z.read_shift(2),z.l+=2):(se[2]=z.read_shift(1),se[0].c=z.read_shift(2),se[0].r=z.read_shift(2)),se}function d(z,K,te){var se=z.l+K,pe=u(z,K,te);if(pe[1].t="s",te.vers==20768){z.l++;var oe=z.read_shift(1);return pe[1].v=z.read_shift(oe,"utf8"),pe}return te.qpro&&z.l++,pe[1].v=z.read_shift(se-z.l,"cstr"),pe}function f(z,K,te){var se=Ht(7+te.length);se.write_shift(1,255),se.write_shift(2,K),se.write_shift(2,z),se.write_shift(1,39);for(var pe=0;pe<se.length;++pe){var oe=te.charCodeAt(pe);se.write_shift(1,oe>=128?95:oe)}return se.write_shift(1,0),se}function m(z,K,te){var se=u(z,K,te);return se[1].v=z.read_shift(2,"i"),se}function p(z,K,te){var se=Ht(7);return se.write_shift(1,255),se.write_shift(2,K),se.write_shift(2,z),se.write_shift(2,te,"i"),se}function x(z,K,te){var se=u(z,K,te);return se[1].v=z.read_shift(8,"f"),se}function w(z,K,te){var se=Ht(13);return se.write_shift(1,255),se.write_shift(2,K),se.write_shift(2,z),se.write_shift(8,te,"f"),se}function v(z,K,te){var se=z.l+K,pe=u(z,K,te);if(pe[1].v=z.read_shift(8,"f"),te.qpro)z.l=se;else{var oe=z.read_shift(2);j(z.slice(z.l,z.l+oe),pe),z.l+=oe}return pe}function C(z,K,te){var se=K&32768;return K&=-32769,K=(se?z:0)+(K>=8192?K-16384:K),(se?"":"$")+(te?ga(K):Xa(K))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},b=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(z,K){io(z,0);for(var te=[],se=0,pe="",oe="",ye="",we="";z.l<z.length;){var Se=z[z.l++];switch(Se){case 0:te.push(z.read_shift(8,"f"));break;case 1:oe=C(K[0].c,z.read_shift(2),!0),pe=C(K[0].r,z.read_shift(2),!1),te.push(oe+pe);break;case 2:{var Ie=C(K[0].c,z.read_shift(2),!0),me=C(K[0].r,z.read_shift(2),!1);oe=C(K[0].c,z.read_shift(2),!0),pe=C(K[0].r,z.read_shift(2),!1),te.push(Ie+me+":"+oe+pe)}break;case 3:if(z.l<z.length){console.error("WK1 premature formula end");return}break;case 4:te.push("("+te.pop()+")");break;case 5:te.push(z.read_shift(2));break;case 6:{for(var _e="";Se=z[z.l++];)_e+=String.fromCharCode(Se);te.push('"'+_e.replace(/"/g,'""')+'"')}break;case 8:te.push("-"+te.pop());break;case 23:te.push("+"+te.pop());break;case 22:te.push("NOT("+te.pop()+")");break;case 20:case 21:we=te.pop(),ye=te.pop(),te.push(["AND","OR"][Se-20]+"("+ye+","+we+")");break;default:if(Se<32&&b[Se])we=te.pop(),ye=te.pop(),te.push(ye+b[Se]+we);else if(k[Se]){if(se=k[Se][1],se==69&&(se=z[z.l++]),se>te.length){console.error("WK1 bad formula parse 0x"+Se.toString(16)+":|"+te.join("|")+"|");return}var We=te.slice(-se);te.length-=se,te.push(k[Se][0]+"("+We.join(",")+")")}else return Se<=7?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=24?console.error("WK1 unsupported op "+Se.toString(16)):Se<=30?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=115?console.error("WK1 unsupported function opcode "+Se.toString(16)):console.error("WK1 unrecognized opcode "+Se.toString(16))}}te.length==1?K[1].f=""+te[0]:console.error("WK1 bad formula parse |"+te.join("|")+"|")}function A(z){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=z.read_shift(2),K[3]=z[z.l++],K[0].c=z[z.l++],K}function F(z,K){var te=A(z);return te[1].t="s",te[1].v=z.read_shift(K-4,"cstr"),te}function D(z,K,te,se){var pe=Ht(6+se.length);pe.write_shift(2,z),pe.write_shift(1,te),pe.write_shift(1,K),pe.write_shift(1,39);for(var oe=0;oe<se.length;++oe){var ye=se.charCodeAt(oe);pe.write_shift(1,ye>=128?95:ye)}return pe.write_shift(1,0),pe}function M(z,K){var te=A(z);te[1].v=z.read_shift(2);var se=te[1].v>>1;if(te[1].v&1)switch(se&7){case 0:se=(se>>3)*5e3;break;case 1:se=(se>>3)*500;break;case 2:se=(se>>3)/20;break;case 3:se=(se>>3)/200;break;case 4:se=(se>>3)/2e3;break;case 5:se=(se>>3)/2e4;break;case 6:se=(se>>3)/16;break;case 7:se=(se>>3)/64;break}return te[1].v=se,te}function O(z,K){var te=A(z),se=z.read_shift(4),pe=z.read_shift(4),oe=z.read_shift(2);if(oe==65535)return se===0&&pe===3221225472?(te[1].t="e",te[1].v=15):se===0&&pe===3489660928?(te[1].t="e",te[1].v=42):te[1].v=0,te;var ye=oe&32768;return oe=(oe&32767)-16446,te[1].v=(1-ye*2)*(pe*Math.pow(2,oe+32)+se*Math.pow(2,oe)),te}function L(z,K,te,se){var pe=Ht(14);if(pe.write_shift(2,z),pe.write_shift(1,te),pe.write_shift(1,K),se==0)return pe.write_shift(4,0),pe.write_shift(4,0),pe.write_shift(2,65535),pe;var oe=0,ye=0,we=0,Se=0;return se<0&&(oe=1,se=-se),ye=Math.log2(se)|0,se/=Math.pow(2,ye-31),Se=se>>>0,(Se&2147483648)==0&&(se/=2,++ye,Se=se>>>0),se-=Se,Se|=2147483648,Se>>>=0,se*=Math.pow(2,32),we=se>>>0,pe.write_shift(4,we),pe.write_shift(4,Se),ye+=16383+(oe?32768:0),pe.write_shift(2,ye),pe}function W(z,K){var te=O(z);return z.l+=K-14,te}function re(z,K){var te=A(z),se=z.read_shift(4);return te[1].v=se>>6,te}function ie(z,K){var te=A(z),se=z.read_shift(8,"f");return te[1].v=se,te}function xe(z,K){var te=ie(z);return z.l+=K-10,te}function de(z,K){return z[z.l+K-1]==0?z.read_shift(K,"cstr"):""}function fe(z,K){var te=z[z.l++];te>K-1&&(te=K-1);for(var se="";se.length<te;)se+=String.fromCharCode(z[z.l++]);return se}function H(z,K,te){if(!(!te.qpro||K<21)){var se=z.read_shift(1);z.l+=17,z.l+=1,z.l+=2;var pe=z.read_shift(K-21,"cstr");return[se,pe]}}function Q(z,K){for(var te={},se=z.l+K;z.l<se;){var pe=z.read_shift(2);if(pe==14e3){for(te[pe]=[0,""],te[pe][0]=z.read_shift(2);z[z.l];)te[pe][1]+=String.fromCharCode(z[z.l]),z.l++;z.l++}}return te}function U(z,K){var te=Ht(5+z.length);te.write_shift(2,14e3),te.write_shift(2,K);for(var se=0;se<z.length;++se){var pe=z.charCodeAt(se);te[te.l++]=pe>127?95:pe}return te[te.l++]=0,te}var V={0:{n:"BOF",f:ai},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:de},222:{n:"SHEETNAMELP",f:fe},65535:{n:""}},X={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:F},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:M},25:{n:"FORMULA19",f:W},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:re},38:{n:"??"},39:{n:"NUMBER27",f:ie},40:{n:"FORMULA28",f:xe},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:de},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:H},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function Bue(e){var t={},r=e.match(Uo),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=an(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=l7[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}var $ue=(function(){var e=Oy("t"),t=Oy("rPr");function r(a){var i=a.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Zn(i[1])},c=a.match(t);return c&&(o.s=Bue(c[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),zue=(function(){var t=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(a.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}})(),Uue=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Wue=/<(?:\w+:)?r>/,Hue=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function M7(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Zn(As(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=As(e),r&&(n.h=y7(n.t))):e.match(Wue)&&(n.r=As(e),n.t=Zn(As((e.replace(Hue,"").match(Uue)||[]).join("").replace(Uo,""))),r&&(n.h=zue($ue(n.r)))),n):{t:""}}var Gue=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Vue=/<(?:\w+:)?(?:si|sstItem)>/g,que=/<\/(?:\w+:)?(?:si|sstItem)>/;function Kue(e,t){var r=[],n="";if(!e)return r;var s=e.match(Gue);if(s){n=s[2].replace(Vue,"").split(que);for(var a=0;a!=n.length;++a){var i=M7(n[a].trim(),t);i!=null&&(r[r.length]=i)}s=an(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Xue=/^\s|\s$|[\t\n\r]/;function Cz(e,t){if(!t.bookSST)return"";var r=[Ja];r[r.length]=wr("sst",null,{xmlns:Jm[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Xue)&&(a+=' xml:space="preserve"'),a+=">"+Ts(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Yue(e){return[e.read_shift(4),e.read_shift(4)]}function Jue(e,t){var r=[],n=!1;return O0(e,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Que(e,t){return t||(t=Ht(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Zue=cle;function ede(e){var t=Tl();ir(t,159,Que(e));for(var r=0;r<e.length;++r)ir(t,19,Zue(e[r]));return ir(t,160),t.end()}function Nz(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function v0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function tde(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=v0(e,4),t.U=v0(e,4),t.W=v0(e,4),t}function rde(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function nde(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(rde(e));return t}function sde(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function ade(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=v0(e,4),t.U=v0(e,4),t.W=v0(e,4),t}function ide(e){var t=ade(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function Ez(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function Az(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function ode(e){var t=v0(e);switch(t.Minor){case 2:return[t.Minor,lde(e)];case 3:return[t.Minor,cde()];case 4:return[t.Minor,ude(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function lde(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=Ez(e,r),s=Az(e,e.length-e.l);return{t:"Std",h:n,v:s}}function cde(){throw new Error("File is password-protected: ECMA-376 Extensible")}function ude(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(Uo,function(a){var i=an(a);switch(Ed(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function dde(e,t){var r={},n=r.EncryptionVersionInfo=v0(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=Ez(e,s),t-=s,r.EncryptionVerifier=Az(e,t),r}function fde(e){var t={},r=t.EncryptionVersionInfo=v0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function F7(e){var t=0,r,n=Nz(e),s=n.length+1,a,i,o,c,u;for(r=nh(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var jz=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=Nz(i),c=a(o),u=o.length,d=nh(16),f=0;f!=16;++f)d[f]=0;var m,p,x;for((u&1)===1&&(m=c>>8,d[u]=s(e[0],m),--u,m=c&255,p=o[o.length-1],d[u]=s(p,m));u>0;)--u,m=c>>8,d[u]=s(o[u],m),--u,m=c&255,d[u]=s(o[u],m);for(u=15,x=15-o.length;x>0;)m=c>>8,d[u]=s(e[x],m),--u,--x,m=c&255,d[u]=s(o[u],m),--u,--x;return d}})(),hde=function(e,t,r,n,s){s||(s=t),n||(n=jz(e));var a,i;for(a=0;a!=t.length;++a)i=t[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},mde=function(e){var t=0,r=jz(e);return function(n){var s=hde("",n,t,r);return t=s[1],s[0]}};function gde(e,t,r,n){var s={key:ai(e),verificationBytes:ai(e)};return r.password&&(s.verifier=F7(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=mde(r.password)),s}function pde(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=fde(e):n.Data=dde(e,t),n}function xde(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?pde(e,t-2,n):gde(e,r.biff>=8?t:t-2,r,n),n}var Pz=(function(){function e(s,a){switch(a.type){case"base64":return t(Jl(s),a);case"binary":return t(s,a);case"buffer":return t(Pn&&Buffer.isBuffer(s)?s.toString("binary"):ph(s),a);case"array":return t(Rm(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var i=a||{},o=i.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var m=/\\\w+\b/g,p=0,x,w=-1;x=m.exec(d);){switch(x[0]){case"\\cell":var v=d.slice(p,m.lastIndex-x[0].length);if(v[0]==" "&&(v=v.slice(1)),++w,v.length){var C={v,t:"s"};Array.isArray(o)?o[f][w]=C:o[nn({r:f,c:w})]=C}break}p=m.lastIndex}w>u.e.c&&(u.e.c=w)}),o["!ref"]=Tn(u),o}function r(s,a){return xh(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=es(s["!ref"]),o,c=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=nn({r:u,c:d});o=c?(s[u]||[])[d]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(C0(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function yde(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Ly(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function vde(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;if(i===0)return[0,0,t];var o=0,c=0,u=s+a;switch(c=i/(u>1?2-u:u),s){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function wde(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=s*o,i[0]+=s,i[1]+=c;break;case 1:c=s*(2-o),i[0]+=c,i[1]+=s;break;case 2:c=s*(o-2),i[1]+=s,i[2]+=c;break;case 3:c=s*(4-o),i[1]+=c,i[2]+=s;break;case 4:c=s*(o-4),i[2]+=s,i[0]+=c;break;case 5:c=s*(6-o),i[2]+=c,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function ib(e,t){if(t===0)return e;var r=vde(yde(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Ly(wde(r))}var Mz=6,bde=15,_de=1,Fo=Mz;function By(e){return Math.floor((e+Math.round(128/Fo)/256)*Fo)}function $y(e){return Math.floor((e-5)/Fo*100+.5)/100}function ob(e){return Math.round((e*Fo+5)/Fo*256)/256}function I3(e){return ob($y(By(e)))}function O7(e){var t=Math.abs(e-I3(e)),r=Fo;if(t>.005)for(Fo=_de;Fo<bde;++Fo)Math.abs(e-I3(e))<=t&&(t=Math.abs(e-I3(e)),r=Fo);Fo=r}function sh(e){e.width?(e.wpx=By(e.width),e.wch=$y(e.wpx),e.MDW=Fo):e.wpx?(e.wch=$y(e.wpx),e.width=ob(e.wch),e.MDW=Fo):typeof e.wch=="number"&&(e.width=ob(e.wch),e.wpx=By(e.width),e.MDW=Fo),e.customWidth&&delete e.customWidth}var Sde=96,Fz=Sde;function zy(e){return e*96/Fz}function Np(e){return e*Fz/96}var kde={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Tde(e,t,r,n){t.Borders=[];var s={},a=!1;(e[0].match(Uo)||[]).forEach(function(i){var o=an(i);switch(Ed(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Gs(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Gs(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Cde(e,t,r,n){t.Fills=[];var s={},a=!1;(e[0].match(Uo)||[]).forEach(function(i){var o=an(i);switch(Ed(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Nde(e,t,r,n){t.Fonts=[];var s={},a=!1;(e[0].match(Uo)||[]).forEach(function(i){var o=an(i);switch(Ed(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=As(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Gs(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Gs(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Gs(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Gs(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Gs(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Gs(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Gs(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=l7[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Gs(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var c=mm[s.color.index];s.color.index==81&&(c=mm[1]),c||(c=mm[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=ib(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Ede(e,t,r){t.NumberFmt=[];for(var n=Ma(en),s=0;s<n.length;++s)t.NumberFmt[n[s]]=en[n[s]];var a=e[0].match(Uo);if(a)for(s=0;s<a.length;++s){var i=an(a[s]);switch(Ed(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Zn(As(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}y0(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Ade(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=wr("numFmt",null,{numFmtId:n,formatCode:Ts(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=wr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var U2=["numFmtId","fillId","fontId","borderId","xfId"],W2=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function jde(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(Uo)||[]).forEach(function(a){var i=an(a),o=0;switch(Ed(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<U2.length;++o)n[U2[o]]&&(n[U2[o]]=parseInt(n[U2[o]],10));for(o=0;o<W2.length;++o)n[W2[o]]&&(n[W2[o]]=Gs(n[W2[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Gs(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Pde(e){var t=[];return t[t.length]=wr("cellXfs",null),e.forEach(function(r){t[t.length]=wr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=wr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Mde=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&Ede(f,d,u),(f=o.match(s))&&Nde(f,d,c,u),(f=o.match(n))&&Cde(f,d,c,u),(f=o.match(a))&&Tde(f,d,c,u),(f=o.match(r))&&jde(f,d,u),d}})();function Oz(e,t){var r=[Ja,wr("styleSheet",null,{xmlns:Jm[0],"xmlns:vt":vi.vt})],n;return e.SSF&&(n=Ade(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Pde(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Fde(e,t){var r=e.read_shift(2),n=Bo(e);return[r,n]}function Ode(e,t,r){r||(r=Ht(6+4*t.length)),r.write_shift(2,e),Wi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Dde(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=ple(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=gle(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Bo(e),n}function Ide(e,t){t||(t=Ht(153)),t.write_shift(2,e.sz*20),xle(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),nb(e.color,t);var n=0;return n=2,t.write_shift(1,n),Wi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Rde=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],R3,Lde=zo;function BP(e,t){t||(t=Ht(84)),R3||(R3=v4(Rde));var r=R3[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(nb({auto:1},t),nb({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Bde(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function Dz(e,t,r){r||(r=Ht(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Nx(e,t){return t||(t=Ht(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var $de=zo;function zde(e,t){return t||(t=Ht(51)),t.write_shift(1,0),Nx(null,t),Nx(null,t),Nx(null,t),Nx(null,t),Nx(null,t),t.length>t.l?t.slice(0,t.l):t}function Ude(e,t){return t||(t=Ht(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),rb(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Wde(e,t,r){var n=Ht(2052);return n.write_shift(4,e),rb(t,n),rb(r,n),n.length>n.l?n.slice(0,n.l):n}function Hde(e,t,r){var n={};n.NumberFmt=[];for(var s in en)n.NumberFmt[s]=en[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return O0(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],y0(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=ib(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Gde(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(ir(e,615,Fu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&ir(e,44,Ode(s,t[s]))}),ir(e,616))}}function Vde(e){var t=1;ir(e,611,Fu(t)),ir(e,43,Ide({sz:12,color:{theme:1},name:"Calibri",family:2})),ir(e,612)}function qde(e){var t=2;ir(e,603,Fu(t)),ir(e,45,BP({patternType:"none"})),ir(e,45,BP({patternType:"gray125"})),ir(e,604)}function Kde(e){var t=1;ir(e,613,Fu(t)),ir(e,46,zde()),ir(e,614)}function Xde(e){var t=1;ir(e,626,Fu(t)),ir(e,47,Dz({numFmtId:0},65535)),ir(e,627)}function Yde(e,t){ir(e,617,Fu(t.length)),t.forEach(function(r){ir(e,47,Dz(r,0))}),ir(e,618)}function Jde(e){var t=1;ir(e,619,Fu(t)),ir(e,48,Ude({xfId:0,name:"Normal"})),ir(e,620)}function Qde(e){var t=0;ir(e,505,Fu(t)),ir(e,506)}function Zde(e){var t=0;ir(e,508,Wde(t,"TableStyleMedium9","PivotStyleMedium4")),ir(e,509)}function e0e(e,t){var r=Tl();return ir(r,278),Gde(r,e.SSF),Vde(r),qde(r),Kde(r),Xde(r),Yde(r,t.cellXfs),Jde(r),Qde(r),Zde(r),ir(r,279),r.end()}var t0e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function r0e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(Uo)||[]).forEach(function(s){var a=an(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[t0e.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function n0e(){}function s0e(){}var a0e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,i0e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,o0e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function l0e(e,t,r){t.themeElements={};var n;[["clrScheme",a0e,r0e],["fontScheme",i0e,n0e],["fmtScheme",o0e,s0e]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var c0e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Iz(e,t){(!e||e.length===0)&&(e=D7());var r,n={};if(!(r=e.match(c0e)))throw new Error("themeElements not found in theme");return l0e(r[0],n,t),n.raw=e,n}function D7(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ja];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function u0e(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var i;try{i=E$(a,{type:"array"})}catch{return}var o=ql(i,"theme/theme/theme1.xml",!0);if(o)return Iz(o,r)}}function d0e(e){return e.read_shift(4)}function f0e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=h0e(e,4);break;case 2:t.xclrValue=gz(e);break;case 3:t.xclrValue=d0e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function h0e(e,t){return zo(e,t)}function m0e(e,t){return zo(e,t)}function g0e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=f0e(e);break;case 6:n[1]=m0e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function p0e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),a=[];s-- >0;)a.push(g0e(e,r-e.l));return{ixfe:n,ext:a}}function x0e(e,t){t.forEach(function(r){r[0]})}function y0e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Bo(e)}}function v0e(e){var t=Ht(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Wi(e.name,t),t.slice(0,t.l)}function w0e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function b0e(e){var t=Ht(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function _0e(e,t){var r=Ht(8+2*t.length);return r.write_shift(4,e),Wi(t,r),r.slice(0,r.l)}function S0e(e){return e.l+=4,e.read_shift(4)!=0}function k0e(e,t){var r=Ht(8);return r.write_shift(4,e),r.write_shift(4,1),r}function T0e(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return O0(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function C0e(){var e=Tl();return ir(e,332),ir(e,334,Fu(1)),ir(e,335,v0e({name:"XLDAPR",version:12e4,flags:3496657072})),ir(e,336),ir(e,339,_0e(1,"XLDAPR")),ir(e,52),ir(e,35,Fu(514)),ir(e,4096,Fu(0)),ir(e,4097,$c(1)),ir(e,36),ir(e,53),ir(e,340),ir(e,337,k0e(1)),ir(e,51,b0e([[1,0]])),ir(e,338),ir(e,333),e.end()}function N0e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,a=2,i;return e.replace(Uo,function(o){var c=an(o);switch(Ed(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):a==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function Rz(){var e=[Ja];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function E0e(e){var t=[];if(!e)return t;var r=1;return(e.match(Uo)||[]).forEach(function(n){var s=an(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function A0e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=nn(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function j0e(e,t,r){var n=[];return O0(e,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function P0e(e,t,r,n){if(!e)return e;var s=n||{},a=!1;O0(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!c.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function M0e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var tp=1024;function Lz(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[wr("xml",null,{"xmlns:v":Wl.v,"xmlns:o":Wl.o,"xmlns:x":Wl.x,"xmlns:mv":Wl.mv}).replace(/\/>/,">"),wr("o:shapelayout",wr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),wr("v:shapetype",[wr("v:stroke",null,{joinstyle:"miter"}),wr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];tp<e*1e3;)tp+=1e3;return t.forEach(function(a){var i=pa(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?wr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=wr("v:fill",c,o),d={on:"t",obscured:"t"};++tp,s=s.concat(["<v:shape"+Dy({id:"_x0000_s"+tp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,wr("v:shadow",null,d),wr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",uo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),uo("x:AutoFill","False"),uo("x:Row",String(i.r)),uo("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function $P(e,t,r,n){var s=Array.isArray(e),a;t.forEach(function(i){var o=pa(i.ref);if(s?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[i.ref],!a){a={t:"z"},s?e[o.r][o.c]=a:e[i.ref]=a;var c=es(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=Tn(c);u!==e["!ref"]&&(e["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function F0e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=an(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=pa(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!f&&!!f[1]&&M7(f[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=m.h),n.push(u)}}}}),n}function Bz(e){var t=[Ja,wr("comments",null,{xmlns:Jm[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var a=Ts(s.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(Ts(c.a))),a.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)t.push(uo("t",Ts(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;t.push(uo("t",Ts(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function O0e(e,t){var r=[],n=!1,s={},a=0;return e.replace(Uo,function(o,c){var u=an(o);switch(Ed(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=c+o.length;break;case"</text>":s.t=e.slice(a,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function D0e(e,t,r){var n=[Ja,wr("ThreadedComments",null,{xmlns:vi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=c.id:c.parentId=a,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(wr("threadedComment",uo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function I0e(e,t){var r=[],n=!1;return e.replace(Uo,function(a){var i=an(a);switch(Ed(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function R0e(e){var t=[Ja,wr("personList",null,{xmlns:vi.TCMNT,"xmlns:x":Jm[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(wr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function L0e(e){var t={};t.iauthor=e.read_shift(4);var r=tg(e);return t.rfx=r.s,t.ref=nn(r.s),e.l+=16,t}function B0e(e,t){return t==null&&(t=Ht(36)),t.write_shift(4,e[1].iauthor),t1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var $0e=Bo;function z0e(e){return Wi(e.slice(0,54))}function U0e(e,t){var r=[],n=[],s={},a=!1;return O0(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function W0e(e){var t=Tl(),r=[];return ir(t,628),ir(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),ir(t,632,z0e(s.a)))})}),ir(t,631),ir(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:pa(n[0]),e:pa(n[0])};ir(t,635,B0e([a,s])),s.t&&s.t.length>0&&ir(t,637,dle(s)),ir(t,636),delete s.iauthor})}),ir(t,634),ir(t,629),t.end()}var H0e="application/vnd.ms-office.vbaProject";function G0e(e){var t=qr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");qr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),qr.write(t)}function V0e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&qr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var $z=["xlsb","xlsm","xlam","biff8","xla"];function q0e(){return{"!type":"dialog"}}function K0e(){return{"!type":"dialog"}}function X0e(){return{"!type":"macro"}}function Y0e(){return{"!type":"macro"}}var fp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,i){var o=!1,c=!1;a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,s+(o?"":"$")+ga(d)+(c?"":"$")+Xa(u)}return function(s,a){return t=a,s.replace(e,r)}})(),I7=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,R7=(function(){return function(t,r){return t.replace(I7,function(n,s,a,i,o,c){var u=S7(i)-(a?0:r.c),d=_7(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",m=u==0?"":a?u+1:"["+u+"]";return s+"R"+f+"C"+m})}})();function zz(e,t){return e.replace(I7,function(r,n,s,a,i,o){return n+(s=="$"?s+a:ga(S7(a)+t.c))+(i=="$"?i+o:Xa(_7(o)+t.r))})}function J0e(e,t,r){var n=Cl(t),s=n.s,a=pa(r),i={r:a.r-s.r,c:a.c-s.c};return zz(e,i)}function Q0e(e){return e.length!=1}function zP(e){return e.replace(/_xlfn\./g,"")}function ni(e){e.l+=1}function ah(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Uz(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Wz(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=ah(e),o=ah(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function Wz(e){var t=ah(e),r=ah(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Z0e(e,t,r){if(r.biff<8)return Wz(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=ah(e),i=ah(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function Hz(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return efe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=ah(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function efe(e){var t=ah(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function tfe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function rfe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return nfe(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function nfe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function sfe(e,t,r){var n=(e[e.l++]&96)>>5,s=Uz(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function afe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var i=Uz(e,a,r);return[n,s,i]}function ife(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function ofe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function lfe(e,t,r){var n=(e[e.l++]&96)>>5,s=Z0e(e,t-1,r);return[n,s]}function cfe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function UP(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function ufe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function dfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function ffe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function hfe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function mfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Gz(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function gfe(e){return e.read_shift(2),Gz(e)}function pfe(e){return e.read_shift(2),Gz(e)}function xfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=Hz(e,0,r);return[n,s]}function yfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=rfe(e,0,r);return[n,s]}function vfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=Hz(e,0,r);return[n,s,a]}function wfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[She[s],Kz[s],n]}function bfe(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:_fe(e);return[s,(a[0]===0?Kz:_he)[a[1]]]}function _fe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Sfe(e,t,r){e.l+=r&&r.biff==2?3:4}function kfe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Tfe(e){return e.l++,D0[e.read_shift(1)]}function Cfe(e){return e.l++,e.read_shift(2)}function Nfe(e){return e.l++,e.read_shift(1)!==0}function Efe(e){return e.l++,Do(e)}function Afe(e,t,r){return e.l++,Tv(e,t-1,r)}function jfe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ga(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=D0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Do(e);break;case 2:r[1]=rg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Pfe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?tg:_4)(e));return s}function Mfe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=jfe(e,r.biff);return i}function Ffe(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function Ofe(e,t,r){if(r.biff==5)return Dfe(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function Dfe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function Ife(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Rfe(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Lfe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function Bfe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var $fe=zo,zfe=zo,Ufe=zo;function Nv(e,t,r){return e.l+=2,[tfe(e)]}function L7(e){return e.l+=6,[]}var Wfe=Nv,Hfe=L7,Gfe=L7,Vfe=Nv;function Vz(e){return e.l+=2,[ai(e),e.read_shift(2)&1]}var qfe=Nv,Kfe=Vz,Xfe=L7,Yfe=Nv,Jfe=Nv,Qfe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Zfe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),i=Qfe[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:s,C:a}}function ehe(e){return e.l+=2,[e.read_shift(4)]}function the(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function rhe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function nhe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function she(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function ahe(e){return e.l+=4,[0,0]}var WP={1:{n:"PtgExp",f:kfe},2:{n:"PtgTbl",f:Ufe},3:{n:"PtgAdd",f:ni},4:{n:"PtgSub",f:ni},5:{n:"PtgMul",f:ni},6:{n:"PtgDiv",f:ni},7:{n:"PtgPower",f:ni},8:{n:"PtgConcat",f:ni},9:{n:"PtgLt",f:ni},10:{n:"PtgLe",f:ni},11:{n:"PtgEq",f:ni},12:{n:"PtgGe",f:ni},13:{n:"PtgGt",f:ni},14:{n:"PtgNe",f:ni},15:{n:"PtgIsect",f:ni},16:{n:"PtgUnion",f:ni},17:{n:"PtgRange",f:ni},18:{n:"PtgUplus",f:ni},19:{n:"PtgUminus",f:ni},20:{n:"PtgPercent",f:ni},21:{n:"PtgParen",f:ni},22:{n:"PtgMissArg",f:ni},23:{n:"PtgStr",f:Afe},26:{n:"PtgSheet",f:the},27:{n:"PtgEndSheet",f:rhe},28:{n:"PtgErr",f:Tfe},29:{n:"PtgBool",f:Nfe},30:{n:"PtgInt",f:Cfe},31:{n:"PtgNum",f:Efe},32:{n:"PtgArray",f:cfe},33:{n:"PtgFunc",f:wfe},34:{n:"PtgFuncVar",f:bfe},35:{n:"PtgName",f:Ffe},36:{n:"PtgRef",f:xfe},37:{n:"PtgArea",f:sfe},38:{n:"PtgMemArea",f:Ife},39:{n:"PtgMemErr",f:$fe},40:{n:"PtgMemNoMem",f:zfe},41:{n:"PtgMemFunc",f:Rfe},42:{n:"PtgRefErr",f:Lfe},43:{n:"PtgAreaErr",f:ife},44:{n:"PtgRefN",f:yfe},45:{n:"PtgAreaN",f:lfe},46:{n:"PtgMemAreaN",f:nhe},47:{n:"PtgMemNoMemN",f:she},57:{n:"PtgNameX",f:Ofe},58:{n:"PtgRef3d",f:vfe},59:{n:"PtgArea3d",f:afe},60:{n:"PtgRefErr3d",f:Bfe},61:{n:"PtgAreaErr3d",f:ofe},255:{}},ihe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},ohe={1:{n:"PtgElfLel",f:Vz},2:{n:"PtgElfRw",f:Yfe},3:{n:"PtgElfCol",f:Wfe},6:{n:"PtgElfRwV",f:Jfe},7:{n:"PtgElfColV",f:Vfe},10:{n:"PtgElfRadical",f:qfe},11:{n:"PtgElfRadicalS",f:Xfe},13:{n:"PtgElfColS",f:Hfe},15:{n:"PtgElfColSV",f:Gfe},16:{n:"PtgElfRadicalLel",f:Kfe},25:{n:"PtgList",f:Zfe},29:{n:"PtgSxName",f:ehe},255:{}},lhe={0:{n:"PtgAttrNoop",f:ahe},1:{n:"PtgAttrSemi",f:mfe},2:{n:"PtgAttrIf",f:ffe},4:{n:"PtgAttrChoose",f:ufe},8:{n:"PtgAttrGoto",f:dfe},16:{n:"PtgAttrSum",f:Sfe},32:{n:"PtgAttrBaxcel",f:UP},33:{n:"PtgAttrBaxcel",f:UP},64:{n:"PtgAttrSpace",f:gfe},65:{n:"PtgAttrSpaceSemi",f:pfe},128:{n:"PtgAttrIfError",f:hfe},255:{}};function Ev(e,t,r,n){if(n.biff<8)return zo(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Mfe(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Pfe(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=s-e.l,t!==0&&a.push(zo(e,t)),a}function Av(e,t,r){for(var n=e.l+t,s,a,i=[];n!=e.l;)t=n-e.l,a=e[e.l],s=WP[a]||WP[ihe[a]],(a===24||a===25)&&(s=(a===24?ohe:lhe)[e[e.l+1]]),!s||!s.f?zo(e,t):i.push([s.n,s.f(e,t,r)]);return i}function che(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var uhe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function dhe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function qz(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function HP(e,t,r){var n=qz(e,t,r);return n=="#REF"?n:dhe(n,r)}function Mo(e,t,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,m=0,p,x="";if(!e[0]||!e[0][0])return"";for(var w=-1,v="",C=0,k=e[0].length;C<k;++C){var b=e[0][C];switch(b[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),w>=0){switch(e[0][w][1][0]){case 0:v=Ea(" ",e[0][w][1][1]);break;case 1:v=Ea("\r",e[0][w][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][w][1][0])}u=u+v,w=-1}o.push(u+uhe[b[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=ny(b[1][1],i,s),o.push(sy(d,a));break;case"PtgRefN":d=r?ny(b[1][1],r,s):b[1][1],o.push(sy(d,a));break;case"PtgRef3d":f=b[1][1],d=ny(b[1][2],i,s),x=HP(n,f,s),o.push(x+"!"+sy(d,a));break;case"PtgFunc":case"PtgFuncVar":var j=b[1][0],A=b[1][1];j||(j=0),j&=127;var F=j==0?[]:o.slice(-j);o.length-=j,A==="User"&&(A=F.shift()),o.push(A+"("+F.join(",")+")");break;case"PtgBool":o.push(b[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(b[1]);break;case"PtgNum":o.push(String(b[1]));break;case"PtgStr":o.push('"'+b[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(b[1]);break;case"PtgAreaN":p=vP(b[1][1],r?{s:r}:i,s),o.push(F3(p,s));break;case"PtgArea":p=vP(b[1][1],i,s),o.push(F3(p,s));break;case"PtgArea3d":f=b[1][1],p=b[1][2],x=HP(n,f,s),o.push(x+"!"+F3(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=b[1][2];var D=(n.names||[])[m-1]||(n[0]||[])[m],M=D?D.Name:"SH33TJSNAME"+String(m);M&&M.slice(0,6)=="_xlfn."&&!s.xlfn&&(M=M.slice(6)),o.push(M);break;case"PtgNameX":var O=b[1][1];m=b[1][2];var L;if(s.biff<=5)O<0&&(O=-O),n[O]&&(L=n[O][m]);else{var W="";if(((n[O]||[])[0]||[])[0]==14849||(((n[O]||[])[0]||[])[0]==1025?n[O][m]&&n[O][m].itab>0&&(W=n.SheetNames[n[O][m].itab-1]+"!"):W=n.SheetNames[m-1]+"!"),n[O]&&n[O][m])W+=n[O][m].Name;else if(n[0]&&n[0][m])W+=n[0][m].Name;else{var re=(qz(n,O,s)||"").split(";;");re[m-1]?W=re[m-1]:W+="SH33TJSERRX"}o.push(W);break}L||(L={Name:"SH33TJSERRY"}),o.push(L.Name);break;case"PtgParen":var ie="(",xe=")";if(w>=0){switch(v="",e[0][w][1][0]){case 2:ie=Ea(" ",e[0][w][1][1])+ie;break;case 3:ie=Ea("\r",e[0][w][1][1])+ie;break;case 4:xe=Ea(" ",e[0][w][1][1])+xe;break;case 5:xe=Ea("\r",e[0][w][1][1])+xe;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][w][1][0])}w=-1}o.push(ie+o.pop()+xe);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:b[1][1],r:b[1][0]};var de={c:r.c,r:r.r};if(n.sharedf[nn(d)]){var fe=n.sharedf[nn(d)];o.push(Mo(fe,i,de,n,s))}else{var H=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Mo(u[1],i,de,n,s)),H=!0;break}H||o.push(b[1])}break;case"PtgArray":o.push("{"+che(b[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=C;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+b[1].idx+"[#"+b[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(b));default:throw new Error("Unrecognized Formula Token: "+String(b))}var Q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&w>=0&&Q.indexOf(e[0][C][0])==-1){b=e[0][w];var U=!0;switch(b[1][0]){case 4:U=!1;case 0:v=Ea(" ",b[1][1]);break;case 5:U=!1;case 1:v=Ea("\r",b[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+b[1][0])}o.push((U?v:"")+o.pop()+(U?"":v)),w=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function fhe(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],zo(e,t-2)];var o=Av(e,i,r);return t!==i+s&&(a=Ev(e,t-i-s,o,r)),e.l=n,[o,a]}function hhe(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],zo(e,t-2)];var o=Av(e,i,r);return t!==i+s&&(a=Ev(e,t-i-s,o,r)),e.l=n,[o,a]}function mhe(e,t,r,n){var s=e.l+t,a=Av(e,n,r),i;return s!==e.l&&(i=Ev(e,s-e.l,a,r)),[a,i]}function ghe(e,t,r){var n=e.l+t,s,a=e.read_shift(2),i=Av(e,a,r);return a==65535?[[],zo(e,t-2)]:(t!==a+2&&(s=Ev(e,n-a-2,i,r)),[i,s])}function phe(e){var t;if(h0(e,e.l+6)!==65535)return[Do(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function xhe(e){if(e==null){var t=Ht(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Lm(e);return Lm(0)}function L3(e,t,r){var n=e.l+t,s=Ad(e);r.biff==2&&++e.l;var a=phe(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=hhe(e,n-e.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function yhe(e,t,r,n,s){var a=$m(t,r,s),i=xhe(e.v),o=Ht(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Ht(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=zi([a,i,o,u]);return f}function S4(e,t,r){var n=e.read_shift(4),s=Av(e,n,r),a=e.read_shift(4),i=a>0?Ev(e,a,s,r):null;return[s,i]}var vhe=S4,k4=S4,whe=S4,bhe=S4,_he={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Kz={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},She={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function GP(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function khe(e){var t="of:="+e.replace(I7,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function B3(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function The(e){return e.replace(/\./,"!")}var iy={},hp={},oy=typeof Map<"u";function B7(e,t,r){var n=0,s=e.length;if(r){if(oy?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=oy?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(oy?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function T4(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Fo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=$y(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=ob(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function xm(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function yh(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,a=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){y0(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function Xz(e,t,r,n,s,a){try{n.cellNF&&(e.z=en[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ks(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(en[t]==null&&y0(_oe[t]||"General",t),e.t==="e")e.w=e.w||D0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Fy(e.v);else if(e.t==="d"){var i=bi(e.v);(i|0)===i?e.w=i.toString(10):e.w=Fy(i)}else{if(e.v===void 0)return"";e.w=Im(e.v,hp)}else e.t==="d"?e.w=Yc(t,bi(e.v),hp):e.w=Yc(t,e.v,hp)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=ib(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=ib(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function Che(e,t,r){if(e&&e["!ref"]){var n=es(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Nhe(e,t){var r=es(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Tn(r))}var Ehe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Ahe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,jhe=/<(?:\w:)?hyperlink [^>]*>/mg,Phe=/"(\w*:\w*)"/,Mhe=/<(?:\w:)?col\b[^>]*[\/]?>/g,Fhe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Ohe=/<(?:\w:)?pageMargins[^>]*\/>/g,Yz=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Dhe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Ihe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Rhe(e,t,r,n,s,a,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Ahe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var m=u.match(Yz);m?$7(m[0],o,s,r):(m=u.match(Dhe))&&Bhe(m[0],m[1]||"",o,s,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var x=u.slice(p,p+50).match(Phe);x&&Nhe(o,x[1])}var w=u.match(Ihe);w&&w[1]&&Qhe(w[1],s);var v=[];if(t.cellStyles){var C=u.match(Mhe);C&&qhe(v,C)}f&&tme(f[1],o,t,c,a,i);var k=d.match(Fhe);k&&(o["!autofilter"]=Xhe(k[0]));var b=[],j=d.match(Ehe);if(j)for(p=0;p!=j.length;++p)b[p]=es(j[p].slice(j[p].indexOf('"')+1));var A=d.match(jhe);A&&Hhe(o,A,n);var F=d.match(Ohe);if(F&&(o["!margins"]=Ghe(an(F[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Tn(c)),t.sheetRows>0&&o["!ref"]){var D=es(o["!ref"]);t.sheetRows<=+D.e.r&&(D.e.r=t.sheetRows-1,D.e.r>c.e.r&&(D.e.r=c.e.r),D.e.r<D.s.r&&(D.s.r=D.e.r),D.e.c>c.e.c&&(D.e.c=c.e.c),D.e.c<D.s.c&&(D.s.c=D.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Tn(D))}return v.length>0&&(o["!cols"]=v),b.length>0&&(o["!merges"]=b),o}function Lhe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Tn(e[r])+'"/>';return t+"</mergeCells>"}function $7(e,t,r,n){var s=an(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Zn(As(s.codeName)))}function Bhe(e,t,r,n,s){$7(e.slice(0,e.indexOf(">")),r,n,s)}function $he(e,t,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}a=!0,i.codeName=pd(Ts(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+wr("outlinePr",null,u)}!a&&!o||(s[s.length]=wr("sheetPr",o,i))}var zhe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Uhe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Whe(e){var t={sheet:1};return zhe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Uhe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=F7(e.password).toString(16).toUpperCase()),wr("sheetProtection",null,t)}function Hhe(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var a=an(As(t[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+Zn(a.location))):(a.Target="#"+Zn(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=es(a.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=nn({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function Ghe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Vhe(e){return xm(e),wr("pageMargins",null,e)}function qhe(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=an(t[n],!0);s.hidden&&(s.hidden=Gs(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,O7(s.width)),sh(s);a<=i;)e[a++]=Xs(s)}}function Khe(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=wr("col",null,T4(s,n)));return r[r.length]="</cols>",r.join("")}function Xhe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Yhe(e,t,r,n){var s=typeof e.ref=="string"?e.ref:Tn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=Cl(s);i.s.r==i.e.r&&(i.e.r=Cl(t["!ref"]).e.r,s=Tn(i));for(var o=0;o<a.length;++o){var c=a[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),wr("autoFilter",null,{ref:s})}var Jhe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Qhe(e,t){t.Views||(t.Views=[{}]),(e.match(Jhe)||[]).forEach(function(r,n){var s=an(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Gs(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function Zhe(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),wr("sheetViews",wr("sheetView",null,s),{})}function eme(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",a=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=D0[e.v];break;case"d":n&&n.cellDates?s=Ks(e.v,-1).toISOString():(e=Xs(e),e.t="n",s=""+(e.v=bi(Ks(e.v)))),typeof e.z>"u"&&(e.z=en[14]);break;default:s=e.v;break}var o=uo("v",Ts(s)),c={r:t},u=yh(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=uo("v",""+B7(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=a&&(e.t=a,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=wr("f",Ts(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),wr("c",o,c)}var tme=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Oy("v"),i=Oy("f");return function(c,u,d,f,m,p){for(var x=0,w="",v=[],C=[],k=0,b=0,j=0,A="",F,D,M=0,O=0,L,W,re=0,ie=0,xe=Array.isArray(p.CellXf),de,fe=[],H=[],Q=Array.isArray(u),U=[],V={},X=!1,z=!!d.sheetStubs,K=c.split(t),te=0,se=K.length;te!=se;++te){w=K[te].trim();var pe=w.length;if(pe!==0){var oe=0;e:for(x=0;x<pe;++x)switch(w[x]){case">":if(w[x-1]!="/"){++x;break e}if(d&&d.cellStyles){if(D=an(w.slice(oe,x),!0),M=D.r!=null?parseInt(D.r,10):M+1,O=-1,d.sheetRows&&d.sheetRows<M)continue;V={},X=!1,D.ht&&(X=!0,V.hpt=parseFloat(D.ht),V.hpx=Np(V.hpt)),D.hidden=="1"&&(X=!0,V.hidden=!0),D.outlineLevel!=null&&(X=!0,V.level=+D.outlineLevel),X&&(U[M-1]=V)}break;case"<":oe=x;break}if(oe>=x)break;if(D=an(w.slice(oe,x),!0),M=D.r!=null?parseInt(D.r,10):M+1,O=-1,!(d.sheetRows&&d.sheetRows<M)){f.s.r>M-1&&(f.s.r=M-1),f.e.r<M-1&&(f.e.r=M-1),d&&d.cellStyles&&(V={},X=!1,D.ht&&(X=!0,V.hpt=parseFloat(D.ht),V.hpx=Np(V.hpt)),D.hidden=="1"&&(X=!0,V.hidden=!0),D.outlineLevel!=null&&(X=!0,V.level=+D.outlineLevel),X&&(U[M-1]=V)),v=w.slice(x).split(e);for(var ye=0;ye!=v.length&&v[ye].trim().charAt(0)=="<";++ye);for(v=v.slice(ye),x=0;x!=v.length;++x)if(w=v[x].trim(),w.length!==0){if(C=w.match(r),k=x,b=0,j=0,w="<c "+(w.slice(0,1)=="<"?">":"")+w,C!=null&&C.length===2){for(k=0,A=C[1],b=0;b!=A.length&&!((j=A.charCodeAt(b)-64)<1||j>26);++b)k=26*k+j;--k,O=k}else++O;for(b=0;b!=w.length&&w.charCodeAt(b)!==62;++b);if(++b,D=an(w.slice(0,b),!0),D.r||(D.r=nn({r:M-1,c:O})),A=w.slice(b),F={t:""},(C=A.match(a))!=null&&C[1]!==""&&(F.v=Zn(C[1])),d.cellFormula){if((C=A.match(i))!=null&&C[1]!==""){if(F.f=Zn(As(C[1])).replace(/\r\n/g,`
`),d.xlfn||(F.f=zP(F.f)),C[0].indexOf('t="array"')>-1)F.F=(A.match(s)||[])[1],F.F.indexOf(":")>-1&&fe.push([es(F.F),F.F]);else if(C[0].indexOf('t="shared"')>-1){W=an(C[0]);var we=Zn(As(C[1]));d.xlfn||(we=zP(we)),H[parseInt(W.si,10)]=[W,we,D.r]}}else(C=A.match(/<f[^>]*\/>/))&&(W=an(C[0]),H[W.si]&&(F.f=J0e(H[W.si][1],H[W.si][2],D.r)));var Se=pa(D.r);for(b=0;b<fe.length;++b)Se.r>=fe[b][0].s.r&&Se.r<=fe[b][0].e.r&&Se.c>=fe[b][0].s.c&&Se.c<=fe[b][0].e.c&&(F.F=fe[b][1])}if(D.t==null&&F.v===void 0)if(F.f||F.F)F.v=0,F.t="n";else if(z)F.t="z";else continue;else F.t=D.t||"n";switch(f.s.c>O&&(f.s.c=O),f.e.c<O&&(f.e.c=O),F.t){case"n":if(F.v==""||F.v==null){if(!z)continue;F.t="z"}else F.v=parseFloat(F.v);break;case"s":if(typeof F.v>"u"){if(!z)continue;F.t="z"}else L=iy[parseInt(F.v,10)],F.v=L.t,F.r=L.r,d.cellHTML&&(F.h=L.h);break;case"str":F.t="s",F.v=F.v!=null?As(F.v):"",d.cellHTML&&(F.h=y7(F.v));break;case"inlineStr":C=A.match(n),F.t="s",C!=null&&(L=M7(C[1]))?(F.v=L.t,d.cellHTML&&(F.h=L.h)):F.v="";break;case"b":F.v=Gs(F.v);break;case"d":d.cellDates?F.v=Ks(F.v,1):(F.v=bi(Ks(F.v,1)),F.t="n");break;case"e":(!d||d.cellText!==!1)&&(F.w=F.v),F.v=Q$[F.v];break}if(re=ie=0,de=null,xe&&D.s!==void 0&&(de=p.CellXf[D.s],de!=null&&(de.numFmtId!=null&&(re=de.numFmtId),d.cellStyles&&de.fillId!=null&&(ie=de.fillId))),Xz(F,re,ie,d,m,p),d.cellDates&&xe&&F.t=="n"&&Qp(en[re])&&(F.t="d",F.v=b4(F.v)),D.cm&&d.xlmeta){var Ie=(d.xlmeta.Cell||[])[+D.cm-1];Ie&&Ie.type=="XLDAPR"&&(F.D=!0)}if(Q){var me=pa(D.r);u[me.r]||(u[me.r]=[]),u[me.r][me.c]=F}else u[D.r]=F}}}}U.length>0&&(u["!rows"]=U)}})();function rme(e,t,r,n){var s=[],a=[],i=es(e["!ref"]),o="",c,u="",d=[],f=0,m=0,p=e["!rows"],x=Array.isArray(e),w={r:u},v,C=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=ga(m);for(f=i.s.r;f<=i.e.r;++f){for(a=[],u=Xa(f),m=i.s.c;m<=i.e.c;++m){c=d[m]+u;var k=x?(e[f]||[])[m]:e[c];k!==void 0&&(o=eme(k,c,e,t))!=null&&a.push(o)}(a.length>0||p&&p[f])&&(w={r:u},p&&p[f]&&(v=p[f],v.hidden&&(w.hidden=1),C=-1,v.hpx?C=zy(v.hpx):v.hpt&&(C=v.hpt),C>-1&&(w.ht=C,w.customHeight=1),v.level&&(w.outlineLevel=v.level)),s[s.length]=wr("row",a.join(""),w))}if(p)for(;f<p.length;++f)p&&p[f]&&(w={r:f+1},v=p[f],v.hidden&&(w.hidden=1),C=-1,v.hpx?C=zy(v.hpx):v.hpt&&(C=v.hpt),C>-1&&(w.ht=C,w.customHeight=1),v.level&&(w.outlineLevel=v.level),s[s.length]=wr("row","",w));return s.join("")}function Jz(e,t,r,n){var s=[Ja,wr("worksheet",null,{xmlns:Jm[0],"xmlns:r":vi.r})],a=r.SheetNames[e],i=0,o="",c=r.Sheets[a];c==null&&(c={});var u=c["!ref"]||"A1",d=es(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Tn(d)}n||(n={}),c["!comments"]=[];var f=[];$he(c,r,e,t,s),s[s.length]=wr("dimension",null,{ref:u}),s[s.length]=Zhe(c,t,e,r),t.sheetFormat&&(s[s.length]=wr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=Khe(c,c["!cols"])),s[i=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=rme(c,t),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),c["!protect"]&&(s[s.length]=Whe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Yhe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=Lhe(c["!merges"]));var m=-1,p,x=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(w){w[1].Target&&(p={ref:w[0]},w[1].Target.charAt(0)!="#"&&(x=Ss(n,-1,Ts(w[1].Target).replace(/#.*$/,""),On.HLINK),p["r:id"]="rId"+x),(m=w[1].Target.indexOf("#"))>-1&&(p.location=Ts(w[1].Target.slice(m+1))),w[1].Tooltip&&(p.tooltip=Ts(w[1].Tooltip)),s[s.length]=wr("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=Vhe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=uo("ignoredErrors",wr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(x=Ss(n,-1,"../drawings/drawing"+(e+1)+".xml",On.DRAW),s[s.length]=wr("drawing",null,{"r:id":"rId"+x}),c["!drawing"]=f),c["!comments"].length>0&&(x=Ss(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",On.VML),s[s.length]=wr("legacyDrawing",null,{"r:id":"rId"+x}),c["!legacy"]=x),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function nme(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function sme(e,t,r){var n=Ht(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=zy(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,m=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var x=Array.isArray(r)?(r[u.r]||[])[u.c]:r[nn(u)];x&&(f<0&&(f=p),m=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,m))}var w=n.l;return n.l=c,n.write_shift(4,o),n.l=w,n.length>n.l?n.slice(0,n.l):n}function ame(e,t,r,n){var s=sme(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&ir(e,0,s)}var ime=tg,ome=t1;function lme(){}function cme(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=fle(e),r}function ume(e,t,r){r==null&&(r=Ht(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return nb({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),q$(e,r),r.slice(0,r.l)}function dme(e){var t=tu(e);return[t]}function fme(e,t,r){return r==null&&(r=Ht(8)),Qm(t,r)}function hme(e){var t=Zm(e);return[t]}function mme(e,t,r){return r==null&&(r=Ht(4)),eg(t,r)}function gme(e){var t=tu(e),r=e.read_shift(1);return[t,r,"b"]}function pme(e,t,r){return r==null&&(r=Ht(9)),Qm(t,r),r.write_shift(1,e.v?1:0),r}function xme(e){var t=Zm(e),r=e.read_shift(1);return[t,r,"b"]}function yme(e,t,r){return r==null&&(r=Ht(5)),eg(t,r),r.write_shift(1,e.v?1:0),r}function vme(e){var t=tu(e),r=e.read_shift(1);return[t,r,"e"]}function wme(e,t,r){return r==null&&(r=Ht(9)),Qm(t,r),r.write_shift(1,e.v),r}function bme(e){var t=Zm(e),r=e.read_shift(1);return[t,r,"e"]}function _me(e,t,r){return r==null&&(r=Ht(8)),eg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Sme(e){var t=tu(e),r=e.read_shift(4);return[t,r,"s"]}function kme(e,t,r){return r==null&&(r=Ht(12)),Qm(t,r),r.write_shift(4,t.v),r}function Tme(e){var t=Zm(e),r=e.read_shift(4);return[t,r,"s"]}function Cme(e,t,r){return r==null&&(r=Ht(8)),eg(t,r),r.write_shift(4,t.v),r}function Nme(e){var t=tu(e),r=Do(e);return[t,r,"n"]}function Eme(e,t,r){return r==null&&(r=Ht(16)),Qm(t,r),Lm(e.v,r),r}function Qz(e){var t=Zm(e),r=Do(e);return[t,r,"n"]}function Ame(e,t,r){return r==null&&(r=Ht(12)),eg(t,r),Lm(e.v,r),r}function jme(e){var t=tu(e),r=N7(e);return[t,r,"n"]}function Pme(e,t,r){return r==null&&(r=Ht(12)),Qm(t,r),K$(e.v,r),r}function Mme(e){var t=Zm(e),r=N7(e);return[t,r,"n"]}function Fme(e,t,r){return r==null&&(r=Ht(8)),eg(t,r),K$(e.v,r),r}function Ome(e){var t=tu(e),r=k7(e);return[t,r,"is"]}function Dme(e){var t=tu(e),r=Bo(e);return[t,r,"str"]}function Ime(e,t,r){return r==null&&(r=Ht(12+4*e.v.length)),Qm(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Rme(e){var t=Zm(e),r=Bo(e);return[t,r,"str"]}function Lme(e,t,r){return r==null&&(r=Ht(8+4*e.v.length)),eg(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function Bme(e,t,r){var n=e.l+t,s=tu(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"b"];if(r.cellFormula){e.l+=2;var o=k4(e,n-e.l,r);i[3]=Mo(o,null,s,r.supbooks,r)}else e.l=n;return i}function $me(e,t,r){var n=e.l+t,s=tu(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"e"];if(r.cellFormula){e.l+=2;var o=k4(e,n-e.l,r);i[3]=Mo(o,null,s,r.supbooks,r)}else e.l=n;return i}function zme(e,t,r){var n=e.l+t,s=tu(e);s.r=r["!row"];var a=Do(e),i=[s,a,"n"];if(r.cellFormula){e.l+=2;var o=k4(e,n-e.l,r);i[3]=Mo(o,null,s,r.supbooks,r)}else e.l=n;return i}function Ume(e,t,r){var n=e.l+t,s=tu(e);s.r=r["!row"];var a=Bo(e),i=[s,a,"str"];if(r.cellFormula){e.l+=2;var o=k4(e,n-e.l,r);i[3]=Mo(o,null,s,r.supbooks,r)}else e.l=n;return i}var Wme=tg,Hme=t1;function Gme(e,t){return t==null&&(t=Ht(4)),t.write_shift(4,e),t}function Vme(e,t){var r=e.l+t,n=tg(e),s=T7(e),a=Bo(e),i=Bo(e),o=Bo(e);e.l=r;var c={rfx:n,relId:s,loc:a,display:o};return i&&(c.Tooltip=i),c}function qme(e,t){var r=Ht(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));t1({s:pa(e[0]),e:pa(e[0])},r),C7("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return Wi(s||"",r),Wi(e[1].Tooltip||"",r),Wi("",r),r.slice(0,r.l)}function Kme(){}function Xme(e,t,r){var n=e.l+t,s=X$(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=vhe(e,n-e.l,r);i[1]=o}else e.l=n;return i}function Yme(e,t,r){var n=e.l+t,s=tg(e),a=[s];if(r.cellFormula){var i=bhe(e,n-e.l,r);a[1]=i,e.l=n}else e.l=n;return a}function Jme(e,t,r){r==null&&(r=Ht(18));var n=T4(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var Zz=["left","right","top","bottom","header","footer"];function Qme(e){var t={};return Zz.forEach(function(r){t[r]=Do(e)}),t}function Zme(e,t){return t==null&&(t=Ht(48)),xm(e),Zz.forEach(function(r){Lm(e[r],t)}),t}function ege(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function tge(e,t,r){r==null&&(r=Ht(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function rge(e){var t=Ht(24);return t.write_shift(4,4),t.write_shift(4,1),t1(e,t),t}function nge(e,t){return t==null&&(t=Ht(66)),t.write_shift(2,e.password?F7(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function sge(){}function age(){}function ige(e,t,r,n,s,a,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,m=!1,p,x,w,v,C,k,b,j,A,F=[];o.biff=12,o["!row"]=0;var D=0,M=!1,O=[],L={},W=o.supbooks||s.supbooks||[[]];if(W.sharedf=L,W.arrayf=O,W.SheetNames=s.SheetNames||s.Sheets.map(function(Q){return Q.name}),!o.supbooks&&(o.supbooks=W,s.Names))for(var re=0;re<s.Names.length;++re)W[0][re+1]=s.Names[re];var ie=[],xe=[],de=!1;Uy[16]={n:"BrtShortReal",f:Qz};var fe;if(O0(e,function(U,V,X){if(!m)switch(X){case 148:u=U;break;case 0:p=U,o.sheetRows&&o.sheetRows<=p.r&&(m=!0),j=Xa(v=p.r),o["!row"]=p.r,(U.hidden||U.hpt||U.level!=null)&&(U.hpt&&(U.hpx=Np(U.hpt)),xe[U.r]=U);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(x={t:U[2]},U[2]){case"n":x.v=U[1];break;case"s":b=iy[U[1]],x.v=b.t,x.r=b.r;break;case"b":x.v=!!U[1];break;case"e":x.v=U[1],o.cellText!==!1&&(x.w=D0[x.v]);break;case"str":x.t="s",x.v=U[1];break;case"is":x.t="s",x.v=U[1].t;break}if((w=i.CellXf[U[0].iStyleRef])&&Xz(x,w.numFmtId,null,o,a,i),C=U[0].c==-1?C+1:U[0].c,o.dense?(c[v]||(c[v]=[]),c[v][C]=x):c[ga(C)+j]=x,o.cellFormula){for(M=!1,D=0;D<O.length;++D){var z=O[D];p.r>=z[0].s.r&&p.r<=z[0].e.r&&C>=z[0].s.c&&C<=z[0].e.c&&(x.F=Tn(z[0]),M=!0)}!M&&U.length>3&&(x.f=U[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>C&&(d.s.c=C),d.e.r<p.r&&(d.e.r=p.r),d.e.c<C&&(d.e.c=C),o.cellDates&&w&&x.t=="n"&&Qp(en[w.numFmtId])){var K=nm(x.v);K&&(x.t="d",x.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}fe&&(fe.type=="XLDAPR"&&(x.D=!0),fe=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;x={t:"z",v:void 0},C=U[0].c==-1?C+1:U[0].c,o.dense?(c[v]||(c[v]=[]),c[v][C]=x):c[ga(C)+j]=x,d.s.r>p.r&&(d.s.r=p.r),d.s.c>C&&(d.s.c=C),d.e.r<p.r&&(d.e.r=p.r),d.e.c<C&&(d.e.c=C),fe&&(fe.type=="XLDAPR"&&(x.D=!0),fe=void 0);break;case 176:F.push(U);break;case 49:fe=((o.xlmeta||{}).Cell||[])[U-1];break;case 494:var te=n["!id"][U.relId];for(te?(U.Target=te.Target,U.loc&&(U.Target+="#"+U.loc),U.Rel=te):U.relId==""&&(U.Target="#"+U.loc),v=U.rfx.s.r;v<=U.rfx.e.r;++v)for(C=U.rfx.s.c;C<=U.rfx.e.c;++C)o.dense?(c[v]||(c[v]=[]),c[v][C]||(c[v][C]={t:"z",v:void 0}),c[v][C].l=U):(k=nn({c:C,r:v}),c[k]||(c[k]={t:"z",v:void 0}),c[k].l=U);break;case 426:if(!o.cellFormula)break;O.push(U),A=o.dense?c[v][C]:c[ga(C)+j],A.f=Mo(U[1],d,{r:p.r,c:C},W,o),A.F=Tn(U[0]);break;case 427:if(!o.cellFormula)break;L[nn(U[0].s)]=U[1],A=o.dense?c[v][C]:c[ga(C)+j],A.f=Mo(U[1],d,{r:p.r,c:C},W,o);break;case 60:if(!o.cellStyles)break;for(;U.e>=U.s;)ie[U.e--]={width:U.w/256,hidden:!!(U.flags&1),level:U.level},de||(de=!0,O7(U.w/256)),sh(ie[U.e+1]);break;case 161:c["!autofilter"]={ref:Tn(U)};break;case 476:c["!margins"]=U;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),U.name&&(s.Sheets[r].CodeName=U.name),(U.above||U.left)&&(c["!outline"]={above:U.above,left:U.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),U.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!V.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+X.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Tn(u||d)),o.sheetRows&&c["!ref"]){var H=es(c["!ref"]);o.sheetRows<=+H.e.r&&(H.e.r=o.sheetRows-1,H.e.r>d.e.r&&(H.e.r=d.e.r),H.e.r<H.s.r&&(H.s.r=H.e.r),H.e.c>d.e.c&&(H.e.c=d.e.c),H.e.c<H.s.c&&(H.s.c=H.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Tn(H))}return F.length>0&&(c["!merges"]=F),ie.length>0&&(c["!cols"]=ie),xe.length>0&&(c["!rows"]=xe),c}function oge(e,t,r,n,s,a,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Xs(t),t.z=t.z||en[14],t.v=bi(Ks(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=yh(s.cellXfs,t,s),t.l&&a["!links"].push([nn(c),t.l]),t.c&&a["!comments"].push([nn(c),t.c]),t.t){case"s":case"str":return s.bookSST?(o=B7(s.Strings,t.v,s.revStrings),c.t="s",c.v=o,i?ir(e,18,Cme(t,c)):ir(e,7,kme(t,c))):(c.t="str",i?ir(e,17,Lme(t,c)):ir(e,6,Ime(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?ir(e,13,Fme(t,c)):ir(e,2,Pme(t,c)):i?ir(e,16,Ame(t,c)):ir(e,5,Eme(t,c)),!0;case"b":return c.t="b",i?ir(e,15,yme(t,c)):ir(e,4,pme(t,c)),!0;case"e":return c.t="e",i?ir(e,14,_me(t,c)):ir(e,3,wme(t,c)),!0}return i?ir(e,12,mme(t,c)):ir(e,1,fme(t,c)),!0}function lge(e,t,r,n){var s=es(t["!ref"]||"A1"),a,i="",o=[];ir(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=Xa(d),ame(e,t,s,d);var f=!1;if(d<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){d===s.s.r&&(o[m]=ga(m)),a=o[m]+i;var p=c?(t[d]||[])[m]:t[a];if(!p){f=!1;continue}f=oge(e,p,d,m,n,t,f)}}ir(e,146)}function cge(e,t){!t||!t["!merges"]||(ir(e,177,Gme(t["!merges"].length)),t["!merges"].forEach(function(r){ir(e,176,Hme(r))}),ir(e,178))}function uge(e,t){!t||!t["!cols"]||(ir(e,390),t["!cols"].forEach(function(r,n){r&&ir(e,60,Jme(n,r))}),ir(e,391))}function dge(e,t){!t||!t["!ref"]||(ir(e,648),ir(e,649,rge(es(t["!ref"]))),ir(e,650))}function fge(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=Ss(r,-1,n[1].Target.replace(/#.*$/,""),On.HLINK);ir(e,494,qme(n,s))}}),delete t["!links"]}function hge(e,t,r,n){if(t["!comments"].length>0){var s=Ss(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",On.VML);ir(e,551,C7("rId"+s)),t["!legacy"]=s}}function mge(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a=typeof s.ref=="string"?s.ref:Tn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Cl(a);o.s.r==o.e.r&&(o.e.r=Cl(t["!ref"]).e.r,a=Tn(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),ir(e,161,t1(es(a))),ir(e,162)}}function gge(e,t,r){ir(e,133),ir(e,137,tge(t,r)),ir(e,138),ir(e,134)}function pge(e,t){t["!protect"]&&ir(e,535,nge(t["!protect"]))}function xge(e,t,r,n){var s=Tl(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=es(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],ir(s,129),(r.vbaraw||i["!outline"])&&ir(s,147,ume(o,i["!outline"])),ir(s,148,ome(c)),gge(s,i,r.Workbook),uge(s,i),lge(s,i,e,t),pge(s,i),mge(s,i,r,e),cge(s,i),fge(s,i,n),i["!margins"]&&ir(s,476,Zme(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&dge(s,i),hge(s,i,e,n),ir(s,130),s.end()}function yge(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var s=Zn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,s,n]}function vge(e,t,r,n,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var m=yge(f);d.s.r=d.s.c=0,d.e.c=o,u=ga(o),m[0].forEach(function(p,x){i[u+Xa(x)]={t:"n",v:p,z:m[1]},c=x}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=Tn(d)),i}function wge(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(Yz);return o&&$7(o[0],a,s,r),(i=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function bge(e,t){e.l+=10;var r=Bo(e);return{name:r}}function _ge(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return O0(e,function(c,u,d){switch(d){case 550:a["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var z7=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Sge=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],kge=[],Tge=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function VP(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var a=t[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Gs(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function qP(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Gs(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function eU(e){qP(e.WBProps,z7),qP(e.CalcPr,Tge),VP(e.WBView,Sge),VP(e.Sheets,kge),hp.date1904=Gs(e.WBProps.date1904)}function Cge(e){return!e.Workbook||!e.Workbook.WBProps?"false":Gs(e.Workbook.WBProps.date1904)?"true":"false"}var Nge="][*?/\\".split("");function tU(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Nge.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Ege(e,t,r){e.forEach(function(n,s){tU(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[s]&&t[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Age(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Ege(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Che(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var jge=/<\w+:workbook/;function Pge(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(e.replace(Uo,function(c,u){var d=an(c);switch(Ed(d[0])){case"<?xml":break;case"<workbook":c.match(jge)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":z7.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Gs(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=As(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Zn(As(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=As(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Gs(d.hidden||"0")&&(a.Hidden=!0),i=u+c.length;break;case"</definedName>":a.Ref=Zn(As(e.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Jm.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return eU(r),r}function rU(e){var t=[Ja];t[t.length]=wr("workbook",null,{xmlns:Jm[0],"xmlns:r":vi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(z7.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=wr("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:Ts(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=wr("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=wr("definedName",Ts(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Mge(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=T6(e),r.name=Bo(e),r}function Fge(e,t){return t||(t=Ht(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),C7(e.strRelID,t),Wi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function Oge(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Bo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Dge(e,t){t||(t=Ht(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),q$(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Ige(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Rge(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=hle(e),i=whe(e,0,r),o=T7(e);e.l=n;var c={Name:a,Ptg:i};return s<268435455&&(c.Sheet=s),o&&(c.Comment=o),c}function Lge(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Uy[16]={n:"BrtFRTArchID$",f:Ige},O0(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Mo(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,a.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),eU(r),r.Names=a,r.supbooks=i,r}function Bge(e,t){ir(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};ir(e,156,Fge(s))}ir(e,144)}function $ge(e,t){t||(t=Ht(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Wi("SheetJS",t),Wi(Yw.version,t),Wi(Yw.version,t),Wi("7262",t),t.length>t.l?t.slice(0,t.l):t}function zge(e,t){t||(t=Ht(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Uge(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(ir(e,135),ir(e,158,zge(s)),ir(e,136))}}function Wge(e,t){var r=Tl();return ir(r,131),ir(r,128,$ge()),ir(r,153,Dge(e.Workbook&&e.Workbook.WBProps||null)),Uge(r,e),Bge(r,e),ir(r,132),r.end()}function Hge(e,t,r){return t.slice(-4)===".bin"?Lge(e,r):Pge(e,r)}function Gge(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?ige(e,n,r,s,a,i,o):Rhe(e,n,r,s,a,i,o)}function Vge(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?_ge(e,n,r,s,a):wge(e,n,r,s,a)}function qge(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?X0e():Y0e()}function Kge(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?q0e():K0e()}function Xge(e,t,r,n){return t.slice(-4)===".bin"?Hde(e,r,n):Mde(e,r,n)}function Yge(e,t,r){return Iz(e,r)}function Jge(e,t,r){return t.slice(-4)===".bin"?Jue(e,r):Kue(e,r)}function Qge(e,t,r){return t.slice(-4)===".bin"?U0e(e,r):F0e(e,r)}function Zge(e,t,r){return t.slice(-4)===".bin"?j0e(e):E0e(e)}function epe(e,t,r,n){return r.slice(-4)===".bin"?P0e(e,t,r,n):void 0}function tpe(e,t,r){return t.slice(-4)===".bin"?T0e(e,t,r):N0e(e,t,r)}function rpe(e,t,r){return(t.slice(-4)===".bin"?Wge:rU)(e)}function npe(e,t,r,n,s){return(t.slice(-4)===".bin"?xge:Jz)(e,r,n,s)}function spe(e,t,r){return(t.slice(-4)===".bin"?e0e:Oz)(e,r)}function ape(e,t,r){return(t.slice(-4)===".bin"?ede:Cz)(e,r)}function ipe(e,t,r){return(t.slice(-4)===".bin"?W0e:Bz)(e)}function ope(e){return(e.slice(-4)===".bin"?C0e:Rz)()}var nU=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,sU=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Su(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(nU),a,i,o,c;if(s)for(c=0;c!=s.length;++c)a=s[c].match(sU),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function lpe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(nU),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(sU),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var ly;function cpe(e,t){var r=ly[e]||Zn(e);return r==="General"?Im(t):Yc(r,t)}function upe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Gs(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Ks(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Zn(t)]=s}function dpe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||D0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Fy(e.v):e.w=Im(e.v):e.w=cpe(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=ly[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Qp(n)){var s=nm(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function fpe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=kde[n.Pattern]||n.Pattern)}e[t.ID]=t}function hpe(e,t,r,n,s,a,i,o,c,u){var d="General",f=n.StyleID,m={};u=u||{};var p=[],x=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&p.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Gs(e);break;case"String":n.t="s",n.r=uP(Zn(e)),n.v=e.indexOf("<")>-1?Zn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ks(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Zn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Q$[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=uP(t||e));break}if(dpe(n,d,u),u.cellFormula!==!1)if(n.Formula){var w=Zn(n.Formula);w.charCodeAt(0)==61&&(w=w.slice(1)),n.f=fp(w,s),delete n.Formula,n.ArrayRange=="RC"?n.F=fp("RC:RC",s):n.ArrayRange&&(n.F=fp(n.ArrayRange,s),c.push([es(n.F),n.F]))}else for(x=0;x<c.length;++x)s.r>=c[x][0].s.r&&s.r<=c[x][0].e.r&&s.c>=c[x][0].s.c&&s.c<=c[x][0].e.c&&(n.F=c[x][1]);u.cellStyles&&(p.forEach(function(v){!m.patternType&&v.patternType&&(m.patternType=v.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function mpe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function $3(e,t){var r=t||{};Zp();var n=zx(v7(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=As(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=Xs(r);return i.type="string",Cp.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Kt){s.indexOf("<"+Kt)>=0&&(a=!0)}),a)return Zpe(n,r);ly={"General Number":"General","General Date":en[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":en[15],"Short Date":en[14],"Long Time":en[19],"Medium Time":en[18],"Short Time":en[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:en[2],Standard:en[4],Percent:en[10],Scientific:en[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],m=r.dense?[]:{},p="",x={},w={},v=Su('<Data ss:Type="String">'),C=0,k=0,b=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},A={},F={},D="",M=0,O=[],L={},W={},re=0,ie=[],xe=[],de={},fe=[],H,Q=!1,U=[],V=[],X={},z=0,K=0,te={Sheets:[],WBProps:{date1904:!1}},se={};Iy.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var pe="";o=Iy.exec(n);)switch(o[3]=(pe=o[3]).toLowerCase()){case"data":if(pe=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?hpe(n.slice(C,o.index),D,v,c[c.length-1][0]=="comment"?de:x,{c:k,r:b},A,fe[k],w,U,r):(D="",v=Su(o[0]),C=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(xe.length>0&&(x.c=xe),(!r.sheetRows||r.sheetRows>b)&&x.v!==void 0&&(r.dense?(m[b]||(m[b]=[]),m[b][k]=x):m[ga(k)+Xa(b)]=x),x.HRef&&(x.l={Target:Zn(x.HRef)},x.HRefScreenTip&&(x.l.Tooltip=x.HRefScreenTip),delete x.HRef,delete x.HRefScreenTip),(x.MergeAcross||x.MergeDown)&&(z=k+(parseInt(x.MergeAcross,10)|0),K=b+(parseInt(x.MergeDown,10)|0),O.push({s:{c:k,r:b},e:{c:z,r:K}})),!r.sheetStubs)x.MergeAcross?k=z+1:++k;else if(x.MergeAcross||x.MergeDown){for(var oe=k;oe<=z;++oe)for(var ye=b;ye<=K;++ye)(oe>k||ye>b)&&(r.dense?(m[ye]||(m[ye]=[]),m[ye][oe]={t:"z"}):m[ga(oe)+Xa(ye)]={t:"z"});k=z+1}else++k;else x=lpe(o[0]),x.Index&&(k=+x.Index-1),k<j.s.c&&(j.s.c=k),k>j.e.c&&(j.e.c=k),o[0].slice(-2)==="/>"&&++k,xe=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(b<j.s.r&&(j.s.r=b),b>j.e.r&&(j.e.r=b),o[0].slice(-2)==="/>"&&(w=Su(o[0]),w.Index&&(b=+w.Index-1)),k=0,++b):(w=Su(o[0]),w.Index&&(b=+w.Index-1),X={},(w.AutoFitHeight=="0"||w.Height)&&(X.hpx=parseInt(w.Height,10),X.hpt=zy(X.hpx),V[b]=X),w.Hidden=="1"&&(X.hidden=!0,V[b]=X));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(m["!ref"]=Tn(j),r.sheetRows&&r.sheetRows<=j.e.r&&(m["!fullref"]=m["!ref"],j.e.r=r.sheetRows-1,m["!ref"]=Tn(j))),O.length&&(m["!merges"]=O),fe.length>0&&(m["!cols"]=fe),V.length>0&&(m["!rows"]=V),d[p]=m}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},b=k=0,c.push([o[3],!1]),u=Su(o[0]),p=Zn(u.Name),m=r.dense?[]:{},O=[],U=[],V=[],se={name:p,Hidden:0},te.Sheets.push(se);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),fe=[],Q=!1}break;case"style":o[1]==="/"?fpe(A,F,r):F=Su(o[0]);break;case"numberformat":F.nf=Zn(Su(o[0]).Format||"General"),ly[F.nf]&&(F.nf=ly[F.nf]);for(var we=0;we!=392&&en[we]!=F.nf;++we);if(we==392){for(we=57;we!=392;++we)if(en[we]==null){y0(F.nf,we);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(H=Su(o[0]),H.Hidden&&(H.hidden=!0,delete H.Hidden),H.Width&&(H.wpx=parseInt(H.Width,10)),!Q&&H.wpx>10){Q=!0,Fo=Mz;for(var Se=0;Se<fe.length;++Se)fe[Se]&&sh(fe[Se])}Q&&sh(H),fe[H.Index-1||fe.length]=H;for(var Ie=0;Ie<+H.Span;++Ie)fe[fe.length]=Xs(H);break;case"namedrange":if(o[1]==="/")break;te.Names||(te.Names=[]);var me=an(o[0]),_e={Name:me.Name,Ref:fp(me.RefersTo.slice(1),{r:0,c:0})};te.Sheets.length>0&&(_e.Sheet=te.Sheets.length-1),te.Names.push(_e);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?D+=n.slice(M,o.index):M=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;F.Interior=Su(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Lle(L,pe,n.slice(re,o.index)):re=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));mpe(de),xe.push(de)}else c.push([o[3],!1]),u=Su(o[0]),de={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var We=Su(o[0]);m["!autofilter"]={ref:fp(We.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return QP(n,r);var Ue=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ue=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ue=!1}break;case"excelworkbook":switch(o[3]){case"date1904":te.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ue=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Ue=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(re,o.index)){case"SheetHidden":se.Hidden=1;break;case"SheetVeryHidden":se.Hidden=2;break}else re=o.index+o[0].length;break;case"header":m["!margins"]||xm(m["!margins"]={},"xlml"),isNaN(+an(o[0]).Margin)||(m["!margins"].header=+an(o[0]).Margin);break;case"footer":m["!margins"]||xm(m["!margins"]={},"xlml"),isNaN(+an(o[0]).Margin)||(m["!margins"].footer=+an(o[0]).Margin);break;case"pagemargins":var St=an(o[0]);m["!margins"]||xm(m["!margins"]={},"xlml"),isNaN(+St.Top)||(m["!margins"].top=+St.Top),isNaN(+St.Left)||(m["!margins"].left=+St.Left),isNaN(+St.Right)||(m["!margins"].right=+St.Right),isNaN(+St.Bottom)||(m["!margins"].bottom=+St.Bottom);break;case"displayrighttoleft":te.Views||(te.Views=[]),te.Views[0]||(te.Views[0]={}),te.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ue=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ue=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ue=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ue=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ue=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ue=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ue=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ue=!1}break;case"smarttags":break;default:Ue=!1;break}if(Ue||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?upe(W,pe,ie,n.slice(re,o.index)):(ie=o,re=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Ze={};return!r.bookSheets&&!r.bookProps&&(Ze.Sheets=d),Ze.SheetNames=f,Ze.Workbook=te,Ze.SSF=Xs(en),Ze.Props=L,Ze.Custprops=W,Ze}function M6(e,t){switch(W7(t=t||{}),t.type||"base64"){case"base64":return $3(Jl(e),t);case"binary":case"buffer":case"file":return $3(e,t);case"array":return $3(ph(e),t)}}function gpe(e,t){var r=[];return e.Props&&r.push(Ble(e.Props,t)),e.Custprops&&r.push($le(e.Props,e.Custprops)),r.join("")}function ppe(){return""}function xpe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var a=[];a.push(wr("NumberFormat",null,{"ss:Format":Ts(en[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(wr("Style",a.join(""),i))}),wr("Styles",r.join(""))}function aU(e){return wr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+R7(e.Ref,{r:0,c:0})})}function ype(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(aU(s)))}return wr("Names",r.join(""))}function vpe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(aU(o)))}return a.join("")}function wpe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(wr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(wr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(wr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(wr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(uo("ProtectContents","True")),e["!protect"].objects&&s.push(uo("ProtectObjects","True")),e["!protect"].scenarios&&s.push(uo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(uo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(uo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":wr("WorksheetOptions",s.join(""),{xmlns:Wl.x})}function bpe(e){return e.map(function(t){var r=Uoe(t.t||""),n=wr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return wr("Comment",n,{"ss:Author":t.a})}).join("")}function _pe(e,t,r,n,s,a,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Ts(R7(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=pa(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Ts(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Ts(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",m="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",m=String(e.v);break;case"b":f="Boolean",m=e.v?"1":"0";break;case"e":f="Error",m=D0[e.v];break;case"d":f="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||en[14]);break;case"s":f="String",m=zoe(e.v||"");break}var p=yh(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var x=e.v!=null?m:"",w=e.t=="z"?"":'<Data ss:Type="'+f+'">'+x+"</Data>";return(e.c||[]).length>0&&(w+=bpe(e.c)),wr("Cell",w,o)}function Spe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Np(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function kpe(e,t,r,n){if(!e["!ref"])return"";var s=es(e["!ref"]),a=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,C){sh(v);var k=!!v.width,b=T4(C,v),j={"ss:Index":C+1};k&&(j["ss:Width"]=By(b.width)),v.hidden&&(j["ss:Hidden"]="1"),o.push(wr("Column",null,j))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[Spe(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var m=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>f)&&!(a[i].s.r>u)&&!(a[i].e.c<f)&&!(a[i].e.r<u)){(a[i].s.c!=f||a[i].s.r!=u)&&(m=!0);break}if(!m){var p={r:u,c:f},x=nn(p),w=c?(e[u]||[])[f]:e[x];d.push(_pe(w,x,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Tpe(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],i=a?vpe(a,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?kpe(a,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(wpe(a,t,e,r)),n.join("")}function Cpe(e,t){t||(t={}),e.SSF||(e.SSF=Xs(en)),e.SSF&&(Zp(),y4(e.SSF),t.revssf=w4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],yh(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(gpe(e,t)),r.push(ppe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(wr("Worksheet",Tpe(n,t,e),{"ss:Name":Ts(e.SheetNames[n])}));return r[2]=xpe(e,t),r[3]=ype(e),Ja+wr("Workbook",r.join(""),{xmlns:Wl.ss,"xmlns:o":Wl.o,"xmlns:x":Wl.x,"xmlns:ss":Wl.ss,"xmlns:dt":Wl.dt,"xmlns:html":Wl.html})}function Npe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=yle(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=vle(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Epe=[60,1084,2066,2165,2175];function Ape(e,t,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var c=h0(r,r.l),u=F6[c],d=0;u!=null&&Epe.indexOf(c)>-1;)a=h0(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=F6[c=h0(r,r.l)];var f=zi(i);io(f,0);var m=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(m),m+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,s)}function ld(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=en[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||D0[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Fy(e.v):e.w=Im(e.v):e.w=Yc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&Qp(en[n]||String(n))){var s=nm(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function H2(e,t,r){return{v:e,ixfe:t,t:r}}function jpe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},a={},i={},o=null,c=[],u="",d={},f,m="",p,x,w,v,C={},k=[],b,j,A=[],F=[],D={Sheets:[],WBProps:{date1904:!1},Views:[{}]},M={},O=function(mt){return mt<8?mm[mt]:mt<64&&F[mt-8]||mm[mt]},L=function(mt,ht,Ot){var nt=ht.XF.data;if(!(!nt||!nt.patternType||!Ot||!Ot.cellStyles)){ht.s={},ht.s.patternType=nt.patternType;var sr;(sr=Ly(O(nt.icvFore)))&&(ht.s.fgColor={rgb:sr}),(sr=Ly(O(nt.icvBack)))&&(ht.s.bgColor={rgb:sr})}},W=function(mt,ht,Ot){if(!(X>1)&&!(Ot.sheetRows&&mt.r>=Ot.sheetRows)){if(Ot.cellStyles&&ht.XF&&ht.XF.data&&L(mt,ht,Ot),delete ht.ixfe,delete ht.XF,f=mt,m=nn(mt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),mt.r<i.s.r&&(i.s.r=mt.r),mt.c<i.s.c&&(i.s.c=mt.c),mt.r+1>i.e.r&&(i.e.r=mt.r+1),mt.c+1>i.e.c&&(i.e.c=mt.c+1),Ot.cellFormula&&ht.f){for(var nt=0;nt<k.length;++nt)if(!(k[nt][0].s.c>mt.c||k[nt][0].s.r>mt.r)&&!(k[nt][0].e.c<mt.c||k[nt][0].e.r<mt.r)){ht.F=Tn(k[nt][0]),(k[nt][0].s.c!=mt.c||k[nt][0].s.r!=mt.r)&&delete ht.f,ht.f&&(ht.f=""+Mo(k[nt][1],i,mt,U,re));break}}Ot.dense?(s[mt.r]||(s[mt.r]=[]),s[mt.r][mt.c]=ht):s[m]=ht}},re={enc:!1,sbcch:0,snames:[],sharedf:C,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(re.password=t.password);var ie,xe=[],de=[],fe=[],H=[],Q=!1,U=[];U.SheetNames=re.snames,U.sharedf=re.sharedf,U.arrayf=re.arrayf,U.names=[],U.XTI=[];var V=0,X=0,z=0,K=[],te=[],se;re.codepage=1200,Au(1200);for(var pe=!1;e.l<e.length-1;){var oe=e.l,ye=e.read_shift(2);if(ye===0&&V===10)break;var we=e.l===e.length?0:e.read_shift(2),Se=F6[ye];if(Se&&Se.f){if(t.bookSheets&&V===133&&ye!==133)break;if(V=ye,Se.r===2||Se.r==12){var Ie=e.read_shift(2);if(we-=2,!re.enc&&Ie!==ye&&((Ie&255)<<8|Ie>>8)!==ye)throw new Error("rt mismatch: "+Ie+"!="+ye);Se.r==12&&(e.l+=10,we-=10)}var me={};if(ye===10?me=Se.f(e,we,re):me=Ape(ye,Se,e,we,re),X==0&&[9,521,1033,2057].indexOf(V)===-1)continue;switch(ye){case 34:r.opts.Date1904=D.WBProps.date1904=me;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(re.enc||(e.l=0),re.enc=me,!t.password)throw new Error("File is password-protected");if(me.valid==null)throw new Error("Encryption scheme unsupported");if(!me.valid)throw new Error("Password is incorrect");break;case 92:re.lastuser=me;break;case 66:var _e=Number(me);switch(_e){case 21010:_e=1200;break;case 32768:_e=1e4;break;case 32769:_e=1252;break}Au(re.codepage=_e),pe=!0;break;case 317:re.rrtabid=me;break;case 25:re.winlocked=me;break;case 439:r.opts.RefreshAll=me;break;case 12:r.opts.CalcCount=me;break;case 16:r.opts.CalcDelta=me;break;case 17:r.opts.CalcIter=me;break;case 13:r.opts.CalcMode=me;break;case 14:r.opts.CalcPrecision=me;break;case 95:r.opts.CalcSaveRecalc=me;break;case 15:re.CalcRefMode=me;break;case 2211:r.opts.FullCalc=me;break;case 129:me.fDialog&&(s["!type"]="dialog"),me.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),me.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:A.push(me);break;case 430:U.push([me]),U[U.length-1].XTI=[];break;case 35:case 547:U[U.length-1].push(me);break;case 24:case 536:se={Name:me.Name,Ref:Mo(me.rgce,i,null,U,re)},me.itab>0&&(se.Sheet=me.itab-1),U.names.push(se),U[0]||(U[0]=[],U[0].XTI=[]),U[U.length-1].push(me),me.Name=="_xlnm._FilterDatabase"&&me.itab>0&&me.rgce&&me.rgce[0]&&me.rgce[0][0]&&me.rgce[0][0][0]=="PtgArea3d"&&(te[me.itab-1]={ref:Tn(me.rgce[0][0][1][2])});break;case 22:re.ExternCount=me;break;case 23:U.length==0&&(U[0]=[],U[0].XTI=[]),U[U.length-1].XTI=U[U.length-1].XTI.concat(me),U.XTI=U.XTI.concat(me);break;case 2196:if(re.biff<8)break;se!=null&&(se.Comment=me[1]);break;case 18:s["!protect"]=me;break;case 19:me!==0&&re.WTF&&console.error("Password verifier: "+me);break;case 133:a[me.pos]=me,re.snames.push(me.name);break;case 10:{if(--X)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=Tn(i),t.sheetRows&&t.sheetRows<=i.e.r){var We=i.e.r;i.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Tn(i),i.e.r=We}i.e.r++,i.e.c++}xe.length>0&&(s["!merges"]=xe),de.length>0&&(s["!objects"]=de),fe.length>0&&(s["!cols"]=fe),H.length>0&&(s["!rows"]=H),D.Sheets.push(M)}u===""?d=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(re.biff===8&&(re.biff={9:2,521:3,1033:4}[ye]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[me.BIFFVer]||8),re.biffguess=me.BIFFVer==0,me.BIFFVer==0&&me.dt==4096&&(re.biff=5,pe=!0,Au(re.codepage=28591)),re.biff==8&&me.BIFFVer==0&&me.dt==16&&(re.biff=2),X++)break;if(s=t.dense?[]:{},re.biff<8&&!pe&&(pe=!0,Au(re.codepage=t.codepage||1252)),re.biff<5||me.BIFFVer==0&&me.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Ue={pos:e.l-we,name:u};a[Ue.pos]=Ue,re.snames.push(u)}else u=(a[oe]||{name:""}).name;me.dt==32&&(s["!type"]="chart"),me.dt==64&&(s["!type"]="macro"),xe=[],de=[],re.arrayf=k=[],fe=[],H=[],Q=!1,M={Hidden:(a[oe]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[me.r]||[])[me.c]:s[nn({c:me.c,r:me.r})])&&++me.c,b={ixfe:me.ixfe,XF:A[me.ixfe]||{},v:me.val,t:"n"},z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W({c:me.c,r:me.r},b,t);break;case 5:case 517:b={ixfe:me.ixfe,XF:A[me.ixfe],v:me.val,t:me.t},z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W({c:me.c,r:me.r},b,t);break;case 638:b={ixfe:me.ixfe,XF:A[me.ixfe],v:me.rknum,t:"n"},z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W({c:me.c,r:me.r},b,t);break;case 189:for(var St=me.c;St<=me.C;++St){var Ze=me.rkrec[St-me.c][0];b={ixfe:Ze,XF:A[Ze],v:me.rkrec[St-me.c][1],t:"n"},z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W({c:St,r:me.r},b,t)}break;case 6:case 518:case 1030:{if(me.val=="String"){o=me;break}if(b=H2(me.val,me.cell.ixfe,me.tt),b.XF=A[b.ixfe],t.cellFormula){var Kt=me.formula;if(Kt&&Kt[0]&&Kt[0][0]&&Kt[0][0][0]=="PtgExp"){var yt=Kt[0][0][1][0],Rt=Kt[0][0][1][1],At=nn({r:yt,c:Rt});C[At]?b.f=""+Mo(me.formula,i,me.cell,U,re):b.F=((t.dense?(s[yt]||[])[Rt]:s[At])||{}).F}else b.f=""+Mo(me.formula,i,me.cell,U,re)}z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W(me.cell,b,t),o=me}break;case 7:case 519:if(o)o.val=me,b=H2(me,o.cell.ixfe,"s"),b.XF=A[b.ixfe],t.cellFormula&&(b.f=""+Mo(o.formula,i,o.cell,U,re)),z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W(o.cell,b,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(me);var wt=nn(me[0].s);if(p=t.dense?(s[me[0].s.r]||[])[me[0].s.c]:s[wt],t.cellFormula&&p){if(!o||!wt||!p)break;p.f=""+Mo(me[1],i,me[0],U,re),p.F=Tn(me[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!o)break;C[nn(o.cell)]=me[0],p=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[nn(o.cell)],(p||{}).f=""+Mo(me[0],i,f,U,re)}}break;case 253:b=H2(c[me.isst].t,me.ixfe,"s"),c[me.isst].h&&(b.h=c[me.isst].h),b.XF=A[b.ixfe],z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W({c:me.c,r:me.r},b,t);break;case 513:t.sheetStubs&&(b={ixfe:me.ixfe,XF:A[me.ixfe],t:"z"},z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W({c:me.c,r:me.r},b,t));break;case 190:if(t.sheetStubs)for(var Ft=me.c;Ft<=me.C;++Ft){var or=me.ixfe[Ft-me.c];b={ixfe:or,XF:A[or],t:"z"},z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W({c:Ft,r:me.r},b,t)}break;case 214:case 516:case 4:b=H2(me.val,me.ixfe,"s"),b.XF=A[b.ixfe],z>0&&(b.z=K[b.ixfe>>8&63]),ld(b,t,r.opts.Date1904),W({c:me.c,r:me.r},b,t);break;case 0:case 512:X===1&&(i=me);break;case 252:c=me;break;case 1054:if(re.biff==4){K[z++]=me[1];for(var dr=0;dr<z+163&&en[dr]!=me[1];++dr);dr>=163&&y0(me[1],z+163)}else y0(me[1],me[0]);break;case 30:{K[z++]=me;for(var nr=0;nr<z+163&&en[nr]!=me;++nr);nr>=163&&y0(me,z+163)}break;case 229:xe=xe.concat(me);break;case 93:de[me.cmo[0]]=re.lastobj=me;break;case 438:re.lastobj.TxO=me;break;case 127:re.lastobj.ImData=me;break;case 440:for(v=me[0].s.r;v<=me[0].e.r;++v)for(w=me[0].s.c;w<=me[0].e.c;++w)p=t.dense?(s[v]||[])[w]:s[nn({c:w,r:v})],p&&(p.l=me[1]);break;case 2048:for(v=me[0].s.r;v<=me[0].e.r;++v)for(w=me[0].s.c;w<=me[0].e.c;++w)p=t.dense?(s[v]||[])[w]:s[nn({c:w,r:v})],p&&p.l&&(p.l.Tooltip=me[1]);break;case 28:{if(re.biff<=5&&re.biff>=2)break;p=t.dense?(s[me[0].r]||[])[me[0].c]:s[nn(me[0])];var Xe=de[me[2]];p||(t.dense?(s[me[0].r]||(s[me[0].r]=[]),p=s[me[0].r][me[0].c]={t:"z"}):p=s[nn(me[0])]={t:"z"},i.e.r=Math.max(i.e.r,me[0].r),i.s.r=Math.min(i.s.r,me[0].r),i.e.c=Math.max(i.e.c,me[0].c),i.s.c=Math.min(i.s.c,me[0].c)),p.c||(p.c=[]),x={a:me[1],t:Xe.TxO.t},p.c.push(x)}break;case 2173:x0e(A[me.ixfe],me.ext);break;case 125:{if(!re.cellStyles)break;for(;me.e>=me.s;)fe[me.e--]={width:me.w/256,level:me.level||0,hidden:!!(me.flags&1)},Q||(Q=!0,O7(me.w/256)),sh(fe[me.e+1])}break;case 520:{var Qe={};me.level!=null&&(H[me.r]=Qe,Qe.level=me.level),me.hidden&&(H[me.r]=Qe,Qe.hidden=!0),me.hpt&&(H[me.r]=Qe,Qe.hpt=me.hpt,Qe.hpx=Np(me.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||xm(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ye]]=me;break;case 161:s["!margins"]||xm(s["!margins"]={}),s["!margins"].header=me.header,s["!margins"].footer=me.footer;break;case 574:me.RTL&&(D.Views[0].RTL=!0);break;case 146:F=me;break;case 2198:ie=me;break;case 140:j=me;break;case 442:u?M.CodeName=me||M.name:D.WBProps.CodeName=me||"ThisWorkbook";break}}else Se||console.error("Missing Info for XLS Record 0x"+ye.toString(16)),e.l+=we}return r.SheetNames=Ma(a).sort(function(ut,mt){return Number(ut)-Number(mt)}).map(function(ut){return a[ut].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&te.forEach(function(ut,mt){r.Sheets[r.SheetNames[mt]]["!autofilter"]=ut}),r.Strings=c,r.SSF=Xs(en),re.enc&&(r.Encryption=re.enc),ie&&(r.Themes=ie),r.Metadata={},j!==void 0&&(r.Metadata.Country=j),U.names.length>0&&(D.Names=U.names),r.Workbook=D,r}var cy={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Ppe(e,t,r){var n=qr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=EP(n,C6,cy.DSI);for(var a in s)t[a]=s[a]}catch(u){if(r.WTF)throw u}var i=qr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=EP(i,N6,cy.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(sz(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Mpe(e,t){var r=[],n=[],s=[],a=0,i,o=sP(C6,"n"),c=sP(N6,"n");if(e.Props)for(i=Ma(e.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],e.Props[i[a]]]);if(e.Custprops)for(i=Ma(e.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],e.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)dz.indexOf(s[a][0])>-1||nz.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&qr.utils.cfb_add(t,"/SummaryInformation",AP(n,cy.SI,c,N6)),(r.length||u.length)&&qr.utils.cfb_add(t,"/DocumentSummaryInformation",AP(r,cy.DSI,o,C6,u.length?u:null,cy.UDI))}function iU(e,t){t||(t={}),W7(t),u7(),t.codepage&&c7(t.codepage);var r,n;if(e.FullPaths){if(qr.find(e,"/encryption"))throw new Error("File is password-protected");r=qr.find(e,"!CompObj"),n=qr.find(e,"/Workbook")||qr.find(e,"/Book")}else{switch(t.type){case"base64":e=Vl(Jl(e));break;case"binary":e=Vl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}io(e,0),n={content:e}}var s,a;if(r&&Npe(r),t.bookProps&&!t.bookSheets)s={};else{var i=Pn?"buffer":"array";if(n&&n.content)s=jpe(n.content,t);else if((a=qr.find(e,"PerfectOffice_MAIN"))&&a.content)s=pm.to_workbook(a.content,(t.type=i,t));else if((a=qr.find(e,"NativeContent_MAIN"))&&a.content)s=pm.to_workbook(a.content,(t.type=i,t));else throw(a=qr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&qr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=G0e(e))}var o={};return e.FullPaths&&Ppe(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function Fpe(e,t){var r=t||{},n=qr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return qr.utils.cfb_add(n,s,oU(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Mpe(e,n),r.biff==8&&e.vbaraw&&V0e(n,qr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Uy={0:{f:nme},1:{f:dme},2:{f:jme},3:{f:vme},4:{f:gme},5:{f:Nme},6:{f:Dme},7:{f:Sme},8:{f:Ume},9:{f:zme},10:{f:Bme},11:{f:$me},12:{f:hme},13:{f:Mme},14:{f:bme},15:{f:xme},16:{f:Qz},17:{f:Rme},18:{f:Tme},19:{f:k7},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Rge},40:{},42:{},43:{f:Dde},44:{f:Fde},45:{f:Lde},46:{f:$de},47:{f:Bde},48:{},49:{f:ile},50:{},51:{f:w0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:_z},62:{f:Ome},63:{f:A0e},64:{f:sge},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:zo,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:ege},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:cme},148:{f:ime,p:16},151:{f:Kme},152:{},153:{f:Oge},154:{},155:{},156:{f:Mge},157:{},158:{},159:{T:1,f:Yue},160:{T:-1},161:{T:1,f:tg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Wme},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:y0e},336:{T:-1},337:{f:S0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:T6},357:{},358:{},359:{},360:{T:1},361:{},362:{f:bz},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Xme},427:{f:Yme},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Qme},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:lme},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Vme},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:T6},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:$0e},633:{T:1},634:{T:-1},635:{T:1,f:L0e},636:{T:-1},637:{f:ule},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:bge},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:age},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},F6={6:{f:L3},10:{f:Df},12:{f:ai},13:{f:ai},14:{f:Ga},15:{f:Ga},16:{f:Do},17:{f:Ga},18:{f:Ga},19:{f:ai},20:{f:DP},21:{f:DP},23:{f:bz},24:{f:RP},25:{f:Ga},26:{},27:{},28:{f:aue},29:{},34:{f:Ga},35:{f:IP},38:{f:Do},39:{f:Do},40:{f:Do},41:{f:Do},42:{f:Ga},43:{f:Ga},47:{f:xde},49:{f:Mce},51:{f:ai},60:{},61:{f:Nce},64:{f:Ga},65:{f:Pce},66:{f:ai},77:{},80:{},81:{},82:{},85:{f:ai},89:{},90:{},91:{},92:{f:pce},93:{f:lue},94:{},95:{f:Ga},96:{},97:{},99:{f:Ga},125:{f:_z},128:{f:qce},129:{f:yce},130:{f:ai},131:{f:Ga},132:{f:Ga},133:{f:vce},134:{},140:{f:pue},141:{f:ai},144:{},146:{f:vue},151:{},152:{},153:{},154:{},155:{},156:{f:ai},157:{},158:{},160:{f:Cue},161:{f:_ue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Wce},190:{f:Hce},193:{f:Df},197:{},198:{},199:{},200:{},201:{},202:{f:Ga},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ai},220:{},221:{f:Ga},222:{},224:{f:Vce},225:{f:gce},226:{f:Df},227:{},229:{f:iue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:bce},253:{f:Oce},255:{f:Sce},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:fz},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ga},353:{f:Df},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Qce},431:{f:Ga},432:{},433:{},434:{},437:{},438:{f:due},439:{f:Ga},440:{f:fue},441:{},442:{f:Cv},443:{},444:{f:ai},445:{},446:{},448:{f:Df},449:{f:Cce,r:2},450:{f:Df},512:{f:MP},513:{f:Tue},515:{f:Yce},516:{f:Ice},517:{f:OP},519:{f:Nue},520:{f:kce},523:{},545:{f:LP},549:{f:PP},566:{},574:{f:Ace},638:{f:Uce},659:{},1048:{},1054:{f:Lce},1084:{},1212:{f:rue},2048:{f:mue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:z2},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Df},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:wue,r:12},2173:{f:p0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ga,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:tue,r:12},2197:{},2198:{f:u0e,r:12},2199:{},2200:{},2201:{},2202:{f:nue,r:12},2203:{f:Df},2204:{},2205:{},2206:{},2207:{},2211:{f:Tce},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ai},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Sue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:yue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:MP},1:{},2:{f:Mue},3:{f:jue},4:{f:Aue},5:{f:OP},7:{f:Oue},8:{},9:{f:z2},11:{},22:{f:ai},30:{f:$ce},31:{},32:{},33:{f:LP},36:{},37:{f:PP},50:{f:Due},62:{},52:{},67:{},68:{f:ai},69:{},86:{},126:{},127:{f:Eue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Iue},223:{},234:{},354:{},421:{},518:{f:L3},521:{f:z2},536:{f:RP},547:{f:IP},561:{},579:{},1030:{f:L3},1033:{f:z2},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function br(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&b7(r)&&e.push(r)}}function Ope(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return br(e,t,r,s);var a=t;if(!isNaN(a)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function jv(e,t,r){return e||(e=Ht(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Dpe(e,t,r,n){var s=Ht(9);return jv(s,e,t),hz(r,n||"b",s),s}function Ipe(e,t,r){var n=Ht(8+2*r.length);return jv(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function Rpe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?bi(Ks(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?br(e,2,Fue(r,n,s)):br(e,3,Pue(r,n,s));return;case"b":case"e":br(e,5,Dpe(r,n,t.v,t.t));return;case"s":case"str":br(e,4,Ipe(r,n,(t.v||"").slice(0,255)));return}br(e,1,jv(null,r,n))}function Lpe(e,t,r,n){var s=Array.isArray(t),a=es(t["!ref"]||"A1"),i,o="",c=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Tn(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Xa(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(c[d]=ga(d)),i=c[d]+o;var f=s?(t[u]||[])[d]:t[i];f&&Rpe(e,f,u,d)}}}function Bpe(e,t){for(var r=t||{},n=Tl(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return br(n,r.biff==4?1033:r.biff==3?521:9,P7(e,16,r)),Lpe(n,e.Sheets[e.SheetNames[s]],s,r),br(n,10),n.end()}function $pe(e,t,r){br(e,49,Fce({sz:12,name:"Arial"},r))}function zpe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&br(e,1054,Bce(s,t[s],r))})}function Upe(e,t){var r=Ht(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),br(e,2151,r),r=Ht(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),yz(es(t["!ref"]||"A1"),r),r.write_shift(4,4),br(e,2152,r)}function Wpe(e,t){for(var r=0;r<16;++r)br(e,224,FP({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){br(e,224,FP(n,0,t))})}function Hpe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];br(e,440,hue(n)),n[1].Tooltip&&br(e,2048,gue(n))}delete t["!links"]}function Gpe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&br(e,125,bue(T4(s,n),s))})}}function Vpe(e,t,r,n,s){var a=16+yh(s.cellXfs,t,s);if(t.v==null&&!t.bf){br(e,513,$m(r,n,a));return}if(t.bf)br(e,6,yhe(t,r,n,s,a));else switch(t.t){case"d":case"n":var i=t.t=="d"?bi(Ks(t.v)):t.v;br(e,515,Jce(r,n,i,a));break;case"b":case"e":br(e,517,Xce(r,n,t.v,a,s,t.t));break;case"s":case"str":if(s.bookSST){var o=B7(s.Strings,t.v,s.revStrings);br(e,253,Dce(r,n,o,a))}else br(e,516,Rce(r,n,(t.v||"").slice(0,255),a,s));break;default:br(e,513,$m(r,n,a))}}function qpe(e,t,r){var n=Tl(),s=r.SheetNames[e],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(a),u=t.biff==8,d,f="",m=[],p=es(a["!ref"]||"A1"),x=u?65536:16384;if(p.e.c>255||p.e.r>=x){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,x-1)}br(n,2057,P7(r,16,t)),br(n,13,$c(1)),br(n,12,$c(100)),br(n,15,Zo(!0)),br(n,17,Zo(!1)),br(n,16,Lm(.001)),br(n,95,Zo(!0)),br(n,42,Zo(!1)),br(n,43,Zo(!1)),br(n,130,$c(1)),br(n,128,Kce()),br(n,131,Zo(!1)),br(n,132,Zo(!1)),u&&Gpe(n,a["!cols"]),br(n,512,zce(p,t)),u&&(a["!links"]=[]);for(var w=p.s.r;w<=p.e.r;++w){f=Xa(w);for(var v=p.s.c;v<=p.e.c;++v){w===p.s.r&&(m[v]=ga(v)),d=m[v]+f;var C=c?(a[w]||[])[v]:a[d];C&&(Vpe(n,C,w,v,t),u&&C.l&&a["!links"].push([d,C.l]))}}var k=o.CodeName||o.name||s;return u&&br(n,574,jce((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&br(n,229,oue(a["!merges"])),u&&Hpe(n,a),br(n,442,mz(k)),u&&Upe(n,a),br(n,10),n.end()}function Kpe(e,t,r){var n=Tl(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,c=r.biff==5;if(br(n,2057,P7(e,5,r)),r.bookType=="xla"&&br(n,135),br(n,225,o?$c(1200):null),br(n,193,Xle(2)),c&&br(n,191),c&&br(n,192),br(n,226),br(n,92,xce("SheetJS",r)),br(n,66,$c(o?1200:1252)),o&&br(n,353,$c(0)),o&&br(n,448),br(n,317,kue(e.SheetNames.length)),o&&e.vbaraw&&br(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";br(n,442,mz(u))}br(n,156,$c(17)),br(n,25,Zo(!1)),br(n,18,Zo(!1)),br(n,19,$c(0)),o&&br(n,431,Zo(!1)),o&&br(n,444,$c(0)),br(n,61,Ece()),br(n,64,Zo(!1)),br(n,141,$c(0)),br(n,34,Zo(Cge(e)=="true")),br(n,14,Zo(!0)),o&&br(n,439,Zo(!1)),br(n,218,$c(0)),$pe(n,e,r),zpe(n,e.SSF,r),Wpe(n,r),o&&br(n,352,Zo(!1));var d=n.end(),f=Tl();o&&br(f,140,xue()),o&&r.Strings&&Ope(f,252,_ce(r.Strings)),br(f,10);var m=f.end(),p=Tl(),x=0,w=0;for(w=0;w<e.SheetNames.length;++w)x+=(o?12:11)+(o?2:1)*e.SheetNames[w].length;var v=d.length+x+m.length;for(w=0;w<e.SheetNames.length;++w){var C=a[w]||{};br(p,133,wce({pos:v,hs:C.Hidden||0,dt:0,name:e.SheetNames[w]},r)),v+=t[w].length}var k=p.end();if(x!=k.length)throw new Error("BS8 "+x+" != "+k.length);var b=[];return d.length&&b.push(d),k.length&&b.push(k),m.length&&b.push(m),zi(b)}function Xpe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Xs(en)),e&&e.SSF&&(Zp(),y4(e.SSF),r.revssf=w4(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,H7(r),r.cellXfs=[],yh(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=qpe(s,r,e);return n.unshift(Kpe(e,n,r)),zi(n)}function oU(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Cl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return Xpe(e,t);case 4:case 3:case 2:return Bpe(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function KP(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,c=Foe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},x=[];for(i=0;i<c.length;++i){var w=c[i].trim(),v=w.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var C=w.split(/<\/t[dh]>/i);for(o=0;o<C.length;++o){var k=C[o].trim();if(k.match(/<t[dh]/i)){for(var b=k,j=0;b.charAt(0)=="<"&&(j=b.indexOf(">"))>-1;)b=b.slice(j+1);for(var A=0;A<x.length;++A){var F=x[A];F.s.c==d&&F.s.r<u&&u<=F.e.r&&(d=F.e.c+1,A=-1)}var D=an(k.slice(0,k.indexOf(">")));m=D.colspan?+D.colspan:1,((f=+D.rowspan)>1||m>1)&&x.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+m-1}});var M=D.t||D["data-t"]||"";if(!b.length){d+=m;continue}if(b=P$(b),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!b.length){d+=m;continue}var O={t:"s",v:b};r.raw||!b.trim().length||M=="s"||(b==="TRUE"?O={t:"b",v:!0}:b==="FALSE"?O={t:"b",v:!1}:isNaN(Mu(b))?isNaN(Tp(b).getDate())||(O={t:"d",v:Ks(b)},r.cellDates||(O={t:"n",v:bi(O.v)}),O.z=r.dateNF||en[14]):O={t:"n",v:Mu(b)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=O):n[nn({r:u,c:d})]=O,d+=m}}}}return n["!ref"]=Tn(p),x.length&&(n["!merges"]=x),n}function Ype(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=nn({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],m=f&&f.v!=null&&(f.h||y7(f.w||(C0(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),n.editable?m='<span contenteditable="true">'+m+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+f.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+d,a.push(wr("td",m,p))}}var x="<tr>";return x+a.join("")+"</tr>"}var Jpe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Qpe="</body></html>";function Zpe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return xh(KP(r[0],t),t);var n=q7();return r.forEach(function(s,a){K7(n,KP(s,t),"Sheet"+(a+1))}),n}function e1e(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function lU(e,t){var r=t||{},n=r.header!=null?r.header:Jpe,s=r.footer!=null?r.footer:Qpe,a=[n],i=Cl(e["!ref"]);r.dense=Array.isArray(e),a.push(e1e(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(Ype(e,i,o,r));return a.push("</table>"+s),a.join("")}function cU(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?pa(n.origin):n.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=Cl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],m=0,p=e["!rows"]||(e["!rows"]=[]),x=0,w=0,v=0,C=0,k=0,b=0;for(e["!cols"]||(e["!cols"]=[]);x<o.length&&w<c;++x){var j=o[x];if(XP(j)){if(n.display)continue;p[w]={hidden:!0}}var A=j.children;for(v=C=0;v<A.length;++v){var F=A[v];if(!(n.display&&XP(F))){var D=F.hasAttribute("data-v")?F.getAttribute("data-v"):F.hasAttribute("v")?F.getAttribute("v"):P$(F.innerHTML),M=F.getAttribute("data-z")||F.getAttribute("z");for(m=0;m<f.length;++m){var O=f[m];O.s.c==C+a&&O.s.r<w+s&&w+s<=O.e.r&&(C=O.e.c+1-a,m=-1)}b=+F.getAttribute("colspan")||1,((k=+F.getAttribute("rowspan")||1)>1||b>1)&&f.push({s:{r:w+s,c:C+a},e:{r:w+s+(k||1)-1,c:C+a+(b||1)-1}});var L={t:"s",v:D},W=F.getAttribute("data-t")||F.getAttribute("t")||"";D!=null&&(D.length==0?L.t=W||"z":n.raw||D.trim().length==0||W=="s"||(D==="TRUE"?L={t:"b",v:!0}:D==="FALSE"?L={t:"b",v:!1}:isNaN(Mu(D))?isNaN(Tp(D).getDate())||(L={t:"d",v:Ks(D)},n.cellDates||(L={t:"n",v:bi(L.v)}),L.z=n.dateNF||en[14]):L={t:"n",v:Mu(D)})),L.z===void 0&&M!=null&&(L.z=M);var re="",ie=F.getElementsByTagName("A");if(ie&&ie.length)for(var xe=0;xe<ie.length&&!(ie[xe].hasAttribute("href")&&(re=ie[xe].getAttribute("href"),re.charAt(0)!="#"));++xe);re&&re.charAt(0)!="#"&&(L.l={Target:re}),n.dense?(e[w+s]||(e[w+s]=[]),e[w+s][C+a]=L):e[nn({c:C+a,r:w+s})]=L,u.e.c<C+a&&(u.e.c=C+a),C+=b}}++w}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,w-1+s),e["!ref"]=Tn(u),w>=c&&(e["!fullref"]=Tn((u.e.r=o.length-x+w-1+s,u))),e}function uU(e,t){var r=t||{},n=r.dense?[]:{};return cU(n,e,t)}function t1e(e,t){return xh(uU(e,t),t)}function XP(e){var t="",r=r1e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function r1e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function n1e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Zn(t.replace(/<[^>]*>/g,""));return[r]}var YP={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function dU(e,t){var r=t||{},n=v7(e),s=[],a,i,o={name:""},c="",u=0,d,f,m={},p=[],x=r.dense?[]:{},w,v,C={value:""},k="",b=0,j=[],A=-1,F=-1,D={s:{r:1e6,c:1e7},e:{r:0,c:0}},M=0,O={},L=[],W={},re=0,ie=0,xe=[],de=1,fe=1,H=[],Q={Names:[]},U={},V=["",""],X=[],z={},K="",te=0,se=!1,pe=!1,oe=0;for(Iy.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");w=Iy.exec(n);)switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"":w[1]==="/"?(D.e.c>=D.s.c&&D.e.r>=D.s.r?x["!ref"]=Tn(D):x["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=D.e.r&&(x["!fullref"]=x["!ref"],D.e.r=r.sheetRows-1,x["!ref"]=Tn(D)),L.length&&(x["!merges"]=L),xe.length&&(x["!rows"]=xe),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),m[d.name]=x,pe=!1):w[0].charAt(w[0].length-2)!=="/"&&(d=an(w[0],!1),A=F=-1,D.s.r=D.s.c=1e7,D.e.r=D.e.c=0,x=r.dense?[]:{},L=[],xe=[],pe=!0);break;case"table-row-group":w[1]==="/"?--M:++M;break;case"table-row":case"":if(w[1]==="/"){A+=de,de=1;break}if(f=an(w[0],!1),f.?A=f.-1:A==-1&&(A=0),de=+f["number-rows-repeated"]||1,de<10)for(oe=0;oe<de;++oe)M>0&&(xe[A+oe]={level:M});F=-1;break;case"covered-table-cell":w[1]!=="/"&&++F,r.sheetStubs&&(r.dense?(x[A]||(x[A]=[]),x[A][F]={t:"z"}):x[nn({r:A,c:F})]={t:"z"}),k="",j=[];break;case"table-cell":case"":if(w[0].charAt(w[0].length-2)==="/")++F,C=an(w[0],!1),fe=parseInt(C["number-columns-repeated"]||"1",10),v={t:"z",v:null},C.formula&&r.cellFormula!=!1&&(v.f=GP(Zn(C.formula))),(C.||C["value-type"])=="string"&&(v.t="s",v.v=Zn(C["string-value"]||""),r.dense?(x[A]||(x[A]=[]),x[A][F]=v):x[nn({r:A,c:F})]=v),F+=fe-1;else if(w[1]!=="/"){++F,k="",b=0,j=[],fe=1;var ye=de?A+de-1:A;if(F>D.e.c&&(D.e.c=F),F<D.s.c&&(D.s.c=F),A<D.s.r&&(D.s.r=A),ye>D.e.r&&(D.e.r=ye),C=an(w[0],!1),X=[],z={},v={t:C.||C["value-type"],v:null},r.cellFormula)if(C.formula&&(C.formula=Zn(C.formula)),C["number-matrix-columns-spanned"]&&C["number-matrix-rows-spanned"]&&(re=parseInt(C["number-matrix-rows-spanned"],10)||0,ie=parseInt(C["number-matrix-columns-spanned"],10)||0,W={s:{r:A,c:F},e:{r:A+re-1,c:F+ie-1}},v.F=Tn(W),H.push([W,v.F])),C.formula)v.f=GP(C.formula);else for(oe=0;oe<H.length;++oe)A>=H[oe][0].s.r&&A<=H[oe][0].e.r&&F>=H[oe][0].s.c&&F<=H[oe][0].e.c&&(v.F=H[oe][1]);switch((C["number-columns-spanned"]||C["number-rows-spanned"])&&(re=parseInt(C["number-rows-spanned"],10)||0,ie=parseInt(C["number-columns-spanned"],10)||0,W={s:{r:A,c:F},e:{r:A+re-1,c:F+ie-1}},L.push(W)),C["number-columns-repeated"]&&(fe=parseInt(C["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Gs(C["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(C.value);break;case"percentage":v.t="n",v.v=parseFloat(C.value);break;case"currency":v.t="n",v.v=parseFloat(C.value);break;case"date":v.t="d",v.v=Ks(C["date-value"]),r.cellDates||(v.t="n",v.v=bi(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=joe(C["time-value"])/86400,r.cellDates&&(v.t="d",v.v=b4(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(C.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",C["string-value"]!=null&&(k=Zn(C["string-value"]),j=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(se=!1,v.t==="s"&&(v.v=k||"",j.length&&(v.R=j),se=b==0),U.Target&&(v.l=U),X.length>0&&(v.c=X,X=[]),k&&r.cellText!==!1&&(v.w=k),se&&(v.t="z",delete v.v),(!se||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=A))for(var we=0;we<de;++we){if(fe=parseInt(C["number-columns-repeated"]||"1",10),r.dense)for(x[A+we]||(x[A+we]=[]),x[A+we][F]=we==0?v:Xs(v);--fe>0;)x[A+we][F+fe]=Xs(v);else for(x[nn({r:A+we,c:F})]=v;--fe>0;)x[nn({r:A+we,c:F+fe})]=Xs(v);D.e.c<=F&&(D.e.c=F)}fe=parseInt(C["number-columns-repeated"]||"1",10),F+=fe-1,fe=0,v={},k="",j=[]}U={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(w[1]==="/"){if((a=s.pop())[0]!==w[3])throw"Bad state: "+a}else w[0].charAt(w[0].length-2)!=="/"&&s.push([w[3],!0]);break;case"annotation":if(w[1]==="/"){if((a=s.pop())[0]!==w[3])throw"Bad state: "+a;z.t=k,j.length&&(z.R=j),z.a=K,X.push(z)}else w[0].charAt(w[0].length-2)!=="/"&&s.push([w[3],!1]);K="",te=0,k="",b=0,j=[];break;case"creator":w[1]==="/"?K=n.slice(te,w.index):te=w.index+w[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((a=s.pop())[0]!==w[3])throw"Bad state: "+a}else w[0].charAt(w[0].length-2)!=="/"&&s.push([w[3],!1]);k="",b=0,j=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){if(O[o.name]=c,(a=s.pop())[0]!==w[3])throw"Bad state: "+a}else w[0].charAt(w[0].length-2)!=="/"&&(c="",o=an(w[0],!1),s.push([w[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=an(w[0],!1),c+=YP[w[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=an(w[0],!1),c+=YP[w[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>")break;if(w[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,w.index);break}else u=w.index+w[0].length;break;case"named-range":i=an(w[0],!1),V=B3(i["cell-range-address"]);var Se={Name:i.name,Ref:V[0]+"!"+V[1]};pe&&(Se.Sheet=p.length),Q.Names.push(Se);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(w[1]==="/"&&(!C||!C["string-value"])){var Ie=n1e(n.slice(b,w.index));k=(k.length>0?k+`
`:"")+Ie[0]}else an(w[0],!1),b=w.index+w[0].length;break;case"s":break;case"database-range":if(w[1]==="/")break;try{V=B3(an(w[0])["target-range-address"]),m[V[0]]["!autofilter"]={ref:V[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){if(U=an(w[0],!1),!U.href)break;U.Target=Zn(U.href),delete U.href,U.Target.charAt(0)=="#"&&U.Target.indexOf(".")>-1?(V=B3(U.Target.slice(1)),U.Target="#"+V[0]+"!"+V[1]):U.Target.match(/^\.\.[\\\/]/)&&(U.Target=U.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(w)}}var me={Sheets:m,SheetNames:p,Workbook:Q};return r.bookSheets&&delete me.Sheets,me}function JP(e,t){t=t||{},Bc(e,"META-INF/manifest.xml")&&jle(si(e,"META-INF/manifest.xml"),t);var r=ql(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=dU(As(r),t);return Bc(e,"meta.xml")&&(n.Props=tz(si(e,"meta.xml"))),n}function QP(e,t){return dU(e,t)}var s1e=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Dy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ja+t}})(),ZP=(function(){var e=function(a){return Ts(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var c=[];c.push('      <table:table table:name="'+Ts(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Cl(a["!ref"]||"A1"),m=a["!merges"]||[],p=0,x=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var w="",v=a["!rows"]||[];for(u=0;u<f.s.r;++u)w=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+w+`></table:table-row>
`);for(;u<=f.e.r;++u){for(w=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+w+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var C=!1,k={},b="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>d)&&!(m[p].s.r>u)&&!(m[p].e.c<d)&&!(m[p].e.r<u)){(m[p].s.c!=d||m[p].s.r!=u)&&(C=!0),k["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,k["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(C){c.push(r);continue}var j=nn({r:u,c:d}),A=x?(a[u]||[])[d]:a[j];if(A&&A.f&&(k["table:formula"]=Ts(khe(A.f)),A.F&&A.F.slice(0,j.length)==j)){var F=Cl(A.F);k["table:number-matrix-columns-spanned"]=F.e.c-F.s.c+1,k["table:number-matrix-rows-spanned"]=F.e.r-F.s.r+1}if(!A){c.push(t);continue}switch(A.t){case"b":b=A.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=A.v?"true":"false";break;case"n":b=A.w||String(A.v||0),k["office:value-type"]="float",k["office:value"]=A.v||0;break;case"s":case"str":b=A.v==null?"":A.v,k["office:value-type"]="string";break;case"d":b=A.w||Ks(A.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=Ks(A.v).toISOString(),k["table:style-name"]="ce1";break;default:c.push(t);continue}var D=e(b);if(A.l&&A.l.Target){var M=A.l.Target;M=M.charAt(0)=="#"?"#"+The(M.slice(1)):M,M.charAt(0)!="#"&&!M.match(/^\w+:/)&&(M="../"+M),D=wr("text:a",D,{"xlink:href":M.replace(/&/g,"&amp;")})}c.push("          "+wr("table:table-cell",wr("text:p",D,{}),k)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;sh(f),f.ods=o;var m=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),a.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++c}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var c=[Ja],u=Dy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Dy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(ez().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function fU(e,t){if(t.bookType=="fods")return ZP(e,t);var r=g7(),n="",s=[],a=[];return n="mimetype",Nn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Nn(r,n,ZP(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",Nn(r,n,s1e(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",Nn(r,n,Ja+ez()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",Nn(r,n,Fle(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Nn(r,n,Ple(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function zm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function O6(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):As(ph(e))}function a1e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Vl(pd(e))}function i1e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function ih(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function eM(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function o1e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function l1e(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=s&255;e[t+15]|=r>=0?0:128}function Wy(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function bs(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Pa(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ss(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=Wy(e,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Wy(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function to(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(bs(n*8+s.type)),s.type==2&&t.push(bs(s.data.length)),t.push(s.data))})}),ih(t)}function U7(e,t){return e?.map(function(r){return t(r.data)})||[]}function Dc(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=Wy(e,n),a=ss(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:Pa(a[1][0].data),messages:[]};a[2].forEach(function(o){var c=ss(o.data),u=Pa(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=a[3])!=null&&t[0]&&(i.merge=Pa(a[3][0].data)>>>0>0),r.push(i)}return r}function Ig(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:bs(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:bs(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:bs(i.data.length)}],n[2].push({data:to(i.meta),type:2})});var a=to(n);t.push(bs(a.length)),t.push(a),s.forEach(function(i){return t.push(i)})}),ih(t)}function c1e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Wy(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(a==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,a==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[ih(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var d=ih(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Ic(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(c1e(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return ih(t)}function Rg(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=bs(n),i=a.length;t.push(a),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return ih(t)}function u1e(e,t,r,n){var s=zm(e),a=s.getUint32(4,!0),i=(n>1?12:8)+eM(a&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=eM(a&(n>1?12288:4096))*4,a&16&&(c=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function d1e(e,t,r){var n=zm(e),s=n.getUint32(8,!0),a=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(c=o1e(e,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function z3(e,t){var r=new Uint8Array(32),n=zm(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,l1e(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function U3(e,t){var r=new Uint8Array(32),n=zm(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function f1e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return u1e(e,t,r,e[0]);case 5:return d1e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function jo(e){var t=ss(e);return Wy(t[1][0].data)}function tM(e,t){var r=ss(t.data),n=Pa(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=ss(i.data),c=Pa(o[1][0].data)>>>0;switch(n){case 1:a[c]=O6(o[3][0].data);break;case 8:{var u=e[jo(o[9][0].data)][0],d=ss(u.data),f=e[jo(d[1][0].data)][0],m=Pa(f.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=ss(f.data);a[c]=p[3].map(function(x){return O6(x.data)}).join("")}break}}),a}function h1e(e,t){var r,n,s,a,i,o,c,u,d,f,m,p,x,w,v=ss(e),C=Pa(v[1][0].data)>>>0,k=Pa(v[2][0].data)>>>0,b=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&Pa(v[8][0].data)>0||!1,j,A;if((a=(s=v[7])==null?void 0:s[0])!=null&&a.data&&t!=0)j=(o=(i=v[7])==null?void 0:i[0])==null?void 0:o.data,A=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)j=(p=(m=v[4])==null?void 0:m[0])==null?void 0:p.data,A=(w=(x=v[3])==null?void 0:x[0])==null?void 0:w.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var F=b?4:1,D=zm(j),M=[],O=0;O<j.length/2;++O){var L=D.getUint16(O*2,!0);L<65535&&M.push([O,L])}if(M.length!=k)throw"Expected ".concat(k," cells, found ").concat(M.length);var W=[];for(O=0;O<M.length-1;++O)W[M[O][0]]=A.subarray(M[O][1]*F,M[O+1][1]*F);return M.length>=1&&(W[M[M.length-1][0]]=A.subarray(M[M.length-1][1]*F)),{R:C,cells:W}}function m1e(e,t){var r,n=ss(t.data),s=(r=n?.[7])!=null&&r[0]?Pa(n[7][0].data)>>>0>0?1:0:-1,a=U7(n[5],function(i){return h1e(i,s)});return{nrows:Pa(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function g1e(e,t,r){var n,s=ss(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(Pa(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(Pa(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Tn(a);var i=ss(s[4][0].data),o=tM(e,e[jo(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?tM(e,e[jo(i[17][0].data)][0]):[],u=ss(i[3][0].data),d=0;u[1].forEach(function(f){var m=ss(f.data),p=e[jo(m[2][0].data)][0],x=Pa(p.meta[1][0].data);if(x!=6002)throw new Error("6001 unexpected reference to ".concat(x));var w=m1e(e,p);w.data.forEach(function(v,C){v.forEach(function(k,b){var j=nn({r:d+C,c:b}),A=f1e(k,o,c);A&&(r[j]=A)})}),d+=w.nrows})}function p1e(e,t){var r=ss(t.data),n={"!ref":"A1"},s=e[jo(r[2][0].data)],a=Pa(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return g1e(e,s[0],n),n}function x1e(e,t){var r,n=ss(t.data),s={name:(r=n[1])!=null&&r[0]?O6(n[1][0].data):"",sheets:[]},a=U7(n[2],jo);return a.forEach(function(i){e[i].forEach(function(o){var c=Pa(o.meta[1][0].data);c==6e3&&s.sheets.push(p1e(e,o))})}),s}function y1e(e,t){var r=q7(),n=ss(t.data),s=U7(n[1],jo);if(s.forEach(function(a){e[a].forEach(function(i){var o=Pa(i.meta[1][0].data);if(o==2){var c=x1e(e,i);c.sheets.forEach(function(u,d){K7(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function W3(e){var t,r,n,s,a={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Ic(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Dc(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Pa(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(c){a[c].forEach(function(u){var d=Pa(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return y1e(a,o)}function v1e(e,t,r){var n,s,a,i;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=e[8])==null?void 0:a[0])==null?void 0:i.data)&&Pa(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=zm(e[7][0].data),d=0,f=[],m=zm(e[4][0].data),p=0,x=[],w=0;w<t.length;++w){if(t[w]==null){u.setUint16(w*2,65535,!0),m.setUint16(w*2,65535);continue}u.setUint16(w*2,d,!0),m.setUint16(w*2,p,!0);var v,C;switch(typeof t[w]){case"string":v=z3({t:"s",v:t[w]},r),C=U3({t:"s",v:t[w]},r);break;case"number":v=z3({t:"n",v:t[w]},r),C=U3({t:"n",v:t[w]},r);break;case"boolean":v=z3({t:"b",v:t[w]},r),C=U3({t:"b",v:t[w]},r);break;default:throw new Error("Unsupported value "+t[w])}f.push(v),d+=v.length,x.push(C),p+=C.length,++c}for(e[2][0].data=bs(c);w<e[7][0].data.length/2;++w)u.setUint16(w*2,65535,!0),m.setUint16(w*2,65535,!0);return e[6][0].data=ih(f),e[3][0].data=ih(x),c}function w1e(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Cl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Tn(n)));var a=lb(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(K){return K.forEach(function(te){typeof te=="string"&&i.push(te)})});var o={},c=[],u=qr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(K,te){return[K,u.FullPaths[te]]}).forEach(function(K){var te=K[0],se=K[1];if(te.type==2&&te.name.match(/\.iwa/)){var pe=te.content,oe=Ic(pe),ye=Dc(oe);ye.forEach(function(we){c.push(we.id),o[we.id]={deps:[],location:se,type:Pa(we.messages[0].meta[1][0].data)}})}}),c.sort(function(K,te){return K-te});var d=c.filter(function(K){return K>1}).map(function(K){return[K,bs(K)]});u.FileIndex.map(function(K,te){return[K,u.FullPaths[te]]}).forEach(function(K){var te=K[0];if(K[1],!!te.name.match(/\.iwa/)){var se=Dc(Ic(te.content));se.forEach(function(pe){pe.messages.forEach(function(oe){d.forEach(function(ye){pe.messages.some(function(we){return Pa(we.meta[1][0].data)!=11006&&i1e(we.data,ye[1])})&&o[ye[0]].deps.push(pe.id)})})})}});for(var f=qr.find(u,o[1].location),m=Dc(Ic(f.content)),p,x=0;x<m.length;++x){var w=m[x];w.id==1&&(p=w)}var v=jo(ss(p.messages[0].data)[1][0].data);for(f=qr.find(u,o[v].location),m=Dc(Ic(f.content)),x=0;x<m.length;++x)w=m[x],w.id==v&&(p=w);for(v=jo(ss(p.messages[0].data)[2][0].data),f=qr.find(u,o[v].location),m=Dc(Ic(f.content)),x=0;x<m.length;++x)w=m[x],w.id==v&&(p=w);for(v=jo(ss(p.messages[0].data)[2][0].data),f=qr.find(u,o[v].location),m=Dc(Ic(f.content)),x=0;x<m.length;++x)w=m[x],w.id==v&&(p=w);var C=ss(p.messages[0].data);{C[6][0].data=bs(n.e.r+1),C[7][0].data=bs(n.e.c+1);var k=jo(C[46][0].data),b=qr.find(u,o[k].location),j=Dc(Ic(b.content));{for(var A=0;A<j.length&&j[A].id!=k;++A);if(j[A].id!=k)throw"Bad ColumnRowUIDMapArchive";var F=ss(j[A].messages[0].data);F[1]=[],F[2]=[],F[3]=[];for(var D=0;D<=n.e.c;++D){var M=[];M[1]=M[2]=[{type:0,data:bs(D+420690)}],F[1].push({type:2,data:to(M)}),F[2].push({type:0,data:bs(D)}),F[3].push({type:0,data:bs(D)})}F[4]=[],F[5]=[],F[6]=[];for(var O=0;O<=n.e.r;++O)M=[],M[1]=M[2]=[{type:0,data:bs(O+726270)}],F[4].push({type:2,data:to(M)}),F[5].push({type:0,data:bs(O)}),F[6].push({type:0,data:bs(O)});j[A].messages[0].data=to(F)}b.content=Rg(Ig(j)),b.size=b.content.length,delete C[46];var L=ss(C[4][0].data);{L[7][0].data=bs(n.e.r+1);var W=ss(L[1][0].data),re=jo(W[2][0].data);b=qr.find(u,o[re].location),j=Dc(Ic(b.content));{if(j[0].id!=re)throw"Bad HeaderStorageBucket";var ie=ss(j[0].messages[0].data);for(O=0;O<a.length;++O){var xe=ss(ie[2][0].data);xe[1][0].data=bs(O),xe[4][0].data=bs(a[O].length),ie[2][O]={type:ie[2][0].type,data:to(xe)}}j[0].messages[0].data=to(ie)}b.content=Rg(Ig(j)),b.size=b.content.length;var de=jo(L[2][0].data);b=qr.find(u,o[de].location),j=Dc(Ic(b.content));{if(j[0].id!=de)throw"Bad HeaderStorageBucket";for(ie=ss(j[0].messages[0].data),D=0;D<=n.e.c;++D)xe=ss(ie[2][0].data),xe[1][0].data=bs(D),xe[4][0].data=bs(n.e.r+1),ie[2][D]={type:ie[2][0].type,data:to(xe)};j[0].messages[0].data=to(ie)}b.content=Rg(Ig(j)),b.size=b.content.length;var fe=jo(L[4][0].data);(function(){for(var K=qr.find(u,o[fe].location),te=Dc(Ic(K.content)),se,pe=0;pe<te.length;++pe){var oe=te[pe];oe.id==fe&&(se=oe)}var ye=ss(se.messages[0].data);{ye[3]=[];var we=[];i.forEach(function(me,_e){we[1]=[{type:0,data:bs(_e)}],we[2]=[{type:0,data:bs(1)}],we[3]=[{type:2,data:a1e(me)}],ye[3].push({type:2,data:to(we)})})}se.messages[0].data=to(ye);var Se=Ig(te),Ie=Rg(Se);K.content=Ie,K.size=K.content.length})();var H=ss(L[3][0].data);{var Q=H[1][0];delete H[2];var U=ss(Q.data);{var V=jo(U[2][0].data);(function(){for(var K=qr.find(u,o[V].location),te=Dc(Ic(K.content)),se,pe=0;pe<te.length;++pe){var oe=te[pe];oe.id==V&&(se=oe)}var ye=ss(se.messages[0].data);{delete ye[6],delete H[7];var we=new Uint8Array(ye[5][0].data);ye[5]=[];for(var Se=0,Ie=0;Ie<=n.e.r;++Ie){var me=ss(we);Se+=v1e(me,a[Ie],i),me[1][0].data=bs(Ie),ye[5].push({data:to(me),type:2})}ye[1]=[{type:0,data:bs(n.e.c+1)}],ye[2]=[{type:0,data:bs(n.e.r+1)}],ye[3]=[{type:0,data:bs(Se)}],ye[4]=[{type:0,data:bs(n.e.r+1)}]}se.messages[0].data=to(ye);var _e=Ig(te),We=Rg(_e);K.content=We,K.size=K.content.length})()}Q.data=to(U)}L[3][0].data=to(H)}C[4][0].data=to(L)}p.messages[0].data=to(C);var X=Ig(m),z=Rg(X);return f.content=z,f.size=f.content.length,u}function hU(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function W7(e){hU([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function H7(e){hU([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function b1e(e){return On.WS.indexOf(e)>-1?"sheet":e==On.CS?"chart":e==On.DS?"dialog":e==On.MS?"macro":e&&e.length?e:"sheet"}function _1e(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,b1e(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function S1e(e,t,r,n,s,a,i,o,c,u,d,f){try{a[n]=ay(ql(e,r,!0),t);var m=si(e,t),p;switch(o){case"sheet":p=Gge(m,t,s,c,a[n],u,d,f);break;case"chart":if(p=Vge(m,t,s,c,a[n],u,d,f),!p||!p["!drawel"])break;var x=Wx(p["!drawel"].Target,t),w=Ry(x),v=M0e(ql(e,x,!0),ay(ql(e,w,!0),x)),C=Wx(v,x),k=Ry(C);p=vge(ql(e,C,!0),C,c,ay(ql(e,k,!0),C),u,p);break;case"macro":p=qge(m,t,s,c,a[n],u,d,f);break;case"dialog":p=Kge(m,t,s,c,a[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var b=[];a&&a[n]&&Ma(a[n]).forEach(function(j){var A="";if(a[n][j].Type==On.CMNT){A=Wx(a[n][j].Target,t);var F=Qge(si(e,A,!0),A,c);if(!F||!F.length)return;$P(p,F,!1)}a[n][j].Type==On.TCMNT&&(A=Wx(a[n][j].Target,t),b=b.concat(O0e(si(e,A,!0),c)))}),b&&b.length&&$P(p,b,!0,c.people||[])}catch(j){if(c.WTF)throw j}}function Fc(e){return e.charAt(0)=="/"?e.slice(1):e}function k1e(e,t){if(Zp(),t=t||{},W7(t),Bc(e,"META-INF/manifest.xml")||Bc(e,"objectdata.xml"))return JP(e,t);if(Bc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof W3<"u"){if(e.FileIndex)return W3(e);var r=qr.utils.cfb_new();return oP(e).forEach(function(xe){Nn(r,xe,Doe(e,xe))}),W3(r)}throw new Error("Unsupported NUMBERS file")}if(!Bc(e,"[Content_Types].xml"))throw Bc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Bc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=oP(e),s=Ele(ql(e,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",si(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!si(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(iy=[],s.sst)try{iy=Jge(si(e,Fc(s.sst)),s.sst,t)}catch(xe){if(t.WTF)throw xe}t.cellStyles&&s.themes.length&&(c=Yge(ql(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=Xge(si(e,Fc(s.style)),s.style,c,t))}s.links.map(function(xe){try{var de=ay(ql(e,Ry(Fc(xe))),xe);return epe(si(e,Fc(xe)),de,xe,t)}catch{}});var d=Hge(si(e,Fc(s.workbooks[0])),s.workbooks[0],t),f={},m="";s.coreprops.length&&(m=si(e,Fc(s.coreprops[0]),!0),m&&(f=tz(m)),s.extprops.length!==0&&(m=si(e,Fc(s.extprops[0]),!0),m&&Dle(m,f,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=ql(e,Fc(s.custprops[0]),!0),m&&(p=Rle(m,t)));var x={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(de){return de.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(x.Props=f,x.Custprops=p),t.bookSheets&&typeof i<"u"&&(x.SheetNames=i),t.bookSheets?x.SheetNames:t.bookProps))return x;i={};var w={};t.bookDeps&&s.calcchain&&(w=Zge(si(e,Fc(s.calcchain)),s.calcchain));var v=0,C={},k,b;{var j=d.Sheets;f.Worksheets=j.length,f.SheetNames=[];for(var A=0;A!=j.length;++A)f.SheetNames[A]=j[A].name}var F=a?"bin":"xml",D=s.workbooks[0].lastIndexOf("/"),M=(s.workbooks[0].slice(0,D+1)+"_rels/"+s.workbooks[0].slice(D+1)+".rels").replace(/^\//,"");Bc(e,M)||(M="xl/_rels/workbook."+F+".rels");var O=ay(ql(e,M,!0),M.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=tpe(si(e,Fc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=I0e(si(e,Fc(s.people[0])),t)),O&&(O=_1e(O,d.Sheets));var L=si(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var W="sheet";if(O&&O[v]?(k="xl/"+O[v][1].replace(/[\/]?xl\//,""),Bc(e,k)||(k=O[v][1]),Bc(e,k)||(k=M.replace(/_rels\/.*$/,"")+O[v][1]),W=O[v][2]):(k="xl/worksheets/sheet"+(v+1-L)+"."+F,k=k.replace(/sheet0\./,"sheet.")),b=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var re=!1,ie=0;ie!=t.sheets.length;++ie)typeof t.sheets[ie]=="number"&&t.sheets[ie]==v&&(re=1),typeof t.sheets[ie]=="string"&&t.sheets[ie].toLowerCase()==f.SheetNames[v].toLowerCase()&&(re=1);if(!re)continue e}}S1e(e,k,b,f.SheetNames[v],v,C,i,W,t,d,c,u)}return x={Directory:s,Workbook:d,Props:f,Custprops:p,Deps:w,Sheets:i,SheetNames:f.SheetNames,Strings:iy,Styles:u,Themes:c,SSF:Xs(en)},t&&t.bookFiles&&(e.files?(x.keys=n,x.files=e.files):(x.keys=[],x.files={},e.FullPaths.forEach(function(xe,de){xe=xe.replace(/^Root Entry[\/]/,""),x.keys.push(xe),x.files[xe]=e.FileIndex[de]}))),t&&t.bookVBA&&(s.vba.length>0?x.vbaraw=si(e,Fc(s.vba[0]),!0):s.defaults&&s.defaults.bin===H0e&&(x.vbaraw=si(e,"xl/vbaProject.bin",!0))),x}function T1e(e,t){var r=t||{},n="Workbook",s=qr.find(e,n);try{if(n="/!DataSpaces/Version",s=qr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(tde(s.content),n="/!DataSpaces/DataSpaceMap",s=qr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=nde(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=qr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=sde(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=qr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);ide(s.content)}catch{}if(n="/EncryptionInfo",s=qr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=ode(s.content);if(n="/EncryptedPackage",s=qr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function C1e(e,t){return t.bookType=="ods"?fU(e,t):t.bookType=="numbers"?w1e(e,t):t.bookType=="xlsb"?N1e(e,t):E1e(e,t)}function N1e(e,t){tp=1024,e&&!e.SSF&&(e.SSF=Xs(en)),e&&e.SSF&&(Zp(),y4(e.SSF),t.revssf=w4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,oy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=$z.indexOf(t.bookType)>-1,s=A7();H7(t=t||{});var a=g7(),i="",o=0;if(t.cellXfs=[],yh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",Nn(a,i,rz(e.Props,t)),s.coreprops.push(i),Ss(t.rels,2,i,On.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,Nn(a,i,az(e.Props)),s.extprops.push(i),Ss(t.rels,3,i,On.EXT_PROPS),e.Custprops!==e.Props&&Ma(e.Custprops||{}).length>0&&(i="docProps/custom.xml",Nn(a,i,iz(e.Custprops)),s.custprops.push(i),Ss(t.rels,4,i,On.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],m=(f||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Nn(a,i,npe(o-1,i,t,e,d)),s.sheets.push(i),Ss(t.wbrels,-1,"worksheets/sheet"+o+"."+r,On.WS[0])}if(f){var p=f["!comments"],x=!1,w="";p&&p.length>0&&(w="xl/comments"+o+"."+r,Nn(a,w,ipe(p,w)),s.comments.push(w),Ss(d,-1,"../comments"+o+"."+r,On.CMNT),x=!0),f["!legacy"]&&x&&Nn(a,"xl/drawings/vmlDrawing"+o+".vml",Lz(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Nn(a,Ry(i),dp(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,Nn(a,i,ape(t.Strings,i,t)),s.strs.push(i),Ss(t.wbrels,-1,"sharedStrings."+r,On.SST)),i="xl/workbook."+r,Nn(a,i,rpe(e,i)),s.workbooks.push(i),Ss(t.rels,1,i,On.WB),i="xl/theme/theme1.xml",Nn(a,i,D7(e.Themes,t)),s.themes.push(i),Ss(t.wbrels,-1,"theme/theme1.xml",On.THEME),i="xl/styles."+r,Nn(a,i,spe(e,i,t)),s.styles.push(i),Ss(t.wbrels,-1,"styles."+r,On.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",Nn(a,i,e.vbaraw),s.vba.push(i),Ss(t.wbrels,-1,"vbaProject.bin",On.VBA)),i="xl/metadata."+r,Nn(a,i,ope(i)),s.metadata.push(i),Ss(t.wbrels,-1,"metadata."+r,On.XLMETA),Nn(a,"[Content_Types].xml",Z$(s,t)),Nn(a,"_rels/.rels",dp(t.rels)),Nn(a,"xl/_rels/workbook."+r+".rels",dp(t.wbrels)),delete t.revssf,delete t.ssf,a}function E1e(e,t){tp=1024,e&&!e.SSF&&(e.SSF=Xs(en)),e&&e.SSF&&(Zp(),y4(e.SSF),t.revssf=w4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,oy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=$z.indexOf(t.bookType)>-1,s=A7();H7(t=t||{});var a=g7(),i="",o=0;if(t.cellXfs=[],yh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",Nn(a,i,rz(e.Props,t)),s.coreprops.push(i),Ss(t.rels,2,i,On.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,Nn(a,i,az(e.Props)),s.extprops.push(i),Ss(t.rels,3,i,On.EXT_PROPS),e.Custprops!==e.Props&&Ma(e.Custprops||{}).length>0&&(i="docProps/custom.xml",Nn(a,i,iz(e.Custprops)),s.custprops.push(i),Ss(t.rels,4,i,On.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},m=e.Sheets[e.SheetNames[o-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Nn(a,i,Jz(o-1,t,e,f)),s.sheets.push(i),Ss(t.wbrels,-1,"worksheets/sheet"+o+"."+r,On.WS[0])}if(m){var x=m["!comments"],w=!1,v="";if(x&&x.length>0){var C=!1;x.forEach(function(k){k[1].forEach(function(b){b.T==!0&&(C=!0)})}),C&&(v="xl/threadedComments/threadedComment"+o+"."+r,Nn(a,v,D0e(x,d,t)),s.threadedcomments.push(v),Ss(f,-1,"../threadedComments/threadedComment"+o+"."+r,On.TCMNT)),v="xl/comments"+o+"."+r,Nn(a,v,Bz(x)),s.comments.push(v),Ss(f,-1,"../comments"+o+"."+r,On.CMNT),w=!0}m["!legacy"]&&w&&Nn(a,"xl/drawings/vmlDrawing"+o+".vml",Lz(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}f["!id"].rId1&&Nn(a,Ry(i),dp(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,Nn(a,i,Cz(t.Strings,t)),s.strs.push(i),Ss(t.wbrels,-1,"sharedStrings."+r,On.SST)),i="xl/workbook."+r,Nn(a,i,rU(e)),s.workbooks.push(i),Ss(t.rels,1,i,On.WB),i="xl/theme/theme1.xml",Nn(a,i,D7(e.Themes,t)),s.themes.push(i),Ss(t.wbrels,-1,"theme/theme1.xml",On.THEME),i="xl/styles."+r,Nn(a,i,Oz(e,t)),s.styles.push(i),Ss(t.wbrels,-1,"styles."+r,On.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",Nn(a,i,e.vbaraw),s.vba.push(i),Ss(t.wbrels,-1,"vbaProject.bin",On.VBA)),i="xl/metadata."+r,Nn(a,i,Rz()),s.metadata.push(i),Ss(t.wbrels,-1,"metadata."+r,On.XLMETA),d.length>1&&(i="xl/persons/person.xml",Nn(a,i,R0e(d)),s.people.push(i),Ss(t.wbrels,-1,"persons/person.xml",On.PEOPLE)),Nn(a,"[Content_Types].xml",Z$(s,t)),Nn(a,"_rels/.rels",dp(t.rels)),Nn(a,"xl/_rels/workbook."+r+".rels",dp(t.wbrels)),delete t.revssf,delete t.ssf,a}function G7(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Jl(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function A1e(e,t){return qr.find(e,"EncryptedPackage")?T1e(e,t):iU(e,t)}function j1e(e,t){var r,n=e,s=t||{};return s.type||(s.type=Pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=E$(n,s),k1e(r,s)}function mU(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return M6(e.slice(r),t);default:break e}return Cp.to_workbook(e,t)}function P1e(e,t){var r="",n=G7(e,t);switch(t.type){case"base64":r=Jl(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Rm(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=As(r)),t.type="binary",mU(r,t)}function M1e(e,t){var r=e;return t.type=="base64"&&(r=Jl(r)),r=Py.utils.decode(1200,r.slice(2),"str"),t.type="binary",mU(r,t)}function F1e(e){return e.match(/[^\x00-\x7F]/)?pd(e):e}function H3(e,t,r,n){return n?(r.type="string",Cp.to_workbook(e,r)):Cp.to_workbook(t,r)}function D6(e,t){u7();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return D6(new Uint8Array(e),(r=Xs(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),hp={},r.dateNF&&(hp.dateNF=r.dateNF),r.type||(r.type=Pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Pn?"buffer":"binary",n=Noe(e),typeof Uint8Array<"u"&&!Pn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=F1e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Xs(r),r.type="array",D6(d7(n),r)}switch((s=G7(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return A1e(qr.read(n,r),r);break;case 9:if(s[1]<=8)return iU(n,r);break;case 60:return M6(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Lue(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return kz.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?j1e(n,r):H3(e,n,r,a);case 239:return s[3]===60?M6(n,r):H3(e,n,r,a);case 255:if(s[1]===254)return M1e(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return pm.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return pm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return P6.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return Pz.to_workbook(n,r);break;case 10:case 13:case 32:return P1e(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Rue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?P6.to_workbook(n,r):H3(e,n,r,a)}function gU(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Sv(t.file,qr.write(e,{type:Pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return qr.write(e,t)}function O1e(e,t){var r=Xs(t||{}),n=C1e(e,r);return D1e(n,r)}function D1e(e,t){var r={},n=Pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?qr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(x4(s))}return t.password&&typeof encrypt_agile<"u"?gU(encrypt_agile(s,t.password),t):t.type==="file"?Sv(t.file,s):t.type=="string"?As(s):s}function I1e(e,t){var r=t||{},n=Fpe(e,r);return gU(n,r)}function ud(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return My(pd(n));case"binary":return pd(n);case"string":return e;case"file":return Sv(t.file,n,"utf8");case"buffer":return Pn?F0(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):ud(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function R1e(e,t){switch(t.type){case"base64":return My(e);case"binary":return e;case"string":return e;case"file":return Sv(t.file,e,"binary");case"buffer":return Pn?F0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function G2(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?My(r):t.type=="string"?As(r):r;case"file":return Sv(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function pU(e,t){u7(),Age(e);var r=Xs(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=pU(e,r);return r.type="array",x4(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ud(Cpe(e,r),r);case"slk":case"sylk":return ud(Sz.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ud(lU(e.Sheets[e.SheetNames[s]],r),r);case"txt":return R1e(xU(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ud(V7(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ud(kz.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return G2(P6.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ud(Cp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ud(Pz.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ud(Tz.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ud(fU(e,r),r);case"wk1":return G2(pm.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return G2(pm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),G2(oU(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),I1e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return O1e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function L1e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function B1e(e,t,r){var n={};return n.type="file",n.file=t,L1e(n),pU(e,n)}function $1e(e,t,r,n,s,a,i,o){var c=Xa(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var x=i?e[r][p]:e[n[p]+c];if(x===void 0||x.t===void 0){if(u===void 0)continue;a[p]!=null&&(m[a[p]]=u);continue}var w=x.v;switch(x.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(a[p]!=null){if(w==null)if(x.t=="e"&&w===null)m[a[p]]=null;else if(u!==void 0)m[a[p]]=u;else if(d&&w===null)m[a[p]]=null;else continue;else m[a[p]]=d&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?w:C0(x,w,o);w!=null&&(f=!1)}}return{row:m,isempty:f}}function lb(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=es(d);break;case"number":c=es(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(s=0);var f=Xa(c.s.r),m=[],p=[],x=0,w=0,v=Array.isArray(e),C=c.s.r,k=0,b={};v&&!e[C]&&(e[C]=[]);var j=u.skipHidden&&e["!cols"]||[],A=u.skipHidden&&e["!rows"]||[];for(k=c.s.c;k<=c.e.c;++k)if(!(j[k]||{}).hidden)switch(m[k]=ga(k),r=v?e[C][k]:e[m[k]+f],n){case 1:a[k]=k-c.s.c;break;case 2:a[k]=m[k];break;case 3:a[k]=u.header[k-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=C0(r,null,u),w=b[i]||0,!w)b[i]=1;else{do o=i+"_"+w++;while(b[o]);b[i]=w,b[o]=1}a[k]=o}for(C=c.s.r+s;C<=c.e.r;++C)if(!(A[C]||{}).hidden){var F=$1e(e,c,C,m,n,a,v,u);(F.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[x++]=F.row)}return p.length=x,p}var rM=/"/g;function z1e(e,t,r,n,s,a,i,o){for(var c=!0,u=[],d="",f=Xa(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var p=o.dense?(e[r]||[])[m]:e[n[m]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:C0(p,null,o));for(var x=0,w=0;x!==d.length;++x)if((w=d.charCodeAt(x))===s||w===a||w===34||o.forceQuotes){d='"'+d.replace(rM,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(rM,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function V7(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=es(e["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],x=s.s.c;x<=s.e.c;++x)(m[x]||{}).hidden||(f[x]=ga(x));for(var w=0,v=s.s.r;v<=s.e.r;++v)(p[v]||{}).hidden||(d=z1e(e,s,v,f,i,c,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((w++?o:"")+d)));return delete n.dense,r.join("")}function xU(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=V7(e,t);return r}function U1e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=es(e["!ref"]),a="",i=[],o,c=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)i[o]=ga(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Xa(d),o=s.s.c;o<=s.e.c;++o)if(t=i[o]+a,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function yU(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?pa(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+s}};if(a["!ref"]){var f=es(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+s)}else i==-1&&(i=0,d.e.r=t.length-1+s);var m=n.header||[],p=0;t.forEach(function(w,v){Ma(w).forEach(function(C){(p=m.indexOf(C))==-1&&(m[p=m.length]=C);var k=w[C],b="z",j="",A=nn({c:o+p,r:i+v+s});u=Hy(a,A),k&&typeof k=="object"&&!(k instanceof Date)?a[A]=k:(typeof k=="number"?b="n":typeof k=="boolean"?b="b":typeof k=="string"?b="s":k instanceof Date?(b="d",n.cellDates||(b="n",k=bi(k)),j=n.dateNF||en[14]):k===null&&n.nullError&&(b="e",k=0),u?(u.t=b,u.v=k,delete u.w,delete u.R,j&&(u.z=j)):a[A]=u={t:b,v:k},j&&(u.z=j))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var x=Xa(i);if(s)for(p=0;p<m.length;++p)a[ga(p+o)+x]={t:"s",v:m[p]};return a["!ref"]=Tn(d),a}function W1e(e,t){return yU(null,e,t)}function Hy(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=pa(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Hy(e,nn(t)):Hy(e,nn({r:t,c:r||0}))}function H1e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function q7(){return{SheetNames:[],Sheets:{}}}function K7(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=i+s)!=-1;++s);}if(tU(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function G1e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=H1e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function V1e(e,t){return e.z=t,e}function vU(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function q1e(e,t,r){return vU(e,"#"+t,r)}function K1e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function X1e(e,t,r,n){for(var s=typeof t!="string"?t:es(t),a=typeof t=="string"?t:Tn(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var c=Hy(e,i,o);c.t="n",c.F=a,delete c.v,i==s.s.r&&o==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var yw={encode_col:ga,encode_row:Xa,encode_cell:nn,encode_range:Tn,decode_col:S7,decode_row:_7,split_cell:ale,decode_cell:pa,decode_range:Cl,format_cell:C0,sheet_add_aoa:V$,sheet_add_json:yU,sheet_add_dom:cU,aoa_to_sheet:e1,json_to_sheet:W1e,table_to_sheet:uU,table_to_book:t1e,sheet_to_csv:V7,sheet_to_txt:xU,sheet_to_json:lb,sheet_to_html:lU,sheet_to_formulae:U1e,sheet_to_row_object_array:lb,sheet_get_cell:Hy,book_new:q7,book_append_sheet:K7,book_set_sheet_visibility:G1e,cell_set_number_format:V1e,cell_set_hyperlink:vU,cell_set_internal_link:q1e,cell_add_comment:K1e,sheet_set_array_formula:X1e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const wU=({onBackToCabinet:e,selectedGrade:t,selectedClass:r,openRetestModal:n,forceRefreshOnMount:s=!1})=>{Nl(),Hb();const{user:a,isAuthenticated:i}=Js(),{showNotification:o}=_i(),c=S.useCallback(vt=>{let Re=null;if(typeof vt?.percentage=="number"&&!Number.isNaN(vt.percentage))return Re=Math.round(vt.percentage),console.debug("[TeacherResults] Using provided percentage",{percentage:vt.percentage,rounded:Re,result:vt}),Re;const Qt=vt?.retest_best_score??vt?.score,Bt=vt?.retest_best_max_score??vt?.max_score,Or=Number(Qt??0),Zt=Number(Bt??0);return Zt>0&&(Re=Math.round(Or/Zt*100)),Re},[]);S.useCallback(vt=>{const Re=c(vt);return Re===null?"text-gray-600":Re<50?"text-red-600 font-semibold":Re<70?"text-yellow-600":"text-green-600"},[c]),S.useCallback(vt=>{const Re=c(vt);return Re!==null&&Re<50},[c]);const[u,d]=S.useState(null),[f,m]=S.useState(!0),[p,x]=S.useState(""),[w,v]=S.useState([]),[C,k]=S.useState(null),[b,j]=S.useState(!1),[A,F]=S.useState([]),[D,M]=S.useState([]),[O,L]=S.useState([1,2]),[W,re]=S.useState(null),[ie,xe]=S.useState(null),[de,fe]=S.useState(null),[H,Q]=S.useState("main"),[U,V]=S.useState(null),[X,z]=S.useState(null),K=U||t,te=X||r,[se,pe]=S.useState(null),[oe,ye]=S.useState({}),[we,Se]=S.useState(!1),[Ie,me]=S.useState(new Set),[_e,We]=S.useState(!0),[Ue,St]=S.useState(null),[Ze,Kt]=S.useState(null),[yt,Rt]=S.useState(!1),[At,wt]=S.useState(!1),[Ft,or]=S.useState(!1),dr=S.useRef(null),[nr,Xe]=S.useState(null),[Qe,ut]=S.useState(!1),[mt,ht]=S.useState(null),[Ot,nt]=S.useState(!1),[sr,kr]=S.useState(null),[Er,Gr]=S.useState(""),[Ar,vr]=S.useState(""),[Ee,Be]=S.useState(!1),[qe,Ye]=S.useState(!1),[Lt,ze]=S.useState(null),[it,Le]=S.useState(""),[st,rt]=S.useState(!1),[qt,Xt]=S.useState(new Set),[Yt,Z]=S.useState({}),[ae,jt]=S.useState(!1),[G,ue]=S.useState(null),[Ce,be]=S.useState(""),[Me,De]=S.useState(!1),[Ve,bt]=S.useState(null),[ot,dt]=S.useState(null),[ee,je]=S.useState(!1),[ge,Ke]=S.useState(!1),[tt,Tt]=S.useState({}),cr=S.useRef(new Set),Vt=S.useRef({}),$t=S.useRef(null);S.useEffect(()=>{console.log(" editingColumns state changed:",Array.from(qt)),cr.current=qt},[qt]),S.useEffect(()=>{console.log(" columnScores state changed:",Yt),Vt.current=Yt},[Yt]);const mr=S.useCallback(vt=>{console.log(" Toggling test collapse for:",vt),me(Re=>{const Qt=new Set(Re);return Qt.has(vt)?(Qt.delete(vt),console.log(" Expanding test:",vt)):(Qt.add(vt),console.log(" Collapsing test:",vt)),console.log(" New collapsed tests:",Array.from(Qt)),Qt})},[]),Zr=S.useCallback(()=>{if(dr.current){const{scrollLeft:vt,scrollWidth:Re,clientWidth:Qt}=dr.current;wt(vt>0),or(vt<Re-Qt-1)}},[]);S.useEffect(()=>{Pr()},[]),S.useEffect(()=>{if(W&&dr.current){const vt=setTimeout(Zr,100);return()=>clearTimeout(vt)}},[W,Zr]),S.useEffect(()=>{console.log(" Current collapsed tests state:",Array.from(Ie))},[Ie]);const jr=S.useCallback(async(vt,Re=!1)=>{try{Se(!0);const Qt=a?.teacher_id,Bt=`${K}/${te}`,Or=await qae.getTeacherStudentResults(Qt,K,Bt,vt,Re);if(Or.success){console.log(" Results loaded for term:",vt,Or.results?.length||0,"results"),console.log(" Students loaded:",Or.students?.length||0,"students");const Zt=[],on=new Set,Cn=new Set;Or.results&&Or.results.length>0&&Or.results.forEach(gt=>{gt.test_name&&!on.has(gt.test_name)&&(on.add(gt.test_name),Zt.push({test_name:gt.test_name,test_type:gt.test_type,subject:gt.subject})),gt.subject&&Cn.add(gt.subject)});const _t=(Or.students||[]).map(gt=>{const En={};return(Or.results||[]).filter(Lr=>Lr.student_id===gt.student_id).forEach(Lr=>{Lr.test_name&&(En[Lr.test_name]={id:Lr.id,test_type:Lr.test_type,test_id:Lr.test_id,subject_id:Lr.subject_id,score:Lr.score,max_score:Lr.max_score,retest_offered:Lr.retest_offered,caught_cheating:Lr.caught_cheating,visibility_change_times:Lr.visibility_change_times,answers:Lr.answers,ai_feedback:Lr.ai_feedback,name:Lr.name,surname:Lr.surname,test_name:Lr.test_name})}),{...gt,...En}}),pr={results:Or.results||[],students:_t,class:_t,unique_tests:Zt,subjects:Array.from(Cn),count:Or.count||0,student_count:Or.student_count||0};console.log(" Processed results data:",{uniqueTests:Zt.length,subjects:Array.from(Cn),resultsCount:Or.results?.length||0,studentsWithScores:_t.length,sampleStudent:_t[0]}),re(pr),ye(pr),fe(new Date)}}catch(Qt){console.error(" Error loading results for term:",Qt),re(null),ye(null)}finally{Se(!1)}},[a,K,te]);S.useEffect(()=>{(async()=>{try{Rt(!0),await Iu.loadAcademicCalendar();const Re=Iu.getCurrentSemesterTerms();Kt(Re),Re?.currentTerm&&(St(Re.currentTerm.id),K&&te&&jr(Re.currentTerm.id,s))}catch(Re){console.error(" Error initializing academic calendar:",Re)}finally{Rt(!1)}})()},[K,te,jr,s]),S.useEffect(()=>{t&&r&&(console.log(" Props detected:",{grade:t,class:r}),Ze?.currentTerm&&(St(Ze.currentTerm.id),jr(Ze.currentTerm.id,s)))},[t,r,Ze,jr,s]);const Pr=S.useCallback(async()=>{console.log(" Initializing teacher results...");try{if(m(!0),x(""),!i||!a){console.log(" User not authenticated"),x("User not authenticated");return}if(a.role!==el.TEACHER){console.error(" Invalid user role for teacher results:",a.role),x("Access denied. Teacher role required.");return}console.log(" Loading teacher assignments..."),await xn(),console.log(" TODO: Load academic calendar service"),console.log(" Teacher results initialization complete!")}catch(vt){console.error(" Error initializing teacher results:",vt),x("Failed to initialize teacher results")}finally{m(!1)}},[i,a]),xn=S.useCallback(async()=>{console.log(" Loading teacher assignments...");try{const vt=`teacher_data_${a?.teacher_id||a?.id||""}`;let Re=ja(vt);Re&&Re.subjects&&Re.subjects.length>0&&(Re.subjects.some(_t=>_t.subject&&_t.classes&&_t.classes.length>0)||(console.log(" Cached data has invalid subject structure, forcing refresh"),localStorage.removeItem(vt),Re=null)),Re?console.log(" Cache HIT! Using cached teacher data"):(console.log(" Cache MISS! Fetching teacher data from API"),Re=await na.getTeacherData(),console.log(" Teacher data loaded:",Re),ha(vt,Re,Aa.teacher_subjects)),d(Re);const Qt=[];Re&&Re.subjects&&(console.log(" Teacher subjects structure:",Re.subjects),Re.subjects.forEach(Cn=>{console.log(" Processing subject:",Cn),Cn.classes&&Cn.classes.forEach(_t=>{_t.grade&&_t.class&&Qt.push({grade:_t.grade,class:_t.class,subject:Cn.subject||Cn.name||"Unknown Subject"})})})),M(Qt),console.log(" Available classes from teacher data:",Qt);const Bt=`teacher_tests_${a?.teacher_id||a?.id||""}`,Or=ja(Bt);Or&&Or.some(Cn=>Cn.test_type==="drawing")&&(console.log(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(Bt));let Zt=ja(Bt);Zt?console.log(" Cache HIT! Using cached teacher tests"):(console.log(" Cache MISS! Fetching teacher tests from API"),Zt=await Kn.getTeacherTests(),console.log(" Teacher tests loaded:",Zt),ha(Bt,Zt,Aa.teacher_tests));const on=Zt.flatMap(Cn=>Cn.assignments||[]);v(on),console.log(" Raw assignments data:",on),console.log(" Teacher assignments loaded:",on.length)}catch(vt){console.error(" Error loading teacher assignments:",vt),o("Failed to load teacher assignments","error")}},[o]),Kr=S.useCallback(async(vt,Re)=>{console.log(" Showing classes for grade:",vt,"class:",Re),V(vt),z(Re),k(null),re(null),vt&&Re&&console.log(" TODO: Implement academic calendar service for term selection")},[]);S.useCallback((vt,Re)=>{console.log(" Showing semesters for class:",vt,Re),k(null),re(null),console.log(" TODO: Implement academic calendar service for term selection")},[]),S.useCallback((vt,Re)=>{console.log(" Class clicked:",vt,Re),j(!0),console.log(" TODO: Implement academic calendar service for term selection")},[]);const Ir=S.useCallback(async(vt,Re=!1)=>{!K||!te||(console.log(" Loading results for semester:",vt,"forceRefresh:",Re),k(vt),Ze?.currentTerm&&await jr(Ze.currentTerm.id,Re))},[K,te,Ze,jr]),Os=S.useCallback(()=>Ze?l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current Semester: ",Ze?.semester===1?"Semester 1":"Semester 2"]}),l.jsx("div",{className:"flex space-x-4",children:Ze?.terms.map(vt=>l.jsx(Nt.button,{className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${vt.isCurrent?"bg-blue-600 text-white shadow-lg":Ue===vt.id?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>{St(vt.id),jr(vt.id)},whileHover:{scale:1.05},whileTap:{scale:.95},children:vt.label},vt.id))})]}):l.jsx("div",{className:"flex space-x-4 mb-6",children:l.jsx("div",{className:"px-6 py-3 rounded-lg bg-gray-200 text-gray-500",children:"Loading terms..."})}),[Ze,Ue,jr]);S.useCallback(vt=>vt.reduce((Re,Qt)=>(Re[Qt.student_id]||(Re[Qt.student_id]=[]),Re[Qt.student_id].push(Qt),Re),{}),[]),S.useCallback(vt=>{if(vt.length===0)return 0;const Re=vt.reduce((Qt,Bt)=>Qt+(Bt.percentage||0),0);return Math.round(Re/vt.length)},[]),S.useCallback(vt=>{vt.score<vt.passing_score&&window.confirm("Give another try?")&&Yn(vt.student_id,vt.test_id)},[]);const Yn=S.useCallback(async(vt,Re)=>{try{(await fetch("/.netlify/functions/reset-test-attempt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:vt,testId:Re})})).ok&&(te&&Ir(C,!0),o("Test made accessible to student","success"))}catch(Qt){console.error("Error resetting test attempt:",Qt),o("Failed to reset test attempt","error")}},[te,C,Ir,o]),Vn=S.useCallback((vt,Re)=>{if(vt===null||Re===null)return"";const Qt=Math.round(vt/Re*100);return Qt>=80?"text-green-600 bg-green-50":Qt>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"},[]),ts=S.useCallback(vt=>{Xe(vt),ut(!0)},[]),Bs=S.useCallback((vt,Re="overview",Qt)=>{try{const Or=!!vt?.ai_feedback,Zt=typeof vt?.ai_feedback;let on=[];if(Or)if(Zt==="string")try{on=Object.keys(JSON.parse(vt.ai_feedback))}catch{on=["<invalid json>"]}else Zt==="object"&&(on=Object.keys(vt.ai_feedback||{}));console.log("[AI DEBUG] Opening speaking result",{hasAi:Or,aiType:Zt,aiKeys:on})}catch{}const Bt={...vt,__initialTab:Re};Qt&&(Bt.__audioUrl=Qt),ht(Bt),nt(!0)},[]),hn=S.useCallback(async(vt,Re)=>{if(!vt||!Re)return console.error("fetchTestQuestions: Missing testType or testId",{testType:vt,testId:Re}),null;const Qt=`${vt}_${Re}`;if(tt[Qt])return console.log(" Using cached questions for",Qt),tt[Qt];Ke(!0);try{console.log(" Fetching questions for",{testType:vt,testId:Re});const Bt=await Kn.getTestQuestions(vt,Re);return console.log(" Questions fetched:",Bt?.length||0,"questions"),Tt(Or=>({...Or,[Qt]:Bt})),Bt}catch(Bt){return console.error(" Error fetching test questions:",Bt),o("Failed to load test questions","error"),null}finally{Ke(!1)}},[tt,o]),Pe=S.useCallback(async(vt,Re)=>{if(console.log(" Opening answer modal for:",{testResult:vt,test:Re}),console.log(" [handleViewAnswers] testResult.answers:",vt?.answers),console.log(" [handleViewAnswers] testResult.answers type:",typeof vt?.answers),console.log(" [handleViewAnswers] Full testResult keys:",vt?Object.keys(vt):"null"),vt.test_type==="drawing"||Re?.test_type==="drawing"){ts(vt);return}if(vt.test_type==="speaking"||Re?.test_type==="speaking"){Bs(vt);return}const Qt=vt.test_type||Re?.test_type;if(Qt==="word_matching"||Qt==="matching_type"){o("Word matching and picture matching tests have separate view mechanisms","info");return}bt(vt),dt(null),je(!0),Ke(!0);const Bt=vt.test_id||Re?.test_id;if(!Qt||!Bt){o("Unable to load test questions: Missing test type or ID","error"),Ke(!1);return}try{const Or=await hn(Qt,Bt);Or?dt(Or):o("Failed to load test questions","error")}finally{Ke(!1)}},[hn,ts,Bs,o]);S.useCallback((vt,Re,Qt)=>{kr({resultId:vt,score:Re,maxScore:Qt}),Gr(Re?.toString()||""),vr(Qt?.toString()||""),Ye(!0)},[]),S.useCallback(vt=>{Gr(vt)},[]),S.useCallback(vt=>{vr(vt)},[]),S.useCallback(async()=>{if(sr){Be(!0);try{const vt={resultId:sr.resultId,score:parseInt(Er)||0,maxScore:parseInt(Ar)||1};(await fetch(Tx.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(vt)})).ok?(o("Score updated successfully","success"),te&&Ir(C,!0),kr(null),Gr(""),vr(""),Ye(!1)):o("Failed to update score","error")}catch(vt){console.error("Error updating score:",vt),o("Failed to update score","error")}finally{Be(!1)}}},[sr,Er,Ar,te,C,Ir,o]),S.useCallback(()=>{kr(null),Gr(""),vr(""),Ye(!1)},[]);const Ut=S.useCallback((vt,Re)=>{ze({resultId:vt,score:Re}),Le(Re.toString())},[]),Vr=S.useCallback(async()=>{if(Lt){rt(!0);try{const vt={resultId:Lt.resultId,score:parseInt(it)||0},Re=await fetch(Tx.UPDATE_SPEAKING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(vt)});if(Re.ok){const Qt=await Re.json();o("Speaking test score updated successfully","success"),mt&&ht(Bt=>({...Bt,score:Qt.score,percentage:Qt.percentage})),te&&Ir(C,!0),ze(null),Le("")}else{const Qt=await Re.json();o(Qt.error||"Failed to update speaking test score","error")}}catch(vt){console.error("Error updating speaking test score:",vt),o("Failed to update speaking test score","error")}finally{rt(!1)}}},[Lt,it,te,C,Ir,o]),Xr=S.useCallback(()=>{ze(null),Le("")},[]),xs=(vt,Re)=>{console.log(" Starting column editing for drawing test:",vt),console.log(" Current editingColumns before update:",Array.from(qt)),console.log(" Results data passed to function:",Re),Xt(Qt=>{const Bt=new Set(Qt).add(vt);return console.log(" Updated editingColumns:",Array.from(Bt)),Bt}),console.log(" Initializing column scores for test:",vt),console.log(" Results data:",Re),console.log(" Results.class:","null"),console.log(" No results or class data available")},Dn=S.useCallback(vt=>{Xt(Re=>{const Qt=new Set(Re);return Qt.delete(vt),Qt}),Z(Re=>{const Qt={...Re};return delete Qt[vt],Qt})},[]),Je=S.useCallback((vt,Re,Qt,Bt)=>{const Or=Bt.toString();Vt.current[vt]||(Vt.current[vt]={}),Vt.current[vt][Re]||(Vt.current[vt][Re]={}),Vt.current[vt][Re][Qt]=Or;const Zt=parseInt(Bt)||0;Z(on=>({...on,[vt]:{...on[vt],[Re]:{...on[vt]?.[Re],[Qt]:Zt}}}))},[]);S.useCallback(async vt=>{if(Vt.current[vt]){jt(!0);try{const Re=Object.entries(Vt.current[vt]).map(([Zt,on])=>({resultId:on.resultId,score:parseInt(on.score)||0,maxScore:parseInt(on.maxScore)||100}));console.log(" Saving column scores for",vt,":",Re);const Qt=Re.map(Zt=>(console.log(" Sending update:",Zt),fetch(Tx.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Zt)})));(await Promise.all(Qt)).every(Zt=>Zt.ok)?(o(`Scores updated successfully for ${vt}`,"success"),te&&Ir(C,!0),Dn(vt)):o("Failed to update some scores","error")}catch(Re){console.error("Error updating column scores:",Re),o("Failed to update scores","error")}finally{jt(!1)}}},[Yt,te,C,Ir,o,Dn]);const Pt=S.useCallback((vt,Re,Qt)=>!Re||Re.length===0?l.jsx(Nt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:l.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):l.jsx(Nt.div,{className:"relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:l.jsxs(Nt.div,{className:"bg-white rounded-lg shadow-lg overflow-hidden",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[l.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:Bt=>{dr.current&&(dr.current.scrollLeft=Bt.target.scrollLeft)},children:l.jsx("div",{className:"min-w-full h-1",children:l.jsx("div",{className:"h-1",style:{width:`${(Qt.length+5)*120}px`}})})}),l.jsx("div",{ref:dr,className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:Bt=>{Zr(Bt);const Or=Bt.target.previousElementSibling;Or&&(Or.scrollLeft=Bt.target.scrollLeft)},children:l.jsxs("table",{className:"min-w-full border-collapse text-sm min-w-max",children:[l.jsx("thead",{children:l.jsxs(Nt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-20 text-center",children:"Student ID"}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 ${_e?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[180px] bg-blue-50 cursor-pointer select-none"}`,onClick:Bt=>{Bt.preventDefault(),Bt.stopPropagation(),We(!_e)},title:"Toggle student name columns",children:_e?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),l.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-16 text-center",children:"No."}),l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 min-w-[100px]",children:"Nickname"}),Qt.map((Bt,Or)=>{const Zt=Ie.has(Bt.test_name),on=Bt.test_type==="drawing",Cn=cr.current.has(Bt.test_name);return console.log(` Rendering test ${Bt.test_name}:`,{isDrawingTest:on,isEditingColumn:Cn,editingColumns:Array.from(cr.current),test_type:Bt.test_type}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 cursor-pointer hover:bg-blue-200 transition-colors select-none ${Zt?"w-8 min-w-[32px] max-w-[32px] bg-gray-100":"min-w-[100px] bg-blue-50"}`,onClick:_t=>{_t.preventDefault(),_t.stopPropagation(),mr(Bt.test_name)},children:Zt?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:Bt.test_name,children:Bt.test_name.length>8?Bt.test_name.substring(0,8)+"...":Bt.test_name}),l.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})},Or)})]})}),l.jsx("tbody",{children:l.jsx(wl,{children:Re.map((Bt,Or)=>l.jsxs(Nt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${Or%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1+Or*.05,ease:"easeOut"},whileHover:{scale:1.01,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.99},children:[l.jsx(Nt.td,{className:"border-b border-gray-100 px-4 py-4 text-center font-semibold text-gray-900",whileHover:{scale:1.05},transition:{duration:.2},children:Bt.student_id}),_e?l.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Zt=>{Zt.preventDefault(),Zt.stopPropagation(),We(!1)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):l.jsxs(l.Fragment,{children:[l.jsx(Nt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:Bt.name}),l.jsx(Nt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:Bt.surname})]}),l.jsx(Nt.td,{className:"border-b border-gray-100 px-4 py-4 text-center text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:Bt.number??Or+1}),l.jsx(Nt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-600",whileHover:{scale:1.02},transition:{duration:.2},children:Bt.nickname||"-"}),Qt.map((Zt,on)=>{const Cn=Ie.has(Zt.test_name),_t=Bt[Zt.test_name];return Cn?(console.log(" Rendering collapsed column for test:",Zt.test_name),l.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:pr=>{pr.preventDefault(),pr.stopPropagation(),console.log(" Clicked on collapsed arrow for:",Zt.test_name),mr(Zt.test_name)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},on)):l.jsx(Nt.td,{className:"border-b border-gray-100 px-2 py-4 text-sm min-w-[100px]",initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},transition:{duration:.3},whileHover:{scale:1.02},onClick:pr=>{console.debug("[TeacherResults] Main table TD clicked",{testResult:_t,student:Bt.student_id});const gt=_t?.test_type||Zt?.test_type;if(gt==="drawing"||gt==="speaking"||gt==="word_matching"||gt==="matching_type")return;const En=c(_t);if(En!==null&&En<50){if(_t?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:Bt.student_id,test:Zt}),n({failedStudentIds:[Bt.student_id],test_type:Zt.test_type,original_test_id:_t?.test_id||Zt.test_id,subject_id:_t?.subject_id||Zt.subject_id,grade:t,class:r})}else Pe(_t,Zt)},children:_t&&_t.test_type==="drawing"?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsx("button",{onClick:()=>ts(_t),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"View Drawing"}),(()=>{const pr=`${Zt.test_name}|${Bt.student_id}`,gt=G===pr,En=Number.isFinite(_t?.score)?_t.score:0;if(!gt){const rn=c(_t),Lr=rn!==null&&rn<50,$n=rn!==null&&rn>=50&&rn<70,ds=_t?.retest_offered===!0,Cs=rn===null?"text-gray-600":Lr?"text-red-600 font-semibold":$n?"text-yellow-600":"text-green-600";return l.jsxs(Nt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${Cs} cursor-pointer hover:opacity-90 ${ds?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:Lr?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:xo=>{xo.preventDefault(),xo.stopPropagation(),Lr&&!ds?n({failedStudentIds:[Bt.student_id],test_type:Zt.test_type,original_test_id:_t?.test_id||Zt.test_id,subject_id:_t?.subject_id||Zt.subject_id,grade:t,class:r}):(ue(pr),be(String(En)))},title:ds?"Retest offered":Lr?"Offer retest":"Double-click to edit score",children:[(()=>{const xo=_t.retest_best_score??_t.score,tc=_t.retest_best_max_score??_t.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:Lr?"text-red-700":"",children:xo}),"/",l.jsx("span",{children:tc})]})})(),_t.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})}return l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:10,value:Ce,onChange:rn=>be(rn.target.value),onBlur:async()=>{const rn=Math.max(0,Math.min(10,parseFloat(Ce||"0")));De(!0);try{const Lr={resultId:_t?.id,score:rn,maxScore:10},$n=await(window.tokenManager?.getToken()||ka.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Tx.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:$n?`Bearer ${$n}`:""},body:JSON.stringify(Lr)})).ok)throw new Error("Failed to save")}catch{}finally{De(!1),ue(null),Ir(C,!0)}},onKeyDown:async rn=>{rn.key==="Enter"?rn.currentTarget.blur():rn.key==="Escape"&&ue(null)},className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",disabled:Me}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",value:10,className:"w-12 px-2 py-1 text-xs border border-gray-300 bg-gray-100 rounded",disabled:!0})]})})(),_t.caught_cheating&&_t.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",_t.visibility_change_times,")"]})]}):_t&&(_t.test_type==="speaking"||Zt.test_type==="speaking")?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[(()=>{const pr=_t?.answers;let gt;if(typeof pr=="string")if(/^https?:\/\//i.test(pr))gt=pr;else try{gt=JSON.parse(pr)?.audio_url}catch{}else pr&&typeof pr=="object"&&(gt=pr.audio_url);return!gt&&_t?.audio_url&&(gt=_t.audio_url),l.jsx(l.Fragment,{children:l.jsx("button",{onClick:()=>Bs({..._t,__studentId:Bt.student_id},"audio",gt),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Results"})})})(),(()=>{const pr=cr.current.has(Zt.test_name);return console.log(` Score cell for ${Zt.test_name}:`,{isEditing:pr,editingColumns:Array.from(cr.current),test_name:Zt.test_name}),pr})()?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:_t.max_score||100,value:Vt.current[Zt.test_name]?.[Bt.student_id]?.score||_t.score||"",onChange:pr=>Je(Zt.test_name,Bt.student_id,"score",pr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",min:"1",value:Vt.current[Zt.test_name]?.[Bt.student_id]?.maxScore||_t.max_score||100,onChange:pr=>Je(Zt.test_name,Bt.student_id,"maxScore",pr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):l.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium",onDoubleClick:()=>{console.log(" Double-clicked on speaking test score:",Zt.test_name),console.log(" Results state at double-click:",W),console.log(" Test result:",_t),console.log(" Student:",Bt),console.log(" Test:",Zt),_t&&_t.id?(console.log(" Starting column editing for speaking test:",Zt.test_name),xs(Zt.test_name)):console.log(" No test result ID found, cannot edit")},title:"Double-click to edit scores",children:[(()=>{const pr=c(_t),gt=pr!==null&&pr<50,En=pr!==null&&pr>=50&&pr<70,rn=_t.retest_offered,Lr=pr===null?"text-gray-600":gt?"text-red-600 font-semibold":En?"text-yellow-600":"text-green-600";return l.jsxs(Nt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${Lr} cursor-pointer hover:opacity-90 ${rn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:gt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:$n=>{$n.preventDefault(),$n.stopPropagation(),gt&&!rn&&(console.log(" Offering retest for speaking test:",Zt.test_name),n({failedStudentIds:[Bt.student_id],test_type:Zt.test_type,original_test_id:_t?.test_id||Zt.test_id,subject_id:_t?.subject_id||Zt.subject_id,grade:t,class:r}))},title:rn?"Retest offered":gt?"Offer retest":'Use "View Results" button to review',children:[(()=>{const $n=_t.retest_best_score??_t.score,ds=_t.retest_best_max_score??_t.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:gt?"text-red-700":"",children:$n}),"/",l.jsx("span",{children:ds})]})})(),_t.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),_t.caught_cheating&&_t.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",_t.visibility_change_times,")"]})]})]}):_t&&_t.score!==null&&_t.score!==void 0?l.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[(()=>{const pr=c(_t),gt=pr!==null&&pr<50,En=pr!==null&&pr>=50&&pr<70,rn=pr===null?"text-gray-600":gt?"text-red-600 font-semibold":En?"text-yellow-600":"text-green-600",Lr=_t?.retest_offered===!0;return l.jsxs(Nt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${rn} cursor-pointer hover:opacity-90 ${Lr?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:gt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:$n=>{$n.preventDefault(),$n.stopPropagation();const ds=_t?.test_type||Zt?.test_type;if(!(ds==="drawing"||ds==="speaking")){if(_t?.retest_offered){o("Retest is already offered","info");return}gt?n({failedStudentIds:[Bt.student_id],test_type:Zt.test_type,original_test_id:_t?.test_id||Zt.test_id,subject_id:_t?.subject_id||Zt.subject_id,grade:t,class:r}):Pe(_t,Zt)}},title:Lr?"Retest offered":gt?"Offer retest":"",children:[(()=>{const $n=_t.retest_best_score??_t.score,ds=_t.retest_best_max_score??_t.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:gt?"text-red-700":"",children:$n}),"/",l.jsx("span",{children:ds})]})})(),_t.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),_t.caught_cheating&&_t.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",_t.visibility_change_times,")"]})]}):l.jsx("span",{className:"text-gray-400",children:"-"})},on)})]},Or))})})]})})]})}),[Vn,Ie,mr,_e]),tr=S.useCallback((vt,Re,Qt)=>!Re||Re.length===0?l.jsx(Nt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:l.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):l.jsx(Nt.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:l.jsx(Nt.div,{className:"overflow-x-auto -mx-4 px-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:l.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden min-w-max",children:l.jsxs("table",{className:"w-full border-collapse text-xs min-w-max",children:[l.jsx("thead",{children:l.jsxs(Nt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.2},children:[l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-16 text-center",children:"ID"}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-3 text-left font-semibold text-gray-700 ${_e?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[160px] bg-blue-50 cursor-pointer select-none"}`,onClick:Bt=>{Bt.preventDefault(),Bt.stopPropagation(),We(!_e)},title:"Toggle student name columns",children:_e?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),l.jsx("svg",{className:"w-3 h-3 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-12 text-center",children:"No."}),l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[80px]",children:"Nickname"}),Qt.map((Bt,Or)=>(Bt.test_type,cr.current.has(Bt.test_name),l.jsx(Nt.th,{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[100px]",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3+Or*.05},children:l.jsx("div",{className:"flex flex-col space-y-1",children:l.jsx("span",{className:"text-xs",children:Bt.test_name.length>10?Bt.test_name.substring(0,10)+"...":Bt.test_name})})},Or)))]})}),l.jsx("tbody",{children:l.jsx(wl,{children:Re.map((Bt,Or)=>l.jsxs(Nt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${Or%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.1+Or*.03,ease:"easeOut"},whileHover:{scale:1.005,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.995},children:[l.jsx(Nt.td,{className:"border-b border-gray-100 px-3 py-3 text-center font-semibold text-gray-900",whileHover:{scale:1.03},transition:{duration:.15},children:Bt.student_id}),_e?l.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-xs w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Zt=>{Zt.preventDefault(),Zt.stopPropagation(),We(!1)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):l.jsxs(l.Fragment,{children:[l.jsx(Nt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:Bt.name}),l.jsx(Nt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:Bt.surname})]}),l.jsx(Nt.td,{className:"border-b border-gray-100 px-3 py-3 text-center text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:Bt.number??Or+1}),l.jsx(Nt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-600 whitespace-normal break-words",whileHover:{scale:1.01},transition:{duration:.15},children:Bt.nickname||"-"}),Qt.map((Zt,on)=>{const Cn=Ie.has(Zt.test_name),_t=Bt[Zt.test_name];return Cn?l.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:pr=>{pr.preventDefault(),pr.stopPropagation(),mr(Zt.test_name)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},on):l.jsx(Nt.td,{className:"border-b border-gray-100 px-3 py-3 text-sm",whileHover:{scale:1.01},transition:{duration:.15},onClick:pr=>{console.debug("[TeacherResults] TD clicked",{testResult:_t,student:Bt.student_id});const gt=_t?.test_type||Zt?.test_type;if(gt==="drawing"||gt==="speaking")return;const En=c(_t);if(En!==null&&En<50){if(_t?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:Bt.student_id}),n({failedStudentIds:[Bt.student_id],test_type:_t.test_type,original_test_id:_t.test_id,subject_id:_t.subject_id,grade:t,class:r})}else Pe(_t,Zt)},children:_t&&(_t.test_type==="drawing"||Zt.test_type==="drawing"||_t.test_type==="speaking"||Zt.test_type==="speaking"||_t.score!==null&&_t.score!==void 0)?l.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[_t.test_type==="drawing"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>ts(_t),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View"}),cr.current.has(Zt.test_name)?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:_t.max_score||100,value:Vt.current[Zt.test_name]?.[Bt.student_id]?.score||_t.score||"",onChange:pr=>Je(Zt.test_name,Bt.student_id,"score",pr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",min:"1",value:Vt.current[Zt.test_name]?.[Bt.student_id]?.maxScore||_t.max_score||100,onChange:pr=>Je(Zt.test_name,Bt.student_id,"maxScore",pr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):(()=>{const pr=c(_t),gt=pr!==null&&pr<50,En=pr!==null&&pr>=50&&pr<70,rn=_t.retest_offered,Lr=pr===null?"text-gray-600":gt?"text-red-600 font-semibold":En?"text-yellow-600":"text-green-600";return l.jsxs(Nt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${Lr} cursor-pointer hover:opacity-90 ${rn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:gt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>xs(Zt.test_name),onClick:$n=>{$n.preventDefault(),$n.stopPropagation();const ds=_t?.test_type||Zt?.test_type;if(!(ds==="drawing"||ds==="speaking"))if(gt){if(_t?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[Bt.student_id],test_type:Zt.test_type,original_test_id:_t?.test_id||Zt.test_id,subject_id:_t?.subject_id||Zt.subject_id,grade:t,class:r})}else Pe(_t,Zt)},title:rn?"Retest offered":gt?"Offer retest":"Click to view answers",children:[l.jsx("span",{className:gt?"text-red-700":"",children:_t.score}),"/",l.jsx("span",{children:_t.max_score}),_t.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})()]}):_t.test_type==="speaking"||Zt.test_type==="speaking"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>Bs({..._t,__studentId:Bt.student_id},"audio"),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View Audio"}),Lt&&Lt.resultId===_t.result_id?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:_t.max_score||100,value:it,onChange:pr=>Le(pr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("button",{onClick:()=>Vr(),disabled:st,className:"px-1 py-0.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:st?"Saving...":"Save"}),l.jsx("button",{onClick:()=>Xr(),disabled:st,className:"px-1 py-0.5 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):(()=>{const pr=c(_t),gt=pr!==null&&pr<50,En=pr!==null&&pr>=50&&pr<70,rn=_t.retest_offered,Lr=pr===null?"text-gray-600":gt?"text-red-600 font-semibold":En?"text-yellow-600":"text-green-600";return l.jsxs(Nt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${Lr} cursor-pointer hover:opacity-90 ${rn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:gt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>{ze({resultId:_t.result_id,score:_t.score}),Le(_t.score?.toString()||"")},onClick:$n=>{$n.preventDefault(),$n.stopPropagation();const ds=_t?.test_type||Zt?.test_type;if(!(ds==="drawing"||ds==="speaking"))if(gt){if(_t?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[Bt.student_id],test_type:Zt.test_type,original_test_id:_t?.test_id||Zt.test_id,subject_id:_t?.subject_id||Zt.subject_id,grade:t,class:r})}else Pe(_t,Zt)},title:rn?"Retest offered":gt?"Offer retest":"Click to view answers, double-click to edit score",children:[l.jsx("span",{className:gt?"text-red-700":"",children:_t.score||0}),"/",l.jsx("span",{children:_t.max_score||100}),_t.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})()]}):(()=>{const pr=c(_t),gt=pr!==null&&pr<50,En=pr!==null&&pr>=50&&pr<70,rn=pr!==null&&pr>=70,Lr=_t?.retest_offered===!0;console.debug("[TeacherResults] Render pill",{studentId:Bt.student_id,pct:pr,isRed:gt,isYellow:En,isGreen:rn,score:_t.score,max:_t.max_score,percentageField:_t.percentage});const ds=`px-1 py-0.5 rounded text-xs font-medium ${pr===null?"text-gray-600":gt?"text-red-600 font-semibold":En?"text-yellow-600":"text-green-600"} cursor-pointer hover:opacity-90 pointer-events-auto ${Lr?"bg-blue-50 text-blue-700 border border-blue-200":""}`;return l.jsxs(Nt.div,{className:ds,style:gt?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onClick:Cs=>{Cs.preventDefault(),Cs.stopPropagation();const xo=_t?.test_type||Zt?.test_type;if(!(xo==="drawing"||xo==="speaking"))if(gt){if(_t?.retest_offered){o("Retest is already offered","info");return}const tc=window.getComputedStyle(Cs.currentTarget).color;console.debug("[TeacherResults] Red pill clicked -> opening retest modal",{studentId:Bt.student_id,className:ds,computedColor:tc}),n({failedStudentIds:[Bt.student_id],test_type:Zt.test_type,original_test_id:_t?.test_id||Zt.test_id,subject_id:_t?.subject_id||Zt.subject_id,grade:t,class:r})}else Pe(_t,Zt)},title:Lr?"Retest offered":gt?"Offer retest":"Click to view answers",children:[l.jsx("span",{className:gt?"text-red-700":"",children:_t.score}),"/",l.jsx("span",{children:_t.max_score}),_t.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),_t.caught_cheating&&_t.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",_t.visibility_change_times,")"]})]}):l.jsx("span",{className:"text-gray-400",children:"-"})},on)})]},Or))})})]})})})}),[Vn,Ie,mr,_e]),Jt=S.useCallback(()=>{if(!W)return null;console.log(" renderResults - results:",W),console.log(" renderResults - results.class:",W.class),console.log(" renderResults - results.unique_tests:",W.unique_tests);const vt=W.class&&Array.isArray(W.class)&&W.class.length>0;if(console.log(" renderResults - hasStudentData:",vt),!vt)return console.log(" renderResults - No student data, showing no students message"),l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No students found for this class and semester."})});const Re=W.unique_tests||[];return console.log(" renderResults - uniqueTests:",Re),$t.current=W,l.jsxs("div",{className:"space-y-6",children:[l.jsxs(Nt.div,{className:"bg-gradient-to-r from-red-500 to-pink-500 rounded-lg p-6 text-white",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[l.jsxs(Nt.h2,{className:"text-2xl font-bold mb-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},children:["Test Results - Grade M",K,", Class ",K,"/",te,", Semester ",C]}),l.jsxs(Nt.p,{className:"text-cyan-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:["Viewing results for ",W.subjects?.length||0," subject(s)"]}),l.jsxs(Nt.div,{className:"mt-4 flex gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[l.jsx("button",{onClick:()=>{const Qt=W.unique_tests?.map(Bt=>Bt.test_name)||[];me(new Set(Qt))},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Collapse All Tests"}),l.jsx("button",{onClick:()=>me(new Set),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Expand All Tests"})]})]}),l.jsxs(Nt.div,{className:"bg-white rounded-lg shadow p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[l.jsx(Nt.h3,{className:"text-lg font-semibold text-gray-900 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:"Class Results"}),l.jsx("div",{className:"hidden md:block",children:Pt("All Subjects",W.class,Re)}),l.jsx("div",{className:"md:hidden",children:tr("All Subjects",W.class,Re)})]})]})},[W,Pt,K,te,C]),Bn=S.useCallback(()=>{if(!W||!W.class||!W.unique_tests)return;const vt=["Student ID","Name","Surname","No.","Nickname",...W.unique_tests.map(on=>on.test_name)],Re=W.class.map((on,Cn)=>{const _t=[];return _t.push(on.student_id),_t.push(on.name),_t.push(on.surname),_t.push(on.number??Cn+1),_t.push(on.nickname||"-"),W.unique_tests.forEach(pr=>{const gt=on[pr.test_name];gt&&gt.score!==null&&gt.score!==void 0?_t.push(`${gt.score}/${gt.max_score}`):_t.push("-")}),_t}),Qt=yw.aoa_to_sheet([vt,...Re]),Bt=yw.book_new(),Or=[{wch:10},{wch:15},{wch:15},{wch:6},{wch:12},...W.unique_tests.map(()=>({wch:15}))];Qt["!cols"]=Or,yw.book_append_sheet(Bt,Qt,"Class Results");const Zt=`class-results-${K}-${te}-semester-${C}.xlsx`;B1e(Bt,Zt),o("Excel file exported successfully!","success")},[W,K,te,C,o]);return f?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Results..."})]})}):p?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:p}),l.jsx(xt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"flex justify-between items-center py-4",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Class Results"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",de?de.toLocaleString():"Never"]})]})})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Class"}),D.length>0?(()=>{const vt=D.reduce((Re,Qt)=>{const Bt=Qt.subject||"Unknown Subject";return Re[Bt]||(Re[Bt]=[]),Re[Bt].push(Qt),Re},{});return l.jsx("div",{className:"space-y-6",children:Object.entries(vt).map(([Re,Qt])=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-3 flex flex-col sm:flex-row sm:items-center items-center",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),Re]}),l.jsxs("span",{className:"ml-0 sm:ml-2 text-sm text-gray-500 mt-1 sm:mt-0",children:["(",Qt.length," classes)"]})]}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Qt.map((Bt,Or)=>l.jsxs(xt,{variant:K===Bt.grade&&te===Bt.class?"primary":"outline",onClick:()=>Kr(Bt.grade,Bt.class),className:"px-3 py-1 text-xs font-medium min-w-[60px]",children:[Bt.grade,"/",Bt.class]},`${Bt.grade}-${Bt.class}-${Or}`))})]},Re))})})():l.jsx("p",{className:"text-gray-500",children:"No classes available"})]}),te&&Os(),te&&W&&l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[K," ",te," - Test Results ",Ue?`(Term ${Ze?.terms.find(vt=>vt.id===Ue)?.term})`:""]}),l.jsx("div",{className:"flex space-x-3",children:l.jsxs("button",{type:"button",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2",onClick:Bn,children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-4 h-4 object-contain"}),l.jsx("span",{className:"font-medium text-sm",children:"Export Excel"})]})})]}),Jt()]}),te&&!W&&l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-200 border-t-blue-500"}),l.jsx("span",{className:"text-gray-600",children:"Loading results"})]})})})]})}),nr&&Qe&&l.jsx(j3,{children:l.jsx(l$,{drawing:nr,isOpen:Qe,onClose:()=>ut(!1),isTeacherView:!0,onSaveScore:async({resultId:vt,score:Re,maxScore:Qt})=>{try{const Bt=await(window.tokenManager?.getToken()||ka.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Tx.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:Bt?`Bearer ${Bt}`:""},body:JSON.stringify({resultId:vt,score:Re,maxScore:Qt})})).ok)throw new Error("Failed to save");await Ir(C,!0)}catch{o("Failed to save drawing score","error")}}})}),l.jsx(j3,{children:l.jsx(Kie,{isOpen:ee,onClose:()=>{je(!1),bt(null),dt(null)},testResult:Ve,questions:ot,isLoadingQuestions:ge})}),mt&&Ot&&l.jsx(j3,{children:l.jsx(qie,{result:mt,isOpen:Ot,onClose:()=>nt(!1),initialTab:mt.__initialTab||"overview",editingSpeakingScore:Lt,tempSpeakingScore:it,isSavingSpeakingScore:st,onStartSpeakingScoreEdit:Ut,onSaveSpeakingScore:Vr,onCancelSpeakingScoreEdit:Xr,onTempSpeakingScoreChange:Le})})]})},Y1e={getTestPerformance:async(e,t=null)=>{try{await Iu.loadAcademicCalendar();const n=Iu.getCurrentTerm()?.id;if(!n)throw new Error("No current academic period found");console.log(` Fetching test performance for teacher ${e}, period ${n}, class: ${t||"all"}`);let s=`/.netlify/functions/get-test-performance?teacher_id=${e}&academic_period_id=${n}`;if(t){const[o,c]=t.split("/"),u=o.startsWith("M")?o:`M${o}`;s+=`&grade=${u}&class=${c}`}const a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.error||"Failed to fetch performance data");return console.log(` Performance data loaded: ${i.count} tests`),i.data}catch(r){throw console.error(" Error fetching test performance:",r),r}}};function bU(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=bU(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ys(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=bU(e))&&(n&&(n+=" "),n+=t);return n}var G3={},V3={},nM;function J1e(){return nM||(nM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(V3)),V3}var q3={},sM;function _U(){return sM||(sM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(q3)),q3}var K3={},aM;function SU(){return aM||(aM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(K3)),K3}var X3={},iM;function X7(){return iM||(iM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let a=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<s;){const u=r[a];o?u==="\\"&&a+1<s?(a++,i+=r[a]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,a++}return i&&n.push(i),n}e.toPath=t})(X3)),X3}var oM;function Y7(){return oM||(oM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J1e(),r=_U(),n=SU(),s=X7();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?a(o,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=a})(G3)),G3}var Y3,lM;function Q1e(){return lM||(lM=1,Y3=Y7().get),Y3}var Z1e=Q1e();const C4=eu(Z1e);var J3={exports:{}},ps={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cM;function exe(){if(cM)return ps;cM=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,w=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,C=e?Symbol.for("react.responder"):60118,k=e?Symbol.for("react.scope"):60119;function b(A){if(typeof A=="object"&&A!==null){var F=A.$$typeof;switch(F){case t:switch(A=A.type,A){case c:case u:case n:case a:case s:case f:return A;default:switch(A=A&&A.$$typeof,A){case o:case d:case x:case p:case i:return A;default:return F}}case r:return F}}}function j(A){return b(A)===u}return ps.AsyncMode=c,ps.ConcurrentMode=u,ps.ContextConsumer=o,ps.ContextProvider=i,ps.Element=t,ps.ForwardRef=d,ps.Fragment=n,ps.Lazy=x,ps.Memo=p,ps.Portal=r,ps.Profiler=a,ps.StrictMode=s,ps.Suspense=f,ps.isAsyncMode=function(A){return j(A)||b(A)===c},ps.isConcurrentMode=j,ps.isContextConsumer=function(A){return b(A)===o},ps.isContextProvider=function(A){return b(A)===i},ps.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===t},ps.isForwardRef=function(A){return b(A)===d},ps.isFragment=function(A){return b(A)===n},ps.isLazy=function(A){return b(A)===x},ps.isMemo=function(A){return b(A)===p},ps.isPortal=function(A){return b(A)===r},ps.isProfiler=function(A){return b(A)===a},ps.isStrictMode=function(A){return b(A)===s},ps.isSuspense=function(A){return b(A)===f},ps.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===u||A===a||A===s||A===f||A===m||typeof A=="object"&&A!==null&&(A.$$typeof===x||A.$$typeof===p||A.$$typeof===i||A.$$typeof===o||A.$$typeof===d||A.$$typeof===v||A.$$typeof===C||A.$$typeof===k||A.$$typeof===w)},ps.typeOf=b,ps}var uM;function txe(){return uM||(uM=1,J3.exports=exe()),J3.exports}txe();var Hc=e=>e===0?0:e>0?1:-1,Jc=e=>typeof e=="number"&&e!=+e,sm=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,fn=e=>(typeof e=="number"||e instanceof Number)&&!Jc(e),Td=e=>fn(e)||typeof e=="string",rxe=0,Gy=e=>{var t=++rxe;return"".concat(e||"").concat(t)},oh=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!fn(t)&&typeof t!="string")return n;var a;if(sm(t)){if(r==null)return n;var i=t.indexOf("%");a=r*parseFloat(t.slice(0,i))/100}else a=+t;return Jc(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},kU=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function c0(e,t,r){return fn(e)&&fn(t)?e+r*(t-e):t}function TU(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):C4(n,t))===r)}var Hi=e=>e===null||typeof e>"u",J7=e=>Hi(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),nxe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Q7(e){if(typeof e!="string")return!1;var t=nxe;return t.includes(e)}var sxe=["viewBox","children"],dM=["points","pathLength"],Q3={svg:sxe,polygon:dM,polyline:dM},Z7=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Q7(s)&&(n[s]=(a=>r[s](r,a)))}),n},axe=(e,t,r)=>n=>(e(t,r,n),null),ixe=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];Q7(s)&&typeof a=="function"&&(n||(n={}),n[s]=axe(a,t,r))}),n},oxe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function CU(e){if(typeof e!="string")return!1;var t=oxe;return t.includes(e)}function ng(e){var t=Object.entries(e).filter(r=>{var[n]=r;return CU(n)});return Object.fromEntries(t)}var NU=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,lxe=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(s=n&&Q3?.[n])!==null&&s!==void 0?s:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&a.includes(t)||CU(t)),c=!!r&&Q7(t);return i||o||c},go=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(a=>{var i;lxe((i=n)===null||i===void 0?void 0:i[a],a,t,r)&&(s[a]=n[a])}),s},cxe=["children","width","height","viewBox","className","style","title","desc"];function I6(){return I6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I6.apply(null,arguments)}function uxe(e,t){if(e==null)return{};var r,n,s=dxe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dxe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var EU=S.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:i,style:o,title:c,desc:u}=e,d=uxe(e,cxe),f=a||{width:n,height:s,x:0,y:0},m=Ys("recharts-surface",i);return S.createElement("svg",I6({},go(d,!0,"svg"),{className:m,width:n,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),S.createElement("title",null,c),S.createElement("desc",null,u),r)}),fxe=["children","className"];function R6(){return R6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R6.apply(null,arguments)}function hxe(e,t){if(e==null)return{};var r,n,s=mxe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mxe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var r1=S.forwardRef((e,t)=>{var{children:r,className:n}=e,s=hxe(e,fxe),a=Ys("recharts-layer",n);return S.createElement("g",R6({className:a},go(s,!0),{ref:t}),r)}),gxe=S.createContext(null);function Sa(e){return function(){return e}}const L6=Math.PI,B6=2*L6,Xh=1e-6,pxe=B6-Xh;function AU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function xxe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return AU;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class yxe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?AU:xxe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,i){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,c=n-t,u=s-r,d=i-t,f=o-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Xh)if(!(Math.abs(f*c-u*d)>Xh)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,x=s-o,w=c*c+u*u,v=p*p+x*x,C=Math.sqrt(w),k=Math.sqrt(m),b=a*Math.tan((L6-Math.acos((w+m-v)/(2*C*k)))/2),j=b/k,A=b/C;Math.abs(j-1)>Xh&&this._append`L${t+j*d},${r+j*f}`,this._append`A${a},${a},0,0,${+(f*p>d*x)},${this._x1=t+A*c},${this._y1=r+A*u}`}}arc(t,r,n,s,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(s),c=n*Math.sin(s),u=t+o,d=r+c,f=1^i,m=i?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Xh||Math.abs(this._y1-d)>Xh)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%B6+B6),m>pxe?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>Xh&&this._append`A${n},${n},0,${+(m>=L6)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function jU(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new yxe(t)}function eT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function PU(e){this._context=e}PU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function N4(e){return new PU(e)}function MU(e){return e[0]}function FU(e){return e[1]}function OU(e,t){var r=Sa(!0),n=null,s=N4,a=null,i=jU(o);e=typeof e=="function"?e:e===void 0?MU:Sa(e),t=typeof t=="function"?t:t===void 0?FU:Sa(t);function o(c){var u,d=(c=eT(c)).length,f,m=!1,p;for(n==null&&(a=s(p=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(f,u,c),+t(f,u,c));if(p)return a=null,p+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Sa(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Sa(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Sa(!!c),o):r},o.curve=function(c){return arguments.length?(s=c,n!=null&&(a=s(n)),o):s},o.context=function(c){return arguments.length?(c==null?n=a=null:a=s(n=c),o):n},o}function V2(e,t,r){var n=null,s=Sa(!0),a=null,i=N4,o=null,c=jU(u);e=typeof e=="function"?e:e===void 0?MU:Sa(+e),t=typeof t=="function"?t:Sa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?FU:Sa(+r);function u(f){var m,p,x,w=(f=eT(f)).length,v,C=!1,k,b=new Array(w),j=new Array(w);for(a==null&&(o=i(k=c())),m=0;m<=w;++m){if(!(m<w&&s(v=f[m],m,f))===C)if(C=!C)p=m,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),x=m-1;x>=p;--x)o.point(b[x],j[x]);o.lineEnd(),o.areaEnd()}C&&(b[m]=+e(v,m,f),j[m]=+t(v,m,f),o.point(n?+n(v,m,f):b[m],r?+r(v,m,f):j[m]))}if(k)return o=null,k+""||null}function d(){return OU().defined(s).curve(i).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Sa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Sa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Sa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Sa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Sa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Sa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Sa(!!f),u):s},u.curve=function(f){return arguments.length?(i=f,a!=null&&(o=i(a)),u):i},u.context=function(f){return arguments.length?(f==null?a=o=null:o=i(a=f),u):a},u}class DU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function vxe(e){return new DU(e,!0)}function wxe(e){return new DU(e,!1)}function cb(){}function ub(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function IU(e){this._context=e}IU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ub(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ub(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bxe(e){return new IU(e)}function RU(e){this._context=e}RU.prototype={areaStart:cb,areaEnd:cb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ub(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _xe(e){return new RU(e)}function LU(e){this._context=e}LU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ub(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Sxe(e){return new LU(e)}function BU(e){this._context=e}BU.prototype={areaStart:cb,areaEnd:cb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function kxe(e){return new BU(e)}function fM(e){return e<0?-1:1}function hM(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),o=(a*s+i*n)/(n+s);return(fM(a)+fM(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function mM(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Z3(e,t,r){var n=e._x0,s=e._y0,a=e._x1,i=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,s+o*t,a-o,i-o*r,a,i)}function db(e){this._context=e}db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Z3(this,this._t0,mM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Z3(this,mM(this,r=hM(this,e,t)),r);break;default:Z3(this,this._t0,r=hM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function $U(e){this._context=new zU(e)}($U.prototype=Object.create(db.prototype)).point=function(e,t){db.prototype.point.call(this,t,e)};function zU(e){this._context=e}zU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function Txe(e){return new db(e)}function Cxe(e){return new $U(e)}function UU(e){this._context=e}UU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=gM(e),s=gM(t),a=0,i=1;i<r;++a,++i)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function gM(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),i=new Array(r);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,i[t]-=n*i[t-1];for(s[r-1]=i[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function Nxe(e){return new UU(e)}function E4(e,t){this._context=e,this._t=t}E4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Exe(e){return new E4(e,.5)}function Axe(e){return new E4(e,0)}function jxe(e){return new E4(e,1)}function Ep(e,t){if((i=e.length)>1)for(var r=1,n,s,a=e[t[0]],i,o=a.length;r<i;++r)for(s=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function $6(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Pxe(e,t){return e[t]}function Mxe(e){const t=[];return t.key=e,t}function Fxe(){var e=Sa([]),t=$6,r=Ep,n=Pxe;function s(a){var i=Array.from(e.apply(this,arguments),Mxe),o,c=i.length,u=-1,d;for(const f of a)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,a)]).data=f;for(o=0,d=eT(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Sa(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:Sa(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?$6:typeof a=="function"?a:Sa(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Ep,s):r},s}function Oxe(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,i;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}Ep(e,t)}}function Dxe(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var i=0,o=0;i<s;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Ep(e,t)}}function Ixe(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,i;n<a;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,m=d[n-1][1]||0,p=(f-m)/2,x=0;x<o;++x){var w=e[t[x]],v=w[n][1]||0,C=w[n-1][1]||0;p+=v-C}c+=f,u+=p*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,Ep(e,t)}}var e5={},t5={},pM;function Rxe(){return pM||(pM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const i=r[a],o=n(i);s.has(o)||s.set(o,i)}return Array.from(s.values())}e.uniqBy=t})(t5)),t5}var r5={},xM;function WU(){return xM||(xM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(r5)),r5}var n5={},s5={},a5={},yM;function Lxe(){return yM||(yM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(a5)),a5}var vM;function tT(){return vM||(vM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lxe();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(s5)),s5}var i5={},wM;function Bxe(){return wM||(wM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(i5)),i5}var bM;function $xe(){return bM||(bM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tT(),r=Bxe();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(n5)),n5}var o5={},l5={},_M;function zxe(){return _M||(_M=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Y7();function r(n){return function(s){return t.get(s,n)}}e.property=r})(l5)),l5}var c5={},u5={},d5={},f5={},SM;function HU(){return SM||(SM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(f5)),f5}var h5={},kM;function GU(){return kM||(kM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(h5)),h5}var m5={},TM;function VU(){return TM||(TM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(m5)),m5}var CM;function Uxe(){return CM||(CM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rT(),r=HU(),n=GU(),s=VU();function a(f,m,p){return typeof p!="function"?t.isMatch(f,m):i(f,m,function x(w,v,C,k,b,j){const A=p(w,v,C,k,b,j);return A!==void 0?!!A:i(w,v,x,j)},new Map)}function i(f,m,p,x){if(m===f)return!0;switch(typeof m){case"object":return o(f,m,p,x);case"function":return Object.keys(m).length>0?i(f,{...m},p,x):s.eq(f,m);default:return r.isObject(f)?typeof m=="string"?m==="":!0:s.eq(f,m)}}function o(f,m,p,x){if(m==null)return!0;if(Array.isArray(m))return u(f,m,p,x);if(m instanceof Map)return c(f,m,p,x);if(m instanceof Set)return d(f,m,p,x);const w=Object.keys(m);if(f==null)return w.length===0;if(w.length===0)return!0;if(x&&x.has(m))return x.get(m)===f;x&&x.set(m,f);try{for(let v=0;v<w.length;v++){const C=w[v];if(!n.isPrimitive(f)&&!(C in f)||m[C]===void 0&&f[C]!==void 0||m[C]===null&&f[C]!==null||!p(f[C],m[C],C,f,m,x))return!1}return!0}finally{x&&x.delete(m)}}function c(f,m,p,x){if(m.size===0)return!0;if(!(f instanceof Map))return!1;for(const[w,v]of m.entries()){const C=f.get(w);if(p(C,v,w,f,m,x)===!1)return!1}return!0}function u(f,m,p,x){if(m.length===0)return!0;if(!Array.isArray(f))return!1;const w=new Set;for(let v=0;v<m.length;v++){const C=m[v];let k=!1;for(let b=0;b<f.length;b++){if(w.has(b))continue;const j=f[b];let A=!1;if(p(j,C,v,f,m,x)&&(A=!0),A){w.add(b),k=!0;break}}if(!k)return!1}return!0}function d(f,m,p,x){return m.size===0?!0:f instanceof Set?u([...f],[...m],p,x):!1}e.isMatchWith=a,e.isSetMatch=d})(d5)),d5}var NM;function rT(){return NM||(NM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Uxe();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(u5)),u5}var g5={},p5={},x5={},EM;function Wxe(){return EM||(EM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(x5)),x5}var y5={},AM;function qU(){return AM||(AM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(y5)),y5}var v5={},jM;function KU(){return jM||(jM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",m="[object ArrayBuffer]",p="[object Object]",x="[object Error]",w="[object DataView]",v="[object Uint8Array]",C="[object Uint8ClampedArray]",k="[object Uint16Array]",b="[object Uint32Array]",j="[object BigUint64Array]",A="[object Int8Array]",F="[object Int16Array]",D="[object Int32Array]",M="[object BigInt64Array]",O="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=m,e.arrayTag=d,e.bigInt64ArrayTag=M,e.bigUint64ArrayTag=j,e.booleanTag=s,e.dataViewTag=w,e.dateTag=o,e.errorTag=x,e.float32ArrayTag=O,e.float64ArrayTag=L,e.functionTag=f,e.int16ArrayTag=F,e.int32ArrayTag=D,e.int8ArrayTag=A,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=k,e.uint32ArrayTag=b,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=C})(v5)),v5}var w5={},PM;function Hxe(){return PM||(PM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(w5)),w5}var MM;function XU(){return MM||(MM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wxe(),r=qU(),n=KU(),s=GU(),a=Hxe();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,m,p=new Map,x=void 0){const w=x?.(d,f,m,p);if(w!==void 0)return w;if(s.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const v=new Array(d.length);p.set(d,v);for(let C=0;C<d.length;C++)v[C]=o(d[C],C,m,p,x);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;p.set(d,v);for(const[C,k]of d)v.set(C,o(k,C,m,p,x));return v}if(d instanceof Set){const v=new Set;p.set(d,v);for(const C of d)v.add(o(C,void 0,m,p,x));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,v);for(let C=0;C<d.length;C++)v[C]=o(d[C],C,m,p,x);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,v),c(v,d,m,p,x),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return p.set(d,v),c(v,d,m,p,x),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return p.set(d,v),c(v,d,m,p,x),v}if(d instanceof Error){const v=new d.constructor;return p.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,m,p,x),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return p.set(d,v),c(v,d,m,p,x),v}return d}function c(d,f,m=d,p,x){const w=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<w.length;v++){const C=w[v],k=Object.getOwnPropertyDescriptor(d,C);(k==null||k.writable)&&(d[C]=o(f[C],C,m,p,x))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c})(p5)),p5}var FM;function Gxe(){return FM||(FM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XU();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(g5)),g5}var OM;function Vxe(){return OM||(OM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rT(),r=Gxe();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(c5)),c5}var b5={},_5={},S5={},DM;function qxe(){return DM||(DM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XU(),r=KU();function n(s,a){return t.cloneDeepWith(s,(i,o,c,u)=>{const d=a?.(i,o,c,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s?.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(S5)),S5}var IM;function Kxe(){return IM||(IM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qxe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(_5)),_5}var k5={},T5={},RM;function YU(){return RM||(RM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(T5)),T5}var C5={},LM;function Xxe(){return LM||(LM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qU();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(C5)),C5}var BM;function Yxe(){return BM||(BM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_U(),r=YU(),n=Xxe(),s=X7();function a(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&i?.[o]==null?c=s.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(k5)),k5}var $M;function Jxe(){return $M||($M=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rT(),r=SU(),n=Kxe(),s=Y7(),a=Yxe();function i(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,o);return d===void 0?a.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i})(b5)),b5}var zM;function Qxe(){return zM||(zM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WU(),r=zxe(),n=Vxe(),s=Jxe();function a(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?s.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=a})(o5)),o5}var UM;function Zxe(){return UM||(UM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rxe(),r=WU(),n=$xe(),s=Qxe();function a(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),s.iteratee(o)):[]}e.uniqBy=a})(e5)),e5}var N5,WM;function eye(){return WM||(WM=1,N5=Zxe().uniqBy),N5}var tye=eye();const HM=eu(tye);function rye(e,t,r){return t===!0?HM(e,r):typeof t=="function"?HM(e,t):e}var E5={exports:{}},A5={},j5={exports:{}},P5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function nye(){if(GM)return P5;GM=1;var e=lh();function t(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function o(f,m){var p=m(),x=n({inst:{value:p,getSnapshot:m}}),w=x[0].inst,v=x[1];return a(function(){w.value=p,w.getSnapshot=m,c(w)&&v({inst:w})},[f,p,m]),s(function(){return c(w)&&v({inst:w}),f(function(){c(w)&&v({inst:w})})},[f]),i(p),p}function c(f){var m=f.getSnapshot;f=f.value;try{var p=m();return!r(f,p)}catch{return!0}}function u(f,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return P5.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,P5}var VM;function sye(){return VM||(VM=1,j5.exports=nye()),j5.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM;function aye(){if(qM)return A5;qM=1;var e=lh(),t=sye();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return A5.useSyncExternalStoreWithSelector=function(u,d,f,m,p){var x=a(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=o(function(){function C(F){if(!k){if(k=!0,b=F,F=m(F),p!==void 0&&w.hasValue){var D=w.value;if(p(D,F))return j=D}return j=F}if(D=j,n(b,F))return D;var M=m(F);return p!==void 0&&p(D,M)?(b=F,D):(b=F,j=M)}var k=!1,b,j,A=f===void 0?null:f;return[function(){return C(d())},A===null?void 0:function(){return C(A())}]},[d,f,m,p]);var v=s(u,x[0],x[1]);return i(function(){w.hasValue=!0,w.value=v},[v]),c(v),v},A5}var KM;function iye(){return KM||(KM=1,E5.exports=aye()),E5.exports}var oye=iye(),nT=S.createContext(null),lye=e=>e,ol=()=>{var e=S.useContext(nT);return e?e.store.dispatch:lye},vw=()=>{},cye=()=>vw,uye=(e,t)=>e===t;function Qr(e){var t=S.useContext(nT);return oye.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:cye,t?t.store.getState:vw,t?t.store.getState:vw,t?e:vw,uye)}function dye(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function fye(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function hye(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var XM=e=>Array.isArray(e)?e:[e];function mye(e){const t=Array.isArray(e[0])?e[0]:e;return hye(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function gye(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var pye=class{constructor(e){this.value=e}deref(){return this.value}},xye=typeof WeakRef<"u"?WeakRef:pye,yye=0,YM=1;function q2(){return{s:yye,v:void 0,o:null,p:null}}function JU(e,t={}){let r=q2();const{resultEqualityCheck:n}=t;let s,a=0;function i(){let o=r;const{length:c}=arguments;for(let f=0,m=c;f<m;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const w=x.get(p);w===void 0?(o=q2(),x.set(p,o)):o=w}else{let x=o.p;x===null&&(o.p=x=new Map);const w=x.get(p);w===void 0?(o=q2(),x.set(p,o)):o=w}}const u=o;let d;if(o.s===YM)d=o.v;else if(d=e.apply(null,arguments),a++,n){const f=s?.deref?.()??s;f!=null&&n(f,d)&&(d=f,a!==0&&a--),s=typeof d=="object"&&d!==null||typeof d=="function"?new xye(d):d}return u.s=YM,u.v=d,d}return i.clearCache=()=>{r=q2(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function vye(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,i=0,o,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),dye(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:m=[],argsMemoize:p=JU,argsMemoizeOptions:x=[]}=d,w=XM(m),v=XM(x),C=mye(s),k=f(function(){return a++,u.apply(null,arguments)},...w),b=p(function(){i++;const A=gye(C,arguments);return o=k.apply(null,A),o},...v);return Object.assign(b,{resultFunc:u,memoizedResultFunc:k,dependencies:C,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var Gt=vye(JU),wye=Object.assign((e,t=Gt)=>{fye(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>wye}),M5={},F5={},O5={},JM;function bye(){return JM||(JM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const i=t(n),o=t(s);if(i===o&&i===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?o-i:i-o}return 0};e.compareValues=r})(O5)),O5}var D5={},I5={},QM;function QU(){return QM||(QM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(I5)),I5}var ZM;function _ye(){return ZM||(ZM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QU(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,i){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||i!=null&&Object.hasOwn(i,a)}e.isKey=s})(D5)),D5}var eF;function Sye(){return eF||(eF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bye(),r=_ye(),n=X7();function s(a,i,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,x)=>{let w=p;for(let v=0;v<x.length&&w!=null;++v)w=w[x[v]];return w},d=(p,x)=>x==null||p==null?x:typeof p=="object"&&"key"in p?Object.hasOwn(x,p.key)?x[p.key]:u(x,p.path):typeof p=="function"?p(x):Array.isArray(p)?u(x,p):typeof x=="object"?x[p]:x,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return a.map(p=>({original:p,criteria:f.map(x=>d(x,p))})).slice().sort((p,x)=>{for(let w=0;w<f.length;w++){const v=t.compareValues(p.criteria[w],x.criteria[w],o[w]);if(v!==0)return v}return 0}).map(p=>p.original)}e.orderBy=s})(F5)),F5}var R5={},tF;function kye(){return tF||(tF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<a?i(d,c+1):s.push(d)}};return i(r,0),s}e.flatten=t})(R5)),R5}var L5={},rF;function ZU(){return rF||(rF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YU(),r=tT(),n=HU(),s=VU();function a(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?s.eq(c[o],i):!1}e.isIterateeCall=a})(L5)),L5}var nF;function Tye(){return nF||(nF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sye(),r=kye(),n=ZU();function s(a,...i){const o=i.length;return o>1&&n.isIterateeCall(a,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(a,r.flatten(i),["asc"])}e.sortBy=s})(M5)),M5}var B5,sF;function Cye(){return sF||(sF=1,B5=Tye().sortBy),B5}var Nye=Cye();const A4=eu(Nye);var eW=e=>e.legend.settings,Eye=e=>e.legend.size,Aye=e=>e.legend.payload;Gt([Aye,eW],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?A4(n,r):n});var K2=1;function jye(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=S.useState({height:0,left:0,top:0,width:0}),n=S.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),i={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(i.height-t.height)>K2||Math.abs(i.left-t.left)>K2||Math.abs(i.top-t.top)>K2||Math.abs(i.width-t.width)>K2)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function ro(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Pye=typeof Symbol=="function"&&Symbol.observable||"@@observable",aF=Pye,$5=()=>Math.random().toString(36).substring(7).split("").join("."),Mye={INIT:`@@redux/INIT${$5()}`,REPLACE:`@@redux/REPLACE${$5()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${$5()}`},fb=Mye;function sT(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function tW(e,t,r){if(typeof e!="function")throw new Error(ro(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ro(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(ro(1));return r(tW)(e,t)}let n=e,s=t,a=new Map,i=a,o=0,c=!1;function u(){i===a&&(i=new Map,a.forEach((v,C)=>{i.set(C,v)}))}function d(){if(c)throw new Error(ro(3));return s}function f(v){if(typeof v!="function")throw new Error(ro(4));if(c)throw new Error(ro(5));let C=!0;u();const k=o++;return i.set(k,v),function(){if(C){if(c)throw new Error(ro(6));C=!1,u(),i.delete(k),a=null}}}function m(v){if(!sT(v))throw new Error(ro(7));if(typeof v.type>"u")throw new Error(ro(8));if(typeof v.type!="string")throw new Error(ro(17));if(c)throw new Error(ro(9));try{c=!0,s=n(s,v)}finally{c=!1}return(a=i).forEach(k=>{k()}),v}function p(v){if(typeof v!="function")throw new Error(ro(10));n=v,m({type:fb.REPLACE})}function x(){const v=f;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(ro(11));function k(){const j=C;j.next&&j.next(d())}return k(),{unsubscribe:v(k)}},[aF](){return this}}}return m({type:fb.INIT}),{dispatch:m,subscribe:f,getState:d,replaceReducer:p,[aF]:x}}function Fye(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:fb.INIT})>"u")throw new Error(ro(12));if(typeof r(void 0,{type:fb.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ro(13))})}function rW(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const i=t[a];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let s;try{Fye(r)}catch(a){s=a}return function(i={},o){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],m=r[f],p=i[f],x=m(p,o);if(typeof x>"u")throw o&&o.type,new Error(ro(14));u[f]=x,c=c||x!==p}return c=c||n.length!==Object.keys(i).length,c?u:i}}function hb(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Oye(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(ro(15))};const i={getState:s.getState,dispatch:(c,...u)=>a(c,...u)},o=e.map(c=>c(i));return a=hb(...o)(s.dispatch),{...s,dispatch:a}}}function nW(e){return sT(e)&&"type"in e&&typeof e.type=="string"}var sW=Symbol.for("immer-nothing"),iF=Symbol.for("immer-draftable"),Ql=Symbol.for("immer-state");function Cu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ap=Object.getPrototypeOf;function Um(e){return!!e&&!!e[Ql]}function N0(e){return e?aW(e)||Array.isArray(e)||!!e[iF]||!!e.constructor?.[iF]||Pv(e)||P4(e):!1}var Dye=Object.prototype.constructor.toString();function aW(e){if(!e||typeof e!="object")return!1;const t=Ap(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Dye}function mb(e,t){j4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function j4(e){const t=e[Ql];return t?t.type_:Array.isArray(e)?1:Pv(e)?2:P4(e)?3:0}function z6(e,t){return j4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function iW(e,t,r){const n=j4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Iye(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Pv(e){return e instanceof Map}function P4(e){return e instanceof Set}function Yh(e){return e.copy_||e.base_}function U6(e,t){if(Pv(e))return new Map(e);if(P4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=aW(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Ql];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const i=s[a],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Ap(e),n)}else{const n=Ap(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function aT(e,t=!1){return M4(e)||Um(e)||!N0(e)||(j4(e)>1&&Object.defineProperties(e,{set:{value:X2},add:{value:X2},clear:{value:X2},delete:{value:X2}}),Object.freeze(e),t&&Object.values(e).forEach(r=>aT(r,!0))),e}function X2(){Cu(2)}function M4(e){return Object.isFrozen(e)}var Rye={};function Wm(e){const t=Rye[e];return t||Cu(0,e),t}var Vy;function oW(){return Vy}function Lye(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function oF(e,t){t&&(Wm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function W6(e){H6(e),e.drafts_.forEach(Bye),e.drafts_=null}function H6(e){e===Vy&&(Vy=e.parent_)}function lF(e){return Vy=Lye(Vy,e)}function Bye(e){const t=e[Ql];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function cF(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Ql].modified_&&(W6(t),Cu(4)),N0(e)&&(e=gb(t,e),t.parent_||pb(t,e)),t.patches_&&Wm("Patches").generateReplacementPatches_(r[Ql].base_,e,t.patches_,t.inversePatches_)):e=gb(t,r,[]),W6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==sW?e:void 0}function gb(e,t,r){if(M4(t))return t;const n=t[Ql];if(!n)return mb(t,(s,a)=>uF(e,n,t,s,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return pb(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let a=s,i=!1;n.type_===3&&(a=new Set(s),s.clear(),i=!0),mb(a,(o,c)=>uF(e,n,s,o,c,r,i)),pb(e,s,!1),r&&e.patches_&&Wm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function uF(e,t,r,n,s,a,i){if(Um(s)){const o=a&&t&&t.type_!==3&&!z6(t.assigned_,n)?a.concat(n):void 0,c=gb(e,s,o);if(iW(r,n,c),Um(c))e.canAutoFreeze_=!1;else return}else i&&r.add(s);if(N0(s)&&!M4(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;gb(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Pv(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&pb(e,s)}}function pb(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&aT(t,r)}function $ye(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:oW(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=iT;r&&(s=[n],a=qy);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return n.draft_=o,n.revoke_=i,o}var iT={get(e,t){if(t===Ql)return e;const r=Yh(e);if(!z6(r,t))return zye(e,r,t);const n=r[t];return e.finalized_||!N0(n)?n:n===z5(e.base_,t)?(U5(e),e.copy_[t]=V6(n,e)):n},has(e,t){return t in Yh(e)},ownKeys(e){return Reflect.ownKeys(Yh(e))},set(e,t,r){const n=lW(Yh(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=z5(Yh(e),t),a=s?.[Ql];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Iye(r,s)&&(r!==void 0||z6(e.base_,t)))return!0;U5(e),G6(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return z5(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,U5(e),G6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Yh(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Cu(11)},getPrototypeOf(e){return Ap(e.base_)},setPrototypeOf(){Cu(12)}},qy={};mb(iT,(e,t)=>{qy[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});qy.deleteProperty=function(e,t){return qy.set.call(this,e,t,void 0)};qy.set=function(e,t,r){return iT.set.call(this,e[0],t,r,e[0])};function z5(e,t){const r=e[Ql];return(r?Yh(r):e)[t]}function zye(e,t,r){const n=lW(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function lW(e,t){if(!(t in e))return;let r=Ap(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ap(r)}}function G6(e){e.modified_||(e.modified_=!0,e.parent_&&G6(e.parent_))}function U5(e){e.copy_||(e.copy_=U6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Uye=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const i=this;return function(c=a,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Cu(6),n!==void 0&&typeof n!="function"&&Cu(7);let s;if(N0(t)){const a=lF(this),i=V6(t,void 0);let o=!0;try{s=r(i),o=!1}finally{o?W6(a):H6(a)}return oF(a,n),cF(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===sW&&(s=void 0),this.autoFreeze_&&aT(s,!0),n){const a=[],i=[];Wm("Patches").generateReplacementPatches_(t,s,a,i),n(a,i)}return s}else Cu(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){N0(e)||Cu(8),Um(e)&&(e=w0(e));const t=lF(this),r=V6(e,void 0);return r[Ql].isManual_=!0,H6(t),r}finishDraft(e,t){const r=e&&e[Ql];(!r||!r.isManual_)&&Cu(9);const{scope_:n}=r;return oF(n,t),cF(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Wm("Patches").applyPatches_;return Um(e)?n(e,t):this.produce(e,s=>n(s,t))}};function V6(e,t){const r=Pv(e)?Wm("MapSet").proxyMap_(e,t):P4(e)?Wm("MapSet").proxySet_(e,t):$ye(e,t);return(t?t.scope_:oW()).drafts_.push(r),r}function w0(e){return Um(e)||Cu(10,e),cW(e)}function cW(e){if(!N0(e)||M4(e))return e;const t=e[Ql];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=U6(e,t.scope_.immer_.useStrictShallowCopy_)}else r=U6(e,!0);return mb(r,(n,s)=>{iW(r,n,cW(s))}),t&&(t.finalized_=!1),r}var Wye=new Uye,uW=Wye.produce;function dW(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var Hye=dW(),Gye=dW,Vye=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hb:hb.apply(null,arguments)};function Qc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Xl(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>nW(n)&&n.type===e,r}var fW=class Hx extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Hx.prototype)}static get[Symbol.species](){return Hx}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Hx(...t[0].concat(this)):new Hx(...t.concat(this))}};function dF(e){return N0(e)?uW(e,()=>{}):e}function Y2(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function qye(e){return typeof e=="boolean"}var Kye=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let i=new fW;return r&&(qye(r)?i.push(Hye):i.push(Gye(r.extraArgument))),i},Xye="RTK_autoBatch",fF=e=>t=>{setTimeout(t,e)},Yye=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fF(10):e.type==="callback"?e.queueNotification:fF(e.timeout),u=()=>{i=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),m=n.subscribe(f);return o.add(d),()=>{m(),o.delete(d)}},dispatch(d){try{return s=!d?.meta?.[Xye],a=!s,a&&(i||(i=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},Jye=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new fW(e);return n&&s.push(Yye(typeof n=="object"?n:void 0)),s};function Qye(e){const t=Kye(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(sT(r))o=rW(r);else throw new Error(Xl(1));let c;typeof n=="function"?c=n(t):c=t();let u=hb;s&&(u=Vye({trace:!1,...typeof s=="object"&&s}));const d=Oye(...c),f=Jye(d);let m=typeof i=="function"?i(f):f();const p=u(...m);return tW(o,a,p)}function hW(e){const t={},r=[];let n;const s={addCase(a,i){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Xl(28));if(o in t)throw new Error(Xl(29));return t[o]=i,s},addAsyncThunk(a,i){return i.pending&&(t[a.pending.type]=i.pending),i.rejected&&(t[a.rejected.type]=i.rejected),i.fulfilled&&(t[a.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:a.settled,reducer:i.settled}),s},addMatcher(a,i){return r.push({matcher:a,reducer:i}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}function Zye(e){return typeof e=="function"}function eve(e,t){let[r,n,s]=hW(t),a;if(Zye(e))a=()=>dF(e());else{const o=dF(e);a=()=>o}function i(o=a(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Um(d)){const p=f(d,c);return p===void 0?d:p}else{if(N0(d))return uW(d,m=>f(m,c));{const m=f(d,c);if(m===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return d},o)}return i.getInitialState=a,i}var tve="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",rve=(e=21)=>{let t="",r=e;for(;r--;)t+=tve[Math.random()*64|0];return t},nve=Symbol.for("rtk-slice-createasyncthunk");function sve(e,t){return`${e}/${t}`}function ave({creators:e}={}){const t=e?.asyncThunk?.[nve];return function(n){const{name:s,reducerPath:a=s}=n;if(!s)throw new Error(Xl(11));const i=(typeof n.reducers=="function"?n.reducers(ove()):n.reducers)||{},o=Object.keys(i),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(b,j){const A=typeof b=="string"?b:b.type;if(!A)throw new Error(Xl(12));if(A in c.sliceCaseReducersByType)throw new Error(Xl(13));return c.sliceCaseReducersByType[A]=j,u},addMatcher(b,j){return c.sliceMatchers.push({matcher:b,reducer:j}),u},exposeAction(b,j){return c.actionCreators[b]=j,u},exposeCaseReducer(b,j){return c.sliceCaseReducersByName[b]=j,u}};o.forEach(b=>{const j=i[b],A={reducerName:b,type:sve(s,b),createNotation:typeof n.reducers=="function"};cve(j)?dve(A,j,u,t):lve(A,j,u)});function d(){const[b={},j=[],A=void 0]=typeof n.extraReducers=="function"?hW(n.extraReducers):[n.extraReducers],F={...b,...c.sliceCaseReducersByType};return eve(n.initialState,D=>{for(let M in F)D.addCase(M,F[M]);for(let M of c.sliceMatchers)D.addMatcher(M.matcher,M.reducer);for(let M of j)D.addMatcher(M.matcher,M.reducer);A&&D.addDefaultCase(A)})}const f=b=>b,m=new Map,p=new WeakMap;let x;function w(b,j){return x||(x=d()),x(b,j)}function v(){return x||(x=d()),x.getInitialState()}function C(b,j=!1){function A(D){let M=D[b];return typeof M>"u"&&j&&(M=Y2(p,A,v)),M}function F(D=f){const M=Y2(m,j,()=>new WeakMap);return Y2(M,D,()=>{const O={};for(const[L,W]of Object.entries(n.selectors??{}))O[L]=ive(W,D,()=>Y2(p,D,v),j);return O})}return{reducerPath:b,getSelectors:F,get selectors(){return F(A)},selectSlice:A}}const k={name:s,reducer:w,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...C(a),injectInto(b,{reducerPath:j,...A}={}){const F=j??a;return b.inject({reducerPath:F,reducer:w},A),{...k,...C(F,!0)}}};return k}}function ive(e,t,r,n){function s(a,...i){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return s.unwrapped=e,s}var ec=ave();function ove(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function lve({type:e,reducerName:t,createNotation:r},n,s){let a,i;if("reducer"in n){if(r&&!uve(n))throw new Error(Xl(17));a=n.reducer,i=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?Qc(e,i):Qc(e))}function cve(e){return e._reducerDefinitionType==="asyncThunk"}function uve(e){return e._reducerDefinitionType==="reducerWithPrepare"}function dve({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Xl(18));const{payloadCreator:a,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=s(e,a,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||J2,pending:o||J2,rejected:c||J2,settled:u||J2})}function J2(){}var fve="task",mW="listener",gW="completed",oT="cancelled",hve=`task-${oT}`,mve=`task-${gW}`,q6=`${mW}-${oT}`,gve=`${mW}-${gW}`,F4=class{constructor(e){this.code=e,this.message=`${fve} ${oT} (reason: ${e})`}name="TaskAbortError";message},lT=(e,t)=>{if(typeof e!="function")throw new TypeError(Xl(32))},xb=()=>{},pW=(e,t=xb)=>(e.catch(t),e),xW=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ym=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},vm=e=>{if(e.aborted){const{reason:t}=e;throw new F4(t)}};function yW(e,t){let r=xb;return new Promise((n,s)=>{const a=()=>s(new F4(e.reason));if(e.aborted){a();return}r=xW(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=xb})}var pve=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof F4?"cancelled":"rejected",error:r}}finally{t?.()}},yb=e=>t=>pW(yW(e,t).then(r=>(vm(e),r))),vW=e=>{const t=yb(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:mp}=Object,hF={},O4="listenerMiddleware",xve=(e,t)=>{const r=n=>xW(e,()=>ym(n,e.reason));return(n,s)=>{lT(n);const a=new AbortController;r(a);const i=pve(async()=>{vm(e),vm(a.signal);const o=await n({pause:yb(a.signal),delay:vW(a.signal),signal:a.signal});return vm(a.signal),o},()=>ym(a,mve));return s?.autoJoin&&t.push(i.catch(xb)),{result:yb(e)(i),cancel(){ym(a,hve)}}}},yve=(e,t)=>{const r=async(n,s)=>{vm(t);let a=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,m)=>{m.unsubscribe(),c([f,m.getState(),m.getOriginalState()])}});a=()=>{d(),u()}})];s!=null&&o.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await yW(t,Promise.race(o));return vm(t),c}finally{a()}};return(n,s)=>pW(r(n,s))},wW=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Qc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Xl(21));return lT(a),{predicate:s,type:t,effect:a}},bW=mp(e=>{const{type:t,predicate:r,effect:n}=wW(e);return{id:rve(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Xl(22))}}},{withTypes:()=>bW}),mF=(e,t)=>{const{type:r,effect:n,predicate:s}=wW(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},K6=e=>{e.pending.forEach(t=>{ym(t,q6)})},vve=e=>()=>{e.forEach(K6),e.clear()},gF=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},_W=mp(Qc(`${O4}/add`),{withTypes:()=>_W}),wve=Qc(`${O4}/removeAll`),SW=mp(Qc(`${O4}/remove`),{withTypes:()=>SW}),bve=(...e)=>{console.error(`${O4}/error`,...e)},Mv=(e={})=>{const t=new Map,{extra:r,onError:n=bve}=e;lT(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f?.cancelActive&&K6(d)}),a=d=>{const f=mF(t,d)??bW(d);return s(f)};mp(a,{withTypes:()=>a});const i=d=>{const f=mF(t,d);return f&&(f.unsubscribe(),d.cancelActive&&K6(f)),!!f};mp(i,{withTypes:()=>i});const o=async(d,f,m,p)=>{const x=new AbortController,w=yve(a,x.signal),v=[];try{d.pending.add(x),await Promise.resolve(d.effect(f,mp({},m,{getOriginalState:p,condition:(C,k)=>w(C,k).then(Boolean),take:w,delay:vW(x.signal),pause:yb(x.signal),extra:r,signal:x.signal,fork:xve(x.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((C,k,b)=>{C!==x&&(ym(C,q6),b.delete(C))})},cancel:()=>{ym(x,q6),d.pending.delete(x)},throwIfCancelled:()=>{vm(x.signal)}})))}catch(C){C instanceof F4||gF(n,C,{raisedBy:"effect"})}finally{await Promise.all(v),ym(x,gve),d.pending.delete(x)}},c=vve(t);return{middleware:d=>f=>m=>{if(!nW(m))return f(m);if(_W.match(m))return a(m.payload);if(wve.match(m)){c();return}if(SW.match(m))return i(m.payload);let p=d.getState();const x=()=>{if(p===hF)throw new Error(Xl(23));return p};let w;try{if(w=f(m),t.size>0){const v=d.getState(),C=Array.from(t.values());for(const k of C){let b=!1;try{b=k.predicate(m,v,p)}catch(j){b=!1,gF(n,j,{raisedBy:"predicate"})}b&&o(k,m,d,x)}}}finally{p=hF}return w},startListening:a,stopListening:i,clearListeners:c}};function Xl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _ve={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},kW=ec({name:"chartLayout",initialState:_ve,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Sve,setLayout:kve,setChartSize:Tve,setScale:Cve}=kW.actions,Nve=kW.reducer;function pF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pF(Object(r),!0).forEach(function(n){Eve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eve(e,t,r){return(t=Ave(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ave(e){var t=jve(e,"string");return typeof t=="symbol"?t:t+""}function jve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vb=Math.PI/180,Pve=e=>e*180/Math.PI,fo=(e,t,r,n)=>({x:e+Math.cos(-vb*n)*r,y:t+Math.sin(-vb*n)*r}),Mve=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Fve=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},Ove=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,i=Fve({x:r,y:n},{x:s,y:a});if(i<=0)return{radius:i,angle:0};var o=(r-s)/i,c=Math.acos(o);return n>a&&(c=2*Math.PI-c),{radius:i,angle:Pve(c),angleInRadian:c}},Dve=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},Ive=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),i=Math.min(s,a);return e+i*360},Rve=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:a}=Ove({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(s<i||s>o||s===0)return null;var{startAngle:c,endAngle:u}=Dve(t),d=a,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?xF(xF({},t),{},{radius:s,angle:Ive(d,t)}):null};function TW(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function yF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yF(Object(r),!0).forEach(function(n){Lve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lve(e,t,r){return(t=Bve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bve(e){var t=$ve(e,"string");return typeof t=="symbol"?t:t+""}function $ve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function al(e,t,r){return Hi(e)||Hi(t)?r:Td(t)?C4(e,t,r):typeof t=="function"?t(e):r}var zve=(e,t,r,n,s)=>{var a,i=-1,o=(a=t?.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,m=void 0;if(Hc(d-u)!==Hc(f-d)){var p=[];if(Hc(f-d)===Hc(s[1]-s[0])){m=f;var x=d+s[1]-s[0];p[0]=Math.min(x,(x+u)/2),p[1]=Math.max(x,(x+u)/2)}else{m=u;var w=f+s[1]-s[0];p[0]=Math.min(d,(w+d)/2),p[1]=Math.max(d,(w+d)/2)}var v=[Math.min(d,(m+d)/2),Math.max(d,(m+d)/2)];if(e>v[0]&&e<=v[1]||e>=p[0]&&e<=p[1]){({index:i}=r[c]);break}}else{var C=Math.min(u,f),k=Math.max(u,f);if(e>(C+d)/2&&e<=(k+d)/2){({index:i}=r[c]);break}}}else if(t){for(var b=0;b<o;b++)if(b===0&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===o-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:i}=t[b]);break}}return i},Uve=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&a!=="center"&&fn(e[a]))return zc(zc({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&i!=="middle"&&fn(e[i]))return zc(zc({},e),{},{[i]:e[i]+(s||0)})}return e},vh=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",CW=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var s,a,i=e.map(o=>(o.coordinate===t&&(s=!0),o.coordinate===r&&(a=!0),o.coordinate));return s||i.push(t),a||i.push(r),i},NW=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:a,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:m,axisType:p}=e;if(!i)return null;var x=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,w=s==="category"&&i.bandwidth?i.bandwidth()/x:0;if(w=p==="angleAxis"&&a&&a.length>=2?Hc(a[0]-a[1])*2*w:w,f||m){var v=(f||m||[]).map((C,k)=>{var b=n?n.indexOf(C):C;return{coordinate:i(b)+w,value:C,offset:w,index:k}});return v.filter(C=>!Jc(C.coordinate))}return c&&u?u.map((C,k)=>({coordinate:i(C)+w,value:C,index:k,offset:w})):i.ticks&&d!=null?i.ticks(d).map((C,k)=>({coordinate:i(C)+w,value:C,offset:w,index:k})):i.domain().map((C,k)=>({coordinate:i(C)+w,value:n?n[C]:C,index:k,offset:w}))},vF=1e-4,Wve=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-vF,a=Math.max(n[0],n[1])+vF,i=e(t[0]),o=e(t[r-1]);(i<s||i>a||o<s||o>a)&&e.domain([t[0],t[r-1]])}},Hve=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,i=0;i<t;++i){var o=Jc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1])}},Gve=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var i=Jc(e[a][r][1])?e[a][r][0]:e[a][r][1];i>=0?(e[a][r][0]=s,e[a][r][1]=s+i,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},Vve={sign:Hve,expand:Oxe,none:Ep,silhouette:Dxe,wiggle:Ixe,positive:Gve},qve=(e,t,r)=>{var n=Vve[r],s=Fxe().keys(t).value((a,i)=>+al(a,i,0)).order($6).offset(n);return s(e)};function wF(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:a,dataKey:i}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Hi(s[t.dataKey])){var o=TU(r,"value",s[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=al(s,Hi(i)?t.dataKey:i);return Hi(c)?null:t.scale(c)}var Kve=e=>{var t=e.flat(2).filter(fn);return[Math.min(...t),Math.max(...t)]},Xve=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Yve=(e,t,r)=>{if(e!=null)return Xve(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:i}=a,o=i.reduce((c,u)=>{var d=TW(u,t,r),f=Kve(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},bF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_F=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,X6=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=A4(t,d=>d.coordinate),a=1/0,i=1,o=s.length;i<o;i++){var c=s[i],u=s[i-1];a=Math.min((c.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function SF(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return zc(zc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function EW(e,t){if(e)return String(e);if(typeof t=="string")return t}function Jve(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var a=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return a?{x:e,y:t}:null}return n?Rve({x:e,y:t},n):null}var Qve=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,{radius:i}=n;return zc(zc(zc({},n),fo(n.cx,n.cy,i,a)),{},{angle:a,radius:i})}var o=s.coordinate,{angle:c}=n;return zc(zc(zc({},n),fo(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},Zve=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,I0=e=>e.layout.width,R0=e=>e.layout.height,e2e=e=>e.layout.scale,AW=e=>e.layout.margin,D4=Gt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),I4=Gt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),t2e="data-recharts-item-index",r2e="data-recharts-item-data-key",Fv=60;function kF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Q2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kF(Object(r),!0).forEach(function(n){n2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n2e(e,t,r){return(t=s2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s2e(e){var t=a2e(e,"string");return typeof t=="symbol"?t:t+""}function a2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i2e=e=>e.brush.height;function o2e(e){var t=I4(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Fv;return r+s}return r},0)}function l2e(e){var t=I4(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Fv;return r+s}return r},0)}function c2e(e){var t=D4(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function u2e(e){var t=D4(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var po=Gt([I0,R0,AW,i2e,o2e,l2e,c2e,u2e,eW,Eye],(e,t,r,n,s,a,i,o,c,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+a},f={top:(r.top||0)+i,bottom:(r.bottom||0)+o},m=Q2(Q2({},f),d),p=m.bottom;m.bottom+=n,m=Uve(m,c,u);var x=e-m.left-m.right,w=t-m.top-m.bottom;return Q2(Q2({brushBottom:p},m),{},{width:Math.max(x,0),height:Math.max(w,0)})}),d2e=Gt(po,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),jW=Gt(I0,R0,(e,t)=>({x:0,y:0,width:e,height:t})),f2e=S.createContext(null),ru=()=>S.useContext(f2e)!=null,R4=e=>e.brush,L4=Gt([R4,po,AW],(e,t,r)=>({height:e.height,x:fn(e.x)?e.x:t.left,y:fn(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:fn(e.width)?e.width:t.width})),cT=()=>{var e,t=ru(),r=Qr(d2e),n=Qr(L4),s=(e=Qr(R4))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},h2e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},PW=()=>{var e;return(e=Qr(po))!==null&&e!==void 0?e:h2e},MW=()=>Qr(I0),FW=()=>Qr(R0),Qs=e=>e.layout.layoutType,uT=()=>Qr(Qs),m2e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},OW=ec({name:"legend",initialState:m2e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=w0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:vTe,setLegendSettings:wTe,addLegendPayload:g2e,removeLegendPayload:p2e}=OW.actions,x2e=OW.reducer;function Y6(){return Y6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y6.apply(null,arguments)}function TF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TF(Object(r),!0).forEach(function(n){y2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y2e(e,t,r){return(t=v2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v2e(e){var t=w2e(e,"string");return typeof t=="symbol"?t:t+""}function w2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b2e(e){return Array.isArray(e)&&Td(e[0])&&Td(e[1])?e.join(" ~ "):e}var _2e=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:m=!1}=e,p=()=>{if(a&&a.length){var A={padding:0,margin:0},F=(o?A4(a,o):a).map((D,M)=>{if(D.type==="none")return null;var O=D.formatter||i||b2e,{value:L,name:W}=D,re=L,ie=W;if(O){var xe=O(L,W,D,M,a);if(Array.isArray(xe))[re,ie]=xe;else if(xe!=null)re=xe;else return null}var de=W5({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},n);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(M),style:de},Td(ie)?S.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,Td(ie)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},re),S.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:A},F)}return null},x=W5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=W5({margin:0},s),v=!Hi(d),C=v?d:"",k=Ys("recharts-default-tooltip",c),b=Ys("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(C=f(d,a));var j=m?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",Y6({className:k,style:x},j),S.createElement("p",{className:b,style:w},S.isValidElement(C)?C:"".concat(C)),p())},Ex="recharts-tooltip-wrapper",S2e={visibility:"hidden"};function k2e(e){var{coordinate:t,translateX:r,translateY:n}=e;return Ys(Ex,{["".concat(Ex,"-right")]:fn(r)&&t&&fn(t.x)&&r>=t.x,["".concat(Ex,"-left")]:fn(r)&&t&&fn(t.x)&&r<t.x,["".concat(Ex,"-bottom")]:fn(n)&&t&&fn(t.y)&&n>=t.y,["".concat(Ex,"-top")]:fn(n)&&t&&fn(t.y)&&n<t.y})}function CF(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(a&&fn(a[n]))return a[n];var d=r[n]-o-(s>0?s:0),f=r[n]+s;if(t[n])return i[n]?d:f;var m=c[n];if(m==null)return 0;if(i[n]){var p=d,x=m;return p<x?Math.max(f,m):Math.max(d,m)}if(u==null)return 0;var w=f+o,v=m+u;return w>v?Math.max(d,m):Math.max(f,m)}function T2e(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function C2e(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=CF({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=CF({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=T2e({translateX:d,translateY:f,useTranslate3d:o})):u=S2e,{cssProperties:u,cssClasses:k2e({translateX:d,translateY:f,coordinate:r})}}function NF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Z2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NF(Object(r),!0).forEach(function(n){J6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J6(e,t,r){return(t=N2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N2e(e){var t=E2e(e,"string");return typeof t=="symbol"?t:t+""}function E2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class A2e extends S.PureComponent{constructor(){super(...arguments),J6(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),J6(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:m,viewBox:p,wrapperStyle:x,lastBoundingBox:w,innerRef:v,hasPortalFromProps:C}=this.props,{cssClasses:k,cssProperties:b}=C2e({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:w.height,width:w.width},useTranslate3d:m,viewBox:p}),j=C?{}:Z2(Z2({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),A=Z2(Z2({},j),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},x);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:A,ref:v},a)}}var j2e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),n1={devToolsEnabled:!1,isSsr:j2e()},DW=()=>Qr(e=>e.rootProps.accessibilityLayer);function Ru(e){return Number.isFinite(e)}function wb(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Q6(){return Q6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q6.apply(null,arguments)}function EF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function AF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EF(Object(r),!0).forEach(function(n){P2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P2e(e,t,r){return(t=M2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M2e(e){var t=F2e(e,"string");return typeof t=="symbol"?t:t+""}function F2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jF={curveBasisClosed:_xe,curveBasisOpen:Sxe,curveBasis:bxe,curveBumpX:vxe,curveBumpY:wxe,curveLinearClosed:kxe,curveLinear:N4,curveMonotoneX:Txe,curveMonotoneY:Cxe,curveNatural:Nxe,curveStep:Exe,curveStepAfter:jxe,curveStepBefore:Axe},ew=e=>Ru(e.x)&&Ru(e.y),Ax=e=>e.x,jx=e=>e.y,O2e=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(J7(e));return(r==="curveMonotone"||r==="curveBump")&&t?jF["".concat(r).concat(t==="vertical"?"Y":"X")]:jF[r]||N4},D2e=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,i=O2e(t,s),o=a?r.filter(ew):r,c;if(Array.isArray(n)){var u=a?n.filter(f=>ew(f)):n,d=o.map((f,m)=>AF(AF({},f),{},{base:u[m]}));return s==="vertical"?c=V2().y(jx).x1(Ax).x0(f=>f.base.x):c=V2().x(Ax).y1(jx).y0(f=>f.base.y),c.defined(ew).curve(i),c(d)}return s==="vertical"&&fn(n)?c=V2().y(jx).x1(Ax).x0(n):fn(n)?c=V2().x(Ax).y1(jx).y0(n):c=OU().x(Ax).y(jx),c.defined(ew).curve(i),c(o)},IW=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?D2e(e):n;return S.createElement("path",Q6({},ng(e),Z7(e),{className:Ys("recharts-curve",t),d:a===null?void 0:a,ref:s}))},I2e=["x","y","top","left","width","height","className"];function Z6(){return Z6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z6.apply(null,arguments)}function PF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function R2e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PF(Object(r),!0).forEach(function(n){L2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L2e(e,t,r){return(t=B2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B2e(e){var t=$2e(e,"string");return typeof t=="symbol"?t:t+""}function $2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z2e(e,t){if(e==null)return{};var r,n,s=U2e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function U2e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var W2e=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),H2e=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:i=0,className:o}=e,c=z2e(e,I2e),u=R2e({x:t,y:r,top:n,left:s,width:a,height:i},c);return!fn(t)||!fn(r)||!fn(a)||!fn(i)||!fn(n)||!fn(s)?null:S.createElement("path",Z6({},go(u,!0),{className:Ys("recharts-cross",o),d:W2e(t,r,a,i,n,s)}))};function G2e(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function MF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function V2e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MF(Object(r),!0).forEach(function(n){q2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q2e(e,t,r){return(t=K2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K2e(e){var t=X2e(e,"string");return typeof t=="symbol"?t:t+""}function X2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nu(e,t){var r=V2e({},e),n=t,s=Object.keys(t),a=s.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return a}function Y2e(){}function FF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FF(Object(r),!0).forEach(function(n){J2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J2e(e,t,r){return(t=Q2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q2e(e){var t=Z2e(e,"string");return typeof t=="symbol"?t:t+""}function Z2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ewe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),twe=(e,t,r)=>e.map(n=>"".concat(ewe(n)," ").concat(t,"ms ").concat(r)).join(","),rwe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Ky=(e,t)=>Object.keys(t).reduce((r,n)=>OF(OF({},r),{},{[n]:e(n,t[n])}),{});function DF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DF(Object(r),!0).forEach(function(n){nwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nwe(e,t,r){return(t=swe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function swe(e){var t=awe(e,"string");return typeof t=="symbol"?t:t+""}function awe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bb=(e,t,r)=>e+(t-e)*r,ek=e=>{var{from:t,to:r}=e;return t!==r},RW=(e,t,r)=>{var n=Ky((s,a)=>{if(ek(a)){var[i,o]=e(a.from,a.to,a.velocity);return ao(ao({},a),{},{from:i,velocity:o})}return a},t);return r<1?Ky((s,a)=>ek(a)?ao(ao({},a),{},{velocity:bb(a.velocity,n[s].velocity,r),from:bb(a.from,n[s].from,r)}):a,t):RW(e,n,r-1)};function iwe(e,t,r,n,s,a){var i,o=n.reduce((m,p)=>ao(ao({},m),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>Ky((m,p)=>p.from,o),u=()=>!Object.values(o).filter(ek).length,d=null,f=m=>{i||(i=m);var p=m-i,x=p/r.dt;o=RW(r,o,x),s(ao(ao(ao({},e),t),c())),i=m,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{d()})}function owe(e,t,r,n,s,a,i){var o=null,c=s.reduce((f,m)=>ao(ao({},f),{},{[m]:[e[m],t[m]]}),{}),u,d=f=>{u||(u=f);var m=(f-u)/n,p=Ky((w,v)=>bb(...v,r(m)),c);if(a(ao(ao(ao({},e),t),p)),m<1)o=i.setTimeout(d);else{var x=Ky((w,v)=>bb(...v,r(1)),c);a(ao(ao(ao({},e),t),x))}};return()=>(o=i.setTimeout(d),()=>{o()})}const lwe=(e,t,r,n,s,a)=>{var i=rwe(e,t);return r.isStepper===!0?iwe(e,t,r,i,s,a):owe(e,t,r,n,i,s,a)};var _b=1e-4,LW=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],BW=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),IF=(e,t)=>r=>{var n=LW(e,t);return BW(n,r)},cwe=(e,t)=>r=>{var n=LW(e,t),s=[...n.map((a,i)=>a*i).slice(1),0];return BW(s,r)},RF=function(){for(var t,r,n,s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(x=>parseFloat(x)))}}else i.length===4&&([t,n,r,s]=i);var u=IF(t,r),d=IF(n,s),f=cwe(t,r),m=x=>x>1?1:x<0?0:x,p=x=>{for(var w=x>1?1:x,v=w,C=0;C<8;++C){var k=u(v)-w,b=f(v);if(Math.abs(k-w)<_b||b<_b)return d(v);v=m(v-k/b)}return d(v)};return p.isStepper=!1,p},uwe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*s/1e3,m=c*s/1e3+i;return Math.abs(m-o)<_b&&Math.abs(f)<_b?[o,0]:[m,f]};return a.isStepper=!0,a.dt=s,a},dwe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return RF(e);case"spring":return uwe();default:if(e.split("(")[0]==="cubic-bezier")return RF(e)}return typeof e=="function"?e:null};function fwe(e){var t,r=()=>null,n=!1,s=null,a=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){s=e.setTimeout(a.bind(null,u),c);return}a(c),s=e.setTimeout(a.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,s&&(s(),s=null),a(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class hwe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{cancelAnimationFrame(s)}}}function mwe(){return fwe(new hwe)}var gwe=S.createContext(mwe);function pwe(e,t){var r=S.useContext(gwe);return S.useMemo(()=>t??r(e),[e,t,r])}var xwe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},LF={t:0},H5={t:1};function $W(e){var t=nu(e,xwe),{isActive:r,canBegin:n,duration:s,easing:a,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=pwe(t.animationId,t.animationManager),[f,m]=S.useState(r?LF:H5),p=S.useRef(null);return S.useEffect(()=>{r||m(H5)},[r]),S.useEffect(()=>{if(!r||!n)return Y2e;var x=lwe(LF,H5,dwe(a),s,m,d.getTimeoutController()),w=()=>{p.current=x()};return d.start([c,i,w,s,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,s,a,i,c,o,d]),u(f.t)}function zW(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=S.useRef(Gy(t)),n=S.useRef(e);return n.current!==e&&(r.current=Gy(t),n.current=e),r.current}function BF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $F(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BF(Object(r),!0).forEach(function(n){ywe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ywe(e,t,r){return(t=vwe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vwe(e){var t=wwe(e,"string");return typeof t=="symbol"?t:t+""}function wwe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb.apply(null,arguments)}var zF=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,m=4;f<m;f++)d[f]=s[f]>a?a:s[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(a>0&&s===+s&&s>0){var p=Math.min(a,s);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},bwe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_we=e=>{var t=nu(e,bwe),r=S.useRef(null),[n,s]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var xe=r.current.getTotalLength();xe&&s(xe)}catch{}},[]);var{x:a,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:m,animationBegin:p,isAnimationActive:x,isUpdateAnimationActive:w}=t,v=S.useRef(o),C=S.useRef(c),k=S.useRef(a),b=S.useRef(i),j=S.useMemo(()=>({x:a,y:i,width:o,height:c,radius:u}),[a,i,o,c,u]),A=zW(j,"rectangle-");if(a!==+a||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var F=Ys("recharts-rectangle",d);if(!w)return S.createElement("path",Sb({},go(t,!0),{className:F,d:zF(a,i,o,c,u)}));var D=v.current,M=C.current,O=k.current,L=b.current,W="0px ".concat(n===-1?1:n,"px"),re="".concat(n,"px 0px"),ie=twe(["strokeDasharray"],m,typeof f=="string"?f:void 0);return S.createElement($W,{animationId:A,key:A,canBegin:n>0,duration:m,easing:f,isActive:w,begin:p},xe=>{var de=c0(D,o,xe),fe=c0(M,c,xe),H=c0(O,a,xe),Q=c0(L,i,xe);r.current&&(v.current=de,C.current=fe,k.current=H,b.current=Q);var U;return x?xe>0?U={transition:ie,strokeDasharray:re}:U={strokeDasharray:W}:U={strokeDasharray:re},S.createElement("path",Sb({},go(t,!0),{className:F,d:zF(H,Q,de,fe,u),ref:r,style:$F($F({},U),t.style)}))})};function UW(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,i=fo(t,r,n,s),o=fo(t,r,n,a);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function tk(){return tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tk.apply(null,arguments)}var Swe=(e,t)=>{var r=Hc(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},tw=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/vb,f=c?s:s+a*d,m=fo(t,r,u,f),p=fo(t,r,n,f),x=c?s-a*d:s,w=fo(t,r,u*Math.cos(d*vb),x);return{center:m,circleTangency:p,lineTangency:w,theta:d}},WW=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:i}=e,o=Swe(a,i),c=a+o,u=fo(t,r,s,a),d=fo(t,r,s,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var m=fo(t,r,n,a),p=fo(t,r,n,c);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},kwe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Hc(u-c),{circleTangency:f,lineTangency:m,theta:p}=tw({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:x,lineTangency:w,theta:v}=tw({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(c-u):Math.abs(c-u)-p-v;if(C<0)return i?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):WW({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var k="M ".concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(C>180),",").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:b,lineTangency:j,theta:A}=tw({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:F,lineTangency:D,theta:M}=tw({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),O=o?Math.abs(c-u):Math.abs(c-u)-A-M;if(O<0&&a===0)return"".concat(k,"L").concat(t,",").concat(r,"Z");k+="L".concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(F.x,",").concat(F.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(O>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else k+="L".concat(t,",").concat(r,"Z");return k},Twe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Cwe=e=>{var t=nu(e,Twe),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(a<s||u===d)return null;var m=Ys("recharts-sector",f),p=a-s,x=oh(i,p,0,!0),w;return x>0&&Math.abs(u-d)<360?w=kwe({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(x,p/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):w=WW({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d}),S.createElement("path",tk({},go(t,!0),{className:m,d:w}))};function Nwe(e,t,r){var n,s,a,i;if(e==="horizontal")n=t.x,a=n,s=r.top,i=r.top+r.height;else if(e==="vertical")s=t.y,i=s,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,m=fo(o,c,u,f),p=fo(o,c,d,f);n=m.x,s=m.y,a=p.x,i=p.y}else return UW(t);return[{x:n,y:s},{x:a,y:i}]}var G5={},V5={},q5={},UF;function Ewe(){return UF||(UF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QU();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(q5)),q5}var WF;function Awe(){return WF||(WF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ewe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(V5)),V5}var HF;function jwe(){return HF||(HF=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZU(),r=Awe();function n(s,a,i){i&&typeof i!="number"&&t.isIterateeCall(s,a,i)&&(a=i=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),i=i===void 0?s<a?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((a-s)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=s,s+=i;return c}e.range=n})(G5)),G5}var K5,GF;function Pwe(){return GF||(GF=1,K5=jwe().range),K5}var Mwe=Pwe();const HW=eu(Mwe);function Qf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Fwe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dT(e){let t,r,n;e.length!==2?(t=Qf,r=(o,c)=>Qf(e(o),c),n=(o,c)=>e(o)-c):(t=e===Qf||e===Fwe?e:Owe,r=e,n=e);function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=s(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:s,center:i,right:a}}function Owe(){return 0}function GW(e){return e===null?NaN:+e}function*Dwe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Iwe=dT(Qf),Ov=Iwe.right;dT(GW).center;class VF extends Map{constructor(t,r=Bwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(qF(this,t))}has(t){return super.has(qF(this,t))}set(t,r){return super.set(Rwe(this,t),r)}delete(t){return super.delete(Lwe(this,t))}}function qF({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Rwe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Lwe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Bwe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function $we(e=Qf){if(e===Qf)return VW;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function VW(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const zwe=Math.sqrt(50),Uwe=Math.sqrt(10),Wwe=Math.sqrt(2);function kb(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),i=a>=zwe?10:a>=Uwe?5:a>=Wwe?2:1;let o,c,u;return s<0?(u=Math.pow(10,-s)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?kb(e,t,r*2):[o,c,u]}function rk(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,i]=n?kb(t,e,r):kb(e,t,r);if(!(a>=s))return[];const o=a-s+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(a-u)/-i;else for(let u=0;u<o;++u)c[u]=(a-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(s+u)/-i;else for(let u=0;u<o;++u)c[u]=(s+u)*i;return c}function nk(e,t,r){return t=+t,e=+e,r=+r,kb(e,t,r)[2]}function sk(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?nk(t,e,r):nk(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function KF(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function XF(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function qW(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?VW:$we(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+m)),x=Math.min(n,Math.floor(t+(c-u)*f/c+m));qW(e,t,p,x,s)}const a=e[t];let i=r,o=n;for(Px(e,r,t),s(e[n],a)>0&&Px(e,r,n);i<o;){for(Px(e,i,o),++i,--o;s(e[i],a)<0;)++i;for(;s(e[o],a)>0;)--o}s(e[r],a)===0?Px(e,r,o):(++o,Px(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Px(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Hwe(e,t,r){if(e=Float64Array.from(Dwe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return XF(e);if(t>=1)return KF(e);var n,s=(n-1)*t,a=Math.floor(s),i=KF(qW(e,a).subarray(0,a+1)),o=XF(e.subarray(a+1));return i+(o-i)*(s-a)}}function Gwe(e,t,r=GW){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),i=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return i+(o-i)*(s-a)}}function Vwe(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function su(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function L0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ak=Symbol("implicit");function fT(){var e=new VF,t=[],r=[],n=ak;function s(a){let i=e.get(a);if(i===void 0){if(n!==ak)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new VF;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return fT(t,r).unknown(n)},su.apply(s,arguments),s}function hT(){var e=fT().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,p=s<n,x=p?s:n,w=p?n:s;a=(w-x)/Math.max(1,m-c+u*2),o&&(a=Math.floor(a)),x+=(w-x-a*(m-c))*d,i=a*(1-c),o&&(x=Math.round(x),i=Math.round(i));var v=Vwe(m).map(function(C){return x+a*C});return r(p?v.reverse():v)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(m){return arguments.length?(o=!!m,f()):o},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return hT(t(),[n,s]).round(o).paddingInner(c).paddingOuter(u).align(d)},su.apply(f(),arguments)}function KW(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return KW(t())},e}function qwe(){return KW(hT.apply(null,arguments).paddingInner(1))}function mT(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function XW(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Dv(){}var Xy=.7,Tb=1/Xy,gp="\\s*([+-]?\\d+)\\s*",Yy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_d="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kwe=/^#([0-9a-f]{3,8})$/,Xwe=new RegExp(`^rgb\\(${gp},${gp},${gp}\\)$`),Ywe=new RegExp(`^rgb\\(${_d},${_d},${_d}\\)$`),Jwe=new RegExp(`^rgba\\(${gp},${gp},${gp},${Yy}\\)$`),Qwe=new RegExp(`^rgba\\(${_d},${_d},${_d},${Yy}\\)$`),Zwe=new RegExp(`^hsl\\(${Yy},${_d},${_d}\\)$`),ebe=new RegExp(`^hsla\\(${Yy},${_d},${_d},${Yy}\\)$`),YF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mT(Dv,Jy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:JF,formatHex:JF,formatHex8:tbe,formatHsl:rbe,formatRgb:QF,toString:QF});function JF(){return this.rgb().formatHex()}function tbe(){return this.rgb().formatHex8()}function rbe(){return YW(this).formatHsl()}function QF(){return this.rgb().formatRgb()}function Jy(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Kwe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?ZF(t):r===3?new _l(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?rw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?rw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xwe.exec(e))?new _l(t[1],t[2],t[3],1):(t=Ywe.exec(e))?new _l(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Jwe.exec(e))?rw(t[1],t[2],t[3],t[4]):(t=Qwe.exec(e))?rw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Zwe.exec(e))?rO(t[1],t[2]/100,t[3]/100,1):(t=ebe.exec(e))?rO(t[1],t[2]/100,t[3]/100,t[4]):YF.hasOwnProperty(e)?ZF(YF[e]):e==="transparent"?new _l(NaN,NaN,NaN,0):null}function ZF(e){return new _l(e>>16&255,e>>8&255,e&255,1)}function rw(e,t,r,n){return n<=0&&(e=t=r=NaN),new _l(e,t,r,n)}function nbe(e){return e instanceof Dv||(e=Jy(e)),e?(e=e.rgb(),new _l(e.r,e.g,e.b,e.opacity)):new _l}function ik(e,t,r,n){return arguments.length===1?nbe(e):new _l(e,t,r,n??1)}function _l(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}mT(_l,ik,XW(Dv,{brighter(e){return e=e==null?Tb:Math.pow(Tb,e),new _l(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xy:Math.pow(Xy,e),new _l(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _l(wm(this.r),wm(this.g),wm(this.b),Cb(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eO,formatHex:eO,formatHex8:sbe,formatRgb:tO,toString:tO}));function eO(){return`#${am(this.r)}${am(this.g)}${am(this.b)}`}function sbe(){return`#${am(this.r)}${am(this.g)}${am(this.b)}${am((isNaN(this.opacity)?1:this.opacity)*255)}`}function tO(){const e=Cb(this.opacity);return`${e===1?"rgb(":"rgba("}${wm(this.r)}, ${wm(this.g)}, ${wm(this.b)}${e===1?")":`, ${e})`}`}function Cb(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function am(e){return e=wm(e),(e<16?"0":"")+e.toString(16)}function rO(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Nu(e,t,r,n)}function YW(e){if(e instanceof Nu)return new Nu(e.h,e.s,e.l,e.opacity);if(e instanceof Dv||(e=Jy(e)),!e)return new Nu;if(e instanceof Nu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,o=a-s,c=(a+s)/2;return o?(t===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?a+s:2-a-s,i*=60):o=c>0&&c<1?0:i,new Nu(i,o,c,e.opacity)}function abe(e,t,r,n){return arguments.length===1?YW(e):new Nu(e,t,r,n??1)}function Nu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}mT(Nu,abe,XW(Dv,{brighter(e){return e=e==null?Tb:Math.pow(Tb,e),new Nu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xy:Math.pow(Xy,e),new Nu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new _l(X5(e>=240?e-240:e+120,s,n),X5(e,s,n),X5(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Nu(nO(this.h),nw(this.s),nw(this.l),Cb(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Cb(this.opacity);return`${e===1?"hsl(":"hsla("}${nO(this.h)}, ${nw(this.s)*100}%, ${nw(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nO(e){return e=(e||0)%360,e<0?e+360:e}function nw(e){return Math.max(0,Math.min(1,e||0))}function X5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const gT=e=>()=>e;function ibe(e,t){return function(r){return e+r*t}}function obe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function lbe(e){return(e=+e)==1?JW:function(t,r){return r-t?obe(t,r,e):gT(isNaN(t)?r:t)}}function JW(e,t){var r=t-e;return r?ibe(e,r):gT(isNaN(e)?t:e)}const sO=(function e(t){var r=lbe(t);function n(s,a){var i=r((s=ik(s)).r,(a=ik(a)).r),o=r(s.g,a.g),c=r(s.b,a.b),u=JW(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n})(1);function cbe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function ube(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dbe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)s[i]=s1(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(o){for(i=0;i<n;++i)a[i]=s[i](o);return a}}function fbe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Nb(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function hbe(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=s1(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var ok=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Y5=new RegExp(ok.source,"g");function mbe(e){return function(){return e}}function gbe(e){return function(t){return e(t)+""}}function pbe(e,t){var r=ok.lastIndex=Y5.lastIndex=0,n,s,a,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=ok.exec(e))&&(s=Y5.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,c.push({i,x:Nb(n,s)})),r=Y5.lastIndex;return r<t.length&&(a=t.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?c[0]?gbe(c[0].x):mbe(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function s1(e,t){var r=typeof t,n;return t==null||r==="boolean"?gT(t):(r==="number"?Nb:r==="string"?(n=Jy(t))?(t=n,sO):pbe:t instanceof Jy?sO:t instanceof Date?fbe:ube(t)?cbe:Array.isArray(t)?dbe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hbe:Nb)(e,t)}function pT(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function xbe(e,t){t===void 0&&(t=e,e=s1);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return a[o](i-o)}}function ybe(e){return function(){return e}}function Eb(e){return+e}var aO=[0,1];function rl(e){return e}function lk(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:ybe(isNaN(t)?NaN:.5)}function vbe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function wbe(e,t,r){var n=e[0],s=e[1],a=t[0],i=t[1];return s<n?(n=lk(s,n),a=r(i,a)):(n=lk(n,s),a=r(a,i)),function(o){return a(n(o))}}function bbe(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=lk(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(o){var c=Ov(e,o,1,n)-1;return a[c](s[c](o))}}function Iv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function B4(){var e=aO,t=aO,r=s1,n,s,a,i=rl,o,c,u;function d(){var m=Math.min(e.length,t.length);return i!==rl&&(i=vbe(e[0],e[m-1])),o=m>2?bbe:wbe,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?a:(c||(c=o(e.map(n),t,r)))(n(i(m)))}return f.invert=function(m){return i(s((u||(u=o(t,e.map(n),Nb)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Eb),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=pT,d()},f.clamp=function(m){return arguments.length?(i=m?!0:rl,d()):i!==rl},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(a=m,f):a},function(m,p){return n=m,s=p,d()}}function xT(){return B4()(rl,rl)}function _be(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ab(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function jp(e){return e=Ab(Math.abs(e)),e?e[1]:NaN}function Sbe(e,t){return function(r,n){for(var s=r.length,a=[],i=0,o=e[0],c=0;s>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),a.push(r.substring(s-=o,s+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return a.reverse().join(t)}}function kbe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Tbe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qy(e){if(!(t=Tbe.exec(e)))throw new Error("invalid format: "+e);var t;return new yT({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Qy.prototype=yT.prototype;function yT(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}yT.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cbe(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var QW;function Nbe(e,t){var r=Ab(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(QW=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Ab(e,Math.max(0,t+a-1))[0]}function iO(e,t){var r=Ab(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const oO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:_be,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>iO(e*100,t),r:iO,s:Nbe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lO(e){return e}var cO=Array.prototype.map,uO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Ebe(e){var t=e.grouping===void 0||e.thousands===void 0?lO:Sbe(cO.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?lO:kbe(cO.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Qy(f);var m=f.fill,p=f.align,x=f.sign,w=f.symbol,v=f.zero,C=f.width,k=f.comma,b=f.precision,j=f.trim,A=f.type;A==="n"?(k=!0,A="g"):oO[A]||(b===void 0&&(b=12),j=!0,A="g"),(v||m==="0"&&p==="=")&&(v=!0,m="0",p="=");var F=w==="$"?r:w==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",D=w==="$"?n:/[%p]/.test(A)?i:"",M=oO[A],O=/[defgprs%]/.test(A);b=b===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function L(W){var re=F,ie=D,xe,de,fe;if(A==="c")ie=M(W)+ie,W="";else{W=+W;var H=W<0||1/W<0;if(W=isNaN(W)?c:M(Math.abs(W),b),j&&(W=Cbe(W)),H&&+W==0&&x!=="+"&&(H=!1),re=(H?x==="("?x:o:x==="-"||x==="("?"":x)+re,ie=(A==="s"?uO[8+QW/3]:"")+ie+(H&&x==="("?")":""),O){for(xe=-1,de=W.length;++xe<de;)if(fe=W.charCodeAt(xe),48>fe||fe>57){ie=(fe===46?s+W.slice(xe+1):W.slice(xe))+ie,W=W.slice(0,xe);break}}}k&&!v&&(W=t(W,1/0));var Q=re.length+W.length+ie.length,U=Q<C?new Array(C-Q+1).join(m):"";switch(k&&v&&(W=t(U+W,U.length?C-ie.length:1/0),U=""),p){case"<":W=re+W+ie+U;break;case"=":W=re+U+W+ie;break;case"^":W=U.slice(0,Q=U.length>>1)+re+W+ie+U.slice(Q);break;default:W=U+re+W+ie;break}return a(W)}return L.toString=function(){return f+""},L}function d(f,m){var p=u((f=Qy(f),f.type="f",f)),x=Math.max(-8,Math.min(8,Math.floor(jp(m)/3)))*3,w=Math.pow(10,-x),v=uO[8+x/3];return function(C){return p(w*C)+v}}return{format:u,formatPrefix:d}}var sw,vT,ZW;Abe({thousands:",",grouping:[3],currency:["$",""]});function Abe(e){return sw=Ebe(e),vT=sw.format,ZW=sw.formatPrefix,sw}function jbe(e){return Math.max(0,-jp(Math.abs(e)))}function Pbe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jp(t)/3)))*3-jp(Math.abs(e)))}function Mbe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jp(t)-jp(e))+1}function eH(e,t,r,n){var s=sk(e,t,r),a;switch(n=Qy(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=Pbe(s,i))&&(n.precision=a),ZW(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=Mbe(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=jbe(s))&&(n.precision=a-(n.type==="%")*2);break}}return vT(n)}function wh(e){var t=e.domain;return e.ticks=function(r){var n=t();return rk(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return eH(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,i=n[s],o=n[a],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=s,s=a,a=u);d-- >0;){if(u=nk(i,o,r),u===c)return n[s]=i,n[a]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function tH(){var e=xT();return e.copy=function(){return Iv(e,tH())},su.apply(e,arguments),wh(e)}function rH(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Eb),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return rH(e).unknown(t)},e=arguments.length?Array.from(e,Eb):[0,1],wh(r)}function nH(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],i;return a<s&&(i=r,r=n,n=i,i=s,s=a,a=i),e[r]=t.floor(s),e[n]=t.ceil(a),e}function dO(e){return Math.log(e)}function fO(e){return Math.exp(e)}function Fbe(e){return-Math.log(-e)}function Obe(e){return-Math.exp(-e)}function Dbe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Ibe(e){return e===10?Dbe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Rbe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function hO(e){return(t,r)=>-e(-t,r)}function wT(e){const t=e(dO,fO),r=t.domain;let n=10,s,a;function i(){return s=Rbe(n),a=Ibe(n),r()[0]<0?(s=hO(s),a=hO(a),e(Fbe,Obe)):e(dO,fO),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=s(u),p=s(d),x,w;const v=o==null?10:+o;let C=[];if(!(n%1)&&p-m<v){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(x=1;x<n;++x)if(w=m<0?x/a(-m):x*a(m),!(w<u)){if(w>d)break;C.push(w)}}else for(;m<=p;++m)for(x=n-1;x>=1;--x)if(w=m>0?x/a(-m):x*a(m),!(w<u)){if(w>d)break;C.push(w)}C.length*2<v&&(C=rk(u,d,v))}else C=rk(m,p,Math.min(p-m,v)).map(a);return f?C.reverse():C},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Qy(c)).precision==null&&(c.trim=!0),c=vT(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(nH(r(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),t}function sH(){const e=wT(B4()).domain([1,10]);return e.copy=()=>Iv(e,sH()).base(e.base()),su.apply(e,arguments),e}function mO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function bT(e){var t=1,r=e(mO(t),gO(t));return r.constant=function(n){return arguments.length?e(mO(t=+n),gO(t)):t},wh(r)}function aH(){var e=bT(B4());return e.copy=function(){return Iv(e,aH()).constant(e.constant())},su.apply(e,arguments)}function pO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Lbe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Bbe(e){return e<0?-e*e:e*e}function _T(e){var t=e(rl,rl),r=1;function n(){return r===1?e(rl,rl):r===.5?e(Lbe,Bbe):e(pO(r),pO(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},wh(t)}function ST(){var e=_T(B4());return e.copy=function(){return Iv(e,ST()).exponent(e.exponent())},su.apply(e,arguments),e}function $be(){return ST.apply(null,arguments).exponent(.5)}function xO(e){return Math.sign(e)*e*e}function zbe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function iH(){var e=xT(),t=[0,1],r=!1,n;function s(a){var i=zbe(e(a));return isNaN(i)?n:r?Math.round(i):i}return s.invert=function(a){return e.invert(xO(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,Eb)).map(xO)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return iH(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},su.apply(s,arguments),wh(s)}function oH(){var e=[],t=[],r=[],n;function s(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=Gwe(e,i/o);return a}function a(i){return i==null||isNaN(i=+i)?n:t[Ov(r,i)]}return a.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Qf),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return oH().domain(e).range(t).unknown(n)},su.apply(a,arguments)}function lH(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function i(c){return c!=null&&c<=c?s[Ov(n,c,0,r)]:a}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,o()):s.slice()},i.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return lH().domain([e,t]).range(s).unknown(a)},su.apply(wh(i),arguments)}function cH(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[Ov(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return cH().domain(e).range(t).unknown(r)},su.apply(s,arguments)}const J5=new Date,Q5=new Date;function Si(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const c=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return c;let u;do c.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<i);return c},s.filter=a=>Si(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!a(i););else for(;--o>=0;)for(;t(i,1),!a(i););}),r&&(s.count=(a,i)=>(J5.setTime(+a),Q5.setTime(+i),e(J5),e(Q5),Math.floor(r(J5,Q5))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?i=>n(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const jb=Si(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);jb.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Si(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):jb);jb.range;const m0=1e3,Gc=m0*60,g0=Gc*60,E0=g0*24,kT=E0*7,yO=E0*30,Z5=E0*365,im=Si(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*m0)},(e,t)=>(t-e)/m0,e=>e.getUTCSeconds());im.range;const TT=Si(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*m0)},(e,t)=>{e.setTime(+e+t*Gc)},(e,t)=>(t-e)/Gc,e=>e.getMinutes());TT.range;const CT=Si(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Gc)},(e,t)=>(t-e)/Gc,e=>e.getUTCMinutes());CT.range;const NT=Si(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*m0-e.getMinutes()*Gc)},(e,t)=>{e.setTime(+e+t*g0)},(e,t)=>(t-e)/g0,e=>e.getHours());NT.range;const ET=Si(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*g0)},(e,t)=>(t-e)/g0,e=>e.getUTCHours());ET.range;const Rv=Si(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gc)/E0,e=>e.getDate()-1);Rv.range;const $4=Si(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/E0,e=>e.getUTCDate()-1);$4.range;const uH=Si(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/E0,e=>Math.floor(e/E0));uH.range;function sg(e){return Si(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Gc)/kT)}const z4=sg(0),Pb=sg(1),Ube=sg(2),Wbe=sg(3),Pp=sg(4),Hbe=sg(5),Gbe=sg(6);z4.range;Pb.range;Ube.range;Wbe.range;Pp.range;Hbe.range;Gbe.range;function ag(e){return Si(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/kT)}const U4=ag(0),Mb=ag(1),Vbe=ag(2),qbe=ag(3),Mp=ag(4),Kbe=ag(5),Xbe=ag(6);U4.range;Mb.range;Vbe.range;qbe.range;Mp.range;Kbe.range;Xbe.range;const AT=Si(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());AT.range;const jT=Si(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());jT.range;const A0=Si(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());A0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Si(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});A0.range;const j0=Si(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());j0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Si(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});j0.range;function dH(e,t,r,n,s,a){const i=[[im,1,m0],[im,5,5*m0],[im,15,15*m0],[im,30,30*m0],[a,1,Gc],[a,5,5*Gc],[a,15,15*Gc],[a,30,30*Gc],[s,1,g0],[s,3,3*g0],[s,6,6*g0],[s,12,12*g0],[n,1,E0],[n,2,2*E0],[r,1,kT],[t,1,yO],[t,3,3*yO],[e,1,Z5]];function o(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),x=p?p.range(u,+d+1):[];return m?x.reverse():x}function c(u,d,f){const m=Math.abs(d-u)/f,p=dT(([,,v])=>v).right(i,m);if(p===i.length)return e.every(sk(u/Z5,d/Z5,f));if(p===0)return jb.every(Math.max(sk(u,d,f),1));const[x,w]=i[m/i[p-1][2]<i[p][2]/m?p-1:p];return x.every(w)}return[o,c]}const[Ybe,Jbe]=dH(j0,jT,U4,uH,ET,CT),[Qbe,Zbe]=dH(A0,AT,z4,Rv,NT,TT);function eS(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tS(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Mx(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function e4e(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=Fx(s),d=Ox(s),f=Fx(a),m=Ox(a),p=Fx(i),x=Ox(i),w=Fx(o),v=Ox(o),C=Fx(c),k=Ox(c),b={a:H,A:Q,b:U,B:V,c:null,d:kO,e:kO,f:S4e,g:F4e,G:D4e,H:w4e,I:b4e,j:_4e,L:fH,m:k4e,M:T4e,p:X,q:z,Q:NO,s:EO,S:C4e,u:N4e,U:E4e,V:A4e,w:j4e,W:P4e,x:null,X:null,y:M4e,Y:O4e,Z:I4e,"%":CO},j={a:K,A:te,b:se,B:pe,c:null,d:TO,e:TO,f:$4e,g:Y4e,G:Q4e,H:R4e,I:L4e,j:B4e,L:mH,m:z4e,M:U4e,p:oe,q:ye,Q:NO,s:EO,S:W4e,u:H4e,U:G4e,V:V4e,w:q4e,W:K4e,x:null,X:null,y:X4e,Y:J4e,Z:Z4e,"%":CO},A={a:L,A:W,b:re,B:ie,c:xe,d:_O,e:_O,f:p4e,g:bO,G:wO,H:SO,I:SO,j:f4e,L:g4e,m:d4e,M:h4e,p:O,q:u4e,Q:y4e,s:v4e,S:m4e,u:a4e,U:i4e,V:o4e,w:s4e,W:l4e,x:de,X:fe,y:bO,Y:wO,Z:c4e,"%":x4e};b.x=F(r,b),b.X=F(n,b),b.c=F(t,b),j.x=F(r,j),j.X=F(n,j),j.c=F(t,j);function F(we,Se){return function(Ie){var me=[],_e=-1,We=0,Ue=we.length,St,Ze,Kt;for(Ie instanceof Date||(Ie=new Date(+Ie));++_e<Ue;)we.charCodeAt(_e)===37&&(me.push(we.slice(We,_e)),(Ze=vO[St=we.charAt(++_e)])!=null?St=we.charAt(++_e):Ze=St==="e"?" ":"0",(Kt=Se[St])&&(St=Kt(Ie,Ze)),me.push(St),We=_e+1);return me.push(we.slice(We,_e)),me.join("")}}function D(we,Se){return function(Ie){var me=Mx(1900,void 0,1),_e=M(me,we,Ie+="",0),We,Ue;if(_e!=Ie.length)return null;if("Q"in me)return new Date(me.Q);if("s"in me)return new Date(me.s*1e3+("L"in me?me.L:0));if(Se&&!("Z"in me)&&(me.Z=0),"p"in me&&(me.H=me.H%12+me.p*12),me.m===void 0&&(me.m="q"in me?me.q:0),"V"in me){if(me.V<1||me.V>53)return null;"w"in me||(me.w=1),"Z"in me?(We=tS(Mx(me.y,0,1)),Ue=We.getUTCDay(),We=Ue>4||Ue===0?Mb.ceil(We):Mb(We),We=$4.offset(We,(me.V-1)*7),me.y=We.getUTCFullYear(),me.m=We.getUTCMonth(),me.d=We.getUTCDate()+(me.w+6)%7):(We=eS(Mx(me.y,0,1)),Ue=We.getDay(),We=Ue>4||Ue===0?Pb.ceil(We):Pb(We),We=Rv.offset(We,(me.V-1)*7),me.y=We.getFullYear(),me.m=We.getMonth(),me.d=We.getDate()+(me.w+6)%7)}else("W"in me||"U"in me)&&("w"in me||(me.w="u"in me?me.u%7:"W"in me?1:0),Ue="Z"in me?tS(Mx(me.y,0,1)).getUTCDay():eS(Mx(me.y,0,1)).getDay(),me.m=0,me.d="W"in me?(me.w+6)%7+me.W*7-(Ue+5)%7:me.w+me.U*7-(Ue+6)%7);return"Z"in me?(me.H+=me.Z/100|0,me.M+=me.Z%100,tS(me)):eS(me)}}function M(we,Se,Ie,me){for(var _e=0,We=Se.length,Ue=Ie.length,St,Ze;_e<We;){if(me>=Ue)return-1;if(St=Se.charCodeAt(_e++),St===37){if(St=Se.charAt(_e++),Ze=A[St in vO?Se.charAt(_e++):St],!Ze||(me=Ze(we,Ie,me))<0)return-1}else if(St!=Ie.charCodeAt(me++))return-1}return me}function O(we,Se,Ie){var me=u.exec(Se.slice(Ie));return me?(we.p=d.get(me[0].toLowerCase()),Ie+me[0].length):-1}function L(we,Se,Ie){var me=p.exec(Se.slice(Ie));return me?(we.w=x.get(me[0].toLowerCase()),Ie+me[0].length):-1}function W(we,Se,Ie){var me=f.exec(Se.slice(Ie));return me?(we.w=m.get(me[0].toLowerCase()),Ie+me[0].length):-1}function re(we,Se,Ie){var me=C.exec(Se.slice(Ie));return me?(we.m=k.get(me[0].toLowerCase()),Ie+me[0].length):-1}function ie(we,Se,Ie){var me=w.exec(Se.slice(Ie));return me?(we.m=v.get(me[0].toLowerCase()),Ie+me[0].length):-1}function xe(we,Se,Ie){return M(we,t,Se,Ie)}function de(we,Se,Ie){return M(we,r,Se,Ie)}function fe(we,Se,Ie){return M(we,n,Se,Ie)}function H(we){return i[we.getDay()]}function Q(we){return a[we.getDay()]}function U(we){return c[we.getMonth()]}function V(we){return o[we.getMonth()]}function X(we){return s[+(we.getHours()>=12)]}function z(we){return 1+~~(we.getMonth()/3)}function K(we){return i[we.getUTCDay()]}function te(we){return a[we.getUTCDay()]}function se(we){return c[we.getUTCMonth()]}function pe(we){return o[we.getUTCMonth()]}function oe(we){return s[+(we.getUTCHours()>=12)]}function ye(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Se=F(we+="",b);return Se.toString=function(){return we},Se},parse:function(we){var Se=D(we+="",!1);return Se.toString=function(){return we},Se},utcFormat:function(we){var Se=F(we+="",j);return Se.toString=function(){return we},Se},utcParse:function(we){var Se=D(we+="",!0);return Se.toString=function(){return we},Se}}}var vO={"-":"",_:" ",0:"0"},Vi=/^\s*\d+/,t4e=/^%/,r4e=/[\\^$*+?|[\]().{}]/g;function is(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function n4e(e){return e.replace(r4e,"\\$&")}function Fx(e){return new RegExp("^(?:"+e.map(n4e).join("|")+")","i")}function Ox(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function s4e(e,t,r){var n=Vi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function a4e(e,t,r){var n=Vi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function i4e(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function o4e(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function l4e(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function wO(e,t,r){var n=Vi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function bO(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function c4e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function u4e(e,t,r){var n=Vi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function d4e(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function _O(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function f4e(e,t,r){var n=Vi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function SO(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function h4e(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function m4e(e,t,r){var n=Vi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function g4e(e,t,r){var n=Vi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function p4e(e,t,r){var n=Vi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function x4e(e,t,r){var n=t4e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function y4e(e,t,r){var n=Vi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function v4e(e,t,r){var n=Vi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function kO(e,t){return is(e.getDate(),t,2)}function w4e(e,t){return is(e.getHours(),t,2)}function b4e(e,t){return is(e.getHours()%12||12,t,2)}function _4e(e,t){return is(1+Rv.count(A0(e),e),t,3)}function fH(e,t){return is(e.getMilliseconds(),t,3)}function S4e(e,t){return fH(e,t)+"000"}function k4e(e,t){return is(e.getMonth()+1,t,2)}function T4e(e,t){return is(e.getMinutes(),t,2)}function C4e(e,t){return is(e.getSeconds(),t,2)}function N4e(e){var t=e.getDay();return t===0?7:t}function E4e(e,t){return is(z4.count(A0(e)-1,e),t,2)}function hH(e){var t=e.getDay();return t>=4||t===0?Pp(e):Pp.ceil(e)}function A4e(e,t){return e=hH(e),is(Pp.count(A0(e),e)+(A0(e).getDay()===4),t,2)}function j4e(e){return e.getDay()}function P4e(e,t){return is(Pb.count(A0(e)-1,e),t,2)}function M4e(e,t){return is(e.getFullYear()%100,t,2)}function F4e(e,t){return e=hH(e),is(e.getFullYear()%100,t,2)}function O4e(e,t){return is(e.getFullYear()%1e4,t,4)}function D4e(e,t){var r=e.getDay();return e=r>=4||r===0?Pp(e):Pp.ceil(e),is(e.getFullYear()%1e4,t,4)}function I4e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+is(t/60|0,"0",2)+is(t%60,"0",2)}function TO(e,t){return is(e.getUTCDate(),t,2)}function R4e(e,t){return is(e.getUTCHours(),t,2)}function L4e(e,t){return is(e.getUTCHours()%12||12,t,2)}function B4e(e,t){return is(1+$4.count(j0(e),e),t,3)}function mH(e,t){return is(e.getUTCMilliseconds(),t,3)}function $4e(e,t){return mH(e,t)+"000"}function z4e(e,t){return is(e.getUTCMonth()+1,t,2)}function U4e(e,t){return is(e.getUTCMinutes(),t,2)}function W4e(e,t){return is(e.getUTCSeconds(),t,2)}function H4e(e){var t=e.getUTCDay();return t===0?7:t}function G4e(e,t){return is(U4.count(j0(e)-1,e),t,2)}function gH(e){var t=e.getUTCDay();return t>=4||t===0?Mp(e):Mp.ceil(e)}function V4e(e,t){return e=gH(e),is(Mp.count(j0(e),e)+(j0(e).getUTCDay()===4),t,2)}function q4e(e){return e.getUTCDay()}function K4e(e,t){return is(Mb.count(j0(e)-1,e),t,2)}function X4e(e,t){return is(e.getUTCFullYear()%100,t,2)}function Y4e(e,t){return e=gH(e),is(e.getUTCFullYear()%100,t,2)}function J4e(e,t){return is(e.getUTCFullYear()%1e4,t,4)}function Q4e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Mp(e):Mp.ceil(e),is(e.getUTCFullYear()%1e4,t,4)}function Z4e(){return"+0000"}function CO(){return"%"}function NO(e){return+e}function EO(e){return Math.floor(+e/1e3)}var Lg,pH,xH;e_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e_e(e){return Lg=e4e(e),pH=Lg.format,Lg.parse,xH=Lg.utcFormat,Lg.utcParse,Lg}function t_e(e){return new Date(e)}function r_e(e){return e instanceof Date?+e:+new Date(+e)}function PT(e,t,r,n,s,a,i,o,c,u){var d=xT(),f=d.invert,m=d.domain,p=u(".%L"),x=u(":%S"),w=u("%I:%M"),v=u("%I %p"),C=u("%a %d"),k=u("%b %d"),b=u("%B"),j=u("%Y");function A(F){return(c(F)<F?p:o(F)<F?x:i(F)<F?w:a(F)<F?v:n(F)<F?s(F)<F?C:k:r(F)<F?b:j)(F)}return d.invert=function(F){return new Date(f(F))},d.domain=function(F){return arguments.length?m(Array.from(F,r_e)):m().map(t_e)},d.ticks=function(F){var D=m();return e(D[0],D[D.length-1],F??10)},d.tickFormat=function(F,D){return D==null?A:u(D)},d.nice=function(F){var D=m();return(!F||typeof F.range!="function")&&(F=t(D[0],D[D.length-1],F??10)),F?m(nH(D,F)):d},d.copy=function(){return Iv(d,PT(e,t,r,n,s,a,i,o,c,u))},d}function n_e(){return su.apply(PT(Qbe,Zbe,A0,AT,z4,Rv,NT,TT,im,pH).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function s_e(){return su.apply(PT(Ybe,Jbe,j0,jT,U4,$4,ET,CT,im,xH).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function W4(){var e=0,t=1,r,n,s,a,i=rl,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(s===0?.5:(f=(a(f)-r)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(m){var p,x;return arguments.length?([p,x]=m,i=f(p,x),u):[i(0),i(1)]}}return u.range=d(s1),u.rangeRound=d(pT),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function bh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function yH(){var e=wh(W4()(rl));return e.copy=function(){return bh(e,yH())},L0.apply(e,arguments)}function vH(){var e=wT(W4()).domain([1,10]);return e.copy=function(){return bh(e,vH()).base(e.base())},L0.apply(e,arguments)}function wH(){var e=bT(W4());return e.copy=function(){return bh(e,wH()).constant(e.constant())},L0.apply(e,arguments)}function MT(){var e=_T(W4());return e.copy=function(){return bh(e,MT()).exponent(e.exponent())},L0.apply(e,arguments)}function a_e(){return MT.apply(null,arguments).exponent(.5)}function bH(){var e=[],t=rl;function r(n){if(n!=null&&!isNaN(n=+n))return t((Ov(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Qf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>Hwe(e,a/n))},r.copy=function(){return bH(t).domain(e)},L0.apply(r,arguments)}function H4(){var e=0,t=.5,r=1,n=1,s,a,i,o,c,u=rl,d,f=!1,m;function p(w){return isNaN(w=+w)?m:(w=.5+((w=+d(w))-a)*(n*w<n*a?o:c),u(f?Math.max(0,Math.min(1,w)):w))}p.domain=function(w){return arguments.length?([e,t,r]=w,s=d(e=+e),a=d(t=+t),i=d(r=+r),o=s===a?0:.5/(a-s),c=a===i?0:.5/(i-a),n=a<s?-1:1,p):[e,t,r]},p.clamp=function(w){return arguments.length?(f=!!w,p):f},p.interpolator=function(w){return arguments.length?(u=w,p):u};function x(w){return function(v){var C,k,b;return arguments.length?([C,k,b]=v,u=xbe(w,[C,k,b]),p):[u(0),u(.5),u(1)]}}return p.range=x(s1),p.rangeRound=x(pT),p.unknown=function(w){return arguments.length?(m=w,p):m},function(w){return d=w,s=w(e),a=w(t),i=w(r),o=s===a?0:.5/(a-s),c=a===i?0:.5/(i-a),n=a<s?-1:1,p}}function _H(){var e=wh(H4()(rl));return e.copy=function(){return bh(e,_H())},L0.apply(e,arguments)}function SH(){var e=wT(H4()).domain([.1,1,10]);return e.copy=function(){return bh(e,SH()).base(e.base())},L0.apply(e,arguments)}function kH(){var e=bT(H4());return e.copy=function(){return bh(e,kH()).constant(e.constant())},L0.apply(e,arguments)}function FT(){var e=_T(H4());return e.copy=function(){return bh(e,FT()).exponent(e.exponent())},L0.apply(e,arguments)}function i_e(){return FT.apply(null,arguments).exponent(.5)}const Gx=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:hT,scaleDiverging:_H,scaleDivergingLog:SH,scaleDivergingPow:FT,scaleDivergingSqrt:i_e,scaleDivergingSymlog:kH,scaleIdentity:rH,scaleImplicit:ak,scaleLinear:tH,scaleLog:sH,scaleOrdinal:fT,scalePoint:qwe,scalePow:ST,scaleQuantile:oH,scaleQuantize:lH,scaleRadial:iH,scaleSequential:yH,scaleSequentialLog:vH,scaleSequentialPow:MT,scaleSequentialQuantile:bH,scaleSequentialSqrt:a_e,scaleSequentialSymlog:wH,scaleSqrt:$be,scaleSymlog:aH,scaleThreshold:cH,scaleTime:n_e,scaleUtc:s_e,tickFormat:eH},Symbol.toStringTag,{value:"Module"}));var _h=e=>e.chartData,o_e=Gt([_h],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),OT=(e,t,r,n)=>n?o_e(e):_h(e);function Fp(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ru(t)&&Ru(r))return!0}return!1}function AO(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function l_e(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(Ru(r))s=r;else if(typeof r=="function")return;if(Ru(n))a=n;else if(typeof n=="function")return;var i=[s,a];if(Fp(i))return i}}function c_e(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Fp(n))return AO(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,i,o;if(s==="auto")t!=null&&(i=Math.min(...t));else if(fn(s))i=s;else if(typeof s=="function")try{t!=null&&(i=s(t?.[0]))}catch{}else if(typeof s=="string"&&bF.test(s)){var c=bF.exec(s);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t?.[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(fn(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[1]))}catch{}else if(typeof a=="string"&&_F.test(a)){var d=_F.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t?.[1];var m=[i,o];if(Fp(m))return t==null?m:AO(m,t,r)}}}var a1=1e9,u_e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IT,aa=!0,Zc="[DecimalError] ",bm=Zc+"Invalid argument: ",DT=Zc+"Exponent out of range: ",i1=Math.floor,Jh=Math.pow,d_e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Kl,Li=1e7,Ws=7,TH=9007199254740991,Fb=i1(TH/Ws),$r={};$r.absoluteValue=$r.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$r.comparedTo=$r.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};$r.decimalPlaces=$r.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ws;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};$r.dividedBy=$r.div=function(e){return b0(this,new this.constructor(e))};$r.dividedToIntegerBy=$r.idiv=function(e){var t=this,r=t.constructor;return Fs(b0(t,new r(e),0,1),r.precision)};$r.equals=$r.eq=function(e){return!this.cmp(e)};$r.exponent=function(){return ci(this)};$r.greaterThan=$r.gt=function(e){return this.cmp(e)>0};$r.greaterThanOrEqualTo=$r.gte=function(e){return this.cmp(e)>=0};$r.isInteger=$r.isint=function(){return this.e>this.d.length-2};$r.isNegative=$r.isneg=function(){return this.s<0};$r.isPositive=$r.ispos=function(){return this.s>0};$r.isZero=function(){return this.s===0};$r.lessThan=$r.lt=function(e){return this.cmp(e)<0};$r.lessThanOrEqualTo=$r.lte=function(e){return this.cmp(e)<1};$r.logarithm=$r.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Kl))throw Error(Zc+"NaN");if(r.s<1)throw Error(Zc+(r.s?"NaN":"-Infinity"));return r.eq(Kl)?new n(0):(aa=!1,t=b0(Zy(r,a),Zy(e,a),a),aa=!0,Fs(t,s))};$r.minus=$r.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?EH(t,e):CH(t,(e.s=-e.s,e))};$r.modulo=$r.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Zc+"NaN");return r.s?(aa=!1,t=b0(r,e,0,1).times(e),aa=!0,r.minus(t)):Fs(new n(r),s)};$r.naturalExponential=$r.exp=function(){return NH(this)};$r.naturalLogarithm=$r.ln=function(){return Zy(this)};$r.negated=$r.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$r.plus=$r.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?CH(t,e):EH(t,(e.s=-e.s,e))};$r.precision=$r.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(bm+e);if(t=ci(s)+1,n=s.d.length-1,r=n*Ws+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};$r.squareRoot=$r.sqrt=function(){var e,t,r,n,s,a,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Zc+"NaN")}for(e=ci(o),aa=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=xd(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=i1((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=i=r+3;;)if(a=n,n=a.plus(b0(o,a,i+2)).times(.5),xd(a.d).slice(0,i)===(t=xd(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&t=="4999"){if(Fs(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;i+=4}return aa=!0,Fs(n,r)};$r.times=$r.mul=function(e){var t,r,n,s,a,i,o,c,u,d=this,f=d.constructor,m=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=p.length,c<u&&(a=m,m=p,p=a,i=c,c=u,u=i),a=[],i=c+u,n=i;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)o=a[s]+p[n]*m[s-n-1]+t,a[s--]=o%Li|0,t=o/Li|0;a[s]=(a[s]+t)%Li|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,aa?Fs(e,f.precision):e};$r.toDecimalPlaces=$r.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Cd(e,0,a1),t===void 0?t=n.rounding:Cd(t,0,8),Fs(r,e+ci(r)+1,t))};$r.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Hm(n,!0):(Cd(e,0,a1),t===void 0?t=s.rounding:Cd(t,0,8),n=Fs(new s(n),e+1,t),r=Hm(n,!0,e+1)),r};$r.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?Hm(s):(Cd(e,0,a1),t===void 0?t=a.rounding:Cd(t,0,8),n=Fs(new a(s),e+ci(s)+1,t),r=Hm(n.abs(),!1,e+ci(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};$r.toInteger=$r.toint=function(){var e=this,t=e.constructor;return Fs(new t(e),ci(e)+1,t.rounding)};$r.toNumber=function(){return+this};$r.toPower=$r.pow=function(e){var t,r,n,s,a,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Kl);if(o=new c(o),!o.s){if(e.s<1)throw Error(Zc+"Infinity");return o}if(o.eq(Kl))return o;if(n=c.precision,e.eq(Kl))return Fs(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,a=o.s,i){if((r=d<0?-d:d)<=TH){for(s=new c(Kl),t=Math.ceil(n/Ws+4),aa=!1;r%2&&(s=s.times(o),PO(s.d,t)),r=i1(r/2),r!==0;)o=o.times(o),PO(o.d,t);return aa=!0,e.s<0?new c(Kl).div(s):Fs(s,n)}}else if(a<0)throw Error(Zc+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,aa=!1,s=e.times(Zy(o,n+u)),aa=!0,s=NH(s),s.s=a,s};$r.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=ci(s),n=Hm(s,r<=a.toExpNeg||r>=a.toExpPos)):(Cd(e,1,a1),t===void 0?t=a.rounding:Cd(t,0,8),s=Fs(new a(s),e,t),r=ci(s),n=Hm(s,e<=r||r<=a.toExpNeg,e)),n};$r.toSignificantDigits=$r.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Cd(e,1,a1),t===void 0?t=n.rounding:Cd(t,0,8)),Fs(new n(r),e,t)};$r.toString=$r.valueOf=$r.val=$r.toJSON=$r[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ci(e),r=e.constructor;return Hm(e,t<=r.toExpNeg||t>=r.toExpPos)};function CH(e,t){var r,n,s,a,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),aa?Fs(t,f):t;if(c=e.d,u=t.d,i=e.e,s=t.e,c=c.slice(),a=i-s,a){for(a<0?(n=c,a=-a,o=u.length):(n=u,s=i,o=c.length),i=Math.ceil(f/Ws),o=i>o?i+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/Li|0,c[a]%=Li;for(r&&(c.unshift(r),++s),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=s,aa?Fs(t,f):t}function Cd(e,t,r){if(e!==~~e||e<t||e>r)throw Error(bm+e)}function xd(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)n=e[t]+"",r=Ws-n.length,r&&(a+=Lf(r)),a+=n;i=e[t],n=i+"",r=Ws-n.length,r&&(a+=Lf(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var b0=(function(){function e(n,s){var a,i=0,o=n.length;for(n=n.slice();o--;)a=n[o]*s+i,n[o]=a%Li|0,i=a/Li|0;return i&&n.unshift(i),n}function t(n,s,a,i){var o,c;if(a!=i)c=a>i?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=s[o]){c=n[o]>s[o]?1:-1;break}return c}function r(n,s,a){for(var i=0;a--;)n[a]-=i,i=n[a]<s[a]?1:0,n[a]=i*Li+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,i){var o,c,u,d,f,m,p,x,w,v,C,k,b,j,A,F,D,M,O=n.constructor,L=n.s==s.s?1:-1,W=n.d,re=s.d;if(!n.s)return new O(n);if(!s.s)throw Error(Zc+"Division by zero");for(c=n.e-s.e,D=re.length,A=W.length,p=new O(L),x=p.d=[],u=0;re[u]==(W[u]||0);)++u;if(re[u]>(W[u]||0)&&--c,a==null?k=a=O.precision:i?k=a+(ci(n)-ci(s))+1:k=a,k<0)return new O(0);if(k=k/Ws+2|0,u=0,D==1)for(d=0,re=re[0],k++;(u<A||d)&&k--;u++)b=d*Li+(W[u]||0),x[u]=b/re|0,d=b%re|0;else{for(d=Li/(re[0]+1)|0,d>1&&(re=e(re,d),W=e(W,d),D=re.length,A=W.length),j=D,w=W.slice(0,D),v=w.length;v<D;)w[v++]=0;M=re.slice(),M.unshift(0),F=re[0],re[1]>=Li/2&&++F;do d=0,o=t(re,w,D,v),o<0?(C=w[0],D!=v&&(C=C*Li+(w[1]||0)),d=C/F|0,d>1?(d>=Li&&(d=Li-1),f=e(re,d),m=f.length,v=w.length,o=t(f,w,m,v),o==1&&(d--,r(f,D<m?M:re,m))):(d==0&&(o=d=1),f=re.slice()),m=f.length,m<v&&f.unshift(0),r(w,f,v),o==-1&&(v=w.length,o=t(re,w,D,v),o<1&&(d++,r(w,D<v?M:re,v))),v=w.length):o===0&&(d++,w=[0]),x[u++]=d,o&&w[0]?w[v++]=W[j]||0:(w=[W[j]],v=1);while((j++<A||w[0]!==void 0)&&k--)}return x[0]||x.shift(),p.e=c,Fs(p,i?a+ci(p)+1:a)}})();function NH(e,t){var r,n,s,a,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(ci(e)>16)throw Error(DT+ci(e));if(!e.s)return new d(Kl);for(aa=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(Jh(2,u))/Math.LN10*2+5|0,o+=n,r=s=a=new d(Kl),d.precision=o;;){if(s=Fs(s.times(e),o),r=r.times(++c),i=a.plus(b0(s,r,o)),xd(i.d).slice(0,o)===xd(a.d).slice(0,o)){for(;u--;)a=Fs(a.times(a),o);return d.precision=f,t==null?(aa=!0,Fs(a,f)):a}a=i}}function ci(e){for(var t=e.e*Ws,r=e.d[0];r>=10;r/=10)t++;return t}function rS(e,t,r){if(t>e.LN10.sd())throw aa=!0,r&&(e.precision=r),Error(Zc+"LN10 precision limit exceeded");return Fs(new e(e.LN10),t)}function Lf(e){for(var t="";e--;)t+="0";return t}function Zy(e,t){var r,n,s,a,i,o,c,u,d,f=1,m=10,p=e,x=p.d,w=p.constructor,v=w.precision;if(p.s<1)throw Error(Zc+(p.s?"NaN":"-Infinity"));if(p.eq(Kl))return new w(0);if(t==null?(aa=!1,u=v):u=t,p.eq(10))return t==null&&(aa=!0),rS(w,u);if(u+=m,w.precision=u,r=xd(x),n=r.charAt(0),a=ci(p),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=xd(p.d),n=r.charAt(0),f++;a=ci(p),n>1?(p=new w("0."+r),a++):p=new w(n+"."+r.slice(1))}else return c=rS(w,u+2,v).times(a+""),p=Zy(new w(n+"."+r.slice(1)),u-m).plus(c),w.precision=v,t==null?(aa=!0,Fs(p,v)):p;for(o=i=p=b0(p.minus(Kl),p.plus(Kl),u),d=Fs(p.times(p),u),s=3;;){if(i=Fs(i.times(d),u),c=o.plus(b0(i,new w(s),u)),xd(c.d).slice(0,u)===xd(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(rS(w,u+2,v).times(a+""))),o=b0(o,new w(f),u),w.precision=v,t==null?(aa=!0,Fs(o,v)):o;o=c,s+=2}}function jO(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=i1(r/Ws),e.d=[],n=(r+1)%Ws,r<0&&(n+=Ws),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Ws;n<s;)e.d.push(+t.slice(n,n+=Ws));t=t.slice(n),n=Ws-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),aa&&(e.e>Fb||e.e<-Fb))throw Error(DT+r)}else e.s=0,e.e=0,e.d=[0];return e}function Fs(e,t,r){var n,s,a,i,o,c,u,d,f=e.d;for(i=1,a=f[0];a>=10;a/=10)i++;if(n=t-i,n<0)n+=Ws,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ws),a=f.length,d>=a)return e;for(u=a=f[d],i=1;a>=10;a/=10)i++;n%=Ws,s=n-Ws+i}if(r!==void 0&&(a=Jh(10,i-s-1),o=u/a%10|0,c=t<0||f[d+1]!==void 0||u%a,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?s>0?u/Jh(10,i-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(a=ci(e),f.length=1,t=t-a-1,f[0]=Jh(10,(Ws-t%Ws)%Ws),e.e=i1(-t/Ws)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=Jh(10,Ws-n),f[d]=s>0?(u/Jh(10,i-s)%Jh(10,s)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==Li&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=Li)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(aa&&(e.e>Fb||e.e<-Fb))throw Error(DT+ci(e));return e}function EH(e,t){var r,n,s,a,i,o,c,u,d,f,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),aa?Fs(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),s=Math.max(Math.ceil(p/Ws),o)+2,i>s&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for(s=c.length,o=f.length,d=s<o,d&&(o=s),s=0;s<o;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,s=f.length-o;s>0;--s)c[o++]=0;for(s=f.length;s>i;){if(c[--s]<f[s]){for(a=s;a&&c[--a]===0;)c[a]=Li-1;--c[a],c[s]+=Li}c[s]-=f[s]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,aa?Fs(t,p):t):new m(0)}function Hm(e,t,r){var n,s=ci(e),a=xd(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+Lf(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Lf(-s-1)+a,r&&(n=r-i)>0&&(a+=Lf(n))):s>=i?(a+=Lf(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+Lf(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=Lf(n))),e.s<0?"-"+a:a}function PO(e,t){if(e.length>t)return e.length=t,!0}function AH(e){var t,r,n;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(bm+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return jO(i,a.toString())}else if(typeof a!="string")throw Error(bm+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,d_e.test(a))jO(i,a);else throw Error(bm+a)}if(s.prototype=$r,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=AH,s.config=s.set=f_e,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function f_e(e){if(!e||typeof e!="object")throw Error(Zc+"Object expected");var t,r,n,s=["precision",1,a1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(i1(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(bm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(bm+r+": "+n);return this}var IT=AH(u_e);Kl=new IT(1);const ks=IT;var h_e=e=>e,jH={},PH=e=>e===jH,MO=e=>function t(){return arguments.length===0||arguments.length===1&&PH(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},MH=(e,t)=>e===1?t:MO(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(i=>i!==jH).length;return a>=e?t(...n):MH(e-a,MO(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>PH(d)?o.shift():d);return t(...u,...o)}))}),G4=e=>MH(e.length,e),ck=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},m_e=G4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),g_e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return h_e;var s=r.reverse(),a=s[0],i=s.slice(1);return function(){return i.reduce((o,c)=>c(o),a(...arguments))}},uk=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),FH=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=s,r=e(...s)),r}};function OH(e){var t;return e===0?t=1:t=Math.floor(new ks(e).abs().log(10).toNumber())+1,t}function DH(e,t,r){for(var n=new ks(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}G4((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});G4((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});G4((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var IH=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},RH=(e,t,r)=>{if(e.lte(0))return new ks(0);var n=OH(e.toNumber()),s=new ks(10).pow(n),a=e.div(s),i=n!==1?.05:.1,o=new ks(Math.ceil(a.div(i).toNumber())).add(r).mul(i),c=o.mul(s);return t?new ks(c.toNumber()):new ks(Math.ceil(c.toNumber()))},p_e=(e,t,r)=>{var n=new ks(1),s=new ks(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new ks(10).pow(OH(e)-1),s=new ks(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new ks(Math.floor(e)))}else e===0?s=new ks(Math.floor((t-1)/2)):r||(s=new ks(Math.floor(e)));var i=Math.floor((t-1)/2),o=g_e(m_e(c=>s.add(new ks(c-i).mul(n)).toNumber()),ck);return o(0,t)},LH=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ks(0),tickMin:new ks(0),tickMax:new ks(0)};var i=RH(new ks(r).sub(t).div(n-1),s,a),o;t<=0&&r>=0?o=new ks(0):(o=new ks(t).add(r).div(2),o=o.sub(new ks(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ks(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?LH(t,r,n,s,a+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new ks(c).mul(i)),tickMax:o.add(new ks(u).mul(i))})};function x_e(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[i,o]=IH([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...ck(0,n-1).map(()=>1/0)]:[...ck(0,n-1).map(()=>-1/0),o];return t>r?uk(c):c}if(i===o)return p_e(i,n,s);var{step:u,tickMin:d,tickMax:f}=LH(i,o,a,s,0),m=DH(d,f.add(new ks(.1).mul(u)),u);return t>r?uk(m):m}function y_e(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,i]=IH([r,n]);if(a===-1/0||i===1/0)return[r,n];if(a===i)return[a];var o=Math.max(t,2),c=RH(new ks(i).sub(a).div(o-1),s,0),u=[...DH(new ks(a),new ks(i),c),i];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?uk(u):u}var v_e=FH(x_e),w_e=FH(y_e),b_e=e=>e.rootProps.barCategoryGap,V4=e=>e.rootProps.stackOffset,RT=e=>e.options.chartName,LT=e=>e.rootProps.syncId,BH=e=>e.rootProps.syncMethod,BT=e=>e.options.eventEmitter,u0={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},zl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},q4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},__e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:u0.angleAxisId,includeHidden:!1,name:void 0,reversed:u0.reversed,scale:u0.scale,tick:u0.tick,tickCount:void 0,ticks:void 0,type:u0.type,unit:void 0},S_e={allowDataOverflow:zl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:zl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zl.scale,tick:zl.tick,tickCount:zl.tickCount,ticks:void 0,type:zl.type,unit:void 0},k_e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:u0.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:u0.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:u0.scale,tick:u0.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},T_e={allowDataOverflow:zl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:zl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:zl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:zl.scale,tick:zl.tick,tickCount:zl.tickCount,ticks:void 0,type:"category",unit:void 0},$T=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?k_e:__e,zT=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?T_e:S_e,K4=e=>e.polarOptions,UT=Gt([I0,R0,po],Mve),$H=Gt([K4,UT],(e,t)=>{if(e!=null)return oh(e.innerRadius,t,0)}),zH=Gt([K4,UT],(e,t)=>{if(e!=null)return oh(e.outerRadius,t,t*.8)}),C_e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},UH=Gt([K4],C_e);Gt([$T,UH],q4);var WH=Gt([UT,$H,zH],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Gt([zT,WH],q4);var HH=Gt([Qs,K4,$H,zH,I0,R0],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:oh(i,s,s/2),cy:oh(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ui=(e,t)=>t,X4=(e,t,r)=>r;function GH(e){return e?.id}var ki=e=>{var t=Qs(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},o1=e=>e.tooltip.settings.axisId,qi=e=>{var t=ki(e),r=o1(e);return Lv(e,t,r)},VH=Gt([qi],e=>e?.dataKey);function qH(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,i=new Map;return e.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=GH(o);u.forEach((f,m)=>{var p=a==null||s?m:String(al(f,a,null)),x=al(f,o.dataKey,0),w;i.has(p)?w=i.get(p):w={},Object.assign(w,{[d]:x}),i.set(p,w)})}}),Array.from(i.values())}function WT(e){return e.stackId!=null&&e.dataKey!=null}function FO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ob(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FO(Object(r),!0).forEach(function(n){N_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N_e(e,t,r){return(t=E_e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E_e(e){var t=A_e(e,"string");return typeof t=="symbol"?t:t+""}function A_e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dk=[0,"auto"],Bl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},KH=(e,t)=>e.cartesianAxis.xAxis[t],B0=(e,t)=>{var r=KH(e,t);return r??Bl},$l={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:dk,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Fv},XH=(e,t)=>e.cartesianAxis.yAxis[t],$0=(e,t)=>{var r=XH(e,t);return r??$l},j_e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},HT=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??j_e},El=(e,t,r)=>{switch(t){case"xAxis":return B0(e,r);case"yAxis":return $0(e,r);case"zAxis":return HT(e,r);case"angleAxis":return $T(e,r);case"radiusAxis":return zT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},P_e=(e,t,r)=>{switch(t){case"xAxis":return B0(e,r);case"yAxis":return $0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Lv=(e,t,r)=>{switch(t){case"xAxis":return B0(e,r);case"yAxis":return $0(e,r);case"angleAxis":return $T(e,r);case"radiusAxis":return zT(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},YH=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function JH(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var QH=e=>e.graphicalItems.cartesianItems,M_e=Gt([ui,X4],JH),ZH=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Bv=Gt([QH,El,M_e],ZH),eG=Gt([Bv],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(WT)),tG=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),rG=Gt([Bv],tG),nG=e=>e.map(t=>t.data).filter(Boolean).flat(1),F_e=Gt([Bv],nG),sG=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},GT=Gt([F_e,OT],sG),aG=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:al(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:al(s,n)}))):e.map(n=>({value:n})),Y4=Gt([GT,El,Bv],aG);function iG(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ig(e){return e.filter(t=>Td(t)||t instanceof Date).map(Number).filter(t=>Jc(t)===!1)}function O_e(e,t,r){return!r||typeof t!="number"||Jc(t)?[]:r.length?ig(r.flatMap(n=>{var s=al(e,n.dataKey),a,i;if(Array.isArray(s)?[a,i]=s:a=i=s,!(!Ru(a)||!Ru(i)))return[t-a,t+i]})):[]}var D_e=Gt([eG,OT,qi],qH),oG=(e,t,r)=>{var n={},s=t.reduce((a,i)=>(i.stackId==null||(a[i.stackId]==null&&(a[i.stackId]=[]),a[i.stackId].push(i)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[i,o]=a,c=o.map(GH);return[i,{stackedData:qve(e,c,r),graphicalItems:o}]}))},I_e=Gt([D_e,eG,V4],oG),lG=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var a=Yve(e,n,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},R_e=Gt([I_e,_h,ui],lG),cG=(e,t,r,n,s)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>iG(s,f)),d=al(a,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:O_e(a,d,u)}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:al(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),J4=e=>e.errorBars,uG=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>iG(r,n));Gt([rG,J4,ui],uG);var L_e=Gt([GT,El,rG,J4,ui],cG);function B_e(e){var{value:t}=e;if(Td(t)||t instanceof Date)return t}var OO=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=ig(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},$_e=(e,t,r)=>{var n=e.map(B_e).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&kU(n))?HW(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},VT=e=>{var t;if(e==null||!("domain"in e))return dk;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ig(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:dk},Db=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),i=Math.min(...a),o=Math.max(...a);return[i,o]}},dG=e=>e.referenceElements.dots,l1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),z_e=Gt([dG,ui,X4],l1),fG=e=>e.referenceElements.areas,U_e=Gt([fG,ui,X4],l1),hG=e=>e.referenceElements.lines,W_e=Gt([hG,ui,X4],l1),mG=(e,t)=>{var r=ig(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},H_e=Gt(z_e,ui,mG),gG=(e,t)=>{var r=ig(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},G_e=Gt([U_e,ui],gG),pG=(e,t)=>{var r=ig(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},V_e=Gt(W_e,ui,pG),q_e=Gt(H_e,V_e,G_e,(e,t,r)=>Db(e,r,t)),K_e=Gt([El],VT),xG=(e,t,r,n,s,a,i)=>{var o=l_e(t,e.allowDataOverflow);if(o!=null)return o;var c=a==="vertical"&&i==="xAxis"||a==="horizontal"&&i==="yAxis",u=c?Db(r,s,OO(n)):Db(s,OO(n));return c_e(t,u,e.allowDataOverflow)},X_e=Gt([El,K_e,R_e,L_e,q_e,Qs,ui],xG),Y_e=[0,1],yG=(e,t,r,n,s,a,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=vh(t,a);return u&&o==null?HW(0,r.length):c==="category"?$_e(n,e,u):s==="expand"?Y_e:i}},qT=Gt([El,Qs,GT,Y4,V4,ui,X_e],yG),vG=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:i}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(J7(a));return o in Gx?o:"point"}}},$v=Gt([El,Qs,YH,RT,ui],vG);function J_e(e){if(e!=null){if(e in Gx)return Gx[e]();var t="scale".concat(J7(e));if(t in Gx)return Gx[t]()}}function KT(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=J_e(t);if(s!=null){var a=s.domain(r).range(n);return Wve(a),a}}}var wG=(e,t,r)=>{var n=VT(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Fp(e))return v_e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Fp(e))return w_e(e,t.tickCount,t.allowDecimals)}},XT=Gt([qT,Lv,$v],wG),bG=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Fp(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],i=t[1],o=r[r.length-1];return[Math.min(s,a),Math.max(i,o)]}return t},Q_e=Gt([El,qT,XT,ui],bG),Z_e=Gt(Y4,El,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ig(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var i=n[a+1]-n[a];r=Math.min(r,i)}return r/s}}),_G=Gt(Z_e,Qs,b_e,po,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!Ru(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var i=oh(r,e*a),o=e*a/2;return o-i-(o-i)/a*i}return 0}),e3e=(e,t)=>{var r=B0(e,t);return r==null||typeof r.padding!="string"?0:_G(e,"xAxis",t,r.padding)},t3e=(e,t)=>{var r=$0(e,t);return r==null||typeof r.padding!="string"?0:_G(e,"yAxis",t,r.padding)},r3e=Gt(B0,e3e,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),n3e=Gt($0,t3e,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),s3e=Gt([po,r3e,L4,R4,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),a3e=Gt([po,Qs,n3e,L4,R4,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:i}=s;return a?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),zv=(e,t,r,n)=>{var s;switch(t){case"xAxis":return s3e(e,r,n);case"yAxis":return a3e(e,r,n);case"zAxis":return(s=HT(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return UH(e);case"radiusAxis":return WH(e,r);default:return}},SG=Gt([El,zv],q4),c1=Gt([El,$v,Q_e,SG],KT);Gt([Bv,J4,ui],uG);function kG(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Q4=(e,t)=>t,Z4=(e,t,r)=>r,i3e=Gt(D4,Q4,Z4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(kG)),o3e=Gt(I4,Q4,Z4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(kG)),TG=(e,t)=>({width:e.width,height:t.height}),l3e=(e,t)=>{var r=typeof t.width=="number"?t.width:Fv;return{width:r,height:e.height}},c3e=Gt(po,B0,TG),u3e=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},d3e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},f3e=Gt(R0,po,i3e,Q4,Z4,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var c=TG(t,o);i==null&&(i=u3e(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;a[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),a}),h3e=Gt(I0,po,o3e,Q4,Z4,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var c=l3e(t,o);i==null&&(i=d3e(t,n,e));var u=n==="left"&&!s||n==="right"&&s;a[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),a}),m3e=(e,t)=>{var r=B0(e,t);if(r!=null)return f3e(e,r.orientation,r.mirror)},g3e=Gt([po,B0,m3e,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),p3e=(e,t)=>{var r=$0(e,t);if(r!=null)return h3e(e,r.orientation,r.mirror)},x3e=Gt([po,$0,p3e,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),y3e=Gt(po,$0,(e,t)=>{var r=typeof t.width=="number"?t.width:Fv;return{width:r,height:e.height}}),CG=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:i}=r,o=vh(e,n),c=t.map(u=>u.value);if(i&&o&&a==="category"&&s&&kU(c))return c}},YT=Gt([Qs,Y4,El,ui],CG),NG=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,i=vh(e,n);if(i&&(s==="number"||a!=="auto"))return t.map(o=>o.value)}},JT=Gt([Qs,Y4,Lv,ui],NG),DO=Gt([Qs,P_e,$v,c1,YT,JT,zv,XT,ui],(e,t,r,n,s,a,i,o,c)=>{if(t==null)return null;var u=vh(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:a,duplicateDomain:s,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),v3e=(e,t,r,n,s,a,i,o,c)=>{if(!(t==null||n==null)){var u=vh(e,c),{type:d,ticks:f,tickCount:m}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/p:0;x=c==="angleAxis"&&a!=null&&a.length>=2?Hc(a[0]-a[1])*2*x:x;var w=f||s;if(w){var v=w.map((C,k)=>{var b=i?i.indexOf(C):C;return{index:k,coordinate:n(b)+x,value:C,offset:x}});return v.filter(C=>!Jc(C.coordinate))}return u&&o?o.map((C,k)=>({coordinate:n(C)+x,value:C,index:k,offset:x})):n.ticks?n.ticks(m).map(C=>({coordinate:n(C)+x,value:C,offset:x})):n.domain().map((C,k)=>({coordinate:n(C)+x,value:i?i[C]:C,index:k,offset:x}))}},EG=Gt([Qs,Lv,$v,c1,XT,zv,YT,JT,ui],v3e),w3e=(e,t,r,n,s,a,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=vh(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&n?.length>=2?Hc(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},AG=Gt([Qs,Lv,c1,zv,YT,JT,ui],w3e),jG=Gt(El,c1,(e,t)=>{if(!(e==null||t==null))return Ob(Ob({},e),{},{scale:t})}),b3e=Gt([El,$v,qT,SG],KT);Gt((e,t,r)=>HT(e,r),b3e,(e,t)=>{if(!(e==null||t==null))return Ob(Ob({},e),{},{scale:t})});var _3e=Gt([Qs,D4,I4],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),PG=e=>e.options.defaultTooltipEventType,MG=e=>e.options.validateTooltipEventTypes;function FG(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function QT(e,t){var r=PG(e),n=MG(e);return FG(t,r,n)}function S3e(e){return Qr(t=>QT(t,e))}var OG=(e,t)=>{var r,n=Number(t);if(!(Jc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},k3e=e=>e.tooltip.settings,$f={active:!1,index:null,dataKey:void 0,coordinate:void 0},T3e={itemInteraction:{click:$f,hover:$f},axisInteraction:{click:$f,hover:$f},keyboardInteraction:$f,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},DG=ec({name:"tooltip",initialState:T3e,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=w0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:C3e,removeTooltipEntrySettings:N3e,setTooltipSettingsState:E3e,setActiveMouseOverItemIndex:A3e,mouseLeaveItem:bTe,mouseLeaveChart:IG,setActiveClickItemIndex:_Te,setMouseOverAxisIndex:RG,setMouseClickAxisIndex:j3e,setSyncInteraction:fk,setKeyboardInteraction:hk}=DG.actions,P3e=DG.reducer;function IO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function aw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IO(Object(r),!0).forEach(function(n){M3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M3e(e,t,r){return(t=F3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F3e(e){var t=O3e(e,"string");return typeof t=="symbol"?t:t+""}function O3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D3e(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function I3e(e){return e.index!=null}var LG=(e,t,r,n)=>{if(t==null)return $f;var s=D3e(e,t,r);if(s==null)return $f;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(I3e(s)){if(a)return aw(aw({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return aw(aw({},$f),{},{coordinate:s.coordinate})},ZT=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!Ru(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},BG=(e,t,r,n,s,a,i,o)=>{if(!(a==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var d=s?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},$G=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var i;return((i=a.settings)===null||i===void 0?void 0:i.dataKey)===s})},Uv=e=>e.options.tooltipPayloadSearcher,u1=e=>e.tooltip;function RO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RO(Object(r),!0).forEach(function(n){R3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R3e(e,t,r){return(t=L3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L3e(e){var t=B3e(e,"string");return typeof t=="symbol"?t:t+""}function B3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $3e(e,t){return e??t}var zG=(e,t,r,n,s,a,i)=>{if(!(t==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((m,p)=>{var x,{dataDefinedOnItem:w,settings:v}=p,C=$3e(w,o),k=Array.isArray(C)?TW(C,u,d):C,b=(x=v?.dataKey)!==null&&x!==void 0?x:n,j=v?.nameKey,A;if(n&&Array.isArray(k)&&!Array.isArray(k[0])&&i==="axis"?A=TU(k,n,s):A=a(k,t,c,j),Array.isArray(A))A.forEach(D=>{var M=LO(LO({},v),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});m.push(SF({tooltipEntrySettings:M,dataKey:D.dataKey,payload:D.payload,value:al(D.payload,D.dataKey),name:D.name}))});else{var F;m.push(SF({tooltipEntrySettings:v,dataKey:b,payload:A,value:al(A,b),name:(F=al(A,j))!==null&&F!==void 0?F:v?.name}))}return m},f)}},eC=Gt([qi,Qs,YH,RT,ki],vG),z3e=Gt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),U3e=Gt([ki,o1],JH),Wv=Gt([z3e,qi,U3e],ZH),W3e=Gt([Wv],e=>e.filter(WT)),H3e=Gt([Wv],nG),d1=Gt([H3e,_h],sG),G3e=Gt([W3e,_h,qi],qH),tC=Gt([d1,qi,Wv],aG),V3e=Gt([qi],VT),q3e=Gt([Wv],e=>e.filter(WT)),K3e=Gt([G3e,q3e,V4],oG),X3e=Gt([K3e,_h,ki],lG),Y3e=Gt([Wv],tG),J3e=Gt([d1,qi,Y3e,J4,ki],cG),Q3e=Gt([dG,ki,o1],l1),Z3e=Gt([Q3e,ki],mG),e5e=Gt([fG,ki,o1],l1),t5e=Gt([e5e,ki],gG),r5e=Gt([hG,ki,o1],l1),n5e=Gt([r5e,ki],pG),s5e=Gt([Z3e,n5e,t5e],Db),a5e=Gt([qi,V3e,X3e,J3e,s5e,Qs,ki],xG),UG=Gt([qi,Qs,d1,tC,V4,ki,a5e],yG),i5e=Gt([UG,qi,eC],wG),o5e=Gt([qi,UG,i5e,ki],bG),WG=e=>{var t=ki(e),r=o1(e),n=!1;return zv(e,t,r,n)},HG=Gt([qi,WG],q4),GG=Gt([qi,eC,o5e,HG],KT),l5e=Gt([Qs,tC,qi,ki],CG),c5e=Gt([Qs,tC,qi,ki],NG),u5e=(e,t,r,n,s,a,i,o)=>{if(t){var{type:c}=t,u=vh(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&s!=null&&s?.length>=2?Hc(s[0]-s[1])*2*f:f,u&&i?i.map((m,p)=>({coordinate:n(m)+f,value:m,index:p,offset:f})):n.domain().map((m,p)=>({coordinate:n(m)+f,value:a?a[m]:m,index:p,offset:f}))}}},z0=Gt([Qs,qi,eC,GG,WG,l5e,c5e,ki],u5e),rC=Gt([PG,MG,k3e],(e,t,r)=>FG(r.shared,e,t)),VG=e=>e.tooltip.settings.trigger,nC=e=>e.tooltip.settings.defaultIndex,e_=Gt([u1,rC,VG,nC],LG),ev=Gt([e_,d1],ZT),qG=Gt([z0,ev],OG),d5e=Gt([e_],e=>{if(e)return e.dataKey}),KG=Gt([u1,rC,VG,nC],$G),f5e=Gt([I0,R0,Qs,po,z0,nC,KG,Uv],BG),h5e=Gt([e_,f5e],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),m5e=Gt([e_],e=>e.active),g5e=Gt([KG,ev,_h,VH,qG,Uv,rC],zG),p5e=Gt([g5e],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function BO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $O(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BO(Object(r),!0).forEach(function(n){x5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x5e(e,t,r){return(t=y5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y5e(e){var t=v5e(e,"string");return typeof t=="symbol"?t:t+""}function v5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w5e=()=>Qr(qi),b5e=()=>{var e=w5e(),t=Qr(z0),r=Qr(GG);return X6($O($O({},e),{},{scale:r}),t)},_5e=()=>Qr(RT),sC=(e,t)=>t,XG=(e,t,r)=>r,aC=(e,t,r,n)=>n,S5e=Gt(z0,e=>A4(e,t=>t.coordinate)),iC=Gt([u1,sC,XG,aC],LG),YG=Gt([iC,d1],ZT),k5e=(e,t,r)=>{if(t!=null){var n=u1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},JG=Gt([u1,sC,XG,aC],$G),Ib=Gt([I0,R0,Qs,po,z0,aC,JG,Uv],BG),T5e=Gt([iC,Ib],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),QG=Gt(z0,YG,OG),C5e=Gt([JG,YG,_h,VH,QG,Uv,sC],zG),N5e=Gt([iC],e=>({isActive:e.active,activeIndex:e.index})),E5e=(e,t,r,n,s,a,i,o)=>{if(!(!e||!t||!n||!s||!a)){var c=Jve(e.chartX,e.chartY,t,r,o);if(c){var u=Zve(c,t),d=zve(u,i,a,n,s),f=Qve(t,a,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mk.apply(null,arguments)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(n){A5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A5e(e,t,r){return(t=j5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j5e(e){var t=P5e(e,"string");return typeof t=="symbol"?t:t+""}function P5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M5e(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:a,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,m=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var p,x;if(u==="ScatterChart")p=d,x=H2e;else if(u==="BarChart")p=G2e(i,d,s,a),x=_we;else if(i==="radial"){var{cx:w,cy:v,radius:C,startAngle:k,endAngle:b}=UW(d);p={cx:w,cy:v,startAngle:k,endAngle:b,innerRadius:C,outerRadius:C},x=Cwe}else p={points:Nwe(i,d,s)},x=IW;var j=typeof o=="object"&&"className"in o?o.className:void 0,A=iw(iw(iw(iw({stroke:"#ccc",pointerEvents:"none"},s),p),go(o,!1)),{},{payload:f,payloadIndex:m,className:Ys("recharts-tooltip-cursor",j)});return S.isValidElement(o)?S.cloneElement(o,A):S.createElement(x,A)}function F5e(e){var t=b5e(),r=PW(),n=uT(),s=_5e();return S.createElement(M5e,mk({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var ZG=S.createContext(null),O5e=()=>S.useContext(ZG),nS={exports:{}},UO;function D5e(){return UO||(UO=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new s(d,f||c,m),x=r?r+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],p]:c._events[x].push(p):(c._events[x]=p,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,p=f.length,x=new Array(p);m<p;m++)x[m]=f[m].fn;return x},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,m,p,x){var w=r?r+u:u;if(!this._events[w])return!1;var v=this._events[w],C=arguments.length,k,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),C){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,m),!0;case 5:return v.fn.call(v.context,d,f,m,p),!0;case 6:return v.fn.call(v.context,d,f,m,p,x),!0}for(b=1,k=new Array(C-1);b<C;b++)k[b-1]=arguments[b];v.fn.apply(v.context,k)}else{var j=v.length,A;for(b=0;b<j;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),C){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,m);break;default:if(!k)for(A=1,k=new Array(C-1);A<C;A++)k[A-1]=arguments[A];v[b].fn.apply(v[b].context,k)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,m){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var x=this._events[p];if(x.fn)x.fn===d&&(!m||x.once)&&(!f||x.context===f)&&i(this,p);else{for(var w=0,v=[],C=x.length;w<C;w++)(x[w].fn!==d||m&&!x[w].once||f&&x[w].context!==f)&&v.push(x[w]);v.length?this._events[p]=v.length===1?v[0]:v:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(nS)),nS.exports}var I5e=D5e();const R5e=eu(I5e);var tv=new R5e,gk="recharts.syncEvent.tooltip",WO="recharts.syncEvent.brush";function L5e(e,t){if(t){var r=Number.parseInt(t,10);if(!Jc(r))return e?.[r]}}var B5e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},eV=ec({name:"options",initialState:B5e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),$5e=eV.reducer,{createEventEmitter:z5e}=eV.actions;function U5e(e){return e.tooltip.syncInteraction}var W5e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},tV=ec({name:"chartData",initialState:W5e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:HO,setDataStartEndIndexes:H5e,setComputedData:STe}=tV.actions,G5e=tV.reducer,V5e=["x","y"];function GO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(r),!0).forEach(function(n){q5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q5e(e,t,r){return(t=K5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K5e(e){var t=X5e(e,"string");return typeof t=="symbol"?t:t+""}function X5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y5e(e,t){if(e==null)return{};var r,n,s=J5e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function J5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rV=()=>{};function Q5e(){var e=Qr(LT),t=Qr(BT),r=ol(),n=Qr(BH),s=Qr(z0),a=uT(),i=cT(),o=Qr(c=>c.rootProps.className);S.useEffect(()=>{if(e==null)return rV;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var m;if(i&&d!==null&&d!==void 0&&(m=d.payload)!==null&&m!==void 0&&m.coordinate){var p=d.payload.coordinate,{x,y:w}=p,v=Y5e(p,V5e),C=qh(qh(qh({},v),typeof x=="number"&&{x:Math.max(i.x,Math.min(x,i.x+i.width))}),typeof w=="number"&&{y:Math.max(i.y,Math.min(w,i.y+i.height))}),k=qh(qh({},d),{},{payload:qh(qh({},d.payload),{},{coordinate:C})});r(k)}else r(d);return}if(s!=null){var b;if(typeof n=="function"){var j={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},A=n(s,j);b=s[A]}else n==="value"&&(b=s.find(ie=>String(ie.value)===d.payload.label));var{coordinate:F}=d.payload;if(b==null||d.payload.active===!1||F==null||i==null){r(fk({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:D,y:M}=F,O=Math.min(D,i.x+i.width),L=Math.min(M,i.y+i.height),W={x:a==="horizontal"?b.coordinate:O,y:a==="horizontal"?L:b.coordinate},re=fk({active:d.payload.active,coordinate:W,dataKey:d.payload.dataKey,index:String(b.index),label:d.payload.label});r(re)}}};return tv.on(gk,c),()=>{tv.off(gk,c)}},[o,r,t,e,n,s,a,i])}function Z5e(){var e=Qr(LT),t=Qr(BT),r=ol();S.useEffect(()=>{if(e==null)return rV;var n=(s,a,i)=>{t!==i&&e===s&&r(H5e(a))};return tv.on(WO,n),()=>{tv.off(WO,n)}},[r,t,e])}function eSe(){var e=ol();S.useEffect(()=>{e(z5e())},[e]),Q5e(),Z5e()}function tSe(e,t,r,n,s,a){var i=Qr(m=>k5e(m,e,t)),o=Qr(BT),c=Qr(LT),u=Qr(BH),d=Qr(U5e),f=d?.active;S.useEffect(()=>{if(!f&&c!=null&&o!=null){var m=fk({active:a,coordinate:r,dataKey:i,index:s,label:typeof n=="number"?String(n):n});tv.emit(gk,c,m,o)}},[f,r,i,s,n,o,c,u,a])}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(n){rSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rSe(e,t,r){return(t=nSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nSe(e){var t=sSe(e,"string");return typeof t=="symbol"?t:t+""}function sSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aSe(e){return e.dataKey}function iSe(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(_2e,t)}var KO=[],oSe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!n1.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function lSe(e){var t=nu(e,oSe),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:a,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:m,useTranslate3d:p,wrapperStyle:x,cursor:w,shared:v,trigger:C,defaultIndex:k,portal:b,axisId:j}=t,A=ol(),F=typeof k=="number"?String(k):k;S.useEffect(()=>{A(E3e({shared:v,trigger:C,axisId:j,active:r,defaultIndex:F}))},[A,v,C,j,r,F]);var D=cT(),M=DW(),O=S3e(v),{activeIndex:L,isActive:W}=Qr(se=>N5e(se,O,C,F)),re=Qr(se=>C5e(se,O,C,F)),ie=Qr(se=>QG(se,O,C,F)),xe=Qr(se=>T5e(se,O,C,F)),de=re,fe=O5e(),H=r??W,[Q,U]=jye([de,H]),V=O==="axis"?ie:void 0;tSe(O,C,xe,V,L,H);var X=b??fe;if(X==null)return null;var z=de??KO;H||(z=KO),o&&z.length&&(z=rye(de.filter(se=>se.value!=null&&(se.hide!==!0||t.includeHidden)),d,aSe));var K=z.length>0,te=S.createElement(A2e,{allowEscapeViewBox:n,animationDuration:s,animationEasing:a,isAnimationActive:c,active:H,coordinate:xe,hasPayload:K,offset:u,position:f,reverseDirection:m,useTranslate3d:p,viewBox:D,wrapperStyle:x,lastBoundingBox:Q,innerRef:U,hasPortalFromProps:!!b},iSe(i,qO(qO({},t),{},{payload:z,label:V,active:H,coordinate:xe,accessibilityLayer:M})));return S.createElement(S.Fragment,null,yS.createPortal(te,X),H&&S.createElement(F5e,{cursor:w,tooltipEventType:O,coordinate:xe,payload:de,index:L}))}var sS={},aS={},iS={},XO;function cSe(){return XO||(XO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let i,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),w()};let m=null;const p=()=>{m!=null&&clearTimeout(m),m=setTimeout(()=>{m=null,f()},n)},x=()=>{m!==null&&(clearTimeout(m),m=null)},w=()=>{x(),i=void 0,o=null},v=()=>{d()},C=function(...k){if(s?.aborted)return;i=this,o=k;const b=m==null;p(),c&&b&&d()};return C.schedule=p,C.cancel=w,C.flush=v,s?.addEventListener("abort",w,{once:!0}),C}e.debounce=t})(iS)),iS}var YO;function uSe(){return YO||(YO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cSe();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:i=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const m=t.debounce(function(...w){d=n.apply(this,w),f=null},s,{edges:u}),p=function(...w){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,w),f=Date.now(),m.cancel(),m.schedule(),d):(m.apply(this,w),d)},x=()=>(m.flush(),d);return p.cancel=m.cancel,p.flush=x,p}e.debounce=r})(aS)),aS}var JO;function dSe(){return JO||(JO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uSe();function r(n,s=0,a={}){const{leading:i=!0,trailing:o=!0}=a;return t.debounce(n,s,{leading:i,maxWait:s,trailing:o})}e.throttle=r})(sS)),sS}var oS,QO;function fSe(){return QO||(QO=1,oS=dSe().throttle),oS}var hSe=fSe();const mSe=eu(hSe);var uy=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]};function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function lS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(n){gSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gSe(e,t,r){return(t=pSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pSe(e){var t=xSe(e,"string");return typeof t=="symbol"?t:t+""}function xSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ySe=S.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:a="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:m,onResize:p,style:x={}}=e,w=S.useRef(null),v=S.useRef();v.current=p,S.useImperativeHandle(t,()=>w.current);var[C,k]=S.useState({containerWidth:n.width,containerHeight:n.height}),b=S.useCallback((A,F)=>{k(D=>{var M=Math.round(A),O=Math.round(F);return D.containerWidth===M&&D.containerHeight===O?D:{containerWidth:M,containerHeight:O}})},[]);S.useEffect(()=>{var A=O=>{var L,{width:W,height:re}=O[0].contentRect;b(W,re),(L=v.current)===null||L===void 0||L.call(v,W,re)};d>0&&(A=mSe(A,d,{trailing:!0,leading:!1}));var F=new ResizeObserver(A),{width:D,height:M}=w.current.getBoundingClientRect();return b(D,M),F.observe(w.current),()=>{F.disconnect()}},[b,d]);var j=S.useMemo(()=>{var{containerWidth:A,containerHeight:F}=C;if(A<0||F<0)return null;uy(sm(s)||sm(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,a),uy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var D=sm(s)?A:s,M=sm(a)?F:a;return r&&r>0&&(D?M=D/r:M&&(D=M*r),c&&M>c&&(M=c)),uy(D>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,M,s,a,i,o,r),S.Children.map(u,O=>S.cloneElement(O,{width:D,height:M,style:lS({width:D,height:M},O.props.style)}))},[r,u,a,c,o,i,C,s]);return S.createElement("div",{id:f?"".concat(f):void 0,className:Ys("recharts-responsive-container",m),style:lS(lS({},x),{},{width:s,height:a,minWidth:i,minHeight:o,maxHeight:c}),ref:w},S.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))});function vSe(e,t,r){return(t=wSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wSe(e){var t=bSe(e,"string");return typeof t=="symbol"?t:t+""}function bSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _Se{constructor(t){vSe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function SSe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(n){kSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kSe(e,t,r){return(t=TSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TSe(e){var t=CSe(e,"string");return typeof t=="symbol"?t:t+""}function CSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NSe={cacheSize:2e3,enableCache:!0},nV=SSe({},NSe),tD=new _Se(nV.cacheSize),ESe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},rD="recharts_measurement_span";function ASe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(i,"|").concat(o)}var nD=(e,t)=>{try{var r=document.getElementById(rD);r||(r=document.createElement("span"),r.setAttribute("id",rD),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,ESe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},dy=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||n1.isSsr)return{width:0,height:0};if(!nV.enableCache)return nD(t,r);var n=ASe(t,r),s=tD.get(n);if(s)return s;var a=nD(t,r);return tD.set(n,a),a},sD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aD=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jSe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,PSe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},MSe=Object.keys(sV),rp="NaN";function FSe(e,t){return e*sV[t]}class vl{static parse(t){var r,[,n,s]=(r=PSe.exec(t))!==null&&r!==void 0?r:[];return new vl(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Jc(t)&&(this.unit=""),r!==""&&!jSe.test(r)&&(this.num=NaN,this.unit=""),MSe.includes(r)&&(this.num=FSe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new vl(NaN,""):new vl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new vl(NaN,""):new vl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new vl(NaN,""):new vl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new vl(NaN,""):new vl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Jc(this.num)}}function aV(e){if(e.includes(rp))return rp;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=sD.exec(t))!==null&&r!==void 0?r:[],i=vl.parse(n??""),o=vl.parse(a??""),c=s==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return rp;t=t.replace(sD,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,m]=(u=aD.exec(t))!==null&&u!==void 0?u:[],p=vl.parse(d??""),x=vl.parse(m??""),w=f==="+"?p.add(x):p.subtract(x);if(w.isNaN())return rp;t=t.replace(aD,w.toString())}return t}var iD=/\(([^()]*)\)/;function OSe(e){for(var t=e,r;(r=iD.exec(t))!=null;){var[,n]=r;t=t.replace(iD,aV(n))}return t}function DSe(e){var t=e.replace(/\s+/g,"");return t=OSe(t),t=aV(t),t}function ISe(e){try{return DSe(e)}catch{return rp}}function cS(e){var t=ISe(e.slice(5,-1));return t===rp?"":t}var RSe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],LSe=["dx","dy","angle","className","breakAll"];function pk(){return pk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pk.apply(null,arguments)}function oD(e,t){if(e==null)return{};var r,n,s=BSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iV=/[ \f\n\r\t\v\u2028\u2029]+/,oV=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Hi(t)||(r?s=t.toString().split(""):s=t.toString().split(iV));var a=s.map(o=>({word:o,width:dy(o,n).width})),i=r?0:dy("",n).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},$Se=(e,t,r,n,s)=>{var{maxLines:a,children:i,style:o,breakAll:c}=e,u=fn(a),d=i,f=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce((re,ie)=>{var{word:xe,width:de}=ie,fe=re[re.length-1];if(fe&&(n==null||s||fe.width+de+r<Number(n)))fe.words.push(xe),fe.width+=de+r;else{var H={words:[xe],width:de};re.push(H)}return re},[])},m=f(t),p=L=>L.reduce((W,re)=>W.width>re.width?W:re);if(!u||s)return m;var x=m.length>a||p(m).width>Number(n);if(!x)return m;for(var w="",v=L=>{var W=d.slice(0,L),re=oV({breakAll:c,style:o,children:W+w}).wordsWithComputedWidth,ie=f(re),xe=ie.length>a||p(ie).width>Number(n);return[xe,ie]},C=0,k=d.length-1,b=0,j;C<=k&&b<=d.length-1;){var A=Math.floor((C+k)/2),F=A-1,[D,M]=v(F),[O]=v(A);if(!D&&!O&&(C=A+1),D&&O&&(k=A-1),!D&&O){j=M;break}b++}return j||m},lD=e=>{var t=Hi(e)?[]:e.toString().split(iV);return[{words:t}]},zSe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:i}=e;if((t||r)&&!n1.isSsr){var o,c,u=oV({breakAll:a,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return lD(n);return $Se({breakAll:a,children:n,maxLines:i,style:s},o,c,t,r)}return lD(n)},cD="#808080",oC=S.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:a="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=cD}=e,d=oD(e,RSe),f=S.useMemo(()=>zSe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:m,dy:p,angle:x,className:w,breakAll:v}=d,C=oD(d,LSe);if(!Td(r)||!Td(n)||f.length===0)return null;var k=r+(fn(m)?m:0),b=n+(fn(p)?p:0),j;switch(c){case"start":j=cS("calc(".concat(a,")"));break;case"middle":j=cS("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:j=cS("calc(".concat(f.length-1," * -").concat(s,")"));break}var A=[];if(i){var F=f[0].width,{width:D}=d;A.push("scale(".concat(fn(D)?D/F:1,")"))}return x&&A.push("rotate(".concat(x,", ").concat(k,", ").concat(b,")")),A.length&&(C.transform=A.join(" ")),S.createElement("text",pk({},go(C,!0),{ref:t,x:k,y:b,className:Ys("recharts-text",w),textAnchor:o,fill:u.includes("url")?cD:u}),f.map((M,O)=>{var L=M.words.join(v?"":" ");return S.createElement("tspan",{x:k,dy:O===0?j:s,key:"".concat(L,"-").concat(O)},L)}))});oC.displayName="Text";var USe=["labelRef"];function WSe(e,t){if(e==null)return{};var r,n,s=HSe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Va(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uD(Object(r),!0).forEach(function(n){GSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GSe(e,t,r){return(t=VSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VSe(e){var t=qSe(e,"string");return typeof t=="symbol"?t:t+""}function qSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d0(){return d0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d0.apply(null,arguments)}var lV=S.createContext(null),KSe=e=>{var{x:t,y:r,width:n,height:s,children:a}=e,i=S.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return S.createElement(lV.Provider,{value:i},a)},cV=()=>{var e=S.useContext(lV),t=cT();return e||t},XSe=S.createContext(null),YSe=()=>{var e=S.useContext(XSe),t=Qr(HH);return e||t},JSe=e=>{var{value:t,formatter:r}=e,n=Hi(e.children)?t:e.children;return typeof r=="function"?r(n):n},lC=e=>e!=null&&typeof e=="function",QSe=(e,t)=>{var r=Hc(t-e),n=Math.min(Math.abs(t-e),360);return r*n},ZSe=(e,t,r,n,s)=>{var{offset:a,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:m,clockWise:p}=s,x=(u+d)/2,w=QSe(f,m),v=w>=0?1:-1,C,k;switch(t){case"insideStart":C=f+v*a,k=p;break;case"insideEnd":C=m-v*a,k=!p;break;case"end":C=m+v*a,k=p;break;default:throw new Error("Unsupported position ".concat(t))}k=w<=0?k:!k;var b=fo(o,c,x,C),j=fo(o,c,x,C+(k?1:-1)*359),A="M".concat(b.x,",").concat(b.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(k?0:1,`,
    `).concat(j.x,",").concat(j.y),F=Hi(e.id)?Gy("recharts-radial-line-"):e.id;return S.createElement("text",d0({},n,{dominantBaseline:"central",className:Ys("recharts-radial-bar-label",i)}),S.createElement("defs",null,S.createElement("path",{id:F,d:A})),S.createElement("textPath",{xlinkHref:"#".concat(F)},r))},e6e=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=fo(n,s,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var m=(a+i)/2,{x:p,y:x}=fo(n,s,m,u);return{x:p,y:x,textAnchor:"middle",verticalAnchor:"middle"}},uV=e=>"cx"in e&&fn(e.cx),t6e=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!uV(r)&&(a=r);var{x:i,y:o,width:c,height:u}=t,d=u>=0?1:-1,f=d*n,m=d>0?"end":"start",p=d>0?"start":"end",x=c>=0?1:-1,w=x*n,v=x>0?"end":"start",C=x>0?"start":"end";if(s==="top"){var k={x:i+c/2,y:o-d*n,textAnchor:"middle",verticalAnchor:m};return Va(Va({},k),a?{height:Math.max(o-a.y,0),width:c}:{})}if(s==="bottom"){var b={x:i+c/2,y:o+u+f,textAnchor:"middle",verticalAnchor:p};return Va(Va({},b),a?{height:Math.max(a.y+a.height-(o+u),0),width:c}:{})}if(s==="left"){var j={x:i-w,y:o+u/2,textAnchor:v,verticalAnchor:"middle"};return Va(Va({},j),a?{width:Math.max(j.x-a.x,0),height:u}:{})}if(s==="right"){var A={x:i+c+w,y:o+u/2,textAnchor:C,verticalAnchor:"middle"};return Va(Va({},A),a?{width:Math.max(a.x+a.width-A.x,0),height:u}:{})}var F=a?{width:c,height:u}:{};return s==="insideLeft"?Va({x:i+w,y:o+u/2,textAnchor:C,verticalAnchor:"middle"},F):s==="insideRight"?Va({x:i+c-w,y:o+u/2,textAnchor:v,verticalAnchor:"middle"},F):s==="insideTop"?Va({x:i+c/2,y:o+f,textAnchor:"middle",verticalAnchor:p},F):s==="insideBottom"?Va({x:i+c/2,y:o+u-f,textAnchor:"middle",verticalAnchor:m},F):s==="insideTopLeft"?Va({x:i+w,y:o+f,textAnchor:C,verticalAnchor:p},F):s==="insideTopRight"?Va({x:i+c-w,y:o+f,textAnchor:v,verticalAnchor:p},F):s==="insideBottomLeft"?Va({x:i+w,y:o+u-f,textAnchor:C,verticalAnchor:m},F):s==="insideBottomRight"?Va({x:i+c-w,y:o+u-f,textAnchor:v,verticalAnchor:m},F):s&&typeof s=="object"&&(fn(s.x)||sm(s.x))&&(fn(s.y)||sm(s.y))?Va({x:i+oh(s.x,c),y:o+oh(s.y,u),textAnchor:"end",verticalAnchor:"end"},F):Va({x:i+c/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},F)},r6e={offset:5};function Bf(e){var t=nu(e,r6e),{viewBox:r,position:n,value:s,children:a,content:i,className:o="",textBreakAll:c,labelRef:u}=t,d=YSe(),f=cV(),m=n==="center"?f:d??f,p=r||m;if(!p||Hi(s)&&Hi(a)&&!S.isValidElement(i)&&typeof i!="function")return null;var x=Va(Va({},t),{},{viewBox:p});if(S.isValidElement(i)){var{labelRef:w}=x,v=WSe(x,USe);return S.cloneElement(i,v)}var C;if(typeof i=="function"){if(C=S.createElement(i,x),S.isValidElement(C))return C}else C=JSe(t);var k=uV(p),b=go(t,!0);if(k&&(n==="insideStart"||n==="insideEnd"||n==="end"))return ZSe(t,n,C,b,p);var j=k?e6e(p,t.offset,t.position):t6e(t,p);return S.createElement(oC,d0({ref:u,className:Ys("recharts-label",o)},b,j,{breakAll:c}),C)}Bf.displayName="Label";var n6e=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?S.createElement(Bf,d0({key:"label-implicit"},n)):Td(e)?S.createElement(Bf,d0({key:"label-implicit",value:e},n)):S.isValidElement(e)?e.type===Bf?S.cloneElement(e,Va({key:"label-implicit"},n)):S.createElement(Bf,d0({key:"label-implicit",content:e},n)):lC(e)?S.createElement(Bf,d0({key:"label-implicit",content:e},n)):e&&typeof e=="object"?S.createElement(Bf,d0({},e,{key:"label-implicit"},n)):null};function s6e(e){var{label:t}=e,r=cV();return n6e(t,r)||null}var uS={},dS={},dD;function a6e(){return dD||(dD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(dS)),dS}var fS={},fD;function i6e(){return fD||(fD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(fS)),fS}var hD;function o6e(){return hD||(hD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a6e(),r=i6e(),n=tT();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(uS)),uS}var hS,mD;function l6e(){return mD||(mD=1,hS=o6e().last),hS}var c6e=l6e();const u6e=eu(c6e);var d6e=["valueAccessor"],f6e=["dataKey","clockWise","id","textBreakAll"];function Rb(){return Rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rb.apply(null,arguments)}function gD(e,t){if(e==null)return{};var r,n,s=h6e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function h6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var m6e=e=>Array.isArray(e.value)?u6e(e.value):e.value,dV=S.createContext(void 0),g6e=dV.Provider,fV=S.createContext(void 0);fV.Provider;function p6e(){return S.useContext(dV)}function x6e(){return S.useContext(fV)}function ww(e){var{valueAccessor:t=m6e}=e,r=gD(e,d6e),{dataKey:n,clockWise:s,id:a,textBreakAll:i}=r,o=gD(r,f6e),c=p6e(),u=x6e(),d=c||u;return!d||!d.length?null:S.createElement(r1,{className:"recharts-label-list"},d.map((f,m)=>{var p,x=Hi(n)?t(f,m):al(f&&f.payload,n),w=Hi(a)?{}:{id:"".concat(a,"-").concat(m)};return S.createElement(Bf,Rb({},go(f,!0),o,w,{fill:(p=r.fill)!==null&&p!==void 0?p:f.fill,parentViewBox:f.parentViewBox,value:x,textBreakAll:i,viewBox:f.viewBox,key:"label-".concat(m),index:m}))}))}ww.displayName="LabelList";function y6e(e){var{label:t}=e;return t?t===!0?S.createElement(ww,{key:"labelList-implicit"}):S.isValidElement(t)||lC(t)?S.createElement(ww,{key:"labelList-implicit",content:t}):typeof t=="object"?S.createElement(ww,Rb({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function xk(){return xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xk.apply(null,arguments)}var hV=e=>{var{cx:t,cy:r,r:n,className:s}=e,a=Ys("recharts-dot",s);return t===+t&&r===+r&&n===+n?S.createElement("circle",xk({},ng(e),Z7(e),{className:a,cx:t,cy:r,r:n})):null},v6e={radiusAxis:{},angleAxis:{}},mV=ec({name:"polarAxis",initialState:v6e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:kTe,removeRadiusAxis:TTe,addAngleAxis:CTe,removeAngleAxis:NTe}=mV.actions,w6e=mV.reducer;function b6e(e){var{fn:t,args:r}=e,n=ol(),s=ru();return S.useEffect(()=>{if(!s){var a=t(r);return n(C3e(a)),()=>{n(N3e(a))}}},[t,r,n,s]),null}var _6e=()=>{};function S6e(e){var{legendPayload:t}=e,r=ol(),n=ru();return S.useEffect(()=>n?_6e:(r(g2e(t)),()=>{r(p2e(t))}),[r,n,t]),null}var mS,k6e=()=>{var[e]=S.useState(()=>Gy("uid-"));return e},T6e=(mS=DD.useId)!==null&&mS!==void 0?mS:k6e;function C6e(e,t){var r=T6e();return t||(e?"".concat(e,"-").concat(r):r)}var N6e=S.createContext(void 0),E6e=e=>{var{id:t,type:r,children:n}=e,s=C6e("recharts-".concat(r),t);return S.createElement(N6e.Provider,{value:s},n(s))},A6e={cartesianItems:[],polarItems:[]},gV=ec({name:"graphicalItems",initialState:A6e,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=w0(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=w0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=w0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:j6e,replaceCartesianGraphicalItem:P6e,removeCartesianGraphicalItem:M6e,addPolarGraphicalItem:ETe,removePolarGraphicalItem:ATe}=gV.actions,F6e=gV.reducer;function O6e(e){var t=ol(),r=S.useRef(null);return S.useEffect(()=>{r.current===null?t(j6e(e)):r.current!==e&&t(P6e({prev:r.current,next:e})),r.current=e},[t,e]),S.useEffect(()=>()=>{r.current&&(t(M6e(r.current)),r.current=null)},[t]),null}function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pD(Object(r),!0).forEach(function(n){D6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D6e(e,t,r){return(t=I6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I6e(e){var t=R6e(e,"string");return typeof t=="symbol"?t:t+""}function R6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L6e={xAxis:{},yAxis:{},zAxis:{}},pV=ec({name:"cartesianAxis",initialState:L6e,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=xD(xD({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:B6e,removeXAxis:$6e,addYAxis:z6e,removeYAxis:U6e,addZAxis:jTe,removeZAxis:PTe,updateYAxisWidth:W6e}=pV.actions,H6e=pV.reducer,G6e=Gt([po],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),V6e=Gt([G6e,I0,R0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),cC=()=>Qr(V6e),q6e=()=>Qr(p5e);function yD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yD(Object(r),!0).forEach(function(n){K6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K6e(e,t,r){return(t=X6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X6e(e){var t=Y6e(e,"string");return typeof t=="symbol"?t:t+""}function Y6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J6e=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:a}=e;if(s===!1||t.x==null||t.y==null)return null;var i=vD(vD({index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},go(s,!1)),Z7(s)),o;return S.isValidElement(s)?o=S.cloneElement(s,i):typeof s=="function"?o=s(i):o=S.createElement(hV,i),S.createElement(r1,{className:"recharts-active-dot"},o)};function Q6e(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,a=Qr(ev),i=q6e();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return Hi(o)?null:J6e({point:o,childIndex:Number(a),mainColor:r,dataKey:s,activeDot:n})}var Z6e={},xV=ec({name:"errorBars",initialState:Z6e,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:MTe,replaceErrorBar:FTe,removeErrorBar:OTe}=xV.actions,eke=xV.reducer,tke=["children"];function rke(e,t){if(e==null)return{};var r,n,s=nke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nke(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ske={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ake=S.createContext(ske);function ike(e){var{children:t}=e,r=rke(e,tke);return S.createElement(ake.Provider,{value:r},t)}function yV(e,t){var r,n,s=Qr(u=>B0(u,e)),a=Qr(u=>$0(u,t)),i=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Bl.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:$l.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function oke(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=cC(),{needClipX:a,needClipY:i,needClip:o}=yV(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=s;return S.createElement("clipPath",{id:"clipPath-".concat(n)},S.createElement("rect",{x:a?c:c-d/2,y:i?u:u-f/2,width:a?d:d*2,height:i?f:f*2}))}var lke=e=>{var{chartData:t}=e,r=ol(),n=ru();return S.useEffect(()=>n?()=>{}:(r(HO(t)),()=>{r(HO(void 0))}),[t,r,n]),null},wD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},vV=ec({name:"brush",initialState:wD,reducers:{setBrushSettings(e,t){return t.payload==null?wD:t.payload}}}),{setBrushSettings:DTe}=vV.actions,cke=vV.reducer;function uke(e,t,r){return(t=dke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dke(e){var t=fke(e,"string");return typeof t=="symbol"?t:t+""}function fke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class uC{static create(t){return new uC(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}uke(uC,"EPS",1e-4);function hke(e){return(e%180+180)%180}var mke=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=hke(s),i=a*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},gke={dots:[],areas:[],lines:[]},wV=ec({name:"referenceElements",initialState:gke,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=w0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=w0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=w0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:ITe,removeDot:RTe,addArea:LTe,removeArea:BTe,addLine:$Te,removeLine:zTe}=wV.actions,pke=wV.reducer,xke=S.createContext(void 0),yke=e=>{var{children:t}=e,[r]=S.useState("".concat(Gy("recharts"),"-clip")),n=cC();if(n==null)return null;var{x:s,y:a,width:i,height:o}=n;return S.createElement(xke.Provider,{value:r},S.createElement("defs",null,S.createElement("clipPath",{id:r},S.createElement("rect",{x:s,y:a,height:o,width:i}))),t)};function Op(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function bV(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function vke(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return mke(n,r)}function wke(e,t,r){var n=r==="width",{x:s,y:a,width:i,height:o}=e;return t===1?{start:n?s:a,end:n?s+i:a+o}:{start:n?s+i:a+o,end:n?s:a}}function Lb(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function bke(e,t){return bV(e,t+1)}function _ke(e,t,r,n,s){for(var a=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var x=n?.[c];if(x===void 0)return{v:bV(n,u)};var w=c,v,C=()=>(v===void 0&&(v=r(x,w)),v),k=x.coordinate,b=c===0||Lb(e,k,C,d,o);b||(c=0,d=i,u+=1),b&&(d=k+e*(C()/2+s),c+=u)},m;u<=a.length;)if(m=f(),m)return m.v;return[]}function bD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ao(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bD(Object(r),!0).forEach(function(n){Ske(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ske(e,t,r){return(t=kke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kke(e){var t=Tke(e,"string");return typeof t=="symbol"?t:t+""}function Tke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cke(e,t,r,n,s){for(var a=(n||[]).slice(),i=a.length,{start:o}=t,{end:c}=t,u=function(m){var p=a[m],x,w=()=>(x===void 0&&(x=r(p,m)),x);if(m===i-1){var v=e*(p.coordinate+e*w()/2-c);a[m]=p=Ao(Ao({},p),{},{tickCoord:v>0?p.coordinate-v*e:p.coordinate})}else a[m]=p=Ao(Ao({},p),{},{tickCoord:p.coordinate});var C=Lb(e,p.tickCoord,w,o,c);C&&(c=p.tickCoord-e*(w()/2+s),a[m]=Ao(Ao({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return a}function Nke(e,t,r,n,s,a){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(a){var d=n[o-1],f=r(d,o-1),m=e*(d.coordinate+e*f/2-u);i[o-1]=d=Ao(Ao({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var p=Lb(e,d.tickCoord,()=>f,c,u);p&&(u=d.tickCoord-e*(f/2+s),i[o-1]=Ao(Ao({},d),{},{isShow:!0}))}for(var x=a?o-1:o,w=function(k){var b=i[k],j,A=()=>(j===void 0&&(j=r(b,k)),j);if(k===0){var F=e*(b.coordinate-e*A()/2-c);i[k]=b=Ao(Ao({},b),{},{tickCoord:F<0?b.coordinate-F*e:b.coordinate})}else i[k]=b=Ao(Ao({},b),{},{tickCoord:b.coordinate});var D=Lb(e,b.tickCoord,A,c,u);D&&(c=b.tickCoord+e*(A()/2+s),i[k]=Ao(Ao({},b),{},{isShow:!0}))},v=0;v<x;v++)w(v);return i}function dC(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(fn(c)||n1.isSsr){var m;return(m=bke(s,fn(c)?c:0))!==null&&m!==void 0?m:[]}var p=[],x=o==="top"||o==="bottom"?"width":"height",w=d&&x==="width"?dy(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(b,j)=>{var A=typeof u=="function"?u(b.value,j):b.value;return x==="width"?vke(dy(A,{fontSize:t,letterSpacing:r}),w,f):dy(A,{fontSize:t,letterSpacing:r})[x]},C=s.length>=2?Hc(s[1].coordinate-s[0].coordinate):1,k=wke(a,C,x);return c==="equidistantPreserveStart"?_ke(C,k,v,s,i):(c==="preserveStart"||c==="preserveStartEnd"?p=Nke(C,k,v,s,i,c==="preserveStartEnd"):p=Cke(C,k,v,s,i),p.filter(b=>b.isShow))}var Eke=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=s+a,u=i+c+o+(r?n:0);return Math.round(u)}return 0},Ake=["axisLine","width","height","className","hide","ticks"],jke=["viewBox"],Pke=["viewBox"];function yk(e,t){if(e==null)return{};var r,n,s=Mke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Mke(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Gm(){return Gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gm.apply(null,arguments)}function _D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_D(Object(r),!0).forEach(function(n){Fke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_D(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fke(e,t,r){return(t=Oke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oke(e){var t=Dke(e,"string");return typeof t=="symbol"?t:t+""}function Dke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fC={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Ike(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:i,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var u=pi(pi(pi({},c),go(o,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!i||a==="bottom"&&i);u=pi(pi({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var f=+(a==="left"&&!i||a==="right"&&i);u=pi(pi({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+s})}return S.createElement("line",Gm({},u,{className:Ys("recharts-cartesian-axis-line",C4(o,"className"))}))}function Rke(e,t,r,n,s,a,i,o,c){var u,d,f,m,p,x,w=o?-1:1,v=e.tickSize||i,C=fn(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,m=r+ +!o*s,f=m-w*v,x=f-w*c,p=C;break;case"left":f=m=e.coordinate,d=t+ +!o*n,u=d-w*v,p=u-w*c,x=C;break;case"right":f=m=e.coordinate,d=t+ +o*n,u=d+w*v,p=u+w*c,x=C;break;default:u=d=e.coordinate,m=r+ +o*s,f=m+w*v,x=f+w*c,p=C;break}return{line:{x1:u,y1:f,x2:d,y2:m},tick:{x:p,y:x}}}function Lke(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Bke(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function $ke(e){var{option:t,tickProps:r,value:n}=e,s,a=Ys(r.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))s=S.cloneElement(t,pi(pi({},r),{},{className:a}));else if(typeof t=="function")s=t(pi(pi({},r),{},{className:a}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=Ys(i,t?.className)),s=S.createElement(oC,Gm({},r,{className:i}),n)}return s}function zke(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:a,unit:i,padding:o,tickTextProps:c,orientation:u,mirror:d,x:f,y:m,width:p,height:x,tickSize:w,tickMargin:v,fontSize:C,letterSpacing:k,getTicksConfig:b,events:j}=e,A=dC(pi(pi({},b),{},{ticks:t}),C,k),F=Lke(u,d),D=Bke(u,d),M=ng(b),O=go(r,!1),L=pi(pi({},M),{},{fill:"none"},go(n,!1)),W=A.map((re,ie)=>{var{line:xe,tick:de}=Rke(re,f,m,p,x,u,w,d,v),fe=pi(pi(pi(pi({textAnchor:F,verticalAnchor:D},M),{},{stroke:"none",fill:s},O),de),{},{index:ie,payload:re,visibleTicksCount:A.length,tickFormatter:a,padding:o},c);return S.createElement(r1,Gm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},ixe(j,re,ie)),n&&S.createElement("line",Gm({},L,xe,{className:Ys("recharts-cartesian-axis-tick-line",C4(n,"className"))})),r&&S.createElement($ke,{option:r,tickProps:fe,value:"".concat(typeof a=="function"?a(re.value,ie):re.value).concat(i||"")}))});return W.length>0?S.createElement("g",{className:"recharts-cartesian-axis-ticks"},W):null}var Uke=S.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:i,ticks:o}=e,c=yk(e,Ake),[u,d]=S.useState(""),[f,m]=S.useState(""),p=S.useRef([]);S.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var w;return Eke({ticks:p.current,label:(w=e.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=S.useCallback(w=>{if(w){var v=w.getElementsByClassName("recharts-cartesian-axis-tick-value");p.current=Array.from(v);var C=v[0];if(C){var k=window.getComputedStyle(C),b=k.fontSize,j=k.letterSpacing;(b!==u||j!==f)&&(d(b),m(j))}}},[u,f]);return i||n!=null&&n<=0||s!=null&&s<=0?null:S.createElement(r1,{className:Ys("recharts-cartesian-axis",a),ref:x},S.createElement(Ike,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:ng(e)}),S.createElement(zke,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:u,letterSpacing:f,getTicksConfig:e,events:c}),S.createElement(KSe,{x:e.x,y:e.y,width:e.width,height:e.height},S.createElement(s6e,{label:e.label}),e.children))}),Wke=S.memo(Uke,(e,t)=>{var{viewBox:r}=e,n=yk(e,jke),{viewBox:s}=t,a=yk(t,Pke);return Op(r,s)&&Op(n,a)}),hC=S.forwardRef((e,t)=>{var r=nu(e,fC);return S.createElement(Wke,Gm({},r,{ref:t}))});hC.displayName="CartesianAxis";var Hke=["x1","y1","x2","y2","key"],Gke=["offset"],Vke=["xAxisId","yAxisId"],qke=["xAxisId","yAxisId"];function SD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SD(Object(r),!0).forEach(function(n){Kke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kke(e,t,r){return(t=Xke(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xke(e){var t=Yke(e,"string");return typeof t=="symbol"?t:t+""}function Yke(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function om(){return om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},om.apply(null,arguments)}function Bb(e,t){if(e==null)return{};var r,n,s=Jke(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Jke(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Qke=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:a,height:i,ry:o}=e;return S.createElement("rect",{x:n,y:s,ry:o,width:a,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function _V(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:a,y2:i,key:o}=t,c=Bb(t,Hke),u=ng(c),{offset:d}=u,f=Bb(u,Gke);r=S.createElement("line",om({},f,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:o}))}return r}function Zke(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=Bb(e,Vke),c=s.map((u,d)=>{var f=Oo(Oo({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return _V(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function e8e(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=Bb(e,qke),c=s.map((u,d)=>{var f=Oo(Oo({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return _V(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function t8e(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:a,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+s-s)).sort((f,m)=>f-m);s!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var p=!u[m+1],x=p?s+i-f:u[m+1]-f;if(x<=0)return null;var w=m%t.length;return S.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:x,width:a,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function r8e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:a,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+s-s)).sort((f,m)=>f-m);s!==u[0]&&u.unshift(0);var d=u.map((f,m)=>{var p=!u[m+1],x=p?s+i-f:u[m+1]-f;if(x<=0)return null;var w=m%r.length;return S.createElement("rect",{key:"react-".concat(m),x:f,y:a,width:x,height:o,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var n8e=(e,t)=>{var{xAxis:r,width:n,height:s,offset:a}=e;return CW(dC(Oo(Oo(Oo({},fC),r),{},{ticks:NW(r),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},s8e=(e,t)=>{var{yAxis:r,width:n,height:s,offset:a}=e;return CW(dC(Oo(Oo(Oo({},fC),r),{},{ticks:NW(r),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},a8e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function SV(e){var t=MW(),r=FW(),n=PW(),s=Oo(Oo({},nu(e,a8e)),{},{x:fn(e.x)?e.x:n.left,y:fn(e.y)?e.y:n.top,width:fn(e.width)?e.width:n.width,height:fn(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:m,verticalValues:p}=s,x=ru(),w=Qr(O=>DO(O,"xAxis",a,x)),v=Qr(O=>DO(O,"yAxis",i,x));if(!fn(u)||u<=0||!fn(d)||d<=0||!fn(o)||o!==+o||!fn(c)||c!==+c)return null;var C=s.verticalCoordinatesGenerator||n8e,k=s.horizontalCoordinatesGenerator||s8e,{horizontalPoints:b,verticalPoints:j}=s;if((!b||!b.length)&&typeof k=="function"){var A=m&&m.length,F=k({yAxis:v?Oo(Oo({},v),{},{ticks:A?m:v.ticks}):void 0,width:t,height:r,offset:n},A?!0:f);uy(Array.isArray(F),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof F,"]")),Array.isArray(F)&&(b=F)}if((!j||!j.length)&&typeof C=="function"){var D=p&&p.length,M=C({xAxis:w?Oo(Oo({},w),{},{ticks:D?p:w.ticks}):void 0,width:t,height:r,offset:n},D?!0:f);uy(Array.isArray(M),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(j=M)}return S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(Qke,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),S.createElement(t8e,om({},s,{horizontalPoints:b})),S.createElement(r8e,om({},s,{verticalPoints:j})),S.createElement(Zke,om({},s,{offset:n,horizontalPoints:b,xAxis:w,yAxis:v})),S.createElement(e8e,om({},s,{offset:n,verticalPoints:j,xAxis:w,yAxis:v})))}SV.displayName="CartesianGrid";var kV=(e,t,r,n)=>jG(e,"xAxis",t,n),TV=(e,t,r,n)=>AG(e,"xAxis",t,n),CV=(e,t,r,n)=>jG(e,"yAxis",r,n),NV=(e,t,r,n)=>AG(e,"yAxis",r,n),i8e=Gt([Qs,kV,CV,TV,NV],(e,t,r,n,s)=>vh(e,"xAxis")?X6(t,n,!1):X6(r,s,!1)),o8e=(e,t,r,n,s)=>s;function l8e(e){return e.type==="line"}var c8e=Gt([QH,o8e],(e,t)=>e.filter(l8e).find(r=>r.id===t)),u8e=Gt([Qs,kV,CV,TV,NV,c8e,i8e,OT],(e,t,r,n,s,a,i,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||i==null)){var{dataKey:f,data:m}=a,p;if(m!=null&&m.length>0?p=m:p=c?.slice(u,d+1),p!=null)return M8e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:i,displayedData:p})}}),d8e=["id"],f8e=["type","layout","connectNulls","needClip"],h8e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function kD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kD(Object(r),!0).forEach(function(n){m8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m8e(e,t,r){return(t=g8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g8e(e){var t=p8e(e,"string");return typeof t=="symbol"?t:t+""}function p8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mC(e,t){if(e==null)return{};var r,n,s=x8e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function x8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vm(){return Vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vm.apply(null,arguments)}var y8e=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:EW(r,t),payload:e}]};function v8e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:a,name:i,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:a,dataKey:t,nameKey:void 0,name:EW(i,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var EV=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function w8e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var b8e=(e,t,r)=>{var n=r.reduce((f,m)=>f+m);if(!n)return EV(t,e);for(var s=Math.floor(e/n),a=e%n,i=t-e,o=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>a){o=[...r.slice(0,c),a-u];break}var d=o.length%2===0?[0,i]:[i];return[...w8e(r,s),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function _8e(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Ys("recharts-line-dot",typeof e!="boolean"?e.className:"");r=S.createElement(hV,Vm({},t,{className:n}))}return r}function S8e(e,t){return e==null?!1:t?!0:e.length===1}function k8e(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:a,needClip:i}=n;if(!S8e(r,s))return null;var{id:o}=n,c=mC(n,d8e),u=NU(s),d=ng(c),f=go(s,!0),m=r.map((x,w)=>{var v=Gl(Gl(Gl({key:"dot-".concat(w),r:3},d),f),{},{index:w,cx:x.x,cy:x.y,dataKey:a,value:x.value,payload:x.payload,points:r});return _8e(s,v)}),p={clipPath:i?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return S.createElement(r1,Vm({className:"recharts-line-dots",key:"dots"},p),m)}function T8e(e){var{showLabels:t,children:r,points:n}=e,s=S.useMemo(()=>n?.map(a=>{var i={x:a.x,y:a.y,width:0,height:0};return Gl(Gl({},i),{},{value:a.value,payload:a.payload,viewBox:i,parentViewBox:void 0,fill:void 0})}),[n]);return S.createElement(g6e,{value:t?s:null},r)}function TD(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:a}=e,{type:i,layout:o,connectNulls:c,needClip:u}=a,d=mC(a,f8e),f=Gl(Gl({},go(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:i,layout:o,connectNulls:c,strokeDasharray:s??a.strokeDasharray});return S.createElement(S.Fragment,null,n?.length>1&&S.createElement(IW,Vm({},f,{pathRef:r})),S.createElement(k8e,{points:n,clipPathId:t,props:a}))}function C8e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function N8e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:a}=e,{points:i,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:m,width:p,height:x,onAnimationEnd:w,onAnimationStart:v}=r,C=s.current,k=zW(r,"recharts-line-"),[b,j]=S.useState(!1),A=!b,F=S.useCallback(()=>{typeof w=="function"&&w(),j(!1)},[w]),D=S.useCallback(()=>{typeof v=="function"&&v(),j(!0)},[v]),M=C8e(n.current),O=a.current;return S.createElement(T8e,{points:i,showLabels:A},r.children,S.createElement($W,{animationId:k,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:F,onAnimationStart:D,key:k},L=>{var W=c0(O,M+O,L),re=Math.min(W,M),ie;if(c)if(o){var xe="".concat(o).split(/[,\s]+/gim).map(H=>parseFloat(H));ie=b8e(re,M,xe)}else ie=EV(M,re);else ie=o==null?void 0:String(o);if(C){var de=C.length/i.length,fe=L===1?i:i.map((H,Q)=>{var U=Math.floor(Q*de);if(C[U]){var V=C[U];return Gl(Gl({},H),{},{x:c0(V.x,H.x,L),y:c0(V.y,H.y,L)})}return m?Gl(Gl({},H),{},{x:c0(p*2,H.x,L),y:c0(x/2,H.y,L)}):Gl(Gl({},H),{},{x:H.x,y:H.y})});return s.current=fe,S.createElement(TD,{props:r,points:fe,clipPathId:t,pathRef:n,strokeDasharray:ie})}return L>0&&M>0&&(s.current=i,a.current=re),S.createElement(TD,{props:r,points:i,clipPathId:t,pathRef:n,strokeDasharray:ie})}),S.createElement(y6e,{label:r.label}))}function E8e(e){var{clipPathId:t,props:r}=e,n=S.useRef(null),s=S.useRef(0),a=S.useRef(null);return S.createElement(N8e,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:a})}var A8e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:al(e.payload,t)});class j8e extends S.Component{render(){var t,{hide:r,dot:n,points:s,className:a,xAxisId:i,yAxisId:o,top:c,left:u,width:d,height:f,id:m,needClip:p}=this.props;if(r)return null;var x=Ys("recharts-line",a),w=m,{r:v=3,strokeWidth:C=2}=(t=go(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},k=NU(n),b=v*2+C;return S.createElement(S.Fragment,null,S.createElement(r1,{className:x},p&&S.createElement("defs",null,S.createElement(oke,{clipPathId:w,xAxisId:i,yAxisId:o}),!k&&S.createElement("clipPath",{id:"clipPath-dots-".concat(w)},S.createElement("rect",{x:u-b/2,y:c-b/2,width:d+b,height:f+b}))),S.createElement(ike,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:A8e,errorBarOffset:0},S.createElement(E8e,{props:this.props,clipPathId:w}))),S.createElement(Q6e,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var AV={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!n1.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function P8e(e){var t=nu(e,AV),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:m,xAxisId:p,yAxisId:x,id:w}=t,v=mC(t,h8e),{needClip:C}=yV(p,x),k=cC(),b=uT(),j=ru(),A=Qr(L=>u8e(L,p,x,j,w));if(b!=="horizontal"&&b!=="vertical"||A==null||k==null)return null;var{height:F,width:D,x:M,y:O}=k;return S.createElement(j8e,Vm({},v,{id:w,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,isAnimationActive:d,hide:u,label:f,legendType:m,xAxisId:p,yAxisId:x,points:A,layout:b,height:F,width:D,left:M,top:O,needClip:C}))}function M8e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataKey:i,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=al(u,i);if(t==="horizontal"){var m=wF({axis:r,ticks:s,bandSize:o,entry:u,index:d}),p=Hi(f)?null:n.scale(f);return{x:m,y:p,value:f,payload:u}}var x=Hi(f)?null:r.scale(f),w=wF({axis:n,ticks:a,bandSize:o,entry:u,index:d});return x==null||w==null?null:{x,y:w,value:f,payload:u}}).filter(Boolean)}function F8e(e){var t=nu(e,AV),r=ru();return S.createElement(E6e,{id:t.id,type:"line"},n=>S.createElement(S.Fragment,null,S.createElement(S6e,{legendPayload:y8e(t)}),S.createElement(b6e,{fn:v8e,args:t}),S.createElement(O6e,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),S.createElement(P8e,Vm({},t,{id:n}))))}var jV=S.memo(F8e);jV.displayName="Line";var O8e=["dangerouslySetInnerHTML","ticks"],D8e=["id"],I8e=["domain"],R8e=["domain"];function vk(){return vk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vk.apply(null,arguments)}function $b(e,t){if(e==null)return{};var r,n,s=L8e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function L8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function B8e(e){var t=ol();return S.useEffect(()=>(t(B6e(e)),()=>{t($6e(e))}),[e,t]),null}var $8e=e=>{var{xAxisId:t,className:r}=e,n=Qr(jW),s=ru(),a="xAxis",i=Qr(v=>c1(v,a,t,s)),o=Qr(v=>EG(v,a,t,s)),c=Qr(v=>c3e(v,t)),u=Qr(v=>g3e(v,t)),d=Qr(v=>KH(v,t));if(c==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:m}=e,p=$b(e,O8e),{id:x}=d,w=$b(d,D8e);return S.createElement(hC,vk({},p,w,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:Ys("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o}))},z8e={allowDataOverflow:Bl.allowDataOverflow,allowDecimals:Bl.allowDecimals,allowDuplicatedCategory:Bl.allowDuplicatedCategory,height:Bl.height,hide:!1,mirror:Bl.mirror,orientation:Bl.orientation,padding:Bl.padding,reversed:Bl.reversed,scale:Bl.scale,tickCount:Bl.tickCount,type:Bl.type,xAxisId:0},U8e=e=>{var t,r,n,s,a,i=nu(e,z8e);return S.createElement(S.Fragment,null,S.createElement(B8e,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.xAxisId,scale:i.scale,type:i.type,padding:i.padding,allowDataOverflow:i.allowDataOverflow,domain:i.domain,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,height:i.height,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),S.createElement($8e,i))},W8e=(e,t)=>{var{domain:r}=e,n=$b(e,I8e),{domain:s}=t,a=$b(t,R8e);return Op(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Op({domain:r},{domain:s}):!1},PV=S.memo(U8e,W8e);PV.displayName="XAxis";var H8e=["dangerouslySetInnerHTML","ticks"],G8e=["id"],V8e=["domain"],q8e=["domain"];function wk(){return wk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wk.apply(null,arguments)}function zb(e,t){if(e==null)return{};var r,n,s=K8e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function K8e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function X8e(e){var t=ol();return S.useEffect(()=>(t(z6e(e)),()=>{t(U6e(e))}),[e,t]),null}var Y8e=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=S.useRef(null),i=S.useRef(null),o=Qr(jW),c=ru(),u=ol(),d="yAxis",f=Qr(A=>c1(A,d,t,c)),m=Qr(A=>y3e(A,t)),p=Qr(A=>x3e(A,t)),x=Qr(A=>EG(A,d,t,c)),w=Qr(A=>XH(A,t));if(S.useLayoutEffect(()=>{if(!(n!=="auto"||!m||lC(s)||S.isValidElement(s)||w==null)){var A=a.current;if(A){var F=A.getCalculatedWidth();Math.round(m.width)!==Math.round(F)&&u(W6e({id:t,width:F}))}}},[x,m,u,s,t,n,w]),m==null||p==null||w==null)return null;var{dangerouslySetInnerHTML:v,ticks:C}=e,k=zb(e,H8e),{id:b}=w,j=zb(w,G8e);return S.createElement(hC,wk({},k,j,{ref:a,labelRef:i,scale:f,x:p.x,y:p.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:m.width,height:m.height,className:Ys("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:x}))},J8e={allowDataOverflow:$l.allowDataOverflow,allowDecimals:$l.allowDecimals,allowDuplicatedCategory:$l.allowDuplicatedCategory,hide:!1,mirror:$l.mirror,orientation:$l.orientation,padding:$l.padding,reversed:$l.reversed,scale:$l.scale,tickCount:$l.tickCount,type:$l.type,width:$l.width,yAxisId:0},Q8e=e=>{var t,r,n,s,a,i=nu(e,J8e);return S.createElement(S.Fragment,null,S.createElement(X8e,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),S.createElement(Y8e,i))},Z8e=(e,t)=>{var{domain:r}=e,n=zb(e,V8e),{domain:s}=t,a=zb(t,q8e);return Op(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Op({domain:r},{domain:s}):!1},MV=S.memo(Q8e,Z8e);MV.displayName="YAxis";var gS={exports:{}},pS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CD;function e7e(){if(CD)return pS;CD=1;var e=lh();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return pS.useSyncExternalStoreWithSelector=function(c,u,d,f,m){var p=s(null);if(p.current===null){var x={hasValue:!1,value:null};p.current=x}else x=p.current;p=i(function(){function v(A){if(!C){if(C=!0,k=A,A=f(A),m!==void 0&&x.hasValue){var F=x.value;if(m(F,A))return b=F}return b=A}if(F=b,r(k,A))return F;var D=f(A);return m!==void 0&&m(F,D)?(k=A,F):(k=A,b=D)}var C=!1,k,b,j=d===void 0?null:d;return[function(){return v(u())},j===null?void 0:function(){return v(j())}]},[u,d,f,m]);var w=n(c,p[0],p[1]);return a(function(){x.hasValue=!0,x.value=w},[w]),o(w),w},pS}var ND;function t7e(){return ND||(ND=1,gS.exports=e7e()),gS.exports}t7e();function r7e(e){e()}function n7e(){let e=null,t=null;return{clear(){e=null,t=null},notify(){r7e(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var ED={notify(){},get:()=>[]};function s7e(e,t){let r,n=ED,s=0,a=!1;function i(w){d();const v=n.subscribe(w);let C=!1;return()=>{C||(C=!0,v(),f())}}function o(){n.notify()}function c(){x.onStateChange&&x.onStateChange()}function u(){return a}function d(){s++,r||(r=e.subscribe(c),n=n7e())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=ED)}function m(){a||(a=!0,d())}function p(){a&&(a=!1,f())}const x={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>n};return x}var a7e=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i7e=a7e(),o7e=()=>typeof navigator<"u"&&navigator.product==="ReactNative",l7e=o7e(),c7e=()=>i7e||l7e?S.useLayoutEffect:S.useEffect,u7e=c7e(),d7e=Symbol.for("react-redux-context"),f7e=typeof globalThis<"u"?globalThis:{};function h7e(){if(!S.createContext)return{};const e=f7e[d7e]??=new Map;let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var m7e=h7e();function g7e(e){const{children:t,context:r,serverState:n,store:s}=e,a=S.useMemo(()=>{const c=s7e(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),i=S.useMemo(()=>s.getState(),[s]);u7e(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,i]);const o=r||m7e;return S.createElement(o.Provider,{value:a},t)}var p7e=g7e,x7e=(e,t)=>t,gC=Gt([x7e,Qs,HH,ki,HG,z0,S5e,po],E5e),pC=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},FV=Qc("mouseClick"),OV=Mv();OV.startListening({actionCreator:FV,effect:(e,t)=>{var r=e.payload,n=gC(t.getState(),pC(r));n?.activeIndex!=null&&t.dispatch(j3e({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var bk=Qc("mouseMove"),DV=Mv();DV.startListening({actionCreator:bk,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=QT(n,n.tooltip.settings.shared),a=gC(n,pC(r));s==="axis"&&(a?.activeIndex!=null?t.dispatch(RG({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(IG()))}});var AD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},IV=ec({name:"rootProps",initialState:AD,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:AD.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),y7e=IV.reducer,{updateOptions:v7e}=IV.actions,RV=ec({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:UTe}=RV.actions,w7e=RV.reducer,LV=Qc("keyDown"),BV=Qc("focus"),xC=Mv();xC.startListening({actionCreator:LV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var i=Number(ZT(s,d1(r))),o=z0(r);if(a==="Enter"){var c=Ib(r,"axis","hover",String(s.index));t.dispatch(hk({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=_3e(r),d=u==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,m=i+f*d;if(!(o==null||m>=o.length||m<0)){var p=Ib(r,"axis","hover",String(m));t.dispatch(hk({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});xC.startListening({actionCreator:BV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",i=Ib(r,"axis","hover",String(a));t.dispatch(hk({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:i}))}}}});var Rc=Qc("externalEvent"),$V=Mv();$V.startListening({actionCreator:Rc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:h5e(r),activeDataKey:d5e(r),activeIndex:ev(r),activeLabel:qG(r),activeTooltipIndex:ev(r),isTooltipActive:m5e(r)};e.payload.handler(n,e.payload.reactEvent)}}});var b7e=Gt([u1],e=>e.tooltipItemPayloads),_7e=Gt([b7e,Uv,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(o=>o.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var i=t(a,r);return i}}}),zV=Qc("touchMove"),UV=Mv();UV.startListening({actionCreator:zV,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=QT(n,n.tooltip.settings.shared);if(s==="axis"){var a=gC(n,pC({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&t.dispatch(RG({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(t2e),d=(i=c.getAttribute(r2e))!==null&&i!==void 0?i:void 0,f=_7e(t.getState(),u,d);t.dispatch(A3e({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var S7e=rW({brush:cke,cartesianAxis:H6e,chartData:G5e,errorBars:eke,graphicalItems:F6e,layout:Nve,legend:x2e,options:$5e,polarAxis:w6e,polarOptions:w7e,referenceElements:pke,rootProps:y7e,tooltip:P3e}),k7e=function(t){return Qye({reducer:S7e,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([OV.middleware,DV.middleware,xC.middleware,$V.middleware,UV.middleware]),devTools:n1.devToolsEnabled})};function T7e(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=ru(),a=S.useRef(null);if(s)return r;a.current==null&&(a.current=k7e(t));var i=nT;return S.createElement(p7e,{context:i,store:a.current},r)}function C7e(e){var{layout:t,width:r,height:n,margin:s}=e,a=ol(),i=ru();return S.useEffect(()=>{i||(a(kve(t)),a(Tve({width:r,height:n})),a(Sve(s)))},[a,i,t,r,n,s]),null}function N7e(e){var t=ol();return S.useEffect(()=>{t(v7e(e))},[t,e]),null}var E7e=["children"];function A7e(e,t){if(e==null)return{};var r,n,s=j7e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function j7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ub(){return Ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ub.apply(null,arguments)}var P7e={width:"100%",height:"100%"},M7e=S.forwardRef((e,t)=>{var r=MW(),n=FW(),s=DW();if(!wb(r)||!wb(n))return null;var{children:a,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=s?0:void 0,typeof i.role=="string"?d=i.role:d=s?"application":void 0,S.createElement(EU,Ub({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:P7e,ref:t}),a)}),F7e=e=>{var{children:t}=e,r=Qr(L4);if(!r)return null;var{width:n,height:s,y:a,x:i}=r;return S.createElement(EU,{width:n,height:s,x:i,y:a},t)},jD=S.forwardRef((e,t)=>{var{children:r}=e,n=A7e(e,E7e),s=ru();return s?S.createElement(F7e,null,r):S.createElement(M7e,Ub({ref:t},n),r)});function O7e(){var e=ol(),[t,r]=S.useState(null),n=Qr(e2e);return S.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;Ru(a)&&a!==n&&e(Cve(a))}},[t,e,n]),r}function PD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D7e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PD(Object(r),!0).forEach(function(n){I7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I7e(e,t,r){return(t=R7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R7e(e){var t=L7e(e,"string");return typeof t=="symbol"?t:t+""}function L7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var B7e=S.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:m,onTouchEnd:p,onTouchMove:x,onTouchStart:w,style:v,width:C}=e,k=ol(),[b,j]=S.useState(null),[A,F]=S.useState(null);eSe();var D=O7e(),M=S.useCallback(z=>{D(z),typeof t=="function"&&t(z),j(z),F(z)},[D,t,j,F]),O=S.useCallback(z=>{k(FV(z)),k(Rc({handler:a,reactEvent:z}))},[k,a]),L=S.useCallback(z=>{k(bk(z)),k(Rc({handler:u,reactEvent:z}))},[k,u]),W=S.useCallback(z=>{k(IG()),k(Rc({handler:d,reactEvent:z}))},[k,d]),re=S.useCallback(z=>{k(bk(z)),k(Rc({handler:f,reactEvent:z}))},[k,f]),ie=S.useCallback(()=>{k(BV())},[k]),xe=S.useCallback(z=>{k(LV(z.key))},[k]),de=S.useCallback(z=>{k(Rc({handler:i,reactEvent:z}))},[k,i]),fe=S.useCallback(z=>{k(Rc({handler:o,reactEvent:z}))},[k,o]),H=S.useCallback(z=>{k(Rc({handler:c,reactEvent:z}))},[k,c]),Q=S.useCallback(z=>{k(Rc({handler:m,reactEvent:z}))},[k,m]),U=S.useCallback(z=>{k(Rc({handler:w,reactEvent:z}))},[k,w]),V=S.useCallback(z=>{k(zV(z)),k(Rc({handler:x,reactEvent:z}))},[k,x]),X=S.useCallback(z=>{k(Rc({handler:p,reactEvent:z}))},[k,p]);return S.createElement(ZG.Provider,{value:b},S.createElement(gxe.Provider,{value:A},S.createElement("div",{className:Ys("recharts-wrapper",n),style:D7e({position:"relative",cursor:"default",width:C,height:s},v),onClick:O,onContextMenu:de,onDoubleClick:fe,onFocus:ie,onKeyDown:xe,onMouseDown:H,onMouseEnter:L,onMouseLeave:W,onMouseMove:re,onMouseUp:Q,onTouchEnd:X,onTouchMove:V,onTouchStart:U,ref:M},r)))}),$7e=["children","className","width","height","style","compact","title","desc"];function z7e(e,t){if(e==null)return{};var r,n,s=U7e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function U7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var W7e=S.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:a,style:i,compact:o,title:c,desc:u}=e,d=z7e(e,$7e),f=ng(d);return o?S.createElement(jD,{otherAttributes:f,title:c,desc:u},r):S.createElement(B7e,{className:n,style:i,width:s,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement(jD,{otherAttributes:f,title:c,desc:u,ref:t},S.createElement(yke,null,r)))}),H7e=["width","height"];function _k(){return _k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_k.apply(null,arguments)}function G7e(e,t){if(e==null)return{};var r,n,s=V7e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function V7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var q7e={top:5,right:5,bottom:5,left:5},K7e={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:q7e,reverseStackOrder:!1,syncMethod:"index"},X7e=S.forwardRef(function(t,r){var n,s=nu(t.categoricalChartProps,K7e),{width:a,height:i}=s,o=G7e(s,H7e);if(!wb(a)||!wb(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:m}=t,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return S.createElement(T7e,{preloadedState:{options:p},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:c},S.createElement(lke,{chartData:m.data}),S.createElement(C7e,{width:a,height:i,layout:s.layout,margin:s.margin}),S.createElement(N7e,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),S.createElement(W7e,_k({},o,{width:a,height:i,ref:r})))}),Y7e=["axis"],J7e=S.forwardRef((e,t)=>S.createElement(X7e,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Y7e,tooltipPayloadSearcher:L5e,categoricalChartProps:e,ref:t}));const Q7e=({data:e=[],loading:t=!1,error:r=null})=>{if(t)return l.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:l.jsx("div",{className:"spinner-border text-primary",role:"status",children:l.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r)return l.jsxs("div",{className:"alert alert-danger",role:"alert",children:[l.jsx("h5",{className:"alert-heading",children:"Error Loading Performance Data"}),l.jsx("p",{children:r})]});if(!e||e.length===0)return l.jsx("div",{className:"text-center text-muted",style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{children:[l.jsx("h5",{children:"No Test Data Available"}),l.jsx("p",{children:"No tests have been completed yet for the current term."})]})});const n=e.map(s=>({testName:s.test_name,testDate:s.submitted_at,averageScore:parseFloat(s.average_score),totalStudents:s.total_students,testId:s.test_id}));return l.jsxs("div",{className:"test-performance-graph",children:[l.jsx("div",{style:{width:"100%",height:"400px"},children:l.jsx(ySe,{children:l.jsxs(J7e,{data:n,margin:{top:20,right:30,left:20,bottom:20},children:[l.jsx(SV,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),l.jsx(PV,{dataKey:"testDate",tickFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:"#666",fontSize:12}),l.jsx(MV,{domain:[0,100],tickFormatter:s=>`${s}%`,stroke:"#666",fontSize:12}),l.jsx(lSe,{formatter:(s,a)=>[`${parseFloat(s).toFixed(1)}%`,"Average Score"],labelFormatter:s=>{const a=n.find(i=>i.testDate===s);if(a){const i=new Date(s);return`${a.testName} (${i.toLocaleDateString("en-US",{month:"long",day:"numeric"})})`}return s},contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),l.jsx(jV,{type:"monotone",dataKey:"averageScore",stroke:"#007bff",strokeWidth:3,connectNulls:!0,dot:{r:6,fill:"#007bff",stroke:"#fff",strokeWidth:2},activeDot:{r:8,fill:"#ff6b35",stroke:"#fff",strokeWidth:2}})]})})}),l.jsx("div",{className:"mt-3",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Total Tests: "}),l.jsx("strong",{children:n.length})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Average Score: "}),l.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(i=>i.averageScore!==null&&i.averageScore!==void 0&&!isNaN(i.averageScore));return s.length===0?"N/A":`${(s.reduce((i,o)=>i+o.averageScore,0)/s.length).toFixed(1)}%`})():"N/A"})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Best Test: "}),l.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(a=>a.averageScore!==null&&a.averageScore!==void 0&&!isNaN(a.averageScore));return s.length===0?"N/A":s.reduce((a,i)=>i.averageScore>a.averageScore?i:a).testName})():"N/A"})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Latest Test: "}),l.jsx("strong",{children:n.length>0?n[n.length-1].testName:"N/A"})]})})]})})]})},MD=({onBackToLogin:e})=>{const t=Nl(),{user:r,isAuthenticated:n,logout:s,getCurrentTeacherUsername:a}=Js(),{teacherData:i,loadTeacherData:o}=g4(),{activeTests:c,loadActiveTests:u}=bv(),{showNotification:d,notifications:f}=_i(),[m,p]=S.useState(!0),[x,w]=S.useState(""),[v,C]=S.useState("main"),[k,b]=S.useState([]),[j,A]=S.useState([]),[F,D]=S.useState(null),[M,O]=S.useState(null),[L,W]=S.useState(null),[re,ie]=S.useState(!1),[xe,de]=S.useState(!1),[fe,H]=S.useState(null),[Q,U]=S.useState([]),[V,X]=S.useState(null),[z,K]=S.useState(!1),[te,se]=S.useState(!1),[pe,oe]=S.useState(null),[ye,we]=S.useState(!1),[Se,Ie]=S.useState(null),[me,_e]=S.useState(null),[We,Ue]=S.useState([]),[St,Ze]=S.useState(!1),[Kt,yt]=S.useState(null),[Rt,At]=S.useState([]),[wt,Ft]=S.useState(!1),[or,dr]=S.useState(null),[nr,Xe]=S.useState(null),[Qe,ut]=S.useState(!1),[mt,ht]=S.useState(!1),[Ot,nt]=S.useState(0),[sr,kr]=S.useState(!1),[Er,Gr]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Ar,vr]=S.useState([]),[Ee,Be]=S.useState([]),[qe,Ye]=S.useState(!1),[Lt,ze]=S.useState(!1),[it,Le]=S.useState(null),[st,rt]=S.useState([]),[qt,Xt]=S.useState(!1),[Yt,Z]=S.useState("subject");S.useEffect(()=>{De()},[]),S.useEffect(()=>{const Je=Pt=>{Qe&&!Pt.target.closest(".relative")&&ut(!1),mt&&!Pt.target.closest(".relative")&&ht(!1)};return document.addEventListener("mousedown",Je),()=>{document.removeEventListener("mousedown",Je)}},[Qe,mt]);const ae=S.useCallback(()=>{Ae.debug(" showChangePasswordTab called"),kr(!0),ut(!1),ht(!1)},[]),jt=S.useCallback(()=>{Ae.debug(" hideChangePasswordTab called"),kr(!1),Gr({currentPassword:"",newPassword:"",confirmPassword:""})},[]),G=S.useCallback(async()=>{if(!r)return;const{currentPassword:Je,newPassword:Pt,confirmPassword:tr}=Er;if(!Je||!Pt||!tr){d("Please fill in all fields","error");return}if(Pt!==tr){d("New passwords do not match","error");return}if(Pt.length<6){d("New password must be at least 6 characters long","error");return}const Jt=/[a-zA-Z]/.test(Pt),Bn=/[0-9]/.test(Pt);if(!Jt||!Bn){d("New password must contain both letters and numbers","error");return}try{const vt=await na.changePassword({username:r.username,currentPassword:Je,newPassword:Pt});vt.success?(d("Password changed successfully!","success"),jt()):d(vt.message||"Failed to change password","error")}catch(vt){Ae.error("Password change error:",vt),d("Failed to change password. Please try again.","error")}},[r,Er,d]),ue=S.useCallback(Je=>{const{name:Pt,value:tr}=Je.target;Gr(Jt=>({...Jt,[Pt]:tr}))},[]),Ce=S.useCallback(async()=>{Ae.debug(" Loading teacher data...");try{const Je=await na.getTeacherData();return Ae.debug(" Teacher data loaded:",Je),_e(new Date),Je}catch(Je){throw Ae.error(" Error loading teacher data:",Je),Je}},[]),be=S.useCallback(async(Je=null)=>{Ae.debug(" Loading teacher subjects...");try{if(!Je){const Jt=`teacher_subjects_${r?.teacher_id||r?.id||""}`,Bn=ja(Jt);if(Bn)return Ae.debug(" Using cached teacher subjects"),b(Bn),Bn}let Pt=Je,tr;if(Je?(Ae.debug(" Using passed teacher data for subjects"),tr=na.getTeacherSubjects(Je.subjects)):(Ae.debug(" No teacher data passed, fetching from API"),Pt=await na.getTeacherData(),Ae.debug(" Raw teacher data:",Pt),tr=na.getTeacherSubjects(Pt.subjects)),Ae.debug(" Teacher subjects loaded:",tr),b(tr),!Je){const Jt=`teacher_subjects_${r?.teacher_id||r?.id||""}`;ha(Jt,tr,Aa.teacher_subjects)}return Ae.debug(" Available classes for performance chart:",tr[0]?.classes||[]),Ae.debug(" Performance chart will load when user clicks on a class"),tr}catch(Pt){throw Ae.error(" Error loading teacher subjects:",Pt),Pt}},[r?.teacher_id,r?.id]),Me=S.useCallback(async()=>{Ae.debug(" Loading teacher active tests...");try{const Je=`teacher_tests_${r?.teacher_id||r?.id||""}`,Pt=ja(Je);Pt&&Pt.some(Bn=>Bn.test_type==="drawing")&&(Ae.debug(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(Je));const tr=ja(Je);if(tr)return Ae.debug(" Using cached teacher tests"),A(tr),tr;const Jt=await Kn.getTeacherTests();return Ae.debug(" Teacher tests loaded:",Jt),A(Jt),ha(Je,Jt,Aa.teacher_tests),Jt}catch(Je){throw Ae.error(" Error loading teacher tests:",Je),Je}},[r?.teacher_id,r?.id]),De=S.useCallback(async()=>{Ae.debug(" Initializing Teacher Cabinet...");try{if(p(!0),w(""),!n||!r){Ae.debug(" User not authenticated"),w("User not authenticated");return}if(r.role!==el.TEACHER){Ae.error(" Invalid user role for teacher cabinet:",r.role),w("Access denied. Teacher role required.");return}Ae.debug(" Loading teacher data...");const Je=await Ce();Ae.debug(" Loading subjects and tests in parallel...");const[Pt,tr]=await Promise.allSettled([be(Je),Me()]);let Jt=!1;Pt.status==="rejected"&&(Ae.warn(" Subjects loading failed:",Pt.reason),Jt=!0),tr.status==="rejected"&&(Ae.warn(" Tests loading failed:",tr.reason),Jt=!0),Jt&&d("Some data failed to load, but you can continue","warning"),Ae.debug(" Teacher Cabinet initialization complete!")}catch(Je){Ae.error(" Error initializing teacher cabinet:",Je),w("Failed to initialize teacher cabinet")}finally{p(!1)}},[n,r,Ce,be,Me,d]),Ve=S.useCallback(()=>{Ae.debug(" Showing subject selection prompt..."),ie(!0),bt(),Z("subject")},[]),bt=S.useCallback(async()=>{Ae.debug(" Loading available subjects..."),Ye(!0);try{const Je=await na.getSubjectsForSelection();vr(Je),Ae.debug(" Available subjects loaded:",Je)}catch(Je){Ae.error(" Error loading available subjects:",Je),d("Failed to load subjects","error")}finally{Ye(!1)}},[]),ot=S.useCallback(Je=>{if(!Je){Le(null);return}const Pt=Ar.find(tr=>tr.subject_id==Je);Pt&&(Le(Pt),rt([]),Z("classes"))},[Ar]),dt=S.useCallback((Je,Pt)=>{rt(tr=>tr.some(Jt=>Jt.grade===Je&&Jt.class===Pt)?tr.filter(Jt=>!(Jt.grade===Je&&Jt.class===Pt)):[...tr,{grade:Je,class:Pt}])},[]),ee=S.useCallback(()=>{if(!it||st.length===0){d("Please select at least one class","warning");return}const Je={subject_id:parseInt(it.subject_id),subject_name:it.subject,classes:st};Be(Pt=>[...Pt,Je]),Le(null),rt([]),Z("subject"),d(`Added ${it.subject} with ${st.length} classes`,"success")},[it,st]),je=S.useCallback(Je=>{Be(Pt=>Pt.filter((tr,Jt)=>Jt!==Je))},[]),ge=S.useCallback(async(Je,Pt,tr)=>{Ae.debug(" Deleting teacher subject:",{subjectId:Je,grade:Pt,classNumber:tr});try{const Jt={subjectId:Je,grade:Pt,class:tr};Ae.debug(" Sending delete request with data:",Jt);const Bn=await na.deleteTeacherSubject(Jt);if(Bn.success)d("Subject assignment deleted successfully!","success"),await be();else throw new Error(Bn.error||"Failed to delete subject assignment")}catch(Jt){Ae.error(" Error deleting subject assignment:",Jt),d("Error deleting subject assignment. Please try again.","error")}},[be,d]),Ke=S.useCallback((Je,Pt,tr,Jt)=>{Ie({subjectId:Je,subjectName:Pt,grade:tr,classNumber:Jt}),we(!0)},[]),tt=S.useCallback(async()=>{Se&&(await ge(Se.subjectId,Se.grade,Se.classNumber),we(!1),Ie(null))},[Se,ge]),Tt=S.useCallback(()=>{we(!1),Ie(null)},[]),cr=S.useCallback(async()=>{if(Ee.length===0){d("Please select at least one subject","warning");return}ze(!0);try{const Je=await na.saveTeacherSubjects(Ee);if(Je.success)d("Subjects saved successfully!","success"),ie(!1),Be([]),Z("subject"),await be();else throw new Error(Je.error||"Failed to save subjects")}catch(Je){Ae.error(" Error saving teacher subjects:",Je),d("Failed to save subjects","error")}finally{ze(!1)}},[Ee,be]);S.useCallback(async Je=>{Ae.debug(" Saving teacher subjects:",Je);try{const Pt=await na.saveTeacherSubjects(Je);if(Pt.success)d("Subjects saved successfully!","success"),await be(),ie(!1);else throw new Error(Pt.error||"Failed to save subjects")}catch(Pt){Ae.error(" Error saving teacher subjects:",Pt),d("Failed to save subjects","error")}},[be]);const Vt=S.useCallback(()=>{Ae.debug(" Showing active tests..."),C("tests")},[]),$t=S.useCallback(async Je=>{Ae.debug(" Showing test details:",Je),H(Je),de(!0),U([]),X(null),K(!0);try{if(["input","true_false","multiple_choice"].includes(Je.test_type)){const Pt=await Kn.getTestQuestionsWithInfo(Je.test_type,Je.test_id);U(Pt.questions||[]),X(Pt.testInfo||null),Ae.debug(" Test questions and info loaded:",{questionsCount:Pt.questions?.length||0,testInfo:Pt.testInfo})}}catch(Pt){console.error("Error loading test questions:",Pt),d("Error loading test questions. Please try again.","error")}finally{K(!1)}},[d]);S.useCallback(async(Je,Pt,tr)=>{Ae.debug(" Removing class assignment:",Je,Pt,tr);try{const Jt=await Kn.removeClassAssignment(Je,Pt,tr);if(Jt.success)d("Assignment removed successfully!","success"),await Me();else throw new Error(Jt.error||"Failed to remove assignment")}catch(Jt){Ae.error(" Error removing class assignment:",Jt),d("Failed to remove assignment","error")}},[Me]);const mr=S.useCallback(async(Je,Pt)=>{Ae.debug(" Marking test as completed:",Je,Pt),yt(Pt);try{const tr=await Kn.markTestCompleted(Je,Pt);if(tr.success){d("Test marked as completed!","success");const Jt=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Jt),Ae.debug(" Cleared teacher tests cache"),await Me()}else throw new Error(tr.error||"Failed to mark test as completed")}catch(tr){Ae.error(" Error marking test as completed:",tr),d("Failed to mark test as completed","error")}finally{yt(null)}},[Me,d,r?.teacher_id,r?.id]),Zr=S.useCallback(async()=>{Ae.debug(" Refreshing active tests data...");try{const Je=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Je),Ae.debug(" Cache cleared, forcing fresh API call"),Ae.debug(" Making direct API call to get-teacher-active-tests with noCache");const Pt=await Kn.getTeacherTests(!0);Ae.debug(" Direct API call returned:",Pt),A(Pt),Ae.debug(" activeTestsData state updated:",Pt),d(`Tests refreshed successfully! Found ${Pt?.length||0} tests.`,"success")}catch(Je){Ae.error(" Error refreshing tests:",Je),d("Failed to refresh tests","error")}},[r?.teacher_id,r?.id]),jr=S.useCallback(async(Je=null)=>{if(r?.teacher_id){Ft(!0),dr(null);try{Ae.debug(" Loading test performance data for class:",Je);const Pt=await Y1e.getTestPerformance(r.teacher_id,Je);At(Pt),Ae.debug(" Test performance data loaded:",Pt.length,"tests")}catch(Pt){Ae.error(" Error loading test performance data:",Pt),dr(Pt.message)}finally{Ft(!1)}}},[r?.teacher_id]);S.useCallback((Je,Pt)=>{Ae.debug(" Showing class results:",Je,Pt),Ae.debug(" Class click - grade:",Je,"className:",Pt),O(Je),W(Pt),C("results");const tr=`${Je}/${Pt}`;Ae.debug(" Loading performance data for clicked class:",tr),Xe(tr),jr(tr)},[jr]);const[Pr,xn]=S.useState([]),[Kr,Ir]=S.useState([]),Os=S.useCallback(async()=>{try{const Pt=await(await co(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestAssignments(r.teacher_id);xn(Pt)}catch(Je){Ae.warn("Failed to load retests",Je)}},[r]);S.useCallback(async Je=>{try{const tr=await(await co(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestTargets(Je);Ir(tr)}catch(Pt){Ae.warn("Failed to load retest targets",Pt)}},[]);const[Yn,Vn]=S.useState(!1),[ts,Bs]=S.useState(!1);S.useEffect(()=>{Ae.debug("[TeacherCabinet] showRetestModal state changed:",Yn)},[Yn]);const[hn,Pe]=S.useState({test_type:"",original_test_id:"",subject_id:"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:[]}),Ut=S.useCallback(async Je=>{Ae.debug("[TeacherCabinet] openRetestModal called with:",Je);const{test_type:Pt,original_test_id:tr,subject_id:Jt,failedStudentIds:Bn=[],grade:vt,class:Re}=Je||{};Pe({test_type:Pt||"multiple_choice",original_test_id:tr||"",subject_id:Jt||"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:Bn}),vt!==void 0&&O(vt),Re!==void 0&&W(Re),Ae.debug("[TeacherCabinet] Setting showRetestModal to true"),Vn(!0)},[]),Vr=S.useCallback(async()=>{Bs(!0);try{const Je=await co(()=>import("./retestService-C6b0YDiD.js"),[]),Pt=new Date,tr=new Date(Pt.getTime()+hn.window_days*24*60*60*1e3),Jt={...hn,teacher_id:r.teacher_id,grade:M,class:L,window_start:Pt.toISOString(),window_end:tr.toISOString()};Ae.debug("[Retest][TeacherCabinet] Prepared payload:",JSON.stringify(Jt)),Ae.debug("[Retest][TeacherCabinet] Selected students count:",(Jt.student_ids||[]).length,"IDs:",Jt.student_ids),await Je.retestService.createRetestAssignment(Jt),d("Retest created","success"),Vn(!1),Os(),nt(Bn=>Bn+1)}catch(Je){Ae.error("Create retest error",Je),d(Je.message||"Failed to create retest","error")}finally{Bs(!1)}},[hn,M,L,Os]);if(m)return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Cabinet..."})]}),l.jsx("div",{className:"flex flex-wrap gap-2"})]});if(x)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Cabinet Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:x}),l.jsx(xt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return l.jsxs(Nt.div,{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(Nt.div,{className:"bg-gradient-to-r from-sky-400 to-sky-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-6",children:[l.jsxs(Nt.div,{className:"flex-1 text-center",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-white mb-2",children:"Teacher Cabinet"}),l.jsxs("p",{className:"text-sky-100 text-sm sm:text-base md:text-lg",children:["Welcome, Teacher ",a()||""]})]}),l.jsxs(Nt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsx("div",{className:"hidden md:block",children:l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>ut(!Qe),className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border border-white/20 text-white hover:bg-white/20 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:[l.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"Menu"}),l.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-200",style:{transform:Qe?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),Qe&&l.jsxs(Nt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[l.jsxs("button",{onClick:()=>{ut(!1),ae()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),l.jsx("span",{children:"Change Password"})]}),l.jsxs("button",{onClick:()=>{ut(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),l.jsx("span",{children:"Logout"})]})]})]})}),l.jsxs("div",{className:"md:hidden",children:[l.jsx("button",{onClick:()=>ht(!mt),className:"flex items-center justify-center w-10 h-10 bg-white/10 border border-white/20 text-white hover:bg-white/20 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),mt&&l.jsxs(Nt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[l.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:a()||"Teacher"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Account"})]}),l.jsxs("button",{onClick:()=>{ht(!1),ae()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),l.jsx("span",{children:"Change Password"})]}),l.jsxs("button",{onClick:()=>{ht(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),l.jsx("span",{children:"Logout"})]})]})]})]})]})})}),l.jsx(Nt.div,{className:"bg-white border-b shadow-sm",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:l.jsx("nav",{className:"flex space-x-1 sm:space-x-8 overflow-x-auto",children:[{key:"main",label:"Main Dashboard",shortLabel:"Dashboard"},{key:"tests",label:"Test Management",shortLabel:"Tests"},{key:"results",label:"Class Results",shortLabel:"Results"},{key:"subjects",label:"Subject Management",shortLabel:"Subjects"}].map((Je,Pt)=>l.jsxs(Nt.button,{onClick:()=>Je.key==="tests"?Vt():C(Je.key),className:`py-2 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors duration-200 whitespace-nowrap flex-shrink-0 flex-1 sm:flex-none ${v===Je.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5+Pt*.1,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:[l.jsx("span",{className:"sm:hidden",children:Je.shortLabel}),l.jsx("span",{className:"hidden sm:inline",children:Je.label})]},Je.key))})})}),l.jsx(Nt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:l.jsxs(wl,{mode:"wait",children:[v==="main"&&l.jsx(Nt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Xr()},"main"),v==="subjects"&&l.jsx(Nt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:xs()},"subjects"),v==="tests"&&l.jsx(Nt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:Dn()},"tests"),v==="results"&&l.jsx(Nt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:l.jsx(wU,{selectedGrade:M,selectedClass:L,onBackToCabinet:()=>C("main"),openRetestModal:Ut,forceRefreshOnMount:Ot>0},Ot)},"results")]})}),re&&l.jsx(Ka,{isOpen:re,onClose:()=>{ie(!1),Z("subject"),Be([]),Le(null),rt([])},title:"Select Subjects and Classes",size:"large",children:l.jsxs("div",{className:"space-y-6 px-4 max-h-[80vh] overflow-y-auto",children:[Yt==="subject"&&l.jsxs(Nt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 1: Select Subject"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the subject you want to teach:"}),qe?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading subjects..."})]}):l.jsxs("select",{value:it?.subject_id||"",onChange:Je=>ot(Je.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select a subject"}),Ar.map(Je=>l.jsx("option",{value:Je.subject_id,children:Je.subject},Je.subject_id))]})]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx(xt,{variant:"outline",onClick:()=>ie(!1),children:"Cancel"}),l.jsx(xt,{variant:"primary",onClick:()=>Z("classes"),disabled:!it,children:"Next: Select Classes"})]})]}),Yt==="classes"&&it&&l.jsxs(Nt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Step 2: Select Classes for ",it.subject]}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the classes you teach for this subject:"}),l.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg p-4",children:l.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7].map(Je=>{let Pt;return Je===1||Je===2||Je===3?Pt=[15,16]:Je===4||Je===5||Je===6?Pt=[13,14]:Je===7?Pt=[69]:Pt=[],l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"font-medium text-gray-700 text-sm",children:["Grade ",Je]}),l.jsx("div",{className:"space-y-1",children:Pt.map(tr=>l.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[l.jsx("input",{type:"checkbox",checked:st.some(Jt=>Jt.grade===Je.toString()&&Jt.class===tr.toString()),onChange:()=>dt(Je.toString(),tr.toString()),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsxs("span",{className:"text-xs text-gray-700",children:["Class ",tr]})]},tr))})]},Je)})})})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(xt,{variant:"outline",onClick:()=>Z("subject"),children:"Back to Subjects"}),l.jsxs("div",{className:"space-x-3",children:[l.jsx(xt,{variant:"outline",onClick:()=>ie(!1),children:"Cancel"}),l.jsx(xt,{variant:"primary",onClick:ee,disabled:st.length===0,children:"Add Subject"})]})]})]}),Ee.length>0&&l.jsxs(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Selected Subjects"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Review your selected subjects and classes:"}),l.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:Ee.map((Je,Pt)=>l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:Je.subject_name}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Classes: ",Je.classes.map(tr=>`Grade ${tr.grade} Class ${tr.class}`).join(", ")]})]}),l.jsx("button",{onClick:()=>je(Pt),className:"text-red-600 hover:text-red-800 p-1",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Pt))})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(xt,{variant:"outline",onClick:()=>Z("subject"),children:"Add More Subjects"}),l.jsxs("div",{className:"space-x-3",children:[l.jsx(xt,{variant:"outline",onClick:()=>ie(!1),children:"Cancel"}),l.jsx(xt,{variant:"primary",onClick:cr,disabled:Lt,className:"relative",children:Lt?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save All Subjects"})]})]})]})]})}),Yn&&l.jsxs(Ka,{isOpen:Yn,onClose:()=>Vn(!1),title:"Create Retest",size:"medium",children:[l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retest Window"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:hn.window_days,onChange:Je=>Pe(Pt=>({...Pt,window_days:Number(Je.target.value)})),children:[l.jsx("option",{value:1,children:"1 day"}),l.jsx("option",{value:2,children:"2 days"}),l.jsx("option",{value:3,children:"3 days"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Attempts"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:hn.max_attempts,onChange:Je=>Pe(Pt=>({...Pt,max_attempts:Number(Je.target.value)})),children:[l.jsx("option",{value:1,children:"1 attempt"}),l.jsx("option",{value:2,children:"2 attempts"}),l.jsx("option",{value:3,children:"3 attempts"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Students can retry immediately if they fail"})]})]})}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{onClick:()=>Vn(!1),disabled:ts,className:"px-4 py-2 text-sm rounded border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),l.jsx("button",{onClick:Vr,disabled:ts,className:"px-4 py-2 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ts?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm"}),"Creating Retest..."]}):"Create Retest"})]})]}),xe&&fe&&l.jsxs(Ka,{isOpen:xe,onClose:()=>de(!1),title:"Test Details",size:"large",children:[l.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Test Name:"}),l.jsx("p",{className:"text-sm text-gray-900",children:fe.test_name})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),l.jsx("p",{className:"text-sm text-gray-900",children:fe.subject})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Test Type:"}),l.jsx("p",{className:"text-sm text-gray-900",children:fe.test_type})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),l.jsx("p",{className:"text-sm text-gray-900",children:new Date(fe.created_at).toLocaleDateString()})]}),(V||fe)&&l.jsx("div",{className:"space-y-2",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[["input","true_false","multiple_choice"].includes(fe.test_type)&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Shuffled:"}),l.jsx("span",{className:`text-sm font-semibold ${V?.is_shuffled||fe.is_shuffled?"text-green-600":"text-gray-400"}`,children:V?.is_shuffled||fe.is_shuffled?" Yes":" No"})]}),(V?.allowed_time||fe.allowed_time)&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),l.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[" ",Math.floor((V?.allowed_time||fe.allowed_time)/60)," minutes"]})]}),!(V?.allowed_time||fe.allowed_time)&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),l.jsx("span",{className:"text-sm font-semibold text-gray-400",children:" Not set"})]})]})}),fe.assignments&&fe.assignments.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:fe.assignments.map((Je,Pt)=>l.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[Je.grade,"/",Je.class]},Pt))})]}),["input","true_false","multiple_choice"].includes(fe.test_type)&&l.jsxs("div",{className:"mt-6 border-t pt-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions and Correct Answers"}),z?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx(pn,{size:"md"})}):Q.length>0?l.jsx("div",{className:"space-y-4",children:Q.map((Je,Pt)=>{if(fe.test_type==="multiple_choice"){const tr=Je.correct_answer;return l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[2rem]",children:["Q",Pt+1,":"]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm text-gray-900 mb-2",children:Je.question}),l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Options:"}),l.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Je.options&&Je.options.map((Jt,Bn)=>{const vt=String.fromCharCode(97+Bn).toUpperCase();return l.jsxs("div",{className:`p-2 rounded ${vt===tr?"bg-green-100 border-2 border-green-500":"bg-white border border-gray-200"}`,children:[l.jsxs("span",{className:"font-semibold",children:[vt,":"]})," ",Jt,vt===tr&&l.jsx("span",{className:"ml-2 text-green-700 font-bold",children:" Correct"})]},Bn)})})]})]})]})},Je.question_id||Pt)}if(fe.test_type==="true_false"){const tr=Je.correct_answer,Jt=tr===!0||tr==="true"||tr===1||tr==="1";return l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[2rem]",children:["Q",Pt+1,":"]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm text-gray-900 mb-2",children:Je.question}),l.jsx("div",{className:"mt-2",children:l.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded ${Jt?"bg-green-100 border-2 border-green-500":"bg-red-100 border-2 border-red-500"}`,children:l.jsxs("span",{className:"text-sm font-semibold",children:["Correct Answer: ",Jt?"True":"False"]})})})]})]})},Je.question_id||Pt)}if(fe.test_type==="input"){const tr=Je.correct_answers||[];return l.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsxs("span",{className:"text-sm font-semibold text-gray-700 min-w-[2rem]",children:["Q",Pt+1,":"]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm text-gray-900 mb-2",children:Je.question}),l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Correct Answer(s):"}),tr.length>0?l.jsx("div",{className:"flex flex-wrap gap-2",children:tr.map((Jt,Bn)=>l.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded bg-green-100 border-2 border-green-500 text-sm font-semibold text-green-800",children:Jt},Bn))}):l.jsx("span",{className:"text-sm text-gray-400 italic",children:"No correct answers specified"})]})]})]})},Je.question_id||Pt)}return null})}):l.jsx("p",{className:"text-sm text-gray-500 italic",children:"No questions available for this test."})]})]}),l.jsx("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:l.jsx(xt,{variant:"outline",onClick:()=>de(!1),children:"Close"})})]}),ye&&Se&&l.jsx(Ka,{isOpen:ye,onClose:Tt,title:"Delete Subject Assignment",size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:l.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Subject Assignment"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Are you sure you want to delete the assignment for"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:Se.subjectName})," ","in Grade ",Se.grade,", Class ",Se.classNumber,"?"]}),l.jsx("p",{className:"text-xs text-red-600",children:"This action cannot be undone."})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(xt,{variant:"outline",onClick:Tt,children:"Cancel"}),l.jsx(xt,{variant:"danger",onClick:tt,children:"Delete Assignment"})]})]})}),l.jsx(Nt.div,{className:"fixed top-4 right-4 space-y-2 z-50",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8,duration:.5},children:f.map(Je=>l.jsx(Nt.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:l.jsx("div",{className:`p-4 rounded-lg shadow-lg ${Je.type==="success"?"bg-green-600 text-white":Je.type==="error"?"bg-red-600 text-white":Je.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{children:Je.message}),l.jsx("button",{onClick:()=>setNotifications(Pt=>Pt.filter(tr=>tr.id!==Je.id)),className:"ml-4 text-white hover:text-gray-200",children:""})]})})},Je.id))}),sr&&l.jsx(Ka,{isOpen:sr,onClose:jt,title:"Change Password",size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),l.jsx("input",{type:"password",name:"currentPassword",value:Er.currentPassword,onChange:ue,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter current password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),l.jsx("input",{type:"password",name:"newPassword",value:Er.newPassword,onChange:ue,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter new password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),l.jsx("input",{type:"password",name:"confirmPassword",value:Er.confirmPassword,onChange:ue,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Confirm new password"})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx(xt,{type:"button",variant:"secondary",onClick:jt,className:"flex-1",children:"Cancel"}),l.jsx(xt,{type:"button",onClick:G,className:"flex-1",children:"Change Password"})]})]})})]});function Xr(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsxs(er,{children:[l.jsx(er.Header,{children:l.jsx(er.Title,{children:"My Subjects & Classes"})}),l.jsx(er.Body,{children:k.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any subjects assigned yet."}),l.jsx(xt,{variant:"outline",onClick:()=>C("subjects"),children:"Manage Subjects"})]}):l.jsx("div",{className:"space-y-6",children:k.map((Je,Pt)=>l.jsxs(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+Pt*.1,duration:.3},className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Je.name}),l.jsxs("span",{className:"text-sm text-gray-500",children:[Je.classes?.length||0," classes"]})]}),Je.classes&&Je.classes.length>0?l.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Je.classes.map((tr,Jt)=>l.jsx(Nt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+Pt*.1+Jt*.05,duration:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:l.jsxs(xt,{variant:"outline",size:"sm",onClick:()=>{O(tr.grade),W(tr.class),C("results")},className:"font-medium",children:[tr.grade,"/",tr.class]})},Jt))}):l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("span",{className:"text-sm",children:"No classes assigned to this subject"})})]},Je.id))})})]})}),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:l.jsxs(er,{children:[l.jsxs(er.Header,{children:[l.jsx(er.Title,{children:"Test Performance Overview"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Test performance over time with average scores"})]}),l.jsx(er.Body,{children:k.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"mb-2",children:l.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),l.jsx("p",{className:"text-gray-500",children:"No subjects assigned - no performance data available"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:(()=>{const Je=[];return k.forEach(Pt=>{Pt.classes&&Pt.classes.forEach(tr=>{const Jt=`${tr.grade}/${tr.class}`;Je.find(Bn=>Bn.key===Jt)||Je.push({key:Jt,grade:tr.grade,class:tr.class,subject:Pt.name})})}),Je})().map((Je,Pt)=>l.jsxs("button",{onClick:()=>{Ae.debug(" Class button clicked:",Je.key),Xe(Je.key),jr(Je.key)},className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${nr===Je.key?"bg-blue-100 text-blue-700 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[Je.grade,"/",Je.class]},Je.key))}),nr?l.jsx("div",{className:"mt-4",children:l.jsx(Q7e,{data:Rt,loading:wt,error:or})}):l.jsxs("div",{className:"mt-4 text-center text-muted py-4",children:[l.jsx("div",{className:"mb-2",children:l.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),l.jsx("p",{className:"text-gray-500",children:"Select a class above to view test performance data"})]})]})})]})})]})}function xs(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsx(er,{children:l.jsx(er.Header,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(er.Title,{children:"Subject Management"}),l.jsx(xt,{variant:"primary",onClick:Ve,children:"Add Subject"})]})})})}),k.length===0?l.jsx(Nt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:l.jsx(er,{children:l.jsx(er.Body,{children:l.jsxs("div",{className:"text-center p-12",children:[l.jsx(Nt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No subjects assigned yet"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first subject to get started with creating tests and managing classes."}),l.jsx(xt,{variant:"primary",onClick:Ve,size:"lg",children:"Add Your First Subject"})]})})})}):l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:l.jsxs(er,{children:[l.jsx(er.Header,{children:l.jsx(er.Title,{children:"Your Subjects"})}),l.jsx(er.Body,{children:l.jsx("div",{className:"space-y-4",children:k.map((Je,Pt)=>l.jsx(Nt.div,{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-green-500",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+Pt*.1,duration:.3},whileHover:{scale:1.02,backgroundColor:"#f9fafb"},children:l.jsx("div",{className:"flex justify-between items-start",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:Je.name}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Je.classes?.map((tr,Jt)=>l.jsxs(Nt.div,{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 text-xs rounded-full px-3 py-1",initial:{scale:0},animate:{scale:1},transition:{delay:.4+Pt*.1+Jt*.05,duration:.2},whileHover:{scale:1.1},children:[l.jsxs("span",{children:[tr.grade," - ",tr.className]}),l.jsx("button",{onClick:()=>Ke(Je.id,Je.name,tr.grade,tr.class),className:"ml-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete this subject assignment",children:l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},Jt))||l.jsx("span",{className:"text-gray-500 text-sm",children:"No classes assigned"})})]})})},Pt))})})]})})]})}function Dn(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsx(er,{children:l.jsx(er.Header,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(er.Title,{children:"Active Tests"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(xt,{variant:"outline",onClick:Zr,children:"Refresh"}),l.jsx(xt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),children:"Create New Test"})]})]})})})}),j.length===0?l.jsx(Nt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:l.jsx(er,{children:l.jsx(er.Body,{children:l.jsxs("div",{className:"text-center p-12",children:[l.jsx(Nt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No active tests found"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first test to get started with assessments."}),l.jsx(xt,{variant:"primary",onClick:()=>t("/teacher/tests/create"),size:"lg",children:"Create Your First Test"})]})})})}):l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"space-y-4",children:j.map((Je,Pt)=>l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+Pt*.1,duration:.3},whileHover:{scale:1.01},children:l.jsx(er,{children:l.jsx(er.Body,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex-1 flex items-center space-x-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 min-w-0 flex-shrink-0 max-w-xs truncate",title:Je.test_name,children:Je.test_name}),l.jsx("span",{className:"hidden sm:inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium flex-shrink-0",children:Je.test_type}),l.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 flex-shrink-0",children:[l.jsx("span",{className:"font-medium",children:"Assignments:"}),l.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium",children:Je.assignments?.length||0})]}),Je.assignments&&Je.assignments.length>0&&l.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 flex-shrink-0",children:[l.jsx("span",{className:"font-medium",children:"Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:Je.assignments.map((tr,Jt)=>l.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[tr.grade,"/",tr.class]},Jt))})]}),l.jsx("div",{className:"text-sm text-gray-500 flex-shrink-0",children:new Date(Je.created_at).toLocaleDateString()})]})]}),l.jsxs("div",{className:"flex gap-2 ml-4 flex-shrink-0",children:[l.jsx("div",{className:"sm:hidden",children:l.jsx(xt,{variant:"outline",onClick:()=>$t(Je),size:"sm",className:"text-xs",title:`Type: ${Je.test_type} | Assignments: ${Je.assignments?.length||0} | Classes: ${Je.assignments?.map(tr=>`${tr.grade}/${tr.class}`).join(", ")||"None"} | ${new Date(Je.created_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})}`,children:"Details"})}),l.jsx("div",{className:"hidden sm:block",children:l.jsx(xt,{variant:"outline",onClick:()=>$t(Je),size:"sm",children:"Details"})}),l.jsx(xt,{variant:"success",onClick:()=>mr(Je.test_type,Je.test_id),size:"sm",disabled:Kt===Je.test_id,children:Kt===Je.test_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]})})})},Pt))})]})}},Z7e={multipleChoice:"multiple_choice",trueFalse:"true_false",input:"input",matching:"matching_type",wordMatching:"word_matching",drawing:"drawing",fillBlanks:"fill_blanks",speaking:"speaking"},FD=()=>{const{user:e}=Js();Mae();const{notifications:t,showNotification:r,removeNotification:n}=_i(),[s,a]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState("typeSelection"),[d,f]=S.useState(!1),[m,p]=S.useState(null),[x,w]=S.useState([]),[v,C]=S.useState(!1),[k,b]=S.useState(!1),[j,A]=S.useState(!1),[F,D]=S.useState(!1),[M,O]=S.useState({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:"",isShuffled:!1}),[L,W]=S.useState([]),[re,ie]=S.useState(null);S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null);const xe=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in initializeTestCreation, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" Setting up test creation event listeners..."),X(),console.log(" Test creation initialization complete")},[e,r]),de=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestTypeSelection, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" showTestTypeSelection called - starting new test creation"),o(!1),console.log(" Reset testAssignmentCompleted flag to false"),a(!0),console.log(" Set isInTestCreation flag to true"),fe(),u("typeSelection"),Q("testTypeSelection")},[e,r]),fe=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in disableNavigationButtons, redirecting to login");return}console.log(" Disabling navigation buttons..."),f(!0)},[e]),H=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in enableNavigationButtons, redirecting to login");return}console.log(" Enabling navigation buttons..."),f(!1)},[e]),Q=S.useCallback(async ee=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveTestCreationState, redirecting to login");return}console.log("  saveTestCreationState called with step:",ee),console.log("  Call stack:",new Error().stack);const je={multipleChoice:{buttonVisible:!0,hintVisible:!1},trueFalse:{buttonVisible:!0,hintVisible:!1},input:{buttonVisible:!0,hintVisible:!1}},ge={isInTestCreation:!0,currentStep:ee,timestamp:Date.now(),excelState:je};localStorage.setItem("test_creation_state",JSON.stringify(ge)),console.log(" Saved test creation state:",ge);const Ke={};switch(ee){case"testTypeSelection":break;case"multipleChoiceForm":Ke.testName=M.testName||"",Ke.numQuestions=M.numQuestions||"",Ke.numOptions=M.numOptions||"",Ke.questions=M.questions||{};break;case"trueFalseForm":Ke.testName=M.testName||"",Ke.numQuestions=M.numQuestions||"",Ke.questions=M.questions||{};break;case"inputForm":Ke.testName=M.testName||"",Ke.numQuestions=M.numQuestions||"",Ke.questions=M.questions||{};break;case"formCreation":Ke.testName=M.testName||"",Ke.numQuestions=M.numQuestions||"",Ke.numOptions=M.numOptions||"",Ke.questions=M.questions||{},Ke.enableTimer=!!M.enableTimer,Ke.timerMinutes=M.timerMinutes||"",Ke.isShuffled=!!M.isShuffled;break;case"assignment":case"testAssignment":Ke.testName=M.testName||"",Ke.numQuestions=M.numQuestions||"",Ke.numOptions=M.numOptions||"",Ke.questions=M.questions||{};break;default:console.log(" Unknown step in saveTestCreationState:",ee);break}Object.keys(Ke).length>0&&(localStorage.setItem(`form_data_${ee}`,JSON.stringify(Ke)),console.log(" Saved form data for step:",ee,Ke))},[e,M]),U=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearTestCreationState, redirecting to login");return}localStorage.removeItem("test_creation_state"),localStorage.removeItem("test_creation_form_data");const ee=[];for(let je=0;je<localStorage.length;je++){const ge=localStorage.key(je);ge&&(ge.includes("test")||ge.includes("form")||ge.includes("question"))&&ee.push(ge)}ee.forEach(je=>{localStorage.removeItem(je),console.log(" Removed localStorage key:",je)}),console.log(" Cleared test creation state from localStorage")},[e]);S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearAllTestFields, redirecting to login");return}console.log(" Clearing all test form fields..."),O({testName:"",numQuestions:0,numOptions:0,questions:{}}),p(null),W([]),ie(null),console.log(" Cleared all test form fields")},[e]);const V=S.useCallback(()=>{console.log(" Resetting Excel upload state..."),ht({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),["multiple-choice","true-false","input","word-matching"].forEach(je=>{const ge=document.querySelector(`.excel-upload-btn[data-test-type="${je}"]`);ge&&(ge.style.display="none",console.log(" Excel button hidden for:",je));const Ke=document.querySelector(`.excel-hint[data-test-type="${je}"]`);Ke&&(Ke.style.display="none",console.log(" Excel hint hidden for:",je));const tt=document.querySelector(`.excel-file-input[data-test-type="${je}"]`);tt&&(tt.value="",console.log(" File input cleared for:",je))}),console.log(" Excel upload state reset complete")},[]),X=S.useCallback(()=>{console.log(" Setting up auto-save listeners for initial form fields..."),["testName","numQuestions","numOptions","enableTimer","timerMinutes","isShuffled"].forEach(je=>{const ge=document.getElementById(je);ge&&ge.addEventListener("input",()=>{console.log(` Auto-save triggered for field: ${je}`)})}),console.log(" Form auto-save setup complete")},[]);S.useCallback(async ee=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveFormDataForStep, redirecting to login");return}console.log("  saveFormDataForStep called with step:",ee),console.log("  Call stack:",new Error().stack);const je={};switch(ee){case"testTypeSelection":break;case"multipleChoiceForm":je.testName=M.testName||"",je.numQuestions=M.numQuestions||"",je.numOptions=M.numOptions||"",je.questions=M.questions||{};break;case"trueFalseForm":je.testName=M.testName||"",je.numQuestions=M.numQuestions||"",je.questions=M.questions||{};break;case"inputForm":je.testName=M.testName||"",je.numQuestions=M.numQuestions||"",je.questions=M.questions||{};break;case"formCreation":je.testName=M.testName||"",je.numQuestions=M.numQuestions||"",je.numOptions=M.numOptions||"",je.questions=M.questions||{};break;default:console.log(" Unknown step for form data save:",ee);return}localStorage.setItem("test_creation_form_data",JSON.stringify({step:ee,data:je,timestamp:Date.now()})),console.log(" Saved form data for step:",ee,je)},[e,M]);const z=S.useCallback(async ee=>{console.log(" Restoring form data for step:",ee);try{const je=localStorage.getItem(`form_data_${ee}`);if(je){const ge=JSON.parse(je);console.log(" Restored form data:",ge),O(Ke=>{const tt={...Ke,...ge};return console.log(" Updated formData with restored data:",tt),console.log(" Matching test data in restored data:",tt.matchingTestData),tt}),Object.keys(ge).forEach(Ke=>{const tt=document.getElementById(Ke);tt&&ge[Ke]!==void 0&&(tt.value=ge[Ke])}),console.log(" Form data restored for step:",ee)}else console.log(" No saved data found for step:",ee)}catch(je){console.error(" Error restoring form data:",je)}},[e]),K=S.useCallback(()=>{console.log(" Setting up multiple choice form auto-save..."),["mcNumOptions"].forEach(ge=>{const Ke=document.getElementById(ge);Ke&&Ke.addEventListener("input",()=>{console.log(` Auto-save triggered for MC field: ${ge}`)})}),document.querySelectorAll("#mcQuestionsContainer input, #mcQuestionsContainer textarea, #mcQuestionsContainer select").forEach(ge=>{ge.addEventListener("input",()=>{console.log(" Auto-save triggered for MC question field")})}),console.log(" Multiple choice form auto-save setup complete")},[]),te=S.useCallback(()=>{console.log(" Setting up true/false form auto-save..."),document.querySelectorAll("#tfQuestionsContainer input, #tfQuestionsContainer textarea, #tfQuestionsContainer select").forEach(je=>{je.addEventListener("input",()=>{console.log(" Auto-save triggered for TF question field")})}),console.log(" True/false form auto-save setup complete")},[]),se=S.useCallback(()=>{console.log(" Setting up input form auto-save..."),document.querySelectorAll("#inputQuestionsContainer input, #inputQuestionsContainer textarea, #inputQuestionsContainer select").forEach(je=>{je.addEventListener("input",()=>{console.log(" Auto-save triggered for Input question field")})}),console.log(" Input form auto-save setup complete")},[]),pe=S.useCallback(ee=>{console.log(" showExcelUploadButton called with testType:",ee);const je=ee==="multiple-choice"?"multipleChoice":ee==="true-false"?"trueFalse":ee==="input"?"input":ee;ht(ge=>({...ge,[je]:{...ge[je],buttonVisible:!0}}))},[]),oe=S.useCallback(ee=>{console.log(" showExcelHint called with testType:",ee);const je=ee==="multiple-choice"?"multipleChoice":ee==="true-false"?"trueFalse":ee==="input"?"input":ee;ht(ge=>({...ge,[je]:{...ge[je],hintVisible:!0}}))},[]),ye=S.useCallback(async(ee,je,ge)=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTestAssignmentOptions, redirecting to login");return}console.log("displayTestAssignmentOptions called with:",{classes:ee,testType:je,testId:ge}),w(ee),console.log(" Test assignment options displayed for:",{testType:je,testId:ge,classesCount:ee.length})},[e]),we=S.useCallback(async(ee,je)=>{try{if(console.log("Loading teacher grades and classes for test assignment"),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}console.log("Teacher ID:",e.teacher_id);const Ke=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log("Teacher subjects response:",Ke),Ke.success&&Ke.subjects&&Ke.subjects.length>0?(console.log("Teacher subjects loaded:",Ke.subjects),w(Ke.subjects),ye(Ke.subjects,ee,je)):(console.log("No teacher subjects found"),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(ge){console.error("Error loading teacher grades and classes:",ge),r("Error loading teacher grades and classes","error")}},[e,r,ye]),Se=S.useCallback(async()=>{if(console.log(" Loading available classes..."),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}try{const je=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log(" Teacher subjects response:",je),je.success&&je.subjects&&je.subjects.length>0?(console.log(" Teacher subjects loaded:",je.subjects),w(je.subjects)):(console.log("No teacher subjects found"),w([]),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(ee){console.error(" Error loading available classes:",ee),r("Failed to load available classes","error")}},[e,r]);S.useCallback(async(ee,je)=>{if(i){o(!1);return}if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestAssignment, redirecting to login");return}fe(),Q("testAssignment"),ie(je),p(ee),u("testAssignment"),we(ee,je),console.log(" Test assignment interface shown for:",{testType:ee,testId:je})},[i,e,fe,Q,we]);const Ie=S.useCallback(async ee=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTeacherActiveTests, redirecting to login");return}if(console.log(" Displaying teacher active tests:",ee),ee.length===0){Ze([]);return}Ze(ee),console.log(" Active tests displayed:",ee.length,"tests")},[e]);S.useCallback(async(ee,je)=>{try{console.log(" Loading test questions for:",{testType:ee,testId:je});const ge=await Kn.getTestQuestions(je,ee);return console.log(" Test questions loaded:",ge),ge}catch(ge){throw console.error("Error loading test questions:",ge),ge}},[]),S.useCallback((ee,je,ge,Ke)=>{console.log(" Showing teacher test details modal:",{testType:ee,testId:je,testName:ge,questionsCount:Ke.length}),console.log("Test Details:",{testType:ee,testId:je,testName:ge,questions:Ke.map(tt=>({id:tt.question_id,question:tt.question,correctAnswer:tt.correct_answer}))}),r(`Test details for "${ge}" loaded successfully.`,"success")},[r]);const me=S.useCallback(async()=>{console.log(" DEBUG: loadTeacherActiveTests called");try{console.log(" DEBUG: Fetching teacher active tests using JWT authentication...");const ee=await Kn.getTeacherTests();console.log(" DEBUG: Tests loaded:",ee),ee&&ee.length>0?(console.log(" DEBUG: Success! Displaying",ee.length,"tests"),Ie(ee)):(console.log(" DEBUG: No tests found"),Ze([]))}catch(ee){console.error(" DEBUG: Error loading active tests:",ee),r("Error loading active tests.","error")}},[r,Ie]),_e=S.useCallback(()=>{console.log("showTestCreationSuccessMessage called"),r("Test created and assigned successfully!","success"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}}),W([]),o(!1),a(!1),U()},[r,U]),We=S.useCallback(async(ee,je)=>{if(console.log(" === ASSIGN TEST TO CLASSES DEBUG START ==="),console.log(" Test Type:",ee),console.log(" Test ID:",je),console.log(" Current formData:",M),console.log(" Selected Classes:",L),console.log(" User:",e),!e||!e.teacher_id){console.error(" No valid teacher session found in assignTestToClasses, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}if(console.log(" Teacher ID:",e.teacher_id),L.length===0){console.warn(" No classes selected"),r("Please select at least one class.","warning");return}try{console.log(" Preparing test + assignment request..."),await Iu.loadAcademicCalendar();const Ke=Iu.getCurrentTerm()?.id;if(!Ke)throw new Error("No current academic period found");const tt=L.map($t=>{const mr={grade:parseInt($t.grade),class:parseInt($t.class),subject_id:parseInt($t.subject_id),academic_period_id:Ke,due_date:null};return console.log(" Created assignment:",mr),mr});if(console.log(" Final assignments array:",tt),ee==="matching"){console.log(" Processing matching test..."),console.log(" Setting isAssigningTest to true for matching test..."),D(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const $t=M.matchingTestData;if(console.log(" Matching test data from formData:",$t),!$t){console.error(" Matching test data not found in formData"),r("Matching test data not found. Please recreate the test.","error");return}console.log(" Matching test data found, processing...");let mr;$t.processedQuestions?(console.log(" Using pre-processed questions from MatchingTestCreator"),mr=$t.processedQuestions):(console.log(" Converting blocks to questions (fallback)..."),console.log(" Blocks:",$t.blocks),console.log(" Words:",$t.words),console.log(" Arrows:",$t.arrows),mr=$t.blocks.map((Pr,xn)=>{const Kr=$t.words.find(Vn=>Vn.blockId===Pr.id)?.word||`Word ${xn+1}`,Ir=$t.arrows.some(Vn=>Vn.startBlock===Pr.id),Os=$t.arrows.find(Vn=>Vn.startBlock===Pr.id)||null,Yn={question_id:xn+1,word:Kr,block_coordinates:{x:Pr.x,y:Pr.y,width:Pr.width,height:Pr.height},has_arrow:Ir,arrow:Os?{startX:Os.startX,startY:Os.startY,endX:Os.endX,endY:Os.endY,style:Os.style||{}}:null};return console.log(` Question ${xn+1}:`,Yn),Yn})),console.log(" Final questions array:",mr);const Zr={teacher_id:e.teacher_id,test_name:M.testName,image_url:$t.imageUrl,num_blocks:$t.blocks.length,questions:mr,allowed_time:M.enableTimer?Math.max(0,Math.floor(Number(M.timerMinutes||0)*60)):null,assignments:tt};console.log(" Final matching test data payload:",Zr),console.log(" Calling testService.saveMatchingTest...");const jr=await Kn.saveMatchingTest(Zr);console.log(" API Response:",jr),jr.success?(console.log(" Matching test created and assigned successfully!"),r("Matching test created and assigned successfully!","success"),console.log("Matching test created and assigned successfully"),o(!0),Ue()):(console.error(" Failed to create matching test:",jr.message),r("Error creating and assigning matching test: "+jr.message,"error")),D(!1);return}if(ee==="wordMatching"){console.log(" Processing word matching test..."),console.log(" Setting isAssigningTest to true for word matching test..."),D(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const $t=M.wordMatchingData;if(console.log(" Word matching test data from formData:",$t),!$t){console.error(" Word matching test data not found in formData"),r("Word matching test data not found. Please recreate the test.","error");return}console.log(" Word matching test data found, processing...");const mr=$t.wordPairs.map((Pr,xn)=>({question_id:xn+1,left_word:Pr.leftWord,right_word:Pr.rightWord}));console.log(" Final word matching questions array:",mr);const Zr={teacher_id:e.teacher_id,test_type:"word_matching",test_name:M.testName,num_questions:$t.wordPairs.length,interaction_type:$t.interactionType||"drag",questions:mr,allowed_time:M.enableTimer?Math.max(0,Math.floor(Number(M.timerMinutes||0)*60)):null,assignments:tt};console.log(" Final word matching test data payload:",Zr),console.log(" Calling testService.assignTestToClasses for word matching...");const jr=await Kn.assignTestToClasses(Zr);console.log(" API Response:",jr),jr.success?(console.log(" Word matching test created and assigned successfully!"),r("Word matching test created and assigned successfully!","success"),console.log("Word matching test created and assigned successfully"),o(!0),Ue()):(console.error(" Failed to create word matching test:",jr.message),r("Error creating and assigning word matching test: "+jr.message,"error")),D(!1);return}if(ee==="drawing"){console.log(" Processing drawing test..."),console.log(" Setting isAssigningTest to true for drawing test..."),D(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const $t=M.drawingData;if(console.log(" Drawing test data from formData:",$t),!$t){console.error(" Drawing test data not found in formData"),r("Drawing test data not found. Please recreate the test.","error");return}console.log(" Drawing test data found, processing...");const mr=$t.questions||[];console.log(" Drawing questions array:",mr);const Zr={teacher_id:e.teacher_id,test_type:"drawing",test_name:M.testName,num_questions:$t.num_questions,passing_score:$t.passing_score,questions:mr,allowed_time:M.enableTimer?Math.max(0,Math.floor(Number(M.timerMinutes||0)*60)):null,assignments:tt};console.log(" Final drawing test data payload:",Zr),console.log(" Calling testService.assignTestToClasses...");const jr=await Kn.assignTestToClasses(Zr);console.log(" API Response:",jr),jr.success?(console.log(" Drawing test created and assigned successfully!"),r("Drawing test created and assigned successfully!","success"),o(!0),Ue()):(console.error(" Failed to create drawing test:",jr.message),r("Error creating and assigning drawing test: "+jr.message,"error")),D(!1);return}if(ee==="fillBlanks"){console.log(" Processing fill blanks test..."),console.log(" Setting isAssigningTest to true for fill blanks test..."),D(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const $t=M.fillBlanksData;if(console.log(" Fill blanks test data from formData:",$t),!$t){console.error(" Fill blanks test data not found in formData"),r("Fill blanks test data not found. Please recreate the test.","error");return}console.log(" Fill blanks test data found, processing...");const mr=$t.blanks||[];console.log(" Fill blanks questions array:",mr);const Zr={teacher_id:e.teacher_id,test_type:"fill_blanks",test_name:M.testName,test_text:$t.test_text,num_questions:$t.num_questions,num_blanks:$t.num_blanks,separate_type:$t.separate_type,allowed_time:M.enableTimer?Math.max(0,Math.floor(Number(M.timerMinutes||0)*60)):null,questions:mr,assignments:tt};console.log(" Final fill blanks test data payload:",Zr),console.log(" Calling testService.assignTestToClasses...");const jr=await Kn.assignTestToClasses(Zr);console.log(" API Response:",jr),jr.success?(console.log(" Fill blanks test created and assigned successfully!"),r("Fill blanks test created and assigned successfully!","success"),o(!0),Ue()):(console.error(" Failed to create fill blanks test:",jr.message),r("Error creating and assigning fill blanks test: "+jr.message,"error")),D(!1);return}if(ee==="speaking"){console.log(" Processing speaking test..."),console.log(" Setting isAssigningTest to true for speaking test..."),D(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Pr=>setTimeout(Pr,100));const $t=M.speakingData;if(console.log(" Speaking test data from formData:",$t),!$t){console.error(" Speaking test data not found in formData"),r("Speaking test data not found. Please recreate the test.","error");return}console.log(" Speaking test data found, processing...");const mr={teacher_id:e.teacher_id,test_type:"speaking",test_name:M.testName,time_limit:$t.time_limit,min_duration:$t.min_duration,max_duration:$t.max_duration,max_attempts:$t.max_attempts,min_words:$t.min_words,passing_score:$t.passing_score,allowed_time:M.enableTimer?Math.max(0,Math.floor(Number(M.timerMinutes||0)*60)):null,questions:$t.questions,assignments:tt};console.log(" Final speaking test data payload:",mr),console.log(" Calling save-speaking-test-with-assignments for speaking test...");const jr=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-speaking-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(mr)})).json();console.log(" API Response:",jr),jr.success?(console.log(" Speaking test created and assigned successfully!"),r("Speaking test created and assigned successfully!","success"),o(!0),Ue()):(console.error(" Failed to create speaking test:",jr.message),r("Error creating and assigning speaking test: "+jr.message,"error")),D(!1);return}console.log(" Processing non-matching test..."),console.log(" Form data questions:",M.questions);const Tt=Object.keys(M.questions).map($t=>{const mr=M.questions[$t];console.log(` Processing question ${$t}:`,mr);let Zr;if(ee==="input")Zr={correct_answers:mr.correct_answers||[mr.correctAnswer||""]};else if(ee==="trueFalse"){const Pr=mr.correct_answer||mr.correctAnswer||mr.correct_answers?.[0]||"";Zr={correct_answer:Pr==="true"}}else Zr={correct_answer:mr.correctAnswer||mr.correct_answer||mr.correct_answers?.[0]||""};const jr={question_id:parseInt($t),question:mr.question,...Zr,options:mr.options||[]};return console.log(` Question ${$t} correct_answers:`,mr.correct_answers),console.log(` Question ${$t} correctAnswer:`,mr.correctAnswer),console.log(` Converted question ${$t}:`,jr),jr});console.log(" Final questions array:",Tt);const cr={teacher_id:e.teacher_id,test_type:Z7e[ee],test_name:M.testName,num_questions:M.numQuestions,num_options:M.numOptions,questions:Tt,allowed_time:M.enableTimer?Math.max(0,Math.floor(Number(M.timerMinutes||0)*60)):null,is_shuffled:!!M.isShuffled,assignments:tt};console.log(" Final test data payload:",cr),console.log(" Setting isAssigningTest to true..."),D(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise($t=>setTimeout($t,100)),console.log(" Calling testService.assignTestToClasses...");const Vt=await Kn.assignTestToClasses(cr);console.log(" API Response:",Vt),Vt.success?(console.log(" Test created and assigned successfully!"),r("Test created and assigned successfully!","success"),console.log("Test created and assigned successfully"),o(!0),Ue()):(console.error(" Failed to create and assign test:",Vt.message),r("Error creating and assigning test: "+Vt.message,"error"))}catch(ge){console.error(" Exception in assignTestToClasses:",ge),console.error("Error creating and assigning test:",ge),r("Error creating and assigning test. Please try again.","error")}finally{D(!1)}console.log(" === ASSIGN TEST TO CLASSES DEBUG END ===")},[e,L,M,r,_e]),Ue=S.useCallback(async()=>{console.log("returnToMainCabinet called - restoring main cabinet view");try{a(!1),o(!1),u("typeSelection"),p(null),ie(null),W([]),H(),U(),_e(),console.log(" Returned to main cabinet")}catch(ee){console.error("Error returning to main cabinet:",ee)}},[H,U,_e]),[St,Ze]=S.useState([]),[Kt,yt]=S.useState(!1);S.useCallback(async()=>{console.log(" Refreshing active tests data...");try{await me(),r("Active tests data refreshed.","success")}catch(ee){console.error("Error refreshing active tests data:",ee),r("Error refreshing data.","error")}},[me,r]);const[Rt,At]=S.useState([]),[wt,Ft]=S.useState([]),[or,dr]=S.useState(!1),[nr,Xe]=S.useState(!1),Qe=S.useCallback(async ee=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayExistingSubjectsInSelection, redirecting to login");return}console.log("Displaying existing subjects in selection interface:",ee),At(ee),console.log(" Existing subjects displayed in selection:",ee.length,"subjects")},[e]);S.useCallback(async()=>{try{console.log("Loading existing subjects...");const ee=await na.getTeacherSubjects();console.log("Existing subjects loaded:",ee),ee&&ee.length>0?Qe(ee):(console.log("No existing subjects found"),At([]))}catch(ee){console.error("Error loading existing subjects:",ee),r("Error loading subjects.","error")}},[r,Qe]);const ut=S.useCallback(ee=>{console.log("Checking for outside click...");const je=document.getElementById("dropdownMenu"),ge=document.querySelector("[data-menu-button]");je&&!je.contains(ee.target)&&!ge?.contains(ee.target)&&(console.log("Outside click detected, closing menu"),je.classList.remove("show"),document.removeEventListener("click",ut))},[]),[mt,ht]=S.useState({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),Ot=S.useCallback((ee,je)=>{const ge=ee.target.files[0];if(!ge)return;if(!ge.name.match(/\.(xlsx|xls)$/i)){r("Please select a valid Excel file (.xlsx or .xls)","error"),ee.target.value="";return}if(ge.size>5*1024*1024){r("File is too large. Please select a file smaller than 5MB.","error"),ee.target.value="";return}A(!0);const Ke=new FileReader;Ke.onload=function(tt){try{console.log(" File loaded, processing data...");const Tt=new Uint8Array(tt.target.result),cr=D6(Tt,{type:"array"}),Vt=cr.SheetNames[0],$t=cr.Sheets[Vt],mr=yw.sheet_to_json($t,{header:1});console.log(" Parsed Excel data:",mr),sr(mr,je),A(!1)}catch(Tt){console.error("Error processing Excel file:",Tt),r("Error reading Excel file: "+Tt.message,"error"),ee.target.value="",A(!1)}},Ke.onerror=function(){r("Failed to read file","error"),ee.target.value="",A(!1)},Ke.readAsArrayBuffer(ge)},[r]),nt=S.useCallback(()=>{console.log(" Initializing Excel upload for all test types...");const ee=document.querySelectorAll(".excel-upload-btn");console.log(` Found ${ee.length} Excel upload buttons`),ee.forEach((je,ge)=>{const Ke=je.dataset.testType,tt=document.querySelector(`.excel-file-input[data-test-type="${Ke}"]`);console.log(` Processing button ${ge+1}: testType=${Ke}, fileInput=${tt?"found":"not found"}`),tt?(je._excelClickHandler&&je.removeEventListener("click",je._excelClickHandler),tt._excelChangeHandler&&tt.removeEventListener("change",tt._excelChangeHandler),je._excelClickHandler=()=>{console.log(` Excel upload button clicked for test type: ${Ke}`),tt.click()},tt._excelChangeHandler=Tt=>{console.log(` File input changed for test type: ${Ke}`),Ot(Tt,Ke)},je.addEventListener("click",je._excelClickHandler),tt.addEventListener("change",tt._excelChangeHandler),console.log(` Excel upload initialized for test type: ${Ke}`)):console.warn(` File input not found for test type: ${Ke}`)}),console.log(" Excel upload initialization complete")},[Ot]),sr=S.useCallback((ee,je)=>{const ge=ee.filter($t=>Array.isArray($t)&&$t.length>0&&$t.some(mr=>mr&&mr.toString().trim()!==""));console.log(" Original Excel data rows:",ee.length),console.log(" Filtered Excel data rows:",ge.length);const tt=kr(ge,je).dataRows;if(tt.length===0){const $t="No data rows found after header processing. Please check your Excel file.";r($t,"error"),alert($t),qe(je);return}console.log(` Processing Excel data for test type: ${je}`),console.log(" Data rows after header processing:",tt);const Tt=Ar(tt,je);if(console.log(" Recognition result:",Tt),!Tt.recognized){console.log(` Excel data recognition failed for test type: ${je}`);const $t="Excel data recognition failed. Please check your file format.";r($t,"error"),alert($t),qe(je);return}console.log(` Excel data recognition successful for test type: ${je}`);const cr=tt.length,Vt=Be(je);if(Vt===0)console.log(` No question count specified, using CSV count: ${cr}`),O($t=>({...$t,numQuestions:cr}));else if(cr!==Vt){const $t=`Your CSV file has ${cr} data rows, but you specified ${Vt} questions.

Please either:
1. Change your question count to ${cr}, or
2. Fix your CSV file to have exactly ${Vt} data rows

Then try uploading again.`;r($t,"error"),qe(je);return}Ye(tt,je)},[r]),kr=S.useCallback((ee,je)=>{if(ee.length===0)return{hasHeaders:!1,headerRow:null,dataRows:ee};const ge=ee[0],Ke=Er(je);if(Gr(ge,Ke).isLikelyHeader){const Tt=`The first row of your Excel file looks like it contains headers:

"${ge.join(" | ")}"

Does the first row contain column headers?

Click "OK" if YES (headers will be removed)
Click "Cancel" if NO (first row will be treated as data)`;if(window.confirm(Tt))return{hasHeaders:!0,headerRow:ge,dataRows:ee.slice(1)}}return{hasHeaders:!1,headerRow:null,dataRows:ee}},[]),Er=S.useCallback(ee=>{switch(ee){case"multipleChoice":return{keywords:["question","answer","correct","option","a","b","c","d","e","f"],expectedColumns:4};case"trueFalse":return{keywords:["question","answer","correct","true","false"],expectedColumns:2};case"input":return{keywords:["question","answer","correct"],expectedColumns:2};default:return{keywords:[],expectedColumns:0}}},[]),Gr=S.useCallback((ee,je)=>{if(!ee||ee.length===0)return{isLikelyHeader:!1};if(ee.length<je.expectedColumns)return{isLikelyHeader:!1};const ge=ee.join(" ").toLowerCase(),Ke=je.keywords.filter(Tt=>ge.includes(Tt.toLowerCase()));return{isLikelyHeader:Ke.length>je.keywords.length/2,keywordMatches:Ke}},[]),Ar=S.useCallback((ee,je)=>{if(ee.length===0)return r("No data rows found. Please check your Excel file.","error"),{recognized:!1,data:[]};console.log(` Checking data pattern for test type: ${je}`),console.log(" Excel data to validate:",ee);const ge=vr(ee,je);if(console.log(" Recognition result:",ge),!ge.matches){const Ke=`Your Excel file doesn't match the expected format.

Required format:
${Ee(je)}

Please review your Excel file and make sure it follows this format exactly.

Then try uploading again.`;return console.log(" Data pattern validation failed:",Ke),console.log(" Calling showNotification with message:",Ke),r(Ke,"error"),console.log(" showNotification called"),alert(Ke),{recognized:!1,data:[]}}return console.log(` Data pattern validation passed for test type: ${je}`),{recognized:!0,data:ee}},[r]),vr=S.useCallback((ee,je)=>{if(je==="multipleChoice")for(let ge=0;ge<ee.length;ge++){const Ke=ee[ge];if(Ke.length<4)return{matches:!1,issue:`Row ${ge+1} has ${Ke.length} columns but needs at least 4`};if(!Ke[0]||Ke[0].toString().trim()==="")return{matches:!1,issue:`Row ${ge+1} has no question in column 1`};if(!Ke[1]||Ke[1].toString().trim()==="")return{matches:!1,issue:`Row ${ge+1} has no correct answer in column 2`}}else if(je==="trueFalse")for(let ge=0;ge<ee.length;ge++){const Ke=ee[ge];if(Ke.length<2)return{matches:!1,issue:`Row ${ge+1} has ${Ke.length} columns but needs at least 2`};if(!Ke[0]||Ke[0].toString().trim()==="")return{matches:!1,issue:`Row ${ge+1} has no question in column 1`};const tt=Ke[1]?.toString().trim().toLowerCase();if(!tt||!["true","false","t","f"].includes(tt))return{matches:!1,issue:`Row ${ge+1} has invalid correct answer in column 2 (must be True/False)`}}else if(je==="input")for(let ge=0;ge<ee.length;ge++){const Ke=ee[ge];if(Ke.length<2)return{matches:!1,issue:`Row ${ge+1} has ${Ke.length} columns but needs at least 2`};if(!Ke[0]||Ke[0].toString().trim()==="")return{matches:!1,issue:`Row ${ge+1} has no question in column 1`};if(!Ke[1]||Ke[1].toString().trim()==="")return{matches:!1,issue:`Row ${ge+1} has no correct answer in column 2`}}return{matches:!0}},[]),Ee=S.useCallback(ee=>{switch(ee){case"multipleChoice":return`Column 1: Question
Column 2: Correct Answer (A, B, C, D, E, or F)
Column 3: Option A
Column 4: Option B
Column 5: Option C (optional)
Column 6: Option D (optional)
Column 7: Option E (optional)
Column 8: Option F (optional)`;case"trueFalse":return`Column 1: Question
Column 2: Correct Answer (True or False)`;case"input":return`Column 1: Question
Column 2: Correct Answer`;default:return"Unknown test type"}},[]),Be=S.useCallback(ee=>M.numQuestions||0,[M.numQuestions]),qe=S.useCallback(ee=>{console.log(` Clearing file input for test type: ${ee}`)},[]),Ye=S.useCallback((ee,je)=>{switch(console.log(` populateFromExcelForTestType called with testType: ${je}`),je){case"multipleChoice":case"multiple-choice":Lt(ee);break;case"trueFalse":case"true-false":ze(ee);break;case"input":it(ee);break;default:console.log(` Unknown test type: ${je}`)}},[]),Lt=S.useCallback(ee=>{console.log(" populateMultipleChoiceFromExcel called with:",ee);const je=Math.max(...ee.map(tt=>tt.length-2)),ge=Math.min(je,6);console.log(` Excel data has ${je} option columns, using ${ge} options`),O(tt=>({...tt,numOptions:ge}));const Ke={};ee.forEach((tt,Tt)=>{const cr=Tt+1;console.log(` Row ${Tt+1} data:`,tt);const Vt={question:(tt[0]||"").toString().trim(),options:[],correctAnswer:(tt[1]||"").toString().trim().toUpperCase()};console.log(` Question ${cr} correctAnswer:`,Vt.correctAnswer),["A","B","C","D","E","F"].slice(0,ge).forEach((Zr,jr)=>{const Pr=(tt[jr+2]||"").toString().trim();console.log(` Option ${jr} (${Zr}):`,Pr),Vt.options.push(Pr)}),Ke[cr]=Vt}),O(tt=>{const Tt={...tt,questions:Ke};return console.log(" Updating form data with:",Tt),Tt}),console.log(" Populated multiple choice questions from Excel:",Ke),r(`Successfully loaded ${ee.length} questions from CSV file!`,"success"),K(),Le("multiple-choice")},[M.numOptions,K,r]),ze=S.useCallback(ee=>{console.log(" populateTrueFalseFromExcel called with:",ee);const je={};ee.forEach((ge,Ke)=>{const tt=Ke+1,Tt={question:(ge[0]||"").toString().trim(),correctAnswer:ge[1]?.toString().trim().toLowerCase()==="true"?"true":"false"};je[tt]=Tt}),O(ge=>({...ge,questions:je})),console.log(" Populated true/false questions from Excel:",je),r(`Successfully loaded ${ee.length} questions from CSV file!`,"success"),te(),Le("true-false")},[te,r]),it=S.useCallback(ee=>{console.log(" populateInputFromExcel called with:",ee);const je={};ee.forEach((ge,Ke)=>{const tt=Ke+1,Tt=[];for(let Vt=1;Vt<ge.length;Vt++){const $t=(ge[Vt]||"").toString().trim();$t&&Tt.push($t)}const cr={question:(ge[0]||"").toString().trim(),correctAnswer:Tt[0]||"",correct_answers:Tt};console.log(` Excel question ${tt} data:`,cr),je[tt]=cr}),O(ge=>({...ge,questions:je})),console.log(" Populated input questions from Excel:",je),r(`Successfully loaded ${ee.length} questions from Excel file!`,"success"),se(),Le("input")},[se,r]),Le=S.useCallback(ee=>{switch(console.log(` Reattaching form event listeners for test type: ${ee}`),document.querySelectorAll('[data-listener-attached="true"]').forEach(ge=>{ge.removeEventListener("input",()=>{}),ge.removeAttribute("data-listener-attached")}),ee){case"multiple-choice":K();break;case"true-false":te();break;case"input":se();break;default:console.warn("Unknown test type for event listener reattachment:",ee)}console.log(` Form event listeners reattached for test type: ${ee}`)},[K,te,se]),st=S.useCallback(()=>{const ee=localStorage.getItem("test_creation_state");if(!ee)return console.log(" No test creation state found in localStorage"),!1;try{const je=JSON.parse(ee);console.log(" Found test creation state:",je);const ge=Date.now()-je.timestamp,Ke=1800*1e3;if(ge>Ke)return console.log(" Test creation state is too old, clearing it"),U(),!1;switch(a(!0),console.log(" Restored isInTestCreation flag to true"),fe(),je.excelState&&V(),je.currentStep){case"testTypeSelection":console.log(" Restoring test type selection step"),u("typeSelection");break;case"multipleChoiceForm":console.log(" Restoring multiple choice form step"),p("multipleChoice"),u("formCreation");break;case"trueFalseForm":console.log(" Restoring true/false form step"),p("trueFalse"),u("formCreation");break;case"inputForm":console.log(" Restoring input form step"),p("input"),u("formCreation");break;case"testAssignment":case"assignment":console.log(" Restoring test assignment step"),console.log(" Cannot restore test assignment step without test data, going back to type selection"),u("typeSelection");break;default:console.log(" Unknown step in state, defaulting to type selection"),u("typeSelection")}return z(je.currentStep),!0}catch(je){return console.error(" Error restoring test creation state:",je),U(),!1}},[U,fe,V,z]);S.useEffect(()=>{console.log(" Initializing Teacher Tests..."),xe(),st(),Se(),nt()},[xe,st,Se,nt]),S.useEffect(()=>{M.numQuestions>0&&m&&m!=="matching"&&m!=="drawing"&&m!=="fillBlanks"&&(console.log(" Excel upload buttons rendered, initializing event listeners..."),setTimeout(()=>{nt()},100))},[M.numQuestions,m,nt]);const rt=ee=>{console.log(" Test type selected:",ee),console.log(" Setting testType to:",ee),p(ee),u("formCreation"),O({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:""}),Q("formCreation"),setTimeout(()=>{nt()},100)},qt=(ee,je)=>{O(ge=>({...ge,[ee]:je}))},Xt=(ee,je,ge)=>{O(Ke=>({...Ke,questions:{...Ke.questions,[ee]:{...Ke.questions[ee],[je]:ge}}}))},Yt=(ee,je)=>{const ge=document.getElementById(ee);if(!ge)return;const Ke=ge.selectionStart||0,tt=ge.selectionEnd||0,Tt=ge.value||"",cr=Tt.substring(0,Ke)+je+Tt.substring(tt),Vt=ge.dataset.questionId,$t=ge.dataset.field;Vt&&$t&&Xt(Vt,$t,cr),setTimeout(()=>{ge.focus();const mr=Ke+je.length;ge.setSelectionRange(mr,mr)},0)},Z=(ee,je,ge,Ke=0)=>{const tt={};for(let Tt=1;Tt<=ge;Tt++)ee==="multipleChoice"?tt[Tt]={question:"",options:Array.from({length:Ke},()=>""),correctAnswer:""}:ee==="trueFalse"?tt[Tt]={question:"",correctAnswer:""}:ee==="input"&&(tt[Tt]={question:"",correct_answers:[""]});O(Tt=>({...Tt,questions:tt})),ee==="multipleChoice"?(pe("multiple-choice"),oe("multiple-choice")):ee==="trueFalse"?(pe("true-false"),oe("true-false")):ee==="input"&&(pe("input"),oe("input"))},ae=async()=>{if(!m||!M.testName||!M.numQuestions){r("Please fill in all required fields","error");return}console.log(" Test form completed, proceeding to assignment step"),Q("testAssignment",M),u("testAssignment"),r("Test form completed! Now select classes and subjects.","success")},jt=(ee,je,ge,Ke,tt)=>{W(ge?Tt=>[...Tt,{grade:ee,class:je,subject_id:Ke,subject:tt}]:Tt=>Tt.filter(cr=>!(cr.grade===ee&&cr.class===je&&cr.subject_id===Ke)))},G=S.useCallback(async ee=>{console.log(" [DEBUG] handleMatchingTestSave called"),console.log(" [DEBUG] Received testData:",ee),console.log(" [DEBUG] Current formData:",M),console.log(" [DEBUG] Current testType:",m),console.log(" [DEBUG] Current user:",e),console.log(" [DEBUG] Current currentStep:",c),b(!0);try{const je=ee.blocks.map((tt,Tt)=>{const cr=ee.words.find(mr=>mr.blockId===tt.id)?.word||`Word ${Tt+1}`,Vt=ee.arrows.some(mr=>mr.startBlock===tt.id),$t=ee.arrows.find(mr=>mr.startBlock===tt.id)||null;return{question_id:Tt+1,word:cr,block_coordinates:{x:tt.x,y:tt.y,width:tt.width,height:tt.height},has_arrow:Vt,arrow:$t?{startX:$t.startX,startY:$t.startY,endX:$t.endX,endY:$t.endY,style:$t.style||{}}:null}}),ge={teacher_id:e.teacher_id,test_name:M.testName||`Matching Test - ${new Date().toLocaleString()}`,image_url:ee.imageUrl,num_blocks:ee.blocks.length,questions:je,assignments:[]};console.log(" Sending matching test payload:",ge);const Ke={...M,testName:ge.test_name,numQuestions:ge.num_blocks,numOptions:0,questions:je.reduce((tt,Tt,cr)=>(tt[cr+1]={question:Tt.word,correctAnswer:Tt.word,options:[]},tt),{}),matchingTestData:ee};console.log(" Assignment form data:",Ke),O(Ke),Q("testAssignment",Ke),console.log(" Setting current step to testAssignment"),u("testAssignment"),r("Matching test data saved! Now select classes and subjects.","success")}catch(je){console.error(" Error saving matching test:",je),r("Failed to save matching test: "+je.message,"error")}finally{b(!1)}},[e,M,m,r,Q]),ue=S.useCallback(()=>{console.log(" Cancelling matching test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ce=S.useCallback(async ee=>{console.log(" [DEBUG] handleWordMatchingTestSave called"),console.log(" [DEBUG] Received testData:",ee),b(!0);try{O(je=>({...je,wordMatchingData:ee,numQuestions:ee.numQuestions||ee.wordPairs?.length||0})),u("testAssignment"),r("Word matching test created! Now assign it to classes.","success")}catch(je){console.error("Error saving word matching test:",je),r("Failed to save word matching test: "+je.message,"error")}finally{b(!1)}},[r]),be=S.useCallback(()=>{console.log(" Cancelling word matching test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Me=S.useCallback(async ee=>{console.log(" [DEBUG] handleDrawingTestSave called"),console.log(" [DEBUG] Received testData:",ee),b(!0);try{O(je=>({...je,drawingData:ee,numQuestions:ee.num_questions||ee.questions?.length||0})),u("testAssignment"),r("Drawing test created! Now assign it to classes.","success")}catch(je){console.error(" Error saving drawing test:",je),r("Error saving drawing test","error")}finally{b(!1)}},[r]),De=S.useCallback(()=>{console.log(" Cancelling drawing test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ve=S.useCallback(()=>{console.log(" Cancelling fill blanks test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),bt=S.useCallback(async ee=>{console.log(" [DEBUG] handleFillBlanksTestSave called"),console.log(" [DEBUG] Received testData:",ee),b(!0);try{O(je=>({...je,fillBlanksData:ee,numQuestions:ee.num_questions||ee.blanks?.length||0})),u("testAssignment"),r("Fill blanks test created! Now assign it to classes.","success")}catch(je){console.error(" Error saving fill blanks test:",je),r("Error saving fill blanks test","error")}finally{b(!1)}},[r]),ot=S.useCallback(()=>{console.log(" Cancelling speaking test creation"),u("typeSelection"),O({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),dt=S.useCallback(async ee=>{console.log(" [DEBUG] handleSpeakingTestSave called"),console.log(" [DEBUG] Received testData:",ee),b(!0);try{O(je=>({...je,speakingData:ee,numQuestions:ee.questions?.length||0})),u("testAssignment"),r("Speaking test created! Now assign it to classes.","success")}catch(je){console.error(" Error saving speaking test:",je),r("Error saving speaking test","error")}finally{b(!1)}},[r]);return l.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs(wl,{mode:"wait",children:[c==="typeSelection"&&l.jsxs(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs(xt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),l.jsx("span",{children:"Back to Main"})]}),l.jsx("div",{className:"flex-1"})]}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create New Test"}),l.jsx("p",{className:"text-gray-600",children:"Choose the type of test you want to create"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"multipleChoice",title:"Multiple Choice",description:"Questions with multiple answer options",icon:"/pics/multiple-choice.png"},{type:"trueFalse",title:"True/False",description:"Questions with true or false answers",icon:"/pics/true-false.png"},{type:"input",title:"Input",description:"Questions requiring text input",icon:"/pics/input.png"},{type:"matching",title:"Picture Matching",description:"Labeling pictures",icon:"/pics/matching.png"},{type:"wordMatching",title:"Word Matching",description:"Matching word pairs by dragging or drawing arrows",icon:"/pics/matching-words.png"},{type:"drawing",title:"Drawing Test",description:"Interactive drawing tests with canvas for students",icon:"/pics/drawing.png"},{type:"fillBlanks",title:"Fill Blanks",description:"Text with multiple choice blanks",icon:"/pics/fill-blanks.png"},{type:"speaking",title:"Speaking Test",description:"Audio recording with AI-powered feedback",icon:"/pics/speaking.png"}].map(({type:ee,title:je,description:ge,icon:Ke})=>l.jsx(Nt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer",onClick:()=>rt(ee),children:l.jsxs(er,{className:"h-full text-center hover:shadow-lg transition-shadow",children:[l.jsx("div",{className:"mb-3 flex justify-center",children:l.jsx("img",{src:Ke,alt:je,className:"w-12 h-12 object-contain"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:je}),l.jsx("p",{className:"text-sm text-gray-600",children:ge})]})},ee))})]}),c==="formCreation"&&l.jsxs(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex space-x-2",children:l.jsx(xt,{variant:"outline",onClick:de,children:" Back to Test Types"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Create ",m==="multipleChoice"?"Multiple Choice":m==="trueFalse"?"True/False":m==="input"?"Input":m==="drawing"?"Drawing":m==="fillBlanks"?"Fill Blanks":m==="wordMatching"?"Word Matching":m==="speaking"?"Speaking":"Picture Matching"," Test"]}),l.jsx("p",{className:"text-gray-600",children:"Fill in the test details and questions"})]})]})}),l.jsx(er,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Information"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name"}),l.jsx("input",{type:"text",value:M.testName,onChange:ee=>qt("testName",ee.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter test name"})]}),m!=="matching"&&m!=="wordMatching"&&m!=="drawing"&&m!=="fillBlanks"&&m!=="speaking"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),l.jsx("input",{type:"number",min:"1",max:"50",value:M.numQuestions,onChange:ee=>{const je=parseInt(ee.target.value)||0;qt("numQuestions",je),je>0&&Z(m,M.testName,je,M.numOptions)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of questions"})]}),m==="multipleChoice"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Options per Question"}),l.jsx("input",{type:"number",min:"2",max:"6",value:M.numOptions,onChange:ee=>{const je=parseInt(ee.target.value)||0;qt("numOptions",je),je>0&&je<2&&r("Multiple choice tests require at least 2 options per question. Please enter 2 or more.","warning"),M.numQuestions>0&&Z(m,M.testName,M.numQuestions,je)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of options (2-6)"})]}),m!=="speaking"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:!!M.enableTimer,onChange:ee=>qt("enableTimer",ee.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Enable timer for this test"})]}),M.enableTimer&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm text-gray-700",children:"Time (minutes):"}),l.jsx("input",{type:"number",min:"1",max:"1440",value:M.timerMinutes,onChange:ee=>qt("timerMinutes",ee.target.value.replace(/[^0-9]/g,"")),className:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 30"})]})]}),m!=="drawing"&&m!=="matching"&&m!=="wordMatching"&&m!=="fillBlanks"&&m!=="speaking"&&l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:!!M.isShuffled,onChange:ee=>qt("isShuffled",ee.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle questions during test"})]})})]})]})}),m==="matching"&&l.jsx(er,{children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Picture Matching Test"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Upload an image and create interactive matching blocks with words."}),l.jsx(bte,{testName:M.testName,onTestSaved:G,onCancel:ue,onBackToCabinet:Ue,isSaving:k,validationErrors:{}})]})}),m==="wordMatching"&&l.jsx(er,{children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Word Matching Test"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Create word pairs for students to match by dragging or drawing arrows."}),l.jsx(Pae,{testName:M.testName,onTestSaved:Ce,onCancel:be,onBackToCabinet:Ue,isSaving:k,validationErrors:{}})]})}),m==="drawing"&&l.jsxs(er,{children:[console.log(" Rendering DrawingTestCreator, testType:",m),l.jsx(fae,{testName:M.testName,onTestSaved:Me,onCancel:De,onBackToCabinet:Ue,isSaving:k,validationErrors:{}})]}),m==="fillBlanks"&&l.jsxs(er,{children:[console.log(" Rendering FillBlanksTestCreator, testType:",m),l.jsx(pae,{testName:M.testName,allowedTime:M.enableTimer&&parseInt(M.timerMinutes)||null,onTestSaved:bt,onCancel:Ve,onBackToCabinet:Ue,isSaving:k,validationErrors:{}})]}),m==="speaking"&&l.jsxs(er,{children:[console.log(" Rendering SpeakingTestCreator, testType:",m),l.jsx(yae,{testName:M.testName,onTestSaved:dt,onCancel:ot,onBackToCabinet:Ue,isSaving:k,validationErrors:{}})]}),m!=="matching"&&m!=="drawing"&&m!=="fillBlanks"&&m!=="speaking"&&M.numQuestions>0&&l.jsx(er,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Excel Upload"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Upload an Excel file to automatically populate questions, or fill them in manually below."}),l.jsxs("div",{className:"space-y-6",children:[m==="multipleChoice"&&mt.multipleChoice?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"multiple-choice",disabled:j,children:j?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"multiple-choice"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Multiple Choice Format:"}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[l.jsx("div",{children:"Column 1: Question"}),l.jsx("div",{children:"Column 2: Correct Answer (A-F)"}),l.jsx("div",{children:"Column 3: Option A text"}),l.jsx("div",{children:"Column 4: Option B text"}),l.jsx("div",{children:"Column 5: Option C text"}),l.jsx("div",{children:"Column 6: Option D text"})]})]})})})]}),m==="trueFalse"&&mt.trueFalse?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"true-false",disabled:j,children:j?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"true-false"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-xs text-blue-800",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Format:"})," Question | Answer (true/false)"]}),l.jsxs("div",{className:"mt-1",children:[l.jsx("strong",{children:"Example:"})," The Earth is round | true"]}),l.jsxs("div",{className:"mt-1",children:[l.jsx("strong",{children:"Note:"})," Headers are optional"]})]})})})]}),m==="input"&&mt.input?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"input",disabled:j,children:j?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"input"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Input Test Format:"}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[l.jsx("div",{children:"Column 1: Question"}),l.jsx("div",{children:"Column 2: Answer 1"}),l.jsx("div",{children:"Column 3: Answer 2 (optional)"})]})]})})})]})]})]})}),m!=="matching"&&m!=="drawing"&&m!=="fillBlanks"&&M.numQuestions>0&&l.jsx(er,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manual Question Entry"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Fill in the questions manually using the form below."})]})}),M.numQuestions>0&&l.jsx(er,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),l.jsx("div",{className:"space-y-6",children:Object.keys(M.questions).map(ee=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Question ",ee]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("textarea",{id:`question-text-${ee}`,"data-question-id":ee,"data-field":"question",value:M.questions[ee]?.question||"",onChange:je=>Xt(ee,"question",je.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Enter the question text"}),l.jsx(Bx,{onInsert:je=>{Yt(`question-text-${ee}`,je)},initialValue:M.questions[ee]?.question||"",fieldType:"question"})]})]}),m==="multipleChoice"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),l.jsx("div",{className:"space-y-2",children:M.questions[ee]?.options?.map((je,ge)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("span",{className:"w-6 text-sm font-medium text-gray-700",children:[String.fromCharCode(65+ge),":"]}),l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx("input",{type:"text",value:je,onChange:Ke=>{const tt=[...M.questions[ee].options];tt[ge]=Ke.target.value,Xt(ee,"options",tt)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Option ${String.fromCharCode(65+ge)}`}),l.jsx(Bx,{onInsert:Ke=>{const tt=[...M.questions[ee].options];tt[ge]=(tt[ge]||"")+Ke,Xt(ee,"options",tt)},initialValue:je||"",fieldType:"option"})]})]},ge))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),m==="multipleChoice"?l.jsx("div",{children:l.jsxs("select",{value:M.questions[ee]?.correctAnswer||"",onChange:je=>Xt(ee,"correctAnswer",je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),M.questions[ee]?.options?.map((je,ge)=>l.jsx("option",{value:String.fromCharCode(65+ge),children:String.fromCharCode(65+ge)},ge))]})}):m==="trueFalse"?l.jsxs("select",{value:M.questions[ee]?.correctAnswer||"",onChange:je=>Xt(ee,"correctAnswer",je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),l.jsx("option",{value:"true",children:"True"}),l.jsx("option",{value:"false",children:"False"})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s)"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:M.questions[ee]?.correct_answers?.[0]||"",onChange:je=>{const Ke=[...M.questions[ee]?.correct_answers||[""]];Ke[0]=je.target.value,Xt(ee,"correct_answers",Ke)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the primary correct answer"}),l.jsx(Bx,{onInsert:je=>{const Ke=[...M.questions[ee]?.correct_answers||[""]];Ke[0]=(Ke[0]||"")+je,Xt(ee,"correct_answers",Ke)},initialValue:M.questions[ee]?.correct_answers?.[0]||"",fieldType:"answer"})]}),M.questions[ee]?.correct_answers?.slice(1).map((je,ge)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[l.jsx("input",{type:"text",value:je,onChange:Ke=>{const tt=[...M.questions[ee]?.correct_answers||[]];tt[ge+1]=Ke.target.value,Xt(ee,"correct_answers",tt)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Alternative answer ${ge+2}`}),l.jsx(Bx,{onInsert:Ke=>{const tt=[...M.questions[ee]?.correct_answers||[]];tt[ge+1]=(tt[ge+1]||"")+Ke,Xt(ee,"correct_answers",tt)},initialValue:je||"",fieldType:"answer"})]}),l.jsx("button",{type:"button",onClick:()=>{const Ke=[...M.questions[ee]?.correct_answers||[]];Ke.splice(ge+1,1),Xt(ee,"correct_answers",Ke)},className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},ge))||[],l.jsx("button",{type:"button",onClick:()=>{const ge=[...M.questions[ee]?.correct_answers||[""],""];Xt(ee,"correct_answers",ge)},className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm border border-blue-300 rounded-md hover:bg-blue-50",children:"+ Add Alternative Answer"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"You can add multiple correct answers for the same question. Students will get credit for any of them."})]})]})]})]},ee))})]})}),M.testName&&M.numQuestions>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx(xt,{onClick:ae,disabled:k,className:"px-8",children:k?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test & Continue to Assignment"})})]}),c==="testAssignment"&&l.jsxs(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs(xt,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),l.jsx("span",{children:"Back to Main"})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Assign Test to Classes"}),l.jsx("p",{className:"text-gray-600",children:"Select which classes should take this test"})]})]}),l.jsx(xt,{variant:"outline",onClick:()=>u("formCreation"),children:" Back to Test Form"})]}),l.jsx(er,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Classes"}),x.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("p",{className:"text-gray-500 text-lg",children:"No subjects available for assignment."}),l.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You need to assign subjects to grades and classes first."}),l.jsx("div",{className:"mt-4",children:l.jsx(xt,{onClick:()=>window.location.href="/teacher/subjects",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Subjects Page"})})]}):l.jsx("div",{className:"space-y-6",children:x.map(ee=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:ee.subject}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:ee.classes.map(je=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:L.some(ge=>ge.grade===je.grade&&ge.class===je.class&&ge.subject_id===ee.subject_id),onChange:ge=>jt(je.grade,je.class,ge.target.checked,ee.subject_id,ee.subject),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsxs("span",{className:"text-sm text-gray-700",children:[je.grade,"/",je.class]})]},`${je.grade}-${je.class}-${ee.subject_id}`))})]},ee.subject_id))})]})}),L.length>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx(xt,{onClick:()=>We(m,null),disabled:v,className:"px-8",children:v?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white",className:"mr-2"}),"Assigning Test..."]}):`Assign Test to ${L.length} Class${L.length>1?"es":""}`})})]})]})}),console.log(" Checking isAssigningTest:",F),F&&l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Assigning test to classes..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your assignment"})]})}),k&&l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Saving test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we save your test"})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:t.map(ee=>l.jsx(Ou,{type:ee.type,message:ee.message,duration:ee.duration,onClose:()=>n(ee.id)},ee.id))})]})},eTe=({onDataLoaded:e,onError:t})=>{const r=Nl(),{user:n,isAuthenticated:s}=Js(),{teacherData:a,loadTeacherData:i}=g4(),[o,c]=S.useState(!0),[u,d]=S.useState(""),[f,m]=S.useState([]),[p,x]=S.useState(null),[w,v]=S.useState([]),[C,k]=S.useState([]),[b,j]=S.useState([]),[A,F]=S.useState(null),[D,M]=S.useState(0);S.useEffect(()=>{xe()},[]),S.useCallback(async fe=>{console.log(" Teacher login attempt...");try{const H=await na.teacherLogin(fe);if(H.success)return ie("Login successful!","success"),await O(),H;throw new Error(H.error||"Login failed")}catch(H){throw console.error(" Teacher login error:",H),ie("Login failed. Please check your credentials.","error"),H}},[]);const O=S.useCallback(async()=>{console.log(" Loading teacher data...");try{if(c(!0),d(""),!s||!n){console.log(" User not authenticated"),d("User not authenticated");return}if(n.role!==el.TEACHER){console.error(" Invalid user role for teacher data:",n.role),d("Access denied. Teacher role required.");return}console.log(" Fetching teacher data from service...");const fe=await na.getTeacherData();if(fe&&fe.success)console.log(" Teacher data loaded successfully:",fe),x(fe.teacher||n),fe.subjects&&(v(fe.subjects),console.log(" Teacher subjects loaded:",fe.subjects.length)),fe.grades&&k(fe.grades),fe.classes&&j(fe.classes),F(new Date),M(H=>H+1),e&&e(fe),ie("Teacher data loaded successfully!","success");else throw new Error(fe?.error||"Failed to load teacher data")}catch(fe){console.error(" Error loading teacher data:",fe);const H=fe.message||"Failed to load teacher data";d(H),t&&t(fe),ie(H,"error")}finally{c(!1)}},[s,n,e,t]),L=S.useCallback(()=>{console.log(" Returning to main cabinet..."),r("/teacher/cabinet")},[r]);S.useCallback(fe=>{console.log(" Showing main cabinet with subjects:",fe),fe&&v(fe),r("/teacher/cabinet")},[r]);const W=S.useCallback(()=>(console.log(" Rendering grade buttons..."),["M1","M2","M3","M4","M5","M6"].map(H=>({id:H,name:`Grade ${H}`,classes:re(H)}))),[]),re=S.useCallback(fe=>Array.from({length:10},(Q,U)=>U+1).map(Q=>({id:`${fe}-${Q}`,name:`Class ${Q}`,grade:fe,classNumber:Q})),[]),ie=S.useCallback((fe,H)=>{const Q={id:Date.now(),message:fe,type:H,timestamp:new Date};m(U=>[...U,Q]),setTimeout(()=>{m(U=>U.filter(V=>V.id!==Q.id))},Ym.NOTIFICATION_DURATION)},[]),xe=S.useCallback(async()=>{console.log(" Initializing teacher data..."),await O()},[O]),de=S.useCallback(async()=>{console.log(" Refreshing teacher data..."),await O()},[O]);return S.useCallback(async fe=>{console.log(" Updating teacher profile:",fe);try{const H=await na.updateUserProfile(fe);if(H.success)return x(Q=>({...Q,...fe})),ie("Profile updated successfully!","success"),H;throw new Error(H.error||"Failed to update profile")}catch(H){throw console.error(" Error updating teacher profile:",H),ie("Failed to update profile","error"),H}},[]),S.useCallback(async fe=>{console.log(" Changing teacher password...");try{const H=await na.changePassword(fe);if(H.success)return ie("Password changed successfully!","success"),H;throw new Error(H.error||"Failed to change password")}catch(H){throw console.error(" Error changing teacher password:",H),ie("Failed to change password","error"),H}},[]),o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Data..."})]})}):u?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Data Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:u}),l.jsxs("div",{className:"flex space-x-3 justify-center",children:[l.jsx(xt,{variant:"primary",onClick:de,children:"Retry"}),l.jsx(xt,{variant:"outline",onClick:L,children:"Go Back"})]})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Data"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",A?A.toLocaleString():"Never"," | Version: ",D]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(xt,{variant:"outline",onClick:de,children:"Refresh Data"}),l.jsx(xt,{variant:"outline",onClick:L,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Teacher Information"}),p?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),l.jsx("p",{className:"text-sm text-gray-900",children:p.name||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),l.jsx("p",{className:"text-sm text-gray-900",children:p.username||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),l.jsx("p",{className:"text-sm text-gray-900",children:p.email||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Role:"}),l.jsx("p",{className:"text-sm text-gray-900",children:p.role||"N/A"})]})]}):l.jsx("p",{className:"text-gray-500",children:"No teacher information available"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Subjects (",w.length,")"]}),w.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map((fe,H)=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-gray-900",children:fe.name}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:fe.description||"No description"}),fe.classes&&fe.classes.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:fe.classes.map((Q,U)=>l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[Q.grade," - ",Q.className]},U))})]})]},H))}):l.jsx("p",{className:"text-gray-500",children:"No subjects assigned"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Levels"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W().map(fe=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:fe.name}),l.jsx("div",{className:"grid grid-cols-5 gap-1",children:fe.classes.map(H=>l.jsx("button",{className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",onClick:()=>console.log("Class clicked:",H),children:H.classNumber},H.id))})]},fe.id))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Statistics"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-blue-600",children:w.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Subjects"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-green-600",children:C.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grades"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:b.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Classes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-purple-600",children:D}),l.jsx("p",{className:"text-sm text-gray-500",children:"Data Version"})]})]})]})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:f.map(fe=>l.jsx(Ou,{type:fe.type,message:fe.message,onClose:()=>m(H=>H.filter(Q=>Q.id!==fe.id))},fe.id))})]})},tTe=({onBackToCabinet:e})=>{const t=Nl(),{user:r,isAuthenticated:n}=Js(),{teacherData:s}=g4(),[a,i]=S.useState(!0),[o,c]=S.useState(""),[u,d]=S.useState([]),[f,m]=S.useState([]),[p,x]=S.useState([]),[w,v]=S.useState([]),[C,k]=S.useState(null),[b,j]=S.useState([]),[A,F]=S.useState(!1),[D,M]=S.useState(!1),[O,L]=S.useState(!1),[W,re]=S.useState(!1),[ie,xe]=S.useState(null),[de,fe]=S.useState(!0),[H,Q]=S.useState(null);S.useEffect(()=>{Ze()},[]),S.useCallback(yt=>{console.log(" Rendering existing subjects:",yt),m(yt)},[]);const U=S.useCallback(()=>{console.log(" Showing subject selection prompt..."),F(!0),fe(!1),V()},[]),V=S.useCallback(async()=>{console.log(" Loading existing subjects...");try{const yt=await na.getTeacherSubjects();yt.success&&yt.subjects&&yt.subjects.length>0?(console.log(" Existing subjects found:",yt.subjects),X(yt.subjects)):(console.log(" No existing subjects found"),v([]))}catch(yt){console.error(" Error loading existing subjects:",yt),St("Failed to load existing subjects","error")}},[]),X=S.useCallback(yt=>{console.log(" Rendering subject selection:",yt);const Rt=[];yt.forEach(At=>{At.classes&&Array.isArray(At.classes)&&At.classes.forEach(wt=>{Rt.push({id:`${At.subject_id}-${wt.grade}-${wt.class}`,subjectId:At.subject_id,subjectName:At.subject,grade:wt.grade,class:wt.class,displayText:`${At.subject} - ${wt.grade}/${wt.class}`})})}),v(Rt),console.log(" Processed subjects for selection:",Rt)},[]),z=S.useCallback(async yt=>{if(console.log(" Saving teacher subjects:",yt),!yt||yt.length===0){St("Please select at least one subject and class combination.","warning");return}try{const Rt=yt.reduce((wt,Ft)=>{const or=wt.find(dr=>dr.subject_id===Ft.subjectId);return or?or.classes.push({grade:Ft.grade,class:Ft.class}):wt.push({subject_id:Ft.subjectId,classes:[{grade:Ft.grade,class:Ft.class}]}),wt},[]);console.log(" Transformed data for backend:",Rt);const At=await na.saveTeacherSubjects(Rt);if(At.success)St("Subjects saved successfully!","success"),F(!1),fe(!0),Q(new Date),await V();else throw new Error(At.error||"Failed to save subjects")}catch(Rt){console.error(" Error saving subjects:",Rt),St("Error saving subjects. Please try again.","error")}},[]),K=S.useCallback(()=>{console.log(" Toggling subject dropdown..."),M(yt=>!yt),L(!1)},[]),te=S.useCallback(async()=>{console.log(" Loading subjects for dropdown...");try{const yt=await na.getAllSubjects();if(yt.success)x(yt.subjects||[]),console.log(" Available subjects loaded:",yt.subjects?.length||0);else throw new Error(yt.error||"Failed to load subjects")}catch(yt){console.error(" Error loading subjects for dropdown:",yt),St("Failed to load subjects","error")}},[]),se=S.useCallback(yt=>{console.log(" Subject selected:",yt);const Rt=p.find(At=>At.subject_id===parseInt(yt));Rt&&(k(Rt),L(!0),M(!1),pe())},[p]),pe=S.useCallback(()=>{console.log(" Loading grades and classes...")},[]),oe=S.useCallback((yt,Rt)=>{console.log(" Saving classes for subject:",yt,Rt);const At={id:`${yt.subject_id}-${Date.now()}`,subjectId:yt.subject_id,subjectName:yt.subject,grade:Rt.grade,class:Rt.class,displayText:`${yt.subject} - ${Rt.grade}/${Rt.class}`};v(wt=>[...wt,At]),k(null),j([]),L(!1),we(`Added ${yt.subject} for ${Rt.grade}/${Rt.class}`)},[]),ye=S.useCallback(()=>{console.log(" Resetting subject selection..."),k(null),j([]),M(!1),L(!1)},[]),we=S.useCallback(yt=>{console.log(" Showing message:",yt),St(yt,"success")},[]),Se=S.useCallback(yt=>{console.log(" Showing confirmation modal:",yt),xe(yt),re(!0)},[]),Ie=S.useCallback(()=>{console.log(" Hiding confirmation modal..."),re(!1),xe(null)},[]),me=S.useCallback(()=>{console.log(" Confirming save subjects..."),Ie(),z(w)},[w,z,Ie]),_e=S.useCallback(()=>{console.log(" Cancelling save subjects..."),Ie()},[Ie]),We=S.useCallback(yt=>{console.log(" Removing subject:",yt),v(Rt=>Rt.filter(At=>At.id!==yt)),St("Subject removed","info")},[]);S.useCallback(()=>{console.log(" Showing edit subjects button..."),fe(!0)},[]),S.useCallback(()=>{console.log(" Hiding edit subjects button..."),fe(!1)},[]);const Ue=S.useCallback(yt=>{console.log(" Generating class buttons for grade:",yt);let Rt;return yt===1||yt===2?Rt=["15","16"]:yt===3?Rt=["15","16"]:yt===4?Rt=["13","14"]:yt===5||yt===6?Rt=["13","14"]:Rt=[],Rt.map(At=>({id:`${yt}-${At}`,grade:yt,class:At,displayText:`${yt}/${At}`}))},[]);S.useCallback((yt,Rt)=>{console.log(" Showing class results:",yt,Rt),t("/teacher/results")},[t]);const St=S.useCallback((yt,Rt)=>{const At={id:Date.now(),message:yt,type:Rt,timestamp:new Date};d(wt=>[...wt,At]),setTimeout(()=>{d(wt=>wt.filter(Ft=>Ft.id!==At.id))},Ym.NOTIFICATION_DURATION)},[]),Ze=S.useCallback(async()=>{console.log(" Initializing teacher subjects...");try{if(i(!0),c(""),!n||!r){console.log(" User not authenticated"),c("User not authenticated");return}if(r.role!==el.TEACHER){console.error(" Invalid user role for teacher subjects:",r.role),c("Access denied. Teacher role required.");return}await V(),await te(),console.log(" Teacher subjects initialization complete!")}catch(yt){console.error(" Error initializing teacher subjects:",yt),c("Failed to initialize teacher subjects")}finally{i(!1)}},[n,r,V,te]),Kt=S.useCallback(()=>{e?e():t("/teacher/cabinet")},[e,t]);return a?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Subjects..."})]})}):o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Subjects Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:o}),l.jsx(xt,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subject Management"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",H?H.toLocaleString():"Never"]})]}),l.jsxs("div",{className:"flex space-x-3",children:[de&&l.jsx(xt,{variant:"primary",onClick:U,children:"Edit Subjects"}),l.jsx(xt,{variant:"outline",onClick:Kt,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[!A&&l.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Assigned Subjects"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your teaching subjects and class assignments"})]}),l.jsx("div",{className:"flex space-x-3",children:l.jsxs(xt,{variant:"primary",onClick:U,className:"px-6 py-2",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Subjects"]})})]}),f.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((yt,Rt)=>l.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:yt.subject}),yt.classes&&yt.classes.length>0&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Assigned Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:yt.classes.map((At,wt)=>l.jsxs("span",{className:"px-3 py-1 bg-blue-500 text-white text-sm font-medium rounded-full",children:["Grade ",At.grade," - Class ",At.class]},wt))})]})]}),l.jsx("div",{className:"ml-4",children:l.jsx(xt,{variant:"outline",size:"sm",onClick:()=>We(yt.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})},Rt))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:l.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned yet"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your teaching subjects and class assignments"}),l.jsxs(xt,{variant:"primary",onClick:U,className:"px-6 py-3",children:[l.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Subject"]})]})]}),A&&l.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Subjects and Classes"}),l.jsx("p",{className:"text-gray-600",children:"Choose the subjects you want to teach and assign them to specific classes"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-lg font-semibold text-gray-900",children:"Select Subject"}),l.jsx("p",{className:"text-gray-600",children:"Choose the subject you want to teach"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs(xt,{variant:"outline",onClick:K,className:"w-full justify-between p-4 h-auto text-left border-2 border-gray-200 hover:border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white rounded-xl shadow-sm",children:[l.jsx("span",{className:"text-gray-900 font-medium",children:C?C.subject:"Select a subject"}),l.jsx("svg",{className:"w-5 h-5 ml-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),D&&l.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:p.map(yt=>l.jsx("button",{onClick:()=>se(yt.subject_id),className:"w-full px-4 py-4 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:l.jsx("span",{className:"text-gray-900 font-medium",children:yt.subject})},yt.subject_id))})]})]}),O&&C&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Classes for ",C.subject]}),l.jsx("p",{className:"text-gray-600",children:"Choose which classes you want to teach this subject to"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(yt=>l.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2",children:l.jsx("span",{className:"text-white font-bold text-xs",children:yt})}),l.jsxs("h4",{className:"font-semibold text-gray-900",children:["Grade ",yt]})]}),l.jsx("div",{className:"space-y-3",children:Ue(yt).map(Rt=>l.jsx(xt,{variant:"outline",size:"sm",onClick:()=>oe(C,Rt),className:"w-full text-sm py-2 px-4 border-green-300 hover:border-green-400 hover:bg-green-100 focus:ring-2 focus:ring-green-500 rounded-lg font-medium",children:Rt.displayText},Rt.id))})]},yt))})]}),w.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Selected Subjects"}),l.jsx("p",{className:"text-gray-600",children:"Review your subject and class selections"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map(yt=>l.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4 hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex-1",children:l.jsx("span",{className:"text-sm font-semibold text-purple-900",children:yt.displayText})}),l.jsx(xt,{variant:"outline",size:"sm",onClick:()=>We(yt.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300 focus:ring-2 focus:ring-red-500 rounded-lg",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},yt.id))})]}),l.jsxs("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-100",children:[l.jsx("div",{className:"text-sm text-gray-500",children:w.length>0?`${w.length} subject${w.length>1?"s":""} selected`:"No subjects selected"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs(xt,{variant:"outline",onClick:()=>{F(!1),fe(!0),ye()},className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 rounded-xl",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),l.jsxs(xt,{variant:"primary",onClick:()=>Se({type:"save",data:w}),disabled:w.length===0,className:"px-8 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),O?"Next: Select Classes":"Save Subjects"]})]})]})]})]})]})}),W&&l.jsx(Ka,{isOpen:W,onClose:Ie,title:"Confirm Save",variant:"confirmation",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to save ",ie?.data?.length||0," subject assignments?"]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx(xt,{variant:"outline",onClick:_e,children:"Cancel"}),l.jsx(xt,{variant:"primary",onClick:me,children:"Save"})]})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:u.map(yt=>l.jsx(Ou,{type:yt.type,message:yt.message,onClose:()=>d(Rt=>Rt.filter(At=>At.id!==yt.id))},yt.id))})]})},rTe=()=>{const{user:e,role:t,isAuthenticated:r,isLoading:n}=Js(),[s,a]=S.useState("cabinet");return!r||t!=="teacher"?l.jsx(pp,{to:"/login",replace:!0}):n?l.jsxs("div",{className:"teacher-app-loading",children:[l.jsx(pn,{}),l.jsx("p",{children:"Loading teacher interface..."})]}):l.jsx("div",{className:"teacher-app",children:l.jsxs(Tk,{children:[l.jsx(Na,{path:"/",element:l.jsx(MD,{})}),l.jsx(Na,{path:"/cabinet",element:l.jsx(MD,{})}),l.jsx(Na,{path:"/tests",element:l.jsx(FD,{})}),l.jsx(Na,{path:"/tests/create",element:l.jsx(FD,{})}),l.jsx(Na,{path:"/data",element:l.jsx(eTe,{})}),l.jsx(Na,{path:"/subjects",element:l.jsx(tTe,{})}),l.jsx(Na,{path:"/results",element:l.jsx(wU,{})}),l.jsx(Na,{path:"*",element:l.jsx(pp,{to:"/teacher",replace:!0})})]})})},lt={container:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",mainContainer:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",header:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg",headerContent:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",headerFlex:"flex justify-between items-center",adminInfo:"flex items-center space-x-4",adminAvatar:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",adminText:"text-lg sm:text-xl md:text-2xl font-bold text-white",adminSubtext:"text-purple-100 text-sm sm:text-base md:text-lg",menuContainer:"relative admin-menu",menuButton:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",menuDropdown:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",menuItem:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-purple-50 transition-colors",menuItemLogout:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",cardContainer:"bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",cardHeader:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",cardTitle:"text-xl font-bold text-gray-800",cardBody:"p-6",buttonGroup:"flex flex-wrap gap-3 mb-6",buttonPrimary:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200",buttonSecondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium px-4 py-2 rounded-lg transition-colors duration-200",formContainer:"bg-gray-50 rounded-lg p-6 border border-gray-200",formGrid:"grid grid-cols-1 md:grid-cols-2 gap-4",formGroup:"space-y-2",formLabel:"block text-sm font-medium text-gray-700",formInput:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors duration-200",formCheckbox:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",formActions:"flex space-x-3 pt-4",table:"min-w-full divide-y divide-gray-200",tableHeader:"bg-gray-50",tableHeaderCell:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",tableBody:"bg-white divide-y divide-gray-200",tableRow:"hover:bg-gray-50 transition-colors duration-150",tableCell:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",statusActive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",statusInactive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",modalOverlay:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",modalContent:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",modalTitle:"text-xl font-semibold text-gray-900 mb-4",modalActions:"flex space-x-3 pt-4"},nTe=()=>{const{user:e,isAdmin:t,logout:r}=Js(),{get:n,post:s,delete:a}=Zl(),i=S.useCallback(async()=>{try{m({type:"info",message:"Checking for overdue assignments..."});const Pe=await s("/.netlify/functions/check-overdue-assignments",{});if(Pe&&Pe.success){const Ut=Pe.overdue_count||0;Ut>0?m({type:"success",message:`Found and marked ${Ut} overdue assignments as inactive.`}):m({type:"info",message:"No overdue assignments found."})}else m({type:"error",message:Pe?.error||"Failed to check assignments"})}catch(Pe){m({type:"error",message:"Failed to check assignments"}),console.error("Check overdue assignments error:",Pe)}},[s]),[o,c]=S.useState(!1),[u,d]=S.useState(null),[f,m]=S.useState(null),[p,x]=S.useState(!1),[w,v]=S.useState(!1),[C,k]=S.useState(!1),[b,j]=S.useState(!1),[A,F]=S.useState(""),[D,M]=S.useState(null),[O,L]=S.useState({}),[W,re]=S.useState(null),[ie,xe]=S.useState({}),[de,fe]=S.useState(null),[H,Q]=S.useState({}),[U,V]=S.useState([]),[X,z]=S.useState(""),[K,te]=S.useState(""),[se,pe]=S.useState(""),[oe,ye]=S.useState("all"),[we,Se]=S.useState(!0),[Ie,me]=S.useState(!1),[_e,We]=S.useState([]),[Ue,St]=S.useState(""),[Ze,Kt]=S.useState(""),[yt,Rt]=S.useState(""),[At,wt]=S.useState(new Set),[Ft,or]=S.useState(!1),[dr,nr]=S.useState(!1),[Xe,Qe]=S.useState([]),[ut,mt]=S.useState([]),[ht,Ot]=S.useState([]),[nt,sr]=S.useState([]),[kr,Er]=S.useState(!1),[Gr,Ar]=S.useState(!1),[vr,Ee]=S.useState(!1),[Be,qe]=S.useState(!1),[Ye,Lt]=S.useState({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),[ze,it]=S.useState({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),[Le,st]=S.useState({subject_id:"",subject:"",description:"",is_active:!0}),[rt,qt]=S.useState({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""});S.useEffect(()=>{console.log(" AdminCabinet component mounted - initializing..."),Xt()},[]),S.useEffect(()=>{const Pe=Ut=>{Ft&&!Ut.target.closest(".admin-menu")&&or(!1)};return document.addEventListener("mousedown",Pe),()=>{document.removeEventListener("mousedown",Pe)}},[Ft]);const Xt=S.useCallback(async()=>{try{c(!0),await jt(),console.log("Admin app initialized")}catch(Pe){d("Failed to initialize admin app"),console.error("Admin app initialization error:",Pe)}finally{c(!1)}},[]),Yt=S.useCallback(()=>{or(Pe=>!Pe)},[]),Z=S.useCallback(()=>{nr(!0),or(!1)},[]),ae=S.useCallback(()=>{nr(!1)},[]),jt=S.useCallback(async()=>{try{await Promise.all([G(),ue(),Ce(),be()])}catch(Pe){console.error("Error loading admin data:",Pe),d("Failed to load admin data")}},[]),G=S.useCallback(async()=>{try{const Pe="admin_users_",Ut=ja(Pe);if(Ut){console.log(" Using cached users data"),Qe(Ut);return}const Vr=await n("/.netlify/functions/get-all-users");console.log(" Users response:",Vr);const Xr=Vr.users||[];Qe(Xr),ha(Pe,Xr,Aa.admin_users),console.log(" Users set to state:",Xr)}catch(Pe){console.error("Error loading users:",Pe)}},[n]),ue=S.useCallback(async()=>{try{const Pe="admin_teachers_",Ut=ja(Pe);if(Ut){console.log(" Using cached teachers data"),mt(Ut);return}const Vr=await n("/.netlify/functions/get-all-teachers");console.log(" Teachers response:",Vr);const Xr=Vr.teachers||[];mt(Xr),ha(Pe,Xr,Aa.admin_teachers),console.log(" Teachers set to state:",Xr)}catch(Pe){console.error("Error loading teachers:",Pe)}},[n]),Ce=S.useCallback(async()=>{try{const Pe="admin_subjects_",Ut=ja(Pe);if(Ut){console.log(" Using cached subjects data"),Ot(Ut);return}const Vr=await n("/.netlify/functions/get-all-subjects");console.log(" Subjects response:",Vr);const Xr=Vr.subjects||[];Ot(Xr),ha(Pe,Xr,Aa.admin_subjects),console.log(" Subjects set to state:",Xr)}catch(Pe){console.error("Error loading subjects:",Pe)}},[n]),be=S.useCallback(async()=>{try{const Pe="admin_academic_years_",Ut=ja(Pe);if(Ut){console.log(" Using cached academic years data"),sr(Ut);return}const Vr=await Iu.loadAcademicCalendar();Vr&&Array.isArray(Vr)?(sr(Vr),ha(Pe,Vr,Aa.admin_academic_years)):console.error("Failed to load academic calendar")}catch(Pe){console.error("Error loading academic year:",Pe)}},[]),Me=S.useCallback(async()=>{try{if(j(!b),!b){const Pe=Date.now(),[Ut,Vr]=await Promise.all([n(`/.netlify/functions/get-all-tests?t=${Pe}`),n(`/.netlify/functions/get-test-assignments?t=${Pe}`)]);console.log(" Active tests response:",Ut),console.log(" Assignments response:",Vr);const Xr=Ut.tests||[],Dn=(Vr.assignments||[]).reduce((Pt,tr)=>{const Jt=`${tr.test_type}-${tr.test_id}`;return Pt[Jt]||(Pt[Jt]=[]),Pt[Jt].push(tr),Pt},{}),Je=Xr.map(Pt=>{const tr=`${Pt.test_type}-${Pt.test_id}`,Jt=Dn[tr]||[],Bn=Jt.some(vt=>vt.is_active);return{...Pt,is_active:Bn,assignments:Jt}});V(Je),console.log(" All tests with status set to state:",Je)}}catch(Pe){console.error("Error loading tests:",Pe),m({type:"error",message:"Failed to load tests"})}},[n,b]),De=S.useCallback((Pe,Ut)=>{Lt(Vr=>({...Vr,[Pe]:Ut}))},[]),Ve=S.useCallback((Pe,Ut)=>{it(Vr=>({...Vr,[Pe]:Ut}))},[]),bt=S.useCallback((Pe,Ut)=>{st(Vr=>({...Vr,[Pe]:Ut}))},[]);S.useCallback(()=>{console.log(" Testing local storage...");try{const Pe={test:"data",timestamp:Date.now()};localStorage.setItem("test",JSON.stringify(Pe));const Ut=JSON.parse(localStorage.getItem("test"));console.log(" Local storage test successful:",Ut),m({type:"success",message:"Local storage test successful"})}catch(Pe){console.error(" Local storage test failed:",Pe),m({type:"error",message:"Local storage test failed"})}},[]),S.useCallback(()=>{console.log(" Clearing local storage...");try{localStorage.clear(),console.log(" Local storage cleared"),m({type:"success",message:"Local storage cleared"})}catch(Pe){console.error(" Error clearing local storage:",Pe),m({type:"error",message:"Error clearing local storage"})}},[]),S.useCallback(async()=>{console.log(" Checking teacher subjects...");try{const Ut=(await n("/.netlify/functions/get-all-teachers")).data||[];console.log(" Teachers data:",Ut),m({type:"success",message:`Found ${Ut.length} teachers`})}catch(Pe){console.error(" Error checking teacher subjects:",Pe),m({type:"error",message:"Error checking teacher subjects"})}},[n]);const ot=S.useCallback(async Pe=>{Pe.preventDefault();try{console.log(" Submitting user:",Ye);const Ut=await s("/.netlify/functions/add-user",Ye);Ut.success?(m({type:"success",message:"User added successfully"}),Er(!1),Lt({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),G()):m({type:"error",message:Ut.message||"Failed to add user"})}catch(Ut){console.error(" Error adding user:",Ut),m({type:"error",message:"Error adding user"})}},[Ye,s,G]),dt=S.useCallback(async Pe=>{Pe.preventDefault();try{console.log(" Submitting teacher:",ze);const Ut=await s("/.netlify/functions/add-teacher",ze);Ut.success?(m({type:"success",message:"Teacher added successfully"}),Ar(!1),it({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),ue()):m({type:"error",message:Ut.message||"Failed to add teacher"})}catch(Ut){console.error(" Error adding teacher:",Ut),m({type:"error",message:"Error adding teacher"})}},[ze,s,ue]),ee=S.useCallback(async Pe=>{Pe.preventDefault();try{console.log(" Submitting subject:",Le);const Ut=await s("/.netlify/functions/add-subject",Le);Ut.success?(m({type:"success",message:"Subject added successfully"}),Ee(!1),st({subject_id:"",subject:"",description:"",is_active:!0}),Ce()):m({type:"error",message:Ut.message||"Failed to add subject"})}catch(Ut){console.error(" Error adding subject:",Ut),m({type:"error",message:"Error adding subject"})}},[Le,s,Ce]),je=S.useCallback(Pe=>{M(Pe),L({name:Pe.name||"",surname:Pe.surname||"",grade:Pe.grade||"",class:Pe.class||"",student_id:Pe.student_id||"",nickname:Pe.nickname||"",password:Pe.password||"",is_active:Pe.is_active!==void 0?Pe.is_active:!0})},[]),ge=S.useCallback(async()=>{try{const Pe=[];Object.keys(O).forEach(Ut=>{Ut!=="student_id"&&O[Ut]!==D[Ut]&&Pe.push({fieldName:Ut,newValue:O[Ut]})});for(const Ut of Pe)await s("/.netlify/functions/update-user",{userId:D.student_id,fieldName:Ut.fieldName,newValue:Ut.newValue});m({type:"success",message:"User updated successfully!"}),M(null),L({}),G()}catch{m({type:"error",message:"Failed to update user"})}},[O,D,s,G]),Ke=S.useCallback(async Pe=>{if(window.confirm("Are you sure you want to delete this user?"))try{(await s("/.netlify/functions/delete-user",{userId:Pe})).success&&(m({type:"success",message:"User deleted successfully!"}),G())}catch{m({type:"error",message:"Failed to delete user"})}},[s,G]),tt=S.useCallback(Pe=>{re(Pe),xe({teacher_id:Pe.teacher_id||"",username:Pe.username||"",password:Pe.password||"",first_name:Pe.first_name||"",last_name:Pe.last_name||"",is_active:Pe.is_active!==void 0?Pe.is_active:!0})},[]),Tt=S.useCallback(async()=>{try{const Pe=[];Object.keys(ie).forEach(Ut=>{Ut!=="teacher_id"&&ie[Ut]!==W[Ut]&&Pe.push({fieldName:Ut,newValue:ie[Ut]})});for(const Ut of Pe)await s("/.netlify/functions/update-teacher",{teacherId:W.teacher_id,fieldName:Ut.fieldName,newValue:Ut.newValue});m({type:"success",message:"Teacher updated successfully!"}),re(null),xe({}),ue()}catch{m({type:"error",message:"Failed to update teacher"})}},[ie,W,s,ue]),cr=S.useCallback(async Pe=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{(await s("/.netlify/functions/delete-teacher",{teacherId:Pe})).success&&(m({type:"success",message:"Teacher deleted successfully!"}),ue())}catch{m({type:"error",message:"Failed to delete teacher"})}},[s,ue]),Vt=S.useCallback(Pe=>{fe(Pe),Q({subject_id:Pe.subject_id||"",subject:Pe.subject||""})},[]),$t=S.useCallback(async()=>{try{const Pe=[];Object.keys(H).forEach(Ut=>{Ut!=="subject_id"&&H[Ut]!==de[Ut]&&Pe.push({fieldName:Ut,newValue:H[Ut]})});for(const Ut of Pe)await s("/.netlify/functions/update-subject",{subjectId:de.subject_id,fieldName:Ut.fieldName,newValue:Ut.newValue});m({type:"success",message:"Subject updated successfully!"}),fe(null),Q({}),Ce()}catch{m({type:"error",message:"Failed to update subject"})}},[H,de,s,Ce]),mr=S.useCallback(async Pe=>{if(window.confirm("Are you sure you want to delete this subject?"))try{const Ut=await s("/.netlify/functions/delete-subject",{subjectId:Pe});Ut.success?(m({type:"success",message:"Subject deleted successfully!"}),Ce()):m({type:"error",message:Ut.message||"Failed to delete subject"})}catch{m({type:"error",message:"Failed to delete subject"})}},[s,Ce]),Zr=S.useCallback((Pe,Ut)=>{qt(Vr=>({...Vr,[Pe]:Ut}))},[]),jr=S.useCallback(async Pe=>{if(Pe.preventDefault(),!rt.startDate||!rt.endDate||!rt.teacherId){m({type:"error",message:"Please fill in all required fields (Start Date, End Date, Teacher ID)"});return}if(window.confirm("Are you sure you want to delete all test data for the selected criteria? This action cannot be undone."))try{const Ut=await s("/.netlify/functions/delete-test-data",rt);Ut.success?(m({type:"success",message:`Successfully deleted ${Ut.deletedCount} test records!`}),qe(!1),qt({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""})):m({type:"error",message:Ut.message||"Failed to delete test data"})}catch{m({type:"error",message:"Failed to delete test data"})}},[rt,s]),Pr=S.useCallback(async(Pe,Ut,Vr)=>{try{const Xr=Date.now(),xs=await n(`/.netlify/functions/get-test-assignments?t=${Xr}`);if(xs.success&&xs.assignments){const Dn=xs.assignments.filter(Je=>Je.test_id===parseInt(Pe)&&Je.test_type===Ut);if(Dn.length===0){m({type:"error",message:"No assignments found for this test"});return}for(const Je of Dn){const Pt=await s("/.netlify/functions/remove-assignment",{teacher_id:Vr,assignment_id:Je.assignment_id,test_type:Ut,test_id:Pe});if(!Pt.success){m({type:"error",message:`Failed to complete test: ${Pt.message}`});return}}m({type:"success",message:"Test marked as complete successfully!"}),await Me()}else m({type:"error",message:"Failed to get test assignments"})}catch(Xr){console.error("Error completing test:",Xr),m({type:"error",message:"Failed to complete test"})}},[s,n,Me]),xn=S.useCallback(async(Pe,Ut,Vr)=>{try{const Xr=Date.now(),xs=await n(`/.netlify/functions/get-test-assignments?t=${Xr}`);if(xs.success&&xs.assignments){const Dn=xs.assignments.filter(Je=>Je.test_id===parseInt(Pe)&&Je.test_type===Ut);if(Dn.length===0){m({type:"error",message:"No assignments found for this test"});return}for(const Je of Dn){const Pt=await s("/.netlify/functions/remove-assignment",{teacher_id:Vr,assignment_id:Je.assignment_id,test_type:Ut,test_id:Pe,mark_active:!0});if(!Pt.success){m({type:"error",message:`Failed to reactivate test: ${Pt.message}`});return}}m({type:"success",message:"Test marked as active successfully!"}),await Me()}else m({type:"error",message:"Failed to get test assignments"})}catch(Xr){console.error("Error reactivating test:",Xr),m({type:"error",message:"Failed to reactivate test"})}},[s,n,Me]),Kr=S.useCallback(async(Pe=!1)=>{try{const Ut=Date.now(),Vr=await n(`/.netlify/functions/get-all-tests?t=${Ut}`);console.log(" Actual tests response:",Vr),We(Vr.tests||[]),console.log(" Actual tests set to state:",Vr.tests||[])}catch(Ut){console.error("Error loading actual tests:",Ut),m({type:"error",message:"Failed to load tests"})}},[n]),Ir=S.useCallback(async(Pe,Ut,Vr)=>{try{const Xr=await s("/.netlify/functions/delete-test",{test_id:Pe,test_type:Ut,teacher_id:Vr});if(Xr.success){m({type:"success",message:"Test deleted successfully!"});const xs=`${Ut}-${Pe}-${Vr}`;wt(Dn=>{const Je=new Set(Dn);return Je.delete(xs),Je}),await Kr(!0)}else m({type:"error",message:`Failed to delete test: ${Xr.message}`})}catch(Xr){console.error("Error deleting test:",Xr),m({type:"error",message:"Failed to delete test"})}},[s,Kr]),Os=S.useCallback((Pe,Ut,Vr)=>{const Xr=`${Ut}-${Pe}-${Vr}`;wt(xs=>{const Dn=new Set(xs);return Dn.has(Xr)?Dn.delete(Xr):Dn.add(Xr),Dn})},[]),Yn=A?Xe.filter(Pe=>Pe.grade.toString()===A):Xe,Vn=U.filter(Pe=>{const Ut=oe==="all"?!0:oe==="active"?Pe.is_active:!Pe.is_active,Vr=!X||Pe.teacher_id===X,Xr=!K||new Date(Pe.created_at)>=new Date(K),xs=!se||new Date(Pe.created_at)<=new Date(se+"T23:59:59");return Ut&&Vr&&Xr&&xs}),ts=_e.filter(Pe=>{const Ut=!Ue||Pe.teacher_id===Ue,Vr=!Ze||new Date(Pe.created_at)>=new Date(Ze),Xr=!yt||new Date(Pe.created_at)<=new Date(yt+"T23:59:59");return Ut&&Vr&&Xr}),Bs=S.useCallback(()=>{if(At.size===ts.length&&ts.length>0)wt(new Set);else{const Pe=ts.map(Ut=>`${Ut.test_type}-${Ut.test_id}-${Ut.teacher_id}`);wt(new Set(Pe))}},[At.size,ts]),hn=S.useCallback(async()=>{if(At.size!==0&&window.confirm(`Are you sure you want to delete ${At.size} test(s)?`))try{const Pe=Array.from(At).map(Ut=>{const[Vr,Xr,xs]=Ut.split("-");return s("/.netlify/functions/delete-test",{test_id:parseInt(Xr),test_type:Vr,teacher_id:xs})});await Promise.all(Pe),m({type:"success",message:`Successfully deleted ${At.size} test(s)!`}),wt(new Set),await Kr(!0)}catch(Pe){console.error("Error deleting marked tests:",Pe),m({type:"error",message:"Failed to delete some tests. Please try again."})}},[At,s,Kr]);return l.jsxs(Nt.div,{id:"admin-cabinet-main",className:lt.container,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(Nt.div,{className:lt.header,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:lt.headerContent,children:l.jsxs("div",{className:lt.headerFlex,children:[l.jsxs(Nt.div,{className:lt.adminInfo,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(Nt.div,{className:lt.adminAvatar,initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:l.jsx("span",{className:"text-white font-semibold text-xl",children:e?.username?.charAt(0)||"A"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:lt.adminText,children:e?.username||"Administrator"}),l.jsx("p",{className:lt.adminSubtext,children:"Administrator Dashboard"})]})]}),l.jsxs(Nt.div,{className:lt.menuContainer,initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsxs("button",{onClick:Yt,className:lt.menuButton,style:{zIndex:1e3},children:[l.jsx("span",{className:"hidden sm:inline",children:"Menu"}),l.jsx(Nt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:Ft?180:0},transition:{duration:.2},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),l.jsx(wl,{children:Ft&&l.jsx(Nt.div,{className:lt.menuDropdown,initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:l.jsxs("div",{className:"py-2",children:[l.jsx(Nt.button,{onClick:Z,className:lt.menuItem,whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),l.jsx(Nt.button,{onClick:()=>{Yt(),r()},className:lt.menuItemLogout,whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),o&&l.jsx(pn,{text:"Loading..."}),u&&l.jsx(Ou,{type:"error",message:u,onClose:()=>d(null)}),f&&l.jsx(Ou,{type:f.type,message:f.message,onClose:()=>m(null)}),dr&&l.jsx("div",{className:lt.modalOverlay,children:l.jsxs("div",{className:lt.modalContent,children:[l.jsx("h2",{className:lt.modalTitle,children:"Change Password"}),l.jsxs("form",{className:"space-y-4",children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{htmlFor:"currentPassword",className:lt.formLabel,children:"Current Password"}),l.jsx("input",{type:"password",id:"currentPassword",className:lt.formInput})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{htmlFor:"newPassword",className:lt.formLabel,children:"New Password"}),l.jsx("input",{type:"password",id:"newPassword",className:lt.formInput})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{htmlFor:"confirmPassword",className:lt.formLabel,children:"Confirm New Password"}),l.jsx("input",{type:"password",id:"confirmPassword",className:lt.formInput})]}),l.jsxs("div",{className:lt.modalActions,children:[l.jsx(xt,{type:"button",variant:"secondary",onClick:ae,className:"flex-1",children:"Cancel"}),l.jsx(xt,{type:"submit",variant:"primary",className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Change Password"})]})]})]})}),l.jsx(Nt.div,{className:lt.mainContainer,initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:l.jsxs(er,{className:lt.cardContainer,children:[l.jsx(er.Header,{className:lt.cardHeader,children:l.jsx(er.Title,{className:lt.cardTitle,children:"User Management"})}),l.jsxs(er.Body,{className:lt.cardBody,children:[l.jsxs("div",{className:lt.buttonGroup,children:[l.jsx(xt,{variant:"primary",onClick:()=>Er(!0),className:lt.buttonPrimary,children:"Add User"}),l.jsx(xt,{variant:"secondary",onClick:()=>{G(),x(!p)},className:lt.buttonSecondary,children:p?"Hide Users Table":"Get All Users "})]}),l.jsx(wl,{children:kr&&l.jsxs(Nt.div,{className:lt.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New User"}),l.jsxs("form",{onSubmit:ot,className:"space-y-4",children:[l.jsxs("div",{className:lt.formGrid,children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Grade"}),l.jsx("input",{type:"text",value:Ye.grade,onChange:Pe=>De("grade",Pe.target.value),className:lt.formInput,placeholder:"Enter grade"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Class"}),l.jsx("input",{type:"text",value:Ye.class,onChange:Pe=>De("class",Pe.target.value),className:lt.formInput,placeholder:"Enter class"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Number"}),l.jsx("input",{type:"text",value:Ye.number,onChange:Pe=>De("number",Pe.target.value),className:lt.formInput,placeholder:"Enter number"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Student ID"}),l.jsx("input",{type:"text",value:Ye.student_id,onChange:Pe=>De("student_id",Pe.target.value),className:lt.formInput,placeholder:"Enter student ID"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Name"}),l.jsx("input",{type:"text",value:Ye.name,onChange:Pe=>De("name",Pe.target.value),className:lt.formInput,placeholder:"Enter name"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Surname"}),l.jsx("input",{type:"text",value:Ye.surname,onChange:Pe=>De("surname",Pe.target.value),className:lt.formInput,placeholder:"Enter surname"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Nickname"}),l.jsx("input",{type:"text",value:Ye.nickname,onChange:Pe=>De("nickname",Pe.target.value),className:lt.formInput,placeholder:"Enter nickname"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Password"}),l.jsx("input",{type:"password",value:Ye.password,onChange:Pe=>De("password",Pe.target.value),className:lt.formInput,placeholder:"Enter password"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"userActive",checked:Ye.is_active,onChange:Pe=>De("is_active",Pe.target.checked),className:lt.formCheckbox}),l.jsx("label",{htmlFor:"userActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),l.jsxs("div",{className:lt.formActions,children:[l.jsx(xt,{type:"button",variant:"secondary",onClick:()=>Er(!1),className:lt.buttonSecondary,children:"Cancel"}),l.jsx(xt,{type:"submit",variant:"primary",className:lt.buttonPrimary,children:"Add User"})]})]})]})}),p&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Users (",Yn.length," of ",Xe.length,")"]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Filter by Grade:"}),l.jsxs("select",{value:A,onChange:Pe=>F(Pe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Grades"}),[...new Set(Xe.map(Pe=>Pe.grade))].sort().map(Pe=>l.jsxs("option",{value:Pe,children:["Grade ",Pe]},Pe))]})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:lt.tableHeaderCell,children:"Name"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Grade"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Class"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Student ID"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Number"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Nickname"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:Yn.map((Pe,Ut)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsxs("td",{className:lt.tableCell,children:[Pe.name," ",Pe.surname]}),l.jsx("td",{className:lt.tableCell,children:Pe.grade}),l.jsx("td",{className:lt.tableCell,children:Pe.class}),l.jsx("td",{className:lt.tableCell,children:Pe.student_id}),l.jsx("td",{className:lt.tableCell,children:Pe.number}),l.jsx("td",{className:lt.tableCell,children:Pe.nickname}),l.jsx("td",{className:lt.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>je(Pe),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>Ke(Pe.student_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},Pe.id||Ut))})]})})})]})]})]})}),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsxs(er,{className:lt.cardContainer,children:[l.jsxs(er.Header,{className:lt.cardHeader,children:[l.jsx(er.Title,{className:lt.cardTitle,children:"Teacher Management"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:i,className:"px-3 py-1.5 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors text-xs whitespace-nowrap",title:"Check and mark overdue assignments (7+ days old) as inactive",children:"Check Overdue Assignments"}),l.jsx(xt,{variant:"primary",onClick:()=>Ar(!0),className:"text-xs whitespace-nowrap",children:"Add Teacher"}),l.jsx(xt,{variant:"secondary",onClick:()=>{ue(),v(!w)},className:"text-xs whitespace-nowrap",children:w?"Hide Teachers Table":"Get All Teachers "})]})]}),l.jsxs(er.Body,{className:lt.cardBody,children:[l.jsx(wl,{children:Gr&&l.jsxs(Nt.div,{className:lt.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Teacher"}),l.jsxs("form",{onSubmit:dt,className:"space-y-4",children:[l.jsxs("div",{className:lt.formGrid,children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Teacher ID"}),l.jsx("input",{type:"text",value:ze.teacher_id,onChange:Pe=>Ve("teacher_id",Pe.target.value),className:lt.formInput,placeholder:"Enter teacher ID"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Username"}),l.jsx("input",{type:"text",value:ze.username,onChange:Pe=>Ve("username",Pe.target.value),className:lt.formInput,placeholder:"Enter username"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Password"}),l.jsx("input",{type:"password",value:ze.password,onChange:Pe=>Ve("password",Pe.target.value),className:lt.formInput,placeholder:"Enter password"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"First Name"}),l.jsx("input",{type:"text",value:ze.first_name,onChange:Pe=>Ve("first_name",Pe.target.value),className:lt.formInput,placeholder:"Enter first name"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Last Name"}),l.jsx("input",{type:"text",value:ze.last_name,onChange:Pe=>Ve("last_name",Pe.target.value),className:lt.formInput,placeholder:"Enter last name"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"teacherActive",checked:ze.is_active,onChange:Pe=>Ve("is_active",Pe.target.checked),className:lt.formCheckbox}),l.jsx("label",{htmlFor:"teacherActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),l.jsxs("div",{className:lt.formActions,children:[l.jsx(xt,{type:"button",variant:"secondary",onClick:()=>Ar(!1),className:lt.buttonSecondary,children:"Cancel"}),l.jsx(xt,{type:"submit",variant:"primary",className:lt.buttonPrimary,children:"Add Teacher"})]})]})]})}),D&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("input",{type:"text",value:O.name,onChange:Pe=>L({...O,name:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surname"}),l.jsx("input",{type:"text",value:O.surname,onChange:Pe=>L({...O,surname:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),l.jsx("input",{type:"number",value:O.grade,onChange:Pe=>L({...O,grade:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),l.jsx("input",{type:"number",value:O.class,onChange:Pe=>L({...O,class:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),l.jsx("input",{type:"text",value:O.student_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Student ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),l.jsx("input",{type:"text",value:O.nickname,onChange:Pe=>L({...O,nickname:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),l.jsx("input",{type:"text",value:O.password,onChange:Pe=>L({...O,password:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"is_active",checked:O.is_active,onChange:Pe=>L({...O,is_active:Pe.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),l.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>{M(null),L({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:ge,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update User"})]})]})}),w&&l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Teachers (",ut.length,")"]})}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:lt.tableHeaderCell,children:"Teacher ID"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Name"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Username"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Password"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Status"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Created"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:ut.map((Pe,Ut)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsx("td",{className:lt.tableCell,children:Pe.teacher_id}),l.jsxs("td",{className:lt.tableCell,children:[Pe.first_name," ",Pe.last_name]}),l.jsx("td",{className:lt.tableCell,children:Pe.username}),l.jsx("td",{className:lt.tableCell,children:Pe.password}),l.jsx("td",{className:lt.tableCell,children:l.jsx("span",{className:Pe.is_active?lt.statusActive:lt.statusInactive,children:Pe.is_active?"Active":"Inactive"})}),l.jsx("td",{className:lt.tableCell,children:new Date(Pe.created_at).toLocaleDateString()}),l.jsx("td",{className:lt.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>tt(Pe),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>cr(Pe.teacher_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},Pe.teacher_id||Ut))})]})})})]})]})]})}),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:l.jsxs(er,{className:lt.cardContainer,children:[l.jsx(er.Header,{className:lt.cardHeader,children:l.jsx(er.Title,{className:lt.cardTitle,children:"Subject Management"})}),l.jsxs(er.Body,{className:lt.cardBody,children:[l.jsxs("div",{className:lt.buttonGroup,children:[l.jsx(xt,{variant:"primary",onClick:()=>Ee(!0),className:lt.buttonPrimary,children:"Add Subject"}),l.jsx(xt,{variant:"secondary",onClick:()=>{Ce(),k(!C)},className:lt.buttonSecondary,children:C?"Hide Subjects Table":"Get All Subjects "})]}),l.jsx(wl,{children:vr&&l.jsxs(Nt.div,{className:lt.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Subject"}),l.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Subject Name"}),l.jsx("input",{type:"text",value:Le.subject,onChange:Pe=>bt("subject",Pe.target.value),className:lt.formInput,placeholder:"Enter subject name",required:!0}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Subject ID will be automatically generated"})]}),l.jsxs("div",{className:lt.formActions,children:[l.jsx(xt,{type:"button",variant:"secondary",onClick:()=>Ee(!1),className:lt.buttonSecondary,children:"Cancel"}),l.jsx(xt,{type:"submit",variant:"primary",className:lt.buttonPrimary,children:"Add Subject"})]})]})]})}),W&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Teacher"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher ID"}),l.jsx("input",{type:"text",value:ie.teacher_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teacher ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),l.jsx("input",{type:"text",value:ie.username,onChange:Pe=>xe({...ie,username:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),l.jsx("input",{type:"text",value:ie.password,onChange:Pe=>xe({...ie,password:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),l.jsx("input",{type:"text",value:ie.first_name,onChange:Pe=>xe({...ie,first_name:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),l.jsx("input",{type:"text",value:ie.last_name,onChange:Pe=>xe({...ie,last_name:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"teacher_is_active",checked:ie.is_active,onChange:Pe=>xe({...ie,is_active:Pe.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),l.jsx("label",{htmlFor:"teacher_is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>{re(null),xe({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:Tt,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update Teacher"})]})]})}),de&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Subject"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject ID"}),l.jsx("input",{type:"text",value:H.subject_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Subject ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name"}),l.jsx("input",{type:"text",value:H.subject,onChange:Pe=>Q({...H,subject:Pe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>fe(null),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:$t,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Update Subject"})]})]})}),C&&l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Subjects (",ht.length,")"]})}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:lt.tableHeaderCell,children:"Subject ID"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Subject Name"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:ht.map((Pe,Ut)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsx("td",{className:lt.tableCell,children:Pe.subject_id}),l.jsx("td",{className:lt.tableCell,children:Pe.subject}),l.jsx("td",{className:lt.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>Vt(Pe),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>mr(Pe.subject_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},Pe.subject_id||Ut))})]})})})]})]})]})}),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:l.jsxs(er,{className:lt.cardContainer,children:[l.jsx(er.Header,{className:lt.cardHeader,children:l.jsx(er.Title,{className:lt.cardTitle,children:"Test Data Deletion"})}),l.jsxs(er.Body,{className:lt.cardBody,children:[l.jsx("div",{className:lt.buttonGroup,children:l.jsx(xt,{variant:"danger",onClick:()=>qe(!0),className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})}),l.jsx(wl,{children:Be&&l.jsxs(Nt.div,{className:lt.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Delete Test Data by Date Range"}),l.jsxs("form",{onSubmit:jr,className:"space-y-4",children:[l.jsxs("div",{className:lt.formGrid,children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Start Date *"}),l.jsx("input",{type:"date",value:rt.startDate,onChange:Pe=>Zr("startDate",Pe.target.value),className:lt.formInput,required:!0})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"End Date *"}),l.jsx("input",{type:"date",value:rt.endDate,onChange:Pe=>Zr("endDate",Pe.target.value),className:lt.formInput,required:!0})]})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Teacher ID *"}),l.jsxs("select",{value:rt.teacherId,onChange:Pe=>Zr("teacherId",Pe.target.value),className:lt.formInput,required:!0,children:[l.jsx("option",{value:"",children:"Select a teacher"}),ut.map(Pe=>l.jsxs("option",{value:Pe.teacher_id,children:[Pe.teacher_id," - ",Pe.first_name," ",Pe.last_name]},Pe.teacher_id))]})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Subject (Optional)"}),l.jsxs("select",{value:rt.subjectId,onChange:Pe=>Zr("subjectId",Pe.target.value),className:lt.formInput,children:[l.jsx("option",{value:"",children:"All subjects"}),ht.map(Pe=>l.jsx("option",{value:Pe.subject_id,children:Pe.subject},Pe.subject_id))]})]}),l.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action cannot be undone"}),l.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[l.jsx("p",{children:"This will permanently delete:"}),l.jsxs("ul",{className:"list-disc list-inside mt-1",children:[l.jsx("li",{children:"All test records within the date range"}),l.jsx("li",{children:"All test questions and answers"}),l.jsx("li",{children:"All test results and submissions"}),l.jsx("li",{children:"All test assignments"}),l.jsx("li",{children:"Associated Cloudinary images (for matching tests)"})]})]})]})]})}),l.jsxs("div",{className:lt.formActions,children:[l.jsx(xt,{type:"button",variant:"secondary",onClick:()=>qe(!1),className:lt.buttonSecondary,children:"Cancel"}),l.jsx(xt,{type:"submit",variant:"danger",className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})]})]})]})})]})]})}),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.85,duration:.5},children:l.jsxs(er,{className:lt.cardContainer,children:[l.jsx(er.Header,{className:lt.cardHeader,children:l.jsx(er.Title,{className:lt.cardTitle,children:"Assignments Management"})}),l.jsxs(er.Body,{className:lt.cardBody,children:[l.jsx("div",{className:"mb-4",children:l.jsx(xt,{variant:"primary",onClick:Me,className:lt.buttonPrimary,children:b?"Hide Assignments Table":"Get All Assignments "})}),b&&l.jsx("div",{className:"mb-4",children:l.jsx("p",{className:"text-sm text-gray-600",children:"Showing all tests (Active and Completed)"})}),b&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Assignments (",Vn.length," of ",U.length,")"]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("select",{value:oe,onChange:Pe=>ye(Pe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"completed",children:"Completed"})]}),l.jsxs("select",{value:X,onChange:Pe=>z(Pe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Teachers"}),ut.map(Pe=>l.jsxs("option",{value:Pe.teacher_id,children:[Pe.first_name," ",Pe.last_name]},Pe.teacher_id))]}),l.jsx("input",{type:"date",value:K,onChange:Pe=>te(Pe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),l.jsx("input",{type:"date",value:se,onChange:Pe=>pe(Pe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:Vn.map((Pe,Ut)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:Pe.test_name,children:Pe.test_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:Pe.test_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:Pe.teacher_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:Pe.num_questions}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(Pe.created_at).toLocaleDateString()}),l.jsx("td",{className:"px-4 py-3 text-xs",children:l.jsx("div",{className:"flex space-x-2",children:Pe.is_active?l.jsx("button",{onClick:()=>Pr(Pe.test_id,Pe.test_type,Pe.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-orange-100 text-orange-700 hover:bg-orange-200",children:"Mark Complete"}):l.jsx("button",{onClick:()=>xn(Pe.test_id,Pe.test_type,Pe.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Mark Active"})})})]},`${Pe.test_type}-${Pe.test_id}-${Ut}`))})]})})})]})]})]})}),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:l.jsxs(er,{className:lt.cardContainer,children:[l.jsx(er.Header,{className:lt.cardHeader,children:l.jsx(er.Title,{className:lt.cardTitle,children:"Test Management"})}),l.jsxs(er.Body,{className:lt.cardBody,children:[l.jsx("div",{className:"mb-4",children:l.jsx(xt,{variant:"primary",onClick:()=>{Ie||Kr(),me(!Ie)},className:lt.buttonPrimary,children:Ie?"Hide Tests Table":"Get All Tests "})}),Ie&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Tests (",ts.length," of ",_e.length,")"]}),At.size>0&&l.jsxs(xt,{variant:"danger",onClick:hn,className:"text-sm px-4 py-2",children:["Delete Marked (",At.size,")"]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("select",{value:Ue,onChange:Pe=>St(Pe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Teachers"}),ut.map(Pe=>l.jsxs("option",{value:Pe.teacher_id,children:[Pe.first_name," ",Pe.last_name]},Pe.teacher_id))]}),l.jsx("input",{type:"date",value:Ze,onChange:Pe=>Kt(Pe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),l.jsx("input",{type:"date",value:yt,onChange:Pe=>Rt(Pe.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:l.jsx("input",{type:"checkbox",checked:At.size===ts.length&&ts.length>0,onChange:Bs,className:"cursor-pointer"})}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:ts.map((Pe,Ut)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsx("td",{className:lt.tableCell,children:l.jsx("input",{type:"checkbox",checked:At.has(`${Pe.test_type}-${Pe.test_id}-${Pe.teacher_id}`),onChange:()=>Os(Pe.test_id,Pe.test_type,Pe.teacher_id),className:"cursor-pointer"})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:Pe.test_name,children:Pe.test_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:Pe.test_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:Pe.teacher_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:Pe.num_questions}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(Pe.created_at).toLocaleDateString()}),l.jsx("td",{className:"px-4 py-3 text-xs",children:l.jsx("div",{className:"flex space-x-2",children:l.jsx("button",{onClick:()=>Ir(Pe.test_id,Pe.test_type,Pe.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})})})]},`${Pe.test_type}-${Pe.test_id}-${Ut}`))})]})})})]})]})]})}),l.jsx(Nt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:l.jsxs(er,{className:lt.cardContainer,children:[l.jsx(er.Header,{className:lt.cardHeader,children:l.jsx(er.Title,{className:lt.cardTitle,children:"Debug & Testing"})}),l.jsx(er.Body,{className:lt.cardBody})]})})]})})]})},sTe=()=>{const{isAdmin:e,getCurrentAdminId:t,logout:r}=Js(),{get:n}=Zl(),{showNotification:s}=_i();S.useEffect(()=>{a()},[]);const a=S.useCallback(async()=>{if(console.log(" Initializing Admin Application..."),!e()){console.error(" User is not an admin, redirecting to login"),s("Access Denied: You are not an administrator.","error"),r();return}try{i(),await o(),c(),u(),console.log(" Admin Application initialized successfully"),s("Admin dashboard loaded successfully","success")}catch(d){console.error(" Error initializing admin app:",d),s("Failed to initialize admin dashboard","error")}},[e,t,r,s,n]),i=S.useCallback(()=>{console.log(" Initializing global event listeners...");const d=f=>{f.ctrlKey&&f.key==="k"&&(f.preventDefault(),console.log("Admin search shortcut triggered"))};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),o=S.useCallback(async()=>{try{console.log(" Loading admin data...");const[d,f,m,p]=await Promise.allSettled([n("/.netlify/functions/get-all-users"),n("/.netlify/functions/get-all-teachers"),n("/.netlify/functions/get-all-subjects"),Iu.loadAcademicCalendar()]);d.status==="fulfilled"&&d.value?.success&&console.log(" Users loaded:",d.value.users?.length||0),f.status==="fulfilled"&&f.value?.success&&console.log(" Teachers loaded:",f.value.teachers?.length||0),m.status==="fulfilled"&&m.value?.success&&console.log(" Subjects loaded:",m.value.subjects?.length||0),p.status==="fulfilled"&&Array.isArray(p.value)&&console.log(" Academic years loaded:",p.value.length||0),console.log(" Admin data loading completed")}catch(d){throw console.error(" Error loading admin data:",d),d}},[n]),c=S.useCallback(()=>{console.log(" Initializing test deletion functionality..."),console.log(" Test deletion functionality initialized")},[]),u=S.useCallback(()=>{console.log(" Exposing admin functions globally..."),window.toggleSubjectsContent=()=>{const f=document.getElementById("allSubjectsContainer"),m=document.querySelector('button[onclick="toggleSubjectsContent()"]');if(!f){console.error(" allSubjectsContainer not found");return}if(!m){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",m.textContent=p?"Show Subjects":"Hide Subjects"},window.showAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm");f&&(f.style.display="block")},window.hideAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm"),m=document.getElementById("newSubjectForm");f&&(f.style.display="none"),m&&m.reset()},window.showAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm");f&&(f.style.display="block")},window.hideAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm"),m=document.getElementById("newAcademicYearForm");f&&(f.style.display="none"),m&&m.reset()},window.toggleUsersContent=()=>{const f=document.getElementById("allUsersContainer"),m=document.querySelector('button[onclick="toggleUsersContent()"]');if(!f){console.error(" allUsersContainer not found");return}if(!m){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",m.textContent=p?"Show Users":"Hide Users"},window.showAddUserForm=()=>{const f=document.getElementById("addUserForm");f&&(f.style.display="block")},window.hideAddUserForm=()=>{const f=document.getElementById("addUserForm"),m=document.getElementById("newUserForm");f&&(f.style.display="none"),m&&m.reset()},window.showAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm");f&&(f.style.display="block")},window.hideAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm"),m=document.getElementById("newTeacherForm");f&&(f.style.display="none"),m&&m.reset()},window.toggleTeachersContent=()=>{const f=document.getElementById("allTeachersContainer"),m=document.querySelector('button[onclick="toggleTeachersContent()"]');if(!f){console.error(" allTeachersContainer not found");return}if(!m){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",m.textContent=p?"Show Teachers":"Hide Teachers"},window.toggleTestsContent=()=>{const f=document.getElementById("allTestsContainer"),m=document.querySelector('button[onclick="toggleTestsContent()"]');if(!f){console.error(" allTestsContainer not found");return}if(!m){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",m.textContent=p?"Show Tests":"Hide Tests"},window.toggleAssignmentsContent=()=>{const f=document.getElementById("allAssignmentsContainer"),m=document.querySelector('button[onclick="toggleAssignmentsContent()"]');if(!f){console.error(" allAssignmentsContainer not found");return}if(!m){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",m.textContent=p?"Show Assignments":"Hide Assignments"},window.toggleResultsContent=()=>{const f=document.getElementById("allResultsContainer"),m=document.querySelector('button[onclick="toggleResultsContent()"]');if(!f){console.error(" allResultsContainer not found");return}if(!m){console.error(" Button not found");return}const p=f.style.display!=="none";f.style.display=p?"none":"block",m.textContent=p?"Show Results":"Hide Results"};const d={};window.toggleSection=f=>{console.log(` toggleSection called with sectionId: ${f}`);const m=Date.now();if(d[f]&&m-d[f]<300){console.log(` Ignoring rapid successive call for ${f}`);return}d[f]=m;const p=document.getElementById(f);if(!p){console.error(` Section with id '${f}' not found!`);return}const x=p.style.display!=="none";p.style.display=x?"none":"block";const w=document.querySelector(`button[onclick="toggleSection('${f}')"]`);w&&(w.textContent=x?"Show":"Hide")},window.addClickListeners=()=>{console.log(" Adding click listeners to section headers...");const f=document.querySelectorAll(".section-header");console.log(` Found ${f.length} section headers`),f.forEach((m,p)=>{const x=m.textContent.trim();if(console.log(` Processing header ${p+1}:`,x),m.dataset.listenerAdded==="true"){console.log(` Skipping header ${x} - listener already added`);return}m.addEventListener("click",()=>{const w=m.dataset.sectionId;w&&window.toggleSection(w)}),m.dataset.listenerAdded="true",console.log(` Added click listener to header: ${x}`)})},window.makeFieldEditable=f=>{const m=f.textContent;f.dataset.field;const p=document.createElement("input");p.type="text",p.value=m,p.className="editable-input";const x=document.createElement("button");x.textContent="Save",x.className="btn-save",x.onclick=()=>window.saveField(f,p,x,w);const w=document.createElement("button");w.textContent="Cancel",w.className="btn-cancel",w.onclick=()=>{f.textContent=m,f.style.display="block",p.remove(),x.remove(),w.remove()},f.style.display="none",f.parentNode.insertBefore(p,f),f.parentNode.insertBefore(x,f),f.parentNode.insertBefore(w,f)},window.saveField=(f,m,p,x)=>{const w=m.value.trim(),v=f.dataset.field,C=f.dataset.recordId;if(!w){alert("Field cannot be empty");return}console.log(`Saving field ${v} for record ${C} with value: ${w}`),f.textContent=w,f.style.display="block",m.remove(),p.remove(),x.remove()},window.showTestDataDeletion=()=>console.log("showTestDataDeletion called"),window.hideTestDataDeletionForm=()=>console.log("hideTestDataDeletionForm called"),window.loadTeacherGradesClasses=()=>console.log("loadTeacherGradesClasses called"),window.checkTeacherSubjects=()=>console.log("checkTeacherSubjects called"),window.initializeTestDeletion=()=>console.log("initializeTestDeletion called"),window.handleAssignmentDeletion=()=>console.log("handleAssignmentDeletion called"),window.handleTestDataDeletion=()=>console.log("handleTestDataDeletion called"),window.getSelectedGradesClasses=()=>console.log("getSelectedGradesClasses called"),window.hideAssignmentDeletionForm=()=>console.log("hideAssignmentDeletionForm called"),window.addKeyboardAccessibility=()=>console.log("addKeyboardAccessibility called"),window.testToggleSection=()=>console.log("testToggleSection called"),window.testAllToggles=()=>console.log("testAllToggles called"),window.manualToggleTest=()=>console.log("manualToggleTest called"),window.addEditableFieldListeners=()=>console.log("addEditableFieldListeners called"),window.deleteTest=()=>console.log("deleteTest called"),window.testLocalStorage=()=>{console.log("Testing localStorage...");try{localStorage.setItem("test","value");const f=localStorage.getItem("test");return localStorage.removeItem("test"),console.log(" localStorage is working"),!0}catch(f){return console.error(" localStorage error:",f),!1}},window.clearAllLocalStorage=()=>{console.log("Clearing all localStorage..."),localStorage.clear(),console.log(" localStorage cleared")},window.exportLocalStorage=()=>{console.log("Exporting localStorage...");const f={};for(let w=0;w<localStorage.length;w++){const v=localStorage.key(w);f[v]=localStorage.getItem(v)}const m=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),p=URL.createObjectURL(m),x=document.createElement("a");x.href=p,x.download="localStorage-backup.json",x.click(),URL.revokeObjectURL(p)},console.log(" Admin functions exposed globally")},[]);return e()?l.jsx(nTe,{}):l.jsxs("div",{className:"admin-error",children:[l.jsx("h2",{children:"Access Denied"}),l.jsx("p",{children:"You don't have permission to access the admin dashboard."}),l.jsx("button",{onClick:r,children:"Return to Login"})]})},xS=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,role:n,isLoading:s}=Js();return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?t&&!t.includes(n)?l.jsx(pp,{to:"/unauthorized",replace:!0}):e:l.jsx(pp,{to:"/login",replace:!0})},aTe=()=>l.jsxs("div",{className:"unauthorized-page",children:[l.jsx("h1",{children:"Access Denied"}),l.jsx("p",{children:"You don't have permission to access this page."})]}),iTe=()=>l.jsx(QD,{children:l.jsx(JB,{children:l.jsx(XB,{children:l.jsx(hK,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:l.jsx("div",{className:"app",children:l.jsxs(Tk,{children:[l.jsx(Na,{path:"/login",element:l.jsx(Bae,{})}),l.jsx(Na,{path:"/unauthorized",element:l.jsx(aTe,{})}),l.jsx(Na,{path:"/student/*",element:l.jsx(xS,{allowedRoles:["student"],children:l.jsx(Vie,{})})}),l.jsx(Na,{path:"/teacher/*",element:l.jsx(xS,{allowedRoles:["teacher"],children:l.jsx(rTe,{})})}),l.jsx(Na,{path:"/admin/*",element:l.jsx(xS,{allowedRoles:["admin"],children:l.jsx(sTe,{})})}),l.jsx(Na,{path:"/",element:l.jsx(pp,{to:"/login",replace:!0})}),l.jsx(Na,{path:"*",element:l.jsx(pp,{to:"/login",replace:!0})})]})})})})})});class oTe{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data",this.startIntegrityMonitoring()}startIntegrityMonitoring(){setInterval(()=>{this.performIntegrityCheck().catch(t=>{console.error("Integrity check failed:",t)})},3e4)}async performIntegrityCheck(){try{const t=await ka.get();t&&!this.validateTokenFormat(t)&&(console.warn("Integrity check failed - corrupted token detected"),await this.restoreFromBackup()||(console.warn("No valid backup available - clearing authentication"),await this.clearAuth()))}catch(t){console.error("Error during integrity check:",t)}}async getToken(){const t=await ka.get();return t&&!this.validateTokenFormat(t)?(console.warn("Corrupted token detected in storage - clearing it"),this.clearAuth(),null):t}getTokenSync(){return null}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}async setToken(t){if(!this.validateTokenFormat(t))return console.error("Invalid token format - refusing to store corrupted token"),!1;try{this.decodeToken(t);const r=await ka.get();if(r)try{localStorage.setItem(`${this.tokenKey}_backup`,r)}catch{}const n=await ka.set(t);return n?console.log("Token stored successfully with secure storage (hash verification, retry, write verification)"):console.error("Failed to store token - secure storage failed"),n}catch(r){return console.error("Failed to store token - token is corrupted:",r),!1}}async restoreFromBackup(){try{const t=localStorage.getItem(`${this.tokenKey}_backup`);if(t&&this.validateTokenFormat(t))return console.log("Restoring token from backup"),await ka.set(t)}catch(t){console.warn("Failed to restore from backup",t)}return!1}validateTokenFormat(t){if(!t||typeof t!="string")return console.warn("Token validation failed: not a string"),!1;if(!t.includes("."))return console.warn("Token validation failed: not a JWT format"),!1;const r=t.split(".");if(r.length!==3)return console.warn("Token validation failed: not 3 parts"),!1;for(let n=0;n<r.length;n++)try{atob(r[n].replace(/-/g,"+").replace(/_/g,"/"))}catch{return console.warn(`Token validation failed: part ${n} is not valid base64`),!1}return!0}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){return this.setToken(t)?(this.setUserData({role:r}),localStorage.setItem("accessToken",t),!0):(console.error("Failed to set token - token validation failed"),!1)}async isAuthenticated(){const t=await this.getToken();if(!t)return!1;try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),!1;const r=t.split(".");if(r.length!==3)return console.warn("Invalid token format - not 3 parts"),this.clearAuth(),!1;const n=JSON.parse(atob(r[1])),s=Date.now()/1e3;return n.exp>s}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}async clearAuth(){try{await ka.clear(),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey),localStorage.removeItem(`${this.tokenKey}_backup`)}catch(t){console.error("Failed to clear localStorage - possible corruption:",t),this.forceClearAllAuthData()}}forceClearAllAuthData(){["auth_token","accessToken","userRole","userData","refresh_token","auth_token_backup"].forEach(r=>{try{localStorage.removeItem(r)}catch(n){console.warn(`Failed to remove ${r}:`,n)}})}logout(){this.clearAuth(),window.location.href="/login"}async getAuthHeader(){const t=await this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=await this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401)if(await this.refreshToken()){const o=await this.getToken();return s.Authorization=`Bearer ${o}`,fetch(t,{...r,headers:s})}else throw this.logout(),new Error("Authentication failed");return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return await this.setToken(n.token),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}async getAccessToken(){return await this.getToken()}decodeToken(t){try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),null;const r=t.split(".");return r.length!==3?(console.warn("Invalid token format - not 3 parts"),this.clearAuth(),null):JSON.parse(atob(r[1]))}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),null}}async init(){return await this.isAuthenticated()?(this.setupTokenRefresh(),!0):(window.location.pathname!=="/login"&&(window.location.href="/login"),!1)}setupTokenRefresh(){setInterval(async()=>{await this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}}const WV=new oTe;window.tokenManager=WV;if(typeof document<"u"){const e=async()=>{await WV.init()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}class HV{constructor(){this.currentRole=null,this.loadedFunctions=new Set,this.blockedFunctions=new Set,this.initialized=!1,this.retryCount=0,this.maxRetries=20}initialize(){if(this.initialized){console.log("[DEBUG] Role-based loader already initialized, skipping...");return}if(this.retryCount>=this.maxRetries){console.warn("[DEBUG] Max retries reached, stopping role-based loader initialization");return}if(this.retryCount++,(this.retryCount%5===1||this.retryCount===this.maxRetries)&&console.log(`[DEBUG] Role-based loader initializing... (attempt ${this.retryCount}/${this.maxRetries})`),console.log("[DEBUG] Token manager available:",!!window.tokenManager),window.tokenManager&&window.tokenManager.isAuthenticated()){const t=window.tokenManager.getUserRole();console.log("[DEBUG] Role from token manager:",t),console.log("[DEBUG] Access token exists:",!!window.tokenManager.getAccessToken()),t?(this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess()):(console.log("[DEBUG] No role found, waiting for role to be set..."),setTimeout(()=>this.initialize(),500))}else console.log("[DEBUG] Token manager not available or not authenticated, waiting..."),setTimeout(()=>this.initialize(),500)}setupRoleBasedAccess(){this.currentRole||(console.warn("No role detected, defaulting to student access"),this.currentRole="student");let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check:",r),t=!1}console.log(`Role-based loader initialized for: ${this.currentRole}${t?" (admin)":""}`),this.loadRoleSpecificFunctions(),this.setupRoleBasedUI(),this.replaceBlockedFunctions()}loadRoleSpecificFunctions(){this.currentRole==="teacher"?this.loadTeacherFunctions():this.currentRole==="student"&&this.loadStudentFunctions()}loadTeacherFunctions(){console.log("Teacher functions already available in main script")}loadStudentFunctions(){console.log("Student functions already available in main script")}loadFunction(t,r){console.log(`Function ${t} already available in main script for ${r}`),this.loadedFunctions.add(t)}setupRoleBasedUI(){let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check in UI:",r),t=!1}this.currentRole==="student"&&this.hideTeacherElements(),this.currentRole==="teacher"&&!t&&this.hideStudentElements()}hideTeacherElements(){[".teacher-cabinet",".test-creation-panel",".grade-management-panel",".class-management-panel",'[data-role="teacher"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}hideStudentElements(){[".student-cabinet",".test-taking-panel",".results-viewing-panel",'[data-role="student"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}replaceBlockedFunctions(){this.currentRole==="student"?this.blockTeacherFunctions():this.currentRole==="teacher"&&this.blockStudentFunctions()}blockTeacherFunctions(){Object.entries({createTest:()=>this.showAccessDenied("teacher"),assignTest:()=>this.showAccessDenied("teacher"),gradeTest:()=>this.showAccessDenied("teacher"),manageClasses:()=>this.showAccessDenied("teacher"),viewAllResults:()=>this.showAccessDenied("teacher")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}blockStudentFunctions(){Object.entries({takeTest:()=>this.showAccessDenied("student"),submitTest:()=>this.showAccessDenied("student"),viewMyResults:()=>this.showAccessDenied("student")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}showAccessDenied(t){const r=`Access denied. This function requires ${t} role.`;console.warn(r),typeof showNotification=="function"?showNotification(r,"warning"):alert(r)}isFunctionBlocked(t){return this.blockedFunctions.has(t)}isFunctionLoaded(t){return this.loadedFunctions.has(t)}getCurrentRole(){return this.currentRole}hasRole(t){return this.currentRole===t}reloadRoleAccess(){this.initialize()}setupAccessAfterLogin(){if(console.log("[DEBUG] Setting up role-based access after login..."),console.log("[DEBUG] Role-based loader will now initialize (no more retry loop before login)"),!window.tokenManager)return console.error("[ERROR] Token manager not available during setupAccessAfterLogin"),!1;if(!window.tokenManager.isAuthenticated())return console.error("[ERROR] User not authenticated during setupAccessAfterLogin"),!1;const t=window.tokenManager.getUserRole();return t?(console.log("[DEBUG] Setting role after login:",t),this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess(),console.log("[DEBUG] Role-based access setup completed successfully for role:",t),!0):(console.error("[ERROR] No role found in token during setupAccessAfterLogin"),!1)}}window.roleBasedLoader=new HV;typeof bw<"u"&&bw.exports&&(bw.exports=HV);const lTe=()=>{const e={schemaVersion:"2.0",enhancedFeatures:!0,newUserStructure:!0,newTestStructure:!0};localStorage.setItem("app_init_data",JSON.stringify(e))},cTe=()=>{lTe(),bq.createRoot(document.getElementById("root")).render(l.jsx(Hs.StrictMode,{children:l.jsx(iTe,{})}))};cTe()});export default uTe();
