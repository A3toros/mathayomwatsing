var MJ=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Xje=MJ((APe,o4)=>{function iB(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var l4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var AS={exports:{}},Mx={},jS={exports:{}},On={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G9;function OJ(){if(G9)return On;G9=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function v(W,M,I){this.props=W,this.context=M,this.refs=y,this.updater=I||g}v.prototype.isReactComponent={},v.prototype.setState=function(W,M){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,M,"setState")},v.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function C(){}C.prototype=v.prototype;function w(W,M,I){this.props=W,this.context=M,this.refs=y,this.updater=I||g}var _=w.prototype=new C;_.constructor=w,p(_,v.prototype),_.isPureReactComponent=!0;var T=Array.isArray,E=Object.prototype.hasOwnProperty,A={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function j(W,M,I){var z,q={},ne=null,X=null;if(M!=null)for(z in M.ref!==void 0&&(X=M.ref),M.key!==void 0&&(ne=""+M.key),M)E.call(M,z)&&!F.hasOwnProperty(z)&&(q[z]=M[z]);var se=arguments.length-2;if(se===1)q.children=I;else if(1<se){for(var ce=Array(se),pe=0;pe<se;pe++)ce[pe]=arguments[pe+2];q.children=ce}if(W&&W.defaultProps)for(z in se=W.defaultProps,se)q[z]===void 0&&(q[z]=se[z]);return{$$typeof:e,type:W,key:ne,ref:X,props:q,_owner:A.current}}function P(W,M){return{$$typeof:e,type:W.type,key:M,ref:W.ref,props:W.props,_owner:W._owner}}function D(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function B(W){var M={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(I){return M[I]})}var V=/\/+/g;function Y(W,M){return typeof W=="object"&&W!==null&&W.key!=null?B(""+W.key):M.toString(36)}function re(W,M,I,z,q){var ne=typeof W;(ne==="undefined"||ne==="boolean")&&(W=null);var X=!1;if(W===null)X=!0;else switch(ne){case"string":case"number":X=!0;break;case"object":switch(W.$$typeof){case e:case t:X=!0}}if(X)return X=W,q=q(X),W=z===""?"."+Y(X,0):z,T(q)?(I="",W!=null&&(I=W.replace(V,"$&/")+"/"),re(q,M,I,"",function(pe){return pe})):q!=null&&(D(q)&&(q=P(q,I+(!q.key||X&&X.key===q.key?"":(""+q.key).replace(V,"$&/")+"/")+W)),M.push(q)),1;if(X=0,z=z===""?".":z+":",T(W))for(var se=0;se<W.length;se++){ne=W[se];var ce=z+Y(ne,se);X+=re(ne,M,I,ce,q)}else if(ce=h(W),typeof ce=="function")for(W=ce.call(W),se=0;!(ne=W.next()).done;)ne=ne.value,ce=z+Y(ne,se++),X+=re(ne,M,I,ce,q);else if(ne==="object")throw M=String(W),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return X}function te(W,M,I){if(W==null)return W;var z=[],q=0;return re(W,z,"","",function(ne){return M.call(I,ne,q++)}),z}function ee(W){if(W._status===-1){var M=W._result;M=M(),M.then(function(I){(W._status===0||W._status===-1)&&(W._status=1,W._result=I)},function(I){(W._status===0||W._status===-1)&&(W._status=2,W._result=I)}),W._status===-1&&(W._status=0,W._result=M)}if(W._status===1)return W._result.default;throw W._result}var L={current:null},Q={transition:null},U={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:Q,ReactCurrentOwner:A};function G(){throw Error("act(...) is not supported in production builds of React.")}return On.Children={map:te,forEach:function(W,M,I){te(W,function(){M.apply(this,arguments)},I)},count:function(W){var M=0;return te(W,function(){M++}),M},toArray:function(W){return te(W,function(M){return M})||[]},only:function(W){if(!D(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},On.Component=v,On.Fragment=r,On.Profiler=s,On.PureComponent=w,On.StrictMode=n,On.Suspense=c,On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,On.act=G,On.cloneElement=function(W,M,I){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var z=p({},W.props),q=W.key,ne=W.ref,X=W._owner;if(M!=null){if(M.ref!==void 0&&(ne=M.ref,X=A.current),M.key!==void 0&&(q=""+M.key),W.type&&W.type.defaultProps)var se=W.type.defaultProps;for(ce in M)E.call(M,ce)&&!F.hasOwnProperty(ce)&&(z[ce]=M[ce]===void 0&&se!==void 0?se[ce]:M[ce])}var ce=arguments.length-2;if(ce===1)z.children=I;else if(1<ce){se=Array(ce);for(var pe=0;pe<ce;pe++)se[pe]=arguments[pe+2];z.children=se}return{$$typeof:e,type:W.type,key:q,ref:ne,props:z,_owner:X}},On.createContext=function(W){return W={$$typeof:i,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:a,_context:W},W.Consumer=W},On.createElement=j,On.createFactory=function(W){var M=j.bind(null,W);return M.type=W,M},On.createRef=function(){return{current:null}},On.forwardRef=function(W){return{$$typeof:o,render:W}},On.isValidElement=D,On.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:ee}},On.memo=function(W,M){return{$$typeof:u,type:W,compare:M===void 0?null:M}},On.startTransition=function(W){var M=Q.transition;Q.transition={};try{W()}finally{Q.transition=M}},On.unstable_act=G,On.useCallback=function(W,M){return L.current.useCallback(W,M)},On.useContext=function(W){return L.current.useContext(W)},On.useDebugValue=function(){},On.useDeferredValue=function(W){return L.current.useDeferredValue(W)},On.useEffect=function(W,M){return L.current.useEffect(W,M)},On.useId=function(){return L.current.useId()},On.useImperativeHandle=function(W,M,I){return L.current.useImperativeHandle(W,M,I)},On.useInsertionEffect=function(W,M){return L.current.useInsertionEffect(W,M)},On.useLayoutEffect=function(W,M){return L.current.useLayoutEffect(W,M)},On.useMemo=function(W,M){return L.current.useMemo(W,M)},On.useReducer=function(W,M,I){return L.current.useReducer(W,M,I)},On.useRef=function(W){return L.current.useRef(W)},On.useState=function(W){return L.current.useState(W)},On.useSyncExternalStore=function(W,M,I){return L.current.useSyncExternalStore(W,M,I)},On.useTransition=function(){return L.current.useTransition()},On.version="18.3.1",On}var V9;function Jm(){return V9||(V9=1,jS.exports=OJ()),jS.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q9;function DJ(){if(q9)return Mx;q9=1;var e=Jm(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function i(o,c,u){var d,f={},h=null,g=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(g=c.ref);for(d in c)n.call(c,d)&&!a.hasOwnProperty(d)&&(f[d]=c[d]);if(o&&o.defaultProps)for(d in c=o.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:t,type:o,key:h,ref:g,props:f,_owner:s.current}}return Mx.Fragment=r,Mx.jsx=i,Mx.jsxs=i,Mx}var K9;function RJ(){return K9||(K9=1,AS.exports=DJ()),AS.exports}var l=RJ(),S=Jm();const Gs=Oc(S),oB=iB({__proto__:null,default:Gs},[S]);var Vb={},PS={exports:{}},ol={},FS={exports:{}},MS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y9;function IJ(){return Y9||(Y9=1,(function(e){function t(Q,U){var G=Q.length;Q.push(U);e:for(;0<G;){var W=G-1>>>1,M=Q[W];if(0<s(M,U))Q[W]=U,Q[G]=M,G=W;else break e}}function r(Q){return Q.length===0?null:Q[0]}function n(Q){if(Q.length===0)return null;var U=Q[0],G=Q.pop();if(G!==U){Q[0]=G;e:for(var W=0,M=Q.length,I=M>>>1;W<I;){var z=2*(W+1)-1,q=Q[z],ne=z+1,X=Q[ne];if(0>s(q,G))ne<M&&0>s(X,q)?(Q[W]=X,Q[ne]=G,W=ne):(Q[W]=q,Q[z]=G,W=z);else if(ne<M&&0>s(X,G))Q[W]=X,Q[ne]=G,W=ne;else break e}}return U}function s(Q,U){var G=Q.sortIndex-U.sortIndex;return G!==0?G:Q.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,g=!1,p=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(Q){for(var U=r(u);U!==null;){if(U.callback===null)n(u);else if(U.startTime<=Q)n(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(u)}}function T(Q){if(y=!1,_(Q),!p)if(r(c)!==null)p=!0,ee(E);else{var U=r(u);U!==null&&L(T,U.startTime-Q)}}function E(Q,U){p=!1,y&&(y=!1,C(j),j=-1),g=!0;var G=h;try{for(_(U),f=r(c);f!==null&&(!(f.expirationTime>U)||Q&&!B());){var W=f.callback;if(typeof W=="function"){f.callback=null,h=f.priorityLevel;var M=W(f.expirationTime<=U);U=e.unstable_now(),typeof M=="function"?f.callback=M:f===r(c)&&n(c),_(U)}else n(c);f=r(c)}if(f!==null)var I=!0;else{var z=r(u);z!==null&&L(T,z.startTime-U),I=!1}return I}finally{f=null,h=G,g=!1}}var A=!1,F=null,j=-1,P=5,D=-1;function B(){return!(e.unstable_now()-D<P)}function V(){if(F!==null){var Q=e.unstable_now();D=Q;var U=!0;try{U=F(!0,Q)}finally{U?Y():(A=!1,F=null)}}else A=!1}var Y;if(typeof w=="function")Y=function(){w(V)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,te=re.port2;re.port1.onmessage=V,Y=function(){te.postMessage(null)}}else Y=function(){v(V,0)};function ee(Q){F=Q,A||(A=!0,Y())}function L(Q,U){j=v(function(){Q(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){p||g||(p=!0,ee(E))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(Q){switch(h){case 1:case 2:case 3:var U=3;break;default:U=h}var G=h;h=U;try{return Q()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,U){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var G=h;h=Q;try{return U()}finally{h=G}},e.unstable_scheduleCallback=function(Q,U,G){var W=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?W+G:W):G=W,Q){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=G+M,Q={id:d++,callback:U,priorityLevel:Q,startTime:G,expirationTime:M,sortIndex:-1},G>W?(Q.sortIndex=G,t(u,Q),r(c)===null&&Q===r(u)&&(y?(C(j),j=-1):y=!0,L(T,G-W))):(Q.sortIndex=M,t(c,Q),p||g||(p=!0,ee(E))),Q},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(Q){var U=h;return function(){var G=h;h=U;try{return Q.apply(this,arguments)}finally{h=G}}}})(MS)),MS}var X9;function X8(){return X9||(X9=1,FS.exports=IJ()),FS.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J9;function LJ(){if(J9)return ol;J9=1;var e=Jm(),t=X8();function r(m){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+m,N=1;N<arguments.length;N++)x+="&args[]="+encodeURIComponent(arguments[N]);return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(m,x){i(m,x),i(m+"Capture",x)}function i(m,x){for(s[m]=x,m=0;m<x.length;m++)n.add(x[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},f={};function h(m){return c.call(f,m)?!0:c.call(d,m)?!1:u.test(m)?f[m]=!0:(d[m]=!0,!1)}function g(m,x,N,R){if(N!==null&&N.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return R?!1:N!==null?!N.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function p(m,x,N,R){if(x===null||typeof x>"u"||g(m,x,N,R))return!0;if(R)return!1;if(N!==null)switch(N.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function y(m,x,N,R,K,ae,xe){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=R,this.attributeNamespace=K,this.mustUseProperty=N,this.propertyName=m,this.type=x,this.sanitizeURL=ae,this.removeEmptyString=xe}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){v[m]=new y(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var x=m[0];v[x]=new y(x,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){v[m]=new y(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){v[m]=new y(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){v[m]=new y(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){v[m]=new y(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){v[m]=new y(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){v[m]=new y(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){v[m]=new y(m,5,!1,m.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function w(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var x=m.replace(C,w);v[x]=new y(x,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var x=m.replace(C,w);v[x]=new y(x,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var x=m.replace(C,w);v[x]=new y(x,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!1,!1)}),v.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){v[m]=new y(m,1,!1,m.toLowerCase(),null,!0,!0)});function _(m,x,N,R){var K=v.hasOwnProperty(x)?v[x]:null;(K!==null?K.type!==0:R||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(p(x,N,K,R)&&(N=null),R||K===null?h(x)&&(N===null?m.removeAttribute(x):m.setAttribute(x,""+N)):K.mustUseProperty?m[K.propertyName]=N===null?K.type===3?!1:"":N:(x=K.attributeName,R=K.attributeNamespace,N===null?m.removeAttribute(x):(K=K.type,N=K===3||K===4&&N===!0?"":""+N,R?m.setAttributeNS(R,x,N):m.setAttribute(x,N))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),A=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),B=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),L=Symbol.for("react.offscreen"),Q=Symbol.iterator;function U(m){return m===null||typeof m!="object"?null:(m=Q&&m[Q]||m["@@iterator"],typeof m=="function"?m:null)}var G=Object.assign,W;function M(m){if(W===void 0)try{throw Error()}catch(N){var x=N.stack.trim().match(/\n( *(at )?)/);W=x&&x[1]||""}return`
`+W+m}var I=!1;function z(m,x){if(!m||I)return"";I=!0;var N=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(At){var R=At}Reflect.construct(m,[],x)}else{try{x.call()}catch(At){R=At}m.call(x.prototype)}else{try{throw Error()}catch(At){R=At}m()}}catch(At){if(At&&R&&typeof At.stack=="string"){for(var K=At.stack.split(`
`),ae=R.stack.split(`
`),xe=K.length-1,Be=ae.length-1;1<=xe&&0<=Be&&K[xe]!==ae[Be];)Be--;for(;1<=xe&&0<=Be;xe--,Be--)if(K[xe]!==ae[Be]){if(xe!==1||Be!==1)do if(xe--,Be--,0>Be||K[xe]!==ae[Be]){var et=`
`+K[xe].replace(" at new "," at ");return m.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",m.displayName)),et}while(1<=xe&&0<=Be);break}}}finally{I=!1,Error.prepareStackTrace=N}return(m=m?m.displayName||m.name:"")?M(m):""}function q(m){switch(m.tag){case 5:return M(m.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return m=z(m.type,!1),m;case 11:return m=z(m.type.render,!1),m;case 1:return m=z(m.type,!0),m;default:return""}}function ne(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case F:return"Fragment";case A:return"Portal";case P:return"Profiler";case j:return"StrictMode";case Y:return"Suspense";case re:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case B:return(m.displayName||"Context")+".Consumer";case D:return(m._context.displayName||"Context")+".Provider";case V:var x=m.render;return m=m.displayName,m||(m=x.displayName||x.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case te:return x=m.displayName||null,x!==null?x:ne(m.type)||"Memo";case ee:x=m._payload,m=m._init;try{return ne(m(x))}catch{}}return null}function X(m){var x=m.type;switch(m.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=x.render,m=m.displayName||m.name||"",x.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(x);case 8:return x===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function se(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function ce(m){var x=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function pe(m){var x=ce(m)?"checked":"value",N=Object.getOwnPropertyDescriptor(m.constructor.prototype,x),R=""+m[x];if(!m.hasOwnProperty(x)&&typeof N<"u"&&typeof N.get=="function"&&typeof N.set=="function"){var K=N.get,ae=N.set;return Object.defineProperty(m,x,{configurable:!0,get:function(){return K.call(this)},set:function(xe){R=""+xe,ae.call(this,xe)}}),Object.defineProperty(m,x,{enumerable:N.enumerable}),{getValue:function(){return R},setValue:function(xe){R=""+xe},stopTracking:function(){m._valueTracker=null,delete m[x]}}}}function be(m){m._valueTracker||(m._valueTracker=pe(m))}function oe(m){if(!m)return!1;var x=m._valueTracker;if(!x)return!0;var N=x.getValue(),R="";return m&&(R=ce(m)?m.checked?"true":"false":m.value),m=R,m!==N?(x.setValue(m),!0):!1}function je(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Re(m,x){var N=x.checked;return G({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:N??m._wrapperState.initialChecked})}function Xe(m,x){var N=x.defaultValue==null?"":x.defaultValue,R=x.checked!=null?x.checked:x.defaultChecked;N=se(x.value!=null?x.value:N),m._wrapperState={initialChecked:R,initialValue:N,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function ft(m,x){x=x.checked,x!=null&&_(m,"checked",x,!1)}function Je(m,x){ft(m,x);var N=se(x.value),R=x.type;if(N!=null)R==="number"?(N===0&&m.value===""||m.value!=N)&&(m.value=""+N):m.value!==""+N&&(m.value=""+N);else if(R==="submit"||R==="reset"){m.removeAttribute("value");return}x.hasOwnProperty("value")?Ve(m,x.type,N):x.hasOwnProperty("defaultValue")&&Ve(m,x.type,se(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(m.defaultChecked=!!x.defaultChecked)}function Ht(m,x,N){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var R=x.type;if(!(R!=="submit"&&R!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+m._wrapperState.initialValue,N||x===m.value||(m.value=x),m.defaultValue=x}N=m.name,N!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,N!==""&&(m.name=N)}function Ve(m,x,N){(x!=="number"||je(m.ownerDocument)!==m)&&(N==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+N&&(m.defaultValue=""+N))}var at=Array.isArray;function gt(m,x,N,R){if(m=m.options,x){x={};for(var K=0;K<N.length;K++)x["$"+N[K]]=!0;for(N=0;N<m.length;N++)K=x.hasOwnProperty("$"+m[N].value),m[N].selected!==K&&(m[N].selected=K),K&&R&&(m[N].defaultSelected=!0)}else{for(N=""+se(N),x=null,K=0;K<m.length;K++){if(m[K].value===N){m[K].selected=!0,R&&(m[K].defaultSelected=!0);return}x!==null||m[K].disabled||(x=m[K])}x!==null&&(x.selected=!0)}}function Te(m,x){if(x.dangerouslySetInnerHTML!=null)throw Error(r(91));return G({},x,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function bt(m,x){var N=x.value;if(N==null){if(N=x.children,x=x.defaultValue,N!=null){if(x!=null)throw Error(r(92));if(at(N)){if(1<N.length)throw Error(r(93));N=N[0]}x=N}x==null&&(x=""),N=x}m._wrapperState={initialValue:se(N)}}function Ct(m,x){var N=se(x.value),R=se(x.defaultValue);N!=null&&(N=""+N,N!==m.value&&(m.value=N),x.defaultValue==null&&m.defaultValue!==N&&(m.defaultValue=N)),R!=null&&(m.defaultValue=""+R)}function Lt(m){var x=m.textContent;x===m._wrapperState.initialValue&&x!==""&&x!==null&&(m.value=x)}function Yt(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function it(m,x){return m==null||m==="http://www.w3.org/1999/xhtml"?Yt(x):m==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var xt,Mt=(function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,N,R,K){MSApp.execUnsafeLocalFunction(function(){return m(x,N,R,K)})}:m})(function(m,x){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=x;else{for(xt=xt||document.createElement("div"),xt.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=xt.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;x.firstChild;)m.appendChild(x.firstChild)}});function rt(m,x){if(x){var N=m.firstChild;if(N&&N===m.lastChild&&N.nodeType===3){N.nodeValue=x;return}}m.textContent=x}var Qe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},It=["Webkit","ms","Moz","O"];Object.keys(Qe).forEach(function(m){It.forEach(function(x){x=x+m.charAt(0).toUpperCase()+m.substring(1),Qe[x]=Qe[m]})});function Tt(m,x,N){return x==null||typeof x=="boolean"||x===""?"":N||typeof x!="number"||x===0||Qe.hasOwnProperty(m)&&Qe[m]?(""+x).trim():x+"px"}function Rt(m,x){m=m.style;for(var N in x)if(x.hasOwnProperty(N)){var R=N.indexOf("--")===0,K=Tt(N,x[N],R);N==="float"&&(N="cssFloat"),R?m.setProperty(N,K):m[N]=K}}var cr=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hr(m,x){if(x){if(cr[m]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(r(137,m));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(r(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(r(61))}if(x.style!=null&&typeof x.style!="object")throw Error(r(62))}}function Cr(m,x){if(m.indexOf("-")===-1)return typeof x.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ur=null;function Sr(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var we=null,Me=null,Ie=null;function Ce(m){if(m=Ph(m)){if(typeof we!="function")throw Error(r(280));var x=m.stateNode;x&&(x=$a(x),we(m.stateNode,m.type,x))}}function Ze(m){Me?Ie?Ie.push(m):Ie=[m]:Me=m}function wt(){if(Me){var m=Me,x=Ie;if(Ie=Me=null,Ce(m),x)for(m=0;m<x.length;m++)Ce(x[m])}}function Nt(m,x){return m(x)}function Oe(){}var Ke=!1;function st(m,x,N){if(Ke)return m(x,N);Ke=!0;try{return Nt(m,x,N)}finally{Ke=!1,(Me!==null||Ie!==null)&&(Oe(),wt())}}function Vt(m,x){var N=m.stateNode;if(N===null)return null;var R=$a(N);if(R===null)return null;N=R[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(m=m.type,R=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!R;break e;default:m=!1}if(m)return null;if(N&&typeof N!="function")throw Error(r(231,x,typeof N));return N}var qt=!1;if(o)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){qt=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{qt=!1}function Vr(m,x,N,R,K,ae,xe,Be,et){var At=Array.prototype.slice.call(arguments,3);try{x.apply(N,At)}catch(er){this.onError(er)}}var Nr=!1,dn=null,me=!1,Ne=null,ve={onError:function(m){Nr=!0,dn=m}};function Ee(m,x,N,R,K,ae,xe,Be,et){Nr=!1,dn=null,Vr.apply(ve,arguments)}function ue(m,x,N,R,K,ae,xe,Be,et){if(Ee.apply(this,arguments),Nr){if(Nr){var At=dn;Nr=!1,dn=null}else throw Error(r(198));me||(me=!0,Ne=At)}}function he(m){var x=m,N=m;if(m.alternate)for(;x.return;)x=x.return;else{m=x;do x=m,(x.flags&4098)!==0&&(N=x.return),m=x.return;while(m)}return x.tag===3?N:null}function Pe(m){if(m.tag===13){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function tt(m){if(he(m)!==m)throw Error(r(188))}function Ge(m){var x=m.alternate;if(!x){if(x=he(m),x===null)throw Error(r(188));return x!==m?null:m}for(var N=m,R=x;;){var K=N.return;if(K===null)break;var ae=K.alternate;if(ae===null){if(R=K.return,R!==null){N=R;continue}break}if(K.child===ae.child){for(ae=K.child;ae;){if(ae===N)return tt(K),m;if(ae===R)return tt(K),x;ae=ae.sibling}throw Error(r(188))}if(N.return!==R.return)N=K,R=ae;else{for(var xe=!1,Be=K.child;Be;){if(Be===N){xe=!0,N=K,R=ae;break}if(Be===R){xe=!0,R=K,N=ae;break}Be=Be.sibling}if(!xe){for(Be=ae.child;Be;){if(Be===N){xe=!0,N=ae,R=K;break}if(Be===R){xe=!0,R=ae,N=K;break}Be=Be.sibling}if(!xe)throw Error(r(189))}}if(N.alternate!==R)throw Error(r(190))}if(N.tag!==3)throw Error(r(188));return N.stateNode.current===N?m:x}function Ye(m){return m=Ge(m),m!==null?ct(m):null}function ct(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var x=ct(m);if(x!==null)return x;m=m.sibling}return null}var de=t.unstable_scheduleCallback,_e=t.unstable_cancelCallback,Fe=t.unstable_shouldYield,De=t.unstable_requestPaint,qe=t.unstable_now,zt=t.unstable_getCurrentPriorityLevel,_r=t.unstable_ImmediatePriority,jr=t.unstable_UserBlockingPriority,pt=t.unstable_NormalPriority,or=t.unstable_LowPriority,Wr=t.unstable_IdlePriority,Fr=null,Tr=null;function Gr(m){if(Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Fr,m,void 0,(m.current.flags&128)===128)}catch{}}var Lr=Math.clz32?Math.clz32:fn,zn=Math.log,br=Math.LN2;function fn(m){return m>>>=0,m===0?32:31-(zn(m)/br|0)|0}var Xr=64,qn=4194304;function An(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function ke(m,x){var N=m.pendingLanes;if(N===0)return 0;var R=0,K=m.suspendedLanes,ae=m.pingedLanes,xe=N&268435455;if(xe!==0){var Be=xe&~K;Be!==0?R=An(Be):(ae&=xe,ae!==0&&(R=An(ae)))}else xe=N&~K,xe!==0?R=An(xe):ae!==0&&(R=An(ae));if(R===0)return 0;if(x!==0&&x!==R&&(x&K)===0&&(K=R&-R,ae=x&-x,K>=ae||K===16&&(ae&4194240)!==0))return x;if((R&4)!==0&&(R|=N&16),x=m.entangledLanes,x!==0)for(m=m.entanglements,x&=R;0<x;)N=31-Lr(x),K=1<<N,R|=m[N],x&=~K;return R}function Pt(m,x){switch(m){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mr(m,x){for(var N=m.suspendedLanes,R=m.pingedLanes,K=m.expirationTimes,ae=m.pendingLanes;0<ae;){var xe=31-Lr(ae),Be=1<<xe,et=K[xe];et===-1?((Be&N)===0||(Be&R)!==0)&&(K[xe]=Pt(Be,x)):et<=x&&(m.expiredLanes|=Be),ae&=~Be}}function qr(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Tn(){var m=Xr;return Xr<<=1,(Xr&4194240)===0&&(Xr=64),m}function Jr(m){for(var x=[],N=0;31>N;N++)x.push(m);return x}function hs(m,x,N){m.pendingLanes|=x,x!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,x=31-Lr(x),m[x]=N}function Xs(m,x){var N=m.pendingLanes&~x;m.pendingLanes=x,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=x,m.mutableReadLanes&=x,m.entangledLanes&=x,x=m.entanglements;var R=m.eventTimes;for(m=m.expirationTimes;0<N;){var K=31-Lr(N),ae=1<<K;x[K]=0,R[K]=-1,m[K]=-1,N&=~ae}}function mi(m,x){var N=m.entangledLanes|=x;for(m=m.entanglements;N;){var R=31-Lr(N),K=1<<R;K&x|m[R]&x&&(m[R]|=x),N&=~K}}var xn=0;function wl(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var Ue,Ot,Le,nt,Wt,kt=!1,wr=[],Ft=null,Qr=null,Ln=null,He=new Map,pr=new Map,ar=[],bs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _n(m,x){switch(m){case"focusin":case"focusout":Ft=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":He.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(x.pointerId)}}function hn(m,x,N,R,K,ae){return m===null||m.nativeEvent!==ae?(m={blockedOn:x,domEventName:N,eventSystemFlags:R,nativeEvent:ae,targetContainers:[K]},x!==null&&(x=Ph(x),x!==null&&Ot(x)),m):(m.eventSystemFlags|=R,x=m.targetContainers,K!==null&&x.indexOf(K)===-1&&x.push(K),m)}function Sn(m,x,N,R,K){switch(x){case"focusin":return Ft=hn(Ft,m,x,N,R,K),!0;case"dragenter":return Qr=hn(Qr,m,x,N,R,K),!0;case"mouseover":return Ln=hn(Ln,m,x,N,R,K),!0;case"pointerover":var ae=K.pointerId;return He.set(ae,hn(He.get(ae)||null,m,x,N,R,K)),!0;case"gotpointercapture":return ae=K.pointerId,pr.set(ae,hn(pr.get(ae)||null,m,x,N,R,K)),!0}return!1}function jn(m){var x=Nu(m.target);if(x!==null){var N=he(x);if(N!==null){if(x=N.tag,x===13){if(x=Pe(N),x!==null){m.blockedOn=x,Wt(m.priority,function(){Le(N)});return}}else if(x===3&&N.stateNode.current.memoizedState.isDehydrated){m.blockedOn=N.tag===3?N.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Xl(m){if(m.blockedOn!==null)return!1;for(var x=m.targetContainers;0<x.length;){var N=mg(m.domEventName,m.eventSystemFlags,x[0],m.nativeEvent);if(N===null){N=m.nativeEvent;var R=new N.constructor(N.type,N);ur=R,N.target.dispatchEvent(R),ur=null}else return x=Ph(N),x!==null&&Ot(x),m.blockedOn=N,!1;x.shift()}return!0}function Oi(m,x,N){Xl(m)&&N.delete(x)}function xh(){kt=!1,Ft!==null&&Xl(Ft)&&(Ft=null),Qr!==null&&Xl(Qr)&&(Qr=null),Ln!==null&&Xl(Ln)&&(Ln=null),He.forEach(Oi),pr.forEach(Oi)}function yu(m,x){m.blockedOn===x&&(m.blockedOn=null,kt||(kt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,xh)))}function ao(m){function x(K){return yu(K,m)}if(0<wr.length){yu(wr[0],m);for(var N=1;N<wr.length;N++){var R=wr[N];R.blockedOn===m&&(R.blockedOn=null)}}for(Ft!==null&&yu(Ft,m),Qr!==null&&yu(Qr,m),Ln!==null&&yu(Ln,m),He.forEach(x),pr.forEach(x),N=0;N<ar.length;N++)R=ar[N],R.blockedOn===m&&(R.blockedOn=null);for(;0<ar.length&&(N=ar[0],N.blockedOn===null);)jn(N),N.blockedOn===null&&ar.shift()}var I0=T.ReactCurrentBatchConfig,hg=!0;function _l(m,x,N,R){var K=xn,ae=I0.transition;I0.transition=null;try{xn=1,L0(m,x,N,R)}finally{xn=K,I0.transition=ae}}function Bc(m,x,N,R){var K=xn,ae=I0.transition;I0.transition=null;try{xn=4,L0(m,x,N,R)}finally{xn=K,I0.transition=ae}}function L0(m,x,N,R){if(hg){var K=mg(m,x,N,R);if(K===null)jg(m,x,R,B0,N),_n(m,R);else if(Sn(K,m,x,N,R))R.stopPropagation();else if(_n(m,R),x&4&&-1<bs.indexOf(m)){for(;K!==null;){var ae=Ph(K);if(ae!==null&&Ue(ae),ae=mg(m,x,N,R),ae===null&&jg(m,x,R,B0,N),ae===K)break;K=ae}K!==null&&R.stopPropagation()}else jg(m,x,R,null,N)}}var B0=null;function mg(m,x,N,R){if(B0=null,m=Sr(R),m=Nu(m),m!==null)if(x=he(m),x===null)m=null;else if(N=x.tag,N===13){if(m=Pe(x),m!==null)return m;m=null}else if(N===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;m=null}else x!==m&&(m=null);return B0=m,null}function X2(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zt()){case _r:return 1;case jr:return 4;case pt:case or:return 16;case Wr:return 536870912;default:return 16}default:return 16}}var Ja=null,vu=null,$c=null;function yh(){if($c)return $c;var m,x=vu,N=x.length,R,K="value"in Ja?Ja.value:Ja.textContent,ae=K.length;for(m=0;m<N&&x[m]===K[m];m++);var xe=N-m;for(R=1;R<=xe&&x[N-R]===K[ae-R];R++);return $c=K.slice(m,1<R?1-R:void 0)}function hd(m){var x=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&x===13&&(m=13)):m=x,m===10&&(m=13),32<=m||m===13?m:0}function Di(){return!0}function No(){return!1}function wa(m){function x(N,R,K,ae,xe){this._reactName=N,this._targetInst=K,this.type=R,this.nativeEvent=ae,this.target=xe,this.currentTarget=null;for(var Be in m)m.hasOwnProperty(Be)&&(N=m[Be],this[Be]=N?N(ae):ae[Be]);return this.isDefaultPrevented=(ae.defaultPrevented!=null?ae.defaultPrevented:ae.returnValue===!1)?Di:No,this.isPropagationStopped=No,this}return G(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var N=this.nativeEvent;N&&(N.preventDefault?N.preventDefault():typeof N.returnValue!="unknown"&&(N.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var N=this.nativeEvent;N&&(N.stopPropagation?N.stopPropagation():typeof N.cancelBubble!="unknown"&&(N.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),x}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sl=wa(io),kl=G({},io,{view:0,detail:0}),J2=wa(kl),vh,bh,Qa,Ri=G({},kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gd,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Qa&&(Qa&&m.type==="mousemove"?(vh=m.screenX-Qa.screenX,bh=m.screenY-Qa.screenY):bh=vh=0,Qa=m),vh)},movementY:function(m){return"movementY"in m?m.movementY:bh}}),ws=wa(Ri),wh=G({},Ri,{dataTransfer:0}),Cl=wa(wh),Q2=G({},kl,{relatedTarget:0}),gg=wa(Q2),H1=G({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),G1=wa(H1),Z2=G({},io,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),pg=wa(Z2),eb=G({},io,{data:0}),md=wa(eb),V1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tS(m){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(m):(m=xg[m])?!!x[m]:!1}function gd(){return tS}var yg=G({},kl,{key:function(m){if(m.key){var x=V1[m.key]||m.key;if(x!=="Unidentified")return x}return m.type==="keypress"?(m=hd(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?eS[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gd,charCode:function(m){return m.type==="keypress"?hd(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?hd(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),tb=wa(yg),rb=G({},Ri,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pd=wa(rb),nb=G({},kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gd}),vg=wa(nb),bg=G({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),$0=wa(bg),q1=G({},Ri,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),K1=wa(q1),sb=[9,13,27,32],_h=o&&"CompositionEvent"in window,xd=null;o&&"documentMode"in document&&(xd=document.documentMode);var U0=o&&"TextEvent"in window&&!xd,Eo=o&&(!_h||xd&&8<xd&&11>=xd),bu=" ",wg=!1;function Y1(m,x){switch(m){case"keyup":return sb.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tl(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Ao=!1;function X1(m,x){switch(m){case"compositionend":return Tl(x);case"keypress":return x.which!==32?null:(wg=!0,bu);case"textInput":return m=x.data,m===bu&&wg?null:m;default:return null}}function ab(m,x){if(Ao)return m==="compositionend"||!_h&&Y1(m,x)?(m=yh(),$c=vu=Ja=null,Ao=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Eo&&x.locale!=="ko"?null:x.data;default:return null}}var Uc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zc(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x==="input"?!!Uc[m.type]:x==="textarea"}function Sh(m,x,N,R){Ze(R),x=Pg(x,"onChange"),0<x.length&&(N=new Sl("onChange","change",null,N,R),m.push({event:N,listeners:x}))}var z0=null,wu=null;function ib(m){ox(m,0)}function _u(m){var x=Sa(m);if(oe(x))return m}function el(m,x){if(m==="change")return x}var W0=!1;if(o){var Su;if(o){var tl="oninput"in document;if(!tl){var _g=document.createElement("div");_g.setAttribute("oninput","return;"),tl=typeof _g.oninput=="function"}Su=tl}else Su=!1;W0=Su&&(!document.documentMode||9<document.documentMode)}function yd(){z0&&(z0.detachEvent("onpropertychange",J1),wu=z0=null)}function J1(m){if(m.propertyName==="value"&&_u(wu)){var x=[];Sh(x,wu,m,Sr(m)),st(ib,x)}}function Q1(m,x,N){m==="focusin"?(yd(),z0=x,wu=N,z0.attachEvent("onpropertychange",J1)):m==="focusout"&&yd()}function Ms(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return _u(wu)}function Sg(m,x){if(m==="click")return _u(x)}function Z1(m,x){if(m==="input"||m==="change")return _u(x)}function ex(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var oo=typeof Object.is=="function"?Object.is:ex;function vd(m,x){if(oo(m,x))return!0;if(typeof m!="object"||m===null||typeof x!="object"||x===null)return!1;var N=Object.keys(m),R=Object.keys(x);if(N.length!==R.length)return!1;for(R=0;R<N.length;R++){var K=N[R];if(!c.call(x,K)||!oo(m[K],x[K]))return!1}return!0}function ku(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function Ts(m,x){var N=ku(m);m=0;for(var R;N;){if(N.nodeType===3){if(R=m+N.textContent.length,m<=x&&R>=x)return{node:N,offset:x-m};m=R}e:{for(;N;){if(N.nextSibling){N=N.nextSibling;break e}N=N.parentNode}N=void 0}N=ku(N)}}function ia(m,x){return m&&x?m===x?!0:m&&m.nodeType===3?!1:x&&x.nodeType===3?ia(m,x.parentNode):"contains"in m?m.contains(x):m.compareDocumentPosition?!!(m.compareDocumentPosition(x)&16):!1:!1}function _a(){for(var m=window,x=je();x instanceof m.HTMLIFrameElement;){try{var N=typeof x.contentWindow.location.href=="string"}catch{N=!1}if(N)m=x.contentWindow;else break;x=je(m.document)}return x}function H0(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x&&(x==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||x==="textarea"||m.contentEditable==="true")}function kh(m){var x=_a(),N=m.focusedElem,R=m.selectionRange;if(x!==N&&N&&N.ownerDocument&&ia(N.ownerDocument.documentElement,N)){if(R!==null&&H0(N)){if(x=R.start,m=R.end,m===void 0&&(m=x),"selectionStart"in N)N.selectionStart=x,N.selectionEnd=Math.min(m,N.value.length);else if(m=(x=N.ownerDocument||document)&&x.defaultView||window,m.getSelection){m=m.getSelection();var K=N.textContent.length,ae=Math.min(R.start,K);R=R.end===void 0?ae:Math.min(R.end,K),!m.extend&&ae>R&&(K=R,R=ae,ae=K),K=Ts(N,ae);var xe=Ts(N,R);K&&xe&&(m.rangeCount!==1||m.anchorNode!==K.node||m.anchorOffset!==K.offset||m.focusNode!==xe.node||m.focusOffset!==xe.offset)&&(x=x.createRange(),x.setStart(K.node,K.offset),m.removeAllRanges(),ae>R?(m.addRange(x),m.extend(xe.node,xe.offset)):(x.setEnd(xe.node,xe.offset),m.addRange(x)))}}for(x=[],m=N;m=m.parentNode;)m.nodeType===1&&x.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<x.length;N++)m=x[N],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var Ch=o&&"documentMode"in document&&11>=document.documentMode,G0=null,Ba=null,bd=null,Th=!1;function kg(m,x,N){var R=N.window===N?N.document:N.nodeType===9?N:N.ownerDocument;Th||G0==null||G0!==je(R)||(R=G0,"selectionStart"in R&&H0(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),bd&&vd(bd,R)||(bd=R,R=Pg(Ba,"onSelect"),0<R.length&&(x=new Sl("onSelect","select",null,x,N),m.push({event:x,listeners:R}),x.target=G0)))}function jo(m,x){var N={};return N[m.toLowerCase()]=x.toLowerCase(),N["Webkit"+m]="webkit"+x,N["Moz"+m]="moz"+x,N}var Za={animationend:jo("Animation","AnimationEnd"),animationiteration:jo("Animation","AnimationIteration"),animationstart:jo("Animation","AnimationStart"),transitionend:jo("Transition","TransitionEnd")},wd={},Cg={};o&&(Cg=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function V0(m){if(wd[m])return wd[m];if(!Za[m])return m;var x=Za[m],N;for(N in x)if(x.hasOwnProperty(N)&&N in Cg)return wd[m]=x[N];return m}var tx=V0("animationend"),rx=V0("animationiteration"),nx=V0("animationstart"),sx=V0("transitionend"),ax=new Map,ix="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wc(m,x){ax.set(m,x),a(x,[m])}for(var Tg=0;Tg<ix.length;Tg++){var _d=ix[Tg],ob=_d.toLowerCase(),Ng=_d[0].toUpperCase()+_d.slice(1);Wc(ob,"on"+Ng)}Wc(tx,"onAnimationEnd"),Wc(rx,"onAnimationIteration"),Wc(nx,"onAnimationStart"),Wc("dblclick","onDoubleClick"),Wc("focusin","onFocus"),Wc("focusout","onBlur"),Wc(sx,"onTransitionEnd"),i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Cu));function Eg(m,x,N){var R=m.type||"unknown-event";m.currentTarget=N,ue(R,x,void 0,m),m.currentTarget=null}function ox(m,x){x=(x&4)!==0;for(var N=0;N<m.length;N++){var R=m[N],K=R.event;R=R.listeners;e:{var ae=void 0;if(x)for(var xe=R.length-1;0<=xe;xe--){var Be=R[xe],et=Be.instance,At=Be.currentTarget;if(Be=Be.listener,et!==ae&&K.isPropagationStopped())break e;Eg(K,Be,At),ae=et}else for(xe=0;xe<R.length;xe++){if(Be=R[xe],et=Be.instance,At=Be.currentTarget,Be=Be.listener,et!==ae&&K.isPropagationStopped())break e;Eg(K,Be,At),ae=et}}}if(me)throw m=Ne,me=!1,Ne=null,m}function ms(m,x){var N=x[Mg];N===void 0&&(N=x[Mg]=new Set);var R=m+"__bubble";N.has(R)||(lx(x,m,2,!1),N.add(R))}function Ag(m,x,N){var R=0;x&&(R|=4),lx(N,m,R,x)}var Nh="_reactListening"+Math.random().toString(36).slice(2);function Sd(m){if(!m[Nh]){m[Nh]=!0,n.forEach(function(N){N!=="selectionchange"&&(lb.has(N)||Ag(N,!1,m),Ag(N,!0,m))});var x=m.nodeType===9?m:m.ownerDocument;x===null||x[Nh]||(x[Nh]=!0,Ag("selectionchange",!1,x))}}function lx(m,x,N,R){switch(X2(x)){case 1:var K=_l;break;case 4:K=Bc;break;default:K=L0}N=K.bind(null,x,N,m),K=void 0,!qt||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(K=!0),R?K!==void 0?m.addEventListener(x,N,{capture:!0,passive:K}):m.addEventListener(x,N,!0):K!==void 0?m.addEventListener(x,N,{passive:K}):m.addEventListener(x,N,!1)}function jg(m,x,N,R,K){var ae=R;if((x&1)===0&&(x&2)===0&&R!==null)e:for(;;){if(R===null)return;var xe=R.tag;if(xe===3||xe===4){var Be=R.stateNode.containerInfo;if(Be===K||Be.nodeType===8&&Be.parentNode===K)break;if(xe===4)for(xe=R.return;xe!==null;){var et=xe.tag;if((et===3||et===4)&&(et=xe.stateNode.containerInfo,et===K||et.nodeType===8&&et.parentNode===K))return;xe=xe.return}for(;Be!==null;){if(xe=Nu(Be),xe===null)return;if(et=xe.tag,et===5||et===6){R=ae=xe;continue e}Be=Be.parentNode}}R=R.return}st(function(){var At=ae,er=Sr(N),rr=[];e:{var Qt=ax.get(m);if(Qt!==void 0){var Or=Sl,Ur=m;switch(m){case"keypress":if(hd(N)===0)break e;case"keydown":case"keyup":Or=tb;break;case"focusin":Ur="focus",Or=gg;break;case"focusout":Ur="blur",Or=gg;break;case"beforeblur":case"afterblur":Or=gg;break;case"click":if(N.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Or=ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Or=Cl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Or=vg;break;case tx:case rx:case nx:Or=G1;break;case sx:Or=$0;break;case"scroll":Or=J2;break;case"wheel":Or=K1;break;case"copy":case"cut":case"paste":Or=pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Or=pd}var zr=(x&4)!==0,Na=!zr&&m==="scroll",yt=zr?Qt!==null?Qt+"Capture":null:Qt;zr=[];for(var ut=At,St;ut!==null;){St=ut;var lr=St.stateNode;if(St.tag===5&&lr!==null&&(St=lr,yt!==null&&(lr=Vt(ut,yt),lr!=null&&zr.push(q0(ut,lr,St)))),Na)break;ut=ut.return}0<zr.length&&(Qt=new Or(Qt,Ur,null,N,er),rr.push({event:Qt,listeners:zr}))}}if((x&7)===0){e:{if(Qt=m==="mouseover"||m==="pointerover",Or=m==="mouseout"||m==="pointerout",Qt&&N!==ur&&(Ur=N.relatedTarget||N.fromElement)&&(Nu(Ur)||Ur[Ql]))break e;if((Or||Qt)&&(Qt=er.window===er?er:(Qt=er.ownerDocument)?Qt.defaultView||Qt.parentWindow:window,Or?(Ur=N.relatedTarget||N.toElement,Or=At,Ur=Ur?Nu(Ur):null,Ur!==null&&(Na=he(Ur),Ur!==Na||Ur.tag!==5&&Ur.tag!==6)&&(Ur=null)):(Or=null,Ur=At),Or!==Ur)){if(zr=ws,lr="onMouseLeave",yt="onMouseEnter",ut="mouse",(m==="pointerout"||m==="pointerover")&&(zr=pd,lr="onPointerLeave",yt="onPointerEnter",ut="pointer"),Na=Or==null?Qt:Sa(Or),St=Ur==null?Qt:Sa(Ur),Qt=new zr(lr,ut+"leave",Or,N,er),Qt.target=Na,Qt.relatedTarget=St,lr=null,Nu(er)===At&&(zr=new zr(yt,ut+"enter",Ur,N,er),zr.target=St,zr.relatedTarget=Na,lr=zr),Na=lr,Or&&Ur)t:{for(zr=Or,yt=Ur,ut=0,St=zr;St;St=kd(St))ut++;for(St=0,lr=yt;lr;lr=kd(lr))St++;for(;0<ut-St;)zr=kd(zr),ut--;for(;0<St-ut;)yt=kd(yt),St--;for(;ut--;){if(zr===yt||yt!==null&&zr===yt.alternate)break t;zr=kd(zr),yt=kd(yt)}zr=null}else zr=null;Or!==null&&cb(rr,Qt,Or,zr,!1),Ur!==null&&Na!==null&&cb(rr,Na,Ur,zr,!0)}}e:{if(Qt=At?Sa(At):window,Or=Qt.nodeName&&Qt.nodeName.toLowerCase(),Or==="select"||Or==="input"&&Qt.type==="file")var Hr=el;else if(zc(Qt))if(W0)Hr=Z1;else{Hr=Ms;var Zr=Q1}else(Or=Qt.nodeName)&&Or.toLowerCase()==="input"&&(Qt.type==="checkbox"||Qt.type==="radio")&&(Hr=Sg);if(Hr&&(Hr=Hr(m,At))){Sh(rr,Hr,N,er);break e}Zr&&Zr(m,Qt,At),m==="focusout"&&(Zr=Qt._wrapperState)&&Zr.controlled&&Qt.type==="number"&&Ve(Qt,"number",Qt.value)}switch(Zr=At?Sa(At):window,m){case"focusin":(zc(Zr)||Zr.contentEditable==="true")&&(G0=Zr,Ba=At,bd=null);break;case"focusout":bd=Ba=G0=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,kg(rr,N,er);break;case"selectionchange":if(Ch)break;case"keydown":case"keyup":kg(rr,N,er)}var en;if(_h)e:{switch(m){case"compositionstart":var mn="onCompositionStart";break e;case"compositionend":mn="onCompositionEnd";break e;case"compositionupdate":mn="onCompositionUpdate";break e}mn=void 0}else Ao?Y1(m,N)&&(mn="onCompositionEnd"):m==="keydown"&&N.keyCode===229&&(mn="onCompositionStart");mn&&(Eo&&N.locale!=="ko"&&(Ao||mn!=="onCompositionStart"?mn==="onCompositionEnd"&&Ao&&(en=yh()):(Ja=er,vu="value"in Ja?Ja.value:Ja.textContent,Ao=!0)),Zr=Pg(At,mn),0<Zr.length&&(mn=new md(mn,m,null,N,er),rr.push({event:mn,listeners:Zr}),en?mn.data=en:(en=Tl(N),en!==null&&(mn.data=en)))),(en=U0?X1(m,N):ab(m,N))&&(At=Pg(At,"onBeforeInput"),0<At.length&&(er=new md("onBeforeInput","beforeinput",null,N,er),rr.push({event:er,listeners:At}),er.data=en))}ox(rr,x)})}function q0(m,x,N){return{instance:m,listener:x,currentTarget:N}}function Pg(m,x){for(var N=x+"Capture",R=[];m!==null;){var K=m,ae=K.stateNode;K.tag===5&&ae!==null&&(K=ae,ae=Vt(m,N),ae!=null&&R.unshift(q0(m,ae,K)),ae=Vt(m,x),ae!=null&&R.push(q0(m,ae,K))),m=m.return}return R}function kd(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function cb(m,x,N,R,K){for(var ae=x._reactName,xe=[];N!==null&&N!==R;){var Be=N,et=Be.alternate,At=Be.stateNode;if(et!==null&&et===R)break;Be.tag===5&&At!==null&&(Be=At,K?(et=Vt(N,ae),et!=null&&xe.unshift(q0(N,et,Be))):K||(et=Vt(N,ae),et!=null&&xe.push(q0(N,et,Be)))),N=N.return}xe.length!==0&&m.push({event:x,listeners:xe})}var rS=/\r\n?/g,ub=/\u0000|\uFFFD/g;function cx(m){return(typeof m=="string"?m:""+m).replace(rS,`
`).replace(ub,"")}function Eh(m,x,N){if(x=cx(x),cx(m)!==x&&N)throw Error(r(425))}function Cd(){}var ux=null,dx=null;function fx(m,x){return m==="textarea"||m==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var Po=typeof setTimeout=="function"?setTimeout:void 0,hx=typeof clearTimeout=="function"?clearTimeout:void 0,Ah=typeof Promise=="function"?Promise:void 0,db=typeof queueMicrotask=="function"?queueMicrotask:typeof Ah<"u"?function(m){return Ah.resolve(null).then(m).catch(fb)}:Po;function fb(m){setTimeout(function(){throw m})}function Fg(m,x){var N=x,R=0;do{var K=N.nextSibling;if(m.removeChild(N),K&&K.nodeType===8)if(N=K.data,N==="/$"){if(R===0){m.removeChild(K),ao(x);return}R--}else N!=="$"&&N!=="$?"&&N!=="$!"||R++;N=K}while(N);ao(x)}function Jl(m){for(;m!=null;m=m.nextSibling){var x=m.nodeType;if(x===1||x===3)break;if(x===8){if(x=m.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return m}function Td(m){m=m.previousSibling;for(var x=0;m;){if(m.nodeType===8){var N=m.data;if(N==="$"||N==="$!"||N==="$?"){if(x===0)return m;x--}else N==="/$"&&x++}m=m.previousSibling}return null}var Tu=Math.random().toString(36).slice(2),rl="__reactFiber$"+Tu,jh="__reactProps$"+Tu,Ql="__reactContainer$"+Tu,Mg="__reactEvents$"+Tu,hb="__reactListeners$"+Tu,mb="__reactHandles$"+Tu;function Nu(m){var x=m[rl];if(x)return x;for(var N=m.parentNode;N;){if(x=N[Ql]||N[rl]){if(N=x.alternate,x.child!==null||N!==null&&N.child!==null)for(m=Td(m);m!==null;){if(N=m[rl])return N;m=Td(m)}return x}m=N,N=m.parentNode}return null}function Ph(m){return m=m[rl]||m[Ql],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function Sa(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(r(33))}function $a(m){return m[jh]||null}var Og=[],Nd=-1;function Hc(m){return{current:m}}function gs(m){0>Nd||(m.current=Og[Nd],Og[Nd]=null,Nd--)}function ss(m,x){Nd++,Og[Nd]=m.current,m.current=x}var Zl={},ei=Hc(Zl),gi=Hc(!1),Eu=Zl;function Ed(m,x){var N=m.type.contextTypes;if(!N)return Zl;var R=m.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===x)return R.__reactInternalMemoizedMaskedChildContext;var K={},ae;for(ae in N)K[ae]=x[ae];return R&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=x,m.__reactInternalMemoizedMaskedChildContext=K),K}function pi(m){return m=m.childContextTypes,m!=null}function K0(){gs(gi),gs(ei)}function mx(m,x,N){if(ei.current!==Zl)throw Error(r(168));ss(ei,x),ss(gi,N)}function Dg(m,x,N){var R=m.stateNode;if(x=x.childContextTypes,typeof R.getChildContext!="function")return N;R=R.getChildContext();for(var K in R)if(!(K in x))throw Error(r(108,X(m)||"Unknown",K));return G({},N,R)}function Ad(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Zl,Eu=ei.current,ss(ei,m),ss(gi,gi.current),!0}function gb(m,x,N){var R=m.stateNode;if(!R)throw Error(r(169));N?(m=Dg(m,x,Eu),R.__reactInternalMemoizedMergedChildContext=m,gs(gi),gs(ei),ss(ei,m)):gs(gi),ss(gi,N)}var ec=null,Y0=!1,Rg=!1;function Fh(m){ec===null?ec=[m]:ec.push(m)}function Gc(m){Y0=!0,Fh(m)}function Au(){if(!Rg&&ec!==null){Rg=!0;var m=0,x=xn;try{var N=ec;for(xn=1;m<N.length;m++){var R=N[m];do R=R(!0);while(R!==null)}ec=null,Y0=!1}catch(K){throw ec!==null&&(ec=ec.slice(m+1)),de(_r,Au),K}finally{xn=x,Rg=!1}}return null}var Ii=[],jd=0,ju=null,Pu=0,Li=[],Bi=0,Fu=null,Fo=1,Ns="";function Pd(m,x){Ii[jd++]=Pu,Ii[jd++]=ju,ju=m,Pu=x}function pb(m,x,N){Li[Bi++]=Fo,Li[Bi++]=Ns,Li[Bi++]=Fu,Fu=m;var R=Fo;m=Ns;var K=32-Lr(R)-1;R&=~(1<<K),N+=1;var ae=32-Lr(x)+K;if(30<ae){var xe=K-K%5;ae=(R&(1<<xe)-1).toString(32),R>>=xe,K-=xe,Fo=1<<32-Lr(x)+K|N<<K|R,Ns=ae+m}else Fo=1<<ae|N<<K|R,Ns=m}function X0(m){m.return!==null&&(Pd(m,1),pb(m,1,0))}function Ua(m){for(;m===ju;)ju=Ii[--jd],Ii[jd]=null,Pu=Ii[--jd],Ii[jd]=null;for(;m===Fu;)Fu=Li[--Bi],Li[Bi]=null,Ns=Li[--Bi],Li[Bi]=null,Fo=Li[--Bi],Li[Bi]=null}var Mo=null,kr=null,Zn=!1,Oo=null;function gx(m,x){var N=oc(5,null,null,0);N.elementType="DELETED",N.stateNode=x,N.return=m,x=m.deletions,x===null?(m.deletions=[N],m.flags|=16):x.push(N)}function xb(m,x){switch(m.tag){case 5:var N=m.type;return x=x.nodeType!==1||N.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(m.stateNode=x,Mo=m,kr=Jl(x.firstChild),!0):!1;case 6:return x=m.pendingProps===""||x.nodeType!==3?null:x,x!==null?(m.stateNode=x,Mo=m,kr=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(N=Fu!==null?{id:Fo,overflow:Ns}:null,m.memoizedState={dehydrated:x,treeContext:N,retryLane:1073741824},N=oc(18,null,null,0),N.stateNode=x,N.return=m,m.child=N,Mo=m,kr=null,!0):!1;default:return!1}}function Fd(m){return(m.mode&1)!==0&&(m.flags&128)===0}function J0(m){if(Zn){var x=kr;if(x){var N=x;if(!xb(m,x)){if(Fd(m))throw Error(r(418));x=Jl(N.nextSibling);var R=Mo;x&&xb(m,x)?gx(R,N):(m.flags=m.flags&-4097|2,Zn=!1,Mo=m)}}else{if(Fd(m))throw Error(r(418));m.flags=m.flags&-4097|2,Zn=!1,Mo=m}}}function Ig(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Mo=m}function Mh(m){if(m!==Mo)return!1;if(!Zn)return Ig(m),Zn=!0,!1;var x;if((x=m.tag!==3)&&!(x=m.tag!==5)&&(x=m.type,x=x!=="head"&&x!=="body"&&!fx(m.type,m.memoizedProps)),x&&(x=kr)){if(Fd(m))throw px(),Error(r(418));for(;x;)gx(m,x),x=Jl(x.nextSibling)}if(Ig(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));e:{for(m=m.nextSibling,x=0;m;){if(m.nodeType===8){var N=m.data;if(N==="/$"){if(x===0){kr=Jl(m.nextSibling);break e}x--}else N!=="$"&&N!=="$!"&&N!=="$?"||x++}m=m.nextSibling}kr=null}}else kr=Mo?Jl(m.stateNode.nextSibling):null;return!0}function px(){for(var m=kr;m;)m=Jl(m.nextSibling)}function Md(){kr=Mo=null,Zn=!1}function Oh(m){Oo===null?Oo=[m]:Oo.push(m)}var xx=T.ReactCurrentBatchConfig;function Js(m,x,N){if(m=N.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(N._owner){if(N=N._owner,N){if(N.tag!==1)throw Error(r(309));var R=N.stateNode}if(!R)throw Error(r(147,m));var K=R,ae=""+m;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===ae?x.ref:(x=function(xe){var Be=K.refs;xe===null?delete Be[ae]:Be[ae]=xe},x._stringRef=ae,x)}if(typeof m!="string")throw Error(r(284));if(!N._owner)throw Error(r(290,m))}return m}function lo(m,x){throw m=Object.prototype.toString.call(x),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":m))}function Nl(m){var x=m._init;return x(m._payload)}function Lg(m){function x(yt,ut){if(m){var St=yt.deletions;St===null?(yt.deletions=[ut],yt.flags|=16):St.push(ut)}}function N(yt,ut){if(!m)return null;for(;ut!==null;)x(yt,ut),ut=ut.sibling;return null}function R(yt,ut){for(yt=new Map;ut!==null;)ut.key!==null?yt.set(ut.key,ut):yt.set(ut.index,ut),ut=ut.sibling;return yt}function K(yt,ut){return yt=yf(yt,ut),yt.index=0,yt.sibling=null,yt}function ae(yt,ut,St){return yt.index=St,m?(St=yt.alternate,St!==null?(St=St.index,St<ut?(yt.flags|=2,ut):St):(yt.flags|=2,ut)):(yt.flags|=1048576,ut)}function xe(yt){return m&&yt.alternate===null&&(yt.flags|=2),yt}function Be(yt,ut,St,lr){return ut===null||ut.tag!==6?(ut=SS(St,yt.mode,lr),ut.return=yt,ut):(ut=K(ut,St),ut.return=yt,ut)}function et(yt,ut,St,lr){var Hr=St.type;return Hr===F?er(yt,ut,St.props.children,lr,St.key):ut!==null&&(ut.elementType===Hr||typeof Hr=="object"&&Hr!==null&&Hr.$$typeof===ee&&Nl(Hr)===ut.type)?(lr=K(ut,St.props),lr.ref=Js(yt,ut,St),lr.return=yt,lr):(lr=Lb(St.type,St.key,St.props,null,yt.mode,lr),lr.ref=Js(yt,ut,St),lr.return=yt,lr)}function At(yt,ut,St,lr){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==St.containerInfo||ut.stateNode.implementation!==St.implementation?(ut=kS(St,yt.mode,lr),ut.return=yt,ut):(ut=K(ut,St.children||[]),ut.return=yt,ut)}function er(yt,ut,St,lr,Hr){return ut===null||ut.tag!==7?(ut=Gh(St,yt.mode,lr,Hr),ut.return=yt,ut):(ut=K(ut,St),ut.return=yt,ut)}function rr(yt,ut,St){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return ut=SS(""+ut,yt.mode,St),ut.return=yt,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case E:return St=Lb(ut.type,ut.key,ut.props,null,yt.mode,St),St.ref=Js(yt,null,ut),St.return=yt,St;case A:return ut=kS(ut,yt.mode,St),ut.return=yt,ut;case ee:var lr=ut._init;return rr(yt,lr(ut._payload),St)}if(at(ut)||U(ut))return ut=Gh(ut,yt.mode,St,null),ut.return=yt,ut;lo(yt,ut)}return null}function Qt(yt,ut,St,lr){var Hr=ut!==null?ut.key:null;if(typeof St=="string"&&St!==""||typeof St=="number")return Hr!==null?null:Be(yt,ut,""+St,lr);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case E:return St.key===Hr?et(yt,ut,St,lr):null;case A:return St.key===Hr?At(yt,ut,St,lr):null;case ee:return Hr=St._init,Qt(yt,ut,Hr(St._payload),lr)}if(at(St)||U(St))return Hr!==null?null:er(yt,ut,St,lr,null);lo(yt,St)}return null}function Or(yt,ut,St,lr,Hr){if(typeof lr=="string"&&lr!==""||typeof lr=="number")return yt=yt.get(St)||null,Be(ut,yt,""+lr,Hr);if(typeof lr=="object"&&lr!==null){switch(lr.$$typeof){case E:return yt=yt.get(lr.key===null?St:lr.key)||null,et(ut,yt,lr,Hr);case A:return yt=yt.get(lr.key===null?St:lr.key)||null,At(ut,yt,lr,Hr);case ee:var Zr=lr._init;return Or(yt,ut,St,Zr(lr._payload),Hr)}if(at(lr)||U(lr))return yt=yt.get(St)||null,er(ut,yt,lr,Hr,null);lo(ut,lr)}return null}function Ur(yt,ut,St,lr){for(var Hr=null,Zr=null,en=ut,mn=ut=0,_i=null;en!==null&&mn<St.length;mn++){en.index>mn?(_i=en,en=null):_i=en.sibling;var Kn=Qt(yt,en,St[mn],lr);if(Kn===null){en===null&&(en=_i);break}m&&en&&Kn.alternate===null&&x(yt,en),ut=ae(Kn,ut,mn),Zr===null?Hr=Kn:Zr.sibling=Kn,Zr=Kn,en=_i}if(mn===St.length)return N(yt,en),Zn&&Pd(yt,mn),Hr;if(en===null){for(;mn<St.length;mn++)en=rr(yt,St[mn],lr),en!==null&&(ut=ae(en,ut,mn),Zr===null?Hr=en:Zr.sibling=en,Zr=en);return Zn&&Pd(yt,mn),Hr}for(en=R(yt,en);mn<St.length;mn++)_i=Or(en,yt,mn,St[mn],lr),_i!==null&&(m&&_i.alternate!==null&&en.delete(_i.key===null?mn:_i.key),ut=ae(_i,ut,mn),Zr===null?Hr=_i:Zr.sibling=_i,Zr=_i);return m&&en.forEach(function(vf){return x(yt,vf)}),Zn&&Pd(yt,mn),Hr}function zr(yt,ut,St,lr){var Hr=U(St);if(typeof Hr!="function")throw Error(r(150));if(St=Hr.call(St),St==null)throw Error(r(151));for(var Zr=Hr=null,en=ut,mn=ut=0,_i=null,Kn=St.next();en!==null&&!Kn.done;mn++,Kn=St.next()){en.index>mn?(_i=en,en=null):_i=en.sibling;var vf=Qt(yt,en,Kn.value,lr);if(vf===null){en===null&&(en=_i);break}m&&en&&vf.alternate===null&&x(yt,en),ut=ae(vf,ut,mn),Zr===null?Hr=vf:Zr.sibling=vf,Zr=vf,en=_i}if(Kn.done)return N(yt,en),Zn&&Pd(yt,mn),Hr;if(en===null){for(;!Kn.done;mn++,Kn=St.next())Kn=rr(yt,Kn.value,lr),Kn!==null&&(ut=ae(Kn,ut,mn),Zr===null?Hr=Kn:Zr.sibling=Kn,Zr=Kn);return Zn&&Pd(yt,mn),Hr}for(en=R(yt,en);!Kn.done;mn++,Kn=St.next())Kn=Or(en,yt,mn,Kn.value,lr),Kn!==null&&(m&&Kn.alternate!==null&&en.delete(Kn.key===null?mn:Kn.key),ut=ae(Kn,ut,mn),Zr===null?Hr=Kn:Zr.sibling=Kn,Zr=Kn);return m&&en.forEach(function(FJ){return x(yt,FJ)}),Zn&&Pd(yt,mn),Hr}function Na(yt,ut,St,lr){if(typeof St=="object"&&St!==null&&St.type===F&&St.key===null&&(St=St.props.children),typeof St=="object"&&St!==null){switch(St.$$typeof){case E:e:{for(var Hr=St.key,Zr=ut;Zr!==null;){if(Zr.key===Hr){if(Hr=St.type,Hr===F){if(Zr.tag===7){N(yt,Zr.sibling),ut=K(Zr,St.props.children),ut.return=yt,yt=ut;break e}}else if(Zr.elementType===Hr||typeof Hr=="object"&&Hr!==null&&Hr.$$typeof===ee&&Nl(Hr)===Zr.type){N(yt,Zr.sibling),ut=K(Zr,St.props),ut.ref=Js(yt,Zr,St),ut.return=yt,yt=ut;break e}N(yt,Zr);break}else x(yt,Zr);Zr=Zr.sibling}St.type===F?(ut=Gh(St.props.children,yt.mode,lr,St.key),ut.return=yt,yt=ut):(lr=Lb(St.type,St.key,St.props,null,yt.mode,lr),lr.ref=Js(yt,ut,St),lr.return=yt,yt=lr)}return xe(yt);case A:e:{for(Zr=St.key;ut!==null;){if(ut.key===Zr)if(ut.tag===4&&ut.stateNode.containerInfo===St.containerInfo&&ut.stateNode.implementation===St.implementation){N(yt,ut.sibling),ut=K(ut,St.children||[]),ut.return=yt,yt=ut;break e}else{N(yt,ut);break}else x(yt,ut);ut=ut.sibling}ut=kS(St,yt.mode,lr),ut.return=yt,yt=ut}return xe(yt);case ee:return Zr=St._init,Na(yt,ut,Zr(St._payload),lr)}if(at(St))return Ur(yt,ut,St,lr);if(U(St))return zr(yt,ut,St,lr);lo(yt,St)}return typeof St=="string"&&St!==""||typeof St=="number"?(St=""+St,ut!==null&&ut.tag===6?(N(yt,ut.sibling),ut=K(ut,St),ut.return=yt,yt=ut):(N(yt,ut),ut=SS(St,yt.mode,lr),ut.return=yt,yt=ut),xe(yt)):N(yt,ut)}return Na}var Od=Lg(!0),nl=Lg(!1),Dh=Hc(null),Do=null,Q0=null,Bg=null;function $g(){Bg=Q0=Do=null}function Ug(m){var x=Dh.current;gs(Dh),m._currentValue=x}function zg(m,x,N){for(;m!==null;){var R=m.alternate;if((m.childLanes&x)!==x?(m.childLanes|=x,R!==null&&(R.childLanes|=x)):R!==null&&(R.childLanes&x)!==x&&(R.childLanes|=x),m===N)break;m=m.return}}function Vc(m,x){Do=m,Bg=Q0=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&x)!==0&&(le=!0),m.firstContext=null)}function $i(m){var x=m._currentValue;if(Bg!==m)if(m={context:m,memoizedValue:x,next:null},Q0===null){if(Do===null)throw Error(r(308));Q0=m,Do.dependencies={lanes:0,firstContext:m}}else Q0=Q0.next=m;return x}var tc=null;function Z0(m){tc===null?tc=[m]:tc.push(m)}function Rh(m,x,N,R){var K=x.interleaved;return K===null?(N.next=N,Z0(x)):(N.next=K.next,K.next=N),x.interleaved=N,Ro(m,R)}function Ro(m,x){m.lanes|=x;var N=m.alternate;for(N!==null&&(N.lanes|=x),N=m,m=m.return;m!==null;)m.childLanes|=x,N=m.alternate,N!==null&&(N.childLanes|=x),N=m,m=m.return;return N.tag===3?N.stateNode:null}var rc=!1;function Ih(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wg(m,x){m=m.updateQueue,x.updateQueue===m&&(x.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function nc(m,x){return{eventTime:m,lane:x,tag:0,payload:null,callback:null,next:null}}function sc(m,x,N){var R=m.updateQueue;if(R===null)return null;if(R=R.shared,(Wn&2)!==0){var K=R.pending;return K===null?x.next=x:(x.next=K.next,K.next=x),R.pending=x,Ro(m,N)}return K=R.interleaved,K===null?(x.next=x,Z0(R)):(x.next=K.next,K.next=x),R.interleaved=x,Ro(m,N)}function Hg(m,x,N){if(x=x.updateQueue,x!==null&&(x=x.shared,(N&4194240)!==0)){var R=x.lanes;R&=m.pendingLanes,N|=R,x.lanes=N,mi(m,N)}}function Lh(m,x){var N=m.updateQueue,R=m.alternate;if(R!==null&&(R=R.updateQueue,N===R)){var K=null,ae=null;if(N=N.firstBaseUpdate,N!==null){do{var xe={eventTime:N.eventTime,lane:N.lane,tag:N.tag,payload:N.payload,callback:N.callback,next:null};ae===null?K=ae=xe:ae=ae.next=xe,N=N.next}while(N!==null);ae===null?K=ae=x:ae=ae.next=x}else K=ae=x;N={baseState:R.baseState,firstBaseUpdate:K,lastBaseUpdate:ae,shared:R.shared,effects:R.effects},m.updateQueue=N;return}m=N.lastBaseUpdate,m===null?N.firstBaseUpdate=x:m.next=x,N.lastBaseUpdate=x}function ef(m,x,N,R){var K=m.updateQueue;rc=!1;var ae=K.firstBaseUpdate,xe=K.lastBaseUpdate,Be=K.shared.pending;if(Be!==null){K.shared.pending=null;var et=Be,At=et.next;et.next=null,xe===null?ae=At:xe.next=At,xe=et;var er=m.alternate;er!==null&&(er=er.updateQueue,Be=er.lastBaseUpdate,Be!==xe&&(Be===null?er.firstBaseUpdate=At:Be.next=At,er.lastBaseUpdate=et))}if(ae!==null){var rr=K.baseState;xe=0,er=At=et=null,Be=ae;do{var Qt=Be.lane,Or=Be.eventTime;if((R&Qt)===Qt){er!==null&&(er=er.next={eventTime:Or,lane:0,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null});e:{var Ur=m,zr=Be;switch(Qt=x,Or=N,zr.tag){case 1:if(Ur=zr.payload,typeof Ur=="function"){rr=Ur.call(Or,rr,Qt);break e}rr=Ur;break e;case 3:Ur.flags=Ur.flags&-65537|128;case 0:if(Ur=zr.payload,Qt=typeof Ur=="function"?Ur.call(Or,rr,Qt):Ur,Qt==null)break e;rr=G({},rr,Qt);break e;case 2:rc=!0}}Be.callback!==null&&Be.lane!==0&&(m.flags|=64,Qt=K.effects,Qt===null?K.effects=[Be]:Qt.push(Be))}else Or={eventTime:Or,lane:Qt,tag:Be.tag,payload:Be.payload,callback:Be.callback,next:null},er===null?(At=er=Or,et=rr):er=er.next=Or,xe|=Qt;if(Be=Be.next,Be===null){if(Be=K.shared.pending,Be===null)break;Qt=Be,Be=Qt.next,Qt.next=null,K.lastBaseUpdate=Qt,K.shared.pending=null}}while(!0);if(er===null&&(et=rr),K.baseState=et,K.firstBaseUpdate=At,K.lastBaseUpdate=er,x=K.shared.interleaved,x!==null){K=x;do xe|=K.lane,K=K.next;while(K!==x)}else ae===null&&(K.shared.lanes=0);Uh|=xe,m.lanes=xe,m.memoizedState=rr}}function zs(m,x,N){if(m=x.effects,x.effects=null,m!==null)for(x=0;x<m.length;x++){var R=m[x],K=R.callback;if(K!==null){if(R.callback=null,R=N,typeof K!="function")throw Error(r(191,K));K.call(R)}}}var bn={},as=Hc(bn),Es=Hc(bn),Qs=Hc(bn);function ka(m){if(m===bn)throw Error(r(174));return m}function Mu(m,x){switch(ss(Qs,x),ss(Es,m),ss(as,bn),m=x.nodeType,m){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:it(null,"");break;default:m=m===8?x.parentNode:x,x=m.namespaceURI||null,m=m.tagName,x=it(x,m)}gs(as),ss(as,x)}function As(){gs(as),gs(Es),gs(Qs)}function tf(m){ka(Qs.current);var x=ka(as.current),N=it(x,m.type);x!==N&&(ss(Es,m),ss(as,N))}function qc(m){Es.current===m&&(gs(as),gs(Es))}var ps=Hc(0);function rf(m){for(var x=m;x!==null;){if(x.tag===13){var N=x.memoizedState;if(N!==null&&(N=N.dehydrated,N===null||N.data==="$?"||N.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var Dd=[];function xi(){for(var m=0;m<Dd.length;m++)Dd[m]._workInProgressVersionPrimary=null;Dd.length=0}var nf=T.ReactCurrentDispatcher,Bh=T.ReactCurrentBatchConfig,Ui=0,rs=null,Ws=null,oa=null,El=!1,Ou=!1,sl=0,Gg=0;function la(){throw Error(r(321))}function $h(m,x){if(x===null)return!1;for(var N=0;N<x.length&&N<m.length;N++)if(!oo(m[N],x[N]))return!1;return!0}function sf(m,x,N,R,K,ae){if(Ui=ae,rs=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,nf.current=m===null||m.memoizedState===null?sS:Iu,m=N(R,K),Ou){ae=0;do{if(Ou=!1,sl=0,25<=ae)throw Error(r(301));ae+=1,oa=Ws=null,x.updateQueue=null,nf.current=Xg,m=N(R,K)}while(Ou)}if(nf.current=cf,x=Ws!==null&&Ws.next!==null,Ui=0,oa=Ws=rs=null,El=!1,x)throw Error(r(300));return m}function af(){var m=sl!==0;return sl=0,m}function _s(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oa===null?rs.memoizedState=oa=m:oa=oa.next=m,oa}function Ca(){if(Ws===null){var m=rs.alternate;m=m!==null?m.memoizedState:null}else m=Ws.next;var x=oa===null?rs.memoizedState:oa.next;if(x!==null)oa=x,Ws=m;else{if(m===null)throw Error(r(310));Ws=m,m={memoizedState:Ws.memoizedState,baseState:Ws.baseState,baseQueue:Ws.baseQueue,queue:Ws.queue,next:null},oa===null?rs.memoizedState=oa=m:oa=oa.next=m}return oa}function yi(m,x){return typeof x=="function"?x(m):x}function vi(m){var x=Ca(),N=x.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=m;var R=Ws,K=R.baseQueue,ae=N.pending;if(ae!==null){if(K!==null){var xe=K.next;K.next=ae.next,ae.next=xe}R.baseQueue=K=ae,N.pending=null}if(K!==null){ae=K.next,R=R.baseState;var Be=xe=null,et=null,At=ae;do{var er=At.lane;if((Ui&er)===er)et!==null&&(et=et.next={lane:0,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null}),R=At.hasEagerState?At.eagerState:m(R,At.action);else{var rr={lane:er,action:At.action,hasEagerState:At.hasEagerState,eagerState:At.eagerState,next:null};et===null?(Be=et=rr,xe=R):et=et.next=rr,rs.lanes|=er,Uh|=er}At=At.next}while(At!==null&&At!==ae);et===null?xe=R:et.next=Be,oo(R,x.memoizedState)||(le=!0),x.memoizedState=R,x.baseState=xe,x.baseQueue=et,N.lastRenderedState=R}if(m=N.interleaved,m!==null){K=m;do ae=K.lane,rs.lanes|=ae,Uh|=ae,K=K.next;while(K!==m)}else K===null&&(N.lanes=0);return[x.memoizedState,N.dispatch]}function Vg(m){var x=Ca(),N=x.queue;if(N===null)throw Error(r(311));N.lastRenderedReducer=m;var R=N.dispatch,K=N.pending,ae=x.memoizedState;if(K!==null){N.pending=null;var xe=K=K.next;do ae=m(ae,xe.action),xe=xe.next;while(xe!==K);oo(ae,x.memoizedState)||(le=!0),x.memoizedState=ae,x.baseQueue===null&&(x.baseState=ae),N.lastRenderedState=ae}return[ae,R]}function qg(){}function Kg(m,x){var N=rs,R=Ca(),K=x(),ae=!oo(R.memoizedState,K);if(ae&&(R.memoizedState=K,le=!0),R=R.queue,wx(yx.bind(null,N,R,m),[m]),R.getSnapshot!==x||ae||oa!==null&&oa.memoizedState.tag&1){if(N.flags|=2048,of(9,Kc.bind(null,N,R,K,x),void 0,null),wi===null)throw Error(r(349));(Ui&30)!==0||yb(N,x,K)}return K}function yb(m,x,N){m.flags|=16384,m={getSnapshot:x,value:N},x=rs.updateQueue,x===null?(x={lastEffect:null,stores:null},rs.updateQueue=x,x.stores=[m]):(N=x.stores,N===null?x.stores=[m]:N.push(m))}function Kc(m,x,N,R){x.value=N,x.getSnapshot=R,vx(x)&&Yg(m)}function yx(m,x,N){return N(function(){vx(x)&&Yg(m)})}function vx(m){var x=m.getSnapshot;m=m.value;try{var N=x();return!oo(m,N)}catch{return!0}}function Yg(m){var x=Ro(m,1);x!==null&&Qc(x,m,1,-1)}function Du(m){var x=_s();return typeof m=="function"&&(m=m()),x.memoizedState=x.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:m},x.queue=m,m=m.dispatch=kb.bind(null,rs,m),[x.memoizedState,m]}function of(m,x,N,R){return m={tag:m,create:x,destroy:N,deps:R,next:null},x=rs.updateQueue,x===null?(x={lastEffect:null,stores:null},rs.updateQueue=x,x.lastEffect=m.next=m):(N=x.lastEffect,N===null?x.lastEffect=m.next=m:(R=N.next,N.next=m,m.next=R,x.lastEffect=m)),m}function bx(){return Ca().memoizedState}function lf(m,x,N,R){var K=_s();rs.flags|=m,K.memoizedState=of(1|x,N,void 0,R===void 0?null:R)}function Rd(m,x,N,R){var K=Ca();R=R===void 0?null:R;var ae=void 0;if(Ws!==null){var xe=Ws.memoizedState;if(ae=xe.destroy,R!==null&&$h(R,xe.deps)){K.memoizedState=of(x,N,ae,R);return}}rs.flags|=m,K.memoizedState=of(1|x,N,ae,R)}function vb(m,x){return lf(8390656,8,m,x)}function wx(m,x){return Rd(2048,8,m,x)}function _x(m,x){return Rd(4,2,m,x)}function Sx(m,x){return Rd(4,4,m,x)}function Ru(m,x){if(typeof x=="function")return m=m(),x(m),function(){x(null)};if(x!=null)return m=m(),x.current=m,function(){x.current=null}}function bb(m,x,N){return N=N!=null?N.concat([m]):null,Rd(4,4,Ru.bind(null,x,m),N)}function Yc(){}function kx(m,x){var N=Ca();x=x===void 0?null:x;var R=N.memoizedState;return R!==null&&x!==null&&$h(x,R[1])?R[0]:(N.memoizedState=[m,x],m)}function Ss(m,x){var N=Ca();x=x===void 0?null:x;var R=N.memoizedState;return R!==null&&x!==null&&$h(x,R[1])?R[0]:(m=m(),N.memoizedState=[m,x],m)}function wb(m,x,N){return(Ui&21)===0?(m.baseState&&(m.baseState=!1,le=!0),m.memoizedState=N):(oo(N,x)||(N=Tn(),rs.lanes|=N,Uh|=N,m.baseState=!0),x)}function _b(m,x){var N=xn;xn=N!==0&&4>N?N:4,m(!0);var R=Bh.transition;Bh.transition={};try{m(!1),x()}finally{xn=N,Bh.transition=R}}function Sb(){return Ca().memoizedState}function nS(m,x,N){var R=pf(m);if(N={lane:R,action:N,hasEagerState:!1,eagerState:null,next:null},Cx(m))Cb(x,N);else if(N=Rh(m,x,N,R),N!==null){var K=Lo();Qc(N,m,R,K),Io(N,x,R)}}function kb(m,x,N){var R=pf(m),K={lane:R,action:N,hasEagerState:!1,eagerState:null,next:null};if(Cx(m))Cb(x,K);else{var ae=m.alternate;if(m.lanes===0&&(ae===null||ae.lanes===0)&&(ae=x.lastRenderedReducer,ae!==null))try{var xe=x.lastRenderedState,Be=ae(xe,N);if(K.hasEagerState=!0,K.eagerState=Be,oo(Be,xe)){var et=x.interleaved;et===null?(K.next=K,Z0(x)):(K.next=et.next,et.next=K),x.interleaved=K;return}}catch{}finally{}N=Rh(m,x,K,R),N!==null&&(K=Lo(),Qc(N,m,R,K),Io(N,x,R))}}function Cx(m){var x=m.alternate;return m===rs||x!==null&&x===rs}function Cb(m,x){Ou=El=!0;var N=m.pending;N===null?x.next=x:(x.next=N.next,N.next=x),m.pending=x}function Io(m,x,N){if((N&4194240)!==0){var R=x.lanes;R&=m.pendingLanes,N|=R,x.lanes=N,mi(m,N)}}var cf={readContext:$i,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useInsertionEffect:la,useLayoutEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useDeferredValue:la,useTransition:la,useMutableSource:la,useSyncExternalStore:la,useId:la,unstable_isNewReconciler:!1},sS={readContext:$i,useCallback:function(m,x){return _s().memoizedState=[m,x===void 0?null:x],m},useContext:$i,useEffect:vb,useImperativeHandle:function(m,x,N){return N=N!=null?N.concat([m]):null,lf(4194308,4,Ru.bind(null,x,m),N)},useLayoutEffect:function(m,x){return lf(4194308,4,m,x)},useInsertionEffect:function(m,x){return lf(4,2,m,x)},useMemo:function(m,x){var N=_s();return x=x===void 0?null:x,m=m(),N.memoizedState=[m,x],m},useReducer:function(m,x,N){var R=_s();return x=N!==void 0?N(x):x,R.memoizedState=R.baseState=x,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:x},R.queue=m,m=m.dispatch=nS.bind(null,rs,m),[R.memoizedState,m]},useRef:function(m){var x=_s();return m={current:m},x.memoizedState=m},useState:Du,useDebugValue:Yc,useDeferredValue:function(m){return _s().memoizedState=m},useTransition:function(){var m=Du(!1),x=m[0];return m=_b.bind(null,m[1]),_s().memoizedState=m,[x,m]},useMutableSource:function(){},useSyncExternalStore:function(m,x,N){var R=rs,K=_s();if(Zn){if(N===void 0)throw Error(r(407));N=N()}else{if(N=x(),wi===null)throw Error(r(349));(Ui&30)!==0||yb(R,x,N)}K.memoizedState=N;var ae={value:N,getSnapshot:x};return K.queue=ae,vb(yx.bind(null,R,ae,m),[m]),R.flags|=2048,of(9,Kc.bind(null,R,ae,N,x),void 0,null),N},useId:function(){var m=_s(),x=wi.identifierPrefix;if(Zn){var N=Ns,R=Fo;N=(R&~(1<<32-Lr(R)-1)).toString(32)+N,x=":"+x+"R"+N,N=sl++,0<N&&(x+="H"+N.toString(32)),x+=":"}else N=Gg++,x=":"+x+"r"+N.toString(32)+":";return m.memoizedState=x},unstable_isNewReconciler:!1},Iu={readContext:$i,useCallback:kx,useContext:$i,useEffect:wx,useImperativeHandle:bb,useInsertionEffect:_x,useLayoutEffect:Sx,useMemo:Ss,useReducer:vi,useRef:bx,useState:function(){return vi(yi)},useDebugValue:Yc,useDeferredValue:function(m){var x=Ca();return wb(x,Ws.memoizedState,m)},useTransition:function(){var m=vi(yi)[0],x=Ca().memoizedState;return[m,x]},useMutableSource:qg,useSyncExternalStore:Kg,useId:Sb,unstable_isNewReconciler:!1},Xg={readContext:$i,useCallback:kx,useContext:$i,useEffect:wx,useImperativeHandle:bb,useInsertionEffect:_x,useLayoutEffect:Sx,useMemo:Ss,useReducer:Vg,useRef:bx,useState:function(){return Vg(yi)},useDebugValue:Yc,useDeferredValue:function(m){var x=Ca();return Ws===null?x.memoizedState=m:wb(x,Ws.memoizedState,m)},useTransition:function(){var m=Vg(yi)[0],x=Ca().memoizedState;return[m,x]},useMutableSource:qg,useSyncExternalStore:Kg,useId:Sb,unstable_isNewReconciler:!1};function ti(m,x){if(m&&m.defaultProps){x=G({},x),m=m.defaultProps;for(var N in m)x[N]===void 0&&(x[N]=m[N]);return x}return x}function uf(m,x,N,R){x=m.memoizedState,N=N(R,x),N=N==null?x:G({},x,N),m.memoizedState=N,m.lanes===0&&(m.updateQueue.baseState=N)}var df={isMounted:function(m){return(m=m._reactInternals)?he(m)===m:!1},enqueueSetState:function(m,x,N){m=m._reactInternals;var R=Lo(),K=pf(m),ae=nc(R,K);ae.payload=x,N!=null&&(ae.callback=N),x=sc(m,ae,K),x!==null&&(Qc(x,m,K,R),Hg(x,m,K))},enqueueReplaceState:function(m,x,N){m=m._reactInternals;var R=Lo(),K=pf(m),ae=nc(R,K);ae.tag=1,ae.payload=x,N!=null&&(ae.callback=N),x=sc(m,ae,K),x!==null&&(Qc(x,m,K,R),Hg(x,m,K))},enqueueForceUpdate:function(m,x){m=m._reactInternals;var N=Lo(),R=pf(m),K=nc(N,R);K.tag=2,x!=null&&(K.callback=x),x=sc(m,K,R),x!==null&&(Qc(x,m,R,N),Hg(x,m,R))}};function Jg(m,x,N,R,K,ae,xe){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(R,ae,xe):x.prototype&&x.prototype.isPureReactComponent?!vd(N,R)||!vd(K,ae):!0}function Tb(m,x,N){var R=!1,K=Zl,ae=x.contextType;return typeof ae=="object"&&ae!==null?ae=$i(ae):(K=pi(x)?Eu:ei.current,R=x.contextTypes,ae=(R=R!=null)?Ed(m,K):Zl),x=new x(N,ae),m.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=df,m.stateNode=x,x._reactInternals=m,R&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=K,m.__reactInternalMemoizedMaskedChildContext=ae),x}function Tx(m,x,N,R){m=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(N,R),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(N,R),x.state!==m&&df.enqueueReplaceState(x,x.state,null)}function Qg(m,x,N,R){var K=m.stateNode;K.props=N,K.state=m.memoizedState,K.refs={},Ih(m);var ae=x.contextType;typeof ae=="object"&&ae!==null?K.context=$i(ae):(ae=pi(x)?Eu:ei.current,K.context=Ed(m,ae)),K.state=m.memoizedState,ae=x.getDerivedStateFromProps,typeof ae=="function"&&(uf(m,x,ae,N),K.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(x=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),x!==K.state&&df.enqueueReplaceState(K,K.state,null),ef(m,N,K,R),K.state=m.memoizedState),typeof K.componentDidMount=="function"&&(m.flags|=4194308)}function Id(m,x){try{var N="",R=x;do N+=q(R),R=R.return;while(R);var K=N}catch(ae){K=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:m,source:x,stack:K,digest:null}}function Zg(m,x,N){return{value:m,source:null,stack:N??null,digest:x??null}}function ff(m,x){try{console.error(x.value)}catch(N){setTimeout(function(){throw N})}}var aS=typeof WeakMap=="function"?WeakMap:Map;function Nb(m,x,N){N=nc(-1,N),N.tag=3,N.payload={element:null};var R=x.value;return N.callback=function(){Fb||(Fb=!0,gS=R),ff(m,x)},N}function b(m,x,N){N=nc(-1,N),N.tag=3;var R=m.type.getDerivedStateFromError;if(typeof R=="function"){var K=x.value;N.payload=function(){return R(K)},N.callback=function(){ff(m,x)}}var ae=m.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&(N.callback=function(){ff(m,x),typeof R!="function"&&(mf===null?mf=new Set([this]):mf.add(this));var xe=x.stack;this.componentDidCatch(x.value,{componentStack:xe!==null?xe:""})}),N}function k(m,x,N){var R=m.pingCache;if(R===null){R=m.pingCache=new aS;var K=new Set;R.set(x,K)}else K=R.get(x),K===void 0&&(K=new Set,R.set(x,K));K.has(N)||(K.add(N),m=wJ.bind(null,m,x,N),x.then(m,m))}function O(m){do{var x;if((x=m.tag===13)&&(x=m.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return m;m=m.return}while(m!==null);return null}function H(m,x,N,R,K){return(m.mode&1)===0?(m===x?m.flags|=65536:(m.flags|=128,N.flags|=131072,N.flags&=-52805,N.tag===1&&(N.alternate===null?N.tag=17:(x=nc(-1,1),x.tag=2,sc(N,x,1))),N.lanes|=1),m):(m.flags|=65536,m.lanes=K,m)}var J=T.ReactCurrentOwner,le=!1;function Ae(m,x,N,R){x.child=m===null?nl(x,null,N,R):Od(x,m.child,N,R)}function dt(m,x,N,R,K){N=N.render;var ae=x.ref;return Vc(x,K),R=sf(m,x,N,R,ae,K),N=af(),m!==null&&!le?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~K,bi(m,x,K)):(Zn&&N&&X0(x),x.flags|=1,Ae(m,x,R,K),x.child)}function jt(m,x,N,R,K){if(m===null){var ae=N.type;return typeof ae=="function"&&!_S(ae)&&ae.defaultProps===void 0&&N.compare===null&&N.defaultProps===void 0?(x.tag=15,x.type=ae,ir(m,x,ae,R,K)):(m=Lb(N.type,null,R,x,x.mode,K),m.ref=x.ref,m.return=x,x.child=m)}if(ae=m.child,(m.lanes&K)===0){var xe=ae.memoizedProps;if(N=N.compare,N=N!==null?N:vd,N(xe,R)&&m.ref===x.ref)return bi(m,x,K)}return x.flags|=1,m=yf(ae,R),m.ref=x.ref,m.return=x,x.child=m}function ir(m,x,N,R,K){if(m!==null){var ae=m.memoizedProps;if(vd(ae,R)&&m.ref===x.ref)if(le=!1,x.pendingProps=R=ae,(m.lanes&K)!==0)(m.flags&131072)!==0&&(le=!0);else return x.lanes=m.lanes,bi(m,x,K)}return Er(m,x,N,R,K)}function Ir(m,x,N){var R=x.pendingProps,K=R.children,ae=m!==null?m.memoizedState:null;if(R.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},ss(tp,Al),Al|=N;else{if((N&1073741824)===0)return m=ae!==null?ae.baseLanes|N:N,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:m,cachePool:null,transitions:null},x.updateQueue=null,ss(tp,Al),Al|=m,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=ae!==null?ae.baseLanes:N,ss(tp,Al),Al|=R}else ae!==null?(R=ae.baseLanes|N,x.memoizedState=null):R=N,ss(tp,Al),Al|=R;return Ae(m,x,K,N),x.child}function yn(m,x){var N=x.ref;(m===null&&N!==null||m!==null&&m.ref!==N)&&(x.flags|=512,x.flags|=2097152)}function Er(m,x,N,R,K){var ae=pi(N)?Eu:ei.current;return ae=Ed(x,ae),Vc(x,K),N=sf(m,x,N,R,ae,K),R=af(),m!==null&&!le?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~K,bi(m,x,K)):(Zn&&R&&X0(x),x.flags|=1,Ae(m,x,N,K),x.child)}function xs(m,x,N,R,K){if(pi(N)){var ae=!0;Ad(x)}else ae=!1;if(Vc(x,K),x.stateNode===null)Rn(m,x),Tb(x,N,R),Qg(x,N,R,K),R=!0;else if(m===null){var xe=x.stateNode,Be=x.memoizedProps;xe.props=Be;var et=xe.context,At=N.contextType;typeof At=="object"&&At!==null?At=$i(At):(At=pi(N)?Eu:ei.current,At=Ed(x,At));var er=N.getDerivedStateFromProps,rr=typeof er=="function"||typeof xe.getSnapshotBeforeUpdate=="function";rr||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Be!==R||et!==At)&&Tx(x,xe,R,At),rc=!1;var Qt=x.memoizedState;xe.state=Qt,ef(x,R,xe,K),et=x.memoizedState,Be!==R||Qt!==et||gi.current||rc?(typeof er=="function"&&(uf(x,N,er,R),et=x.memoizedState),(Be=rc||Jg(x,N,Be,R,Qt,et,At))?(rr||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(x.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=R,x.memoizedState=et),xe.props=R,xe.state=et,xe.context=At,R=Be):(typeof xe.componentDidMount=="function"&&(x.flags|=4194308),R=!1)}else{xe=x.stateNode,Wg(m,x),Be=x.memoizedProps,At=x.type===x.elementType?Be:ti(x.type,Be),xe.props=At,rr=x.pendingProps,Qt=xe.context,et=N.contextType,typeof et=="object"&&et!==null?et=$i(et):(et=pi(N)?Eu:ei.current,et=Ed(x,et));var Or=N.getDerivedStateFromProps;(er=typeof Or=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Be!==rr||Qt!==et)&&Tx(x,xe,R,et),rc=!1,Qt=x.memoizedState,xe.state=Qt,ef(x,R,xe,K);var Ur=x.memoizedState;Be!==rr||Qt!==Ur||gi.current||rc?(typeof Or=="function"&&(uf(x,N,Or,R),Ur=x.memoizedState),(At=rc||Jg(x,N,At,R,Qt,Ur,et)||!1)?(er||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(R,Ur,et),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(R,Ur,et)),typeof xe.componentDidUpdate=="function"&&(x.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof xe.componentDidUpdate!="function"||Be===m.memoizedProps&&Qt===m.memoizedState||(x.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Be===m.memoizedProps&&Qt===m.memoizedState||(x.flags|=1024),x.memoizedProps=R,x.memoizedState=Ur),xe.props=R,xe.state=Ur,xe.context=et,R=At):(typeof xe.componentDidUpdate!="function"||Be===m.memoizedProps&&Qt===m.memoizedState||(x.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Be===m.memoizedProps&&Qt===m.memoizedState||(x.flags|=1024),R=!1)}return es(m,x,N,R,ae,K)}function es(m,x,N,R,K,ae){yn(m,x);var xe=(x.flags&128)!==0;if(!R&&!xe)return K&&gb(x,N,!1),bi(m,x,ae);R=x.stateNode,J.current=x;var Be=xe&&typeof N.getDerivedStateFromError!="function"?null:R.render();return x.flags|=1,m!==null&&xe?(x.child=Od(x,m.child,null,ae),x.child=Od(x,null,Be,ae)):Ae(m,x,Be,ae),x.memoizedState=R.state,K&&gb(x,N,!0),x.child}function zi(m){var x=m.stateNode;x.pendingContext?mx(m,x.pendingContext,x.pendingContext!==x.context):x.context&&mx(m,x.context,!1),Mu(m,x.containerInfo)}function ac(m,x,N,R,K){return Md(),Oh(K),x.flags|=256,Ae(m,x,N,R),x.child}var Et={dehydrated:null,treeContext:null,retryLane:0};function mt(m){return{baseLanes:m,cachePool:null,transitions:null}}function Dt(m,x,N){var R=x.pendingProps,K=ps.current,ae=!1,xe=(x.flags&128)!==0,Be;if((Be=xe)||(Be=m!==null&&m.memoizedState===null?!1:(K&2)!==0),Be?(ae=!0,x.flags&=-129):(m===null||m.memoizedState!==null)&&(K|=1),ss(ps,K&1),m===null)return J0(x),m=x.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((x.mode&1)===0?x.lanes=1:m.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(xe=R.children,m=R.fallback,ae?(R=x.mode,ae=x.child,xe={mode:"hidden",children:xe},(R&1)===0&&ae!==null?(ae.childLanes=0,ae.pendingProps=xe):ae=Bb(xe,R,0,null),m=Gh(m,R,N,null),ae.return=x,m.return=x,ae.sibling=m,x.child=ae,x.child.memoizedState=mt(N),x.memoizedState=Et,m):Ar(x,xe));if(K=m.memoizedState,K!==null&&(Be=K.dehydrated,Be!==null))return kn(m,x,xe,R,Be,K,N);if(ae){ae=R.fallback,xe=x.mode,K=m.child,Be=K.sibling;var et={mode:"hidden",children:R.children};return(xe&1)===0&&x.child!==K?(R=x.child,R.childLanes=0,R.pendingProps=et,x.deletions=null):(R=yf(K,et),R.subtreeFlags=K.subtreeFlags&14680064),Be!==null?ae=yf(Be,ae):(ae=Gh(ae,xe,N,null),ae.flags|=2),ae.return=x,R.return=x,R.sibling=ae,x.child=R,R=ae,ae=x.child,xe=m.child.memoizedState,xe=xe===null?mt(N):{baseLanes:xe.baseLanes|N,cachePool:null,transitions:xe.transitions},ae.memoizedState=xe,ae.childLanes=m.childLanes&~N,x.memoizedState=Et,R}return ae=m.child,m=ae.sibling,R=yf(ae,{mode:"visible",children:R.children}),(x.mode&1)===0&&(R.lanes=N),R.return=x,R.sibling=null,m!==null&&(N=x.deletions,N===null?(x.deletions=[m],x.flags|=16):N.push(m)),x.child=R,x.memoizedState=null,R}function Ar(m,x){return x=Bb({mode:"visible",children:x},m.mode,0,null),x.return=m,m.child=x}function Kr(m,x,N,R){return R!==null&&Oh(R),Od(x,m.child,null,N),m=Ar(x,x.pendingProps.children),m.flags|=2,x.memoizedState=null,m}function kn(m,x,N,R,K,ae,xe){if(N)return x.flags&256?(x.flags&=-257,R=Zg(Error(r(422))),Kr(m,x,xe,R)):x.memoizedState!==null?(x.child=m.child,x.flags|=128,null):(ae=R.fallback,K=x.mode,R=Bb({mode:"visible",children:R.children},K,0,null),ae=Gh(ae,K,xe,null),ae.flags|=2,R.return=x,ae.return=x,R.sibling=ae,x.child=R,(x.mode&1)!==0&&Od(x,m.child,null,xe),x.child.memoizedState=mt(xe),x.memoizedState=Et,ae);if((x.mode&1)===0)return Kr(m,x,xe,null);if(K.data==="$!"){if(R=K.nextSibling&&K.nextSibling.dataset,R)var Be=R.dgst;return R=Be,ae=Error(r(419)),R=Zg(ae,R,void 0),Kr(m,x,xe,R)}if(Be=(xe&m.childLanes)!==0,le||Be){if(R=wi,R!==null){switch(xe&-xe){case 4:K=2;break;case 16:K=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:K=32;break;case 536870912:K=268435456;break;default:K=0}K=(K&(R.suspendedLanes|xe))!==0?0:K,K!==0&&K!==ae.retryLane&&(ae.retryLane=K,Ro(m,K),Qc(R,m,K,-1))}return wS(),R=Zg(Error(r(421))),Kr(m,x,xe,R)}return K.data==="$?"?(x.flags|=128,x.child=m.child,x=_J.bind(null,m),K._reactRetry=x,null):(m=ae.treeContext,kr=Jl(K.nextSibling),Mo=x,Zn=!0,Oo=null,m!==null&&(Li[Bi++]=Fo,Li[Bi++]=Ns,Li[Bi++]=Fu,Fo=m.id,Ns=m.overflow,Fu=x),x=Ar(x,R.children),x.flags|=4096,x)}function vn(m,x,N){m.lanes|=x;var R=m.alternate;R!==null&&(R.lanes|=x),zg(m.return,x,N)}function Bn(m,x,N,R,K){var ae=m.memoizedState;ae===null?m.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:R,tail:N,tailMode:K}:(ae.isBackwards=x,ae.rendering=null,ae.renderingStartTime=0,ae.last=R,ae.tail=N,ae.tailMode=K)}function Ta(m,x,N){var R=x.pendingProps,K=R.revealOrder,ae=R.tail;if(Ae(m,x,R.children,N),R=ps.current,(R&2)!==0)R=R&1|2,x.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=x.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&vn(m,N,x);else if(m.tag===19)vn(m,N,x);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===x)break e;for(;m.sibling===null;){if(m.return===null||m.return===x)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}R&=1}if(ss(ps,R),(x.mode&1)===0)x.memoizedState=null;else switch(K){case"forwards":for(N=x.child,K=null;N!==null;)m=N.alternate,m!==null&&rf(m)===null&&(K=N),N=N.sibling;N=K,N===null?(K=x.child,x.child=null):(K=N.sibling,N.sibling=null),Bn(x,!1,K,N,ae);break;case"backwards":for(N=null,K=x.child,x.child=null;K!==null;){if(m=K.alternate,m!==null&&rf(m)===null){x.child=K;break}m=K.sibling,K.sibling=N,N=K,K=m}Bn(x,!0,N,null,ae);break;case"together":Bn(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Rn(m,x){(x.mode&1)===0&&m!==null&&(m.alternate=null,x.alternate=null,x.flags|=2)}function bi(m,x,N){if(m!==null&&(x.dependencies=m.dependencies),Uh|=x.lanes,(N&x.childLanes)===0)return null;if(m!==null&&x.child!==m.child)throw Error(r(153));if(x.child!==null){for(m=x.child,N=yf(m,m.pendingProps),x.child=N,N.return=x;m.sibling!==null;)m=m.sibling,N=N.sibling=yf(m,m.pendingProps),N.return=x;N.sibling=null}return x.child}function iS(m,x,N){switch(x.tag){case 3:zi(x),Md();break;case 5:tf(x);break;case 1:pi(x.type)&&Ad(x);break;case 4:Mu(x,x.stateNode.containerInfo);break;case 10:var R=x.type._context,K=x.memoizedProps.value;ss(Dh,R._currentValue),R._currentValue=K;break;case 13:if(R=x.memoizedState,R!==null)return R.dehydrated!==null?(ss(ps,ps.current&1),x.flags|=128,null):(N&x.child.childLanes)!==0?Dt(m,x,N):(ss(ps,ps.current&1),m=bi(m,x,N),m!==null?m.sibling:null);ss(ps,ps.current&1);break;case 19:if(R=(N&x.childLanes)!==0,(m.flags&128)!==0){if(R)return Ta(m,x,N);x.flags|=128}if(K=x.memoizedState,K!==null&&(K.rendering=null,K.tail=null,K.lastEffect=null),ss(ps,ps.current),R)break;return null;case 22:case 23:return x.lanes=0,Ir(m,x,N)}return bi(m,x,N)}var p9,oS,x9,y9;p9=function(m,x){for(var N=x.child;N!==null;){if(N.tag===5||N.tag===6)m.appendChild(N.stateNode);else if(N.tag!==4&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===x)break;for(;N.sibling===null;){if(N.return===null||N.return===x)return;N=N.return}N.sibling.return=N.return,N=N.sibling}},oS=function(){},x9=function(m,x,N,R){var K=m.memoizedProps;if(K!==R){m=x.stateNode,ka(as.current);var ae=null;switch(N){case"input":K=Re(m,K),R=Re(m,R),ae=[];break;case"select":K=G({},K,{value:void 0}),R=G({},R,{value:void 0}),ae=[];break;case"textarea":K=Te(m,K),R=Te(m,R),ae=[];break;default:typeof K.onClick!="function"&&typeof R.onClick=="function"&&(m.onclick=Cd)}hr(N,R);var xe;N=null;for(At in K)if(!R.hasOwnProperty(At)&&K.hasOwnProperty(At)&&K[At]!=null)if(At==="style"){var Be=K[At];for(xe in Be)Be.hasOwnProperty(xe)&&(N||(N={}),N[xe]="")}else At!=="dangerouslySetInnerHTML"&&At!=="children"&&At!=="suppressContentEditableWarning"&&At!=="suppressHydrationWarning"&&At!=="autoFocus"&&(s.hasOwnProperty(At)?ae||(ae=[]):(ae=ae||[]).push(At,null));for(At in R){var et=R[At];if(Be=K?.[At],R.hasOwnProperty(At)&&et!==Be&&(et!=null||Be!=null))if(At==="style")if(Be){for(xe in Be)!Be.hasOwnProperty(xe)||et&&et.hasOwnProperty(xe)||(N||(N={}),N[xe]="");for(xe in et)et.hasOwnProperty(xe)&&Be[xe]!==et[xe]&&(N||(N={}),N[xe]=et[xe])}else N||(ae||(ae=[]),ae.push(At,N)),N=et;else At==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,Be=Be?Be.__html:void 0,et!=null&&Be!==et&&(ae=ae||[]).push(At,et)):At==="children"?typeof et!="string"&&typeof et!="number"||(ae=ae||[]).push(At,""+et):At!=="suppressContentEditableWarning"&&At!=="suppressHydrationWarning"&&(s.hasOwnProperty(At)?(et!=null&&At==="onScroll"&&ms("scroll",m),ae||Be===et||(ae=[])):(ae=ae||[]).push(At,et))}N&&(ae=ae||[]).push("style",N);var At=ae;(x.updateQueue=At)&&(x.flags|=4)}},y9=function(m,x,N,R){N!==R&&(x.flags|=4)};function Nx(m,x){if(!Zn)switch(m.tailMode){case"hidden":x=m.tail;for(var N=null;x!==null;)x.alternate!==null&&(N=x),x=x.sibling;N===null?m.tail=null:N.sibling=null;break;case"collapsed":N=m.tail;for(var R=null;N!==null;)N.alternate!==null&&(R=N),N=N.sibling;R===null?x||m.tail===null?m.tail=null:m.tail.sibling=null:R.sibling=null}}function co(m){var x=m.alternate!==null&&m.alternate.child===m.child,N=0,R=0;if(x)for(var K=m.child;K!==null;)N|=K.lanes|K.childLanes,R|=K.subtreeFlags&14680064,R|=K.flags&14680064,K.return=m,K=K.sibling;else for(K=m.child;K!==null;)N|=K.lanes|K.childLanes,R|=K.subtreeFlags,R|=K.flags,K.return=m,K=K.sibling;return m.subtreeFlags|=R,m.childLanes=N,x}function dJ(m,x,N){var R=x.pendingProps;switch(Ua(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return co(x),null;case 1:return pi(x.type)&&K0(),co(x),null;case 3:return R=x.stateNode,As(),gs(gi),gs(ei),xi(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(m===null||m.child===null)&&(Mh(x)?x.flags|=4:m===null||m.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Oo!==null&&(yS(Oo),Oo=null))),oS(m,x),co(x),null;case 5:qc(x);var K=ka(Qs.current);if(N=x.type,m!==null&&x.stateNode!=null)x9(m,x,N,R,K),m.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!R){if(x.stateNode===null)throw Error(r(166));return co(x),null}if(m=ka(as.current),Mh(x)){R=x.stateNode,N=x.type;var ae=x.memoizedProps;switch(R[rl]=x,R[jh]=ae,m=(x.mode&1)!==0,N){case"dialog":ms("cancel",R),ms("close",R);break;case"iframe":case"object":case"embed":ms("load",R);break;case"video":case"audio":for(K=0;K<Cu.length;K++)ms(Cu[K],R);break;case"source":ms("error",R);break;case"img":case"image":case"link":ms("error",R),ms("load",R);break;case"details":ms("toggle",R);break;case"input":Xe(R,ae),ms("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!ae.multiple},ms("invalid",R);break;case"textarea":bt(R,ae),ms("invalid",R)}hr(N,ae),K=null;for(var xe in ae)if(ae.hasOwnProperty(xe)){var Be=ae[xe];xe==="children"?typeof Be=="string"?R.textContent!==Be&&(ae.suppressHydrationWarning!==!0&&Eh(R.textContent,Be,m),K=["children",Be]):typeof Be=="number"&&R.textContent!==""+Be&&(ae.suppressHydrationWarning!==!0&&Eh(R.textContent,Be,m),K=["children",""+Be]):s.hasOwnProperty(xe)&&Be!=null&&xe==="onScroll"&&ms("scroll",R)}switch(N){case"input":be(R),Ht(R,ae,!0);break;case"textarea":be(R),Lt(R);break;case"select":case"option":break;default:typeof ae.onClick=="function"&&(R.onclick=Cd)}R=K,x.updateQueue=R,R!==null&&(x.flags|=4)}else{xe=K.nodeType===9?K:K.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Yt(N)),m==="http://www.w3.org/1999/xhtml"?N==="script"?(m=xe.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof R.is=="string"?m=xe.createElement(N,{is:R.is}):(m=xe.createElement(N),N==="select"&&(xe=m,R.multiple?xe.multiple=!0:R.size&&(xe.size=R.size))):m=xe.createElementNS(m,N),m[rl]=x,m[jh]=R,p9(m,x,!1,!1),x.stateNode=m;e:{switch(xe=Cr(N,R),N){case"dialog":ms("cancel",m),ms("close",m),K=R;break;case"iframe":case"object":case"embed":ms("load",m),K=R;break;case"video":case"audio":for(K=0;K<Cu.length;K++)ms(Cu[K],m);K=R;break;case"source":ms("error",m),K=R;break;case"img":case"image":case"link":ms("error",m),ms("load",m),K=R;break;case"details":ms("toggle",m),K=R;break;case"input":Xe(m,R),K=Re(m,R),ms("invalid",m);break;case"option":K=R;break;case"select":m._wrapperState={wasMultiple:!!R.multiple},K=G({},R,{value:void 0}),ms("invalid",m);break;case"textarea":bt(m,R),K=Te(m,R),ms("invalid",m);break;default:K=R}hr(N,K),Be=K;for(ae in Be)if(Be.hasOwnProperty(ae)){var et=Be[ae];ae==="style"?Rt(m,et):ae==="dangerouslySetInnerHTML"?(et=et?et.__html:void 0,et!=null&&Mt(m,et)):ae==="children"?typeof et=="string"?(N!=="textarea"||et!=="")&&rt(m,et):typeof et=="number"&&rt(m,""+et):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?et!=null&&ae==="onScroll"&&ms("scroll",m):et!=null&&_(m,ae,et,xe))}switch(N){case"input":be(m),Ht(m,R,!1);break;case"textarea":be(m),Lt(m);break;case"option":R.value!=null&&m.setAttribute("value",""+se(R.value));break;case"select":m.multiple=!!R.multiple,ae=R.value,ae!=null?gt(m,!!R.multiple,ae,!1):R.defaultValue!=null&&gt(m,!!R.multiple,R.defaultValue,!0);break;default:typeof K.onClick=="function"&&(m.onclick=Cd)}switch(N){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return co(x),null;case 6:if(m&&x.stateNode!=null)y9(m,x,m.memoizedProps,R);else{if(typeof R!="string"&&x.stateNode===null)throw Error(r(166));if(N=ka(Qs.current),ka(as.current),Mh(x)){if(R=x.stateNode,N=x.memoizedProps,R[rl]=x,(ae=R.nodeValue!==N)&&(m=Mo,m!==null))switch(m.tag){case 3:Eh(R.nodeValue,N,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&Eh(R.nodeValue,N,(m.mode&1)!==0)}ae&&(x.flags|=4)}else R=(N.nodeType===9?N:N.ownerDocument).createTextNode(R),R[rl]=x,x.stateNode=R}return co(x),null;case 13:if(gs(ps),R=x.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(Zn&&kr!==null&&(x.mode&1)!==0&&(x.flags&128)===0)px(),Md(),x.flags|=98560,ae=!1;else if(ae=Mh(x),R!==null&&R.dehydrated!==null){if(m===null){if(!ae)throw Error(r(318));if(ae=x.memoizedState,ae=ae!==null?ae.dehydrated:null,!ae)throw Error(r(317));ae[rl]=x}else Md(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;co(x),ae=!1}else Oo!==null&&(yS(Oo),Oo=null),ae=!0;if(!ae)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=N,x):(R=R!==null,R!==(m!==null&&m.memoizedState!==null)&&R&&(x.child.flags|=8192,(x.mode&1)!==0&&(m===null||(ps.current&1)!==0?ri===0&&(ri=3):wS())),x.updateQueue!==null&&(x.flags|=4),co(x),null);case 4:return As(),oS(m,x),m===null&&Sd(x.stateNode.containerInfo),co(x),null;case 10:return Ug(x.type._context),co(x),null;case 17:return pi(x.type)&&K0(),co(x),null;case 19:if(gs(ps),ae=x.memoizedState,ae===null)return co(x),null;if(R=(x.flags&128)!==0,xe=ae.rendering,xe===null)if(R)Nx(ae,!1);else{if(ri!==0||m!==null&&(m.flags&128)!==0)for(m=x.child;m!==null;){if(xe=rf(m),xe!==null){for(x.flags|=128,Nx(ae,!1),R=xe.updateQueue,R!==null&&(x.updateQueue=R,x.flags|=4),x.subtreeFlags=0,R=N,N=x.child;N!==null;)ae=N,m=R,ae.flags&=14680066,xe=ae.alternate,xe===null?(ae.childLanes=0,ae.lanes=m,ae.child=null,ae.subtreeFlags=0,ae.memoizedProps=null,ae.memoizedState=null,ae.updateQueue=null,ae.dependencies=null,ae.stateNode=null):(ae.childLanes=xe.childLanes,ae.lanes=xe.lanes,ae.child=xe.child,ae.subtreeFlags=0,ae.deletions=null,ae.memoizedProps=xe.memoizedProps,ae.memoizedState=xe.memoizedState,ae.updateQueue=xe.updateQueue,ae.type=xe.type,m=xe.dependencies,ae.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),N=N.sibling;return ss(ps,ps.current&1|2),x.child}m=m.sibling}ae.tail!==null&&qe()>rp&&(x.flags|=128,R=!0,Nx(ae,!1),x.lanes=4194304)}else{if(!R)if(m=rf(xe),m!==null){if(x.flags|=128,R=!0,N=m.updateQueue,N!==null&&(x.updateQueue=N,x.flags|=4),Nx(ae,!0),ae.tail===null&&ae.tailMode==="hidden"&&!xe.alternate&&!Zn)return co(x),null}else 2*qe()-ae.renderingStartTime>rp&&N!==1073741824&&(x.flags|=128,R=!0,Nx(ae,!1),x.lanes=4194304);ae.isBackwards?(xe.sibling=x.child,x.child=xe):(N=ae.last,N!==null?N.sibling=xe:x.child=xe,ae.last=xe)}return ae.tail!==null?(x=ae.tail,ae.rendering=x,ae.tail=x.sibling,ae.renderingStartTime=qe(),x.sibling=null,N=ps.current,ss(ps,R?N&1|2:N&1),x):(co(x),null);case 22:case 23:return bS(),R=x.memoizedState!==null,m!==null&&m.memoizedState!==null!==R&&(x.flags|=8192),R&&(x.mode&1)!==0?(Al&1073741824)!==0&&(co(x),x.subtreeFlags&6&&(x.flags|=8192)):co(x),null;case 24:return null;case 25:return null}throw Error(r(156,x.tag))}function fJ(m,x){switch(Ua(x),x.tag){case 1:return pi(x.type)&&K0(),m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 3:return As(),gs(gi),gs(ei),xi(),m=x.flags,(m&65536)!==0&&(m&128)===0?(x.flags=m&-65537|128,x):null;case 5:return qc(x),null;case 13:if(gs(ps),m=x.memoizedState,m!==null&&m.dehydrated!==null){if(x.alternate===null)throw Error(r(340));Md()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 19:return gs(ps),null;case 4:return As(),null;case 10:return Ug(x.type._context),null;case 22:case 23:return bS(),null;case 24:return null;default:return null}}var Eb=!1,uo=!1,hJ=typeof WeakSet=="function"?WeakSet:Set,Br=null;function ep(m,x){var N=m.ref;if(N!==null)if(typeof N=="function")try{N(null)}catch(R){ca(m,x,R)}else N.current=null}function lS(m,x,N){try{N()}catch(R){ca(m,x,R)}}var v9=!1;function mJ(m,x){if(ux=hg,m=_a(),H0(m)){if("selectionStart"in m)var N={start:m.selectionStart,end:m.selectionEnd};else e:{N=(N=m.ownerDocument)&&N.defaultView||window;var R=N.getSelection&&N.getSelection();if(R&&R.rangeCount!==0){N=R.anchorNode;var K=R.anchorOffset,ae=R.focusNode;R=R.focusOffset;try{N.nodeType,ae.nodeType}catch{N=null;break e}var xe=0,Be=-1,et=-1,At=0,er=0,rr=m,Qt=null;t:for(;;){for(var Or;rr!==N||K!==0&&rr.nodeType!==3||(Be=xe+K),rr!==ae||R!==0&&rr.nodeType!==3||(et=xe+R),rr.nodeType===3&&(xe+=rr.nodeValue.length),(Or=rr.firstChild)!==null;)Qt=rr,rr=Or;for(;;){if(rr===m)break t;if(Qt===N&&++At===K&&(Be=xe),Qt===ae&&++er===R&&(et=xe),(Or=rr.nextSibling)!==null)break;rr=Qt,Qt=rr.parentNode}rr=Or}N=Be===-1||et===-1?null:{start:Be,end:et}}else N=null}N=N||{start:0,end:0}}else N=null;for(dx={focusedElem:m,selectionRange:N},hg=!1,Br=x;Br!==null;)if(x=Br,m=x.child,(x.subtreeFlags&1028)!==0&&m!==null)m.return=x,Br=m;else for(;Br!==null;){x=Br;try{var Ur=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Ur!==null){var zr=Ur.memoizedProps,Na=Ur.memoizedState,yt=x.stateNode,ut=yt.getSnapshotBeforeUpdate(x.elementType===x.type?zr:ti(x.type,zr),Na);yt.__reactInternalSnapshotBeforeUpdate=ut}break;case 3:var St=x.stateNode.containerInfo;St.nodeType===1?St.textContent="":St.nodeType===9&&St.documentElement&&St.removeChild(St.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(lr){ca(x,x.return,lr)}if(m=x.sibling,m!==null){m.return=x.return,Br=m;break}Br=x.return}return Ur=v9,v9=!1,Ur}function Ex(m,x,N){var R=x.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var K=R=R.next;do{if((K.tag&m)===m){var ae=K.destroy;K.destroy=void 0,ae!==void 0&&lS(x,N,ae)}K=K.next}while(K!==R)}}function Ab(m,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var N=x=x.next;do{if((N.tag&m)===m){var R=N.create;N.destroy=R()}N=N.next}while(N!==x)}}function cS(m){var x=m.ref;if(x!==null){var N=m.stateNode;switch(m.tag){case 5:m=N;break;default:m=N}typeof x=="function"?x(m):x.current=m}}function b9(m){var x=m.alternate;x!==null&&(m.alternate=null,b9(x)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(x=m.stateNode,x!==null&&(delete x[rl],delete x[jh],delete x[Mg],delete x[hb],delete x[mb])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function w9(m){return m.tag===5||m.tag===3||m.tag===4}function _9(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||w9(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function uS(m,x,N){var R=m.tag;if(R===5||R===6)m=m.stateNode,x?N.nodeType===8?N.parentNode.insertBefore(m,x):N.insertBefore(m,x):(N.nodeType===8?(x=N.parentNode,x.insertBefore(m,N)):(x=N,x.appendChild(m)),N=N._reactRootContainer,N!=null||x.onclick!==null||(x.onclick=Cd));else if(R!==4&&(m=m.child,m!==null))for(uS(m,x,N),m=m.sibling;m!==null;)uS(m,x,N),m=m.sibling}function dS(m,x,N){var R=m.tag;if(R===5||R===6)m=m.stateNode,x?N.insertBefore(m,x):N.appendChild(m);else if(R!==4&&(m=m.child,m!==null))for(dS(m,x,N),m=m.sibling;m!==null;)dS(m,x,N),m=m.sibling}var Wi=null,Xc=!1;function hf(m,x,N){for(N=N.child;N!==null;)S9(m,x,N),N=N.sibling}function S9(m,x,N){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Fr,N)}catch{}switch(N.tag){case 5:uo||ep(N,x);case 6:var R=Wi,K=Xc;Wi=null,hf(m,x,N),Wi=R,Xc=K,Wi!==null&&(Xc?(m=Wi,N=N.stateNode,m.nodeType===8?m.parentNode.removeChild(N):m.removeChild(N)):Wi.removeChild(N.stateNode));break;case 18:Wi!==null&&(Xc?(m=Wi,N=N.stateNode,m.nodeType===8?Fg(m.parentNode,N):m.nodeType===1&&Fg(m,N),ao(m)):Fg(Wi,N.stateNode));break;case 4:R=Wi,K=Xc,Wi=N.stateNode.containerInfo,Xc=!0,hf(m,x,N),Wi=R,Xc=K;break;case 0:case 11:case 14:case 15:if(!uo&&(R=N.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){K=R=R.next;do{var ae=K,xe=ae.destroy;ae=ae.tag,xe!==void 0&&((ae&2)!==0||(ae&4)!==0)&&lS(N,x,xe),K=K.next}while(K!==R)}hf(m,x,N);break;case 1:if(!uo&&(ep(N,x),R=N.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=N.memoizedProps,R.state=N.memoizedState,R.componentWillUnmount()}catch(Be){ca(N,x,Be)}hf(m,x,N);break;case 21:hf(m,x,N);break;case 22:N.mode&1?(uo=(R=uo)||N.memoizedState!==null,hf(m,x,N),uo=R):hf(m,x,N);break;default:hf(m,x,N)}}function k9(m){var x=m.updateQueue;if(x!==null){m.updateQueue=null;var N=m.stateNode;N===null&&(N=m.stateNode=new hJ),x.forEach(function(R){var K=SJ.bind(null,m,R);N.has(R)||(N.add(R),R.then(K,K))})}}function Jc(m,x){var N=x.deletions;if(N!==null)for(var R=0;R<N.length;R++){var K=N[R];try{var ae=m,xe=x,Be=xe;e:for(;Be!==null;){switch(Be.tag){case 5:Wi=Be.stateNode,Xc=!1;break e;case 3:Wi=Be.stateNode.containerInfo,Xc=!0;break e;case 4:Wi=Be.stateNode.containerInfo,Xc=!0;break e}Be=Be.return}if(Wi===null)throw Error(r(160));S9(ae,xe,K),Wi=null,Xc=!1;var et=K.alternate;et!==null&&(et.return=null),K.return=null}catch(At){ca(K,x,At)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)C9(x,m),x=x.sibling}function C9(m,x){var N=m.alternate,R=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Jc(x,m),Lu(m),R&4){try{Ex(3,m,m.return),Ab(3,m)}catch(zr){ca(m,m.return,zr)}try{Ex(5,m,m.return)}catch(zr){ca(m,m.return,zr)}}break;case 1:Jc(x,m),Lu(m),R&512&&N!==null&&ep(N,N.return);break;case 5:if(Jc(x,m),Lu(m),R&512&&N!==null&&ep(N,N.return),m.flags&32){var K=m.stateNode;try{rt(K,"")}catch(zr){ca(m,m.return,zr)}}if(R&4&&(K=m.stateNode,K!=null)){var ae=m.memoizedProps,xe=N!==null?N.memoizedProps:ae,Be=m.type,et=m.updateQueue;if(m.updateQueue=null,et!==null)try{Be==="input"&&ae.type==="radio"&&ae.name!=null&&ft(K,ae),Cr(Be,xe);var At=Cr(Be,ae);for(xe=0;xe<et.length;xe+=2){var er=et[xe],rr=et[xe+1];er==="style"?Rt(K,rr):er==="dangerouslySetInnerHTML"?Mt(K,rr):er==="children"?rt(K,rr):_(K,er,rr,At)}switch(Be){case"input":Je(K,ae);break;case"textarea":Ct(K,ae);break;case"select":var Qt=K._wrapperState.wasMultiple;K._wrapperState.wasMultiple=!!ae.multiple;var Or=ae.value;Or!=null?gt(K,!!ae.multiple,Or,!1):Qt!==!!ae.multiple&&(ae.defaultValue!=null?gt(K,!!ae.multiple,ae.defaultValue,!0):gt(K,!!ae.multiple,ae.multiple?[]:"",!1))}K[jh]=ae}catch(zr){ca(m,m.return,zr)}}break;case 6:if(Jc(x,m),Lu(m),R&4){if(m.stateNode===null)throw Error(r(162));K=m.stateNode,ae=m.memoizedProps;try{K.nodeValue=ae}catch(zr){ca(m,m.return,zr)}}break;case 3:if(Jc(x,m),Lu(m),R&4&&N!==null&&N.memoizedState.isDehydrated)try{ao(x.containerInfo)}catch(zr){ca(m,m.return,zr)}break;case 4:Jc(x,m),Lu(m);break;case 13:Jc(x,m),Lu(m),K=m.child,K.flags&8192&&(ae=K.memoizedState!==null,K.stateNode.isHidden=ae,!ae||K.alternate!==null&&K.alternate.memoizedState!==null||(mS=qe())),R&4&&k9(m);break;case 22:if(er=N!==null&&N.memoizedState!==null,m.mode&1?(uo=(At=uo)||er,Jc(x,m),uo=At):Jc(x,m),Lu(m),R&8192){if(At=m.memoizedState!==null,(m.stateNode.isHidden=At)&&!er&&(m.mode&1)!==0)for(Br=m,er=m.child;er!==null;){for(rr=Br=er;Br!==null;){switch(Qt=Br,Or=Qt.child,Qt.tag){case 0:case 11:case 14:case 15:Ex(4,Qt,Qt.return);break;case 1:ep(Qt,Qt.return);var Ur=Qt.stateNode;if(typeof Ur.componentWillUnmount=="function"){R=Qt,N=Qt.return;try{x=R,Ur.props=x.memoizedProps,Ur.state=x.memoizedState,Ur.componentWillUnmount()}catch(zr){ca(R,N,zr)}}break;case 5:ep(Qt,Qt.return);break;case 22:if(Qt.memoizedState!==null){E9(rr);continue}}Or!==null?(Or.return=Qt,Br=Or):E9(rr)}er=er.sibling}e:for(er=null,rr=m;;){if(rr.tag===5){if(er===null){er=rr;try{K=rr.stateNode,At?(ae=K.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none"):(Be=rr.stateNode,et=rr.memoizedProps.style,xe=et!=null&&et.hasOwnProperty("display")?et.display:null,Be.style.display=Tt("display",xe))}catch(zr){ca(m,m.return,zr)}}}else if(rr.tag===6){if(er===null)try{rr.stateNode.nodeValue=At?"":rr.memoizedProps}catch(zr){ca(m,m.return,zr)}}else if((rr.tag!==22&&rr.tag!==23||rr.memoizedState===null||rr===m)&&rr.child!==null){rr.child.return=rr,rr=rr.child;continue}if(rr===m)break e;for(;rr.sibling===null;){if(rr.return===null||rr.return===m)break e;er===rr&&(er=null),rr=rr.return}er===rr&&(er=null),rr.sibling.return=rr.return,rr=rr.sibling}}break;case 19:Jc(x,m),Lu(m),R&4&&k9(m);break;case 21:break;default:Jc(x,m),Lu(m)}}function Lu(m){var x=m.flags;if(x&2){try{e:{for(var N=m.return;N!==null;){if(w9(N)){var R=N;break e}N=N.return}throw Error(r(160))}switch(R.tag){case 5:var K=R.stateNode;R.flags&32&&(rt(K,""),R.flags&=-33);var ae=_9(m);dS(m,ae,K);break;case 3:case 4:var xe=R.stateNode.containerInfo,Be=_9(m);uS(m,Be,xe);break;default:throw Error(r(161))}}catch(et){ca(m,m.return,et)}m.flags&=-3}x&4096&&(m.flags&=-4097)}function gJ(m,x,N){Br=m,T9(m)}function T9(m,x,N){for(var R=(m.mode&1)!==0;Br!==null;){var K=Br,ae=K.child;if(K.tag===22&&R){var xe=K.memoizedState!==null||Eb;if(!xe){var Be=K.alternate,et=Be!==null&&Be.memoizedState!==null||uo;Be=Eb;var At=uo;if(Eb=xe,(uo=et)&&!At)for(Br=K;Br!==null;)xe=Br,et=xe.child,xe.tag===22&&xe.memoizedState!==null?A9(K):et!==null?(et.return=xe,Br=et):A9(K);for(;ae!==null;)Br=ae,T9(ae),ae=ae.sibling;Br=K,Eb=Be,uo=At}N9(m)}else(K.subtreeFlags&8772)!==0&&ae!==null?(ae.return=K,Br=ae):N9(m)}}function N9(m){for(;Br!==null;){var x=Br;if((x.flags&8772)!==0){var N=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:uo||Ab(5,x);break;case 1:var R=x.stateNode;if(x.flags&4&&!uo)if(N===null)R.componentDidMount();else{var K=x.elementType===x.type?N.memoizedProps:ti(x.type,N.memoizedProps);R.componentDidUpdate(K,N.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var ae=x.updateQueue;ae!==null&&zs(x,ae,R);break;case 3:var xe=x.updateQueue;if(xe!==null){if(N=null,x.child!==null)switch(x.child.tag){case 5:N=x.child.stateNode;break;case 1:N=x.child.stateNode}zs(x,xe,N)}break;case 5:var Be=x.stateNode;if(N===null&&x.flags&4){N=Be;var et=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":et.autoFocus&&N.focus();break;case"img":et.src&&(N.src=et.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var At=x.alternate;if(At!==null){var er=At.memoizedState;if(er!==null){var rr=er.dehydrated;rr!==null&&ao(rr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}uo||x.flags&512&&cS(x)}catch(Qt){ca(x,x.return,Qt)}}if(x===m){Br=null;break}if(N=x.sibling,N!==null){N.return=x.return,Br=N;break}Br=x.return}}function E9(m){for(;Br!==null;){var x=Br;if(x===m){Br=null;break}var N=x.sibling;if(N!==null){N.return=x.return,Br=N;break}Br=x.return}}function A9(m){for(;Br!==null;){var x=Br;try{switch(x.tag){case 0:case 11:case 15:var N=x.return;try{Ab(4,x)}catch(et){ca(x,N,et)}break;case 1:var R=x.stateNode;if(typeof R.componentDidMount=="function"){var K=x.return;try{R.componentDidMount()}catch(et){ca(x,K,et)}}var ae=x.return;try{cS(x)}catch(et){ca(x,ae,et)}break;case 5:var xe=x.return;try{cS(x)}catch(et){ca(x,xe,et)}}}catch(et){ca(x,x.return,et)}if(x===m){Br=null;break}var Be=x.sibling;if(Be!==null){Be.return=x.return,Br=Be;break}Br=x.return}}var pJ=Math.ceil,jb=T.ReactCurrentDispatcher,fS=T.ReactCurrentOwner,ic=T.ReactCurrentBatchConfig,Wn=0,wi=null,za=null,Hi=0,Al=0,tp=Hc(0),ri=0,Ax=null,Uh=0,Pb=0,hS=0,jx=null,al=null,mS=0,rp=1/0,Ld=null,Fb=!1,gS=null,mf=null,Mb=!1,gf=null,Ob=0,Px=0,pS=null,Db=-1,Rb=0;function Lo(){return(Wn&6)!==0?qe():Db!==-1?Db:Db=qe()}function pf(m){return(m.mode&1)===0?1:(Wn&2)!==0&&Hi!==0?Hi&-Hi:xx.transition!==null?(Rb===0&&(Rb=Tn()),Rb):(m=xn,m!==0||(m=window.event,m=m===void 0?16:X2(m.type)),m)}function Qc(m,x,N,R){if(50<Px)throw Px=0,pS=null,Error(r(185));hs(m,N,R),((Wn&2)===0||m!==wi)&&(m===wi&&((Wn&2)===0&&(Pb|=N),ri===4&&xf(m,Hi)),il(m,R),N===1&&Wn===0&&(x.mode&1)===0&&(rp=qe()+500,Y0&&Au()))}function il(m,x){var N=m.callbackNode;Mr(m,x);var R=ke(m,m===wi?Hi:0);if(R===0)N!==null&&_e(N),m.callbackNode=null,m.callbackPriority=0;else if(x=R&-R,m.callbackPriority!==x){if(N!=null&&_e(N),x===1)m.tag===0?Gc(P9.bind(null,m)):Fh(P9.bind(null,m)),db(function(){(Wn&6)===0&&Au()}),N=null;else{switch(wl(R)){case 1:N=_r;break;case 4:N=jr;break;case 16:N=pt;break;case 536870912:N=Wr;break;default:N=pt}N=B9(N,j9.bind(null,m))}m.callbackPriority=x,m.callbackNode=N}}function j9(m,x){if(Db=-1,Rb=0,(Wn&6)!==0)throw Error(r(327));var N=m.callbackNode;if(np()&&m.callbackNode!==N)return null;var R=ke(m,m===wi?Hi:0);if(R===0)return null;if((R&30)!==0||(R&m.expiredLanes)!==0||x)x=Ib(m,R);else{x=R;var K=Wn;Wn|=2;var ae=M9();(wi!==m||Hi!==x)&&(Ld=null,rp=qe()+500,Wh(m,x));do try{vJ();break}catch(Be){F9(m,Be)}while(!0);$g(),jb.current=ae,Wn=K,za!==null?x=0:(wi=null,Hi=0,x=ri)}if(x!==0){if(x===2&&(K=qr(m),K!==0&&(R=K,x=xS(m,K))),x===1)throw N=Ax,Wh(m,0),xf(m,R),il(m,qe()),N;if(x===6)xf(m,R);else{if(K=m.current.alternate,(R&30)===0&&!xJ(K)&&(x=Ib(m,R),x===2&&(ae=qr(m),ae!==0&&(R=ae,x=xS(m,ae))),x===1))throw N=Ax,Wh(m,0),xf(m,R),il(m,qe()),N;switch(m.finishedWork=K,m.finishedLanes=R,x){case 0:case 1:throw Error(r(345));case 2:Hh(m,al,Ld);break;case 3:if(xf(m,R),(R&130023424)===R&&(x=mS+500-qe(),10<x)){if(ke(m,0)!==0)break;if(K=m.suspendedLanes,(K&R)!==R){Lo(),m.pingedLanes|=m.suspendedLanes&K;break}m.timeoutHandle=Po(Hh.bind(null,m,al,Ld),x);break}Hh(m,al,Ld);break;case 4:if(xf(m,R),(R&4194240)===R)break;for(x=m.eventTimes,K=-1;0<R;){var xe=31-Lr(R);ae=1<<xe,xe=x[xe],xe>K&&(K=xe),R&=~ae}if(R=K,R=qe()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*pJ(R/1960))-R,10<R){m.timeoutHandle=Po(Hh.bind(null,m,al,Ld),R);break}Hh(m,al,Ld);break;case 5:Hh(m,al,Ld);break;default:throw Error(r(329))}}}return il(m,qe()),m.callbackNode===N?j9.bind(null,m):null}function xS(m,x){var N=jx;return m.current.memoizedState.isDehydrated&&(Wh(m,x).flags|=256),m=Ib(m,x),m!==2&&(x=al,al=N,x!==null&&yS(x)),m}function yS(m){al===null?al=m:al.push.apply(al,m)}function xJ(m){for(var x=m;;){if(x.flags&16384){var N=x.updateQueue;if(N!==null&&(N=N.stores,N!==null))for(var R=0;R<N.length;R++){var K=N[R],ae=K.getSnapshot;K=K.value;try{if(!oo(ae(),K))return!1}catch{return!1}}}if(N=x.child,x.subtreeFlags&16384&&N!==null)N.return=x,x=N;else{if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function xf(m,x){for(x&=~hS,x&=~Pb,m.suspendedLanes|=x,m.pingedLanes&=~x,m=m.expirationTimes;0<x;){var N=31-Lr(x),R=1<<N;m[N]=-1,x&=~R}}function P9(m){if((Wn&6)!==0)throw Error(r(327));np();var x=ke(m,0);if((x&1)===0)return il(m,qe()),null;var N=Ib(m,x);if(m.tag!==0&&N===2){var R=qr(m);R!==0&&(x=R,N=xS(m,R))}if(N===1)throw N=Ax,Wh(m,0),xf(m,x),il(m,qe()),N;if(N===6)throw Error(r(345));return m.finishedWork=m.current.alternate,m.finishedLanes=x,Hh(m,al,Ld),il(m,qe()),null}function vS(m,x){var N=Wn;Wn|=1;try{return m(x)}finally{Wn=N,Wn===0&&(rp=qe()+500,Y0&&Au())}}function zh(m){gf!==null&&gf.tag===0&&(Wn&6)===0&&np();var x=Wn;Wn|=1;var N=ic.transition,R=xn;try{if(ic.transition=null,xn=1,m)return m()}finally{xn=R,ic.transition=N,Wn=x,(Wn&6)===0&&Au()}}function bS(){Al=tp.current,gs(tp)}function Wh(m,x){m.finishedWork=null,m.finishedLanes=0;var N=m.timeoutHandle;if(N!==-1&&(m.timeoutHandle=-1,hx(N)),za!==null)for(N=za.return;N!==null;){var R=N;switch(Ua(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&K0();break;case 3:As(),gs(gi),gs(ei),xi();break;case 5:qc(R);break;case 4:As();break;case 13:gs(ps);break;case 19:gs(ps);break;case 10:Ug(R.type._context);break;case 22:case 23:bS()}N=N.return}if(wi=m,za=m=yf(m.current,null),Hi=Al=x,ri=0,Ax=null,hS=Pb=Uh=0,al=jx=null,tc!==null){for(x=0;x<tc.length;x++)if(N=tc[x],R=N.interleaved,R!==null){N.interleaved=null;var K=R.next,ae=N.pending;if(ae!==null){var xe=ae.next;ae.next=K,R.next=xe}N.pending=R}tc=null}return m}function F9(m,x){do{var N=za;try{if($g(),nf.current=cf,El){for(var R=rs.memoizedState;R!==null;){var K=R.queue;K!==null&&(K.pending=null),R=R.next}El=!1}if(Ui=0,oa=Ws=rs=null,Ou=!1,sl=0,fS.current=null,N===null||N.return===null){ri=1,Ax=x,za=null;break}e:{var ae=m,xe=N.return,Be=N,et=x;if(x=Hi,Be.flags|=32768,et!==null&&typeof et=="object"&&typeof et.then=="function"){var At=et,er=Be,rr=er.tag;if((er.mode&1)===0&&(rr===0||rr===11||rr===15)){var Qt=er.alternate;Qt?(er.updateQueue=Qt.updateQueue,er.memoizedState=Qt.memoizedState,er.lanes=Qt.lanes):(er.updateQueue=null,er.memoizedState=null)}var Or=O(xe);if(Or!==null){Or.flags&=-257,H(Or,xe,Be,ae,x),Or.mode&1&&k(ae,At,x),x=Or,et=At;var Ur=x.updateQueue;if(Ur===null){var zr=new Set;zr.add(et),x.updateQueue=zr}else Ur.add(et);break e}else{if((x&1)===0){k(ae,At,x),wS();break e}et=Error(r(426))}}else if(Zn&&Be.mode&1){var Na=O(xe);if(Na!==null){(Na.flags&65536)===0&&(Na.flags|=256),H(Na,xe,Be,ae,x),Oh(Id(et,Be));break e}}ae=et=Id(et,Be),ri!==4&&(ri=2),jx===null?jx=[ae]:jx.push(ae),ae=xe;do{switch(ae.tag){case 3:ae.flags|=65536,x&=-x,ae.lanes|=x;var yt=Nb(ae,et,x);Lh(ae,yt);break e;case 1:Be=et;var ut=ae.type,St=ae.stateNode;if((ae.flags&128)===0&&(typeof ut.getDerivedStateFromError=="function"||St!==null&&typeof St.componentDidCatch=="function"&&(mf===null||!mf.has(St)))){ae.flags|=65536,x&=-x,ae.lanes|=x;var lr=b(ae,Be,x);Lh(ae,lr);break e}}ae=ae.return}while(ae!==null)}D9(N)}catch(Hr){x=Hr,za===N&&N!==null&&(za=N=N.return);continue}break}while(!0)}function M9(){var m=jb.current;return jb.current=cf,m===null?cf:m}function wS(){(ri===0||ri===3||ri===2)&&(ri=4),wi===null||(Uh&268435455)===0&&(Pb&268435455)===0||xf(wi,Hi)}function Ib(m,x){var N=Wn;Wn|=2;var R=M9();(wi!==m||Hi!==x)&&(Ld=null,Wh(m,x));do try{yJ();break}catch(K){F9(m,K)}while(!0);if($g(),Wn=N,jb.current=R,za!==null)throw Error(r(261));return wi=null,Hi=0,ri}function yJ(){for(;za!==null;)O9(za)}function vJ(){for(;za!==null&&!Fe();)O9(za)}function O9(m){var x=L9(m.alternate,m,Al);m.memoizedProps=m.pendingProps,x===null?D9(m):za=x,fS.current=null}function D9(m){var x=m;do{var N=x.alternate;if(m=x.return,(x.flags&32768)===0){if(N=dJ(N,x,Al),N!==null){za=N;return}}else{if(N=fJ(N,x),N!==null){N.flags&=32767,za=N;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{ri=6,za=null;return}}if(x=x.sibling,x!==null){za=x;return}za=x=m}while(x!==null);ri===0&&(ri=5)}function Hh(m,x,N){var R=xn,K=ic.transition;try{ic.transition=null,xn=1,bJ(m,x,N,R)}finally{ic.transition=K,xn=R}return null}function bJ(m,x,N,R){do np();while(gf!==null);if((Wn&6)!==0)throw Error(r(327));N=m.finishedWork;var K=m.finishedLanes;if(N===null)return null;if(m.finishedWork=null,m.finishedLanes=0,N===m.current)throw Error(r(177));m.callbackNode=null,m.callbackPriority=0;var ae=N.lanes|N.childLanes;if(Xs(m,ae),m===wi&&(za=wi=null,Hi=0),(N.subtreeFlags&2064)===0&&(N.flags&2064)===0||Mb||(Mb=!0,B9(pt,function(){return np(),null})),ae=(N.flags&15990)!==0,(N.subtreeFlags&15990)!==0||ae){ae=ic.transition,ic.transition=null;var xe=xn;xn=1;var Be=Wn;Wn|=4,fS.current=null,mJ(m,N),C9(N,m),kh(dx),hg=!!ux,dx=ux=null,m.current=N,gJ(N),De(),Wn=Be,xn=xe,ic.transition=ae}else m.current=N;if(Mb&&(Mb=!1,gf=m,Ob=K),ae=m.pendingLanes,ae===0&&(mf=null),Gr(N.stateNode),il(m,qe()),x!==null)for(R=m.onRecoverableError,N=0;N<x.length;N++)K=x[N],R(K.value,{componentStack:K.stack,digest:K.digest});if(Fb)throw Fb=!1,m=gS,gS=null,m;return(Ob&1)!==0&&m.tag!==0&&np(),ae=m.pendingLanes,(ae&1)!==0?m===pS?Px++:(Px=0,pS=m):Px=0,Au(),null}function np(){if(gf!==null){var m=wl(Ob),x=ic.transition,N=xn;try{if(ic.transition=null,xn=16>m?16:m,gf===null)var R=!1;else{if(m=gf,gf=null,Ob=0,(Wn&6)!==0)throw Error(r(331));var K=Wn;for(Wn|=4,Br=m.current;Br!==null;){var ae=Br,xe=ae.child;if((Br.flags&16)!==0){var Be=ae.deletions;if(Be!==null){for(var et=0;et<Be.length;et++){var At=Be[et];for(Br=At;Br!==null;){var er=Br;switch(er.tag){case 0:case 11:case 15:Ex(8,er,ae)}var rr=er.child;if(rr!==null)rr.return=er,Br=rr;else for(;Br!==null;){er=Br;var Qt=er.sibling,Or=er.return;if(b9(er),er===At){Br=null;break}if(Qt!==null){Qt.return=Or,Br=Qt;break}Br=Or}}}var Ur=ae.alternate;if(Ur!==null){var zr=Ur.child;if(zr!==null){Ur.child=null;do{var Na=zr.sibling;zr.sibling=null,zr=Na}while(zr!==null)}}Br=ae}}if((ae.subtreeFlags&2064)!==0&&xe!==null)xe.return=ae,Br=xe;else e:for(;Br!==null;){if(ae=Br,(ae.flags&2048)!==0)switch(ae.tag){case 0:case 11:case 15:Ex(9,ae,ae.return)}var yt=ae.sibling;if(yt!==null){yt.return=ae.return,Br=yt;break e}Br=ae.return}}var ut=m.current;for(Br=ut;Br!==null;){xe=Br;var St=xe.child;if((xe.subtreeFlags&2064)!==0&&St!==null)St.return=xe,Br=St;else e:for(xe=ut;Br!==null;){if(Be=Br,(Be.flags&2048)!==0)try{switch(Be.tag){case 0:case 11:case 15:Ab(9,Be)}}catch(Hr){ca(Be,Be.return,Hr)}if(Be===xe){Br=null;break e}var lr=Be.sibling;if(lr!==null){lr.return=Be.return,Br=lr;break e}Br=Be.return}}if(Wn=K,Au(),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Fr,m)}catch{}R=!0}return R}finally{xn=N,ic.transition=x}}return!1}function R9(m,x,N){x=Id(N,x),x=Nb(m,x,1),m=sc(m,x,1),x=Lo(),m!==null&&(hs(m,1,x),il(m,x))}function ca(m,x,N){if(m.tag===3)R9(m,m,N);else for(;x!==null;){if(x.tag===3){R9(x,m,N);break}else if(x.tag===1){var R=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(mf===null||!mf.has(R))){m=Id(N,m),m=b(x,m,1),x=sc(x,m,1),m=Lo(),x!==null&&(hs(x,1,m),il(x,m));break}}x=x.return}}function wJ(m,x,N){var R=m.pingCache;R!==null&&R.delete(x),x=Lo(),m.pingedLanes|=m.suspendedLanes&N,wi===m&&(Hi&N)===N&&(ri===4||ri===3&&(Hi&130023424)===Hi&&500>qe()-mS?Wh(m,0):hS|=N),il(m,x)}function I9(m,x){x===0&&((m.mode&1)===0?x=1:(x=qn,qn<<=1,(qn&130023424)===0&&(qn=4194304)));var N=Lo();m=Ro(m,x),m!==null&&(hs(m,x,N),il(m,N))}function _J(m){var x=m.memoizedState,N=0;x!==null&&(N=x.retryLane),I9(m,N)}function SJ(m,x){var N=0;switch(m.tag){case 13:var R=m.stateNode,K=m.memoizedState;K!==null&&(N=K.retryLane);break;case 19:R=m.stateNode;break;default:throw Error(r(314))}R!==null&&R.delete(x),I9(m,N)}var L9;L9=function(m,x,N){if(m!==null)if(m.memoizedProps!==x.pendingProps||gi.current)le=!0;else{if((m.lanes&N)===0&&(x.flags&128)===0)return le=!1,iS(m,x,N);le=(m.flags&131072)!==0}else le=!1,Zn&&(x.flags&1048576)!==0&&pb(x,Pu,x.index);switch(x.lanes=0,x.tag){case 2:var R=x.type;Rn(m,x),m=x.pendingProps;var K=Ed(x,ei.current);Vc(x,N),K=sf(null,x,R,m,K,N);var ae=af();return x.flags|=1,typeof K=="object"&&K!==null&&typeof K.render=="function"&&K.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,pi(R)?(ae=!0,Ad(x)):ae=!1,x.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,Ih(x),K.updater=df,x.stateNode=K,K._reactInternals=x,Qg(x,R,m,N),x=es(null,x,R,!0,ae,N)):(x.tag=0,Zn&&ae&&X0(x),Ae(null,x,K,N),x=x.child),x;case 16:R=x.elementType;e:{switch(Rn(m,x),m=x.pendingProps,K=R._init,R=K(R._payload),x.type=R,K=x.tag=CJ(R),m=ti(R,m),K){case 0:x=Er(null,x,R,m,N);break e;case 1:x=xs(null,x,R,m,N);break e;case 11:x=dt(null,x,R,m,N);break e;case 14:x=jt(null,x,R,ti(R.type,m),N);break e}throw Error(r(306,R,""))}return x;case 0:return R=x.type,K=x.pendingProps,K=x.elementType===R?K:ti(R,K),Er(m,x,R,K,N);case 1:return R=x.type,K=x.pendingProps,K=x.elementType===R?K:ti(R,K),xs(m,x,R,K,N);case 3:e:{if(zi(x),m===null)throw Error(r(387));R=x.pendingProps,ae=x.memoizedState,K=ae.element,Wg(m,x),ef(x,R,null,N);var xe=x.memoizedState;if(R=xe.element,ae.isDehydrated)if(ae={element:R,isDehydrated:!1,cache:xe.cache,pendingSuspenseBoundaries:xe.pendingSuspenseBoundaries,transitions:xe.transitions},x.updateQueue.baseState=ae,x.memoizedState=ae,x.flags&256){K=Id(Error(r(423)),x),x=ac(m,x,R,N,K);break e}else if(R!==K){K=Id(Error(r(424)),x),x=ac(m,x,R,N,K);break e}else for(kr=Jl(x.stateNode.containerInfo.firstChild),Mo=x,Zn=!0,Oo=null,N=nl(x,null,R,N),x.child=N;N;)N.flags=N.flags&-3|4096,N=N.sibling;else{if(Md(),R===K){x=bi(m,x,N);break e}Ae(m,x,R,N)}x=x.child}return x;case 5:return tf(x),m===null&&J0(x),R=x.type,K=x.pendingProps,ae=m!==null?m.memoizedProps:null,xe=K.children,fx(R,K)?xe=null:ae!==null&&fx(R,ae)&&(x.flags|=32),yn(m,x),Ae(m,x,xe,N),x.child;case 6:return m===null&&J0(x),null;case 13:return Dt(m,x,N);case 4:return Mu(x,x.stateNode.containerInfo),R=x.pendingProps,m===null?x.child=Od(x,null,R,N):Ae(m,x,R,N),x.child;case 11:return R=x.type,K=x.pendingProps,K=x.elementType===R?K:ti(R,K),dt(m,x,R,K,N);case 7:return Ae(m,x,x.pendingProps,N),x.child;case 8:return Ae(m,x,x.pendingProps.children,N),x.child;case 12:return Ae(m,x,x.pendingProps.children,N),x.child;case 10:e:{if(R=x.type._context,K=x.pendingProps,ae=x.memoizedProps,xe=K.value,ss(Dh,R._currentValue),R._currentValue=xe,ae!==null)if(oo(ae.value,xe)){if(ae.children===K.children&&!gi.current){x=bi(m,x,N);break e}}else for(ae=x.child,ae!==null&&(ae.return=x);ae!==null;){var Be=ae.dependencies;if(Be!==null){xe=ae.child;for(var et=Be.firstContext;et!==null;){if(et.context===R){if(ae.tag===1){et=nc(-1,N&-N),et.tag=2;var At=ae.updateQueue;if(At!==null){At=At.shared;var er=At.pending;er===null?et.next=et:(et.next=er.next,er.next=et),At.pending=et}}ae.lanes|=N,et=ae.alternate,et!==null&&(et.lanes|=N),zg(ae.return,N,x),Be.lanes|=N;break}et=et.next}}else if(ae.tag===10)xe=ae.type===x.type?null:ae.child;else if(ae.tag===18){if(xe=ae.return,xe===null)throw Error(r(341));xe.lanes|=N,Be=xe.alternate,Be!==null&&(Be.lanes|=N),zg(xe,N,x),xe=ae.sibling}else xe=ae.child;if(xe!==null)xe.return=ae;else for(xe=ae;xe!==null;){if(xe===x){xe=null;break}if(ae=xe.sibling,ae!==null){ae.return=xe.return,xe=ae;break}xe=xe.return}ae=xe}Ae(m,x,K.children,N),x=x.child}return x;case 9:return K=x.type,R=x.pendingProps.children,Vc(x,N),K=$i(K),R=R(K),x.flags|=1,Ae(m,x,R,N),x.child;case 14:return R=x.type,K=ti(R,x.pendingProps),K=ti(R.type,K),jt(m,x,R,K,N);case 15:return ir(m,x,x.type,x.pendingProps,N);case 17:return R=x.type,K=x.pendingProps,K=x.elementType===R?K:ti(R,K),Rn(m,x),x.tag=1,pi(R)?(m=!0,Ad(x)):m=!1,Vc(x,N),Tb(x,R,K),Qg(x,R,K,N),es(null,x,R,!0,m,N);case 19:return Ta(m,x,N);case 22:return Ir(m,x,N)}throw Error(r(156,x.tag))};function B9(m,x){return de(m,x)}function kJ(m,x,N,R){this.tag=m,this.key=N,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oc(m,x,N,R){return new kJ(m,x,N,R)}function _S(m){return m=m.prototype,!(!m||!m.isReactComponent)}function CJ(m){if(typeof m=="function")return _S(m)?1:0;if(m!=null){if(m=m.$$typeof,m===V)return 11;if(m===te)return 14}return 2}function yf(m,x){var N=m.alternate;return N===null?(N=oc(m.tag,x,m.key,m.mode),N.elementType=m.elementType,N.type=m.type,N.stateNode=m.stateNode,N.alternate=m,m.alternate=N):(N.pendingProps=x,N.type=m.type,N.flags=0,N.subtreeFlags=0,N.deletions=null),N.flags=m.flags&14680064,N.childLanes=m.childLanes,N.lanes=m.lanes,N.child=m.child,N.memoizedProps=m.memoizedProps,N.memoizedState=m.memoizedState,N.updateQueue=m.updateQueue,x=m.dependencies,N.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},N.sibling=m.sibling,N.index=m.index,N.ref=m.ref,N}function Lb(m,x,N,R,K,ae){var xe=2;if(R=m,typeof m=="function")_S(m)&&(xe=1);else if(typeof m=="string")xe=5;else e:switch(m){case F:return Gh(N.children,K,ae,x);case j:xe=8,K|=8;break;case P:return m=oc(12,N,x,K|2),m.elementType=P,m.lanes=ae,m;case Y:return m=oc(13,N,x,K),m.elementType=Y,m.lanes=ae,m;case re:return m=oc(19,N,x,K),m.elementType=re,m.lanes=ae,m;case L:return Bb(N,K,ae,x);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case D:xe=10;break e;case B:xe=9;break e;case V:xe=11;break e;case te:xe=14;break e;case ee:xe=16,R=null;break e}throw Error(r(130,m==null?m:typeof m,""))}return x=oc(xe,N,x,K),x.elementType=m,x.type=R,x.lanes=ae,x}function Gh(m,x,N,R){return m=oc(7,m,R,x),m.lanes=N,m}function Bb(m,x,N,R){return m=oc(22,m,R,x),m.elementType=L,m.lanes=N,m.stateNode={isHidden:!1},m}function SS(m,x,N){return m=oc(6,m,null,x),m.lanes=N,m}function kS(m,x,N){return x=oc(4,m.children!==null?m.children:[],m.key,x),x.lanes=N,x.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},x}function TJ(m,x,N,R,K){this.tag=x,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jr(0),this.expirationTimes=Jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.identifierPrefix=R,this.onRecoverableError=K,this.mutableSourceEagerHydrationData=null}function CS(m,x,N,R,K,ae,xe,Be,et){return m=new TJ(m,x,N,Be,et),x===1?(x=1,ae===!0&&(x|=8)):x=0,ae=oc(3,null,null,x),m.current=ae,ae.stateNode=m,ae.memoizedState={element:R,isDehydrated:N,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ih(ae),m}function NJ(m,x,N){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:R==null?null:""+R,children:m,containerInfo:x,implementation:N}}function $9(m){if(!m)return Zl;m=m._reactInternals;e:{if(he(m)!==m||m.tag!==1)throw Error(r(170));var x=m;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(pi(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(r(171))}if(m.tag===1){var N=m.type;if(pi(N))return Dg(m,N,x)}return x}function U9(m,x,N,R,K,ae,xe,Be,et){return m=CS(N,R,!0,m,K,ae,xe,Be,et),m.context=$9(null),N=m.current,R=Lo(),K=pf(N),ae=nc(R,K),ae.callback=x??null,sc(N,ae,K),m.current.lanes=K,hs(m,K,R),il(m,R),m}function $b(m,x,N,R){var K=x.current,ae=Lo(),xe=pf(K);return N=$9(N),x.context===null?x.context=N:x.pendingContext=N,x=nc(ae,xe),x.payload={element:m},R=R===void 0?null:R,R!==null&&(x.callback=R),m=sc(K,x,xe),m!==null&&(Qc(m,K,xe,ae),Hg(m,K,xe)),xe}function Ub(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function z9(m,x){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var N=m.retryLane;m.retryLane=N!==0&&N<x?N:x}}function TS(m,x){z9(m,x),(m=m.alternate)&&z9(m,x)}function EJ(){return null}var W9=typeof reportError=="function"?reportError:function(m){console.error(m)};function NS(m){this._internalRoot=m}zb.prototype.render=NS.prototype.render=function(m){var x=this._internalRoot;if(x===null)throw Error(r(409));$b(m,x,null,null)},zb.prototype.unmount=NS.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var x=m.containerInfo;zh(function(){$b(null,m,null,null)}),x[Ql]=null}};function zb(m){this._internalRoot=m}zb.prototype.unstable_scheduleHydration=function(m){if(m){var x=nt();m={blockedOn:null,target:m,priority:x};for(var N=0;N<ar.length&&x!==0&&x<ar[N].priority;N++);ar.splice(N,0,m),N===0&&jn(m)}};function ES(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function Wb(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function H9(){}function AJ(m,x,N,R,K){if(K){if(typeof R=="function"){var ae=R;R=function(){var At=Ub(xe);ae.call(At)}}var xe=U9(x,R,m,0,null,!1,!1,"",H9);return m._reactRootContainer=xe,m[Ql]=xe.current,Sd(m.nodeType===8?m.parentNode:m),zh(),xe}for(;K=m.lastChild;)m.removeChild(K);if(typeof R=="function"){var Be=R;R=function(){var At=Ub(et);Be.call(At)}}var et=CS(m,0,!1,null,null,!1,!1,"",H9);return m._reactRootContainer=et,m[Ql]=et.current,Sd(m.nodeType===8?m.parentNode:m),zh(function(){$b(x,et,N,R)}),et}function Hb(m,x,N,R,K){var ae=N._reactRootContainer;if(ae){var xe=ae;if(typeof K=="function"){var Be=K;K=function(){var et=Ub(xe);Be.call(et)}}$b(x,xe,m,K)}else xe=AJ(N,x,m,K,R);return Ub(xe)}Ue=function(m){switch(m.tag){case 3:var x=m.stateNode;if(x.current.memoizedState.isDehydrated){var N=An(x.pendingLanes);N!==0&&(mi(x,N|1),il(x,qe()),(Wn&6)===0&&(rp=qe()+500,Au()))}break;case 13:zh(function(){var R=Ro(m,1);if(R!==null){var K=Lo();Qc(R,m,1,K)}}),TS(m,1)}},Ot=function(m){if(m.tag===13){var x=Ro(m,134217728);if(x!==null){var N=Lo();Qc(x,m,134217728,N)}TS(m,134217728)}},Le=function(m){if(m.tag===13){var x=pf(m),N=Ro(m,x);if(N!==null){var R=Lo();Qc(N,m,x,R)}TS(m,x)}},nt=function(){return xn},Wt=function(m,x){var N=xn;try{return xn=m,x()}finally{xn=N}},we=function(m,x,N){switch(x){case"input":if(Je(m,N),x=N.name,N.type==="radio"&&x!=null){for(N=m;N.parentNode;)N=N.parentNode;for(N=N.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<N.length;x++){var R=N[x];if(R!==m&&R.form===m.form){var K=$a(R);if(!K)throw Error(r(90));oe(R),Je(R,K)}}}break;case"textarea":Ct(m,N);break;case"select":x=N.value,x!=null&&gt(m,!!N.multiple,x,!1)}},Nt=vS,Oe=zh;var jJ={usingClientEntryPoint:!1,Events:[Ph,Sa,$a,Ze,wt,vS]},Fx={findFiberByHostInstance:Nu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PJ={bundleType:Fx.bundleType,version:Fx.version,rendererPackageName:Fx.rendererPackageName,rendererConfig:Fx.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=Ye(m),m===null?null:m.stateNode},findFiberByHostInstance:Fx.findFiberByHostInstance||EJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gb.isDisabled&&Gb.supportsFiber)try{Fr=Gb.inject(PJ),Tr=Gb}catch{}}return ol.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jJ,ol.createPortal=function(m,x){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ES(x))throw Error(r(200));return NJ(m,x,null,N)},ol.createRoot=function(m,x){if(!ES(m))throw Error(r(299));var N=!1,R="",K=W9;return x!=null&&(x.unstable_strictMode===!0&&(N=!0),x.identifierPrefix!==void 0&&(R=x.identifierPrefix),x.onRecoverableError!==void 0&&(K=x.onRecoverableError)),x=CS(m,1,!1,null,null,N,!1,R,K),m[Ql]=x.current,Sd(m.nodeType===8?m.parentNode:m),new NS(x)},ol.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var x=m._reactInternals;if(x===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=Ye(x),m=m===null?null:m.stateNode,m},ol.flushSync=function(m){return zh(m)},ol.hydrate=function(m,x,N){if(!Wb(x))throw Error(r(200));return Hb(null,m,x,!0,N)},ol.hydrateRoot=function(m,x,N){if(!ES(m))throw Error(r(405));var R=N!=null&&N.hydratedSources||null,K=!1,ae="",xe=W9;if(N!=null&&(N.unstable_strictMode===!0&&(K=!0),N.identifierPrefix!==void 0&&(ae=N.identifierPrefix),N.onRecoverableError!==void 0&&(xe=N.onRecoverableError)),x=U9(x,null,m,1,N??null,K,!1,ae,xe),m[Ql]=x.current,Sd(m),R)for(m=0;m<R.length;m++)N=R[m],K=N._getVersion,K=K(N._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[N,K]:x.mutableSourceEagerHydrationData.push(N,K);return new zb(x)},ol.render=function(m,x,N){if(!Wb(x))throw Error(r(200));return Hb(null,m,x,!1,N)},ol.unmountComponentAtNode=function(m){if(!Wb(m))throw Error(r(40));return m._reactRootContainer?(zh(function(){Hb(null,null,m,!1,function(){m._reactRootContainer=null,m[Ql]=null})}),!0):!1},ol.unstable_batchedUpdates=vS,ol.unstable_renderSubtreeIntoContainer=function(m,x,N,R){if(!Wb(N))throw Error(r(200));if(m==null||m._reactInternals===void 0)throw Error(r(38));return Hb(m,x,N,!1,R)},ol.version="18.3.1-next-f1338f8080-20240426",ol}var Q9;function lB(){if(Q9)return PS.exports;Q9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),PS.exports=LJ(),PS.exports}var Z9;function BJ(){if(Z9)return Vb;Z9=1;var e=lB();return Vb.createRoot=e.createRoot,Vb.hydrateRoot=e.hydrateRoot,Vb}var $J=BJ();const UJ=Oc($J);var Fk=lB();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mv(){return mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mv.apply(this,arguments)}var jf;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(jf||(jf={}));const eA="popstate";function zJ(e){e===void 0&&(e={});function t(n,s){let{pathname:a,search:i,hash:o}=n.location;return Mk("",{pathname:a,search:i,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:c4(s)}return HJ(t,r,null,e)}function Ma(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function cB(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function WJ(){return Math.random().toString(36).substr(2,8)}function tA(e,t){return{usr:e.state,key:e.key,idx:t}}function Mk(e,t,r,n){return r===void 0&&(r=null),mv({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?u1(t):t,{state:r,key:t&&t.key||n||WJ()})}function c4(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function u1(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function HJ(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:a=!1}=n,i=s.history,o=jf.Pop,c=null,u=d();u==null&&(u=0,i.replaceState(mv({},i.state,{idx:u}),""));function d(){return(i.state||{idx:null}).idx}function f(){o=jf.Pop;let v=d(),C=v==null?null:v-u;u=v,c&&c({action:o,location:y.location,delta:C})}function h(v,C){o=jf.Push;let w=Mk(y.location,v,C);u=d()+1;let _=tA(w,u),T=y.createHref(w);try{i.pushState(_,"",T)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;s.location.assign(T)}a&&c&&c({action:o,location:y.location,delta:1})}function g(v,C){o=jf.Replace;let w=Mk(y.location,v,C);u=d();let _=tA(w,u),T=y.createHref(w);i.replaceState(_,"",T),a&&c&&c({action:o,location:y.location,delta:0})}function p(v){let C=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof v=="string"?v:c4(v);return w=w.replace(/ $/,"%20"),Ma(C,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,C)}let y={get action(){return o},get location(){return e(s,i)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(eA,f),c=v,()=>{s.removeEventListener(eA,f),c=null}},createHref(v){return t(s,v)},createURL:p,encodeLocation(v){let C=p(v);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:h,replace:g,go(v){return i.go(v)}};return y}var rA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(rA||(rA={}));function GJ(e,t,r){return r===void 0&&(r="/"),VJ(e,t,r)}function VJ(e,t,r,n){let s=typeof t=="string"?u1(t):t,a=J8(s.pathname||"/",r);if(a==null)return null;let i=uB(e);qJ(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let u=aQ(a);o=rQ(i[c],u)}return o}function uB(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(a,i,o)=>{let c={relativePath:o===void 0?a.path||"":o,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(Ma(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=If([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(Ma(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),uB(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:eQ(u,a.index),routesMeta:d})};return e.forEach((a,i)=>{var o;if(a.path===""||!((o=a.path)!=null&&o.includes("?")))s(a,i);else for(let c of dB(a.path))s(a,i,c)}),t}function dB(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let i=dB(n.join("/")),o=[];return o.push(...i.map(c=>c===""?a:[a,c].join("/"))),s&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function qJ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:tQ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const KJ=/^:[\w-]+$/,YJ=3,XJ=2,JJ=1,QJ=10,ZJ=-2,nA=e=>e==="*";function eQ(e,t){let r=e.split("/"),n=r.length;return r.some(nA)&&(n+=ZJ),t&&(n+=XJ),r.filter(s=>!nA(s)).reduce((s,a)=>s+(KJ.test(a)?YJ:a===""?JJ:QJ),n)}function tQ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function rQ(e,t,r){let{routesMeta:n}=e,s={},a="/",i=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=nQ({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f)return null;Object.assign(s,f.params),i.push({params:s,pathname:If([a,f.pathname]),pathnameBase:cQ(If([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=If([a,f.pathnameBase]))}return i}function nQ(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=sQ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],i=a.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:g}=d;if(h==="*"){let y=o[f]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const p=o[f];return g&&!p?u[h]=void 0:u[h]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:i,pattern:e}}function sQ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),cB(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function aQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cB(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function J8(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function iQ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?u1(e):e;return{pathname:r?r.startsWith("/")?r:oQ(r,t):t,search:uQ(n),hash:dQ(s)}}function oQ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function OS(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lQ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Q8(e,t){let r=lQ(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Z8(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=u1(e):(s=mv({},e),Ma(!s.pathname||!s.pathname.includes("?"),OS("?","pathname","search",s)),Ma(!s.pathname||!s.pathname.includes("#"),OS("#","pathname","hash",s)),Ma(!s.search||!s.search.includes("#"),OS("#","search","hash",s)));let a=e===""||s.pathname==="",i=a?"/":s.pathname,o;if(i==null)o=r;else{let f=t.length-1;if(!n&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}o=f>=0?t[f]:"/"}let c=iQ(s,o),u=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const If=e=>e.join("/").replace(/\/\/+/g,"/"),cQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,dQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const fB=["post","put","patch","delete"];new Set(fB);const hQ=["get",...fB];new Set(hQ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gv(){return gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gv.apply(this,arguments)}const eT=S.createContext(null),mQ=S.createContext(null),rh=S.createContext(null),R_=S.createContext(null),S0=S.createContext({outlet:null,matches:[],isDataRoute:!1}),hB=S.createContext(null);function gQ(e,t){let{relative:r}=t===void 0?{}:t;d1()||Ma(!1);let{basename:n,navigator:s}=S.useContext(rh),{hash:a,pathname:i,search:o}=gB(e,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:If([n,i])),s.createHref({pathname:c,search:o,hash:a})}function d1(){return S.useContext(R_)!=null}function k0(){return d1()||Ma(!1),S.useContext(R_).location}function mB(e){S.useContext(rh).static||S.useLayoutEffect(e)}function Xo(){let{isDataRoute:e}=S.useContext(S0);return e?EQ():pQ()}function pQ(){d1()||Ma(!1);let e=S.useContext(eT),{basename:t,future:r,navigator:n}=S.useContext(rh),{matches:s}=S.useContext(S0),{pathname:a}=k0(),i=JSON.stringify(Q8(s,r.v7_relativeSplatPath)),o=S.useRef(!1);return mB(()=>{o.current=!0}),S.useCallback(function(u,d){if(d===void 0&&(d={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let f=Z8(u,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:If([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,i,a,e])}function I_(){let{matches:e}=S.useContext(S0),t=e[e.length-1];return t?t.params:{}}function gB(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=S.useContext(rh),{matches:s}=S.useContext(S0),{pathname:a}=k0(),i=JSON.stringify(Q8(s,n.v7_relativeSplatPath));return S.useMemo(()=>Z8(e,JSON.parse(i),a,r==="path"),[e,i,a,r])}function xQ(e,t){return yQ(e,t)}function yQ(e,t,r,n){d1()||Ma(!1);let{navigator:s}=S.useContext(rh),{matches:a}=S.useContext(S0),i=a[a.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=k0(),d;if(t){var f;let v=typeof t=="string"?u1(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||Ma(!1),d=v}else d=u;let h=d.pathname||"/",g=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let p=GJ(e,{pathname:g}),y=SQ(p&&p.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:If([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:If([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,r,n);return t&&y?S.createElement(R_.Provider,{value:{location:gv({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:jf.Pop}},y):y}function vQ(){let e=NQ(),t=fQ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),r?S.createElement("pre",{style:s},r):null,null)}const bQ=S.createElement(vQ,null);class wQ extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?S.createElement(S0.Provider,{value:this.props.routeContext},S.createElement(hB.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _Q(e){let{routeContext:t,match:r,children:n}=e,s=S.useContext(eT);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(S0.Provider,{value:t},n)}function SQ(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=(s=r)==null?void 0:s.errors;if(o!=null){let d=i.findIndex(f=>f.route.id&&o?.[f.route.id]!==void 0);d>=0||Ma(!1),i=i.slice(0,Math.min(i.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:g}=r,p=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||p){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((d,f,h)=>{let g,p=!1,y=null,v=null;r&&(g=o&&f.route.id?o[f.route.id]:void 0,y=f.route.errorElement||bQ,c&&(u<0&&h===0?(AQ("route-fallback"),p=!0,v=null):u===h&&(p=!0,v=f.route.hydrateFallbackElement||null)));let C=t.concat(i.slice(0,h+1)),w=()=>{let _;return g?_=y:p?_=v:f.route.Component?_=S.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=d,S.createElement(_Q,{match:f,routeContext:{outlet:d,matches:C,isDataRoute:r!=null},children:_})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?S.createElement(wQ,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):w()},null)}var pB=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(pB||{}),xB=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(xB||{});function kQ(e){let t=S.useContext(eT);return t||Ma(!1),t}function CQ(e){let t=S.useContext(mQ);return t||Ma(!1),t}function TQ(e){let t=S.useContext(S0);return t||Ma(!1),t}function yB(e){let t=TQ(),r=t.matches[t.matches.length-1];return r.route.id||Ma(!1),r.route.id}function NQ(){var e;let t=S.useContext(hB),r=CQ(),n=yB();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function EQ(){let{router:e}=kQ(pB.UseNavigateStable),t=yB(xB.UseNavigateStable),r=S.useRef(!1);return mB(()=>{r.current=!0}),S.useCallback(function(s,a){a===void 0&&(a={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,gv({fromRouteId:t},a)))},[e,t])}const sA={};function AQ(e,t,r){sA[e]||(sA[e]=!0)}function jQ(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Hp(e){let{to:t,replace:r,state:n,relative:s}=e;d1()||Ma(!1);let{future:a,static:i}=S.useContext(rh),{matches:o}=S.useContext(S0),{pathname:c}=k0(),u=Xo(),d=Z8(t,Q8(o,a.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return S.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:s}),[u,f,s,r,n]),null}function ea(e){Ma(!1)}function PQ(e){let{basename:t="/",children:r=null,location:n,navigationType:s=jf.Pop,navigator:a,static:i=!1,future:o}=e;d1()&&Ma(!1);let c=t.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:c,navigator:a,static:i,future:gv({v7_relativeSplatPath:!1},o)}),[c,o,a,i]);typeof n=="string"&&(n=u1(n));let{pathname:d="/",search:f="",hash:h="",state:g=null,key:p="default"}=n,y=S.useMemo(()=>{let v=J8(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:g,key:p},navigationType:s}},[c,d,f,h,g,p,s]);return y==null?null:S.createElement(rh.Provider,{value:u},S.createElement(R_.Provider,{children:r,value:y}))}function tT(e){let{children:t,location:r}=e;return xQ(Ok(t),r)}new Promise(()=>{});function Ok(e,t){t===void 0&&(t=[]);let r=[];return S.Children.forEach(e,(n,s)=>{if(!S.isValidElement(n))return;let a=[...t,s];if(n.type===S.Fragment){r.push.apply(r,Ok(n.props.children,a));return}n.type!==ea&&Ma(!1),!n.props.index||!n.props.children||Ma(!1);let i={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Ok(n.props.children,a)),r.push(i)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dk(){return Dk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dk.apply(this,arguments)}function FQ(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,a;for(a=0;a<n.length;a++)s=n[a],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function MQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function OQ(e,t){return e.button===0&&(!t||t==="_self")&&!MQ(e)}const DQ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RQ="6";try{window.__reactRouterVersion=RQ}catch{}const IQ="startTransition",aA=oB[IQ];function LQ(e){let{basename:t,children:r,future:n,window:s}=e,a=S.useRef();a.current==null&&(a.current=zJ({window:s,v5Compat:!0}));let i=a.current,[o,c]=S.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},d=S.useCallback(f=>{u&&aA?aA(()=>c(f)):c(f)},[c,u]);return S.useLayoutEffect(()=>i.listen(d),[i,d]),S.useEffect(()=>jQ(n),[n]),S.createElement(PQ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:i,future:n})}const BQ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$Q=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vB=S.forwardRef(function(t,r){let{onClick:n,relative:s,reloadDocument:a,replace:i,state:o,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=FQ(t,DQ),{basename:g}=S.useContext(rh),p,y=!1;if(typeof u=="string"&&$Q.test(u)&&(p=u,BQ))try{let _=new URL(window.location.href),T=u.startsWith("//")?new URL(_.protocol+u):new URL(u),E=J8(T.pathname,g);T.origin===_.origin&&E!=null?u=E+T.search+T.hash:y=!0}catch{}let v=gQ(u,{relative:s}),C=UQ(u,{replace:i,state:o,target:c,preventScrollReset:d,relative:s,viewTransition:f});function w(_){n&&n(_),_.defaultPrevented||C(_)}return S.createElement("a",Dk({},h,{href:p||v,onClick:y||a?n:w,ref:r,target:c}))});var iA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(iA||(iA={}));var oA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(oA||(oA={}));function UQ(e,t){let{target:r,replace:n,state:s,preventScrollReset:a,relative:i,viewTransition:o}=t===void 0?{}:t,c=Xo(),u=k0(),d=gB(e,{relative:i});return S.useCallback(f=>{if(OQ(f,r)){f.preventDefault();let h=n!==void 0?n:c4(u)===c4(d);c(e,{replace:h,state:s,preventScrollReset:a,relative:i,viewTransition:o})}},[u,c,d,n,s,r,e,a,i,o])}const ds={student_subjects:1800*1e3,student_active_tests:180*1e3,student_results_table:300*1e3,teacher_subjects:900*1e3,teacher_classes:900*1e3,teacher_tests:600*1e3,teacher_results_table:600*1e3,admin_users:1200*1e3,admin_teachers:1200*1e3,admin_subjects:1800*1e3,admin_academic_years:3600*1e3,admin_tests:900*1e3,admin_results_table:null,admin_teacher_id:3600*1e3,all_tests:1200*1e3,subjects_dropdown:1800*1e3,grades_classes:3600*1e3,test_progress:120*1e3,anti_cheating:120*1e3,word_matching_test:600*1e3,speaking_test_data:3600*1e3},rT=(e,t={})=>{const{includeExpired:r=!1}=t;try{const n=localStorage.getItem(e);if(!n)return console.log(" Cache: No data found for key:",e),null;const s=JSON.parse(n),{data:a,timestamp:i,ttl:o}=s,c=Date.now()-i,d=typeof o=="number"&&Number.isFinite(o)?c>o:!1;return d&&!r?(console.log(" Cache: Data expired for key:",e,"age:",c,"ttl:",o),localStorage.removeItem(e),null):(console.log(" Cache: Entry found for key:",e,"age:",c,"ttl:",o,"expired:",d),{data:a,timestamp:i,ttl:o,age:c,isExpired:d})}catch(n){return console.log(" Cache: Corrupted data for key:",e,n),localStorage.removeItem(e),null}},js=e=>{const t=rT(e);return t?t.data:null},ys=(e,t,r)=>{try{console.log(" Cache: Setting data for key:",e,"ttl:",r),localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:typeof r=="number"&&Number.isFinite(r)?r:r===null?null:void 0})),console.log(" Cache: Data cached successfully for key:",e)}catch{console.log(" Cache: Storage full, cleaning old data for key:",e),bB();try{localStorage.setItem(e,JSON.stringify({data:t,timestamp:Date.now(),ttl:typeof r=="number"&&Number.isFinite(r)?r:r===null?null:void 0})),console.log(" Cache: Data cached after cleanup for key:",e)}catch{console.warn("Storage full, cannot cache data")}}},bB=()=>{const e=Date.now(),t=Object.keys(localStorage);t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i,ttl:o}=JSON.parse(a);e-i>o&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const r=e-10080*60*1e3;t.forEach(s=>{try{const a=localStorage.getItem(s);if(a){const{timestamp:i}=JSON.parse(a);i<r&&localStorage.removeItem(s)}}catch{localStorage.removeItem(s)}});const n=Object.keys(localStorage);if(n.length>0){const s=n.map(i=>{try{const o=localStorage.getItem(i);if(o){const{timestamp:c}=JSON.parse(o);return{key:i,timestamp:c}}}catch{return{key:i,timestamp:0}}return{key:i,timestamp:0}}),a=Math.ceil(s.length*.25);s.sort((i,o)=>i.timestamp-o.timestamp).slice(0,a).forEach(({key:i})=>localStorage.removeItem(i))}},nT=e=>{Object.keys(localStorage).forEach(r=>{r.includes(e)&&localStorage.removeItem(r)})},f1=(e,t,r)=>{const n=`test_progress_${e}_${t}_${r}`,s=`anti_cheating_${e}_${t}_${r}`;if(localStorage.removeItem(n),localStorage.removeItem(s),t==="speaking_test_data"){const a=`speaking_test_data_${e}_${r}`;localStorage.removeItem(a),console.log(`Cleared speaking test data cache for ${r}`)}console.log(`Cleared test data for ${t}_${r}`)},vp=Object.freeze(Object.defineProperty({__proto__:null,CACHE_TTL:ds,cleanupOldData:bB,clearTestData:f1,clearUserData:nT,getCachedData:js,getCachedEntry:rT,setCachedData:ys},Symbol.toStringTag,{value:"Module"}));let Zc=null,Ox=null;function Vw(){if(Ox!==null)return Ox;try{const e="_test";localStorage.setItem(e,"test");const t=localStorage.getItem(e);localStorage.removeItem(e),Ox=t==="test"}catch(e){console.warn("localStorage unavailable, falling back to sessionStorage",e),Ox=!1}return Ox}function pv(){return Vw()?localStorage:sessionStorage}async function sT(e){try{const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}catch(t){return console.warn("Hash computation failed",t),btoa(e).replace(/[^a-zA-Z0-9]/g,"").substring(0,64)}}async function zQ(e,t){try{const r=pv();return r.setItem(e,t),r.getItem(e)===t}catch(r){return console.warn("Storage write failed",r),!1}}async function WQ(e,t){try{const r=pv(),n=await sT(t);return r.setItem(`${e}_hash`,n),await zQ(e,t)}catch(r){return console.warn("Failed to store with hash",r),!1}}async function HQ(e){try{const t=pv(),r=t.getItem(e),n=t.getItem(`${e}_hash`);return!r||!n?!1:await sT(r)===n}catch(t){return console.warn("Hash verification failed",t),!1}}async function GQ(e,t=3,r=200){for(let n=0;n<t;n++){if(await e())return!0;await new Promise(a=>setTimeout(a,r))}return!1}const ma={async set(e){const t=Vw(),r=pv();if(!t){console.warn(" localStorage unavailable - using sessionStorage (less persistent)");try{r.setItem("auth_token",e);const a=r.getItem("auth_token")===e;return a&&(Zc=e),a}catch(s){return console.error("sessionStorage fallback failed",s),!1}}const n=await GQ(()=>WQ("auth_token",e));return n&&(Zc=e),n},async get(){if(Zc)return Zc;const e=pv();if(!Vw())try{const t=e.getItem("auth_token");return Zc=t,t}catch(t){return console.error("sessionStorage fallback read failed",t),null}try{const t=e.getItem("auth_token");if(!t)return Zc=null,null;if(e.getItem("auth_token_hash")){if(!await HQ("auth_token"))return Zc=null,null}else{console.log("Migrating legacy token to secure storage format...");try{const n=await sT(t);if(e.setItem("auth_token_hash",n),e.getItem("auth_token_hash")!==n)return console.warn("Failed to store hash during migration"),t}catch(n){console.warn("Failed to migrate token hash:",n)}}return Zc=t,t}catch(t){return console.warn("Failed to get token",t),Zc=null,null}},async clear(){try{Vw()&&(localStorage.removeItem("auth_token"),localStorage.removeItem("auth_token_hash"))}catch{}try{sessionStorage.removeItem("auth_token"),sessionStorage.removeItem("auth_token_hash")}catch{}Zc=null},clearCache(){Zc=null}},u4=Object.freeze(Object.defineProperty({__proto__:null,SecureToken:ma},Symbol.toStringTag,{value:"Module"})),wB=S.createContext(),_B=({children:e})=>{const[t,r]=S.useState(null),[n,s]=S.useState(null),[a,i]=S.useState(null),[o,c]=S.useState(!1),[u,d]=S.useState(!0),[f,h]=S.useState(null);S.useEffect(()=>{console.log("[AUTH] Initializing application session..."),v()},[]),S.useEffect(()=>{if(o&&a){console.log("[AUTH] Setting up proactive token refresh...");let W=!1;const M=setInterval(async()=>{if(o&&a&&!W){W=!0;try{const I=a||await(window.tokenManager?.getToken()||ma.get());if(I&&g(I))console.log("[AUTH] Token expired, attempting refresh..."),await p()||console.log("[AUTH] Proactive refresh failed, but user remains logged in");else if(I)try{const q=JSON.parse(atob(I.split(".")[1])).exp*1e3,ne=Date.now(),X=q-ne;X<300*1e3&&X>0&&(console.log(`[AUTH] Token expires in ${Math.round(X/1e3)} seconds, refreshing...`),await p()||console.log("[AUTH] Proactive refresh failed, but user remains logged in"))}catch(z){console.error("[AUTH] Error parsing token for expiration check:",z)}}catch(I){console.error("[AUTH] Error in proactive refresh:",I)}finally{W=!1}}},300*1e3);return()=>{console.log("[AUTH] Clearing proactive token refresh interval"),clearInterval(M)}}},[o,a]);const g=W=>{if(!W)return!0;try{if(typeof W!="string"||!W.includes("."))return console.warn("[AUTH] Invalid token format - not a JWT"),!0;const M=W.split(".");if(M.length!==3)return console.warn("[AUTH] Invalid token format - not 3 parts"),!0;const I=JSON.parse(atob(M[1])),z=Date.now()/1e3;return I.exp<=z}catch(M){if(console.error("[AUTH] Error decoding token:",M),console.warn("[AUTH] Token appears to be corrupted - clearing authentication"),ma.clear().catch(()=>{}),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("userData"),window.tokenManager)try{window.tokenManager.clearAuth()}catch(I){console.warn("[AUTH] Error clearing token manager:",I)}return!0}},p=async()=>{const W=localStorage.getItem("refresh_token");if(!W)return console.log("[AUTH] No refresh token found"),!1;try{const M=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:W})});if(M.ok){const I=await M.json();console.log("[AUTH] Token refresh successful"),await ma.set(I.accessToken),localStorage.setItem("refresh_token",I.refreshToken),localStorage.setItem("accessToken",I.accessToken);try{window.tokenManager&&(await window.tokenManager.setToken(I.accessToken),I.refreshToken&&window.tokenManager.setRefreshToken(I.refreshToken))}catch{}return i(I.accessToken),!0}else return console.error("[AUTH] Token refresh failed:",M.status),!1}catch(M){return console.error("[AUTH] Token refresh error:",M),!1}},y=async(W,M={})=>{const I=a||await(window.tokenManager?.getToken()||ma.get());if(!I)throw new Error("No authentication token found");const z={"Content-Type":"application/json",Authorization:`Bearer ${I}`,...M.headers},q=await fetch(W,{...M,headers:z});if(q.status===401)if(console.log("[AUTH] 401 error, attempting token refresh..."),await p()){const X=await(window.tokenManager?.getToken()||ma.get());return z.Authorization=`Bearer ${X}`,fetch(W,{...M,headers:z})}else throw console.log("[AUTH] Token refresh failed, returning 401 response"),new Error("Authentication failed - please login again");return q},v=async()=>{try{console.log("[AUTH] Starting session initialization..."),d(!0);const W=await(window.tokenManager?.getToken()||ma.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),M=localStorage.getItem("user_data")||localStorage.getItem("userData"),I=M?JSON.parse(M).role:null;if(console.log("[AUTH] Found stored data:",{hasToken:!!W,hasUser:!!M,role:I}),W&&I&&M)try{const z=JSON.parse(M);if(g(W))if(console.log("[AUTH] Token expired, attempting refresh..."),await p()){console.log("[AUTH] Token refreshed successfully");const ne=await(window.tokenManager?.getToken()||ma.get());i(ne)}else console.log("[AUTH] Token refresh failed, but continuing with existing token..."),i(W);else i(W);s(I),r(z);try{if(window.tokenManager&&W){await window.tokenManager.setToken(W);const q=localStorage.getItem("refresh_token");q&&window.tokenManager.setRefreshToken(q)}}catch{}c(!0),await _(z,I)}catch(z){console.error("[AUTH] Error parsing stored user data:",z),console.log("[AUTH] Invalid user data, but not forcing logout - continuing with empty state"),c(!1)}}catch(W){console.error("[AUTH] Session initialization error:",W),console.log("[AUTH] Initialization error, but not forcing logout - continuing with empty state"),c(!1)}finally{console.log("[AUTH] Session initialization complete"),d(!1)}},C=async W=>{try{if(d(!0),h(null),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),h("Please wait for the logout process to complete.");return}console.log("Attempting login with:",W.username);let M,I;W.username==="admin"?(M={ok:!0,json:()=>({success:!0,token:"test-token"})},I="admin"):(M=await authService.teacherLogin(W),I="teacher");const z=await M.json();await w(M,I,z)}catch(M){j(M)}finally{d(!1)}},w=async(W,M,I)=>{try{if(W.ok&&I.success&&I.token){i(I.token),s(M),r(I),c(!0);const z=I.accessToken||I.token;await ma.set(z),localStorage.setItem("refresh_token",I.refreshToken),localStorage.setItem("user_data",JSON.stringify(I)),localStorage.setItem("accessToken",z);try{window.tokenManager&&(await window.tokenManager.setToken(z),I.refreshToken&&window.tokenManager.setRefreshToken(I.refreshToken))}catch{}try{const q=Date.now(),ne=10080*60*1e3,X=[];for(let se=0;se<localStorage.length;se++){const ce=localStorage.key(se);if(!(!ce||!(ce.startsWith("test_progress_")||ce.startsWith("test_timer_")||ce.startsWith("test_shuffle_order_")||ce.startsWith("student_results_table_")||ce.startsWith("anti_cheating_"))))try{const be=localStorage.getItem(ce);if(!be){X.push(ce);continue}let oe=null;if(be.startsWith("{")||be.startsWith("[")){const je=JSON.parse(be),Re=je.timestamp||je.lastSaved||je.lastTickAt||je.createdAt||je.updatedAt||je.startedAt||je.started_at;Re&&(oe=new Date(Re).getTime())}if(!oe){const je=`${ce}__ts`,Re=localStorage.getItem(je);Re&&(oe=parseInt(Re)||null)}if(!oe)continue;q-oe>ne&&X.push(ce)}catch{}}X.forEach(se=>{try{localStorage.removeItem(se)}catch{}})}catch(q){console.warn("LocalStorage cleanup skipped:",q)}return await _(I,M),!0}else{const z=I.message||W.statusText||"Login failed";return j(new Error(z)),!1}}catch(z){return j(z),!1}},_=async(W,M)=>{try{switch(M){case"admin":console.log("Admin login successful, role:",W.role),console.log("Admin logged in:",W);break;case"teacher":console.log("Teacher login successful, role:",W.role),console.log("Teacher data:",W.teacher),await E(W),await F();break;case"student":console.log("Student login successful"),T(W);break;default:console.warn("Unknown user role:",M)}}catch(I){console.error("Post-login actions error:",I)}},T=W=>{r(W),console.log("Student info populated:",W)},E=async W=>{r(W),console.log("Teacher info populated:",W)},A=async()=>{try{console.log("Initializing teacher cabinet...")}catch(W){console.error("Error initializing teacher cabinet:",W)}},F=async()=>{try{console.log("Checking teacher subjects...")}catch(W){console.error("Error checking teacher subjects:",W)}},j=W=>{h(W.message||"Login failed"),P()},P=()=>{h(null),d(!1)},D=S.useCallback(()=>{B()},[]),B=async()=>{r(null),s(null),i(null),c(!1),h(null);const W=t?.student_id||t?.teacher_id||t?.admin_id||t?.id;W&&nT(W),await ma.clear(),localStorage.removeItem("userRole"),localStorage.removeItem("userData"),localStorage.removeItem("user_data"),localStorage.removeItem("user_role"),localStorage.removeItem("accessToken"),localStorage.removeItem("refresh_token"),localStorage.removeItem("testProgress"),localStorage.removeItem("formData"),window.tokenManager&&await window.tokenManager.clearAuth(),setTimeout(()=>{V()},100)},V=()=>{console.log("Interface reset after session clear - redirecting to login"),window.location.replace("/login")},Y=()=>t?.id||null,re=()=>n==="admin"?t:null,te=()=>n==="admin",ee=()=>te()?t?.admin_id:null,L=()=>n==="teacher"?t?.username:null,Q=()=>{console.log("Auth functions available:",{handleUnifiedLogin:typeof C,logout:typeof D,getCurrentTeacherId:typeof Y,isAdmin:typeof te,getCurrentAdmin:typeof re,getCurrentAdminId:typeof ee,getCurrentTeacherUsername:typeof L})};S.useEffect(()=>(window.logout=D,window.getCurrentTeacherId=Y,window.getCurrentAdmin=re,window.isAdmin=te,window.getCurrentAdminId=ee,window.getCurrentTeacherUsername=L,window.checkFunctionAvailability=Q,()=>{delete window.logout,delete window.getCurrentTeacherId,delete window.getCurrentAdmin,delete window.isAdmin,delete window.getCurrentAdminId,delete window.getCurrentTeacherUsername,delete window.checkFunctionAvailability}),[D]);const U=S.useCallback(W=>{console.log("Setting user data from external auth:",W),r(W),s(W.role),i(W.token),c(!0),d(!1),h(null),ma.set(W.token).catch(M=>{console.error("[AUTH] Failed to store token securely:",M)}),localStorage.setItem("user_data",JSON.stringify(W)),localStorage.setItem("accessToken",W.token),window.tokenManager&&window.tokenManager.setToken(W.token).catch(()=>{})},[]),G={user:t,role:n,token:a,isAuthenticated:o,isLoading:u,error:f,login:C,setUserData:U,logout:D,resetLoginForm:P,forceCompleteLogout:B,initializeApplicationSession:v,makeAuthenticatedRequest:y,populateStudentInfo:T,populateTeacherInfo:E,initializeTeacherCabinet:A,checkTeacherSubjects:F,getCurrentTeacherId:Y,getCurrentAdmin:re,isAdmin:te,getCurrentAdminId:ee,getCurrentTeacherUsername:L,handleLoginResponse:w,handlePostLoginActions:_,handleLoginFailure:j,resetInterfaceAfterSessionClear:V,checkFunctionAvailability:Q};return l.jsx(wB.Provider,{value:G,children:e})},Fs=()=>{const e=S.useContext(wB);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class VQ{constructor(){this.baseURL="http://localhost:8888/.netlify/functions",this.timeout=1e4,this.retryCount=3,this.retryDelay=1e3}async getHeaders(){const t=await(window.tokenManager?.getToken()||ma.get())||localStorage.getItem("token");return{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}}}async sendRequest(t,r){try{return await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(n){throw console.error(" Network error:",n),n}}async request(t,r={}){const n=`${this.baseURL}${t}`,a={method:"GET",headers:await this.getHeaders(),timeout:this.timeout,...r};let i;for(let o=0;o<this.retryCount;o++)try{const c=new AbortController,u=setTimeout(()=>c.abort(),this.timeout),d=await fetch(n,{...a,signal:c.signal});if(clearTimeout(u),!d.ok)throw new Error(`HTTP error! status: ${d.status}`);return await d.json()}catch(c){if(i=c,c.name==="AbortError")throw new Error("Request timeout");o<this.retryCount-1&&(console.warn(`Request failed, retrying in ${this.retryDelay}ms... (attempt ${o+1}/${this.retryCount})`),await new Promise(u=>setTimeout(u,this.retryDelay*Math.pow(2,o))))}throw i}async get(t,r={}){return this.request(t,{...r,method:"GET"})}async post(t,r,n={}){return this.request(t,{...n,method:"POST",body:JSON.stringify(r)})}async put(t,r,n={}){return this.request(t,{...n,method:"PUT",body:JSON.stringify(r)})}async delete(t,r={}){return this.request(t,{...r,method:"DELETE"})}async patch(t,r,n={}){return this.request(t,{...n,method:"PATCH",body:JSON.stringify(r)})}async uploadFile(t,r,n={}){const s=new FormData;s.append("file",r);const a=`${this.baseURL}${t}`,i=await(window.tokenManager?.getToken()||ma.get())||localStorage.getItem("token"),o={method:"POST",headers:{...i&&{Authorization:`Bearer ${i}`}},body:s,...n};try{const c=await fetch(a,o);if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);return await c.json()}catch(c){throw c}}async downloadFile(t,r,n={}){const s=`${this.baseURL}${t}`,i={method:"GET",headers:await this.getHeaders(),...n};try{const o=await fetch(s,i);if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const c=await o.blob(),u=window.URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=r,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(u)}catch(o){throw o}}ensureDebugOutput(){let t=document.getElementById("debug-output");return t||(t=document.createElement("div"),t.id="debug-output",t.className="fixed top-4 right-4 w-96 max-h-96 bg-white border border-gray-300 rounded-lg shadow-lg p-4 z-50 overflow-auto",t.innerHTML='<div class="text-sm font-mono text-gray-800">Debug Output</div>',document.body.appendChild(t)),t}async testDbConnection(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/test-db-connection")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Database Connection Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,message:"Database connection successful",data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Database Connection Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,message:"Database connection failed",error:t.message}}}async testStudentLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:"51706",password:"1"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Student Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Student Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testTeacherLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"Aleksandr_Petrov",password:"465"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Teacher Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Teacher Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testAdminLogin(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:"admin",password:"admin123"})})).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Admin Login Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Admin Login Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetTeacherSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-teacher-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Teacher Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Teacher Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetClassResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-class-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Class Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Class Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentSubjects(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-subjects")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Subjects Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Subjects Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testGetStudentTestResults(){try{const t=this.ensureDebugOutput(),n=await(await fetch("/.netlify/functions/get-student-test-results")).json();return t&&(t.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Get Student Test Results Test</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),{success:!0,data:n}}catch(t){const r=this.ensureDebugOutput();return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Get Student Test Results Error</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${t.message}</pre>
        `),{success:!1,error:t.message}}}async testEndpoints(){const t=["/debug/test-student-login","/debug/test-teacher-login","/debug/test-admin-login","/debug/test-get-subjects","/debug/test-get-teacher-subjects","/debug/test-get-class-results","/debug/test-get-student-subjects","/debug/test-get-student-test-results"],r={};for(const n of t)try{const s=await this.get(n);r[n]={success:!0,data:s}}catch(s){r[n]={success:!1,error:s.message}}return r}async debugFunction(t){const r=this.ensureDebugOutput();try{let n;switch(t){case"testDbConnection":n=await this.testDbConnection();break;case"testStudentLogin":n=await this.testStudentLogin();break;case"testTeacherLogin":n=await this.testTeacherLogin();break;case"testAdminLogin":n=await this.testAdminLogin();break;case"testGetSubjects":n=await this.testGetSubjects();break;case"testGetTeacherSubjects":n=await this.testGetTeacherSubjects();break;case"testGetClassResults":n=await this.testGetClassResults();break;case"testGetStudentSubjects":n=await this.testGetStudentSubjects();break;case"testGetStudentTestResults":n=await this.testGetStudentTestResults();break;default:throw new Error(`Unknown debug function: ${t}`)}return r&&(r.innerHTML=`
          <div class="text-sm font-mono text-gray-800 mb-2">Debug Function: ${t}</div>
          <pre class="text-xs bg-gray-100 p-2 rounded overflow-auto">${JSON.stringify(n,null,2)}</pre>
        `),n}catch(n){throw r&&(r.innerHTML=`
          <div class="text-sm font-mono text-red-600 mb-2">Debug Function Error: ${t}</div>
          <pre class="text-xs bg-red-100 p-2 rounded overflow-auto">Error: ${n.message}</pre>
        `),n}}showDebugFunctions(){const t=this.ensureDebugOutput(),r=`
      <div class="text-sm font-mono text-gray-800 mb-4">Debug Functions</div>
      <div class="grid grid-cols-2 gap-2 mb-4">
        <button onclick="apiClient.testDbConnection()" class="px-3 py-2 bg-blue-500 text-white text-xs rounded hover:bg-blue-600 transition-colors">
          Test DB Connection
        </button>
        <button onclick="apiClient.testStudentLogin()" class="px-3 py-2 bg-green-500 text-white text-xs rounded hover:bg-green-600 transition-colors">
          Test Student Login
        </button>
        <button onclick="apiClient.testTeacherLogin()" class="px-3 py-2 bg-yellow-500 text-white text-xs rounded hover:bg-yellow-600 transition-colors">
          Test Teacher Login
        </button>
        <button onclick="apiClient.testAdminLogin()" class="px-3 py-2 bg-red-500 text-white text-xs rounded hover:bg-red-600 transition-colors">
          Test Admin Login
        </button>
        <button onclick="apiClient.testGetSubjects()" class="px-3 py-2 bg-purple-500 text-white text-xs rounded hover:bg-purple-600 transition-colors">
          Test Get Subjects
        </button>
        <button onclick="apiClient.testGetTeacherSubjects()" class="px-3 py-2 bg-indigo-500 text-white text-xs rounded hover:bg-indigo-600 transition-colors">
          Test Get Teacher Subjects
        </button>
        <button onclick="apiClient.testGetClassResults()" class="px-3 py-2 bg-pink-500 text-white text-xs rounded hover:bg-pink-600 transition-colors">
          Test Get Class Results
        </button>
        <button onclick="apiClient.testGetStudentSubjects()" class="px-3 py-2 bg-teal-500 text-white text-xs rounded hover:bg-teal-600 transition-colors">
          Test Get Student Subjects
        </button>
        <button onclick="apiClient.testGetStudentTestResults()" class="px-3 py-2 bg-orange-500 text-white text-xs rounded hover:bg-orange-600 transition-colors">
          Test Get Student Test Results
        </button>
        <button onclick="apiClient.testEndpoints()" class="px-3 py-2 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 transition-colors">
          Test All Endpoints
        </button>
      </div>
    `;t.innerHTML=r}}const da=new VQ,aT=S.createContext({});function iT(e){const t=S.useRef(null);return t.current===null&&(t.current=e()),t.current}const oT=typeof window<"u",SB=oT?S.useLayoutEffect:S.useEffect,L_=S.createContext(null);function lT(e,t){e.indexOf(t)===-1&&e.push(t)}function cT(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const d0=(e,t,r)=>r>t?t:r<e?e:r;let uT=()=>{};const f0={},kB=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function CB(e){return typeof e=="object"&&e!==null}const TB=e=>/^0[^.\s]+$/u.test(e);function dT(e){let t;return()=>(t===void 0&&(t=e()),t)}const kc=e=>e,qQ=(e,t)=>r=>t(e(r)),i2=(...e)=>e.reduce(qQ),xv=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class fT{constructor(){this.subscriptions=[]}add(t){return lT(this.subscriptions,t),()=>cT(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qu=e=>e*1e3,Zu=e=>e/1e3;function NB(e,t){return t?e*(1e3/t):0}const EB=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,KQ=1e-7,YQ=12;function XQ(e,t,r,n,s){let a,i,o=0;do i=t+(r-t)/2,a=EB(i,n,s)-e,a>0?r=i:t=i;while(Math.abs(a)>KQ&&++o<YQ);return i}function o2(e,t,r,n){if(e===t&&r===n)return kc;const s=a=>XQ(a,0,1,e,r);return a=>a===0||a===1?a:EB(s(a),t,n)}const AB=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,jB=e=>t=>1-e(1-t),PB=o2(.33,1.53,.69,.99),hT=jB(PB),FB=AB(hT),MB=e=>(e*=2)<1?.5*hT(e):.5*(2-Math.pow(2,-10*(e-1))),mT=e=>1-Math.sin(Math.acos(e)),OB=jB(mT),DB=AB(mT),JQ=o2(.42,0,1,1),QQ=o2(0,0,.58,1),RB=o2(.42,0,.58,1),ZQ=e=>Array.isArray(e)&&typeof e[0]!="number",IB=e=>Array.isArray(e)&&typeof e[0]=="number",eZ={linear:kc,easeIn:JQ,easeInOut:RB,easeOut:QQ,circIn:mT,circInOut:DB,circOut:OB,backIn:hT,backInOut:FB,backOut:PB,anticipate:MB},tZ=e=>typeof e=="string",lA=e=>{if(IB(e)){uT(e.length===4);const[t,r,n,s]=e;return o2(t,r,n,s)}else if(tZ(e))return eZ[e];return e},qb=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function rZ(e,t){let r=new Set,n=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(d){i.has(d)&&(u.schedule(d),e()),d(o)}const u={schedule:(d,f=!1,h=!1)=>{const p=h&&s?r:n;return f&&i.add(d),p.has(d)||p.add(d),d},cancel:d=>{n.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,a&&(a=!1,u.process(d))}};return u}const nZ=40;function LB(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>r=!0,i=qb.reduce((_,T)=>(_[T]=rZ(a),_),{}),{setup:o,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:g,postRender:p}=i,y=()=>{const _=f0.useManualTiming?s.timestamp:performance.now();r=!1,f0.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(_-s.timestamp,nZ),1)),s.timestamp=_,s.isProcessing=!0,o.process(s),c.process(s),u.process(s),d.process(s),f.process(s),h.process(s),g.process(s),p.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(y))},v=()=>{r=!0,n=!0,s.isProcessing||e(y)};return{schedule:qb.reduce((_,T)=>{const E=i[T];return _[T]=(A,F=!1,j=!1)=>(r||v(),E.schedule(A,F,j)),_},{}),cancel:_=>{for(let T=0;T<qb.length;T++)i[qb[T]].cancel(_)},state:s,steps:i}}const{schedule:Vs,cancel:Hf,state:qi,steps:DS}=LB(typeof requestAnimationFrame<"u"?requestAnimationFrame:kc,!0);let qw;function sZ(){qw=void 0}const hl={now:()=>(qw===void 0&&hl.set(qi.isProcessing||f0.useManualTiming?qi.timestamp:performance.now()),qw),set:e=>{qw=e,queueMicrotask(sZ)}},BB=e=>t=>typeof t=="string"&&t.startsWith(e),gT=BB("--"),aZ=BB("var(--"),pT=e=>aZ(e)?iZ.test(e.split("/*")[0].trim()):!1,iZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,h1={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},yv={...h1,transform:e=>d0(0,1,e)},Kb={...h1,default:1},qy=e=>Math.round(e*1e5)/1e5,xT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function oZ(e){return e==null}const lZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yT=(e,t)=>r=>!!(typeof r=="string"&&lZ.test(r)&&r.startsWith(e)||t&&!oZ(r)&&Object.prototype.hasOwnProperty.call(r,t)),$B=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,a,i,o]=n.match(xT);return{[e]:parseFloat(s),[t]:parseFloat(a),[r]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},cZ=e=>d0(0,255,e),RS={...h1,transform:e=>Math.round(cZ(e))},am={test:yT("rgb","red"),parse:$B("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+RS.transform(e)+", "+RS.transform(t)+", "+RS.transform(r)+", "+qy(yv.transform(n))+")"};function uZ(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Rk={test:yT("#"),parse:uZ,transform:am.transform},l2=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Cf=l2("deg"),ed=l2("%"),cn=l2("px"),dZ=l2("vh"),fZ=l2("vw"),cA={...ed,parse:e=>ed.parse(e)/100,transform:e=>ed.transform(e*100)},bp={test:yT("hsl","hue"),parse:$B("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+ed.transform(qy(t))+", "+ed.transform(qy(r))+", "+qy(yv.transform(n))+")"},Va={test:e=>am.test(e)||Rk.test(e)||bp.test(e),parse:e=>am.test(e)?am.parse(e):bp.test(e)?bp.parse(e):Rk.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?am.transform(e):bp.transform(e),getAnimatableNone:e=>{const t=Va.parse(e);return t.alpha=0,Va.transform(t)}},hZ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mZ(e){return isNaN(e)&&typeof e=="string"&&(e.match(xT)?.length||0)+(e.match(hZ)?.length||0)>0}const UB="number",zB="color",gZ="var",pZ="var(",uA="${}",xZ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vv(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let a=0;const o=t.replace(xZ,c=>(Va.test(c)?(n.color.push(a),s.push(zB),r.push(Va.parse(c))):c.startsWith(pZ)?(n.var.push(a),s.push(gZ),r.push(c)):(n.number.push(a),s.push(UB),r.push(parseFloat(c))),++a,uA)).split(uA);return{values:r,split:o,indexes:n,types:s}}function WB(e){return vv(e).values}function HB(e){const{split:t,types:r}=vv(e),n=t.length;return s=>{let a="";for(let i=0;i<n;i++)if(a+=t[i],s[i]!==void 0){const o=r[i];o===UB?a+=qy(s[i]):o===zB?a+=Va.transform(s[i]):a+=s[i]}return a}}const yZ=e=>typeof e=="number"?0:Va.test(e)?Va.getAnimatableNone(e):e;function vZ(e){const t=WB(e);return HB(e)(t.map(yZ))}const Gf={test:mZ,parse:WB,createTransformer:HB,getAnimatableNone:vZ};function IS(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function bZ({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,a=0,i=0;if(!t)s=a=i=r;else{const o=r<.5?r*(1+t):r+t-r*t,c=2*r-o;s=IS(c,o,e+1/3),a=IS(c,o,e),i=IS(c,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:n}}function d4(e,t){return r=>r>0?t:e}const ra=(e,t,r)=>e+(t-e)*r,LS=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},wZ=[Rk,am,bp],_Z=e=>wZ.find(t=>t.test(e));function dA(e){const t=_Z(e);if(!t)return!1;let r=t.parse(e);return t===bp&&(r=bZ(r)),r}const fA=(e,t)=>{const r=dA(e),n=dA(t);if(!r||!n)return d4(e,t);const s={...r};return a=>(s.red=LS(r.red,n.red,a),s.green=LS(r.green,n.green,a),s.blue=LS(r.blue,n.blue,a),s.alpha=ra(r.alpha,n.alpha,a),am.transform(s))},Ik=new Set(["none","hidden"]);function SZ(e,t){return Ik.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function kZ(e,t){return r=>ra(e,t,r)}function vT(e){return typeof e=="number"?kZ:typeof e=="string"?pT(e)?d4:Va.test(e)?fA:NZ:Array.isArray(e)?GB:typeof e=="object"?Va.test(e)?fA:CZ:d4}function GB(e,t){const r=[...e],n=r.length,s=e.map((a,i)=>vT(a)(a,t[i]));return a=>{for(let i=0;i<n;i++)r[i]=s[i](a);return r}}function CZ(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=vT(e[s])(e[s],t[s]));return s=>{for(const a in n)r[a]=n[a](s);return r}}function TZ(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][n[a]],o=e.values[i]??0;r[s]=o,n[a]++}return r}const NZ=(e,t)=>{const r=Gf.createTransformer(t),n=vv(e),s=vv(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Ik.has(e)&&!s.values.length||Ik.has(t)&&!n.values.length?SZ(e,t):i2(GB(TZ(n,s),s.values),r):d4(e,t)};function VB(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?ra(e,t,r):vT(e)(e,t)}const EZ=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Vs.update(t,r),stop:()=>Hf(t),now:()=>qi.isProcessing?qi.timestamp:hl.now()}},qB=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let a=0;a<s;a++)n+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},f4=2e4;function bT(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<f4;)t+=r,n=e.next(t);return t>=f4?1/0:t}function AZ(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(bT(n),f4);return{type:"keyframes",ease:a=>n.next(s*a).value/t,duration:Zu(s)}}const jZ=5;function KB(e,t,r){const n=Math.max(t-jZ,0);return NB(r-e(n),t-n)}const ga={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},BS=.001;function PZ({duration:e=ga.duration,bounce:t=ga.bounce,velocity:r=ga.velocity,mass:n=ga.mass}){let s,a,i=1-t;i=d0(ga.minDamping,ga.maxDamping,i),e=d0(ga.minDuration,ga.maxDuration,Zu(e)),i<1?(s=u=>{const d=u*i,f=d*e,h=d-r,g=Lk(u,i),p=Math.exp(-f);return BS-h/g*p},a=u=>{const f=u*i*e,h=f*r+r,g=Math.pow(i,2)*Math.pow(u,2)*e,p=Math.exp(-f),y=Lk(Math.pow(u,2),i);return(-s(u)+BS>0?-1:1)*((h-g)*p)/y}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-BS+d*f},a=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const o=5/e,c=MZ(s,a,o);if(e=Qu(e),isNaN(c))return{stiffness:ga.stiffness,damping:ga.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:i*2*Math.sqrt(n*u),duration:e}}}const FZ=12;function MZ(e,t,r){let n=r;for(let s=1;s<FZ;s++)n=n-e(n)/t(n);return n}function Lk(e,t){return e*Math.sqrt(1-t*t)}const OZ=["duration","bounce"],DZ=["stiffness","damping","mass"];function hA(e,t){return t.some(r=>e[r]!==void 0)}function RZ(e){let t={velocity:ga.velocity,stiffness:ga.stiffness,damping:ga.damping,mass:ga.mass,isResolvedFromDuration:!1,...e};if(!hA(e,DZ)&&hA(e,OZ))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,a=2*d0(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:ga.mass,stiffness:s,damping:a}}else{const r=PZ(e);t={...t,...r,mass:ga.mass},t.isResolvedFromDuration=!0}return t}function h4(e=ga.visualDuration,t=ga.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const a=r.keyframes[0],i=r.keyframes[r.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:g}=RZ({...r,velocity:-Zu(r.velocity||0)}),p=h||0,y=u/(2*Math.sqrt(c*d)),v=i-a,C=Zu(Math.sqrt(c/d)),w=Math.abs(v)<5;n||(n=w?ga.restSpeed.granular:ga.restSpeed.default),s||(s=w?ga.restDelta.granular:ga.restDelta.default);let _;if(y<1){const E=Lk(C,y);_=A=>{const F=Math.exp(-y*C*A);return i-F*((p+y*C*v)/E*Math.sin(E*A)+v*Math.cos(E*A))}}else if(y===1)_=E=>i-Math.exp(-C*E)*(v+(p+C*v)*E);else{const E=C*Math.sqrt(y*y-1);_=A=>{const F=Math.exp(-y*C*A),j=Math.min(E*A,300);return i-F*((p+y*C*v)*Math.sinh(j)+E*v*Math.cosh(j))/E}}const T={calculatedDuration:g&&f||null,next:E=>{const A=_(E);if(g)o.done=E>=f;else{let F=E===0?p:0;y<1&&(F=E===0?Qu(p):KB(_,E,A));const j=Math.abs(F)<=n,P=Math.abs(i-A)<=s;o.done=j&&P}return o.value=o.done?i:A,o},toString:()=>{const E=Math.min(bT(T),f4),A=qB(F=>T.next(E*F).value,E,30);return E+"ms "+A},toTransition:()=>{}};return T}h4.applyToOptions=e=>{const t=AZ(e,100,h4);return e.ease=t.ease,e.duration=Qu(t.duration),e.type="keyframes",e};function Bk({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:o,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},g=j=>o!==void 0&&j<o||c!==void 0&&j>c,p=j=>o===void 0?c:c===void 0||Math.abs(o-j)<Math.abs(c-j)?o:c;let y=r*t;const v=f+y,C=i===void 0?v:i(v);C!==v&&(y=C-f);const w=j=>-y*Math.exp(-j/n),_=j=>C+w(j),T=j=>{const P=w(j),D=_(j);h.done=Math.abs(P)<=u,h.value=h.done?C:D};let E,A;const F=j=>{g(h.value)&&(E=j,A=h4({keyframes:[h.value,p(h.value)],velocity:KB(_,j,h.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return F(0),{calculatedDuration:null,next:j=>{let P=!1;return!A&&E===void 0&&(P=!0,T(j),F(j)),E!==void 0&&j>=E?A.next(j-E):(!P&&T(j),h)}}}function IZ(e,t,r){const n=[],s=r||f0.mix||VB,a=e.length-1;for(let i=0;i<a;i++){let o=s(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||kc:t;o=i2(c,o)}n.push(o)}return n}function LZ(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const a=e.length;if(uT(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=IZ(t,n,s),c=o.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=xv(e[f],e[f+1],d);return o[f](h)};return r?d=>u(d0(e[0],e[a-1],d)):u}function BZ(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=xv(0,t,n);e.push(ra(r,1,s))}}function $Z(e){const t=[0];return BZ(t,e.length-1),t}function UZ(e,t){return e.map(r=>r*t)}function zZ(e,t){return e.map(()=>t||RB).splice(0,e.length-1)}function Ky({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=ZQ(n)?n.map(lA):lA(n),a={done:!1,value:t[0]},i=UZ(r&&r.length===t.length?r:$Z(t),e),o=LZ(i,t,{ease:Array.isArray(s)?s:zZ(t,s)});return{calculatedDuration:e,next:c=>(a.value=o(c),a.done=c>=e,a)}}const WZ=e=>e!==null;function wT(e,{repeat:t,repeatType:r="loop"},n,s=1){const a=e.filter(WZ),o=s<0||t&&r!=="loop"&&t%2===1?0:a.length-1;return!o||n===void 0?a[o]:n}const HZ={decay:Bk,inertia:Bk,tween:Ky,keyframes:Ky,spring:h4};function YB(e){typeof e.type=="string"&&(e.type=HZ[e.type])}class _T{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const GZ=e=>e/100;class ST extends _T{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==hl.now()&&this.tick(hl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;YB(t);const{type:r=Ky,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:o}=t;const c=r||Ky;c!==Ky&&typeof o[0]!="number"&&(this.mixKeyframes=i2(GZ,VB(o[0],o[1])),o=[0,100]);const u=c({...t,keyframes:o});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...o].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=bT(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:o,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:g,type:p,onUpdate:y,finalKeyframe:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const C=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?C<0:C>s;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,T=n;if(f){const j=Math.min(this.currentTime,s)/o;let P=Math.floor(j),D=j%1;!D&&j>=1&&(D=1),D===1&&P--,P=Math.min(P,f+1),!!(P%2)&&(h==="reverse"?(D=1-D,g&&(D-=g/o)):h==="mirror"&&(T=i)),_=d0(0,1,D)*o}const E=w?{done:!1,value:d[0]}:T.next(_);a&&(E.value=a(E.value));let{done:A}=E;!w&&c!==null&&(A=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&A);return F&&p!==Bk&&(E.value=wT(d,this.options,v,this.speed)),y&&y(E.value),F&&this.finish(),E}then(t,r){return this.finished.then(t,r)}get duration(){return Zu(this.calculatedDuration)}get time(){return Zu(this.currentTime)}set time(t){t=Qu(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(hl.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Zu(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=EZ,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(hl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function VZ(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const im=e=>e*180/Math.PI,$k=e=>{const t=im(Math.atan2(e[1],e[0]));return Uk(t)},qZ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:$k,rotateZ:$k,skewX:e=>im(Math.atan(e[1])),skewY:e=>im(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Uk=e=>(e=e%360,e<0&&(e+=360),e),mA=$k,gA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),pA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),KZ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:gA,scaleY:pA,scale:e=>(gA(e)+pA(e))/2,rotateX:e=>Uk(im(Math.atan2(e[6],e[5]))),rotateY:e=>Uk(im(Math.atan2(-e[2],e[0]))),rotateZ:mA,rotate:mA,skewX:e=>im(Math.atan(e[4])),skewY:e=>im(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function zk(e){return e.includes("scale")?1:0}function Wk(e,t){if(!e||e==="none")return zk(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=KZ,s=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=qZ,s=o}if(!s)return zk(t);const a=n[t],i=s[1].split(",").map(XZ);return typeof a=="function"?a(i):i[a]}const YZ=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Wk(r,t)};function XZ(e){return parseFloat(e.trim())}const m1=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],g1=new Set(m1),xA=e=>e===h1||e===cn,JZ=new Set(["x","y","z"]),QZ=m1.filter(e=>!JZ.has(e));function ZZ(e){const t=[];return QZ.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const hm={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Wk(t,"x"),y:(e,{transform:t})=>Wk(t,"y")};hm.translateX=hm.x;hm.translateY=hm.y;const mm=new Set;let Hk=!1,Gk=!1,Vk=!1;function XB(){if(Gk){const e=Array.from(mm).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=ZZ(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([a,i])=>{n.getValue(a)?.set(i)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Gk=!1,Hk=!1,mm.forEach(e=>e.complete(Vk)),mm.clear()}function JB(){mm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Gk=!0)})}function eee(){Vk=!0,JB(),XB(),Vk=!1}class kT{constructor(t,r,n,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(mm.add(this),Hk||(Hk=!0,Vs.read(JB),Vs.resolveKeyframes(XB))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&r){const o=n.readValue(r,i);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}VZ(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),mm.delete(this)}cancel(){this.state==="scheduled"&&(mm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const tee=e=>e.startsWith("--");function ree(e,t,r){tee(t)?e.style.setProperty(t,r):e.style[t]=r}const nee=dT(()=>window.ScrollTimeline!==void 0),see={};function aee(e,t){const r=dT(e);return()=>see[t]??r()}const QB=aee(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Iy=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,yA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Iy([0,.65,.55,1]),circOut:Iy([.55,0,1,.45]),backIn:Iy([.31,.01,.66,-.59]),backOut:Iy([.33,1.53,.69,.99])};function ZB(e,t){if(e)return typeof e=="function"?QB()?qB(e,t):"ease-out":IB(e)?Iy(e):Array.isArray(e)?e.map(r=>ZB(r,t)||yA.easeOut):yA[e]}function iee(e,t,r,{delay:n=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:o="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const f=ZB(o,s);Array.isArray(f)&&(d.easing=f);const h={delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function e$(e){return typeof e=="function"&&"applyToOptions"in e}function oee({type:e,...t}){return e$(e)&&QB()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class lee extends _T{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:o,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,uT(typeof t.type!="string");const u=oee(t);this.animation=iee(r,n,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=wT(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):ree(r,n,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Zu(Number(t))}get time(){return Zu(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Qu(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&nee()?(this.animation.timeline=t,kc):r(this)}}const t$={anticipate:MB,backInOut:FB,circInOut:DB};function cee(e){return e in t$}function uee(e){typeof e.ease=="string"&&cee(e.ease)&&(e.ease=t$[e.ease])}const vA=10;class dee extends lee{constructor(t){uee(t),YB(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:a,...i}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new ST({...i,autoplay:!1}),c=Qu(this.finishedTime??this.time);r.setWithVelocity(o.sample(c-vA).value,o.sample(c).value,vA),o.stop()}}const bA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Gf.test(e)||e==="0")&&!e.startsWith("url("));function fee(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function hee(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=bA(s,t),o=bA(a,t);return!i||!o?!1:fee(e)||(r==="spring"||e$(r))&&n}function qk(e){e.duration=0,e.type}const mee=new Set(["opacity","clipPath","filter","transform"]),gee=dT(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function pee(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return gee()&&r&&mee.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&a!==0&&i!=="inertia"}const xee=40;class yee extends _T{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:o,name:c,motionValue:u,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=hl.now();const h={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:a,repeatType:i,name:c,motionValue:u,element:d,...f},g=d?.KeyframeResolver||kT;this.keyframeResolver=new g(o,(p,y,v)=>this.onKeyframesResolved(p,y,h,!v),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:o,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=hl.now(),hee(t,a,i,o)||((f0.instantAnimations||!c)&&d?.(wT(t,n,r)),t[0]=t[t.length-1],qk(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>xee?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},g=!u&&pee(h)?new dee({...h,element:h.motionValue.owner.current}):new ST(h);g.finished.then(()=>this.notifyFinished()).catch(kc),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),eee()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const vee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function bee(e){const t=vee.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function r$(e,t,r=1){const[n,s]=bee(e);if(!n)return;const a=window.getComputedStyle(t).getPropertyValue(n);if(a){const i=a.trim();return kB(i)?parseFloat(i):i}return pT(s)?r$(s,t,r+1):s}function CT(e,t){return e?.[t]??e?.default??e}const n$=new Set(["width","height","top","left","right","bottom",...m1]),wee={test:e=>e==="auto",parse:e=>e},s$=e=>t=>t.test(e),a$=[h1,cn,ed,Cf,fZ,dZ,wee],wA=e=>a$.find(s$(e));function _ee(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||TB(e):!0}const See=new Set(["brightness","contrast","saturate","opacity"]);function kee(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(xT)||[];if(!n)return e;const s=r.replace(n,"");let a=See.has(t)?1:0;return n!==r&&(a*=100),t+"("+a+s+")"}const Cee=/\b([a-z-]*)\(.*?\)/gu,Kk={...Gf,getAnimatableNone:e=>{const t=e.match(Cee);return t?t.map(kee).join(" "):e}},_A={...h1,transform:Math.round},Tee={rotate:Cf,rotateX:Cf,rotateY:Cf,rotateZ:Cf,scale:Kb,scaleX:Kb,scaleY:Kb,scaleZ:Kb,skew:Cf,skewX:Cf,skewY:Cf,distance:cn,translateX:cn,translateY:cn,translateZ:cn,x:cn,y:cn,z:cn,perspective:cn,transformPerspective:cn,opacity:yv,originX:cA,originY:cA,originZ:cn},TT={borderWidth:cn,borderTopWidth:cn,borderRightWidth:cn,borderBottomWidth:cn,borderLeftWidth:cn,borderRadius:cn,radius:cn,borderTopLeftRadius:cn,borderTopRightRadius:cn,borderBottomRightRadius:cn,borderBottomLeftRadius:cn,width:cn,maxWidth:cn,height:cn,maxHeight:cn,top:cn,right:cn,bottom:cn,left:cn,padding:cn,paddingTop:cn,paddingRight:cn,paddingBottom:cn,paddingLeft:cn,margin:cn,marginTop:cn,marginRight:cn,marginBottom:cn,marginLeft:cn,backgroundPositionX:cn,backgroundPositionY:cn,...Tee,zIndex:_A,fillOpacity:yv,strokeOpacity:yv,numOctaves:_A},Nee={...TT,color:Va,backgroundColor:Va,outlineColor:Va,fill:Va,stroke:Va,borderColor:Va,borderTopColor:Va,borderRightColor:Va,borderBottomColor:Va,borderLeftColor:Va,filter:Kk,WebkitFilter:Kk},i$=e=>Nee[e];function o$(e,t){let r=i$(e);return r!==Kk&&(r=Gf),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Eee=new Set(["auto","none","0"]);function Aee(e,t,r){let n=0,s;for(;n<e.length&&!s;){const a=e[n];typeof a=="string"&&!Eee.has(a)&&vv(a).values.length&&(s=e[n]),n++}if(s&&r)for(const a of t)e[a]=o$(r,s)}class jee extends kT{constructor(t,r,n,s,a){super(t,r,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),pT(u))){const d=r$(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!n$.has(n)||t.length!==2)return;const[s,a]=t,i=wA(s),o=wA(a);if(i!==o)if(xA(i)&&xA(o))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else hm[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||_ee(t[s]))&&n.push(s);n.length&&Aee(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hm[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,i=n[a];n[a]=hm[r](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,c])=>{t.getValue(o).set(c)}),this.resolveNoneKeyframes()}}function Pee(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const s=r?.[e]??n.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const l$=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function c$(e){return CB(e)&&"offsetHeight"in e}const SA=30,Fee=e=>!isNaN(parseFloat(e));class Mee{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=hl.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=hl.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Fee(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new fT);const n=this.events[t].add(r);return t==="change"?()=>{n(),Vs.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=hl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>SA)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,SA);return NB(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gp(e,t){return new Mee(e,t)}const{schedule:NT}=LB(queueMicrotask,!1),ru={x:!1,y:!1};function u$(){return ru.x||ru.y}function Oee(e){return e==="x"||e==="y"?ru[e]?null:(ru[e]=!0,()=>{ru[e]=!1}):ru.x||ru.y?null:(ru.x=ru.y=!0,()=>{ru.x=ru.y=!1})}function d$(e,t){const r=Pee(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function kA(e){return!(e.pointerType==="touch"||u$())}function Dee(e,t,r={}){const[n,s,a]=d$(e,r),i=o=>{if(!kA(o))return;const{target:c}=o,u=t(c,o);if(typeof u!="function"||!c)return;const d=f=>{kA(f)&&(u(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(o=>{o.addEventListener("pointerenter",i,s)}),a}const f$=(e,t)=>t?e===t?!0:f$(e,t.parentElement):!1,ET=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Ree=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Iee(e){return Ree.has(e.tagName)||e.tabIndex!==-1}const Kw=new WeakSet;function CA(e){return t=>{t.key==="Enter"&&e(t)}}function $S(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Lee=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=CA(()=>{if(Kw.has(r))return;$S(r,"down");const s=CA(()=>{$S(r,"up")}),a=()=>$S(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",a,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function TA(e){return ET(e)&&!u$()}function Bee(e,t,r={}){const[n,s,a]=d$(e,r),i=o=>{const c=o.currentTarget;if(!TA(o))return;Kw.add(c);const u=t(c,o),d=(g,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),Kw.has(c)&&Kw.delete(c),TA(g)&&typeof u=="function"&&u(g,{success:p})},f=g=>{d(g,c===window||c===document||r.useGlobalTarget||f$(c,g.target))},h=g=>{d(g,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",i,s),c$(o)&&(o.addEventListener("focus",u=>Lee(u,s)),!Iee(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),a}function h$(e){return CB(e)&&"ownerSVGElement"in e}function $ee(e){return h$(e)&&e.tagName==="svg"}const bo=e=>!!(e&&e.getVelocity),Uee=[...a$,Va,Gf],zee=e=>Uee.find(s$(e)),AT=S.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Wee extends S.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=c$(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=r.offsetHeight||0,a.width=r.offsetWidth||0,a.top=r.offsetTop,a.left=r.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Hee({children:e,isPresent:t,anchorX:r,root:n}){const s=S.useId(),a=S.useRef(null),i=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=S.useContext(AT);return S.useInsertionEffect(()=>{const{width:c,height:u,top:d,left:f,right:h}=i.current;if(t||!a.current||!c||!u)return;const g=r==="left"?`left: ${f}`:`right: ${h}`;a.current.dataset.motionPopId=s;const p=document.createElement("style");o&&(p.nonce=o);const y=n??document.head;return y.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${g}px !important;
            top: ${d}px !important;
          }
        `),()=>{y.contains(p)&&y.removeChild(p)}},[t]),l.jsx(Wee,{isPresent:t,childRef:a,sizeRef:i,children:S.cloneElement(e,{ref:a})})}const Gee=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:i,anchorX:o,root:c})=>{const u=iT(Vee),d=S.useId();let f=!0,h=S.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:g=>{u.set(g,!0);for(const p of u.values())if(!p)return;n&&n()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[r,u,n]);return a&&f&&(h={...h}),S.useMemo(()=>{u.forEach((g,p)=>u.set(p,!1))},[r]),S.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),i==="popLayout"&&(e=l.jsx(Hee,{isPresent:r,anchorX:o,root:c,children:e})),l.jsx(L_.Provider,{value:h,children:e})};function Vee(){return new Map}function m$(e=!0){const t=S.useContext(L_);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,a=S.useId();S.useEffect(()=>{if(e)return s(a)},[e]);const i=S.useCallback(()=>e&&n&&n(a),[a,n,e]);return!r&&n?[!1,i]:[!0]}const Yb=e=>e.key||"";function NA(e){const t=[];return S.Children.forEach(e,r=>{S.isValidElement(r)&&t.push(r)}),t}const Wo=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:o="left",root:c})=>{const[u,d]=m$(i),f=S.useMemo(()=>NA(e),[e]),h=i&&!u?[]:f.map(Yb),g=S.useRef(!0),p=S.useRef(f),y=iT(()=>new Map),[v,C]=S.useState(f),[w,_]=S.useState(f);SB(()=>{g.current=!1,p.current=f;for(let A=0;A<w.length;A++){const F=Yb(w[A]);h.includes(F)?y.delete(F):y.get(F)!==!0&&y.set(F,!1)}},[w,h.length,h.join("-")]);const T=[];if(f!==v){let A=[...f];for(let F=0;F<w.length;F++){const j=w[F],P=Yb(j);h.includes(P)||(A.splice(F,0,j),T.push(j))}return a==="wait"&&T.length&&(A=T),_(NA(A)),C(f),null}const{forceRender:E}=S.useContext(aT);return l.jsx(l.Fragment,{children:w.map(A=>{const F=Yb(A),j=i&&!u?!1:f===w||h.includes(F),P=()=>{if(y.has(F))y.set(F,!0);else return;let D=!0;y.forEach(B=>{B||(D=!1)}),D&&(E?.(),_(p.current),i&&d?.(),n&&n())};return l.jsx(Gee,{isPresent:j,initial:!g.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:j?void 0:P,anchorX:o,children:A},F)})})},g$=S.createContext({strict:!1}),EA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vp={};for(const e in EA)Vp[e]={isEnabled:t=>EA[e].some(r=>!!t[r])};function qee(e){for(const t in e)Vp[t]={...Vp[t],...e[t]}}const Kee=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function m4(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Kee.has(e)}let p$=e=>!m4(e);function Yee(e){typeof e=="function"&&(p$=t=>t.startsWith("on")?!m4(t):e(t))}try{Yee(require("@emotion/is-prop-valid").default)}catch{}function Xee(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(p$(s)||r===!0&&m4(s)||!t&&!m4(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const B_=S.createContext({});function $_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function bv(e){return typeof e=="string"||Array.isArray(e)}const jT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],PT=["initial",...jT];function U_(e){return $_(e.animate)||PT.some(t=>bv(e[t]))}function x$(e){return!!(U_(e)||e.variants)}function Jee(e,t){if(U_(e)){const{initial:r,animate:n}=e;return{initial:r===!1||bv(r)?r:void 0,animate:bv(n)?n:void 0}}return e.inherit!==!1?t:{}}function Qee(e){const{initial:t,animate:r}=Jee(e,S.useContext(B_));return S.useMemo(()=>({initial:t,animate:r}),[AA(t),AA(r)])}function AA(e){return Array.isArray(e)?e.join(" "):e}const wv={};function Zee(e){for(const t in e)wv[t]=e[t],gT(t)&&(wv[t].isCSSVariable=!0)}function y$(e,{layout:t,layoutId:r}){return g1.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!wv[e]||e==="opacity")}const ete={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tte=m1.length;function rte(e,t,r){let n="",s=!0;for(let a=0;a<tte;a++){const i=m1[a],o=e[i];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(i.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||r){const u=l$(o,TT[i]);if(!c){s=!1;const d=ete[i]||i;n+=`${d}(${u}) `}r&&(t[i]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function FT(e,t,r){const{style:n,vars:s,transformOrigin:a}=e;let i=!1,o=!1;for(const c in t){const u=t[c];if(g1.has(c)){i=!0;continue}else if(gT(c)){s[c]=u;continue}else{const d=l$(u,TT[c]);c.startsWith("origin")?(o=!0,a[c]=d):n[c]=d}}if(t.transform||(i||r?n.transform=rte(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${c} ${u} ${d}`}}const MT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function v$(e,t,r){for(const n in t)!bo(t[n])&&!y$(n,r)&&(e[n]=t[n])}function nte({transformTemplate:e},t){return S.useMemo(()=>{const r=MT();return FT(r,t,e),Object.assign({},r.vars,r.style)},[t])}function ste(e,t){const r=e.style||{},n={};return v$(n,r,e),Object.assign(n,nte(e,t)),n}function ate(e,t){const r={},n=ste(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const ite={offset:"stroke-dashoffset",array:"stroke-dasharray"},ote={offset:"strokeDashoffset",array:"strokeDasharray"};function lte(e,t,r=1,n=0,s=!0){e.pathLength=1;const a=s?ite:ote;e[a.offset]=cn.transform(-n);const i=cn.transform(t),o=cn.transform(r);e[a.array]=`${i} ${o}`}function b$(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...o},c,u,d){if(FT(e,o,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=d?.transformBox??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),s!==void 0&&lte(f,s,a,i,!1)}const w$=()=>({...MT(),attrs:{}}),_$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function cte(e,t,r,n){const s=S.useMemo(()=>{const a=w$();return b$(a,t,_$(n),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};v$(a,e.style,e),s.style={...a,...s.style}}return s}const ute=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OT(e){return typeof e!="string"||e.includes("-")?!1:!!(ute.indexOf(e)>-1||/[A-Z]/u.test(e))}function dte(e,t,r,{latestValues:n},s,a=!1){const o=(OT(e)?cte:ate)(t,n,s,e),c=Xee(t,typeof e=="string",a),u=e!==S.Fragment?{...c,...o,ref:r}:{},{children:d}=t,f=S.useMemo(()=>bo(d)?d.get():d,[d]);return S.createElement(e,{...u,children:f})}function jA(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function DT(e,t,r,n){if(typeof t=="function"){const[s,a]=jA(n);t=t(r!==void 0?r:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=jA(n);t=t(r!==void 0?r:e.custom,s,a)}return t}function Yw(e){return bo(e)?e.get():e}function fte({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:hte(r,n,s,e),renderState:t()}}function hte(e,t,r,n){const s={},a=n(e,{});for(const h in a)s[h]=Yw(a[h]);let{initial:i,animate:o}=e;const c=U_(e),u=x$(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),o===void 0&&(o=t.animate));let d=r?r.initial===!1:!1;d=d||i===!1;const f=d?o:i;if(f&&typeof f!="boolean"&&!$_(f)){const h=Array.isArray(f)?f:[f];for(let g=0;g<h.length;g++){const p=DT(e,h[g]);if(p){const{transitionEnd:y,transition:v,...C}=p;for(const w in C){let _=C[w];if(Array.isArray(_)){const T=d?_.length-1:0;_=_[T]}_!==null&&(s[w]=_)}for(const w in y)s[w]=y[w]}}}return s}const S$=e=>(t,r)=>{const n=S.useContext(B_),s=S.useContext(L_),a=()=>fte(e,t,n,s);return r?a():iT(a)};function RT(e,t,r){const{style:n}=e,s={};for(const a in n)(bo(n[a])||t.style&&bo(t.style[a])||y$(a,e)||r?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const mte=S$({scrapeMotionValuesFromProps:RT,createRenderState:MT});function k$(e,t,r){const n=RT(e,t,r);for(const s in e)if(bo(e[s])||bo(t[s])){const a=m1.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=e[s]}return n}const gte=S$({scrapeMotionValuesFromProps:k$,createRenderState:w$}),pte=Symbol.for("motionComponentSymbol");function wp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function xte(e,t,r){return S.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):wp(r)&&(r.current=n))},[t])}const IT=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yte="framerAppearId",C$="data-"+IT(yte),T$=S.createContext({});function vte(e,t,r,n,s){const{visualElement:a}=S.useContext(B_),i=S.useContext(g$),o=S.useContext(L_),c=S.useContext(AT).reducedMotion,u=S.useRef(null);n=n||i.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,f=S.useContext(T$);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&bte(u.current,r,s,f);const h=S.useRef(!1);S.useInsertionEffect(()=>{d&&h.current&&d.update(r,o)});const g=r[C$],p=S.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return SB(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),p.current&&d.animationState&&d.animationState.animateChanges())}),S.useEffect(()=>{d&&(!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),p.current=!1),d.enteringChildren=void 0)}),d}function bte(e,t,r,n){const{layoutId:s,layout:a,drag:i,dragConstraints:o,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:N$(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||o&&wp(o),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function N$(e){if(e)return e.options.allowProjection!==!1?e.projection:N$(e.parent)}function US(e,{forwardMotionProps:t=!1}={},r,n){r&&qee(r);const s=OT(e)?gte:mte;function a(o,c){let u;const d={...S.useContext(AT),...o,layoutId:wte(o)},{isStatic:f}=d,h=Qee(o),g=s(o,f);if(!f&&oT){_te();const p=Ste(d);u=p.MeasureLayout,h.visualElement=vte(e,g,d,n,p.ProjectionNode)}return l.jsxs(B_.Provider,{value:h,children:[u&&h.visualElement?l.jsx(u,{visualElement:h.visualElement,...d}):null,dte(e,o,xte(g,h.visualElement,c),g,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=S.forwardRef(a);return i[pte]=e,i}function wte({layoutId:e}){const t=S.useContext(aT).id;return t&&e!==void 0?t+"-"+e:e}function _te(e,t){S.useContext(g$).strict}function Ste(e){const{drag:t,layout:r}=Vp;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function kte(e,t){if(typeof Proxy>"u")return US;const r=new Map,n=(a,i)=>US(a,i,e,t),s=(a,i)=>n(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?n:(r.has(i)||r.set(i,US(i,void 0,e,t)),r.get(i))})}function E$({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function Cte({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Tte(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function zS(e){return e===void 0||e===1}function Yk({scale:e,scaleX:t,scaleY:r}){return!zS(e)||!zS(t)||!zS(r)}function Zh(e){return Yk(e)||A$(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function A$(e){return PA(e.x)||PA(e.y)}function PA(e){return e&&e!=="0%"}function g4(e,t,r){const n=e-r,s=t*n;return r+s}function FA(e,t,r,n,s){return s!==void 0&&(e=g4(e,s,n)),g4(e,r,n)+t}function Xk(e,t=0,r=1,n,s){e.min=FA(e.min,t,r,n,s),e.max=FA(e.max,t,r,n,s)}function j$(e,{x:t,y:r}){Xk(e.x,t.translate,t.scale,t.originPoint),Xk(e.y,r.translate,r.scale,r.originPoint)}const MA=.999999999999,OA=1.0000000000001;function Nte(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let a,i;for(let o=0;o<s;o++){a=r[o],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Sp(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,j$(e,i)),n&&Zh(a.latestValues)&&Sp(e,a.latestValues))}t.x<OA&&t.x>MA&&(t.x=1),t.y<OA&&t.y>MA&&(t.y=1)}function _p(e,t){e.min=e.min+t,e.max=e.max+t}function DA(e,t,r,n,s=.5){const a=ra(e.min,e.max,s);Xk(e,t,r,a,n)}function Sp(e,t){DA(e.x,t.x,t.scaleX,t.scale,t.originX),DA(e.y,t.y,t.scaleY,t.scale,t.originY)}function P$(e,t){return E$(Tte(e.getBoundingClientRect(),t))}function Ete(e,t,r){const n=P$(e,r),{scroll:s}=t;return s&&(_p(n.x,s.offset.x),_p(n.y,s.offset.y)),n}const RA=()=>({translate:0,scale:1,origin:0,originPoint:0}),kp=()=>({x:RA(),y:RA()}),IA=()=>({min:0,max:0}),ja=()=>({x:IA(),y:IA()}),Jk={current:null},F$={current:!1};function Ate(){if(F$.current=!0,!!oT)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Jk.current=e.matches;e.addEventListener("change",t),t()}else Jk.current=!1}const jte=new WeakMap;function Pte(e,t,r){for(const n in t){const s=t[n],a=r[n];if(bo(s))e.addValue(n,s);else if(bo(a))e.addValue(n,Gp(s,{owner:e}));else if(a!==s)if(e.hasValue(n)){const i=e.getValue(n);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(n);e.addValue(n,Gp(i!==void 0?i:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const LA=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Fte{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=kT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=hl.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Vs.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=U_(r),this.isVariantNode=x$(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const g=f[h];c[h]!==void 0&&bo(g)&&g.set(c[h])}}mount(t){this.current=t,jte.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),F$.current||Ate(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jk.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Hf(this.notifyUpdate),Hf(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=g1.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Vs.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Vp){const r=Vp[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ja()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<LA.length;n++){const s=LA[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=Pte(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Gp(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(kB(n)||TB(n))?n=parseFloat(n):!zee(n)&&Gf.test(r)&&(n=o$(t,r)),this.setBaseTarget(t,bo(n)?n.get():n)),bo(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=DT(this.props,r,this.presenceContext?.custom);a&&(n=a[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!bo(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new fT),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){NT.render(this.render)}}class M$ extends Fte{constructor(){super(...arguments),this.KeyframeResolver=jee}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;bo(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function O$(e,{style:t,vars:r},n,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,n);for(i in r)a.setProperty(i,r[i])}function Mte(e){return window.getComputedStyle(e)}class Ote extends M${constructor(){super(...arguments),this.type="html",this.renderInstance=O$}readValueFromInstance(t,r){if(g1.has(r))return this.projection?.isProjecting?zk(r):YZ(t,r);{const n=Mte(t),s=(gT(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return P$(t,r)}build(t,r,n){FT(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return RT(t,r,n)}}const D$=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Dte(e,t,r,n){O$(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(D$.has(s)?s:IT(s),t.attrs[s])}class Rte extends M${constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ja}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(g1.has(r)){const n=i$(r);return n&&n.default||0}return r=D$.has(r)?r:IT(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return k$(t,r,n)}build(t,r,n){b$(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){Dte(t,r,n,s)}mount(t){this.isSVGTag=_$(t.tagName),super.mount(t)}}const Ite=(e,t)=>OT(e)?new Rte(t):new Ote(t,{allowProjection:e!==S.Fragment});function jp(e,t,r){const n=e.getProps();return DT(n,t,r!==void 0?r:n.custom,e)}const Qk=e=>Array.isArray(e);function Lte(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Gp(r))}function Bte(e){return Qk(e)?e[e.length-1]||0:e}function $te(e,t){const r=jp(e,t);let{transitionEnd:n={},transition:s={},...a}=r||{};a={...a,...n};for(const i in a){const o=Bte(a[i]);Lte(e,i,o)}}function Ute(e){return!!(bo(e)&&e.add)}function Zk(e,t){const r=e.getValue("willChange");if(Ute(r))return r.add(t);if(!r&&f0.WillChange){const n=new f0.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function R$(e){return e.props[C$]}const zte=e=>e!==null;function Wte(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(zte),a=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[a]}const Hte={type:"spring",stiffness:500,damping:25,restSpeed:10},Gte=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Vte={type:"keyframes",duration:.8},qte={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Kte=(e,{keyframes:t})=>t.length>2?Vte:g1.has(e)?e.startsWith("scale")?Gte(t[1]):Hte:qte;function Yte({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:o,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const LT=(e,t,r,n={},s,a)=>i=>{const o=CT(n,e)||{},c=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Qu(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:h=>{t.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:a?void 0:s};Yte(o)||Object.assign(d,Kte(e,d)),d.duration&&(d.duration=Qu(d.duration)),d.repeatDelay&&(d.repeatDelay=Qu(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(qk(d),d.delay===0&&(f=!0)),(f0.instantAnimations||f0.skipAnimations)&&(f=!0,qk(d),d.delay=0),d.allowFlatten=!o.type&&!o.ease,f&&!a&&t.get()!==void 0){const h=Wte(d.keyframes,o);if(h!==void 0){Vs.update(()=>{d.onUpdate(h),d.onComplete()});return}}return o.isSync?new ST(d):new yee(d)};function Xte({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function I$(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...o}=t;n&&(a=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in o){const f=e.getValue(d,e.latestValues[d]??null),h=o[d];if(h===void 0||u&&Xte(u,d))continue;const g={delay:r,...CT(a||{},d)},p=f.get();if(p!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===p&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const C=R$(e);if(C){const w=window.MotionHandoffAnimation(C,d,Vs);w!==null&&(g.startTime=w,y=!0)}}Zk(e,d),f.start(LT(d,f,h,e.shouldReduceMotion&&n$.has(d)?{type:!1}:g,e,y));const v=f.animation;v&&c.push(v)}return i&&Promise.all(c).then(()=>{Vs.update(()=>{i&&$te(e,i)})}),c}function L$(e,t,r,n=0,s=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),i=e.size,o=(i-1)*n;return typeof r=="function"?r(a,i):s===1?a*n:o-a*n}function eC(e,t,r={}){const n=jp(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const a=n?()=>Promise.all(I$(e,n,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return Jte(e,t,c,u,d,f,r)}:()=>Promise.resolve(),{when:o}=s;if(o){const[c,u]=o==="beforeChildren"?[a,i]:[i,a];return c().then(()=>u())}else return Promise.all([a(),i(r.delay)])}function Jte(e,t,r=0,n=0,s=0,a=1,i){const o=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),o.push(eC(c,t,{...i,delay:r+(typeof n=="function"?0:n)+L$(e.variantChildren,c,n,s,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(o)}function Qte(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(a=>eC(e,a,r));n=Promise.all(s)}else if(typeof t=="string")n=eC(e,t,r);else{const s=typeof t=="function"?jp(e,t,r.custom):t;n=Promise.all(I$(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function B$(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const Zte=PT.length;function $$(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?$$(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<Zte;r++){const n=PT[r],s=e.props[n];(bv(s)||s===!1)&&(t[n]=s)}return t}const ere=[...jT].reverse(),tre=jT.length;function rre(e){return t=>Promise.all(t.map(({animation:r,options:n})=>Qte(e,r,n)))}function nre(e){let t=rre(e),r=BA(),n=!0;const s=c=>(u,d)=>{const f=jp(e,d,c==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:g,...p}=f;u={...u,...p,...g}}return u};function a(c){t=c(e)}function i(c){const{props:u}=e,d=$$(e.parent)||{},f=[],h=new Set;let g={},p=1/0;for(let v=0;v<tre;v++){const C=ere[v],w=r[C],_=u[C]!==void 0?u[C]:d[C],T=bv(_),E=C===c?w.isActive:null;E===!1&&(p=v);let A=_===d[C]&&_!==u[C]&&T;if(A&&n&&e.manuallyAnimateOnMount&&(A=!1),w.protectedKeys={...g},!w.isActive&&E===null||!_&&!w.prevProp||$_(_)||typeof _=="boolean")continue;const F=sre(w.prevProp,_);let j=F||C===c&&w.isActive&&!A&&T||v>p&&T,P=!1;const D=Array.isArray(_)?_:[_];let B=D.reduce(s(C),{});E===!1&&(B={});const{prevResolvedValues:V={}}=w,Y={...V,...B},re=L=>{j=!0,h.has(L)&&(P=!0,h.delete(L)),w.needsAnimating[L]=!0;const Q=e.getValue(L);Q&&(Q.liveStyle=!1)};for(const L in Y){const Q=B[L],U=V[L];if(g.hasOwnProperty(L))continue;let G=!1;Qk(Q)&&Qk(U)?G=!B$(Q,U):G=Q!==U,G?Q!=null?re(L):h.add(L):Q!==void 0&&h.has(L)?re(L):w.protectedKeys[L]=!0}w.prevProp=_,w.prevResolvedValues=B,w.isActive&&(g={...g,...B}),n&&e.blockInitialAnimation&&(j=!1);const te=A&&F;j&&(!te||P)&&f.push(...D.map(L=>{const Q={type:C};if(typeof L=="string"&&n&&!te&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,G=jp(U,L);if(U.enteringChildren&&G){const{delayChildren:W}=G.transition||{};Q.delay=L$(U.enteringChildren,e,W)}}return{animation:L,options:Q}}))}if(h.size){const v={};if(typeof u.initial!="boolean"){const C=jp(e,Array.isArray(u.initial)?u.initial[0]:u.initial);C&&C.transition&&(v.transition=C.transition)}h.forEach(C=>{const w=e.getBaseTarget(C),_=e.getValue(C);_&&(_.liveStyle=!0),v[C]=w??null}),f.push({animation:v})}let y=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(f):Promise.resolve()}function o(c,u){if(r[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(c,u)),r[c].isActive=u;const d=i(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:i,setActive:o,setAnimateFunction:a,getState:()=>r,reset:()=>{r=BA(),n=!0}}}function sre(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!B$(t,e):!1}function Vh(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function BA(){return{animate:Vh(!0),whileInView:Vh(),whileHover:Vh(),whileTap:Vh(),whileDrag:Vh(),whileFocus:Vh(),exit:Vh()}}class nh{constructor(t){this.isMounted=!1,this.node=t}update(){}}class are extends nh{constructor(t){super(t),t.animationState||(t.animationState=nre(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();$_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let ire=0;class ore extends nh{constructor(){super(...arguments),this.id=ire++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const lre={animation:{Feature:are},exit:{Feature:ore}};function _v(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function c2(e){return{point:{x:e.pageX,y:e.pageY}}}const cre=e=>t=>ET(t)&&e(t,c2(t));function Yy(e,t,r,n){return _v(e,t,cre(r),n)}const U$=1e-4,ure=1-U$,dre=1+U$,z$=.01,fre=0-z$,hre=0+z$;function Ho(e){return e.max-e.min}function mre(e,t,r){return Math.abs(e-t)<=r}function $A(e,t,r,n=.5){e.origin=n,e.originPoint=ra(t.min,t.max,e.origin),e.scale=Ho(r)/Ho(t),e.translate=ra(r.min,r.max,e.origin)-e.originPoint,(e.scale>=ure&&e.scale<=dre||isNaN(e.scale))&&(e.scale=1),(e.translate>=fre&&e.translate<=hre||isNaN(e.translate))&&(e.translate=0)}function Xy(e,t,r,n){$A(e.x,t.x,r.x,n?n.originX:void 0),$A(e.y,t.y,r.y,n?n.originY:void 0)}function UA(e,t,r){e.min=r.min+t.min,e.max=e.min+Ho(t)}function gre(e,t,r){UA(e.x,t.x,r.x),UA(e.y,t.y,r.y)}function zA(e,t,r){e.min=t.min-r.min,e.max=e.min+Ho(t)}function Jy(e,t,r){zA(e.x,t.x,r.x),zA(e.y,t.y,r.y)}function gc(e){return[e("x"),e("y")]}const W$=({current:e})=>e?e.ownerDocument.defaultView:null,WA=(e,t)=>Math.abs(e-t);function pre(e,t){const r=WA(e.x,t.x),n=WA(e.y,t.y);return Math.sqrt(r**2+n**2)}class H${constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=HS(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,p=pre(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!p)return;const{point:y}=h,{timestamp:v}=qi;this.history.push({...y,timestamp:v});const{onStart:C,onMove:w}=this.handlers;g||(C&&C(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,h)},this.handlePointerMove=(h,g)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=WS(g,this.transformPagePoint),Vs.update(this.updatePoint,!0)},this.handlePointerUp=(h,g)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=HS(h.type==="pointercancel"?this.lastMoveEventInfo:WS(g,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,C),y&&y(h,C)},!ET(t))return;this.dragSnapToOrigin=a,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=i,this.contextWindow=s||window;const o=c2(t),c=WS(o,this.transformPagePoint),{point:u}=c,{timestamp:d}=qi;this.history=[{...u,timestamp:d}];const{onSessionStart:f}=r;f&&f(t,HS(c,this.history)),this.removeListeners=i2(Yy(this.contextWindow,"pointermove",this.handlePointerMove),Yy(this.contextWindow,"pointerup",this.handlePointerUp),Yy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Hf(this.updatePoint)}}function WS(e,t){return t?{point:t(e.point)}:e}function HA(e,t){return{x:e.x-t.x,y:e.y-t.y}}function HS({point:e},t){return{point:e,delta:HA(e,G$(t)),offset:HA(e,xre(t)),velocity:yre(t,.1)}}function xre(e){return e[0]}function G$(e){return e[e.length-1]}function yre(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=G$(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Qu(t)));)r--;if(!n)return{x:0,y:0};const a=Zu(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function vre(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?ra(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?ra(r,e,n.max):Math.min(e,r)),e}function GA(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function bre(e,{top:t,left:r,bottom:n,right:s}){return{x:GA(e.x,r,s),y:GA(e.y,t,n)}}function VA(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function wre(e,t){return{x:VA(e.x,t.x),y:VA(e.y,t.y)}}function _re(e,t){let r=.5;const n=Ho(e),s=Ho(t);return s>n?r=xv(t.min,t.max-n,e.min):n>s&&(r=xv(e.min,e.max-s,t.min)),d0(0,1,r)}function Sre(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const tC=.35;function kre(e=tC){return e===!1?e=0:e===!0&&(e=tC),{x:qA(e,"left","right"),y:qA(e,"top","bottom")}}function qA(e,t,r){return{min:KA(e,t),max:KA(e,r)}}function KA(e,t){return typeof e=="number"?e:e[t]||0}const Cre=new WeakMap;class Tre{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ja(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(c2(f).point)},i=(f,h)=>{const{drag:g,dragPropagation:p,onDragStart:y}=this.getProps();if(g&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Oee(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gc(C=>{let w=this.getAxisMotionValue(C).get()||0;if(ed.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const T=_.layout.layoutBox[C];T&&(w=Ho(T)*(parseFloat(w)/100))}}this.originPoint[C]=w}),y&&Vs.postRender(()=>y(f,h)),Zk(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:g,dragDirectionLock:p,onDirectionLock:y,onDrag:v}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:C}=h;if(p&&this.currentDirection===null){this.currentDirection=Nre(C),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,C),this.updateAxis("y",h.point,C),this.visualElement.render(),v&&v(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>gc(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new H$(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:W$(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Vs.postRender(()=>o(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Xb(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(i=vre(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&wp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=bre(n.layoutBox,t):this.constraints=!1,this.elastic=kre(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&gc(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Sre(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!wp(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=Ete(n,s.root,this.visualElement.getTransformPagePoint());let i=wre(s.layout.layoutBox,a);if(r){const o=r(Cte(i));this.hasMutatedConstraints=!!o,o&&(i=E$(o))}return i}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},u=gc(d=>{if(!Xb(d,r,this.currentDirection))return;let f=c&&c[d]||{};i&&(f={min:0,max:0});const h=s?200:1e6,g=s?40:1e7,p={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Zk(this.visualElement,t),n.start(LT(t,n,0,r,this.visualElement,!1))}stopAnimation(){gc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gc(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){gc(r=>{const{drag:n}=this.getProps();if(!Xb(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(r);if(s&&s.layout){const{min:i,max:o}=s.layout.layoutBox[r];a.set(t[r]-ra(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!wp(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};gc(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const c=o.get();s[i]=_re({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),gc(i=>{if(!Xb(i,t,null))return;const o=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];o.set(ra(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;Cre.set(this.visualElement,this);const t=this.visualElement.current,r=Yy(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();wp(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Vs.read(n);const i=_v(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(gc(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())}));return()=>{i(),r(),a(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=tC,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:o}}}function Xb(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Nre(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Ere extends nh{constructor(t){super(t),this.removeGroupControls=kc,this.removeListeners=kc,this.controls=new Tre(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||kc}unmount(){this.removeGroupControls(),this.removeListeners()}}const YA=e=>(t,r)=>{e&&Vs.postRender(()=>e(t,r))};class Are extends nh{constructor(){super(...arguments),this.removePointerDownListener=kc}onPointerDown(t){this.session=new H$(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:W$(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:YA(t),onStart:YA(r),onMove:n,onEnd:(a,i)=>{delete this.session,s&&Vs.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=Yy(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function XA(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Dx={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(cn.test(e))e=parseFloat(e);else return e;const r=XA(e,t.target.x),n=XA(e,t.target.y);return`${r}% ${n}%`}},jre={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Gf.parse(e);if(s.length>5)return n;const a=Gf.createTransformer(e),i=typeof s[0]!="number"?1:0,o=r.x.scale*t.x,c=r.y.scale*t.y;s[0+i]/=o,s[1+i]/=c;const u=ra(o,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let GS=!1;class Pre extends S.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=t;Zee(Fre),a&&(r.group&&r.group.add(a),n&&n.register&&s&&n.register(a),GS&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Xw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:a}=this.props,{projection:i}=n;return i&&(i.isPresent=a,GS=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||Vs.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),NT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;GS=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function V$(e){const[t,r]=m$(),n=S.useContext(aT);return l.jsx(Pre,{...e,layoutGroup:n,switchLayoutGroup:S.useContext(T$),isPresent:t,safeToRemove:r})}const Fre={borderRadius:{...Dx,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dx,borderTopRightRadius:Dx,borderBottomLeftRadius:Dx,borderBottomRightRadius:Dx,boxShadow:jre};function Mre(e,t,r){const n=bo(e)?e:Gp(e);return n.start(LT("",n,t,r)),n.animation}const Ore=(e,t)=>e.depth-t.depth;class Dre{constructor(){this.children=[],this.isDirty=!1}add(t){lT(this.children,t),this.isDirty=!0}remove(t){cT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ore),this.isDirty=!1,this.children.forEach(t)}}function Rre(e,t){const r=hl.now(),n=({timestamp:s})=>{const a=s-r;a>=t&&(Hf(n),e(a-t))};return Vs.setup(n,!0),()=>Hf(n)}const q$=["TopLeft","TopRight","BottomLeft","BottomRight"],Ire=q$.length,JA=e=>typeof e=="string"?parseFloat(e):e,QA=e=>typeof e=="number"||cn.test(e);function Lre(e,t,r,n,s,a){s?(e.opacity=ra(0,r.opacity??1,Bre(n)),e.opacityExit=ra(t.opacity??1,0,$re(n))):a&&(e.opacity=ra(t.opacity??1,r.opacity??1,n));for(let i=0;i<Ire;i++){const o=`border${q$[i]}Radius`;let c=ZA(t,o),u=ZA(r,o);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||QA(c)===QA(u)?(e[o]=Math.max(ra(JA(c),JA(u),n),0),(ed.test(u)||ed.test(c))&&(e[o]+="%")):e[o]=u}(t.rotate||r.rotate)&&(e.rotate=ra(t.rotate||0,r.rotate||0,n))}function ZA(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Bre=K$(0,.5,OB),$re=K$(.5,.95,kc);function K$(e,t,r){return n=>n<e?0:n>t?1:r(xv(e,t,n))}function ej(e,t){e.min=t.min,e.max=t.max}function lc(e,t){ej(e.x,t.x),ej(e.y,t.y)}function tj(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function rj(e,t,r,n,s){return e-=t,e=g4(e,1/r,n),s!==void 0&&(e=g4(e,1/s,n)),e}function Ure(e,t=0,r=1,n=.5,s,a=e,i=e){if(ed.test(t)&&(t=parseFloat(t),t=ra(i.min,i.max,t/100)-i.min),typeof t!="number")return;let o=ra(a.min,a.max,n);e===a&&(o-=t),e.min=rj(e.min,t,r,o,s),e.max=rj(e.max,t,r,o,s)}function nj(e,t,[r,n,s],a,i){Ure(e,t[r],t[n],t[s],t.scale,a,i)}const zre=["x","scaleX","originX"],Wre=["y","scaleY","originY"];function sj(e,t,r,n){nj(e.x,t,zre,r?r.x:void 0,n?n.x:void 0),nj(e.y,t,Wre,r?r.y:void 0,n?n.y:void 0)}function aj(e){return e.translate===0&&e.scale===1}function Y$(e){return aj(e.x)&&aj(e.y)}function ij(e,t){return e.min===t.min&&e.max===t.max}function Hre(e,t){return ij(e.x,t.x)&&ij(e.y,t.y)}function oj(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function X$(e,t){return oj(e.x,t.x)&&oj(e.y,t.y)}function lj(e){return Ho(e.x)/Ho(e.y)}function cj(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Gre{constructor(){this.members=[]}add(t){lT(this.members,t),t.scheduleRender()}remove(t){if(cT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Vre(e,t,r){let n="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=r?.z||0;if((s||a||i)&&(n=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:g,skewY:p}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),g&&(n+=`skewX(${g}deg) `),p&&(n+=`skewY(${p}deg) `)}const o=e.x.scale*t.x,c=e.y.scale*t.y;return(o!==1||c!==1)&&(n+=`scale(${o}, ${c})`),n||"none"}const VS=["","X","Y","Z"],qre=1e3;let Kre=0;function qS(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function J$(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=R$(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Vs,!(s||a))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&J$(n)}function Q$({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(i={},o=t?.()){this.id=Kre++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Jre),this.nodes.forEach(tne),this.nodes.forEach(rne),this.nodes.forEach(Qre)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Dre)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new fT),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const c=this.eventHandlers.get(i);c&&c.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=h$(i)&&!$ee(i),this.instance=i;const{layoutId:o,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||o)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;Vs.read(()=>{f=window.innerWidth}),e(i,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,d&&d(),d=Rre(h,250),Xw.hasAnimatedSinceResize&&(Xw.hasAnimatedSinceResize=!1,this.nodes.forEach(fj)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||one,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),C=!this.targetLayout||!X$(this.targetLayout,g),w=!f&&h;if(this.options.layoutRoot||this.resumeFrom||w||f&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...CT(p,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(d,w)}else f||fj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nne),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&J$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(uj);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(dj);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ene),this.nodes.forEach(Yre),this.nodes.forEach(Xre)):this.nodes.forEach(dj),this.clearAllSnapshots();const o=hl.now();qi.delta=d0(0,1e3/60,o-qi.timestamp),qi.timestamp=o,qi.isProcessing=!0,DS.update.process(qi),DS.preRender.process(qi),DS.render.process(qi),qi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,NT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Zre),this.sharedNodes.forEach(sne)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Vs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Vs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ho(this.snapshot.measuredBox.x)&&!Ho(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ja(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!Y$(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&this.instance&&(o||Zh(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return i&&(c=this.removeTransform(c)),lne(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return ja();const o=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(cne))){const{scroll:u}=this.root;u&&(_p(o.x,u.offset.x),_p(o.y,u.offset.y))}return o}removeElementScroll(i){const o=ja();if(lc(o,i),this.scroll?.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&lc(o,i),_p(o.x,d.offset.x),_p(o.y,d.offset.y))}return o}applyTransform(i,o=!1){const c=ja();lc(c,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Sp(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Zh(d.latestValues)&&Sp(c,d.latestValues)}return Zh(this.latestValues)&&Sp(c,this.latestValues),c}removeTransform(i){const o=ja();lc(o,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Zh(u.latestValues))continue;Yk(u.latestValues)&&u.updateSnapshot();const d=ja(),f=u.measurePageBox();lc(d,f),sj(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Zh(this.latestValues)&&sj(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==o;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=qi.timestamp,!this.targetDelta&&!this.relativeTarget){const h=this.getClosestProjectingParent();h&&h.layout&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ja(),this.relativeTargetOrigin=ja(),Jy(this.relativeTargetOrigin,this.layout.layoutBox,h.layout.layoutBox),lc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ja(),this.targetWithTransforms=ja()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),gre(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lc(this.target,this.layout.layoutBox),j$(this.target,this.targetDelta)):lc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const h=this.getClosestProjectingParent();h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?(this.relativeParent=h,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ja(),this.relativeTargetOrigin=ja(),Jy(this.relativeTargetOrigin,this.target,h.target),lc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Yk(this.parent.latestValues)||A$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),o=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===qi.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;lc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;Nte(this.layoutCorrected,this.treeScale,this.path,o),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=ja());const{target:g}=i;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(tj(this.prevProjectionDelta.x,this.projectionDelta.x),tj(this.prevProjectionDelta.y,this.projectionDelta.y)),Xy(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!cj(this.projectionDelta.x,this.prevProjectionDelta.x)||!cj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=kp(),this.projectionDelta=kp(),this.projectionDeltaWithTransform=kp()}setAnimationOrigin(i,o=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=kp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=ja(),g=c?c.source:void 0,p=this.layout?this.layout.source:void 0,y=g!==p,v=this.getStack(),C=!v||v.members.length<=1,w=!!(y&&!C&&this.options.crossfade===!0&&!this.path.some(ine));this.animationProgress=0;let _;this.mixTargetDelta=T=>{const E=T/1e3;hj(f.x,i.x,E),hj(f.y,i.y,E),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jy(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ane(this.relativeTarget,this.relativeTargetOrigin,h,E),_&&Hre(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=ja()),lc(_,this.relativeTarget)),y&&(this.animationValues=d,Lre(d,u,this.latestValues,E,w,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Hf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Vs.update(()=>{Xw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Gp(0)),this.currentAnimation=Mre(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qre),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:c,layout:u,latestValues:d}=i;if(!(!o||!c||!u)){if(this!==i&&this.layout&&u&&Z$(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ja();const f=Ho(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+f;const h=Ho(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+h}lc(o,c),Sp(o,d),Xy(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new Gre),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const u={};c.z&&qS("z",i,u,this.animationValues);for(let d=0;d<VS.length;d++)qS(`rotate${VS[d]}`,i,u,this.animationValues),qS(`skew${VS[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}applyProjectionStyles(i,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Yw(o?.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Yw(o?.pointerEvents)||""),this.hasProjected&&!Zh(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=Vre(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),i.transform=f;const{x:h,y:g}=this.projectionDelta;i.transformOrigin=`${h.origin*100}% ${g.origin*100}% 0`,u.animationValues?i.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const p in wv){if(d[p]===void 0)continue;const{correct:y,applyTo:v,isCSSVariable:C}=wv[p],w=f==="none"?d[p]:y(d[p],u);if(v){const _=v.length;for(let T=0;T<_;T++)i[v[T]]=w}else C?this.options.visualElement.renderState.vars[p]=w:i[p]=w}this.options.layoutId&&(i.pointerEvents=u===this?Yw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(uj),this.root.sharedNodes.clear()}}}function Yre(e){e.updateLayout()}function Xre(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?gc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Ho(f);f.min=r[d].min,f.max=f.min+h}):Z$(s,t.layoutBox,r)&&gc(d=>{const f=a?t.measuredBox[d]:t.layoutBox[d],h=Ho(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const i=kp();Xy(i,r,t.layoutBox);const o=kp();a?Xy(o,e.applyTransform(n,!0),t.measuredBox):Xy(o,r,t.layoutBox);const c=!Y$(i);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const g=ja();Jy(g,t.layoutBox,f.layoutBox);const p=ja();Jy(p,r,h.layoutBox),X$(g,p)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=g,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:i,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Jre(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Qre(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Zre(e){e.clearSnapshot()}function uj(e){e.clearMeasurements()}function dj(e){e.isLayoutDirty=!1}function ene(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function fj(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function tne(e){e.resolveTargetDelta()}function rne(e){e.calcProjection()}function nne(e){e.resetSkewAndRotation()}function sne(e){e.removeLeadSnapshot()}function hj(e,t,r){e.translate=ra(t.translate,0,r),e.scale=ra(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function mj(e,t,r,n){e.min=ra(t.min,r.min,n),e.max=ra(t.max,r.max,n)}function ane(e,t,r,n){mj(e.x,t.x,r.x,n),mj(e.y,t.y,r.y,n)}function ine(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const one={duration:.45,ease:[.4,0,.1,1]},gj=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),pj=gj("applewebkit/")&&!gj("chrome/")?Math.round:kc;function xj(e){e.min=pj(e.min),e.max=pj(e.max)}function lne(e){xj(e.x),xj(e.y)}function Z$(e,t,r){return e==="position"||e==="preserve-aspect"&&!mre(lj(t),lj(r),.2)}function cne(e){return e!==e.root&&e.scroll?.wasRoot}const une=Q$({attachResizeListener:(e,t)=>_v(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),KS={current:void 0},eU=Q$({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!KS.current){const e=new une({});e.mount(window),e.setOptions({layoutScroll:!0}),KS.current=e}return KS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),dne={pan:{Feature:Are},drag:{Feature:Ere,ProjectionNode:eU,MeasureLayout:V$}};function yj(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,a=n[s];a&&Vs.postRender(()=>a(t,c2(t)))}class fne extends nh{mount(){const{current:t}=this.node;t&&(this.unmount=Dee(t,(r,n)=>(yj(this.node,n,"Start"),s=>yj(this.node,s,"End"))))}unmount(){}}class hne extends nh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=i2(_v(this.node.current,"focus",()=>this.onFocus()),_v(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vj(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),a=n[s];a&&Vs.postRender(()=>a(t,c2(t)))}class mne extends nh{mount(){const{current:t}=this.node;t&&(this.unmount=Bee(t,(r,n)=>(vj(this.node,n,"Start"),(s,{success:a})=>vj(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const rC=new WeakMap,YS=new WeakMap,gne=e=>{const t=rC.get(e.target);t&&t(e)},pne=e=>{e.forEach(gne)};function xne({root:e,...t}){const r=e||document;YS.has(r)||YS.set(r,{});const n=YS.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(pne,{root:e,...t})),n[s]}function yne(e,t,r){const n=xne(t);return rC.set(e,r),n.observe(e),()=>{rC.delete(e),n.unobserve(e)}}const vne={some:0,all:1};class bne extends nh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:a}=t,i={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:vne[s]},o=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return yne(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(wne(t,r))&&this.startObserver()}unmount(){}}function wne({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const _ne={inView:{Feature:bne},tap:{Feature:mne},focus:{Feature:hne},hover:{Feature:fne}},Sne={layout:{ProjectionNode:eU,MeasureLayout:V$}},kne={...lre,..._ne,...dne,...Sne},vt=kte(kne,Ite),ht=({children:e,variant:t="primary",size:r="md",onClick:n,disabled:s=!1,className:a="",...i})=>{const o="font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer",c={primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",warning:"bg-yellow-600 hover:bg-yellow-700 text-white focus:ring-yellow-500",outline:"bg-transparent text-blue-600 border-2 border-blue-600 hover:bg-blue-600 hover:text-white focus:ring-blue-500",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-700 focus:ring-gray-500"},u={xs:"px-2 py-1 text-xs",sm:"px-2 py-1 text-xs sm:px-3 sm:py-1.5 sm:text-sm",md:"px-3 py-1.5 text-sm sm:px-4 sm:py-2 sm:text-base",lg:"px-4 py-2 text-base sm:px-6 sm:py-3 sm:text-lg",icon:"p-0 flex items-center justify-center"},d=s?"opacity-50 cursor-not-allowed":"";return l.jsx(vt.button,{className:`${o} ${c[t]} ${u[r]} ${d} ${a}`,onClick:n,disabled:s,whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},...i,children:e})},pn=({size:e="md",color:t="blue",className:r=""})=>{const n={sm:"w-4 h-4",small:"w-4 h-4",md:"w-6 h-6",medium:"w-6 h-6",lg:"w-8 h-8",large:"w-8 h-8",xl:"w-12 h-12"},s={blue:"border-blue-600",green:"border-green-600",red:"border-red-600",yellow:"border-yellow-600",gray:"border-gray-600"};return l.jsx(vt.div,{className:`
        inline-block border-2 border-gray-300 border-t-current rounded-full animate-spin
        ${n[e]} ${s[t]} ${r}
      `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})},hu=({type:e="info",message:t="",duration:r=3e3,closable:n=!0,onClose:s,className:a="",...i})=>{const[o,c]=S.useState(!0),[u,d]=S.useState(!1),f=S.useRef(null),h=S.useRef(null);S.useEffect(()=>{if(r>0)return h.current=setTimeout(()=>{g()},r),()=>{h.current&&clearTimeout(h.current)}},[r]);const g=S.useCallback(()=>{u||(d(!0),h.current&&clearTimeout(h.current),setTimeout(()=>{c(!1),s&&s()},300))},[u,s]),p=S.useCallback(C=>{C.key==="Escape"&&g()},[g]);if(!o)return null;const y=["notification",`notification-${e}`,o?"notification-visible":"",u?"notification-exiting":"",a].filter(Boolean).join(" "),v=()=>{switch(e){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{ref:f,className:y,role:"alert","aria-live":"polite",onKeyDown:p,tabIndex:-1,...i,children:l.jsxs("div",{className:"notification-content",children:[l.jsx("div",{className:"notification-icon","aria-hidden":"true",children:v()}),l.jsx("div",{className:"notification-body",children:l.jsx("div",{className:"notification-message",children:t})}),n&&l.jsx("button",{className:"notification-close",onClick:g,type:"button","aria-label":"Close notification",children:""})]})})},di=()=>{const[e,t]=S.useState([]),r=S.useCallback((a,i="info",o={})=>{const c=Date.now()+Math.random(),u={id:c,message:a,type:i,...o};return t(d=>[...d,u]),o.duration!==0&&setTimeout(()=>{n(c)},o.duration||3e3),c},[]),n=S.useCallback(a=>{t(i=>i.filter(o=>o.id!==a))},[]),s=S.useCallback(()=>{t([])},[]);return{notifications:e,showNotification:r,removeNotification:n,clearAllNotifications:s}},ql=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState(null),[s,a]=S.useState(null),i=S.useRef(null);S.useRef(new Map);const o=S.useRef(0),c=3,u=1e3,d=S.useCallback(()=>{i.current&&(i.current.abort(),i.current=null)},[]);S.useEffect(()=>d,[d]);const f=S.useCallback(async(M,I={})=>{try{t(!0),n(null),i.current=new AbortController;const z=I.method||"POST",q={method:z,headers:{"Content-Type":"application/json",...I.headers},signal:i.current.signal,...I};z!=="GET"&&z!=="HEAD"&&(q.body=JSON.stringify(I.data||{})),console.log(`[API] Making request to: ${M}`,q);const ne=await fetch(M,q);if(!ne.ok)throw new Error(`HTTP error! status: ${ne.status}`);const X=await ne.json();if(console.log("[API] Response received:",X),X.success)return a(X),o.current=0,X;throw new Error(X.error||X.message||"Request failed")}catch(z){if(z.name==="AbortError")return console.log("[API] Request was aborted"),null;if(console.error("[API] Request failed:",z),n(z.message||"Request failed"),o.current<c){o.current++;const q=u*Math.pow(2,o.current-1);return console.log(`[API] Retrying in ${q}ms (attempt ${o.current}/${c})`),await new Promise(ne=>setTimeout(ne,q)),f(M,I)}throw z}finally{t(!1),i.current=null}},[]),h=S.useCallback(async(M,I={})=>{try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())throw new Error("No valid authentication token found");return await window.tokenManager.makeAuthenticatedRequest(M,I)}catch(z){throw console.error("[API] Authenticated request failed:",z),z}},[]),g=S.useCallback(async(M,I)=>{try{const z=`/.netlify/functions/get-test-questions?test_type=${M}&test_id=${I}`;console.log(`[API] Getting test info for ${M}_${I}`);const ne=await(await h(z)).json();if(ne.success)return console.log("[API] Test info retrieved successfully:",ne.test_info),ne.test_info;throw new Error(ne.error||"Failed to get test info")}catch(z){throw console.error("[API] Failed to get test info:",z),z}},[h]),p=S.useCallback(async(M,I)=>{try{const z=`/.netlify/functions/get-test-questions?test_type=${M}&test_id=${I}`;console.log(`[API] Getting test questions for ${M}_${I}`);const ne=await(await h(z)).json();if(ne.success)return console.log("[API] Test questions retrieved successfully:",ne.questions),ne.questions;throw new Error(ne.error||"Failed to get test questions")}catch(z){throw console.error("[API] Failed to get test questions:",z),z}},[h]),y=S.useCallback(async()=>{try{const M="/.netlify/functions/get-student-active-tests";console.log("[API] Loading student active tests");const z=await(await h(M)).json();if(z.success)return console.log("[API] Student active tests loaded successfully:",z.tests),z.tests;throw new Error(z.error||"Failed to load student active tests")}catch(M){throw console.error("[API] Failed to load student active tests:",M),M}},[h]),v=S.useCallback(async(M,I,z)=>{try{let q;switch(M){case"true_false":q="/.netlify/functions/submit-true-false-test";break;case"multiple_choice":q="/.netlify/functions/submit-multiple-choice-test";break;case"input":q="/.netlify/functions/submit-input-test";break;case"matching_type":q="/.netlify/functions/submit-matching-type-test";break;case"speaking":q="/.netlify/functions/submit-speaking-test";break;default:throw new Error(`Unknown test type: ${M}`)}console.log(`[API] Submitting ${M} test:`,z);const X=await(await h(q,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).json();if(X.success)return console.log("[API] Test submitted successfully:",X),X;throw new Error(X.error||"Failed to submit test")}catch(q){throw console.error("[API] Failed to submit test:",q),q}},[h]),C=S.useCallback(async M=>{try{const I="/.netlify/functions/save-multiple-choice-test";console.log("[API] Saving multiple choice test:",M);const q=await(await h(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).json();if(q.success)return console.log("[API] Multiple choice test saved successfully:",q),q;throw new Error(q.error||"Failed to save multiple choice test")}catch(I){throw console.error("[API] Failed to save multiple choice test:",I),I}},[h]),w=S.useCallback(async M=>{try{const I="/.netlify/functions/save-true-false-test";console.log("[API] Saving true/false test:",M);const q=await(await h(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).json();if(q.success)return console.log("[API] True/false test saved successfully:",q),q;throw new Error(q.error||"Failed to save true/false test")}catch(I){throw console.error("[API] Failed to save true/false test:",I),I}},[h]),_=S.useCallback(async M=>{try{const I="/.netlify/functions/save-input-test";console.log("[API] Saving input test:",M);const q=await(await h(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).json();if(q.success)return console.log("[API] Input test saved successfully:",q),q;throw new Error(q.error||"Failed to save input test")}catch(I){throw console.error("[API] Failed to save input test:",I),I}},[h]),T=S.useCallback(async M=>{try{const I="/.netlify/functions/assign-test";console.log("[API] Assigning test to classes:",M);const q=await(await h(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).json();if(q.success)return console.log("[API] Test assigned successfully:",q),q;throw new Error(q.error||"Failed to assign test")}catch(I){throw console.error("[API] Failed to assign test:",I),I}},[h]),E=S.useCallback(async()=>{try{const M="/.netlify/functions/get-teacher-active-tests";console.log("[API] Loading teacher active tests");const z=await(await h(M)).json();if(z.success)return console.log("[API] Teacher active tests loaded successfully:",z.tests),z.tests;throw new Error(z.error||"Failed to load teacher active tests")}catch(M){throw console.error("[API] Failed to load teacher active tests:",M),M}},[h]),A=S.useCallback(async()=>{try{const M="/.netlify/functions/get-all-users";console.log("[API] Getting all users");const z=await(await h(M)).json();if(z.success)return console.log("[API] All users loaded successfully:",z.users),z.users;throw new Error(z.error||"Failed to get all users")}catch(M){throw console.error("[API] Failed to get all users:",M),M}},[h]),F=S.useCallback(async()=>{try{const M="/.netlify/functions/get-all-teachers";console.log("[API] Getting all teachers");const z=await(await h(M)).json();if(z.success)return console.log("[API] All teachers loaded successfully:",z.teachers),z.teachers;throw new Error(z.error||"Failed to get all teachers")}catch(M){throw console.error("[API] Failed to get all teachers:",M),M}},[h]),j=S.useCallback(async()=>{try{const M="/.netlify/functions/get-all-subjects";console.log("[API] Getting all subjects");const z=await(await h(M)).json();if(z.success)return console.log("[API] All subjects loaded successfully:",z.subjects),z.subjects;throw new Error(z.error||"Failed to get all subjects")}catch(M){throw console.error("[API] Failed to get all subjects:",M),M}},[h]),P=S.useCallback(()=>{n(null)},[]),D=S.useCallback(()=>{a(null)},[]),B=S.useCallback(()=>{t(!1),n(null),a(null),o.current=0,d()},[d]),V=S.useCallback(async(M,I={})=>{const q=await(await h(M,{...I,method:"GET"})).json();if(q.success)return q;throw new Error(q.error||"Request failed")},[h]),Y=S.useCallback(async(M,I,z={})=>{const ne=await(await h(M,{...z,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(ne.success)return ne;throw new Error(ne.error||"Request failed")},[h]),re=S.useCallback(async(M,I,z={})=>{const ne=await(await h(M,{...z,method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(I)})).json();if(ne.success)return ne;throw new Error(ne.error||"Request failed")},[h]),te=S.useCallback(async(M,I={})=>{const q=await(await h(M,{...I,method:"DELETE"})).json();if(q.success)return q;throw new Error(q.error||"Request failed")},[h]),ee=S.useCallback(async M=>{try{const I="/.netlify/functions/submit-speaking-test";console.log("[API] Submitting speaking test:",M);const q=await(await h(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).json();if(q.success)return console.log("[API] Speaking test submitted successfully:",q),q;throw new Error(q.error||"Failed to submit speaking test")}catch(I){throw console.error("[API] Failed to submit speaking test:",I),I}},[h]),L=S.useCallback(async M=>{try{const I=`/.netlify/functions/get-speaking-test-new?action=test&test_id=${M}`;console.log("[API] Getting speaking test:",M);const q=await(await h(I,{method:"GET"})).json();if(q.success)return console.log("[API] Speaking test loaded successfully:",q),q;throw new Error(q.error||"Failed to load speaking test")}catch(I){throw console.error("[API] Failed to load speaking test:",I),I}},[h]),Q=S.useCallback(async M=>{try{const I=`/.netlify/functions/get-speaking-test-new?action=questions&test_id=${M}`;console.log("[API] Getting speaking test questions:",M);const q=await(await h(I,{method:"GET"})).json();if(q.success)return console.log("[API] Speaking test questions loaded successfully:",q),q;throw new Error(q.error||"Failed to load speaking test questions")}catch(I){throw console.error("[API] Failed to load speaking test questions:",I),I}},[h]),U=S.useCallback(async M=>{try{const I="/.netlify/functions/upload-speaking-audio";console.log("[API] Uploading speaking audio");const q=await(await h(I,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)})).json();if(q.success)return console.log("[API] Audio uploaded successfully:",q),q;throw new Error(q.error||"Failed to upload audio")}catch(I){throw console.error("[API] Failed to upload audio:",I),I}},[h]),G=S.useCallback(async M=>{try{const I=`/.netlify/functions/get-speaking-test-new?action=audio&file_path=${encodeURIComponent(M)}`;console.log("[API] Getting speaking audio:",M);const q=await(await h(I,{method:"GET"})).json();if(q.success)return console.log("[API] Audio URL retrieved successfully:",q),q;throw new Error(q.error||"Failed to get audio")}catch(I){throw console.error("[API] Failed to get audio:",I),I}},[h]),W=S.useCallback(async(M,I)=>{try{const z=`/.netlify/functions/check-test-completion?test_id=${M}&test_type=${I}`;console.log("[API] Checking test completion:",M,I);const ne=await(await h(z,{method:"GET"})).json();if(ne.success)return console.log("[API] Test completion status:",ne),ne;throw new Error(ne.error||"Failed to check test completion")}catch(z){throw console.error("[API] Failed to check test completion:",z),z}},[h]);return{loading:e,error:r,data:s,sendRequest:f,makeAuthenticatedRequest:h,get:V,post:Y,put:re,delete:te,getTestInfo:g,getTestQuestions:p,loadStudentActiveTests:y,submitTest:v,submitSpeakingTest:ee,getSpeakingTest:L,getSpeakingTestQuestions:Q,uploadSpeakingAudio:U,getSpeakingAudio:G,checkTestCompletion:W,saveMultipleChoiceTest:C,saveTrueFalseTest:w,saveInputTest:_,assignTestToClasses:T,loadTeacherActiveTests:E,getAllUsers:A,getAllTeachers:F,getAllSubjects:j,clearError:P,clearData:D,reset:B,cleanup:d}},tU=(e,t)=>{const[r,n]=S.useState(()=>{try{const i=window.localStorage.getItem(e);return i?JSON.parse(i):t}catch(i){return console.error(`Error reading localStorage key "${e}":`,i),t}}),s=S.useCallback(i=>{try{const o=i instanceof Function?i(r):i;n(o),window.localStorage.setItem(e,JSON.stringify(o))}catch(o){console.error(`Error setting localStorage key "${e}":`,o)}},[e,r]),a=S.useCallback(()=>{try{window.localStorage.removeItem(e),n(t)}catch(i){console.error(`Error removing localStorage key "${e}":`,i)}},[e,t]);return[r,s,a]},z_=()=>{const e=S.useCallback((c,u=null)=>{try{const d=window.localStorage.getItem(c);return d?JSON.parse(d):u}catch(d){return console.error(`Error reading localStorage key "${c}":`,d),u}},[]),t=S.useCallback((c,u)=>{try{window.localStorage.setItem(c,JSON.stringify(u))}catch(d){console.error(`Error setting localStorage key "${c}":`,d)}},[]),r=S.useCallback(c=>{try{window.localStorage.removeItem(c)}catch(u){console.error(`Error removing localStorage key "${c}":`,u)}},[]),n=S.useCallback(()=>{if(confirm("Are you sure you want to clear all local storage? This cannot be undone."))try{window.localStorage.clear(),window.showNotification?window.showNotification("All local storage cleared!","success"):console.log("All local storage cleared!")}catch(c){console.error("Error clearing localStorage:",c)}},[]),s=S.useCallback(()=>{try{const c={};for(let h=0;h<window.localStorage.length;h++){const g=window.localStorage.key(h);g&&(c[g]=window.localStorage.getItem(g))}const u=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),d=URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download="localStorage_backup.json",f.click(),URL.revokeObjectURL(d),window.showNotification?window.showNotification("Local storage exported!","success"):console.log("Local storage exported!")}catch(c){console.error("Error exporting localStorage data:",c)}},[]),a=S.useCallback(()=>{try{window.localStorage.clear()}catch(c){console.error("Error clearing localStorage:",c)}},[]),i=S.useCallback(()=>{try{const c={};for(let u=0;u<window.localStorage.length;u++){const d=window.localStorage.key(u);d&&(c[d]=window.localStorage.getItem(d))}return c}catch(c){return console.error("Error exporting localStorage data:",c),{}}},[]),o=S.useCallback(c=>{try{Object.entries(c).forEach(([u,d])=>{window.localStorage.setItem(u,d)})}catch(u){console.error("Error importing localStorage data:",u)}},[]);return{getItem:e,setItem:t,removeItem:r,clearAll:a,clearAllLocalStorage:n,exportLocalStorage:s,exportData:i,importData:o}},fe={yellow:"#f8ef02",cyan:"#00ffd2",red:"#ff003c",blue:"#136377",green:"#446d44",purple:"purple",black:"#000",white:"#fff",dark:"#333"},ze={primary:"#ec4899",primaryDark:"#db2777",primaryLight:"#f472b6",secondary:"#a855f7",background:"#000000",backgroundSecondary:"#1a0014",backgroundTertiary:"#2d1b3d",text:"#ffffff",textSecondary:"#fce7f3",textAccent:"#ec4899",border:"#ec4899",borderSecondary:"#a855f7",accent:"#f472b6",glow:"#ec4899",glowPurple:"#a855f7",success:"#10b981",error:"#ef4444",white:"#ffffff",black:"#000000"},Cne=(e,t=1)=>{if(e.startsWith("#")){const r=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return`rgba(${r}, ${n}, ${s}, ${t})`}return e},rU=(e,t=1)=>e==="purple"?`rgba(128, 0, 128, ${t})`:Cne(e,t),Gt=(e=null)=>{const t=[{bg:fe.red,border:fe.red},{bg:fe.yellow,border:fe.yellow},{bg:fe.purple,border:fe.purple},{bg:fe.cyan,border:fe.cyan},{bg:fe.red,border:fe.red},{bg:fe.yellow,border:fe.yellow},{bg:fe.purple,border:fe.purple}],r=e!==null?t[e%t.length]:t[Math.floor(Math.random()*t.length)];return{className:"border-2",style:{backgroundColor:fe.black,borderColor:r.border,borderWidth:"2px"}}},dr=(e=null)=>{const t=[{background:"#1a0014",border:ze.primary,shadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 30px rgba(236, 72, 153, 0.2)"},{background:"#2d1b3d",border:ze.secondary,shadow:"0 0 30px rgba(168, 85, 247, 0.8), 0 0 60px rgba(168, 85, 247, 0.6), 0 0 90px rgba(168, 85, 247, 0.4), inset 0 0 30px rgba(168, 85, 247, 0.2)"},{background:"#1f0a1f",border:ze.primaryDark,shadow:"0 0 30px rgba(219, 39, 119, 0.8), 0 0 60px rgba(219, 39, 119, 0.6), 0 0 90px rgba(219, 39, 119, 0.4), inset 0 0 30px rgba(219, 39, 119, 0.2)"},{background:"#2a1b3d",border:ze.primaryLight,shadow:"0 0 30px rgba(244, 114, 182, 0.8), 0 0 60px rgba(244, 114, 182, 0.6), 0 0 90px rgba(244, 114, 182, 0.4), inset 0 0 30px rgba(244, 114, 182, 0.2)"},{background:"#1a0a1a",border:ze.primary,shadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 30px rgba(236, 72, 153, 0.2)"},{background:"#2d1b3d",border:ze.secondary,shadow:"0 0 30px rgba(168, 85, 247, 0.8), 0 0 60px rgba(168, 85, 247, 0.6), 0 0 90px rgba(168, 85, 247, 0.4), inset 0 0 30px rgba(168, 85, 247, 0.2)"}],r=e!==null?t[e%t.length]:t[Math.floor(Math.random()*t.length)];return{className:"border-2",style:{backgroundColor:r.background,borderColor:r.border,borderWidth:"2px",boxShadow:r.shadow}}},Tne=e=>{const t={light:{background:"bg-white",backgroundSecondary:"bg-gray-50",text:"text-gray-900",textSecondary:"text-gray-600",border:"border-gray-300",headerBg:"bg-blue-600",headerText:"text-white",headerBorder:"border-blue-700",buttonPrimary:"bg-blue-500 text-white hover:bg-blue-600",buttonSecondary:"bg-gray-200 text-gray-700 hover:bg-gray-300",buttonOutline:"border-gray-300 text-gray-700 hover:bg-gray-50",cardBg:"bg-white",cardBorder:"border-gray-200",inputBg:"bg-white",inputBorder:"border-gray-300",inputText:"text-gray-900",progressBg:"bg-gray-200",progressFill:"bg-blue-500"},cyberpunk:{background:"bg-black",backgroundSecondary:"bg-gray-900",text:"",textSecondary:"",border:"",headerBg:"bg-black",headerText:"",headerBorder:"",buttonPrimary:"",buttonSecondary:"bg-gray-800",buttonOutline:"",cardBg:"",cardBorder:"",inputBg:"bg-black",inputBorder:"",inputText:"",progressBg:"bg-gray-800",progressFill:"",buttonRed:"",buttonYellow:"",buttonPurple:""},kpop:{background:"bg-black",backgroundSecondary:"bg-black",text:"",textSecondary:"",border:"",headerBg:"bg-black",headerText:"",headerBorder:"",buttonPrimary:"",buttonSecondary:"",buttonOutline:"",cardBg:"",cardBorder:"",inputBg:"bg-black",inputBorder:"",inputText:"",progressBg:"bg-black",progressFill:"",buttonPink:"",buttonPurple:""}};return t[e]||t.cyberpunk},Da=e=>e==="cyberpunk"?{background:{backgroundColor:fe.black},glow:{boxShadow:`0 0 8px ${fe.cyan}, 0 0 12px ${fe.cyan}`},glowRed:{boxShadow:`0 0 8px ${fe.red}, 0 0 12px ${fe.red}`},glowYellow:{boxShadow:`0 0 6px ${fe.yellow}, 0 0 10px ${fe.yellow}`},glowPurple:{boxShadow:`0 0 8px ${fe.purple}, 0 0 12px ${fe.purple}`},glowGreen:{boxShadow:`0 0 8px ${fe.green}, 0 0 12px ${fe.green}`},textShadow:{textShadow:`0 0 10px ${fe.cyan}, 0 0 20px ${fe.cyan}, 0 0 30px ${fe.cyan}`},textShadowYellow:{textShadow:`0 0 8px ${fe.yellow}, 0 0 16px ${fe.yellow}`},textShadowRed:{textShadow:`0 0 8px ${fe.red}, 0 0 16px ${fe.red}`},textShadowPurple:{textShadow:`0 0 8px ${fe.purple}, 0 0 16px ${fe.purple}`},textShadowGreen:{textShadow:`0 0 8px ${fe.green}, 0 0 16px ${fe.green}`},textCyan:{color:fe.cyan,textShadow:`0 0 10px ${fe.cyan}, 0 0 20px ${fe.cyan}, 0 0 30px ${fe.cyan}`},textYellow:{color:fe.yellow,textShadow:`0 0 8px ${fe.yellow}, 0 0 16px ${fe.yellow}`},textRed:{color:fe.red,textShadow:`0 0 8px ${fe.red}, 0 0 16px ${fe.red}`},textPurple:{color:fe.purple,textShadow:`0 0 8px ${fe.purple}, 0 0 16px ${fe.purple}`},textGreen:{color:fe.green,textShadow:`0 0 8px ${fe.green}, 0 0 16px ${fe.green}`}}:e==="kpop"?{background:{backgroundColor:ze.background,backgroundImage:"radial-gradient(circle at 20% 50%, rgba(236, 72, 153, 0.15) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(168, 85, 247, 0.15) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(236, 72, 153, 0.1) 0%, transparent 50%)"},backgroundSecondary:{backgroundColor:ze.backgroundSecondary},glow:{boxShadow:`0 0 30px ${ze.glow}, 0 0 60px ${ze.glow}, 0 0 90px ${ze.glow}, 0 0 120px rgba(236, 72, 153, 0.3)`},glowPurple:{boxShadow:`0 0 30px ${ze.glowPurple}, 0 0 60px ${ze.glowPurple}, 0 0 90px ${ze.glowPurple}, 0 0 120px rgba(168, 85, 247, 0.3)`},glowRed:{boxShadow:`0 0 30px ${ze.primary}, 0 0 60px ${ze.primary}, 0 0 90px ${ze.primary}, 0 0 120px rgba(236, 72, 153, 0.3)`},shadow:{boxShadow:`0 0 20px ${ze.glow}, 0 0 40px ${ze.glow}, 0 0 60px rgba(236, 72, 153, 0.4)`},shadowMd:{boxShadow:`0 0 30px ${ze.glow}, 0 0 60px ${ze.glow}, 0 0 90px rgba(236, 72, 153, 0.4)`},shadowLg:{boxShadow:`0 0 40px ${ze.glow}, 0 0 80px ${ze.glow}, 0 0 120px rgba(236, 72, 153, 0.5)`},textShadow:{textShadow:`0 0 15px ${ze.glow}, 0 0 30px ${ze.glow}, 0 0 45px ${ze.glow}, 0 0 60px rgba(236, 72, 153, 0.4)`},textShadowMd:{textShadow:`0 0 12px ${ze.glow}, 0 0 24px ${ze.glow}, 0 0 36px rgba(236, 72, 153, 0.5)`},textShadowRed:{textShadow:`0 0 15px ${ze.primary}, 0 0 30px ${ze.primary}, 0 0 45px rgba(236, 72, 153, 0.6)`},textPink:{color:ze.primary,textShadow:`0 0 15px ${ze.primary}, 0 0 30px ${ze.primary}, 0 0 45px ${ze.primary}, 0 0 60px rgba(236, 72, 153, 0.5)`},textPurple:{color:ze.secondary,textShadow:`0 0 15px ${ze.secondary}, 0 0 30px ${ze.secondary}, 0 0 45px ${ze.secondary}, 0 0 60px rgba(168, 85, 247, 0.5)`},textWhite:{color:ze.text,textShadow:`0 0 10px ${ze.glow}, 0 0 20px ${ze.glow}, 0 0 30px rgba(236, 72, 153, 0.4)`},textAccent:{color:ze.textAccent,textShadow:`0 0 12px ${ze.textAccent}, 0 0 24px ${ze.textAccent}, 0 0 36px rgba(236, 72, 153, 0.5)`},textViolet:{color:ze.primary,textShadow:`0 0 15px ${ze.primary}, 0 0 30px ${ze.primary}, 0 0 45px rgba(236, 72, 153, 0.5)`},textVioletDark:{color:ze.text,textShadow:`0 0 8px ${ze.glow}, 0 0 16px rgba(236, 72, 153, 0.3)`},textVioletLight:{color:ze.primaryLight,textShadow:`0 0 12px ${ze.primaryLight}, 0 0 24px ${ze.primaryLight}, 0 0 36px rgba(244, 114, 182, 0.5)`},buttonHover:{transition:"all 0.2s ease-in-out"},headerGradient:{background:"linear-gradient(135deg, #000000 0%, #1a0014 20%, #ec4899 60%, #f472b6 100%)",boxShadow:`0 0 30px ${ze.primary}, 0 0 60px ${ze.primary}, 0 0 90px rgba(236, 72, 153, 0.5), inset 0 0 30px rgba(236, 72, 153, 0.2)`},headerText:{color:ze.primary,textShadow:`-1px -1px 0 #ffffff, 1px -1px 0 #ffffff, -1px 1px 0 #ffffff, 1px 1px 0 #ffffff, 0 -1px 0 #ffffff, 0 1px 0 #ffffff, -1px 0 0 #ffffff, 1px 0 0 #ffffff, 0 0 15px ${ze.primary}, 0 0 30px ${ze.primary}, 0 0 45px ${ze.primary}, 0 0 60px rgba(236, 72, 153, 0.5)`}}:{},bj=e=>{typeof document>"u"||(e==="cyberpunk"?document.documentElement.setAttribute("data-theme","cyberpunk"):e==="kpop"?document.documentElement.setAttribute("data-theme","kpop"):document.documentElement.setAttribute("data-theme","light"))},nU=S.createContext({theme:"cyberpunk",setTheme:e=>{},isCyberpunk:!0,isLight:!1,isKpop:!1,themeClasses:{}}),Nne=({children:e})=>{const[t,r]=S.useState(()=>{if(typeof window<"u"){const a=localStorage.getItem("student_theme_preference");return a==="light"||a==="cyberpunk"||a==="kpop"?a:"cyberpunk"}return"cyberpunk"});S.useEffect(()=>{bj(t)},[t]);const s={theme:t,setTheme:a=>{a!=="light"&&a!=="cyberpunk"&&a!=="kpop"&&(console.warn(`Invalid theme: ${a}. Defaulting to cyberpunk.`),a="cyberpunk"),r(a),typeof window<"u"&&localStorage.setItem("student_theme_preference",a),bj(a)},isCyberpunk:t==="cyberpunk",isLight:t==="light",isKpop:t==="kpop",themeClasses:Tne(t)};return l.jsx(nU.Provider,{value:s,children:e})},Ra=()=>{const e=S.useContext(nU);return e||{theme:"light",setTheme:()=>{},isCyberpunk:!1,isLight:!0,isKpop:!1,themeClasses:{}}};class fl{constructor(t,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=n}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new fl(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class zl{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new zl(r,fl.range(this,t))}}class sr{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+t,s,a,i=r&&r.loc;if(i&&i.start<=i.end){var o=i.lexer.input;s=i.start,a=i.end,s===o.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";var c=o.slice(s,a).replace(/[^]/g,"$&"),u;s>15?u=""+o.slice(s-15,s):u=o.slice(0,s);var d;a+15<o.length?d=o.slice(a,a+15)+"":d=o.slice(a),n+=u+c+d}var f=new Error(n);return f.name="ParseError",f.__proto__=sr.prototype,f.position=s,s!=null&&a!=null&&(f.length=a-s),f.rawMessage=t,f}}sr.prototype.__proto__=Error.prototype;var Ene=function(t,r){return t===void 0?r:t},Ane=/([A-Z])/g,jne=function(t){return t.replace(Ane,"-$1").toLowerCase()},Pne={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},Fne=/[&><"']/g;function Mne(e){return String(e).replace(Fne,t=>Pne[t])}var sU=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},One=function(t){var r=sU(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},Dne=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},Rne=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Xn={deflt:Ene,escape:Mne,hyphenate:jne,getBaseElem:sU,isCharacterBox:One,protocolFromUrl:Rne},Jw={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function Ine(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class BT{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in Jw)if(Jw.hasOwnProperty(r)){var n=Jw[r];this[r]=t[r]!==void 0?n.processor?n.processor(t[r]):t[r]:Ine(n)}}reportNonstrict(t,r,n){var s=this.strict;if(typeof s=="function"&&(s=s(t,r,n)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new sr("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),n);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,n){var s=this.strict;if(typeof s=="function")try{s=s(t,r,n)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=Xn.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var n=typeof this.trust=="function"?this.trust(t):this.trust;return!!n}}class bf{constructor(t,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=n}sup(){return Hu[Lne[this.id]]}sub(){return Hu[Bne[this.id]]}fracNum(){return Hu[$ne[this.id]]}fracDen(){return Hu[Une[this.id]]}cramp(){return Hu[zne[this.id]]}text(){return Hu[Wne[this.id]]}isTight(){return this.size>=2}}var $T=0,p4=1,Pp=2,n0=3,Sv=4,bc=5,qp=6,Go=7,Hu=[new bf($T,0,!1),new bf(p4,0,!0),new bf(Pp,1,!1),new bf(n0,1,!0),new bf(Sv,2,!1),new bf(bc,2,!0),new bf(qp,3,!1),new bf(Go,3,!0)],Lne=[Sv,bc,Sv,bc,qp,Go,qp,Go],Bne=[bc,bc,bc,bc,Go,Go,Go,Go],$ne=[Pp,n0,Sv,bc,qp,Go,qp,Go],Une=[n0,n0,bc,bc,Go,Go,Go,Go],zne=[p4,p4,n0,n0,bc,bc,Go,Go],Wne=[$T,p4,Pp,n0,Pp,n0,Pp,n0],rn={DISPLAY:Hu[$T],TEXT:Hu[Pp],SCRIPT:Hu[Sv],SCRIPTSCRIPT:Hu[qp]},nC=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function Hne(e){for(var t=0;t<nC.length;t++)for(var r=nC[t],n=0;n<r.blocks.length;n++){var s=r.blocks[n];if(e>=s[0]&&e<=s[1])return r.name}return null}var Qw=[];nC.forEach(e=>e.blocks.forEach(t=>Qw.push(...t)));function aU(e){for(var t=0;t<Qw.length;t+=2)if(e>=Qw[t]&&e<=Qw[t+1])return!0;return!1}var sp=80,Gne=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Vne=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},qne=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},Kne=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},Yne=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},Xne=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},Jne=function(t,r,n){var s=n-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},Qne=function(t,r,n){r=1e3*r;var s="";switch(t){case"sqrtMain":s=Gne(r,sp);break;case"sqrtSize1":s=Vne(r,sp);break;case"sqrtSize2":s=qne(r,sp);break;case"sqrtSize3":s=Kne(r,sp);break;case"sqrtSize4":s=Yne(r,sp);break;case"sqrtTall":s=Jne(r,sp,n)}return s},Zne=function(t,r){switch(t){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},wj={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},ese=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class u2{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return this.classes.includes(t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}}var Ku={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Jb={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},_j={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function tse(e,t){Ku[e]=t}function UT(e,t,r){if(!Ku[t])throw new Error("Font metrics not found for font: "+t+".");var n=e.charCodeAt(0),s=Ku[t][n];if(!s&&e[0]in _j&&(n=_j[e[0]].charCodeAt(0),s=Ku[t][n]),!s&&r==="text"&&aU(n)&&(s=Ku[t][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var XS={};function rse(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!XS[t]){var r=XS[t]={cssEmPerMu:Jb.quad[t]/18};for(var n in Jb)Jb.hasOwnProperty(n)&&(r[n]=Jb[n][t])}return XS[t]}var nse=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Sj=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],kj=function(t,r){return r.size<2?t:nse[t-1][r.size-1]};class Vd{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||Vd.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=Sj[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return new Vd(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:kj(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:Sj[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=kj(Vd.BASESIZE,t);return this.size===r&&this.textSize===Vd.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Vd.BASESIZE?["sizing","reset-size"+this.size,"size"+Vd.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=rse(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Vd.BASESIZE=6;var sC={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},sse={ex:!0,em:!0,mu:!0},iU=function(t){return typeof t!="string"&&(t=t.unit),t in sC||t in sse||t==="ex"},ta=function(t,r){var n;if(t.unit in sC)n=sC[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var s;if(r.style.isTight()?s=r.havingStyle(r.style.text()):s=r,t.unit==="ex")n=s.fontMetrics().xHeight;else if(t.unit==="em")n=s.fontMetrics().quad;else throw new sr("Invalid unit: '"+t.unit+"'");s!==r&&(n*=s.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*n,r.maxSize)},vr=function(t){return+t.toFixed(4)+"em"},Vf=function(t){return t.filter(r=>r).join(" ")},oU=function(t,r,n){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var s=r.getColor();s&&(this.style.color=s)}},lU=function(t){var r=document.createElement(t);r.className=Vf(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&r.setAttribute(s,this.attributes[s]);for(var a=0;a<this.children.length;a++)r.appendChild(this.children[a].toNode());return r},ase=/[\s"'>/=\x00-\x1f]/,cU=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+Xn.escape(Vf(this.classes))+'"');var n="";for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Xn.hyphenate(s)+":"+this.style[s]+";");n&&(r+=' style="'+Xn.escape(n)+'"');for(var a in this.attributes)if(this.attributes.hasOwnProperty(a)){if(ase.test(a))throw new sr("Invalid attribute name '"+a+"'");r+=" "+a+'="'+Xn.escape(this.attributes[a])+'"'}r+=">";for(var i=0;i<this.children.length;i++)r+=this.children[i].toMarkup();return r+="</"+t+">",r};class d2{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,oU.call(this,t,n,s),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return lU.call(this,"span")}toMarkup(){return cU.call(this,"span")}}class zT{constructor(t,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,oU.call(this,r,s),this.children=n||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return this.classes.includes(t)}toNode(){return lU.call(this,"a")}toMarkup(){return cU.call(this,"a")}}class ise{constructor(t,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=n}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+Xn.escape(this.src)+'"'+(' alt="'+Xn.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Xn.hyphenate(n)+":"+this.style[n]+";");return r&&(t+=' style="'+Xn.escape(r)+'"'),t+="'/>",t}}var ose={:"",:"",:"",:""};class Tc{constructor(t,r,n,s,a,i,o,c){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=n||0,this.italic=s||0,this.skew=a||0,this.width=i||0,this.classes=o||[],this.style=c||{},this.maxFontSize=0;var u=Hne(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=ose[this.text])}hasClass(t){return this.classes.includes(t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=vr(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Vf(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=Xn.escape(Vf(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Xn.hyphenate(s)+":"+this.style[s]+";");n&&(t=!0,r+=' style="'+Xn.escape(n)+'"');var a=Xn.escape(this.text);return t?(r+=">",r+=a,r+="</span>",r):a}}class h0{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Xn.escape(this.attributes[r])+'"');t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</svg>",t}}class qf{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",wj[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Xn.escape(this.alternate)+'"/>':'<path d="'+Xn.escape(wj[this.pathName])+'"/>'}}class aC{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Xn.escape(this.attributes[r])+'"');return t+="/>",t}}function Cj(e){if(e instanceof Tc)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function lse(e){if(e instanceof d2)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var cse={bin:1,close:1,inner:1,open:1,punct:1,rel:1},use={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Ps={math:{},text:{}};function Z(e,t,r,n,s,a){Ps[e][s]={font:t,group:r,replace:n},a&&n&&(Ps[e][n]=Ps[e][s])}var ie="math",Zt="text",ge="main",$e="ams",Ys="accent-token",Rr="bin",Jo="close",p1="inner",tn="mathord",Ya="op-token",Kl="open",W_="punct",We="rel",C0="spacing",ot="textord";Z(ie,ge,We,"","\\equiv",!0);Z(ie,ge,We,"","\\prec",!0);Z(ie,ge,We,"","\\succ",!0);Z(ie,ge,We,"","\\sim",!0);Z(ie,ge,We,"","\\perp");Z(ie,ge,We,"","\\preceq",!0);Z(ie,ge,We,"","\\succeq",!0);Z(ie,ge,We,"","\\simeq",!0);Z(ie,ge,We,"","\\mid",!0);Z(ie,ge,We,"","\\ll",!0);Z(ie,ge,We,"","\\gg",!0);Z(ie,ge,We,"","\\asymp",!0);Z(ie,ge,We,"","\\parallel");Z(ie,ge,We,"","\\bowtie",!0);Z(ie,ge,We,"","\\smile",!0);Z(ie,ge,We,"","\\sqsubseteq",!0);Z(ie,ge,We,"","\\sqsupseteq",!0);Z(ie,ge,We,"","\\doteq",!0);Z(ie,ge,We,"","\\frown",!0);Z(ie,ge,We,"","\\ni",!0);Z(ie,ge,We,"","\\propto",!0);Z(ie,ge,We,"","\\vdash",!0);Z(ie,ge,We,"","\\dashv",!0);Z(ie,ge,We,"","\\owns");Z(ie,ge,W_,".","\\ldotp");Z(ie,ge,W_,"","\\cdotp");Z(ie,ge,ot,"#","\\#");Z(Zt,ge,ot,"#","\\#");Z(ie,ge,ot,"&","\\&");Z(Zt,ge,ot,"&","\\&");Z(ie,ge,ot,"","\\aleph",!0);Z(ie,ge,ot,"","\\forall",!0);Z(ie,ge,ot,"","\\hbar",!0);Z(ie,ge,ot,"","\\exists",!0);Z(ie,ge,ot,"","\\nabla",!0);Z(ie,ge,ot,"","\\flat",!0);Z(ie,ge,ot,"","\\ell",!0);Z(ie,ge,ot,"","\\natural",!0);Z(ie,ge,ot,"","\\clubsuit",!0);Z(ie,ge,ot,"","\\wp",!0);Z(ie,ge,ot,"","\\sharp",!0);Z(ie,ge,ot,"","\\diamondsuit",!0);Z(ie,ge,ot,"","\\Re",!0);Z(ie,ge,ot,"","\\heartsuit",!0);Z(ie,ge,ot,"","\\Im",!0);Z(ie,ge,ot,"","\\spadesuit",!0);Z(ie,ge,ot,"","\\S",!0);Z(Zt,ge,ot,"","\\S");Z(ie,ge,ot,"","\\P",!0);Z(Zt,ge,ot,"","\\P");Z(ie,ge,ot,"","\\dag");Z(Zt,ge,ot,"","\\dag");Z(Zt,ge,ot,"","\\textdagger");Z(ie,ge,ot,"","\\ddag");Z(Zt,ge,ot,"","\\ddag");Z(Zt,ge,ot,"","\\textdaggerdbl");Z(ie,ge,Jo,"","\\rmoustache",!0);Z(ie,ge,Kl,"","\\lmoustache",!0);Z(ie,ge,Jo,"","\\rgroup",!0);Z(ie,ge,Kl,"","\\lgroup",!0);Z(ie,ge,Rr,"","\\mp",!0);Z(ie,ge,Rr,"","\\ominus",!0);Z(ie,ge,Rr,"","\\uplus",!0);Z(ie,ge,Rr,"","\\sqcap",!0);Z(ie,ge,Rr,"","\\ast");Z(ie,ge,Rr,"","\\sqcup",!0);Z(ie,ge,Rr,"","\\bigcirc",!0);Z(ie,ge,Rr,"","\\bullet",!0);Z(ie,ge,Rr,"","\\ddagger");Z(ie,ge,Rr,"","\\wr",!0);Z(ie,ge,Rr,"","\\amalg");Z(ie,ge,Rr,"&","\\And");Z(ie,ge,We,"","\\longleftarrow",!0);Z(ie,ge,We,"","\\Leftarrow",!0);Z(ie,ge,We,"","\\Longleftarrow",!0);Z(ie,ge,We,"","\\longrightarrow",!0);Z(ie,ge,We,"","\\Rightarrow",!0);Z(ie,ge,We,"","\\Longrightarrow",!0);Z(ie,ge,We,"","\\leftrightarrow",!0);Z(ie,ge,We,"","\\longleftrightarrow",!0);Z(ie,ge,We,"","\\Leftrightarrow",!0);Z(ie,ge,We,"","\\Longleftrightarrow",!0);Z(ie,ge,We,"","\\mapsto",!0);Z(ie,ge,We,"","\\longmapsto",!0);Z(ie,ge,We,"","\\nearrow",!0);Z(ie,ge,We,"","\\hookleftarrow",!0);Z(ie,ge,We,"","\\hookrightarrow",!0);Z(ie,ge,We,"","\\searrow",!0);Z(ie,ge,We,"","\\leftharpoonup",!0);Z(ie,ge,We,"","\\rightharpoonup",!0);Z(ie,ge,We,"","\\swarrow",!0);Z(ie,ge,We,"","\\leftharpoondown",!0);Z(ie,ge,We,"","\\rightharpoondown",!0);Z(ie,ge,We,"","\\nwarrow",!0);Z(ie,ge,We,"","\\rightleftharpoons",!0);Z(ie,$e,We,"","\\nless",!0);Z(ie,$e,We,"","\\@nleqslant");Z(ie,$e,We,"","\\@nleqq");Z(ie,$e,We,"","\\lneq",!0);Z(ie,$e,We,"","\\lneqq",!0);Z(ie,$e,We,"","\\@lvertneqq");Z(ie,$e,We,"","\\lnsim",!0);Z(ie,$e,We,"","\\lnapprox",!0);Z(ie,$e,We,"","\\nprec",!0);Z(ie,$e,We,"","\\npreceq",!0);Z(ie,$e,We,"","\\precnsim",!0);Z(ie,$e,We,"","\\precnapprox",!0);Z(ie,$e,We,"","\\nsim",!0);Z(ie,$e,We,"","\\@nshortmid");Z(ie,$e,We,"","\\nmid",!0);Z(ie,$e,We,"","\\nvdash",!0);Z(ie,$e,We,"","\\nvDash",!0);Z(ie,$e,We,"","\\ntriangleleft");Z(ie,$e,We,"","\\ntrianglelefteq",!0);Z(ie,$e,We,"","\\subsetneq",!0);Z(ie,$e,We,"","\\@varsubsetneq");Z(ie,$e,We,"","\\subsetneqq",!0);Z(ie,$e,We,"","\\@varsubsetneqq");Z(ie,$e,We,"","\\ngtr",!0);Z(ie,$e,We,"","\\@ngeqslant");Z(ie,$e,We,"","\\@ngeqq");Z(ie,$e,We,"","\\gneq",!0);Z(ie,$e,We,"","\\gneqq",!0);Z(ie,$e,We,"","\\@gvertneqq");Z(ie,$e,We,"","\\gnsim",!0);Z(ie,$e,We,"","\\gnapprox",!0);Z(ie,$e,We,"","\\nsucc",!0);Z(ie,$e,We,"","\\nsucceq",!0);Z(ie,$e,We,"","\\succnsim",!0);Z(ie,$e,We,"","\\succnapprox",!0);Z(ie,$e,We,"","\\ncong",!0);Z(ie,$e,We,"","\\@nshortparallel");Z(ie,$e,We,"","\\nparallel",!0);Z(ie,$e,We,"","\\nVDash",!0);Z(ie,$e,We,"","\\ntriangleright");Z(ie,$e,We,"","\\ntrianglerighteq",!0);Z(ie,$e,We,"","\\@nsupseteqq");Z(ie,$e,We,"","\\supsetneq",!0);Z(ie,$e,We,"","\\@varsupsetneq");Z(ie,$e,We,"","\\supsetneqq",!0);Z(ie,$e,We,"","\\@varsupsetneqq");Z(ie,$e,We,"","\\nVdash",!0);Z(ie,$e,We,"","\\precneqq",!0);Z(ie,$e,We,"","\\succneqq",!0);Z(ie,$e,We,"","\\@nsubseteqq");Z(ie,$e,Rr,"","\\unlhd");Z(ie,$e,Rr,"","\\unrhd");Z(ie,$e,We,"","\\nleftarrow",!0);Z(ie,$e,We,"","\\nrightarrow",!0);Z(ie,$e,We,"","\\nLeftarrow",!0);Z(ie,$e,We,"","\\nRightarrow",!0);Z(ie,$e,We,"","\\nleftrightarrow",!0);Z(ie,$e,We,"","\\nLeftrightarrow",!0);Z(ie,$e,We,"","\\vartriangle");Z(ie,$e,ot,"","\\hslash");Z(ie,$e,ot,"","\\triangledown");Z(ie,$e,ot,"","\\lozenge");Z(ie,$e,ot,"","\\circledS");Z(ie,$e,ot,"","\\circledR");Z(Zt,$e,ot,"","\\circledR");Z(ie,$e,ot,"","\\measuredangle",!0);Z(ie,$e,ot,"","\\nexists");Z(ie,$e,ot,"","\\mho");Z(ie,$e,ot,"","\\Finv",!0);Z(ie,$e,ot,"","\\Game",!0);Z(ie,$e,ot,"","\\backprime");Z(ie,$e,ot,"","\\blacktriangle");Z(ie,$e,ot,"","\\blacktriangledown");Z(ie,$e,ot,"","\\blacksquare");Z(ie,$e,ot,"","\\blacklozenge");Z(ie,$e,ot,"","\\bigstar");Z(ie,$e,ot,"","\\sphericalangle",!0);Z(ie,$e,ot,"","\\complement",!0);Z(ie,$e,ot,"","\\eth",!0);Z(Zt,ge,ot,"","");Z(ie,$e,ot,"","\\diagup");Z(ie,$e,ot,"","\\diagdown");Z(ie,$e,ot,"","\\square");Z(ie,$e,ot,"","\\Box");Z(ie,$e,ot,"","\\Diamond");Z(ie,$e,ot,"","\\yen",!0);Z(Zt,$e,ot,"","\\yen",!0);Z(ie,$e,ot,"","\\checkmark",!0);Z(Zt,$e,ot,"","\\checkmark");Z(ie,$e,ot,"","\\beth",!0);Z(ie,$e,ot,"","\\daleth",!0);Z(ie,$e,ot,"","\\gimel",!0);Z(ie,$e,ot,"","\\digamma",!0);Z(ie,$e,ot,"","\\varkappa");Z(ie,$e,Kl,"","\\@ulcorner",!0);Z(ie,$e,Jo,"","\\@urcorner",!0);Z(ie,$e,Kl,"","\\@llcorner",!0);Z(ie,$e,Jo,"","\\@lrcorner",!0);Z(ie,$e,We,"","\\leqq",!0);Z(ie,$e,We,"","\\leqslant",!0);Z(ie,$e,We,"","\\eqslantless",!0);Z(ie,$e,We,"","\\lesssim",!0);Z(ie,$e,We,"","\\lessapprox",!0);Z(ie,$e,We,"","\\approxeq",!0);Z(ie,$e,Rr,"","\\lessdot");Z(ie,$e,We,"","\\lll",!0);Z(ie,$e,We,"","\\lessgtr",!0);Z(ie,$e,We,"","\\lesseqgtr",!0);Z(ie,$e,We,"","\\lesseqqgtr",!0);Z(ie,$e,We,"","\\doteqdot");Z(ie,$e,We,"","\\risingdotseq",!0);Z(ie,$e,We,"","\\fallingdotseq",!0);Z(ie,$e,We,"","\\backsim",!0);Z(ie,$e,We,"","\\backsimeq",!0);Z(ie,$e,We,"","\\subseteqq",!0);Z(ie,$e,We,"","\\Subset",!0);Z(ie,$e,We,"","\\sqsubset",!0);Z(ie,$e,We,"","\\preccurlyeq",!0);Z(ie,$e,We,"","\\curlyeqprec",!0);Z(ie,$e,We,"","\\precsim",!0);Z(ie,$e,We,"","\\precapprox",!0);Z(ie,$e,We,"","\\vartriangleleft");Z(ie,$e,We,"","\\trianglelefteq");Z(ie,$e,We,"","\\vDash",!0);Z(ie,$e,We,"","\\Vvdash",!0);Z(ie,$e,We,"","\\smallsmile");Z(ie,$e,We,"","\\smallfrown");Z(ie,$e,We,"","\\bumpeq",!0);Z(ie,$e,We,"","\\Bumpeq",!0);Z(ie,$e,We,"","\\geqq",!0);Z(ie,$e,We,"","\\geqslant",!0);Z(ie,$e,We,"","\\eqslantgtr",!0);Z(ie,$e,We,"","\\gtrsim",!0);Z(ie,$e,We,"","\\gtrapprox",!0);Z(ie,$e,Rr,"","\\gtrdot");Z(ie,$e,We,"","\\ggg",!0);Z(ie,$e,We,"","\\gtrless",!0);Z(ie,$e,We,"","\\gtreqless",!0);Z(ie,$e,We,"","\\gtreqqless",!0);Z(ie,$e,We,"","\\eqcirc",!0);Z(ie,$e,We,"","\\circeq",!0);Z(ie,$e,We,"","\\triangleq",!0);Z(ie,$e,We,"","\\thicksim");Z(ie,$e,We,"","\\thickapprox");Z(ie,$e,We,"","\\supseteqq",!0);Z(ie,$e,We,"","\\Supset",!0);Z(ie,$e,We,"","\\sqsupset",!0);Z(ie,$e,We,"","\\succcurlyeq",!0);Z(ie,$e,We,"","\\curlyeqsucc",!0);Z(ie,$e,We,"","\\succsim",!0);Z(ie,$e,We,"","\\succapprox",!0);Z(ie,$e,We,"","\\vartriangleright");Z(ie,$e,We,"","\\trianglerighteq");Z(ie,$e,We,"","\\Vdash",!0);Z(ie,$e,We,"","\\shortmid");Z(ie,$e,We,"","\\shortparallel");Z(ie,$e,We,"","\\between",!0);Z(ie,$e,We,"","\\pitchfork",!0);Z(ie,$e,We,"","\\varpropto");Z(ie,$e,We,"","\\blacktriangleleft");Z(ie,$e,We,"","\\therefore",!0);Z(ie,$e,We,"","\\backepsilon");Z(ie,$e,We,"","\\blacktriangleright");Z(ie,$e,We,"","\\because",!0);Z(ie,$e,We,"","\\llless");Z(ie,$e,We,"","\\gggtr");Z(ie,$e,Rr,"","\\lhd");Z(ie,$e,Rr,"","\\rhd");Z(ie,$e,We,"","\\eqsim",!0);Z(ie,ge,We,"","\\Join");Z(ie,$e,We,"","\\Doteq",!0);Z(ie,$e,Rr,"","\\dotplus",!0);Z(ie,$e,Rr,"","\\smallsetminus");Z(ie,$e,Rr,"","\\Cap",!0);Z(ie,$e,Rr,"","\\Cup",!0);Z(ie,$e,Rr,"","\\doublebarwedge",!0);Z(ie,$e,Rr,"","\\boxminus",!0);Z(ie,$e,Rr,"","\\boxplus",!0);Z(ie,$e,Rr,"","\\divideontimes",!0);Z(ie,$e,Rr,"","\\ltimes",!0);Z(ie,$e,Rr,"","\\rtimes",!0);Z(ie,$e,Rr,"","\\leftthreetimes",!0);Z(ie,$e,Rr,"","\\rightthreetimes",!0);Z(ie,$e,Rr,"","\\curlywedge",!0);Z(ie,$e,Rr,"","\\curlyvee",!0);Z(ie,$e,Rr,"","\\circleddash",!0);Z(ie,$e,Rr,"","\\circledast",!0);Z(ie,$e,Rr,"","\\centerdot");Z(ie,$e,Rr,"","\\intercal",!0);Z(ie,$e,Rr,"","\\doublecap");Z(ie,$e,Rr,"","\\doublecup");Z(ie,$e,Rr,"","\\boxtimes",!0);Z(ie,$e,We,"","\\dashrightarrow",!0);Z(ie,$e,We,"","\\dashleftarrow",!0);Z(ie,$e,We,"","\\leftleftarrows",!0);Z(ie,$e,We,"","\\leftrightarrows",!0);Z(ie,$e,We,"","\\Lleftarrow",!0);Z(ie,$e,We,"","\\twoheadleftarrow",!0);Z(ie,$e,We,"","\\leftarrowtail",!0);Z(ie,$e,We,"","\\looparrowleft",!0);Z(ie,$e,We,"","\\leftrightharpoons",!0);Z(ie,$e,We,"","\\curvearrowleft",!0);Z(ie,$e,We,"","\\circlearrowleft",!0);Z(ie,$e,We,"","\\Lsh",!0);Z(ie,$e,We,"","\\upuparrows",!0);Z(ie,$e,We,"","\\upharpoonleft",!0);Z(ie,$e,We,"","\\downharpoonleft",!0);Z(ie,ge,We,"","\\origof",!0);Z(ie,ge,We,"","\\imageof",!0);Z(ie,$e,We,"","\\multimap",!0);Z(ie,$e,We,"","\\leftrightsquigarrow",!0);Z(ie,$e,We,"","\\rightrightarrows",!0);Z(ie,$e,We,"","\\rightleftarrows",!0);Z(ie,$e,We,"","\\twoheadrightarrow",!0);Z(ie,$e,We,"","\\rightarrowtail",!0);Z(ie,$e,We,"","\\looparrowright",!0);Z(ie,$e,We,"","\\curvearrowright",!0);Z(ie,$e,We,"","\\circlearrowright",!0);Z(ie,$e,We,"","\\Rsh",!0);Z(ie,$e,We,"","\\downdownarrows",!0);Z(ie,$e,We,"","\\upharpoonright",!0);Z(ie,$e,We,"","\\downharpoonright",!0);Z(ie,$e,We,"","\\rightsquigarrow",!0);Z(ie,$e,We,"","\\leadsto");Z(ie,$e,We,"","\\Rrightarrow",!0);Z(ie,$e,We,"","\\restriction");Z(ie,ge,ot,"","`");Z(ie,ge,ot,"$","\\$");Z(Zt,ge,ot,"$","\\$");Z(Zt,ge,ot,"$","\\textdollar");Z(ie,ge,ot,"%","\\%");Z(Zt,ge,ot,"%","\\%");Z(ie,ge,ot,"_","\\_");Z(Zt,ge,ot,"_","\\_");Z(Zt,ge,ot,"_","\\textunderscore");Z(ie,ge,ot,"","\\angle",!0);Z(ie,ge,ot,"","\\infty",!0);Z(ie,ge,ot,"","\\prime");Z(ie,ge,ot,"","\\triangle");Z(ie,ge,ot,"","\\Gamma",!0);Z(ie,ge,ot,"","\\Delta",!0);Z(ie,ge,ot,"","\\Theta",!0);Z(ie,ge,ot,"","\\Lambda",!0);Z(ie,ge,ot,"","\\Xi",!0);Z(ie,ge,ot,"","\\Pi",!0);Z(ie,ge,ot,"","\\Sigma",!0);Z(ie,ge,ot,"","\\Upsilon",!0);Z(ie,ge,ot,"","\\Phi",!0);Z(ie,ge,ot,"","\\Psi",!0);Z(ie,ge,ot,"","\\Omega",!0);Z(ie,ge,ot,"A","");Z(ie,ge,ot,"B","");Z(ie,ge,ot,"E","");Z(ie,ge,ot,"Z","");Z(ie,ge,ot,"H","");Z(ie,ge,ot,"I","");Z(ie,ge,ot,"K","");Z(ie,ge,ot,"M","");Z(ie,ge,ot,"N","");Z(ie,ge,ot,"O","");Z(ie,ge,ot,"P","");Z(ie,ge,ot,"T","");Z(ie,ge,ot,"X","");Z(ie,ge,ot,"","\\neg",!0);Z(ie,ge,ot,"","\\lnot");Z(ie,ge,ot,"","\\top");Z(ie,ge,ot,"","\\bot");Z(ie,ge,ot,"","\\emptyset");Z(ie,$e,ot,"","\\varnothing");Z(ie,ge,tn,"","\\alpha",!0);Z(ie,ge,tn,"","\\beta",!0);Z(ie,ge,tn,"","\\gamma",!0);Z(ie,ge,tn,"","\\delta",!0);Z(ie,ge,tn,"","\\epsilon",!0);Z(ie,ge,tn,"","\\zeta",!0);Z(ie,ge,tn,"","\\eta",!0);Z(ie,ge,tn,"","\\theta",!0);Z(ie,ge,tn,"","\\iota",!0);Z(ie,ge,tn,"","\\kappa",!0);Z(ie,ge,tn,"","\\lambda",!0);Z(ie,ge,tn,"","\\mu",!0);Z(ie,ge,tn,"","\\nu",!0);Z(ie,ge,tn,"","\\xi",!0);Z(ie,ge,tn,"","\\omicron",!0);Z(ie,ge,tn,"","\\pi",!0);Z(ie,ge,tn,"","\\rho",!0);Z(ie,ge,tn,"","\\sigma",!0);Z(ie,ge,tn,"","\\tau",!0);Z(ie,ge,tn,"","\\upsilon",!0);Z(ie,ge,tn,"","\\phi",!0);Z(ie,ge,tn,"","\\chi",!0);Z(ie,ge,tn,"","\\psi",!0);Z(ie,ge,tn,"","\\omega",!0);Z(ie,ge,tn,"","\\varepsilon",!0);Z(ie,ge,tn,"","\\vartheta",!0);Z(ie,ge,tn,"","\\varpi",!0);Z(ie,ge,tn,"","\\varrho",!0);Z(ie,ge,tn,"","\\varsigma",!0);Z(ie,ge,tn,"","\\varphi",!0);Z(ie,ge,Rr,"","*",!0);Z(ie,ge,Rr,"+","+");Z(ie,ge,Rr,"","-",!0);Z(ie,ge,Rr,"","\\cdot",!0);Z(ie,ge,Rr,"","\\circ",!0);Z(ie,ge,Rr,"","\\div",!0);Z(ie,ge,Rr,"","\\pm",!0);Z(ie,ge,Rr,"","\\times",!0);Z(ie,ge,Rr,"","\\cap",!0);Z(ie,ge,Rr,"","\\cup",!0);Z(ie,ge,Rr,"","\\setminus",!0);Z(ie,ge,Rr,"","\\land");Z(ie,ge,Rr,"","\\lor");Z(ie,ge,Rr,"","\\wedge",!0);Z(ie,ge,Rr,"","\\vee",!0);Z(ie,ge,ot,"","\\surd");Z(ie,ge,Kl,"","\\langle",!0);Z(ie,ge,Kl,"","\\lvert");Z(ie,ge,Kl,"","\\lVert");Z(ie,ge,Jo,"?","?");Z(ie,ge,Jo,"!","!");Z(ie,ge,Jo,"","\\rangle",!0);Z(ie,ge,Jo,"","\\rvert");Z(ie,ge,Jo,"","\\rVert");Z(ie,ge,We,"=","=");Z(ie,ge,We,":",":");Z(ie,ge,We,"","\\approx",!0);Z(ie,ge,We,"","\\cong",!0);Z(ie,ge,We,"","\\ge");Z(ie,ge,We,"","\\geq",!0);Z(ie,ge,We,"","\\gets");Z(ie,ge,We,">","\\gt",!0);Z(ie,ge,We,"","\\in",!0);Z(ie,ge,We,"","\\@not");Z(ie,ge,We,"","\\subset",!0);Z(ie,ge,We,"","\\supset",!0);Z(ie,ge,We,"","\\subseteq",!0);Z(ie,ge,We,"","\\supseteq",!0);Z(ie,$e,We,"","\\nsubseteq",!0);Z(ie,$e,We,"","\\nsupseteq",!0);Z(ie,ge,We,"","\\models");Z(ie,ge,We,"","\\leftarrow",!0);Z(ie,ge,We,"","\\le");Z(ie,ge,We,"","\\leq",!0);Z(ie,ge,We,"<","\\lt",!0);Z(ie,ge,We,"","\\rightarrow",!0);Z(ie,ge,We,"","\\to");Z(ie,$e,We,"","\\ngeq",!0);Z(ie,$e,We,"","\\nleq",!0);Z(ie,ge,C0,"","\\ ");Z(ie,ge,C0,"","\\space");Z(ie,ge,C0,"","\\nobreakspace");Z(Zt,ge,C0,"","\\ ");Z(Zt,ge,C0,""," ");Z(Zt,ge,C0,"","\\space");Z(Zt,ge,C0,"","\\nobreakspace");Z(ie,ge,C0,null,"\\nobreak");Z(ie,ge,C0,null,"\\allowbreak");Z(ie,ge,W_,",",",");Z(ie,ge,W_,";",";");Z(ie,$e,Rr,"","\\barwedge",!0);Z(ie,$e,Rr,"","\\veebar",!0);Z(ie,ge,Rr,"","\\odot",!0);Z(ie,ge,Rr,"","\\oplus",!0);Z(ie,ge,Rr,"","\\otimes",!0);Z(ie,ge,ot,"","\\partial",!0);Z(ie,ge,Rr,"","\\oslash",!0);Z(ie,$e,Rr,"","\\circledcirc",!0);Z(ie,$e,Rr,"","\\boxdot",!0);Z(ie,ge,Rr,"","\\bigtriangleup");Z(ie,ge,Rr,"","\\bigtriangledown");Z(ie,ge,Rr,"","\\dagger");Z(ie,ge,Rr,"","\\diamond");Z(ie,ge,Rr,"","\\star");Z(ie,ge,Rr,"","\\triangleleft");Z(ie,ge,Rr,"","\\triangleright");Z(ie,ge,Kl,"{","\\{");Z(Zt,ge,ot,"{","\\{");Z(Zt,ge,ot,"{","\\textbraceleft");Z(ie,ge,Jo,"}","\\}");Z(Zt,ge,ot,"}","\\}");Z(Zt,ge,ot,"}","\\textbraceright");Z(ie,ge,Kl,"{","\\lbrace");Z(ie,ge,Jo,"}","\\rbrace");Z(ie,ge,Kl,"[","\\lbrack",!0);Z(Zt,ge,ot,"[","\\lbrack",!0);Z(ie,ge,Jo,"]","\\rbrack",!0);Z(Zt,ge,ot,"]","\\rbrack",!0);Z(ie,ge,Kl,"(","\\lparen",!0);Z(ie,ge,Jo,")","\\rparen",!0);Z(Zt,ge,ot,"<","\\textless",!0);Z(Zt,ge,ot,">","\\textgreater",!0);Z(ie,ge,Kl,"","\\lfloor",!0);Z(ie,ge,Jo,"","\\rfloor",!0);Z(ie,ge,Kl,"","\\lceil",!0);Z(ie,ge,Jo,"","\\rceil",!0);Z(ie,ge,ot,"\\","\\backslash");Z(ie,ge,ot,"","|");Z(ie,ge,ot,"","\\vert");Z(Zt,ge,ot,"|","\\textbar",!0);Z(ie,ge,ot,"","\\|");Z(ie,ge,ot,"","\\Vert");Z(Zt,ge,ot,"","\\textbardbl");Z(Zt,ge,ot,"~","\\textasciitilde");Z(Zt,ge,ot,"\\","\\textbackslash");Z(Zt,ge,ot,"^","\\textasciicircum");Z(ie,ge,We,"","\\uparrow",!0);Z(ie,ge,We,"","\\Uparrow",!0);Z(ie,ge,We,"","\\downarrow",!0);Z(ie,ge,We,"","\\Downarrow",!0);Z(ie,ge,We,"","\\updownarrow",!0);Z(ie,ge,We,"","\\Updownarrow",!0);Z(ie,ge,Ya,"","\\coprod");Z(ie,ge,Ya,"","\\bigvee");Z(ie,ge,Ya,"","\\bigwedge");Z(ie,ge,Ya,"","\\biguplus");Z(ie,ge,Ya,"","\\bigcap");Z(ie,ge,Ya,"","\\bigcup");Z(ie,ge,Ya,"","\\int");Z(ie,ge,Ya,"","\\intop");Z(ie,ge,Ya,"","\\iint");Z(ie,ge,Ya,"","\\iiint");Z(ie,ge,Ya,"","\\prod");Z(ie,ge,Ya,"","\\sum");Z(ie,ge,Ya,"","\\bigotimes");Z(ie,ge,Ya,"","\\bigoplus");Z(ie,ge,Ya,"","\\bigodot");Z(ie,ge,Ya,"","\\oint");Z(ie,ge,Ya,"","\\oiint");Z(ie,ge,Ya,"","\\oiiint");Z(ie,ge,Ya,"","\\bigsqcup");Z(ie,ge,Ya,"","\\smallint");Z(Zt,ge,p1,"","\\textellipsis");Z(ie,ge,p1,"","\\mathellipsis");Z(Zt,ge,p1,"","\\ldots",!0);Z(ie,ge,p1,"","\\ldots",!0);Z(ie,ge,p1,"","\\@cdots",!0);Z(ie,ge,p1,"","\\ddots",!0);Z(ie,ge,ot,"","\\varvdots");Z(Zt,ge,ot,"","\\varvdots");Z(ie,ge,Ys,"","\\acute");Z(ie,ge,Ys,"","\\grave");Z(ie,ge,Ys,"","\\ddot");Z(ie,ge,Ys,"~","\\tilde");Z(ie,ge,Ys,"","\\bar");Z(ie,ge,Ys,"","\\breve");Z(ie,ge,Ys,"","\\check");Z(ie,ge,Ys,"^","\\hat");Z(ie,ge,Ys,"","\\vec");Z(ie,ge,Ys,"","\\dot");Z(ie,ge,Ys,"","\\mathring");Z(ie,ge,tn,"","\\@imath");Z(ie,ge,tn,"","\\@jmath");Z(ie,ge,ot,"","");Z(ie,ge,ot,"","");Z(Zt,ge,ot,"","\\i",!0);Z(Zt,ge,ot,"","\\j",!0);Z(Zt,ge,ot,"","\\ss",!0);Z(Zt,ge,ot,"","\\ae",!0);Z(Zt,ge,ot,"","\\oe",!0);Z(Zt,ge,ot,"","\\o",!0);Z(Zt,ge,ot,"","\\AE",!0);Z(Zt,ge,ot,"","\\OE",!0);Z(Zt,ge,ot,"","\\O",!0);Z(Zt,ge,Ys,"","\\'");Z(Zt,ge,Ys,"","\\`");Z(Zt,ge,Ys,"","\\^");Z(Zt,ge,Ys,"","\\~");Z(Zt,ge,Ys,"","\\=");Z(Zt,ge,Ys,"","\\u");Z(Zt,ge,Ys,"","\\.");Z(Zt,ge,Ys,"","\\c");Z(Zt,ge,Ys,"","\\r");Z(Zt,ge,Ys,"","\\v");Z(Zt,ge,Ys,"",'\\"');Z(Zt,ge,Ys,"","\\H");Z(Zt,ge,Ys,"","\\textcircled");var uU={"--":!0,"---":!0,"``":!0,"''":!0};Z(Zt,ge,ot,"","--",!0);Z(Zt,ge,ot,"","\\textendash");Z(Zt,ge,ot,"","---",!0);Z(Zt,ge,ot,"","\\textemdash");Z(Zt,ge,ot,"","`",!0);Z(Zt,ge,ot,"","\\textquoteleft");Z(Zt,ge,ot,"","'",!0);Z(Zt,ge,ot,"","\\textquoteright");Z(Zt,ge,ot,"","``",!0);Z(Zt,ge,ot,"","\\textquotedblleft");Z(Zt,ge,ot,"","''",!0);Z(Zt,ge,ot,"","\\textquotedblright");Z(ie,ge,ot,"","\\degree",!0);Z(Zt,ge,ot,"","\\degree");Z(Zt,ge,ot,"","\\textdegree",!0);Z(ie,ge,ot,"","\\pounds");Z(ie,ge,ot,"","\\mathsterling",!0);Z(Zt,ge,ot,"","\\pounds");Z(Zt,ge,ot,"","\\textsterling",!0);Z(ie,$e,ot,"","\\maltese");Z(Zt,$e,ot,"","\\maltese");var Tj='0123456789/@."';for(var JS=0;JS<Tj.length;JS++){var Nj=Tj.charAt(JS);Z(ie,ge,ot,Nj,Nj)}var Ej='0123456789!@*()-=+";:?/.,';for(var QS=0;QS<Ej.length;QS++){var Aj=Ej.charAt(QS);Z(Zt,ge,ot,Aj,Aj)}var x4="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var ZS=0;ZS<x4.length;ZS++){var Qb=x4.charAt(ZS);Z(ie,ge,tn,Qb,Qb),Z(Zt,ge,ot,Qb,Qb)}Z(ie,$e,ot,"C","");Z(Zt,$e,ot,"C","");Z(ie,$e,ot,"H","");Z(Zt,$e,ot,"H","");Z(ie,$e,ot,"N","");Z(Zt,$e,ot,"N","");Z(ie,$e,ot,"P","");Z(Zt,$e,ot,"P","");Z(ie,$e,ot,"Q","");Z(Zt,$e,ot,"Q","");Z(ie,$e,ot,"R","");Z(Zt,$e,ot,"R","");Z(ie,$e,ot,"Z","");Z(Zt,$e,ot,"Z","");Z(ie,ge,tn,"h","");Z(Zt,ge,tn,"h","");var ln="";for(var Bo=0;Bo<x4.length;Bo++){var ua=x4.charAt(Bo);ln=String.fromCharCode(55349,56320+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),ln=String.fromCharCode(55349,56372+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),ln=String.fromCharCode(55349,56424+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),ln=String.fromCharCode(55349,56580+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),ln=String.fromCharCode(55349,56684+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),ln=String.fromCharCode(55349,56736+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),ln=String.fromCharCode(55349,56788+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),ln=String.fromCharCode(55349,56840+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),ln=String.fromCharCode(55349,56944+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),Bo<26&&(ln=String.fromCharCode(55349,56632+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln),ln=String.fromCharCode(55349,56476+Bo),Z(ie,ge,tn,ua,ln),Z(Zt,ge,ot,ua,ln))}ln="";Z(ie,ge,tn,"k",ln);Z(Zt,ge,ot,"k",ln);for(var qh=0;qh<10;qh++){var wf=qh.toString();ln=String.fromCharCode(55349,57294+qh),Z(ie,ge,tn,wf,ln),Z(Zt,ge,ot,wf,ln),ln=String.fromCharCode(55349,57314+qh),Z(ie,ge,tn,wf,ln),Z(Zt,ge,ot,wf,ln),ln=String.fromCharCode(55349,57324+qh),Z(ie,ge,tn,wf,ln),Z(Zt,ge,ot,wf,ln),ln=String.fromCharCode(55349,57334+qh),Z(ie,ge,tn,wf,ln),Z(Zt,ge,ot,wf,ln)}var iC="";for(var e5=0;e5<iC.length;e5++){var Zb=iC.charAt(e5);Z(ie,ge,tn,Zb,Zb),Z(Zt,ge,ot,Zb,Zb)}var ew=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],jj=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],dse=function(t,r){var n=t.charCodeAt(0),s=t.charCodeAt(1),a=(n-55296)*1024+(s-56320)+65536,i=r==="math"?0:1;if(119808<=a&&a<120484){var o=Math.floor((a-119808)/26);return[ew[o][2],ew[o][i]]}else if(120782<=a&&a<=120831){var c=Math.floor((a-120782)/10);return[jj[c][2],jj[c][i]]}else{if(a===120485||a===120486)return[ew[0][2],ew[0][i]];if(120486<a&&a<120782)return["",""];throw new sr("Unsupported character: "+t)}},H_=function(t,r,n){return Ps[n][t]&&Ps[n][t].replace&&(t=Ps[n][t].replace),{value:t,metrics:UT(t,r,n)}},su=function(t,r,n,s,a){var i=H_(t,r,n),o=i.metrics;t=i.value;var c;if(o){var u=o.italic;(n==="text"||s&&s.font==="mathit")&&(u=0),c=new Tc(t,o.height,o.depth,u,o.skew,o.width,a)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+n+"'")),c=new Tc(t,0,0,0,0,0,a);if(s){c.maxFontSize=s.sizeMultiplier,s.style.isTight()&&c.classes.push("mtight");var d=s.getColor();d&&(c.style.color=d)}return c},fse=function(t,r,n,s){return s===void 0&&(s=[]),n.font==="boldsymbol"&&H_(t,"Main-Bold",r).metrics?su(t,"Main-Bold",r,n,s.concat(["mathbf"])):t==="\\"||Ps[r][t].font==="main"?su(t,"Main-Regular",r,n,s):su(t,"AMS-Regular",r,n,s.concat(["amsrm"]))},hse=function(t,r,n,s,a){return a!=="textord"&&H_(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},mse=function(t,r,n){var s=t.mode,a=t.text,i=["mord"],o=s==="math"||s==="text"&&r.font,c=o?r.font:r.fontFamily,u="",d="";if(a.charCodeAt(0)===55349&&([u,d]=dse(a,s)),u.length>0)return su(a,u,s,r,i.concat(d));if(c){var f,h;if(c==="boldsymbol"){var g=hse(a,s,r,i,n);f=g.fontName,h=[g.fontClass]}else o?(f=hU[c].fontName,h=[c]):(f=tw(c,r.fontWeight,r.fontShape),h=[c,r.fontWeight,r.fontShape]);if(H_(a,f,s).metrics)return su(a,f,s,r,i.concat(h));if(uU.hasOwnProperty(a)&&f.slice(0,10)==="Typewriter"){for(var p=[],y=0;y<a.length;y++)p.push(su(a[y],f,s,r,i.concat(h)));return fU(p)}}if(n==="mathord")return su(a,"Math-Italic",s,r,i.concat(["mathnormal"]));if(n==="textord"){var v=Ps[s][a]&&Ps[s][a].font;if(v==="ams"){var C=tw("amsrm",r.fontWeight,r.fontShape);return su(a,C,s,r,i.concat("amsrm",r.fontWeight,r.fontShape))}else if(v==="main"||!v){var w=tw("textrm",r.fontWeight,r.fontShape);return su(a,w,s,r,i.concat(r.fontWeight,r.fontShape))}else{var _=tw(v,r.fontWeight,r.fontShape);return su(a,_,s,r,i.concat(_,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},gse=(e,t)=>{if(Vf(e.classes)!==Vf(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in e.style)if(e.style.hasOwnProperty(n)&&e.style[n]!==t.style[n])return!1;for(var s in t.style)if(t.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;return!0},pse=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],n=e[t+1];r instanceof Tc&&n instanceof Tc&&gse(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,e.splice(t+1,1),t--)}return e},WT=function(t){for(var r=0,n=0,s=0,a=0;a<t.children.length;a++){var i=t.children[a];i.height>r&&(r=i.height),i.depth>n&&(n=i.depth),i.maxFontSize>s&&(s=i.maxFontSize)}t.height=r,t.depth=n,t.maxFontSize=s},cl=function(t,r,n,s){var a=new d2(t,r,n,s);return WT(a),a},dU=(e,t,r,n)=>new d2(e,t,r,n),xse=function(t,r,n){var s=cl([t],[],r);return s.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),s.style.borderBottomWidth=vr(s.height),s.maxFontSize=1,s},yse=function(t,r,n,s){var a=new zT(t,r,n,s);return WT(a),a},fU=function(t){var r=new u2(t);return WT(r),r},vse=function(t,r){return t instanceof u2?cl([],[t],r):t},bse=function(t){if(t.positionType==="individualShift"){for(var r=t.children,n=[r[0]],s=-r[0].shift-r[0].elem.depth,a=s,i=1;i<r.length;i++){var o=-r[i].shift-a-r[i].elem.depth,c=o-(r[i-1].elem.height+r[i-1].elem.depth);a=a+o,n.push({type:"kern",size:c}),n.push(r[i])}return{children:n,depth:s}}var u;if(t.positionType==="top"){for(var d=t.positionData,f=0;f<t.children.length;f++){var h=t.children[f];d-=h.type==="kern"?h.size:h.elem.height+h.elem.depth}u=d}else if(t.positionType==="bottom")u=-t.positionData;else{var g=t.children[0];if(g.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")u=-g.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")u=-g.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:u}},wse=function(t,r){for(var{children:n,depth:s}=bse(t),a=0,i=0;i<n.length;i++){var o=n[i];if(o.type==="elem"){var c=o.elem;a=Math.max(a,c.maxFontSize,c.height)}}a+=2;var u=cl(["pstrut"],[]);u.style.height=vr(a);for(var d=[],f=s,h=s,g=s,p=0;p<n.length;p++){var y=n[p];if(y.type==="kern")g+=y.size;else{var v=y.elem,C=y.wrapperClasses||[],w=y.wrapperStyle||{},_=cl(C,[u,v],void 0,w);_.style.top=vr(-a-g-v.depth),y.marginLeft&&(_.style.marginLeft=y.marginLeft),y.marginRight&&(_.style.marginRight=y.marginRight),d.push(_),g+=v.height+v.depth}f=Math.min(f,g),h=Math.max(h,g)}var T=cl(["vlist"],d);T.style.height=vr(h);var E;if(f<0){var A=cl([],[]),F=cl(["vlist"],[A]);F.style.height=vr(-f);var j=cl(["vlist-s"],[new Tc("")]);E=[cl(["vlist-r"],[T,j]),cl(["vlist-r"],[F])]}else E=[cl(["vlist-r"],[T])];var P=cl(["vlist-t"],E);return E.length===2&&P.classes.push("vlist-t2"),P.height=h,P.depth=-f,P},_se=(e,t)=>{var r=cl(["mspace"],[],t),n=ta(e,t);return r.style.marginRight=vr(n),r},tw=function(t,r,n){var s="";switch(t){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=t}var a;return r==="textbf"&&n==="textit"?a="BoldItalic":r==="textbf"?a="Bold":r==="textit"?a="Italic":a="Regular",s+"-"+a},hU={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},mU={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Sse=function(t,r){var[n,s,a]=mU[t],i=new qf(n),o=new h0([i],{width:vr(s),height:vr(a),style:"width:"+vr(s),viewBox:"0 0 "+1e3*s+" "+1e3*a,preserveAspectRatio:"xMinYMin"}),c=dU(["overlay"],[o],r);return c.height=a,c.style.height=vr(a),c.style.width=vr(s),c},_t={fontMap:hU,makeSymbol:su,mathsym:fse,makeSpan:cl,makeSvgSpan:dU,makeLineSpan:xse,makeAnchor:yse,makeFragment:fU,wrapFragment:vse,makeVList:wse,makeOrd:mse,makeGlue:_se,staticSvg:Sse,svgData:mU,tryCombineChars:pse},Zs={number:3,unit:"mu"},Kh={number:4,unit:"mu"},Bd={number:5,unit:"mu"},kse={mord:{mop:Zs,mbin:Kh,mrel:Bd,minner:Zs},mop:{mord:Zs,mop:Zs,mrel:Bd,minner:Zs},mbin:{mord:Kh,mop:Kh,mopen:Kh,minner:Kh},mrel:{mord:Bd,mop:Bd,mopen:Bd,minner:Bd},mopen:{},mclose:{mop:Zs,mbin:Kh,mrel:Bd,minner:Zs},mpunct:{mord:Zs,mop:Zs,mrel:Bd,mopen:Zs,mclose:Zs,mpunct:Zs,minner:Zs},minner:{mord:Zs,mop:Zs,mbin:Kh,mrel:Bd,mopen:Zs,mpunct:Zs,minner:Zs}},Cse={mord:{mop:Zs},mop:{mord:Zs,mop:Zs},mbin:{},mrel:{},mopen:{},mclose:{mop:Zs},mpunct:{},minner:{mop:Zs}},gU={},y4={},v4={};function Pr(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:s},c=0;c<r.length;++c)gU[r[c]]=o;t&&(a&&(y4[t]=a),i&&(v4[t]=i))}function Qm(e){var{type:t,htmlBuilder:r,mathmlBuilder:n}=e;Pr({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var b4=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},Pa=function(t){return t.type==="ordgroup"?t.body:[t]},m0=_t.makeSpan,Tse=["leftmost","mbin","mopen","mrel","mop","mpunct"],Nse=["rightmost","mrel","mclose","mpunct"],Ese={display:rn.DISPLAY,text:rn.TEXT,script:rn.SCRIPT,scriptscript:rn.SCRIPTSCRIPT},Ase={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},ci=function(t,r,n,s){s===void 0&&(s=[null,null]);for(var a=[],i=0;i<t.length;i++){var o=Gn(t[i],r);if(o instanceof u2){var c=o.children;a.push(...c)}else a.push(o)}if(_t.tryCombineChars(a),!n)return a;var u=r;if(t.length===1){var d=t[0];d.type==="sizing"?u=r.havingSize(d.size):d.type==="styling"&&(u=r.havingStyle(Ese[d.style]))}var f=m0([s[0]||"leftmost"],[],r),h=m0([s[1]||"rightmost"],[],r),g=n==="root";return Pj(a,(p,y)=>{var v=y.classes[0],C=p.classes[0];v==="mbin"&&Nse.includes(C)?y.classes[0]="mord":C==="mbin"&&Tse.includes(v)&&(p.classes[0]="mord")},{node:f},h,g),Pj(a,(p,y)=>{var v=oC(y),C=oC(p),w=v&&C?p.hasClass("mtight")?Cse[v][C]:kse[v][C]:null;if(w)return _t.makeGlue(w,u)},{node:f},h,g),a},Pj=function e(t,r,n,s,a){s&&t.push(s);for(var i=0;i<t.length;i++){var o=t[i],c=pU(o);if(c){e(c.children,r,n,null,a);continue}var u=!o.hasClass("mspace");if(u){var d=r(o,n.node);d&&(n.insertAfter?n.insertAfter(d):(t.unshift(d),i++))}u?n.node=o:a&&o.hasClass("newline")&&(n.node=m0(["leftmost"])),n.insertAfter=(f=>h=>{t.splice(f+1,0,h),i++})(i)}s&&t.pop()},pU=function(t){return t instanceof u2||t instanceof zT||t instanceof d2&&t.hasClass("enclosing")?t:null},jse=function e(t,r){var n=pU(t);if(n){var s=n.children;if(s.length){if(r==="right")return e(s[s.length-1],"right");if(r==="left")return e(s[0],"left")}}return t},oC=function(t,r){return t?(r&&(t=jse(t,r)),Ase[t.classes[0]]||null):null},kv=function(t,r){var n=["nulldelimiter"].concat(t.baseSizingClasses());return m0(r.concat(n))},Gn=function(t,r,n){if(!t)return m0();if(y4[t.type]){var s=y4[t.type](t,r);if(n&&r.size!==n.size){s=m0(r.sizingClasses(n),[s],r);var a=r.sizeMultiplier/n.sizeMultiplier;s.height*=a,s.depth*=a}return s}else throw new sr("Got group of unknown type: '"+t.type+"'")};function rw(e,t){var r=m0(["base"],e,t),n=m0(["strut"]);return n.style.height=vr(r.height+r.depth),r.depth&&(n.style.verticalAlign=vr(-r.depth)),r.children.unshift(n),r}function lC(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var n=ci(e,t,"root"),s;n.length===2&&n[1].hasClass("tag")&&(s=n.pop());for(var a=[],i=[],o=0;o<n.length;o++)if(i.push(n[o]),n[o].hasClass("mbin")||n[o].hasClass("mrel")||n[o].hasClass("allowbreak")){for(var c=!1;o<n.length-1&&n[o+1].hasClass("mspace")&&!n[o+1].hasClass("newline");)o++,i.push(n[o]),n[o].hasClass("nobreak")&&(c=!0);c||(a.push(rw(i,t)),i=[])}else n[o].hasClass("newline")&&(i.pop(),i.length>0&&(a.push(rw(i,t)),i=[]),a.push(n[o]));i.length>0&&a.push(rw(i,t));var u;r?(u=rw(ci(r,t,!0)),u.classes=["tag"],a.push(u)):s&&a.push(s);var d=m0(["katex-html"],a);if(d.setAttribute("aria-hidden","true"),u){var f=u.children[0];f.style.height=vr(d.height+d.depth),d.depth&&(f.style.verticalAlign=vr(-d.depth))}return d}function xU(e){return new u2(e)}class Ll{constructor(t,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=Vf(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Yu&&this.children[n+1]instanceof Yu){for(var s=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Yu;)s+=this.children[++n].toText();t.appendChild(new Yu(s).toNode())}else t.appendChild(this.children[n].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=Xn.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+Xn.escape(Vf(this.classes))+'"'),t+=">";for(var n=0;n<this.children.length;n++)t+=this.children[n].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class Yu{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Xn.escape(this.toText())}toText(){return this.text}}class Pse{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",vr(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+vr(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var nr={MathNode:Ll,TextNode:Yu,SpaceNode:Pse,newDocumentFragment:xU},Nc=function(t,r,n){return Ps[r][t]&&Ps[r][t].replace&&t.charCodeAt(0)!==55349&&!(uU.hasOwnProperty(t)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(t=Ps[r][t].replace),new nr.TextNode(t)},HT=function(t){return t.length===1?t[0]:new nr.MathNode("mrow",t)},GT=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var s=t.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var a=t.text;if(["\\imath","\\jmath"].includes(a))return null;Ps[s][a]&&Ps[s][a].replace&&(a=Ps[s][a].replace);var i=_t.fontMap[n].fontName;return UT(a,i,s)?_t.fontMap[n].variant:null};function t5(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof Yu&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof Yu&&r.text===","}else return!1}var vl=function(t,r,n){if(t.length===1){var s=Cs(t[0],r);return n&&s instanceof Ll&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var a=[],i,o=0;o<t.length;o++){var c=Cs(t[o],r);if(c instanceof Ll&&i instanceof Ll){if(c.type==="mtext"&&i.type==="mtext"&&c.getAttribute("mathvariant")===i.getAttribute("mathvariant")){i.children.push(...c.children);continue}else if(c.type==="mn"&&i.type==="mn"){i.children.push(...c.children);continue}else if(t5(c)&&i.type==="mn"){i.children.push(...c.children);continue}else if(c.type==="mn"&&t5(i))c.children=[...i.children,...c.children],a.pop();else if((c.type==="msup"||c.type==="msub")&&c.children.length>=1&&(i.type==="mn"||t5(i))){var u=c.children[0];u instanceof Ll&&u.type==="mn"&&(u.children=[...i.children,...u.children],a.pop())}else if(i.type==="mi"&&i.children.length===1){var d=i.children[0];if(d instanceof Yu&&d.text===""&&(c.type==="mo"||c.type==="mi"||c.type==="mn")){var f=c.children[0];f instanceof Yu&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),a.pop())}}}a.push(c),i=c}return a},Kf=function(t,r,n){return HT(vl(t,r,n))},Cs=function(t,r){if(!t)return new nr.MathNode("mrow");if(v4[t.type]){var n=v4[t.type](t,r);return n}else throw new sr("Got group of unknown type: '"+t.type+"'")};function Fj(e,t,r,n,s){var a=vl(e,r),i;a.length===1&&a[0]instanceof Ll&&["mrow","mtable"].includes(a[0].type)?i=a[0]:i=new nr.MathNode("mrow",a);var o=new nr.MathNode("annotation",[new nr.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var c=new nr.MathNode("semantics",[i,o]),u=new nr.MathNode("math",[c]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&u.setAttribute("display","block");var d=s?"katex":"katex-mathml";return _t.makeSpan([d],[u])}var yU=function(t){return new Vd({style:t.displayMode?rn.DISPLAY:rn.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},vU=function(t,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),t=_t.makeSpan(n,[t])}return t},Fse=function(t,r,n){var s=yU(n),a;if(n.output==="mathml")return Fj(t,r,s,n.displayMode,!0);if(n.output==="html"){var i=lC(t,s);a=_t.makeSpan(["katex"],[i])}else{var o=Fj(t,r,s,n.displayMode,!1),c=lC(t,s);a=_t.makeSpan(["katex"],[o,c])}return vU(a,n)},Mse=function(t,r,n){var s=yU(n),a=lC(t,s),i=_t.makeSpan(["katex"],[a]);return vU(i,n)},Ose={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Dse=function(t){var r=new nr.MathNode("mo",[new nr.TextNode(Ose[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Rse={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},Ise=function(t){return t.type==="ordgroup"?t.body.length:1},Lse=function(t,r){function n(){var o=4e5,c=t.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(c)){var u=t,d=Ise(u.base),f,h,g;if(d>5)c==="widehat"||c==="widecheck"?(f=420,o=2364,g=.42,h=c+"4"):(f=312,o=2340,g=.34,h="tilde4");else{var p=[1,1,2,2,3,3][d];c==="widehat"||c==="widecheck"?(o=[0,1062,2364,2364,2364][p],f=[0,239,300,360,420][p],g=[0,.24,.3,.3,.36,.42][p],h=c+p):(o=[0,600,1033,2339,2340][p],f=[0,260,286,306,312][p],g=[0,.26,.286,.3,.306,.34][p],h="tilde"+p)}var y=new qf(h),v=new h0([y],{width:"100%",height:vr(g),viewBox:"0 0 "+o+" "+f,preserveAspectRatio:"none"});return{span:_t.makeSvgSpan([],[v],r),minWidth:0,height:g}}else{var C=[],w=Rse[c],[_,T,E]=w,A=E/1e3,F=_.length,j,P;if(F===1){var D=w[3];j=["hide-tail"],P=[D]}else if(F===2)j=["halfarrow-left","halfarrow-right"],P=["xMinYMin","xMaxYMin"];else if(F===3)j=["brace-left","brace-center","brace-right"],P=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+F+" children.");for(var B=0;B<F;B++){var V=new qf(_[B]),Y=new h0([V],{width:"400em",height:vr(A),viewBox:"0 0 "+o+" "+E,preserveAspectRatio:P[B]+" slice"}),re=_t.makeSvgSpan([j[B]],[Y],r);if(F===1)return{span:re,minWidth:T,height:A};re.style.height=vr(A),C.push(re)}return{span:_t.makeSpan(["stretchy"],C,r),minWidth:T,height:A}}}var{span:s,minWidth:a,height:i}=n();return s.height=i,s.style.height=vr(i),a>0&&(s.style.minWidth=vr(a)),s},Bse=function(t,r,n,s,a){var i,o=t.height+t.depth+n+s;if(/fbox|color|angl/.test(r)){if(i=_t.makeSpan(["stretchy",r],[],a),r==="fbox"){var c=a.color&&a.getColor();c&&(i.style.borderColor=c)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new aC({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new aC({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var d=new h0(u,{width:"100%",height:vr(o)});i=_t.makeSvgSpan([],[d],a)}return i.height=o,i.style.height=vr(o),i},g0={encloseSpan:Bse,mathMLnode:Dse,svgSpan:Lse};function En(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function VT(e){var t=G_(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function G_(e){return e&&(e.type==="atom"||use.hasOwnProperty(e.type))?e:null}var qT=(e,t)=>{var r,n,s;e&&e.type==="supsub"?(n=En(e.base,"accent"),r=n.base,e.base=r,s=lse(Gn(e,t)),e.base=n):(n=En(e,"accent"),r=n.base);var a=Gn(r,t.havingCrampedStyle()),i=n.isShifty&&Xn.isCharacterBox(r),o=0;if(i){var c=Xn.getBaseElem(r),u=Gn(c,t.havingCrampedStyle());o=Cj(u).skew}var d=n.label==="\\c",f=d?a.height+a.depth:Math.min(a.height,t.fontMetrics().xHeight),h;if(n.isStretchy)h=g0.svgSpan(n,t),h=_t.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:o>0?{width:"calc(100% - "+vr(2*o)+")",marginLeft:vr(2*o)}:void 0}]},t);else{var g,p;n.label==="\\vec"?(g=_t.staticSvg("vec",t),p=_t.svgData.vec[1]):(g=_t.makeOrd({mode:n.mode,text:n.label},t,"textord"),g=Cj(g),g.italic=0,p=g.width,d&&(f+=g.depth)),h=_t.makeSpan(["accent-body"],[g]);var y=n.label==="\\textcircled";y&&(h.classes.push("accent-full"),f=a.height);var v=o;y||(v-=p/2),h.style.left=vr(v),n.label==="\\textcircled"&&(h.style.top=".2em"),h=_t.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:-f},{type:"elem",elem:h}]},t)}var C=_t.makeSpan(["mord","accent"],[h],t);return s?(s.children[0]=C,s.height=Math.max(C.height,s.height),s.classes[0]="mord",s):C},bU=(e,t)=>{var r=e.isStretchy?g0.mathMLnode(e.label):new nr.MathNode("mo",[Nc(e.label,e.mode)]),n=new nr.MathNode("mover",[Cs(e.base,t),r]);return n.setAttribute("accent","true"),n},$se=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));Pr({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=b4(t[0]),n=!$se.test(e.funcName),s=!n||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,isShifty:s,base:r}},htmlBuilder:qT,mathmlBuilder:bU});Pr({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],n=e.parser.mode;return n==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:qT,mathmlBuilder:bU});Pr({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"accentUnder",mode:r.mode,label:n,base:s}},htmlBuilder:(e,t)=>{var r=Gn(e.base,t),n=g0.svgSpan(e,t),s=e.label==="\\utilde"?.12:0,a=_t.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:r}]},t);return _t.makeSpan(["mord","accentunder"],[a],t)},mathmlBuilder:(e,t)=>{var r=g0.mathMLnode(e.label),n=new nr.MathNode("munder",[Cs(e.base,t),r]);return n.setAttribute("accentunder","true"),n}});var nw=e=>{var t=new nr.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Pr({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n,funcName:s}=e;return{type:"xArrow",mode:n.mode,label:s,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,n=t.havingStyle(r.sup()),s=_t.wrapFragment(Gn(e.body,n,t),t),a=e.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(a+"-arrow-pad");var i;e.below&&(n=t.havingStyle(r.sub()),i=_t.wrapFragment(Gn(e.below,n,t),t),i.classes.push(a+"-arrow-pad"));var o=g0.svgSpan(e,t),c=-t.fontMetrics().axisHeight+.5*o.height,u=-t.fontMetrics().axisHeight-.5*o.height-.111;(s.depth>.25||e.label==="\\xleftequilibrium")&&(u-=s.depth);var d;if(i){var f=-t.fontMetrics().axisHeight+i.height+.5*o.height+.111;d=_t.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:c},{type:"elem",elem:i,shift:f}]},t)}else d=_t.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:o,shift:c}]},t);return d.children[0].children[0].children[1].classes.push("svg-align"),_t.makeSpan(["mrel","x-arrow"],[d],t)},mathmlBuilder(e,t){var r=g0.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(e.body){var s=nw(Cs(e.body,t));if(e.below){var a=nw(Cs(e.below,t));n=new nr.MathNode("munderover",[r,a,s])}else n=new nr.MathNode("mover",[r,s])}else if(e.below){var i=nw(Cs(e.below,t));n=new nr.MathNode("munder",[r,i])}else n=nw(),n=new nr.MathNode("mover",[r,n]);return n}});var Use=_t.makeSpan;function wU(e,t){var r=ci(e.body,t,!0);return Use([e.mclass],r,t)}function _U(e,t){var r,n=vl(e.body,t);return e.mclass==="minner"?r=new nr.MathNode("mpadded",n):e.mclass==="mord"?e.isCharacterBox?(r=n[0],r.type="mi"):r=new nr.MathNode("mi",n):(e.isCharacterBox?(r=n[0],r.type="mo"):r=new nr.MathNode("mo",n),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Pr({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Pa(s),isCharacterBox:Xn.isCharacterBox(s)}},htmlBuilder:wU,mathmlBuilder:_U});var V_=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Pr({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:V_(t[0]),body:Pa(t[1]),isCharacterBox:Xn.isCharacterBox(t[1])}}});Pr({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:n}=e,s=t[1],a=t[0],i;n!=="\\stackrel"?i=V_(s):i="mrel";var o={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Pa(s)},c={type:"supsub",mode:a.mode,base:o,sup:n==="\\underset"?null:a,sub:n==="\\underset"?a:null};return{type:"mclass",mode:r.mode,mclass:i,body:[c],isCharacterBox:Xn.isCharacterBox(c)}},htmlBuilder:wU,mathmlBuilder:_U});Pr({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:V_(t[0]),body:Pa(t[0])}},htmlBuilder(e,t){var r=ci(e.body,t,!0),n=_t.makeSpan([e.mclass],r,t);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(e,t){var r=vl(e.body,t),n=new nr.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var zse={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Mj=()=>({type:"styling",body:[],mode:"math",style:"display"}),Oj=e=>e.type==="textord"&&e.text==="@",Wse=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function Hse(e,t,r){var n=zse[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var s=r.callFunction("\\\\cdleft",[t[0]],[]),a={type:"atom",text:n,mode:"math",family:"rel"},i=r.callFunction("\\Big",[a],[]),o=r.callFunction("\\\\cdright",[t[1]],[]),c={type:"ordgroup",mode:"math",body:[s,i,o]};return r.callFunction("\\\\cdparent",[c],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Gse(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new sr("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var n=[],s=[n],a=0;a<t.length;a++){for(var i=t[a],o=Mj(),c=0;c<i.length;c++)if(!Oj(i[c]))o.body.push(i[c]);else{n.push(o),c+=1;var u=VT(i[c]).text,d=new Array(2);if(d[0]={type:"ordgroup",mode:"math",body:[]},d[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var f=0;f<2;f++){for(var h=!0,g=c+1;g<i.length;g++){if(Wse(i[g],u)){h=!1,c=g;break}if(Oj(i[g]))throw new sr("Missing a "+u+" character to complete a CD arrow.",i[g]);d[f].body.push(i[g])}if(h)throw new sr("Missing a "+u+" character to complete a CD arrow.",i[c])}else throw new sr('Expected one of "<>AV=|." after @',i[c]);var p=Hse(u,d,e),y={type:"styling",body:[p],mode:"math",style:"display"};n.push(y),o=Mj()}a%2===0?n.push(o):n.shift(),n=[],s.push(n)}e.gullet.endGroup(),e.gullet.endGroup();var v=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:v,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}Pr({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),n=_t.wrapFragment(Gn(e.label,r,t),t);return n.classes.push("cd-label-"+e.side),n.style.bottom=vr(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(e,t){var r=new nr.MathNode("mrow",[Cs(e.label,t)]);return r=new nr.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new nr.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Pr({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=_t.wrapFragment(Gn(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new nr.MathNode("mrow",[Cs(e.fragment,t)])}});Pr({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,n=En(t[0],"ordgroup"),s=n.body,a="",i=0;i<s.length;i++){var o=En(s[i],"textord");a+=o.text}var c=parseInt(a),u;if(isNaN(c))throw new sr("\\@char has non-numeric argument "+a);if(c<0||c>=1114111)throw new sr("\\@char with invalid code point "+a);return c<=65535?u=String.fromCharCode(c):(c-=65536,u=String.fromCharCode((c>>10)+55296,(c&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var SU=(e,t)=>{var r=ci(e.body,t.withColor(e.color),!1);return _t.makeFragment(r)},kU=(e,t)=>{var r=vl(e.body,t.withColor(e.color)),n=new nr.MathNode("mstyle",r);return n.setAttribute("mathcolor",e.color),n};Pr({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,n=En(t[0],"color-token").color,s=t[1];return{type:"color",mode:r.mode,color:n,body:Pa(s)}},htmlBuilder:SU,mathmlBuilder:kU});Pr({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:n}=e,s=En(t[0],"color-token").color;r.gullet.macros.set("\\current@color",s);var a=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:s,body:a}},htmlBuilder:SU,mathmlBuilder:kU});Pr({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:n}=e,s=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,a=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:a,size:s&&En(s,"size").value}},htmlBuilder(e,t){var r=_t.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=vr(ta(e.size,t)))),r},mathmlBuilder(e,t){var r=new nr.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",vr(ta(e.size,t)))),r}});var cC={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},CU=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new sr("Expected a control sequence",e);return t},Vse=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},TU=(e,t,r,n)=>{var s=e.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,s,n)};Pr({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var n=t.fetch();if(cC[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=cC[n.text]),En(t.parseFunction(),"internal");throw new sr("Invalid token after macro prefix",n)}});Pr({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=t.gullet.popToken(),s=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new sr("Expected a control sequence",n);for(var a=0,i,o=[[]];t.gullet.future().text!=="{";)if(n=t.gullet.popToken(),n.text==="#"){if(t.gullet.future().text==="{"){i=t.gullet.future(),o[a].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new sr('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==a+1)throw new sr('Argument number "'+n.text+'" out of order');a++,o.push([])}else{if(n.text==="EOF")throw new sr("Expected a macro definition");o[a].push(n.text)}var{tokens:c}=t.gullet.consumeArg();return i&&c.unshift(i),(r==="\\edef"||r==="\\xdef")&&(c=t.gullet.expandTokens(c),c.reverse()),t.gullet.macros.set(s,{tokens:c,numArgs:a,delimiters:o},r===cC[r]),{type:"internal",mode:t.mode}}});Pr({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=CU(t.gullet.popToken());t.gullet.consumeSpaces();var s=Vse(t);return TU(t,n,s,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});Pr({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,n=CU(t.gullet.popToken()),s=t.gullet.popToken(),a=t.gullet.popToken();return TU(t,n,a,r==="\\\\globalfuture"),t.gullet.pushToken(a),t.gullet.pushToken(s),{type:"internal",mode:t.mode}}});var Ly=function(t,r,n){var s=Ps.math[t]&&Ps.math[t].replace,a=UT(s||t,r,n);if(!a)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return a},KT=function(t,r,n,s){var a=n.havingBaseStyle(r),i=_t.makeSpan(s.concat(a.sizingClasses(n)),[t],n),o=a.sizeMultiplier/n.sizeMultiplier;return i.height*=o,i.depth*=o,i.maxFontSize=a.sizeMultiplier,i},NU=function(t,r,n){var s=r.havingBaseStyle(n),a=(1-r.sizeMultiplier/s.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=vr(a),t.height-=a,t.depth+=a},qse=function(t,r,n,s,a,i){var o=_t.makeSymbol(t,"Main-Regular",a,s),c=KT(o,r,s,i);return n&&NU(c,s,r),c},Kse=function(t,r,n,s){return _t.makeSymbol(t,"Size"+r+"-Regular",n,s)},EU=function(t,r,n,s,a,i){var o=Kse(t,r,a,s),c=KT(_t.makeSpan(["delimsizing","size"+r],[o],s),rn.TEXT,s,i);return n&&NU(c,s,rn.TEXT),c},r5=function(t,r,n){var s;r==="Size1-Regular"?s="delim-size1":s="delim-size4";var a=_t.makeSpan(["delimsizinginner",s],[_t.makeSpan([],[_t.makeSymbol(t,r,n)])]);return{type:"elem",elem:a}},n5=function(t,r,n){var s=Ku["Size4-Regular"][t.charCodeAt(0)]?Ku["Size4-Regular"][t.charCodeAt(0)][4]:Ku["Size1-Regular"][t.charCodeAt(0)][4],a=new qf("inner",Zne(t,Math.round(1e3*r))),i=new h0([a],{width:vr(s),height:vr(r),style:"width:"+vr(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),o=_t.makeSvgSpan([],[i],n);return o.height=r,o.style.height=vr(r),o.style.width=vr(s),{type:"elem",elem:o}},uC=.008,sw={type:"kern",size:-1*uC},Yse=["|","\\lvert","\\rvert","\\vert"],Xse=["\\|","\\lVert","\\rVert","\\Vert"],AU=function(t,r,n,s,a,i){var o,c,u,d,f="",h=0;o=u=d=t,c=null;var g="Size1-Regular";t==="\\uparrow"?u=d="":t==="\\Uparrow"?u=d="":t==="\\downarrow"?o=u="":t==="\\Downarrow"?o=u="":t==="\\updownarrow"?(o="\\uparrow",u="",d="\\downarrow"):t==="\\Updownarrow"?(o="\\Uparrow",u="",d="\\Downarrow"):Yse.includes(t)?(u="",f="vert",h=333):Xse.includes(t)?(u="",f="doublevert",h=556):t==="["||t==="\\lbrack"?(o="",u="",d="",g="Size4-Regular",f="lbrack",h=667):t==="]"||t==="\\rbrack"?(o="",u="",d="",g="Size4-Regular",f="rbrack",h=667):t==="\\lfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="lfloor",h=667):t==="\\lceil"||t===""?(o="",u=d="",g="Size4-Regular",f="lceil",h=667):t==="\\rfloor"||t===""?(u=o="",d="",g="Size4-Regular",f="rfloor",h=667):t==="\\rceil"||t===""?(o="",u=d="",g="Size4-Regular",f="rceil",h=667):t==="("||t==="\\lparen"?(o="",u="",d="",g="Size4-Regular",f="lparen",h=875):t===")"||t==="\\rparen"?(o="",u="",d="",g="Size4-Regular",f="rparen",h=875):t==="\\{"||t==="\\lbrace"?(o="",c="",d="",u="",g="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(o="",c="",d="",u="",g="Size4-Regular"):t==="\\lgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\rgroup"||t===""?(o="",d="",u="",g="Size4-Regular"):t==="\\lmoustache"||t===""?(o="",d="",u="",g="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(o="",d="",u="",g="Size4-Regular");var p=Ly(o,g,a),y=p.height+p.depth,v=Ly(u,g,a),C=v.height+v.depth,w=Ly(d,g,a),_=w.height+w.depth,T=0,E=1;if(c!==null){var A=Ly(c,g,a);T=A.height+A.depth,E=2}var F=y+_+T,j=Math.max(0,Math.ceil((r-F)/(E*C))),P=F+j*E*C,D=s.fontMetrics().axisHeight;n&&(D*=s.sizeMultiplier);var B=P/2-D,V=[];if(f.length>0){var Y=P-y-_,re=Math.round(P*1e3),te=ese(f,Math.round(Y*1e3)),ee=new qf(f,te),L=(h/1e3).toFixed(3)+"em",Q=(re/1e3).toFixed(3)+"em",U=new h0([ee],{width:L,height:Q,viewBox:"0 0 "+h+" "+re}),G=_t.makeSvgSpan([],[U],s);G.height=re/1e3,G.style.width=L,G.style.height=Q,V.push({type:"elem",elem:G})}else{if(V.push(r5(d,g,a)),V.push(sw),c===null){var W=P-y-_+2*uC;V.push(n5(u,W,s))}else{var M=(P-y-_-T)/2+2*uC;V.push(n5(u,M,s)),V.push(sw),V.push(r5(c,g,a)),V.push(sw),V.push(n5(u,M,s))}V.push(sw),V.push(r5(o,g,a))}var I=s.havingBaseStyle(rn.TEXT),z=_t.makeVList({positionType:"bottom",positionData:B,children:V},I);return KT(_t.makeSpan(["delimsizing","mult"],[z],I),rn.TEXT,s,i)},s5=80,a5=.08,i5=function(t,r,n,s,a){var i=Qne(t,s,n),o=new qf(t,i),c=new h0([o],{width:"400em",height:vr(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return _t.makeSvgSpan(["hide-tail"],[c],a)},Jse=function(t,r){var n=r.havingBaseSizing(),s=MU("\\surd",t*n.sizeMultiplier,FU,n),a=n.sizeMultiplier,i=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),o,c=0,u=0,d=0,f;return s.type==="small"?(d=1e3+1e3*i+s5,t<1?a=1:t<1.4&&(a=.7),c=(1+i+a5)/a,u=(1+i)/a,o=i5("sqrtMain",c,d,i,r),o.style.minWidth="0.853em",f=.833/a):s.type==="large"?(d=(1e3+s5)*Qy[s.size],u=(Qy[s.size]+i)/a,c=(Qy[s.size]+i+a5)/a,o=i5("sqrtSize"+s.size,c,d,i,r),o.style.minWidth="1.02em",f=1/a):(c=t+i+a5,u=t+i,d=Math.floor(1e3*t+i)+s5,o=i5("sqrtTall",c,d,i,r),o.style.minWidth="0.742em",f=1.056),o.height=u,o.style.height=vr(c),{span:o,advanceWidth:f,ruleWidth:(r.fontMetrics().sqrtRuleThickness+i)*a}},jU=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Qse=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],PU=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Qy=[0,1.2,1.8,2.4,3],Zse=function(t,r,n,s,a){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),jU.includes(t)||PU.includes(t))return EU(t,r,!1,n,s,a);if(Qse.includes(t))return AU(t,Qy[r],!1,n,s,a);throw new sr("Illegal delimiter: '"+t+"'")},eae=[{type:"small",style:rn.SCRIPTSCRIPT},{type:"small",style:rn.SCRIPT},{type:"small",style:rn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],tae=[{type:"small",style:rn.SCRIPTSCRIPT},{type:"small",style:rn.SCRIPT},{type:"small",style:rn.TEXT},{type:"stack"}],FU=[{type:"small",style:rn.SCRIPTSCRIPT},{type:"small",style:rn.SCRIPT},{type:"small",style:rn.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],rae=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},MU=function(t,r,n,s){for(var a=Math.min(2,3-s.style.size),i=a;i<n.length&&n[i].type!=="stack";i++){var o=Ly(t,rae(n[i]),"math"),c=o.height+o.depth;if(n[i].type==="small"){var u=s.havingBaseStyle(n[i].style);c*=u.sizeMultiplier}if(c>r)return n[i]}return n[n.length-1]},OU=function(t,r,n,s,a,i){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var o;PU.includes(t)?o=eae:jU.includes(t)?o=FU:o=tae;var c=MU(t,r,o,s);return c.type==="small"?qse(t,c.style,n,s,a,i):c.type==="large"?EU(t,c.size,n,s,a,i):AU(t,r,n,s,a,i)},nae=function(t,r,n,s,a,i){var o=s.fontMetrics().axisHeight*s.sizeMultiplier,c=901,u=5/s.fontMetrics().ptPerEm,d=Math.max(r-o,n+o),f=Math.max(d/500*c,2*d-u);return OU(t,f,!0,s,a,i)},s0={sqrtImage:Jse,sizedDelim:Zse,sizeToMaxHeight:Qy,customSizedDelim:OU,leftRightDelim:nae},Dj={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},sae=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function q_(e,t){var r=G_(e);if(r&&sae.includes(r.text))return r;throw r?new sr("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new sr("Invalid delimiter type '"+e.type+"'",e)}Pr({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=q_(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Dj[e.funcName].size,mclass:Dj[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?_t.makeSpan([e.mclass]):s0.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(Nc(e.delim,e.mode));var r=new nr.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=vr(s0.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function Rj(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Pr({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new sr("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:q_(t[0],e).text,color:r}}});Pr({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=q_(t[0],e),n=e.parser;++n.leftrightDepth;var s=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var a=En(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:r.text,right:a.delim,rightColor:a.color}},htmlBuilder:(e,t)=>{Rj(e);for(var r=ci(e.body,t,!0,["mopen","mclose"]),n=0,s=0,a=!1,i=0;i<r.length;i++)r[i].isMiddle?a=!0:(n=Math.max(r[i].height,n),s=Math.max(r[i].depth,s));n*=t.sizeMultiplier,s*=t.sizeMultiplier;var o;if(e.left==="."?o=kv(t,["mopen"]):o=s0.leftRightDelim(e.left,n,s,t,e.mode,["mopen"]),r.unshift(o),a)for(var c=1;c<r.length;c++){var u=r[c],d=u.isMiddle;d&&(r[c]=s0.leftRightDelim(d.delim,n,s,d.options,e.mode,[]))}var f;if(e.right===".")f=kv(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;f=s0.leftRightDelim(e.right,n,s,h,e.mode,["mclose"])}return r.push(f),_t.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{Rj(e);var r=vl(e.body,t);if(e.left!=="."){var n=new nr.MathNode("mo",[Nc(e.left,e.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(e.right!=="."){var s=new nr.MathNode("mo",[Nc(e.right,e.mode)]);s.setAttribute("fence","true"),e.rightColor&&s.setAttribute("mathcolor",e.rightColor),r.push(s)}return HT(r)}});Pr({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=q_(t[0],e);if(!e.parser.leftrightDepth)throw new sr("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=kv(t,[]);else{r=s0.sizedDelim(e.delim,1,t,e.mode,[]);var n={delim:e.delim,options:t};r.isMiddle=n}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?Nc("|","text"):Nc(e.delim,e.mode),n=new nr.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var YT=(e,t)=>{var r=_t.wrapFragment(Gn(e.body,t),t),n=e.label.slice(1),s=t.sizeMultiplier,a,i=0,o=Xn.isCharacterBox(e.body);if(n==="sout")a=_t.makeSpan(["stretchy","sout"]),a.height=t.fontMetrics().defaultRuleThickness/s,i=-.5*t.fontMetrics().xHeight;else if(n==="phase"){var c=ta({number:.6,unit:"pt"},t),u=ta({number:.35,unit:"ex"},t),d=t.havingBaseSizing();s=s/d.sizeMultiplier;var f=r.height+r.depth+c+u;r.style.paddingLeft=vr(f/2+c);var h=Math.floor(1e3*f*s),g=Xne(h),p=new h0([new qf("phase",g)],{width:"400em",height:vr(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});a=_t.makeSvgSpan(["hide-tail"],[p],t),a.style.height=vr(f),i=r.depth+c+u}else{/cancel/.test(n)?o||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var y=0,v=0,C=0;/box/.test(n)?(C=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),y=t.fontMetrics().fboxsep+(n==="colorbox"?0:C),v=y):n==="angl"?(C=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),y=4*C,v=Math.max(0,.25-r.depth)):(y=o?.2:0,v=y),a=g0.encloseSpan(r,n,y,v,t),/fbox|boxed|fcolorbox/.test(n)?(a.style.borderStyle="solid",a.style.borderWidth=vr(C)):n==="angl"&&C!==.049&&(a.style.borderTopWidth=vr(C),a.style.borderRightWidth=vr(C)),i=r.depth+v,e.backgroundColor&&(a.style.backgroundColor=e.backgroundColor,e.borderColor&&(a.style.borderColor=e.borderColor))}var w;if(e.backgroundColor)w=_t.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:i},{type:"elem",elem:r,shift:0}]},t);else{var _=/cancel|phase/.test(n)?["svg-align"]:[];w=_t.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:a,shift:i,wrapperClasses:_}]},t)}return/cancel/.test(n)&&(w.height=r.height,w.depth=r.depth),/cancel/.test(n)&&!o?_t.makeSpan(["mord","cancel-lap"],[w],t):_t.makeSpan(["mord"],[w],t)},XT=(e,t)=>{var r=0,n=new nr.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Cs(e.body,t)]);switch(e.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var s=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);n.setAttribute("style","border: "+s+"em solid "+String(e.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&n.setAttribute("mathbackground",e.backgroundColor),n};Pr({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=En(t[0],"color-token").color,i=t[1];return{type:"enclose",mode:n.mode,label:s,backgroundColor:a,body:i}},htmlBuilder:YT,mathmlBuilder:XT});Pr({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:n,funcName:s}=e,a=En(t[0],"color-token").color,i=En(t[1],"color-token").color,o=t[2];return{type:"enclose",mode:n.mode,label:s,backgroundColor:i,borderColor:a,body:o}},htmlBuilder:YT,mathmlBuilder:XT});Pr({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});Pr({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"enclose",mode:r.mode,label:n,body:s}},htmlBuilder:YT,mathmlBuilder:XT});Pr({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var DU={};function od(e){for(var{type:t,names:r,props:n,handler:s,htmlBuilder:a,mathmlBuilder:i}=e,o={type:t,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},c=0;c<r.length;++c)DU[r[c]]=o;a&&(y4[t]=a),i&&(v4[t]=i)}var RU={};function Se(e,t){RU[e]=t}function Ij(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var K_=e=>{var t=e.parser.settings;if(!t.displayMode)throw new sr("{"+e.envName+"} can be used only in display mode.")};function JT(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function sh(e,t,r){var{hskipBeforeAndAfter:n,addJot:s,cols:a,arraystretch:i,colSeparationType:o,autoTag:c,singleRow:u,emptySingleRow:d,maxNumCols:f,leqno:h}=t;if(e.gullet.beginGroup(),u||e.gullet.macros.set("\\cr","\\\\\\relax"),!i){var g=e.gullet.expandMacroAsText("\\arraystretch");if(g==null)i=1;else if(i=parseFloat(g),!i||i<0)throw new sr("Invalid \\arraystretch: "+g)}e.gullet.beginGroup();var p=[],y=[p],v=[],C=[],w=c!=null?[]:void 0;function _(){c&&e.gullet.macros.set("\\@eqnsw","1",!0)}function T(){w&&(e.gullet.macros.get("\\df@tag")?(w.push(e.subparse([new zl("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):w.push(!!c&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(_(),C.push(Ij(e));;){var E=e.parseExpression(!1,u?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),E={type:"ordgroup",mode:e.mode,body:E},r&&(E={type:"styling",mode:e.mode,style:r,body:[E]}),p.push(E);var A=e.fetch().text;if(A==="&"){if(f&&p.length===f){if(u||o)throw new sr("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if(A==="\\end"){T(),p.length===1&&E.type==="styling"&&E.body[0].body.length===0&&(y.length>1||!d)&&y.pop(),C.length<y.length+1&&C.push([]);break}else if(A==="\\\\"){e.consume();var F=void 0;e.gullet.future().text!==" "&&(F=e.parseSizeGroup(!0)),v.push(F?F.value:null),T(),C.push(Ij(e)),p=[],y.push(p),_()}else throw new sr("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:i,body:y,cols:a,rowGaps:v,hskipBeforeAndAfter:n,hLinesBeforeRow:C,colSeparationType:o,tags:w,leqno:h}}function QT(e){return e.slice(0,1)==="d"?"display":"text"}var ld=function(t,r){var n,s,a=t.body.length,i=t.hLinesBeforeRow,o=0,c=new Array(a),u=[],d=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),f=1/r.fontMetrics().ptPerEm,h=5*f;if(t.colSeparationType&&t.colSeparationType==="small"){var g=r.havingStyle(rn.SCRIPT).sizeMultiplier;h=.2778*(g/r.sizeMultiplier)}var p=t.colSeparationType==="CD"?ta({number:3,unit:"ex"},r):12*f,y=3*f,v=t.arraystretch*p,C=.7*v,w=.3*v,_=0;function T(Ht){for(var Ve=0;Ve<Ht.length;++Ve)Ve>0&&(_+=.25),u.push({pos:_,isDashed:Ht[Ve]})}for(T(i[0]),n=0;n<t.body.length;++n){var E=t.body[n],A=C,F=w;o<E.length&&(o=E.length);var j=new Array(E.length);for(s=0;s<E.length;++s){var P=Gn(E[s],r);F<P.depth&&(F=P.depth),A<P.height&&(A=P.height),j[s]=P}var D=t.rowGaps[n],B=0;D&&(B=ta(D,r),B>0&&(B+=w,F<B&&(F=B),B=0)),t.addJot&&(F+=y),j.height=A,j.depth=F,_+=A,j.pos=_,_+=F+B,c[n]=j,T(i[n+1])}var V=_/2+r.fontMetrics().axisHeight,Y=t.cols||[],re=[],te,ee,L=[];if(t.tags&&t.tags.some(Ht=>Ht))for(n=0;n<a;++n){var Q=c[n],U=Q.pos-V,G=t.tags[n],W=void 0;G===!0?W=_t.makeSpan(["eqn-num"],[],r):G===!1?W=_t.makeSpan([],[],r):W=_t.makeSpan([],ci(G,r,!0),r),W.depth=Q.depth,W.height=Q.height,L.push({type:"elem",elem:W,shift:U})}for(s=0,ee=0;s<o||ee<Y.length;++s,++ee){for(var M=Y[ee]||{},I=!0;M.type==="separator";){if(I||(te=_t.makeSpan(["arraycolsep"],[]),te.style.width=vr(r.fontMetrics().doubleRuleSep),re.push(te)),M.separator==="|"||M.separator===":"){var z=M.separator==="|"?"solid":"dashed",q=_t.makeSpan(["vertical-separator"],[],r);q.style.height=vr(_),q.style.borderRightWidth=vr(d),q.style.borderRightStyle=z,q.style.margin="0 "+vr(-d/2);var ne=_-V;ne&&(q.style.verticalAlign=vr(-ne)),re.push(q)}else throw new sr("Invalid separator type: "+M.separator);ee++,M=Y[ee]||{},I=!1}if(!(s>=o)){var X=void 0;(s>0||t.hskipBeforeAndAfter)&&(X=Xn.deflt(M.pregap,h),X!==0&&(te=_t.makeSpan(["arraycolsep"],[]),te.style.width=vr(X),re.push(te)));var se=[];for(n=0;n<a;++n){var ce=c[n],pe=ce[s];if(pe){var be=ce.pos-V;pe.depth=ce.depth,pe.height=ce.height,se.push({type:"elem",elem:pe,shift:be})}}se=_t.makeVList({positionType:"individualShift",children:se},r),se=_t.makeSpan(["col-align-"+(M.align||"c")],[se]),re.push(se),(s<o-1||t.hskipBeforeAndAfter)&&(X=Xn.deflt(M.postgap,h),X!==0&&(te=_t.makeSpan(["arraycolsep"],[]),te.style.width=vr(X),re.push(te)))}}if(c=_t.makeSpan(["mtable"],re),u.length>0){for(var oe=_t.makeLineSpan("hline",r,d),je=_t.makeLineSpan("hdashline",r,d),Re=[{type:"elem",elem:c,shift:0}];u.length>0;){var Xe=u.pop(),ft=Xe.pos-V;Xe.isDashed?Re.push({type:"elem",elem:je,shift:ft}):Re.push({type:"elem",elem:oe,shift:ft})}c=_t.makeVList({positionType:"individualShift",children:Re},r)}if(L.length===0)return _t.makeSpan(["mord"],[c],r);var Je=_t.makeVList({positionType:"individualShift",children:L},r);return Je=_t.makeSpan(["tag"],[Je],r),_t.makeFragment([c,Je])},aae={c:"center ",l:"left ",r:"right "},cd=function(t,r){for(var n=[],s=new nr.MathNode("mtd",[],["mtr-glue"]),a=new nr.MathNode("mtd",[],["mml-eqn-num"]),i=0;i<t.body.length;i++){for(var o=t.body[i],c=[],u=0;u<o.length;u++)c.push(new nr.MathNode("mtd",[Cs(o[u],r)]));t.tags&&t.tags[i]&&(c.unshift(s),c.push(s),t.leqno?c.unshift(a):c.push(a)),n.push(new nr.MathNode("mtr",c))}var d=new nr.MathNode("mtable",n),f=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);d.setAttribute("rowspacing",vr(f));var h="",g="";if(t.cols&&t.cols.length>0){var p=t.cols,y="",v=!1,C=0,w=p.length;p[0].type==="separator"&&(h+="top ",C=1),p[p.length-1].type==="separator"&&(h+="bottom ",w-=1);for(var _=C;_<w;_++)p[_].type==="align"?(g+=aae[p[_].align],v&&(y+="none "),v=!0):p[_].type==="separator"&&v&&(y+=p[_].separator==="|"?"solid ":"dashed ",v=!1);d.setAttribute("columnalign",g.trim()),/[sd]/.test(y)&&d.setAttribute("columnlines",y.trim())}if(t.colSeparationType==="align"){for(var T=t.cols||[],E="",A=1;A<T.length;A++)E+=A%2?"0em ":"1em ";d.setAttribute("columnspacing",E.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?d.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?d.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?d.setAttribute("columnspacing","0.5em"):d.setAttribute("columnspacing","1em");var F="",j=t.hLinesBeforeRow;h+=j[0].length>0?"left ":"",h+=j[j.length-1].length>0?"right ":"";for(var P=1;P<j.length-1;P++)F+=j[P].length===0?"none ":j[P][0]?"dashed ":"solid ";return/[sd]/.test(F)&&d.setAttribute("rowlines",F.trim()),h!==""&&(d=new nr.MathNode("menclose",[d]),d.setAttribute("notation",h.trim())),t.arraystretch&&t.arraystretch<1&&(d=new nr.MathNode("mstyle",[d]),d.setAttribute("scriptlevel","1")),d},IU=function(t,r){t.envName.indexOf("ed")===-1&&K_(t);var n=[],s=t.envName.indexOf("at")>-1?"alignat":"align",a=t.envName==="split",i=sh(t.parser,{cols:n,addJot:!0,autoTag:a?void 0:JT(t.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:a?2:void 0,leqno:t.parser.settings.leqno},"display"),o,c=0,u={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var d="",f=0;f<r[0].body.length;f++){var h=En(r[0].body[f],"textord");d+=h.text}o=Number(d),c=o*2}var g=!c;i.body.forEach(function(C){for(var w=1;w<C.length;w+=2){var _=En(C[w],"styling"),T=En(_.body[0],"ordgroup");T.body.unshift(u)}if(g)c<C.length&&(c=C.length);else{var E=C.length/2;if(o<E)throw new sr("Too many math in a row: "+("expected "+o+", but got "+E),C[0])}});for(var p=0;p<c;++p){var y="r",v=0;p%2===1?y="l":p>0&&g&&(v=1),n[p]={type:"align",align:y,pregap:v,postgap:0}}return i.colSeparationType=g?"align":"alignat",i};od({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=G_(t[0]),n=r?[t[0]]:En(t[0],"ordgroup").body,s=n.map(function(i){var o=VT(i),c=o.text;if("lcr".indexOf(c)!==-1)return{type:"align",align:c};if(c==="|")return{type:"separator",separator:"|"};if(c===":")return{type:"separator",separator:":"};throw new sr("Unknown column alignment: "+c,i)}),a={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return sh(e.parser,a,QT(e.envName))},htmlBuilder:ld,mathmlBuilder:cd});od({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var s=e.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),r=s.fetch().text,"lcr".indexOf(r)===-1)throw new sr("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),n.cols=[{type:"align",align:r}]}}var a=sh(e.parser,n,QT(e.envName)),i=Math.max(0,...a.body.map(o=>o.length));return a.cols=new Array(i).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:ld,mathmlBuilder:cd});od({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=sh(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:ld,mathmlBuilder:cd});od({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=G_(t[0]),n=r?[t[0]]:En(t[0],"ordgroup").body,s=n.map(function(i){var o=VT(i),c=o.text;if("lc".indexOf(c)!==-1)return{type:"align",align:c};throw new sr("Unknown column alignment: "+c,i)});if(s.length>1)throw new sr("{subarray} can contain only one column");var a={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(a=sh(e.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new sr("{subarray} can contain only one column");return a},htmlBuilder:ld,mathmlBuilder:cd});od({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=sh(e.parser,t,QT(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:ld,mathmlBuilder:cd});od({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:IU,htmlBuilder:ld,mathmlBuilder:cd});od({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){["gather","gather*"].includes(e.envName)&&K_(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:JT(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return sh(e.parser,t,"display")},htmlBuilder:ld,mathmlBuilder:cd});od({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:IU,htmlBuilder:ld,mathmlBuilder:cd});od({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){K_(e);var t={autoTag:JT(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return sh(e.parser,t,"display")},htmlBuilder:ld,mathmlBuilder:cd});od({type:"array",names:["CD"],props:{numArgs:0},handler(e){return K_(e),Gse(e.parser)},htmlBuilder:ld,mathmlBuilder:cd});Se("\\nonumber","\\gdef\\@eqnsw{0}");Se("\\notag","\\nonumber");Pr({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new sr(e.funcName+" valid only within array environment")}});var Lj=DU;Pr({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];if(s.type!=="ordgroup")throw new sr("Invalid environment name",s);for(var a="",i=0;i<s.body.length;++i)a+=En(s.body[i],"textord").text;if(n==="\\begin"){if(!Lj.hasOwnProperty(a))throw new sr("No such environment: "+a,s);var o=Lj[a],{args:c,optArgs:u}=r.parseArguments("\\begin{"+a+"}",o),d={mode:r.mode,envName:a,parser:r},f=o.handler(d,c,u);r.expect("\\end",!1);var h=r.nextToken,g=En(r.parseFunction(),"environment");if(g.name!==a)throw new sr("Mismatch: \\begin{"+a+"} matched by \\end{"+g.name+"}",h);return f}return{type:"environment",mode:r.mode,name:a,nameGroup:s}}});var LU=(e,t)=>{var r=e.font,n=t.withFont(r);return Gn(e.body,n)},BU=(e,t)=>{var r=e.font,n=t.withFont(r);return Cs(e.body,n)},Bj={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Pr({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=b4(t[0]),a=n;return a in Bj&&(a=Bj[a]),{type:"font",mode:r.mode,font:a.slice(1),body:s}},htmlBuilder:LU,mathmlBuilder:BU});Pr({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,n=t[0],s=Xn.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:V_(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:s}}});Pr({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,breakOnTokenText:s}=e,{mode:a}=r,i=r.parseExpression(!0,s),o="math"+n.slice(1);return{type:"font",mode:a,font:o,body:{type:"ordgroup",mode:r.mode,body:i}}},htmlBuilder:LU,mathmlBuilder:BU});var $U=(e,t)=>{var r=t;return e==="display"?r=r.id>=rn.SCRIPT.id?r.text():rn.DISPLAY:e==="text"&&r.size===rn.DISPLAY.size?r=rn.TEXT:e==="script"?r=rn.SCRIPT:e==="scriptscript"&&(r=rn.SCRIPTSCRIPT),r},ZT=(e,t)=>{var r=$U(e.size,t.style),n=r.fracNum(),s=r.fracDen(),a;a=t.havingStyle(n);var i=Gn(e.numer,a,t);if(e.continued){var o=8.5/t.fontMetrics().ptPerEm,c=3.5/t.fontMetrics().ptPerEm;i.height=i.height<o?o:i.height,i.depth=i.depth<c?c:i.depth}a=t.havingStyle(s);var u=Gn(e.denom,a,t),d,f,h;e.hasBarLine?(e.barSize?(f=ta(e.barSize,t),d=_t.makeLineSpan("frac-line",t,f)):d=_t.makeLineSpan("frac-line",t),f=d.height,h=d.height):(d=null,f=0,h=t.fontMetrics().defaultRuleThickness);var g,p,y;r.size===rn.DISPLAY.size||e.size==="display"?(g=t.fontMetrics().num1,f>0?p=3*h:p=7*h,y=t.fontMetrics().denom1):(f>0?(g=t.fontMetrics().num2,p=h):(g=t.fontMetrics().num3,p=3*h),y=t.fontMetrics().denom2);var v;if(d){var w=t.fontMetrics().axisHeight;g-i.depth-(w+.5*f)<p&&(g+=p-(g-i.depth-(w+.5*f))),w-.5*f-(u.height-y)<p&&(y+=p-(w-.5*f-(u.height-y)));var _=-(w-.5*f);v=_t.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:d,shift:_},{type:"elem",elem:i,shift:-g}]},t)}else{var C=g-i.depth-(u.height-y);C<p&&(g+=.5*(p-C),y+=.5*(p-C)),v=_t.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:i,shift:-g}]},t)}a=t.havingStyle(r),v.height*=a.sizeMultiplier/t.sizeMultiplier,v.depth*=a.sizeMultiplier/t.sizeMultiplier;var T;r.size===rn.DISPLAY.size?T=t.fontMetrics().delim1:r.size===rn.SCRIPTSCRIPT.size?T=t.havingStyle(rn.SCRIPT).fontMetrics().delim2:T=t.fontMetrics().delim2;var E,A;return e.leftDelim==null?E=kv(t,["mopen"]):E=s0.customSizedDelim(e.leftDelim,T,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?A=_t.makeSpan([]):e.rightDelim==null?A=kv(t,["mclose"]):A=s0.customSizedDelim(e.rightDelim,T,!0,t.havingStyle(r),e.mode,["mclose"]),_t.makeSpan(["mord"].concat(a.sizingClasses(t)),[E,_t.makeSpan(["mfrac"],[v]),A],t)},e7=(e,t)=>{var r=new nr.MathNode("mfrac",[Cs(e.numer,t),Cs(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var n=ta(e.barSize,t);r.setAttribute("linethickness",vr(n))}var s=$U(e.size,t.style);if(s.size!==t.style.size){r=new nr.MathNode("mstyle",[r]);var a=s.size===rn.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",a),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var i=[];if(e.leftDelim!=null){var o=new nr.MathNode("mo",[new nr.TextNode(e.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),i.push(o)}if(i.push(r),e.rightDelim!=null){var c=new nr.MathNode("mo",[new nr.TextNode(e.rightDelim.replace("\\",""))]);c.setAttribute("fence","true"),i.push(c)}return HT(i)}return r};Pr({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1],i,o=null,c=null,u="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":i=!0;break;case"\\\\atopfrac":i=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i=!1,o="(",c=")";break;case"\\\\bracefrac":i=!1,o="\\{",c="\\}";break;case"\\\\brackfrac":i=!1,o="[",c="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:s,denom:a,hasBarLine:i,leftDelim:o,rightDelim:c,size:u,barSize:null}},htmlBuilder:ZT,mathmlBuilder:e7});Pr({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:s,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Pr({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:n}=e,s;switch(r){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:s,token:n}}});var $j=["display","text","script","scriptscript"],Uj=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};Pr({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,n=t[4],s=t[5],a=b4(t[0]),i=a.type==="atom"&&a.family==="open"?Uj(a.text):null,o=b4(t[1]),c=o.type==="atom"&&o.family==="close"?Uj(o.text):null,u=En(t[2],"size"),d,f=null;u.isBlank?d=!0:(f=u.value,d=f.number>0);var h="auto",g=t[3];if(g.type==="ordgroup"){if(g.body.length>0){var p=En(g.body[0],"textord");h=$j[Number(p.text)]}}else g=En(g,"textord"),h=$j[Number(g.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:d,barSize:f,leftDelim:i,rightDelim:c,size:h}},htmlBuilder:ZT,mathmlBuilder:e7});Pr({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:n,token:s}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:En(t[0],"size").value,token:s}}});Pr({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0],a=Dne(En(t[1],"infix").size),i=t[2],o=a.number>0;return{type:"genfrac",mode:r.mode,numer:s,denom:i,continued:!1,hasBarLine:o,barSize:a,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:ZT,mathmlBuilder:e7});var UU=(e,t)=>{var r=t.style,n,s;e.type==="supsub"?(n=e.sup?Gn(e.sup,t.havingStyle(r.sup()),t):Gn(e.sub,t.havingStyle(r.sub()),t),s=En(e.base,"horizBrace")):s=En(e,"horizBrace");var a=Gn(s.base,t.havingBaseStyle(rn.DISPLAY)),i=g0.svgSpan(s,t),o;if(s.isOver?(o=_t.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:i}]},t),o.children[0].children[0].children[1].classes.push("svg-align")):(o=_t.makeVList({positionType:"bottom",positionData:a.depth+.1+i.height,children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:a}]},t),o.children[0].children[0].children[0].classes.push("svg-align")),n){var c=_t.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t);s.isOver?o=_t.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:.2},{type:"elem",elem:n}]},t):o=_t.makeVList({positionType:"bottom",positionData:c.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:c}]},t)}return _t.makeSpan(["mord",s.isOver?"mover":"munder"],[o],t)},iae=(e,t)=>{var r=g0.mathMLnode(e.label);return new nr.MathNode(e.isOver?"mover":"munder",[Cs(e.base,t),r])};Pr({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:n}=e;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:t[0]}},htmlBuilder:UU,mathmlBuilder:iae});Pr({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[1],s=En(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:r.mode,href:s,body:Pa(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=ci(e.body,t,!1);return _t.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=Kf(e.body,t);return r instanceof Ll||(r=new Ll("mrow",[r])),r.setAttribute("href",e.href),r}});Pr({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=En(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var s=[],a=0;a<n.length;a++){var i=n[a];i==="~"&&(i="\\textasciitilde"),s.push({type:"textord",mode:"text",text:i})}var o={type:"text",mode:r.mode,font:"\\texttt",body:s};return{type:"href",mode:r.mode,href:n,body:Pa(o)}}});Pr({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:Pa(t[0])}},htmlBuilder(e,t){var r=ci(e.body,t,!1);return _t.makeFragment(r)},mathmlBuilder(e,t){return new nr.MathNode("mrow",vl(e.body,t))}});Pr({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n,token:s}=e,a=En(t[0],"raw").string,i=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var o,c={};switch(n){case"\\htmlClass":c.class=a,o={command:"\\htmlClass",class:a};break;case"\\htmlId":c.id=a,o={command:"\\htmlId",id:a};break;case"\\htmlStyle":c.style=a,o={command:"\\htmlStyle",style:a};break;case"\\htmlData":{for(var u=a.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length!==2)throw new sr("Error parsing key-value for \\htmlData");c["data-"+f[0].trim()]=f[1].trim()}o={command:"\\htmlData",attributes:c};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(o)?{type:"html",mode:r.mode,attributes:c,body:Pa(i)}:r.formatUnsupportedCmd(n)},htmlBuilder:(e,t)=>{var r=ci(e.body,t,!1),n=["enclosing"];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/));var s=_t.makeSpan(n,r,t);for(var a in e.attributes)a!=="class"&&e.attributes.hasOwnProperty(a)&&s.setAttribute(a,e.attributes[a]);return s},mathmlBuilder:(e,t)=>Kf(e.body,t)});Pr({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:Pa(t[0]),mathml:Pa(t[1])}},htmlBuilder:(e,t)=>{var r=ci(e.html,t,!1);return _t.makeFragment(r)},mathmlBuilder:(e,t)=>Kf(e.mathml,t)});var o5=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new sr("Invalid size: '"+t+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!iU(n))throw new sr("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};Pr({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:n}=e,s={number:0,unit:"em"},a={number:.9,unit:"em"},i={number:0,unit:"em"},o="";if(r[0])for(var c=En(r[0],"raw").string,u=c.split(","),d=0;d<u.length;d++){var f=u[d].split("=");if(f.length===2){var h=f[1].trim();switch(f[0].trim()){case"alt":o=h;break;case"width":s=o5(h);break;case"height":a=o5(h);break;case"totalheight":i=o5(h);break;default:throw new sr("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var g=En(t[0],"url").url;return o===""&&(o=g,o=o.replace(/^.*[\\/]/,""),o=o.substring(0,o.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:g})?{type:"includegraphics",mode:n.mode,alt:o,width:s,height:a,totalheight:i,src:g}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=ta(e.height,t),n=0;e.totalheight.number>0&&(n=ta(e.totalheight,t)-r);var s=0;e.width.number>0&&(s=ta(e.width,t));var a={height:vr(r+n)};s>0&&(a.width=vr(s)),n>0&&(a.verticalAlign=vr(-n));var i=new ise(e.src,e.alt,a);return i.height=r,i.depth=n,i},mathmlBuilder:(e,t)=>{var r=new nr.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var n=ta(e.height,t),s=0;if(e.totalheight.number>0&&(s=ta(e.totalheight,t)-n,r.setAttribute("valign",vr(-s))),r.setAttribute("height",vr(n+s)),e.width.number>0){var a=ta(e.width,t);r.setAttribute("width",vr(a))}return r.setAttribute("src",e.src),r}});Pr({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=En(t[0],"size");if(r.settings.strict){var a=n[1]==="m",i=s.value.unit==="mu";a?(i||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+s.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):i&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:s.value}},htmlBuilder(e,t){return _t.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=ta(e.dimension,t);return new nr.SpaceNode(r)}});Pr({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:s}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=_t.makeSpan([],[Gn(e.body,t)]),r=_t.makeSpan(["inner"],[r],t)):r=_t.makeSpan(["inner"],[Gn(e.body,t)]);var n=_t.makeSpan(["fix"],[]),s=_t.makeSpan([e.alignment],[r,n],t),a=_t.makeSpan(["strut"]);return a.style.height=vr(s.height+s.depth),s.depth&&(a.style.verticalAlign=vr(-s.depth)),s.children.unshift(a),s=_t.makeSpan(["thinbox"],[s],t),_t.makeSpan(["mord","vbox"],[s],t)},mathmlBuilder:(e,t)=>{var r=new nr.MathNode("mpadded",[Cs(e.body,t)]);if(e.alignment!=="rlap"){var n=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});Pr({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:n}=e,s=n.mode;n.switchMode("math");var a=r==="\\("?"\\)":"$",i=n.parseExpression(!1,a);return n.expect(a),n.switchMode(s),{type:"styling",mode:n.mode,style:"text",body:i}}});Pr({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new sr("Mismatched "+e.funcName)}});var zj=(e,t)=>{switch(t.style.size){case rn.DISPLAY.size:return e.display;case rn.TEXT.size:return e.text;case rn.SCRIPT.size:return e.script;case rn.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Pr({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:Pa(t[0]),text:Pa(t[1]),script:Pa(t[2]),scriptscript:Pa(t[3])}},htmlBuilder:(e,t)=>{var r=zj(e,t),n=ci(r,t,!1);return _t.makeFragment(n)},mathmlBuilder:(e,t)=>{var r=zj(e,t);return Kf(r,t)}});var zU=(e,t,r,n,s,a,i)=>{e=_t.makeSpan([],[e]);var o=r&&Xn.isCharacterBox(r),c,u;if(t){var d=Gn(t,n.havingStyle(s.sup()),n);u={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-d.depth)}}if(r){var f=Gn(r,n.havingStyle(s.sub()),n);c={elem:f,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-f.height)}}var h;if(u&&c){var g=n.fontMetrics().bigOpSpacing5+c.elem.height+c.elem.depth+c.kern+e.depth+i;h=_t.makeVList({positionType:"bottom",positionData:g,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:vr(-a)},{type:"kern",size:c.kern},{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:vr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(c){var p=e.height-i;h=_t.makeVList({positionType:"top",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:c.elem,marginLeft:vr(-a)},{type:"kern",size:c.kern},{type:"elem",elem:e}]},n)}else if(u){var y=e.depth+i;h=_t.makeVList({positionType:"bottom",positionData:y,children:[{type:"elem",elem:e},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:vr(a)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return e;var v=[h];if(c&&a!==0&&!o){var C=_t.makeSpan(["mspace"],[],n);C.style.marginRight=vr(a),v.unshift(C)}return _t.makeSpan(["mop","op-limits"],v,n)},WU=["\\smallint"],x1=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=En(e.base,"op"),s=!0):a=En(e,"op");var i=t.style,o=!1;i.size===rn.DISPLAY.size&&a.symbol&&!WU.includes(a.name)&&(o=!0);var c;if(a.symbol){var u=o?"Size2-Regular":"Size1-Regular",d="";if((a.name==="\\oiint"||a.name==="\\oiiint")&&(d=a.name.slice(1),a.name=d==="oiint"?"\\iint":"\\iiint"),c=_t.makeSymbol(a.name,u,"math",t,["mop","op-symbol",o?"large-op":"small-op"]),d.length>0){var f=c.italic,h=_t.staticSvg(d+"Size"+(o?"2":"1"),t);c=_t.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:h,shift:o?.08:0}]},t),a.name="\\"+d,c.classes.unshift("mop"),c.italic=f}}else if(a.body){var g=ci(a.body,t,!0);g.length===1&&g[0]instanceof Tc?(c=g[0],c.classes[0]="mop"):c=_t.makeSpan(["mop"],g,t)}else{for(var p=[],y=1;y<a.name.length;y++)p.push(_t.mathsym(a.name[y],a.mode,t));c=_t.makeSpan(["mop"],p,t)}var v=0,C=0;return(c instanceof Tc||a.name==="\\oiint"||a.name==="\\oiiint")&&!a.suppressBaseShift&&(v=(c.height-c.depth)/2-t.fontMetrics().axisHeight,C=c.italic),s?zU(c,r,n,t,i,C,v):(v&&(c.style.position="relative",c.style.top=vr(v)),c)},f2=(e,t)=>{var r;if(e.symbol)r=new Ll("mo",[Nc(e.name,e.mode)]),WU.includes(e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Ll("mo",vl(e.body,t));else{r=new Ll("mi",[new Yu(e.name.slice(1))]);var n=new Ll("mo",[Nc("","text")]);e.parentIsSupSub?r=new Ll("mrow",[r,n]):r=xU([r,n])}return r},oae={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Pr({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=n;return s.length===1&&(s=oae[s]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:x1,mathmlBuilder:f2});Pr({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Pa(n)}},htmlBuilder:x1,mathmlBuilder:f2});var lae={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Pr({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:x1,mathmlBuilder:f2});Pr({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:x1,mathmlBuilder:f2});Pr({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,n=r;return n.length===1&&(n=lae[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:x1,mathmlBuilder:f2});var HU=(e,t)=>{var r,n,s=!1,a;e.type==="supsub"?(r=e.sup,n=e.sub,a=En(e.base,"operatorname"),s=!0):a=En(e,"operatorname");var i;if(a.body.length>0){for(var o=a.body.map(f=>{var h=f.text;return typeof h=="string"?{type:"textord",mode:f.mode,text:h}:f}),c=ci(o,t.withFont("mathrm"),!0),u=0;u<c.length;u++){var d=c[u];d instanceof Tc&&(d.text=d.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}i=_t.makeSpan(["mop"],c,t)}else i=_t.makeSpan(["mop"],[],t);return s?zU(i,r,n,t,t.style,0,0):i},cae=(e,t)=>{for(var r=vl(e.body,t.withFont("mathrm")),n=!0,s=0;s<r.length;s++){var a=r[s];if(!(a instanceof nr.SpaceNode))if(a instanceof nr.MathNode)switch(a.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var i=a.children[0];a.children.length===1&&i instanceof nr.TextNode?i.text=i.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var o=r.map(d=>d.toText()).join("");r=[new nr.TextNode(o)]}var c=new nr.MathNode("mi",r);c.setAttribute("mathvariant","normal");var u=new nr.MathNode("mo",[Nc("","text")]);return e.parentIsSupSub?new nr.MathNode("mrow",[c,u]):nr.newDocumentFragment([c,u])};Pr({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:n}=e,s=t[0];return{type:"operatorname",mode:r.mode,body:Pa(s),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:HU,mathmlBuilder:cae});Se("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Qm({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?_t.makeFragment(ci(e.body,t,!1)):_t.makeSpan(["mord"],ci(e.body,t,!0),t)},mathmlBuilder(e,t){return Kf(e.body,t,!0)}});Pr({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,n=t[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(e,t){var r=Gn(e.body,t.havingCrampedStyle()),n=_t.makeLineSpan("overline-line",t),s=t.fontMetrics().defaultRuleThickness,a=_t.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n},{type:"kern",size:s}]},t);return _t.makeSpan(["mord","overline"],[a],t)},mathmlBuilder(e,t){var r=new nr.MathNode("mo",[new nr.TextNode("")]);r.setAttribute("stretchy","true");var n=new nr.MathNode("mover",[Cs(e.body,t),r]);return n.setAttribute("accent","true"),n}});Pr({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"phantom",mode:r.mode,body:Pa(n)}},htmlBuilder:(e,t)=>{var r=ci(e.body,t.withPhantom(),!1);return _t.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=vl(e.body,t);return new nr.MathNode("mphantom",r)}});Pr({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=_t.makeSpan([],[Gn(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=_t.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),_t.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=vl(Pa(e.body),t),n=new nr.MathNode("mphantom",r),s=new nr.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});Pr({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,n=t[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(e,t)=>{var r=_t.makeSpan(["inner"],[Gn(e.body,t.withPhantom())]),n=_t.makeSpan(["fix"],[]);return _t.makeSpan(["mord","rlap"],[r,n],t)},mathmlBuilder:(e,t)=>{var r=vl(Pa(e.body),t),n=new nr.MathNode("mphantom",r),s=new nr.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});Pr({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,n=En(t[0],"size").value,s=t[1];return{type:"raisebox",mode:r.mode,dy:n,body:s}},htmlBuilder(e,t){var r=Gn(e.body,t),n=ta(e.dy,t);return _t.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new nr.MathNode("mpadded",[Cs(e.body,t)]),n=e.dy.number+e.dy.unit;return r.setAttribute("voffset",n),r}});Pr({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});Pr({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:n}=e,s=r[0],a=En(t[0],"size"),i=En(t[1],"size");return{type:"rule",mode:n.mode,shift:s&&En(s,"size").value,width:a.value,height:i.value}},htmlBuilder(e,t){var r=_t.makeSpan(["mord","rule"],[],t),n=ta(e.width,t),s=ta(e.height,t),a=e.shift?ta(e.shift,t):0;return r.style.borderRightWidth=vr(n),r.style.borderTopWidth=vr(s),r.style.bottom=vr(a),r.width=n,r.height=s+a,r.depth=-a,r.maxFontSize=s*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=ta(e.width,t),n=ta(e.height,t),s=e.shift?ta(e.shift,t):0,a=t.color&&t.getColor()||"black",i=new nr.MathNode("mspace");i.setAttribute("mathbackground",a),i.setAttribute("width",vr(r)),i.setAttribute("height",vr(n));var o=new nr.MathNode("mpadded",[i]);return s>=0?o.setAttribute("height",vr(s)):(o.setAttribute("height",vr(s)),o.setAttribute("depth",vr(-s))),o.setAttribute("voffset",vr(s)),o}});function GU(e,t,r){for(var n=ci(e,t,!1),s=t.sizeMultiplier/r.sizeMultiplier,a=0;a<n.length;a++){var i=n[a].classes.indexOf("sizing");i<0?Array.prototype.push.apply(n[a].classes,t.sizingClasses(r)):n[a].classes[i+1]==="reset-size"+t.size&&(n[a].classes[i+1]="reset-size"+r.size),n[a].height*=s,n[a].depth*=s}return _t.makeFragment(n)}var Wj=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],uae=(e,t)=>{var r=t.havingSize(e.size);return GU(e.body,r,t)};Pr({type:"sizing",names:Wj,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!1,r);return{type:"sizing",mode:s.mode,size:Wj.indexOf(n)+1,body:a}},htmlBuilder:uae,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),n=vl(e.body,r),s=new nr.MathNode("mstyle",n);return s.setAttribute("mathsize",vr(r.sizeMultiplier)),s}});Pr({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:n}=e,s=!1,a=!1,i=r[0]&&En(r[0],"ordgroup");if(i)for(var o="",c=0;c<i.body.length;++c){var u=i.body[c];if(o=u.text,o==="t")s=!0;else if(o==="b")a=!0;else{s=!1,a=!1;break}}else s=!0,a=!0;var d=t[0];return{type:"smash",mode:n.mode,body:d,smashHeight:s,smashDepth:a}},htmlBuilder:(e,t)=>{var r=_t.makeSpan([],[Gn(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var s=0;s<r.children.length;s++)r.children[s].depth=0;var a=_t.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return _t.makeSpan(["mord"],[a],t)},mathmlBuilder:(e,t)=>{var r=new nr.MathNode("mpadded",[Cs(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});Pr({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:n}=e,s=r[0],a=t[0];return{type:"sqrt",mode:n.mode,body:a,index:s}},htmlBuilder(e,t){var r=Gn(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=_t.wrapFragment(r,t);var n=t.fontMetrics(),s=n.defaultRuleThickness,a=s;t.style.id<rn.TEXT.id&&(a=t.fontMetrics().xHeight);var i=s+a/4,o=r.height+r.depth+i+s,{span:c,ruleWidth:u,advanceWidth:d}=s0.sqrtImage(o,t),f=c.height-u;f>r.height+r.depth+i&&(i=(i+f-r.height-r.depth)/2);var h=c.height-r.height-i-u;r.style.paddingLeft=vr(d);var g=_t.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+h)},{type:"elem",elem:c},{type:"kern",size:u}]},t);if(e.index){var p=t.havingStyle(rn.SCRIPTSCRIPT),y=Gn(e.index,p,t),v=.6*(g.height-g.depth),C=_t.makeVList({positionType:"shift",positionData:-v,children:[{type:"elem",elem:y}]},t),w=_t.makeSpan(["root"],[C]);return _t.makeSpan(["mord","sqrt"],[w,g],t)}else return _t.makeSpan(["mord","sqrt"],[g],t)},mathmlBuilder(e,t){var{body:r,index:n}=e;return n?new nr.MathNode("mroot",[Cs(r,t),Cs(n,t)]):new nr.MathNode("msqrt",[Cs(r,t)])}});var Hj={display:rn.DISPLAY,text:rn.TEXT,script:rn.SCRIPT,scriptscript:rn.SCRIPTSCRIPT};Pr({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:n,parser:s}=e,a=s.parseExpression(!0,r),i=n.slice(1,n.length-5);return{type:"styling",mode:s.mode,style:i,body:a}},htmlBuilder(e,t){var r=Hj[e.style],n=t.havingStyle(r).withFont("");return GU(e.body,n,t)},mathmlBuilder(e,t){var r=Hj[e.style],n=t.havingStyle(r),s=vl(e.body,n),a=new nr.MathNode("mstyle",s),i={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},o=i[e.style];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});var dae=function(t,r){var n=t.base;if(n)if(n.type==="op"){var s=n.limits&&(r.style.size===rn.DISPLAY.size||n.alwaysHandleSupSub);return s?x1:null}else if(n.type==="operatorname"){var a=n.alwaysHandleSupSub&&(r.style.size===rn.DISPLAY.size||n.limits);return a?HU:null}else{if(n.type==="accent")return Xn.isCharacterBox(n.base)?qT:null;if(n.type==="horizBrace"){var i=!t.sub;return i===n.isOver?UU:null}else return null}else return null};Qm({type:"supsub",htmlBuilder(e,t){var r=dae(e,t);if(r)return r(e,t);var{base:n,sup:s,sub:a}=e,i=Gn(n,t),o,c,u=t.fontMetrics(),d=0,f=0,h=n&&Xn.isCharacterBox(n);if(s){var g=t.havingStyle(t.style.sup());o=Gn(s,g,t),h||(d=i.height-g.fontMetrics().supDrop*g.sizeMultiplier/t.sizeMultiplier)}if(a){var p=t.havingStyle(t.style.sub());c=Gn(a,p,t),h||(f=i.depth+p.fontMetrics().subDrop*p.sizeMultiplier/t.sizeMultiplier)}var y;t.style===rn.DISPLAY?y=u.sup1:t.style.cramped?y=u.sup3:y=u.sup2;var v=t.sizeMultiplier,C=vr(.5/u.ptPerEm/v),w=null;if(c){var _=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(i instanceof Tc||_)&&(w=vr(-i.italic))}var T;if(o&&c){d=Math.max(d,y,o.depth+.25*u.xHeight),f=Math.max(f,u.sub2);var E=u.defaultRuleThickness,A=4*E;if(d-o.depth-(c.height-f)<A){f=A-(d-o.depth)+c.height;var F=.8*u.xHeight-(d-o.depth);F>0&&(d+=F,f-=F)}var j=[{type:"elem",elem:c,shift:f,marginRight:C,marginLeft:w},{type:"elem",elem:o,shift:-d,marginRight:C}];T=_t.makeVList({positionType:"individualShift",children:j},t)}else if(c){f=Math.max(f,u.sub1,c.height-.8*u.xHeight);var P=[{type:"elem",elem:c,marginLeft:w,marginRight:C}];T=_t.makeVList({positionType:"shift",positionData:f,children:P},t)}else if(o)d=Math.max(d,y,o.depth+.25*u.xHeight),T=_t.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:o,marginRight:C}]},t);else throw new Error("supsub must have either sup or sub.");var D=oC(i,"right")||"mord";return _t.makeSpan([D],[i,_t.makeSpan(["msupsub"],[T])],t)},mathmlBuilder(e,t){var r=!1,n,s;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(r=!0,n=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var a=[Cs(e.base,t)];e.sub&&a.push(Cs(e.sub,t)),e.sup&&a.push(Cs(e.sup,t));var i;if(r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var u=e.base;u&&u.type==="op"&&u.limits&&t.style===rn.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(t.style===rn.DISPLAY||u.limits)?i="munderover":i="msubsup"}else{var c=e.base;c&&c.type==="op"&&c.limits&&(t.style===rn.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||t.style===rn.DISPLAY)?i="munder":i="msub"}else{var o=e.base;o&&o.type==="op"&&o.limits&&(t.style===rn.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||t.style===rn.DISPLAY)?i="mover":i="msup"}return new nr.MathNode(i,a)}});Qm({type:"atom",htmlBuilder(e,t){return _t.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new nr.MathNode("mo",[Nc(e.text,e.mode)]);if(e.family==="bin"){var n=GT(e,t);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var VU={mi:"italic",mn:"normal",mtext:"normal"};Qm({type:"mathord",htmlBuilder(e,t){return _t.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new nr.MathNode("mi",[Nc(e.text,e.mode,t)]),n=GT(e,t)||"italic";return n!==VU[r.type]&&r.setAttribute("mathvariant",n),r}});Qm({type:"textord",htmlBuilder(e,t){return _t.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=Nc(e.text,e.mode,t),n=GT(e,t)||"normal",s;return e.mode==="text"?s=new nr.MathNode("mtext",[r]):/[0-9]/.test(e.text)?s=new nr.MathNode("mn",[r]):e.text==="\\prime"?s=new nr.MathNode("mo",[r]):s=new nr.MathNode("mi",[r]),n!==VU[s.type]&&s.setAttribute("mathvariant",n),s}});var l5={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},c5={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Qm({type:"spacing",htmlBuilder(e,t){if(c5.hasOwnProperty(e.text)){var r=c5[e.text].className||"";if(e.mode==="text"){var n=_t.makeOrd(e,t,"textord");return n.classes.push(r),n}else return _t.makeSpan(["mspace",r],[_t.mathsym(e.text,e.mode,t)],t)}else{if(l5.hasOwnProperty(e.text))return _t.makeSpan(["mspace",l5[e.text]],[],t);throw new sr('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(c5.hasOwnProperty(e.text))r=new nr.MathNode("mtext",[new nr.TextNode("")]);else{if(l5.hasOwnProperty(e.text))return new nr.MathNode("mspace");throw new sr('Unknown type of space "'+e.text+'"')}return r}});var Gj=()=>{var e=new nr.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};Qm({type:"tag",mathmlBuilder(e,t){var r=new nr.MathNode("mtable",[new nr.MathNode("mtr",[Gj(),new nr.MathNode("mtd",[Kf(e.body,t)]),Gj(),new nr.MathNode("mtd",[Kf(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var Vj={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},qj={"\\textbf":"textbf","\\textmd":"textmd"},fae={"\\textit":"textit","\\textup":"textup"},Kj=(e,t)=>{var r=e.font;if(r){if(Vj[r])return t.withTextFontFamily(Vj[r]);if(qj[r])return t.withTextFontWeight(qj[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape(fae[r])};Pr({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:n}=e,s=t[0];return{type:"text",mode:r.mode,body:Pa(s),font:n}},htmlBuilder(e,t){var r=Kj(e,t),n=ci(e.body,r,!0);return _t.makeSpan(["mord","text"],n,r)},mathmlBuilder(e,t){var r=Kj(e,t);return Kf(e.body,r)}});Pr({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=Gn(e.body,t),n=_t.makeLineSpan("underline-line",t),s=t.fontMetrics().defaultRuleThickness,a=_t.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:s},{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r}]},t);return _t.makeSpan(["mord","underline"],[a],t)},mathmlBuilder(e,t){var r=new nr.MathNode("mo",[new nr.TextNode("")]);r.setAttribute("stretchy","true");var n=new nr.MathNode("munder",[Cs(e.body,t),r]);return n.setAttribute("accentunder","true"),n}});Pr({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=Gn(e.body,t),n=t.fontMetrics().axisHeight,s=.5*(r.height-n-(r.depth+n));return _t.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new nr.MathNode("mpadded",[Cs(e.body,t)],["vcenter"])}});Pr({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new sr("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=Yj(e),n=[],s=t.havingStyle(t.style.text()),a=0;a<r.length;a++){var i=r[a];i==="~"&&(i="\\textasciitilde"),n.push(_t.makeSymbol(i,"Typewriter-Regular",e.mode,s,["mord","texttt"]))}return _t.makeSpan(["mord","text"].concat(s.sizingClasses(t)),_t.tryCombineChars(n),s)},mathmlBuilder(e,t){var r=new nr.TextNode(Yj(e)),n=new nr.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var Yj=e=>e.body.replace(/ /g,e.star?"":""),Pf=gU,qU=`[ \r
	]`,hae="\\\\[a-zA-Z@]+",mae="\\\\[^\uD800-\uDFFF]",gae="("+hae+")"+qU+"*",pae=`\\\\(
|[ \r	]+
?)[ \r	]*`,dC="[-]",xae=new RegExp(dC+"+$"),yae="("+qU+"+)|"+(pae+"|")+"([!-\\[\\]---]"+(dC+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(dC+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+gae)+("|"+mae+")");class Xj{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp(yae,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new zl("EOF",new fl(this,r,r));var n=this.tokenRegex.exec(t);if(n===null||n.index!==r)throw new sr("Unexpected character: '"+t[r]+"'",new zl(t[r],new fl(this,r,r+1)));var s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){var a=t.indexOf(`
`,this.tokenRegex.lastIndex);return a===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=a+1,this.lex()}return new zl(s,new fl(this,r,this.tokenRegex.lastIndex))}}class vae{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new sr("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,n){if(n===void 0&&(n=!1),n){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var a=this.undefStack[this.undefStack.length-1];a&&!a.hasOwnProperty(t)&&(a[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}}var bae=RU;Se("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});Se("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});Se("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});Se("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});Se("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});Se("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");Se("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var Jj={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Se("\\char",function(e){var t=e.popToken(),r,n="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")n=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new sr("\\char` missing argument");n=t.text.charCodeAt(0)}else r=10;if(r){if(n=Jj[t.text],n==null||n>=r)throw new sr("Invalid base-"+r+" digit "+t.text);for(var s;(s=Jj[e.future().text])!=null&&s<r;)n*=r,n+=s,e.popToken()}return"\\@char{"+n+"}"});var t7=(e,t,r,n)=>{var s=e.consumeArg().tokens;if(s.length!==1)throw new sr("\\newcommand's first argument must be a macro name");var a=s[0].text,i=e.isDefined(a);if(i&&!t)throw new sr("\\newcommand{"+a+"} attempting to redefine "+(a+"; use \\renewcommand"));if(!i&&!r)throw new sr("\\renewcommand{"+a+"} when command "+a+" does not yet exist; use \\newcommand");var o=0;if(s=e.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var c="",u=e.expandNextToken();u.text!=="]"&&u.text!=="EOF";)c+=u.text,u=e.expandNextToken();if(!c.match(/^\s*[0-9]+\s*$/))throw new sr("Invalid number of arguments: "+c);o=parseInt(c),s=e.consumeArg().tokens}return i&&n||e.macros.set(a,{tokens:s,numArgs:o}),""};Se("\\newcommand",e=>t7(e,!1,!0,!1));Se("\\renewcommand",e=>t7(e,!0,!1,!1));Se("\\providecommand",e=>t7(e,!0,!0,!0));Se("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});Se("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});Se("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Pf[r],Ps.math[r],Ps.text[r]),""});Se("\\bgroup","{");Se("\\egroup","}");Se("~","\\nobreakspace");Se("\\lq","`");Se("\\rq","'");Se("\\aa","\\r a");Se("\\AA","\\r A");Se("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");Se("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");Se("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");Se("","\\mathscr{B}");Se("","\\mathscr{E}");Se("","\\mathscr{F}");Se("","\\mathscr{H}");Se("","\\mathscr{I}");Se("","\\mathscr{L}");Se("","\\mathscr{M}");Se("","\\mathscr{R}");Se("","\\mathfrak{C}");Se("","\\mathfrak{H}");Se("","\\mathfrak{Z}");Se("\\Bbbk","\\Bbb{k}");Se("","\\cdotp");Se("\\llap","\\mathllap{\\textrm{#1}}");Se("\\rlap","\\mathrlap{\\textrm{#1}}");Se("\\clap","\\mathclap{\\textrm{#1}}");Se("\\mathstrut","\\vphantom{(}");Se("\\underbar","\\underline{\\text{#1}}");Se("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');Se("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");Se("\\ne","\\neq");Se("","\\neq");Se("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");Se("","\\notin");Se("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");Se("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");Se("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");Se("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");Se("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");Se("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");Se("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");Se("","\\perp");Se("","\\mathclose{!\\mkern-0.8mu!}");Se("","\\notni");Se("","\\ulcorner");Se("","\\urcorner");Se("","\\llcorner");Se("","\\lrcorner");Se("","\\copyright");Se("","\\textregistered");Se("","\\textregistered");Se("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');Se("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');Se("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');Se("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');Se("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");Se("","\\vdots");Se("\\varGamma","\\mathit{\\Gamma}");Se("\\varDelta","\\mathit{\\Delta}");Se("\\varTheta","\\mathit{\\Theta}");Se("\\varLambda","\\mathit{\\Lambda}");Se("\\varXi","\\mathit{\\Xi}");Se("\\varPi","\\mathit{\\Pi}");Se("\\varSigma","\\mathit{\\Sigma}");Se("\\varUpsilon","\\mathit{\\Upsilon}");Se("\\varPhi","\\mathit{\\Phi}");Se("\\varPsi","\\mathit{\\Psi}");Se("\\varOmega","\\mathit{\\Omega}");Se("\\substack","\\begin{subarray}{c}#1\\end{subarray}");Se("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");Se("\\boxed","\\fbox{$\\displaystyle{#1}$}");Se("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");Se("\\implies","\\DOTSB\\;\\Longrightarrow\\;");Se("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");Se("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");Se("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var Qj={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Se("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in Qj?t=Qj[r]:(r.slice(0,4)==="\\not"||r in Ps.math&&["bin","rel"].includes(Ps.math[r].group))&&(t="\\dotsb"),t});var r7={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Se("\\dotso",function(e){var t=e.future().text;return t in r7?"\\ldots\\,":"\\ldots"});Se("\\dotsc",function(e){var t=e.future().text;return t in r7&&t!==","?"\\ldots\\,":"\\ldots"});Se("\\cdots",function(e){var t=e.future().text;return t in r7?"\\@cdots\\,":"\\@cdots"});Se("\\dotsb","\\cdots");Se("\\dotsm","\\cdots");Se("\\dotsi","\\!\\cdots");Se("\\dotsx","\\ldots\\,");Se("\\DOTSI","\\relax");Se("\\DOTSB","\\relax");Se("\\DOTSX","\\relax");Se("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");Se("\\,","\\tmspace+{3mu}{.1667em}");Se("\\thinspace","\\,");Se("\\>","\\mskip{4mu}");Se("\\:","\\tmspace+{4mu}{.2222em}");Se("\\medspace","\\:");Se("\\;","\\tmspace+{5mu}{.2777em}");Se("\\thickspace","\\;");Se("\\!","\\tmspace-{3mu}{.1667em}");Se("\\negthinspace","\\!");Se("\\negmedspace","\\tmspace-{4mu}{.2222em}");Se("\\negthickspace","\\tmspace-{5mu}{.277em}");Se("\\enspace","\\kern.5em ");Se("\\enskip","\\hskip.5em\\relax");Se("\\quad","\\hskip1em\\relax");Se("\\qquad","\\hskip2em\\relax");Se("\\tag","\\@ifstar\\tag@literal\\tag@paren");Se("\\tag@paren","\\tag@literal{({#1})}");Se("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new sr("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});Se("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");Se("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");Se("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");Se("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");Se("\\newline","\\\\\\relax");Se("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var KU=vr(Ku["Main-Regular"][84][1]-.7*Ku["Main-Regular"][65][1]);Se("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+KU+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");Se("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+KU+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");Se("\\hspace","\\@ifstar\\@hspacer\\@hspace");Se("\\@hspace","\\hskip #1\\relax");Se("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");Se("\\ordinarycolon",":");Se("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");Se("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');Se("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');Se("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');Se("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');Se("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');Se("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');Se("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');Se("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');Se("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');Se("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');Se("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');Se("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');Se("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');Se("","\\dblcolon");Se("","\\eqcolon");Se("","\\coloneqq");Se("","\\eqqcolon");Se("","\\Coloneqq");Se("\\ratio","\\vcentcolon");Se("\\coloncolon","\\dblcolon");Se("\\colonequals","\\coloneqq");Se("\\coloncolonequals","\\Coloneqq");Se("\\equalscolon","\\eqqcolon");Se("\\equalscoloncolon","\\Eqqcolon");Se("\\colonminus","\\coloneq");Se("\\coloncolonminus","\\Coloneq");Se("\\minuscolon","\\eqcolon");Se("\\minuscoloncolon","\\Eqcolon");Se("\\coloncolonapprox","\\Colonapprox");Se("\\coloncolonsim","\\Colonsim");Se("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Se("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");Se("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");Se("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");Se("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");Se("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");Se("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");Se("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");Se("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");Se("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");Se("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");Se("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");Se("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");Se("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");Se("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");Se("\\ngeqq","\\html@mathml{\\@ngeqq}{}");Se("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");Se("\\nleqq","\\html@mathml{\\@nleqq}{}");Se("\\nleqslant","\\html@mathml{\\@nleqslant}{}");Se("\\nshortmid","\\html@mathml{\\@nshortmid}{}");Se("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");Se("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");Se("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");Se("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");Se("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");Se("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");Se("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");Se("\\imath","\\html@mathml{\\@imath}{}");Se("\\jmath","\\html@mathml{\\@jmath}{}");Se("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Se("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");Se("","\\llbracket");Se("","\\rrbracket");Se("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");Se("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");Se("","\\lBrace");Se("","\\rBrace");Se("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");Se("","\\minuso");Se("\\darr","\\downarrow");Se("\\dArr","\\Downarrow");Se("\\Darr","\\Downarrow");Se("\\lang","\\langle");Se("\\rang","\\rangle");Se("\\uarr","\\uparrow");Se("\\uArr","\\Uparrow");Se("\\Uarr","\\Uparrow");Se("\\N","\\mathbb{N}");Se("\\R","\\mathbb{R}");Se("\\Z","\\mathbb{Z}");Se("\\alef","\\aleph");Se("\\alefsym","\\aleph");Se("\\Alpha","\\mathrm{A}");Se("\\Beta","\\mathrm{B}");Se("\\bull","\\bullet");Se("\\Chi","\\mathrm{X}");Se("\\clubs","\\clubsuit");Se("\\cnums","\\mathbb{C}");Se("\\Complex","\\mathbb{C}");Se("\\Dagger","\\ddagger");Se("\\diamonds","\\diamondsuit");Se("\\empty","\\emptyset");Se("\\Epsilon","\\mathrm{E}");Se("\\Eta","\\mathrm{H}");Se("\\exist","\\exists");Se("\\harr","\\leftrightarrow");Se("\\hArr","\\Leftrightarrow");Se("\\Harr","\\Leftrightarrow");Se("\\hearts","\\heartsuit");Se("\\image","\\Im");Se("\\infin","\\infty");Se("\\Iota","\\mathrm{I}");Se("\\isin","\\in");Se("\\Kappa","\\mathrm{K}");Se("\\larr","\\leftarrow");Se("\\lArr","\\Leftarrow");Se("\\Larr","\\Leftarrow");Se("\\lrarr","\\leftrightarrow");Se("\\lrArr","\\Leftrightarrow");Se("\\Lrarr","\\Leftrightarrow");Se("\\Mu","\\mathrm{M}");Se("\\natnums","\\mathbb{N}");Se("\\Nu","\\mathrm{N}");Se("\\Omicron","\\mathrm{O}");Se("\\plusmn","\\pm");Se("\\rarr","\\rightarrow");Se("\\rArr","\\Rightarrow");Se("\\Rarr","\\Rightarrow");Se("\\real","\\Re");Se("\\reals","\\mathbb{R}");Se("\\Reals","\\mathbb{R}");Se("\\Rho","\\mathrm{P}");Se("\\sdot","\\cdot");Se("\\sect","\\S");Se("\\spades","\\spadesuit");Se("\\sub","\\subset");Se("\\sube","\\subseteq");Se("\\supe","\\supseteq");Se("\\Tau","\\mathrm{T}");Se("\\thetasym","\\vartheta");Se("\\weierp","\\wp");Se("\\Zeta","\\mathrm{Z}");Se("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");Se("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");Se("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");Se("\\bra","\\mathinner{\\langle{#1}|}");Se("\\ket","\\mathinner{|{#1}\\rangle}");Se("\\braket","\\mathinner{\\langle{#1}\\rangle}");Se("\\Bra","\\left\\langle#1\\right|");Se("\\Ket","\\left|#1\\right\\rangle");var YU=e=>t=>{var r=t.consumeArg().tokens,n=t.consumeArg().tokens,s=t.consumeArg().tokens,a=t.consumeArg().tokens,i=t.macros.get("|"),o=t.macros.get("\\|");t.macros.beginGroup();var c=f=>h=>{e&&(h.macros.set("|",i),s.length&&h.macros.set("\\|",o));var g=f;if(!f&&s.length){var p=h.future();p.text==="|"&&(h.popToken(),g=!0)}return{tokens:g?s:n,numArgs:0}};t.macros.set("|",c(!1)),s.length&&t.macros.set("\\|",c(!0));var u=t.consumeArg().tokens,d=t.expandTokens([...a,...u,...r]);return t.macros.endGroup(),{tokens:d.reverse(),numArgs:0}};Se("\\bra@ket",YU(!1));Se("\\bra@set",YU(!0));Se("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");Se("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");Se("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");Se("\\angln","{\\angl n}");Se("\\blue","\\textcolor{##6495ed}{#1}");Se("\\orange","\\textcolor{##ffa500}{#1}");Se("\\pink","\\textcolor{##ff00af}{#1}");Se("\\red","\\textcolor{##df0030}{#1}");Se("\\green","\\textcolor{##28ae7b}{#1}");Se("\\gray","\\textcolor{gray}{#1}");Se("\\purple","\\textcolor{##9d38bd}{#1}");Se("\\blueA","\\textcolor{##ccfaff}{#1}");Se("\\blueB","\\textcolor{##80f6ff}{#1}");Se("\\blueC","\\textcolor{##63d9ea}{#1}");Se("\\blueD","\\textcolor{##11accd}{#1}");Se("\\blueE","\\textcolor{##0c7f99}{#1}");Se("\\tealA","\\textcolor{##94fff5}{#1}");Se("\\tealB","\\textcolor{##26edd5}{#1}");Se("\\tealC","\\textcolor{##01d1c1}{#1}");Se("\\tealD","\\textcolor{##01a995}{#1}");Se("\\tealE","\\textcolor{##208170}{#1}");Se("\\greenA","\\textcolor{##b6ffb0}{#1}");Se("\\greenB","\\textcolor{##8af281}{#1}");Se("\\greenC","\\textcolor{##74cf70}{#1}");Se("\\greenD","\\textcolor{##1fab54}{#1}");Se("\\greenE","\\textcolor{##0d923f}{#1}");Se("\\goldA","\\textcolor{##ffd0a9}{#1}");Se("\\goldB","\\textcolor{##ffbb71}{#1}");Se("\\goldC","\\textcolor{##ff9c39}{#1}");Se("\\goldD","\\textcolor{##e07d10}{#1}");Se("\\goldE","\\textcolor{##a75a05}{#1}");Se("\\redA","\\textcolor{##fca9a9}{#1}");Se("\\redB","\\textcolor{##ff8482}{#1}");Se("\\redC","\\textcolor{##f9685d}{#1}");Se("\\redD","\\textcolor{##e84d39}{#1}");Se("\\redE","\\textcolor{##bc2612}{#1}");Se("\\maroonA","\\textcolor{##ffbde0}{#1}");Se("\\maroonB","\\textcolor{##ff92c6}{#1}");Se("\\maroonC","\\textcolor{##ed5fa6}{#1}");Se("\\maroonD","\\textcolor{##ca337c}{#1}");Se("\\maroonE","\\textcolor{##9e034e}{#1}");Se("\\purpleA","\\textcolor{##ddd7ff}{#1}");Se("\\purpleB","\\textcolor{##c6b9fc}{#1}");Se("\\purpleC","\\textcolor{##aa87ff}{#1}");Se("\\purpleD","\\textcolor{##7854ab}{#1}");Se("\\purpleE","\\textcolor{##543b78}{#1}");Se("\\mintA","\\textcolor{##f5f9e8}{#1}");Se("\\mintB","\\textcolor{##edf2df}{#1}");Se("\\mintC","\\textcolor{##e0e5cc}{#1}");Se("\\grayA","\\textcolor{##f6f7f7}{#1}");Se("\\grayB","\\textcolor{##f0f1f2}{#1}");Se("\\grayC","\\textcolor{##e3e5e6}{#1}");Se("\\grayD","\\textcolor{##d6d8da}{#1}");Se("\\grayE","\\textcolor{##babec2}{#1}");Se("\\grayF","\\textcolor{##888d93}{#1}");Se("\\grayG","\\textcolor{##626569}{#1}");Se("\\grayH","\\textcolor{##3b3e40}{#1}");Se("\\grayI","\\textcolor{##21242c}{#1}");Se("\\kaBlue","\\textcolor{##314453}{#1}");Se("\\kaGreen","\\textcolor{##71B307}{#1}");var XU={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class wae{constructor(t,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new vae(bae,r.macros),this.mode=n,this.stack=[]}feed(t){this.lexer=new Xj(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,n,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:r,end:n}=this.consumeArg());return this.pushToken(new zl("EOF",n.loc)),this.pushTokens(s),new zl("",fl.range(r,n))}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],n=t&&t.length>0;n||this.consumeSpaces();var s=this.future(),a,i=0,o=0;do{if(a=this.popToken(),r.push(a),a.text==="{")++i;else if(a.text==="}"){if(--i,i===-1)throw new sr("Extra }",a)}else if(a.text==="EOF")throw new sr("Unexpected end of input in a macro argument, expected '"+(t&&n?t[o]:"}")+"'",a);if(t&&n)if((i===0||i===1&&t[o]==="{")&&a.text===t[o]){if(++o,o===t.length){r.splice(-o,o);break}}else o=0}while(i!==0||n);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:a}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new sr("The length of delimiters doesn't match the number of args!");for(var n=r[0],s=0;s<n.length;s++){var a=this.popToken();if(n[s]!==a.text)throw new sr("Use of the macro doesn't match its definition",a)}}for(var i=[],o=0;o<t;o++)i.push(this.consumeArg(r&&r[o+1]).tokens);return i}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new sr("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(s==null||t&&s.unexpandable){if(t&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new sr("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var a=s.tokens,i=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){a=a.slice();for(var o=a.length-1;o>=0;--o){var c=a[o];if(c.text==="#"){if(o===0)throw new sr("Incomplete placeholder at end of macro body",c);if(c=a[--o],c.text==="#")a.splice(o+1,1);else if(/^[1-9]$/.test(c.text))a.splice(o,2,...i[+c.text-1]);else throw new sr("Not a valid argument number",c)}}}return this.pushTokens(a),a.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new zl(t)]):void 0}expandTokens(t){var r=[],n=this.stack.length;for(this.pushTokens(t);this.stack.length>n;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(n=>n.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var n=this.lexer.catcodes[t];if(n!=null&&n!==13)return}var s=typeof r=="function"?r(this):r;if(typeof s=="string"){var a=0;if(s.indexOf("#")!==-1)for(var i=s.replace(/##/g,"");i.indexOf("#"+(a+1))!==-1;)++a;for(var o=new Xj(s,this.settings),c=[],u=o.lex();u.text!=="EOF";)c.push(u),u=o.lex();c.reverse();var d={tokens:c,numArgs:a};return d}return s}isDefined(t){return this.macros.has(t)||Pf.hasOwnProperty(t)||Ps.math.hasOwnProperty(t)||Ps.text.hasOwnProperty(t)||XU.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Pf.hasOwnProperty(t)&&!Pf[t].primitive}}var Zj=/^[]/,aw=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),u5={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},eP={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Y_{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new wae(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new sr("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new zl("}")),this.gullet.pushTokens(t);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(t,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(Y_.endOfExpression.indexOf(s.text)!==-1||r&&s.text===r||t&&Pf[s.text]&&Pf[s.text].infix)break;var a=this.parseAtom(r);if(a){if(a.type==="internal")continue}else break;n.push(a)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(t){for(var r=-1,n,s=0;s<t.length;s++)if(t[s].type==="infix"){if(r!==-1)throw new sr("only one infix operator per group",t[s].token);r=s,n=t[s].replaceWith}if(r!==-1&&n){var a,i,o=t.slice(0,r),c=t.slice(r+1);o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o},c.length===1&&c[0].type==="ordgroup"?i=c[0]:i={type:"ordgroup",mode:this.mode,body:c};var u;return n==="\\\\abovefrac"?u=this.callFunction(n,[a,t[r],i],[]):u=this.callFunction(n,[a,i],[]),[u]}else return t}handleSupSubscript(t){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var s;do{var a;s=this.parseGroup(t)}while(((a=s)==null?void 0:a.type)==="internal");if(!s)throw new sr("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(t){for(var r=[],n=0;n<t.length;n++)r.push({type:"textord",mode:"text",text:t[n]});var s={type:"text",mode:this.mode,body:r},a={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return a}parseAtom(t){var r=this.parseGroup("atom",t);if(r?.type==="internal"||this.mode==="text")return r;for(var n,s;;){this.consumeSpaces();var a=this.fetch();if(a.text==="\\limits"||a.text==="\\nolimits"){if(r&&r.type==="op"){var i=a.text==="\\limits";r.limits=i,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=a.text==="\\limits");else throw new sr("Limit controls must follow a math operator",a);this.consume()}else if(a.text==="^"){if(n)throw new sr("Double superscript",a);n=this.handleSupSubscript("superscript")}else if(a.text==="_"){if(s)throw new sr("Double subscript",a);s=this.handleSupSubscript("subscript")}else if(a.text==="'"){if(n)throw new sr("Double superscript",a);var o={type:"textord",mode:this.mode,text:"\\prime"},c=[o];for(this.consume();this.fetch().text==="'";)c.push(o),this.consume();this.fetch().text==="^"&&c.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:c}}else if(aw[a.text]){var u=Zj.test(a.text),d=[];for(d.push(new zl(aw[a.text])),this.consume();;){var f=this.fetch().text;if(!aw[f]||Zj.test(f)!==u)break;d.unshift(new zl(aw[f])),this.consume()}var h=this.subparse(d);u?s={type:"ordgroup",mode:"math",body:h}:n={type:"ordgroup",mode:"math",body:h}}else break}return n||s?{type:"supsub",mode:this.mode,base:r,sup:n,sub:s}:r}parseFunction(t,r){var n=this.fetch(),s=n.text,a=Pf[s];if(!a)return null;if(this.consume(),r&&r!=="atom"&&!a.allowedInArgument)throw new sr("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!a.allowedInText)throw new sr("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&a.allowedInMath===!1)throw new sr("Can't use function '"+s+"' in math mode",n);var{args:i,optArgs:o}=this.parseArguments(s,a);return this.callFunction(s,i,o,n,t)}callFunction(t,r,n,s,a){var i={funcName:t,parser:this,token:s,breakOnTokenText:a},o=Pf[t];if(o&&o.handler)return o.handler(i,r,n);throw new sr("No function handler for "+t)}parseArguments(t,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var s=[],a=[],i=0;i<n;i++){var o=r.argTypes&&r.argTypes[i],c=i<r.numOptionalArgs;(r.primitive&&o==null||r.type==="sqrt"&&i===1&&a[0]==null)&&(o="primitive");var u=this.parseGroupOfType("argument to '"+t+"'",o,c);if(c)a.push(u);else if(u!=null)s.push(u);else throw new sr("Null argument, please report this as a bug")}return{args:s,optArgs:a}}parseGroupOfType(t,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var a=this.parseStringGroup("raw",n);return a!=null?{type:"raw",mode:"text",string:a.text}:null}case"primitive":{if(n)throw new sr("A primitive argument cannot be optional");var i=this.parseGroup(t);if(i==null)throw new sr("Expected group as "+t,this.fetch());return i}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new sr("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var s="",a;(a=this.fetch()).text!=="EOF";)s+=a.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(t,r){for(var n=this.fetch(),s=n,a="",i;(i=this.fetch()).text!=="EOF"&&t.test(a+i.text);)s=i,a+=s.text,this.consume();if(a==="")throw new sr("Invalid "+r+": '"+n.text+"'",n);return n.range(s,a)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new sr("Invalid color: '"+r.text+"'",r);var s=n[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(t){var r,n=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",n=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!s)throw new sr("Invalid size: '"+r.text+"'",r);var a={number:+(s[1]+s[2]),unit:s[3]};if(!iU(a))throw new sr("Invalid unit: '"+a.unit+"'",r);return{type:"size",mode:this.mode,value:a,isBlank:n}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(t,r){var n=this.gullet.scanArgument(t);if(n==null)return null;var s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var a=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var i={type:"ordgroup",mode:this.mode,loc:n.loc,body:a};return r&&this.switchMode(s),i}parseGroup(t,r){var n=this.fetch(),s=n.text,a;if(s==="{"||s==="\\begingroup"){this.consume();var i=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,i),c=this.fetch();this.expect(i),this.gullet.endGroup(),a={type:"ordgroup",mode:this.mode,loc:fl.range(n,c),body:o,semisimple:s==="\\begingroup"||void 0}}else if(a=this.parseFunction(r,t)||this.parseSymbol(),a==null&&s[0]==="\\"&&!XU.hasOwnProperty(s)){if(this.settings.throwOnError)throw new sr("Undefined control sequence: "+s,n);a=this.formatUnsupportedCmd(s),this.consume()}return a}formLigatures(t){for(var r=t.length-1,n=0;n<r;++n){var s=t[n],a=s.text;a==="-"&&t[n+1].text==="-"&&(n+1<r&&t[n+2].text==="-"?(t.splice(n,3,{type:"textord",mode:"text",loc:fl.range(s,t[n+2]),text:"---"}),r-=2):(t.splice(n,2,{type:"textord",mode:"text",loc:fl.range(s,t[n+1]),text:"--"}),r-=1)),(a==="'"||a==="`")&&t[n+1].text===a&&(t.splice(n,2,{type:"textord",mode:"text",loc:fl.range(s,t[n+1]),text:a+a}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),s=n.charAt(0)==="*";if(s&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new sr(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:s}}eP.hasOwnProperty(r[0])&&!Ps[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=eP[r[0]]+r.slice(1));var a=xae.exec(r);a&&(r=r.substring(0,a.index),r==="i"?r="":r==="j"&&(r=""));var i;if(Ps[this.mode][r]){this.settings.strict&&this.mode==="math"&&iC.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var o=Ps[this.mode][r].group,c=fl.range(t),u;if(cse.hasOwnProperty(o)){var d=o;u={type:"atom",mode:this.mode,family:d,loc:c,text:r}}else u={type:o,mode:this.mode,loc:c,text:r};i=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(aU(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),i={type:"textord",mode:"text",loc:fl.range(t),text:r};else return null;if(this.consume(),a)for(var f=0;f<a[0].length;f++){var h=a[0][f];if(!u5[h])throw new sr("Unknown accent ' "+h+"'",t);var g=u5[h][this.mode]||u5[h].text;if(!g)throw new sr("Accent "+h+" unsupported in "+this.mode+" mode",t);i={type:"accent",mode:this.mode,loc:fl.range(t),label:g,isStretchy:!1,isShifty:!0,base:i}}return i}}Y_.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var n7=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new Y_(t,r);delete n.gullet.macros.current["\\df@tag"];var s=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new sr("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:n.subparse([new zl("\\df@tag")])}]}return s},JU=function(t,r,n){r.textContent="";var s=s7(t,n).toNode();r.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),JU=function(){throw new sr("KaTeX doesn't work in quirks mode.")});var _ae=function(t,r){var n=s7(t,r).toMarkup();return n},Sae=function(t,r){var n=new BT(r);return n7(t,n)},QU=function(t,r,n){if(n.throwOnError||!(t instanceof sr))throw t;var s=_t.makeSpan(["katex-error"],[new Tc(r)]);return s.setAttribute("title",t.toString()),s.setAttribute("style","color:"+n.errorColor),s},s7=function(t,r){var n=new BT(r);try{var s=n7(t,n);return Fse(s,t,n)}catch(a){return QU(a,t,n)}},kae=function(t,r){var n=new BT(r);try{var s=n7(t,n);return Mse(s,t,n)}catch(a){return QU(a,t,n)}},Cae="0.16.25",Tae={Span:d2,Anchor:zT,SymbolNode:Tc,SvgNode:h0,PathNode:qf,LineNode:aC},fC={version:Cae,render:JU,renderToString:_ae,ParseError:sr,SETTINGS_SCHEMA:Jw,__parse:Sae,__renderToDomTree:s7,__renderToHTMLTree:kae,__setFontMetrics:tse,__defineSymbol:Z,__defineFunction:Pr,__defineMacro:Se,__domTree:Tae};const hC=(e,t=!1)=>{if(!e||typeof e!="string")return"";try{return fC.renderToString(e,{throwOnError:!1,displayMode:t,strict:!1})}catch(r){return console.error("Math rendering error:",r),`<span class="math-error" title="Math rendering error">${mC(e)}</span>`}},ha=(e,t=!1)=>{if(!e||typeof e!="string")return"";let r=e;const n=/\$\$(.*?)\$\$/g;let s;const a=[];for(;(s=n.exec(e))!==null;)a.push({fullMatch:s[0],expression:s[1],index:s.index});for(let c=a.length-1;c>=0;c--){const{fullMatch:u,expression:d}=a[c];try{const f=fC.renderToString(d,{throwOnError:!1,displayMode:!0,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,mC(u))}}const i=/\$(.*?)\$/g,o=[];for(;(s=i.exec(r))!==null;)s[0].startsWith("$$")||o.push({fullMatch:s[0],expression:s[1],index:s.index});for(let c=o.length-1;c>=0;c--){const{fullMatch:u,expression:d}=o[c];try{const f=fC.renderToString(d,{throwOnError:!1,displayMode:!1,strict:!1});r=r.replace(u,f)}catch(f){console.error("Math rendering error:",f),r=r.replace(u,mC(u))}}return r},Nae=e=>{if(!e||typeof e!="string")return"";if(e.includes("$"))return e;const t=["\\sqrt","\\frac","\\times","\\div","\\cdot","\\pm","\\mp","\\leq","\\geq","\\neq","\\approx","\\equiv","\\sum","\\prod","\\int","\\lim","\\sin","\\cos","\\tan","\\log","\\ln","\\exp"],r=[];let n="",s=!1,a=0;for(let o=0;o<e.length;o++){const c=e[o],u=e[o+1]||"",d=e[o-1]||"",f=c+u;if(e.substring(o,o+3),c==="\\"){const h=e.substring(o).match(/^\\([a-zA-Z]+)/);if(h){const g="\\"+h[1];if(t.some(p=>g.startsWith(p))||g.length>1){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=c;continue}}}if(f==="^{"||f==="_{"||c==="^"||c==="_"){!s&&n.trim()&&(r.push({type:"text",content:n}),n=""),s=!0,n+=c;continue}if(c==="{"){if(s){a++,n+=c;continue}else if(d==="^"||d==="_"||d==="\\"){s=!0,n+=c,a++;continue}}if(c==="}"&&s){if(n+=c,a--,a===0){const h=e.substring(o+1).trim();(!h||h.match(/^[\s,.!?;:]/))&&(r.push({type:"math",content:n}),n="",s=!1)}continue}if(s){if(n+=c,c===" "&&a===0){const h=e.substring(o+1).trim();h&&!h.match(/^[\\^_{]/)&&(r.push({type:"math",content:n.trim()}),n="",s=!1,n+=c)}}else n+=c}n&&r.push({type:s?"math":"text",content:n});let i="";for(const o of r)o.type==="math"?i+=`$${o.content}$`:i+=o.content;return i},mC=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Eae=({isOpen:e=!1,onClose:t,onSave:r,initialValue:n="",cursorPosition:s=null,inputRef:a=null})=>{const[i,o]=S.useState(n),[c,u]=S.useState({start:0,end:0}),[d,f]=S.useState(null),[h,g]=S.useState(null),[p,y]=S.useState(!1),v=S.useRef(null);S.useRef(null),S.useEffect(()=>{e&&(o(n),f(null),g(null),setTimeout(()=>{v.current?.focus(),i&&v.current?.setSelectionRange(i.length,i.length)},100))},[e,n]);const C=()=>{const{start:P,end:D}=c,B=P>0?i.substring(P-1,P):"",V=B&&B.trim()&&!B.match(/[{}()]/);let Y="",re=0;V?(Y="^{}",re=-1):(Y="x^{2}",re=-3);const te=i.substring(0,P)+Y+i.substring(D);o(te),setTimeout(()=>{v.current?.focus();const ee=P+Y.length+re;v.current?.setSelectionRange(ee,ee)},0)},w=()=>{const{start:P,end:D}=c,B=i.substring(P,D);if(B){const V=i.substring(0,P)+`\\sqrt{${B}}`+i.substring(D);o(V),setTimeout(()=>{v.current?.focus();const Y=P+B.length+8;v.current?.setSelectionRange(Y,Y)},0)}else{const V=i.substring(0,P)+"\\sqrt{}"+i.substring(D);o(V),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(P+6,P+6)},0)}},_=()=>{const{start:P}=c,D=i;if(d==="numerator"&&h!==null){const B=h;let V=0,Y=-1;const re=B+6;for(let te=re;te<D.length;te++)if(D[te]==="{")V++;else if(D[te]==="}"){if(V===0){Y=te+1;break}V--}if(Y>0){const te=Y+2;setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(te,te)},0),f(null),g(null)}else{const te=i.substring(0,P)+"\\frac{}{}"+i.substring(c.end);o(te),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(P+6,P+6)},0),f("numerator"),g(P)}}else{const B=i.substring(0,P)+"\\frac{}{}"+i.substring(c.end);o(B),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(P+6,P+6)},0),f("numerator"),g(P)}},T=()=>{const{start:P,end:D}=c,B=i.substring(0,P)+"x^{}"+i.substring(D);o(B),y(!0),setTimeout(()=>{v.current?.focus(),v.current?.setSelectionRange(P+3,P+3)},0)},E=P=>{const{start:D,end:B}=c,V=i.substring(0,D)+P+i.substring(B);o(V),setTimeout(()=>{v.current?.focus();const Y=D+P.length;v.current?.setSelectionRange(Y,Y)},0)},A=P=>{u({start:P.target.selectionStart,end:P.target.selectionEnd})},F=()=>{let P=i;i&&!i.includes("$")&&i.trim()&&/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(i)&&(P=`$${i}$`),r?.(P),t()};if(S.useEffect(()=>{const P=D=>{D.key==="Escape"&&e&&t()};return e&&document.addEventListener("keydown",P),()=>{document.removeEventListener("keydown",P)}},[e,t]),!e)return null;let j="";if(i&&i.trim())try{j=hC(i,!1),(!j||j.trim()==="")&&(j=`<span class="text-gray-500 font-mono">${d5(i)}</span>`)}catch(P){console.error("Preview rendering error:",P),j=`<span class="text-red-500 font-mono">Error: ${d5(i)}</span>`}return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:P=>{P.target===P.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-label":"Math Visual Editor",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-2xl mx-auto",onClick:P=>P.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Visual Editor"}),l.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Expression"}),l.jsx("textarea",{ref:v,value:i,onChange:P=>{const D=P.target.value,B=P.target.selectionStart,V=i;if(D.length>V.length){const Y=D.substring(0,B),re=D.substring(B),te=Y.match(/\^{([^}]*)$/);if(te)if(re.startsWith("}")){const ee=te[1];p&&ee.length>0&&(setTimeout(()=>{if(v.current&&v.current.value===D){const L=B+1;v.current.setSelectionRange(L,L)}},10),y(!1))}else y(!1);else y(!1);Y.match(/\\sqrt\{([^}]*)$/),Y.match(/\\frac\{([^}]*)$/),Y.match(/\\frac\{[^}]*\}\{([^}]*)$/)}o(D)},onSelect:A,className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-sm",placeholder:"Type LaTeX code or use buttons below...",rows:4}),i&&i.trim()&&l.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("div",{className:"text-xs text-gray-600 mb-2 font-medium",children:"Preview:"}),l.jsx("div",{className:"text-gray-700",style:{minHeight:"1.5em",fontSize:"16px"},dangerouslySetInnerHTML:{__html:j||d5(i)}})]})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Math Symbols"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:C,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x)",children:"x"}),l.jsx("button",{onClick:T,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Exponent (x) - Type letter, click this, type number",children:"x"}),l.jsx("button",{onClick:w,className:"px-3 py-2 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg text-sm font-medium text-blue-700 transition-colors",title:"Square Root (x)",children:"x"}),l.jsx("button",{onClick:_,className:`px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${d==="numerator"?"bg-green-50 hover:bg-green-100 border-green-300 text-green-700":"bg-blue-50 hover:bg-blue-100 border-blue-200 text-blue-700"}`,title:d==="numerator"?"Move to denominator (click again)":"Fraction (a/b) - Click for numerator, click again for denominator",children:"a/b"}),l.jsx("button",{onClick:()=>E("\\times"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Times",children:""}),l.jsx("button",{onClick:()=>E("\\div"),className:"px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-lg text-sm font-medium text-gray-700 transition-colors",title:"Divide",children:""})]})]}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(ht,{variant:"secondary",onClick:t,children:"Cancel"}),l.jsx(ht,{variant:"primary",onClick:F,children:"Insert"})]})]})})},d5=e=>{const t=document.createElement("div");return t.textContent=e,t.innerHTML},Ml=({inputRef:e,onChange:t,position:r="right",size:n="small",showPreview:s=!1,className:a=""})=>{const[i,o]=S.useState(!1),[c,u]=S.useState(!1),[d,f]=S.useState(0),[h,g]=S.useState(null),[p,y]=S.useState(""),v=_=>{_.preventDefault(),_.stopPropagation();let T=null;if(typeof e=="function"?T=e():T=e?.current||e,!T){console.warn("MathEditorButton: No input reference provided");return}T.focus();const E=T.selectionStart!==null&&T.selectionStart!==void 0?T.selectionStart:T.selectionEnd!==null&&T.selectionEnd!==void 0?T.selectionEnd:T.value?.length||0;console.log(" Captured cursor position:",E,"from input value length:",T.value?.length),f(E),g(T),o(!0)},C=_=>{let T=h;if(T||(typeof e=="function"?T=e():T=e?.current||e),!T){console.warn("MathEditorButton: No input reference available for insert"),o(!1);return}const E=T.value||"",A=Math.max(0,Math.min(d,E.length));console.log(" Inserting formula at position:",A,"Value length:",E.length,"Formula:",_);const F=E.substring(0,A),j=E.substring(A),P=F+_+j;console.log(" New value:",P.substring(0,A)+"["+_+"]"+P.substring(A+_.length)),T.value=P,t&&t({target:{value:P,name:T.name}});const D=new Event("input",{bubbles:!0});if(T.dispatchEvent(D),T._valueTracker){const V=T._valueTracker;V.setValue(""),T.value=P,V.setValue(P)}const B=A+_.length;setTimeout(()=>{T.focus(),T.setSelectionRange(B,B),console.log(" Cursor moved to position:",B)},0),o(!1)};S.useEffect(()=>{console.log(" MathEditorButton rendered",{hasInputRef:!!e,inputRefType:typeof e,position:r,size:n})},[e,r,n]);const w=_=>{_.preventDefault(),_.stopPropagation();let T=null;typeof e=="function"?T=e():T=e?.current||e,y(T?.value||""),u(!0)};return S.useEffect(()=>{if(c){const _=setInterval(()=>{let T=null;typeof e=="function"?T=e():T=e?.current||e,T&&y(T.value||"")},300);return()=>clearInterval(_)}},[c,e]),l.jsxs(l.Fragment,{children:[s&&l.jsx("button",{type:"button",onClick:w,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"48px":"auto",left:r==="left"?"48px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#10b981",color:"white",border:"2px solid #059669",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:_=>{_.target.style.backgroundColor="#059669"},onMouseLeave:_=>{_.target.style.backgroundColor="#10b981"},title:"Preview Math (p)","aria-label":"Preview math rendering",children:l.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"p"})}),l.jsx("button",{type:"button",onClick:v,style:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:r==="right"?"8px":"auto",left:r==="left"?"8px":"auto",width:n==="small"?"32px":"40px",height:n==="small"?"32px":"40px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#3b82f6",color:"white",border:"2px solid #2563eb",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",cursor:"pointer",zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",minWidth:"32px",minHeight:"32px"},onMouseEnter:_=>{_.target.style.backgroundColor="#2563eb"},onMouseLeave:_=>{_.target.style.backgroundColor="#3b82f6"},title:"Math Editor (fx)","aria-label":"Open math editor",children:l.jsx("span",{style:{fontSize:"11px",fontWeight:"bold"},children:"fx"})}),c&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:_=>{_.target===_.currentTarget&&u(!1)},role:"dialog","aria-modal":"true","aria-label":"Math Preview",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 w-full max-w-3xl mx-auto max-h-[90vh] overflow-auto",onClick:_=>_.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Math Preview"}),l.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview"}),l.jsxs("div",{className:"mb-2 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-gray-600 font-mono",children:["LaTeX: ",p||"(empty)"]}),l.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg min-h-[200px] text-lg",dangerouslySetInnerHTML:{__html:p?p.includes("$")?ha(p,!1):ha(Nae(p),!1):'<span class="text-gray-400">No content to preview</span>'}})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Close"})})]})}),l.jsx(Eae,{isOpen:i,onClose:()=>o(!1),onSave:C,initialValue:"",cursorPosition:d,inputRef:h||e?.current||e})]})},Aae=({question:e,testId:t,testType:r="true_false",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onSave:c,isEditing:u=!1,isSaving:d=!1,validationErrors:f={},showCorrectAnswers:h=!1,studentId:g=null})=>{const{getItem:p,setItem:y}=z_();di();const{theme:v,isCyberpunk:C,isLight:w,isKpop:_,themeClasses:T}=Ra(),E=Da(v);S.useRef(null);const[A,F]=S.useState(""),[j,P]=S.useState(""),[D,B]=S.useState(""),[V,Y]=S.useState(!1),[re,te]=S.useState(!0),[ee,L]=S.useState(""),[Q,U]=S.useState(!1),[G,W]=S.useState(null);S.useEffect(()=>{if(e&&(B(e.question||""),P(e.correct_answer||""),n==="student"&&g)){const oe=p(`test_progress_${g}_${r}_${t}_${e.question_id}`);oe&&F(oe)}},[e,t,r,n,p]),S.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" TrueFalseQuestion syncing with parent studentAnswer:",a),F(a))},[a,n]),S.useEffect(()=>{if(n==="student"&&A&&t&&e?.question_id&&g){const oe=setTimeout(()=>{U(!0),y(`test_progress_${g}_${r}_${t}_${e.question_id}`,A),W(new Date().toLocaleTimeString()),setTimeout(()=>U(!1),1e3)},1e3);return()=>clearTimeout(oe)}},[A,t,r,e?.question_id,n,g,y]),S.useEffect(()=>{if(n==="teacher"&&(D||j)){const oe=setTimeout(()=>{U(!0);const je={question:D,correct_answer:j,timestamp:Date.now()};y(`teacher_form_${r}_${t}`,je),W(new Date().toLocaleTimeString()),setTimeout(()=>U(!1),1e3)},2e3);return()=>clearTimeout(oe)}},[D,j,t,r,n,y]);const M=S.useCallback(oe=>{n==="student"&&(F(oe),i&&i(e.question_id,oe),q(oe))},[n,e?.question_id,i]),I=S.useCallback(oe=>{B(oe),o&&o(e.question_id,oe),ne(oe)},[e?.question_id,o]),z=S.useCallback(oe=>{P(oe),o&&o(e.question_id,{...e,correct_answer:oe}),X(oe)},[e,o]),q=S.useCallback(oe=>{if(n==="student"){if(!oe){te(!1),L("Please select an answer");return}te(!0),L("")}},[n]),ne=S.useCallback(oe=>{if(n==="teacher"){if(!oe||oe.trim().length<10){te(!1),L("Question must be at least 10 characters long");return}te(!0),L("")}},[n]),X=S.useCallback(oe=>{if(n==="teacher"){if(!oe){te(!1),L("Please select a correct answer");return}te(!0),L("")}},[n]),se=S.useCallback(()=>{if(n!=="teacher"||!c)return;const oe={question_id:e.question_id,question:D,correct_answer:j,type:"true_false"};c(oe)},[n,c,e?.question_id,D,j]),ce=S.useCallback(oe=>oe?ha(oe,!1):"",[]),pe=()=>l.jsxs("div",{className:`rounded-xl border-2 p-6 shadow-sm hover:shadow-md transition-shadow duration-200 ${C?Gt(0).className:_?dr(0).className:"bg-white border-gray-200"}`,style:C?{...Gt(0).style,...E.glowRed}:_?{...dr(0).style,...E.glow}:{},children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h4",{className:`text-lg font-semibold ${C||_?"":"text-gray-800"}`,style:C?{...E.textCyan,fontFamily:"monospace"}:_?{...E.headerText}:{},children:C?`QUESTION ${typeof s=="number"?s:e?.question_id}`:`Question ${typeof s=="number"?s:e?.question_id}`}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[Q&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),G&&!Q&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",G]})]})]}),l.jsx("div",{className:`question-text mb-6 leading-relaxed ${C?"":"text-gray-700"}`,style:C?{color:fe.cyan,fontFamily:"monospace",...E.textShadow}:{},dangerouslySetInnerHTML:{__html:ce(D)}}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${C?"border":A==="true"?"border-blue-500 bg-blue-50 hover:bg-gray-50":"border-gray-200 hover:bg-gray-50"} ${h&&j==="true"?"ring-2 ring-green-400":""}`,style:C?{backgroundColor:fe.black,borderColor:fe.cyan,...A==="true"?E.glow:{}}:{},children:[l.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"true",checked:A==="true",onChange:()=>M("true"),className:"sr-only","aria-label":"True"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${C?"border":_?A==="true"?"border-pink-500 bg-pink-500":"border-pink-500/50":A==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,style:C?{borderColor:fe.cyan,backgroundColor:A==="true"?fe.cyan:"transparent"}:_?{borderColor:A==="true"?ze.primary:ze.border,backgroundColor:A==="true"?ze.primary:"transparent",...A==="true"?{...E.glow,boxShadow:`${E.glow.boxShadow}, 0 0 15px ${ze.primary}`}:{}}:{},children:A==="true"&&l.jsx("div",{className:`w-2 h-2 rounded-full ${C?"":"bg-white"}`,style:C?{backgroundColor:fe.black}:{}})}),l.jsx("span",{className:`font-medium ${C||_?"":"text-gray-800"}`,style:C?{...E.textCyan,fontFamily:"monospace"}:_?{...E.textWhite}:{},children:C?"TRUE":"True"})]}),l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 ${C?"border":A==="false"?"border-blue-500 bg-blue-50 hover:bg-gray-50":"border-gray-200 hover:bg-gray-50"} ${h&&j==="false"?"ring-2 ring-green-400":""}`,style:C?{backgroundColor:fe.black,borderColor:fe.cyan,...A==="false"?E.glow:{}}:{},children:[l.jsx("input",{type:"radio",name:`question_${e?.question_id}`,value:"false",checked:A==="false",onChange:()=>M("false"),className:"sr-only","aria-label":"False"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${C?"border":_?A==="false"?"border-pink-500 bg-pink-500":"border-pink-500/50":A==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,style:C?{borderColor:fe.cyan,backgroundColor:A==="false"?fe.cyan:"transparent"}:_?{borderColor:A==="false"?ze.primary:ze.border,backgroundColor:A==="false"?ze.primary:"transparent",...A==="false"?{...E.glow,boxShadow:`${E.glow.boxShadow}, 0 0 15px ${ze.primary}`}:{}}:{},children:A==="false"&&l.jsx("div",{className:`w-2 h-2 rounded-full ${C?"":"bg-white"}`,style:C?{backgroundColor:fe.black}:{}})}),l.jsx("span",{className:`font-medium ${C||_?"":"text-gray-800"}`,style:C?{...E.textCyan,fontFamily:"monospace"}:_?{...E.textWhite}:{},children:C?"FALSE":"False"})]})]}),!re&&ee&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:ee})]}),be=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[Q&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),G&&!Q&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",G]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:`question_${e?.question_id}`,value:D,onChange:oe=>I(oe.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),l.jsx(Ml,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:oe=>I(oe.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Correct Answer *"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${j==="true"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[l.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"true",checked:j==="true",onChange:()=>z("true"),className:"sr-only","aria-label":"True"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${j==="true"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:j==="true"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"True"})]}),l.jsxs("label",{className:`flex items-center p-4 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:bg-gray-50 ${j==="false"?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[l.jsx("input",{type:"radio",name:`correct_${e?.question_id}`,value:"false",checked:j==="false",onChange:()=>z("false"),className:"sr-only","aria-label":"False"}),l.jsx("div",{className:`w-5 h-5 rounded-full border-2 mr-3 flex items-center justify-center ${j==="false"?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:j==="false"&&l.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),l.jsx("span",{className:"text-gray-800 font-medium",children:"False"})]})]})]})]}),!re&&ee&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:ee}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(ht,{variant:"success",onClick:se,disabled:!re||d,className:"w-full sm:w-auto",children:d?l.jsx(pn,{size:"small"}):"Save Question"})})]});return l.jsx("div",{className:"true-false-question-container",children:n==="student"?pe():be()})},jae=({question:e,testId:t,testType:r="multiple_choice",mode:n="student",studentAnswer:s,onAnswerChange:a,onQuestionChange:i,onOptionAdd:o,onOptionRemove:c,onSave:u,isEditing:d=!1,isSaving:f=!1,validationErrors:h={},showCorrectAnswers:g=!1,studentId:p=null,displayNumber:y})=>{const{getItem:v,setItem:C}=z_(),{showNotification:w}=di(),{theme:_,isCyberpunk:T,isLight:E,isKpop:A,themeClasses:F}=Ra(),j=Da(_);S.useRef(null);const[P,D]=S.useState(""),[B,V]=S.useState(["","","",""]),[Y,re]=S.useState(""),[te,ee]=S.useState(""),[L,Q]=S.useState(!1),[U,G]=S.useState(!0),[W,M]=S.useState(""),[I,z]=S.useState(!1),[q,ne]=S.useState(null);S.useEffect(()=>{if(e&&(ee(e.question||""),V(e.options||["","","",""]),re(e.correct_answer||""),n==="student"&&p)){const at=v(`test_progress_${p}_${r}_${t}_${e.question_id}`);at&&D(at)}},[e,t,r,n,v]),S.useEffect(()=>{n==="student"&&s!==void 0&&s!==null&&(console.log(" MultipleChoiceQuestion syncing with parent studentAnswer:",s),D(s))},[s,n]),S.useEffect(()=>{if(n==="student"&&P&&t&&e?.question_id&&p){const at=setTimeout(()=>{z(!0),C(`test_progress_${p}_${r}_${t}_${e.question_id}`,P),ne(new Date().toLocaleTimeString()),setTimeout(()=>z(!1),1e3)},1e3);return()=>clearTimeout(at)}},[P,t,r,e?.question_id,n,p,C]),S.useEffect(()=>{if(n==="teacher"&&(te||B.some(at=>at.trim()))){const at=setTimeout(()=>{z(!0);const gt={question:te,options:B,correct_answer:Y,timestamp:Date.now()};C(`teacher_form_${r}_${t}`,gt),ne(new Date().toLocaleTimeString()),setTimeout(()=>z(!1),1e3)},2e3);return()=>clearTimeout(at)}},[te,B,Y,t,r,n,C]),S.useCallback(at=>{if(n!=="student")return;const gt=String(at);D(gt),a&&a(e.question_id,gt),oe(gt)},[n,e?.question_id,a]);const X=S.useCallback(at=>{ee(at),i&&i(e.question_id,at),je(at)},[e?.question_id,i]),se=S.useCallback((at,gt)=>{const Te=[...B];Te[at]=gt,V(Te),i&&i(e.question_id,{...e,options:Te}),Re(Te)},[B,e,i]),ce=S.useCallback(at=>{re(at),i&&i(e.question_id,{...e,correct_answer:at}),Xe(at)},[e,i]),pe=S.useCallback(()=>{if(B.length<6){const at=[...B,""];V(at),o&&o(e.question_id,at)}else w("Maximum 6 options allowed","warning")},[B,e?.question_id,o,w]),be=S.useCallback(at=>{if(B.length>2){const gt=B.filter((Te,bt)=>bt!==at);if(V(gt),Y===String.fromCharCode(65+at))re("");else if(Y&&String.fromCharCode(65+at)<Y){const Te=String.fromCharCode(65+at-1);re(Te)}c&&c(e.question_id,gt)}else w("Minimum 2 options required","warning")},[B,Y,e?.question_id,c,w]),oe=S.useCallback(at=>{if(n==="student"){if(!at){G(!1),M("Please select an answer");return}G(!0),e?.correct_answer&&at===e.correct_answer?M(" Correct answer!"):e?.correct_answer?M(" Incorrect answer"):M("Answer selected")}},[n,e?.correct_answer]),je=S.useCallback(at=>!at||at.trim().length<10?(G(!1),M("Question must be at least 10 characters long"),!1):(G(!0),M(""),!0),[]),Re=S.useCallback(at=>{if(n!=="teacher")return;if(at.filter(Te=>Te.trim().length>0).length<2){G(!1),M("At least 2 options must be filled");return}if(at.some(Te=>Te.trim().length>0&&Te.trim().length<3)){G(!1),M("Each option must be at least 3 characters long");return}G(!0),M("")},[n]),Xe=S.useCallback(at=>{if(n==="teacher"){if(!at){G(!1),M("Please select a correct answer");return}G(!0),M("")}},[n]),ft=S.useCallback(()=>{if(n!=="teacher"||!u)return;const at={question_id:e.question_id,question:te,options:B.filter(gt=>gt.trim().length>0),correct_answer:Y,type:"multiple_choice"};u(at)},[n,u,e?.question_id,te,B,Y]),Je=S.useCallback(at=>at?ha(at,!1):"",[]);return n==="teacher"?l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e?.question_id||"New Question"]}),l.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[I&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),q&&!I&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",q]})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:`question_${e?.question_id}`,value:te,onChange:at=>X(at.target.value),placeholder:"Enter your question here...",className:"w-full px-4 py-3 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200 resize-none",rows:3,required:!0}),l.jsx(Ml,{inputRef:()=>document.getElementById(`question_${e?.question_id}`),onChange:at=>X(at.target.value)})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Answer Options *"}),l.jsx(ht,{variant:"secondary",size:"small",onClick:pe,disabled:B.length>=6,className:"px-3 py-1 text-sm",children:"+ Add Option"})]}),l.jsx("div",{className:"space-y-3",children:B.map((at,gt)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+gt)}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:at,onChange:Te=>se(gt,Te.target.value),placeholder:`Option ${String.fromCharCode(65+gt)}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e?.question_id,"data-option-index":gt,required:!0}),l.jsx(Ml,{inputRef:()=>document.querySelector(`[data-question-id="${e?.question_id}"][data-option-index="${gt}"]`),onChange:Te=>se(gt,Te.target.value)})]}),B.length>2&&l.jsx(ht,{variant:"danger",size:"small",onClick:()=>be(gt),className:"px-2 py-1 text-sm",children:""})]},gt))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`correct_${e?.question_id}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{id:`correct_${e?.question_id}`,value:Y,onChange:at=>ce(at.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200",required:!0,children:[l.jsx("option",{value:"",children:"Select correct answer"}),B.map((at,gt)=>{if(!at.trim())return null;const Te=String.fromCharCode(65+gt);return l.jsxs("option",{value:Te,children:[Te,") ",at]},gt)})]})]})]}),!U&&W&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:W}),l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(ht,{variant:"success",onClick:ft,disabled:!U||f,className:"w-full sm:w-auto",children:f?l.jsx(pn,{size:"small"}):"Save Question"})})]}):l.jsxs("div",{className:`rounded-xl border-2 p-6 shadow-sm hover:shadow-md transition-shadow duration-200 ${T?Gt(0).className:A?dr(0).className:"bg-white border-gray-200"}`,style:T?{...Gt(0).style,...j.glowRed}:A?{...dr(0).style,...j.glow}:{},children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h4",{className:`text-lg font-semibold ${T||A?"":"text-gray-800"}`,style:T?{...j.textCyan,fontFamily:"monospace"}:A?{...j.headerText}:{},children:T?`QUESTION ${typeof y=="number"?y:e?.question_id}`:`Question ${typeof y=="number"?y:e?.question_id}`}),l.jsxs("div",{className:`flex items-center space-x-2 text-sm ${T||A?"":"text-gray-500"}`,style:T?{color:fe.cyan,fontFamily:"monospace"}:A?{...j.textAccent}:{},children:[I&&l.jsxs("div",{className:"flex items-center space-x-1",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]}),q&&!I&&l.jsxs("div",{className:"text-green-600",children:[" Saved at ",q]})]})]}),l.jsx("div",{className:`question-text mb-6 leading-relaxed ${T?"":A?"text-violet-900":"text-gray-700"}`,style:T?{color:fe.cyan,fontFamily:"monospace",...j.textShadow}:A?{color:ze.text}:{},dangerouslySetInnerHTML:{__html:Je(te)}}),l.jsx("div",{className:"space-y-3",children:B.map((at,gt)=>l.jsxs("label",{className:`flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 ${T?"border":A?P===String.fromCharCode(65+gt)?"border-pink-500 bg-pink-500/20":"border-pink-500/50 hover:border-pink-500":P===String.fromCharCode(65+gt)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,style:T?{backgroundColor:fe.black,borderColor:(P===String.fromCharCode(65+gt),fe.cyan),...P===String.fromCharCode(65+gt)?j.glow:{}}:A?{backgroundColor:P===String.fromCharCode(65+gt)?ze.backgroundSecondary:ze.background,borderColor:P===String.fromCharCode(65+gt)?ze.primary:ze.border,...P===String.fromCharCode(65+gt)?j.glow:{}}:{},children:[l.jsx("input",{type:"radio",name:`mcq_${t}_${e?.question_id}`,value:String.fromCharCode(65+gt),checked:P===String.fromCharCode(65+gt),onChange:Te=>{D(Te.target.value),a&&a(e?.question_id,Te.target.value)},className:"mr-3"}),l.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold mr-3 ${T?"":A?P===String.fromCharCode(65+gt)?"bg-pink-500 text-white":"bg-pink-500/20 text-pink-400":"bg-gray-100 text-gray-600"}`,style:T?{backgroundColor:P===String.fromCharCode(65+gt)?fe.cyan:fe.black,border:`2px solid ${fe.cyan}`,color:P===String.fromCharCode(65+gt)?fe.black:fe.cyan,fontFamily:"monospace"}:A?{backgroundColor:P===String.fromCharCode(65+gt)?ze.primary:ze.background,border:`2px solid ${P===String.fromCharCode(65+gt)?ze.primary:ze.border}`,color:P===String.fromCharCode(65+gt)?ze.white:ze.primary,...P===String.fromCharCode(65+gt)?{...j.glow,boxShadow:`${j.glow.boxShadow}, 0 0 15px ${ze.primary}`}:{}}:{},children:String.fromCharCode(65+gt)}),l.jsx("span",{className:`flex-1 ${T?"":A?"text-violet-900":""}`,style:T?{color:fe.cyan,fontFamily:"monospace"}:A?{color:ze.text}:{},dangerouslySetInnerHTML:{__html:at?ha(at):`Option ${String.fromCharCode(65+gt)}`}})]},gt))}),!U&&W&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:W})]})},Pae=({question:e,testId:t,testType:r="input",mode:n="student",displayNumber:s,studentAnswer:a,onAnswerChange:i,onQuestionChange:o,onAnswerAdd:c,onAnswerRemove:u,onSave:d,isEditing:f=!1,isSaving:h=!1,validationErrors:g={},showCorrectAnswers:p=!1,studentId:y=null})=>{const{getItem:v,setItem:C}=z_(),{showNotification:w}=di(),{theme:_,isCyberpunk:T,isLight:E,isKpop:A,themeClasses:F}=Ra(),j=Da(_),P=S.useRef(null),[D,B]=S.useState(""),[V,Y]=S.useState([""]),[re,te]=S.useState(!1),[ee,L]=S.useState(!0),[Q,U]=S.useState(""),[G,W]=S.useState(!1);S.useEffect(()=>{if(n==="student"&&e?.question_id&&t&&r&&y){const je=`test_progress_${y}_${r}_${t}_${e.question_id}`,Re=v(je);Re&&B(Re)}},[e?.question_id,r,t,n,y,v]),S.useEffect(()=>{n==="student"&&a!==void 0&&a!==null&&(console.log(" InputQuestion syncing with parent studentAnswer:",a),B(a))},[a,n]),S.useEffect(()=>{n==="teacher"&&e?.answers&&Y(e.answers.length>0?e.answers:[""])},[e?.answers,n]),S.useEffect(()=>{if(n==="student"&&D&&e?.question_id&&t&&r&&y){const je=setTimeout(()=>{W(!0),C(`test_progress_${y}_${r}_${t}_${e.question_id}`,D),setTimeout(()=>W(!1),1e3)},1e3);return()=>clearTimeout(je)}},[D,e?.question_id,r,t,n,y,C]),S.useEffect(()=>{if(n==="teacher"&&V&&o){const je=setTimeout(()=>{o({...e,answers:V.filter(Re=>Re.trim())})},500);return()=>clearTimeout(je)}},[V,e,n,o]);const M=S.useCallback(je=>{B(je);const Re=je.trim().length>0;L(Re),U(Re?"":"Please enter an answer"),i&&i(e.question_id,je)},[e?.question_id,i]),I=S.useCallback((je,Re)=>{const Xe=[...V];Xe[je]=Re,Y(Xe),i&&i(e.question_id,Xe)},[V,e?.question_id,i]),z=S.useCallback(()=>{if(n==="teacher"){const je=[...V,""];Y(je),c&&c(e.question_id,je)}},[V,e?.question_id,n,c]),q=S.useCallback(je=>{if(n==="teacher"&&V.length>1){const Re=V.filter((Xe,ft)=>ft!==je);Y(Re),u&&u(e.question_id,Re)}},[V,e?.question_id,n,u]),ne=S.useCallback(()=>{if(n==="student"){const je=D.trim().length>0;return L(je),U(je?"":"Please enter an answer"),je}else if(n==="teacher"){const je=V.some(Re=>Re.trim().length>0);return L(je),U(je?"":"Please enter at least one correct answer"),je}return!0},[D,V,n]),X=S.useCallback(je=>je?ha(je,!1):"",[]),se=S.useCallback(()=>{te(!0)},[]),ce=S.useCallback(()=>{te(!1),ne()},[ne]),pe=S.useCallback(je=>{je.key==="Enter"&&n==="student"&&D.trim()&&(C(`test_progress_${r}_${t}_${e.question_id}`,D),w("Answer saved","success"))},[D,r,t,e?.question_id,n,C,w]),be=()=>l.jsxs("div",{className:`rounded-xl border-2 p-6 shadow-sm hover:shadow-md transition-shadow duration-200 ${T?Gt(0).className:A?dr(0).className:"bg-white border-gray-200"}`,style:T?{...Gt(0).style,...j.glowRed}:A?{...dr(0).style,...j.glow}:{},children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h4",{className:`text-lg font-semibold ${T||A?"":"text-gray-800"}`,style:T?{...j.textCyan,fontFamily:"monospace"}:A?{...j.headerText}:{},children:T?`QUESTION ${typeof s=="number"?s:e.question_id}`:`Question ${typeof s=="number"?s:e.question_id}`}),G&&l.jsxs("div",{className:`flex items-center space-x-1 text-sm ${T||A?"":"text-gray-500"}`,style:T?{color:fe.cyan,fontFamily:"monospace"}:A?{...j.textAccent}:{},children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]})]}),l.jsx("div",{className:`question-text mb-6 leading-relaxed ${T?"":"text-gray-700"}`,style:T?{color:fe.cyan,fontFamily:"monospace",...j.textShadow}:{},dangerouslySetInnerHTML:{__html:X(e.question)}}),l.jsx("div",{className:"space-y-3",children:l.jsx("div",{className:"relative",children:l.jsx("input",{ref:P,type:"text",id:`input_${e.question_id}`,placeholder:T?"ENTER YOUR ANSWER HERE...":"Enter your answer here...",value:D,onChange:je=>M(je.target.value),onFocus:se,onBlur:ce,onKeyPress:pe,className:`w-full px-4 py-3 pr-10 border-2 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 ${T?"border":ee?re?"border-blue-500 text-gray-800 placeholder-gray-400 focus:ring-blue-500":"border-gray-300 hover:border-gray-400 text-gray-800 placeholder-gray-400":"border-red-300 focus:border-red-500 focus:ring-red-500 text-gray-800 placeholder-gray-400"}`,style:T?{backgroundColor:fe.black,borderColor:ee?fe.cyan:fe.red,color:fe.cyan,fontFamily:"monospace",...re?j.glow:{},...re?{}:{}}:{},"data-question-id":e.question_id,"aria-label":`Answer for question ${e.question_id}`,"aria-invalid":!ee,"aria-describedby":ee?void 0:`error-${e.question_id}`})})}),p&&e.correct_answers&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[l.jsx("h5",{className:"text-sm font-semibold text-green-800 mb-2",children:"Correct Answers:"}),l.jsx("ul",{className:"space-y-1",children:e.correct_answers.map((je,Re)=>l.jsx("li",{className:"text-green-700 text-sm",dangerouslySetInnerHTML:{__html:` ${ha(je,!1)}`}},Re))})]})]}),oe=()=>l.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-800",children:["Question ",e.question_id||"New"]}),h&&l.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:"Saving..."})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`question_${e.question_id||"new"}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",id:`question_${e.question_id||"new"}`,value:e.question||"",onChange:je=>o&&o({...e,question:je.target.value}),placeholder:"Enter question text",className:`w-full px-4 py-3 pr-10 border-2 rounded-lg text-gray-800 placeholder-gray-400 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 ${g.question?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 hover:border-gray-400 focus:border-blue-500"}`}),l.jsx(MathEditorButton,{inputRef:()=>document.getElementById(`question_${e.question_id||"new"}`),onChange:je=>o&&o({...e,question:je.target.value})})]}),g.question&&l.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.question})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Correct Answers *"}),l.jsx(ht,{type:"button",variant:"secondary",size:"small",onClick:z,className:"px-3 py-1 text-sm",children:"+ Add Answer"})]}),l.jsx("div",{className:"space-y-3",children:V.map((je,Re)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:Re+1}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:je,onChange:Xe=>I(Re,Xe.target.value),placeholder:`Correct answer ${Re+1}`,className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200","data-question-id":e.question_id,"data-answer-index":Re}),l.jsx(MathEditorButton,{inputRef:()=>document.querySelector(`[data-question-id="${e.question_id}"][data-answer-index="${Re}"]`),onChange:Xe=>I(Re,Xe.target.value)})]}),V.length>1&&l.jsx(ht,{type:"button",variant:"danger",size:"small",onClick:()=>q(Re),className:"px-2 py-1 text-sm",children:" Remove"})]},Re))}),g.answers&&l.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:g.answers})]})]}),d&&l.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:l.jsx(ht,{type:"button",variant:"success",onClick:d,disabled:h,className:"w-full sm:w-auto",children:h?l.jsx(pn,{size:"small"}):"Save Question"})})]});return l.jsx("div",{className:`input-question-container ${n} ${re?"focused":""}`,children:n==="student"?be():oe()})};var Zw={exports:{}},Rx={},f5={},h5={},tP;function Mn(){return tP||(tP=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function r(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof l4<"u"?l4:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.22",isBrowser:r(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(h5)),h5}var m5={},rP;function ba(){return rP||(rP=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=Mn();class r{constructor(T=[1,0,0,1,0,0]){this.dirty=!1,this.m=T&&T.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(T){T.m[0]=this.m[0],T.m[1]=this.m[1],T.m[2]=this.m[2],T.m[3]=this.m[3],T.m[4]=this.m[4],T.m[5]=this.m[5]}point(T){const E=this.m;return{x:E[0]*T.x+E[2]*T.y+E[4],y:E[1]*T.x+E[3]*T.y+E[5]}}translate(T,E){return this.m[4]+=this.m[0]*T+this.m[2]*E,this.m[5]+=this.m[1]*T+this.m[3]*E,this}scale(T,E){return this.m[0]*=T,this.m[1]*=T,this.m[2]*=E,this.m[3]*=E,this}rotate(T){const E=Math.cos(T),A=Math.sin(T),F=this.m[0]*E+this.m[2]*A,j=this.m[1]*E+this.m[3]*A,P=this.m[0]*-A+this.m[2]*E,D=this.m[1]*-A+this.m[3]*E;return this.m[0]=F,this.m[1]=j,this.m[2]=P,this.m[3]=D,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(T,E){const A=this.m[0]+this.m[2]*E,F=this.m[1]+this.m[3]*E,j=this.m[2]+this.m[0]*T,P=this.m[3]+this.m[1]*T;return this.m[0]=A,this.m[1]=F,this.m[2]=j,this.m[3]=P,this}multiply(T){const E=this.m[0]*T.m[0]+this.m[2]*T.m[1],A=this.m[1]*T.m[0]+this.m[3]*T.m[1],F=this.m[0]*T.m[2]+this.m[2]*T.m[3],j=this.m[1]*T.m[2]+this.m[3]*T.m[3],P=this.m[0]*T.m[4]+this.m[2]*T.m[5]+this.m[4],D=this.m[1]*T.m[4]+this.m[3]*T.m[5]+this.m[5];return this.m[0]=E,this.m[1]=A,this.m[2]=F,this.m[3]=j,this.m[4]=P,this.m[5]=D,this}invert(){const T=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),E=this.m[3]*T,A=-this.m[1]*T,F=-this.m[2]*T,j=this.m[0]*T,P=T*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),D=T*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=E,this.m[1]=A,this.m[2]=F,this.m[3]=j,this.m[4]=P,this.m[5]=D,this}getMatrix(){return this.m}decompose(){const T=this.m[0],E=this.m[1],A=this.m[2],F=this.m[3],j=this.m[4],P=this.m[5],D=T*F-E*A,B={x:j,y:P,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(T!=0||E!=0){const V=Math.sqrt(T*T+E*E);B.rotation=E>0?Math.acos(T/V):-Math.acos(T/V),B.scaleX=V,B.scaleY=D/V,B.skewX=(T*A+E*F)/D,B.skewY=0}else if(A!=0||F!=0){const V=Math.sqrt(A*A+F*F);B.rotation=Math.PI/2-(F>0?Math.acos(-A/V):-Math.acos(A/V)),B.scaleX=D/V,B.scaleY=V,B.skewX=0,B.skewY=(T*A+E*F)/D}return B.rotation=e.Util._getRotation(B.rotation),B}}e.Transform=r;const n="[object Array]",s="[object Number]",a="[object String]",i="[object Boolean]",o=Math.PI/180,c=180/Math.PI,u="#",d="",f="0",h="Konva warning: ",g="Konva error: ",p="rgb(",y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},v=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let C=[];const w=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(_){setTimeout(_,60)};e.Util={_isElement(_){return!!(_&&_.nodeType==1)},_isFunction(_){return!!(_&&_.constructor&&_.call&&_.apply)},_isPlainObject(_){return!!_&&_.constructor===Object},_isArray(_){return Object.prototype.toString.call(_)===n},_isNumber(_){return Object.prototype.toString.call(_)===s&&!isNaN(_)&&isFinite(_)},_isString(_){return Object.prototype.toString.call(_)===a},_isBoolean(_){return Object.prototype.toString.call(_)===i},isObject(_){return _ instanceof Object},isValidSelector(_){if(typeof _!="string")return!1;const T=_[0];return T==="#"||T==="."||T===T.toUpperCase()},_sign(_){return _===0||_>0?1:-1},requestAnimFrame(_){C.push(_),C.length===1&&w(function(){const T=C;C=[],T.forEach(function(E){E()})})},createCanvasElement(){const _=document.createElement("canvas");try{_.style=_.style||{}}catch{}return _},createImageElement(){return document.createElement("img")},_isInDocument(_){for(;_=_.parentNode;)if(_==document)return!0;return!1},_urlToImage(_,T){const E=e.Util.createImageElement();E.onload=function(){T(E)},E.src=_},_rgbToHex(_,T,E){return((1<<24)+(_<<16)+(T<<8)+E).toString(16).slice(1)},_hexToRgb(_){_=_.replace(u,d);const T=parseInt(_,16);return{r:T>>16&255,g:T>>8&255,b:T&255}},getRandomColor(){let _=(Math.random()*16777215<<0).toString(16);for(;_.length<6;)_=f+_;return u+_},getRGB(_){let T;return _ in y?(T=y[_],{r:T[0],g:T[1],b:T[2]}):_[0]===u?this._hexToRgb(_.substring(1)):_.substr(0,4)===p?(T=v.exec(_.replace(/ /g,"")),{r:parseInt(T[1],10),g:parseInt(T[2],10),b:parseInt(T[3],10)}):{r:0,g:0,b:0}},colorToRGBA(_){return _=_||"black",e.Util._namedColorToRBA(_)||e.Util._hex3ColorToRGBA(_)||e.Util._hex4ColorToRGBA(_)||e.Util._hex6ColorToRGBA(_)||e.Util._hex8ColorToRGBA(_)||e.Util._rgbColorToRGBA(_)||e.Util._rgbaColorToRGBA(_)||e.Util._hslColorToRGBA(_)},_namedColorToRBA(_){const T=y[_.toLowerCase()];return T?{r:T[0],g:T[1],b:T[2],a:1}:null},_rgbColorToRGBA(_){if(_.indexOf("rgb(")===0){_=_.match(/rgb\(([^)]+)\)/)[1];const T=_.split(/ *, */).map(Number);return{r:T[0],g:T[1],b:T[2],a:1}}},_rgbaColorToRGBA(_){if(_.indexOf("rgba(")===0){_=_.match(/rgba\(([^)]+)\)/)[1];const T=_.split(/ *, */).map((E,A)=>E.slice(-1)==="%"?A===3?parseInt(E)/100:parseInt(E)/100*255:Number(E));return{r:T[0],g:T[1],b:T[2],a:T[3]}}},_hex8ColorToRGBA(_){if(_[0]==="#"&&_.length===9)return{r:parseInt(_.slice(1,3),16),g:parseInt(_.slice(3,5),16),b:parseInt(_.slice(5,7),16),a:parseInt(_.slice(7,9),16)/255}},_hex6ColorToRGBA(_){if(_[0]==="#"&&_.length===7)return{r:parseInt(_.slice(1,3),16),g:parseInt(_.slice(3,5),16),b:parseInt(_.slice(5,7),16),a:1}},_hex4ColorToRGBA(_){if(_[0]==="#"&&_.length===5)return{r:parseInt(_[1]+_[1],16),g:parseInt(_[2]+_[2],16),b:parseInt(_[3]+_[3],16),a:parseInt(_[4]+_[4],16)/255}},_hex3ColorToRGBA(_){if(_[0]==="#"&&_.length===4)return{r:parseInt(_[1]+_[1],16),g:parseInt(_[2]+_[2],16),b:parseInt(_[3]+_[3],16),a:1}},_hslColorToRGBA(_){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(_)){const[T,...E]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(_),A=Number(E[0])/360,F=Number(E[1])/100,j=Number(E[2])/100;let P,D,B;if(F===0)return B=j*255,{r:Math.round(B),g:Math.round(B),b:Math.round(B),a:1};j<.5?P=j*(1+F):P=j+F-j*F;const V=2*j-P,Y=[0,0,0];for(let re=0;re<3;re++)D=A+1/3*-(re-1),D<0&&D++,D>1&&D--,6*D<1?B=V+(P-V)*6*D:2*D<1?B=P:3*D<2?B=V+(P-V)*(2/3-D)*6:B=V,Y[re]=B*255;return{r:Math.round(Y[0]),g:Math.round(Y[1]),b:Math.round(Y[2]),a:1}}},haveIntersection(_,T){return!(T.x>_.x+_.width||T.x+T.width<_.x||T.y>_.y+_.height||T.y+T.height<_.y)},cloneObject(_){const T={};for(const E in _)this._isPlainObject(_[E])?T[E]=this.cloneObject(_[E]):this._isArray(_[E])?T[E]=this.cloneArray(_[E]):T[E]=_[E];return T},cloneArray(_){return _.slice(0)},degToRad(_){return _*o},radToDeg(_){return _*c},_degToRad(_){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(_)},_radToDeg(_){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(_)},_getRotation(_){return t.Konva.angleDeg?e.Util.radToDeg(_):_},_capitalize(_){return _.charAt(0).toUpperCase()+_.slice(1)},throw(_){throw new Error(g+_)},error(_){console.error(g+_)},warn(_){t.Konva.showWarnings&&console.warn(h+_)},each(_,T){for(const E in _)T(E,_[E])},_inRange(_,T,E){return T<=_&&_<E},_getProjectionToSegment(_,T,E,A,F,j){let P,D,B;const V=(_-E)*(_-E)+(T-A)*(T-A);if(V==0)P=_,D=T,B=(F-E)*(F-E)+(j-A)*(j-A);else{const Y=((F-_)*(E-_)+(j-T)*(A-T))/V;Y<0?(P=_,D=T,B=(_-F)*(_-F)+(T-j)*(T-j)):Y>1?(P=E,D=A,B=(E-F)*(E-F)+(A-j)*(A-j)):(P=_+Y*(E-_),D=T+Y*(A-T),B=(P-F)*(P-F)+(D-j)*(D-j))}return[P,D,B]},_getProjectionToLine(_,T,E){const A=e.Util.cloneObject(_);let F=Number.MAX_VALUE;return T.forEach(function(j,P){if(!E&&P===T.length-1)return;const D=T[(P+1)%T.length],B=e.Util._getProjectionToSegment(j.x,j.y,D.x,D.y,_.x,_.y),V=B[0],Y=B[1],re=B[2];re<F&&(A.x=V,A.y=Y,F=re)}),A},_prepareArrayForTween(_,T,E){const A=[],F=[];if(_.length>T.length){const P=T;T=_,_=P}for(let P=0;P<_.length;P+=2)A.push({x:_[P],y:_[P+1]});for(let P=0;P<T.length;P+=2)F.push({x:T[P],y:T[P+1]});const j=[];return F.forEach(function(P){const D=e.Util._getProjectionToLine(P,A,E);j.push(D.x),j.push(D.y)}),j},_prepareToStringify(_){let T;_.visitedByCircularReferenceRemoval=!0;for(const E in _)if(_.hasOwnProperty(E)&&_[E]&&typeof _[E]=="object"){if(T=Object.getOwnPropertyDescriptor(_,E),_[E].visitedByCircularReferenceRemoval||e.Util._isElement(_[E]))if(T.configurable)delete _[E];else return null;else if(e.Util._prepareToStringify(_[E])===null)if(T.configurable)delete _[E];else return null}return delete _.visitedByCircularReferenceRemoval,_},_assign(_,T){for(const E in T)_[E]=T[E];return _},_getFirstPointerId(_){return _.touches?_.changedTouches[0].identifier:_.pointerId||999},releaseCanvas(..._){t.Konva.releaseCanvasOnDestroy&&_.forEach(T=>{T.width=0,T.height=0})},drawRoundedRectPath(_,T,E,A){let F=0,j=0,P=0,D=0;typeof A=="number"?F=j=P=D=Math.min(A,T/2,E/2):(F=Math.min(A[0]||0,T/2,E/2),j=Math.min(A[1]||0,T/2,E/2),D=Math.min(A[2]||0,T/2,E/2),P=Math.min(A[3]||0,T/2,E/2)),_.moveTo(F,0),_.lineTo(T-j,0),_.arc(T-j,j,j,Math.PI*3/2,0,!1),_.lineTo(T,E-D),_.arc(T-D,E-D,D,0,Math.PI/2,!1),_.lineTo(P,E),_.arc(P,E-P,P,Math.PI/2,Math.PI,!1),_.lineTo(0,F),_.arc(F,F,F,Math.PI,Math.PI*3/2,!1)}}})(m5)),m5}var Ix={},$d={},Ud={},nP;function ZU(){if(nP)return Ud;nP=1,Object.defineProperty(Ud,"__esModule",{value:!0}),Ud.HitContext=Ud.SceneContext=Ud.Context=void 0;const e=ba(),t=Mn();function r(C){const w=[],_=C.length,T=e.Util;for(let E=0;E<_;E++){let A=C[E];T._isNumber(A)?A=Math.round(A*1e3)/1e3:T._isString(A)||(A=A+""),w.push(A)}return w}const n=",",s="(",a=")",i="([",o="])",c=";",u="()",d="=",f=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],h=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],g=100;let p=class{constructor(w){this.canvas=w,t.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(w){w.fillEnabled()&&this._fill(w)}_fill(w){}strokeShape(w){w.hasStroke()&&this._stroke(w)}_stroke(w){}fillStrokeShape(w){w.attrs.fillAfterStrokeEnabled?(this.strokeShape(w),this.fillShape(w)):(this.fillShape(w),this.strokeShape(w))}getTrace(w,_){let T=this.traceArr,E=T.length,A="",F,j,P,D;for(F=0;F<E;F++)j=T[F],P=j.method,P?(D=j.args,A+=P,w?A+=u:e.Util._isArray(D[0])?A+=i+D.join(n)+o:(_&&(D=D.map(B=>typeof B=="number"?Math.floor(B):B)),A+=s+D.join(n)+a)):(A+=j.property,w||(A+=d+j.val)),A+=c;return A}clearTrace(){this.traceArr=[]}_trace(w){let _=this.traceArr,T;_.push(w),T=_.length,T>=g&&_.shift()}reset(){const w=this.getCanvas().getPixelRatio();this.setTransform(1*w,0,0,1*w,0,0)}getCanvas(){return this.canvas}clear(w){const _=this.getCanvas();w?this.clearRect(w.x||0,w.y||0,w.width||0,w.height||0):this.clearRect(0,0,_.getWidth()/_.pixelRatio,_.getHeight()/_.pixelRatio)}_applyLineCap(w){const _=w.attrs.lineCap;_&&this.setAttr("lineCap",_)}_applyOpacity(w){const _=w.getAbsoluteOpacity();_!==1&&this.setAttr("globalAlpha",_)}_applyLineJoin(w){const _=w.attrs.lineJoin;_&&this.setAttr("lineJoin",_)}setAttr(w,_){this._context[w]=_}arc(w,_,T,E,A,F){this._context.arc(w,_,T,E,A,F)}arcTo(w,_,T,E,A){this._context.arcTo(w,_,T,E,A)}beginPath(){this._context.beginPath()}bezierCurveTo(w,_,T,E,A,F){this._context.bezierCurveTo(w,_,T,E,A,F)}clearRect(w,_,T,E){this._context.clearRect(w,_,T,E)}clip(...w){this._context.clip.apply(this._context,w)}closePath(){this._context.closePath()}createImageData(w,_){const T=arguments;if(T.length===2)return this._context.createImageData(w,_);if(T.length===1)return this._context.createImageData(w)}createLinearGradient(w,_,T,E){return this._context.createLinearGradient(w,_,T,E)}createPattern(w,_){return this._context.createPattern(w,_)}createRadialGradient(w,_,T,E,A,F){return this._context.createRadialGradient(w,_,T,E,A,F)}drawImage(w,_,T,E,A,F,j,P,D){const B=arguments,V=this._context;B.length===3?V.drawImage(w,_,T):B.length===5?V.drawImage(w,_,T,E,A):B.length===9&&V.drawImage(w,_,T,E,A,F,j,P,D)}ellipse(w,_,T,E,A,F,j,P){this._context.ellipse(w,_,T,E,A,F,j,P)}isPointInPath(w,_,T,E){return T?this._context.isPointInPath(T,w,_,E):this._context.isPointInPath(w,_,E)}fill(...w){this._context.fill.apply(this._context,w)}fillRect(w,_,T,E){this._context.fillRect(w,_,T,E)}strokeRect(w,_,T,E){this._context.strokeRect(w,_,T,E)}fillText(w,_,T,E){E?this._context.fillText(w,_,T,E):this._context.fillText(w,_,T)}measureText(w){return this._context.measureText(w)}getImageData(w,_,T,E){return this._context.getImageData(w,_,T,E)}lineTo(w,_){this._context.lineTo(w,_)}moveTo(w,_){this._context.moveTo(w,_)}rect(w,_,T,E){this._context.rect(w,_,T,E)}roundRect(w,_,T,E,A){this._context.roundRect(w,_,T,E,A)}putImageData(w,_,T){this._context.putImageData(w,_,T)}quadraticCurveTo(w,_,T,E){this._context.quadraticCurveTo(w,_,T,E)}restore(){this._context.restore()}rotate(w){this._context.rotate(w)}save(){this._context.save()}scale(w,_){this._context.scale(w,_)}setLineDash(w){this._context.setLineDash?this._context.setLineDash(w):"mozDash"in this._context?this._context.mozDash=w:"webkitLineDash"in this._context&&(this._context.webkitLineDash=w)}getLineDash(){return this._context.getLineDash()}setTransform(w,_,T,E,A,F){this._context.setTransform(w,_,T,E,A,F)}stroke(w){w?this._context.stroke(w):this._context.stroke()}strokeText(w,_,T,E){this._context.strokeText(w,_,T,E)}transform(w,_,T,E,A,F){this._context.transform(w,_,T,E,A,F)}translate(w,_){this._context.translate(w,_)}_enableTrace(){let w=this,_=f.length,T=this.setAttr,E,A;const F=function(j){let P=w[j],D;w[j]=function(){return A=r(Array.prototype.slice.call(arguments,0)),D=P.apply(w,arguments),w._trace({method:j,args:A}),D}};for(E=0;E<_;E++)F(f[E]);w.setAttr=function(){T.apply(w,arguments);const j=arguments[0];let P=arguments[1];(j==="shadowOffsetX"||j==="shadowOffsetY"||j==="shadowBlur")&&(P=P/this.canvas.getPixelRatio()),w._trace({property:j,val:P})}}_applyGlobalCompositeOperation(w){const _=w.attrs.globalCompositeOperation;!_||_==="source-over"||this.setAttr("globalCompositeOperation",_)}};Ud.Context=p,h.forEach(function(C){Object.defineProperty(p.prototype,C,{get(){return this._context[C]},set(w){this._context[C]=w}})});class y extends p{constructor(w,{willReadFrequently:_=!1}={}){super(w),this._context=w._canvas.getContext("2d",{willReadFrequently:_})}_fillColor(w){const _=w.fill();this.setAttr("fillStyle",_),w._fillFunc(this)}_fillPattern(w){this.setAttr("fillStyle",w._getFillPattern()),w._fillFunc(this)}_fillLinearGradient(w){const _=w._getLinearGradient();_&&(this.setAttr("fillStyle",_),w._fillFunc(this))}_fillRadialGradient(w){const _=w._getRadialGradient();_&&(this.setAttr("fillStyle",_),w._fillFunc(this))}_fill(w){const _=w.fill(),T=w.getFillPriority();if(_&&T==="color"){this._fillColor(w);return}const E=w.getFillPatternImage();if(E&&T==="pattern"){this._fillPattern(w);return}const A=w.getFillLinearGradientColorStops();if(A&&T==="linear-gradient"){this._fillLinearGradient(w);return}const F=w.getFillRadialGradientColorStops();if(F&&T==="radial-gradient"){this._fillRadialGradient(w);return}_?this._fillColor(w):E?this._fillPattern(w):A?this._fillLinearGradient(w):F&&this._fillRadialGradient(w)}_strokeLinearGradient(w){const _=w.getStrokeLinearGradientStartPoint(),T=w.getStrokeLinearGradientEndPoint(),E=w.getStrokeLinearGradientColorStops(),A=this.createLinearGradient(_.x,_.y,T.x,T.y);if(E){for(let F=0;F<E.length;F+=2)A.addColorStop(E[F],E[F+1]);this.setAttr("strokeStyle",A)}}_stroke(w){const _=w.dash(),T=w.getStrokeScaleEnabled();if(w.hasStroke()){if(!T){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(w),_&&w.dashEnabled()&&(this.setLineDash(_),this.setAttr("lineDashOffset",w.dashOffset())),this.setAttr("lineWidth",w.strokeWidth()),w.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),w.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(w):this.setAttr("strokeStyle",w.stroke()),w._strokeFunc(this),T||this.restore()}}_applyShadow(w){var _,T,E;const A=(_=w.getShadowRGBA())!==null&&_!==void 0?_:"black",F=(T=w.getShadowBlur())!==null&&T!==void 0?T:5,j=(E=w.getShadowOffset())!==null&&E!==void 0?E:{x:0,y:0},P=w.getAbsoluteScale(),D=this.canvas.getPixelRatio(),B=P.x*D,V=P.y*D;this.setAttr("shadowColor",A),this.setAttr("shadowBlur",F*Math.min(Math.abs(B),Math.abs(V))),this.setAttr("shadowOffsetX",j.x*B),this.setAttr("shadowOffsetY",j.y*V)}}Ud.SceneContext=y;class v extends p{constructor(w){super(w),this._context=w._canvas.getContext("2d",{willReadFrequently:!0})}_fill(w){this.save(),this.setAttr("fillStyle",w.colorKey),w._fillFuncHit(this),this.restore()}strokeShape(w){w.hasHitStroke()&&this._stroke(w)}_stroke(w){if(w.hasHitStroke()){const _=w.getStrokeScaleEnabled();if(!_){this.save();const A=this.getCanvas().getPixelRatio();this.setTransform(A,0,0,A,0,0)}this._applyLineCap(w);const T=w.hitStrokeWidth(),E=T==="auto"?w.strokeWidth():T;this.setAttr("lineWidth",E),this.setAttr("strokeStyle",w.colorKey),w._strokeFuncHit(this),_||this.restore()}}}return Ud.HitContext=v,Ud}var sP;function X_(){if(sP)return $d;sP=1,Object.defineProperty($d,"__esModule",{value:!0}),$d.HitCanvas=$d.SceneCanvas=$d.Canvas=void 0;const e=ba(),t=ZU(),r=Mn();let n;function s(){if(n)return n;const c=e.Util.createCanvasElement(),u=c.getContext("2d");return n=(function(){const d=r.Konva._global.devicePixelRatio||1,f=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;return d/f})(),e.Util.releaseCanvas(c),n}let a=class{constructor(u){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const f=(u||{}).pixelRatio||r.Konva.pixelRatio||s();this.pixelRatio=f,this._canvas=e.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(u){const d=this.pixelRatio;this.pixelRatio=u,this.setSize(this.getWidth()/d,this.getHeight()/d)}setWidth(u){this.width=this._canvas.width=u*this.pixelRatio,this._canvas.style.width=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}setHeight(u){this.height=this._canvas.height=u*this.pixelRatio,this._canvas.style.height=u+"px";const d=this.pixelRatio;this.getContext()._context.scale(d,d)}getWidth(){return this.width}getHeight(){return this.height}setSize(u,d){this.setWidth(u||0),this.setHeight(d||0)}toDataURL(u,d){try{return this._canvas.toDataURL(u,d)}catch{try{return this._canvas.toDataURL()}catch(h){return e.Util.error("Unable to get data URL. "+h.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};$d.Canvas=a;class i extends a{constructor(u={width:0,height:0,willReadFrequently:!1}){super(u),this.context=new t.SceneContext(this,{willReadFrequently:u.willReadFrequently}),this.setSize(u.width,u.height)}}$d.SceneCanvas=i;class o extends a{constructor(u={width:0,height:0}){super(u),this.hitCanvas=!0,this.context=new t.HitContext(this),this.setSize(u.width,u.height)}}return $d.HitCanvas=o,$d}var g5={},aP;function a7(){return aP||(aP=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=Mn(),r=ba();e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((a,i)=>{const{node:o}=a,c=o.getStage();c.setPointersPositions(n),a.pointerId===void 0&&(a.pointerId=r.Util._getFirstPointerId(n));const u=c._changedPointerPositions.find(d=>d.id===a.pointerId);if(u){if(a.dragStatus!=="dragging"){const d=o.dragDistance();if(Math.max(Math.abs(u.x-a.startPointerPos.x),Math.abs(u.y-a.startPointerPos.y))<d||(o.startDrag({evt:n}),!o.isDragging()))return}o._setDragPosition(n,a),s.push(o)}}),s.forEach(a=>{a.fire("dragmove",{type:"dragmove",target:a,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(a=>{const{node:i}=a,o=i.getStage();if(n&&o.setPointersPositions(n),!o._changedPointerPositions.find(d=>d.id===a.pointerId))return;(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,a.dragStatus="stopped");const u=a.node.getLayer()||a.node instanceof t.Konva.Stage&&a.node;u&&s.indexOf(u)===-1&&s.push(u)}),s.forEach(a=>{a.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,a)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(a)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(g5)),g5}var p5={},ll={},iP;function $n(){if(iP)return ll;iP=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.RGBComponent=n,ll.alphaComponent=s,ll.getNumberValidator=a,ll.getNumberOrArrayOfNumbersValidator=i,ll.getNumberOrAutoValidator=o,ll.getStringValidator=c,ll.getStringOrGradientValidator=u,ll.getFunctionValidator=d,ll.getNumberArrayValidator=f,ll.getBooleanValidator=h,ll.getComponentValidator=g;const e=Mn(),t=ba();function r(p){return t.Util._isString(p)?'"'+p+'"':Object.prototype.toString.call(p)==="[object Number]"||t.Util._isBoolean(p)?p:Object.prototype.toString.call(p)}function n(p){return p>255?255:p<0?0:Math.round(p)}function s(p){return p>1?1:p<1e-4?1e-4:p}function a(){if(e.Konva.isUnminified)return function(p,y){return t.Util._isNumber(p)||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a number.'),p}}function i(p){if(e.Konva.isUnminified)return function(y,v){let C=t.Util._isNumber(y),w=t.Util._isArray(y)&&y.length==p;return!C&&!w&&t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be a number or Array<number>('+p+")"),y}}function o(){if(e.Konva.isUnminified)return function(p,y){return t.Util._isNumber(p)||p==="auto"||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a number or "auto".'),p}}function c(){if(e.Konva.isUnminified)return function(p,y){return t.Util._isString(p)||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a string.'),p}}function u(){if(e.Konva.isUnminified)return function(p,y){const v=t.Util._isString(p),C=Object.prototype.toString.call(p)==="[object CanvasGradient]"||p&&p.addColorStop;return v||C||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a string or a native gradient.'),p}}function d(){if(e.Konva.isUnminified)return function(p,y){return t.Util._isFunction(p)||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a function.'),p}}function f(){if(e.Konva.isUnminified)return function(p,y){const v=Int8Array?Object.getPrototypeOf(Int8Array):null;return v&&p instanceof v||(t.Util._isArray(p)?p.forEach(function(C){t.Util._isNumber(C)||t.Util.warn('"'+y+'" attribute has non numeric element '+C+". Make sure that all elements are numbers.")}):t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a array of numbers.')),p}}function h(){if(e.Konva.isUnminified)return function(p,y){return p===!0||p===!1||t.Util.warn(r(p)+' is a not valid value for "'+y+'" attribute. The value should be a boolean.'),p}}function g(p){if(e.Konva.isUnminified)return function(y,v){return y==null||t.Util.isObject(y)||t.Util.warn(r(y)+' is a not valid value for "'+v+'" attribute. The value should be an object with properties '+p),y}}return ll}var oP;function In(){return oP||(oP=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=ba(),r=$n(),n="get",s="set";e.Factory={addGetterSetter(a,i,o,c,u){e.Factory.addGetter(a,i,o),e.Factory.addSetter(a,i,c,u),e.Factory.addOverloadedGetterSetter(a,i)},addGetter(a,i,o){const c=n+t.Util._capitalize(i);a.prototype[c]=a.prototype[c]||function(){const u=this.attrs[i];return u===void 0?o:u}},addSetter(a,i,o,c){const u=s+t.Util._capitalize(i);a.prototype[u]||e.Factory.overWriteSetter(a,i,o,c)},overWriteSetter(a,i,o,c){const u=s+t.Util._capitalize(i);a.prototype[u]=function(d){return o&&d!==void 0&&d!==null&&(d=o.call(this,d,i)),this._setAttr(i,d),c&&c.call(this),this}},addComponentsGetterSetter(a,i,o,c,u){const d=o.length,f=t.Util._capitalize,h=n+f(i),g=s+f(i);a.prototype[h]=function(){const y={};for(let v=0;v<d;v++){const C=o[v];y[C]=this.getAttr(i+f(C))}return y};const p=(0,r.getComponentValidator)(o);a.prototype[g]=function(y){const v=this.attrs[i];c&&(y=c.call(this,y,i)),p&&p.call(this,y,i);for(const C in y)y.hasOwnProperty(C)&&this._setAttr(i+f(C),y[C]);return y||o.forEach(C=>{this._setAttr(i+f(C),void 0)}),this._fireChangeEvent(i,v,y),u&&u.call(this),this},e.Factory.addOverloadedGetterSetter(a,i)},addOverloadedGetterSetter(a,i){const o=t.Util._capitalize(i),c=s+o,u=n+o;a.prototype[i]=function(){return arguments.length?(this[c](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(a,i,o,c){t.Util.error("Adding deprecated "+i);const u=n+t.Util._capitalize(i),d=i+" property is deprecated and will be removed soon. Look at Konva change log for more information.";a.prototype[u]=function(){t.Util.error(d);const f=this.attrs[i];return f===void 0?o:f},e.Factory.addSetter(a,i,c,function(){t.Util.error(d)}),e.Factory.addOverloadedGetterSetter(a,i)},backCompat(a,i){t.Util.each(i,function(o,c){const u=a.prototype[c],d=n+t.Util._capitalize(o),f=s+t.Util._capitalize(o);function h(){u.apply(this,arguments),t.Util.error('"'+o+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}a.prototype[o]=h,a.prototype[d]=h,a.prototype[f]=h})},afterSetFilter(){this._filterUpToDate=!1}}})(p5)),p5}var lP;function Ia(){if(lP)return Ix;lP=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.Node=void 0;const e=X_(),t=a7(),r=In(),n=Mn(),s=ba(),a=$n(),i="absoluteOpacity",o="allEventListeners",c="absoluteTransform",u="absoluteScale",d="canvas",f="Change",h="children",g="konva",p="listening",y="mouseenter",v="mouseleave",C="pointerenter",w="pointerleave",_="touchenter",T="touchleave",E="set",A="Shape",F=" ",j="stage",P="transform",D="Stage",B="visible",V=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(F);let Y=1,re=class gC{constructor(L){this._id=Y++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(L),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(L){(L===P||L===c)&&this._cache.get(L)?this._cache.get(L).dirty=!0:L?this._cache.delete(L):this._cache.clear()}_getCache(L,Q){let U=this._cache.get(L);return(U===void 0||(L===P||L===c)&&U.dirty===!0)&&(U=Q.call(this),this._cache.set(L,U)),U}_calculate(L,Q,U){if(!this._attachedDepsListeners.get(L)){const G=Q.map(W=>W+"Change.konva").join(F);this.on(G,()=>{this._clearCache(L)}),this._attachedDepsListeners.set(L,!0)}return this._getCache(L,U)}_getCanvasCache(){return this._cache.get(d)}_clearSelfAndDescendantCache(L){this._clearCache(L),L===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(d)){const{scene:L,filter:Q,hit:U,buffer:G}=this._cache.get(d);s.Util.releaseCanvas(L,Q,U,G),this._cache.delete(d)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(L){const Q=L||{};let U={};(Q.x===void 0||Q.y===void 0||Q.width===void 0||Q.height===void 0)&&(U=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let G=Math.ceil(Q.width||U.width),W=Math.ceil(Q.height||U.height),M=Q.pixelRatio,I=Q.x===void 0?Math.floor(U.x):Q.x,z=Q.y===void 0?Math.floor(U.y):Q.y,q=Q.offset||0,ne=Q.drawBorder||!1,X=Q.hitCanvasPixelRatio||1;if(!G||!W){s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const se=Math.abs(Math.round(U.x)-I)>.5?1:0,ce=Math.abs(Math.round(U.y)-z)>.5?1:0;G+=q*2+se,W+=q*2+ce,I-=q,z-=q;const pe=new e.SceneCanvas({pixelRatio:M,width:G,height:W}),be=new e.SceneCanvas({pixelRatio:M,width:0,height:0,willReadFrequently:!0}),oe=new e.HitCanvas({pixelRatio:X,width:G,height:W}),je=pe.getContext(),Re=oe.getContext(),Xe=new e.SceneCanvas({width:pe.width/pe.pixelRatio+Math.abs(I),height:pe.height/pe.pixelRatio+Math.abs(z),pixelRatio:pe.pixelRatio}),ft=Xe.getContext();return oe.isCache=!0,pe.isCache=!0,this._cache.delete(d),this._filterUpToDate=!1,Q.imageSmoothingEnabled===!1&&(pe.getContext()._context.imageSmoothingEnabled=!1,be.getContext()._context.imageSmoothingEnabled=!1),je.save(),Re.save(),ft.save(),je.translate(-I,-z),Re.translate(-I,-z),ft.translate(-I,-z),Xe.x=I,Xe.y=z,this._isUnderCache=!0,this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this.drawScene(pe,this,Xe),this.drawHit(oe,this),this._isUnderCache=!1,je.restore(),Re.restore(),ne&&(je.save(),je.beginPath(),je.rect(0,0,G,W),je.closePath(),je.setAttr("strokeStyle","red"),je.setAttr("lineWidth",5),je.stroke(),je.restore()),this._cache.set(d,{scene:pe,filter:be,hit:oe,buffer:Xe,x:I,y:z}),this._requestDraw(),this}isCached(){return this._cache.has(d)}getClientRect(L){throw new Error('abstract "getClientRect" method call')}_transformedRect(L,Q){const U=[{x:L.x,y:L.y},{x:L.x+L.width,y:L.y},{x:L.x+L.width,y:L.y+L.height},{x:L.x,y:L.y+L.height}];let G=1/0,W=1/0,M=-1/0,I=-1/0;const z=this.getAbsoluteTransform(Q);return U.forEach(function(q){const ne=z.point(q);G===void 0&&(G=M=ne.x,W=I=ne.y),G=Math.min(G,ne.x),W=Math.min(W,ne.y),M=Math.max(M,ne.x),I=Math.max(I,ne.y)}),{x:G,y:W,width:M-G,height:I-W}}_drawCachedSceneCanvas(L){L.save(),L._applyOpacity(this),L._applyGlobalCompositeOperation(this);const Q=this._getCanvasCache();L.translate(Q.x,Q.y);const U=this._getCachedSceneCanvas(),G=U.pixelRatio;L.drawImage(U._canvas,0,0,U.width/G,U.height/G),L.restore()}_drawCachedHitCanvas(L){const Q=this._getCanvasCache(),U=Q.hit;L.save(),L.translate(Q.x,Q.y),L.drawImage(U._canvas,0,0,U.width/U.pixelRatio,U.height/U.pixelRatio),L.restore()}_getCachedSceneCanvas(){let L=this.filters(),Q=this._getCanvasCache(),U=Q.scene,G=Q.filter,W=G.getContext(),M,I,z,q;if(L){if(!this._filterUpToDate){const ne=U.pixelRatio;G.setSize(U.width/U.pixelRatio,U.height/U.pixelRatio);try{for(M=L.length,W.clear(),W.drawImage(U._canvas,0,0,U.getWidth()/ne,U.getHeight()/ne),I=W.getImageData(0,0,G.getWidth(),G.getHeight()),z=0;z<M;z++){if(q=L[z],typeof q!="function"){s.Util.error("Filter should be type of function, but got "+typeof q+" instead. Please check correct filters");continue}q.call(this,I),W.putImageData(I,0,0)}}catch(X){s.Util.error("Unable to apply filter. "+X.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return G}return U}on(L,Q){if(this._cache&&this._cache.delete(o),arguments.length===3)return this._delegate.apply(this,arguments);const U=L.split(F);for(let G=0;G<U.length;G++){const M=U[G].split("."),I=M[0],z=M[1]||"";this.eventListeners[I]||(this.eventListeners[I]=[]),this.eventListeners[I].push({name:z,handler:Q})}return this}off(L,Q){let U=(L||"").split(F),G=U.length,W,M,I,z,q,ne;if(this._cache&&this._cache.delete(o),!L)for(M in this.eventListeners)this._off(M);for(W=0;W<G;W++)if(I=U[W],z=I.split("."),q=z[0],ne=z[1],q)this.eventListeners[q]&&this._off(q,ne,Q);else for(M in this.eventListeners)this._off(M,ne,Q);return this}dispatchEvent(L){const Q={target:this,type:L.type,evt:L};return this.fire(L.type,Q),this}addEventListener(L,Q){return this.on(L,function(U){Q.call(this,U.evt)}),this}removeEventListener(L){return this.off(L),this}_delegate(L,Q,U){const G=this;this.on(L,function(W){const M=W.target.findAncestors(Q,!0,G);for(let I=0;I<M.length;I++)W=s.Util.cloneObject(W),W.currentTarget=M[I],U.call(M[I],W)})}remove(){return this.isDragging()&&this.stopDrag(),t.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(i),this._clearSelfAndDescendantCache(u),this._clearSelfAndDescendantCache(j),this._clearSelfAndDescendantCache(B),this._clearSelfAndDescendantCache(p)}_remove(){this._clearCaches();const L=this.getParent();L&&L.children&&(L.children.splice(this.index,1),L._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(L){const Q="get"+s.Util._capitalize(L);return s.Util._isFunction(this[Q])?this[Q]():this.attrs[L]}getAncestors(){let L=this.getParent(),Q=[];for(;L;)Q.push(L),L=L.getParent();return Q}getAttrs(){return this.attrs||{}}setAttrs(L){return this._batchTransformChanges(()=>{let Q,U;if(!L)return this;for(Q in L)Q!==h&&(U=E+s.Util._capitalize(Q),s.Util._isFunction(this[U])?this[U](L[Q]):this._setAttr(Q,L[Q]))}),this}isListening(){return this._getCache(p,this._isListening)}_isListening(L){if(!this.listening())return!1;const U=this.getParent();return U&&U!==L&&this!==L?U._isListening(L):!0}isVisible(){return this._getCache(B,this._isVisible)}_isVisible(L){if(!this.visible())return!1;const U=this.getParent();return U&&U!==L&&this!==L?U._isVisible(L):!0}shouldDrawHit(L,Q=!1){if(L)return this._isVisible(L)&&this._isListening(L);const U=this.getLayer();let G=!1;t.DD._dragElements.forEach(M=>{M.dragStatus==="dragging"&&(M.node.nodeType==="Stage"||M.node.getLayer()===U)&&(G=!0)});const W=!Q&&!n.Konva.hitOnDragEnabled&&(G||n.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!W}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let L=this.getDepth(),Q=this,U=0,G,W,M,I;function z(ne){for(G=[],W=ne.length,M=0;M<W;M++)I=ne[M],U++,I.nodeType!==A&&(G=G.concat(I.getChildren().slice())),I._id===Q._id&&(M=W);G.length>0&&G[0].getDepth()<=L&&z(G)}const q=this.getStage();return Q.nodeType!==D&&q&&z(q.getChildren()),U}getDepth(){let L=0,Q=this.parent;for(;Q;)L++,Q=Q.parent;return L}_batchTransformChanges(L){this._batchingTransformChange=!0,L(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(P),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(L){return this._batchTransformChanges(()=>{this.x(L.x),this.y(L.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const L=this.getStage();if(!L)return null;const Q=L.getPointerPosition();if(!Q)return null;const U=this.getAbsoluteTransform().copy();return U.invert(),U.point(Q)}getAbsolutePosition(L){let Q=!1,U=this.parent;for(;U;){if(U.isCached()){Q=!0;break}U=U.parent}Q&&!L&&(L=!0);const G=this.getAbsoluteTransform(L).getMatrix(),W=new s.Transform,M=this.offset();return W.m=G.slice(),W.translate(M.x,M.y),W.getTranslation()}setAbsolutePosition(L){const{x:Q,y:U,...G}=this._clearTransform();this.attrs.x=Q,this.attrs.y=U,this._clearCache(P);const W=this._getAbsoluteTransform().copy();return W.invert(),W.translate(L.x,L.y),L={x:this.attrs.x+W.getTranslation().x,y:this.attrs.y+W.getTranslation().y},this._setTransform(G),this.setPosition({x:L.x,y:L.y}),this._clearCache(P),this._clearSelfAndDescendantCache(c),this}_setTransform(L){let Q;for(Q in L)this.attrs[Q]=L[Q]}_clearTransform(){const L={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,L}move(L){let Q=L.x,U=L.y,G=this.x(),W=this.y();return Q!==void 0&&(G+=Q),U!==void 0&&(W+=U),this.setPosition({x:G,y:W}),this}_eachAncestorReverse(L,Q){let U=[],G=this.getParent(),W,M;if(!(Q&&Q._id===this._id)){for(U.unshift(this);G&&(!Q||G._id!==Q._id);)U.unshift(G),G=G.parent;for(W=U.length,M=0;M<W;M++)L(U[M])}}rotate(L){return this.rotation(this.rotation()+L),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const L=this.index,Q=this.parent.getChildren().length;return L<Q-1?(this.parent.children.splice(L,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const L=this.index,Q=this.parent.getChildren().length;return L<Q-1?(this.parent.children.splice(L,1),this.parent.children.splice(L+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const L=this.index;return L>0?(this.parent.children.splice(L,1),this.parent.children.splice(L-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const L=this.index;return L>0?(this.parent.children.splice(L,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(L){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(L<0||L>=this.parent.children.length)&&s.Util.warn("Unexpected value "+L+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const Q=this.index;return this.parent.children.splice(Q,1),this.parent.children.splice(L,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(i,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let L=this.opacity();const Q=this.getParent();return Q&&!Q._isUnderCache&&(L*=Q.getAbsoluteOpacity()),L}moveTo(L){return this.getParent()!==L&&(this._remove(),L.add(this)),this}toObject(){let L=this.getAttrs(),Q,U,G,W,M;const I={attrs:{},className:this.getClassName()};for(Q in L)U=L[Q],M=s.Util.isObject(U)&&!s.Util._isPlainObject(U)&&!s.Util._isArray(U),!M&&(G=typeof this[Q]=="function"&&this[Q],delete L[Q],W=G?G.call(this):null,L[Q]=U,W!==U&&(I.attrs[Q]=U));return s.Util._prepareToStringify(I)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(L,Q,U){const G=[];Q&&this._isMatch(L)&&G.push(this);let W=this.parent;for(;W;){if(W===U)return G;W._isMatch(L)&&G.push(W),W=W.parent}return G}isAncestorOf(L){return!1}findAncestor(L,Q,U){return this.findAncestors(L,Q,U)[0]}_isMatch(L){if(!L)return!1;if(typeof L=="function")return L(this);let Q=L.replace(/ /g,"").split(","),U=Q.length,G,W;for(G=0;G<U;G++)if(W=Q[G],s.Util.isValidSelector(W)||(s.Util.warn('Selector "'+W+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),W.charAt(0)==="#"){if(this.id()===W.slice(1))return!0}else if(W.charAt(0)==="."){if(this.hasName(W.slice(1)))return!0}else if(this.className===W||this.nodeType===W)return!0;return!1}getLayer(){const L=this.getParent();return L?L.getLayer():null}getStage(){return this._getCache(j,this._getStage)}_getStage(){const L=this.getParent();return L?L.getStage():null}fire(L,Q={},U){return Q.target=Q.target||this,U?this._fireAndBubble(L,Q):this._fire(L,Q),this}getAbsoluteTransform(L){return L?this._getAbsoluteTransform(L):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(L){let Q;if(L)return Q=new s.Transform,this._eachAncestorReverse(function(U){const G=U.transformsEnabled();G==="all"?Q.multiply(U.getTransform()):G==="position"&&Q.translate(U.x()-U.offsetX(),U.y()-U.offsetY())},L),Q;{Q=this._cache.get(c)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(Q):Q.reset();const U=this.transformsEnabled();if(U==="all")Q.multiply(this.getTransform());else if(U==="position"){const G=this.attrs.x||0,W=this.attrs.y||0,M=this.attrs.offsetX||0,I=this.attrs.offsetY||0;Q.translate(G-M,W-I)}return Q.dirty=!1,Q}}getAbsoluteScale(L){let Q=this;for(;Q;)Q._isUnderCache&&(L=Q),Q=Q.getParent();const G=this.getAbsoluteTransform(L).decompose();return{x:G.scaleX,y:G.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(P,this._getTransform)}_getTransform(){var L,Q;const U=this._cache.get(P)||new s.Transform;U.reset();const G=this.x(),W=this.y(),M=n.Konva.getAngle(this.rotation()),I=(L=this.attrs.scaleX)!==null&&L!==void 0?L:1,z=(Q=this.attrs.scaleY)!==null&&Q!==void 0?Q:1,q=this.attrs.skewX||0,ne=this.attrs.skewY||0,X=this.attrs.offsetX||0,se=this.attrs.offsetY||0;return(G!==0||W!==0)&&U.translate(G,W),M!==0&&U.rotate(M),(q!==0||ne!==0)&&U.skew(q,ne),(I!==1||z!==1)&&U.scale(I,z),(X!==0||se!==0)&&U.translate(-1*X,-1*se),U.dirty=!1,U}clone(L){let Q=s.Util.cloneObject(this.attrs),U,G,W,M,I;for(U in L)Q[U]=L[U];const z=new this.constructor(Q);for(U in this.eventListeners)for(G=this.eventListeners[U],W=G.length,M=0;M<W;M++)I=G[M],I.name.indexOf(g)<0&&(z.eventListeners[U]||(z.eventListeners[U]=[]),z.eventListeners[U].push(I));return z}_toKonvaCanvas(L){L=L||{};const Q=this.getClientRect(),U=this.getStage(),G=L.x!==void 0?L.x:Math.floor(Q.x),W=L.y!==void 0?L.y:Math.floor(Q.y),M=L.pixelRatio||1,I=new e.SceneCanvas({width:L.width||Math.ceil(Q.width)||(U?U.width():0),height:L.height||Math.ceil(Q.height)||(U?U.height():0),pixelRatio:M}),z=I.getContext(),q=new e.SceneCanvas({width:I.width/I.pixelRatio+Math.abs(G),height:I.height/I.pixelRatio+Math.abs(W),pixelRatio:I.pixelRatio});return L.imageSmoothingEnabled===!1&&(z._context.imageSmoothingEnabled=!1),z.save(),(G||W)&&z.translate(-1*G,-1*W),this.drawScene(I,void 0,q),z.restore(),I}toCanvas(L){return this._toKonvaCanvas(L)._canvas}toDataURL(L){L=L||{};const Q=L.mimeType||null,U=L.quality||null,G=this._toKonvaCanvas(L).toDataURL(Q,U);return L.callback&&L.callback(G),G}toImage(L){return new Promise((Q,U)=>{try{const G=L?.callback;G&&delete L.callback,s.Util._urlToImage(this.toDataURL(L),function(W){Q(W),G?.(W)})}catch(G){U(G)}})}toBlob(L){return new Promise((Q,U)=>{try{const G=L?.callback;G&&delete L.callback,this.toCanvas(L).toBlob(W=>{Q(W),G?.(W)},L?.mimeType,L?.quality)}catch(G){U(G)}})}setSize(L){return this.width(L.width),this.height(L.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():n.Konva.dragDistance}_off(L,Q,U){let G=this.eventListeners[L],W,M,I;for(W=0;W<G.length;W++)if(M=G[W].name,I=G[W].handler,(M!=="konva"||Q==="konva")&&(!Q||M===Q)&&(!U||U===I)){if(G.splice(W,1),G.length===0){delete this.eventListeners[L];break}W--}}_fireChangeEvent(L,Q,U){this._fire(L+f,{oldVal:Q,newVal:U})}addName(L){if(!this.hasName(L)){const Q=this.name(),U=Q?Q+" "+L:L;this.name(U)}return this}hasName(L){if(!L)return!1;const Q=this.name();return Q?(Q||"").split(/\s/g).indexOf(L)!==-1:!1}removeName(L){const Q=(this.name()||"").split(/\s/g),U=Q.indexOf(L);return U!==-1&&(Q.splice(U,1),this.name(Q.join(" "))),this}setAttr(L,Q){const U=this[E+s.Util._capitalize(L)];return s.Util._isFunction(U)?U.call(this,Q):this._setAttr(L,Q),this}_requestDraw(){if(n.Konva.autoDrawEnabled){const L=this.getLayer()||this.getStage();L?.batchDraw()}}_setAttr(L,Q){const U=this.attrs[L];U===Q&&!s.Util.isObject(Q)||(Q==null?delete this.attrs[L]:this.attrs[L]=Q,this._shouldFireChangeEvents&&this._fireChangeEvent(L,U,Q),this._requestDraw())}_setComponentAttr(L,Q,U){let G;U!==void 0&&(G=this.attrs[L],G||(this.attrs[L]=this.getAttr(L)),this.attrs[L][Q]=U,this._fireChangeEvent(L,G,U))}_fireAndBubble(L,Q,U){Q&&this.nodeType===A&&(Q.target=this);const G=[y,v,C,w,_,T];if(!(G.indexOf(L)!==-1&&(U&&(this===U||this.isAncestorOf&&this.isAncestorOf(U))||this.nodeType==="Stage"&&!U))){this._fire(L,Q);const M=G.indexOf(L)!==-1&&U&&U.isAncestorOf&&U.isAncestorOf(this)&&!U.isAncestorOf(this.parent);(Q&&!Q.cancelBubble||!Q)&&this.parent&&this.parent.isListening()&&!M&&(U&&U.parent?this._fireAndBubble.call(this.parent,L,Q,U):this._fireAndBubble.call(this.parent,L,Q))}}_getProtoListeners(L){var Q,U,G;const W=(Q=this._cache.get(o))!==null&&Q!==void 0?Q:{};let M=W?.[L];if(M===void 0){M=[];let I=Object.getPrototypeOf(this);for(;I;){const z=(G=(U=I.eventListeners)===null||U===void 0?void 0:U[L])!==null&&G!==void 0?G:[];M.push(...z),I=Object.getPrototypeOf(I)}W[L]=M,this._cache.set(o,W)}return M}_fire(L,Q){Q=Q||{},Q.currentTarget=this,Q.type=L;const U=this._getProtoListeners(L);if(U)for(let W=0;W<U.length;W++)U[W].handler.call(this,Q);const G=this.eventListeners[L];if(G)for(let W=0;W<G.length;W++)G[W].handler.call(this,Q)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(L){const Q=L?L.pointerId:void 0,U=this.getStage(),G=this.getAbsolutePosition();if(!U)return;const W=U._getPointerById(Q)||U._changedPointerPositions[0]||G;t.DD._dragElements.set(this._id,{node:this,startPointerPos:W,offset:{x:W.x-G.x,y:W.y-G.y},dragStatus:"ready",pointerId:Q})}startDrag(L,Q=!0){t.DD._dragElements.has(this._id)||this._createDragElement(L);const U=t.DD._dragElements.get(this._id);U.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:L&&L.evt},Q)}_setDragPosition(L,Q){const U=this.getStage()._getPointerById(Q.pointerId);if(!U)return;let G={x:U.x-Q.offset.x,y:U.y-Q.offset.y};const W=this.dragBoundFunc();if(W!==void 0){const M=W.call(this,G,L);M?G=M:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==G.x||this._lastPos.y!==G.y)&&(this.setAbsolutePosition(G),this._requestDraw()),this._lastPos=G}stopDrag(L){const Q=t.DD._dragElements.get(this._id);Q&&(Q.dragStatus="stopped"),t.DD._endDragBefore(L),t.DD._endDragAfter(L)}setDraggable(L){this._setAttr("draggable",L),this._dragChange()}isDragging(){const L=t.DD._dragElements.get(this._id);return L?L.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(L){if(!(!(L.evt.button!==void 0)||n.Konva.dragButtons.indexOf(L.evt.button)>=0)||this.isDragging())return;let G=!1;t.DD._dragElements.forEach(W=>{this.isAncestorOf(W.node)&&(G=!0)}),G||this._createDragElement(L)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const Q=t.DD._dragElements.get(this._id),U=Q&&Q.dragStatus==="dragging",G=Q&&Q.dragStatus==="ready";U?this.stopDrag():G&&t.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(L={x:0,y:0}){const Q=this.getStage();if(!Q)return!1;const U={x:-L.x,y:-L.y,width:Q.width()+2*L.x,height:Q.height()+2*L.y};return s.Util.haveIntersection(U,this.getClientRect())}static create(L,Q){return s.Util._isString(L)&&(L=JSON.parse(L)),this._createNode(L,Q)}static _createNode(L,Q){let U=gC.prototype.getClassName.call(L),G=L.children,W,M,I;Q&&(L.attrs.container=Q),n.Konva[U]||(s.Util.warn('Can not find a node with class name "'+U+'". Fallback to "Shape".'),U="Shape");const z=n.Konva[U];if(W=new z(L.attrs),G)for(M=G.length,I=0;I<M;I++)W.add(gC._createNode(G[I]));return W}};Ix.Node=re,re.prototype.nodeType="Node",re.prototype._attrsAffectingSize=[],re.prototype.eventListeners={},re.prototype.on.call(re.prototype,V,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(P),this._clearSelfAndDescendantCache(c)}),re.prototype.on.call(re.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(B)}),re.prototype.on.call(re.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(p)}),re.prototype.on.call(re.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(i)});const te=r.Factory.addGetterSetter;return te(re,"zIndex"),te(re,"absolutePosition"),te(re,"position"),te(re,"x",0,(0,a.getNumberValidator)()),te(re,"y",0,(0,a.getNumberValidator)()),te(re,"globalCompositeOperation","source-over",(0,a.getStringValidator)()),te(re,"opacity",1,(0,a.getNumberValidator)()),te(re,"name","",(0,a.getStringValidator)()),te(re,"id","",(0,a.getStringValidator)()),te(re,"rotation",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(re,"scale",["x","y"]),te(re,"scaleX",1,(0,a.getNumberValidator)()),te(re,"scaleY",1,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(re,"skew",["x","y"]),te(re,"skewX",0,(0,a.getNumberValidator)()),te(re,"skewY",0,(0,a.getNumberValidator)()),r.Factory.addComponentsGetterSetter(re,"offset",["x","y"]),te(re,"offsetX",0,(0,a.getNumberValidator)()),te(re,"offsetY",0,(0,a.getNumberValidator)()),te(re,"dragDistance",void 0,(0,a.getNumberValidator)()),te(re,"width",0,(0,a.getNumberValidator)()),te(re,"height",0,(0,a.getNumberValidator)()),te(re,"listening",!0,(0,a.getBooleanValidator)()),te(re,"preventDefault",!0,(0,a.getBooleanValidator)()),te(re,"filters",void 0,function(ee){return this._filterUpToDate=!1,ee}),te(re,"visible",!0,(0,a.getBooleanValidator)()),te(re,"transformsEnabled","all",(0,a.getStringValidator)()),te(re,"size"),te(re,"dragBoundFunc"),te(re,"draggable",!1,(0,a.getBooleanValidator)()),r.Factory.backCompat(re,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Ix}var Lx={},cP;function J_(){if(cP)return Lx;cP=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.Container=void 0;const e=In(),t=Ia(),r=$n();let n=class extends t.Node{constructor(){super(...arguments),this.children=[]}getChildren(a){const i=this.children||[];return a?i.filter(a):i}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(a=>{a.parent=null,a.index=0,a.destroy()}),this.children=[],this._requestDraw(),this}add(...a){if(a.length===0)return this;if(a.length>1){for(let o=0;o<a.length;o++)this.add(a[o]);return this}const i=a[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(a){return this._generalFind(a,!1)}findOne(a){const i=this._generalFind(a,!0);return i.length>0?i[0]:void 0}_generalFind(a,i){const o=[];return this._descendants(c=>{const u=c._isMatch(a);return u&&o.push(c),!!(u&&i)}),o}_descendants(a){let i=!1;const o=this.getChildren();for(const c of o){if(i=a(c),i)return!0;if(c.hasChildren()&&(i=c._descendants(a),i))return!0}return!1}toObject(){const a=t.Node.prototype.toObject.call(this);return a.children=[],this.getChildren().forEach(i=>{a.children.push(i.toObject())}),a}isAncestorOf(a){let i=a.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(a){const i=t.Node.prototype.clone.call(this,a);return this.getChildren().forEach(function(o){i.add(o.clone())}),i}getAllIntersections(a){const i=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(a)&&i.push(o)}),i}_clearSelfAndDescendantCache(a){var i;super._clearSelfAndDescendantCache(a),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(o){o._clearSelfAndDescendantCache(a)}))}_setChildrenIndices(){var a;(a=this.children)===null||a===void 0||a.forEach(function(i,o){i.index=o}),this._requestDraw()}drawScene(a,i,o){const c=this.getLayer(),u=a||c&&c.getCanvas(),d=u&&u.getContext(),f=this._getCanvasCache(),h=f&&f.scene,g=u&&u.isCache;if(!this.isVisible()&&!g)return this;if(h){d.save();const p=this.getAbsoluteTransform(i).getMatrix();d.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(d),d.restore()}else this._drawChildren("drawScene",u,i,o);return this}drawHit(a,i){if(!this.shouldDrawHit(i))return this;const o=this.getLayer(),c=a||o&&o.hitCanvas,u=c&&c.getContext(),d=this._getCanvasCache();if(d&&d.hit){u.save();const h=this.getAbsoluteTransform(i).getMatrix();u.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(u),u.restore()}else this._drawChildren("drawHit",c,i);return this}_drawChildren(a,i,o,c){var u;const d=i&&i.getContext(),f=this.clipWidth(),h=this.clipHeight(),g=this.clipFunc(),p=typeof f=="number"&&typeof h=="number"||g,y=o===this;if(p){d.save();const C=this.getAbsoluteTransform(o);let w=C.getMatrix();d.transform(w[0],w[1],w[2],w[3],w[4],w[5]),d.beginPath();let _;if(g)_=g.call(this,d,this);else{const T=this.clipX(),E=this.clipY();d.rect(T||0,E||0,f,h)}d.clip.apply(d,_),w=C.copy().invert().getMatrix(),d.transform(w[0],w[1],w[2],w[3],w[4],w[5])}const v=!y&&this.globalCompositeOperation()!=="source-over"&&a==="drawScene";v&&(d.save(),d._applyGlobalCompositeOperation(this)),(u=this.children)===null||u===void 0||u.forEach(function(C){C[a](i,o,c)}),v&&d.restore(),p&&d.restore()}getClientRect(a={}){var i;const o=a.skipTransform,c=a.relativeTo;let u,d,f,h,g={x:1/0,y:1/0,width:0,height:0};const p=this;(i=this.children)===null||i===void 0||i.forEach(function(C){if(!C.visible())return;const w=C.getClientRect({relativeTo:p,skipShadow:a.skipShadow,skipStroke:a.skipStroke});w.width===0&&w.height===0||(u===void 0?(u=w.x,d=w.y,f=w.x+w.width,h=w.y+w.height):(u=Math.min(u,w.x),d=Math.min(d,w.y),f=Math.max(f,w.x+w.width),h=Math.max(h,w.y+w.height)))});const y=this.find("Shape");let v=!1;for(let C=0;C<y.length;C++)if(y[C]._isVisible(this)){v=!0;break}return v&&u!==void 0?g={x:u,y:d,width:f-u,height:h-d}:g={x:0,y:0,width:0,height:0},o?g:this._transformedRect(g,c)}};return Lx.Container=n,e.Factory.addComponentsGetterSetter(n,"clip",["x","y","width","height"]),e.Factory.addGetterSetter(n,"clipX",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipY",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipWidth",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipHeight",void 0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(n,"clipFunc"),Lx}var x5={},_f={},uP;function ez(){if(uP)return _f;uP=1,Object.defineProperty(_f,"__esModule",{value:!0}),_f.getCapturedShape=n,_f.createEvent=s,_f.hasPointerCapture=a,_f.setPointerCapture=i,_f.releaseCapture=o;const e=Mn(),t=new Map,r=e.Konva._global.PointerEvent!==void 0;function n(c){return t.get(c)}function s(c){return{evt:c,pointerId:c.pointerId}}function a(c,u){return t.get(c)===u}function i(c,u){o(c),u.getStage()&&(t.set(c,u),r&&u._fire("gotpointercapture",s(new PointerEvent("gotpointercapture"))))}function o(c,u){const d=t.get(c);if(!d)return;const f=d.getStage();f&&f.content,t.delete(c),r&&d._fire("lostpointercapture",s(new PointerEvent("lostpointercapture")))}return _f}var dP;function Fae(){return dP||(dP=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=ba(),r=In(),n=J_(),s=Mn(),a=X_(),i=a7(),o=Mn(),c=ez(),u="Stage",d="string",f="px",h="mouseout",g="mouseleave",p="mouseover",y="mouseenter",v="mousemove",C="mousedown",w="mouseup",_="pointermove",T="pointerdown",E="pointerup",A="pointercancel",F="lostpointercapture",j="pointerout",P="pointerleave",D="pointerover",B="pointerenter",V="contextmenu",Y="touchstart",re="touchend",te="touchmove",ee="touchcancel",L="wheel",Q=5,U=[[y,"_pointerenter"],[C,"_pointerdown"],[v,"_pointermove"],[w,"_pointerup"],[g,"_pointerleave"],[Y,"_pointerdown"],[te,"_pointermove"],[re,"_pointerup"],[ee,"_pointercancel"],[p,"_pointerover"],[L,"_wheel"],[V,"_contextmenu"],[T,"_pointerdown"],[_,"_pointermove"],[E,"_pointerup"],[A,"_pointercancel"],[P,"_pointerleave"],[F,"_lostpointercapture"]],G={mouse:{[j]:h,[P]:g,[D]:p,[B]:y,[_]:v,[T]:C,[E]:w,[A]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[j]:"touchout",[P]:"touchleave",[D]:"touchover",[B]:"touchenter",[_]:te,[T]:Y,[E]:re,[A]:ee,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[j]:j,[P]:P,[D]:D,[B]:B,[_]:_,[T]:T,[E]:E,[A]:A,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},W=ne=>ne.indexOf("pointer")>=0?"pointer":ne.indexOf("touch")>=0?"touch":"mouse",M=ne=>{const X=W(ne);if(X==="pointer")return s.Konva.pointerEventsEnabled&&G.pointer;if(X==="touch")return G.touch;if(X==="mouse")return G.mouse};function I(ne={}){return(ne.clipFunc||ne.clipWidth||ne.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ne}const z="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class q extends n.Container{constructor(X){super(I(X)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{I(this.attrs)}),this._checkVisibility()}_validateAdd(X){const se=X.getType()==="Layer",ce=X.getType()==="FastLayer";se||ce||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const X=this.visible()?"":"none";this.content.style.display=X}setContainer(X){if(typeof X===d){let se;if(X.charAt(0)==="."){const ce=X.slice(1);X=document.getElementsByClassName(ce)[0]}else X.charAt(0)!=="#"?se=X:se=X.slice(1),X=document.getElementById(se);if(!X)throw"Can not find container in document with id "+se}return this._setAttr("container",X),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),X.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const X=this.children,se=X.length;for(let ce=0;ce<se;ce++)X[ce].clear();return this}clone(X){return X||(X={}),X.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,X)}destroy(){super.destroy();const X=this.content;X&&t.Util._isInDocument(X)&&this.container().removeChild(X);const se=e.stages.indexOf(this);return se>-1&&e.stages.splice(se,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const X=this._pointerPositions[0]||this._changedPointerPositions[0];return X?{x:X.x,y:X.y}:(t.Util.warn(z),null)}_getPointerById(X){return this._pointerPositions.find(se=>se.id===X)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(X){X=X||{},X.x=X.x||0,X.y=X.y||0,X.width=X.width||this.width(),X.height=X.height||this.height();const se=new a.SceneCanvas({width:X.width,height:X.height,pixelRatio:X.pixelRatio||1}),ce=se.getContext()._context,pe=this.children;return(X.x||X.y)&&ce.translate(-1*X.x,-1*X.y),pe.forEach(function(be){if(!be.isVisible())return;const oe=be._toKonvaCanvas(X);ce.drawImage(oe._canvas,X.x,X.y,oe.getWidth()/oe.getPixelRatio(),oe.getHeight()/oe.getPixelRatio())}),se}getIntersection(X){if(!X)return null;const se=this.children,ce=se.length,pe=ce-1;for(let be=pe;be>=0;be--){const oe=se[be].getIntersection(X);if(oe)return oe}return null}_resizeDOM(){const X=this.width(),se=this.height();this.content&&(this.content.style.width=X+f,this.content.style.height=se+f),this.bufferCanvas.setSize(X,se),this.bufferHitCanvas.setSize(X,se),this.children.forEach(ce=>{ce.setSize({width:X,height:se}),ce.draw()})}add(X,...se){if(arguments.length>1){for(let pe=0;pe<arguments.length;pe++)this.add(arguments[pe]);return this}super.add(X);const ce=this.children.length;return ce>Q&&t.Util.warn("The stage has "+ce+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),X.setSize({width:this.width(),height:this.height()}),X.draw(),s.Konva.isBrowser&&this.content.appendChild(X.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(X){return c.hasPointerCapture(X,this)}setPointerCapture(X){c.setPointerCapture(X,this)}releaseCapture(X){c.releaseCapture(X,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&U.forEach(([X,se])=>{this.content.addEventListener(X,ce=>{this[se](ce)},{passive:!1})})}_pointerenter(X){this.setPointersPositions(X);const se=M(X.type);se&&this._fire(se.pointerenter,{evt:X,target:this,currentTarget:this})}_pointerover(X){this.setPointersPositions(X);const se=M(X.type);se&&this._fire(se.pointerover,{evt:X,target:this,currentTarget:this})}_getTargetShape(X){let se=this[X+"targetShape"];return se&&!se.getStage()&&(se=null),se}_pointerleave(X){const se=M(X.type),ce=W(X.type);if(!se)return;this.setPointersPositions(X);const pe=this._getTargetShape(ce),be=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;pe&&be?(pe._fireAndBubble(se.pointerout,{evt:X}),pe._fireAndBubble(se.pointerleave,{evt:X}),this._fire(se.pointerleave,{evt:X,target:this,currentTarget:this}),this[ce+"targetShape"]=null):be&&(this._fire(se.pointerleave,{evt:X,target:this,currentTarget:this}),this._fire(se.pointerout,{evt:X,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(X){const se=M(X.type),ce=W(X.type);if(!se)return;this.setPointersPositions(X);let pe=!1;this._changedPointerPositions.forEach(be=>{const oe=this.getIntersection(be);if(i.DD.justDragged=!1,s.Konva["_"+ce+"ListenClick"]=!0,!oe||!oe.isListening()){this[ce+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&oe.setPointerCapture(be.id),this[ce+"ClickStartShape"]=oe,oe._fireAndBubble(se.pointerdown,{evt:X,pointerId:be.id}),pe=!0;const je=X.type.indexOf("touch")>=0;oe.preventDefault()&&X.cancelable&&je&&X.preventDefault()}),pe||this._fire(se.pointerdown,{evt:X,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(X){const se=M(X.type),ce=W(X.type);if(!se||(s.Konva.isDragging()&&i.DD.node.preventDefault()&&X.cancelable&&X.preventDefault(),this.setPointersPositions(X),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const be={};let oe=!1;const je=this._getTargetShape(ce);this._changedPointerPositions.forEach(Re=>{const Xe=c.getCapturedShape(Re.id)||this.getIntersection(Re),ft=Re.id,Je={evt:X,pointerId:ft},Ht=je!==Xe;if(Ht&&je&&(je._fireAndBubble(se.pointerout,{...Je},Xe),je._fireAndBubble(se.pointerleave,{...Je},Xe)),Xe){if(be[Xe._id])return;be[Xe._id]=!0}Xe&&Xe.isListening()?(oe=!0,Ht&&(Xe._fireAndBubble(se.pointerover,{...Je},je),Xe._fireAndBubble(se.pointerenter,{...Je},je),this[ce+"targetShape"]=Xe),Xe._fireAndBubble(se.pointermove,{...Je})):je&&(this._fire(se.pointerover,{evt:X,target:this,currentTarget:this,pointerId:ft}),this[ce+"targetShape"]=null)}),oe||this._fire(se.pointermove,{evt:X,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(X){const se=M(X.type),ce=W(X.type);if(!se)return;this.setPointersPositions(X);const pe=this[ce+"ClickStartShape"],be=this[ce+"ClickEndShape"],oe={};let je=!1;this._changedPointerPositions.forEach(Re=>{const Xe=c.getCapturedShape(Re.id)||this.getIntersection(Re);if(Xe){if(Xe.releaseCapture(Re.id),oe[Xe._id])return;oe[Xe._id]=!0}const ft=Re.id,Je={evt:X,pointerId:ft};let Ht=!1;s.Konva["_"+ce+"InDblClickWindow"]?(Ht=!0,clearTimeout(this[ce+"DblTimeout"])):i.DD.justDragged||(s.Konva["_"+ce+"InDblClickWindow"]=!0,clearTimeout(this[ce+"DblTimeout"])),this[ce+"DblTimeout"]=setTimeout(function(){s.Konva["_"+ce+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),Xe&&Xe.isListening()?(je=!0,this[ce+"ClickEndShape"]=Xe,Xe._fireAndBubble(se.pointerup,{...Je}),s.Konva["_"+ce+"ListenClick"]&&pe&&pe===Xe&&(Xe._fireAndBubble(se.pointerclick,{...Je}),Ht&&be&&be===Xe&&Xe._fireAndBubble(se.pointerdblclick,{...Je}))):(this[ce+"ClickEndShape"]=null,s.Konva["_"+ce+"ListenClick"]&&this._fire(se.pointerclick,{evt:X,target:this,currentTarget:this,pointerId:ft}),Ht&&this._fire(se.pointerdblclick,{evt:X,target:this,currentTarget:this,pointerId:ft}))}),je||this._fire(se.pointerup,{evt:X,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+ce+"ListenClick"]=!1,X.cancelable&&ce!=="touch"&&ce!=="pointer"&&X.preventDefault()}_contextmenu(X){this.setPointersPositions(X);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(V,{evt:X}):this._fire(V,{evt:X,target:this,currentTarget:this})}_wheel(X){this.setPointersPositions(X);const se=this.getIntersection(this.getPointerPosition());se&&se.isListening()?se._fireAndBubble(L,{evt:X}):this._fire(L,{evt:X,target:this,currentTarget:this})}_pointercancel(X){this.setPointersPositions(X);const se=c.getCapturedShape(X.pointerId)||this.getIntersection(this.getPointerPosition());se&&se._fireAndBubble(E,c.createEvent(X)),c.releaseCapture(X.pointerId)}_lostpointercapture(X){c.releaseCapture(X.pointerId)}setPointersPositions(X){const se=this._getContentPosition();let ce=null,pe=null;X=X||window.event,X.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(X.touches,be=>{this._pointerPositions.push({id:be.identifier,x:(be.clientX-se.left)/se.scaleX,y:(be.clientY-se.top)/se.scaleY})}),Array.prototype.forEach.call(X.changedTouches||X.touches,be=>{this._changedPointerPositions.push({id:be.identifier,x:(be.clientX-se.left)/se.scaleX,y:(be.clientY-se.top)/se.scaleY})})):(ce=(X.clientX-se.left)/se.scaleX,pe=(X.clientY-se.top)/se.scaleY,this.pointerPos={x:ce,y:pe},this._pointerPositions=[{x:ce,y:pe,id:t.Util._getFirstPointerId(X)}],this._changedPointerPositions=[{x:ce,y:pe,id:t.Util._getFirstPointerId(X)}])}_setPointerPosition(X){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(X)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const X=this.content.getBoundingClientRect();return{top:X.top,left:X.left,scaleX:X.width/this.content.clientWidth||1,scaleY:X.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new a.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new a.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const X=this.container();if(!X)throw"Stage has no container. A container is required.";X.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),X.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(X){X.batchDraw()}),this}}e.Stage=q,q.prototype.nodeType=u,(0,o._registerNode)(q),r.Factory.addGetterSetter(q,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(ne=>{ne.batchDraw()})})})(x5)),x5}var Bx={},y5={},fP;function Pi(){return fP||(fP=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=Mn(),r=ba(),n=In(),s=Ia(),a=$n(),i=Mn(),o=ez(),c="hasShadow",u="shadowRGBA",d="patternImage",f="linearGradient",h="radialGradient";let g;function p(){return g||(g=r.Util.createCanvasElement().getContext("2d"),g)}e.shapes={};function y(P){const D=this.attrs.fillRule;D?P.fill(D):P.fill()}function v(P){P.stroke()}function C(P){const D=this.attrs.fillRule;D?P.fill(D):P.fill()}function w(P){P.stroke()}function _(){this._clearCache(c)}function T(){this._clearCache(u)}function E(){this._clearCache(d)}function A(){this._clearCache(f)}function F(){this._clearCache(h)}class j extends s.Node{constructor(D){super(D);let B;for(;B=r.Util.getRandomColor(),!(B&&!(B in e.shapes)););this.colorKey=B,e.shapes[B]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(c,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const B=p().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(B&&B.setTransform){const V=new r.Transform;V.translate(this.fillPatternX(),this.fillPatternY()),V.rotate(t.Konva.getAngle(this.fillPatternRotation())),V.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),V.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const Y=V.getMatrix(),re=typeof DOMMatrix>"u"?{a:Y[0],b:Y[1],c:Y[2],d:Y[3],e:Y[4],f:Y[5]}:new DOMMatrix(Y);B.setTransform(re)}return B}}_getLinearGradient(){return this._getCache(f,this.__getLinearGradient)}__getLinearGradient(){const D=this.fillLinearGradientColorStops();if(D){const B=p(),V=this.fillLinearGradientStartPoint(),Y=this.fillLinearGradientEndPoint(),re=B.createLinearGradient(V.x,V.y,Y.x,Y.y);for(let te=0;te<D.length;te+=2)re.addColorStop(D[te],D[te+1]);return re}}_getRadialGradient(){return this._getCache(h,this.__getRadialGradient)}__getRadialGradient(){const D=this.fillRadialGradientColorStops();if(D){const B=p(),V=this.fillRadialGradientStartPoint(),Y=this.fillRadialGradientEndPoint(),re=B.createRadialGradient(V.x,V.y,this.fillRadialGradientStartRadius(),Y.x,Y.y,this.fillRadialGradientEndRadius());for(let te=0;te<D.length;te+=2)re.addColorStop(D[te],D[te+1]);return re}}getShadowRGBA(){return this._getCache(u,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const D=r.Util.colorToRGBA(this.shadowColor());if(D)return"rgba("+D.r+","+D.g+","+D.b+","+D.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const D=this.hitStrokeWidth();return D==="auto"?this.hasStroke():this.strokeEnabled()&&!!D}intersects(D){const B=this.getStage();if(!B)return!1;const V=B.bufferHitCanvas;return V.getContext().clear(),this.drawHit(V,void 0,!0),V.context.getImageData(Math.round(D.x),Math.round(D.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(D){var B;if(!((B=this.attrs.perfectDrawEnabled)!==null&&B!==void 0?B:!0))return!1;const Y=D||this.hasFill(),re=this.hasStroke(),te=this.getAbsoluteOpacity()!==1;if(Y&&re&&te)return!0;const ee=this.hasShadow(),L=this.shadowForStrokeEnabled();return!!(Y&&re&&ee&&L)}setStrokeHitEnabled(D){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),D?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const D=this.size();return{x:this._centroid?-D.width/2:0,y:this._centroid?-D.height/2:0,width:D.width,height:D.height}}getClientRect(D={}){let B=!1,V=this.getParent();for(;V;){if(V.isCached()){B=!0;break}V=V.getParent()}const Y=D.skipTransform,re=D.relativeTo||B&&this.getStage()||void 0,te=this.getSelfRect(),L=!D.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,Q=te.width+L,U=te.height+L,G=!D.skipShadow&&this.hasShadow(),W=G?this.shadowOffsetX():0,M=G?this.shadowOffsetY():0,I=Q+Math.abs(W),z=U+Math.abs(M),q=G&&this.shadowBlur()||0,ne=I+q*2,X=z+q*2,se={width:ne,height:X,x:-(L/2+q)+Math.min(W,0)+te.x,y:-(L/2+q)+Math.min(M,0)+te.y};return Y?se:this._transformedRect(se,re)}drawScene(D,B,V){const Y=this.getLayer(),re=D||Y.getCanvas(),te=re.getContext(),ee=this._getCanvasCache(),L=this.getSceneFunc(),Q=this.hasShadow();let U;const G=B===this;if(!this.isVisible()&&!G)return this;if(ee){te.save();const W=this.getAbsoluteTransform(B).getMatrix();return te.transform(W[0],W[1],W[2],W[3],W[4],W[5]),this._drawCachedSceneCanvas(te),te.restore(),this}if(!L)return this;if(te.save(),this._useBufferCanvas()){U=this.getStage();const W=V||U.bufferCanvas,M=W.getContext();M.clear(),M.save(),M._applyLineJoin(this);const I=this.getAbsoluteTransform(B).getMatrix();M.transform(I[0],I[1],I[2],I[3],I[4],I[5]),L.call(this,M,this),M.restore();const z=W.pixelRatio;Q&&te._applyShadow(this),te._applyOpacity(this),te._applyGlobalCompositeOperation(this),te.drawImage(W._canvas,W.x||0,W.y||0,W.width/z,W.height/z)}else{if(te._applyLineJoin(this),!G){const W=this.getAbsoluteTransform(B).getMatrix();te.transform(W[0],W[1],W[2],W[3],W[4],W[5]),te._applyOpacity(this),te._applyGlobalCompositeOperation(this)}Q&&te._applyShadow(this),L.call(this,te,this)}return te.restore(),this}drawHit(D,B,V=!1){if(!this.shouldDrawHit(B,V))return this;const Y=this.getLayer(),re=D||Y.hitCanvas,te=re&&re.getContext(),ee=this.hitFunc()||this.sceneFunc(),L=this._getCanvasCache(),Q=L&&L.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),Q){te.save();const G=this.getAbsoluteTransform(B).getMatrix();return te.transform(G[0],G[1],G[2],G[3],G[4],G[5]),this._drawCachedHitCanvas(te),te.restore(),this}if(!ee)return this;if(te.save(),te._applyLineJoin(this),!(this===B)){const G=this.getAbsoluteTransform(B).getMatrix();te.transform(G[0],G[1],G[2],G[3],G[4],G[5])}return ee.call(this,te,this),te.restore(),this}drawHitFromCache(D=0){const B=this._getCanvasCache(),V=this._getCachedSceneCanvas(),Y=B.hit,re=Y.getContext(),te=Y.getWidth(),ee=Y.getHeight();re.clear(),re.drawImage(V._canvas,0,0,te,ee);try{const L=re.getImageData(0,0,te,ee),Q=L.data,U=Q.length,G=r.Util._hexToRgb(this.colorKey);for(let W=0;W<U;W+=4)Q[W+3]>D?(Q[W]=G.r,Q[W+1]=G.g,Q[W+2]=G.b,Q[W+3]=255):Q[W+3]=0;re.putImageData(L,0,0)}catch(L){r.Util.error("Unable to draw hit graph from cached scene canvas. "+L.message)}return this}hasPointerCapture(D){return o.hasPointerCapture(D,this)}setPointerCapture(D){o.setPointerCapture(D,this)}releaseCapture(D){o.releaseCapture(D,this)}}e.Shape=j,j.prototype._fillFunc=y,j.prototype._strokeFunc=v,j.prototype._fillFuncHit=C,j.prototype._strokeFuncHit=w,j.prototype._centroid=!1,j.prototype.nodeType="Shape",(0,i._registerNode)(j),j.prototype.eventListeners={},j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",T),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",E),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",F),n.Factory.addGetterSetter(j,"stroke",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"strokeWidth",2,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(j,"hitStrokeWidth","auto",(0,a.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(j,"strokeHitEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"perfectDrawEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"shadowForStrokeEnabled",!0,(0,a.getBooleanValidator)()),n.Factory.addGetterSetter(j,"lineJoin"),n.Factory.addGetterSetter(j,"lineCap"),n.Factory.addGetterSetter(j,"sceneFunc"),n.Factory.addGetterSetter(j,"hitFunc"),n.Factory.addGetterSetter(j,"dash"),n.Factory.addGetterSetter(j,"dashOffset",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowColor",void 0,(0,a.getStringValidator)()),n.Factory.addGetterSetter(j,"shadowBlur",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOpacity",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(j,"shadowOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"shadowOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternImage"),n.Factory.addGetterSetter(j,"fill",void 0,(0,a.getStringOrGradientValidator)()),n.Factory.addGetterSetter(j,"fillPatternX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternY",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(j,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(j,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(j,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(j,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(j,"fillEnabled",!0),n.Factory.addGetterSetter(j,"strokeEnabled",!0),n.Factory.addGetterSetter(j,"shadowEnabled",!0),n.Factory.addGetterSetter(j,"dashEnabled",!0),n.Factory.addGetterSetter(j,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(j,"fillPriority","color"),n.Factory.addComponentsGetterSetter(j,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternOffsetX",0,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternOffsetY",0,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(j,"fillPatternScaleX",1,(0,a.getNumberValidator)()),n.Factory.addGetterSetter(j,"fillPatternScaleY",1,(0,a.getNumberValidator)()),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(j,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(j,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(j,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(j,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(j,"fillPatternRotation",0),n.Factory.addGetterSetter(j,"fillRule",void 0,(0,a.getStringValidator)()),n.Factory.backCompat(j,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(y5)),y5}var hP;function tz(){if(hP)return Bx;hP=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.Layer=void 0;const e=ba(),t=J_(),r=Ia(),n=In(),s=X_(),a=$n(),i=Pi(),o=Mn(),c="#",u="beforeDraw",d="draw",f=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],h=f.length;class g extends t.Container{constructor(y){super(y),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(y){return this.getContext().clear(y),this.getHitCanvas().getContext().clear(y),this}setZIndex(y){super.setZIndex(y);const v=this.getStage();return v&&v.content&&(v.content.removeChild(this.getNativeCanvasElement()),y<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[y+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){r.Node.prototype.moveToTop.call(this);const y=this.getStage();return y&&y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!r.Node.prototype.moveUp.call(this))return!1;const v=this.getStage();return!v||!v.content?!1:(v.content.removeChild(this.getNativeCanvasElement()),this.index<v.children.length-1?v.content.insertBefore(this.getNativeCanvasElement(),v.children[this.index+1].getCanvas()._canvas):v.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(r.Node.prototype.moveDown.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(r.Node.prototype.moveToBottom.call(this)){const y=this.getStage();if(y){const v=y.children;y.content&&(y.content.removeChild(this.getNativeCanvasElement()),y.content.insertBefore(this.getNativeCanvasElement(),v[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const y=this.getNativeCanvasElement();return r.Node.prototype.remove.call(this),y&&y.parentNode&&e.Util._isInDocument(y)&&y.parentNode.removeChild(y),this}getStage(){return this.parent}setSize({width:y,height:v}){return this.canvas.setSize(y,v),this.hitCanvas.setSize(y,v),this._setSmoothEnabled(),this}_validateAdd(y){const v=y.getType();v!=="Group"&&v!=="Shape"&&e.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(y){return y=y||{},y.width=y.width||this.getWidth(),y.height=y.height||this.getHeight(),y.x=y.x!==void 0?y.x:this.x(),y.y=y.y!==void 0?y.y:this.y(),r.Node.prototype._toKonvaCanvas.call(this,y)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){e.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){e.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,e.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(y){if(!this.isListening()||!this.isVisible())return null;let v=1,C=!1;for(;;){for(let w=0;w<h;w++){const _=f[w],T=this._getIntersection({x:y.x+_.x*v,y:y.y+_.y*v}),E=T.shape;if(E)return E;if(C=!!T.antialiased,!T.antialiased)break}if(C)v+=1;else return null}}_getIntersection(y){const v=this.hitCanvas.pixelRatio,C=this.hitCanvas.context.getImageData(Math.round(y.x*v),Math.round(y.y*v),1,1).data,w=C[3];if(w===255){const _=e.Util._rgbToHex(C[0],C[1],C[2]),T=i.shapes[c+_];return T?{shape:T}:{antialiased:!0}}else if(w>0)return{antialiased:!0};return{}}drawScene(y,v,C){const w=this.getLayer(),_=y||w&&w.getCanvas();return this._fire(u,{node:this}),this.clearBeforeDraw()&&_.getContext().clear(),t.Container.prototype.drawScene.call(this,_,v,C),this._fire(d,{node:this}),this}drawHit(y,v){const C=this.getLayer(),w=y||C&&C.hitCanvas;return C&&C.clearBeforeDraw()&&C.getHitCanvas().getContext().clear(),t.Container.prototype.drawHit.call(this,w,v),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(y){e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(y)}getHitGraphEnabled(y){return e.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const y=this.parent;!!this.hitCanvas._canvas.parentNode?y.content.removeChild(this.hitCanvas._canvas):y.content.appendChild(this.hitCanvas._canvas)}destroy(){return e.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return Bx.Layer=g,g.prototype.nodeType="Layer",(0,o._registerNode)(g),n.Factory.addGetterSetter(g,"imageSmoothingEnabled",!0),n.Factory.addGetterSetter(g,"clearBeforeDraw",!0),n.Factory.addGetterSetter(g,"hitGraphEnabled",!0,(0,a.getBooleanValidator)()),Bx}var $x={},mP;function Mae(){if(mP)return $x;mP=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.FastLayer=void 0;const e=ba(),t=tz(),r=Mn();class n extends t.Layer{constructor(a){super(a),this.listening(!1),e.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}return $x.FastLayer=n,n.prototype.nodeType="FastLayer",(0,r._registerNode)(n),$x}var Ux={},gP;function i7(){if(gP)return Ux;gP=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.Group=void 0;const e=ba(),t=J_(),r=Mn();class n extends t.Container{_validateAdd(a){const i=a.getType();i!=="Group"&&i!=="Shape"&&e.Util.throw("You may only add groups and shapes to groups.")}}return Ux.Group=n,n.prototype.nodeType="Group",(0,r._registerNode)(n),Ux}var zx={},pP;function o7(){if(pP)return zx;pP=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.Animation=void 0;const e=Mn(),t=ba(),r=(function(){return e.glob.performance&&e.glob.performance.now?function(){return e.glob.performance.now()}:function(){return new Date().getTime()}})();let n=class fp{constructor(a,i){this.id=fp.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:r(),frameRate:0},this.func=a,this.setLayers(i)}setLayers(a){let i=[];return a&&(i=Array.isArray(a)?a:[a]),this.layers=i,this}getLayers(){return this.layers}addLayer(a){const i=this.layers,o=i.length;for(let c=0;c<o;c++)if(i[c]._id===a._id)return!1;return this.layers.push(a),!0}isRunning(){const i=fp.animations,o=i.length;for(let c=0;c<o;c++)if(i[c].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=r(),fp._addAnimation(this),this}stop(){return fp._removeAnimation(this),this}_updateFrameObject(a){this.frame.timeDiff=a-this.frame.lastTime,this.frame.lastTime=a,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(a){this.animations.push(a),this._handleAnimation()}static _removeAnimation(a){const i=a.id,o=this.animations,c=o.length;for(let u=0;u<c;u++)if(o[u].id===i){this.animations.splice(u,1);break}}static _runFrames(){const a={},i=this.animations;for(let o=0;o<i.length;o++){const c=i[o],u=c.layers,d=c.func;c._updateFrameObject(r());const f=u.length;let h;if(d?h=d.call(c,c.frame)!==!1:h=!0,!!h)for(let g=0;g<f;g++){const p=u[g];p._id!==void 0&&(a[p._id]=p)}}for(const o in a)a.hasOwnProperty(o)&&a[o].batchDraw()}static _animationLoop(){const a=fp;a.animations.length?(a._runFrames(),t.Util.requestAnimFrame(a._animationLoop)):a.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,t.Util.requestAnimFrame(this._animationLoop))}};return zx.Animation=n,n.animations=[],n.animIdCounter=0,n.animRunning=!1,zx}var v5={},xP;function Oae(){return xP||(xP=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=ba(),r=o7(),n=Ia(),s=Mn(),a={node:1,duration:1,easing:1,onFinish:1,yoyo:1},i=1,o=2,c=3,u=["fill","stroke","shadowColor"];let d=0;class f{constructor(p,y,v,C,w,_,T){this.prop=p,this.propFunc=y,this.begin=C,this._pos=C,this.duration=_,this._change=0,this.prevPos=0,this.yoyo=T,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=w-this.begin,this.pause()}fire(p){const y=this[p];y&&y()}setTime(p){p>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():p<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=p,this.update())}getTime(){return this._time}setPosition(p){this.prevPos=this._pos,this.propFunc(p),this._pos=p}getPosition(p){return p===void 0&&(p=this._time),this.func(p,this.begin,this._change,this.duration)}play(){this.state=o,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=c,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(p){this.pause(),this._time=p,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const p=this.getTimer()-this._startTime;this.state===o?this.setTime(p):this.state===c&&this.setTime(this.duration-p)}pause(){this.state=i,this.fire("onPause")}getTimer(){return new Date().getTime()}}class h{constructor(p){const y=this,v=p.node,C=v._id,w=p.easing||e.Easings.Linear,_=!!p.yoyo;let T,E;typeof p.duration>"u"?T=.3:p.duration===0?T=.001:T=p.duration,this.node=v,this._id=d++;const A=v.getLayer()||(v instanceof s.Konva.Stage?v.getLayers():null);A||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){y.tween.onEnterFrame()},A),this.tween=new f(E,function(F){y._tweenFunc(F)},w,0,1,T*1e3,_),this._addListeners(),h.attrs[C]||(h.attrs[C]={}),h.attrs[C][this._id]||(h.attrs[C][this._id]={}),h.tweens[C]||(h.tweens[C]={});for(E in p)a[E]===void 0&&this._addAttr(E,p[E]);this.reset(),this.onFinish=p.onFinish,this.onReset=p.onReset,this.onUpdate=p.onUpdate}_addAttr(p,y){const v=this.node,C=v._id;let w,_,T,E,A;const F=h.tweens[C][p];F&&delete h.attrs[C][F][p];let j=v.getAttr(p);if(t.Util._isArray(y))if(w=[],_=Math.max(y.length,j.length),p==="points"&&y.length!==j.length&&(y.length>j.length?(E=j,j=t.Util._prepareArrayForTween(j,y,v.closed())):(T=y,y=t.Util._prepareArrayForTween(y,j,v.closed()))),p.indexOf("fill")===0)for(let P=0;P<_;P++)if(P%2===0)w.push(y[P]-j[P]);else{const D=t.Util.colorToRGBA(j[P]);A=t.Util.colorToRGBA(y[P]),j[P]=D,w.push({r:A.r-D.r,g:A.g-D.g,b:A.b-D.b,a:A.a-D.a})}else for(let P=0;P<_;P++)w.push(y[P]-j[P]);else u.indexOf(p)!==-1?(j=t.Util.colorToRGBA(j),A=t.Util.colorToRGBA(y),w={r:A.r-j.r,g:A.g-j.g,b:A.b-j.b,a:A.a-j.a}):w=y-j;h.attrs[C][this._id][p]={start:j,diff:w,end:y,trueEnd:T,trueStart:E},h.tweens[C][p]=this._id}_tweenFunc(p){const y=this.node,v=h.attrs[y._id][this._id];let C,w,_,T,E,A,F,j;for(C in v){if(w=v[C],_=w.start,T=w.diff,j=w.end,t.Util._isArray(_))if(E=[],F=Math.max(_.length,j.length),C.indexOf("fill")===0)for(A=0;A<F;A++)A%2===0?E.push((_[A]||0)+T[A]*p):E.push("rgba("+Math.round(_[A].r+T[A].r*p)+","+Math.round(_[A].g+T[A].g*p)+","+Math.round(_[A].b+T[A].b*p)+","+(_[A].a+T[A].a*p)+")");else for(A=0;A<F;A++)E.push((_[A]||0)+T[A]*p);else u.indexOf(C)!==-1?E="rgba("+Math.round(_.r+T.r*p)+","+Math.round(_.g+T.g*p)+","+Math.round(_.b+T.b*p)+","+(_.a+T.a*p)+")":E=_+T*p;y.setAttr(C,E)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const p=this.node,y=h.attrs[p._id][this._id];y.points&&y.points.trueEnd&&p.setAttr("points",y.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const p=this.node,y=h.attrs[p._id][this._id];y.points&&y.points.trueStart&&p.points(y.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(p){return this.tween.seek(p*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const p=this.node._id,y=this._id,v=h.tweens[p];this.pause(),this.anim&&this.anim.stop();for(const C in v)delete h.tweens[p][C];delete h.attrs[p][y],h.tweens[p]&&(Object.keys(h.tweens[p]).length===0&&delete h.tweens[p],Object.keys(h.attrs[p]).length===0&&delete h.attrs[p])}}e.Tween=h,h.attrs={},h.tweens={},n.Node.prototype.to=function(g){const p=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),p&&p()},new h(g).play()},e.Easings={BackEaseIn(g,p,y,v){return y*(g/=v)*g*((1.70158+1)*g-1.70158)+p},BackEaseOut(g,p,y,v){return y*((g=g/v-1)*g*((1.70158+1)*g+1.70158)+1)+p},BackEaseInOut(g,p,y,v){let C=1.70158;return(g/=v/2)<1?y/2*(g*g*(((C*=1.525)+1)*g-C))+p:y/2*((g-=2)*g*(((C*=1.525)+1)*g+C)+2)+p},ElasticEaseIn(g,p,y,v,C,w){let _=0;return g===0?p:(g/=v)===1?p+y:(w||(w=v*.3),!C||C<Math.abs(y)?(C=y,_=w/4):_=w/(2*Math.PI)*Math.asin(y/C),-(C*Math.pow(2,10*(g-=1))*Math.sin((g*v-_)*(2*Math.PI)/w))+p)},ElasticEaseOut(g,p,y,v,C,w){let _=0;return g===0?p:(g/=v)===1?p+y:(w||(w=v*.3),!C||C<Math.abs(y)?(C=y,_=w/4):_=w/(2*Math.PI)*Math.asin(y/C),C*Math.pow(2,-10*g)*Math.sin((g*v-_)*(2*Math.PI)/w)+y+p)},ElasticEaseInOut(g,p,y,v,C,w){let _=0;return g===0?p:(g/=v/2)===2?p+y:(w||(w=v*(.3*1.5)),!C||C<Math.abs(y)?(C=y,_=w/4):_=w/(2*Math.PI)*Math.asin(y/C),g<1?-.5*(C*Math.pow(2,10*(g-=1))*Math.sin((g*v-_)*(2*Math.PI)/w))+p:C*Math.pow(2,-10*(g-=1))*Math.sin((g*v-_)*(2*Math.PI)/w)*.5+y+p)},BounceEaseOut(g,p,y,v){return(g/=v)<1/2.75?y*(7.5625*g*g)+p:g<2/2.75?y*(7.5625*(g-=1.5/2.75)*g+.75)+p:g<2.5/2.75?y*(7.5625*(g-=2.25/2.75)*g+.9375)+p:y*(7.5625*(g-=2.625/2.75)*g+.984375)+p},BounceEaseIn(g,p,y,v){return y-e.Easings.BounceEaseOut(v-g,0,y,v)+p},BounceEaseInOut(g,p,y,v){return g<v/2?e.Easings.BounceEaseIn(g*2,0,y,v)*.5+p:e.Easings.BounceEaseOut(g*2-v,0,y,v)*.5+y*.5+p},EaseIn(g,p,y,v){return y*(g/=v)*g+p},EaseOut(g,p,y,v){return-y*(g/=v)*(g-2)+p},EaseInOut(g,p,y,v){return(g/=v/2)<1?y/2*g*g+p:-y/2*(--g*(g-2)-1)+p},StrongEaseIn(g,p,y,v){return y*(g/=v)*g*g*g*g+p},StrongEaseOut(g,p,y,v){return y*((g=g/v-1)*g*g*g*g+1)+p},StrongEaseInOut(g,p,y,v){return(g/=v/2)<1?y/2*g*g*g*g*g+p:y/2*((g-=2)*g*g*g*g+2)+p},Linear(g,p,y,v){return y*g/v+p}}})(v5)),v5}var yP;function pC(){return yP||(yP=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=Mn(),r=ba(),n=Ia(),s=J_(),a=Fae(),i=tz(),o=Mae(),c=i7(),u=a7(),d=Pi(),f=o7(),h=Oae(),g=ZU(),p=X_();e.Konva=r.Util._assign(t.Konva,{Util:r.Util,Transform:r.Transform,Node:n.Node,Container:s.Container,Stage:a.Stage,stages:a.stages,Layer:i.Layer,FastLayer:o.FastLayer,Group:c.Group,DD:u.DD,Shape:d.Shape,shapes:d.shapes,Animation:f.Animation,Tween:h.Tween,Easings:h.Easings,Context:g.Context,Canvas:p.Canvas}),e.default=e.Konva})(f5)),f5}var Wx={},vP;function Dae(){if(vP)return Wx;vP=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.Arc=void 0;const e=In(),t=Pi(),r=Mn(),n=$n(),s=Mn();class a extends t.Shape{_sceneFunc(o){const c=r.Konva.getAngle(this.angle()),u=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,c,u),o.arc(0,0,this.innerRadius(),c,0,!u),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),c=this.outerRadius(),u=this.clockwise(),d=r.Konva.getAngle(u?360-this.angle():this.angle()),f=Math.cos(Math.min(d,Math.PI)),h=1,g=Math.sin(Math.min(Math.max(Math.PI,d),3*Math.PI/2)),p=Math.sin(Math.min(d,Math.PI/2)),y=f*(f>0?o:c),v=h*c,C=g*(g>0?o:c),w=p*(p>0?c:o);return{x:y,y:u?-1*w:C,width:v-y,height:w-C}}}return Wx.Arc=a,a.prototype._centroid=!0,a.prototype.className="Arc",a.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1,(0,n.getBooleanValidator)()),Wx}var Hx={},Gx={},bP;function rz(){if(bP)return Gx;bP=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.Line=void 0;const e=In(),t=Mn(),r=Pi(),n=$n();function s(o,c,u,d,f,h,g){const p=Math.sqrt(Math.pow(u-o,2)+Math.pow(d-c,2)),y=Math.sqrt(Math.pow(f-u,2)+Math.pow(h-d,2)),v=g*p/(p+y),C=g*y/(p+y),w=u-v*(f-o),_=d-v*(h-c),T=u+C*(f-o),E=d+C*(h-c);return[w,_,T,E]}function a(o,c){const u=o.length,d=[];for(let f=2;f<u-2;f+=2){const h=s(o[f-2],o[f-1],o[f],o[f+1],o[f+2],o[f+3],c);isNaN(h[0])||(d.push(h[0]),d.push(h[1]),d.push(o[f]),d.push(o[f+1]),d.push(h[2]),d.push(h[3]))}return d}class i extends r.Shape{constructor(c){super(c),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(c){const u=this.points(),d=u.length,f=this.tension(),h=this.closed(),g=this.bezier();if(!d)return;let p=0;if(c.beginPath(),c.moveTo(u[0],u[1]),f!==0&&d>4){const y=this.getTensionPoints(),v=y.length;for(p=h?0:4,h||c.quadraticCurveTo(y[0],y[1],y[2],y[3]);p<v-2;)c.bezierCurveTo(y[p++],y[p++],y[p++],y[p++],y[p++],y[p++]);h||c.quadraticCurveTo(y[v-2],y[v-1],u[d-2],u[d-1])}else if(g)for(p=2;p<d;)c.bezierCurveTo(u[p++],u[p++],u[p++],u[p++],u[p++],u[p++]);else for(p=2;p<d;p+=2)c.lineTo(u[p],u[p+1]);h?(c.closePath(),c.fillStrokeShape(this)):c.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a(this.points(),this.tension())}_getTensionPointsClosed(){const c=this.points(),u=c.length,d=this.tension(),f=s(c[u-2],c[u-1],c[0],c[1],c[2],c[3],d),h=s(c[u-4],c[u-3],c[u-2],c[u-1],c[0],c[1],d),g=a(c,d);return[f[2],f[3]].concat(g).concat([h[0],h[1],c[u-2],c[u-1],h[2],h[3],f[0],f[1],c[0],c[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let c=this.points();if(c.length<4)return{x:c[0]||0,y:c[1]||0,width:0,height:0};this.tension()!==0?c=[c[0],c[1],...this._getTensionPoints(),c[c.length-2],c[c.length-1]]:c=this.points();let u=c[0],d=c[0],f=c[1],h=c[1],g,p;for(let y=0;y<c.length/2;y++)g=c[y*2],p=c[y*2+1],u=Math.min(u,g),d=Math.max(d,g),f=Math.min(f,p),h=Math.max(h,p);return{x:u,y:f,width:d-u,height:h-f}}}return Gx.Line=i,i.prototype.className="Line",i.prototype._attrsAffectingSize=["points","bezier","tension"],(0,t._registerNode)(i),e.Factory.addGetterSetter(i,"closed",!1),e.Factory.addGetterSetter(i,"bezier",!1),e.Factory.addGetterSetter(i,"tension",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(i,"points",[],(0,n.getNumberArrayValidator)()),Gx}var Vx={},b5={},wP;function Rae(){return wP||(wP=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(i,o,c)=>{let u,d;const h=c/2;u=0;for(let g=0;g<20;g++)d=h*e.tValues[20][g]+h,u+=e.cValues[20][g]*n(i,o,d);return h*u};e.getCubicArcLength=t;const r=(i,o,c)=>{c===void 0&&(c=1);const u=i[0]-2*i[1]+i[2],d=o[0]-2*o[1]+o[2],f=2*i[1]-2*i[0],h=2*o[1]-2*o[0],g=4*(u*u+d*d),p=4*(u*f+d*h),y=f*f+h*h;if(g===0)return c*Math.sqrt(Math.pow(i[2]-i[0],2)+Math.pow(o[2]-o[0],2));const v=p/(2*g),C=y/g,w=c+v,_=C-v*v,T=w*w+_>0?Math.sqrt(w*w+_):0,E=v*v+_>0?Math.sqrt(v*v+_):0,A=v+Math.sqrt(v*v+_)!==0?_*Math.log(Math.abs((w+T)/(v+E))):0;return Math.sqrt(g)/2*(w*T-v*E+A)};e.getQuadraticArcLength=r;function n(i,o,c){const u=s(1,c,i),d=s(1,c,o),f=u*u+d*d;return Math.sqrt(f)}const s=(i,o,c)=>{const u=c.length-1;let d,f;if(u===0)return 0;if(i===0){f=0;for(let h=0;h<=u;h++)f+=e.binomialCoefficients[u][h]*Math.pow(1-o,u-h)*Math.pow(o,h)*c[h];return f}else{d=new Array(u);for(let h=0;h<u;h++)d[h]=u*(c[h+1]-c[h]);return s(i-1,o,d)}},a=(i,o,c)=>{let u=1,d=i/o,f=(i-c(d))/o,h=0;for(;u>.001;){const g=c(d+f),p=Math.abs(i-g)/o;if(p<u)u=p,d+=f;else{const y=c(d-f),v=Math.abs(i-y)/o;v<u?(u=v,d-=f):f/=2}if(h++,h>500)break}return d};e.t2length=a})(b5)),b5}var _P;function l7(){if(_P)return Vx;_P=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.Path=void 0;const e=In(),t=Mn(),r=Pi(),n=Rae();class s extends r.Shape{constructor(i){super(i),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=s.parsePathData(this.data()),this.pathLength=s.getPathLength(this.dataArray)}_sceneFunc(i){const o=this.dataArray;i.beginPath();let c=!1;for(let u=0;u<o.length;u++){const d=o[u].command,f=o[u].points;switch(d){case"L":i.lineTo(f[0],f[1]);break;case"M":i.moveTo(f[0],f[1]);break;case"C":i.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":i.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const h=f[0],g=f[1],p=f[2],y=f[3],v=f[4],C=f[5],w=f[6],_=f[7],T=p>y?p:y,E=p>y?1:p/y,A=p>y?y/p:1;i.translate(h,g),i.rotate(w),i.scale(E,A),i.arc(0,0,T,v,v+C,1-_),i.scale(1/E,1/A),i.rotate(-w),i.translate(-h,-g);break;case"z":c=!0,i.closePath();break}}!c&&!this.hasFill()?i.strokeShape(this):i.fillStrokeShape(this)}getSelfRect(){let i=[];this.dataArray.forEach(function(g){if(g.command==="A"){const p=g.points[4],y=g.points[5],v=g.points[4]+y;let C=Math.PI/180;if(Math.abs(p-v)<C&&(C=Math.abs(p-v)),y<0)for(let w=p-C;w>v;w-=C){const _=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],w,0);i.push(_.x,_.y)}else for(let w=p+C;w<v;w+=C){const _=s.getPointOnEllipticalArc(g.points[0],g.points[1],g.points[2],g.points[3],w,0);i.push(_.x,_.y)}}else if(g.command==="C")for(let p=0;p<=1;p+=.01){const y=s.getPointOnCubicBezier(p,g.start.x,g.start.y,g.points[0],g.points[1],g.points[2],g.points[3],g.points[4],g.points[5]);i.push(y.x,y.y)}else i=i.concat(g.points)});let o=i[0],c=i[0],u=i[1],d=i[1],f,h;for(let g=0;g<i.length/2;g++)f=i[g*2],h=i[g*2+1],isNaN(f)||(o=Math.min(o,f),c=Math.max(c,f)),isNaN(h)||(u=Math.min(u,h),d=Math.max(d,h));return{x:o,y:u,width:c-o,height:d-u}}getLength(){return this.pathLength}getPointAtLength(i){return s.getPointAtLengthOfDataArray(i,this.dataArray)}static getLineLength(i,o,c,u){return Math.sqrt((c-i)*(c-i)+(u-o)*(u-o))}static getPathLength(i){let o=0;for(let c=0;c<i.length;++c)o+=i[c].pathLength;return o}static getPointAtLengthOfDataArray(i,o){let c,u=0,d=o.length;if(!d)return null;for(;u<d&&i>o[u].pathLength;)i-=o[u].pathLength,++u;if(u===d)return c=o[u-1].points.slice(-2),{x:c[0],y:c[1]};if(i<.01)return o[u].command==="M"?(c=o[u].points.slice(0,2),{x:c[0],y:c[1]}):{x:o[u].start.x,y:o[u].start.y};const f=o[u],h=f.points;switch(f.command){case"L":return s.getPointOnLine(i,f.start.x,f.start.y,h[0],h[1]);case"C":return s.getPointOnCubicBezier((0,n.t2length)(i,s.getPathLength(o),T=>(0,n.getCubicArcLength)([f.start.x,h[0],h[2],h[4]],[f.start.y,h[1],h[3],h[5]],T)),f.start.x,f.start.y,h[0],h[1],h[2],h[3],h[4],h[5]);case"Q":return s.getPointOnQuadraticBezier((0,n.t2length)(i,s.getPathLength(o),T=>(0,n.getQuadraticArcLength)([f.start.x,h[0],h[2]],[f.start.y,h[1],h[3]],T)),f.start.x,f.start.y,h[0],h[1],h[2],h[3]);case"A":const g=h[0],p=h[1],y=h[2],v=h[3],C=h[5],w=h[6];let _=h[4];return _+=C*i/f.pathLength,s.getPointOnEllipticalArc(g,p,y,v,_,w)}return null}static getPointOnLine(i,o,c,u,d,f,h){f=f??o,h=h??c;const g=this.getLineLength(o,c,u,d);if(g<1e-10)return{x:o,y:c};if(u===o)return{x:f,y:h+(d>c?i:-i)};const p=(d-c)/(u-o),y=Math.sqrt(i*i/(1+p*p))*(u<o?-1:1),v=p*y;if(Math.abs(h-c-p*(f-o))<1e-10)return{x:f+y,y:h+v};const C=((f-o)*(u-o)+(h-c)*(d-c))/(g*g),w=o+C*(u-o),_=c+C*(d-c),T=this.getLineLength(f,h,w,_),E=Math.sqrt(i*i-T*T),A=Math.sqrt(E*E/(1+p*p))*(u<o?-1:1),F=p*A;return{x:w+A,y:_+F}}static getPointOnCubicBezier(i,o,c,u,d,f,h,g,p){function y(E){return E*E*E}function v(E){return 3*E*E*(1-E)}function C(E){return 3*E*(1-E)*(1-E)}function w(E){return(1-E)*(1-E)*(1-E)}const _=g*y(i)+f*v(i)+u*C(i)+o*w(i),T=p*y(i)+h*v(i)+d*C(i)+c*w(i);return{x:_,y:T}}static getPointOnQuadraticBezier(i,o,c,u,d,f,h){function g(w){return w*w}function p(w){return 2*w*(1-w)}function y(w){return(1-w)*(1-w)}const v=f*g(i)+u*p(i)+o*y(i),C=h*g(i)+d*p(i)+c*y(i);return{x:v,y:C}}static getPointOnEllipticalArc(i,o,c,u,d,f){const h=Math.cos(f),g=Math.sin(f),p={x:c*Math.cos(d),y:u*Math.sin(d)};return{x:i+(p.x*h-p.y*g),y:o+(p.x*g+p.y*h)}}static parsePathData(i){if(!i)return[];let o=i;const c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];o=o.replace(new RegExp(" ","g"),",");for(let v=0;v<c.length;v++)o=o.replace(new RegExp(c[v],"g"),"|"+c[v]);const u=o.split("|"),d=[],f=[];let h=0,g=0;const p=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let y;for(let v=1;v<u.length;v++){let C=u[v],w=C.charAt(0);for(C=C.slice(1),f.length=0;y=p.exec(C);)f.push(y[0]);const _=[];for(let T=0,E=f.length;T<E;T++){if(f[T]==="00"){_.push(0,0);continue}const A=parseFloat(f[T]);isNaN(A)?_.push(0):_.push(A)}for(;_.length>0&&!isNaN(_[0]);){let T="",E=[];const A=h,F=g;let j,P,D,B,V,Y,re,te,ee,L;switch(w){case"l":h+=_.shift(),g+=_.shift(),T="L",E.push(h,g);break;case"L":h=_.shift(),g=_.shift(),E.push(h,g);break;case"m":const Q=_.shift(),U=_.shift();if(h+=Q,g+=U,T="M",d.length>2&&d[d.length-1].command==="z"){for(let G=d.length-2;G>=0;G--)if(d[G].command==="M"){h=d[G].points[0]+Q,g=d[G].points[1]+U;break}}E.push(h,g),w="l";break;case"M":h=_.shift(),g=_.shift(),T="M",E.push(h,g),w="L";break;case"h":h+=_.shift(),T="L",E.push(h,g);break;case"H":h=_.shift(),T="L",E.push(h,g);break;case"v":g+=_.shift(),T="L",E.push(h,g);break;case"V":g=_.shift(),T="L",E.push(h,g);break;case"C":E.push(_.shift(),_.shift(),_.shift(),_.shift()),h=_.shift(),g=_.shift(),E.push(h,g);break;case"c":E.push(h+_.shift(),g+_.shift(),h+_.shift(),g+_.shift()),h+=_.shift(),g+=_.shift(),T="C",E.push(h,g);break;case"S":P=h,D=g,j=d[d.length-1],j.command==="C"&&(P=h+(h-j.points[2]),D=g+(g-j.points[3])),E.push(P,D,_.shift(),_.shift()),h=_.shift(),g=_.shift(),T="C",E.push(h,g);break;case"s":P=h,D=g,j=d[d.length-1],j.command==="C"&&(P=h+(h-j.points[2]),D=g+(g-j.points[3])),E.push(P,D,h+_.shift(),g+_.shift()),h+=_.shift(),g+=_.shift(),T="C",E.push(h,g);break;case"Q":E.push(_.shift(),_.shift()),h=_.shift(),g=_.shift(),E.push(h,g);break;case"q":E.push(h+_.shift(),g+_.shift()),h+=_.shift(),g+=_.shift(),T="Q",E.push(h,g);break;case"T":P=h,D=g,j=d[d.length-1],j.command==="Q"&&(P=h+(h-j.points[0]),D=g+(g-j.points[1])),h=_.shift(),g=_.shift(),T="Q",E.push(P,D,h,g);break;case"t":P=h,D=g,j=d[d.length-1],j.command==="Q"&&(P=h+(h-j.points[0]),D=g+(g-j.points[1])),h+=_.shift(),g+=_.shift(),T="Q",E.push(P,D,h,g);break;case"A":B=_.shift(),V=_.shift(),Y=_.shift(),re=_.shift(),te=_.shift(),ee=h,L=g,h=_.shift(),g=_.shift(),T="A",E=this.convertEndpointToCenterParameterization(ee,L,h,g,re,te,B,V,Y);break;case"a":B=_.shift(),V=_.shift(),Y=_.shift(),re=_.shift(),te=_.shift(),ee=h,L=g,h+=_.shift(),g+=_.shift(),T="A",E=this.convertEndpointToCenterParameterization(ee,L,h,g,re,te,B,V,Y);break}d.push({command:T||w,points:E,start:{x:A,y:F},pathLength:this.calcLength(A,F,T||w,E)})}(w==="z"||w==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(i,o,c,u){let d,f,h,g;const p=s;switch(c){case"L":return p.getLineLength(i,o,u[0],u[1]);case"C":return(0,n.getCubicArcLength)([i,u[0],u[2],u[4]],[o,u[1],u[3],u[5]],1);case"Q":return(0,n.getQuadraticArcLength)([i,u[0],u[2]],[o,u[1],u[3]],1);case"A":d=0;const y=u[4],v=u[5],C=u[4]+v;let w=Math.PI/180;if(Math.abs(y-C)<w&&(w=Math.abs(y-C)),f=p.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],y,0),v<0)for(g=y-w;g>C;g-=w)h=p.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=p.getLineLength(f.x,f.y,h.x,h.y),f=h;else for(g=y+w;g<C;g+=w)h=p.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],g,0),d+=p.getLineLength(f.x,f.y,h.x,h.y),f=h;return h=p.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],C,0),d+=p.getLineLength(f.x,f.y,h.x,h.y),d}return 0}static convertEndpointToCenterParameterization(i,o,c,u,d,f,h,g,p){const y=p*(Math.PI/180),v=Math.cos(y)*(i-c)/2+Math.sin(y)*(o-u)/2,C=-1*Math.sin(y)*(i-c)/2+Math.cos(y)*(o-u)/2,w=v*v/(h*h)+C*C/(g*g);w>1&&(h*=Math.sqrt(w),g*=Math.sqrt(w));let _=Math.sqrt((h*h*(g*g)-h*h*(C*C)-g*g*(v*v))/(h*h*(C*C)+g*g*(v*v)));d===f&&(_*=-1),isNaN(_)&&(_=0);const T=_*h*C/g,E=_*-g*v/h,A=(i+c)/2+Math.cos(y)*T-Math.sin(y)*E,F=(o+u)/2+Math.sin(y)*T+Math.cos(y)*E,j=function(te){return Math.sqrt(te[0]*te[0]+te[1]*te[1])},P=function(te,ee){return(te[0]*ee[0]+te[1]*ee[1])/(j(te)*j(ee))},D=function(te,ee){return(te[0]*ee[1]<te[1]*ee[0]?-1:1)*Math.acos(P(te,ee))},B=D([1,0],[(v-T)/h,(C-E)/g]),V=[(v-T)/h,(C-E)/g],Y=[(-1*v-T)/h,(-1*C-E)/g];let re=D(V,Y);return P(V,Y)<=-1&&(re=Math.PI),P(V,Y)>=1&&(re=0),f===0&&re>0&&(re=re-2*Math.PI),f===1&&re<0&&(re=re+2*Math.PI),[A,F,h,g,B,re,y,f]}}return Vx.Path=s,s.prototype.className="Path",s.prototype._attrsAffectingSize=["data"],(0,t._registerNode)(s),e.Factory.addGetterSetter(s,"data"),Vx}var SP;function Iae(){if(SP)return Hx;SP=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.Arrow=void 0;const e=In(),t=rz(),r=$n(),n=Mn(),s=l7();class a extends t.Line{_sceneFunc(o){super._sceneFunc(o);const c=Math.PI*2,u=this.points();let d=u;const f=this.tension()!==0&&u.length>4;f&&(d=this.getTensionPoints());const h=this.pointerLength(),g=u.length;let p,y;if(f){const w=[d[d.length-4],d[d.length-3],d[d.length-2],d[d.length-1],u[g-2],u[g-1]],_=s.Path.calcLength(d[d.length-4],d[d.length-3],"C",w),T=s.Path.getPointOnQuadraticBezier(Math.min(1,1-h/_),w[0],w[1],w[2],w[3],w[4],w[5]);p=u[g-2]-T.x,y=u[g-1]-T.y}else p=u[g-2]-u[g-4],y=u[g-1]-u[g-3];const v=(Math.atan2(y,p)+c)%c,C=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(u[g-2],u[g-1]),o.rotate(v),o.moveTo(0,0),o.lineTo(-h,C/2),o.lineTo(-h,-C/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(u[0],u[1]),f?(p=(d[0]+d[2])/2-u[0],y=(d[1]+d[3])/2-u[1]):(p=u[2]-u[0],y=u[3]-u[1]),o.rotate((Math.atan2(-y,-p)+c)%c),o.moveTo(0,0),o.lineTo(-h,C/2),o.lineTo(-h,-C/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){const c=this.dashEnabled();c&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),c&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),c=this.pointerWidth()/2;return{x:o.x,y:o.y-c,width:o.width,height:o.height+c*2}}}return Hx.Arrow=a,a.prototype.className="Arrow",(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"pointerLength",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerWidth",10,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"pointerAtBeginning",!1),e.Factory.addGetterSetter(a,"pointerAtEnding",!0),Hx}var qx={},kP;function Lae(){if(kP)return qx;kP=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.Circle=void 0;const e=In(),t=Pi(),r=$n(),n=Mn();class s extends t.Shape{_sceneFunc(i){i.beginPath(),i.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius()!==i/2&&this.radius(i/2)}setHeight(i){this.radius()!==i/2&&this.radius(i/2)}}return qx.Circle=s,s.prototype._centroid=!0,s.prototype.className="Circle",s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),qx}var Kx={},CP;function Bae(){if(CP)return Kx;CP=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.Ellipse=void 0;const e=In(),t=Pi(),r=$n(),n=Mn();class s extends t.Shape{_sceneFunc(i){const o=this.radiusX(),c=this.radiusY();i.beginPath(),i.save(),o!==c&&i.scale(1,c/o),i.arc(0,0,o,0,Math.PI*2,!1),i.restore(),i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(i){this.radiusX(i/2)}setHeight(i){this.radiusY(i/2)}}return Kx.Ellipse=s,s.prototype.className="Ellipse",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,n._registerNode)(s),e.Factory.addComponentsGetterSetter(s,"radius",["x","y"]),e.Factory.addGetterSetter(s,"radiusX",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"radiusY",0,(0,r.getNumberValidator)()),Kx}var Yx={},TP;function $ae(){if(TP)return Yx;TP=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.Image=void 0;const e=ba(),t=In(),r=Pi(),n=Mn(),s=$n();class a extends r.Shape{constructor(o){super(o),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",c=>{this._removeImageLoad(c.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&o.readyState===4||o&&o.addEventListener&&o.addEventListener("load",this._loadListener)}_removeImageLoad(o){o&&o.removeEventListener&&o.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const o=!!this.cornerRadius(),c=this.hasShadow();return o&&c?!0:super._useBufferCanvas(!0)}_sceneFunc(o){const c=this.getWidth(),u=this.getHeight(),d=this.cornerRadius(),f=this.attrs.image;let h;if(f){const g=this.attrs.cropWidth,p=this.attrs.cropHeight;g&&p?h=[f,this.cropX(),this.cropY(),g,p,0,0,c,u]:h=[f,0,0,c,u]}(this.hasFill()||this.hasStroke()||d)&&(o.beginPath(),d?e.Util.drawRoundedRectPath(o,c,u,d):o.rect(0,0,c,u),o.closePath(),o.fillStrokeShape(this)),f&&(d&&o.clip(),o.drawImage.apply(o,h))}_hitFunc(o){const c=this.width(),u=this.height(),d=this.cornerRadius();o.beginPath(),d?e.Util.drawRoundedRectPath(o,c,u,d):o.rect(0,0,c,u),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,c;return(o=this.attrs.width)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.width}getHeight(){var o,c;return(o=this.attrs.height)!==null&&o!==void 0?o:(c=this.image())===null||c===void 0?void 0:c.height}static fromURL(o,c,u=null){const d=e.Util.createImageElement();d.onload=function(){const f=new a({image:d});c(f)},d.onerror=u,d.crossOrigin="Anonymous",d.src=o}}return Yx.Image=a,a.prototype.className="Image",(0,n._registerNode)(a),t.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),t.Factory.addGetterSetter(a,"image"),t.Factory.addComponentsGetterSetter(a,"crop",["x","y","width","height"]),t.Factory.addGetterSetter(a,"cropX",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropY",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropWidth",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(a,"cropHeight",0,(0,s.getNumberValidator)()),Yx}var Yh={},NP;function Uae(){if(NP)return Yh;NP=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.Tag=Yh.Label=void 0;const e=In(),t=Pi(),r=i7(),n=$n(),s=Mn(),a=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],i="Change.konva",o="none",c="up",u="right",d="down",f="left",h=a.length;class g extends r.Group{constructor(v){super(v),this.on("add.konva",function(C){this._addListeners(C.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(v){let C=this,w;const _=function(){C._sync()};for(w=0;w<h;w++)v.on(a[w]+i,_)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let v=this.getText(),C=this.getTag(),w,_,T,E,A,F,j;if(v&&C){switch(w=v.width(),_=v.height(),T=C.pointerDirection(),E=C.pointerWidth(),j=C.pointerHeight(),A=0,F=0,T){case c:A=w/2,F=-1*j;break;case u:A=w+E,F=_/2;break;case d:A=w/2,F=_+j;break;case f:A=-1*E,F=_/2;break}C.setAttrs({x:-1*A,y:-1*F,width:w,height:_}),v.setAttrs({x:-1*A,y:-1*F})}}}Yh.Label=g,g.prototype.className="Label",(0,s._registerNode)(g);class p extends t.Shape{_sceneFunc(v){const C=this.width(),w=this.height(),_=this.pointerDirection(),T=this.pointerWidth(),E=this.pointerHeight(),A=this.cornerRadius();let F=0,j=0,P=0,D=0;typeof A=="number"?F=j=P=D=Math.min(A,C/2,w/2):(F=Math.min(A[0]||0,C/2,w/2),j=Math.min(A[1]||0,C/2,w/2),D=Math.min(A[2]||0,C/2,w/2),P=Math.min(A[3]||0,C/2,w/2)),v.beginPath(),v.moveTo(F,0),_===c&&(v.lineTo((C-T)/2,0),v.lineTo(C/2,-1*E),v.lineTo((C+T)/2,0)),v.lineTo(C-j,0),v.arc(C-j,j,j,Math.PI*3/2,0,!1),_===u&&(v.lineTo(C,(w-E)/2),v.lineTo(C+T,w/2),v.lineTo(C,(w+E)/2)),v.lineTo(C,w-D),v.arc(C-D,w-D,D,0,Math.PI/2,!1),_===d&&(v.lineTo((C+T)/2,w),v.lineTo(C/2,w+E),v.lineTo((C-T)/2,w)),v.lineTo(P,w),v.arc(P,w-P,P,Math.PI/2,Math.PI,!1),_===f&&(v.lineTo(0,(w+E)/2),v.lineTo(-1*T,w/2),v.lineTo(0,(w-E)/2)),v.lineTo(0,F),v.arc(F,F,F,Math.PI,Math.PI*3/2,!1),v.closePath(),v.fillStrokeShape(this)}getSelfRect(){let v=0,C=0,w=this.pointerWidth(),_=this.pointerHeight(),T=this.pointerDirection(),E=this.width(),A=this.height();return T===c?(C-=_,A+=_):T===d?A+=_:T===f?(v-=w*1.5,E+=w):T===u&&(E+=w*1.5),{x:v,y:C,width:E,height:A}}}return Yh.Tag=p,p.prototype.className="Tag",(0,s._registerNode)(p),e.Factory.addGetterSetter(p,"pointerDirection",o),e.Factory.addGetterSetter(p,"pointerWidth",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(p,"pointerHeight",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(p,"cornerRadius",0,(0,n.getNumberOrArrayOfNumbersValidator)(4)),Yh}var Xx={},EP;function nz(){if(EP)return Xx;EP=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.Rect=void 0;const e=In(),t=Pi(),r=Mn(),n=ba(),s=$n();class a extends t.Shape{_sceneFunc(o){const c=this.cornerRadius(),u=this.width(),d=this.height();o.beginPath(),c?n.Util.drawRoundedRectPath(o,u,d,c):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}}return Xx.Rect=a,a.prototype.className="Rect",(0,r._registerNode)(a),e.Factory.addGetterSetter(a,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4)),Xx}var Jx={},AP;function zae(){if(AP)return Jx;AP=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.RegularPolygon=void 0;const e=In(),t=Pi(),r=$n(),n=Mn();class s extends t.Shape{_sceneFunc(i){const o=this._getPoints();i.beginPath(),i.moveTo(o[0].x,o[0].y);for(let c=1;c<o.length;c++)i.lineTo(o[c].x,o[c].y);i.closePath(),i.fillStrokeShape(this)}_getPoints(){const i=this.attrs.sides,o=this.attrs.radius||0,c=[];for(let u=0;u<i;u++)c.push({x:o*Math.sin(u*2*Math.PI/i),y:-1*o*Math.cos(u*2*Math.PI/i)});return c}getSelfRect(){const i=this._getPoints();let o=i[0].x,c=i[0].y,u=i[0].x,d=i[0].y;return i.forEach(f=>{o=Math.min(o,f.x),c=Math.max(c,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:o,y:u,width:c-o,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(i){this.radius(i/2)}setHeight(i){this.radius(i/2)}}return Jx.RegularPolygon=s,s.prototype.className="RegularPolygon",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["radius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"radius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"sides",0,(0,r.getNumberValidator)()),Jx}var Qx={},jP;function Wae(){if(jP)return Qx;jP=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.Ring=void 0;const e=In(),t=Pi(),r=$n(),n=Mn(),s=Math.PI*2;class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,s,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),s,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}return Qx.Ring=a,a.prototype.className="Ring",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(a),e.Factory.addGetterSetter(a,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(a,"outerRadius",0,(0,r.getNumberValidator)()),Qx}var Zx={},PP;function Hae(){if(PP)return Zx;PP=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.Sprite=void 0;const e=In(),t=Pi(),r=o7(),n=$n(),s=Mn();class a extends t.Shape{constructor(o){super(o),this._updated=!0,this.anim=new r.Animation(()=>{const c=this._updated;return this._updated=!1,c}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){const c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],h=this.frameOffsets(),g=f[d+0],p=f[d+1],y=f[d+2],v=f[d+3],C=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,y,v),o.closePath(),o.fillStrokeShape(this)),C)if(h){const w=h[c],_=u*2;o.drawImage(C,g,p,y,v,w[_+0],w[_+1],y,v)}else o.drawImage(C,g,p,y,v,0,0,y,v)}_hitFunc(o){const c=this.animation(),u=this.frameIndex(),d=u*4,f=this.animations()[c],h=this.frameOffsets(),g=f[d+2],p=f[d+3];if(o.beginPath(),h){const y=h[c],v=u*2;o.rect(y[v+0],y[v+1],g,p)}else o.rect(0,0,g,p);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const o=this.frameIndex(),c=this.animation(),u=this.animations(),d=u[c],f=d.length/4;o<f-1?this.frameIndex(o+1):this.frameIndex(0)}}return Zx.Sprite=a,a.prototype.className="Sprite",(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"animation"),e.Factory.addGetterSetter(a,"animations"),e.Factory.addGetterSetter(a,"frameOffsets"),e.Factory.addGetterSetter(a,"image"),e.Factory.addGetterSetter(a,"frameIndex",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"frameRate",17,(0,n.getNumberValidator)()),e.Factory.backCompat(a,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Zx}var ey={},FP;function Gae(){if(FP)return ey;FP=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.Star=void 0;const e=In(),t=Pi(),r=$n(),n=Mn();class s extends t.Shape{_sceneFunc(i){const o=this.innerRadius(),c=this.outerRadius(),u=this.numPoints();i.beginPath(),i.moveTo(0,0-c);for(let d=1;d<u*2;d++){const f=d%2===0?c:o,h=f*Math.sin(d*Math.PI/u),g=-1*f*Math.cos(d*Math.PI/u);i.lineTo(h,g)}i.closePath(),i.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(i){this.outerRadius(i/2)}setHeight(i){this.outerRadius(i/2)}}return ey.Star=s,s.prototype.className="Star",s.prototype._centroid=!0,s.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,n._registerNode)(s),e.Factory.addGetterSetter(s,"numPoints",5,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"innerRadius",0,(0,r.getNumberValidator)()),e.Factory.addGetterSetter(s,"outerRadius",0,(0,r.getNumberValidator)()),ey}var ap={},MP;function sz(){if(MP)return ap;MP=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.Text=void 0,ap.stringToArray=i;const e=ba(),t=In(),r=Pi(),n=Mn(),s=$n(),a=Mn();function i(M){return[...M].reduce((I,z,q,ne)=>{if(new RegExp("\\p{Emoji}","u").test(z)){const X=ne[q+1];X&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(X)?(I.push(z+X),ne[q+1]=""):I.push(z)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(z+(ne[q+1]||""))?I.push(z+ne[q+1]):q>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(z)?I[I.length-1]+=z:z&&I.push(z);return I},[])}const o="auto",c="center",u="inherit",d="justify",f="Change.konva",h="2d",g="-",p="left",y="text",v="Text",C="top",w="bottom",_="middle",T="normal",E="px ",A=" ",F="right",j="rtl",P="word",D="char",B="none",V="",Y=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],re=Y.length;function te(M){return M.split(",").map(I=>{I=I.trim();const z=I.indexOf(" ")>=0,q=I.indexOf('"')>=0||I.indexOf("'")>=0;return z&&!q&&(I=`"${I}"`),I}).join(", ")}let ee;function L(){return ee||(ee=e.Util.createCanvasElement().getContext(h),ee)}function Q(M){M.fillText(this._partialText,this._partialTextX,this._partialTextY)}function U(M){M.setAttr("miterLimit",2),M.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function G(M){return M=M||{},!M.fillLinearGradientColorStops&&!M.fillRadialGradientColorStops&&!M.fillPatternImage&&(M.fill=M.fill||"black"),M}class W extends r.Shape{constructor(I){super(G(I)),this._partialTextX=0,this._partialTextY=0;for(let z=0;z<re;z++)this.on(Y[z]+f,this._setTextData);this._setTextData()}_sceneFunc(I){const z=this.textArr,q=z.length;if(!this.text())return;let ne=this.padding(),X=this.fontSize(),se=this.lineHeight()*X,ce=this.verticalAlign(),pe=this.direction(),be=0,oe=this.align(),je=this.getWidth(),Re=this.letterSpacing(),Xe=this.fill(),ft=this.textDecoration(),Je=ft.indexOf("underline")!==-1,Ht=ft.indexOf("line-through")!==-1,Ve;pe=pe===u?I.direction:pe;let at=se/2,gt=_;if(n.Konva._fixTextRendering){const Te=this.measureSize("M");gt="alphabetic",at=(Te.fontBoundingBoxAscent-Te.fontBoundingBoxDescent)/2+se/2}for(pe===j&&I.setAttr("direction",pe),I.setAttr("font",this._getContextFont()),I.setAttr("textBaseline",gt),I.setAttr("textAlign",p),ce===_?be=(this.getHeight()-q*se-ne*2)/2:ce===w&&(be=this.getHeight()-q*se-ne*2),I.translate(ne,be+ne),Ve=0;Ve<q;Ve++){let Te=0,bt=0;const Ct=z[Ve],Lt=Ct.text,Yt=Ct.width,it=Ct.lastInParagraph;if(I.save(),oe===F?Te+=je-Yt-ne*2:oe===c&&(Te+=(je-Yt-ne*2)/2),Je){I.save(),I.beginPath();const xt=n.Konva._fixTextRendering?Math.round(X/4):Math.round(X/2),Mt=Te,rt=at+bt+xt;I.moveTo(Mt,rt);const Qe=oe===d&&!it?je-ne*2:Yt;I.lineTo(Mt+Math.round(Qe),rt),I.lineWidth=X/15;const It=this._getLinearGradient();I.strokeStyle=It||Xe,I.stroke(),I.restore()}if(Ht){I.save(),I.beginPath();const xt=n.Konva._fixTextRendering?-Math.round(X/4):0;I.moveTo(Te,at+bt+xt);const Mt=oe===d&&!it?je-ne*2:Yt;I.lineTo(Te+Math.round(Mt),at+bt+xt),I.lineWidth=X/15;const rt=this._getLinearGradient();I.strokeStyle=rt||Xe,I.stroke(),I.restore()}if(pe!==j&&(Re!==0||oe===d)){const xt=Lt.split(" ").length-1,Mt=i(Lt);for(let rt=0;rt<Mt.length;rt++){const Qe=Mt[rt];Qe===" "&&!it&&oe===d&&(Te+=(je-ne*2-Yt)/xt),this._partialTextX=Te,this._partialTextY=at+bt,this._partialText=Qe,I.fillStrokeShape(this),Te+=this.measureSize(Qe).width+Re}}else Re!==0&&I.setAttr("letterSpacing",`${Re}px`),this._partialTextX=Te,this._partialTextY=at+bt,this._partialText=Lt,I.fillStrokeShape(this);I.restore(),q>1&&(at+=se)}}_hitFunc(I){const z=this.getWidth(),q=this.getHeight();I.beginPath(),I.rect(0,0,z,q),I.closePath(),I.fillStrokeShape(this)}setText(I){const z=e.Util._isString(I)?I:I==null?"":I+"";return this._setAttr(y,z),this}getWidth(){return this.attrs.width===o||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===o||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(I){var z,q,ne,X,se,ce,pe,be,oe,je,Re;let Xe=L(),ft=this.fontSize(),Je;Xe.save(),Xe.font=this._getContextFont(),Je=Xe.measureText(I),Xe.restore();const Ht=ft/100;return{actualBoundingBoxAscent:(z=Je.actualBoundingBoxAscent)!==null&&z!==void 0?z:71.58203125*Ht,actualBoundingBoxDescent:(q=Je.actualBoundingBoxDescent)!==null&&q!==void 0?q:0,actualBoundingBoxLeft:(ne=Je.actualBoundingBoxLeft)!==null&&ne!==void 0?ne:-7.421875*Ht,actualBoundingBoxRight:(X=Je.actualBoundingBoxRight)!==null&&X!==void 0?X:75.732421875*Ht,alphabeticBaseline:(se=Je.alphabeticBaseline)!==null&&se!==void 0?se:0,emHeightAscent:(ce=Je.emHeightAscent)!==null&&ce!==void 0?ce:100*Ht,emHeightDescent:(pe=Je.emHeightDescent)!==null&&pe!==void 0?pe:-20*Ht,fontBoundingBoxAscent:(be=Je.fontBoundingBoxAscent)!==null&&be!==void 0?be:91*Ht,fontBoundingBoxDescent:(oe=Je.fontBoundingBoxDescent)!==null&&oe!==void 0?oe:21*Ht,hangingBaseline:(je=Je.hangingBaseline)!==null&&je!==void 0?je:72.80000305175781*Ht,ideographicBaseline:(Re=Je.ideographicBaseline)!==null&&Re!==void 0?Re:-21*Ht,width:Je.width,height:ft}}_getContextFont(){return this.fontStyle()+A+this.fontVariant()+A+(this.fontSize()+E)+te(this.fontFamily())}_addTextLine(I){this.align()===d&&(I=I.trim());const q=this._getTextWidth(I);return this.textArr.push({text:I,width:q,lastInParagraph:!1})}_getTextWidth(I){const z=this.letterSpacing(),q=I.length;return L().measureText(I).width+z*q}_setTextData(){let I=this.text().split(`
`),z=+this.fontSize(),q=0,ne=this.lineHeight()*z,X=this.attrs.width,se=this.attrs.height,ce=X!==o&&X!==void 0,pe=se!==o&&se!==void 0,be=this.padding(),oe=X-be*2,je=se-be*2,Re=0,Xe=this.wrap(),ft=Xe!==B,Je=Xe!==D&&ft,Ht=this.ellipsis();this.textArr=[],L().font=this._getContextFont();const Ve=Ht?this._getTextWidth(V):0;for(let at=0,gt=I.length;at<gt;++at){let Te=I[at],bt=this._getTextWidth(Te);if(ce&&bt>oe)for(;Te.length>0;){let Ct=0,Lt=i(Te).length,Yt="",it=0;for(;Ct<Lt;){const xt=Ct+Lt>>>1,Mt=i(Te),rt=Mt.slice(0,xt+1).join(""),Qe=this._getTextWidth(rt);(Ht&&pe&&Re+ne>je?Qe+Ve:Qe)<=oe?(Ct=xt+1,Yt=rt,it=Qe):Lt=xt}if(Yt){if(Je){const rt=i(Te),Qe=i(Yt),It=rt[Qe.length],Tt=It===A||It===g;let Rt;if(Tt&&it<=oe)Rt=Qe.length;else{const cr=Qe.lastIndexOf(A),hr=Qe.lastIndexOf(g);Rt=Math.max(cr,hr)+1}Rt>0&&(Ct=Rt,Yt=rt.slice(0,Ct).join(""),it=this._getTextWidth(Yt))}if(Yt=Yt.trimRight(),this._addTextLine(Yt),q=Math.max(q,it),Re+=ne,this._shouldHandleEllipsis(Re)){this._tryToAddEllipsisToLastLine();break}if(Te=i(Te).slice(Ct).join("").trimLeft(),Te.length>0&&(bt=this._getTextWidth(Te),bt<=oe)){this._addTextLine(Te),Re+=ne,q=Math.max(q,bt);break}}else break}else this._addTextLine(Te),Re+=ne,q=Math.max(q,bt),this._shouldHandleEllipsis(Re)&&at<gt-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),pe&&Re+ne>je)break}this.textHeight=z,this.textWidth=q}_shouldHandleEllipsis(I){const z=+this.fontSize(),q=this.lineHeight()*z,ne=this.attrs.height,X=ne!==o&&ne!==void 0,se=this.padding(),ce=ne-se*2;return!(this.wrap()!==B)||X&&I+q>ce}_tryToAddEllipsisToLastLine(){const I=this.attrs.width,z=I!==o&&I!==void 0,q=this.padding(),ne=I-q*2,X=this.ellipsis(),se=this.textArr[this.textArr.length-1];!se||!X||(z&&(this._getTextWidth(se.text+V)<ne||(se.text=se.text.slice(0,se.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(se.text+V))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const I=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,z=this.hasShadow();return I&&z?!0:super._useBufferCanvas()}}return ap.Text=W,W.prototype._fillFunc=Q,W.prototype._strokeFunc=U,W.prototype.className=v,W.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,a._registerNode)(W),t.Factory.overWriteSetter(W,"width",(0,s.getNumberOrAutoValidator)()),t.Factory.overWriteSetter(W,"height",(0,s.getNumberOrAutoValidator)()),t.Factory.addGetterSetter(W,"direction",u),t.Factory.addGetterSetter(W,"fontFamily","Arial"),t.Factory.addGetterSetter(W,"fontSize",12,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"fontStyle",T),t.Factory.addGetterSetter(W,"fontVariant",T),t.Factory.addGetterSetter(W,"padding",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"align",p),t.Factory.addGetterSetter(W,"verticalAlign",C),t.Factory.addGetterSetter(W,"lineHeight",1,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"wrap",P),t.Factory.addGetterSetter(W,"ellipsis",!1,(0,s.getBooleanValidator)()),t.Factory.addGetterSetter(W,"letterSpacing",0,(0,s.getNumberValidator)()),t.Factory.addGetterSetter(W,"text","",(0,s.getStringValidator)()),t.Factory.addGetterSetter(W,"textDecoration",""),ap}var ty={},OP;function Vae(){if(OP)return ty;OP=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.TextPath=void 0;const e=ba(),t=In(),r=Pi(),n=l7(),s=sz(),a=$n(),i=Mn(),o="",c="normal";function u(h){h.fillText(this.partialText,0,0)}function d(h){h.strokeText(this.partialText,0,0)}class f extends r.Shape{constructor(g){super(g),this.dummyCanvas=e.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return n.Path.getPathLength(this.dataArray)}_getPointAtLength(g){if(!this.attrs.data)return null;const p=this.pathLength;return g-1>p?null:n.Path.getPointAtLengthOfDataArray(g,this.dataArray)}_readDataAttribute(){this.dataArray=n.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(g){g.setAttr("font",this._getContextFont()),g.setAttr("textBaseline",this.textBaseline()),g.setAttr("textAlign","left"),g.save();const p=this.textDecoration(),y=this.fill(),v=this.fontSize(),C=this.glyphInfo;p==="underline"&&g.beginPath();for(let w=0;w<C.length;w++){g.save();const _=C[w].p0;g.translate(_.x,_.y),g.rotate(C[w].rotation),this.partialText=C[w].text,g.fillStrokeShape(this),p==="underline"&&(w===0&&g.moveTo(0,v/2+1),g.lineTo(v,v/2+1)),g.restore()}p==="underline"&&(g.strokeStyle=y,g.lineWidth=v/20,g.stroke()),g.restore()}_hitFunc(g){g.beginPath();const p=this.glyphInfo;if(p.length>=1){const y=p[0].p0;g.moveTo(y.x,y.y)}for(let y=0;y<p.length;y++){const v=p[y].p1;g.lineTo(v.x,v.y)}g.setAttr("lineWidth",this.fontSize()),g.setAttr("strokeStyle",this.colorKey),g.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return e.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(g){return s.Text.prototype.setText.call(this,g)}_getContextFont(){return s.Text.prototype._getContextFont.call(this)}_getTextSize(g){const y=this.dummyCanvas.getContext("2d");y.save(),y.font=this._getContextFont();const v=y.measureText(g);return y.restore(),{width:v.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:g,height:p}=this._getTextSize(this.attrs.text);if(this.textWidth=g,this.textHeight=p,this.glyphInfo=[],!this.attrs.data)return null;const y=this.letterSpacing(),v=this.align(),C=this.kerningFunc(),w=Math.max(this.textWidth+((this.attrs.text||"").length-1)*y,0);let _=0;v==="center"&&(_=Math.max(0,this.pathLength/2-w/2)),v==="right"&&(_=Math.max(0,this.pathLength-w));const T=(0,s.stringToArray)(this.text());let E=_;for(let A=0;A<T.length;A++){const F=this._getPointAtLength(E);if(!F)return;let j=this._getTextSize(T[A]).width+y;if(T[A]===" "&&v==="justify"){const re=this.text().split(" ").length-1;j+=(this.pathLength-w)/re}const P=this._getPointAtLength(E+j);if(!P)return;const D=n.Path.getLineLength(F.x,F.y,P.x,P.y);let B=0;if(C)try{B=C(T[A-1],T[A])*this.fontSize()}catch{B=0}F.x+=B,P.x+=B,this.textWidth+=B;const V=n.Path.getPointOnLine(B+D/2,F.x,F.y,P.x,P.y),Y=Math.atan2(P.y-F.y,P.x-F.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:T[A],rotation:Y,p0:F,p1:P}),E+=j}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const g=[];this.glyphInfo.forEach(function(E){g.push(E.p0.x),g.push(E.p0.y),g.push(E.p1.x),g.push(E.p1.y)});let p=g[0]||0,y=g[0]||0,v=g[1]||0,C=g[1]||0,w,_;for(let E=0;E<g.length/2;E++)w=g[E*2],_=g[E*2+1],p=Math.min(p,w),y=Math.max(y,w),v=Math.min(v,_),C=Math.max(C,_);const T=this.fontSize();return{x:p-T/2,y:v-T/2,width:y-p+T,height:C-v+T}}destroy(){return e.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}return ty.TextPath=f,f.prototype._fillFunc=u,f.prototype._strokeFunc=d,f.prototype._fillFuncHit=u,f.prototype._strokeFuncHit=d,f.prototype.className="TextPath",f.prototype._attrsAffectingSize=["text","fontSize","data"],(0,i._registerNode)(f),t.Factory.addGetterSetter(f,"data"),t.Factory.addGetterSetter(f,"fontFamily","Arial"),t.Factory.addGetterSetter(f,"fontSize",12,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"fontStyle",c),t.Factory.addGetterSetter(f,"align","left"),t.Factory.addGetterSetter(f,"letterSpacing",0,(0,a.getNumberValidator)()),t.Factory.addGetterSetter(f,"textBaseline","middle"),t.Factory.addGetterSetter(f,"fontVariant",c),t.Factory.addGetterSetter(f,"text",o),t.Factory.addGetterSetter(f,"textDecoration",""),t.Factory.addGetterSetter(f,"kerningFunc",void 0),ty}var ry={},DP;function qae(){if(DP)return ry;DP=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.Transformer=void 0;const e=ba(),t=In(),r=Ia(),n=Pi(),s=nz(),a=i7(),i=Mn(),o=$n(),c=Mn(),u="tr-konva",d=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(j=>j+`.${u}`).join(" "),f="nodesRect",h=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],g={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},p="ontouchstart"in i.Konva._global;function y(j,P,D){if(j==="rotater")return D;P+=e.Util.degToRad(g[j]||0);const B=(e.Util.radToDeg(P)%360+360)%360;return e.Util._inRange(B,315+22.5,360)||e.Util._inRange(B,0,22.5)?"ns-resize":e.Util._inRange(B,45-22.5,45+22.5)?"nesw-resize":e.Util._inRange(B,90-22.5,90+22.5)?"ew-resize":e.Util._inRange(B,135-22.5,135+22.5)?"nwse-resize":e.Util._inRange(B,180-22.5,180+22.5)?"ns-resize":e.Util._inRange(B,225-22.5,225+22.5)?"nesw-resize":e.Util._inRange(B,270-22.5,270+22.5)?"ew-resize":e.Util._inRange(B,315-22.5,315+22.5)?"nwse-resize":(e.Util.error("Transformer has unknown angle for cursor detection: "+B),"pointer")}const v=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function C(j){return{x:j.x+j.width/2*Math.cos(j.rotation)+j.height/2*Math.sin(-j.rotation),y:j.y+j.height/2*Math.cos(j.rotation)+j.width/2*Math.sin(j.rotation)}}function w(j,P,D){const B=D.x+(j.x-D.x)*Math.cos(P)-(j.y-D.y)*Math.sin(P),V=D.y+(j.x-D.x)*Math.sin(P)+(j.y-D.y)*Math.cos(P);return{...j,rotation:j.rotation+P,x:B,y:V}}function _(j,P){const D=C(j);return w(j,P,D)}function T(j,P,D){let B=P;for(let V=0;V<j.length;V++){const Y=i.Konva.getAngle(j[V]),re=Math.abs(Y-P)%(Math.PI*2);Math.min(re,Math.PI*2-re)<D&&(B=Y)}return B}let E=0;class A extends a.Group{constructor(P){super(P),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(d,this.update),this.getNode()&&this.update()}attachTo(P){return this.setNode(P),this}setNode(P){return e.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([P])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return u+this._id}setNodes(P=[]){this._nodes&&this._nodes.length&&this.detach();const D=P.filter(V=>V.isAncestorOf(this)?(e.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=P=D,P.length===1&&this.useSingleNodeRotation()?this.rotation(P[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(V=>{const Y=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(V._attrsAffectingSize.length){const re=V._attrsAffectingSize.map(te=>te+"Change."+this._getEventNamespace()).join(" ");V.on(re,Y)}V.on(h.map(re=>re+`.${this._getEventNamespace()}`).join(" "),Y),V.on(`absoluteTransformChange.${this._getEventNamespace()}`,Y),this._proxyDrag(V)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(P){let D;P.on(`dragstart.${this._getEventNamespace()}`,B=>{D=P.getAbsolutePosition(),!this.isDragging()&&P!==this.findOne(".back")&&this.startDrag(B,!1)}),P.on(`dragmove.${this._getEventNamespace()}`,B=>{if(!D)return;const V=P.getAbsolutePosition(),Y=V.x-D.x,re=V.y-D.y;this.nodes().forEach(te=>{if(te===P||te.isDragging())return;const ee=te.getAbsolutePosition();te.setAbsolutePosition({x:ee.x+Y,y:ee.y+re}),te.startDrag(B)}),D=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(P=>{P.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(f),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(f,this.__getNodeRect)}__getNodeShape(P,D=this.rotation(),B){const V=P.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),Y=P.getAbsoluteScale(B),re=P.getAbsolutePosition(B),te=V.x*Y.x-P.offsetX()*Y.x,ee=V.y*Y.y-P.offsetY()*Y.y,L=(i.Konva.getAngle(P.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),Q={x:re.x+te*Math.cos(L)+ee*Math.sin(-L),y:re.y+ee*Math.cos(L)+te*Math.sin(L),width:V.width*Y.x,height:V.height*Y.y,rotation:L};return w(Q,-i.Konva.getAngle(D),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const D=[];this.nodes().map(L=>{const Q=L.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),U=[{x:Q.x,y:Q.y},{x:Q.x+Q.width,y:Q.y},{x:Q.x+Q.width,y:Q.y+Q.height},{x:Q.x,y:Q.y+Q.height}],G=L.getAbsoluteTransform();U.forEach(function(W){const M=G.point(W);D.push(M)})});const B=new e.Transform;B.rotate(-i.Konva.getAngle(this.rotation()));let V=1/0,Y=1/0,re=-1/0,te=-1/0;D.forEach(function(L){const Q=B.point(L);V===void 0&&(V=re=Q.x,Y=te=Q.y),V=Math.min(V,Q.x),Y=Math.min(Y,Q.y),re=Math.max(re,Q.x),te=Math.max(te,Q.y)}),B.invert();const ee=B.point({x:V,y:Y});return{x:ee.x,y:ee.y,width:re-V,height:te-Y,rotation:i.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),v.forEach(P=>{this._createAnchor(P)}),this._createAnchor("rotater")}_createAnchor(P){const D=new s.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:P+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:p?10:"auto"}),B=this;D.on("mousedown touchstart",function(V){B._handleMouseDown(V)}),D.on("dragstart",V=>{D.stopDrag(),V.cancelBubble=!0}),D.on("dragend",V=>{V.cancelBubble=!0}),D.on("mouseenter",()=>{const V=i.Konva.getAngle(this.rotation()),Y=this.rotateAnchorCursor(),re=y(P,V,Y);D.getStage().content&&(D.getStage().content.style.cursor=re),this._cursorChange=!0}),D.on("mouseout",()=>{D.getStage().content&&(D.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(D)}_createBack(){const P=new n.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(D,B){const V=B.getParent(),Y=V.padding();D.beginPath(),D.rect(-Y,-Y,B.width()+Y*2,B.height()+Y*2),D.moveTo(B.width()/2,-Y),V.rotateEnabled()&&V.rotateLineVisible()&&D.lineTo(B.width()/2,-V.rotateAnchorOffset()*e.Util._sign(B.height())-Y),D.fillStrokeShape(B)},hitFunc:(D,B)=>{if(!this.shouldOverdrawWholeArea())return;const V=this.padding();D.beginPath(),D.rect(-V,-V,B.width()+V*2,B.height()+V*2),D.fillStrokeShape(B)}});this.add(P),this._proxyDrag(P),P.on("dragstart",D=>{D.cancelBubble=!0}),P.on("dragmove",D=>{D.cancelBubble=!0}),P.on("dragend",D=>{D.cancelBubble=!0}),this.on("dragmove",D=>{this.update()})}_handleMouseDown(P){if(this._transforming)return;this._movingAnchorName=P.target.name().split(" ")[0];const D=this._getNodeRect(),B=D.width,V=D.height,Y=Math.sqrt(Math.pow(B,2)+Math.pow(V,2));this.sin=Math.abs(V/Y),this.cos=Math.abs(B/Y),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const re=P.target.getAbsolutePosition(),te=P.target.getStage().getPointerPosition();this._anchorDragOffset={x:te.x-re.x,y:te.y-re.y},E++,this._fire("transformstart",{evt:P.evt,target:this.getNode()}),this._nodes.forEach(ee=>{ee._fire("transformstart",{evt:P.evt,target:ee})})}_handleMouseMove(P){let D,B,V;const Y=this.findOne("."+this._movingAnchorName),re=Y.getStage();re.setPointersPositions(P);const te=re.getPointerPosition();let ee={x:te.x-this._anchorDragOffset.x,y:te.y-this._anchorDragOffset.y};const L=Y.getAbsolutePosition();this.anchorDragBoundFunc()&&(ee=this.anchorDragBoundFunc()(L,ee,P)),Y.setAbsolutePosition(ee);const Q=Y.getAbsolutePosition();if(L.x===Q.x&&L.y===Q.y)return;if(this._movingAnchorName==="rotater"){const ne=this._getNodeRect();D=Y.x()-ne.width/2,B=-Y.y()+ne.height/2;let X=Math.atan2(-B,D)+Math.PI/2;ne.height<0&&(X-=Math.PI);const ce=i.Konva.getAngle(this.rotation())+X,pe=i.Konva.getAngle(this.rotationSnapTolerance()),oe=T(this.rotationSnaps(),ce,pe)-ne.rotation,je=_(ne,oe);this._fitNodesInto(je,P);return}const U=this.shiftBehavior();let G;U==="inverted"?G=this.keepRatio()&&!P.shiftKey:U==="none"?G=this.keepRatio():G=this.keepRatio()||P.shiftKey;let W=this.centeredScaling()||P.altKey;if(this._movingAnchorName==="top-left"){if(G){const ne=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};V=Math.sqrt(Math.pow(ne.x-Y.x(),2)+Math.pow(ne.y-Y.y(),2));const X=this.findOne(".top-left").x()>ne.x?-1:1,se=this.findOne(".top-left").y()>ne.y?-1:1;D=V*this.cos*X,B=V*this.sin*se,this.findOne(".top-left").x(ne.x-D),this.findOne(".top-left").y(ne.y-B)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(Y.y());else if(this._movingAnchorName==="top-right"){if(G){const ne=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};V=Math.sqrt(Math.pow(Y.x()-ne.x,2)+Math.pow(ne.y-Y.y(),2));const X=this.findOne(".top-right").x()<ne.x?-1:1,se=this.findOne(".top-right").y()>ne.y?-1:1;D=V*this.cos*X,B=V*this.sin*se,this.findOne(".top-right").x(ne.x+D),this.findOne(".top-right").y(ne.y-B)}var M=Y.position();this.findOne(".top-left").y(M.y),this.findOne(".bottom-right").x(M.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(Y.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(Y.x());else if(this._movingAnchorName==="bottom-left"){if(G){const ne=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};V=Math.sqrt(Math.pow(ne.x-Y.x(),2)+Math.pow(Y.y()-ne.y,2));const X=ne.x<Y.x()?-1:1,se=Y.y()<ne.y?-1:1;D=V*this.cos*X,B=V*this.sin*se,Y.x(ne.x-D),Y.y(ne.y+B)}M=Y.position(),this.findOne(".top-left").x(M.x),this.findOne(".bottom-right").y(M.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(Y.y());else if(this._movingAnchorName==="bottom-right"){if(G){const ne=W?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};V=Math.sqrt(Math.pow(Y.x()-ne.x,2)+Math.pow(Y.y()-ne.y,2));const X=this.findOne(".bottom-right").x()<ne.x?-1:1,se=this.findOne(".bottom-right").y()<ne.y?-1:1;D=V*this.cos*X,B=V*this.sin*se,this.findOne(".bottom-right").x(ne.x+D),this.findOne(".bottom-right").y(ne.y+B)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(W=this.centeredScaling()||P.altKey,W){const ne=this.findOne(".top-left"),X=this.findOne(".bottom-right"),se=ne.x(),ce=ne.y(),pe=this.getWidth()-X.x(),be=this.getHeight()-X.y();X.move({x:-se,y:-ce}),ne.move({x:pe,y:be})}const I=this.findOne(".top-left").getAbsolutePosition();D=I.x,B=I.y;const z=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),q=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:D,y:B,width:z,height:q,rotation:i.Konva.getAngle(this.rotation())},P)}_handleMouseUp(P){this._removeEvents(P)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(P){var D;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const B=this.getNode();E--,this._fire("transformend",{evt:P,target:B}),(D=this.getLayer())===null||D===void 0||D.batchDraw(),B&&this._nodes.forEach(V=>{var Y;V._fire("transformend",{evt:P,target:V}),(Y=V.getLayer())===null||Y===void 0||Y.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(P,D){const B=this._getNodeRect(),V=1;if(e.Util._inRange(P.width,-this.padding()*2-V,V)){this.update();return}if(e.Util._inRange(P.height,-this.padding()*2-V,V)){this.update();return}const Y=new e.Transform;if(Y.rotate(i.Konva.getAngle(this.rotation())),this._movingAnchorName&&P.width<0&&this._movingAnchorName.indexOf("left")>=0){const G=Y.point({x:-this.padding()*2,y:0});P.x+=G.x,P.y+=G.y,P.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=G.x,this._anchorDragOffset.y-=G.y}else if(this._movingAnchorName&&P.width<0&&this._movingAnchorName.indexOf("right")>=0){const G=Y.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=G.x,this._anchorDragOffset.y-=G.y,P.width+=this.padding()*2}if(this._movingAnchorName&&P.height<0&&this._movingAnchorName.indexOf("top")>=0){const G=Y.point({x:0,y:-this.padding()*2});P.x+=G.x,P.y+=G.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=G.x,this._anchorDragOffset.y-=G.y,P.height+=this.padding()*2}else if(this._movingAnchorName&&P.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const G=Y.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=G.x,this._anchorDragOffset.y-=G.y,P.height+=this.padding()*2}if(this.boundBoxFunc()){const G=this.boundBoxFunc()(B,P);G?P=G:e.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const re=1e7,te=new e.Transform;te.translate(B.x,B.y),te.rotate(B.rotation),te.scale(B.width/re,B.height/re);const ee=new e.Transform,L=P.width/re,Q=P.height/re;this.flipEnabled()===!1?(ee.translate(P.x,P.y),ee.rotate(P.rotation),ee.translate(P.width<0?P.width:0,P.height<0?P.height:0),ee.scale(Math.abs(L),Math.abs(Q))):(ee.translate(P.x,P.y),ee.rotate(P.rotation),ee.scale(L,Q));const U=ee.multiply(te.invert());this._nodes.forEach(G=>{var W;const M=G.getParent().getAbsoluteTransform(),I=G.getTransform().copy();I.translate(G.offsetX(),G.offsetY());const z=new e.Transform;z.multiply(M.copy().invert()).multiply(U).multiply(M).multiply(I);const q=z.decompose();G.setAttrs(q),(W=G.getLayer())===null||W===void 0||W.batchDraw()}),this.rotation(e.Util._getRotation(P.rotation)),this._nodes.forEach(G=>{this._fire("transform",{evt:D,target:G}),G._fire("transform",{evt:D,target:G})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(P,D){this.findOne(P).setAttrs(D)}update(){var P;const D=this._getNodeRect();this.rotation(e.Util._getRotation(D.rotation));const B=D.width,V=D.height,Y=this.enabledAnchors(),re=this.resizeEnabled(),te=this.padding(),ee=this.anchorSize(),L=this.find("._anchor");L.forEach(U=>{U.setAttrs({width:ee,height:ee,offsetX:ee/2,offsetY:ee/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:ee/2+te,offsetY:ee/2+te,visible:re&&Y.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:B/2,y:0,offsetY:ee/2+te,visible:re&&Y.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:B,y:0,offsetX:ee/2-te,offsetY:ee/2+te,visible:re&&Y.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:V/2,offsetX:ee/2+te,visible:re&&Y.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:B,y:V/2,offsetX:ee/2-te,visible:re&&Y.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:V,offsetX:ee/2+te,offsetY:ee/2-te,visible:re&&Y.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:B/2,y:V,offsetY:ee/2-te,visible:re&&Y.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:B,y:V,offsetX:ee/2-te,offsetY:ee/2-te,visible:re&&Y.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:B/2,y:-this.rotateAnchorOffset()*e.Util._sign(V)-te,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:B,height:V,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const Q=this.anchorStyleFunc();Q&&L.forEach(U=>{Q(U)}),(P=this.getLayer())===null||P===void 0||P.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const P=this.findOne("."+this._movingAnchorName);P&&P.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),a.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return r.Node.prototype.toObject.call(this)}clone(P){return r.Node.prototype.clone.call(this,P)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}ry.Transformer=A,A.isTransforming=()=>E>0;function F(j){return j instanceof Array||e.Util.warn("enabledAnchors value should be an array"),j instanceof Array&&j.forEach(function(P){v.indexOf(P)===-1&&e.Util.warn("Unknown anchor name: "+P+". Available names are: "+v.join(", "))}),j||[]}return A.prototype.className="Transformer",(0,c._registerNode)(A),t.Factory.addGetterSetter(A,"enabledAnchors",v,F),t.Factory.addGetterSetter(A,"flipEnabled",!0,(0,o.getBooleanValidator)()),t.Factory.addGetterSetter(A,"resizeEnabled",!0),t.Factory.addGetterSetter(A,"anchorSize",10,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"rotateEnabled",!0),t.Factory.addGetterSetter(A,"rotateLineVisible",!0),t.Factory.addGetterSetter(A,"rotationSnaps",[]),t.Factory.addGetterSetter(A,"rotateAnchorOffset",50,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"rotateAnchorCursor","crosshair"),t.Factory.addGetterSetter(A,"rotationSnapTolerance",5,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderEnabled",!0),t.Factory.addGetterSetter(A,"anchorStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(A,"anchorStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"anchorFill","white"),t.Factory.addGetterSetter(A,"anchorCornerRadius",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderStroke","rgb(0, 161, 255)"),t.Factory.addGetterSetter(A,"borderStrokeWidth",1,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"borderDash"),t.Factory.addGetterSetter(A,"keepRatio",!0),t.Factory.addGetterSetter(A,"shiftBehavior","default"),t.Factory.addGetterSetter(A,"centeredScaling",!1),t.Factory.addGetterSetter(A,"ignoreStroke",!1),t.Factory.addGetterSetter(A,"padding",0,(0,o.getNumberValidator)()),t.Factory.addGetterSetter(A,"nodes"),t.Factory.addGetterSetter(A,"node"),t.Factory.addGetterSetter(A,"boundBoxFunc"),t.Factory.addGetterSetter(A,"anchorDragBoundFunc"),t.Factory.addGetterSetter(A,"anchorStyleFunc"),t.Factory.addGetterSetter(A,"shouldOverdrawWholeArea",!1),t.Factory.addGetterSetter(A,"useSingleNodeRotation",!0),t.Factory.backCompat(A,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),ry}var ny={},RP;function Kae(){if(RP)return ny;RP=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.Wedge=void 0;const e=In(),t=Pi(),r=Mn(),n=$n(),s=Mn();class a extends t.Shape{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,r.Konva.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}return ny.Wedge=a,a.prototype.className="Wedge",a.prototype._centroid=!0,a.prototype._attrsAffectingSize=["radius"],(0,s._registerNode)(a),e.Factory.addGetterSetter(a,"radius",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"angle",0,(0,n.getNumberValidator)()),e.Factory.addGetterSetter(a,"clockwise",!1),e.Factory.backCompat(a,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),ny}var sy={},IP;function Yae(){if(IP)return sy;IP=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.Blur=void 0;const e=In(),t=Ia(),r=$n();function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function i(c,u){const d=c.data,f=c.width,h=c.height;let g,p,y,v,C,w,_,T,E,A,F,j,P,D,B,V,Y,re,te,ee;const L=u+u+1,Q=f-1,U=h-1,G=u+1,W=G*(G+1)/2,M=new n,I=s[u],z=a[u];let q=null,ne=M,X=null,se=null;for(let ce=1;ce<L;ce++)ne=ne.next=new n,ce===G&&(q=ne);ne.next=M,y=p=0;for(let ce=0;ce<h;ce++){j=P=D=B=v=C=w=_=0,T=G*(V=d[p]),E=G*(Y=d[p+1]),A=G*(re=d[p+2]),F=G*(te=d[p+3]),v+=W*V,C+=W*Y,w+=W*re,_+=W*te,ne=M;for(let pe=0;pe<G;pe++)ne.r=V,ne.g=Y,ne.b=re,ne.a=te,ne=ne.next;for(let pe=1;pe<G;pe++)g=p+((Q<pe?Q:pe)<<2),v+=(ne.r=V=d[g])*(ee=G-pe),C+=(ne.g=Y=d[g+1])*ee,w+=(ne.b=re=d[g+2])*ee,_+=(ne.a=te=d[g+3])*ee,j+=V,P+=Y,D+=re,B+=te,ne=ne.next;X=M,se=q;for(let pe=0;pe<f;pe++)d[p+3]=te=_*I>>z,te!==0?(te=255/te,d[p]=(v*I>>z)*te,d[p+1]=(C*I>>z)*te,d[p+2]=(w*I>>z)*te):d[p]=d[p+1]=d[p+2]=0,v-=T,C-=E,w-=A,_-=F,T-=X.r,E-=X.g,A-=X.b,F-=X.a,g=y+((g=pe+u+1)<Q?g:Q)<<2,j+=X.r=d[g],P+=X.g=d[g+1],D+=X.b=d[g+2],B+=X.a=d[g+3],v+=j,C+=P,w+=D,_+=B,X=X.next,T+=V=se.r,E+=Y=se.g,A+=re=se.b,F+=te=se.a,j-=V,P-=Y,D-=re,B-=te,se=se.next,p+=4;y+=f}for(let ce=0;ce<f;ce++){P=D=B=j=C=w=_=v=0,p=ce<<2,T=G*(V=d[p]),E=G*(Y=d[p+1]),A=G*(re=d[p+2]),F=G*(te=d[p+3]),v+=W*V,C+=W*Y,w+=W*re,_+=W*te,ne=M;for(let be=0;be<G;be++)ne.r=V,ne.g=Y,ne.b=re,ne.a=te,ne=ne.next;let pe=f;for(let be=1;be<=u;be++)p=pe+ce<<2,v+=(ne.r=V=d[p])*(ee=G-be),C+=(ne.g=Y=d[p+1])*ee,w+=(ne.b=re=d[p+2])*ee,_+=(ne.a=te=d[p+3])*ee,j+=V,P+=Y,D+=re,B+=te,ne=ne.next,be<U&&(pe+=f);p=ce,X=M,se=q;for(let be=0;be<h;be++)g=p<<2,d[g+3]=te=_*I>>z,te>0?(te=255/te,d[g]=(v*I>>z)*te,d[g+1]=(C*I>>z)*te,d[g+2]=(w*I>>z)*te):d[g]=d[g+1]=d[g+2]=0,v-=T,C-=E,w-=A,_-=F,T-=X.r,E-=X.g,A-=X.b,F-=X.a,g=ce+((g=be+G)<U?g:U)*f<<2,v+=j+=X.r=d[g],C+=P+=X.g=d[g+1],w+=D+=X.b=d[g+2],_+=B+=X.a=d[g+3],X=X.next,T+=V=se.r,E+=Y=se.g,A+=re=se.b,F+=te=se.a,j-=V,P-=Y,D-=re,B-=te,se=se.next,p+=f}}const o=function(u){const d=Math.round(this.blurRadius());d>0&&i(u,d)};return sy.Blur=o,e.Factory.addGetterSetter(t.Node,"blurRadius",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),sy}var ay={},LP;function Xae(){if(LP)return ay;LP=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.Brighten=void 0;const e=In(),t=Ia(),r=$n(),n=function(s){const a=this.brightness()*255,i=s.data,o=i.length;for(let c=0;c<o;c+=4)i[c]+=a,i[c+1]+=a,i[c+2]+=a};return ay.Brighten=n,e.Factory.addGetterSetter(t.Node,"brightness",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ay}var iy={},BP;function Jae(){if(BP)return iy;BP=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.Contrast=void 0;const e=In(),t=Ia(),r=$n(),n=function(s){const a=Math.pow((this.contrast()+100)/100,2),i=s.data,o=i.length;let c=150,u=150,d=150;for(let f=0;f<o;f+=4)c=i[f],u=i[f+1],d=i[f+2],c/=255,c-=.5,c*=a,c+=.5,c*=255,u/=255,u-=.5,u*=a,u+=.5,u*=255,d/=255,d-=.5,d*=a,d+=.5,d*=255,c=c<0?0:c>255?255:c,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,i[f]=c,i[f+1]=u,i[f+2]=d};return iy.Contrast=n,e.Factory.addGetterSetter(t.Node,"contrast",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),iy}var oy={},$P;function Qae(){if($P)return oy;$P=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.Emboss=void 0;const e=In(),t=Ia(),r=ba(),n=$n(),s=function(a){const i=this.embossStrength()*10,o=this.embossWhiteLevel()*255,c=this.embossDirection(),u=this.embossBlend(),d=a.data,f=a.width,h=a.height,g=f*4;let p=0,y=0,v=h;switch(c){case"top-left":p=-1,y=-1;break;case"top":p=-1,y=0;break;case"top-right":p=-1,y=1;break;case"right":p=0,y=1;break;case"bottom-right":p=1,y=1;break;case"bottom":p=1,y=0;break;case"bottom-left":p=1,y=-1;break;case"left":p=0,y=-1;break;default:r.Util.error("Unknown emboss direction: "+c)}do{const C=(v-1)*g;let w=p;v+w<1&&(w=0),v+w>h&&(w=0);const _=(v-1+w)*f*4;let T=f;do{const E=C+(T-1)*4;let A=y;T+A<1&&(A=0),T+A>f&&(A=0);const F=_+(T-1+A)*4,j=d[E]-d[F],P=d[E+1]-d[F+1],D=d[E+2]-d[F+2];let B=j;const V=B>0?B:-B,Y=P>0?P:-P,re=D>0?D:-D;if(Y>V&&(B=P),re>V&&(B=D),B*=i,u){const te=d[E]+B,ee=d[E+1]+B,L=d[E+2]+B;d[E]=te>255?255:te<0?0:te,d[E+1]=ee>255?255:ee<0?0:ee,d[E+2]=L>255?255:L<0?0:L}else{let te=o-B;te<0?te=0:te>255&&(te=255),d[E]=d[E+1]=d[E+2]=te}}while(--T)}while(--v)};return oy.Emboss=s,e.Factory.addGetterSetter(t.Node,"embossStrength",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossWhiteLevel",.5,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossDirection","top-left",void 0,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"embossBlend",!1,void 0,e.Factory.afterSetFilter),oy}var ly={},UP;function Zae(){if(UP)return ly;UP=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.Enhance=void 0;const e=In(),t=Ia(),r=$n();function n(a,i,o,c,u){const d=o-i,f=u-c;if(d===0)return c+f/2;if(f===0)return c;let h=(a-i)/d;return h=f*h+c,h}const s=function(a){const i=a.data,o=i.length;let c=i[0],u=c,d,f=i[1],h=f,g,p=i[2],y=p,v;const C=this.enhance();if(C===0)return;for(let j=0;j<o;j+=4)d=i[j+0],d<c?c=d:d>u&&(u=d),g=i[j+1],g<f?f=g:g>h&&(h=g),v=i[j+2],v<p?p=v:v>y&&(y=v);u===c&&(u=255,c=0),h===f&&(h=255,f=0),y===p&&(y=255,p=0);let w,_,T,E,A,F;if(C>0)w=u+C*(255-u),_=c-C*(c-0),T=h+C*(255-h),E=f-C*(f-0),A=y+C*(255-y),F=p-C*(p-0);else{const j=(u+c)*.5;w=u+C*(u-j),_=c+C*(c-j);const P=(h+f)*.5;T=h+C*(h-P),E=f+C*(f-P);const D=(y+p)*.5;A=y+C*(y-D),F=p+C*(p-D)}for(let j=0;j<o;j+=4)i[j+0]=n(i[j+0],c,u,_,w),i[j+1]=n(i[j+1],f,h,E,T),i[j+2]=n(i[j+2],p,y,F,A)};return ly.Enhance=s,e.Factory.addGetterSetter(t.Node,"enhance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),ly}var cy={},zP;function eie(){if(zP)return cy;zP=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.Grayscale=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=.34*r[s]+.5*r[s+1]+.16*r[s+2];r[s]=a,r[s+1]=a,r[s+2]=a}};return cy.Grayscale=e,cy}var uy={},WP;function tie(){if(WP)return uy;WP=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.HSL=void 0;const e=In(),t=Ia(),r=$n();e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"luminance",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter);const n=function(s){const a=s.data,i=a.length,o=1,c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=this.luminance()*127,f=o*c*Math.cos(u*Math.PI/180),h=o*c*Math.sin(u*Math.PI/180),g=.299*o+.701*f+.167*h,p=.587*o-.587*f+.33*h,y=.114*o-.114*f-.497*h,v=.299*o-.299*f-.328*h,C=.587*o+.413*f+.035*h,w=.114*o-.114*f+.293*h,_=.299*o-.3*f+1.25*h,T=.587*o-.586*f-1.05*h,E=.114*o+.886*f-.2*h;let A,F,j,P;for(let D=0;D<i;D+=4)A=a[D+0],F=a[D+1],j=a[D+2],P=a[D+3],a[D+0]=g*A+p*F+y*j+d,a[D+1]=v*A+C*F+w*j+d,a[D+2]=_*A+T*F+E*j+d,a[D+3]=P};return uy.HSL=n,uy}var dy={},HP;function rie(){if(HP)return dy;HP=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.HSV=void 0;const e=In(),t=Ia(),r=$n(),n=function(s){const a=s.data,i=a.length,o=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=o*c*Math.cos(u*Math.PI/180),f=o*c*Math.sin(u*Math.PI/180),h=.299*o+.701*d+.167*f,g=.587*o-.587*d+.33*f,p=.114*o-.114*d-.497*f,y=.299*o-.299*d-.328*f,v=.587*o+.413*d+.035*f,C=.114*o-.114*d+.293*f,w=.299*o-.3*d+1.25*f,_=.587*o-.586*d-1.05*f,T=.114*o+.886*d-.2*f;for(let E=0;E<i;E+=4){const A=a[E+0],F=a[E+1],j=a[E+2],P=a[E+3];a[E+0]=h*A+g*F+p*j,a[E+1]=y*A+v*F+C*j,a[E+2]=w*A+_*F+T*j,a[E+3]=P}};return dy.HSV=n,e.Factory.addGetterSetter(t.Node,"hue",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"saturation",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"value",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),dy}var fy={},GP;function nie(){if(GP)return fy;GP=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.Invert=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4)r[s]=255-r[s],r[s+1]=255-r[s+1],r[s+2]=255-r[s+2]};return fy.Invert=e,fy}var hy={},VP;function sie(){if(VP)return hy;VP=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.Kaleidoscope=void 0;const e=In(),t=Ia(),r=ba(),n=$n(),s=function(o,c,u){const d=o.data,f=c.data,h=o.width,g=o.height,p=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(p*p+y*y),C=h-p,w=g-y;const _=Math.sqrt(C*C+w*w);v=_>v?_:v;const T=g,E=h,A=360/E*Math.PI/180;for(let F=0;F<E;F+=1){const j=Math.sin(F*A),P=Math.cos(F*A);for(let D=0;D<T;D+=1){C=Math.floor(p+v*D/T*P),w=Math.floor(y+v*D/T*j);let B=(w*h+C)*4;const V=d[B+0],Y=d[B+1],re=d[B+2],te=d[B+3];B=(F+D*h)*4,f[B+0]=V,f[B+1]=Y,f[B+2]=re,f[B+3]=te}}},a=function(o,c,u){const d=o.data,f=c.data,h=o.width,g=o.height,p=u.polarCenterX||h/2,y=u.polarCenterY||g/2;let v=Math.sqrt(p*p+y*y),C=h-p,w=g-y;const _=Math.sqrt(C*C+w*w);v=_>v?_:v;const T=g,E=h,A=0;let F,j;for(C=0;C<h;C+=1)for(w=0;w<g;w+=1){const P=C-p,D=w-y,B=Math.sqrt(P*P+D*D)*T/v;let V=(Math.atan2(D,P)*180/Math.PI+360+A)%360;V=V*E/360,F=Math.floor(V),j=Math.floor(B);let Y=(j*h+F)*4;const re=d[Y+0],te=d[Y+1],ee=d[Y+2],L=d[Y+3];Y=(w*h+C)*4,f[Y+0]=re,f[Y+1]=te,f[Y+2]=ee,f[Y+3]=L}},i=function(o){const c=o.width,u=o.height;let d,f,h,g,p,y,v,C,w,_,T=Math.round(this.kaleidoscopePower());const E=Math.round(this.kaleidoscopeAngle()),A=Math.floor(c*(E%360)/360);if(T<1)return;const F=r.Util.createCanvasElement();F.width=c,F.height=u;const j=F.getContext("2d").getImageData(0,0,c,u);r.Util.releaseCanvas(F),s(o,j,{polarCenterX:c/2,polarCenterY:u/2});let P=c/Math.pow(2,T);for(;P<=8;)P=P*2,T-=1;P=Math.ceil(P);let D=P,B=0,V=D,Y=1;for(A+P>c&&(B=D,V=0,Y=-1),f=0;f<u;f+=1)for(d=B;d!==V;d+=Y)h=Math.round(d+A)%c,w=(c*f+h)*4,p=j.data[w+0],y=j.data[w+1],v=j.data[w+2],C=j.data[w+3],_=(c*f+d)*4,j.data[_+0]=p,j.data[_+1]=y,j.data[_+2]=v,j.data[_+3]=C;for(f=0;f<u;f+=1)for(D=Math.floor(P),g=0;g<T;g+=1){for(d=0;d<D+1;d+=1)w=(c*f+d)*4,p=j.data[w+0],y=j.data[w+1],v=j.data[w+2],C=j.data[w+3],_=(c*f+D*2-d-1)*4,j.data[_+0]=p,j.data[_+1]=y,j.data[_+2]=v,j.data[_+3]=C;D*=2}a(j,o,{})};return hy.Kaleidoscope=i,e.Factory.addGetterSetter(t.Node,"kaleidoscopePower",2,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"kaleidoscopeAngle",0,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),hy}var my={},qP;function aie(){if(qP)return my;qP=1,Object.defineProperty(my,"__esModule",{value:!0}),my.Mask=void 0;const e=In(),t=Ia(),r=$n();function n(h,g,p){let y=(p*h.width+g)*4;const v=[];return v.push(h.data[y++],h.data[y++],h.data[y++],h.data[y++]),v}function s(h,g){return Math.sqrt(Math.pow(h[0]-g[0],2)+Math.pow(h[1]-g[1],2)+Math.pow(h[2]-g[2],2))}function a(h){const g=[0,0,0];for(let p=0;p<h.length;p++)g[0]+=h[p][0],g[1]+=h[p][1],g[2]+=h[p][2];return g[0]/=h.length,g[1]/=h.length,g[2]/=h.length,g}function i(h,g){const p=n(h,0,0),y=n(h,h.width-1,0),v=n(h,0,h.height-1),C=n(h,h.width-1,h.height-1),w=g||10;if(s(p,y)<w&&s(y,C)<w&&s(C,v)<w&&s(v,p)<w){const _=a([y,p,C,v]),T=[];for(let E=0;E<h.width*h.height;E++){const A=s(_,[h.data[E*4],h.data[E*4+1],h.data[E*4+2]]);T[E]=A<w?0:255}return T}}function o(h,g){for(let p=0;p<h.width*h.height;p++)h.data[4*p+3]=g[p]}function c(h,g,p){const y=[1,1,1,1,0,1,1,1,1],v=Math.round(Math.sqrt(y.length)),C=Math.floor(v/2),w=[];for(let _=0;_<p;_++)for(let T=0;T<g;T++){const E=_*g+T;let A=0;for(let F=0;F<v;F++)for(let j=0;j<v;j++){const P=_+F-C,D=T+j-C;if(P>=0&&P<p&&D>=0&&D<g){const B=P*g+D,V=y[F*v+j];A+=h[B]*V}}w[E]=A===2040?255:0}return w}function u(h,g,p){const y=[1,1,1,1,1,1,1,1,1],v=Math.round(Math.sqrt(y.length)),C=Math.floor(v/2),w=[];for(let _=0;_<p;_++)for(let T=0;T<g;T++){const E=_*g+T;let A=0;for(let F=0;F<v;F++)for(let j=0;j<v;j++){const P=_+F-C,D=T+j-C;if(P>=0&&P<p&&D>=0&&D<g){const B=P*g+D,V=y[F*v+j];A+=h[B]*V}}w[E]=A>=1020?255:0}return w}function d(h,g,p){const y=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],v=Math.round(Math.sqrt(y.length)),C=Math.floor(v/2),w=[];for(let _=0;_<p;_++)for(let T=0;T<g;T++){const E=_*g+T;let A=0;for(let F=0;F<v;F++)for(let j=0;j<v;j++){const P=_+F-C,D=T+j-C;if(P>=0&&P<p&&D>=0&&D<g){const B=P*g+D,V=y[F*v+j];A+=h[B]*V}}w[E]=A}return w}const f=function(h){const g=this.threshold();let p=i(h,g);return p&&(p=c(p,h.width,h.height),p=u(p,h.width,h.height),p=d(p,h.width,h.height),o(h,p)),h};return my.Mask=f,e.Factory.addGetterSetter(t.Node,"threshold",0,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),my}var gy={},KP;function iie(){if(KP)return gy;KP=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.Noise=void 0;const e=In(),t=Ia(),r=$n(),n=function(s){const a=this.noise()*255,i=s.data,o=i.length,c=a/2;for(let u=0;u<o;u+=4)i[u+0]+=c-2*c*Math.random(),i[u+1]+=c-2*c*Math.random(),i[u+2]+=c-2*c*Math.random()};return gy.Noise=n,e.Factory.addGetterSetter(t.Node,"noise",.2,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),gy}var py={},YP;function oie(){if(YP)return py;YP=1,Object.defineProperty(py,"__esModule",{value:!0}),py.Pixelate=void 0;const e=In(),t=ba(),r=Ia(),n=$n(),s=function(a){let i=Math.ceil(this.pixelSize()),o=a.width,c=a.height,u=Math.ceil(o/i),d=Math.ceil(c/i),f=a.data;if(i<=0){t.Util.error("pixelSize value can not be <= 0");return}for(let h=0;h<u;h+=1)for(let g=0;g<d;g+=1){let p=0,y=0,v=0,C=0;const w=h*i,_=w+i,T=g*i,E=T+i;let A=0;for(let F=w;F<_;F+=1)if(!(F>=o))for(let j=T;j<E;j+=1){if(j>=c)continue;const P=(o*j+F)*4;p+=f[P+0],y+=f[P+1],v+=f[P+2],C+=f[P+3],A+=1}p=p/A,y=y/A,v=v/A,C=C/A;for(let F=w;F<_;F+=1)if(!(F>=o))for(let j=T;j<E;j+=1){if(j>=c)continue;const P=(o*j+F)*4;f[P+0]=p,f[P+1]=y,f[P+2]=v,f[P+3]=C}}};return py.Pixelate=s,e.Factory.addGetterSetter(r.Node,"pixelSize",8,(0,n.getNumberValidator)(),e.Factory.afterSetFilter),py}var xy={},XP;function lie(){if(XP)return xy;XP=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.Posterize=void 0;const e=In(),t=Ia(),r=$n(),n=function(s){const a=Math.round(this.levels()*254)+1,i=s.data,o=i.length,c=255/a;for(let u=0;u<o;u+=1)i[u]=Math.floor(i[u]/c)*c};return xy.Posterize=n,e.Factory.addGetterSetter(t.Node,"levels",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),xy}var yy={},JP;function cie(){if(JP)return yy;JP=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.RGB=void 0;const e=In(),t=Ia(),r=$n(),n=function(s){const a=s.data,i=a.length,o=this.red(),c=this.green(),u=this.blue();for(let d=0;d<i;d+=4){const f=(.34*a[d]+.5*a[d+1]+.16*a[d+2])/255;a[d]=f*o,a[d+1]=f*c,a[d+2]=f*u,a[d+3]=a[d+3]}};return yy.RGB=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),yy}var vy={},QP;function uie(){if(QP)return vy;QP=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.RGBA=void 0;const e=In(),t=Ia(),r=$n(),n=function(s){const a=s.data,i=a.length,o=this.red(),c=this.green(),u=this.blue(),d=this.alpha();for(let f=0;f<i;f+=4){const h=1-d;a[f]=o*d+a[f]*h,a[f+1]=c*d+a[f+1]*h,a[f+2]=u*d+a[f+2]*h}};return vy.RGBA=n,e.Factory.addGetterSetter(t.Node,"red",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"green",0,function(s){return this._filterUpToDate=!1,s>255?255:s<0?0:Math.round(s)}),e.Factory.addGetterSetter(t.Node,"blue",0,r.RGBComponent,e.Factory.afterSetFilter),e.Factory.addGetterSetter(t.Node,"alpha",1,function(s){return this._filterUpToDate=!1,s>1?1:s<0?0:s}),vy}var by={},ZP;function die(){if(ZP)return by;ZP=1,Object.defineProperty(by,"__esModule",{value:!0}),by.Sepia=void 0;const e=function(t){const r=t.data,n=r.length;for(let s=0;s<n;s+=4){const a=r[s+0],i=r[s+1],o=r[s+2];r[s+0]=Math.min(255,a*.393+i*.769+o*.189),r[s+1]=Math.min(255,a*.349+i*.686+o*.168),r[s+2]=Math.min(255,a*.272+i*.534+o*.131)}};return by.Sepia=e,by}var wy={},eF;function fie(){if(eF)return wy;eF=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.Solarize=void 0;const e=function(t){const r=t.data,n=t.width,s=t.height,a=n*4;let i=s;do{const o=(i-1)*a;let c=n;do{const u=o+(c-1)*4;let d=r[u],f=r[u+1],h=r[u+2];d>127&&(d=255-d),f>127&&(f=255-f),h>127&&(h=255-h),r[u]=d,r[u+1]=f,r[u+2]=h}while(--c)}while(--i)};return wy.Solarize=e,wy}var _y={},tF;function hie(){if(tF)return _y;tF=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.Threshold=void 0;const e=In(),t=Ia(),r=$n(),n=function(s){const a=this.threshold()*255,i=s.data,o=i.length;for(let c=0;c<o;c+=1)i[c]=i[c]<a?0:255};return _y.Threshold=n,e.Factory.addGetterSetter(t.Node,"threshold",.5,(0,r.getNumberValidator)(),e.Factory.afterSetFilter),_y}var rF;function mie(){if(rF)return Rx;rF=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.Konva=void 0;const e=pC(),t=Dae(),r=Iae(),n=Lae(),s=Bae(),a=$ae(),i=Uae(),o=rz(),c=l7(),u=nz(),d=zae(),f=Wae(),h=Hae(),g=Gae(),p=sz(),y=Vae(),v=qae(),C=Kae(),w=Yae(),_=Xae(),T=Jae(),E=Qae(),A=Zae(),F=eie(),j=tie(),P=rie(),D=nie(),B=sie(),V=aie(),Y=iie(),re=oie(),te=lie(),ee=cie(),L=uie(),Q=die(),U=fie(),G=hie();return Rx.Konva=e.Konva.Util._assign(e.Konva,{Arc:t.Arc,Arrow:r.Arrow,Circle:n.Circle,Ellipse:s.Ellipse,Image:a.Image,Label:i.Label,Tag:i.Tag,Line:o.Line,Path:c.Path,Rect:u.Rect,RegularPolygon:d.RegularPolygon,Ring:f.Ring,Sprite:h.Sprite,Star:g.Star,Text:p.Text,TextPath:y.TextPath,Transformer:v.Transformer,Wedge:C.Wedge,Filters:{Blur:w.Blur,Brighten:_.Brighten,Contrast:T.Contrast,Emboss:E.Emboss,Enhance:A.Enhance,Grayscale:F.Grayscale,HSL:j.HSL,HSV:P.HSV,Invert:D.Invert,Kaleidoscope:B.Kaleidoscope,Mask:V.Mask,Noise:Y.Noise,Pixelate:re.Pixelate,Posterize:te.Posterize,RGB:ee.RGB,RGBA:L.RGBA,Sepia:Q.Sepia,Solarize:U.Solarize,Threshold:G.Threshold}}),Rx}var gie=Zw.exports,nF;function pie(){if(nF)return Zw.exports;nF=1,Object.defineProperty(gie,"__esModule",{value:!0});const e=mie();return Zw.exports=e.Konva,Zw.exports}var az=pie();const xie=Oc(az),yie=iB({__proto__:null,default:xie},[az]);var iw={exports:{}},sF;function vie(){return sF||(sF=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var r=pC();Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return r.Konva}});const n=pC();e.exports=n.Konva})(iw,iw.exports)),iw.exports}var bie=vie();const Cv=Oc(bie);var w5={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _5,aF;function wie(){return aF||(aF=1,_5=function(t){var r={},n=Jm(),s=X8(),a=Object.assign;function i(b){for(var k="https://reactjs.org/docs/error-decoder.html?invariant="+b,O=1;O<arguments.length;O++)k+="&args[]="+encodeURIComponent(arguments[O]);return"Minified React error #"+b+"; visit "+k+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),E=Symbol.iterator;function A(b){return b===null||typeof b!="object"?null:(b=E&&b[E]||b["@@iterator"],typeof b=="function"?b:null)}function F(b){if(b==null)return null;if(typeof b=="function")return b.displayName||b.name||null;if(typeof b=="string")return b;switch(b){case d:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case v:return"Suspense";case C:return"SuspenseList"}if(typeof b=="object")switch(b.$$typeof){case p:return(b.displayName||"Context")+".Consumer";case g:return(b._context.displayName||"Context")+".Provider";case y:var k=b.render;return b=b.displayName,b||(b=k.displayName||k.name||"",b=b!==""?"ForwardRef("+b+")":"ForwardRef"),b;case w:return k=b.displayName||null,k!==null?k:F(b.type)||"Memo";case _:k=b._payload,b=b._init;try{return F(b(k))}catch{}}return null}function j(b){var k=b.type;switch(b.tag){case 24:return"Cache";case 9:return(k.displayName||"Context")+".Consumer";case 10:return(k._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return b=k.render,b=b.displayName||b.name||"",k.displayName||(b!==""?"ForwardRef("+b+")":"ForwardRef");case 7:return"Fragment";case 5:return k;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(k);case 8:return k===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof k=="function")return k.displayName||k.name||null;if(typeof k=="string")return k}return null}function P(b){var k=b,O=b;if(b.alternate)for(;k.return;)k=k.return;else{b=k;do k=b,(k.flags&4098)!==0&&(O=k.return),b=k.return;while(b)}return k.tag===3?O:null}function D(b){if(P(b)!==b)throw Error(i(188))}function B(b){var k=b.alternate;if(!k){if(k=P(b),k===null)throw Error(i(188));return k!==b?null:b}for(var O=b,H=k;;){var J=O.return;if(J===null)break;var le=J.alternate;if(le===null){if(H=J.return,H!==null){O=H;continue}break}if(J.child===le.child){for(le=J.child;le;){if(le===O)return D(J),b;if(le===H)return D(J),k;le=le.sibling}throw Error(i(188))}if(O.return!==H.return)O=J,H=le;else{for(var Ae=!1,dt=J.child;dt;){if(dt===O){Ae=!0,O=J,H=le;break}if(dt===H){Ae=!0,H=J,O=le;break}dt=dt.sibling}if(!Ae){for(dt=le.child;dt;){if(dt===O){Ae=!0,O=le,H=J;break}if(dt===H){Ae=!0,H=le,O=J;break}dt=dt.sibling}if(!Ae)throw Error(i(189))}}if(O.alternate!==H)throw Error(i(190))}if(O.tag!==3)throw Error(i(188));return O.stateNode.current===O?b:k}function V(b){return b=B(b),b!==null?Y(b):null}function Y(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){var k=Y(b);if(k!==null)return k;b=b.sibling}return null}function re(b){if(b.tag===5||b.tag===6)return b;for(b=b.child;b!==null;){if(b.tag!==4){var k=re(b);if(k!==null)return k}b=b.sibling}return null}var te=Array.isArray,ee=t.getPublicInstance,L=t.getRootHostContext,Q=t.getChildHostContext,U=t.prepareForCommit,G=t.resetAfterCommit,W=t.createInstance,M=t.appendInitialChild,I=t.finalizeInitialChildren,z=t.prepareUpdate,q=t.shouldSetTextContent,ne=t.createTextInstance,X=t.scheduleTimeout,se=t.cancelTimeout,ce=t.noTimeout,pe=t.isPrimaryRenderer,be=t.supportsMutation,oe=t.supportsPersistence,je=t.supportsHydration,Re=t.getInstanceFromNode,Xe=t.preparePortalMount,ft=t.getCurrentEventPriority,Je=t.detachDeletedInstance,Ht=t.supportsMicrotasks,Ve=t.scheduleMicrotask,at=t.supportsTestSelectors,gt=t.findFiberRoot,Te=t.getBoundingRect,bt=t.getTextContent,Ct=t.isHiddenSubtree,Lt=t.matchAccessibilityRole,Yt=t.setFocusIfFocusable,it=t.setupIntersectionObserver,xt=t.appendChild,Mt=t.appendChildToContainer,rt=t.commitTextUpdate,Qe=t.commitMount,It=t.commitUpdate,Tt=t.insertBefore,Rt=t.insertInContainerBefore,cr=t.removeChild,hr=t.removeChildFromContainer,Cr=t.resetTextContent,ur=t.hideInstance,Sr=t.hideTextInstance,we=t.unhideInstance,Me=t.unhideTextInstance,Ie=t.clearContainer,Ce=t.cloneInstance,Ze=t.createContainerChildSet,wt=t.appendChildToContainerChildSet,Nt=t.finalizeContainerChildren,Oe=t.replaceContainerChildren,Ke=t.cloneHiddenInstance,st=t.cloneHiddenTextInstance,Vt=t.canHydrateInstance,qt=t.canHydrateTextInstance,gr=t.canHydrateSuspenseInstance,Vr=t.isSuspenseInstancePending,Nr=t.isSuspenseInstanceFallback,dn=t.getSuspenseInstanceFallbackErrorDetails,me=t.registerSuspenseInstanceRetry,Ne=t.getNextHydratableSibling,ve=t.getFirstHydratableChild,Ee=t.getFirstHydratableChildWithinContainer,ue=t.getFirstHydratableChildWithinSuspenseInstance,he=t.hydrateInstance,Pe=t.hydrateTextInstance,tt=t.hydrateSuspenseInstance,Ge=t.getNextHydratableInstanceAfterSuspenseInstance,Ye=t.commitHydratedContainer,ct=t.commitHydratedSuspenseInstance,de=t.clearSuspenseBoundary,_e=t.clearSuspenseBoundaryFromContainer,Fe=t.shouldDeleteUnhydratedTailInstances,De=t.didNotMatchHydratedContainerTextInstance,qe=t.didNotMatchHydratedTextInstance,zt;function _r(b){if(zt===void 0)try{throw Error()}catch(O){var k=O.stack.trim().match(/\n( *(at )?)/);zt=k&&k[1]||""}return`
`+zt+b}var jr=!1;function pt(b,k){if(!b||jr)return"";jr=!0;var O=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(k)if(k=function(){throw Error()},Object.defineProperty(k.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(k,[])}catch(ir){var H=ir}Reflect.construct(b,[],k)}else{try{k.call()}catch(ir){H=ir}b.call(k.prototype)}else{try{throw Error()}catch(ir){H=ir}b()}}catch(ir){if(ir&&H&&typeof ir.stack=="string"){for(var J=ir.stack.split(`
`),le=H.stack.split(`
`),Ae=J.length-1,dt=le.length-1;1<=Ae&&0<=dt&&J[Ae]!==le[dt];)dt--;for(;1<=Ae&&0<=dt;Ae--,dt--)if(J[Ae]!==le[dt]){if(Ae!==1||dt!==1)do if(Ae--,dt--,0>dt||J[Ae]!==le[dt]){var jt=`
`+J[Ae].replace(" at new "," at ");return b.displayName&&jt.includes("<anonymous>")&&(jt=jt.replace("<anonymous>",b.displayName)),jt}while(1<=Ae&&0<=dt);break}}}finally{jr=!1,Error.prepareStackTrace=O}return(b=b?b.displayName||b.name:"")?_r(b):""}var or=Object.prototype.hasOwnProperty,Wr=[],Fr=-1;function Tr(b){return{current:b}}function Gr(b){0>Fr||(b.current=Wr[Fr],Wr[Fr]=null,Fr--)}function Lr(b,k){Fr++,Wr[Fr]=b.current,b.current=k}var zn={},br=Tr(zn),fn=Tr(!1),Xr=zn;function qn(b,k){var O=b.type.contextTypes;if(!O)return zn;var H=b.stateNode;if(H&&H.__reactInternalMemoizedUnmaskedChildContext===k)return H.__reactInternalMemoizedMaskedChildContext;var J={},le;for(le in O)J[le]=k[le];return H&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=k,b.__reactInternalMemoizedMaskedChildContext=J),J}function An(b){return b=b.childContextTypes,b!=null}function ke(){Gr(fn),Gr(br)}function Pt(b,k,O){if(br.current!==zn)throw Error(i(168));Lr(br,k),Lr(fn,O)}function Mr(b,k,O){var H=b.stateNode;if(k=k.childContextTypes,typeof H.getChildContext!="function")return O;H=H.getChildContext();for(var J in H)if(!(J in k))throw Error(i(108,j(b)||"Unknown",J));return a({},O,H)}function qr(b){return b=(b=b.stateNode)&&b.__reactInternalMemoizedMergedChildContext||zn,Xr=br.current,Lr(br,b),Lr(fn,fn.current),!0}function Tn(b,k,O){var H=b.stateNode;if(!H)throw Error(i(169));O?(b=Mr(b,k,Xr),H.__reactInternalMemoizedMergedChildContext=b,Gr(fn),Gr(br),Lr(br,b)):Gr(fn),Lr(fn,O)}var Jr=Math.clz32?Math.clz32:mi,hs=Math.log,Xs=Math.LN2;function mi(b){return b>>>=0,b===0?32:31-(hs(b)/Xs|0)|0}var xn=64,wl=4194304;function Ue(b){switch(b&-b){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return b&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return b}}function Ot(b,k){var O=b.pendingLanes;if(O===0)return 0;var H=0,J=b.suspendedLanes,le=b.pingedLanes,Ae=O&268435455;if(Ae!==0){var dt=Ae&~J;dt!==0?H=Ue(dt):(le&=Ae,le!==0&&(H=Ue(le)))}else Ae=O&~J,Ae!==0?H=Ue(Ae):le!==0&&(H=Ue(le));if(H===0)return 0;if(k!==0&&k!==H&&(k&J)===0&&(J=H&-H,le=k&-k,J>=le||J===16&&(le&4194240)!==0))return k;if((H&4)!==0&&(H|=O&16),k=b.entangledLanes,k!==0)for(b=b.entanglements,k&=H;0<k;)O=31-Jr(k),J=1<<O,H|=b[O],k&=~J;return H}function Le(b,k){switch(b){case 1:case 2:case 4:return k+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return k+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nt(b,k){for(var O=b.suspendedLanes,H=b.pingedLanes,J=b.expirationTimes,le=b.pendingLanes;0<le;){var Ae=31-Jr(le),dt=1<<Ae,jt=J[Ae];jt===-1?((dt&O)===0||(dt&H)!==0)&&(J[Ae]=Le(dt,k)):jt<=k&&(b.expiredLanes|=dt),le&=~dt}}function Wt(b){return b=b.pendingLanes&-1073741825,b!==0?b:b&1073741824?1073741824:0}function kt(){var b=xn;return xn<<=1,(xn&4194240)===0&&(xn=64),b}function wr(b){for(var k=[],O=0;31>O;O++)k.push(b);return k}function Ft(b,k,O){b.pendingLanes|=k,k!==536870912&&(b.suspendedLanes=0,b.pingedLanes=0),b=b.eventTimes,k=31-Jr(k),b[k]=O}function Qr(b,k){var O=b.pendingLanes&~k;b.pendingLanes=k,b.suspendedLanes=0,b.pingedLanes=0,b.expiredLanes&=k,b.mutableReadLanes&=k,b.entangledLanes&=k,k=b.entanglements;var H=b.eventTimes;for(b=b.expirationTimes;0<O;){var J=31-Jr(O),le=1<<J;k[J]=0,H[J]=-1,b[J]=-1,O&=~le}}function Ln(b,k){var O=b.entangledLanes|=k;for(b=b.entanglements;O;){var H=31-Jr(O),J=1<<H;J&k|b[H]&k&&(b[H]|=k),O&=~J}}var He=0;function pr(b){return b&=-b,1<b?4<b?(b&268435455)!==0?16:536870912:4:1}var ar=s.unstable_scheduleCallback,bs=s.unstable_cancelCallback,_n=s.unstable_shouldYield,hn=s.unstable_requestPaint,Sn=s.unstable_now,jn=s.unstable_ImmediatePriority,Xl=s.unstable_UserBlockingPriority,Oi=s.unstable_NormalPriority,xh=s.unstable_IdlePriority,yu=null,ao=null;function I0(b){if(ao&&typeof ao.onCommitFiberRoot=="function")try{ao.onCommitFiberRoot(yu,b,void 0,(b.current.flags&128)===128)}catch{}}function hg(b,k){return b===k&&(b!==0||1/b===1/k)||b!==b&&k!==k}var _l=typeof Object.is=="function"?Object.is:hg,Bc=null,L0=!1,B0=!1;function mg(b){Bc===null?Bc=[b]:Bc.push(b)}function X2(b){L0=!0,mg(b)}function Ja(){if(!B0&&Bc!==null){B0=!0;var b=0,k=He;try{var O=Bc;for(He=1;b<O.length;b++){var H=O[b];do H=H(!0);while(H!==null)}Bc=null,L0=!1}catch(J){throw Bc!==null&&(Bc=Bc.slice(b+1)),ar(jn,Ja),J}finally{He=k,B0=!1}}return null}var vu=[],$c=0,yh=null,hd=0,Di=[],No=0,wa=null,io=1,Sl="";function kl(b,k){vu[$c++]=hd,vu[$c++]=yh,yh=b,hd=k}function J2(b,k,O){Di[No++]=io,Di[No++]=Sl,Di[No++]=wa,wa=b;var H=io;b=Sl;var J=32-Jr(H)-1;H&=~(1<<J),O+=1;var le=32-Jr(k)+J;if(30<le){var Ae=J-J%5;le=(H&(1<<Ae)-1).toString(32),H>>=Ae,J-=Ae,io=1<<32-Jr(k)+J|O<<J|H,Sl=le+b}else io=1<<le|O<<J|H,Sl=b}function vh(b){b.return!==null&&(kl(b,1),J2(b,1,0))}function bh(b){for(;b===yh;)yh=vu[--$c],vu[$c]=null,hd=vu[--$c],vu[$c]=null;for(;b===wa;)wa=Di[--No],Di[No]=null,Sl=Di[--No],Di[No]=null,io=Di[--No],Di[No]=null}var Qa=null,Ri=null,ws=!1,wh=!1,Cl=null;function Q2(b,k){var O=Io(5,null,null,0);O.elementType="DELETED",O.stateNode=k,O.return=b,k=b.deletions,k===null?(b.deletions=[O],b.flags|=16):k.push(O)}function gg(b,k){switch(b.tag){case 5:return k=Vt(k,b.type,b.pendingProps),k!==null?(b.stateNode=k,Qa=b,Ri=ve(k),!0):!1;case 6:return k=qt(k,b.pendingProps),k!==null?(b.stateNode=k,Qa=b,Ri=null,!0):!1;case 13:if(k=gr(k),k!==null){var O=wa!==null?{id:io,overflow:Sl}:null;return b.memoizedState={dehydrated:k,treeContext:O,retryLane:1073741824},O=Io(18,null,null,0),O.stateNode=k,O.return=b,b.child=O,Qa=b,Ri=null,!0}return!1;default:return!1}}function H1(b){return(b.mode&1)!==0&&(b.flags&128)===0}function G1(b){if(ws){var k=Ri;if(k){var O=k;if(!gg(b,k)){if(H1(b))throw Error(i(418));k=Ne(O);var H=Qa;k&&gg(b,k)?Q2(H,O):(b.flags=b.flags&-4097|2,ws=!1,Qa=b)}}else{if(H1(b))throw Error(i(418));b.flags=b.flags&-4097|2,ws=!1,Qa=b}}}function Z2(b){for(b=b.return;b!==null&&b.tag!==5&&b.tag!==3&&b.tag!==13;)b=b.return;Qa=b}function pg(b){if(!je||b!==Qa)return!1;if(!ws)return Z2(b),ws=!0,!1;if(b.tag!==3&&(b.tag!==5||Fe(b.type)&&!q(b.type,b.memoizedProps))){var k=Ri;if(k){if(H1(b))throw eb(),Error(i(418));for(;k;)Q2(b,k),k=Ne(k)}}if(Z2(b),b.tag===13){if(!je)throw Error(i(316));if(b=b.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));Ri=Ge(b)}else Ri=Qa?Ne(b.stateNode):null;return!0}function eb(){for(var b=Ri;b;)b=Ne(b)}function md(){je&&(Ri=Qa=null,wh=ws=!1)}function V1(b){Cl===null?Cl=[b]:Cl.push(b)}var eS=o.ReactCurrentBatchConfig;function xg(b,k){if(_l(b,k))return!0;if(typeof b!="object"||b===null||typeof k!="object"||k===null)return!1;var O=Object.keys(b),H=Object.keys(k);if(O.length!==H.length)return!1;for(H=0;H<O.length;H++){var J=O[H];if(!or.call(k,J)||!_l(b[J],k[J]))return!1}return!0}function tS(b){switch(b.tag){case 5:return _r(b.type);case 16:return _r("Lazy");case 13:return _r("Suspense");case 19:return _r("SuspenseList");case 0:case 2:case 15:return b=pt(b.type,!1),b;case 11:return b=pt(b.type.render,!1),b;case 1:return b=pt(b.type,!0),b;default:return""}}function gd(b,k,O){if(b=O.ref,b!==null&&typeof b!="function"&&typeof b!="object"){if(O._owner){if(O=O._owner,O){if(O.tag!==1)throw Error(i(309));var H=O.stateNode}if(!H)throw Error(i(147,b));var J=H,le=""+b;return k!==null&&k.ref!==null&&typeof k.ref=="function"&&k.ref._stringRef===le?k.ref:(k=function(Ae){var dt=J.refs;Ae===null?delete dt[le]:dt[le]=Ae},k._stringRef=le,k)}if(typeof b!="string")throw Error(i(284));if(!O._owner)throw Error(i(290,b))}return b}function yg(b,k){throw b=Object.prototype.toString.call(k),Error(i(31,b==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":b))}function tb(b){var k=b._init;return k(b._payload)}function rb(b){function k(Et,mt){if(b){var Dt=Et.deletions;Dt===null?(Et.deletions=[mt],Et.flags|=16):Dt.push(mt)}}function O(Et,mt){if(!b)return null;for(;mt!==null;)k(Et,mt),mt=mt.sibling;return null}function H(Et,mt){for(Et=new Map;mt!==null;)mt.key!==null?Et.set(mt.key,mt):Et.set(mt.index,mt),mt=mt.sibling;return Et}function J(Et,mt){return Et=Iu(Et,mt),Et.index=0,Et.sibling=null,Et}function le(Et,mt,Dt){return Et.index=Dt,b?(Dt=Et.alternate,Dt!==null?(Dt=Dt.index,Dt<mt?(Et.flags|=2,mt):Dt):(Et.flags|=2,mt)):(Et.flags|=1048576,mt)}function Ae(Et){return b&&Et.alternate===null&&(Et.flags|=2),Et}function dt(Et,mt,Dt,Ar){return mt===null||mt.tag!==6?(mt=df(Dt,Et.mode,Ar),mt.return=Et,mt):(mt=J(mt,Dt),mt.return=Et,mt)}function jt(Et,mt,Dt,Ar){var Kr=Dt.type;return Kr===d?Ir(Et,mt,Dt.props.children,Ar,Dt.key):mt!==null&&(mt.elementType===Kr||typeof Kr=="object"&&Kr!==null&&Kr.$$typeof===_&&tb(Kr)===mt.type)?(Ar=J(mt,Dt.props),Ar.ref=gd(Et,mt,Dt),Ar.return=Et,Ar):(Ar=Xg(Dt.type,Dt.key,Dt.props,null,Et.mode,Ar),Ar.ref=gd(Et,mt,Dt),Ar.return=Et,Ar)}function ir(Et,mt,Dt,Ar){return mt===null||mt.tag!==4||mt.stateNode.containerInfo!==Dt.containerInfo||mt.stateNode.implementation!==Dt.implementation?(mt=Jg(Dt,Et.mode,Ar),mt.return=Et,mt):(mt=J(mt,Dt.children||[]),mt.return=Et,mt)}function Ir(Et,mt,Dt,Ar,Kr){return mt===null||mt.tag!==7?(mt=ti(Dt,Et.mode,Ar,Kr),mt.return=Et,mt):(mt=J(mt,Dt),mt.return=Et,mt)}function yn(Et,mt,Dt){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return mt=df(""+mt,Et.mode,Dt),mt.return=Et,mt;if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case c:return Dt=Xg(mt.type,mt.key,mt.props,null,Et.mode,Dt),Dt.ref=gd(Et,null,mt),Dt.return=Et,Dt;case u:return mt=Jg(mt,Et.mode,Dt),mt.return=Et,mt;case _:var Ar=mt._init;return yn(Et,Ar(mt._payload),Dt)}if(te(mt)||A(mt))return mt=ti(mt,Et.mode,Dt,null),mt.return=Et,mt;yg(Et,mt)}return null}function Er(Et,mt,Dt,Ar){var Kr=mt!==null?mt.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return Kr!==null?null:dt(Et,mt,""+Dt,Ar);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case c:return Dt.key===Kr?jt(Et,mt,Dt,Ar):null;case u:return Dt.key===Kr?ir(Et,mt,Dt,Ar):null;case _:return Kr=Dt._init,Er(Et,mt,Kr(Dt._payload),Ar)}if(te(Dt)||A(Dt))return Kr!==null?null:Ir(Et,mt,Dt,Ar,null);yg(Et,Dt)}return null}function xs(Et,mt,Dt,Ar,Kr){if(typeof Ar=="string"&&Ar!==""||typeof Ar=="number")return Et=Et.get(Dt)||null,dt(mt,Et,""+Ar,Kr);if(typeof Ar=="object"&&Ar!==null){switch(Ar.$$typeof){case c:return Et=Et.get(Ar.key===null?Dt:Ar.key)||null,jt(mt,Et,Ar,Kr);case u:return Et=Et.get(Ar.key===null?Dt:Ar.key)||null,ir(mt,Et,Ar,Kr);case _:var kn=Ar._init;return xs(Et,mt,Dt,kn(Ar._payload),Kr)}if(te(Ar)||A(Ar))return Et=Et.get(Dt)||null,Ir(mt,Et,Ar,Kr,null);yg(mt,Ar)}return null}function es(Et,mt,Dt,Ar){for(var Kr=null,kn=null,vn=mt,Bn=mt=0,Ta=null;vn!==null&&Bn<Dt.length;Bn++){vn.index>Bn?(Ta=vn,vn=null):Ta=vn.sibling;var Rn=Er(Et,vn,Dt[Bn],Ar);if(Rn===null){vn===null&&(vn=Ta);break}b&&vn&&Rn.alternate===null&&k(Et,vn),mt=le(Rn,mt,Bn),kn===null?Kr=Rn:kn.sibling=Rn,kn=Rn,vn=Ta}if(Bn===Dt.length)return O(Et,vn),ws&&kl(Et,Bn),Kr;if(vn===null){for(;Bn<Dt.length;Bn++)vn=yn(Et,Dt[Bn],Ar),vn!==null&&(mt=le(vn,mt,Bn),kn===null?Kr=vn:kn.sibling=vn,kn=vn);return ws&&kl(Et,Bn),Kr}for(vn=H(Et,vn);Bn<Dt.length;Bn++)Ta=xs(vn,Et,Bn,Dt[Bn],Ar),Ta!==null&&(b&&Ta.alternate!==null&&vn.delete(Ta.key===null?Bn:Ta.key),mt=le(Ta,mt,Bn),kn===null?Kr=Ta:kn.sibling=Ta,kn=Ta);return b&&vn.forEach(function(bi){return k(Et,bi)}),ws&&kl(Et,Bn),Kr}function zi(Et,mt,Dt,Ar){var Kr=A(Dt);if(typeof Kr!="function")throw Error(i(150));if(Dt=Kr.call(Dt),Dt==null)throw Error(i(151));for(var kn=Kr=null,vn=mt,Bn=mt=0,Ta=null,Rn=Dt.next();vn!==null&&!Rn.done;Bn++,Rn=Dt.next()){vn.index>Bn?(Ta=vn,vn=null):Ta=vn.sibling;var bi=Er(Et,vn,Rn.value,Ar);if(bi===null){vn===null&&(vn=Ta);break}b&&vn&&bi.alternate===null&&k(Et,vn),mt=le(bi,mt,Bn),kn===null?Kr=bi:kn.sibling=bi,kn=bi,vn=Ta}if(Rn.done)return O(Et,vn),ws&&kl(Et,Bn),Kr;if(vn===null){for(;!Rn.done;Bn++,Rn=Dt.next())Rn=yn(Et,Rn.value,Ar),Rn!==null&&(mt=le(Rn,mt,Bn),kn===null?Kr=Rn:kn.sibling=Rn,kn=Rn);return ws&&kl(Et,Bn),Kr}for(vn=H(Et,vn);!Rn.done;Bn++,Rn=Dt.next())Rn=xs(vn,Et,Bn,Rn.value,Ar),Rn!==null&&(b&&Rn.alternate!==null&&vn.delete(Rn.key===null?Bn:Rn.key),mt=le(Rn,mt,Bn),kn===null?Kr=Rn:kn.sibling=Rn,kn=Rn);return b&&vn.forEach(function(iS){return k(Et,iS)}),ws&&kl(Et,Bn),Kr}function ac(Et,mt,Dt,Ar){if(typeof Dt=="object"&&Dt!==null&&Dt.type===d&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case c:e:{for(var Kr=Dt.key,kn=mt;kn!==null;){if(kn.key===Kr){if(Kr=Dt.type,Kr===d){if(kn.tag===7){O(Et,kn.sibling),mt=J(kn,Dt.props.children),mt.return=Et,Et=mt;break e}}else if(kn.elementType===Kr||typeof Kr=="object"&&Kr!==null&&Kr.$$typeof===_&&tb(Kr)===kn.type){O(Et,kn.sibling),mt=J(kn,Dt.props),mt.ref=gd(Et,kn,Dt),mt.return=Et,Et=mt;break e}O(Et,kn);break}else k(Et,kn);kn=kn.sibling}Dt.type===d?(mt=ti(Dt.props.children,Et.mode,Ar,Dt.key),mt.return=Et,Et=mt):(Ar=Xg(Dt.type,Dt.key,Dt.props,null,Et.mode,Ar),Ar.ref=gd(Et,mt,Dt),Ar.return=Et,Et=Ar)}return Ae(Et);case u:e:{for(kn=Dt.key;mt!==null;){if(mt.key===kn)if(mt.tag===4&&mt.stateNode.containerInfo===Dt.containerInfo&&mt.stateNode.implementation===Dt.implementation){O(Et,mt.sibling),mt=J(mt,Dt.children||[]),mt.return=Et,Et=mt;break e}else{O(Et,mt);break}else k(Et,mt);mt=mt.sibling}mt=Jg(Dt,Et.mode,Ar),mt.return=Et,Et=mt}return Ae(Et);case _:return kn=Dt._init,ac(Et,mt,kn(Dt._payload),Ar)}if(te(Dt))return es(Et,mt,Dt,Ar);if(A(Dt))return zi(Et,mt,Dt,Ar);yg(Et,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"?(Dt=""+Dt,mt!==null&&mt.tag===6?(O(Et,mt.sibling),mt=J(mt,Dt),mt.return=Et,Et=mt):(O(Et,mt),mt=df(Dt,Et.mode,Ar),mt.return=Et,Et=mt),Ae(Et)):O(Et,mt)}return ac}var pd=rb(!0),nb=rb(!1),vg=Tr(null),bg=null,$0=null,q1=null;function K1(){q1=$0=bg=null}function sb(b,k,O){pe?(Lr(vg,k._currentValue),k._currentValue=O):(Lr(vg,k._currentValue2),k._currentValue2=O)}function _h(b){var k=vg.current;Gr(vg),pe?b._currentValue=k:b._currentValue2=k}function xd(b,k,O){for(;b!==null;){var H=b.alternate;if((b.childLanes&k)!==k?(b.childLanes|=k,H!==null&&(H.childLanes|=k)):H!==null&&(H.childLanes&k)!==k&&(H.childLanes|=k),b===O)break;b=b.return}}function U0(b,k){bg=b,q1=$0=null,b=b.dependencies,b!==null&&b.firstContext!==null&&((b.lanes&k)!==0&&(Sa=!0),b.firstContext=null)}function Eo(b){var k=pe?b._currentValue:b._currentValue2;if(q1!==b)if(b={context:b,memoizedValue:k,next:null},$0===null){if(bg===null)throw Error(i(308));$0=b,bg.dependencies={lanes:0,firstContext:b}}else $0=$0.next=b;return k}var bu=null;function wg(b){bu===null?bu=[b]:bu.push(b)}function Y1(b,k,O,H){var J=k.interleaved;return J===null?(O.next=O,wg(k)):(O.next=J.next,J.next=O),k.interleaved=O,Tl(b,H)}function Tl(b,k){b.lanes|=k;var O=b.alternate;for(O!==null&&(O.lanes|=k),O=b,b=b.return;b!==null;)b.childLanes|=k,O=b.alternate,O!==null&&(O.childLanes|=k),O=b,b=b.return;return O.tag===3?O.stateNode:null}var Ao=!1;function X1(b){b.updateQueue={baseState:b.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ab(b,k){b=b.updateQueue,k.updateQueue===b&&(k.updateQueue={baseState:b.baseState,firstBaseUpdate:b.firstBaseUpdate,lastBaseUpdate:b.lastBaseUpdate,shared:b.shared,effects:b.effects})}function Uc(b,k){return{eventTime:b,lane:k,tag:0,payload:null,callback:null,next:null}}function zc(b,k,O){var H=b.updateQueue;if(H===null)return null;if(H=H.shared,(bn&2)!==0){var J=H.pending;return J===null?k.next=k:(k.next=J.next,J.next=k),H.pending=k,Tl(b,O)}return J=H.interleaved,J===null?(k.next=k,wg(H)):(k.next=J.next,J.next=k),H.interleaved=k,Tl(b,O)}function Sh(b,k,O){if(k=k.updateQueue,k!==null&&(k=k.shared,(O&4194240)!==0)){var H=k.lanes;H&=b.pendingLanes,O|=H,k.lanes=O,Ln(b,O)}}function z0(b,k){var O=b.updateQueue,H=b.alternate;if(H!==null&&(H=H.updateQueue,O===H)){var J=null,le=null;if(O=O.firstBaseUpdate,O!==null){do{var Ae={eventTime:O.eventTime,lane:O.lane,tag:O.tag,payload:O.payload,callback:O.callback,next:null};le===null?J=le=Ae:le=le.next=Ae,O=O.next}while(O!==null);le===null?J=le=k:le=le.next=k}else J=le=k;O={baseState:H.baseState,firstBaseUpdate:J,lastBaseUpdate:le,shared:H.shared,effects:H.effects},b.updateQueue=O;return}b=O.lastBaseUpdate,b===null?O.firstBaseUpdate=k:b.next=k,O.lastBaseUpdate=k}function wu(b,k,O,H){var J=b.updateQueue;Ao=!1;var le=J.firstBaseUpdate,Ae=J.lastBaseUpdate,dt=J.shared.pending;if(dt!==null){J.shared.pending=null;var jt=dt,ir=jt.next;jt.next=null,Ae===null?le=ir:Ae.next=ir,Ae=jt;var Ir=b.alternate;Ir!==null&&(Ir=Ir.updateQueue,dt=Ir.lastBaseUpdate,dt!==Ae&&(dt===null?Ir.firstBaseUpdate=ir:dt.next=ir,Ir.lastBaseUpdate=jt))}if(le!==null){var yn=J.baseState;Ae=0,Ir=ir=jt=null,dt=le;do{var Er=dt.lane,xs=dt.eventTime;if((H&Er)===Er){Ir!==null&&(Ir=Ir.next={eventTime:xs,lane:0,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null});e:{var es=b,zi=dt;switch(Er=k,xs=O,zi.tag){case 1:if(es=zi.payload,typeof es=="function"){yn=es.call(xs,yn,Er);break e}yn=es;break e;case 3:es.flags=es.flags&-65537|128;case 0:if(es=zi.payload,Er=typeof es=="function"?es.call(xs,yn,Er):es,Er==null)break e;yn=a({},yn,Er);break e;case 2:Ao=!0}}dt.callback!==null&&dt.lane!==0&&(b.flags|=64,Er=J.effects,Er===null?J.effects=[dt]:Er.push(dt))}else xs={eventTime:xs,lane:Er,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null},Ir===null?(ir=Ir=xs,jt=yn):Ir=Ir.next=xs,Ae|=Er;if(dt=dt.next,dt===null){if(dt=J.shared.pending,dt===null)break;Er=dt,dt=Er.next,Er.next=null,J.lastBaseUpdate=Er,J.shared.pending=null}}while(!0);if(Ir===null&&(jt=yn),J.baseState=jt,J.firstBaseUpdate=ir,J.lastBaseUpdate=Ir,k=J.shared.interleaved,k!==null){J=k;do Ae|=J.lane,J=J.next;while(J!==k)}else le===null&&(J.shared.lanes=0);qc|=Ae,b.lanes=Ae,b.memoizedState=yn}}function ib(b,k,O){if(b=k.effects,k.effects=null,b!==null)for(k=0;k<b.length;k++){var H=b[k],J=H.callback;if(J!==null){if(H.callback=null,H=O,typeof J!="function")throw Error(i(191,J));J.call(H)}}}var _u={},el=Tr(_u),W0=Tr(_u),Su=Tr(_u);function tl(b){if(b===_u)throw Error(i(174));return b}function _g(b,k){Lr(Su,k),Lr(W0,b),Lr(el,_u),b=L(k),Gr(el),Lr(el,b)}function yd(){Gr(el),Gr(W0),Gr(Su)}function J1(b){var k=tl(Su.current),O=tl(el.current);k=Q(O,b.type,k),O!==k&&(Lr(W0,b),Lr(el,k))}function Q1(b){W0.current===b&&(Gr(el),Gr(W0))}var Ms=Tr(0);function Sg(b){for(var k=b;k!==null;){if(k.tag===13){var O=k.memoizedState;if(O!==null&&(O=O.dehydrated,O===null||Vr(O)||Nr(O)))return k}else if(k.tag===19&&k.memoizedProps.revealOrder!==void 0){if((k.flags&128)!==0)return k}else if(k.child!==null){k.child.return=k,k=k.child;continue}if(k===b)break;for(;k.sibling===null;){if(k.return===null||k.return===b)return null;k=k.return}k.sibling.return=k.return,k=k.sibling}return null}var Z1=[];function ex(){for(var b=0;b<Z1.length;b++){var k=Z1[b];pe?k._workInProgressVersionPrimary=null:k._workInProgressVersionSecondary=null}Z1.length=0}var oo=o.ReactCurrentDispatcher,vd=o.ReactCurrentBatchConfig,ku=0,Ts=null,ia=null,_a=null,H0=!1,kh=!1,Ch=0,G0=0;function Ba(){throw Error(i(321))}function bd(b,k){if(k===null)return!1;for(var O=0;O<k.length&&O<b.length;O++)if(!_l(b[O],k[O]))return!1;return!0}function Th(b,k,O,H,J,le){if(ku=le,Ts=k,k.memoizedState=null,k.updateQueue=null,k.lanes=0,oo.current=b===null||b.memoizedState===null?ux:dx,b=O(H,J),kh){le=0;do{if(kh=!1,Ch=0,25<=le)throw Error(i(301));le+=1,_a=ia=null,k.updateQueue=null,oo.current=fx,b=O(H,J)}while(kh)}if(oo.current=Cd,k=ia!==null&&ia.next!==null,ku=0,_a=ia=Ts=null,H0=!1,k)throw Error(i(300));return b}function kg(){var b=Ch!==0;return Ch=0,b}function jo(){var b={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _a===null?Ts.memoizedState=_a=b:_a=_a.next=b,_a}function Za(){if(ia===null){var b=Ts.alternate;b=b!==null?b.memoizedState:null}else b=ia.next;var k=_a===null?Ts.memoizedState:_a.next;if(k!==null)_a=k,ia=b;else{if(b===null)throw Error(i(310));ia=b,b={memoizedState:ia.memoizedState,baseState:ia.baseState,baseQueue:ia.baseQueue,queue:ia.queue,next:null},_a===null?Ts.memoizedState=_a=b:_a=_a.next=b}return _a}function wd(b,k){return typeof k=="function"?k(b):k}function Cg(b){var k=Za(),O=k.queue;if(O===null)throw Error(i(311));O.lastRenderedReducer=b;var H=ia,J=H.baseQueue,le=O.pending;if(le!==null){if(J!==null){var Ae=J.next;J.next=le.next,le.next=Ae}H.baseQueue=J=le,O.pending=null}if(J!==null){le=J.next,H=H.baseState;var dt=Ae=null,jt=null,ir=le;do{var Ir=ir.lane;if((ku&Ir)===Ir)jt!==null&&(jt=jt.next={lane:0,action:ir.action,hasEagerState:ir.hasEagerState,eagerState:ir.eagerState,next:null}),H=ir.hasEagerState?ir.eagerState:b(H,ir.action);else{var yn={lane:Ir,action:ir.action,hasEagerState:ir.hasEagerState,eagerState:ir.eagerState,next:null};jt===null?(dt=jt=yn,Ae=H):jt=jt.next=yn,Ts.lanes|=Ir,qc|=Ir}ir=ir.next}while(ir!==null&&ir!==le);jt===null?Ae=H:jt.next=dt,_l(H,k.memoizedState)||(Sa=!0),k.memoizedState=H,k.baseState=Ae,k.baseQueue=jt,O.lastRenderedState=H}if(b=O.interleaved,b!==null){J=b;do le=J.lane,Ts.lanes|=le,qc|=le,J=J.next;while(J!==b)}else J===null&&(O.lanes=0);return[k.memoizedState,O.dispatch]}function V0(b){var k=Za(),O=k.queue;if(O===null)throw Error(i(311));O.lastRenderedReducer=b;var H=O.dispatch,J=O.pending,le=k.memoizedState;if(J!==null){O.pending=null;var Ae=J=J.next;do le=b(le,Ae.action),Ae=Ae.next;while(Ae!==J);_l(le,k.memoizedState)||(Sa=!0),k.memoizedState=le,k.baseQueue===null&&(k.baseState=le),O.lastRenderedState=le}return[le,H]}function tx(){}function rx(b,k){var O=Ts,H=Za(),J=k(),le=!_l(H.memoizedState,J);if(le&&(H.memoizedState=J,Sa=!0),H=H.queue,Eg(ax.bind(null,O,H,b),[b]),H.getSnapshot!==k||le||_a!==null&&_a.memoizedState.tag&1){if(O.flags|=2048,_d(9,sx.bind(null,O,H,J,k),void 0,null),as===null)throw Error(i(349));(ku&30)!==0||nx(O,k,J)}return J}function nx(b,k,O){b.flags|=16384,b={getSnapshot:k,value:O},k=Ts.updateQueue,k===null?(k={lastEffect:null,stores:null},Ts.updateQueue=k,k.stores=[b]):(O=k.stores,O===null?k.stores=[b]:O.push(b))}function sx(b,k,O,H){k.value=O,k.getSnapshot=H,ix(k)&&Wc(b)}function ax(b,k,O){return O(function(){ix(k)&&Wc(b)})}function ix(b){var k=b.getSnapshot;b=b.value;try{var O=k();return!_l(b,O)}catch{return!0}}function Wc(b){var k=Tl(b,1);k!==null&&yi(k,b,1,-1)}function Tg(b){var k=jo();return typeof b=="function"&&(b=b()),k.memoizedState=k.baseState=b,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wd,lastRenderedState:b},k.queue=b,b=b.dispatch=rS.bind(null,Ts,b),[k.memoizedState,b]}function _d(b,k,O,H){return b={tag:b,create:k,destroy:O,deps:H,next:null},k=Ts.updateQueue,k===null?(k={lastEffect:null,stores:null},Ts.updateQueue=k,k.lastEffect=b.next=b):(O=k.lastEffect,O===null?k.lastEffect=b.next=b:(H=O.next,O.next=b,b.next=H,k.lastEffect=b)),b}function ob(){return Za().memoizedState}function Ng(b,k,O,H){var J=jo();Ts.flags|=b,J.memoizedState=_d(1|k,O,void 0,H===void 0?null:H)}function Cu(b,k,O,H){var J=Za();H=H===void 0?null:H;var le=void 0;if(ia!==null){var Ae=ia.memoizedState;if(le=Ae.destroy,H!==null&&bd(H,Ae.deps)){J.memoizedState=_d(k,O,le,H);return}}Ts.flags|=b,J.memoizedState=_d(1|k,O,le,H)}function lb(b,k){return Ng(8390656,8,b,k)}function Eg(b,k){return Cu(2048,8,b,k)}function ox(b,k){return Cu(4,2,b,k)}function ms(b,k){return Cu(4,4,b,k)}function Ag(b,k){if(typeof k=="function")return b=b(),k(b),function(){k(null)};if(k!=null)return b=b(),k.current=b,function(){k.current=null}}function Nh(b,k,O){return O=O!=null?O.concat([b]):null,Cu(4,4,Ag.bind(null,k,b),O)}function Sd(){}function lx(b,k){var O=Za();k=k===void 0?null:k;var H=O.memoizedState;return H!==null&&k!==null&&bd(k,H[1])?H[0]:(O.memoizedState=[b,k],b)}function jg(b,k){var O=Za();k=k===void 0?null:k;var H=O.memoizedState;return H!==null&&k!==null&&bd(k,H[1])?H[0]:(b=b(),O.memoizedState=[b,k],b)}function q0(b,k,O){return(ku&21)===0?(b.baseState&&(b.baseState=!1,Sa=!0),b.memoizedState=O):(_l(O,k)||(O=kt(),Ts.lanes|=O,qc|=O,b.baseState=!0),k)}function Pg(b,k){var O=He;He=O!==0&&4>O?O:4,b(!0);var H=vd.transition;vd.transition={};try{b(!1),k()}finally{He=O,vd.transition=H}}function kd(){return Za().memoizedState}function cb(b,k,O){var H=Ca(b);if(O={lane:H,action:O,hasEagerState:!1,eagerState:null,next:null},ub(b))cx(k,O);else if(O=Y1(b,k,O,H),O!==null){var J=_s();yi(O,b,H,J),Eh(O,k,H)}}function rS(b,k,O){var H=Ca(b),J={lane:H,action:O,hasEagerState:!1,eagerState:null,next:null};if(ub(b))cx(k,J);else{var le=b.alternate;if(b.lanes===0&&(le===null||le.lanes===0)&&(le=k.lastRenderedReducer,le!==null))try{var Ae=k.lastRenderedState,dt=le(Ae,O);if(J.hasEagerState=!0,J.eagerState=dt,_l(dt,Ae)){var jt=k.interleaved;jt===null?(J.next=J,wg(k)):(J.next=jt.next,jt.next=J),k.interleaved=J;return}}catch{}finally{}O=Y1(b,k,J,H),O!==null&&(J=_s(),yi(O,b,H,J),Eh(O,k,H))}}function ub(b){var k=b.alternate;return b===Ts||k!==null&&k===Ts}function cx(b,k){kh=H0=!0;var O=b.pending;O===null?k.next=k:(k.next=O.next,O.next=k),b.pending=k}function Eh(b,k,O){if((O&4194240)!==0){var H=k.lanes;H&=b.pendingLanes,O|=H,k.lanes=O,Ln(b,O)}}var Cd={readContext:Eo,useCallback:Ba,useContext:Ba,useEffect:Ba,useImperativeHandle:Ba,useInsertionEffect:Ba,useLayoutEffect:Ba,useMemo:Ba,useReducer:Ba,useRef:Ba,useState:Ba,useDebugValue:Ba,useDeferredValue:Ba,useTransition:Ba,useMutableSource:Ba,useSyncExternalStore:Ba,useId:Ba,unstable_isNewReconciler:!1},ux={readContext:Eo,useCallback:function(b,k){return jo().memoizedState=[b,k===void 0?null:k],b},useContext:Eo,useEffect:lb,useImperativeHandle:function(b,k,O){return O=O!=null?O.concat([b]):null,Ng(4194308,4,Ag.bind(null,k,b),O)},useLayoutEffect:function(b,k){return Ng(4194308,4,b,k)},useInsertionEffect:function(b,k){return Ng(4,2,b,k)},useMemo:function(b,k){var O=jo();return k=k===void 0?null:k,b=b(),O.memoizedState=[b,k],b},useReducer:function(b,k,O){var H=jo();return k=O!==void 0?O(k):k,H.memoizedState=H.baseState=k,b={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:b,lastRenderedState:k},H.queue=b,b=b.dispatch=cb.bind(null,Ts,b),[H.memoizedState,b]},useRef:function(b){var k=jo();return b={current:b},k.memoizedState=b},useState:Tg,useDebugValue:Sd,useDeferredValue:function(b){return jo().memoizedState=b},useTransition:function(){var b=Tg(!1),k=b[0];return b=Pg.bind(null,b[1]),jo().memoizedState=b,[k,b]},useMutableSource:function(){},useSyncExternalStore:function(b,k,O){var H=Ts,J=jo();if(ws){if(O===void 0)throw Error(i(407));O=O()}else{if(O=k(),as===null)throw Error(i(349));(ku&30)!==0||nx(H,k,O)}J.memoizedState=O;var le={value:O,getSnapshot:k};return J.queue=le,lb(ax.bind(null,H,le,b),[b]),H.flags|=2048,_d(9,sx.bind(null,H,le,O,k),void 0,null),O},useId:function(){var b=jo(),k=as.identifierPrefix;if(ws){var O=Sl,H=io;O=(H&~(1<<32-Jr(H)-1)).toString(32)+O,k=":"+k+"R"+O,O=Ch++,0<O&&(k+="H"+O.toString(32)),k+=":"}else O=G0++,k=":"+k+"r"+O.toString(32)+":";return b.memoizedState=k},unstable_isNewReconciler:!1},dx={readContext:Eo,useCallback:lx,useContext:Eo,useEffect:Eg,useImperativeHandle:Nh,useInsertionEffect:ox,useLayoutEffect:ms,useMemo:jg,useReducer:Cg,useRef:ob,useState:function(){return Cg(wd)},useDebugValue:Sd,useDeferredValue:function(b){var k=Za();return q0(k,ia.memoizedState,b)},useTransition:function(){var b=Cg(wd)[0],k=Za().memoizedState;return[b,k]},useMutableSource:tx,useSyncExternalStore:rx,useId:kd,unstable_isNewReconciler:!1},fx={readContext:Eo,useCallback:lx,useContext:Eo,useEffect:Eg,useImperativeHandle:Nh,useInsertionEffect:ox,useLayoutEffect:ms,useMemo:jg,useReducer:V0,useRef:ob,useState:function(){return V0(wd)},useDebugValue:Sd,useDeferredValue:function(b){var k=Za();return ia===null?k.memoizedState=b:q0(k,ia.memoizedState,b)},useTransition:function(){var b=V0(wd)[0],k=Za().memoizedState;return[b,k]},useMutableSource:tx,useSyncExternalStore:rx,useId:kd,unstable_isNewReconciler:!1};function Po(b,k){if(b&&b.defaultProps){k=a({},k),b=b.defaultProps;for(var O in b)k[O]===void 0&&(k[O]=b[O]);return k}return k}function hx(b,k,O,H){k=b.memoizedState,O=O(H,k),O=O==null?k:a({},k,O),b.memoizedState=O,b.lanes===0&&(b.updateQueue.baseState=O)}var Ah={isMounted:function(b){return(b=b._reactInternals)?P(b)===b:!1},enqueueSetState:function(b,k,O){b=b._reactInternals;var H=_s(),J=Ca(b),le=Uc(H,J);le.payload=k,O!=null&&(le.callback=O),k=zc(b,le,J),k!==null&&(yi(k,b,J,H),Sh(k,b,J))},enqueueReplaceState:function(b,k,O){b=b._reactInternals;var H=_s(),J=Ca(b),le=Uc(H,J);le.tag=1,le.payload=k,O!=null&&(le.callback=O),k=zc(b,le,J),k!==null&&(yi(k,b,J,H),Sh(k,b,J))},enqueueForceUpdate:function(b,k){b=b._reactInternals;var O=_s(),H=Ca(b),J=Uc(O,H);J.tag=2,k!=null&&(J.callback=k),k=zc(b,J,H),k!==null&&(yi(k,b,H,O),Sh(k,b,H))}};function db(b,k,O,H,J,le,Ae){return b=b.stateNode,typeof b.shouldComponentUpdate=="function"?b.shouldComponentUpdate(H,le,Ae):k.prototype&&k.prototype.isPureReactComponent?!xg(O,H)||!xg(J,le):!0}function fb(b,k,O){var H=!1,J=zn,le=k.contextType;return typeof le=="object"&&le!==null?le=Eo(le):(J=An(k)?Xr:br.current,H=k.contextTypes,le=(H=H!=null)?qn(b,J):zn),k=new k(O,le),b.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=Ah,b.stateNode=k,k._reactInternals=b,H&&(b=b.stateNode,b.__reactInternalMemoizedUnmaskedChildContext=J,b.__reactInternalMemoizedMaskedChildContext=le),k}function Fg(b,k,O,H){b=k.state,typeof k.componentWillReceiveProps=="function"&&k.componentWillReceiveProps(O,H),typeof k.UNSAFE_componentWillReceiveProps=="function"&&k.UNSAFE_componentWillReceiveProps(O,H),k.state!==b&&Ah.enqueueReplaceState(k,k.state,null)}function Jl(b,k,O,H){var J=b.stateNode;J.props=O,J.state=b.memoizedState,J.refs={},X1(b);var le=k.contextType;typeof le=="object"&&le!==null?J.context=Eo(le):(le=An(k)?Xr:br.current,J.context=qn(b,le)),J.state=b.memoizedState,le=k.getDerivedStateFromProps,typeof le=="function"&&(hx(b,k,le,O),J.state=b.memoizedState),typeof k.getDerivedStateFromProps=="function"||typeof J.getSnapshotBeforeUpdate=="function"||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(k=J.state,typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount(),k!==J.state&&Ah.enqueueReplaceState(J,J.state,null),wu(b,O,J,H),J.state=b.memoizedState),typeof J.componentDidMount=="function"&&(b.flags|=4194308)}function Td(b,k){try{var O="",H=k;do O+=tS(H),H=H.return;while(H);var J=O}catch(le){J=`
Error generating stack: `+le.message+`
`+le.stack}return{value:b,source:k,stack:J,digest:null}}function Tu(b,k,O){return{value:b,source:null,stack:O??null,digest:k??null}}function rl(b,k){try{console.error(k.value)}catch(O){setTimeout(function(){throw O})}}var jh=typeof WeakMap=="function"?WeakMap:Map;function Ql(b,k,O){O=Uc(-1,O),O.tag=3,O.payload={element:null};var H=k.value;return O.callback=function(){Ws||(Ws=!0,oa=H),rl(b,k)},O}function Mg(b,k,O){O=Uc(-1,O),O.tag=3;var H=b.type.getDerivedStateFromError;if(typeof H=="function"){var J=k.value;O.payload=function(){return H(J)},O.callback=function(){rl(b,k)}}var le=b.stateNode;return le!==null&&typeof le.componentDidCatch=="function"&&(O.callback=function(){rl(b,k),typeof H!="function"&&(El===null?El=new Set([this]):El.add(this));var Ae=k.stack;this.componentDidCatch(k.value,{componentStack:Ae!==null?Ae:""})}),O}function hb(b,k,O){var H=b.pingCache;if(H===null){H=b.pingCache=new jh;var J=new Set;H.set(k,J)}else J=H.get(k),J===void 0&&(J=new Set,H.set(k,J));J.has(O)||(J.add(O),b=wb.bind(null,b,k,O),k.then(b,b))}function mb(b){do{var k;if((k=b.tag===13)&&(k=b.memoizedState,k=k!==null?k.dehydrated!==null:!0),k)return b;b=b.return}while(b!==null);return null}function Nu(b,k,O,H,J){return(b.mode&1)===0?(b===k?b.flags|=65536:(b.flags|=128,O.flags|=131072,O.flags&=-52805,O.tag===1&&(O.alternate===null?O.tag=17:(k=Uc(-1,1),k.tag=2,zc(O,k,1))),O.lanes|=1),b):(b.flags|=65536,b.lanes=J,b)}var Ph=o.ReactCurrentOwner,Sa=!1;function $a(b,k,O,H){k.child=b===null?nb(k,null,O,H):pd(k,b.child,O,H)}function Og(b,k,O,H,J){O=O.render;var le=k.ref;return U0(k,J),H=Th(b,k,O,H,le,J),O=kg(),b!==null&&!Sa?(k.updateQueue=b.updateQueue,k.flags&=-2053,b.lanes&=~J,Gc(b,k,J)):(ws&&O&&vh(k),k.flags|=1,$a(b,k,H,J),k.child)}function Nd(b,k,O,H,J){if(b===null){var le=O.type;return typeof le=="function"&&!cf(le)&&le.defaultProps===void 0&&O.compare===null&&O.defaultProps===void 0?(k.tag=15,k.type=le,Hc(b,k,le,H,J)):(b=Xg(O.type,null,H,k,k.mode,J),b.ref=k.ref,b.return=k,k.child=b)}if(le=b.child,(b.lanes&J)===0){var Ae=le.memoizedProps;if(O=O.compare,O=O!==null?O:xg,O(Ae,H)&&b.ref===k.ref)return Gc(b,k,J)}return k.flags|=1,b=Iu(le,H),b.ref=k.ref,b.return=k,k.child=b}function Hc(b,k,O,H,J){if(b!==null){var le=b.memoizedProps;if(xg(le,H)&&b.ref===k.ref)if(Sa=!1,k.pendingProps=H=le,(b.lanes&J)!==0)(b.flags&131072)!==0&&(Sa=!0);else return k.lanes=b.lanes,Gc(b,k,J)}return Zl(b,k,O,H,J)}function gs(b,k,O){var H=k.pendingProps,J=H.children,le=b!==null?b.memoizedState:null;if(H.mode==="hidden")if((k.mode&1)===0)k.memoizedState={baseLanes:0,cachePool:null,transitions:null},Lr(Mu,ka),ka|=O;else{if((O&1073741824)===0)return b=le!==null?le.baseLanes|O:O,k.lanes=k.childLanes=1073741824,k.memoizedState={baseLanes:b,cachePool:null,transitions:null},k.updateQueue=null,Lr(Mu,ka),ka|=b,null;k.memoizedState={baseLanes:0,cachePool:null,transitions:null},H=le!==null?le.baseLanes:O,Lr(Mu,ka),ka|=H}else le!==null?(H=le.baseLanes|O,k.memoizedState=null):H=O,Lr(Mu,ka),ka|=H;return $a(b,k,J,O),k.child}function ss(b,k){var O=k.ref;(b===null&&O!==null||b!==null&&b.ref!==O)&&(k.flags|=512,k.flags|=2097152)}function Zl(b,k,O,H,J){var le=An(O)?Xr:br.current;return le=qn(k,le),U0(k,J),O=Th(b,k,O,H,le,J),H=kg(),b!==null&&!Sa?(k.updateQueue=b.updateQueue,k.flags&=-2053,b.lanes&=~J,Gc(b,k,J)):(ws&&H&&vh(k),k.flags|=1,$a(b,k,O,J),k.child)}function ei(b,k,O,H,J){if(An(O)){var le=!0;qr(k)}else le=!1;if(U0(k,J),k.stateNode===null)Fh(b,k),fb(k,O,H),Jl(k,O,H,J),H=!0;else if(b===null){var Ae=k.stateNode,dt=k.memoizedProps;Ae.props=dt;var jt=Ae.context,ir=O.contextType;typeof ir=="object"&&ir!==null?ir=Eo(ir):(ir=An(O)?Xr:br.current,ir=qn(k,ir));var Ir=O.getDerivedStateFromProps,yn=typeof Ir=="function"||typeof Ae.getSnapshotBeforeUpdate=="function";yn||typeof Ae.UNSAFE_componentWillReceiveProps!="function"&&typeof Ae.componentWillReceiveProps!="function"||(dt!==H||jt!==ir)&&Fg(k,Ae,H,ir),Ao=!1;var Er=k.memoizedState;Ae.state=Er,wu(k,H,Ae,J),jt=k.memoizedState,dt!==H||Er!==jt||fn.current||Ao?(typeof Ir=="function"&&(hx(k,O,Ir,H),jt=k.memoizedState),(dt=Ao||db(k,O,dt,H,Er,jt,ir))?(yn||typeof Ae.UNSAFE_componentWillMount!="function"&&typeof Ae.componentWillMount!="function"||(typeof Ae.componentWillMount=="function"&&Ae.componentWillMount(),typeof Ae.UNSAFE_componentWillMount=="function"&&Ae.UNSAFE_componentWillMount()),typeof Ae.componentDidMount=="function"&&(k.flags|=4194308)):(typeof Ae.componentDidMount=="function"&&(k.flags|=4194308),k.memoizedProps=H,k.memoizedState=jt),Ae.props=H,Ae.state=jt,Ae.context=ir,H=dt):(typeof Ae.componentDidMount=="function"&&(k.flags|=4194308),H=!1)}else{Ae=k.stateNode,ab(b,k),dt=k.memoizedProps,ir=k.type===k.elementType?dt:Po(k.type,dt),Ae.props=ir,yn=k.pendingProps,Er=Ae.context,jt=O.contextType,typeof jt=="object"&&jt!==null?jt=Eo(jt):(jt=An(O)?Xr:br.current,jt=qn(k,jt));var xs=O.getDerivedStateFromProps;(Ir=typeof xs=="function"||typeof Ae.getSnapshotBeforeUpdate=="function")||typeof Ae.UNSAFE_componentWillReceiveProps!="function"&&typeof Ae.componentWillReceiveProps!="function"||(dt!==yn||Er!==jt)&&Fg(k,Ae,H,jt),Ao=!1,Er=k.memoizedState,Ae.state=Er,wu(k,H,Ae,J);var es=k.memoizedState;dt!==yn||Er!==es||fn.current||Ao?(typeof xs=="function"&&(hx(k,O,xs,H),es=k.memoizedState),(ir=Ao||db(k,O,ir,H,Er,es,jt)||!1)?(Ir||typeof Ae.UNSAFE_componentWillUpdate!="function"&&typeof Ae.componentWillUpdate!="function"||(typeof Ae.componentWillUpdate=="function"&&Ae.componentWillUpdate(H,es,jt),typeof Ae.UNSAFE_componentWillUpdate=="function"&&Ae.UNSAFE_componentWillUpdate(H,es,jt)),typeof Ae.componentDidUpdate=="function"&&(k.flags|=4),typeof Ae.getSnapshotBeforeUpdate=="function"&&(k.flags|=1024)):(typeof Ae.componentDidUpdate!="function"||dt===b.memoizedProps&&Er===b.memoizedState||(k.flags|=4),typeof Ae.getSnapshotBeforeUpdate!="function"||dt===b.memoizedProps&&Er===b.memoizedState||(k.flags|=1024),k.memoizedProps=H,k.memoizedState=es),Ae.props=H,Ae.state=es,Ae.context=jt,H=ir):(typeof Ae.componentDidUpdate!="function"||dt===b.memoizedProps&&Er===b.memoizedState||(k.flags|=4),typeof Ae.getSnapshotBeforeUpdate!="function"||dt===b.memoizedProps&&Er===b.memoizedState||(k.flags|=1024),H=!1)}return gi(b,k,O,H,le,J)}function gi(b,k,O,H,J,le){ss(b,k);var Ae=(k.flags&128)!==0;if(!H&&!Ae)return J&&Tn(k,O,!1),Gc(b,k,le);H=k.stateNode,Ph.current=k;var dt=Ae&&typeof O.getDerivedStateFromError!="function"?null:H.render();return k.flags|=1,b!==null&&Ae?(k.child=pd(k,b.child,null,le),k.child=pd(k,null,dt,le)):$a(b,k,dt,le),k.memoizedState=H.state,J&&Tn(k,O,!0),k.child}function Eu(b){var k=b.stateNode;k.pendingContext?Pt(b,k.pendingContext,k.pendingContext!==k.context):k.context&&Pt(b,k.context,!1),_g(b,k.containerInfo)}function Ed(b,k,O,H,J){return md(),V1(J),k.flags|=256,$a(b,k,O,H),k.child}var pi={dehydrated:null,treeContext:null,retryLane:0};function K0(b){return{baseLanes:b,cachePool:null,transitions:null}}function mx(b,k,O){var H=k.pendingProps,J=Ms.current,le=!1,Ae=(k.flags&128)!==0,dt;if((dt=Ae)||(dt=b!==null&&b.memoizedState===null?!1:(J&2)!==0),dt?(le=!0,k.flags&=-129):(b===null||b.memoizedState!==null)&&(J|=1),Lr(Ms,J&1),b===null)return G1(k),b=k.memoizedState,b!==null&&(b=b.dehydrated,b!==null)?((k.mode&1)===0?k.lanes=1:Nr(b)?k.lanes=8:k.lanes=1073741824,null):(Ae=H.children,b=H.fallback,le?(H=k.mode,le=k.child,Ae={mode:"hidden",children:Ae},(H&1)===0&&le!==null?(le.childLanes=0,le.pendingProps=Ae):le=uf(Ae,H,0,null),b=ti(b,H,O,null),le.return=k,b.return=k,le.sibling=b,k.child=le,k.child.memoizedState=K0(O),k.memoizedState=pi,b):Dg(k,Ae));if(J=b.memoizedState,J!==null&&(dt=J.dehydrated,dt!==null))return gb(b,k,Ae,H,dt,J,O);if(le){le=H.fallback,Ae=k.mode,J=b.child,dt=J.sibling;var jt={mode:"hidden",children:H.children};return(Ae&1)===0&&k.child!==J?(H=k.child,H.childLanes=0,H.pendingProps=jt,k.deletions=null):(H=Iu(J,jt),H.subtreeFlags=J.subtreeFlags&14680064),dt!==null?le=Iu(dt,le):(le=ti(le,Ae,O,null),le.flags|=2),le.return=k,H.return=k,H.sibling=le,k.child=H,H=le,le=k.child,Ae=b.child.memoizedState,Ae=Ae===null?K0(O):{baseLanes:Ae.baseLanes|O,cachePool:null,transitions:Ae.transitions},le.memoizedState=Ae,le.childLanes=b.childLanes&~O,k.memoizedState=pi,H}return le=b.child,b=le.sibling,H=Iu(le,{mode:"visible",children:H.children}),(k.mode&1)===0&&(H.lanes=O),H.return=k,H.sibling=null,b!==null&&(O=k.deletions,O===null?(k.deletions=[b],k.flags|=16):O.push(b)),k.child=H,k.memoizedState=null,H}function Dg(b,k){return k=uf({mode:"visible",children:k},b.mode,0,null),k.return=b,b.child=k}function Ad(b,k,O,H){return H!==null&&V1(H),pd(k,b.child,null,O),b=Dg(k,k.pendingProps.children),b.flags|=2,k.memoizedState=null,b}function gb(b,k,O,H,J,le,Ae){if(O)return k.flags&256?(k.flags&=-257,H=Tu(Error(i(422))),Ad(b,k,Ae,H)):k.memoizedState!==null?(k.child=b.child,k.flags|=128,null):(le=H.fallback,J=k.mode,H=uf({mode:"visible",children:H.children},J,0,null),le=ti(le,J,Ae,null),le.flags|=2,H.return=k,le.return=k,H.sibling=le,k.child=H,(k.mode&1)!==0&&pd(k,b.child,null,Ae),k.child.memoizedState=K0(Ae),k.memoizedState=pi,le);if((k.mode&1)===0)return Ad(b,k,Ae,null);if(Nr(J))return H=dn(J).digest,le=Error(i(419)),H=Tu(le,H,void 0),Ad(b,k,Ae,H);if(O=(Ae&b.childLanes)!==0,Sa||O){if(H=as,H!==null){switch(Ae&-Ae){case 4:J=2;break;case 16:J=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:J=32;break;case 536870912:J=268435456;break;default:J=0}J=(J&(H.suspendedLanes|Ae))!==0?0:J,J!==0&&J!==le.retryLane&&(le.retryLane=J,Tl(b,J),yi(H,b,J,-1))}return lf(),H=Tu(Error(i(421))),Ad(b,k,Ae,H)}return Vr(J)?(k.flags|=128,k.child=b.child,k=Sb.bind(null,b),me(J,k),null):(b=le.treeContext,je&&(Ri=ue(J),Qa=k,ws=!0,Cl=null,wh=!1,b!==null&&(Di[No++]=io,Di[No++]=Sl,Di[No++]=wa,io=b.id,Sl=b.overflow,wa=k)),k=Dg(k,H.children),k.flags|=4096,k)}function ec(b,k,O){b.lanes|=k;var H=b.alternate;H!==null&&(H.lanes|=k),xd(b.return,k,O)}function Y0(b,k,O,H,J){var le=b.memoizedState;le===null?b.memoizedState={isBackwards:k,rendering:null,renderingStartTime:0,last:H,tail:O,tailMode:J}:(le.isBackwards=k,le.rendering=null,le.renderingStartTime=0,le.last=H,le.tail=O,le.tailMode=J)}function Rg(b,k,O){var H=k.pendingProps,J=H.revealOrder,le=H.tail;if($a(b,k,H.children,O),H=Ms.current,(H&2)!==0)H=H&1|2,k.flags|=128;else{if(b!==null&&(b.flags&128)!==0)e:for(b=k.child;b!==null;){if(b.tag===13)b.memoizedState!==null&&ec(b,O,k);else if(b.tag===19)ec(b,O,k);else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===k)break e;for(;b.sibling===null;){if(b.return===null||b.return===k)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}H&=1}if(Lr(Ms,H),(k.mode&1)===0)k.memoizedState=null;else switch(J){case"forwards":for(O=k.child,J=null;O!==null;)b=O.alternate,b!==null&&Sg(b)===null&&(J=O),O=O.sibling;O=J,O===null?(J=k.child,k.child=null):(J=O.sibling,O.sibling=null),Y0(k,!1,J,O,le);break;case"backwards":for(O=null,J=k.child,k.child=null;J!==null;){if(b=J.alternate,b!==null&&Sg(b)===null){k.child=J;break}b=J.sibling,J.sibling=O,O=J,J=b}Y0(k,!0,O,null,le);break;case"together":Y0(k,!1,null,null,void 0);break;default:k.memoizedState=null}return k.child}function Fh(b,k){(k.mode&1)===0&&b!==null&&(b.alternate=null,k.alternate=null,k.flags|=2)}function Gc(b,k,O){if(b!==null&&(k.dependencies=b.dependencies),qc|=k.lanes,(O&k.childLanes)===0)return null;if(b!==null&&k.child!==b.child)throw Error(i(153));if(k.child!==null){for(b=k.child,O=Iu(b,b.pendingProps),k.child=O,O.return=k;b.sibling!==null;)b=b.sibling,O=O.sibling=Iu(b,b.pendingProps),O.return=k;O.sibling=null}return k.child}function Au(b,k,O){switch(k.tag){case 3:Eu(k),md();break;case 5:J1(k);break;case 1:An(k.type)&&qr(k);break;case 4:_g(k,k.stateNode.containerInfo);break;case 10:sb(k,k.type._context,k.memoizedProps.value);break;case 13:var H=k.memoizedState;if(H!==null)return H.dehydrated!==null?(Lr(Ms,Ms.current&1),k.flags|=128,null):(O&k.child.childLanes)!==0?mx(b,k,O):(Lr(Ms,Ms.current&1),b=Gc(b,k,O),b!==null?b.sibling:null);Lr(Ms,Ms.current&1);break;case 19:if(H=(O&k.childLanes)!==0,(b.flags&128)!==0){if(H)return Rg(b,k,O);k.flags|=128}var J=k.memoizedState;if(J!==null&&(J.rendering=null,J.tail=null,J.lastEffect=null),Lr(Ms,Ms.current),H)break;return null;case 22:case 23:return k.lanes=0,gs(b,k,O)}return Gc(b,k,O)}function Ii(b){b.flags|=4}function jd(b,k){if(b!==null&&b.child===k.child)return!0;if((k.flags&16)!==0)return!1;for(b=k.child;b!==null;){if((b.flags&12854)!==0||(b.subtreeFlags&12854)!==0)return!1;b=b.sibling}return!0}var ju,Pu,Li,Bi;if(be)ju=function(b,k){for(var O=k.child;O!==null;){if(O.tag===5||O.tag===6)M(b,O.stateNode);else if(O.tag!==4&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===k)break;for(;O.sibling===null;){if(O.return===null||O.return===k)return;O=O.return}O.sibling.return=O.return,O=O.sibling}},Pu=function(){},Li=function(b,k,O,H,J){if(b=b.memoizedProps,b!==H){var le=k.stateNode,Ae=tl(el.current);O=z(le,O,b,H,J,Ae),(k.updateQueue=O)&&Ii(k)}},Bi=function(b,k,O,H){O!==H&&Ii(k)};else if(oe){ju=function(b,k,O,H){for(var J=k.child;J!==null;){if(J.tag===5){var le=J.stateNode;O&&H&&(le=Ke(le,J.type,J.memoizedProps,J)),M(b,le)}else if(J.tag===6)le=J.stateNode,O&&H&&(le=st(le,J.memoizedProps,J)),M(b,le);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)le=J.child,le!==null&&(le.return=J),ju(b,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===k)break;for(;J.sibling===null;){if(J.return===null||J.return===k)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};var Fu=function(b,k,O,H){for(var J=k.child;J!==null;){if(J.tag===5){var le=J.stateNode;O&&H&&(le=Ke(le,J.type,J.memoizedProps,J)),wt(b,le)}else if(J.tag===6)le=J.stateNode,O&&H&&(le=st(le,J.memoizedProps,J)),wt(b,le);else if(J.tag!==4){if(J.tag===22&&J.memoizedState!==null)le=J.child,le!==null&&(le.return=J),Fu(b,J,!0,!0);else if(J.child!==null){J.child.return=J,J=J.child;continue}}if(J===k)break;for(;J.sibling===null;){if(J.return===null||J.return===k)return;J=J.return}J.sibling.return=J.return,J=J.sibling}};Pu=function(b,k){var O=k.stateNode;if(!jd(b,k)){b=O.containerInfo;var H=Ze(b);Fu(H,k,!1,!1),O.pendingChildren=H,Ii(k),Nt(b,H)}},Li=function(b,k,O,H,J){var le=b.stateNode,Ae=b.memoizedProps;if((b=jd(b,k))&&Ae===H)k.stateNode=le;else{var dt=k.stateNode,jt=tl(el.current),ir=null;Ae!==H&&(ir=z(dt,O,Ae,H,J,jt)),b&&ir===null?k.stateNode=le:(le=Ce(le,ir,O,Ae,H,k,b,dt),I(le,O,H,J,jt)&&Ii(k),k.stateNode=le,b?Ii(k):ju(le,k,!1,!1))}},Bi=function(b,k,O,H){O!==H?(b=tl(Su.current),O=tl(el.current),k.stateNode=ne(H,b,O,k),Ii(k)):k.stateNode=b.stateNode}}else Pu=function(){},Li=function(){},Bi=function(){};function Fo(b,k){if(!ws)switch(b.tailMode){case"hidden":k=b.tail;for(var O=null;k!==null;)k.alternate!==null&&(O=k),k=k.sibling;O===null?b.tail=null:O.sibling=null;break;case"collapsed":O=b.tail;for(var H=null;O!==null;)O.alternate!==null&&(H=O),O=O.sibling;H===null?k||b.tail===null?b.tail=null:b.tail.sibling=null:H.sibling=null}}function Ns(b){var k=b.alternate!==null&&b.alternate.child===b.child,O=0,H=0;if(k)for(var J=b.child;J!==null;)O|=J.lanes|J.childLanes,H|=J.subtreeFlags&14680064,H|=J.flags&14680064,J.return=b,J=J.sibling;else for(J=b.child;J!==null;)O|=J.lanes|J.childLanes,H|=J.subtreeFlags,H|=J.flags,J.return=b,J=J.sibling;return b.subtreeFlags|=H,b.childLanes=O,k}function Pd(b,k,O){var H=k.pendingProps;switch(bh(k),k.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(k),null;case 1:return An(k.type)&&ke(),Ns(k),null;case 3:return O=k.stateNode,yd(),Gr(fn),Gr(br),ex(),O.pendingContext&&(O.context=O.pendingContext,O.pendingContext=null),(b===null||b.child===null)&&(pg(k)?Ii(k):b===null||b.memoizedState.isDehydrated&&(k.flags&256)===0||(k.flags|=1024,Cl!==null&&(Kg(Cl),Cl=null))),Pu(b,k),Ns(k),null;case 5:Q1(k),O=tl(Su.current);var J=k.type;if(b!==null&&k.stateNode!=null)Li(b,k,J,H,O),b.ref!==k.ref&&(k.flags|=512,k.flags|=2097152);else{if(!H){if(k.stateNode===null)throw Error(i(166));return Ns(k),null}if(b=tl(el.current),pg(k)){if(!je)throw Error(i(175));b=he(k.stateNode,k.type,k.memoizedProps,O,b,k,!wh),k.updateQueue=b,b!==null&&Ii(k)}else{var le=W(J,H,O,b,k);ju(le,k,!1,!1),k.stateNode=le,I(le,J,H,O,b)&&Ii(k)}k.ref!==null&&(k.flags|=512,k.flags|=2097152)}return Ns(k),null;case 6:if(b&&k.stateNode!=null)Bi(b,k,b.memoizedProps,H);else{if(typeof H!="string"&&k.stateNode===null)throw Error(i(166));if(b=tl(Su.current),O=tl(el.current),pg(k)){if(!je)throw Error(i(176));if(b=k.stateNode,O=k.memoizedProps,(H=Pe(b,O,k,!wh))&&(J=Qa,J!==null))switch(J.tag){case 3:De(J.stateNode.containerInfo,b,O,(J.mode&1)!==0);break;case 5:qe(J.type,J.memoizedProps,J.stateNode,b,O,(J.mode&1)!==0)}H&&Ii(k)}else k.stateNode=ne(H,b,O,k)}return Ns(k),null;case 13:if(Gr(Ms),H=k.memoizedState,b===null||b.memoizedState!==null&&b.memoizedState.dehydrated!==null){if(ws&&Ri!==null&&(k.mode&1)!==0&&(k.flags&128)===0)eb(),md(),k.flags|=98560,J=!1;else if(J=pg(k),H!==null&&H.dehydrated!==null){if(b===null){if(!J)throw Error(i(318));if(!je)throw Error(i(344));if(J=k.memoizedState,J=J!==null?J.dehydrated:null,!J)throw Error(i(317));tt(J,k)}else md(),(k.flags&128)===0&&(k.memoizedState=null),k.flags|=4;Ns(k),J=!1}else Cl!==null&&(Kg(Cl),Cl=null),J=!0;if(!J)return k.flags&65536?k:null}return(k.flags&128)!==0?(k.lanes=O,k):(O=H!==null,O!==(b!==null&&b.memoizedState!==null)&&O&&(k.child.flags|=8192,(k.mode&1)!==0&&(b===null||(Ms.current&1)!==0?As===0&&(As=3):lf())),k.updateQueue!==null&&(k.flags|=4),Ns(k),null);case 4:return yd(),Pu(b,k),b===null&&Xe(k.stateNode.containerInfo),Ns(k),null;case 10:return _h(k.type._context),Ns(k),null;case 17:return An(k.type)&&ke(),Ns(k),null;case 19:if(Gr(Ms),J=k.memoizedState,J===null)return Ns(k),null;if(H=(k.flags&128)!==0,le=J.rendering,le===null)if(H)Fo(J,!1);else{if(As!==0||b!==null&&(b.flags&128)!==0)for(b=k.child;b!==null;){if(le=Sg(b),le!==null){for(k.flags|=128,Fo(J,!1),b=le.updateQueue,b!==null&&(k.updateQueue=b,k.flags|=4),k.subtreeFlags=0,b=O,O=k.child;O!==null;)H=O,J=b,H.flags&=14680066,le=H.alternate,le===null?(H.childLanes=0,H.lanes=J,H.child=null,H.subtreeFlags=0,H.memoizedProps=null,H.memoizedState=null,H.updateQueue=null,H.dependencies=null,H.stateNode=null):(H.childLanes=le.childLanes,H.lanes=le.lanes,H.child=le.child,H.subtreeFlags=0,H.deletions=null,H.memoizedProps=le.memoizedProps,H.memoizedState=le.memoizedState,H.updateQueue=le.updateQueue,H.type=le.type,J=le.dependencies,H.dependencies=J===null?null:{lanes:J.lanes,firstContext:J.firstContext}),O=O.sibling;return Lr(Ms,Ms.current&1|2),k.child}b=b.sibling}J.tail!==null&&Sn()>Bh&&(k.flags|=128,H=!0,Fo(J,!1),k.lanes=4194304)}else{if(!H)if(b=Sg(le),b!==null){if(k.flags|=128,H=!0,b=b.updateQueue,b!==null&&(k.updateQueue=b,k.flags|=4),Fo(J,!0),J.tail===null&&J.tailMode==="hidden"&&!le.alternate&&!ws)return Ns(k),null}else 2*Sn()-J.renderingStartTime>Bh&&O!==1073741824&&(k.flags|=128,H=!0,Fo(J,!1),k.lanes=4194304);J.isBackwards?(le.sibling=k.child,k.child=le):(b=J.last,b!==null?b.sibling=le:k.child=le,J.last=le)}return J.tail!==null?(k=J.tail,J.rendering=k,J.tail=k.sibling,J.renderingStartTime=Sn(),k.sibling=null,b=Ms.current,Lr(Ms,H?b&1|2:b&1),k):(Ns(k),null);case 22:case 23:return Yg(),O=k.memoizedState!==null,b!==null&&b.memoizedState!==null!==O&&(k.flags|=8192),O&&(k.mode&1)!==0?(ka&1073741824)!==0&&(Ns(k),be&&k.subtreeFlags&6&&(k.flags|=8192)):Ns(k),null;case 24:return null;case 25:return null}throw Error(i(156,k.tag))}function pb(b,k){switch(bh(k),k.tag){case 1:return An(k.type)&&ke(),b=k.flags,b&65536?(k.flags=b&-65537|128,k):null;case 3:return yd(),Gr(fn),Gr(br),ex(),b=k.flags,(b&65536)!==0&&(b&128)===0?(k.flags=b&-65537|128,k):null;case 5:return Q1(k),null;case 13:if(Gr(Ms),b=k.memoizedState,b!==null&&b.dehydrated!==null){if(k.alternate===null)throw Error(i(340));md()}return b=k.flags,b&65536?(k.flags=b&-65537|128,k):null;case 19:return Gr(Ms),null;case 4:return yd(),null;case 10:return _h(k.type._context),null;case 22:case 23:return Yg(),null;case 24:return null;default:return null}}var X0=!1,Ua=!1,Mo=typeof WeakSet=="function"?WeakSet:Set,kr=null;function Zn(b,k){var O=b.ref;if(O!==null)if(typeof O=="function")try{O(null)}catch(H){Ss(b,k,H)}else O.current=null}function Oo(b,k,O){try{O()}catch(H){Ss(b,k,H)}}var gx=!1;function xb(b,k){for(U(b.containerInfo),kr=k;kr!==null;)if(b=kr,k=b.child,(b.subtreeFlags&1028)!==0&&k!==null)k.return=b,kr=k;else for(;kr!==null;){b=kr;try{var O=b.alternate;if((b.flags&1024)!==0)switch(b.tag){case 0:case 11:case 15:break;case 1:if(O!==null){var H=O.memoizedProps,J=O.memoizedState,le=b.stateNode,Ae=le.getSnapshotBeforeUpdate(b.elementType===b.type?H:Po(b.type,H),J);le.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:be&&Ie(b.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(dt){Ss(b,b.return,dt)}if(k=b.sibling,k!==null){k.return=b.return,kr=k;break}kr=b.return}return O=gx,gx=!1,O}function Fd(b,k,O){var H=k.updateQueue;if(H=H!==null?H.lastEffect:null,H!==null){var J=H=H.next;do{if((J.tag&b)===b){var le=J.destroy;J.destroy=void 0,le!==void 0&&Oo(k,O,le)}J=J.next}while(J!==H)}}function J0(b,k){if(k=k.updateQueue,k=k!==null?k.lastEffect:null,k!==null){var O=k=k.next;do{if((O.tag&b)===b){var H=O.create;O.destroy=H()}O=O.next}while(O!==k)}}function Ig(b){var k=b.ref;if(k!==null){var O=b.stateNode;switch(b.tag){case 5:b=ee(O);break;default:b=O}typeof k=="function"?k(b):k.current=b}}function Mh(b){var k=b.alternate;k!==null&&(b.alternate=null,Mh(k)),b.child=null,b.deletions=null,b.sibling=null,b.tag===5&&(k=b.stateNode,k!==null&&Je(k)),b.stateNode=null,b.return=null,b.dependencies=null,b.memoizedProps=null,b.memoizedState=null,b.pendingProps=null,b.stateNode=null,b.updateQueue=null}function px(b){return b.tag===5||b.tag===3||b.tag===4}function Md(b){e:for(;;){for(;b.sibling===null;){if(b.return===null||px(b.return))return null;b=b.return}for(b.sibling.return=b.return,b=b.sibling;b.tag!==5&&b.tag!==6&&b.tag!==18;){if(b.flags&2||b.child===null||b.tag===4)continue e;b.child.return=b,b=b.child}if(!(b.flags&2))return b.stateNode}}function Oh(b,k,O){var H=b.tag;if(H===5||H===6)b=b.stateNode,k?Rt(O,b,k):Mt(O,b);else if(H!==4&&(b=b.child,b!==null))for(Oh(b,k,O),b=b.sibling;b!==null;)Oh(b,k,O),b=b.sibling}function xx(b,k,O){var H=b.tag;if(H===5||H===6)b=b.stateNode,k?Tt(O,b,k):xt(O,b);else if(H!==4&&(b=b.child,b!==null))for(xx(b,k,O),b=b.sibling;b!==null;)xx(b,k,O),b=b.sibling}var Js=null,lo=!1;function Nl(b,k,O){for(O=O.child;O!==null;)Lg(b,k,O),O=O.sibling}function Lg(b,k,O){if(ao&&typeof ao.onCommitFiberUnmount=="function")try{ao.onCommitFiberUnmount(yu,O)}catch{}switch(O.tag){case 5:Ua||Zn(O,k);case 6:if(be){var H=Js,J=lo;Js=null,Nl(b,k,O),Js=H,lo=J,Js!==null&&(lo?hr(Js,O.stateNode):cr(Js,O.stateNode))}else Nl(b,k,O);break;case 18:be&&Js!==null&&(lo?_e(Js,O.stateNode):de(Js,O.stateNode));break;case 4:be?(H=Js,J=lo,Js=O.stateNode.containerInfo,lo=!0,Nl(b,k,O),Js=H,lo=J):(oe&&(H=O.stateNode.containerInfo,J=Ze(H),Oe(H,J)),Nl(b,k,O));break;case 0:case 11:case 14:case 15:if(!Ua&&(H=O.updateQueue,H!==null&&(H=H.lastEffect,H!==null))){J=H=H.next;do{var le=J,Ae=le.destroy;le=le.tag,Ae!==void 0&&((le&2)!==0||(le&4)!==0)&&Oo(O,k,Ae),J=J.next}while(J!==H)}Nl(b,k,O);break;case 1:if(!Ua&&(Zn(O,k),H=O.stateNode,typeof H.componentWillUnmount=="function"))try{H.props=O.memoizedProps,H.state=O.memoizedState,H.componentWillUnmount()}catch(dt){Ss(O,k,dt)}Nl(b,k,O);break;case 21:Nl(b,k,O);break;case 22:O.mode&1?(Ua=(H=Ua)||O.memoizedState!==null,Nl(b,k,O),Ua=H):Nl(b,k,O);break;default:Nl(b,k,O)}}function Od(b){var k=b.updateQueue;if(k!==null){b.updateQueue=null;var O=b.stateNode;O===null&&(O=b.stateNode=new Mo),k.forEach(function(H){var J=nS.bind(null,b,H);O.has(H)||(O.add(H),H.then(J,J))})}}function nl(b,k){var O=k.deletions;if(O!==null)for(var H=0;H<O.length;H++){var J=O[H];try{var le=b,Ae=k;if(be){var dt=Ae;e:for(;dt!==null;){switch(dt.tag){case 5:Js=dt.stateNode,lo=!1;break e;case 3:Js=dt.stateNode.containerInfo,lo=!0;break e;case 4:Js=dt.stateNode.containerInfo,lo=!0;break e}dt=dt.return}if(Js===null)throw Error(i(160));Lg(le,Ae,J),Js=null,lo=!1}else Lg(le,Ae,J);var jt=J.alternate;jt!==null&&(jt.return=null),J.return=null}catch(ir){Ss(J,k,ir)}}if(k.subtreeFlags&12854)for(k=k.child;k!==null;)Dh(k,b),k=k.sibling}function Dh(b,k){var O=b.alternate,H=b.flags;switch(b.tag){case 0:case 11:case 14:case 15:if(nl(k,b),Do(b),H&4){try{Fd(3,b,b.return),J0(3,b)}catch(Er){Ss(b,b.return,Er)}try{Fd(5,b,b.return)}catch(Er){Ss(b,b.return,Er)}}break;case 1:nl(k,b),Do(b),H&512&&O!==null&&Zn(O,O.return);break;case 5:if(nl(k,b),Do(b),H&512&&O!==null&&Zn(O,O.return),be){if(b.flags&32){var J=b.stateNode;try{Cr(J)}catch(Er){Ss(b,b.return,Er)}}if(H&4&&(J=b.stateNode,J!=null)){var le=b.memoizedProps;if(O=O!==null?O.memoizedProps:le,H=b.type,k=b.updateQueue,b.updateQueue=null,k!==null)try{It(J,k,H,O,le,b)}catch(Er){Ss(b,b.return,Er)}}}break;case 6:if(nl(k,b),Do(b),H&4&&be){if(b.stateNode===null)throw Error(i(162));J=b.stateNode,le=b.memoizedProps,O=O!==null?O.memoizedProps:le;try{rt(J,O,le)}catch(Er){Ss(b,b.return,Er)}}break;case 3:if(nl(k,b),Do(b),H&4){if(be&&je&&O!==null&&O.memoizedState.isDehydrated)try{Ye(k.containerInfo)}catch(Er){Ss(b,b.return,Er)}if(oe){J=k.containerInfo,le=k.pendingChildren;try{Oe(J,le)}catch(Er){Ss(b,b.return,Er)}}}break;case 4:if(nl(k,b),Do(b),H&4&&oe){le=b.stateNode,J=le.containerInfo,le=le.pendingChildren;try{Oe(J,le)}catch(Er){Ss(b,b.return,Er)}}break;case 13:nl(k,b),Do(b),J=b.child,J.flags&8192&&(le=J.memoizedState!==null,J.stateNode.isHidden=le,!le||J.alternate!==null&&J.alternate.memoizedState!==null||(nf=Sn())),H&4&&Od(b);break;case 22:var Ae=O!==null&&O.memoizedState!==null;if(b.mode&1?(Ua=(O=Ua)||Ae,nl(k,b),Ua=O):nl(k,b),Do(b),H&8192){if(O=b.memoizedState!==null,(b.stateNode.isHidden=O)&&!Ae&&(b.mode&1)!==0)for(kr=b,H=b.child;H!==null;){for(k=kr=H;kr!==null;){Ae=kr;var dt=Ae.child;switch(Ae.tag){case 0:case 11:case 14:case 15:Fd(4,Ae,Ae.return);break;case 1:Zn(Ae,Ae.return);var jt=Ae.stateNode;if(typeof jt.componentWillUnmount=="function"){var ir=Ae,Ir=Ae.return;try{var yn=ir;jt.props=yn.memoizedProps,jt.state=yn.memoizedState,jt.componentWillUnmount()}catch(Er){Ss(ir,Ir,Er)}}break;case 5:Zn(Ae,Ae.return);break;case 22:if(Ae.memoizedState!==null){Ug(k);continue}}dt!==null?(dt.return=Ae,kr=dt):Ug(k)}H=H.sibling}if(be){e:if(H=null,be)for(k=b;;){if(k.tag===5){if(H===null){H=k;try{J=k.stateNode,O?ur(J):we(k.stateNode,k.memoizedProps)}catch(Er){Ss(b,b.return,Er)}}}else if(k.tag===6){if(H===null)try{le=k.stateNode,O?Sr(le):Me(le,k.memoizedProps)}catch(Er){Ss(b,b.return,Er)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===b)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===b)break e;for(;k.sibling===null;){if(k.return===null||k.return===b)break e;H===k&&(H=null),k=k.return}H===k&&(H=null),k.sibling.return=k.return,k=k.sibling}}}break;case 19:nl(k,b),Do(b),H&4&&Od(b);break;case 21:break;default:nl(k,b),Do(b)}}function Do(b){var k=b.flags;if(k&2){try{if(be){e:{for(var O=b.return;O!==null;){if(px(O)){var H=O;break e}O=O.return}throw Error(i(160))}switch(H.tag){case 5:var J=H.stateNode;H.flags&32&&(Cr(J),H.flags&=-33);var le=Md(b);xx(b,le,J);break;case 3:case 4:var Ae=H.stateNode.containerInfo,dt=Md(b);Oh(b,dt,Ae);break;default:throw Error(i(161))}}}catch(jt){Ss(b,b.return,jt)}b.flags&=-3}k&4096&&(b.flags&=-4097)}function Q0(b,k,O){kr=b,Bg(b)}function Bg(b,k,O){for(var H=(b.mode&1)!==0;kr!==null;){var J=kr,le=J.child;if(J.tag===22&&H){var Ae=J.memoizedState!==null||X0;if(!Ae){var dt=J.alternate,jt=dt!==null&&dt.memoizedState!==null||Ua;dt=X0;var ir=Ua;if(X0=Ae,(Ua=jt)&&!ir)for(kr=J;kr!==null;)Ae=kr,jt=Ae.child,Ae.tag===22&&Ae.memoizedState!==null?zg(J):jt!==null?(jt.return=Ae,kr=jt):zg(J);for(;le!==null;)kr=le,Bg(le),le=le.sibling;kr=J,X0=dt,Ua=ir}$g(b)}else(J.subtreeFlags&8772)!==0&&le!==null?(le.return=J,kr=le):$g(b)}}function $g(b){for(;kr!==null;){var k=kr;if((k.flags&8772)!==0){var O=k.alternate;try{if((k.flags&8772)!==0)switch(k.tag){case 0:case 11:case 15:Ua||J0(5,k);break;case 1:var H=k.stateNode;if(k.flags&4&&!Ua)if(O===null)H.componentDidMount();else{var J=k.elementType===k.type?O.memoizedProps:Po(k.type,O.memoizedProps);H.componentDidUpdate(J,O.memoizedState,H.__reactInternalSnapshotBeforeUpdate)}var le=k.updateQueue;le!==null&&ib(k,le,H);break;case 3:var Ae=k.updateQueue;if(Ae!==null){if(O=null,k.child!==null)switch(k.child.tag){case 5:O=ee(k.child.stateNode);break;case 1:O=k.child.stateNode}ib(k,Ae,O)}break;case 5:var dt=k.stateNode;O===null&&k.flags&4&&Qe(dt,k.type,k.memoizedProps,k);break;case 6:break;case 4:break;case 12:break;case 13:if(je&&k.memoizedState===null){var jt=k.alternate;if(jt!==null){var ir=jt.memoizedState;if(ir!==null){var Ir=ir.dehydrated;Ir!==null&&ct(Ir)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Ua||k.flags&512&&Ig(k)}catch(yn){Ss(k,k.return,yn)}}if(k===b){kr=null;break}if(O=k.sibling,O!==null){O.return=k.return,kr=O;break}kr=k.return}}function Ug(b){for(;kr!==null;){var k=kr;if(k===b){kr=null;break}var O=k.sibling;if(O!==null){O.return=k.return,kr=O;break}kr=k.return}}function zg(b){for(;kr!==null;){var k=kr;try{switch(k.tag){case 0:case 11:case 15:var O=k.return;try{J0(4,k)}catch(jt){Ss(k,O,jt)}break;case 1:var H=k.stateNode;if(typeof H.componentDidMount=="function"){var J=k.return;try{H.componentDidMount()}catch(jt){Ss(k,J,jt)}}var le=k.return;try{Ig(k)}catch(jt){Ss(k,le,jt)}break;case 5:var Ae=k.return;try{Ig(k)}catch(jt){Ss(k,Ae,jt)}}}catch(jt){Ss(k,k.return,jt)}if(k===b){kr=null;break}var dt=k.sibling;if(dt!==null){dt.return=k.return,kr=dt;break}kr=k.return}}var Vc=0,$i=1,tc=2,Z0=3,Rh=4;if(typeof Symbol=="function"&&Symbol.for){var Ro=Symbol.for;Vc=Ro("selector.component"),$i=Ro("selector.has_pseudo_class"),tc=Ro("selector.role"),Z0=Ro("selector.test_id"),Rh=Ro("selector.text")}function rc(b){var k=Re(b);if(k!=null){if(typeof k.memoizedProps["data-testname"]!="string")throw Error(i(364));return k}if(b=gt(b),b===null)throw Error(i(362));return b.stateNode.current}function Ih(b,k){switch(k.$$typeof){case Vc:if(b.type===k.value)return!0;break;case $i:e:{k=k.value,b=[b,0];for(var O=0;O<b.length;){var H=b[O++],J=b[O++],le=k[J];if(H.tag!==5||!Ct(H)){for(;le!=null&&Ih(H,le);)J++,le=k[J];if(J===k.length){k=!0;break e}else for(H=H.child;H!==null;)b.push(H,J),H=H.sibling}}k=!1}return k;case tc:if(b.tag===5&&Lt(b.stateNode,k.value))return!0;break;case Rh:if((b.tag===5||b.tag===6)&&(b=bt(b),b!==null&&0<=b.indexOf(k.value)))return!0;break;case Z0:if(b.tag===5&&(b=b.memoizedProps["data-testname"],typeof b=="string"&&b.toLowerCase()===k.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function Wg(b){switch(b.$$typeof){case Vc:return"<"+(F(b.value)||"Unknown")+">";case $i:return":has("+(Wg(b)||"")+")";case tc:return'[role="'+b.value+'"]';case Rh:return'"'+b.value+'"';case Z0:return'[data-testname="'+b.value+'"]';default:throw Error(i(365))}}function nc(b,k){var O=[];b=[b,0];for(var H=0;H<b.length;){var J=b[H++],le=b[H++],Ae=k[le];if(J.tag!==5||!Ct(J)){for(;Ae!=null&&Ih(J,Ae);)le++,Ae=k[le];if(le===k.length)O.push(J);else for(J=J.child;J!==null;)b.push(J,le),J=J.sibling}}return O}function sc(b,k){if(!at)throw Error(i(363));b=rc(b),b=nc(b,k),k=[],b=Array.from(b);for(var O=0;O<b.length;){var H=b[O++];if(H.tag===5)Ct(H)||k.push(H.stateNode);else for(H=H.child;H!==null;)b.push(H),H=H.sibling}return k}var Hg=Math.ceil,Lh=o.ReactCurrentDispatcher,ef=o.ReactCurrentOwner,zs=o.ReactCurrentBatchConfig,bn=0,as=null,Es=null,Qs=0,ka=0,Mu=Tr(0),As=0,tf=null,qc=0,ps=0,rf=0,Dd=null,xi=null,nf=0,Bh=1/0,Ui=null;function rs(){Bh=Sn()+500}var Ws=!1,oa=null,El=null,Ou=!1,sl=null,Gg=0,la=0,$h=null,sf=-1,af=0;function _s(){return(bn&6)!==0?Sn():sf!==-1?sf:sf=Sn()}function Ca(b){return(b.mode&1)===0?1:(bn&2)!==0&&Qs!==0?Qs&-Qs:eS.transition!==null?(af===0&&(af=kt()),af):(b=He,b!==0?b:ft())}function yi(b,k,O,H){if(50<la)throw la=0,$h=null,Error(i(185));Ft(b,O,H),((bn&2)===0||b!==as)&&(b===as&&((bn&2)===0&&(ps|=O),As===4&&Kc(b,Qs)),vi(b,H),O===1&&bn===0&&(k.mode&1)===0&&(rs(),L0&&Ja()))}function vi(b,k){var O=b.callbackNode;nt(b,k);var H=Ot(b,b===as?Qs:0);if(H===0)O!==null&&bs(O),b.callbackNode=null,b.callbackPriority=0;else if(k=H&-H,b.callbackPriority!==k){if(O!=null&&bs(O),k===1)b.tag===0?X2(yx.bind(null,b)):mg(yx.bind(null,b)),Ht?Ve(function(){(bn&6)===0&&Ja()}):ar(jn,Ja),O=null;else{switch(pr(H)){case 1:O=jn;break;case 4:O=Xl;break;case 16:O=Oi;break;case 536870912:O=xh;break;default:O=Oi}O=Cx(O,Vg.bind(null,b))}b.callbackPriority=k,b.callbackNode=O}}function Vg(b,k){if(sf=-1,af=0,(bn&6)!==0)throw Error(i(327));var O=b.callbackNode;if(Yc()&&b.callbackNode!==O)return null;var H=Ot(b,b===as?Qs:0);if(H===0)return null;if((H&30)!==0||(H&b.expiredLanes)!==0||k)k=Rd(b,H);else{k=H;var J=bn;bn|=2;var le=bx();(as!==b||Qs!==k)&&(Ui=null,rs(),Du(b,k));do try{wx();break}catch(dt){of(b,dt)}while(!0);K1(),Lh.current=le,bn=J,Es!==null?k=0:(as=null,Qs=0,k=As)}if(k!==0){if(k===2&&(J=Wt(b),J!==0&&(H=J,k=qg(b,J))),k===1)throw O=tf,Du(b,0),Kc(b,H),vi(b,Sn()),O;if(k===6)Kc(b,H);else{if(J=b.current.alternate,(H&30)===0&&!yb(J)&&(k=Rd(b,H),k===2&&(le=Wt(b),le!==0&&(H=le,k=qg(b,le))),k===1))throw O=tf,Du(b,0),Kc(b,H),vi(b,Sn()),O;switch(b.finishedWork=J,b.finishedLanes=H,k){case 0:case 1:throw Error(i(345));case 2:Ru(b,xi,Ui);break;case 3:if(Kc(b,H),(H&130023424)===H&&(k=nf+500-Sn(),10<k)){if(Ot(b,0)!==0)break;if(J=b.suspendedLanes,(J&H)!==H){_s(),b.pingedLanes|=b.suspendedLanes&J;break}b.timeoutHandle=X(Ru.bind(null,b,xi,Ui),k);break}Ru(b,xi,Ui);break;case 4:if(Kc(b,H),(H&4194240)===H)break;for(k=b.eventTimes,J=-1;0<H;){var Ae=31-Jr(H);le=1<<Ae,Ae=k[Ae],Ae>J&&(J=Ae),H&=~le}if(H=J,H=Sn()-H,H=(120>H?120:480>H?480:1080>H?1080:1920>H?1920:3e3>H?3e3:4320>H?4320:1960*Hg(H/1960))-H,10<H){b.timeoutHandle=X(Ru.bind(null,b,xi,Ui),H);break}Ru(b,xi,Ui);break;case 5:Ru(b,xi,Ui);break;default:throw Error(i(329))}}}return vi(b,Sn()),b.callbackNode===O?Vg.bind(null,b):null}function qg(b,k){var O=Dd;return b.current.memoizedState.isDehydrated&&(Du(b,k).flags|=256),b=Rd(b,k),b!==2&&(k=xi,xi=O,k!==null&&Kg(k)),b}function Kg(b){xi===null?xi=b:xi.push.apply(xi,b)}function yb(b){for(var k=b;;){if(k.flags&16384){var O=k.updateQueue;if(O!==null&&(O=O.stores,O!==null))for(var H=0;H<O.length;H++){var J=O[H],le=J.getSnapshot;J=J.value;try{if(!_l(le(),J))return!1}catch{return!1}}}if(O=k.child,k.subtreeFlags&16384&&O!==null)O.return=k,k=O;else{if(k===b)break;for(;k.sibling===null;){if(k.return===null||k.return===b)return!0;k=k.return}k.sibling.return=k.return,k=k.sibling}}return!0}function Kc(b,k){for(k&=~rf,k&=~ps,b.suspendedLanes|=k,b.pingedLanes&=~k,b=b.expirationTimes;0<k;){var O=31-Jr(k),H=1<<O;b[O]=-1,k&=~H}}function yx(b){if((bn&6)!==0)throw Error(i(327));Yc();var k=Ot(b,0);if((k&1)===0)return vi(b,Sn()),null;var O=Rd(b,k);if(b.tag!==0&&O===2){var H=Wt(b);H!==0&&(k=H,O=qg(b,H))}if(O===1)throw O=tf,Du(b,0),Kc(b,k),vi(b,Sn()),O;if(O===6)throw Error(i(345));return b.finishedWork=b.current.alternate,b.finishedLanes=k,Ru(b,xi,Ui),vi(b,Sn()),null}function vx(b){sl!==null&&sl.tag===0&&(bn&6)===0&&Yc();var k=bn;bn|=1;var O=zs.transition,H=He;try{if(zs.transition=null,He=1,b)return b()}finally{He=H,zs.transition=O,bn=k,(bn&6)===0&&Ja()}}function Yg(){ka=Mu.current,Gr(Mu)}function Du(b,k){b.finishedWork=null,b.finishedLanes=0;var O=b.timeoutHandle;if(O!==ce&&(b.timeoutHandle=ce,se(O)),Es!==null)for(O=Es.return;O!==null;){var H=O;switch(bh(H),H.tag){case 1:H=H.type.childContextTypes,H!=null&&ke();break;case 3:yd(),Gr(fn),Gr(br),ex();break;case 5:Q1(H);break;case 4:yd();break;case 13:Gr(Ms);break;case 19:Gr(Ms);break;case 10:_h(H.type._context);break;case 22:case 23:Yg()}O=O.return}if(as=b,Es=b=Iu(b.current,null),Qs=ka=k,As=0,tf=null,rf=ps=qc=0,xi=Dd=null,bu!==null){for(k=0;k<bu.length;k++)if(O=bu[k],H=O.interleaved,H!==null){O.interleaved=null;var J=H.next,le=O.pending;if(le!==null){var Ae=le.next;le.next=J,H.next=Ae}O.pending=H}bu=null}return b}function of(b,k){do{var O=Es;try{if(K1(),oo.current=Cd,H0){for(var H=Ts.memoizedState;H!==null;){var J=H.queue;J!==null&&(J.pending=null),H=H.next}H0=!1}if(ku=0,_a=ia=Ts=null,kh=!1,Ch=0,ef.current=null,O===null||O.return===null){As=1,tf=k,Es=null;break}e:{var le=b,Ae=O.return,dt=O,jt=k;if(k=Qs,dt.flags|=32768,jt!==null&&typeof jt=="object"&&typeof jt.then=="function"){var ir=jt,Ir=dt,yn=Ir.tag;if((Ir.mode&1)===0&&(yn===0||yn===11||yn===15)){var Er=Ir.alternate;Er?(Ir.updateQueue=Er.updateQueue,Ir.memoizedState=Er.memoizedState,Ir.lanes=Er.lanes):(Ir.updateQueue=null,Ir.memoizedState=null)}var xs=mb(Ae);if(xs!==null){xs.flags&=-257,Nu(xs,Ae,dt,le,k),xs.mode&1&&hb(le,ir,k),k=xs,jt=ir;var es=k.updateQueue;if(es===null){var zi=new Set;zi.add(jt),k.updateQueue=zi}else es.add(jt);break e}else{if((k&1)===0){hb(le,ir,k),lf();break e}jt=Error(i(426))}}else if(ws&&dt.mode&1){var ac=mb(Ae);if(ac!==null){(ac.flags&65536)===0&&(ac.flags|=256),Nu(ac,Ae,dt,le,k),V1(Td(jt,dt));break e}}le=jt=Td(jt,dt),As!==4&&(As=2),Dd===null?Dd=[le]:Dd.push(le),le=Ae;do{switch(le.tag){case 3:le.flags|=65536,k&=-k,le.lanes|=k;var Et=Ql(le,jt,k);z0(le,Et);break e;case 1:dt=jt;var mt=le.type,Dt=le.stateNode;if((le.flags&128)===0&&(typeof mt.getDerivedStateFromError=="function"||Dt!==null&&typeof Dt.componentDidCatch=="function"&&(El===null||!El.has(Dt)))){le.flags|=65536,k&=-k,le.lanes|=k;var Ar=Mg(le,dt,k);z0(le,Ar);break e}}le=le.return}while(le!==null)}Sx(O)}catch(Kr){k=Kr,Es===O&&O!==null&&(Es=O=O.return);continue}break}while(!0)}function bx(){var b=Lh.current;return Lh.current=Cd,b===null?Cd:b}function lf(){(As===0||As===3||As===2)&&(As=4),as===null||(qc&268435455)===0&&(ps&268435455)===0||Kc(as,Qs)}function Rd(b,k){var O=bn;bn|=2;var H=bx();(as!==b||Qs!==k)&&(Ui=null,Du(b,k));do try{vb();break}catch(J){of(b,J)}while(!0);if(K1(),bn=O,Lh.current=H,Es!==null)throw Error(i(261));return as=null,Qs=0,As}function vb(){for(;Es!==null;)_x(Es)}function wx(){for(;Es!==null&&!_n();)_x(Es)}function _x(b){var k=kb(b.alternate,b,ka);b.memoizedProps=b.pendingProps,k===null?Sx(b):Es=k,ef.current=null}function Sx(b){var k=b;do{var O=k.alternate;if(b=k.return,(k.flags&32768)===0){if(O=Pd(O,k,ka),O!==null){Es=O;return}}else{if(O=pb(O,k),O!==null){O.flags&=32767,Es=O;return}if(b!==null)b.flags|=32768,b.subtreeFlags=0,b.deletions=null;else{As=6,Es=null;return}}if(k=k.sibling,k!==null){Es=k;return}Es=k=b}while(k!==null);As===0&&(As=5)}function Ru(b,k,O){var H=He,J=zs.transition;try{zs.transition=null,He=1,bb(b,k,O,H)}finally{zs.transition=J,He=H}return null}function bb(b,k,O,H){do Yc();while(sl!==null);if((bn&6)!==0)throw Error(i(327));O=b.finishedWork;var J=b.finishedLanes;if(O===null)return null;if(b.finishedWork=null,b.finishedLanes=0,O===b.current)throw Error(i(177));b.callbackNode=null,b.callbackPriority=0;var le=O.lanes|O.childLanes;if(Qr(b,le),b===as&&(Es=as=null,Qs=0),(O.subtreeFlags&2064)===0&&(O.flags&2064)===0||Ou||(Ou=!0,Cx(Oi,function(){return Yc(),null})),le=(O.flags&15990)!==0,(O.subtreeFlags&15990)!==0||le){le=zs.transition,zs.transition=null;var Ae=He;He=1;var dt=bn;bn|=4,ef.current=null,xb(b,O),Dh(O,b),G(b.containerInfo),b.current=O,Q0(O),hn(),bn=dt,He=Ae,zs.transition=le}else b.current=O;if(Ou&&(Ou=!1,sl=b,Gg=J),le=b.pendingLanes,le===0&&(El=null),I0(O.stateNode),vi(b,Sn()),k!==null)for(H=b.onRecoverableError,O=0;O<k.length;O++)J=k[O],H(J.value,{componentStack:J.stack,digest:J.digest});if(Ws)throw Ws=!1,b=oa,oa=null,b;return(Gg&1)!==0&&b.tag!==0&&Yc(),le=b.pendingLanes,(le&1)!==0?b===$h?la++:(la=0,$h=b):la=0,Ja(),null}function Yc(){if(sl!==null){var b=pr(Gg),k=zs.transition,O=He;try{if(zs.transition=null,He=16>b?16:b,sl===null)var H=!1;else{if(b=sl,sl=null,Gg=0,(bn&6)!==0)throw Error(i(331));var J=bn;for(bn|=4,kr=b.current;kr!==null;){var le=kr,Ae=le.child;if((kr.flags&16)!==0){var dt=le.deletions;if(dt!==null){for(var jt=0;jt<dt.length;jt++){var ir=dt[jt];for(kr=ir;kr!==null;){var Ir=kr;switch(Ir.tag){case 0:case 11:case 15:Fd(8,Ir,le)}var yn=Ir.child;if(yn!==null)yn.return=Ir,kr=yn;else for(;kr!==null;){Ir=kr;var Er=Ir.sibling,xs=Ir.return;if(Mh(Ir),Ir===ir){kr=null;break}if(Er!==null){Er.return=xs,kr=Er;break}kr=xs}}}var es=le.alternate;if(es!==null){var zi=es.child;if(zi!==null){es.child=null;do{var ac=zi.sibling;zi.sibling=null,zi=ac}while(zi!==null)}}kr=le}}if((le.subtreeFlags&2064)!==0&&Ae!==null)Ae.return=le,kr=Ae;else e:for(;kr!==null;){if(le=kr,(le.flags&2048)!==0)switch(le.tag){case 0:case 11:case 15:Fd(9,le,le.return)}var Et=le.sibling;if(Et!==null){Et.return=le.return,kr=Et;break e}kr=le.return}}var mt=b.current;for(kr=mt;kr!==null;){Ae=kr;var Dt=Ae.child;if((Ae.subtreeFlags&2064)!==0&&Dt!==null)Dt.return=Ae,kr=Dt;else e:for(Ae=mt;kr!==null;){if(dt=kr,(dt.flags&2048)!==0)try{switch(dt.tag){case 0:case 11:case 15:J0(9,dt)}}catch(Kr){Ss(dt,dt.return,Kr)}if(dt===Ae){kr=null;break e}var Ar=dt.sibling;if(Ar!==null){Ar.return=dt.return,kr=Ar;break e}kr=dt.return}}if(bn=J,Ja(),ao&&typeof ao.onPostCommitFiberRoot=="function")try{ao.onPostCommitFiberRoot(yu,b)}catch{}H=!0}return H}finally{He=O,zs.transition=k}}return!1}function kx(b,k,O){k=Td(O,k),k=Ql(b,k,1),b=zc(b,k,1),k=_s(),b!==null&&(Ft(b,1,k),vi(b,k))}function Ss(b,k,O){if(b.tag===3)kx(b,b,O);else for(;k!==null;){if(k.tag===3){kx(k,b,O);break}else if(k.tag===1){var H=k.stateNode;if(typeof k.type.getDerivedStateFromError=="function"||typeof H.componentDidCatch=="function"&&(El===null||!El.has(H))){b=Td(O,b),b=Mg(k,b,1),k=zc(k,b,1),b=_s(),k!==null&&(Ft(k,1,b),vi(k,b));break}}k=k.return}}function wb(b,k,O){var H=b.pingCache;H!==null&&H.delete(k),k=_s(),b.pingedLanes|=b.suspendedLanes&O,as===b&&(Qs&O)===O&&(As===4||As===3&&(Qs&130023424)===Qs&&500>Sn()-nf?Du(b,0):rf|=O),vi(b,k)}function _b(b,k){k===0&&((b.mode&1)===0?k=1:(k=wl,wl<<=1,(wl&130023424)===0&&(wl=4194304)));var O=_s();b=Tl(b,k),b!==null&&(Ft(b,k,O),vi(b,O))}function Sb(b){var k=b.memoizedState,O=0;k!==null&&(O=k.retryLane),_b(b,O)}function nS(b,k){var O=0;switch(b.tag){case 13:var H=b.stateNode,J=b.memoizedState;J!==null&&(O=J.retryLane);break;case 19:H=b.stateNode;break;default:throw Error(i(314))}H!==null&&H.delete(k),_b(b,O)}var kb;kb=function(b,k,O){if(b!==null)if(b.memoizedProps!==k.pendingProps||fn.current)Sa=!0;else{if((b.lanes&O)===0&&(k.flags&128)===0)return Sa=!1,Au(b,k,O);Sa=(b.flags&131072)!==0}else Sa=!1,ws&&(k.flags&1048576)!==0&&J2(k,hd,k.index);switch(k.lanes=0,k.tag){case 2:var H=k.type;Fh(b,k),b=k.pendingProps;var J=qn(k,br.current);U0(k,O),J=Th(null,k,H,b,J,O);var le=kg();return k.flags|=1,typeof J=="object"&&J!==null&&typeof J.render=="function"&&J.$$typeof===void 0?(k.tag=1,k.memoizedState=null,k.updateQueue=null,An(H)?(le=!0,qr(k)):le=!1,k.memoizedState=J.state!==null&&J.state!==void 0?J.state:null,X1(k),J.updater=Ah,k.stateNode=J,J._reactInternals=k,Jl(k,H,b,O),k=gi(null,k,H,!0,le,O)):(k.tag=0,ws&&le&&vh(k),$a(null,k,J,O),k=k.child),k;case 16:H=k.elementType;e:{switch(Fh(b,k),b=k.pendingProps,J=H._init,H=J(H._payload),k.type=H,J=k.tag=sS(H),b=Po(H,b),J){case 0:k=Zl(null,k,H,b,O);break e;case 1:k=ei(null,k,H,b,O);break e;case 11:k=Og(null,k,H,b,O);break e;case 14:k=Nd(null,k,H,Po(H.type,b),O);break e}throw Error(i(306,H,""))}return k;case 0:return H=k.type,J=k.pendingProps,J=k.elementType===H?J:Po(H,J),Zl(b,k,H,J,O);case 1:return H=k.type,J=k.pendingProps,J=k.elementType===H?J:Po(H,J),ei(b,k,H,J,O);case 3:e:{if(Eu(k),b===null)throw Error(i(387));H=k.pendingProps,le=k.memoizedState,J=le.element,ab(b,k),wu(k,H,null,O);var Ae=k.memoizedState;if(H=Ae.element,je&&le.isDehydrated)if(le={element:H,isDehydrated:!1,cache:Ae.cache,pendingSuspenseBoundaries:Ae.pendingSuspenseBoundaries,transitions:Ae.transitions},k.updateQueue.baseState=le,k.memoizedState=le,k.flags&256){J=Td(Error(i(423)),k),k=Ed(b,k,H,O,J);break e}else if(H!==J){J=Td(Error(i(424)),k),k=Ed(b,k,H,O,J);break e}else for(je&&(Ri=Ee(k.stateNode.containerInfo),Qa=k,ws=!0,Cl=null,wh=!1),O=nb(k,null,H,O),k.child=O;O;)O.flags=O.flags&-3|4096,O=O.sibling;else{if(md(),H===J){k=Gc(b,k,O);break e}$a(b,k,H,O)}k=k.child}return k;case 5:return J1(k),b===null&&G1(k),H=k.type,J=k.pendingProps,le=b!==null?b.memoizedProps:null,Ae=J.children,q(H,J)?Ae=null:le!==null&&q(H,le)&&(k.flags|=32),ss(b,k),$a(b,k,Ae,O),k.child;case 6:return b===null&&G1(k),null;case 13:return mx(b,k,O);case 4:return _g(k,k.stateNode.containerInfo),H=k.pendingProps,b===null?k.child=pd(k,null,H,O):$a(b,k,H,O),k.child;case 11:return H=k.type,J=k.pendingProps,J=k.elementType===H?J:Po(H,J),Og(b,k,H,J,O);case 7:return $a(b,k,k.pendingProps,O),k.child;case 8:return $a(b,k,k.pendingProps.children,O),k.child;case 12:return $a(b,k,k.pendingProps.children,O),k.child;case 10:e:{if(H=k.type._context,J=k.pendingProps,le=k.memoizedProps,Ae=J.value,sb(k,H,Ae),le!==null)if(_l(le.value,Ae)){if(le.children===J.children&&!fn.current){k=Gc(b,k,O);break e}}else for(le=k.child,le!==null&&(le.return=k);le!==null;){var dt=le.dependencies;if(dt!==null){Ae=le.child;for(var jt=dt.firstContext;jt!==null;){if(jt.context===H){if(le.tag===1){jt=Uc(-1,O&-O),jt.tag=2;var ir=le.updateQueue;if(ir!==null){ir=ir.shared;var Ir=ir.pending;Ir===null?jt.next=jt:(jt.next=Ir.next,Ir.next=jt),ir.pending=jt}}le.lanes|=O,jt=le.alternate,jt!==null&&(jt.lanes|=O),xd(le.return,O,k),dt.lanes|=O;break}jt=jt.next}}else if(le.tag===10)Ae=le.type===k.type?null:le.child;else if(le.tag===18){if(Ae=le.return,Ae===null)throw Error(i(341));Ae.lanes|=O,dt=Ae.alternate,dt!==null&&(dt.lanes|=O),xd(Ae,O,k),Ae=le.sibling}else Ae=le.child;if(Ae!==null)Ae.return=le;else for(Ae=le;Ae!==null;){if(Ae===k){Ae=null;break}if(le=Ae.sibling,le!==null){le.return=Ae.return,Ae=le;break}Ae=Ae.return}le=Ae}$a(b,k,J.children,O),k=k.child}return k;case 9:return J=k.type,H=k.pendingProps.children,U0(k,O),J=Eo(J),H=H(J),k.flags|=1,$a(b,k,H,O),k.child;case 14:return H=k.type,J=Po(H,k.pendingProps),J=Po(H.type,J),Nd(b,k,H,J,O);case 15:return Hc(b,k,k.type,k.pendingProps,O);case 17:return H=k.type,J=k.pendingProps,J=k.elementType===H?J:Po(H,J),Fh(b,k),k.tag=1,An(H)?(b=!0,qr(k)):b=!1,U0(k,O),fb(k,H,J),Jl(k,H,J,O),gi(null,k,H,!0,b,O);case 19:return Rg(b,k,O);case 22:return gs(b,k,O)}throw Error(i(156,k.tag))};function Cx(b,k){return ar(b,k)}function Cb(b,k,O,H){this.tag=b,this.key=O,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=k,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=H,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Io(b,k,O,H){return new Cb(b,k,O,H)}function cf(b){return b=b.prototype,!(!b||!b.isReactComponent)}function sS(b){if(typeof b=="function")return cf(b)?1:0;if(b!=null){if(b=b.$$typeof,b===y)return 11;if(b===w)return 14}return 2}function Iu(b,k){var O=b.alternate;return O===null?(O=Io(b.tag,k,b.key,b.mode),O.elementType=b.elementType,O.type=b.type,O.stateNode=b.stateNode,O.alternate=b,b.alternate=O):(O.pendingProps=k,O.type=b.type,O.flags=0,O.subtreeFlags=0,O.deletions=null),O.flags=b.flags&14680064,O.childLanes=b.childLanes,O.lanes=b.lanes,O.child=b.child,O.memoizedProps=b.memoizedProps,O.memoizedState=b.memoizedState,O.updateQueue=b.updateQueue,k=b.dependencies,O.dependencies=k===null?null:{lanes:k.lanes,firstContext:k.firstContext},O.sibling=b.sibling,O.index=b.index,O.ref=b.ref,O}function Xg(b,k,O,H,J,le){var Ae=2;if(H=b,typeof b=="function")cf(b)&&(Ae=1);else if(typeof b=="string")Ae=5;else e:switch(b){case d:return ti(O.children,J,le,k);case f:Ae=8,J|=8;break;case h:return b=Io(12,O,k,J|2),b.elementType=h,b.lanes=le,b;case v:return b=Io(13,O,k,J),b.elementType=v,b.lanes=le,b;case C:return b=Io(19,O,k,J),b.elementType=C,b.lanes=le,b;case T:return uf(O,J,le,k);default:if(typeof b=="object"&&b!==null)switch(b.$$typeof){case g:Ae=10;break e;case p:Ae=9;break e;case y:Ae=11;break e;case w:Ae=14;break e;case _:Ae=16,H=null;break e}throw Error(i(130,b==null?b:typeof b,""))}return k=Io(Ae,O,k,J),k.elementType=b,k.type=H,k.lanes=le,k}function ti(b,k,O,H){return b=Io(7,b,H,k),b.lanes=O,b}function uf(b,k,O,H){return b=Io(22,b,H,k),b.elementType=T,b.lanes=O,b.stateNode={isHidden:!1},b}function df(b,k,O){return b=Io(6,b,null,k),b.lanes=O,b}function Jg(b,k,O){return k=Io(4,b.children!==null?b.children:[],b.key,k),k.lanes=O,k.stateNode={containerInfo:b.containerInfo,pendingChildren:null,implementation:b.implementation},k}function Tb(b,k,O,H,J){this.tag=k,this.containerInfo=b,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wr(0),this.expirationTimes=wr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wr(0),this.identifierPrefix=H,this.onRecoverableError=J,je&&(this.mutableSourceEagerHydrationData=null)}function Tx(b,k,O,H,J,le,Ae,dt,jt){return b=new Tb(b,k,O,dt,jt),k===1?(k=1,le===!0&&(k|=8)):k=0,le=Io(3,null,null,k),b.current=le,le.stateNode=b,le.memoizedState={element:H,isDehydrated:O,cache:null,transitions:null,pendingSuspenseBoundaries:null},X1(le),b}function Qg(b){if(!b)return zn;b=b._reactInternals;e:{if(P(b)!==b||b.tag!==1)throw Error(i(170));var k=b;do{switch(k.tag){case 3:k=k.stateNode.context;break e;case 1:if(An(k.type)){k=k.stateNode.__reactInternalMemoizedMergedChildContext;break e}}k=k.return}while(k!==null);throw Error(i(171))}if(b.tag===1){var O=b.type;if(An(O))return Mr(b,O,k)}return k}function Id(b){var k=b._reactInternals;if(k===void 0)throw typeof b.render=="function"?Error(i(188)):(b=Object.keys(b).join(","),Error(i(268,b)));return b=V(k),b===null?null:b.stateNode}function Zg(b,k){if(b=b.memoizedState,b!==null&&b.dehydrated!==null){var O=b.retryLane;b.retryLane=O!==0&&O<k?O:k}}function ff(b,k){Zg(b,k),(b=b.alternate)&&Zg(b,k)}function aS(b){return b=V(b),b===null?null:b.stateNode}function Nb(){return null}return r.attemptContinuousHydration=function(b){if(b.tag===13){var k=Tl(b,134217728);if(k!==null){var O=_s();yi(k,b,134217728,O)}ff(b,134217728)}},r.attemptDiscreteHydration=function(b){if(b.tag===13){var k=Tl(b,1);if(k!==null){var O=_s();yi(k,b,1,O)}ff(b,1)}},r.attemptHydrationAtCurrentPriority=function(b){if(b.tag===13){var k=Ca(b),O=Tl(b,k);if(O!==null){var H=_s();yi(O,b,k,H)}ff(b,k)}},r.attemptSynchronousHydration=function(b){switch(b.tag){case 3:var k=b.stateNode;if(k.current.memoizedState.isDehydrated){var O=Ue(k.pendingLanes);O!==0&&(Ln(k,O|1),vi(k,Sn()),(bn&6)===0&&(rs(),Ja()))}break;case 13:vx(function(){var H=Tl(b,1);if(H!==null){var J=_s();yi(H,b,1,J)}}),ff(b,1)}},r.batchedUpdates=function(b,k){var O=bn;bn|=1;try{return b(k)}finally{bn=O,bn===0&&(rs(),L0&&Ja())}},r.createComponentSelector=function(b){return{$$typeof:Vc,value:b}},r.createContainer=function(b,k,O,H,J,le,Ae){return Tx(b,k,!1,null,O,H,J,le,Ae)},r.createHasPseudoClassSelector=function(b){return{$$typeof:$i,value:b}},r.createHydrationContainer=function(b,k,O,H,J,le,Ae,dt,jt){return b=Tx(O,H,!0,b,J,le,Ae,dt,jt),b.context=Qg(null),O=b.current,H=_s(),J=Ca(O),le=Uc(H,J),le.callback=k??null,zc(O,le,J),b.current.lanes=J,Ft(b,J,H),vi(b,H),b},r.createPortal=function(b,k,O){var H=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:H==null?null:""+H,children:b,containerInfo:k,implementation:O}},r.createRoleSelector=function(b){return{$$typeof:tc,value:b}},r.createTestNameSelector=function(b){return{$$typeof:Z0,value:b}},r.createTextSelector=function(b){return{$$typeof:Rh,value:b}},r.deferredUpdates=function(b){var k=He,O=zs.transition;try{return zs.transition=null,He=16,b()}finally{He=k,zs.transition=O}},r.discreteUpdates=function(b,k,O,H,J){var le=He,Ae=zs.transition;try{return zs.transition=null,He=1,b(k,O,H,J)}finally{He=le,zs.transition=Ae,bn===0&&rs()}},r.findAllNodes=sc,r.findBoundingRects=function(b,k){if(!at)throw Error(i(363));k=sc(b,k),b=[];for(var O=0;O<k.length;O++)b.push(Te(k[O]));for(k=b.length-1;0<k;k--){O=b[k];for(var H=O.x,J=H+O.width,le=O.y,Ae=le+O.height,dt=k-1;0<=dt;dt--)if(k!==dt){var jt=b[dt],ir=jt.x,Ir=ir+jt.width,yn=jt.y,Er=yn+jt.height;if(H>=ir&&le>=yn&&J<=Ir&&Ae<=Er){b.splice(k,1);break}else if(H!==ir||O.width!==jt.width||Er<le||yn>Ae){if(!(le!==yn||O.height!==jt.height||Ir<H||ir>J)){ir>H&&(jt.width+=ir-H,jt.x=H),Ir<J&&(jt.width=J-ir),b.splice(k,1);break}}else{yn>le&&(jt.height+=yn-le,jt.y=le),Er<Ae&&(jt.height=Ae-yn),b.splice(k,1);break}}}return b},r.findHostInstance=Id,r.findHostInstanceWithNoPortals=function(b){return b=B(b),b=b!==null?re(b):null,b===null?null:b.stateNode},r.findHostInstanceWithWarning=function(b){return Id(b)},r.flushControlled=function(b){var k=bn;bn|=1;var O=zs.transition,H=He;try{zs.transition=null,He=1,b()}finally{He=H,zs.transition=O,bn=k,bn===0&&(rs(),Ja())}},r.flushPassiveEffects=Yc,r.flushSync=vx,r.focusWithin=function(b,k){if(!at)throw Error(i(363));for(b=rc(b),k=nc(b,k),k=Array.from(k),b=0;b<k.length;){var O=k[b++];if(!Ct(O)){if(O.tag===5&&Yt(O.stateNode))return!0;for(O=O.child;O!==null;)k.push(O),O=O.sibling}}return!1},r.getCurrentUpdatePriority=function(){return He},r.getFindAllNodesFailureDescription=function(b,k){if(!at)throw Error(i(363));var O=0,H=[];b=[rc(b),0];for(var J=0;J<b.length;){var le=b[J++],Ae=b[J++],dt=k[Ae];if((le.tag!==5||!Ct(le))&&(Ih(le,dt)&&(H.push(Wg(dt)),Ae++,Ae>O&&(O=Ae)),Ae<k.length))for(le=le.child;le!==null;)b.push(le,Ae),le=le.sibling}if(O<k.length){for(b=[];O<k.length;O++)b.push(Wg(k[O]));return`findAllNodes was able to match part of the selector:
  `+(H.join(" > ")+`

No matching component was found for:
  `)+b.join(" > ")}return null},r.getPublicRootInstance=function(b){if(b=b.current,!b.child)return null;switch(b.child.tag){case 5:return ee(b.child.stateNode);default:return b.child.stateNode}},r.injectIntoDevTools=function(b){if(b={bundleType:b.bundleType,version:b.version,rendererPackageName:b.rendererPackageName,rendererConfig:b.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:aS,findFiberByHostInstance:b.findFiberByHostInstance||Nb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")b=!1;else{var k=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(k.isDisabled||!k.supportsFiber)b=!0;else{try{yu=k.inject(b),ao=k}catch{}b=!!k.checkDCE}}return b},r.isAlreadyRendering=function(){return!1},r.observeVisibleRects=function(b,k,O,H){if(!at)throw Error(i(363));b=sc(b,k);var J=it(b,O,H).disconnect;return{disconnect:function(){J()}}},r.registerMutableSourceForHydration=function(b,k){var O=k._getVersion;O=O(k._source),b.mutableSourceEagerHydrationData==null?b.mutableSourceEagerHydrationData=[k,O]:b.mutableSourceEagerHydrationData.push(k,O)},r.runWithPriority=function(b,k){var O=He;try{return He=b,k()}finally{He=O}},r.shouldError=function(){return null},r.shouldSuspend=function(){return!1},r.updateContainer=function(b,k,O,H){var J=k.current,le=_s(),Ae=Ca(J);return O=Qg(O),k.context===null?k.context=O:k.pendingContext=O,k=Uc(le,Ae),k.payload={element:b},H=H===void 0?null:H,H!==null&&(k.callback=H),b=zc(J,k,Ae),b!==null&&(yi(b,J,Ae,le),Sh(b,J,Ae)),Ae},r}),_5}var iF;function _ie(){return iF||(iF=1,w5.exports=wie()),w5.exports}var Sie=_ie();const kie=Oc(Sie);var S5={exports:{}},Sf={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oF;function Cie(){return oF||(oF=1,Sf.ConcurrentRoot=1,Sf.ContinuousEventPriority=4,Sf.DefaultEventPriority=16,Sf.DiscreteEventPriority=1,Sf.IdleEventPriority=536870912,Sf.LegacyRoot=0),Sf}var lF;function Tie(){return lF||(lF=1,S5.exports=Cie()),S5.exports}var iz=Tie(),Nie=Mn();const cF={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let uF=!1,dF=!1;const c7=".react-konva-event";let oz=!1;function Eie(e){oz=e}const Aie=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,jie=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Pie={};function Q_(e,t,r=Pie){if(!uF&&"zIndex"in t&&(console.warn(jie),uF=!0),!dF&&t.draggable){var n=t.x!==void 0||t.y!==void 0,s=t.onDragEnd||t.onDragMove;n&&!s&&(console.warn(Aie),dF=!0)}for(var a in r)if(!cF[a]){var i=a.slice(0,2)==="on",o=r[a]!==t[a];if(i&&o){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e.off(c,r[a])}var u=!t.hasOwnProperty(a);u&&e.setAttr(a,void 0)}var d=oz||t._useStrictMode,f={},h=!1;const g={};for(var a in t)if(!cF[a]){var i=a.slice(0,2)==="on",p=r[a]!==t[a];if(i&&p){var c=a.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),t[a]&&(g[c]=t[a])}!i&&(t[a]!==r[a]||d&&t[a]!==e.getAttr(a))&&(h=!0,f[a]=t[a])}h&&(e.setAttrs(f),ah(e));for(var c in g)e.on(c+c7,g[c])}function ah(e){if(!Nie.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var k5=X8();const lz={},Fie={};Cv.Node.prototype._applyProps=Q_;function Mie(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),ah(e)}function Oie(e,t,r){let n=Cv[e];n||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),n=Cv.Group);const s={},a={};for(var i in t){var o=i.slice(0,2)==="on";o?a[i]=t[i]:s[i]=t[i]}const c=new n(s);return Q_(c,a),c}function Die(e,t,r){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function Rie(e,t,r){return!1}function Iie(e){return e}function Lie(){return null}function Bie(){return null}function $ie(e,t,r,n){return Fie}function Uie(){}function zie(e){}function Wie(e,t){return!1}function Hie(){return lz}function Gie(){return lz}const Vie=setTimeout,qie=clearTimeout,Kie=-1;function Yie(e,t){return!1}const Xie=!1,Jie=!0,Qie=!0;function Zie(e,t){t.parent===e?t.moveToTop():e.add(t),ah(e)}function eoe(e,t){t.parent===e?t.moveToTop():e.add(t),ah(e)}function cz(e,t,r){t._remove(),e.add(t),t.setZIndex(r.getZIndex()),ah(e)}function toe(e,t,r){cz(e,t,r)}function roe(e,t){t.destroy(),t.off(c7),ah(e)}function noe(e,t){t.destroy(),t.off(c7),ah(e)}function soe(e,t,r){console.error(`Text components are not yet supported in ReactKonva. You text is: "${r}"`)}function aoe(e,t,r){}function ioe(e,t,r,n,s){Q_(e,s,n)}function ooe(e){e.hide(),ah(e)}function loe(e){}function coe(e,t){(t.visible==null||t.visible)&&e.show()}function uoe(e,t){}function doe(e){}function foe(){}const hoe=()=>iz.DefaultEventPriority,moe=Object.freeze(Object.defineProperty({__proto__:null,appendChild:Zie,appendChildToContainer:eoe,appendInitialChild:Mie,cancelTimeout:qie,clearContainer:doe,commitMount:aoe,commitTextUpdate:soe,commitUpdate:ioe,createInstance:Oie,createTextInstance:Die,detachDeletedInstance:foe,finalizeInitialChildren:Rie,getChildHostContext:Gie,getCurrentEventPriority:hoe,getPublicInstance:Iie,getRootHostContext:Hie,hideInstance:ooe,hideTextInstance:loe,idlePriority:k5.unstable_IdlePriority,insertBefore:cz,insertInContainerBefore:toe,isPrimaryRenderer:Xie,noTimeout:Kie,now:k5.unstable_now,prepareForCommit:Lie,preparePortalMount:Bie,prepareUpdate:$ie,removeChild:roe,removeChildFromContainer:noe,resetAfterCommit:Uie,resetTextContent:zie,run:k5.unstable_runWithPriority,scheduleTimeout:Vie,shouldDeprioritizeSubtree:Wie,shouldSetTextContent:Yie,supportsMutation:Qie,unhideInstance:coe,unhideTextInstance:uoe,warnsIfNotActing:Jie},Symbol.toStringTag,{value:"Module"}));var goe=Object.defineProperty,poe=Object.defineProperties,xoe=Object.getOwnPropertyDescriptors,fF=Object.getOwnPropertySymbols,yoe=Object.prototype.hasOwnProperty,voe=Object.prototype.propertyIsEnumerable,hF=(e,t,r)=>t in e?goe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mF=(e,t)=>{for(var r in t||(t={}))yoe.call(t,r)&&hF(e,r,t[r]);if(fF)for(var r of fF(t))voe.call(t,r)&&hF(e,r,t[r]);return e},boe=(e,t)=>poe(e,xoe(t)),gF,pF;typeof window<"u"&&((gF=window.document)!=null&&gF.createElement||((pF=window.navigator)==null?void 0:pF.product)==="ReactNative")?S.useLayoutEffect:S.useEffect;function uz(e,t,r){if(!e)return;if(r(e)===!0)return e;let n=e.child;for(;n;){const s=uz(n,t,r);if(s)return s;n=n.sibling}}function dz(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const xF=console.error;console.error=function(){const e=[...arguments].join("");if(e?.startsWith("Warning:")&&e.includes("useContext")){console.error=xF;return}return xF.apply(this,arguments)};const u7=dz(S.createContext(null));class fz extends S.Component{render(){return S.createElement(u7.Provider,{value:this._reactInternals},this.props.children)}}function woe(){const e=S.useContext(u7);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=S.useId();return S.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const s=uz(n,!1,a=>{let i=a.memoizedState;for(;i;){if(i.memoizedState===t)return!0;i=i.next}});if(s)return s}},[e,t])}function _oe(){const e=woe(),[t]=S.useState(()=>new Map);t.clear();let r=e;for(;r;){if(r.type&&typeof r.type=="object"){const s=r.type._context===void 0&&r.type.Provider===r.type?r.type:r.type._context;s&&s!==u7&&!t.has(s)&&t.set(s,S.useContext(dz(s)))}r=r.return}return t}function hz(){const e=_oe();return S.useMemo(()=>Array.from(e.keys()).reduce((t,r)=>n=>S.createElement(t,null,S.createElement(r.Provider,boe(mF({},n),{value:e.get(r)}))),t=>S.createElement(fz,mF({},t))),[e])}function Soe(e){const t=Gs.useRef({});return Gs.useLayoutEffect(()=>{t.current=e}),Gs.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const koe=e=>{const t=Gs.useRef(null),r=Gs.useRef(null),n=Gs.useRef(null),s=Soe(e),a=hz(),i=o=>{const{forwardedRef:c}=e;c&&(typeof c=="function"?c(o):c.current=o)};return Gs.useLayoutEffect(()=>(r.current=new Cv.Stage({width:e.width,height:e.height,container:t.current}),i(r.current),n.current=Cp.createContainer(r.current,iz.LegacyRoot,!1,null),Cp.updateContainer(Gs.createElement(a,{},e.children),n.current),()=>{Cv.isBrowser&&(i(null),Cp.updateContainer(null,n.current,null),r.current.destroy())}),[]),Gs.useLayoutEffect(()=>{i(r.current),Q_(r.current,e,s),Cp.updateContainer(Gs.createElement(a,{},e.children),n.current,null)}),Gs.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},Tm="Layer",Coe="FastLayer",ou="Group",Toe="Label",Ei="Rect",Lf="Circle",Noe="Ellipse",Eoe="Wedge",Ki="Line",Aoe="Sprite",mz="Image",Vu="Text",joe="TextPath",Poe="Star",Foe="Ring",Moe="Arc",Ooe="Tag",Doe="Path",Roe="RegularPolygon",xC="Arrow",Ioe="Shape",gz="Transformer",Loe="18.2.13",Cp=kie(moe);Cp.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Gs.version,rendererPackageName:"react-konva"});const Nm=Gs.forwardRef((e,t)=>Gs.createElement(fz,{},Gs.createElement(koe,{...e,forwardedRef:t}))),Boe=Eie,$oe=Object.freeze(Object.defineProperty({__proto__:null,Arc:Moe,Arrow:xC,Circle:Lf,Ellipse:Noe,FastLayer:Coe,Group:ou,Image:mz,KonvaRenderer:Cp,Label:Toe,Layer:Tm,Line:Ki,Path:Doe,Rect:Ei,RegularPolygon:Roe,Ring:Foe,Shape:Ioe,Sprite:Aoe,Stage:Nm,Star:Poe,Tag:Ooe,Text:Vu,TextPath:joe,Transformer:gz,Wedge:Eoe,useContextBridge:hz,useStrictMode:Boe,version:Loe},Symbol.toStringTag,{value:"Module"})),Kt=({children:e,hover:t=!0,className:r="",paddingClass:n="p-6",...s})=>{const a=`
    bg-white rounded-xl shadow-md border border-gray-200 ${n}
    ${t?"hover:shadow-lg hover:-translate-y-1 transition-all duration-200":""}
    ${r}
  `;return l.jsx(vt.div,{className:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},...s,children:e})},Uoe=({children:e,className:t=""})=>l.jsx("div",{className:`border-b border-gray-200 pb-4 mb-4 ${t}`,children:e}),zoe=({children:e,className:t="",style:r={}})=>{const s=r&&r.color?"":"text-gray-800";return l.jsx("h3",{className:`text-xl font-semibold ${s} ${t}`,style:r,children:e})},Woe=({children:e,className:t=""})=>l.jsx("div",{className:`py-4 ${t}`,children:e}),Hoe=({children:e,className:t=""})=>l.jsx("div",{className:`border-t border-gray-200 pt-4 mt-4 ${t}`,children:e});Kt.Header=Uoe;Kt.Title=zoe;Kt.Body=Woe;Kt.Footer=Hoe;const Fa=({isOpen:e=!1,onClose:t,title:r="",children:n,size:s="medium",showCloseButton:a=!0,closeOnBackdropClick:i=!0,className:o="",...c})=>{const u=f=>{i&&f.target===f.currentTarget&&t()};Gs.useEffect(()=>{const f=p=>{p.key==="Escape"&&t()},h=window;h.__modalOpenCount||(h.__modalOpenCount=0);let g;return e&&(document.addEventListener("keydown",f),g=document.body.style.overflow,h.__modalOpenCount===0&&(document.body.style.overflow="hidden"),h.__modalOpenCount+=1),()=>{document.removeEventListener("keydown",f),h.__modalOpenCount&&h.__modalOpenCount>0&&(h.__modalOpenCount-=1),h.__modalOpenCount===0&&(g!==void 0?document.body.style.overflow=g||"":document.body.style.overflow="")}},[e,t]);const d={small:"max-w-md",medium:"max-w-lg",large:"max-w-4xl"};return e?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},onClick:u,role:"dialog","aria-modal":"true","aria-label":r,...c,children:l.jsxs("div",{className:`
          bg-white rounded-xl shadow-md border border-gray-200 p-8
          hover:shadow-lg hover:-translate-y-1 transition-all duration-200
          w-full ${d[s]} mx-auto
          ${o}
        `,onClick:f=>f.stopPropagation(),children:[(r||a)&&l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r&&l.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:r}),a&&l.jsx("button",{onClick:t,className:"text-red-500 hover:text-red-700 hover:bg-red-50 transition-all duration-200 rounded-full p-2 text-2xl font-bold leading-none","aria-label":"Close modal",children:""})]}),l.jsx("div",{className:"space-y-6",children:n})]})}):null},Goe=e=>{const[t,r]=S.useState({width:800,height:600}),n=S.useRef(null),s=S.useCallback(()=>{if(e.current){e.current.getBoundingClientRect();const a=Math.min(1200,window.innerWidth*.8),i=Math.min(800,window.innerHeight*.6),o=4/3;let c=a,u=c/o;u>i&&(u=i,c=u*o),r({width:c,height:u})}},[e]);return S.useEffect(()=>(s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)),[s]),{canvasSize:t,stageRef:n,updateCanvasSize:s}},Voe=e=>{const[t,r]=S.useState({width:800,height:600}),[n,s]=S.useState({}),a=S.useCallback(()=>{if(e.current){const o=e.current.getBoundingClientRect();r({width:o.width,height:Math.max(400,o.height)})}},[e]),i=S.useCallback(o=>o<480?{stageHeight:300,blockMinSize:50,fontSize:12,padding:10,touchTargetSize:44,arrowThickness:4}:o<768?{stageHeight:400,blockMinSize:60,fontSize:14,padding:15,touchTargetSize:44,arrowThickness:4}:o<1024?{stageHeight:500,blockMinSize:70,fontSize:16,padding:20,touchTargetSize:40,arrowThickness:3}:{stageHeight:600,blockMinSize:80,fontSize:18,padding:25,touchTargetSize:32,arrowThickness:2},[]);return S.useEffect(()=>{const o=i(t.width);s(o)},[t.width,i]),S.useEffect(()=>{a();const o=()=>{a()};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[a]),{containerSize:t,responsiveSettings:n,updateSize:a}},yF={convertToOriginal:(e,t,r)=>r?{x:Number(((e-r.x)/r.scale).toFixed(4)),y:Number(((t-r.y)/r.scale).toFixed(4))}:{x:e,y:t},convertToCanvas:(e,t,r)=>r?{x:Number((r.x+e*r.scale).toFixed(4)),y:Number((r.y+t*r.scale).toFixed(4))}:{x:e,y:t},isPointInImage:(e,t)=>t?e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height:!1,calculateImageScale:(e,t)=>{if(!e||!t)return 1;const r=40,n=t.width-r,s=t.height-r;return Math.min(n/e.width,s/e.height)},calculateImageInfo:(e,t)=>{if(!e||!t)return null;const r=40,n=t.width-r,s=t.height-r,a=Math.min(n/e.width,s/e.height),i=e.width*a,o=e.height*a,c=(t.width-i)/2,u=(t.height-o)/2;return{x:c,y:u,width:i,height:o,scale:a,originalWidth:e.width,originalHeight:e.height}}},qoe=e=>{const t=S.useCallback((n,s)=>yF.convertToOriginal(n,s,e),[e]),r=S.useCallback((n,s)=>yF.convertToCanvas(n,s,e),[e]);return{convertToOriginal:t,convertToCanvas:r}},Sy={create:(e,t,r,n,s)=>({id:s,x:e-r/2,y:t-n/2,width:Math.max(r,30),height:Math.max(n,10),fill:"rgba(0, 123, 255, 0.15)",stroke:"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),validate:e=>e.width>0&&e.height>0,findAtPosition:(e,t,r)=>e.find(n=>t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height),generateId:()=>`block_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},hp={create:(e,t,r,n,s,a,i)=>({id:i,startX:e,startY:t,endX:r,endY:n,startBlock:s,endBlock:a,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,pointerLength:10,pointerWidth:10}),snapToNearestBlock:(e,t,r,n=60)=>{let s=null,a=1/0;for(const i of r){const o=i.x+i.width/2,c=i.y+i.height/2,u=Math.sqrt(Math.pow(e-o,2)+Math.pow(t-c,2));u<=n&&u<a&&(a=u,s=i)}return s?{x:s.x+s.width/2,y:s.y+s.height/2,blockId:s.id,block:s,distance:a}:null},validate:(e,t,r,n,s)=>hp.snapToNearestBlock(e,t,s)!==null,generateId:()=>`arrow_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},C5={create:(e,t,r)=>({id:r,blockId:e,word:t}),update:(e,t,r)=>e.map(n=>n.blockId===t?{...n,word:r}:n),delete:(e,t)=>e.filter(r=>r.blockId!==t),generateId:e=>`word_${e}`,validate:e=>e&&e.trim().length>0},Koe=async e=>{const t=[];if(e.size>512e3){const n=(e.size/1024).toFixed(1);t.push(`Image is too large (${n}KB). Maximum allowed size is 500KB. Please compress or resize your image.`)}return new Promise(n=>{const s=new Image;s.onload=()=>{(s.width>4e3||s.height>4e3)&&t.push(`Image is too large (${s.width}x${s.height} pixels). Maximum allowed dimensions are 4000x4000 pixels. Please resize your image.`),n({valid:t.length===0,errors:t,dimensions:{width:s.width,height:s.height}})},s.onerror=()=>{t.push("Invalid image file"),n({valid:!1,errors:t})},s.src=URL.createObjectURL(e)})},Yoe=(e,t=500)=>new Promise(r=>{const n=document.createElement("canvas"),s=n.getContext("2d"),a=new Image;a.onload=()=>{let{width:i,height:o}=a;const c=2e3;if(i>c||o>c){const f=Math.min(c/i,c/o);i*=f,o*=f}n.width=i,n.height=o,s.drawImage(a,0,0,i,o);let u=.8;const d=()=>{n.toBlob(f=>{f.size<=t*1024||u<=.1?r(f):(u-=.1,d())},"image/jpeg",u)};d()},a.onerror=()=>{r(e)},a.src=URL.createObjectURL(e)}),Xoe=e=>new Promise((t,r)=>{const n=new FileReader;n.onload=s=>t(s.target.result),n.onerror=s=>r(s),n.readAsDataURL(e)}),Joe=()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return{blockMinSize:e?60:40,arrowThickness:e?4:2,touchTargetSize:e?44:32,doubleTapDelay:e?300:200,isMobile:e}},Qoe={testData:{blocks:[],words:[],arrows:[],imageUrl:null},canvas:{size:{width:800,height:600},image:null,imageInfo:null,selectedTool:"edit"},creation:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null},ui:{selectedBlock:null,showWordPanel:!1,isLoading:!1,error:null,showImageSizeModal:!1,imageSizeError:null}},Zoe=(e,t)=>{switch(t.type){case"SET_CANVAS_SIZE":return{...e,canvas:{...e.canvas,size:t.payload}};case"SET_IMAGE":return{...e,canvas:{...e.canvas,image:t.payload}};case"SET_IMAGE_INFO":return{...e,canvas:{...e.canvas,imageInfo:t.payload}};case"SET_SELECTED_TOOL":return{...e,canvas:{...e.canvas,selectedTool:t.payload}};case"ADD_BLOCK":return{...e,testData:{...e.testData,blocks:[...e.testData.blocks,t.payload]}};case"ADD_WORD":return{...e,testData:{...e.testData,words:[...e.testData.words,t.payload]}};case"ADD_ARROW":return{...e,testData:{...e.testData,arrows:[...e.testData.arrows,t.payload]}};case"UPDATE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.map(r=>r.id===t.payload.id?{...r,...t.payload.updates}:r)}};case"DELETE_BLOCK":return{...e,testData:{...e.testData,blocks:e.testData.blocks.filter(r=>r.id!==t.payload),words:e.testData.words.filter(r=>r.blockId!==t.payload),arrows:e.testData.arrows.filter(r=>r.startBlock!==t.payload&&r.endBlock!==t.payload)}};case"UPDATE_WORDS":return{...e,testData:{...e.testData,words:t.payload}};case"SET_CREATION_STATE":return{...e,creation:{...e.creation,...t.payload}};case"SET_UI_STATE":return{...e,ui:{...e.ui,...t.payload}};case"SET_LOADING":return{...e,ui:{...e.ui,isLoading:t.payload}};case"SET_ERROR":return{...e,ui:{...e.ui,error:t.payload}};case"SHOW_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!0,imageSizeError:t.payload}};case"HIDE_IMAGE_SIZE_MODAL":return{...e,ui:{...e.ui,showImageSizeModal:!1,imageSizeError:null}};case"RESET_TESTDATA":return{...e,testData:{blocks:[],words:[],arrows:[],imageUrl:e.testData.imageUrl}};default:return e}},ele=({testName:e="",showQuestionCount:t=!0,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const[o,c]=S.useReducer(Zoe,Qoe),{showNotification:u}=di(),{makeAuthenticatedRequest:d}=ql(),{user:f}=Fs(),h=S.useRef(null),g=S.useRef(null),p=S.useRef(null),y=S.useRef({}),v=S.useRef({}),{canvasSize:C,stageRef:w}=Goe(h),{containerSize:_,responsiveSettings:T}=Voe(h),[E,A]=S.useState(null),F=T?.stageHeight??600,j=S.useMemo(()=>F+150,[F]),P=T?.padding??20;S.useEffect(()=>{if(!o.canvas.image||!h.current)return;const z=h.current?.clientWidth||800,q=h.current?.clientHeight||600,ne=z/o.canvas.image.width,X=q/o.canvas.image.height,se=Math.min(ne,X,1),ce=o.canvas.image.width*se,pe=o.canvas.image.height*se,be=(z-ce)/2,oe=(q-pe)/2;A({x:be,y:oe,width:ce,height:pe,scaleX:se,scaleY:se,scale:se,image:o.canvas.image})},[o.canvas.image,h.current?.clientWidth,h.current?.clientHeight]);const{convertToOriginal:D}=qoe(E);S.useEffect(()=>{c({type:"SET_CANVAS_SIZE",payload:C})},[C]),S.useEffect(()=>{E&&c({type:"SET_IMAGE_INFO",payload:E})},[E]),S.useEffect(()=>{const z=p.current;if(!z)return;const q=o.ui.selectedBlock?.id?y.current[o.ui.selectedBlock.id]:null;q?(z.nodes([q]),z.getLayer()?.batchDraw()):(z.nodes([]),z.getLayer()?.batchDraw())},[o.ui.selectedBlock]);const B=S.useCallback(()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:null}}),c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,isDrawingArrow:!1,blockCreationStart:null,arrowStart:null,previewBlock:null,previewArrow:null}}),c({type:"RESET_TESTDATA"}),c({type:"SET_ERROR",payload:null})},[]),V=S.useCallback(async z=>{const q=z.target.files[0];if(!q){u("Please select a file","error");return}try{c({type:"SET_LOADING",payload:!0});const ne=await Koe(q);if(!ne.valid){c({type:"SHOW_IMAGE_SIZE_MODAL",payload:{errors:ne.errors,fileSize:(q.size/1024).toFixed(1),dimensions:ne.dimensions}});return}let X=q;if(q.size>500*1024){u("Image is large, compressing to meet size requirements...","info");try{X=await Yoe(q,500);const pe=(q.size/1024).toFixed(1),be=(X.size/1024).toFixed(1);u(`Image compressed from ${pe}KB to ${be}KB`,"success")}catch{u("Failed to compress image. Please try a smaller image.","error");return}}const se=await Xoe(X),ce=new Image;ce.crossOrigin="anonymous",ce.onload=()=>{c({type:"SET_IMAGE",payload:ce}),c({type:"SET_UI_STATE",payload:{imageUrl:se}}),u("Image uploaded successfully!","success")},ce.onerror=()=>{u("Failed to load image","error")},ce.src=se}catch(ne){console.error("Image upload error:",ne),u("Error processing image","error")}finally{c({type:"SET_LOADING",payload:!1})}},[u]),Y=S.useCallback(z=>{const q=w.current;if(!q)return;const ne=q.getPointerPosition();if(ne){if(o.canvas.selectedTool==="create"){const X=Sy.findAtPosition(o.testData.blocks,ne.x,ne.y);if(X){c({type:"SET_UI_STATE",payload:{selectedBlock:X}});return}c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!0,blockCreationStart:{x:ne.x,y:ne.y}}})}else if(o.canvas.selectedTool==="edit"){const X=Sy.findAtPosition(o.testData.blocks,ne.x,ne.y);c(X?{type:"SET_UI_STATE",payload:{selectedBlock:X}}:{type:"SET_UI_STATE",payload:{selectedBlock:null}})}else if(o.canvas.selectedTool==="arrow"){const X=z.target===q,se=Sy.findAtPosition(o.testData.blocks,ne.x,ne.y);(X||!se)&&c({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!0,arrowStart:{x:ne.x,y:ne.y}}})}}},[o.canvas.selectedTool,E,o.testData.blocks]),re=S.useCallback(z=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const q=w.current;if(!q)return;const ne=q.getPointerPosition();if(!ne)return;const X=Math.abs(ne.x-o.creation.blockCreationStart.x),se=Math.abs(ne.y-o.creation.blockCreationStart.y),ce=10,pe=Math.max(X,ce),be=Math.max(se,ce);c({type:"SET_CREATION_STATE",payload:{previewBlock:{x:Math.min(ne.x,o.creation.blockCreationStart.x),y:Math.min(ne.y,o.creation.blockCreationStart.y),width:pe,height:be,fill:"rgba(0, 123, 255, 0.3)",stroke:"#007bff",strokeWidth:2,dash:[5,5],opacity:.7}}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const q=w.current;if(!q)return;const ne=q.getPointerPosition();if(!ne)return;c({type:"SET_CREATION_STATE",payload:{previewArrow:{startX:o.creation.arrowStart.x,startY:o.creation.arrowStart.y,endX:ne.x,endY:ne.y,stroke:"#dc3545",fill:"#dc3545",strokeWidth:3,dash:[5,5],opacity:.7}}})}},[o.creation]),te=S.useCallback(z=>{if(o.creation.isCreatingBlock&&o.creation.blockCreationStart){const q=w.current;if(!q)return;const ne=q.getPointerPosition();if(!ne)return;const X=Math.abs(ne.x-o.creation.blockCreationStart.x),se=Math.abs(ne.y-o.creation.blockCreationStart.y),ce=10,pe=Math.max(X,ce),be=Math.max(se,ce),oe=Math.min(ne.x,o.creation.blockCreationStart.x)+pe/2,je=Math.min(ne.y,o.creation.blockCreationStart.y)+be/2,Re=Sy.generateId(),Xe=Sy.create(oe,je,pe,be,Re),ft=C5.create(Re,`Word ${o.testData.blocks.length+1}`,C5.generateId(Re));c({type:"ADD_BLOCK",payload:Xe}),c({type:"ADD_WORD",payload:ft}),c({type:"SET_CREATION_STATE",payload:{isCreatingBlock:!1,blockCreationStart:null,previewBlock:null}}),o.testData.blocks.length===0&&c({type:"SET_UI_STATE",payload:{showWordPanel:!0}})}else if(o.creation.isDrawingArrow&&o.creation.arrowStart){const q=w.current;if(!q)return;const ne=q.getPointerPosition();if(!ne)return;if(hp.validate(o.creation.arrowStart.x,o.creation.arrowStart.y,ne.x,ne.y,o.testData.blocks)){const X=hp.snapToNearestBlock(o.creation.arrowStart.x,o.creation.arrowStart.y,o.testData.blocks),se=hp.snapToNearestBlock(ne.x,ne.y,o.testData.blocks),ce=X?X.x:o.creation.arrowStart.x,pe=X?X.y:o.creation.arrowStart.y,be=se?se.x:ne.x,oe=se?se.y:ne.y,je=hp.generateId(),Re=Joe(),Xe=hp.create(ce,pe,be,oe,X?X.blockId:null,se?se.blockId:null,je,{strokeWidth:Re.arrowThickness,isMobile:Re.isMobile});c({type:"ADD_ARROW",payload:Xe}),u("Arrow created successfully!","success")}else u("Arrow must start near a block!","error");c({type:"SET_CREATION_STATE",payload:{isDrawingArrow:!1,arrowStart:null,previewArrow:null}})}},[o.creation,o.testData.blocks,u]),ee=S.useCallback(z=>{z.evt.preventDefault(),Y(z)},[Y]),L=S.useCallback(z=>{z.evt.preventDefault(),re(z)},[re]),Q=S.useCallback(z=>{z.evt.preventDefault(),te(z)},[te]),U=S.useCallback(async()=>{console.log(" [MatchingTestCreator] handleSaveTest clicked");const z=G();if(Object.keys(z).length>0){console.warn(" [MatchingTestCreator] Validation errors:",z),u("Please fix validation errors before saving","error");return}try{console.log(" [MatchingTestCreator] Preparing data to save...",{blocks:o.testData.blocks.length,words:o.testData.words.length,arrows:o.testData.arrows.length,imageUrl:o.ui.imageUrl?"present":"missing"}),c({type:"SET_LOADING",payload:!0});let q=o.ui.imageUrl;if(o.ui.imageUrl&&o.ui.imageUrl.startsWith("data:")){const X=await d("/.netlify/functions/upload-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataUrl:o.ui.imageUrl,folder:"matching_tests"})}),se=await X.json();if(X.ok&&se.success&&se.url)q=se.url;else throw new Error(se.message||"Upload failed")}const ne=o.testData.blocks.map((X,se)=>{let ce;if(E){const oe=D(X.x,X.y),je=D(X.x+X.width,X.y+X.height);ce={x:oe.x,y:oe.y,width:Number((je.x-oe.x).toFixed(4)),height:Number((je.y-oe.y).toFixed(4))}}else ce={x:Number(X.x.toFixed(4)),y:Number(X.y.toFixed(4)),width:Number(X.width.toFixed(4)),height:Number(X.height.toFixed(4))};const pe=o.testData.words.find(oe=>oe.blockId===X.id),be=o.testData.arrows.find(oe=>oe.startBlock===X.id);return{question_id:se+1,word:pe?.word||`Word ${se+1}`,block_coordinates:ce,has_arrow:!!be,arrow:be&&E?(()=>{const oe=D(be.startX,be.startY),je=D(be.endX,be.endY),Re=oe.x/E.originalWidth*100,Xe=oe.y/E.originalHeight*100,ft=je.x/E.originalWidth*100,Je=je.y/E.originalHeight*100;return{start_x:Number(oe.x.toFixed(4)),start_y:Number(oe.y.toFixed(4)),end_x:Number(je.x.toFixed(4)),end_y:Number(je.y.toFixed(4)),rel_start_x:Number(Re.toFixed(4)),rel_start_y:Number(Xe.toFixed(4)),rel_end_x:Number(ft.toFixed(4)),rel_end_y:Number(Je.toFixed(4)),image_width:E.originalWidth,image_height:E.originalHeight,style:be.style||{color:"#dc3545",thickness:3}}})():null}});r&&(console.log(" [MatchingTestCreator] Calling onTestSaved with processed data"),r({success:!0,message:"Test data prepared for assignment",blocks:o.testData.blocks,words:o.testData.words,arrows:o.testData.arrows,imageUrl:q,processedQuestions:ne}))}catch(q){console.error("Save error:",q),u(`Error saving test: ${q.message}`,"error")}finally{c({type:"SET_LOADING",payload:!1})}},[o.testData,o.ui.imageUrl,E,D,d,r,u,e,f]),G=S.useCallback(()=>{const z={};return e.trim()||(z.testName="Test name is required"),o.testData.blocks.length===0&&(z.blocks="At least one block is required"),z},[e,o.testData.blocks.length]),W=()=>l.jsxs("div",{className:"flex flex-wrap gap-2 p-4 bg-gray-50 border-b",children:[l.jsx(ht,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"create"}),variant:o.canvas.selectedTool==="create"?"primary":"secondary",size:"sm",children:" Create Blocks"}),l.jsx(ht,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"edit"}),variant:o.canvas.selectedTool==="edit"?"primary":"secondary",size:"sm",children:" Edit Blocks"}),l.jsx(ht,{onClick:()=>c({type:"SET_SELECTED_TOOL",payload:"arrow"}),variant:o.canvas.selectedTool==="arrow"?"primary":"secondary",size:"sm",children:" Draw Arrows"}),l.jsx(ht,{onClick:B,variant:"secondary",size:"sm",children:" Reset"}),l.jsx(ht,{onClick:()=>g.current?.click(),variant:"secondary",size:"sm",children:" Upload Image"}),l.jsx("div",{className:"text-xs text-gray-500 text-center col-span-full",children:"Max size: 500KB  Max dimensions: 4000x4000px"})]}),M=()=>l.jsx(Nm,{width:_.width,height:j,ref:w,onMouseDown:Y,onMouseMove:re,onMouseUp:te,onTouchStart:ee,onTouchMove:L,onTouchEnd:Q,className:o.canvas.selectedTool==="arrow"||o.canvas.selectedTool==="create"?"cursor-crosshair":"cursor-default",children:l.jsxs(Tm,{children:[o.canvas.image&&E&&l.jsx(mz,{image:o.canvas.image,x:E.x,y:E.y,width:E.width,height:E.height}),o.testData.blocks.map(z=>l.jsxs(ou,{ref:q=>{q&&(v.current[z.id]=q)},draggable:o.canvas.selectedTool==="edit",x:z.x,y:z.y,onMouseEnter:q=>{const ne=q.target.getStage()?.container();ne&&(ne.style.cursor=o.ui.selectedBlock?.id===z.id?"nwse-resize":"move")},onMouseLeave:q=>{const ne=q.target.getStage()?.container();ne&&(ne.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onDragStart:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:z}})},onDragEnd:q=>{const{x:ne,y:X}=q.target.position();c({type:"UPDATE_BLOCK",payload:{id:z.id,updates:{x:ne,y:X}}})},onClick:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:z}})},onTap:()=>{c({type:"SET_UI_STATE",payload:{selectedBlock:z}})},children:[l.jsx(Ei,{ref:q=>{q&&(y.current[z.id]=q)},width:z.width,height:z.height,fill:z.fill,stroke:z.stroke,strokeWidth:z.strokeWidth,cornerRadius:z.cornerRadius,shadowColor:z.shadowColor,shadowBlur:z.shadowBlur,shadowOffset:z.shadowOffset,shadowOpacity:z.shadowOpacity,draggable:o.canvas.selectedTool==="edit",onDragEnd:q=>{const{x:ne,y:X}=q.target.getParent().position();c({type:"UPDATE_BLOCK",payload:{id:z.id,updates:{x:ne,y:X}}})},onMouseEnter:q=>{const ne=q.target.getStage()?.container();ne&&(ne.style.cursor=o.ui.selectedBlock?.id===z.id?"nwse-resize":"move")},onMouseLeave:q=>{const ne=q.target.getStage()?.container();ne&&(ne.style.cursor=o.canvas.selectedTool==="arrow"?"crosshair":"default")},onTransformEnd:q=>{const ne=y.current[z.id];if(!ne)return;const X=Math.max(10,ne.width()*ne.scaleX()),se=Math.max(10,ne.height()*ne.scaleY());ne.scaleX(1),ne.scaleY(1),c({type:"UPDATE_BLOCK",payload:{id:z.id,updates:{width:X,height:se}}})}}),l.jsx(Vu,{x:2,y:2,text:`${o.testData.blocks.indexOf(z)+1}`,fontSize:Math.min(T.fontSize,Math.max(8,z.width/4)),fontFamily:"Arial",fill:"#333",fontStyle:"bold",listening:!1})]},z.id)),l.jsx(gz,{ref:p,rotateEnabled:!1,flipEnabled:!1,boundBoxFunc:(z,q)=>({...q,width:Math.max(q.width,10),height:Math.max(q.height,10)})}),o.testData.arrows.map(z=>l.jsx(xC,{points:[z.startX,z.startY,z.endX,z.endY],stroke:z.stroke,fill:z.fill,strokeWidth:z.strokeWidth||T.arrowThickness,pointerLength:z.pointerLength,pointerWidth:z.pointerWidth},z.id)),o.creation.previewBlock&&l.jsx(Ei,{x:o.creation.previewBlock.x,y:o.creation.previewBlock.y,width:o.creation.previewBlock.width,height:o.creation.previewBlock.height,fill:o.creation.previewBlock.fill,stroke:o.creation.previewBlock.stroke,strokeWidth:o.creation.previewBlock.strokeWidth,dash:o.creation.previewBlock.dash,opacity:o.creation.previewBlock.opacity}),o.creation.previewArrow&&l.jsx(xC,{points:[o.creation.previewArrow.startX,o.creation.previewArrow.startY,o.creation.previewArrow.endX,o.creation.previewArrow.endY],stroke:o.creation.previewArrow.stroke,fill:o.creation.previewArrow.fill,strokeWidth:o.creation.previewArrow.strokeWidth,dash:o.creation.previewArrow.dash,opacity:o.creation.previewArrow.opacity})]})}),I=S.useMemo(()=>o.testData.blocks.length===0?null:l.jsxs("div",{className:"word-panel bg-gray-50 border-t border-gray-200 p-4 w-full flex-shrink-0",style:{height:"clamp(420px, 55vh, 640px)",overflowY:"auto"},children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Words (Auto-created with blocks)"}),l.jsx("div",{className:"space-y-2",children:o.testData.words.map(z=>{const q=o.testData.blocks.find(ne=>ne.id===z.blockId);return l.jsxs("div",{className:"p-2 bg-white rounded border",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("span",{className:"text-xs text-gray-500",children:["Block ",o.testData.blocks.indexOf(q)+1]}),l.jsx("button",{onClick:()=>c({type:"DELETE_BLOCK",payload:q.id}),className:"text-red-500 hover:text-red-700 text-xs",children:""})]}),l.jsx("input",{type:"text",value:z.word,onChange:ne=>{const X=C5.update(o.testData.words,z.blockId,ne.target.value);c({type:"UPDATE_WORDS",payload:X})},className:"w-full text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter word text"})]},z.blockId)})})]}),[o.testData.words,o.testData.blocks]);return l.jsxs(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex flex-col h-screen bg-gray-100",children:[l.jsx("div",{className:"bg-white shadow-sm border-b p-4",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsx("div",{children:l.jsx("div",{className:"mt-2 text-sm text-gray-600",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Test Name:"})," ",e||"Untitled Test"]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Questions:"})," ",o.testData.blocks.length," (auto-generated from blocks)"]})]})})})})}),W(),l.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto gap-4",children:[l.jsx("div",{ref:h,className:"bg-white border overflow-hidden flex-none",style:{height:`${j}px`,minHeight:`${j}px`,maxHeight:`${j+60}px`,padding:`${P}px`},children:M()}),I]}),l.jsx("div",{className:"bg-white border-t p-4",children:l.jsx("div",{className:"flex justify-center",children:l.jsx(ht,{onClick:U,disabled:a||o.ui.isLoading,variant:"primary",size:"lg",children:a||o.ui.isLoading?l.jsx(pn,{size:"sm"}):"Save Test"})})}),l.jsx("input",{ref:g,type:"file",accept:"image/*,application/pdf",onChange:V,className:"hidden"}),l.jsx(Fa,{isOpen:o.ui.showImageSizeModal,onClose:()=>c({type:"HIDE_IMAGE_SIZE_MODAL"}),title:" Image Too Large",size:"medium",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("span",{className:"text-red-600 text-2xl mr-2",children:""}),l.jsx("h4",{className:"text-lg font-semibold text-red-800",children:"Image Size Issues"})]}),l.jsx("div",{className:"text-red-700",children:o.ui.imageSizeError?.errors.map((z,q)=>l.jsxs("div",{className:"mb-2",children:[" ",z]},q))})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:" Current Image Details:"}),l.jsxs("div",{className:"text-blue-700 space-y-1",children:[l.jsxs("div",{children:[" File size: ",o.ui.imageSizeError?.fileSize,"KB"]}),o.ui.imageSizeError?.dimensions&&l.jsxs("div",{children:[" Dimensions: ",o.ui.imageSizeError.dimensions.width,"  ",o.ui.imageSizeError.dimensions.height," pixels"]})]})]}),l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:" Requirements:"}),l.jsxs("div",{className:"text-green-700 space-y-1",children:[l.jsx("div",{children:" Maximum file size: 500KB"}),l.jsx("div",{children:" Maximum dimensions: 4000  4000 pixels"}),l.jsx("div",{children:" Supported formats: All image formats (JPEG, PNG, WebP, etc.)"})]})]}),l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[l.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:" How to Fix:"}),l.jsxs("div",{className:"text-yellow-700 space-y-1",children:[l.jsx("div",{children:" Use an image editor to resize your image"}),l.jsx("div",{children:" Compress the image using online tools"}),l.jsx("div",{children:" Try a different image with smaller dimensions"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(ht,{onClick:()=>c({type:"HIDE_IMAGE_SIZE_MODAL"}),variant:"secondary",children:"Close"}),l.jsx(ht,{onClick:()=>{c({type:"HIDE_IMAGE_SIZE_MODAL"}),g.current?.click()},variant:"primary",children:"Try Another Image"})]})]})})]})},tle="modulepreload",rle=function(e){return"/"+e},vF={},ai=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let u=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};var i=u;document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=u(r.map(d=>{if(d=rle(d),d in vF)return;vF[d]=!0;const f=d.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":tle,f||(g.as="script"),g.crossOrigin="",g.href=d,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((p,y)=>{g.addEventListener("load",p),g.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})},y1=(e,t,r)=>{const[n,s]=S.useState(!1),[a,i]=S.useState(0),[o,c]=S.useState(!1),u=S.useRef(!1);S.useEffect(()=>{if(!e||!t||!r)return;const v=`anti_cheating_${r}_${e}_${t}`,C=js(v);C&&(i(C.tabSwitches||0),c(C.isCheating||!1))},[e,t,r]);const d=S.useCallback(()=>{if(console.log(" handleTabSwitch called - isTracking:",u.current),!u.current){console.log(" Not tracking, returning early");return}console.log(" Tab switch detected - starting 7 second timer...");const v=Date.now();setTimeout(()=>{const C=Date.now()-v;console.log(" Timer completed - time hidden:",C,"ms"),C>=6500?(console.log(" Tab was hidden for sufficient time - counting as tab switch"),i(w=>{const _=w+1,T=_>=2;console.log(" Tab switch count updated:",{newCount:_,cheating:T}),c(T);const E=`anti_cheating_${r}_${e}_${t}`;return ys(E,{tabSwitches:_,isCheating:T},120*1e3),_})):console.log(" Tab was not hidden long enough - not counting as switch")},7e3)},[e,t,r]),f=S.useCallback(()=>{u.current&&(console.log(" Visibility change detected:",{hidden:document.hidden,isTracking:u.current}),document.hidden?d():console.log(" Tab became visible"))},[d]),h=S.useCallback(()=>{console.log(" startTracking called - setting up anti-cheating detection"),console.log(" Current document.hidden state:",document.hidden),console.log(" Current document.visibilityState:",document.visibilityState),s(!0),u.current=!0,document.addEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners added (visibilitychange only)")},[f]),g=S.useCallback(()=>{console.log(" stopTracking called - removing anti-cheating detection"),s(!1),u.current=!1,document.removeEventListener("visibilitychange",f),console.log(" Anti-cheating event listeners removed")},[f]),p=S.useCallback(()=>{const v={caught_cheating:o,visibility_change_times:a};return console.log(" getCheatingData called:",v),v},[o,a]),y=S.useCallback(()=>{r&&e&&t&&f1(r,e,t),i(0),c(!1),console.log(" Anti-cheating data deleted from localStorage")},[r,e,t]);return{startTracking:h,stopTracking:g,clearData:y,getCheatingData:p,tabSwitches:a,isCheating:o,isTracking:n}},h2=(e,t)=>{const r=S.useRef(e),n=S.useRef(t),s=S.useRef(!1);return S.useEffect(()=>{n.current=t},[t]),S.useEffect(()=>{r.current=e},[e]),S.useEffect(()=>{if(typeof window>"u"||!e)return()=>{};const a=f=>{try{window.history.pushState({__intercept:!0,prevState:f??null,ts:Date.now()},document.title,window.location.href),s.current=!0}catch(h){console.warn("Failed to push intercept state",h)}},i=()=>{try{const f=window.history.state;if(f&&f.__intercept){const h=f.prevState??null;window.history.replaceState(h,document.title,window.location.href)}}catch(f){console.warn("Failed to restore previous state",f)}s.current=!1},o=()=>{s.current&&(r.current=!1,i(),window.history.go(-1))},c=()=>{},u=f=>{if(!r.current){s.current=!1;return}const h=f.state;a(h),n.current?.({source:"browser",confirm:o,cancel:c})},d=window.history.state;return a(d),window.addEventListener("popstate",u),()=>{window.removeEventListener("popstate",u),i()}},[e]),null},nle=({testData:e,onTestComplete:t,onBackToCabinet:r,isTestComplete:n=!1,testScore:s=null})=>{const[a,i]=S.useState(null),[o,c]=S.useState(null);S.useEffect(()=>{(async()=>{try{const[Qe,It]=await Promise.all([ai(()=>Promise.resolve().then(()=>$oe),void 0),ai(()=>Promise.resolve().then(()=>yie),void 0)]);i(Qe),c(It.default)}catch(Qe){console.error("Failed to load Konva:",Qe)}})()},[]);const u=()=>a?{Stage:a.Stage,Layer:a.Layer,Rect:a.Rect,Arrow:a.Arrow,KonvaImage:a.Image,KonvaText:a.Text,Group:a.Group}:null,[d,f]=S.useState({}),[h,g]=S.useState({}),[p,y]=S.useState(0),[v,C]=S.useState(!1),[w,_]=S.useState(null),[T,E]=S.useState(0),[A,F]=S.useState(0),[j,P]=S.useState(null),[D,B]=S.useState(null),[V,Y]=S.useState(!1),[re,te]=S.useState(!1),[ee,L]=S.useState(!1),[Q,U]=S.useState(!0),G=S.useRef(null);h2(Q,S.useCallback(({confirm:rt,cancel:Qe})=>{console.log(" MatchingTestStudent: Browser back button intercepted during test!"),console.log(" MatchingTestStudent: isBackInterceptEnabled:",Q),console.log(" MatchingTestStudent: Setting pending navigation and showing modal"),G.current={confirm:rt,cancel:Qe},te(!0)},[Q]));const{showNotification:W}=di(),{makeAuthenticatedRequest:M}=ql(),{user:I}=Fs(),{startTracking:z,stopTracking:q,getCheatingData:ne,clearData:X}=y1("matching_type",e?.id,I?.student_id||I?.id),se=S.useRef(null),ce=S.useRef(null),pe=S.useRef(null),be=S.useRef(0),[oe,je]=S.useState(400);S.useRef({});const Re=S.useCallback(()=>{Y(!0)},[]),Xe=S.useCallback(()=>{g({}),f({}),Y(!1)},[]),ft=S.useCallback(()=>{G.current=null,te(!0)},[]),Je=S.useCallback(()=>{console.log(" MatchingTestStudent: confirmBackToCabinet called"),console.log(" MatchingTestStudent: Current location:",window.location.href),console.log(" MatchingTestStudent: Current history state:",window.history.state),te(!1);const rt=G.current;if(console.log(" MatchingTestStudent: Pending navigation:",rt),G.current=null,e?.id&&I?.student_id){const It=`anti_cheating_${I?.student_id||I?.id||"unknown"}_matching_type_${e.id}`,Rt=(js(It)||{tabSwitches:0}).tabSwitches||0,cr=Rt+1,hr=cr>=2;console.log(" MatchingTestStudent: Tab switch count:",Rt,"->",cr),ys(It,{tabSwitches:cr,isCheating:hr},ds.anti_cheating)}if(console.log(" MatchingTestStudent: Disabling intercept"),U(!1),rt){console.log(" MatchingTestStudent: Cleaning up intercept history state");try{const Qe=window.history.state;if(console.log(" MatchingTestStudent: Current history state before cleanup:",Qe),Qe&&Qe.__intercept){const It=Qe.prevState??null;console.log(" MatchingTestStudent: Restoring previous state:",It),window.history.replaceState(It,document.title,window.location.href),console.log(" MatchingTestStudent: History state after cleanup:",window.history.state)}}catch(Qe){console.warn(" MatchingTestStudent: Failed to restore history state:",Qe)}}console.log(" MatchingTestStudent: Scheduling navigation in 100ms"),setTimeout(()=>{console.log(" MatchingTestStudent: Executing navigation to /student"),console.log(" MatchingTestStudent: Current location before navigation:",window.location.href),window.location.href="/student",console.log(" MatchingTestStudent: window.location.href set to /student")},100)},[r,e,I?.student_id,I?.id]),Ht=S.useCallback(()=>{const rt=G.current;G.current=null,rt?.cancel&&rt.cancel(),te(!1)},[]),Ve=S.useMemo(()=>{if(!e)return null;const rt=e.blocks.map(Tt=>{let Rt=Tt.coordinates;if(typeof Rt=="string")try{Rt=JSON.parse(Rt)}catch(cr){console.error(" Failed to parse coordinates:",cr),Rt={x:0,y:0,width:100,height:100}}return Rt={x:(typeof Rt.x=="number"?Rt.x:Number(Rt.x))||0,y:(typeof Rt.y=="number"?Rt.y:Number(Rt.y))||0,width:(typeof Rt.width=="number"?Rt.width:Number(Rt.width))||30,height:(typeof Rt.height=="number"?Rt.height:Number(Rt.height))||10},{id:Tt.id,word:Tt.word,coordinates:Rt,hasArrow:Tt.hasArrow,arrow:Tt.arrow}}),Qe=Array.isArray(e.arrows)?e.arrows:[],It=e.words.map(Tt=>({id:Tt.id,word:Tt.word,blockId:null,isPlaced:!1,isCorrect:!1}));return{blocks:rt,arrows:Qe,words:It}},[e]);S.useEffect(()=>{if(!e?.image_url)return;const rt=new Image;rt.crossOrigin="anonymous",rt.onload=()=>{console.log(" Image loaded successfully"),E(rt.width),F(rt.height);const Qe=se.current?.clientWidth||800,It=se.current?.clientHeight||600,Tt=Qe/rt.width,Rt=It/rt.height,cr=Math.min(Tt,Rt,1),hr=rt.width*cr,Cr=rt.height*cr,ur=(Qe-hr)/2,Sr=(It-Cr)/2;_({x:ur,y:Sr,width:hr,height:Cr,scaleX:cr,scaleY:cr,scale:cr,image:rt}),be.current=se.current?.clientWidth||800,console.log(" Image info calculated:",{x:ur,y:Sr,width:hr,height:Cr,scaleX:cr,scaleY:cr})},rt.onerror=()=>{console.error(" Failed to load image"),W("Failed to load test image","error")},rt.src=e.image_url},[e?.image_url,W]),S.useEffect(()=>{if(!Ve||!w)return;const rt=be.current||se.current?.clientWidth||800,Qe=12,It=38;let Tt=w.x,Rt=w.y+w.height+Qe;const cr=w.x+w.width,hr={};Ve.words.forEach(Sr=>{if(!Object.prototype.hasOwnProperty.call(h,Sr.id)){const we=typeof Sr.word=="string"?Sr.word:"",Me=Math.max(60,we.length*8+20);Tt+Me>Math.min(rt-Qe,cr)&&(Tt=w.x,Rt+=It),d[Sr.id]||(hr[Sr.id]={x:Tt,y:Rt}),Tt+=Me+Qe}}),Object.keys(hr).length&&f(Sr=>({...Sr,...hr}));const Cr=Object.values(hr).reduce((Sr,we)=>Math.max(Sr,we.y),Rt),ur=Math.max(w.y+w.height+Qe,Cr+It+Qe);je(Math.max(400,Math.ceil(ur)))},[Ve,w,h,d]);const at=S.useCallback(()=>{if(!w||!Ve)return[];const rt=u();return rt?Ve.blocks.map(Qe=>{const It=Qe.coordinates;let Tt,Rt,cr,hr;Tt=w.x+It.x*(w.scale??w.scaleX),Rt=w.y+It.y*(w.scale??w.scaleY),cr=It.width*(w.scale??w.scaleX),hr=It.height*(w.scale??w.scaleY);const Cr=h[Qe.id];return l.jsxs(rt.Group,{children:[l.jsx(rt.Rect,{x:Tt,y:Rt,width:cr,height:hr,fill:Cr?"rgba(40, 167, 69, 0.4)":j===Qe.id?"rgba(0, 123, 255, 0.25)":"rgba(0, 123, 255, 0.15)",stroke:Cr?"#28a745":j===Qe.id?"#0056b3":"#007bff",strokeWidth:2,cornerRadius:6,shadowColor:Cr?"rgba(40, 167, 69, 0.3)":"rgba(0, 123, 255, 0.3)",shadowBlur:10,shadowOffset:{x:0,y:2},shadowOpacity:.5}),Cr&&l.jsx(rt.KonvaText,{x:Tt+5,y:Rt+hr/2-10,width:cr-10,height:20,text:Ve.words.find(ur=>ur.id===Cr)?.word||"",fontSize:Math.min(12,cr/8),fontFamily:"Arial",fill:"#2c3e50",align:"center",verticalAlign:"middle",listening:!1})]},Qe.id)}):[]},[w,Ve,h,a]),gt=S.useCallback(()=>{if(!w||!Ve)return[];const rt=u();return rt?(console.log(" Processing arrows:",Ve.arrows),Ve.arrows.map(Qe=>{if(console.log(" Arrow data:",Qe),!Qe.start||!Qe.end)return console.warn(" Arrow missing start/end coordinates:",Qe),null;let It,Tt,Rt,cr;if(Qe.rel_start_x!==null&&Qe.rel_start_y!==null&&Qe.rel_end_x!==null&&Qe.rel_end_y!==null&&Qe.image_width&&Qe.image_height&&Qe.image_width>0&&Qe.image_height>0){const hr=Qe.image_width,Cr=Qe.image_height,ur=w.width/hr,Sr=w.height/Cr;It=w.x+Number(Qe.rel_start_x)/100*hr*ur,Tt=w.y+Number(Qe.rel_start_y)/100*Cr*Sr,Rt=w.x+Number(Qe.rel_end_x)/100*hr*ur,cr=w.y+Number(Qe.rel_end_y)/100*Cr*Sr}else{const hr=w.scale??w.scaleX??1,Cr=Number(Qe.start.x),ur=Number(Qe.start.y),Sr=Number(Qe.end.x),we=Number(Qe.end.y);Cr<=w.width+1&&Sr<=w.width+1&&ur<=w.height+1&&we<=w.height+1?(It=w.x+(isNaN(Cr)?0:Cr),Tt=w.y+(isNaN(ur)?0:ur),Rt=w.x+(isNaN(Sr)?0:Sr),cr=w.y+(isNaN(we)?0:we)):(It=w.x+(isNaN(Cr)?0:Cr)*hr,Tt=w.y+(isNaN(ur)?0:ur)*hr,Rt=w.x+(isNaN(Sr)?0:Sr)*hr,cr=w.y+(isNaN(we)?0:we)*hr)}return l.jsx(rt.Arrow,{points:[It,Tt,Rt,cr],stroke:Qe.style?.color||"#dc3545",fill:Qe.style?.color||"#dc3545",strokeWidth:Qe.style?.thickness||3,pointerLength:10,pointerWidth:10},Qe.id)}).filter(Boolean)):[]},[w,Ve,a]),Te=S.useCallback(()=>{if(!Ve)return[];const rt=u();return rt?Ve.words.map(Qe=>{const It=d[Qe.id]||{x:0,y:0},Tt=typeof Qe.word=="string"?Qe.word:"",Rt=Math.max(60,Tt.length*8+20);return Object.values(h).includes(Qe.id)?null:l.jsxs(rt.Group,{x:It.x,y:It.y,draggable:!0,onDragEnd:hr=>bt(hr,Qe.id),children:[l.jsx(rt.Rect,{width:Rt,height:34,fill:"#ffffff",stroke:"#ced4da",strokeWidth:1,cornerRadius:4,shadowColor:"rgba(0,0,0,0.1)",shadowBlur:5,shadowOffset:{x:0,y:2},shadowOpacity:.3,listening:!0}),l.jsx(rt.KonvaText,{text:Tt,fontSize:14,fontFamily:"Arial",fill:"#343a40",padding:8,align:"center",verticalAlign:"middle",width:Rt,height:34,listening:!1})]},Qe.id)}):[]},[Ve,d,h,w,a]),bt=S.useCallback((rt,Qe)=>{const It=rt.target.x(),Tt=rt.target.y();if(f(Me=>({...Me,[Qe]:{x:It,y:Tt}})),!w||!Ve)return;const Rt=Ve.words.find(Me=>Me.id===Qe);if(!Rt)return;const cr=typeof Rt.word=="string"?Rt.word:"",hr=Math.max(60,cr.length*8+20),Cr={x:It,y:Tt,width:hr,height:34},ur=w.scale??w.scaleX??1,Sr=(Me,Ie)=>!(Ie.x>Me.x+Me.width||Ie.x+Ie.width<Me.x||Ie.y>Me.y+Me.height||Ie.y+Ie.height<Me.y),we=Ve.blocks.find(Me=>{const Ie=Me.coordinates,Ce={x:w.x+Ie.x*ur,y:w.y+Ie.y*ur,width:Ie.width*ur,height:Ie.height*ur};return Sr(Cr,Ce)});if(we){g(Nt=>({...Nt,[we.id]:Qe}));const Me=we.coordinates,Ie=w.x+Me.x*ur,Ce=w.y+Me.y*ur,Ze=Me.width*ur,wt=Me.height*ur;f(Nt=>({...Nt,[Qe]:{x:Ie+(Ze-hr)/2,y:Ce+(wt-34)/2}})),W(`Word "${Rt.word}" placed in block`,"success")}},[w,Ve,W]),Ct=S.useCallback(()=>{if(!Ve)return 0;const rt=Ve.words.length,Qe=Object.keys(h).length;return rt>0?Qe/rt*100:0},[Ve,h]);S.useEffect(()=>{const rt=Ct();y(rt)},[Ct]),S.useEffect(()=>{if(e&&!D){const rt=new Date;B(rt),console.log(" Test timer started at:",rt.toISOString()),z(),console.log(" Anti-cheating tracking started")}},[e,D,z]);const Lt=S.useCallback(async()=>{if(Ve){C(!0);try{const rt=Ve.words.length;let Qe=0;console.log(" Scoring check - placedWords:",h),console.log(" Scoring check - blocks:",Ve.blocks.map(Oe=>({id:Oe.id,word:Oe.word}))),console.log(" Scoring check - words:",Ve.words.map(Oe=>({id:Oe.id,word:Oe.word}))),Ve.blocks.forEach(Oe=>{const Ke=h[Oe.id];if(console.log(` Block ${Oe.id} (expects "${Oe.word}") has placed word ID: ${Ke}`),Ke){const st=Ve.words.find(Vt=>Vt.id===Ke);console.log(" Placed word:",st),st&&st.word===Oe.word?(Qe++,console.log(` Correct! Block ${Oe.id} has correct word "${st.word}"`)):console.log(` Incorrect! Block ${Oe.id} expected "${Oe.word}" but got "${st?.word||"nothing"}"`)}else console.log(` Block ${Oe.id} has no word placed`)});const It=Qe,Tt=rt;console.log(` Final Score: ${It}/${Tt} (${Math.round(It/Tt*100)}%)`);const Rt=new Date,cr=D?Math.round((Rt-D)/1e3):0,hr=D?D.toISOString():Rt.toISOString();console.log(" Test timing:",{startedAt:hr,endTime:Rt.toISOString(),timeTaken:`${cr} seconds`});const Cr=ne();console.log(" Anti-cheating data for submission:",Cr);const ur=I.student_id,Sr=`retest_assignment_id_${ur}_matching_type_${e.id}`,we=localStorage.getItem(Sr),{academicCalendarService:Me}=await ai(async()=>{const{academicCalendarService:Oe}=await Promise.resolve().then(()=>g3);return{academicCalendarService:Oe}},void 0);await Me.loadAcademicCalendar();const Ce=Me.getCurrentTerm()?.id;if(!Ce)throw new Error("No current academic period found");const Ze={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:ur,academic_period_id:Ce,answers:h,score:It,maxScore:Tt,time_taken:cr,started_at:hr,submitted_at:Rt.toISOString(),caught_cheating:Cr.caught_cheating,visibility_change_times:Cr.visibility_change_times,retest_assignment_id:we?Number(we):null,parent_test_id:e.id};console.log(" Submitting test data:",Ze);const Nt=await(await M("/.netlify/functions/submit-matching-type-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ze)})).json();if(console.log(" Submission response:",Nt),Nt.success){if(W("Test submitted successfully!","success"),q(),X(),I?.student_id&&f1(I.student_id,"matching_type",e.id),!!we&&I?.student_id){let st=3;try{const gr=localStorage.getItem(`student_active_tests_${I.student_id}`);if(gr){const Nr=JSON.parse(gr)?.tests?.find(dn=>dn.test_id===e.id&&dn.test_type==="matching_type");Nr&&(st=Nr.retest_attempts_left||Nr.max_attempts||3)}}catch(gr){console.error("Error checking active tests cache:",gr)}const qt=(It>0&&Tt>0?It/Tt*100:0)>=50;if(qt){const gr=`retest_attempt${st}_${I.student_id}_matching_type_${e.id}`;localStorage.setItem(gr,"true"),console.log(" Passed retest, marking last-slot key:",gr);let Vr=0;for(let me=1;me<=10;me++){const Ne=`retest_attempt${me}_${I.student_id}_matching_type_${e.id}`;localStorage.getItem(Ne)==="true"&&Vr++}const Nr=`test_completed_${I.student_id}_matching_type_${e.id}`;localStorage.setItem(Nr,"true"),console.log(" Marked retest as completed (student passed):",Nr);const dn=`retest_attempts_${I.student_id}_matching_type_${e.id}`;localStorage.setItem(dn,JSON.stringify({used:Vr,max:st})),console.log(" Set retest attempts metadata (student passed):",dn,{used:Vr,max:st})}else{let gr=1;for(let Ne=1;Ne<=10;Ne++){const ve=`retest_attempt${Ne}_${I.student_id}_matching_type_${e.id}`;if(localStorage.getItem(ve)!=="true"){gr=Ne;break}}const Vr=`retest_attempt${gr}_${I.student_id}_matching_type_${e.id}`;localStorage.setItem(Vr,"true"),console.log(" Marked retest attempt as completed:",Vr);let Nr=0;for(let Ne=1;Ne<=10;Ne++){const ve=`retest_attempt${Ne}_${I.student_id}_matching_type_${e.id}`;localStorage.getItem(ve)==="true"&&Nr++}const dn=st-Nr,me=dn<=0||qt;if(console.log(" Retest completion check:",{usedAttempts:Nr,maxAttempts:st,attemptsLeft:dn,passed:qt,shouldComplete:me}),me){const Ne=`test_completed_${I.student_id}_matching_type_${e.id}`;localStorage.setItem(Ne,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",Ne);const ve=`retest_attempts_${I.student_id}_matching_type_${e.id}`;localStorage.setItem(ve,JSON.stringify({used:Nr,max:st})),console.log(" Set retest attempts metadata (attempts exhausted):",ve,{used:Nr,max:st})}}}else if(I?.student_id){const st=`test_completed_${I.student_id}_matching_type_${e.id}`;localStorage.setItem(st,"true"),console.log(" Test marked as completed in localStorage:",st)}if(I?.student_id){const{setCachedData:st,CACHE_TTL:Vt}=await ai(async()=>{const{setCachedData:gr,CACHE_TTL:Vr}=await Promise.resolve().then(()=>vp);return{setCachedData:gr,CACHE_TTL:Vr}},void 0),qt=`student_results_table_${I.student_id}`;st(qt,Nt,Vt.student_results_table),console.log(" Test results cached with key:",qt)}const Ke=`retest1_${ur}_matching_type_${e.id}`;localStorage.removeItem(Ke),localStorage.removeItem(Sr),t&&(U(!1),t(It))}else throw new Error(Nt.message||"Failed to submit test")}catch(rt){console.error(" Error submitting test:",rt),W(`Error submitting test: ${rt.message}`,"error")}finally{C(!1)}}},[Ve,h,e,I,D,M,W,t]);if(!e||!Ve)return l.jsx(pn,{});const{theme:Yt,isCyberpunk:it,themeClasses:xt}=Ra(),Mt=Da(Yt);return l.jsx("div",{className:`min-h-screen p-4 ${it?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:it?Mt.background:{},children:l.jsxs("div",{className:"max-w-6xl mx-auto",children:[l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(ht,{onClick:ft,variant:"outline",size:"sm",children:"Back to Cabinet"})}),l.jsxs("div",{className:`rounded-lg shadow-sm p-6 mb-6 border ${it?Gt(2).className:`${xt.cardBg} ${xt.cardBorder}`}`,style:it?{...Gt(2).style,...Mt.glow}:{},children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${it?"":xt.text}`,style:it?{...Mt.textCyan,fontFamily:"monospace"}:{},children:e.test_name})}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:`text-sm ${it?"":xt.textSecondary}`,style:it?{...Mt.textYellow,fontFamily:"monospace"}:{},children:"Progress"}),l.jsxs("div",{className:`text-2xl font-bold ${it?"":"text-blue-600"}`,style:it?{...Mt.textCyan,fontFamily:"monospace"}:{},children:[Math.round(p),"%"]})]})]}),l.jsx("div",{className:`mt-4 w-full ${xt.progressBg} rounded-full h-2 border ${it?"border-cyan-400/50":xt.border}`,children:l.jsx("div",{className:`${xt.progressFill} h-2 rounded-full transition-all duration-300`,style:it?{width:`${p}%`,boxShadow:"0 0 10px rgba(255, 215, 0, 0.5), 0 0 20px rgba(0, 255, 255, 0.3)"}:{width:`${p}%`}})})]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:l.jsx("div",{className:"lg:col-span-3",children:l.jsxs(Kt,{className:`p-4 ${it?Gt(3).className:""}`,style:it?{...Gt(3).style,...Mt.glow}:{},children:[l.jsx("div",{className:"mb-4 text-center",children:l.jsx(ht,{onClick:Re,variant:"secondary",children:"Reset"})}),l.jsx("div",{ref:se,className:"w-full bg-gray-100 rounded-lg overflow-hidden",style:{height:`${oe}px`},children:w&&a?(()=>{const{Stage:rt,Layer:Qe,KonvaImage:It}=u();return l.jsxs(rt,{ref:ce,width:se.current?.clientWidth||800,height:oe,children:[l.jsxs(Qe,{children:[l.jsx(It,{ref:pe,image:w.image,x:w.x,y:w.y,width:w.width,height:w.height,listening:!1}),at(),gt()]}),l.jsx(Qe,{listening:!0,children:Te()})]})})():w?l.jsxs("div",{className:"flex items-center justify-center h-full",children:[l.jsx(pn,{size:"lg"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading Konva canvas..."})]}):null}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx(ht,{onClick:()=>L(!0),disabled:v||p<100,className:"",style:it?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",borderWidth:"2px",...Mt.glow}:{},children:it?v?"SUBMITTING...":"SUBMIT TEST":v?"Submitting...":"Submit Test"})})]})})}),l.jsx(Fa,{isOpen:V,onClose:()=>Y(!1),title:"Reset Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and placed words."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:()=>Y(!1),variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:Xe,variant:"primary",children:"Reset"})]})]})}),l.jsx(Fa,{isOpen:re,onClose:Ht,title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet? Your progress will be saved but you will exit the test."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:Ht,variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:rt=>{console.log(" MatchingTestStudent: Go Back button clicked in modal"),console.log(" MatchingTestStudent: Button click event:",rt),Je()},variant:"primary",children:"Go Back"})]})]})}),l.jsx(Fa,{isOpen:ee,onClose:()=>L(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:()=>L(!1),variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:()=>{L(!1),Lt()},variant:"primary",className:"",style:it?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",borderWidth:"2px",...Mt.glow}:{},children:it?"SUBMIT":"Submit"})]})]})})]})})},sle=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Fs(),{makeAuthenticatedRequest:o}=ql(),{showNotification:c}=di(),[u,d]=S.useState([{leftWord:"",rightWord:""},{leftWord:"",rightWord:""},{leftWord:"",rightWord:""}]),[f,h]=S.useState("drag"),[g,p]=S.useState(!1),[y,v]=S.useState(null),C=S.useCallback(()=>{d(F=>[...F,{leftWord:"",rightWord:""}])},[]),w=S.useCallback(F=>{u.length>1&&d(j=>j.filter((P,D)=>D!==F))},[u.length]),_=S.useCallback((F,j)=>{d(P=>P.map((D,B)=>B===F?{...D,leftWord:j}:D))},[]),T=S.useCallback((F,j)=>{d(P=>P.map((D,B)=>B===F?{...D,rightWord:j}:D))},[]),E=S.useCallback(()=>u.every(F=>F.leftWord.trim()&&F.rightWord.trim()),[u]),A=S.useCallback(async()=>{if(!E()){c("Please fill in all word pairs","error");return}p(!0),v(null);try{const F=u.map((P,D)=>({question_id:D+1,left_word:P.leftWord.trim(),right_word:P.rightWord.trim()})),j={test_name:e,num_questions:F.length,interaction_type:f,questions:F};console.log(" Saving word matching test:",j),t({testName:e,numQuestions:F.length,interactionType:f,wordPairs:u,questions:F})}catch(F){console.error("Error saving word matching test:",F),v(F.message),c("Failed to save test: "+F.message,"error")}finally{p(!1)}},[e,u,f,E,o,c,t]);return l.jsxs(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"max-w-6xl mx-auto p-0",children:[l.jsx(Kt,{className:"mb-6",children:l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Choose Interaction Type"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="drag"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("drag"),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:f==="drag",onChange:()=>h("drag"),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Drag & Drop"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Students drag words from left list to right list"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" Easier for younger students",l.jsx("br",{})," Visual feedback on placement",l.jsx("br",{})," Mobile-friendly"]})]}),l.jsxs("div",{className:` p-4 border-2 rounded-lg cursor-pointer transition-all ${f==="arrow"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>h("arrow"),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:f==="arrow",onChange:()=>h("arrow"),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Draw Arrows"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Students draw arrows connecting matching words"}),l.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[" More challenging",l.jsx("br",{})," Better for visual learners",l.jsx("br",{})," Requires precision"]})]})]})]})}),l.jsx(Kt,{className:"mb-6",children:l.jsxs("div",{className:"word-pairs-section",children:[l.jsxs("div",{className:"pairs-header flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Word Pairs"}),l.jsx(ht,{onClick:C,size:"sm",children:"+ Add Pair"})]}),l.jsx("div",{className:"pairs-list space-y-3 p-0 md:p-4",children:u.map((F,j)=>l.jsxs("div",{className:"word-pair-row flex items-center space-x-2 md:space-x-4 p-2 md:p-4 bg-gray-50 rounded-lg border",children:[l.jsx("div",{className:"pair-number flex-shrink-0",children:l.jsx("span",{className:"number-badge w-6 h-6 md:w-8 md:h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs md:text-sm font-semibold",children:j+1})}),l.jsx("div",{className:"left-word flex-1",children:l.jsx("input",{type:"text",value:F.leftWord,onChange:P=>_(j,P.target.value),placeholder:"Left word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),l.jsx("div",{className:"pair-arrow flex-shrink-0 text-gray-500 text-lg md:text-xl",children:""}),l.jsx("div",{className:"right-word flex-1",children:l.jsx("input",{type:"text",value:F.rightWord,onChange:P=>T(j,P.target.value),placeholder:"Right word...",className:"word-input w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),l.jsx("div",{className:"pair-actions flex-shrink-0",children:l.jsx(ht,{onClick:()=>w(j),variant:"outline",size:"sm",className:"remove-btn w-6 h-6 md:w-8 md:h-8 p-0 text-red-500 hover:bg-red-50",disabled:u.length<=1,children:""})})]},j))})]})}),l.jsx(Kt,{className:"mb-6",children:l.jsxs("div",{className:"preview-section",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Preview"}),l.jsx("div",{className:"preview-pairs space-y-2",children:u.map((F,j)=>l.jsxs("div",{className:"preview-pair flex items-center space-x-2 text-sm",children:[l.jsxs("span",{className:"preview-number font-semibold text-blue-600",children:[j+1,"."]}),l.jsx("span",{className:"preview-left px-2 py-1 bg-white rounded border",children:F.leftWord||"Left word"}),l.jsx("span",{className:"preview-arrow text-gray-500",children:""}),l.jsx("span",{className:"preview-right px-2 py-1 bg-white rounded border",children:F.rightWord||"Right word"})]},j))})]})}),l.jsxs("div",{className:"flex justify-center space-x-4",children:[l.jsx(ht,{onClick:A,disabled:!E()||g,className:"px-8",children:g?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test"}),l.jsx(ht,{onClick:r,variant:"secondary",children:"Cancel"})]}),y&&l.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-600",children:y})})]})},pz=({answeredCount:e=0,totalQuestions:t=0,timeElapsed:r=0,onSubmitTest:n,isSubmitting:s=!1,canSubmit:a=!1,className:i="",themeClasses:o,isCyberpunk:c})=>{const{theme:u,isKpop:d}=Ra(),f=Da(u),h=c!==void 0?c:u==="cyberpunk",g=d!==void 0?d:u==="kpop",p=t>0?Math.round(e/t*100):0,y=t-e,v=_=>{const T=Math.floor(_/3600),E=Math.floor(_%3600/60),A=_%60;return T>0?`${T}:${E.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`:`${E}:${A.toString().padStart(2,"0")}`},C=_=>_>=100?"bg-green-500":_>=80?"bg-blue-500":_>=60?"bg-yellow-500":_>=40?"bg-orange-500":"bg-red-500",w=_=>_>=100?"text-green-600":_>=80?"text-blue-600":_>=60?"text-yellow-600":_>=40?"text-orange-600":"text-red-600";return l.jsxs("div",{className:`rounded-lg shadow-lg p-6 border-2 ${h?Gt(1).className:g?dr(1).className:"bg-white"} ${i}`,style:h?{...Gt(1).style,...f.glow}:g?{...dr(1).style,...f.glow}:{},children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h3",{className:`text-lg font-semibold ${h||g?"":"text-gray-900"}`,style:h?{...f.textCyan,fontFamily:"monospace"}:g?{...f.headerText}:{},children:h?"TEST PROGRESS":"Test Progress"}),l.jsx("div",{className:"flex items-center space-x-4",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{className:`text-sm font-mono ${h||g?"":"text-gray-600"}`,style:h?{...f.textYellow,fontFamily:"monospace"}:g?{...f.textAccent}:{},children:v(r)})]})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:`text-sm font-medium ${h||g?"":"text-gray-700"}`,style:h?{color:fe.yellow,fontFamily:"monospace"}:g?{...f.textAccent}:{},children:"Progress"}),l.jsxs("span",{className:`text-sm font-semibold ${h||g?"":w(p)}`,style:h?{...f.textCyan,fontFamily:"monospace"}:g?{...f.textPink}:{},children:[p,"%"]})]}),l.jsx("div",{className:`w-full rounded-full h-3 overflow-hidden border ${h?"bg-gray-800 border-cyan-400/50":g?"bg-black border-pink-500/50":"bg-gray-200"}`,style:h?f.glow:g?{...f.glow}:{},children:l.jsx(vt.div,{className:`h-full transition-colors duration-300 ${h?"":C(p)}`,style:h?{background:`linear-gradient(to right, ${fe.yellow}, ${fe.cyan})`,boxShadow:`0 0 10px ${fe.cyan}`}:{},initial:{width:0},animate:{width:`${p}%`},transition:{duration:.5,ease:"easeOut"}})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 mb-4",children:[l.jsxs("div",{className:`text-center p-2 sm:p-3 rounded-lg border ${h?Gt(3).className:g?dr(0).className:"bg-blue-50"}`,style:h?{...Gt(3).style,...f.glow}:g?{...dr(0).style,...f.glow}:{},children:[l.jsx("div",{className:`text-lg sm:text-2xl font-bold ${h||g?"":"text-blue-600"}`,style:h?{...f.textCyan,fontFamily:"monospace"}:g?{...f.textPink}:{},children:e}),l.jsx("div",{className:`text-xs ${h||g?"":"text-blue-600"}`,style:h?{color:fe.yellow,fontFamily:"monospace"}:g?{...f.textAccent}:{},children:"Answered"})]}),l.jsxs("div",{className:`text-center p-2 sm:p-3 rounded-lg border ${h?Gt(1).className:g?dr(1).className:"bg-gray-50"}`,style:h?{...Gt(1).style,...f.glow}:g?{...dr(1).style,...f.glowPurple}:{},children:[l.jsx("div",{className:`text-lg sm:text-2xl font-bold ${h||g?"":"text-gray-600"}`,style:h?{...f.textYellow,fontFamily:"monospace"}:g?{...f.textWhite}:{},children:y}),l.jsx("div",{className:`text-xs ${h||g?"":"text-gray-600"}`,style:h?{color:fe.yellow,fontFamily:"monospace"}:g?{...f.textAccent}:{},children:"Remaining"})]}),l.jsxs("div",{className:`text-center p-2 sm:p-3 rounded-lg border ${h?Gt(2).className:g?dr(2).className:"bg-purple-50"}`,style:h?{...Gt(2).style,...f.glow}:g?{...dr(2).style,...f.glowPurple}:{},children:[l.jsx("div",{className:`text-lg sm:text-2xl font-bold ${h||g?"":"text-purple-600"}`,style:h?{...f.textPurple,fontFamily:"monospace"}:g?{...f.textPurple}:{},children:t}),l.jsx("div",{className:`text-xs ${h||g?"":"text-purple-600"}`,style:h?{color:fe.yellow,fontFamily:"monospace"}:g?{...f.textAccent}:{},children:"Total"})]})]}),l.jsx("div",{className:"mb-4",children:e===t?l.jsx(vt.div,{className:`flex items-center justify-center p-3 border rounded-lg ${h?"border":"bg-green-50 border-green-200"}`,style:h?{backgroundColor:fe.black,borderColor:fe.green,...f.glow}:{},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:l.jsx("span",{className:`font-medium ${h||g?"":"text-green-600"}`,style:h?{...f.textGreen,fontFamily:"monospace"}:g?{color:ze.success,textShadow:`0 0 10px ${ze.success}`}:{},children:" All questions answered! Ready to submit."})}):y===1?l.jsx(vt.div,{className:`flex items-center justify-center p-3 border rounded-lg ${h?"border":"bg-yellow-50 border-yellow-200"}`,style:h?{backgroundColor:fe.black,borderColor:fe.yellow,...f.glow}:{},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},children:l.jsx("span",{className:`font-medium ${h||g?"":"text-yellow-600"}`,style:h?{...f.textYellow,fontFamily:"monospace"}:g?{...f.textPink}:{},children:"Almost there! 1 question remaining."})}):l.jsx("div",{className:`flex items-center justify-center p-3 border rounded-lg ${h?"border":g?"bg-pink-500/10 border-pink-500/50":"bg-gray-50 border-gray-200"}`,style:h?{backgroundColor:fe.black,borderColor:fe.cyan}:g?{backgroundColor:ze.backgroundSecondary,borderColor:ze.border}:{},children:l.jsxs("span",{className:`font-medium ${h||g?"":"text-gray-600"}`,style:h?{color:fe.cyan,fontFamily:"monospace"}:g?{...f.textAccent}:{},children:[y," questions remaining"]})})}),a&&l.jsx("div",{className:"flex justify-center",children:l.jsx(vt.button,{onClick:n,disabled:s,className:`px-8 py-3 rounded-lg font-semibold transition-all duration-300 border-2 ${c?"border":s?"bg-gray-400 cursor-not-allowed text-white":"bg-green-600 hover:bg-green-700 shadow-lg hover:shadow-xl text-white"}`,style:c?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...s?{}:f.glow}:{},whileHover:s?{}:{scale:1.05},whileTap:s?{}:{scale:.95},children:s?l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:`animate-spin rounded-full h-4 w-4 border-b-2 ${c?"":"border-white"}`,style:c?{borderColor:fe.cyan}:{}}),l.jsx("span",{children:c?"SUBMITTING...":"Submitting..."})]}):l.jsxs("div",{className:"flex items-center space-x-2",children:[!c&&l.jsx("span",{children:""}),l.jsx("span",{children:c?"SUBMIT TEST":"Submit Test"})]})})})]})},ale=(e,t)=>{const[r,n,s]=tU(`test_progress_${e}_${t}`,{}),[a,i]=S.useState(!1),[o,c]=S.useState(0),[u,d]=S.useState(0),[f,h]=S.useState(!1),[g,p]=S.useState(null),y=S.useRef(null),v=S.useRef(null),C=S.useCallback((U,G)=>{if(!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}n(W=>({...W,[U]:G})),console.log(`Saved progress for question ${U}:`,G)},[n]),w=S.useCallback(U=>!window.tokenManager||!window.tokenManager.isAuthenticated()?(console.warn("[WARN] Cannot get progress: No valid JWT token"),null):r[U]||null,[r]),_=S.useCallback(()=>{if(console.log(`[DEBUG] clearTestProgress called with testType: ${e}, testId: ${t}`),!window.tokenManager||!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const U=`test_progress_${e}_${t}`;console.log(`[DEBUG] Removing localStorage key: ${U}`);const G=Object.keys(r).length>0;s(),console.log(G?`[DEBUG] Progress cleared for test ${e}_${t}`:`[DEBUG] No progress found to clear for test ${e}_${t}`)},[s,e,t,r]),T=S.useCallback(()=>{y.current&&(T(y.current),y.current=null),v.current&&(T(v.current),v.current=null)},[]),E=S.useCallback(()=>{console.log(`[DEBUG] setupProgressTrackingForPage called with testType: ${e}, testId: ${t}`),v.current=setInterval(()=>{console.log("[DEBUG] Auto-saving progress..."),D()},3e4),console.log("[DEBUG] Progress tracking interval set up (30 seconds)")},[e,t]),A=S.useCallback(()=>{console.log(`[DEBUG] updateProgressDisplayForPage called with testType: ${e}, testId: ${t}`);const U=P(),G=u>0?Math.round(U/u*100):0;return console.log(`[DEBUG] Progress: ${U}/${u} questions answered`),console.log(`[DEBUG] Progress bar updated: ${G}%`),{answeredQuestions:U,totalQuestions:u,percentage:G}},[e,t,u]),F=S.useCallback(()=>{console.log("[DEBUG] updateSubmitButtonStateForPage called");const U=P();console.log(`[DEBUG] Submit button state check: ${U}/${u} questions answered`);const G=U===u&&u>0;return console.log(G?"[DEBUG] Submit button enabled - all questions answered":"[DEBUG] Submit button disabled - not all questions answered"),G},[u]),j=S.useCallback(()=>{console.log(`[DEBUG] loadSavedProgressForPage called with testType: ${e}, testId: ${t}`);try{if(console.log("[DEBUG] Loaded progress from localStorage:",r),Object.keys(r).length===0){console.log("[DEBUG] No saved progress found");return}const U=Object.keys(r).length;c(U),console.log(`[DEBUG] Restored ${U} answered questions`)}catch(U){console.error("[ERROR] Failed to load saved progress:",U),p(U.message)}},[e,t,r]),P=S.useCallback(()=>{console.log(`[DEBUG] getAnsweredQuestionsCountForPage called with testType: ${e}`);const U=Object.keys(r).length;return c(U),console.log(`[DEBUG] Found ${U} answered questions`),U},[e,r]),D=S.useCallback(()=>{console.log(`[DEBUG] saveProgressForPage called with testType: ${e}, testId: ${t}`);try{console.log("[DEBUG] Progress saved:",r)}catch(U){console.error("[ERROR] Failed to save progress:",U),p(U.message)}},[e,t,r]),B=S.useCallback(()=>{try{const U=`test_completed_${e}_${t}`,G=localStorage.getItem(U)==="true";return i(G),G}catch(U){return console.error("Error checking test completion:",U),!1}},[e,t]),V=S.useCallback(()=>{try{const U=`test_completed_${e}_${t}`;localStorage.setItem(U,"true"),i(!0),console.log(`Test ${e}_${t} marked as completed`)}catch(U){console.error("Error marking test completed:",U)}},[e,t]),Y=S.useCallback(()=>{console.log("Marking test completed in UI:",{testType:e,testId:t}),V()},[e,t,V]),re=S.useCallback(U=>{try{const G=`test_creation_state_${e}_${t}`;localStorage.setItem(G,JSON.stringify(U)),console.log("Test creation state saved:",U)}catch(G){console.error("Error saving test creation state:",G)}},[e,t]),te=S.useCallback(()=>{try{const U=`test_creation_state_${e}_${t}`;localStorage.removeItem(U),console.log("Test creation state cleared")}catch(U){console.error("Error clearing test creation state:",U)}},[e,t]),ee=S.useCallback((U,G)=>{try{const W=`test_step_${e}_${t}_${U}`;localStorage.setItem(W,JSON.stringify(G)),console.log(`Step ${U} data saved:`,G)}catch(W){console.error(`Error saving step ${U} data:`,W)}},[e,t]),L=S.useCallback(U=>{try{const G=`test_step_${e}_${t}_${U}`,W=localStorage.getItem(G);return W?JSON.parse(W):null}catch(G){return console.error(`Error restoring step ${U} data:`,G),null}},[e,t]),Q=S.useCallback(()=>{try{const U=`test_creation_state_${e}_${t}`,G=localStorage.getItem(U);return G?JSON.parse(G):null}catch(U){return console.error("Error restoring test creation state:",U),null}},[e,t]);return S.useEffect(()=>()=>{T()},[e,t,E,j,T]),S.useEffect(()=>{P()},[r,P]),{progress:r,isCompleted:a,answeredCount:o,totalQuestions:u,isLoading:f,error:g,saveProgress:C,getProgress:w,clearProgress:_,clearInterval:T,setupProgressTracking:E,updateProgress:A,updateSubmitButton:F,loadProgress:j,getAnsweredCount:P,saveProgressForPage:D,checkCompleted:B,markCompleted:V,markCompletedUI:Y,saveState:re,clearState:te,saveStepData:ee,restoreStepData:L,restoreState:Q,setTotalQuestions:d,setError:p}},ile=({testData:e,onTestComplete:t,onBackToCabinet:r})=>{const{user:n}=Fs(),{makeAuthenticatedRequest:s}=ql(),{showNotification:a}=di(),{theme:i,isCyberpunk:o,isLight:c,isKpop:u,themeClasses:d}=Ra(),f=Da(i),[h,g]=S.useState({width:window.innerWidth,height:window.innerHeight});S.useEffect(()=>{const Ce=()=>{g({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",Ce),()=>window.removeEventListener("resize",Ce)},[]);const{startTracking:p,stopTracking:y,getCheatingData:v,clearData:C}=y1("word_matching",e?.id,n?.student_id||n?.id),[w,_]=S.useState(null),[T,E]=S.useState({}),[A,F]=S.useState(null),[j,P]=S.useState(0),D=S.useRef(null),B=S.useRef(null),V=S.useRef(!1),Y=S.useRef(null),[re,te]=S.useState(800),ee={VERY_SMALL:400,MOBILE:600,TABLET:900},L={VERY_SMALL:.6,MOBILE:.8,TABLET:.9,DESKTOP:1},Q={CANVAS_HEIGHT:400,BLOCK_WIDTH:140,BLOCK_HEIGHT:50,BLOCK_SPACING:80,MARGIN:50},U=h.width<ee.VERY_SMALL,G=h.width>=ee.VERY_SMALL&&h.width<ee.MOBILE,W=h.width>=ee.MOBILE&&h.width<ee.TABLET;h.width>=ee.TABLET;const M=U?L.VERY_SMALL:G?L.MOBILE:W?L.TABLET:L.DESKTOP;S.useEffect(()=>{const Ce=()=>{if(Y.current){const wt=Y.current.clientWidth;console.log(" Container width detected:",wt),wt>0&&te(wt)}};Ce();const Ze=[setTimeout(Ce,50),setTimeout(Ce,100),setTimeout(Ce,200),setTimeout(Ce,500)];return window.addEventListener("resize",Ce),()=>{Ze.forEach(wt=>clearTimeout(wt)),window.removeEventListener("resize",Ce)}},[w]);const I=Q.BLOCK_WIDTH*M,z=Q.BLOCK_HEIGHT*M,q=Q.BLOCK_SPACING*M,ne=Q.MARGIN*M,X=ne;console.log(" Mobile Debug:",{screenWidth:h.width,containerWidth:Y.current?.clientWidth,canvasWidth:re,scale:M,blockWidth:I,margin:ne,leftBlockX:X,displayDataLoaded:!!w});const se=X+I+20+I+ne,ce=se<=re;let pe,be=I,oe=z;if(ce)pe=Math.min(Math.max(X+I+20,re-I-ne),re-I-ne);else{const Ce=re-ne*2,Ze=Math.floor((Ce-20)/2);be=Math.max(60,Ze),oe=Math.max(30,oe*(be/I)),pe=X+be+20,console.log(" Very small screen - adjusted block size:",{availableWidth:Ce,maxBlockWidth:Ze,actualBlockWidth:be,actualBlockHeight:oe})}console.log(" Right Block Position:",{rightBlockX:pe,rightBlockRightEdge:pe+be,canvasWidth:re,fits:pe+be<=re,canFitSideBySide:ce,minRequiredWidth:se});const je=ne,Re={DRAGGED_WORD:Math.max(8,14*M),ORIGINAL_WORD:Math.max(10,16*M),LEFT_WORD:Math.max(10,14*M)},Xe=Math.max(1,3*M),ft=S.useCallback((Ce,Ze,wt)=>{if(!Ce)return oe;const Nt=Ze*.55,Oe=Math.floor(wt/Nt),Ke=Math.ceil(Ce.length/Oe),st=Ze*1.1,Vt=12*M,qt=Ke*st+Vt,gr=Math.max(oe*.8,30*M);return Math.max(gr,qt)},[oe,M]),Ht=S.useCallback(()=>{if(!w?.leftWords||!w?.rightWords)return Q.CANVAS_HEIGHT*M;let Ce=ne*2;for(let wt=0;wt<w.leftWords.length;wt++){const Nt=w.leftWords[wt],Oe=w.rightWords[wt],Ke=ft(Nt,Re.LEFT_WORD,be),st=ft(Oe,Re.ORIGINAL_WORD,be),Vt=Math.max(Ke,st);Ce+=Vt,wt<w.leftWords.length-1&&(Ce+=20*M)}const Ze=Q.CANVAS_HEIGHT*M;return Math.max(Ze,Ce)},[w,ft,Re,be,ne,M])();S.useCallback((Ce,Ze)=>{if(!Ce||!Ze)return q;const wt=Ce.map((Ke,st)=>{const Vt=Ze[st],qt=ft(Ke,Re.LEFT_WORD,be),gr=ft(Vt,Re.ORIGINAL_WORD,be);return Math.max(qt,gr)}),Nt=Math.max(...wt),Oe=20*M;return Nt+Oe},[q,ft,Re,be,M]);const at=S.useCallback(()=>{if(!w?.leftWords||!w?.rightWords)return[];const Ce=[];let Ze=ne;for(let wt=0;wt<w.leftWords.length;wt++){const Nt=w.leftWords[wt],Oe=w.rightWords[wt],Ke=ft(Nt,Re.LEFT_WORD,be),st=ft(Oe,Re.ORIGINAL_WORD,be),Vt=Math.max(Ke,st);Ce.push({y:Ze,leftHeight:Ke,rightHeight:st,rowHeight:Vt}),Ze+=Vt+20*M}return Ce},[w,ft,Re,be,ne,M])(),[gt,Te]=S.useState([]),[bt,Ct]=S.useState(!1),[Lt,Yt]=S.useState(!1),[it,xt]=S.useState(null),[Mt,rt]=S.useState(!1),[Qe,It]=S.useState(!1),[Tt,Rt]=S.useState(!0),cr=S.useRef(null);h2(Tt,S.useCallback(({confirm:Ce,cancel:Ze})=>{console.log(" WordMatchingStudent: Browser back button intercepted during test!"),console.log(" WordMatchingStudent: isBackInterceptEnabled:",Tt),console.log(" WordMatchingStudent: Setting pending navigation and showing modal"),cr.current={confirm:Ce,cancel:Ze},It(!0)},[Tt])),S.useEffect(()=>{if(e){if(console.log(" WordMatchingStudent: Initializing test data:",e),console.log(" Interaction type:",e.interaction_type),console.log(" Left words:",e.leftWords),console.log(" Right words:",e.rightWords),console.log(" Correct pairs:",e.correctPairs),!Array.isArray(e.leftWords)||!Array.isArray(e.rightWords)){console.error(" Invalid data structure - leftWords or rightWords not arrays:",{leftWords:e.leftWords,rightWords:e.rightWords});return}if(_(e),n?.student_id){const wt=`test_progress_${n.student_id}_word_matching_${e.id}`,Nt=js(wt);Nt?(E(Nt.answers||{}),Te(Nt.arrows||[]),xt(new Date(Nt.startTime)),console.log(" Test progress restored:",Nt)):xt(new Date)}else xt(new Date);e?.id&&(n?.student_id||n?.id)&&p();const Ce=Number(e?.allowed_time||0),Ze=n?.student_id||n?.id||"unknown";if(D.current=`test_timer_${Ze}_word_matching_${e.id}`,V.current=!1,Ce>0)try{const wt=localStorage.getItem(D.current),Nt=Date.now();if(wt){const Oe=JSON.parse(wt),Ke=Math.floor((Nt-new Date(Oe.lastTickAt).getTime())/1e3),st=Math.max(0,Number(Oe.remainingSeconds||Ce)-Math.max(0,Ke));P(st),B.current=Nt,console.log(" Timer initialized from cache:",{remaining:st,allowedSeconds:Ce})}else P(Ce),B.current=Nt,localStorage.setItem(D.current,JSON.stringify({remainingSeconds:Ce,lastTickAt:new Date(Nt).toISOString(),startedAt:new Date(Nt).toISOString()})),console.log(" Timer initialized fresh:",{allowedSeconds:Ce});V.current=!0}catch(wt){console.error("Timer cache init error:",wt),P(Ce),V.current=!0}else P(0),V.current=!0}},[e,n?.student_id,n?.id,p]),S.useEffect(()=>{if(w&&it&&n?.student_id){const Ce=setInterval(()=>{const Ze={answers:T,arrows:gt,startTime:it.toISOString()},wt=`test_progress_${n.student_id}_word_matching_${e.id}`;ys(wt,Ze,ds.test_progress),console.log(" Progress auto-saved")},3e4);return()=>clearInterval(Ce)}},[w,T,gt,it,n?.student_id,e?.id]);const hr=S.useCallback((Ce,Ze)=>{if(console.log(" handleWordClick called:",{side:Ce,index:Ze,interactionType:e?.interaction_type,selectedWord:A}),Ce==="right")if(e?.interaction_type==="arrow"){const wt=gt.findIndex(Nt=>Nt.endWord.side==="right"&&Nt.endWord.index===Ze);if(wt!==-1){const Nt=gt[wt].startWord.index;Te(Oe=>Oe.filter((Ke,st)=>st!==wt)),E(Oe=>{const Ke={...Oe};return delete Ke[Nt],Ke}),A?.side==="right"&&A?.index===Ze&&F(null);return}}else{const wt=Object.keys(T).find(Nt=>T[Nt]===Ze);if(wt!==void 0){E(Nt=>{const Oe={...Nt};return delete Oe[wt],Oe});return}}if(e?.interaction_type!=="arrow"){console.log(" Not arrow mode, ignoring click");return}if(A){if(A.side===Ce&&A.index===Ze)console.log(" Deselecting word"),F(null);else if(A.side!==Ce){console.log(" Creating arrow connection:",{startWord:A,endWord:{side:Ce,index:Ze}});const wt={id:Date.now().toString(),startWord:A,endWord:{side:Ce,index:Ze},color:"#3B82F6"};Te(Nt=>{const Oe=[...Nt,wt];return console.log(" Updated arrows:",Oe),Oe}),E(Nt=>{const Oe={...Nt,[A.index]:Ze};return console.log(" Updated answers:",Oe),Oe}),F(null)}}else console.log(" Selecting word:",{side:Ce,index:Ze}),F({side:Ce,index:Ze})},[A,e?.interaction_type,gt,T]);S.useCallback((Ce,Ze)=>{e.interaction_type==="drag"&&E(wt=>({...wt,[Ce]:Ze}))},[e?.interaction_type]);const Cr=S.useCallback(()=>{rt(!0)},[]),ur=S.useCallback(()=>{E({}),Te([]),F(null),rt(!1)},[]),Sr=S.useCallback(()=>{cr.current=null,It(!0)},[]),we=S.useCallback(()=>{console.log(" WordMatchingStudent: confirmBackToCabinet called"),console.log(" WordMatchingStudent: Current location:",window.location.href),console.log(" WordMatchingStudent: Current history state:",window.history.state),It(!1);const Ce=cr.current;if(console.log(" WordMatchingStudent: Pending navigation:",Ce),cr.current=null,e?.id&&n?.student_id){const wt=`anti_cheating_${n?.student_id||n?.id||"unknown"}_word_matching_${e.id}`,Oe=(js(wt)||{tabSwitches:0}).tabSwitches||0,Ke=Oe+1,st=Ke>=2;console.log(" WordMatchingStudent: Tab switch count:",Oe,"->",Ke),ys(wt,{tabSwitches:Ke,isCheating:st},ds.anti_cheating)}if(console.log(" WordMatchingStudent: Disabling intercept"),Rt(!1),Ce){console.log(" WordMatchingStudent: Cleaning up intercept history state");try{const Ze=window.history.state;if(console.log(" WordMatchingStudent: Current history state before cleanup:",Ze),Ze&&Ze.__intercept){const wt=Ze.prevState??null;console.log(" WordMatchingStudent: Restoring previous state:",wt),window.history.replaceState(wt,document.title,window.location.href),console.log(" WordMatchingStudent: History state after cleanup:",window.history.state)}}catch(Ze){console.warn(" WordMatchingStudent: Failed to restore history state:",Ze)}}console.log(" WordMatchingStudent: Scheduling navigation in 100ms"),setTimeout(()=>{console.log(" WordMatchingStudent: Executing navigation to /student"),console.log(" WordMatchingStudent: Current location before navigation:",window.location.href),window.location.href="/student",console.log(" WordMatchingStudent: window.location.href set to /student")},100)},[r,e,n?.student_id,n?.id]),Me=S.useCallback(()=>{const Ce=cr.current;cr.current=null,Ce?.cancel&&Ce.cancel(),It(!1)},[]),Ie=S.useCallback(async()=>{if(w){Ct(!0);try{const Ce=w?.leftWords?.length||0;let Ze=0,wt={};e.interaction_type==="drag"?Object.entries(T).forEach(([he,Pe])=>{const tt=w?.correctPairs?.[he];Pe===tt&&Ze++,wt[he]=Pe}):gt.forEach(he=>{const Pe=he.startWord.side==="left"?he.startWord.index:he.endWord.index,tt=he.startWord.side==="right"?he.startWord.index:he.endWord.index;w?.correctPairs?.[Pe]===tt&&Ze++,wt[Pe]=tt});const Nt=Ze,Oe=Ce;console.log(` Final Score: ${Nt}/${Oe} (${Math.round(Nt/Oe*100)}%)`);const Ke=new Date,st=it?Math.round((Ke-it)/1e3):0,Vt=it?it.toISOString():Ke.toISOString(),qt=v(),gr=n.student_id,Vr=`retest_assignment_id_${gr}_word_matching_${e.id}`,Nr=localStorage.getItem(Vr),{academicCalendarService:dn}=await ai(async()=>{const{academicCalendarService:he}=await Promise.resolve().then(()=>g3);return{academicCalendarService:he}},void 0);await dn.loadAcademicCalendar();const Ne=dn.getCurrentTerm()?.id;if(!Ne)throw new Error("No current academic period found");const ve={test_id:e.id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:gr,academic_period_id:Ne,parent_test_id:e.id,retest_assignment_id:Nr?Number(Nr):null,interaction_type:e.interaction_type,answers:wt,score:Nt,maxScore:Oe,time_taken:st,started_at:Vt,submitted_at:Ke.toISOString(),caught_cheating:qt.caught_cheating,visibility_change_times:qt.visibility_change_times};console.log(" Submission data being sent:",ve),console.log(" TestData structure:",e),console.log(" Submitting test results...");const Ee=await s("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ve)});console.log(" Submission response received:",Ee.status);const ue=await Ee.json();if(ue.success){if(a("Test submitted successfully!","success"),y(),C(),n?.student_id&&f1(n.student_id,"word_matching",e.id),!!Nr&&n?.student_id){let Pe=3;try{const Ye=localStorage.getItem(`student_active_tests_${n.student_id}`);if(Ye){const de=JSON.parse(Ye)?.tests?.find(_e=>_e.test_id===e.id&&_e.test_type==="word_matching");de&&(Pe=de.retest_attempts_left||de.max_attempts||3)}}catch(Ye){console.error("Error checking active tests cache:",Ye)}const Ge=(Nt>0&&Oe>0?Nt/Oe*100:0)>=50;if(Ge){const Ye=`retest_attempt${Pe}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Ye,"true"),console.log(" Passed retest, marking last-slot key:",Ye);let ct=0;for(let Fe=1;Fe<=10;Fe++){const De=`retest_attempt${Fe}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(De)==="true"&&ct++}const de=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(de,"true"),console.log(" Marked retest as completed (student passed):",de);const _e=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(_e,JSON.stringify({used:ct,max:Pe})),console.log(" Set retest attempts metadata (student passed):",_e,{used:ct,max:Pe})}else{let Ye=1;for(let De=1;De<=10;De++){const qe=`retest_attempt${De}_${n.student_id}_word_matching_${e.id}`;if(localStorage.getItem(qe)!=="true"){Ye=De;break}}const ct=`retest_attempt${Ye}_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(ct,"true"),console.log(" Marked retest attempt as completed:",ct);let de=0;for(let De=1;De<=10;De++){const qe=`retest_attempt${De}_${n.student_id}_word_matching_${e.id}`;localStorage.getItem(qe)==="true"&&de++}const _e=Pe-de,Fe=_e<=0||Ge;if(console.log(" Retest completion check:",{usedAttempts:de,maxAttempts:Pe,attemptsLeft:_e,passed:Ge,shouldComplete:Fe}),Fe){const De=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(De,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",De);const qe=`retest_attempts_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(qe,JSON.stringify({used:de,max:Pe})),console.log(" Set retest attempts metadata (attempts exhausted):",qe,{used:de,max:Pe})}}}else if(n?.student_id){const Pe=`test_completed_${n.student_id}_word_matching_${e.id}`;localStorage.setItem(Pe,"true"),console.log(" Test marked as completed in localStorage:",Pe)}if(n?.student_id){const Pe=`student_results_table_${n.student_id}`;ys(Pe,ue,ds.student_results_table),console.log(" Test results cached with key:",Pe)}if(n?.student_id){const Pe=`retest1_${gr}_word_matching_${e.id}`;localStorage.removeItem(Pe),localStorage.removeItem(Vr)}D.current&&localStorage.removeItem(D.current),t&&(Rt(!1),t({score:Nt,caught_cheating:qt.caught_cheating,visibility_change_times:qt.visibility_change_times})),Ct(!1)}else throw new Error(ue.message||"Failed to submit test")}catch(Ce){console.error("Error submitting test:",Ce),Ct(!1)}}},[w,T,gt,e,n,it,v,y,C,s,t]);return S.useEffect(()=>{if(!w||!e||!it)return;const Ce=Number(e?.allowed_time||0);if(!Ce)return;console.log(" Timer effect triggered:",{allowedSeconds:Ce,timeRemaining:j,initialized:V.current,testData:e?.id});const Ze=setInterval(()=>{P(wt=>{const Nt=wt>0?wt:Ce;if(Nt<=0)return 0;const Oe=Math.max(0,Nt-1);try{const Ke=Date.now();B.current||(B.current=Ke),D.current&&localStorage.setItem(D.current,JSON.stringify({remainingSeconds:Oe,lastTickAt:new Date(Ke).toISOString(),startedAt:it?it.toISOString():new Date(Ke-(Ce-Oe)*1e3).toISOString()}))}catch{}return Oe===0&&Ie(),Oe})},1e3);return()=>clearInterval(Ze)},[w,e?.allowed_time,it,Ie]),w?l.jsxs(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`max-w-4xl mx-auto p-6 ${o||u?"bg-black":"bg-white"}`,style:o?{backgroundColor:fe.black}:u?{...f.background}:{},children:[l.jsx(Fa,{isOpen:bt,onClose:()=>{},title:"Submitting",size:"small",children:l.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[l.jsx(pn,{size:"lg",className:"mb-3"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Submitting test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your results"})]})}),l.jsx("div",{className:"flex justify-end mb-2",children:l.jsx(ht,{onClick:Sr,variant:"outline",size:"sm",disabled:bt,children:"Back to Cabinet"})}),l.jsxs("div",{className:`rounded-lg border-2 p-6 mb-6 ${o?Gt(1).className:u?dr(1).className:`${d.cardBg} ${d.cardBorder}`}`,style:o?{...Gt(1).style,...f.glow,boxShadow:`${f.glow.boxShadow}, inset 0 0 20px ${rU(fe.cyan,.1)}`}:u?{...dr(1).style,borderColor:ze.primary,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:[l.jsxs("div",{className:"text-left mb-4",children:[l.jsx("h2",{className:`text-2xl font-bold ${o?"tracking-wider":d.text} mb-2`,style:o?{...f.textCyan,fontFamily:"monospace"}:u?{...f.headerText}:{},children:o?e.test_name.toUpperCase():e.test_name}),l.jsx("p",{className:`${o?"text-yellow-400 tracking-wider":d.textSecondary}`,style:o?{fontFamily:"monospace",textShadow:"0 0 5px rgba(255, 215, 0, 0.5)"}:{},children:o?e.interaction_type==="drag"?"DRAG WORDS FROM LEFT TO RIGHT TO MATCH THEM":"CLICK ON THE WORD OR PHRASE ON THE LEFT, THEN CLICK ON THE MATCHING WORD OR PHRASE ON THE RIGHT TO CONNECT THEM":e.interaction_type==="drag"?"Drag words from left to right to match them":"Click on the word or phrase on the left, then click on the matching word or phrase on the right to connect them"})]}),e&&l.jsx("div",{className:"mb-4",children:l.jsx(pz,{answeredCount:Object.keys(T).length+(e.interaction_type==="arrow"?gt.length:0),totalQuestions:w?.leftWords?.length||0,timeElapsed:(()=>{const Ce=Number(e?.allowed_time||0);return Ce<=0?0:j>0?j:Ce})(),themeClasses:d,isCyberpunk:o})})]}),e.interaction_type==="drag"?l.jsx(Kt,{className:`mb-6 ${o?Gt(0).className:u?dr(0).className:""}`,style:o?{...Gt(0).style,...f.glow}:u?{...dr(0).style,...f.glow}:{},children:l.jsx("div",{ref:Y,className:"relative w-full",children:l.jsx(Nm,{width:re,height:Ht,className:`border-2 rounded-lg ${bt?"pointer-events-none opacity-50":""} ${o?"border-cyan-400":"border-gray-200"}`,style:o?{borderColor:fe.cyan,backgroundColor:fe.black}:{},children:l.jsxs(Tm,{children:[w.leftWords.map((Ce,Ze)=>{const wt=T[Ze]!==void 0,Nt=ft(Ce,Re.LEFT_WORD,be),Oe=at[Ze],Ke=Oe?Oe.y:je+Ze*q;return l.jsxs(ou,{x:X,y:Ke,draggable:!wt,onDragStart:st=>{st.target.moveToTop()},onDragEnd:st=>{st.target.getStage();const Vt=w.rightWords,qt=be+60,gr=pe-30;console.log(" Drop detection - Word dropped at:",st.target.x(),st.target.y());for(let Vr=0;Vr<Vt.length;Vr++){const Nr=Vt[Vr],dn=at[Vr],me=dn?dn.y:je+Vr*q,Ne=ft(Nr,Re.ORIGINAL_WORD,be),ve=gr,Ee=gr+qt,ue=me,he=me+Ne;if(console.log(` Checking drop zone ${Vr}:`,{left:ve,right:Ee,top:ue,bottom:he,word:Vt[Vr]}),st.target.x()>=ve&&st.target.x()<=Ee&&st.target.y()>=ue&&st.target.y()<=he){if(Object.entries(T).some(([tt,Ge])=>Ge===Vr&&parseInt(tt)!==Ze)){console.log(` Dropzone ${Vr} is already occupied, resetting position`),st.target.position({x:X,y:Ke});return}console.log(` Match found! Word "${w.leftWords[Ze]}" matched with "${Vt[Vr]}"`),E(tt=>({...tt,[Ze]:Vr}));break}}console.log(" No match found, resetting position"),st.target.position({x:X,y:Ke})},children:[l.jsx(Ei,{width:be,height:Nt,fill:wt?u?"#1a0014":"#e5e7eb":u?ze.primary:"#3b82f6",stroke:wt?u?ze.border:"#9ca3af":u?ze.primary:"#1d4ed8",shadowBlur:u&&!wt?15:0,shadowColor:u&&!wt?ze.primary:void 0,shadowOpacity:u&&!wt?.6:void 0,strokeWidth:2,cornerRadius:8,opacity:wt?.5:1}),l.jsx(Vu,{text:Ce,x:be/2,y:Nt/2,fontSize:Re.LEFT_WORD,fontFamily:"Arial",fill:wt?"#dc2626":"white",align:"center",verticalAlign:"middle",width:be,offsetX:be/2,offsetY:Nt/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Ze}`)}),w.rightWords.map((Ce,Ze)=>{const wt=ft(Ce,Re.ORIGINAL_WORD,be),Nt=at[Ze],Oe=Nt?Nt.y:je+Ze*q,Ke=Object.keys(T).find(st=>T[st]===Ze);return l.jsxs(ou,{x:pe,y:Oe,onClick:()=>hr("right",Ze),onTap:()=>hr("right",Ze),children:[l.jsx(Ei,{width:be,height:wt,fill:Ke?"#10b981":"#f3f4f6",stroke:Ke?"#059669":"#d1d5db",strokeWidth:2,cornerRadius:8,listening:!0}),l.jsx(Vu,{text:Ce,x:be/2,y:wt/2,fontSize:Re.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:be,offsetX:be/2,offsetY:wt/2,wrap:"word",ellipsis:!0,listening:!1}),Ke&&l.jsx(Vu,{text:w.leftWords[Ke],x:be/2,y:wt-5,fontSize:Re.DRAGGED_WORD,fontFamily:"Arial",fill:"#dc2626",align:"center",verticalAlign:"middle",width:be,offsetX:be/2,offsetY:Re.DRAGGED_WORD/2,wrap:"word",ellipsis:!0})]},`right-${Ze}`)})]})})})}):l.jsx(Kt,{className:`mb-6 ${o?Gt(0).className:u?dr(0).className:""}`,style:o?{...Gt(0).style,...f.glow}:u?{...dr(0).style,...f.glow}:{},children:l.jsx("div",{ref:Y,className:"relative w-full",children:l.jsx(Nm,{width:re,height:Ht,className:`border-2 rounded-lg ${bt?"pointer-events-none opacity-50":""} ${o?"border-cyan-400":"border-gray-200"}`,style:o?{borderColor:fe.cyan,backgroundColor:fe.black}:{},children:l.jsxs(Tm,{children:[w?.leftWords?.map((Ce,Ze)=>{const wt=ft(Ce,Re.LEFT_WORD,be),Nt=at[Ze],Oe=Nt?Nt.y:je+Ze*q,Ke=A?.side==="left"&&A?.index===Ze;return l.jsxs(ou,{x:X,y:Oe,onClick:()=>hr("left",Ze),onTap:()=>hr("left",Ze),children:[l.jsx(Ei,{width:be,height:wt,fill:Ke?u?ze.primary:"#3b82f6":u?ze.backgroundSecondary:"#f3f4f6",stroke:Ke?u?ze.primary:"#1d4ed8":u?ze.border:"#d1d5db",shadowBlur:u&&Ke?20:0,shadowColor:u&&Ke?ze.primary:void 0,shadowOpacity:u&&Ke?.8:void 0,strokeWidth:Ke?3:2,cornerRadius:8}),l.jsx(Vu,{text:Ce,x:be/2,y:wt/2,fontSize:Re.LEFT_WORD,fontFamily:"Arial",fill:Ke?"white":"#374151",align:"center",verticalAlign:"middle",width:be,offsetX:be/2,offsetY:wt/2,wrap:"word",ellipsis:!0,listening:!1})]},`left-${Ze}`)}),w?.rightWords?.map((Ce,Ze)=>{const wt=ft(Ce,Re.ORIGINAL_WORD,be),Nt=at[Ze],Oe=Nt?Nt.y:je+Ze*q,Ke=A?.side==="right"&&A?.index===Ze,Vt=gt.some(qt=>qt.endWord.side==="right"&&qt.endWord.index===Ze);return l.jsxs(ou,{x:pe,y:Oe,onClick:()=>hr("right",Ze),onTap:()=>hr("right",Ze),onKeyDown:qt=>{(qt.key==="Tab"||qt.key==="Enter")&&(qt.preventDefault(),hr("right",Ze))},tabIndex:0,children:[l.jsx(Ei,{width:be,height:wt,fill:Ke?u?ze.primary:"#3b82f6":Vt?u?ze.success:"#10b981":u?ze.backgroundSecondary:"#f3f4f6",stroke:Ke?u?ze.primary:"#1d4ed8":Vt?u?ze.success:"#059669":u?ze.border:"#d1d5db",shadowBlur:u&&(Ke||Vt)?20:0,shadowColor:u&&Ke?ze.primary:u&&Vt?ze.success:void 0,shadowOpacity:u&&(Ke||Vt)?.8:void 0,strokeWidth:Ke?3:2,cornerRadius:8,listening:!0}),l.jsx(Vu,{text:Ce,x:be/2,y:wt/2,fontSize:Re.ORIGINAL_WORD,fontFamily:"Arial",fill:"#000000",align:"center",verticalAlign:"middle",width:be,offsetX:be/2,offsetY:wt/2,wrap:"word",ellipsis:!0,listening:!1})]},`right-${Ze}`)}),gt.map((Ce,Ze)=>{const wt=w?.leftWords?.[Ce.startWord.index],Nt=w?.rightWords?.[Ce.endWord.index],Oe=ft(wt,Re.LEFT_WORD,be),Ke=ft(Nt,Re.ORIGINAL_WORD,be),st=at[Ce.startWord.index],Vt=at[Ce.endWord.index],qt=st?st.y+Oe/2:je+Ce.startWord.index*q+Oe/2,gr=Vt?Vt.y+Ke/2:je+Ce.endWord.index*q+Ke/2;return l.jsx(Ki,{points:[X+be+20,qt,pe-20,gr],stroke:u?Ce.color||ze.primary:Ce.color||"#3b82f6",shadowBlur:u?10:0,shadowColor:u?ze.primary:void 0,shadowOpacity:u?.6:void 0,strokeWidth:u?Math.max(Xe,3):Xe,lineCap:"round",lineJoin:"round"},Ze)})]})})})}),l.jsx(Kt,{className:o?Gt(1).className:u?dr(1).className:"",style:o?{...Gt(1).style,...f.glow}:u?{...dr(1).style,...f.glowPurple}:{},children:l.jsxs("div",{className:`submit-section flex justify-center space-x-4 ${bt?"pointer-events-none opacity-50":""}`,children:[l.jsx(ht,{onClick:Cr,variant:"outline",disabled:bt,children:"Reset"}),l.jsx(ht,{onClick:()=>Yt(!0),disabled:bt,className:`px-8 ${o?"":u?"bg-pink-500 text-white hover:bg-pink-600":""}`,style:o?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",borderWidth:"2px",...f.glow}:{},children:bt?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:o?fe.cyan:"white",className:"mr-2"}),o?"SUBMITTING...":"Submitting..."]}):o?"SUBMIT TEST":"Submit Test"})]})}),l.jsx(Fa,{isOpen:Mt&&!bt,onClose:()=>rt(!1),title:"Reset Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to reset? This will clear all your progress and answers."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:()=>rt(!1),variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:ur,variant:"primary",children:"Reset"})]})]})}),l.jsx(Fa,{isOpen:Qe,onClose:Me,title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to leave the test? Your progress will be saved."}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:Me,variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:Ce=>{console.log(" WordMatchingStudent: Leave button clicked in modal"),console.log(" WordMatchingStudent: Button click event:",Ce),we()},variant:"primary",children:"Leave"})]})]})}),l.jsx(Fa,{isOpen:Lt,onClose:()=>Yt(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:()=>Yt(!1),variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:()=>{Yt(!1),Ie()},variant:"primary",className:"",style:o?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",borderWidth:"2px",...f.glow}:{},children:o?"SUBMIT":"Submit"})]})]})})]}):l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx(pn,{size:"lg"})})},v1=S.createContext(null);function ole(e,t){return{getTheme:function(){return t??null}}}function ud(){const e=S.useContext(v1);return e==null&&(function(t,...r){const n=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of r)s.append("v",a);throw n.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(8),e}function tr(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const xu=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,lle=xu&&"documentMode"in document?document.documentMode:null,Gu=xu&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Em=xu&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),w4=!(!xu||!("InputEvent"in window)||lle)&&"getTargetRanges"in new window.InputEvent("input"),Tv=xu&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Kp=xu&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,cle=xu&&/Android/.test(navigator.userAgent),xz=xu&&/^(?=.*Chrome).*/i.test(navigator.userAgent),bF=xu&&cle&&xz,_4=xu&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!xz;function yz(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}const ule=1,dle=3,fle=9,hle=11,Am=0,vz=1,Yp=2,mle=0,gle=1,ple=2,S4=4,k4=8,d7=128,xle=1792|(112|(3|S4|k4)|d7),f7=1,h7=2,m7=3,g7=4,p7=5,x7=6,Z_=Tv||Kp||_4?"":"",p0=`

`,yle=Em?"":Z_,jm={bold:1,capitalize:1024,code:16,highlight:d7,italic:2,lowercase:256,strikethrough:S4,subscript:32,superscript:64,underline:k4,uppercase:512},vle={directionless:1,unmergeable:2},wF={center:h7,end:x7,justify:g7,left:f7,right:m7,start:p7},ble={[h7]:"center",[x7]:"end",[g7]:"justify",[f7]:"left",[m7]:"right",[p7]:"start"},wle={normal:0,segmented:2,token:1},_le={[mle]:"normal",[ple]:"segmented",[gle]:"token"},_F="$config";function bz(e,t,r,n,s,a){let i=e.getFirstChild();for(;i!==null;){const o=i.__key;i.__parent===t&&(Bt(i)&&bz(i,o,r,n,s,a),r.has(o)||a.delete(o),s.push(o)),i=i.getNextSibling()}}const Sle=100;let yC=!1,y7=0;function kle(e){y7=e.timeStamp}function T5(e,t,r){const n=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||n&&e.previousSibling===s)||n&&c3(e,r)!==void 0}function Cle(e,t,r){const n=mu(Ec(r));let s=null,a=null;n!==null&&n.anchorNode===e&&(s=n.anchorOffset,a=n.focusOffset);const i=e.nodeValue;i!==null&&L7(t,i,s,a,!1)}function Tle(e,t,r){if(Jt(e)){const n=e.anchor.getNode();if(n.is(r)&&e.format!==n.getFormat())return!1}return T0(t)&&r.isAttached()}function Nle(e,t,r,n){for(let s=e;s&&!Nce(s);s=b2(s)){const a=c3(s,t);if(a!==void 0){const i=qa(a,r);if(i)return Jn(i)||!Is(s)?void 0:[s,i]}else if(s===n)return[n,pW(r)]}}function wz(e,t,r){yC=!0;const n=performance.now()-y7>Sle;try{Ol(e,(()=>{const s=xr()||(function(h){return h.getEditorState().read((()=>{const g=xr();return g!==null?g.clone():null}))})(e),a=new Map,i=e.getRootElement(),o=e._editorState,c=e._blockCursorElement;let u=!1,d="";for(let h=0;h<t.length;h++){const g=t[h],p=g.type,y=g.target,v=Nle(y,e,o,i);if(!v)continue;const[C,w]=v;if(p==="characterData")n&&yr(w)&&T0(y)&&Tle(s,y,w)&&Cle(y,w,e);else if(p==="childList"){u=!0;const _=g.addedNodes;for(let A=0;A<_.length;A++){const F=_[A],j=mW(F),P=F.parentNode;if(P!=null&&F!==c&&j===null&&!T5(F,P,e)){if(Em){const D=(Is(F)?F.innerText:null)||F.nodeValue;D&&(d+=D)}P.removeChild(F)}}const T=g.removedNodes,E=T.length;if(E>0){let A=0;for(let F=0;F<E;F++){const j=T[F];(T5(j,y,e)||c===j)&&(y.appendChild(j),A++)}E!==A&&a.set(C,w)}}}if(a.size>0)for(const[h,g]of a)g.reconcileObservedMutation(h,e);const f=r.takeRecords();if(f.length>0){for(let h=0;h<f.length;h++){const g=f[h],p=g.addedNodes,y=g.target;for(let v=0;v<p.length;v++){const C=p[v],w=C.parentNode;w==null||C.nodeName!=="BR"||T5(C,y,e)||w.removeChild(C)}}r.takeRecords()}s!==null&&(u&&ro(s),Em&&bW(e)&&s.insertRawText(d))}))}finally{yC=!1}}function _z(e){const t=e._observer;t!==null&&wz(e,t.takeRecords(),t)}function Sz(e){(function(t){y7===0&&Ec(t).addEventListener("textInput",kle,!0)})(e),e._observer=new MutationObserver(((t,r)=>{wz(e,t,r)}))}function Ele(e){const t=new Map,r=new Set;for(let n=typeof e=="function"?e:e.replace;n.prototype&&n.prototype.getType!==void 0;n=Object.getPrototypeOf(n)){const{ownNodeConfig:s}=W7(n);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&r.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:r,sharedConfigMap:t}}let Ale=class kz{constructor(t,r,n=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=r,this.unknownState=n,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,o=a!==void 0?a:(function(c,u,d){let f=d.size;if(u)for(const h in u){const g=c.get(h);g&&d.has(g)||f++}return f})(i,n,s);this.size=o}getValue(t){const r=this.knownState.get(t);if(r!==void 0)return r;this.sharedNodeState.sharedConfigMap.set(t.key,t);let n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(n=t.parse(s)),this.updateFromKnown(t,n)}return n}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},r={};for(const[n,s]of this.knownState)n.isEqual(s,n.defaultValue)?delete t[n.key]:t[n.key]=n.unparse(s);for(const n of this.sharedNodeState.flatKeys)n in t&&(r[n]=t[n],delete t[n]);return SF(t)&&(r.$=t),r}getWritable(t){if(this.node===t)return this;const{sharedNodeState:r,unknownState:n}=this,s=new Map(this.knownState);return new kz(t,r,(function(a,i,o){let c;if(o)for(const[u,d]of Object.entries(o)){const f=a.get(u);f?i.has(f)||i.set(f,f.parse(d)):(c=c||{},c[u]=d)}return c})(r.sharedConfigMap,s,n),s,this.size)}updateFromKnown(t,r){const n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&n in a||(a&&(delete a[n],this.unknownState=SF(a)),this.size++),s.set(t,r)}updateFromUnknown(t,r){const n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(r)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=r)}updateFromJSON(t){const{knownState:r}=this;for(const n of r.keys())r.set(n,n.defaultValue);if(this.size=r.size,this.unknownState=void 0,t)for(const[n,s]of Object.entries(t))this.updateFromUnknown(n,s)}};function jle(e){const t=e.getWritable(),r=t.__state?t.__state.getWritable(t):new Ale(t,Cz(t));return t.__state=r,r}function Cz(e){return e.__state?e.__state.sharedNodeState:dW(w2(),e.getType()).sharedNodeState}function SF(e){if(e)for(const t in e)return e}function kF(e,t,r){for(const[n,s]of t.knownState){if(e.has(n.key))continue;e.add(n.key);const a=r?r.getValue(n):n.defaultValue;if(a!==s&&!n.isEqual(a,s))return!0}return!1}function CF(e,t,r){const{unknownState:n}=t,s=r?r.unknownState:void 0;if(n){for(const[a,i]of Object.entries(n))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function TF(e,t){const r=e.__state;return r&&r.node===e?r.getWritable(t):r}function NF(e,t){const r=e.__mode,n=e.__format,s=e.__style,a=t.__mode,i=t.__format,o=t.__style,c=e.__state,u=t.__state;return(r===null||r===a)&&(n===null||n===i)&&(s===null||s===o)&&(e.__state===null||c===u||(function(d,f){if(d===f)return!0;if(d&&f&&d.size!==f.size)return!1;const h=new Set;return!(d&&kF(h,d,f)||f&&kF(h,f,d)||d&&CF(h,d,f)||f&&CF(h,f,d))})(c,u))}function EF(e,t){const r=e.mergeWithSibling(t),n=aa()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function AF(e){let t,r,n=e;if(n.__text!==""||!n.isSimpleText()||n.isUnmergeable()){for(;(t=n.getPreviousSibling())!==null&&yr(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(NF(t,n)){n=EF(t,n);break}break}t.remove()}for(;(r=n.getNextSibling())!==null&&yr(r)&&r.isSimpleText()&&!r.isUnmergeable();){if(r.__text!==""){if(NF(n,r)){n=EF(n,r);break}break}r.remove()}}else n.remove()}function C4(e){return jF(e.anchor),jF(e.focus),e}function jF(e){for(;e.type==="element";){const t=e.getNode(),r=e.offset;let n,s;if(r===t.getChildrenSize()?(n=t.getChildAtIndex(r-1),s=!0):(n=t.getChildAtIndex(r),s=!1),yr(n)){e.set(n.__key,s?n.getTextContentSize():0,"text",!0);break}if(!Bt(n))break;e.set(n.__key,s?n.getChildrenSize():0,"element",!0)}}let Pm,_o,Nv,e3,vC,bC,Fm,uu,wC,Ev,si="",zu=null,Wu="",qd="",mp=!1,T4=!1;function N4(e,t){const r=Fm.get(e);if(t!==null){const n=CC(e);n.parentNode===t&&t.removeChild(n)}if(uu.has(e)||_o._keyToDOMMap.delete(e),Bt(r)){const n=A4(r,Fm);_C(n,0,n.length-1,null)}r!==void 0&&B7(Ev,Nv,e3,r,"destroyed")}function _C(e,t,r,n){let s=t;for(;s<=r;++s){const a=e[s];a!==void 0&&N4(a,n)}}function Xh(e,t){e.setProperty("text-align",t)}const Ple="40px";function Tz(e,t){const r=Pm.theme.indent;if(typeof r=="string"){const s=e.classList.contains(r);t>0&&!s?e.classList.add(r):t<1&&s&&e.classList.remove(r)}const n=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||Ple;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${n})`)}function Nz(e,t){const r=e.style;t===0?Xh(r,""):t===f7?Xh(r,"left"):t===h7?Xh(r,"center"):t===m7?Xh(r,"right"):t===g7?Xh(r,"justify"):t===p7?Xh(r,"start"):t===x7&&Xh(r,"end")}function SC(e,t){const r=(function(n){const s=n.__dir;if(s!==null)return s;if(li(n))return null;const a=n.getParentOrThrow();return li(a)&&a.__dir===null?"auto":null})(t);r!==null?e.dir=r:e.removeAttribute("dir")}function E4(e,t){const r=uu.get(e);r===void 0&&tr(60);const n=r.createDOM(Pm,_o);if((function(s,a,i){const o=i._keyToDOMMap;(function(c,u,d){const f=`__lexicalKey_${u._key}`;c[f]=d})(a,i,s),o.set(s,a)})(e,n,_o),yr(r)?n.setAttribute("data-lexical-text","true"):Jn(r)&&n.setAttribute("data-lexical-decorator","true"),Bt(r)){const s=r.__indent,a=r.__size;if(SC(n,r),s!==0&&Tz(n,s),a!==0){const o=a-1;kC(A4(r,uu),r,0,o,r.getDOMSlot(n))}const i=r.__format;i!==0&&Nz(n,i),r.isInline()||Ez(null,r,n),u3(r)&&(si+=p0,qd+=p0)}else{const s=r.getTextContent();if(Jn(r)){const a=r.decorate(_o,Pm);a!==null&&Az(e,a),n.contentEditable="false"}si+=s,qd+=s}return t!==null&&t.insertChild(n),B7(Ev,Nv,e3,r,"created"),n}function kC(e,t,r,n,s){const a=si;si="";let i=r;for(;i<=n;++i){E4(e[i],s);const o=uu.get(e[i]);o!==null&&yr(o)&&(zu===null&&(zu=o.getFormat()),Wu===""&&(Wu=o.getStyle()))}u3(t)&&(si+=p0),s.element.__lexicalTextContent=si,si=a+si}function PF(e,t){if(e){const r=e.__last;if(r){const n=t.get(r);if(n)return a0(n)?"line-break":Jn(n)&&n.isInline()?"decorator":null}return"empty"}return null}function Ez(e,t,r){const n=PF(e,Fm),s=PF(t,uu);n!==s&&t.getDOMSlot(r).setManagedLineBreak(s)}function Fle(e,t,r){var n;zu=null,Wu="",(function(s,a,i){const o=si,c=s.__size,u=a.__size;si="";const d=i.element;if(c===1&&u===1){const f=s.__first,h=a.__first;if(f===h)By(f,d);else{const p=CC(f),y=E4(h,null);try{d.replaceChild(y,p)}catch(v){if(typeof v=="object"&&v!=null){const C=`${v.toString()} Parent: ${d.tagName}, new child: {tag: ${y.tagName} key: ${h}}, old child: {tag: ${p.tagName}, key: ${f}}.`;throw new Error(C)}throw v}N4(f,null)}const g=uu.get(h);yr(g)&&(zu===null&&(zu=g.getFormat()),Wu===""&&(Wu=g.getStyle()))}else{const f=A4(s,Fm),h=A4(a,uu);if(f.length!==c&&tr(227),h.length!==u&&tr(228),c===0)u!==0&&kC(h,a,0,u-1,i);else if(u===0){if(c!==0){const g=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;_C(f,0,c-1,g?null:d),g&&(d.textContent="")}}else(function(g,p,y,v,C,w){const _=v-1,T=C-1;let E,A,F=w.getFirstChild(),j=0,P=0;for(;j<=_&&P<=T;){const V=p[j],Y=y[P];if(V===Y)F=N5(By(Y,w.element)),j++,P++;else{E===void 0&&(E=new Set(p)),A===void 0&&(A=new Set(y));const te=A.has(V),ee=E.has(Y);if(te)if(ee){const L=Mm(_o,Y);L===F?F=N5(By(Y,w.element)):(w.withBefore(F).insertChild(L),By(Y,w.element)),j++,P++}else E4(Y,w.withBefore(F)),P++;else F=N5(CC(V)),N4(V,w.element),j++}const re=uu.get(Y);re!==null&&yr(re)&&(zu===null&&(zu=re.getFormat()),Wu===""&&(Wu=re.getStyle()))}const D=j>_,B=P>T;if(D&&!B){const V=y[T+1],Y=V===void 0?null:_o.getElementByKey(V);kC(y,g,P,T,w.withBefore(Y))}else B&&!D&&_C(p,j,_,w.element)})(a,f,h,c,u,i)}u3(a)&&(si+=p0),d.__lexicalTextContent=si,si=o+si})(e,t,t.getDOMSlot(r)),n=t,zu==null||zu===n.__textFormat||T4||n.setTextFormat(zu),(function(s){Wu===""||Wu===s.__textStyle||T4||s.setTextStyle(Wu)})(t)}function A4(e,t){const r=[];let n=e.__first;for(;n!==null;){const s=t.get(n);s===void 0&&tr(101),r.push(n),n=s.__next}return r}function By(e,t){const r=Fm.get(e);let n=uu.get(e);r!==void 0&&n!==void 0||tr(61);const s=mp||bC.has(e)||vC.has(e),a=Mm(_o,e);if(r===n&&!s){if(Bt(r)){const i=a.__lexicalTextContent;i!==void 0&&(si+=i,qd+=i)}else{const i=r.getTextContent();qd+=i,si+=i}return a}if(r!==n&&s&&B7(Ev,Nv,e3,n,"updated"),n.updateDOM(r,a,Pm)){const i=E4(e,null);return t===null&&tr(62),t.replaceChild(i,a),N4(e,null),i}if(Bt(r)&&Bt(n)){const i=n.__indent;(mp||i!==r.__indent)&&Tz(a,i);const o=n.__format;if((mp||o!==r.__format)&&Nz(a,o),s&&(Fle(r,n,a),li(n)||n.isInline()||Ez(r,n,a)),u3(n)&&(si+=p0,qd+=p0),(mp||n.__dir!==r.__dir)&&(SC(a,n),li(n)&&!mp))for(const c of n.getChildren())Bt(c)&&SC(Mm(_o,c.getKey()),c)}else{const i=n.getTextContent();if(Jn(n)){const o=n.decorate(_o,Pm);o!==null&&Az(e,o)}si+=i,qd+=i}if(!T4&&li(n)&&n.__cachedText!==qd){const i=n.getWritable();i.__cachedText=qd,n=i}return a}function Az(e,t){let r=_o._pendingDecorators;const n=_o._decorators;if(r===null){if(n[e]===t)return;r=gW(_o)}r[e]=t}function N5(e){let t=e.nextSibling;return t!==null&&t===_o._blockCursorElement&&(t=t.nextSibling),t}function Mle(e,t,r,n,s,a){si="",qd="",mp=n===Yp,_o=r,Pm=r._config,Nv=r._nodes,e3=_o._listeners.mutation,vC=s,bC=a,Fm=e._nodeMap,uu=t._nodeMap,T4=t._readOnly,wC=new Map(r._keyToDOMMap);const i=new Map;return Ev=i,By("root",null),_o=void 0,Nv=void 0,vC=void 0,bC=void 0,Fm=void 0,uu=void 0,Pm=void 0,wC=void 0,Ev=void 0,i}function CC(e){const t=wC.get(e);return t===void 0&&tr(75,e),t}function an(e){return{type:e}}const jz=an("SELECTION_CHANGE_COMMAND"),Ole=an("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),v7=an("CLICK_COMMAND"),gm=an("DELETE_CHARACTER_COMMAND"),Fp=an("INSERT_LINE_BREAK_COMMAND"),Av=an("INSERT_PARAGRAPH_COMMAND"),Mp=an("CONTROLLED_TEXT_INSERTION_COMMAND"),b7=an("PASTE_COMMAND"),TC=an("REMOVE_TEXT_COMMAND"),jv=an("DELETE_WORD_COMMAND"),Pv=an("DELETE_LINE_COMMAND"),wo=an("FORMAT_TEXT_COMMAND"),w7=an("UNDO_COMMAND"),_7=an("REDO_COMMAND"),Dle=an("KEYDOWN_COMMAND"),Pz=an("KEY_ARROW_RIGHT_COMMAND"),Rle=an("MOVE_TO_END"),Fz=an("KEY_ARROW_LEFT_COMMAND"),Ile=an("MOVE_TO_START"),Mz=an("KEY_ARROW_UP_COMMAND"),Oz=an("KEY_ARROW_DOWN_COMMAND"),j4=an("KEY_ENTER_COMMAND"),Dz=an("KEY_SPACE_COMMAND"),Rz=an("KEY_BACKSPACE_COMMAND"),Iz=an("KEY_ESCAPE_COMMAND"),Lz=an("KEY_DELETE_COMMAND"),Bz=an("KEY_TAB_COMMAND"),Lle=an("INSERT_TAB_COMMAND"),Ble=an("INDENT_CONTENT_COMMAND"),FF=an("OUTDENT_CONTENT_COMMAND"),$z=an("DROP_COMMAND"),Uz=an("FORMAT_ELEMENT_COMMAND"),zz=an("DRAGSTART_COMMAND"),Wz=an("DRAGOVER_COMMAND"),$le=an("DRAGEND_COMMAND"),t3=an("COPY_COMMAND"),S7=an("CUT_COMMAND"),NC=an("SELECT_ALL_COMMAND"),Ule=an("CLEAR_EDITOR_COMMAND"),zle=an("CLEAR_HISTORY_COMMAND"),ow=an("CAN_REDO_COMMAND"),lw=an("CAN_UNDO_COMMAND"),Wle=an("FOCUS_COMMAND"),Hle=an("BLUR_COMMAND"),Gle=an("KEY_MODIFIER_COMMAND"),zd=Object.freeze({}),EC=30,AC=[["keydown",function(e,t){if(Zy=e.timeStamp,Hz=e.key,!t.isComposing()&&!Dr(t,Dle,e)&&e.key!=null){if(E5&&iM(e))return Ol(t,(()=>{cw(t,A5)})),E5=!1,void(A5="");if((function(r){return is(r,"ArrowRight",{shiftKey:"any"})})(e))Dr(t,Pz,e);else if((function(r){return is(r,"ArrowRight",Hd)})(e))Dr(t,Rle,e);else if((function(r){return is(r,"ArrowLeft",{shiftKey:"any"})})(e))Dr(t,Fz,e);else if((function(r){return is(r,"ArrowLeft",Hd)})(e))Dr(t,Ile,e);else if((function(r){return is(r,"ArrowUp",{altKey:"any",shiftKey:"any"})})(e))Dr(t,Mz,e);else if((function(r){return is(r,"ArrowDown",{altKey:"any",shiftKey:"any"})})(e))Dr(t,Oz,e);else if((function(r){return is(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})})(e))ev=!0,Dr(t,j4,e);else if((function(r){return r.key===" "})(e))Dr(t,Dz,e);else if((function(r){return Gu&&is(r,"o",{ctrlKey:!0})})(e))e.preventDefault(),ev=!0,Dr(t,Fp,!0);else if((function(r){return is(r,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})})(e))ev=!1,Dr(t,j4,e);else if((function(r){return is(r,"Backspace",{shiftKey:"any"})||Gu&&is(r,"h",{ctrlKey:!0})})(e))iM(e)?Dr(t,Rz,e):(e.preventDefault(),Dr(t,gm,!0));else if((function(r){return r.key==="Escape"})(e))Dr(t,Iz,e);else if((function(r){return is(r,"Delete",{})||Gu&&is(r,"d",{ctrlKey:!0})})(e))(function(r){return r.key==="Delete"})(e)?Dr(t,Lz,e):(e.preventDefault(),Dr(t,gm,!1));else if((function(r){return is(r,"Backspace",aM)})(e))e.preventDefault(),Dr(t,jv,!0);else if((function(r){return is(r,"Delete",aM)})(e))e.preventDefault(),Dr(t,jv,!1);else if((function(r){return Gu&&is(r,"Backspace",{metaKey:!0})})(e))e.preventDefault(),Dr(t,Pv,!0);else if((function(r){return Gu&&(is(r,"Delete",{metaKey:!0})||is(r,"k",{ctrlKey:!0}))})(e))e.preventDefault(),Dr(t,Pv,!1);else if((function(r){return is(r,"b",Hd)})(e))e.preventDefault(),Dr(t,wo,"bold");else if((function(r){return is(r,"u",Hd)})(e))e.preventDefault(),Dr(t,wo,"underline");else if((function(r){return is(r,"i",Hd)})(e))e.preventDefault(),Dr(t,wo,"italic");else if((function(r){return is(r,"Tab",{shiftKey:"any"})})(e))Dr(t,Bz,e);else if((function(r){return is(r,"z",Hd)})(e))e.preventDefault(),Dr(t,w7,void 0);else if((function(r){return Gu?is(r,"z",{metaKey:!0,shiftKey:!0}):is(r,"y",{ctrlKey:!0})||is(r,"z",{ctrlKey:!0,shiftKey:!0})})(e))e.preventDefault(),Dr(t,_7,void 0);else{const r=t._editorState._selection;r===null||Jt(r)?oM(e)&&(e.preventDefault(),Dr(t,NC,e)):(function(n){return is(n,"c",Hd)})(e)?(e.preventDefault(),Dr(t,t3,e)):(function(n){return is(n,"x",Hd)})(e)?(e.preventDefault(),Dr(t,S7,e)):oM(e)&&(e.preventDefault(),Dr(t,NC,e))}(function(r){return r.ctrlKey||r.shiftKey||r.altKey||r.metaKey})(e)&&Dr(t,Gle,e)}}],["pointerdown",function(e,t){const r=e.target,n=e.pointerType;S1(r)&&n!=="touch"&&n!=="pen"&&e.button===0&&Ol(t,(()=>{rM(r)||(PC=!0)}))}],["compositionstart",function(e,t){Ol(t,(()=>{const r=xr();if(Jt(r)&&!t.isComposing()){const n=r.anchor,s=r.anchor.getNode();Qi(n.key),(e.timeStamp<Zy+EC||n.type==="element"||!r.isCollapsed()||s.getFormat()!==r.format||yr(s)&&s.getStyle()!==r.style)&&Dr(t,Mp,yle)}}))}],["compositionend",function(e,t){Em?ky=!0:Kp||!Tv&&!_4?Ol(t,(()=>{cw(t,e.data)})):(E5=!0,A5=e.data)}],["input",function(e,t){e.stopPropagation(),Ol(t,(()=>{if(Is(e.target)&&rM(e.target))return;const r=xr(),n=e.data,s=Yz(e);if(n!=null&&Jt(r)&&qz(r,s,n,e.timeStamp,!1)){ky&&(cw(t,n),ky=!1);const a=r.anchor.getNode(),i=mu(Ec(t));if(i===null)return;const o=r.isBackward(),c=o?r.anchor.offset:r.focus.offset,u=o?r.focus.offset:r.anchor.offset;w4&&!r.isCollapsed()&&yr(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,c)+n+a.getTextContent().slice(c+u)===vW(i.anchorNode)||Dr(t,Mp,n);const d=n.length;Em&&d>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(r.anchor.offset-=d),Tv||Kp||_4||!t.isComposing()||(Zy=0,Qi(null))}else I7(!1,t,n!==null?n:void 0),ky&&(cw(t,n||void 0),ky=!1);(function(){Ji();const a=aa();_z(a)})()}),{event:e}),gp=null}],["click",function(e,t){Ol(t,(()=>{const r=xr(),n=mu(Ec(t)),s=_1();if(n){if(Jt(r)){const a=r.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&r.isCollapsed()&&!li(i)&&Ks().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&r.is(s))n.removeAllRanges(),r.dirty=!0;else if(e.detail===3&&!r.isCollapsed()&&i!==r.focus.getNode()){const o=(function(c,u){let d=c;for(;d!==Ks()&&d!=null;){if(u(d))return d;d=d.getParent()}return null})(i,(c=>Bt(c)&&!c.isInline()));Bt(o)&&o.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=n.anchorNode;(Is(a)||T0(a))&&ro(T7(s,n,t,e))}}Dr(t,v7,e)}))}],["cut",zd],["copy",zd],["dragstart",zd],["dragover",zd],["dragend",zd],["paste",zd],["focus",zd],["blur",zd],["drop",zd]];w4&&AC.push(["beforeinput",(e,t)=>(function(r,n){const s=r.inputType,a=Yz(r);s==="deleteCompositionText"||Em&&bW(n)||s!=="insertCompositionText"&&Ol(n,(()=>{const i=xr();if(s==="deleteContentBackward"){if(i===null){const g=_1();if(!Jt(g))return;ro(g.clone())}if(Jt(i)){const g=i.anchor.key===i.focus.key;if(o=r.timeStamp,Hz==="MediaLast"&&o<Zy+EC&&n.isComposing()&&g){if(Qi(null),Zy=0,setTimeout((()=>{Ol(n,(()=>{Qi(null)}))}),EC),Jt(i)){const p=i.anchor.getNode();p.markDirty(),yr(p)||tr(142),Kz(i,p)}}else{Qi(null),r.preventDefault();const p=i.anchor.getNode(),y=p.getTextContent(),v=p.canInsertTextAfter(),C=i.anchor.offset===0&&i.focus.offset===y.length;let w=bF&&g&&!C&&v;if(w&&i.isCollapsed()&&(w=!Jn(RC(i.anchor,!0))),!w){Dr(n,gm,!0);const _=xr();bF&&Jt(_)&&_.isCollapsed()&&(nm=_,setTimeout((()=>nm=null)))}}return}}var o;if(!Jt(i))return;const c=r.data;gp!==null&&I7(!1,n,gp),i.dirty&&gp===null||!i.isCollapsed()||li(i.anchor.getNode())||a===null||i.applyDOMRange(a),gp=null;const u=i.anchor,d=i.focus,f=u.getNode(),h=d.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(r.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Dr(n,Mp,r);break;case"insertFromComposition":Qi(null),Dr(n,Mp,r);break;case"insertLineBreak":Qi(null),Dr(n,Fp,!1);break;case"insertParagraph":Qi(null),ev&&!Kp?(ev=!1,Dr(n,Fp,!1)):Dr(n,Av,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Dr(n,b7,r);break;case"deleteByComposition":(function(g,p){return g!==p||Bt(g)||Bt(p)||!pm(g)||!pm(p)})(f,h)&&Dr(n,TC,r);break;case"deleteByDrag":case"deleteByCut":Dr(n,TC,r);break;case"deleteContent":Dr(n,gm,!1);break;case"deleteWordBackward":Dr(n,jv,!0);break;case"deleteWordForward":Dr(n,jv,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Dr(n,Pv,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Dr(n,Pv,!1);break;case"formatStrikeThrough":Dr(n,wo,"strikethrough");break;case"formatBold":Dr(n,wo,"bold");break;case"formatItalic":Dr(n,wo,"italic");break;case"formatUnderline":Dr(n,wo,"underline");break;case"historyUndo":Dr(n,w7,void 0);break;case"historyRedo":Dr(n,_7,void 0)}else{if(c===`
`)r.preventDefault(),Dr(n,Fp,!1);else if(c===p0)r.preventDefault(),Dr(n,Av,void 0);else if(c==null&&r.dataTransfer){const g=r.dataTransfer.getData("text/plain");r.preventDefault(),i.insertRawText(g)}else c!=null&&qz(i,a,c,r.timeStamp,!0)?(r.preventDefault(),Dr(n,Mp,c)):gp=c;Gz=r.timeStamp}}))})(e,t)]);let Zy=0,Hz=null,Gz=0,gp=null;const P4=new WeakMap;let jC=!1,PC=!1,ev=!1,ky=!1,E5=!1,A5="",nm=null,Vz=[0,"",0,"root",0];function qz(e,t,r,n,s){const a=e.anchor,i=e.focus,o=a.getNode(),c=aa(),u=mu(Ec(c)),d=u!==null?u.anchorNode:null,f=a.key,h=c.getElementByKey(f),g=r.length;return f!==i.key||!yr(o)||(!s&&(!w4||Gz<n+50)||o.isDirty()&&g<2||xW(r))&&a.offset!==i.offset&&!o.isComposing()||Gd(o)||o.isDirty()&&g>1||(s||!w4)&&h!==null&&!o.isComposing()&&d!==Xp(h)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||(function(p,y){if(y.isSegmented())return!0;if(!p.isCollapsed())return!1;const v=p.anchor.offset,C=y.getParentOrThrow(),w=pm(y);return v===0?!y.canInsertTextBefore()||!C.canInsertTextBefore()&&!y.isComposing()||w||(function(_){const T=_.getPreviousSibling();return(yr(T)||Bt(T)&&T.isInline())&&!T.canInsertTextAfter()})(y):v===y.getTextContentSize()&&(!y.canInsertTextAfter()||!C.canInsertTextAfter()&&!y.isComposing()||w)})(e,o)}function MF(e,t){return T0(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function OF(e,t,r){const{anchorNode:n,anchorOffset:s,focusNode:a,focusOffset:i}=e;jC&&(jC=!1,MF(n,s)&&MF(a,i)&&!nm)||Ol(t,(()=>{if(!r)return void ro(null);if(!v2(t,n,a))return;let o=xr();if(nm&&Jt(o)&&o.isCollapsed()){const c=o.anchor,u=nm.anchor;(c.key===u.key&&c.offset===u.offset+1||c.offset===1&&u.getNode().is(c.getNode().getPreviousSibling()))&&(o=nm.clone(),ro(o))}if(nm=null,Jt(o)){const c=o.anchor,u=c.getNode();if(o.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(o.dirty=!0);const d=Ec(t).event,f=d?d.timeStamp:performance.now(),[h,g,p,y,v]=Vz,C=Ks(),w=t.isComposing()===!1&&C.getTextContent()==="";if(f<v+200&&c.offset===p&&c.key===y)e4(o,h,g);else if(c.type==="text")yr(u)||tr(141),Kz(o,u);else if(c.type==="element"&&!w){Bt(u)||tr(259);const _=c.getNode();_.isEmpty()?(function(T,E){const A=E.getTextFormat(),F=E.getTextStyle();e4(T,A,F)})(o,_):e4(o,0,"")}}else{const d=c.key,f=o.focus.key,h=o.getNodes(),g=h.length,p=o.isBackward(),y=p?i:s,v=p?s:i,C=p?f:d,w=p?d:f;let _=xle,T=!1;for(let E=0;E<g;E++){const A=h[E],F=A.getTextContentSize();if(yr(A)&&F!==0&&!(E===0&&A.__key===C&&y===F||E===g-1&&A.__key===w&&v===0)&&(T=!0,_&=A.getFormat(),_===0))break}o.format=T?_:0}}Dr(t,jz,void 0)}))}function e4(e,t,r){e.format===t&&e.style===r||(e.format=t,e.style=r,e.dirty=!0)}function Kz(e,t){e4(e,t.getFormat(),t.getStyle())}function Yz(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function cw(e,t){const r=e._compositionKey;if(Qi(null),r!==null&&t!=null){if(t===""){const n=qa(r),s=Xp(e.getElementByKey(r));return void(s!==null&&s.nodeValue!==null&&yr(n)&&L7(n,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const n=xr();if(Jt(n)){const s=n.focus;return n.anchor.set(s.key,s.offset,s.type),void Dr(e,j4,null)}}}I7(!0,e,t)}function Xz(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const Op=new Map;function Jz(e){const t=kce(e.target);if(t===null)return;const r=fW(t.anchorNode);if(r===null)return;PC&&(PC=!1,Ol(r,(()=>{const c=_1(),u=t.anchorNode;(Is(u)||T0(u))&&ro(T7(c,t,r,e))})));const n=R7(r),s=n[n.length-1],a=s._key,i=Op.get(a),o=i||s;o!==r&&OF(t,o,!1),OF(t,r,!0),r!==s?Op.set(a,r):i&&Op.delete(a)}function DF(e){e._lexicalHandled=!0}function RF(e){return e._lexicalHandled===!0}function Vle(e){const t=e.ownerDocument,r=P4.get(t);if(r===void 0)return;const n=r-1;n>=0||tr(164),P4.set(t,n),n===0&&t.removeEventListener("selectionchange",Jz);const s=l3(e);D7(s)?((function(i){if(i._parentEditor!==null){const o=R7(i),c=o[o.length-1]._key;Op.get(c)===i&&Op.delete(c)}else Op.delete(i._key)})(s),e.__lexicalEditor=null):s&&tr(198);const a=Xz(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function FC(e,t,r){Ji();const n=e.__key,s=e.getParent();if(s===null)return;const a=(function(o){const c=xr();if(!Jt(c)||!Bt(o))return c;const{anchor:u,focus:d}=c,f=u.getNode(),h=d.getNode();return IC(f,o)&&u.set(o.__key,0,"element"),IC(h,o)&&d.set(o.__key,0,"element"),c})(e);let i=!1;if(Jt(a)&&t){const o=a.anchor,c=a.focus;o.key===n&&(M4(o,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),c.key===n&&(M4(c,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else ho(a)&&t&&e.isSelected()&&e.selectPrevious();if(Jt(a)&&t&&!i){const o=e.getIndexWithinParent();xm(e),F4(a,s,o,-1)}else xm(e);r||qo(s)||s.canBeEmpty()||!s.isEmpty()||FC(s,t),t&&a&&li(s)&&s.isEmpty()&&s.selectEnd()}class b1{static getType(){const{ownNodeType:t}=W7(this);return t===void 0&&tr(64,this.name),t}static clone(t){tr(65,this.name)}$config(){return{}}config(t,r){const n=r.extends||Object.getPrototypeOf(this.constructor);return Object.assign(r,{extends:n,type:t}),{[t]:r}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),pce(this,t)}getType(){return this.__type}isInline(){tr(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const r=qa(t);if(r===null)break;t=r.__parent}return!1}isSelected(t){const r=t||xr();if(r==null)return!1;const n=r.getNodes().some((s=>s.__key===this.__key));if(yr(this))return n;if(Jt(r)&&r.anchor.type==="element"&&r.focus.type==="element"){if(r.isCollapsed())return!1;const s=this.getParent();if(Jn(this)&&this.isInline()&&s){const a=r.isBackward()?r.focus:r.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return n}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let r=t.getFirstChild(),n=0;for(;r!==null;){if(this.is(r))return n;n++,r=r.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:qa(t)}getParentOrThrow(){const t=this.getParent();return t===null&&tr(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const r=t.getParent();if(qo(r))return Bt(t)||t===this&&Jn(t)||tr(194),t;t=r}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&tr(67,this.__key),t}getParents(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r),r=r.getParent();return t}getParentKeys(){const t=[];let r=this.getParent();for(;r!==null;)t.push(r.__key),r=r.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:qa(t)}getPreviousSiblings(){const t=[],r=this.getParent();if(r===null)return t;let n=r.getFirstChild();for(;n!==null&&!n.is(this);)t.push(n),n=n.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:qa(t)}getNextSiblings(){const t=[];let r=this.getNextSibling();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getCommonAncestor(t){const r=Bt(this)?this:this.getParent(),n=Bt(t)?t:t.getParent(),s=r&&n?r4(r,n):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const r=r4(this,t);return r!==null&&(r.type==="descendant"||(r.type==="branch"?kW(r)===-1:(r.type!=="same"&&r.type!=="ancestor"&&tr(279),!1)))}isParentOf(t){const r=r4(this,t);return r!==null&&r.type==="ancestor"}getNodesBetween(t){const r=this.isBefore(t),n=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),n.push(a)),a===t)break;const o=Bt(a)?r?a.getFirstChild():a.getLastChild():null;if(o!==null){a=o;continue}const c=r?a.getNextSibling():a.getPreviousSibling();if(c!==null){a=c;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||n.push(u),u===t)break;let d=null,f=u;do{if(f===null&&tr(68),d=r?f.getNextSibling():f.getPreviousSibling(),f=f.getParent(),f===null)break;d!==null||s.has(f.__key)||n.push(f)}while(d===null);a=d}return r||n.reverse(),n}isDirty(){const t=aa()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=qa(this.__key);return t===null&&tr(113),t}getWritable(){Ji();const t=oh(),r=aa(),n=t._nodeMap,s=this.__key,a=this.getLatest(),i=r._cloneNotNeeded,o=xr();if(o!==null&&o.setCachedNodes(null),i.has(s))return R4(a),a;const c=U7(a);return i.add(s),R4(c),n.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,r){tr(70)}updateDOM(t,r,n){tr(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){tr(18,this.name)}updateFromJSON(t){return(function(r,n){const s=r.getWritable(),a=n.$;let i=a;for(const o of Cz(s).flatKeys)o in n&&(i!==void 0&&i!==a||(i={...a}),i[o]=n[o]);return(s.__state||i)&&jle(r).updateFromJSON(i),s})(this,t)}static transform(){return null}remove(t){FC(this,!0,t)}replace(t,r){Ji();let n=xr();n!==null&&(n=n.clone()),D5(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,o=t.getWritable(),c=this.getParentOrThrow().getWritable(),u=c.__size;xm(o);const d=s.getPreviousSibling(),f=s.getNextSibling(),h=s.__prev,g=s.__next,p=s.__parent;if(FC(s,!1,!0),d===null?c.__first=i:d.getWritable().__next=i,o.__prev=h,f===null?c.__last=i:f.getWritable().__prev=i,o.__next=g,o.__parent=p,c.__size=u,r&&(Bt(this)&&Bt(o)||tr(139),this.getChildren().forEach((y=>{o.append(y)}))),Jt(n)){ro(n);const y=n.anchor,v=n.focus;y.key===a&&$F(y,o),v.key===a&&$F(v,o)}return Ff()===a&&Qi(i),o}insertAfter(t,r=!0){Ji(),D5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=xr();let o=!1,c=!1;if(a!==null){const g=t.getIndexWithinParent();if(xm(s),Jt(i)){const p=a.__key,y=i.anchor,v=i.focus;o=y.type==="element"&&y.key===p&&y.offset===g+1,c=v.type==="element"&&v.key===p&&v.offset===g+1}}const u=this.getNextSibling(),d=this.getParentOrThrow().getWritable(),f=s.__key,h=n.__next;if(u===null?d.__last=f:u.getWritable().__prev=f,d.__size++,n.__next=f,s.__next=h,s.__prev=n.__key,s.__parent=n.__parent,r&&Jt(i)){const g=this.getIndexWithinParent();F4(i,d,g+1);const p=d.__key;o&&i.anchor.set(p,g+2,"element"),c&&i.focus.set(p,g+2,"element")}return t}insertBefore(t,r=!0){Ji(),D5(this,t);const n=this.getWritable(),s=t.getWritable(),a=s.__key;xm(s);const i=this.getPreviousSibling(),o=this.getParentOrThrow().getWritable(),c=n.__prev,u=this.getIndexWithinParent();i===null?o.__first=a:i.getWritable().__next=a,o.__size++,n.__prev=a,s.__prev=c,s.__next=n.__key,s.__parent=n.__parent;const d=xr();return r&&Jt(d)&&F4(d,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return Rs()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,r){Ji();const n=this.getPreviousSibling(),s=this.getParentOrThrow();if(n===null)return s.select(0,0);if(Bt(n))return n.select();if(!yr(n)){const a=n.getIndexWithinParent()+1;return s.select(a,a)}return n.select(t,r)}selectNext(t,r){Ji();const n=this.getNextSibling(),s=this.getParentOrThrow();if(n===null)return s.select();if(Bt(n))return n.select(0,0);if(!yr(n)){const a=n.getIndexWithinParent();return s.select(a,a)}return n.select(t,r)}markDirty(){this.getWritable()}reconcileObservedMutation(t,r){this.markDirty()}}class m2 extends b1{static getType(){return"linebreak"}static clone(t){return new m2(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>(function(r){const n=r.parentElement;if(n!==null&&I4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&uw(s)){const a=n.lastChild;if(a===r||a.previousSibling===r&&uw(a))return!0}}return!1})(t)||(function(r){const n=r.parentElement;if(n!==null&&I4(n)){const s=n.firstChild;if(s===r||s.nextSibling===r&&uw(s))return!1;const a=n.lastChild;if(a===r||a.previousSibling===r&&uw(a))return!0}return!1})(t)?null:{conversion:qle,priority:0}}}static importJSON(t){return nd().updateFromJSON(t)}}function qle(e){return{node:nd()}}function nd(){return Qo(new m2)}function a0(e){return e instanceof m2}function uw(e){return T0(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function j5(e,t){return 16&t?"code":t&d7?"mark":32&t?"sub":64&t?"sup":null}function P5(e,t){return 1&t?"strong":2&t?"em":"span"}function Qz(e,t,r,n,s){const a=n.classList;let i=Dp(s,"base");i!==void 0&&a.add(...i),i=Dp(s,"underlineStrikethrough");let o=!1;const c=t&k4&&t&S4;i!==void 0&&(r&k4&&r&S4?(o=!0,c||a.add(...i)):c&&a.remove(...i));for(const u in jm){const d=jm[u];if(i=Dp(s,u),i!==void 0)if(r&d){if(o&&(u==="underline"||u==="strikethrough")){t&d&&a.remove(...i);continue}t&d&&(!c||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&d&&a.remove(...i)}}function Zz(e,t,r){const n=t.firstChild,s=r.isComposing(),a=e+(s?Z_:"");if(n==null)t.textContent=a;else{const i=n.nodeValue;if(i!==a)if(s||Em){const[o,c,u]=(function(d,f){const h=d.length,g=f.length;let p=0,y=0;for(;p<h&&p<g&&d[p]===f[p];)p++;for(;y+p<h&&y+p<g&&d[h-y-1]===f[g-y-1];)y++;return[p,h-p-y,f.slice(p,g-y)]})(i,a);c!==0&&n.deleteData(o,c),n.insertData(o,u)}else n.nodeValue=a}}function IF(e,t,r,n,s,a){Zz(s,e,t);const i=a.theme.text;i!==void 0&&Qz(0,0,n,e,i)}function dw(e,t){const r=document.createElement(t);return r.appendChild(e),r}class ih extends b1{static getType(){return"text"}static clone(t){return new ih(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",r){super(r),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return _le[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===Ff()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const r=jm[t];return!!(this.getFormat()&r)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,r){return D4(this.getLatest().__format,t,r)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,r){const n=this.__format,s=j5(0,n),a=P5(0,n),i=s===null?a:s,o=document.createElement(i);let c=o;this.hasFormat("code")&&o.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(a),o.appendChild(c)),IF(c,this,0,n,this.__text,t);const u=this.__style;return u!==""&&(o.style.cssText=u),o}updateDOM(t,r,n){const s=this.__text,a=t.__format,i=this.__format,o=j5(0,a),c=j5(0,i),u=P5(0,a),d=P5(0,i);if((o===null?u:o)!==(c===null?d:c))return!0;if(o===c&&u!==d){const y=r.firstChild;y==null&&tr(48);const v=document.createElement(d);return IF(v,this,0,i,s,n),r.replaceChild(v,y),!1}let f=r;c!==null&&o!==null&&(f=r.firstChild,f==null&&tr(49)),Zz(s,f,this);const h=n.theme.text;h!==void 0&&a!==i&&Qz(0,a,i,f,h);const g=t.__style,p=this.__style;return g!==p&&(r.style.cssText=p),!1}static importDOM(){return{"#text":()=>({conversion:Jle,priority:0}),b:()=>({conversion:Yle,priority:0}),code:()=>({conversion:Wd,priority:0}),em:()=>({conversion:Wd,priority:0}),i:()=>({conversion:Wd,priority:0}),mark:()=>({conversion:Wd,priority:0}),s:()=>({conversion:Wd,priority:0}),span:()=>({conversion:Kle,priority:0}),strong:()=>({conversion:Wd,priority:0}),sub:()=>({conversion:Wd,priority:0}),sup:()=>({conversion:Wd,priority:0}),u:()=>({conversion:Wd,priority:0})}}static importJSON(t){return pa().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:r}=super.exportDOM(t);return Is(r)||tr(132),r.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?r.style.textTransform="lowercase":this.hasFormat("uppercase")?r.style.textTransform="uppercase":this.hasFormat("capitalize")&&(r.style.textTransform="capitalize"),this.hasFormat("bold")&&(r=dw(r,"b")),this.hasFormat("italic")&&(r=dw(r,"i")),this.hasFormat("strikethrough")&&(r=dw(r,"s")),this.hasFormat("underline")&&(r=dw(r,"u")),{element:r}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,r){}setFormat(t){const r=this.getWritable();return r.__format=typeof t=="string"?jm[t]:t,r}setDetail(t){const r=this.getWritable();return r.__detail=typeof t=="string"?vle[t]:t,r}setStyle(t){const r=this.getWritable();return r.__style=t,r}toggleFormat(t){const r=D4(this.getFormat(),t,null);return this.setFormat(r)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const r=wle[t];if(this.__mode===r)return this;const n=this.getWritable();return n.__mode=r,n}setTextContent(t){if(this.__text===t)return this;const r=this.getWritable();return r.__text=t,r}select(t,r){Ji();let n=t,s=r;const a=xr(),i=this.getTextContent(),o=this.__key;if(typeof i=="string"){const c=i.length;n===void 0&&(n=c),s===void 0&&(s=c)}else n=0,s=0;if(!Jt(a))return rW(o,n,o,s,"text","text");{const c=Ff();c!==a.anchor.key&&c!==a.focus.key||Qi(o),a.setTextNodeRange(this,n,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,r,n,s){const a=this.getWritable(),i=a.__text,o=n.length;let c=t;c<0&&(c=o+c,c<0&&(c=0));const u=xr();if(s&&Jt(u)){const f=t+o;u.setTextNodeRange(a,f,a,f)}const d=i.slice(0,c)+n+i.slice(c+r);return a.__text=d,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Ji();const r=this.getLatest(),n=r.getTextContent();if(n==="")return[];const s=r.__key,a=Ff(),i=n.length;t.sort(((j,P)=>j-P)),t.push(i);const o=[],c=t.length;for(let j=0,P=0;j<i&&P<=c;P++){const D=t[P];D>j&&(o.push(n.slice(j,D)),j=D)}const u=o.length;if(u===1)return[r];const d=o[0],f=r.getParent();let h;const g=r.getFormat(),p=r.getStyle(),y=r.__detail;let v=!1,C=null,w=null;const _=xr();if(Jt(_)){const[j,P]=_.isBackward()?[_.focus,_.anchor]:[_.anchor,_.focus];j.type==="text"&&j.key===s&&(C=j),P.type==="text"&&P.key===s&&(w=P)}r.isSegmented()?(h=pa(d),h.__format=g,h.__style=p,h.__detail=y,h.__state=TF(r,h),v=!0):h=r.setTextContent(d);const T=[h];for(let j=1;j<u;j++){const P=pa(o[j]);P.__format=g,P.__style=p,P.__detail=y,P.__state=TF(r,P);const D=P.__key;a===s&&Qi(D),T.push(P)}const E=C?C.offset:null,A=w?w.offset:null;let F=0;for(const j of T){if(!C&&!w)break;const P=F+j.getTextContentSize();if(C!==null&&E!==null&&E<=P&&E>=F&&(C.set(j.getKey(),E-F,"text"),E<P&&(C=null)),w!==null&&A!==null&&A<=P&&A>=F){w.set(j.getKey(),A-F,"text");break}F=P}if(f!==null){(function(D){const B=D.getPreviousSibling(),V=D.getNextSibling();B!==null&&R4(B),V!==null&&R4(V)})(this);const j=f.getWritable(),P=this.getIndexWithinParent();v?(j.splice(P,0,T),this.remove()):j.splice(P,1,T),Jt(_)&&F4(_,f,P,u-1)}return T}mergeWithSibling(t){const r=t===this.getPreviousSibling();r||t===this.getNextSibling()||tr(50);const n=this.__key,s=t.__key,a=this.__text,i=a.length;Ff()===s&&Qi(n);const o=xr();if(Jt(o)){const f=o.anchor,h=o.focus;f!==null&&f.key===s&&qF(f,r,n,t,i),h!==null&&h.key===s&&qF(h,r,n,t,i)}const c=t.__text,u=r?c+a:a+c;this.setTextContent(u);const d=this.getWritable();return t.remove(),d}isTextEntity(){return!1}}function Kle(e){return{forChild:k7(e.style),node:null}}function Yle(e){const t=e,r=t.style.fontWeight==="normal";return{forChild:k7(t.style,r?void 0:"bold"),node:null}}const LF=new WeakMap;function Xle(e){if(!Is(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function Jle(e){const t=e;e.parentElement===null&&tr(129);let r=t.textContent||"";if((function(n){let s,a=n.parentNode;const i=[n];for(;a!==null&&(s=LF.get(a))===void 0&&!Xle(a);)i.push(a),a=a.parentNode;const o=s===void 0?a:s;for(let c=0;c<i.length;c++)LF.set(i[c],o);return o})(t)!==null){const n=r.split(/(\r?\n|\t)/),s=[],a=n.length;for(let i=0;i<a;i++){const o=n[i];o===`
`||o===`\r
`?s.push(nd()):o==="	"?s.push(w1()):o!==""&&s.push(pa(o))}return{node:s}}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),r==="")return{node:null};if(r[0]===" "){let n=t,s=!0;for(;n!==null&&(n=BF(n,!1))!==null;){const a=n.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(r=r.slice(1)),s=!1;break}}s&&(r=r.slice(1))}if(r[r.length-1]===" "){let n=t,s=!0;for(;n!==null&&(n=BF(n,!0))!==null;)if((n.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(r=r.slice(0,r.length-1))}return r===""?{node:null}:{node:pa(r)}}function BF(e,t){let r=e;for(;;){let n;for(;(n=t?r.nextSibling:r.previousSibling)===null;){const a=r.parentElement;if(a===null)return null;r=a}if(r=n,Is(r)){const a=r.style.display;if(a===""&&!$C(r)||a!==""&&!a.startsWith("inline"))return null}let s=r;for(;(s=t?r.firstChild:r.lastChild)!==null;)r=s;if(T0(r))return r;if(r.nodeName==="BR")return null}}const Qle={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Wd(e){const t=Qle[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:k7(e.style,t),node:null}}function pa(e=""){return Qo(new ih(e))}function yr(e){return e instanceof ih}function k7(e,t){const r=e.fontWeight,n=e.textDecoration.split(" "),s=r==="700"||r==="bold",a=n.includes("line-through"),i=e.fontStyle==="italic",o=n.includes("underline"),c=e.verticalAlign;return u=>(yr(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),o&&!u.hasFormat("underline")&&u.toggleFormat("underline"),c!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),c!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class g2 extends ih{static getType(){return"tab"}static clone(t){return new g2(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const r=super.createDOM(t),n=Dp(t.theme,"tab");return n!==void 0&&r.classList.add(...n),r}static importJSON(t){return w1().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&tr(126),super.setTextContent("	")}spliceText(t,r,n,s){return n===""&&r===0||n==="	"&&r===1||tr(286),this}setDetail(t){return t!==2&&tr(127),this}setMode(t){return t!=="normal"&&tr(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function w1(){return Qo(new g2)}function r3(e){return e instanceof g2}class Zle{constructor(t,r,n){this._selection=null,this.key=t,this.offset=r,this.type=n}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:SW(wc(x0(this,"next")),wc(x0(t,"next")))<0}getNode(){const t=qa(this.key);return t===null&&tr(20),t}set(t,r,n,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===r&&this.type===n||(this.key=t,this.offset=r,this.type=n,p2()||(Ff()===i&&Qi(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function sd(e,t,r){return new Zle(e,t,r)}function F5(e,t){let r=t.__key,n=e.offset,s="element";if(yr(t)){s="text";const a=t.getTextContentSize();n>a&&(n=a)}else if(!Bt(t)){const a=t.getNextSibling();if(yr(a))r=a.__key,n=0,s="text";else{const i=t.getParent();i&&(r=i.__key,n=t.getIndexWithinParent()+1)}}e.set(r,n,s)}function $F(e,t){if(Bt(t)){const r=t.getLastDescendant();Bt(r)||yr(r)?F5(e,r):F5(e,t)}else F5(e,t)}class n3{constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!ho(t))return!1;const r=this._nodes,n=t._nodes;return r.size===n.size&&Array.from(r).every((s=>n.has(s)))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new n3(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const r=this.getNodes(),n=r.length,s=r[n-1];let a;if(yr(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<n;i++)r[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=this._nodes,n=[];for(const s of r){const a=qa(s);a!==null&&n.push(a)}return p2()||(this._cachedNodes=n),n}getTextContent(){const t=this.getNodes();let r="";for(let n=0;n<t.length;n++)r+=t[n].getTextContent();return r}deleteNodes(){const t=this.getNodes();if((xr()||_1())===this&&t[0]){const r=to(t[0],"next");Ice(Xf(r,r))}for(const r of t)r.remove()}}function Jt(e){return e instanceof Zm}class Zm{constructor(t,r,n,s){this.anchor=t,this.focus=r,t._selection=this,r._selection=this,this._cachedNodes=null,this.format=n,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Jt(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const r=(function(n){const s=[],[a,i]=n.getTextSlices();a&&s.push(a.caret.origin);const o=new Set,c=new Set;for(const u of n)if(td(u)){const{origin:d}=u;s.length===0?o.add(d):(c.add(d),s.push(d))}else{const{origin:d}=u;Bt(d)&&c.has(d)||s.push(d)}if(i&&s.push(i.caret.origin),Rm(n.focus)&&Bt(n.focus.origin)&&n.focus.getNodeAtCaret()===null)for(let u=Ac(n.focus.origin,"previous");td(u)&&o.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=V7(u))o.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!Bt(u)||c.has(u)||u.isEmpty()||o.has(u))break;s.pop()}if(s.length===0&&n.isCollapsed()){const u=wc(n.anchor),d=wc(n.anchor.getFlipped()),f=g=>Bf(g)?g.origin:g.getNodeAtCaret(),h=f(u)||f(d)||(n.anchor.getNodeAtCaret()?u.origin:d.origin);s.push(h)}return s})(TW(hM(this),"next"));return p2()||(this._cachedNodes=r),r}setTextNodeRange(t,r,n,s){this.anchor.set(t.__key,r,"text"),this.focus.set(n.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const r=t[0],n=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[o,c]=MC(this);let u="",d=!0;for(let f=0;f<t.length;f++){const h=t[f];if(Bt(h)&&!h.isInline())d||(u+=`
`),d=!h.isEmpty();else if(d=!1,yr(h)){let g=h.getTextContent();h===r?h===n?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(g=o<c?g.slice(o,c):g.slice(c,o)):g=i?g.slice(o):g.slice(c):h===n&&(g=i?g.slice(0,c):g.slice(0,o)),u+=g}else!Jn(h)&&!a0(h)||h===n&&this.isCollapsed()||(u+=h.getTextContent())}return u}applyDOMRange(t){const r=aa(),n=r.getEditorState()._selection,s=tW(t.startContainer,t.startOffset,t.endContainer,t.endOffset,r,n);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),C4(this)}clone(){const t=this.anchor,r=this.focus;return new Zm(sd(t.key,t.offset,t.type),sd(r.key,r.offset,r.type),this.format,this.style)}toggleFormat(t){this.format=D4(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const r=jm[t];return!!(this.format&r)}insertRawText(t){const r=t.split(/(\r?\n|\t)/),n=[],s=r.length;for(let a=0;a<s;a++){const i=r[a];i===`
`||i===`\r
`?n.push(nd()):i==="	"?n.push(w1()):n.push(pa(i))}this.insertNodes(n)}insertText(t){const r=this.anchor,n=this.focus,s=this.format,a=this.style;let i=r,o=n;!this.isCollapsed()&&n.isBefore(r)&&(i=n,o=r),i.type==="element"&&(function(v,C,w,_){const T=v.getNode(),E=T.getChildAtIndex(v.offset),A=pa();if(A.setFormat(w),A.setStyle(_),P7(E))E.splice(0,0,[A]);else{const F=li(T)?Rs().append(A):A;E===null?T.append(F):E.insertBefore(F)}v.is(C)&&C.set(A.__key,0,"text"),v.set(A.__key,0,"text")})(i,o,s,a),o.type==="element"&&Lm(o,wc(x0(o,"next")));const c=i.offset;let u=o.offset;const d=this.getNodes(),f=d.length;let h=d[0];yr(h)||tr(26);const g=h.getTextContent().length,p=h.getParentOrThrow();let y=d[f-1];if(f===1&&o.type==="element"&&(u=g,o.set(i.key,u,"text")),this.isCollapsed()&&c===g&&(Gd(h)||!h.canInsertTextAfter()||!p.canInsertTextAfter()&&h.getNextSibling()===null)){let v=h.getNextSibling();if(yr(v)&&v.canInsertTextBefore()&&!Gd(v)||(v=pa(),v.setFormat(s),v.setStyle(a),p.canInsertTextAfter()?h.insertAfter(v):p.insertAfter(v)),v.select(0,0),h=v,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&c===0&&(Gd(h)||!h.canInsertTextBefore()||!p.canInsertTextBefore()&&h.getPreviousSibling()===null)){let v=h.getPreviousSibling();if(yr(v)&&!Gd(v)||(v=pa(),v.setFormat(s),p.canInsertTextBefore()?h.insertBefore(v):p.insertBefore(v)),v.select(),h=v,t!=="")return void this.insertText(t)}else if(h.isSegmented()&&c!==g){const v=pa(h.getTextContent());v.setFormat(s),h.replace(v),h=v}else if(!this.isCollapsed()&&t!==""){const v=y.getParent();if(!p.canInsertTextBefore()||!p.canInsertTextAfter()||Bt(v)&&(!v.canInsertTextBefore()||!v.canInsertTextAfter()))return this.insertText(""),eW(this.anchor,this.focus,null),void this.insertText(t)}if(f===1){if(pm(h)){const _=pa(t);return _.select(),void h.replace(_)}const v=h.getFormat(),C=h.getStyle();if(c!==u||v===s&&C===a){if(r3(h)){const _=pa(t);return _.setFormat(s),_.setStyle(a),_.select(),void h.replace(_)}}else{if(h.getTextContent()!==""){const _=pa(t);if(_.setFormat(s),_.setStyle(a),_.select(),c===0)h.insertBefore(_,!1);else{const[T]=h.splitText(c);T.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}h.setFormat(s),h.setStyle(a)}const w=u-c;h=h.spliceText(c,w,t,!0),h.getTextContent()===""?h.remove():this.anchor.type==="text"&&(h.isComposing()?this.anchor.offset-=t.length:(this.format=v,this.style=C))}else{const v=new Set([...h.getParentKeys(),...y.getParentKeys()]),C=Bt(h)?h:h.getParentOrThrow();let w=Bt(y)?y:y.getParentOrThrow(),_=y;if(!C.is(w)&&w.isInline())do _=w,w=w.getParentOrThrow();while(w.isInline());if(o.type==="text"&&(u!==0||y.getTextContent()==="")||o.type==="element"&&y.getIndexWithinParent()<u)if(yr(y)&&!pm(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const j=pa(y.getTextContent());y.replace(j),y=j}li(o.getNode())||o.type!=="text"||(y=y.spliceText(0,u,"")),v.add(y.__key)}else{const j=y.getParentOrThrow();j.canBeEmpty()||j.getChildrenSize()!==1?y.remove():j.remove()}else v.add(y.__key);const T=w.getChildren(),E=new Set(d),A=C.is(w),F=C.isInline()&&h.getNextSibling()===null?C:h;for(let j=T.length-1;j>=0;j--){const P=T[j];if(P.is(h)||Bt(P)&&P.isParentOf(h))break;P.isAttached()&&(!E.has(P)||P.is(_)?A||F.insertAfter(P,!1):P.remove())}if(!A){let j=w,P=null;for(;j!==null;){const D=j.getChildren(),B=D.length;(B===0||D[B-1].is(P))&&(v.delete(j.__key),P=j),j=j.getParent()}}if(pm(h))if(c===g)h.select();else{const j=pa(t);j.select(),h.replace(j)}else h=h.spliceText(c,g-c,t,!0),h.getTextContent()===""?h.remove():h.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let j=1;j<f;j++){const P=d[j],D=P.__key;v.has(D)||P.remove()}}}removeText(){const t=xr()===this;n4(this,Lce(hM(this))),t&&xr()!==this&&ro(this)}formatText(t,r=null){if(this.isCollapsed())return this.toggleFormat(t),void Qi(null);const n=this.getNodes(),s=[];for(const T of n)yr(T)&&s.push(T);const a=T=>{n.forEach((E=>{if(Bt(E)){const A=E.getFormatFlags(t,T);E.setTextFormat(A)}}))},i=s.length;if(i===0)return this.toggleFormat(t),Qi(null),void a(r);const o=this.anchor,c=this.focus,u=this.isBackward(),d=u?c:o,f=u?o:c;let h=0,g=s[0],p=d.type==="element"?0:d.offset;if(d.type==="text"&&p===g.getTextContentSize()&&(h=1,g=s[1],p=0),g==null)return;const y=g.getFormatFlags(t,r);a(y);const v=i-1;let C=s[v];const w=f.type==="text"?f.offset:C.getTextContentSize();if(g.is(C)){if(p===w)return;if(Gd(g)||p===0&&w===g.getTextContentSize())g.setFormat(y);else{const T=g.splitText(p,w),E=p===0?T[0]:T[1];E.setFormat(y),d.type==="text"&&d.set(E.__key,0,"text"),f.type==="text"&&f.set(E.__key,w-p,"text")}return void(this.format=y)}p===0||Gd(g)||([,g]=g.splitText(p),p=0),g.setFormat(y);const _=C.getFormatFlags(t,y);w>0&&(w===C.getTextContentSize()||Gd(C)||([C]=C.splitText(w)),C.setFormat(_));for(let T=h+1;T<v;T++){const E=s[T],A=E.getFormatFlags(t,_);E.setFormat(A)}d.type==="text"&&d.set(g.__key,p,"text"),f.type==="text"&&f.set(C.__key,w,"text"),this.format=y|_}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const p=xr();return Jt(p)||tr(134),p.insertNodes(t)}const r=(this.isBackward()?this.focus:this.anchor).getNode(),n=I5(r,vc),s=t[t.length-1];if(Bt(n)&&"__language"in n){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const p=M5(this);n.splice(p,0,t),s.selectEnd()}return}if(!t.some((p=>(Bt(p)||Jn(p))&&!p.isInline()))){Bt(n)||tr(211,r.constructor.name,r.getType());const p=M5(this);return n.splice(p,0,t),void s.selectEnd()}const a=(function(p){const y=Rs();let v=null;for(let C=0;C<p.length;C++){const w=p[C],_=a0(w);if(_||Jn(w)&&w.isInline()||Bt(w)&&w.isInline()||yr(w)||w.isParentRequired()){if(v===null&&(v=w.createParentElementNode(),y.append(v),_))continue;v!==null&&v.append(w)}else y.append(w),v=null}return y})(t),i=a.getLastDescendant(),o=a.getChildren(),c=!Bt(n)||!n.isEmpty()?this.insertParagraph():null,u=o[o.length-1];let d=o[0];var f;Bt(f=d)&&vc(f)&&!f.isEmpty()&&Bt(n)&&(!n.isEmpty()||n.canMergeWhenEmpty())&&(Bt(n)||tr(211,r.constructor.name,r.getType()),n.append(...d.getChildren()),d=o[1]),d&&(n===null&&tr(212,r.constructor.name,r.getType()),(function(p,y,v){const C=y.getParentOrThrow().getLastChild();let w=y;const _=[y];for(;w!==C;)w.getNextSibling()||tr(140),w=w.getNextSibling(),_.push(w);let T=p;for(const E of _)T=T.insertAfter(E)})(n,d));const h=I5(i,vc);c&&Bt(h)&&(c.canMergeWhenEmpty()||vc(u))&&(h.append(...c.getChildren()),c.remove()),Bt(n)&&n.isEmpty()&&n.remove(),i.selectEnd();const g=Bt(n)?n.getLastChild():null;a0(g)&&h!==n&&g.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=Rs();return Ks().splice(this.anchor.offset,0,[i]),i.select(),i}const t=M5(this),r=I5(this.anchor.getNode(),vc);Bt(r)||tr(213);const n=r.getChildAtIndex(t),s=n?[n,...n.getNextSiblings()]:[],a=r.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const r=nd();if(this.insertNodes([r]),t){const n=r.getParentOrThrow(),s=r.getIndexWithinParent();n.select(s,s)}}extract(){const t=this.getNodes(),r=t.length,n=r-1,s=this.anchor,a=this.focus;let i=t[0],o=t[n];const[c,u]=MC(this);if(r===0)return[];if(r===1){if(yr(i)&&!this.isCollapsed()){const f=c>u?u:c,h=c>u?c:u,g=i.splitText(f,h),p=f===0?g[0]:g[1];return p!=null?[p]:[]}return[i]}const d=s.isBefore(a);if(yr(i)){const f=d?c:u;f===i.getTextContentSize()?t.shift():f!==0&&([,i]=i.splitText(f),t[0]=i)}if(yr(o)){const f=o.getTextContent().length,h=d?u:c;h===0?t.pop():h!==f&&([o]=o.splitText(h),t[n]=o)}return t}modify(t,r,n){if(KF(this,t,r,n))return;const s=t==="move",a=aa(),i=mu(Ec(a));if(!i)return;const o=a._blockCursorElement,c=a._rootElement,u=this.focus.getNode();if(c===null||o===null||!Bt(u)||u.isInline()||u.canBeEmpty()||LC(o,a,c),this.dirty){let d=Mm(a,this.anchor.key),f=Mm(a,this.focus.key);this.anchor.type==="text"&&(d=Xp(d)),this.focus.type==="text"&&(f=Xp(f)),d&&f&&nW(i,d,this.anchor.offset,f,this.focus.offset)}if((function(d,f,h,g){d.modify(f,h,g)})(i,t,r?"backward":"forward",n),i.rangeCount>0){const d=i.getRangeAt(0),f=this.anchor.getNode(),h=li(f)?f:_ce(f);if(this.applyDOMRange(d),this.dirty=!0,!s){const g=this.getNodes(),p=[];let y=!1;for(let v=0;v<g.length;v++){const C=g[v];IC(C,h)?p.push(C):y=!0}if(y&&p.length>0)if(r){const v=p[0];Bt(v)?v.selectStart():v.getParentOrThrow().selectStart()}else{const v=p[p.length-1];Bt(v)?v.selectEnd():v.getParentOrThrow().selectEnd()}i.anchorNode===d.startContainer&&i.anchorOffset===d.startOffset||(function(v){const C=v.focus,w=v.anchor,_=w.key,T=w.offset,E=w.type;w.set(C.key,C.offset,C.type,!0),C.set(_,T,E,!0)})(this)}}n==="lineboundary"&&KF(this,t,r,n,"decorators")}forwardDeletion(t,r,n){if(!n&&(t.type==="element"&&Bt(r)&&t.offset===r.getChildrenSize()||t.type==="text"&&t.offset===r.getTextContentSize())){const s=r.getParent(),a=r.getNextSibling()||(s===null?null:s.getNextSibling());if(Bt(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const r=this.isCollapsed();if(this.isCollapsed()){const n=this.anchor;let s=n.getNode();if(this.forwardDeletion(n,s,t))return;const a=K7(x0(n,t?"previous":"next"));if(a.getTextSlices().every((o=>o===null||o.distance===0))){let o={type:"initial"};for(const c of a.iterNodeCarets("shadowRoot"))if(td(c)){if(!c.origin.isInline()){if(c.origin.isShadowRoot()){if(o.type==="merge-block")break;if(Bt(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=wc(c);n4(this,Xf(u,u)),a.anchor.origin.remove()}return}o.type!=="merge-next-block"&&o.type!=="merge-block"||(o={block:o.block,caret:c,type:"merge-block"})}}else{if(o.type==="merge-block")break;if(Rm(c)){if(Bt(c.origin)){if(c.origin.isInline()){if(!c.origin.isParentOf(a.anchor.origin))break}else o={block:c.origin,type:"merge-next-block"};continue}if(Jn(c.origin)){if(!c.origin.isIsolated())if(o.type==="merge-next-block"&&(c.origin.isKeyboardSelectable()||!c.origin.isInline())&&Bt(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=C7();u.add(c.origin.getKey()),ro(u)}else c.origin.remove();return}break}}if(o.type==="merge-block"){const{caret:c,block:u}=o;return n4(this,Xf(!c.origin.isEmpty()&&u.isEmpty()?X7(to(u,c.direction)):a.anchor,c)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&n.offset===0&&zF(this,n.getNode()))return}else{const o=i.type==="text"?i.getNode():null;if(s=n.type==="text"?n.getNode():null,o!==null&&o.isSegmented()){const c=i.offset,u=o.getTextContentSize();if(o.is(s)||t&&c!==u||!t&&c!==0)return void WF(o,t,c)}else if(s!==null&&s.isSegmented()){const c=n.offset,u=s.getTextContentSize();if(s.is(o)||t&&c!==0||!t&&c!==u)return void WF(s,t,c)}(function(c,u){const d=c.anchor,f=c.focus,h=d.getNode(),g=f.getNode();if(h===g&&d.type==="text"&&f.type==="text"){const p=d.offset,y=f.offset,v=p<y,C=v?p:y,w=v?y:p,_=w-1;C!==_&&(function(T){return!(xW(T)||ece(T))})(h.getTextContent().slice(C,w))&&(u?f.set(f.key,_,f.type):d.set(d.key,_,d.type))}})(this,t)}}if(this.removeText(),t&&!r&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const n=this.anchor.getNode();n.isEmpty()&&li(n.getParent())&&n.getPreviousSibling()===null&&zF(this,n)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const r=this.anchor,n=r.getNode();if(this.forwardDeletion(r,n,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function ho(e){return e instanceof n3}function UF(e){const t=e.offset;if(e.type==="text")return t;const r=e.getNode();return t===r.getChildrenSize()?r.getTextContent().length:0}function MC(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[r,n]=t;return r.type==="element"&&n.type==="element"&&r.key===n.key&&r.offset===n.offset?[0,0]:[UF(r),UF(n)]}function zF(e,t){for(let r=t;r;r=r.getParent()){if(Bt(r)){if(r.collapseAtStart(e))return!0;if(qo(r))break}if(r.getPreviousSibling())break}return!1}const ece=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function WF(e,t,r){const n=e,s=n.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,o=0;for(let u=0;u<a;u++){const d=u===a-1;if(o=i,i+=s[u].length,t&&i===r||i>r||d){s.splice(u,1),d&&(o=void 0);break}}const c=s.join("").trim();c===""?n.remove():(n.setTextContent(c),n.select(o,o))}function HF(e,t,r,n){let s,a=t;if(Is(e)){let i=!1;const o=e.childNodes,c=o.length,u=n._blockCursorElement;a===c&&(i=!0,a=c-1);let d=o[a],f=!1;if(d===u)d=o[a+1],f=!0;else if(u!==null){const h=u.parentNode;e===h&&t>Array.prototype.indexOf.call(h.children,u)&&a--}if(s=Tp(d),yr(s))a=$f(s,i?"next":"previous");else{let h=Tp(e);if(h===null)return null;if(Bt(h)){const g=n.getElementByKey(h.getKey());g===null&&tr(214),[h,a]=h.getDOMSlot(g).resolveChildIndex(h,g,e,t),Bt(h)||tr(215),i&&a>=h.getChildrenSize()&&(a=Math.max(0,h.getChildrenSize()-1));let y=h.getChildAtIndex(a);if(Bt(y)&&(function(v,C,w){const _=v.getParent();return w===null||_===null||!_.canBeEmpty()||_!==w.getNode()})(y,0,r)){const v=i?y.getLastDescendant():y.getFirstDescendant();v===null?h=y:(y=v,h=Bt(y)?y:y.getParentOrThrow()),a=0}yr(y)?(s=y,h=null,a=$f(y,i?"next":"previous")):y!==h&&i&&!f&&(Bt(h)||tr(216),a=Math.min(h.getChildrenSize(),a+1))}else{const g=h.getIndexWithinParent();a=t===0&&Jn(h)&&Tp(e)===h?g:g+1,h=h.getParentOrThrow()}if(Bt(h))return sd(h.__key,a,"element")}}else s=Tp(e);return yr(s)?sd(s.__key,$f(s,a,"clamp"),"text"):null}function GF(e,t,r){const n=e.offset,s=e.getNode();if(n===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((r||!t)&&a===null&&Bt(i)&&i.isInline()){const o=i.getPreviousSibling();yr(o)&&e.set(o.__key,o.getTextContent().length,"text")}}else Bt(a)&&!r&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):yr(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(n===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&Bt(a)&&a.isInline())e.set(a.__key,0,"element");else if((r||t)&&a===null&&Bt(i)&&i.isInline()&&!i.canInsertTextAfter()){const o=i.getNextSibling();yr(o)&&e.set(o.__key,0,"text")}}}function eW(e,t,r){if(e.type==="text"&&t.type==="text"){const n=e.isBefore(t),s=e.is(t);GF(e,n,s),GF(t,!n,s),s&&t.set(e.key,e.offset,e.type);const a=aa();if(a.isComposing()&&a._compositionKey!==e.key&&Jt(r)){const i=r.anchor,o=r.focus;e.set(i.key,i.offset,i.type,!0),t.set(o.key,o.offset,o.type,!0)}}}function tW(e,t,r,n,s,a){if(e===null||r===null||!v2(s,e,r))return null;const i=HF(e,t,Jt(a)?a.anchor:null,s);if(i===null)return null;const o=HF(r,n,Jt(a)?a.focus:null,s);if(o===null)return null;if(i.type==="element"&&o.type==="element"){const c=Tp(e),u=Tp(r);if(Jn(c)&&Jn(u))return null}return eW(i,o,a),[i,o]}function OC(e){return Bt(e)&&!e.isInline()}function rW(e,t,r,n,s,a){const i=oh(),o=new Zm(sd(e,t,s),sd(r,n,a),0,"");return o.dirty=!0,i._selection=o,o}function s3(){const e=sd("root",0,"element"),t=sd("root",0,"element");return new Zm(e,t,0,"")}function C7(){return new n3(new Set)}function T7(e,t,r,n){const s=r._window;if(s===null)return null;const a=n||s.event,i=a?a.type:void 0,o=i==="selectionchange",c=!yC&&(o||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,d,f,h;if(Jt(e)&&!c)return e.clone();if(t===null)return null;if(u=t.anchorNode,d=t.focusNode,f=t.anchorOffset,h=t.focusOffset,o&&Jt(e)&&!v2(r,u,d))return e.clone();const g=tW(u,f,d,h,r,e);if(g===null)return null;const[p,y]=g;return new Zm(p,y,Jt(e)?e.format:0,Jt(e)?e.style:"")}function xr(){return oh()._selection}function _1(){return aa()._editorState._selection}function F4(e,t,r,n=1){const s=e.anchor,a=e.focus,i=s.getNode(),o=a.getNode();if(!t.is(i)&&!t.is(o))return;const c=t.__key;if(e.isCollapsed()){const u=s.offset;if(r<=u&&n>0||r<u&&n<0){const d=Math.max(0,u+n);s.set(c,d,"element"),a.set(c,d,"element"),VF(e)}}else{const u=e.isBackward(),d=u?a:s,f=d.getNode(),h=u?s:a,g=h.getNode();if(t.is(f)){const p=d.offset;(r<=p&&n>0||r<p&&n<0)&&d.set(c,Math.max(0,p+n),"element")}if(t.is(g)){const p=h.offset;(r<=p&&n>0||r<p&&n<0)&&h.set(c,Math.max(0,p+n),"element")}}VF(e)}function VF(e){const t=e.anchor,r=t.offset,n=e.focus,s=n.offset,a=t.getNode(),i=n.getNode();if(e.isCollapsed()){if(!Bt(a))return;const o=a.getChildrenSize(),c=r>=o,u=c?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(yr(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text"),n.set(u.__key,d,"text")}}else{if(Bt(a)){const o=a.getChildrenSize(),c=r>=o,u=c?a.getChildAtIndex(o-1):a.getChildAtIndex(r);if(yr(u)){let d=0;c&&(d=u.getTextContentSize()),t.set(u.__key,d,"text")}}if(Bt(i)){const o=i.getChildrenSize(),c=s>=o,u=c?i.getChildAtIndex(o-1):i.getChildAtIndex(s);if(yr(u)){let d=0;c&&(d=u.getTextContentSize()),n.set(u.__key,d,"text")}}}}function M4(e,t,r,n,s){let a=null,i=0,o=null;n!==null?(a=n.__key,yr(n)?(i=n.getTextContentSize(),o="text"):Bt(n)&&(i=n.getChildrenSize(),o="element")):s!==null&&(a=s.__key,yr(s)?o="text":Bt(s)&&(o="element")),a!==null&&o!==null?e.set(a,i,o):(i=t.getIndexWithinParent(),i===-1&&(i=r.getChildrenSize()),e.set(r.__key,i,"element"))}function qF(e,t,r,n,s){e.type==="text"?e.set(r,e.offset+(t?0:s),"text"):e.offset>n.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function nW(e,t,r,n,s){try{e.setBaseAndExtent(t,r,n,s)}catch{}}function tce(e,t,r,n,s,a,i){const o=n.anchorNode,c=n.focusNode,u=n.anchorOffset,d=n.focusOffset,f=document.activeElement;if(s.has(cW)&&f!==a||f!==null&&O7(f))return;if(!Jt(t))return void(e!==null&&v2(r,o,c)&&n.removeAllRanges());const h=t.anchor,g=t.focus,p=h.key,y=g.key,v=Mm(r,p),C=Mm(r,y),w=h.offset,_=g.offset,T=t.format,E=t.style,A=t.isCollapsed();let F=v,j=C,P=!1;if(h.type==="text"){F=Xp(v);const te=h.getNode();P=te.getFormat()!==T||te.getStyle()!==E}else Jt(e)&&e.anchor.type==="text"&&(P=!0);var D,B,V,Y,re;if(g.type==="text"&&(j=Xp(C)),F!==null&&j!==null&&(A&&(e===null||P||Jt(e)&&(e.format!==T||e.style!==E))&&(D=T,B=E,V=w,Y=p,re=performance.now(),Vz=[D,B,V,Y,re]),u!==w||d!==_||o!==F||c!==j||n.type==="Range"&&A||(f!==null&&a.contains(f)||a.focus({preventScroll:!0}),h.type==="element"))){if(nW(n,F,w,j,_),!s.has(lce)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const te=Jt(t)&&t.anchor.type==="element"?F.childNodes[w]||null:n.rangeCount>0?n.getRangeAt(0):null;if(te!==null){let ee;if(te instanceof Text){const L=document.createRange();L.selectNode(te),ee=L.getBoundingClientRect()}else ee=te.getBoundingClientRect();(function(L,Q,U){const G=wW(U),W=$7(G);if(G===null||W===null)return;let{top:M,bottom:I}=Q,z=0,q=0,ne=U;for(;ne!==null;){const X=ne===G.body;if(X)z=0,q=Ec(L).innerHeight;else{const ce=ne.getBoundingClientRect();z=ce.top,q=ce.bottom}let se=0;if(M<z?se=-(z-M):I>q&&(se=I-q),se!==0)if(X)W.scrollBy(0,se);else{const ce=ne.scrollTop;ne.scrollTop+=se;const pe=ne.scrollTop-ce;M-=pe,I-=pe}if(X)break;ne=b2(ne)}})(r,ee,a)}}jC=!0}}function rce(e){let t=xr()||_1();t===null&&(t=Ks().selectEnd()),t.insertNodes(e)}function M5(e){let t=e;e.isCollapsed()||t.removeText();const r=xr();Jt(r)&&(t=r),Jt(t)||tr(161);const n=t.anchor;let s=n.getNode(),a=n.offset;for(;!vc(s);){const i=s;if([s,a]=nce(s,a),i.is(s))break}return a}function nce(e,t){const r=e.getParent();if(!r){const s=Rs();return Ks().append(s),s.select(),[Ks(),0]}if(yr(e)){const s=e.splitText(t);if(s.length===0)return[r,e.getIndexWithinParent()];const a=t===0?0:1;return[r,s[0].getIndexWithinParent()+a]}if(!Bt(e)||t===0)return[r,e.getIndexWithinParent()];const n=e.getChildAtIndex(t);if(n){const s=new Zm(sd(e.__key,t,"element"),sd(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(n,...n.getNextSiblings())}return[r,e.getIndexWithinParent()+1]}function KF(e,t,r,n,s="decorators-and-blocks"){if(t==="move"&&n==="character"&&!e.isCollapsed()){const[d,f]=r===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return f.set(d.key,d.offset,d.type),!0}const a=x0(e.focus,r?"previous":"next"),i=n==="lineboundary",o=t==="move";let c=a,u=s==="decorators-and-blocks";if(!CW(c)){for(const d of c){u=!1;const{origin:f}=d;if(!Jn(f)||f.isIsolated()||(c=d,!i||!f.isInline()))break}if(u)for(const d of K7(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(td(d))d.origin.isInline()||(c=d);else{if(Bt(d.origin))continue;Jn(d.origin)&&!d.origin.isInline()&&(c=d)}break}}if(c===a)return!1;if(o&&!i&&Jn(c.origin)&&c.origin.isKeyboardSelectable()){const d=C7();return d.add(c.origin.getKey()),ro(d),!0}return c=wc(c),o&&Lm(e.anchor,c),Lm(e.focus,c),u||!i}let Ci=null,Ti=null,gl=!1,O5=!1,t4=0;const YF={characterData:!0,childList:!0,subtree:!0};function p2(){return gl||Ci!==null&&Ci._readOnly}function Ji(){gl&&tr(13)}function sW(){t4>99&&tr(14)}function oh(){return Ci===null&&tr(195,aW()),Ci}function aa(){return Ti===null&&tr(196,aW()),Ti}function aW(){let e=0;const t=new Set,r=o3.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=l3(s);if(D7(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===r&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let n=` Detected on the page: ${e} compatible editor(s) with version ${r}`;return t.size&&(n+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),n}function sce(){return Ti}function XF(e,t,r){const n=t.__type,s=dW(e,n);let a=r.get(n);a===void 0&&(a=Array.from(s.transforms),r.set(n,a));const i=a.length;for(let o=0;o<i&&(a[o](t),t.isAttached());o++);}function JF(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function iW(e,t){if(!t)return;const r=e._updateTags;let n=t;Array.isArray(t)||(n=[t]);for(const s of n)r.add(s)}function ace(e){return N7(e,aa()._nodes)}function N7(e,t){const r=e.type,n=t.get(r);n===void 0&&tr(17,r);const s=n.klass;e.type!==s.getType()&&tr(18,s.name);const a=s.importJSON(e),i=e.children;if(Bt(a)&&Array.isArray(i))for(let o=0;o<i.length;o++){const c=N7(i[o],t);a.append(c)}return a}function QF(e,t,r){const n=Ci,s=gl,a=Ti;Ci=t,gl=!0,Ti=e;try{return r()}finally{Ci=n,gl=s,Ti=a}}function Kd(e,t){const r=e._pendingEditorState,n=e._rootElement,s=e._headless||n===null;if(r===null)return;const a=e._editorState,i=a._selection,o=r._selection,c=e._dirtyType!==Am,u=Ci,d=gl,f=Ti,h=e._updating,g=e._observer;let p=null;if(e._pendingEditorState=null,e._editorState=r,!s&&c&&g!==null){Ti=e,Ci=r,gl=!1,e._updating=!0;try{const A=e._dirtyType,F=e._dirtyElements,j=e._dirtyLeaves;g.disconnect(),p=Mle(a,r,e,A,F,j)}catch(A){if(A instanceof Error&&e._onError(A),O5)throw A;return uW(e,null,n,r),Sz(e),e._dirtyType=Yp,O5=!0,Kd(e,a),void(O5=!1)}finally{g.observe(n,YF),e._updating=h,Ci=u,gl=d,Ti=f}}r._readOnly||(r._readOnly=!0);const y=e._dirtyLeaves,v=e._dirtyElements,C=e._normalizedNodes,w=e._updateTags,_=e._deferred;c&&(e._dirtyType=Am,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),(function(A,F){const j=A._decorators;let P=A._pendingDecorators||j;const D=F._nodeMap;let B;for(B in P)D.has(B)||(P===j&&(P=gW(A)),delete P[B])})(e,r);const T=s?null:mu(Ec(e));if(e._editable&&T!==null&&(c||o===null||o.dirty)&&n!==null&&!w.has(cce)){Ti=e,Ci=r;try{if(g!==null&&g.disconnect(),c||o===null||o.dirty){const A=e._blockCursorElement;A!==null&&LC(A,e,n),tce(i,o,e,T,w,n)}(function(A,F,j){let P=A._blockCursorElement;if(Jt(j)&&j.isCollapsed()&&j.anchor.type==="element"&&F.contains(document.activeElement)){const D=j.anchor,B=D.getNode(),V=D.offset;let Y=!1,re=null;if(V===B.getChildrenSize())R5(B.getChildAtIndex(V-1))&&(Y=!0);else{const te=B.getChildAtIndex(V);if(te!==null&&R5(te)){const ee=te.getPreviousSibling();(ee===null||R5(ee))&&(Y=!0,re=A.getElementByKey(te.__key))}}if(Y){const te=A.getElementByKey(B.__key);return P===null&&(A._blockCursorElement=P=(function(ee){const L=ee.theme,Q=document.createElement("div");Q.contentEditable="false",Q.setAttribute("data-lexical-cursor","true");let U=L.blockCursor;if(U!==void 0){if(typeof U=="string"){const G=yz(U);U=L.blockCursor=G}U!==void 0&&Q.classList.add(...U)}return Q})(A._config)),F.style.caretColor="transparent",void(re===null?te.appendChild(P):te.insertBefore(P,re))}}P!==null&&LC(P,A,F)})(e,n,o)}finally{g!==null&&g.observe(n,YF),Ti=f,Ci=u}}p!==null&&(function(A,F,j,P,D){const B=Array.from(A._listeners.mutation),V=B.length;for(let Y=0;Y<V;Y++){const[re,te]=B[Y];for(const ee of te){const L=F.get(ee);L!==void 0&&re(L,{dirtyLeaves:P,prevEditorState:D,updateTags:j})}}})(e,p,w,y,a),Jt(o)||o===null||i!==null&&i.is(o)||e.dispatchCommand(jz,void 0);const E=e._pendingDecorators;E!==null&&(e._decorators=E,e._pendingDecorators=null,tv("decorator",e,!0,E)),(function(A,F,j){const P=nM(F),D=nM(j);P!==D&&tv("textcontent",A,!0,D)})(e,t||a,r),tv("update",e,!0,{dirtyElements:v,dirtyLeaves:y,editorState:r,mutatedNodes:p,normalizedNodes:C,prevEditorState:t||a,tags:w}),(function(A,F){if(A._deferred=[],F.length!==0){const j=A._updating;A._updating=!0;try{for(let P=0;P<F.length;P++)F[P]()}finally{A._updating=j}}})(e,_),(function(A){const F=A._updates;if(F.length!==0){const j=F.shift();if(j){const[P,D]=j;a3(A,P,D)}}})(e)}function tv(e,t,r,...n){const s=t._updating;t._updating=r;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,n)}finally{t._updating=s}}function ZF(e,t){const r=e._updates;let n=t||!1;for(;r.length!==0;){const s=r.shift();if(s){const[a,i]=s,o=e._pendingEditorState;let c;i!==void 0&&(c=i.onUpdate,i.skipTransforms&&(n=!0),i.discrete&&(o===null&&tr(191),o._flushSync=!0),c&&e._deferred.push(c),iW(e,i.tag)),o==null?a3(e,a,i):a()}}return n}function a3(e,t,r){const n=e._updateTags;let s,a=!1,i=!1;r!==void 0&&(s=r.onUpdate,iW(e,r.tag),a=r.skipTransforms||!1,i=r.discrete||!1),s&&e._deferred.push(s);const o=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=oW(c||o),u=!0),c._flushSync=i;const d=Ci,f=gl,h=Ti,g=e._updating;Ci=c,gl=!1,e._updating=!0,Ti=e;const p=e._headless||e.getRootElement()===null;F7(null);try{u&&(p?o._selection!==null&&(c._selection=o._selection.clone()):c._selection=(function(w,_){const T=w.getEditorState()._selection,E=mu(Ec(w));return Jt(T)||T==null?T7(T,E,w,_):T.clone()})(e,r&&r.event||null));const v=e._compositionKey;t(),a=ZF(e,a),(function(w,_){const T=_.getEditorState()._selection,E=w._selection;if(Jt(E)){const A=E.anchor,F=E.focus;let j;if(A.type==="text"&&(j=A.getNode(),j.selectionTransform(T,E)),F.type==="text"){const P=F.getNode();j!==P&&P.selectionTransform(T,E)}}})(c,e),e._dirtyType!==Am&&(a?(function(w,_){const T=_._dirtyLeaves,E=w._nodeMap;for(const A of T){const F=E.get(A);yr(F)&&F.isAttached()&&F.isSimpleText()&&!F.isUnmergeable()&&AF(F)}})(c,e):(function(w,_){const T=_._dirtyLeaves,E=_._dirtyElements,A=w._nodeMap,F=Ff(),j=new Map;let P=T,D=P.size,B=E,V=B.size;for(;D>0||V>0;){if(D>0){_._dirtyLeaves=new Set;for(const Y of P){const re=A.get(Y);yr(re)&&re.isAttached()&&re.isSimpleText()&&!re.isUnmergeable()&&AF(re),re!==void 0&&JF(re,F)&&XF(_,re,j),T.add(Y)}if(P=_._dirtyLeaves,D=P.size,D>0){t4++;continue}}_._dirtyLeaves=new Set,_._dirtyElements=new Map,B.delete("root")&&B.set("root",!0);for(const Y of B){const re=Y[0],te=Y[1];if(E.set(re,te),!te)continue;const ee=A.get(re);ee!==void 0&&JF(ee,F)&&XF(_,ee,j)}P=_._dirtyLeaves,D=P.size,B=_._dirtyElements,V=B.size,t4++}_._dirtyLeaves=T,_._dirtyElements=E})(c,e),ZF(e),(function(w,_,T,E){const A=w._nodeMap,F=_._nodeMap,j=[];for(const[P]of E){const D=F.get(P);D!==void 0&&(D.isAttached()||(Bt(D)&&bz(D,P,A,F,j,E),A.has(P)||E.delete(P),j.push(P)))}for(const P of j)F.delete(P);for(const P of T){const D=F.get(P);D===void 0||D.isAttached()||(A.has(P)||T.delete(P),F.delete(P))}})(o,c,e._dirtyLeaves,e._dirtyElements)),v!==e._compositionKey&&(c._flushSync=!0);const C=c._selection;if(Jt(C)){const w=c._nodeMap,_=C.anchor.key,T=C.focus.key;w.get(_)!==void 0&&w.get(T)!==void 0||tr(19)}else ho(C)&&C._nodes.size===0&&(c._selection=null)}catch(v){return v instanceof Error&&e._onError(v),e._pendingEditorState=o,e._dirtyType=Yp,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void Kd(e)}finally{Ci=d,gl=f,Ti=h,e._updating=g,t4=0}e._dirtyType!==Am||e._deferred.length>0||(function(v,C){const w=C.getEditorState()._selection,_=v._selection;if(_!==null){if(_.dirty||!_.is(w))return!0}else if(w!==null)return!0;return!1})(c,e)?c._flushSync?(c._flushSync=!1,Kd(e)):u&&mce((()=>{Kd(e)})):(c._flushSync=!1,u&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function Ol(e,t,r){Ti===e&&r===void 0?t():a3(e,t,r)}class rv{constructor(t,r,n){this.element=t,this.before=r||null,this.after=n||null}withBefore(t){return new rv(this.element,t,this.after)}withAfter(t){return new rv(this.element,this.before,t)}withElement(t){return this.element===t?this:new rv(t,this.before,this.after)}insertChild(t){const r=this.before||this.getManagedLineBreak();return r!==null&&r.parentElement!==this.element&&tr(222),this.element.insertBefore(t,r),this}removeChild(t){return t.parentElement!==this.element&&tr(223),this.element.removeChild(t),this}replaceChild(t,r){return r.parentElement!==this.element&&tr(224),this.element.replaceChild(t,r),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const r=t==="decorator"&&(Kp||Tv);this.insertManagedLineBreak(r)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const r=this.element,n=t.nodeName==="IMG"?t.nextSibling:null;n&&r.removeChild(n),r.removeChild(t),r.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const r=this.getManagedLineBreak();if(r){if(t===(r.nodeName==="IMG"))return;this.removeManagedLineBreak()}const n=this.element,s=this.before,a=document.createElement("br");if(n.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",n.insertBefore(i,a),n.__lexicalLineBreak=i}else n.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let r=this.after;r!==null;r=r.previousSibling)t++;return t}resolveChildIndex(t,r,n,s){if(n===this.element){const c=this.getFirstChildOffset();return[t,Math.min(c+t.getChildrenSize(),Math.max(c,s))]}const a=eM(r,n);a.push(s);const i=eM(r,this.element);let o=t.getIndexWithinParent();for(let c=0;c<i.length;c++){const u=a[c],d=i[c];if(u===void 0||u<d)break;if(u>d){o+=1;break}}return[t.getParentOrThrow(),o]}}function eM(e,t){const r=[];let n=t;for(;n!==e&&n!==null;n=n.parentNode){let s=0;for(let a=n.previousSibling;a!==null;a=a.previousSibling)s++;r.push(s)}return n!==e&&tr(225),r.reverse()}class ko extends b1{constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return ble[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r),r=r.getNextSibling();return t}getChildrenKeys(){const t=[];let r=this.getFirstChild();for(;r!==null;)t.push(r.__key),r=r.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=aa()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),r=this.getParentOrThrow().getLastChild();return r!==null&&r.is(t)}getAllTextNodes(){const t=[];let r=this.getFirstChild();for(;r!==null;){if(yr(r)&&t.push(r),Bt(r)){const n=r.getAllTextNodes();t.push(...n)}r=r.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Bt(t);){const r=t.getFirstChild();if(r===null)break;t=r}return t}getLastDescendant(){let t=this.getLastChild();for(;Bt(t);){const r=t.getLastChild();if(r===null)break;t=r}return t}getDescendantByIndex(t){const r=this.getChildren(),n=r.length;if(t>=n){const a=r[n-1];return Bt(a)&&a.getLastDescendant()||a||null}const s=r[t];return Bt(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:qa(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&tr(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:qa(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&tr(96,this.__key),t}getChildAtIndex(t){const r=this.getChildrenSize();let n,s;if(t<r/2){for(n=this.getFirstChild(),s=0;n!==null&&s<=t;){if(s===t)return n;n=n.getNextSibling(),s++}return null}for(n=this.getLastChild(),s=r-1;n!==null&&s>=t;){if(s===t)return n;n=n.getPreviousSibling(),s--}return null}getTextContent(){let t="";const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContent(),Bt(a)&&s!==n-1&&!a.isInline()&&(t+=p0)}return t}getTextContentSize(){let t=0;const r=this.getChildren(),n=r.length;for(let s=0;s<n;s++){const a=r[s];t+=a.getTextContentSize(),Bt(a)&&s!==n-1&&!a.isInline()&&(t+=p0.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const r=wF[t];return!!(this.getFormat()&r)}return!1}hasTextFormat(t){const r=jm[t];return!!(this.getTextFormat()&r)}getFormatFlags(t,r){return D4(this.getLatest().__textFormat,t,r)}getTextStyle(){return this.getLatest().__textStyle}select(t,r){Ji();const n=xr();let s=t,a=r;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&r===0){const c=this.getFirstChild();if(yr(c)||Bt(c))return c.select(0,0)}else if(!(t!==void 0&&t!==i||r!==void 0&&r!==i)){const c=this.getLastChild();if(yr(c)||Bt(c))return c.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const o=this.__key;return Jt(n)?(n.anchor.set(o,s,"element"),n.focus.set(o,a,"element"),n.dirty=!0,n):rW(o,s,o,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach((r=>r.remove())),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const r=this.getWritable();return r.__dir=t,r}setFormat(t){return this.getWritable().__format=t!==""?wF[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const r=this.getWritable();return r.__textFormat=t,r}setTextStyle(t){const r=this.getWritable();return r.__textStyle=t,r}setIndent(t){return this.getWritable().__indent=t,this}splice(t,r,n){const s=n.length,a=this.getChildrenSize(),i=this.getWritable();t+r<=a||tr(226,String(t),String(r),String(a));const o=i.__key,c=[],u=[],d=this.getChildAtIndex(t+r);let f=null,h=a-r+s;if(t!==0)if(t===a)f=this.getLastChild();else{const p=this.getChildAtIndex(t);p!==null&&(f=p.getPreviousSibling())}if(r>0){let p=f===null?this.getFirstChild():f.getNextSibling();for(let y=0;y<r;y++){p===null&&tr(100);const v=p.getNextSibling(),C=p.__key;xm(p.getWritable()),u.push(C),p=v}}let g=f;for(let p=0;p<s;p++){const y=n[p];g!==null&&y.is(g)&&(f=g=g.getPreviousSibling());const v=y.getWritable();v.__parent===o&&h--,xm(v);const C=y.__key;if(g===null)i.__first=C,v.__prev=null;else{const w=g.getWritable();w.__next=C,v.__prev=w.__key}y.__key===o&&tr(76),v.__parent=o,c.push(C),g=y}if(t+r===a)g!==null&&(g.getWritable().__next=null,i.__last=g.__key);else if(d!==null){const p=d.getWritable();if(g!==null){const y=g.getWritable();p.__prev=g.__key,y.__next=d.__key}else p.__prev=null}if(i.__size=h,u.length){const p=xr();if(Jt(p)){const y=new Set(u),v=new Set(c),{anchor:C,focus:w}=p;tM(C,y,v)&&M4(C,C.getNode(),this,f,d),tM(w,y,v)&&M4(w,w.getNode(),this,f,d),h!==0||this.canBeEmpty()||qo(this)||this.remove()}}return i}getDOMSlot(t){return new rv(t)}exportDOM(t){const{element:r}=super.exportDOM(t);if(Is(r)){const n=this.getIndent();n>0&&(r.style.paddingInlineStart=40*n+"px");const s=this.getDirection();s&&(r.dir=s)}return{element:r}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},r=this.getTextFormat(),n=this.getTextStyle();return r!==0&&(t.textFormat=r),n!==""&&(t.textStyle=n),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,r){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,r,n){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,r){const n=this.getDOMSlot(t);let s=n.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=r.getElementByKey(a.getKey());i!==null&&(s==null?(n.insertChild(i),s=i):s!==i&&n.replaceChild(i,s),s=s.nextSibling)}}}function Bt(e){return e instanceof ko}function tM(e,t,r){let n=e.getNode();for(;n;){const s=n.__key;if(t.has(s)&&!r.has(s))return!0;n=n.getParent()}return!1}class E7 extends b1{decorate(t,r){tr(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Jn(e){return e instanceof E7}class x2 extends ko{static getType(){return"root"}static clone(){return new x2}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){tr(51)}getTextContent(){const t=this.__cachedText;return!p2()&&aa()._dirtyType!==Am||t===null?super.getTextContent():t}remove(){tr(52)}replace(t){tr(53)}insertBefore(t){tr(54)}insertAfter(t){tr(55)}updateDOM(t,r){return!1}splice(t,r,n){for(const s of n)Bt(s)||Jn(s)||tr(282);return super.splice(t,r,n)}static importJSON(t){return Ks().updateFromJSON(t)}collapseAtStart(){return!0}}function li(e){return e instanceof x2}function oW(e){return new i3(new Map(e._nodeMap))}function A7(){return new i3(new Map([["root",new x2]]))}function lW(e){const t=e.exportJSON(),r=e.constructor;if(t.type!==r.getType()&&tr(130,r.name),Bt(e)){const n=t.children;Array.isArray(n)||tr(59,r.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=lW(s[a]);n.push(i)}}return t}class i3{constructor(t,r){this._nodeMap=t,this._selection=r||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,r){return QF(r&&r.editor||null,this,t)}clone(t){const r=new i3(this._nodeMap,t===void 0?this._selection:t);return r._readOnly=!0,r}toJSON(){return QF(null,this,(()=>({root:lW(Ks())})))}}const O4="historic",ice="history-push",nv="history-merge",oce="paste",cW="collaboration",lce="skip-scroll-into-view",cce="skip-dom-selection";class j7 extends ko{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class y2 extends ko{static getType(){return"paragraph"}static clone(t){return new y2(t.__key)}createDOM(t){const r=document.createElement("p"),n=Dp(t.theme,"paragraph");return n!==void 0&&r.classList.add(...n),r}updateDOM(t,r,n){return!1}static importDOM(){return{p:t=>({conversion:uce,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Is(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n)}return{element:r}}static importJSON(t){return Rs().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,r){const n=Rs();n.setTextFormat(t.format),n.setTextStyle(t.style);const s=this.getDirection();return n.setDirection(s),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,r),n}collapseAtStart(){const t=this.getChildren();if(t.length===0||yr(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function uce(e){const t=Rs();return e.style&&(t.setFormat(e.style.textAlign),z7(e,t)),{node:t}}function Rs(){return Qo(new y2)}function P7(e){return e instanceof y2}const Un=0,pp=1,dce=4;function uW(e,t,r,n){const s=e._keyToDOMMap;s.clear(),e._editorState=A7(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=Am,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),r!==null&&(r.textContent="",s.set("root",r))}function fce(e){const t=e||{},r=sce(),n=t.theme||{},s=e===void 0?r:t.parentEditor||null,a=t.disableEvents||!1,i=A7(),o=t.namespace||(s!==null?s._config.namespace:yW()),c=t.editorState,u=[x2,ih,m2,g2,y2,j7,...t.nodes||[]],{onError:d,html:f}=t,h=t.editable===void 0||t.editable;let g;if(e===void 0&&r!==null)g=r._nodes;else{g=new Map;for(let y=0;y<u.length;y++){let v=u[y],C=null,w=null;if(typeof v!="function"){const F=v;v=F.replace,C=F.with,w=F.withKlass||null}const{ownNodeConfig:_}=W7(v),T=v.getType(),E=v.transform(),A=new Set;_&&_.$transform&&A.add(_.$transform),E!==null&&A.add(E),g.set(T,{exportDOM:f&&f.export?f.export.get(v):void 0,klass:v,replace:C,replaceWithKlass:w,sharedNodeState:Ele(u[y]),transforms:A})}}const p=new o3(i,s,g,{disableEvents:a,namespace:o,theme:n},d||console.error,(function(y,v){const C=new Map,w=new Set,_=T=>{Object.keys(T).forEach((E=>{let A=C.get(E);A===void 0&&(A=[],C.set(E,A)),A.push(T[E])}))};return y.forEach((T=>{const E=T.klass.importDOM;if(E==null||w.has(E))return;w.add(E);const A=E.call(T.klass);A!==null&&_(A)})),v&&_(v),C})(g,f?f.import:void 0),h,e);return c!==void 0&&(p._pendingEditorState=c,p._dirtyType=Yp),p}class o3{constructor(t,r,n,s,a,i,o,c){this._createEditorArgs=c,this._parentEditor=r,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=Am,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=yW(),this._onError=a,this._htmlConversions=i,this._editable=o,this._headless=r!==null&&r._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const r=this._listeners.update;return r.add(t),()=>{r.delete(t)}}registerEditableListener(t){const r=this._listeners.editable;return r.add(t),()=>{r.delete(t)}}registerDecoratorListener(t){const r=this._listeners.decorator;return r.add(t),()=>{r.delete(t)}}registerTextContentListener(t){const r=this._listeners.textcontent;return r.add(t),()=>{r.delete(t)}}registerRootListener(t){const r=this._listeners.root;return t(this._rootElement,null),r.add(t),()=>{t(null,this._rootElement),r.delete(t)}}registerCommand(t,r,n){n===void 0&&tr(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&tr(36,String(t));const i=a[n];return i.add(r),()=>{i.delete(r),a.every((o=>o.size===0))&&s.delete(t)}}registerMutationListener(t,r,n){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(r);i===void 0&&(i=new Set,a.set(r,i)),i.add(s);const o=n&&n.skipInitialization;return o!==void 0&&o||this.initializeMutationListener(r,s),()=>{i.delete(s),i.size===0&&a.delete(r)}}getRegisteredNode(t){const r=this._nodes.get(t.getType());return r===void 0&&tr(37,t.name),r}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,r){const n=this._editorState,s=uM(n).get(r.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:n,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,r){const n=this.getRegisteredNode(t);return n.transforms.add(r),n}registerNodeTransform(t,r){const n=this.registerNodeTransformToKlass(t,r),s=[n],a=n.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,r);s.push(i)}return(function(i,o){const c=uM(i.getEditorState()),u=[];for(const d of o){const f=c.get(d);f&&u.push(f)}u.length!==0&&i.update((()=>{for(const d of u)for(const f of d.keys()){const h=qa(f);h&&h.markDirty()}}),i._pendingEditorState===null?{tag:nv}:void 0)})(this,s.map((i=>i.klass.getType()))),()=>{s.forEach((i=>i.transforms.delete(r)))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,r){return Dr(this,t,r)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const r=this._rootElement;if(t!==r){const n=Dp(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,uW(this,r,t,s),r!==null&&(this._config.disableEvents||Vle(r),n!=null&&r.classList.remove(...n)),t!==null){const a=$7(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=Yp,Sz(this),this._updateTags.add(nv),Kd(this),this._config.disableEvents||(function(o,c){const u=o.ownerDocument,d=P4.get(u);(d===void 0||d<1)&&u.addEventListener("selectionchange",Jz),P4.set(u,(d||0)+1),o.__lexicalEditor=c;const f=Xz(o);for(let h=0;h<AC.length;h++){const[g,p]=AC[h],y=typeof p=="function"?v=>{RF(v)||(DF(v),(c.isEditable()||g==="click")&&p(v,c))}:v=>{if(RF(v))return;DF(v);const C=c.isEditable();switch(g){case"cut":return C&&Dr(c,S7,v);case"copy":return Dr(c,t3,v);case"paste":return C&&Dr(c,b7,v);case"dragstart":return C&&Dr(c,zz,v);case"dragover":return C&&Dr(c,Wz,v);case"dragend":return C&&Dr(c,$le,v);case"focus":return C&&Dr(c,Wle,v);case"blur":return C&&Dr(c,Hle,v);case"drop":return C&&Dr(c,$z,v)}};o.addEventListener(g,y),f.push((()=>{o.removeEventListener(g,y)}))}})(t,this),n!=null&&t.classList.add(...n)}else this._window=null,this._updateTags.add(nv),Kd(this);tv("root",this,!1,t,r)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,r){t.isEmpty()&&tr(38);let n=t;n._readOnly&&(n=oW(t),n._selection=t._selection?t._selection.clone():null),_z(this);const s=this._pendingEditorState,a=this._updateTags,i=r!==void 0?r.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),Kd(this)),this._pendingEditorState=n,this._dirtyType=Yp,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||Kd(this)}parseEditorState(t,r){return(function(n,s,a){const i=A7(),o=Ci,c=gl,u=Ti,d=s._dirtyElements,f=s._dirtyLeaves,h=s._cloneNotNeeded,g=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,Ci=i,gl=!1,Ti=s,F7(null);try{const p=s._nodes;N7(n.root,p),a&&a(),i._readOnly=!0}catch(p){p instanceof Error&&s._onError(p)}finally{s._dirtyElements=d,s._dirtyLeaves=f,s._cloneNotNeeded=h,s._dirtyType=g,Ci=o,gl=c,Ti=u}return i})(typeof t=="string"?JSON.parse(t):t,this,r)}read(t){return Kd(this),this.getEditorState().read(t,{editor:this})}update(t,r){(function(n,s,a){n._updating?n._updates.push([s,a]):a3(n,s,a)})(this,t,r)}focus(t,r={}){const n=this._rootElement;n!==null&&(n.setAttribute("autocapitalize","off"),Ol(this,(()=>{const s=xr(),a=Ks();s!==null?s.dirty||ro(s.clone()):a.getChildrenSize()!==0&&(r.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),vce("focus"),bce((()=>{n.removeAttribute("autocapitalize"),t&&t()}))})),this._pendingEditorState===null&&n.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const r=mu(this._window);r!==null&&r.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,tv("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}o3.version="0.35.0+prod.esm";let DC=null;function F7(e){DC=e}let hce=1;function dW(e,t){const r=M7(e,t);return r===void 0&&tr(30,t),r}function M7(e,t){return e._nodes.get(t)}const mce=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function rM(e){return Jn(Yf(e))}function O7(e){const t=document.activeElement;if(!Is(t))return!1;const r=t.nodeName;return Jn(Yf(e))&&(r==="INPUT"||r==="TEXTAREA"||t.contentEditable==="true"&&l3(t)==null)}function v2(e,t,r){const n=e.getRootElement();try{return n!==null&&n.contains(t)&&n.contains(r)&&t!==null&&!O7(t)&&fW(t)===e}catch{return!1}}function D7(e){return e instanceof o3}function fW(e){let t=e;for(;t!=null;){const r=l3(t);if(D7(r))return r;t=b2(t)}return null}function l3(e){return e?e.__lexicalEditor:null}function pm(e){return r3(e)||e.isToken()}function Gd(e){return pm(e)||e.isSegmented()}function T0(e){return S1(e)&&e.nodeType===dle}function gce(e){return S1(e)&&e.nodeType===fle}function Xp(e){let t=e;for(;t!=null;){if(T0(t))return t;t=t.firstChild}return null}function D4(e,t,r){const n=jm[t];if(r!==null&&(e&n)==(r&n))return e;let s=e^n;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function hW(e){return yr(e)||a0(e)||Jn(e)}function pce(e,t){const r=(function(){const i=DC;return DC=null,i})();if((t=t||r&&r.__key)!=null)return void(e.__key=t);Ji(),sW();const n=aa(),s=oh(),a=""+hce++;s._nodeMap.set(a,e),Bt(e)?n._dirtyElements.set(a,!0):n._dirtyLeaves.add(a),n._cloneNotNeeded.add(a),n._dirtyType=vz,e.__key=a}function xm(e){const t=e.getParent();if(t!==null){const r=e.getWritable(),n=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,o=s!==null?s.__key:null,c=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(n.__first=i),a===null&&(n.__last=o),c!==null&&(c.__next=i),u!==null&&(u.__prev=o),r.__prev=null,r.__next=null,r.__parent=null,n.__size--}}function R4(e){sW();const t=e.getLatest(),r=t.__parent,n=oh(),s=aa(),a=n._nodeMap,i=s._dirtyElements;r!==null&&(function(c,u,d){let f=c;for(;f!==null;){if(d.has(f))return;const h=u.get(f);if(h===void 0)break;d.set(f,!1),f=h.__parent}})(r,a,i);const o=t.__key;s._dirtyType=vz,Bt(e)?i.set(o,!0):s._dirtyLeaves.add(o)}function Qi(e){Ji();const t=aa(),r=t._compositionKey;if(e!==r){if(t._compositionKey=e,r!==null){const n=qa(r);n!==null&&n.getWritable()}if(e!==null){const n=qa(e);n!==null&&n.getWritable()}}}function Ff(){return p2()?null:aa()._compositionKey}function qa(e,t){const r=(t||oh())._nodeMap.get(e);return r===void 0?null:r}function mW(e,t){const r=c3(e,aa());return r!==void 0?qa(r,t):null}function c3(e,t){return e[`__lexicalKey_${t._key}`]}function Yf(e,t){let r=e;for(;r!=null;){const n=mW(r,t);if(n!==null)return n;r=b2(r)}return null}function gW(e){const t=e._decorators,r=Object.assign({},t);return e._pendingDecorators=r,r}function nM(e){return e.read((()=>Ks().getTextContent()))}function Ks(){return pW(oh())}function pW(e){return e._nodeMap.get("root")}function ro(e){Ji();const t=oh();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function Tp(e){const t=aa(),r=(function(n,s){let a=n;for(;a!=null;){const i=c3(a,s);if(i!==void 0)return i;a=b2(a)}return null})(e,t);return r===null?e===t.getRootElement()?qa("root"):null:qa(r)}function xW(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function R7(e){const t=[];let r=e;for(;r!==null;)t.push(r),r=r._parentEditor;return t}function yW(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function vW(e){return T0(e)?e.nodeValue:null}function I7(e,t,r){const n=mu(Ec(t));if(n===null)return;const s=n.anchorNode;let{anchorOffset:a,focusOffset:i}=n;if(s!==null){let o=vW(s);const c=Yf(s);if(o!==null&&yr(c)){if(o===Z_&&r){const u=r.length;o=r,a=u,i=u}o!==null&&L7(c,o,a,i,e)}}}function L7(e,t,r,n,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let o=t;(i||s)&&t[t.length-1]===Z_&&(o=t.slice(0,-1));const c=a.getTextContent();if(s||o!==c){if(o===""){if(Qi(null),Tv||Kp||_4)a.remove();else{const y=aa();setTimeout((()=>{y.update((()=>{a.isAttached()&&a.remove()}))}),20)}return}const u=a.getParent(),d=_1(),f=a.getTextContentSize(),h=Ff(),g=a.getKey();if(a.isToken()||h!==null&&g===h&&!i||Jt(d)&&(u!==null&&!u.canInsertTextBefore()&&d.anchor.offset===0||d.anchor.key===e.__key&&d.anchor.offset===0&&!a.canInsertTextBefore()&&!i||d.focus.key===e.__key&&d.focus.offset===f&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const p=xr();if(!Jt(p)||r===null||n===null)return void sM(a,o,p);if(p.setTextNodeRange(a,r,a,n),a.isSegmented()){const y=pa(a.getTextContent());a.replace(y),a=y}sM(a,o,p)}}}function sM(e,t,r){if(e.setTextContent(t),Jt(r)){const n=e.getKey();for(const s of["anchor","focus"]){const a=r[s];a.type==="text"&&a.key===n&&(a.offset=$f(e,a.offset,"clamp"))}}}function fw(e,t,r){const n=t[r]||!1;return n==="any"||n===e[r]}function xce(e,t){return fw(e,t,"altKey")&&fw(e,t,"ctrlKey")&&fw(e,t,"shiftKey")&&fw(e,t,"metaKey")}function is(e,t,r){return xce(e,r)&&e.key.toLowerCase()===t.toLowerCase()}const Hd={ctrlKey:!Gu,metaKey:Gu},aM={altKey:Gu,ctrlKey:!Gu};function iM(e){return e.key==="Backspace"}function oM(e){return is(e,"a",Hd)}function yce(e){const t=Ks();if(Jt(e)){const r=e.anchor,n=e.focus,s=r.getNode().getTopLevelElementOrThrow().getParentOrThrow();return r.set(s.getKey(),0,"element"),n.set(s.getKey(),s.getChildrenSize(),"element"),C4(e),e}{const r=t.select(0,t.getChildrenSize());return ro(C4(r)),r}}function Dp(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const r=e.__lexicalClassNameCache,n=r[t];if(n!==void 0)return n;const s=e[t];if(typeof s=="string"){const a=yz(s);return r[t]=a,a}return s}function B7(e,t,r,n,s){if(r.size===0)return;const a=n.__type,i=n.__key,o=t.get(a);o===void 0&&tr(33,a);const c=o.klass;let u=e.get(c);u===void 0&&(u=new Map,e.set(c,u));const d=u.get(i),f=d==="destroyed"&&s==="created";(d===void 0||f)&&u.set(i,f?"updated":s)}function lM(e,t,r){const n=e.getParent();let s=r,a=e;return n!==null&&(t&&r===0?(s=a.getIndexWithinParent(),a=n):t||r!==a.getChildrenSize()||(s=a.getIndexWithinParent()+1,a=n)),a.getChildAtIndex(t?s-1:s)}function RC(e,t){const r=e.offset;if(e.type==="element")return lM(e.getNode(),t,r);{const n=e.getNode();if(t&&r===0||!t&&r===n.getTextContentSize()){const s=t?n.getPreviousSibling():n.getNextSibling();return s===null?lM(n.getParentOrThrow(),t,n.getIndexWithinParent()+(t?0:1)):s}}return null}function bW(e){const t=Ec(e).event,r=t&&t.inputType;return r==="insertFromPaste"||r==="insertFromPasteAsQuotation"}function Dr(e,t,r){return(function(n,s,a){const i=R7(n);for(let o=4;o>=0;o--)for(let c=0;c<i.length;c++){const u=i[c],d=u._commands.get(s);if(d!==void 0){const f=d[o];if(f!==void 0){const h=Array.from(f),g=h.length;let p=!1;if(Ol(u,(()=>{for(let y=0;y<g;y++)if(h[y](a,n))return void(p=!0)})),p)return p}}}return!1})(e,t,r)}function u3(e){return!li(e)&&!e.isLastChild()&&!e.isInline()}function Mm(e,t){const r=e._keyToDOMMap.get(t);return r===void 0&&tr(75,t),r}function b2(e){const t=e.assignedSlot||e.parentElement;return BC(t)?t.host:t}function wW(e){return gce(e)?e:Is(e)?e.ownerDocument:null}function vce(e){Ji(),aa()._updateTags.add(e)}function bce(e){Ji(),aa()._deferred.push(e)}function IC(e,t){let r=e.getParent();for(;r!==null;){if(r.is(t))return!0;r=r.getParent()}return!1}function $7(e){const t=wW(e);return t?t.defaultView:null}function Ec(e){const t=e._window;return t===null&&tr(78),t}function wce(e){return Bt(e)&&e.isInline()||Jn(e)&&e.isInline()}function _ce(e){let t=e.getParentOrThrow();for(;t!==null;){if(qo(t))return t;t=t.getParentOrThrow()}return t}function qo(e){return li(e)||Bt(e)&&e.isShadowRoot()}function Qo(e){const t=aa(),r=e.getType(),n=M7(t,r);n===void 0&&tr(200,e.constructor.name,r);const{replace:s,replaceWithKlass:a}=n;if(s!==null){const i=s(e),o=i.constructor;return a!==null?i instanceof a||tr(201,a.name,a.getType(),o.name,o.getType(),e.constructor.name,r):i instanceof e.constructor&&o!==e.constructor||tr(202,o.name,o.getType(),e.constructor.name,r),i.__key===e.__key&&tr(203,e.constructor.name,r,o.name,o.getType()),i}return e}function D5(e,t){!li(e.getParent())||Bt(t)||Jn(t)||tr(99)}function Sce(e){const t=qa(e);return t===null&&tr(63,e),t}function R5(e){return(Jn(e)||Bt(e)&&!e.canBeEmpty())&&!e.isInline()}function LC(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null;const n=e.parentElement;n!==null&&n.removeChild(e)}function mu(e){return xu?(e||window).getSelection():null}function kce(e){const t=$7(e);return t?t.getSelection():null}function _W(e){return Is(e)&&e.tagName==="A"}function Is(e){return S1(e)&&e.nodeType===ule}function S1(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function BC(e){return S1(e)&&e.nodeType===hle}function $C(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function I4(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function vc(e){if(Jn(e)&&!e.isInline())return!0;if(!Bt(e)||qo(e))return!1;const t=e.getFirstChild(),r=t===null||a0(t)||yr(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&r}function I5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function w2(){return aa()}const cM=new WeakMap,Cce=new Map;function uM(e){if(!e._readOnly&&e.isEmpty())return Cce;e._readOnly||tr(192);let t=cM.get(e);return t||(t=(function(r){const n=new Map;for(const[s,a]of r._nodeMap){const i=a.__type;let o=n.get(i);o||(o=new Map,n.set(i,o)),o.set(s,a)}return n})(e),cM.set(e,t)),t}function U7(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function z7(e,t){const r=parseInt(e.style.paddingInlineStart,10)||0,n=Math.round(r/40);t.setIndent(n)}function Tce(e){e.__lexicalUnmanaged=!0}function Nce(e){return e.__lexicalUnmanaged===!0}function Cy(e,t){return(function(r,n){return Object.prototype.hasOwnProperty.call(r,n)})(e,t)&&e[t]!==b1[t]}function W7(e){const t=_F in e.prototype?e.prototype[_F]():void 0,r=(function(i){return i===E7||i===ko||i===b1})(e),n=!r&&Cy(e,"getType")?e.getType():void 0;let s,a=n;if(t)if(n)s=t[n];else for(const[i,o]of Object.entries(t))a=i,s=o;if(!r&&a&&(Cy(e,"getType")||(e.getType=()=>a),Cy(e,"clone")||(e.clone=i=>(F7(i),new e)),Cy(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!Cy(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function Ece(e){const t=w2();return Ji(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const Ace={next:"previous",previous:"next"};class H7{constructor(t){this.origin=t}[Symbol.iterator](){return Y7({hasNext:Rm,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return to(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return to(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,r){const n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(n===null?this.insert(t):n.replace(t,r)),this}splice(t,r,n="next"){const s=n===this.direction?r:Array.from(r).reverse();let a=this;const i=this.getParentAtCaret(),o=new Map;for(let c=a.getAdjacentCaret();c!==null&&o.size<t;c=c.getAdjacentCaret()){const u=c.origin.getWritable();o.set(u.getKey(),u)}for(const c of s){if(o.size>0){const u=a.getNodeAtCaret();if(u){if(o.delete(u.getKey()),o.delete(c.getKey()),!(u.is(c)||a.origin.is(c))){const d=c.getParent();d&&d.is(i)&&c.remove(),u.replace(c)}}else u===null&&tr(263,Array.from(o).join(" "))}else a.insert(c);a=to(c,this.direction)}for(const c of o.values())c.remove();return this}}class Fv extends H7{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Ac(t,this.direction)}getParentCaret(t="root"){return to(G7(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=k1(this.direction);return to(this.getNodeAtCaret(),t)||Ac(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof Fv&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const jce={root:li,shadowRoot:qo};function k1(e){return Ace[e]}function G7(e,t="root"){return jce[t](e)?null:e}class Om extends H7{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:to(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Bt(this.origin)?Ac(this.origin,this.direction):null}getParentCaret(t="root"){return to(G7(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=k1(this.direction);return to(this.getNodeAtCaret(),t)||Ac(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof Om&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof Om||t instanceof Dm)&&this.direction===t.direction&&this.origin.is(t.origin)}}class Dm extends H7{type="text";constructor(t,r){super(t),this.offset=r}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Im(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return to(G7(this.getParentAtCaret(),t),this.direction)}getFlipped(){return Im(this.origin,k1(this.direction),this.offset)}isSamePointCaret(t){return t instanceof Dm&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof Om||t instanceof Dm)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return to(this.origin,this.direction)}}function Bf(e){return e instanceof Dm}function Rm(e){return e instanceof Om}function td(e){return e instanceof Fv}const Pce={next:class extends Dm{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Dm{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Fce={next:class extends Om{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends Om{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},Mce={next:class extends Fv{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends Fv{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function to(e,t){return e?new Fce[t](e):null}function Im(e,t,r){return e?new Pce[t](e,$f(e,r)):null}function $f(e,t,r="error"){const n=e.getTextContentSize();let s=t==="next"?n:t==="previous"?0:t;return(s<0||s>n)&&(r!=="clamp"&&(function(a,...i){const o=new URL("https://lexical.dev/docs/error"),c=new URLSearchParams;c.append("code",a);for(const u of i)c.append("v",u);o.search=c.toString(),console.warn(`Minified Lexical warning #${a}; visit ${o.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)})(284,String(t),String(n),e.getKey()),s=s<0?0:n),s}function dM(e,t){return new Dce(e,t)}function Ac(e,t){return Bt(e)?new Mce[t](e):null}function Oce(e){return e&&e.getChildCaret()||e}function V7(e){return e&&Oce(e.getAdjacentCaret())}class q7{type="node-caret-range";constructor(t,r,n){this.anchor=t,this.focus=r,this.direction=n}getLatest(){const t=this.anchor.getLatest(),r=this.focus.getLatest();return t===this.anchor&&r===this.focus?this:new q7(t,r,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return Bf(a)?(function(i,o){const{direction:c,origin:u}=i,d=$f(u,o==="focus"?k1(c):c);return dM(i,d-i.offset)})(a,s):null},r=t("anchor"),n=t("focus");if(r&&n){const{caret:s}=r,{caret:a}=n;if(s.isSameNodeCaret(a))return[dM(s,a.offset-s.offset),null]}return[r,n]}iterNodeCarets(t="root"){const r=Bf(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),s=Bf(n),a=i=>i.isSameNodeCaret(n)?null:V7(i)||i.getParentCaret(t);return Y7({hasNext:i=>i!==null&&!(s&&n.isSameNodeCaret(i)),initial:r.isSameNodeCaret(n)?null:a(r),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class Dce{type="slice";constructor(t,r){this.caret=t,this.distance=r}getSliceIndices(){const{distance:t,caret:{offset:r}}=this,n=r+t;return n<r?[n,r]:[r,n]}getTextContent(){const[t,r]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,r)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:r}}=this,[n,s]=this.getSliceIndices(),a=t.getTextContent();return Im(t.setTextContent(a.slice(0,n)+a.slice(s)),r,n)}}function K7(e){return Xf(e,to(Ks(),e.direction))}function Rce(e){return Xf(e,e)}function Xf(e,t){return e.direction!==t.direction&&tr(265),new q7(e,t,e.direction)}function Y7(e){const{initial:t,hasNext:r,step:n,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!r(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=n(a),i}}}function SW(e,t){const r=r4(e.origin,t.origin);switch(r===null&&tr(275,e.origin.getKey(),t.origin.getKey()),r.type){case"same":{const n=e.type==="text",s=t.type==="text";return n&&s?(function(a,i){return Math.sign(a-i)})(e.offset,t.offset):e.type===t.type?0:n?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return kW(r)}}function kW(e){const{a:t,b:r}=e,n=t.__key,s=r.__key;let a=t,i=r;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===n)return 1}return a===null?1:-1}function hw(e,t){return t.is(e)}function fM(e){return Bt(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function r4(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const r=new Map;for(let[n,s]=fM(e);n;s=n,n=n.getParent())r.set(n,s);for(let[n,s]=fM(t);n;s=n,n=n.getParent()){const a=r.get(n);if(a!==void 0)return a===null?(hw(e,n)||tr(276),{commonAncestor:n,type:"ancestor"}):s===null?(hw(t,n)||tr(277),{commonAncestor:n,type:"descendant"}):((Bt(a)||hw(e,a))&&(Bt(s)||hw(t,s))&&n.is(a.getParent())&&n.is(s.getParent())||tr(278),{a,b:s,commonAncestor:n,type:"branch"})}return null}function x0(e,t){const{type:r,key:n,offset:s}=e,a=Sce(e.key);return r==="text"?(yr(a)||tr(266,a.getType(),n),Im(a,t,s)):(Bt(a)||tr(267,a.getType(),n),Bce(a,e.offset,t))}function Lm(e,t){const{origin:r,direction:n}=t,s=n==="next";Bf(t)?e.set(r.getKey(),t.offset,"text"):Rm(t)?yr(r)?e.set(r.getKey(),$f(r,n),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(s?1:0),"element"):(td(t)&&Bt(r)||tr(268),e.set(r.getKey(),s?0:r.getChildrenSize(),"element"))}function Ice(e){const t=xr(),r=Jt(t)?t:s3();return n4(r,e),ro(r),r}function n4(e,t){Lm(e.anchor,t.anchor),Lm(e.focus,t.focus)}function hM(e){const{anchor:t,focus:r}=e,n=x0(t,"next"),s=x0(r,"next"),a=SW(n,s)<=0?"next":"previous";return Xf(Jp(n,a),Jp(s,a))}function X7(e){const{direction:t,origin:r}=e,n=to(r,k1(t)).getNodeAtCaret();return n?to(n,t):Ac(r.getParentOrThrow(),t)}function mM(e,t="root"){const r=[e];for(let n=td(e)?e.getParentCaret(t):e.getSiblingCaret();n!==null;n=n.getParentCaret(t))r.push(X7(n));return r}function L5(e){return!!e&&e.origin.isAttached()}function Lce(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const r="root",n="next";let s=t;const a=TW(e,n),i=mM(a.anchor,r),o=mM(a.focus.getFlipped(),r),c=new Set,u=[];for(const p of a.iterNodeCarets(r))if(td(p))c.add(p.origin.getKey());else if(Rm(p)){const{origin:y}=p;Bt(y)&&!c.has(y.getKey())||u.push(y)}for(const p of u)p.remove();for(const p of a.getTextSlices()){if(!p)continue;const{origin:y}=p.caret,v=y.getTextContentSize(),C=X7(to(y,n)),w=y.getMode();if(Math.abs(p.distance)===v&&s==="removeEmptySlices"||w==="token"&&p.distance!==0)C.remove();else if(p.distance!==0){s="removeEmptySlices";let _=p.removeTextSlice();const T=p.caret.origin;if(w==="segmented"){const E=_.origin,A=pa(E.getTextContent()).setStyle(E.getStyle()).setFormat(E.getFormat());C.replaceOrInsert(A),_=Im(A,n,_.offset)}T.is(i[0].origin)&&(i[0]=_),T.is(o[0].origin)&&(o[0]=_.getFlipped())}}let d,f;for(const p of i)if(L5(p)){d=wc(p);break}for(const p of o)if(L5(p)){f=wc(p);break}const h=(function(p,y,v){if(!p||!y)return null;const C=p.getParentAtCaret(),w=y.getParentAtCaret();if(!C||!w)return null;const _=C.getParents().reverse();_.push(C);const T=w.getParents().reverse();T.push(w);const E=Math.min(_.length,T.length);let A;for(A=0;A<E&&_[A]===T[A];A++);const F=(D,B)=>{let V;for(let Y=A;Y<D.length;Y++){const re=D[Y];if(qo(re))return;!V&&B(re)&&(V=re)}return V},j=F(_,vc),P=j&&F(T,(D=>v.has(D.getKey())&&vc(D)));return j&&P?[j,P]:null})(d,f,c);if(h){const[p,y]=h;Ac(p,"previous").splice(0,y.getChildren()),y.remove()}const g=[d,f,...i,...o].find(L5);if(g)return Rce(Jp(wc(g),e.direction));tr(269,JSON.stringify(i.map((p=>p.origin.__key))))}function wc(e){const t=(function(s){let a=s;for(;td(a);){const i=V7(a);if(!td(i))break;a=i}return a})(e.getLatest()),{direction:r}=t;if(yr(t.origin))return Bf(t)?t:Im(t.origin,r,r);const n=t.getAdjacentCaret();return Rm(n)&&yr(n.origin)?Im(n.origin,r,k1(r)):t}function CW(e){return Bf(e)&&e.offset!==$f(e.origin,e.direction)}function Jp(e,t){return e.direction===t?e:e.getFlipped()}function TW(e,t){return e.direction===t?e:Xf(Jp(e.focus,t),Jp(e.anchor,t))}function Bce(e,t,r){let n=Ac(e,"next");for(let s=0;s<t;s++){const a=n.getAdjacentCaret();if(a===null)break;n=a}return Jp(n,r)}const NW=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,$ce=NW?S.useLayoutEffect:S.useEffect,mw={tag:nv};function EW({initialConfig:e,children:t}){const r=S.useMemo((()=>{const{theme:n,namespace:s,nodes:a,onError:i,editorState:o,html:c}=e,u=ole(null,n),d=fce({editable:e.editable,html:c,namespace:s,nodes:a,onError:f=>i(f,d),theme:n});return(function(f,h){if(h!==null){if(h===void 0)f.update((()=>{const g=Ks();if(g.isEmpty()){const p=Rs();g.append(p);const y=NW?document.activeElement:null;(xr()!==null||y!==null&&y===f.getRootElement())&&p.select()}}),mw);else if(h!==null)switch(typeof h){case"string":{const g=f.parseEditorState(h);f.setEditorState(g,mw);break}case"object":f.setEditorState(h,mw);break;case"function":f.update((()=>{Ks().isEmpty()&&h(f)}),mw)}}})(d,o),[d,u]}),[]);return $ce((()=>{const n=e.editable,[s]=r;s.setEditable(n===void 0||n)}),[]),l.jsx(v1.Provider,{value:r,children:t})}const Uce=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?S.useLayoutEffect:S.useEffect;function zce(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function Wce(){return(function(e){const[t]=ud(),r=S.useMemo((()=>e(t)),[t,e]),[n,s]=S.useState((()=>r.initialValueFn())),a=S.useRef(n);return Uce((()=>{const{initialValueFn:i,subscribe:o}=r,c=i();return a.current!==c&&(a.current=c,s(c)),o((u=>{a.current=u,s(u)}))}),[r,e]),n})(zce)}function Hce(){return Ks().getTextContent()}function Gce(e,t=!0){if(e)return!1;let r=Hce();return t&&(r=r.trim()),r===""}function Vce(e){if(!Gce(e,!1))return!1;const t=Ks().getChildren(),r=t.length;if(r>1)return!1;for(let n=0;n<r;n++){const s=t[n];if(Jn(s))return!1;if(Bt(s)){if(!P7(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let o=0;o<i;o++){const c=a[n];if(!yr(c))return!1}}}return!0}function AW(e){return()=>Vce(e)}const UC=new Map;function jW(e){const t={};if(!e)return t;const r=e.split(";");for(const n of r)if(n!==""){const[s,a]=n.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function gM(e){let t=UC.get(e);return t===void 0&&(t=jW(e),UC.set(e,t)),t}function PW(e){const t=w2().getElementByKey(e.getKey());if(t===null)return null;const r=t.ownerDocument.defaultView;return r===null?null:r.getComputedStyle(t)}function FW(e){return PW(li(e)?e:e.getParentOrThrow())}function pM(e){const t=FW(e);return t!==null&&t.direction==="rtl"}function MW(e,t){const r=e.getStartEndPoints();if(t.isSelected(e)&&!Gd(t)&&r!==null){const[n,s]=r,a=e.isBackward(),i=n.getNode(),o=s.getNode(),c=t.is(i),u=t.is(o);if(c||u){const[d,f]=MC(e),h=i.is(o),g=t.is(a?o:i),p=t.is(a?i:o);let y,v=0;h?(v=d>f?f:d,y=d>f?d:f):g?(v=a?f:d,y=void 0):p&&(v=0,y=a?d:f),t.__text=t.__text.slice(v,y)}}return t}function qce(e){const t=e.getStyle(),r=jW(t);UC.set(t,r)}function Kce(e,t){const r=e.getFormatType(),n=e.getIndent();r!==t.getFormatType()&&t.setFormat(r),n!==t.getIndent()&&t.setIndent(n)}function Rp(e,t,r=Kce){if(e===null)return;const n=e.getStartEndPoints(),s=new Map;let a=null;if(n){const[i,o]=n;a=s3(),a.anchor.set(i.key,i.offset,i.type),a.focus.set(o.key,o.offset,o.type);const c=B5(i.getNode(),vc),u=B5(o.getNode(),vc);Bt(c)&&s.set(c.getKey(),c),Bt(u)&&s.set(u.getKey(),u)}for(const i of e.getNodes())if(Bt(i)&&vc(i))s.set(i.getKey(),i);else if(n===null){const o=B5(i,vc);Bt(o)&&s.set(o.getKey(),o)}for(const[i,o]of s){const c=t();r(o,c),o.replace(c,!0),a&&(i===a.anchor.key&&a.anchor.set(c.getKey(),a.anchor.offset,a.anchor.type),i===a.focus.key&&a.focus.set(c.getKey(),a.focus.offset,a.focus.type))}a&&e.is(xr())&&ro(a)}function OW(e){const t=DW(e);return t!==null&&t.writingMode==="vertical-rl"}function DW(e){const t=e.anchor.getNode();return Bt(t)?PW(t):FW(t)}function xM(e,t){let r=OW(e)?!t:t;RW(e)&&(r=!r);const n=x0(e.focus,r?"previous":"next");if(CW(n))return!1;for(const s of K7(n)){if(td(s))return!s.origin.isInline();if(!Bt(s.origin)){if(Jn(s.origin))return!0;break}}return!1}function Yce(e,t,r,n){e.modify(t?"extend":"move",r,n)}function RW(e){const t=DW(e);return t!==null&&t.direction==="rtl"}function yM(e,t,r){const n=RW(e);let s;s=OW(e)||n?!r:r,Yce(e,t,s,"character")}function B5(e,t){let r=e;for(;r!==null&&r.getParent()!==null&&!t(r);)r=r.getParentOrThrow();return t(r)?r:null}function Xce(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const IW=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Jce=IW&&"documentMode"in document?document.documentMode:null;!(!IW||!("InputEvent"in window)||Jce)&&"getTargetRanges"in new window.InputEvent("input");function LW(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}function eg(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}function ii(e,...t){const r=LW(...t);r.length>0&&e.classList.add(...r)}function Uf(e,...t){const r=LW(...t);r.length>0&&e.classList.remove(...r)}function Qce(e){return e?e.getAdjacentCaret():null}function Zce(e,t){let r=e;for(;r!=null;){if(r instanceof t)return r;r=r.getParent()}return null}function eue(e){const t=d3(e,(r=>Bt(r)&&!r.isInline()));return Bt(t)||Xce(4,e.__key),t}const d3=(e,t)=>{let r=e;for(;r!==Ks()&&r!=null;){if(t(r))return r;r=r.getParent()}return null};function om(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function BW(e,t){const r=[],n=Array.from(e).reverse();for(let s=n.pop();s!==void 0;s=n.pop())if(t(s))r.push(s);else if(Bt(s))for(const a of tue(s))n.push(a);return r}function tue(e){return rue(Ac(e,"previous"))}function rue(e){return Y7({hasNext:Rm,initial:e.getAdjacentCaret(),map:t=>t.origin.getLatest(),step:t=>t.getAdjacentCaret()})}function nue(e){const t=window.location.origin,r=n=>{if(n.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=n.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const o=i.payload;if(o&&o.functionId==="makeChanges"){const c=o.args;if(c){const[u,d,f,h,g,p]=c;e.update((()=>{const y=xr();if(Jt(y)){const v=y.anchor;let C=v.getNode(),w=0,_=0;if(yr(C)&&u>=0&&d>=0&&(w=u,_=u+d,y.setTextNodeRange(C,w,C,_)),w===_&&f===""||(y.insertRawText(f),C=v.getNode()),yr(C)){w=h,_=h+g;const T=C.getTextContentSize();w=w>T?T:w,_=_>T?T:_,y.setTextNodeRange(C,w,C,_)}n.stopImmediatePropagation()}}))}}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}function sue(e,t){const r=t.body?t.body.childNodes:[];let n=[];const s=[];for(let a=0;a<r.length;a++){const i=r[a];if(!UW.has(i.nodeName)){const o=zW(i,e,s,!1);o!==null&&(n=n.concat(o))}}return(function(a){for(const i of a)i.getNextSibling()instanceof j7&&i.insertAfter(nd());for(const i of a){const o=i.getChildren();for(const c of o)i.insertBefore(c);i.remove()}})(s),n}function aue(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const r=document.createElement("div"),n=Ks().getChildren();for(let s=0;s<n.length;s++)$W(e,n[s],r,t);return r.innerHTML}function $W(e,t,r,n=null){let s=n===null||t.isSelected(n);const a=Bt(t)&&t.excludeFromCopy("html");let i=t;if(n!==null){let g=U7(t);g=yr(g)&&n!==null?MW(n,g):g,i=g}const o=Bt(i)?i.getChildren():[],c=M7(e,i.getType());let u;u=c&&c.exportDOM!==void 0?c.exportDOM(e,i):i.exportDOM(e);const{element:d,after:f}=u;if(!d)return!1;const h=document.createDocumentFragment();for(let g=0;g<o.length;g++){const p=o[g],y=$W(e,p,h,n);!s&&Bt(t)&&y&&t.extractWithChild(p,n,"html")&&(s=!0)}if(s&&!a){if((Is(d)||BC(d))&&d.append(h),r.append(d),f){const g=f.call(i,d);g&&(BC(d)?d.replaceChildren(g):d.replaceWith(g))}}else r.append(h);return s}const UW=new Set(["STYLE","SCRIPT"]);function zW(e,t,r,n,s=new Map,a){let i=[];if(UW.has(e.nodeName))return i;let o=null;const c=(function(p,y){const{nodeName:v}=p,C=y._htmlConversions.get(v.toLowerCase());let w=null;if(C!==void 0)for(const _ of C){const T=_(p);T!==null&&(w===null||(w.priority||0)<=(T.priority||0))&&(w=T)}return w!==null?w.conversion:null})(e,t),u=c?c(e):null;let d=null;if(u!==null){d=u.after;const p=u.node;if(o=Array.isArray(p)?p[p.length-1]:p,o!==null){for(const[,y]of s)if(o=y(o,a),!o)break;o&&i.push(...Array.isArray(p)?p:[o])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const f=e.childNodes;let h=[];const g=(o==null||!qo(o))&&(o!=null&&OC(o)||n);for(let p=0;p<f.length;p++)h.push(...zW(f[p],t,r,g,new Map(s),o));return d!=null&&(h=d(h)),I4(e)&&(h=iue(e,h,g?()=>{const p=new j7;return r.push(p),p}:Rs)),o==null?h.length>0?i=i.concat(h):I4(e)&&(function(p){return p.nextSibling==null||p.previousSibling==null?!1:$C(p.nextSibling)&&$C(p.previousSibling)})(e)&&(i=i.concat(nd())):Bt(o)&&o.append(...h),i}function iue(e,t,r){const n=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const o=t[i];if(OC(o))n&&!o.getFormat()&&o.setFormat(n),s.push(o);else if(a.push(o),i===t.length-1||i<t.length-1&&OC(t[i+1])){const c=r();c.setFormat(n),c.append(...a),s.push(c),a=[]}}return s}function L4(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function oue(e,t=xr()){return t==null&&L4(166),Jt(t)&&t.isCollapsed()||t.getNodes().length===0?"":aue(e,t)}function lue(e,t=xr()){return t==null&&L4(166),Jt(t)&&t.isCollapsed()||t.getNodes().length===0?null:JSON.stringify(cue(e,t))}function vM(e,t,r){const n=e.getData("application/x-lexical-editor");if(n)try{const o=JSON.parse(n);if(o.namespace===r._config.namespace&&Array.isArray(o.nodes))return bM(r,uue(o.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const o=new DOMParser().parseFromString((function(c){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(c):c})(s),"text/html");return bM(r,sue(r,o),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(Jt(t)){const o=i.split(/(\r?\n|\t)/);o[o.length-1]===""&&o.pop();for(let c=0;c<o.length;c++){const u=xr();if(Jt(u)){const d=o[c];d===`
`||d===`\r
`?u.insertParagraph():d==="	"?u.insertNodes([w1()]):u.insertText(d)}}}else t.insertRawText(i)}function bM(e,t,r){e.dispatchCommand(Ole,{nodes:t,selection:r})||(r.insertNodes(t),(function(n){if(Jt(n)&&n.isCollapsed()){const s=n.anchor;let a=null;const i=x0(s,"previous");if(i)if(Bf(i))a=i.origin;else{const o=Xf(i,Ac(Ks(),"next").getFlipped());for(const c of o){if(yr(c.origin)){a=c.origin;break}if(Bt(c.origin)&&!c.origin.isInline())break}}if(a&&yr(a)){const o=a.getFormat(),c=a.getStyle();n.format===o&&n.style===c||(n.format=o,n.style=c,n.dirty=!0)}}})(r))}function WW(e,t,r,n=[]){let s=t===null||r.isSelected(t);const a=Bt(r)&&r.excludeFromCopy("html");let i=r;if(t!==null){let u=U7(r);u=yr(u)&&t!==null?MW(t,u):u,i=u}const o=Bt(i)?i.getChildren():[],c=(function(u){const d=u.exportJSON(),f=u.constructor;if(d.type!==f.getType()&&L4(58,f.name),Bt(u)){const h=d.children;Array.isArray(h)||L4(59,f.name)}return d})(i);if(yr(i)){const u=i.__text;u.length>0?c.text=u:s=!1}for(let u=0;u<o.length;u++){const d=o[u],f=WW(e,t,d,c.children);!s&&Bt(r)&&f&&r.extractWithChild(d,t,"clone")&&(s=!0)}if(s&&!a)n.push(c);else if(Array.isArray(c.children))for(let u=0;u<c.children.length;u++){const d=c.children[u];n.push(d)}return s}function cue(e,t){const r=[],n=Ks().getChildren();for(let s=0;s<n.length;s++)WW(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function uue(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r],s=ace(n);yr(s)&&qce(s),t.push(s)}return t}let ip=null;async function wM(e,t,r){if(ip!==null)return!1;if(t!==null)return new Promise(((u,d)=>{e.update((()=>{u(_M(e,t,r))}))}));const n=e.getRootElement(),s=e._window||window,a=window.document,i=mu(s);if(n===null||i===null)return!1;const o=a.createElement("span");o.style.cssText="position: fixed; top: -1000px;",o.append(a.createTextNode("#")),n.append(o);const c=new Range;return c.setStart(o,0),c.setEnd(o,1),i.removeAllRanges(),i.addRange(c),new Promise(((u,d)=>{const f=e.registerCommand(t3,(h=>(om(h,ClipboardEvent)&&(f(),ip!==null&&(window.clearTimeout(ip),ip=null),u(_M(e,h,r))),!0)),dce);ip=window.setTimeout((()=>{f(),ip=null,u(!1)}),50),a.execCommand("copy"),o.remove()}))}function _M(e,t,r){if(r===void 0){const s=mu(e._window);if(!s)return!1;const a=s.anchorNode,i=s.focusNode;if(a!==null&&i!==null&&!v2(e,a,i))return!1;const o=xr();if(o===null)return!1;r=fue(o)}t.preventDefault();const n=t.clipboardData;return n!==null&&(hue(n,r),!0)}const due=[["text/html",oue],["application/x-lexical-editor",lue]];function fue(e=xr()){const t={"text/plain":e?e.getTextContent():""};if(e){const r=w2();for(const[n,s]of due){const a=s(r,e);a!==null&&(t[n]=a)}}return t}function hue(e,t){for(const r in t){const n=t[r];n!==void 0&&e.setData(r,n)}}function SM(e,t){if(document.caretRangeFromPoint!==void 0){const r=document.caretRangeFromPoint(e,t);return r===null?null:{node:r.startContainer,offset:r.startOffset}}if(document.caretPositionFromPoint!=="undefined"){const r=document.caretPositionFromPoint(e,t);return r===null?null:{node:r.offsetNode,offset:r.offset}}return null}const C1=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,mue=C1&&"documentMode"in document?document.documentMode:null,gue=!(!C1||!("InputEvent"in window)||mue)&&"getTargetRanges"in new window.InputEvent("input"),pue=C1&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),kM=C1&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,xue=C1&&/^(?=.*Chrome).*/i.test(navigator.userAgent),yue=C1&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!xue,CM=an("DRAG_DROP_PASTE_FILE");let _2=class HW extends ko{static getType(){return"quote"}static clone(t){return new HW(t.__key)}createDOM(t){const r=document.createElement("blockquote");return ii(r,t.theme.quote),r}updateDOM(t,r){return!1}static importDOM(){return{blockquote:t=>({conversion:vue,priority:0})}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Is(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return S2().updateFromJSON(t)}insertNewAfter(t,r){const n=Rs(),s=this.getDirection();return n.setDirection(s),this.insertAfter(n,r),n}collapseAtStart(){const t=Rs();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function S2(){return Qo(new _2)}function TM(e){return e instanceof _2}let k2=class GW extends ko{static getType(){return"heading"}static clone(t){return new GW(t.__tag,t.__key)}constructor(t,r){super(r),this.__tag=t}getTag(){return this.__tag}setTag(t){const r=this.getWritable();return this.__tag=t,r}createDOM(t){const r=this.__tag,n=document.createElement(r),s=t.theme.heading;if(s!==void 0){const a=s[r];ii(n,a)}return n}updateDOM(t,r,n){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:op,priority:0}),h2:t=>({conversion:op,priority:0}),h3:t=>({conversion:op,priority:0}),h4:t=>({conversion:op,priority:0}),h5:t=>({conversion:op,priority:0}),h6:t=>({conversion:op,priority:0}),p:t=>{const r=t.firstChild;return r!==null&&NM(r)?{conversion:()=>({node:null}),priority:3}:null},span:t=>NM(t)?{conversion:r=>({node:Mf("h1")}),priority:3}:null}}exportDOM(t){const{element:r}=super.exportDOM(t);if(Is(r)){this.isEmpty()&&r.append(document.createElement("br"));const n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();s&&(r.dir=s)}return{element:r}}static importJSON(t){return Mf(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,r=!0){const n=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&n===s.getTextContentSize()||!t?Rs():Mf(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,r),n===0&&!this.isEmpty()&&t){const o=Rs();o.select(),this.replace(o,!0)}return a}collapseAtStart(){const t=this.isEmpty()?Rs():Mf(this.getTag());return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}extractWithChild(){return!0}};function NM(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function op(e){const t=e.nodeName.toLowerCase();let r=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(r=Mf(t),e.style!==null&&(z7(e,r),r.setFormat(e.style.textAlign))),{node:r}}function vue(e){const t=S2();return e.style!==null&&(t.setFormat(e.style.textAlign),z7(e,t)),{node:t}}function Mf(e="h1"){return Qo(new k2(e))}function bue(e){return e instanceof k2}function gw(e){let t=null;if(om(e,DragEvent)?t=e.dataTransfer:om(e,ClipboardEvent)&&(t=e.clipboardData),t===null)return[!1,[],!1];const r=t.types,n=r.includes("Files"),s=r.includes("text/html")||r.includes("text/plain");return[n,Array.from(t.files),s]}function EM(e){const t=xr();if(!Jt(t))return!1;const r=new Set,n=t.getNodes();for(let s=0;s<n.length;s++){const a=n[s],i=a.getKey();if(r.has(i))continue;const o=d3(a,(u=>Bt(u)&&!u.isInline()));if(o===null)continue;const c=o.getKey();o.canIndent()&&!r.has(c)&&(r.add(c),e(o))}return r.size>0}function AM(e){const t=Yf(e);return Jn(t)}function $5(e){for(const t of["lowercase","uppercase","capitalize"])e.hasFormat(t)&&e.toggleFormat(t)}function wue(e){return eg(e.registerCommand(v7,(t=>{const r=xr();return!!ho(r)&&(r.clear(),!0)}),Un),e.registerCommand(gm,(t=>{const r=xr();return Jt(r)?(r.deleteCharacter(t),!0):!!ho(r)&&(r.deleteNodes(),!0)}),Un),e.registerCommand(jv,(t=>{const r=xr();return!!Jt(r)&&(r.deleteWord(t),!0)}),Un),e.registerCommand(Pv,(t=>{const r=xr();return!!Jt(r)&&(r.deleteLine(t),!0)}),Un),e.registerCommand(Mp,(t=>{const r=xr();if(typeof t=="string")r!==null&&r.insertText(t);else{if(r===null)return!1;const n=t.dataTransfer;if(n!=null)vM(n,r,e);else if(Jt(r)){const s=t.data;return s&&r.insertText(s),!0}}return!0}),Un),e.registerCommand(TC,(()=>{const t=xr();return!!Jt(t)&&(t.removeText(),!0)}),Un),e.registerCommand(wo,(t=>{const r=xr();return!!Jt(r)&&(r.formatText(t),!0)}),Un),e.registerCommand(Uz,(t=>{const r=xr();if(!Jt(r)&&!ho(r))return!1;const n=r.getNodes();for(const s of n){const a=d3(s,(i=>Bt(i)&&!i.isInline()));a!==null&&a.setFormat(t)}return!0}),Un),e.registerCommand(Fp,(t=>{const r=xr();return!!Jt(r)&&(r.insertLineBreak(t),!0)}),Un),e.registerCommand(Av,(()=>{const t=xr();return!!Jt(t)&&(t.insertParagraph(),!0)}),Un),e.registerCommand(Lle,(()=>(rce([w1()]),!0)),Un),e.registerCommand(Ble,(()=>EM((t=>{const r=t.getIndent();t.setIndent(r+1)}))),Un),e.registerCommand(FF,(()=>EM((t=>{const r=t.getIndent();r>0&&t.setIndent(Math.max(0,r-1))}))),Un),e.registerCommand(Mz,(t=>{const r=xr();if(ho(r)){const n=r.getNodes();if(n.length>0)return n[0].selectPrevious(),!0}else if(Jt(r)){const n=RC(r.focus,!0);if(!t.shiftKey&&Jn(n)&&!n.isIsolated()&&!n.isInline())return n.selectPrevious(),t.preventDefault(),!0}return!1}),Un),e.registerCommand(Oz,(t=>{const r=xr();if(ho(r)){const n=r.getNodes();if(n.length>0)return n[0].selectNext(0,0),!0}else if(Jt(r)){if((function(s){const a=s.focus;return a.key==="root"&&a.offset===Ks().getChildrenSize()})(r))return t.preventDefault(),!0;const n=RC(r.focus,!1);if(!t.shiftKey&&Jn(n)&&!n.isIsolated()&&!n.isInline())return n.selectNext(),t.preventDefault(),!0}return!1}),Un),e.registerCommand(Fz,(t=>{const r=xr();if(ho(r)){const n=r.getNodes();if(n.length>0)return t.preventDefault(),pM(n[0])?n[0].selectNext(0,0):n[0].selectPrevious(),!0}if(!Jt(r))return!1;if(xM(r,!0)){const n=t.shiftKey;return t.preventDefault(),yM(r,n,!0),!0}return!1}),Un),e.registerCommand(Pz,(t=>{const r=xr();if(ho(r)){const s=r.getNodes();if(s.length>0)return t.preventDefault(),pM(s[0])?s[0].selectPrevious():s[0].selectNext(0,0),!0}if(!Jt(r))return!1;const n=t.shiftKey;return!!xM(r,!1)&&(t.preventDefault(),yM(r,n,!1),!0)}),Un),e.registerCommand(Rz,(t=>{if(AM(t.target))return!1;const r=xr();if(Jt(r)){if((function(n){if(!n.isCollapsed())return!1;const{anchor:s}=n;if(s.offset!==0)return!1;const a=s.getNode();if(li(a))return!1;const i=eue(a);return i.getIndent()>0&&(i.is(a)||a.is(i.getFirstDescendant()))})(r))return t.preventDefault(),e.dispatchCommand(FF,void 0);if(kM&&navigator.language==="ko-KR")return!1}else if(!ho(r))return!1;return t.preventDefault(),e.dispatchCommand(gm,!0)}),Un),e.registerCommand(Lz,(t=>{if(AM(t.target))return!1;const r=xr();return!(!Jt(r)&&!ho(r))&&(t.preventDefault(),e.dispatchCommand(gm,!1))}),Un),e.registerCommand(j4,(t=>{const r=xr();if(!Jt(r))return!1;if($5(r),t!==null){if((kM||pue||yue)&&gue)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(Fp,!1)}return e.dispatchCommand(Av,void 0)}),Un),e.registerCommand(Iz,(()=>{const t=xr();return!!Jt(t)&&(e.blur(),!0)}),Un),e.registerCommand($z,(t=>{const[,r]=gw(t);if(r.length>0){const s=SM(t.clientX,t.clientY);if(s!==null){const{offset:a,node:i}=s,o=Yf(i);if(o!==null){const c=s3();if(yr(o))c.anchor.set(o.getKey(),a,"text"),c.focus.set(o.getKey(),a,"text");else{const d=o.getParentOrThrow().getKey(),f=o.getIndexWithinParent()+1;c.anchor.set(d,f,"element"),c.focus.set(d,f,"element")}const u=C4(c);ro(u)}e.dispatchCommand(CM,r)}return t.preventDefault(),!0}const n=xr();return!!Jt(n)}),Un),e.registerCommand(zz,(t=>{const[r]=gw(t),n=xr();return!(r&&!Jt(n))}),Un),e.registerCommand(Wz,(t=>{const[r]=gw(t),n=xr();if(r&&!Jt(n))return!1;const s=SM(t.clientX,t.clientY);if(s!==null){const a=Yf(s.node);Jn(a)&&t.preventDefault()}return!0}),Un),e.registerCommand(NC,(()=>(yce(),!0)),Un),e.registerCommand(t3,(t=>(wM(e,om(t,ClipboardEvent)?t:null),!0)),Un),e.registerCommand(S7,(t=>((async function(r,n){await wM(n,om(r,ClipboardEvent)?r:null),n.update((()=>{const s=xr();Jt(s)?s.removeText():ho(s)&&s.getNodes().forEach((a=>a.remove()))}))})(t,e),!0)),Un),e.registerCommand(b7,(t=>{const[,r,n]=gw(t);return r.length>0&&!n?(e.dispatchCommand(CM,r),!0):S1(t.target)&&O7(t.target)?!1:xr()!==null&&((function(s,a){s.preventDefault(),a.update((()=>{const i=xr(),o=om(s,InputEvent)||om(s,KeyboardEvent)?null:s.clipboardData;o!=null&&i!==null&&vM(o,i,a)}),{tag:oce})})(t,e),!0)}),Un),e.registerCommand(Dz,(t=>{const r=xr();return Jt(r)&&$5(r),!1}),Un),e.registerCommand(Bz,(t=>{const r=xr();return Jt(r)&&$5(r),!1}),Un))}const zC=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?S.useLayoutEffect:S.useEffect;function jM(e){return e.getEditorState().read(AW(e.isComposing()))}function VW({contentEditable:e,placeholder:t=null,ErrorBoundary:r}){const[n]=ud(),s=(function(a,i){const[o,c]=S.useState((()=>a.getDecorators()));return zC((()=>a.registerDecoratorListener((u=>{Fk.flushSync((()=>{c(u)}))}))),[a]),S.useEffect((()=>{c(a.getDecorators())}),[a]),S.useMemo((()=>{const u=[],d=Object.keys(o);for(let f=0;f<d.length;f++){const h=d[f],g=l.jsx(i,{onError:y=>a._onError(y),children:l.jsx(S.Suspense,{fallback:null,children:o[h]})}),p=a.getElementByKey(h);p!==null&&u.push(Fk.createPortal(g,p,h))}return u}),[i,o,a])})(n,r);return(function(a){zC((()=>eg(wue(a),nue(a))),[a])})(n),l.jsxs(l.Fragment,{children:[e,l.jsx(_ue,{content:t}),s]})}function _ue({content:e}){const[t]=ud(),r=(function(s){const[a,i]=S.useState((()=>jM(s)));return zC((()=>{function o(){const c=jM(s);i(c)}return o(),eg(s.registerUpdateListener((()=>{o()})),s.registerEditableListener((()=>{o()})))}),[s]),a})(t),n=Wce();return r?typeof e=="function"?e(n):e:null}const qW=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?S.useLayoutEffect:S.useEffect;function Sue({editor:e,ariaActiveDescendant:t,ariaAutoComplete:r,ariaControls:n,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:o,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:f,ariaRequired:h,autoCapitalize:g,className:p,id:y,role:v="textbox",spellCheck:C=!0,style:w,tabIndex:_,"data-testid":T,...E},A){const[F,j]=S.useState(e.isEditable()),P=S.useCallback((B=>{B&&B.ownerDocument&&B.ownerDocument.defaultView?e.setRootElement(B):e.setRootElement(null)}),[e]),D=S.useMemo((()=>(function(...B){return V=>{B.forEach((Y=>{typeof Y=="function"?Y(V):Y!=null&&(Y.current=V)}))}})(A,P)),[P,A]);return qW((()=>(j(e.isEditable()),e.registerEditableListener((B=>{j(B)})))),[e]),l.jsx("div",{"aria-activedescendant":F?t:void 0,"aria-autocomplete":F?r:"none","aria-controls":F?n:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":F&&v==="combobox"?!!i:void 0,...o!=null?{"aria-invalid":o}:{},"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":F?f:void 0,"aria-readonly":!F||void 0,"aria-required":h,autoCapitalize:g,className:p,contentEditable:F,"data-testid":T,id:y,ref:D,role:v,spellCheck:C,style:w,tabIndex:_,...E})}const kue=S.forwardRef(Sue);function PM(e){return e.getEditorState().read(AW(e.isComposing()))}const KW=S.forwardRef(Cue);function Cue(e,t){const{placeholder:r,...n}=e,[s]=ud();return l.jsxs(l.Fragment,{children:[l.jsx(kue,{editor:s,...n,ref:t}),r!=null&&l.jsx(Tue,{editor:s,content:r})]})}function Tue({content:e,editor:t}){const r=(function(i){const[o,c]=S.useState((()=>PM(i)));return qW((()=>{function u(){const d=PM(i);c(d)}return u(),eg(i.registerUpdateListener((()=>{u()})),i.registerEditableListener((()=>{u()})))}),[i]),o})(t),[n,s]=S.useState(t.isEditable());if(S.useLayoutEffect((()=>(s(t.isEditable()),t.registerEditableListener((i=>{s(i)})))),[t]),!r)return null;let a=null;return typeof e=="function"?a=e(n):e!==null&&(a=e),a===null?null:l.jsx("div",{"aria-hidden":!0,children:a})}const pw=0,WC=1,HC=2,nu=0,Nue=1,FM=2,Eue=3,Aue=4;function jue(e,t,r,n,s){if(e===null||r.size===0&&n.size===0&&!s)return nu;const a=t._selection,i=e._selection;if(s)return Nue;if(!(Jt(a)&&Jt(i)&&i.isCollapsed()&&a.isCollapsed()))return nu;const o=(function(C,w,_){const T=C._nodeMap,E=[];for(const A of w){const F=T.get(A);F!==void 0&&E.push(F)}for(const[A,F]of _){if(!F)continue;const j=T.get(A);j===void 0||li(j)||E.push(j)}return E})(t,r,n);if(o.length===0)return nu;if(o.length>1){const C=t._nodeMap,w=C.get(a.anchor.key),_=C.get(i.anchor.key);return w&&_&&!e._nodeMap.has(w.__key)&&yr(w)&&w.__text.length===1&&a.anchor.offset===1?FM:nu}const c=o[0],u=e._nodeMap.get(c.__key);if(!yr(u)||!yr(c)||u.__mode!==c.__mode)return nu;const d=u.__text,f=c.__text;if(d===f)return nu;const h=a.anchor,g=i.anchor;if(h.key!==g.key||h.type!=="text")return nu;const p=h.offset,y=g.offset,v=f.length-d.length;return v===1&&y===p-1?FM:v===-1&&y===p+1?Eue:v===-1&&y===p?Aue:nu}function Pue(e,t){let r=Date.now(),n=nu;return(s,a,i,o,c,u)=>{const d=Date.now();if(u.has(O4))return n=nu,r=d,HC;const f=jue(s,a,o,c,e.isComposing()),h=(()=>{const g=i===null||i.editor===e,p=u.has(ice);if(!p&&g&&u.has(nv))return pw;if(s===null)return WC;const y=a._selection;return o.size>0||c.size>0?p===!1&&f!==nu&&f===n&&d<r+t&&g||o.size===1&&(function(v,C,w){const _=C._nodeMap.get(v),T=w._nodeMap.get(v),E=C._selection,A=w._selection;return!(Jt(E)&&Jt(A)&&E.anchor.type==="element"&&E.focus.type==="element"&&A.anchor.type==="text"&&A.focus.type==="text"||!yr(_)||!yr(T)||_.__parent!==T.__parent)&&JSON.stringify(C.read((()=>_.exportJSON())))===JSON.stringify(w.read((()=>T.exportJSON())))})(Array.from(o)[0],s,a)?pw:WC:y!==null?pw:HC})();return r=d,n=f,h}}function MM(e){e.undoStack=[],e.redoStack=[],e.current=null}function Fue(e,t,r){const n=Pue(e,r);return eg(e.registerCommand(w7,(()=>((function(a,i){const o=i.redoStack,c=i.undoStack;if(c.length!==0){const u=i.current,d=c.pop();u!==null&&(o.push(u),a.dispatchCommand(ow,!0)),c.length===0&&a.dispatchCommand(lw,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:O4})}})(e,t),!0)),Un),e.registerCommand(_7,(()=>((function(a,i){const o=i.redoStack,c=i.undoStack;if(o.length!==0){const u=i.current;u!==null&&(c.push(u),a.dispatchCommand(lw,!0));const d=o.pop();o.length===0&&a.dispatchCommand(ow,!1),i.current=d||null,d&&d.editor.setEditorState(d.editorState,{tag:O4})}})(e,t),!0)),Un),e.registerCommand(Ule,(()=>(MM(t),!1)),Un),e.registerCommand(zle,(()=>(MM(t),e.dispatchCommand(ow,!1),e.dispatchCommand(lw,!1),!0)),Un),e.registerUpdateListener((({editorState:a,prevEditorState:i,dirtyLeaves:o,dirtyElements:c,tags:u})=>{const d=t.current,f=t.redoStack,h=t.undoStack,g=d===null?null:d.editorState;if(d!==null&&a===g)return;const p=n(i,a,d,o,c,u);if(p===WC)f.length!==0&&(t.redoStack=[],e.dispatchCommand(ow,!1)),d!==null&&(h.push({...d}),e.dispatchCommand(lw,!0));else if(p===HC)return;t.current={editor:e,editorState:a}})))}function Mue(){return{current:null,redoStack:[],undoStack:[]}}function YW({delay:e,externalHistoryState:t}){const[r]=ud();return(function(n,s,a=1e3){const i=S.useMemo((()=>s||Mue()),[s]);S.useEffect((()=>Fue(n,i,a)),[a,n,i])})(r,t,e),null}function XW({defaultSelection:e}){const[t]=ud();return S.useEffect((()=>{t.focus((()=>{const r=document.activeElement,n=t.getRootElement();n===null||r!==null&&n.contains(r)||n.focus({preventScroll:!0})}),{defaultSelection:e})}),[e,t]),null}function GC(e,t){return GC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},GC(e,t)}var OM={error:null},Oue=(function(e){var t,r;function n(){for(var a,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(a=e.call.apply(e,[this].concat(o))||this).state=OM,a.resetErrorBoundary=function(){for(var u,d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];a.props.onReset==null||(u=a.props).onReset.apply(u,f),a.reset()},a}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,GC(t,r),n.getDerivedStateFromError=function(a){return{error:a}};var s=n.prototype;return s.reset=function(){this.setState(OM)},s.componentDidCatch=function(a,i){var o,c;(o=(c=this.props).onError)==null||o.call(c,a,i)},s.componentDidUpdate=function(a,i){var o,c,u,d,f=this.state.error,h=this.props.resetKeys;f!==null&&i.error!==null&&((u=a.resetKeys)===void 0&&(u=[]),(d=h)===void 0&&(d=[]),u.length!==d.length||u.some((function(g,p){return!Object.is(g,d[p])})))&&((o=(c=this.props).onResetKeysChange)==null||o.call(c,a.resetKeys,h),this.reset())},s.render=function(){var a=this.state.error,i=this.props,o=i.fallbackRender,c=i.FallbackComponent,u=i.fallback;if(a!==null){var d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(S.isValidElement(u))return u;if(typeof o=="function")return o(d);if(c)return S.createElement(c,d);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},n})(S.Component);function JW({children:e,onError:t}){return l.jsx(Oue,{fallback:l.jsx("div",{style:{border:"1px solid #f00",color:"#f00",padding:"8px"},children:"An error was thrown."}),onError:t,children:e})}const J7=/^(\d+(?:\.\d+)?)px$/,Ip={BOTH:3,NO_STATUS:0,ROW:1};class T1 extends ko{static getType(){return"tablecell"}static clone(t){return new T1(t.__headerState,t.__colSpan,t.__width,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__rowSpan=t.__rowSpan,this.__backgroundColor=t.__backgroundColor,this.__verticalAlign=t.__verticalAlign}static importDOM(){return{td:t=>({conversion:DM,priority:0}),th:t=>({conversion:DM,priority:0})}}static importJSON(t){return QW().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeaderStyles(t.headerState).setColSpan(t.colSpan||1).setRowSpan(t.rowSpan||1).setWidth(t.width||void 0).setBackgroundColor(t.backgroundColor||null).setVerticalAlign(t.verticalAlign||void 0)}constructor(t=Ip.NO_STATUS,r=1,n,s){super(s),this.__colSpan=r,this.__rowSpan=1,this.__headerState=t,this.__width=n,this.__backgroundColor=null,this.__verticalAlign=void 0}createDOM(t){const r=document.createElement(this.getTag());return this.__width&&(r.style.width=`${this.__width}px`),this.__colSpan>1&&(r.colSpan=this.__colSpan),this.__rowSpan>1&&(r.rowSpan=this.__rowSpan),this.__backgroundColor!==null&&(r.style.backgroundColor=this.__backgroundColor),VC(this.__verticalAlign)&&(r.style.verticalAlign=this.__verticalAlign),ii(r,t.theme.tableCell,this.hasHeader()&&t.theme.tableCellHeader),r}exportDOM(t){const r=super.exportDOM(t);if(Is(r.element)){const n=r.element;n.setAttribute("data-temporary-table-cell-lexical-key",this.getKey()),n.style.border="1px solid black",this.__colSpan>1&&(n.colSpan=this.__colSpan),this.__rowSpan>1&&(n.rowSpan=this.__rowSpan),n.style.width=`${this.getWidth()||75}px`,n.style.verticalAlign=this.getVerticalAlign()||"top",n.style.textAlign="start",this.__backgroundColor===null&&this.hasHeader()&&(n.style.backgroundColor="#f2f3f5")}return r}exportJSON(){return{...super.exportJSON(),...VC(this.__verticalAlign)&&{verticalAlign:this.__verticalAlign},backgroundColor:this.getBackgroundColor(),colSpan:this.__colSpan,headerState:this.__headerState,rowSpan:this.__rowSpan,width:this.getWidth()}}getColSpan(){return this.getLatest().__colSpan}setColSpan(t){const r=this.getWritable();return r.__colSpan=t,r}getRowSpan(){return this.getLatest().__rowSpan}setRowSpan(t){const r=this.getWritable();return r.__rowSpan=t,r}getTag(){return this.hasHeader()?"th":"td"}setHeaderStyles(t,r=Ip.BOTH){const n=this.getWritable();return n.__headerState=t&r|n.__headerState&~r,n}getHeaderStyles(){return this.getLatest().__headerState}setWidth(t){const r=this.getWritable();return r.__width=t,r}getWidth(){return this.getLatest().__width}getBackgroundColor(){return this.getLatest().__backgroundColor}setBackgroundColor(t){const r=this.getWritable();return r.__backgroundColor=t,r}getVerticalAlign(){return this.getLatest().__verticalAlign}setVerticalAlign(t){const r=this.getWritable();return r.__verticalAlign=t||void 0,r}toggleHeaderStyle(t){const r=this.getWritable();return(r.__headerState&t)===t?r.__headerState-=t:r.__headerState+=t,r}hasHeaderState(t){return(this.getHeaderStyles()&t)===t}hasHeader(){return this.getLatest().__headerState!==Ip.NO_STATUS}updateDOM(t){return t.__headerState!==this.__headerState||t.__width!==this.__width||t.__colSpan!==this.__colSpan||t.__rowSpan!==this.__rowSpan||t.__backgroundColor!==this.__backgroundColor||t.__verticalAlign!==this.__verticalAlign}isShadowRoot(){return!0}collapseAtStart(){return!0}canBeEmpty(){return!1}canIndent(){return!1}}function VC(e){return e==="middle"||e==="bottom"}function DM(e){const t=e,r=e.nodeName.toLowerCase();let n;J7.test(t.style.width)&&(n=parseFloat(t.style.width));const s=QW(r==="th"?Ip.ROW:Ip.NO_STATUS,t.colSpan,n);s.__rowSpan=t.rowSpan;const a=t.style.backgroundColor;a!==""&&(s.__backgroundColor=a);const i=t.style.verticalAlign;VC(i)&&(s.__verticalAlign=i);const o=t.style,c=(o&&o.textDecoration||"").split(" "),u=o.fontWeight==="700"||o.fontWeight==="bold",d=c.includes("line-through"),f=o.fontStyle==="italic",h=c.includes("underline");return{after:g=>{const p=[];let y=null;const v=()=>{if(y){const C=y.getFirstChild();a0(C)&&y.getChildrenSize()===1&&C.remove()}};for(const C of g)wce(C)||yr(C)||a0(C)?(yr(C)&&(u&&C.toggleFormat("bold"),d&&C.toggleFormat("strikethrough"),f&&C.toggleFormat("italic"),h&&C.toggleFormat("underline")),y?y.append(C):(y=Rs().append(C),p.push(y))):(p.push(C),v(),y=null);return v(),p.length===0&&p.push(Rs()),p},node:s}}function QW(e=Ip.NO_STATUS,t=1,r){return Qo(new T1(e,t,r))}function Mv(e){return e instanceof T1}function qC(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}class N1 extends ko{static getType(){return"tablerow"}static clone(t){return new N1(t.__height,t.__key)}static importDOM(){return{tr:t=>({conversion:Due,priority:0})}}static importJSON(t){return ZW().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHeight(t.height)}constructor(t,r){super(r),this.__height=t}exportJSON(){const t=this.getHeight();return{...super.exportJSON(),...t===void 0?void 0:{height:t}}}createDOM(t){const r=document.createElement("tr");return this.__height&&(r.style.height=`${this.__height}px`),ii(r,t.theme.tableRow),r}extractWithChild(t,r,n){return n==="html"}isShadowRoot(){return!0}setHeight(t){const r=this.getWritable();return r.__height=t,r}getHeight(){return this.getLatest().__height}updateDOM(t){return t.__height!==this.__height}canBeEmpty(){return!1}canIndent(){return!1}}function Due(e){const t=e;let r;return J7.test(t.style.height)&&(r=parseFloat(t.style.height)),{after:n=>BW(n,Mv),node:ZW(r)}}function ZW(e){return Qo(new N1(e))}function eH(e){return e instanceof N1}const tH=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Rue=tH&&"documentMode"in document?document.documentMode:null;tH&&"InputEvent"in window&&!Rue&&new window.InputEvent("input");function Iue(e,t,r){const n=[];let s=null,a=null;function i(c){let u=n[c];return u===void 0&&(n[c]=u=[]),u}const o=e.getChildren();for(let c=0;c<o.length;c++){const u=o[c];eH(u)||qC(209);const d=i(c);for(let f=u.getFirstChild(),h=0;f!=null;f=f.getNextSibling()){for(Mv(f)||qC(147);d[h]!==void 0;)h++;const g={cell:f,startColumn:h,startRow:c},{__rowSpan:p,__colSpan:y}=f;for(let v=0;v<p&&!(c+v>=o.length);v++){const C=i(c+v);for(let w=0;w<y;w++)C[h+w]=g}}}return[n,s,a]}function Ty(e){return Is(e)&&e.nodeName==="TABLE"}function Lue(e,t){for(let r=t,n=null;r!==null;r=r.getParent()){if(e.is(r))return n;Mv(r)&&(n=r)}return null}function Bue(e,t,r){return Lue(e,Yf(t,r))}function RM(e,t,r){if(!t.theme.tableAlignment)return;const n=[],s=[];for(const a of["center","right"]){const i=t.theme.tableAlignment[a];i&&(a===r?s:n).push(i)}Uf(e,...n),ii(e,...s)}const $ue=new WeakSet;function IM(e=w2()){return $ue.has(e)}class C2 extends ko{static getType(){return"table"}getColWidths(){return this.getLatest().__colWidths}setColWidths(t){const r=this.getWritable();return r.__colWidths=t,r}static clone(t){return new C2(t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__colWidths=t.__colWidths,this.__rowStriping=t.__rowStriping,this.__frozenColumnCount=t.__frozenColumnCount,this.__frozenRowCount=t.__frozenRowCount}static importDOM(){return{table:t=>({conversion:Uue,priority:1})}}static importJSON(t){return rH().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setRowStriping(t.rowStriping||!1).setFrozenColumns(t.frozenColumnCount||0).setFrozenRows(t.frozenRowCount||0).setColWidths(t.colWidths)}constructor(t){super(t),this.__rowStriping=!1,this.__frozenColumnCount=0,this.__frozenRowCount=0}exportJSON(){return{...super.exportJSON(),colWidths:this.getColWidths(),frozenColumnCount:this.__frozenColumnCount?this.__frozenColumnCount:void 0,frozenRowCount:this.__frozenRowCount?this.__frozenRowCount:void 0,rowStriping:this.__rowStriping?this.__rowStriping:void 0}}extractWithChild(t,r,n){return n==="html"}getDOMSlot(t){const r=Ty(t)?t:t.querySelector("table");return Ty(r)||qC(229),super.getDOMSlot(t).withElement(r).withAfter(r.querySelector("colgroup"))}createDOM(t,r){const n=document.createElement("table");this.__style&&(n.style.cssText=this.__style);const s=document.createElement("colgroup");if(n.appendChild(s),Tce(s),ii(n,t.theme.table),this.updateTableElement(null,n,t),IM(r)){const a=document.createElement("div"),i=t.theme.tableScrollableWrapper;return i?ii(a,i):a.style.cssText="overflow-x: auto;",a.appendChild(n),this.updateTableWrapper(null,a,n,t),a}return n}updateTableWrapper(t,r,n,s){this.__frozenColumnCount!==(t?t.__frozenColumnCount:0)&&(function(a,i,o,c){c>0?(ii(a,o.theme.tableFrozenColumn),i.setAttribute("data-lexical-frozen-column","true")):(Uf(a,o.theme.tableFrozenColumn),i.removeAttribute("data-lexical-frozen-column"))})(r,n,s,this.__frozenColumnCount),this.__frozenRowCount!==(t?t.__frozenRowCount:0)&&(function(a,i,o,c){c>0?(ii(a,o.theme.tableFrozenRow),i.setAttribute("data-lexical-frozen-row","true")):(Uf(a,o.theme.tableFrozenRow),i.removeAttribute("data-lexical-frozen-row"))})(r,n,s,this.__frozenRowCount)}updateTableElement(t,r,n){this.__style!==(t?t.__style:"")&&(r.style.cssText=this.__style),this.__rowStriping!==(!!t&&t.__rowStriping)&&(function(s,a,i){i?(ii(s,a.theme.tableRowStriping),s.setAttribute("data-lexical-row-striping","true")):(Uf(s,a.theme.tableRowStriping),s.removeAttribute("data-lexical-row-striping"))})(r,n,this.__rowStriping),(function(s,a,i,o){const c=s.querySelector("colgroup");if(!c)return;const u=[];for(let d=0;d<i;d++){const f=document.createElement("col"),h=o&&o[d];h&&(f.style.width=`${h}px`),u.push(f)}c.replaceChildren(...u)})(r,0,this.getColumnCount(),this.getColWidths()),RM(r,n,this.getFormatType())}updateDOM(t,r,n){const s=this.getDOMSlot(r).element;return r===s===IM()||(Is(a=r)&&a.nodeName==="DIV"&&this.updateTableWrapper(t,r,s,n),this.updateTableElement(t,s,n),!1);var a}exportDOM(t){const r=super.exportDOM(t),{element:n}=r;return{after:s=>{if(r.after&&(s=r.after(s)),!Ty(s)&&Is(s)&&(s=s.querySelector("table")),!Ty(s))return null;RM(s,t._config,this.getFormatType());const[a]=Iue(this),i=new Map;for(const d of a)for(const f of d){const h=f.cell.getKey();i.has(h)||i.set(h,{colSpan:f.cell.getColSpan(),startColumn:f.startColumn})}const o=new Set;for(const d of s.querySelectorAll(":scope > tr > [data-temporary-table-cell-lexical-key]")){const f=d.getAttribute("data-temporary-table-cell-lexical-key");if(f){const h=i.get(f);if(d.removeAttribute("data-temporary-table-cell-lexical-key"),h){i.delete(f);for(let g=0;g<h.colSpan;g++)o.add(g+h.startColumn)}}}const c=s.querySelector(":scope > colgroup");if(c){const d=Array.from(s.querySelectorAll(":scope > colgroup > col")).filter(((f,h)=>o.has(h)));c.replaceChildren(...d)}const u=s.querySelectorAll(":scope > tr");if(u.length>0){const d=document.createElement("tbody");for(const f of u)d.appendChild(f);s.append(d)}return s},element:!Ty(n)&&Is(n)?n.querySelector("table"):n}}canBeEmpty(){return!1}isShadowRoot(){return!0}getCordsFromCellNode(t,r){const{rows:n,domRows:s}=r;for(let a=0;a<n;a++){const i=s[a];if(i!=null)for(let o=0;o<i.length;o++){const c=i[o];if(c==null)continue;const{elem:u}=c,d=Bue(this,u);if(d!==null&&t.is(d))return{x:o,y:a}}}throw new Error("Cell not found in table.")}getDOMCellFromCords(t,r,n){const{domRows:s}=n,a=s[r];if(a==null)return null;const i=a[t<a.length?t:a.length-1];return i??null}getDOMCellFromCordsOrThrow(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(!s)throw new Error("Cell not found at cords.");return s}getCellNodeFromCords(t,r,n){const s=this.getDOMCellFromCords(t,r,n);if(s==null)return null;const a=Yf(s.elem);return Mv(a)?a:null}getCellNodeFromCordsOrThrow(t,r,n){const s=this.getCellNodeFromCords(t,r,n);if(!s)throw new Error("Node at cords not TableCellNode.");return s}getRowStriping(){return!!this.getLatest().__rowStriping}setRowStriping(t){const r=this.getWritable();return r.__rowStriping=t,r}setFrozenColumns(t){const r=this.getWritable();return r.__frozenColumnCount=t,r}getFrozenColumns(){return this.getLatest().__frozenColumnCount}setFrozenRows(t){const r=this.getWritable();return r.__frozenRowCount=t,r}getFrozenRows(){return this.getLatest().__frozenRowCount}canSelectBefore(){return!0}canIndent(){return!1}getColumnCount(){const t=this.getFirstChild();if(!t)return 0;let r=0;return t.getChildren().forEach((n=>{Mv(n)&&(r+=n.getColSpan())})),r}}function Uue(e){const t=rH();e.hasAttribute("data-lexical-row-striping")&&t.setRowStriping(!0),e.hasAttribute("data-lexical-frozen-column")&&t.setFrozenColumns(1),e.hasAttribute("data-lexical-frozen-row")&&t.setFrozenRows(1);const r=e.querySelector(":scope > colgroup");if(r){let n=[];for(const s of r.querySelectorAll(":scope > col")){let a=s.style.width||"";if(!J7.test(a)&&(a=s.getAttribute("width")||"",!/^\d+$/.test(a))){n=void 0;break}n.push(parseFloat(a))}n&&t.setColWidths(n)}return{after:n=>BW(n,eH),node:t}}function rH(){return Qo(new C2)}function Of(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function KC(e){let t=1,r=e.getParent();for(;r!=null;){if(ts(r)){const n=r.getParent();if(wn(n)){t++,r=n.getParent();continue}Of(40)}return t}return t}function YC(e){let t=e.getParent();wn(t)||Of(40);let r=t;for(;r!==null;)r=r.getParent(),wn(r)&&(t=r);return t}function nH(e){let t=[];const r=e.getChildren().filter(ts);for(let n=0;n<r.length;n++){const s=r[n],a=s.getFirstChild();wn(a)?t=t.concat(nH(a)):t.push(s)}return t}function qu(e){return ts(e)&&wn(e.getFirstChild())}function LM(e){return Hl().append(e)}function sH(e,t){return ts(e)&&(t.length===0||t.length===1&&e.is(t[0])&&e.getChildrenSize()===0)}function BM(e){const t=xr();if(t!==null){let r=t.getNodes();if(Jt(t)){const s=t.getStartEndPoints();s===null&&Of(143);const[a]=s,i=a.getNode(),o=i.getParent();if(qo(i)){const c=i.getFirstChild();if(c)r=c.selectStart().getNodes();else{const u=Rs();i.append(u),r=u.select().getNodes()}}else if(sH(i,r)){const c=pl(e);if(qo(o)){i.replace(c);const u=Hl();Bt(i)&&(u.setFormat(i.getFormatType()),u.setIndent(i.getIndent())),c.append(u)}else if(ts(i)){const u=i.getParentOrThrow();Bm(c,u.getChildren()),u.replace(c)}return}}const n=new Set;for(let s=0;s<r.length;s++){const a=r[s];if(Bt(a)&&a.isEmpty()&&!ts(a)&&!n.has(a.getKey())){$M(a,e);continue}let i=hW(a)?a.getParent():ts(a)&&a.isEmpty()?a:null;for(;i!=null;){const o=i.getKey();if(wn(i)){if(!n.has(o)){const c=pl(e);Bm(c,i.getChildren()),i.replace(c),n.add(o)}break}{const c=i.getParent();if(qo(c)&&!n.has(o)){n.add(o),$M(i,e);break}i=c}}}}}function Bm(e,t){e.splice(e.getChildrenSize(),0,t)}function $M(e,t){if(wn(e))return e;const r=e.getPreviousSibling(),n=e.getNextSibling(),s=Hl();let a;if(Bm(s,e.getChildren()),wn(r)&&t===r.getListType())r.append(s),wn(n)&&t===n.getListType()&&(Bm(r,n.getChildren()),n.remove()),a=r;else if(wn(n)&&t===n.getListType())n.getFirstChildOrThrow().insertBefore(s),a=n;else{const i=pl(t);i.append(s),e.replace(i),a=i}return s.setFormat(e.getFormatType()),s.setIndent(e.getIndent()),e.remove(),a}function Q7(e,t){const r=e.getLastChild(),n=t.getFirstChild();r&&n&&qu(r)&&qu(n)&&(Q7(r.getFirstChild(),n.getFirstChild()),n.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function zue(){const e=xr();if(Jt(e)){const t=new Set,r=e.getNodes(),n=e.anchor.getNode();if(sH(n,r))t.add(YC(n));else for(let s=0;s<r.length;s++){const a=r[s];if(hW(a)){const i=Zce(a,N0);i!=null&&t.add(YC(i))}}for(const s of t){let a=s;const i=nH(s);for(const o of i){const c=Rs().setTextStyle(e.style).setTextFormat(e.format);Bm(c,o.getChildren()),a.insertAfter(c),a=c,o.__key===e.anchor.key&&Lm(e.anchor,wc(Ac(c,"next"))),o.__key===e.focus.key&&Lm(e.focus,wc(Ac(c,"next"))),o.remove()}s.remove()}}}function aH(e){const t=e.getListType()!=="check";let r=e.getStart();for(const n of e.getChildren())ts(n)&&(n.getValue()!==r&&n.setValue(r),t&&n.getLatest().__checked!=null&&n.setChecked(void 0),wn(n.getFirstChild())||r++)}function Wue(e){const t=new Set;if(qu(e)||t.has(e.getKey()))return;const r=e.getParent(),n=e.getNextSibling(),s=e.getPreviousSibling();if(qu(n)&&qu(s)){const a=s.getFirstChild();if(wn(a)){a.append(e);const i=n.getFirstChild();wn(i)&&(Bm(a,i.getChildren()),n.remove(),t.add(n.getKey()))}}else if(qu(n)){const a=n.getFirstChild();if(wn(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(qu(s)){const a=s.getFirstChild();wn(a)&&a.append(e)}else if(wn(r)){const a=Hl().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=pl(r.getListType()).setTextFormat(r.getTextFormat()).setTextStyle(r.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):n?n.insertBefore(a):r.append(a)}}function Hue(e){if(qu(e))return;const t=e.getParent(),r=t?t.getParent():void 0;if(wn(r?r.getParent():void 0)&&ts(r)&&wn(t)){const n=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(n))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),t.isEmpty()&&r.remove();else{const a=t.getListType(),i=Hl(),o=pl(a);i.append(o),e.getPreviousSiblings().forEach((d=>o.append(d)));const c=Hl(),u=pl(a);c.append(u),Bm(u,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(c),r.replace(e)}}}function Gue(){const e=xr();if(!Jt(e)||!e.isCollapsed())return!1;const t=e.anchor.getNode();if(!ts(t)||t.getChildrenSize()!==0)return!1;const r=YC(t),n=t.getParent();wn(n)||Of(40);const s=n.getParent();let a;if(qo(s))a=Rs(),r.insertAfter(a);else{if(!ts(s))return!1;a=Hl(),s.insertAfter(a)}a.setTextStyle(e.style).setTextFormat(e.format).select();const i=t.getNextSiblings();if(i.length>0){const o=pl(n.getListType());if(ts(a)){const c=Hl();c.append(o),a.insertAfter(c)}else a.insertAfter(o);o.append(...i)}return(function(o){let c=o;for(;c.getNextSibling()==null&&c.getPreviousSibling()==null;){const u=c.getParent();if(u==null||!ts(u)&&!wn(u))break;c=u}c.remove()})(t),!0}function B4(...e){const t=[];for(const r of e)if(r&&typeof r=="string")for(const[n]of r.matchAll(/\S+/g))t.push(n);return t}let N0=class extends ko{$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const r=t.getParent();wn(r)&&r.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:ko,importDOM:{li:()=>({conversion:Vue,priority:0})}})}constructor(t=1,r=void 0,n){super(n),this.__value=t===void 0?1:t,this.__checked=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const r=document.createElement("li");return this.updateListItemDOM(null,r,t),r}updateListItemDOM(t,r,n){const s=this.getParent();wn(s)&&s.getListType()==="check"&&(function(o,c,u,d){wn(c.getFirstChild())?(o.removeAttribute("role"),o.removeAttribute("tabIndex"),o.removeAttribute("aria-checked")):(o.setAttribute("role","checkbox"),o.setAttribute("tabIndex","-1"),u&&c.__checked===u.__checked||o.setAttribute("aria-checked",c.getChecked()?"true":"false"))})(r,this,t),r.value=this.__value,(function(o,c,u){const d=[],f=[],h=c.list,g=h?h.listitem:void 0;let p;if(h&&h.nested&&(p=h.nested.listitem),g!==void 0&&d.push(...B4(g)),h){const y=u.getParent(),v=wn(y)&&y.getListType()==="check",C=u.getChecked();v&&!C||f.push(h.listitemUnchecked),v&&C||f.push(h.listitemChecked),v&&d.push(C?h.listitemChecked:h.listitemUnchecked)}if(p!==void 0){const y=B4(p);u.getChildren().some((v=>wn(v)))?d.push(...y):f.push(...y)}f.length>0&&Uf(o,...f),d.length>0&&ii(o,...d)})(r,n.theme,this);const a=t?t.__style:"",i=this.__style;a!==i&&(i===""?r.removeAttribute("style"):r.style.cssText=i),(function(o,c,u){const d=gM(c.__textStyle);for(const f in d)o.style.setProperty(`--listitem-marker-${f}`,d[f]);if(u)for(const f in gM(u.__textStyle))f in d||o.style.removeProperty(`--listitem-marker-${f}`)})(r,this,t)}updateDOM(t,r,n){const s=r;return this.updateListItemDOM(t,s,n),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const r=this.createDOM(t._config),n=this.getFormatType();n&&(r.style.textAlign=n);const s=this.getDirection();return s&&(r.dir=s),{element:r}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let r=0;r<t.length;r++){const n=t[r];if(Bt(n)&&this.canMergeWith(n)){const s=n.getChildren();this.append(...s),n.remove()}else super.append(n)}return this}replace(t,r){if(ts(t))return super.replace(t);this.setIndent(0);const n=this.getParentOrThrow();if(!wn(n))return t;if(n.__first===this.getKey())n.insertBefore(t);else if(n.__last===this.getKey())n.insertAfter(t);else{const s=pl(n.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}n.insertAfter(t),t.insertAfter(s)}return r&&(Bt(t)||Of(139),this.getChildren().forEach((s=>{t.append(s)}))),this.remove(),n.getChildrenSize()===0&&n.remove(),t}insertAfter(t,r=!0){const n=this.getParentOrThrow();if(wn(n)||Of(39),ts(t))return super.insertAfter(t,r);const s=this.getNextSiblings();if(n.insertAfter(t,r),s.length!==0){const a=pl(n.getListType());s.forEach((i=>a.append(i))),t.insertAfter(a,r)}return t}remove(t){const r=this.getPreviousSibling(),n=this.getNextSibling();super.remove(t),r&&n&&qu(r)&&qu(n)&&(Q7(r.getFirstChild(),n.getFirstChild()),n.remove())}insertNewAfter(t,r=!0){const n=Hl().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(n,r),n}collapseAtStart(t){const r=Rs();this.getChildren().forEach((i=>r.append(i)));const n=this.getParentOrThrow(),s=n.getParentOrThrow(),a=ts(s);if(n.getChildrenSize()===1)if(a)n.remove(),s.select();else{n.insertBefore(r),n.remove();const i=t.anchor,o=t.focus,c=r.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(c,i.offset,"element"),o.type==="element"&&o.getNode().is(this)&&o.set(c,o.offset,"element")}else n.insertBefore(r),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const r=this.getWritable();return r.__value=t,r}getChecked(){const t=this.getLatest();let r;const n=this.getParent();return wn(n)&&(r=n.getListType()),r==="check"?!!t.__checked:void 0}setChecked(t){const r=this.getWritable();return r.__checked=t,r}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let r=t.getParentOrThrow(),n=0;for(;ts(r);)r=r.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(t){typeof t!="number"&&Of(117),(t=Math.floor(t))>=0||Of(199);let r=this.getIndent();for(;r!==t;)r<t?(Wue(this),r++):(Hue(this),r--);return this}canInsertAfter(t){return ts(t)}canReplaceWith(t){return ts(t)}canMergeWith(t){return ts(t)||P7(t)}extractWithChild(t,r){if(!Jt(r))return!1;const n=r.anchor.getNode(),s=r.focus.getNode();return this.isParentOf(n)&&this.isParentOf(s)&&this.getTextContent().length===r.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return pl("bullet")}canMergeWhenEmpty(){return!0}};function Vue(e){if(e.classList.contains("task-list-item")){for(const r of e.children)if(r.tagName==="INPUT")return que(r)}const t=e.getAttribute("aria-checked");return{node:Hl(t==="true"||t!=="false"&&void 0)}}function que(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:Hl(e.hasAttribute("checked"))}}function Hl(e){return Qo(new N0(void 0,e))}function ts(e){return e instanceof N0}let lh=class extends ko{$config(){return this.config("list",{$transform:t=>{(function(r){const n=r.getNextSibling();wn(n)&&r.getListType()===n.getListType()&&Q7(r,n)})(t),aH(t)},extends:ko,importDOM:{ol:()=>({conversion:zM,priority:0}),ul:()=>({conversion:zM,priority:0})}})}constructor(t="number",r=1,n){super(n);const s=Yue[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=r}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const r=this.getWritable();return r.__listType=t,r.__tag=t==="number"?"ol":"ul",r}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const r=this.getWritable();return r.__start=t,r}createDOM(t,r){const n=this.__tag,s=document.createElement(n);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,UM(s,t.theme,this),s}updateDOM(t,r,n){return t.__tag!==this.__tag||(UM(r,n.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const r=this.createDOM(t._config,t);return Is(r)&&(this.__start!==1&&r.setAttribute("start",String(this.__start)),this.__listType==="check"&&r.setAttribute("__lexicalListType","check")),{element:r}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,r,n){let s=n;for(let a=0;a<n.length;a++){const i=n[a];ts(i)||(s===n&&(s=[...n]),s[a]=Hl().append(!Bt(i)||wn(i)||i.isInline()?i:pa(i.getTextContent())))}return super.splice(t,r,s)}extractWithChild(t){return ts(t)}};function UM(e,t,r){const n=[],s=[],a=t.list;if(a!==void 0){const i=a[`${r.__tag}Depth`]||[],o=KC(r)-1,c=o%i.length,u=i[c],d=a[r.__tag];let f;const h=a.nested,g=a.checklist;if(h!==void 0&&h.list&&(f=h.list),d!==void 0&&n.push(d),g!==void 0&&r.__listType==="check"&&n.push(g),u!==void 0){n.push(...B4(u));for(let p=0;p<i.length;p++)p!==c&&s.push(r.__tag+p)}if(f!==void 0){const p=B4(f);o>1?n.push(...p):s.push(...p)}}s.length>0&&Uf(e,...s),n.length>0&&ii(e,...n)}function Kue(e){const t=[];for(let r=0;r<e.length;r++){const n=e[r];if(ts(n)){t.push(n);const s=n.getChildren();s.length>1&&s.forEach((a=>{wn(a)&&t.push(LM(a))}))}else t.push(LM(n))}return t}function zM(e){const t=e.nodeName.toLowerCase();let r=null;return t==="ol"?r=pl("number",e.start):t==="ul"&&(r=(function(n){if(n.getAttribute("__lexicallisttype")==="check"||n.classList.contains("contains-task-list"))return!0;for(const s of n.childNodes)if(Is(s)&&s.hasAttribute("aria-checked"))return!0;return!1})(e)?pl("check"):pl("bullet")),{after:Kue,node:r}}const Yue={ol:"number",ul:"bullet"};function pl(e="number",t=1){return Qo(new lh(e,t))}function wn(e){return e instanceof lh}const Xue=an("UPDATE_LIST_START_COMMAND"),Z7=an("INSERT_UNORDERED_LIST_COMMAND"),eN=an("INSERT_ORDERED_LIST_COMMAND"),tN=an("REMOVE_LIST_COMMAND");function Jue(e){return eg(e.registerCommand(eN,(()=>(BM("number"),!0)),pp),e.registerCommand(Xue,(t=>{const{listNodeKey:r,newStart:n}=t,s=qa(r);return!!wn(s)&&(s.getListType()==="number"&&(s.setStart(n),aH(s)),!0)}),pp),e.registerCommand(Z7,(()=>(BM("bullet"),!0)),pp),e.registerCommand(tN,(()=>(zue(),!0)),pp),e.registerCommand(Av,(()=>Gue()),pp),e.registerNodeTransform(N0,(t=>{const r=t.getFirstChild();if(r){if(yr(r)){const n=r.getStyle(),s=r.getFormat();t.getTextStyle()!==n&&t.setTextStyle(n),t.getTextFormat()!==s&&t.setTextFormat(s)}}else{const n=xr();Jt(n)&&(n.style!==t.getTextStyle()||n.format!==t.getTextFormat())&&n.isCollapsed()&&t.is(n.anchor.getNode())&&t.setTextStyle(n.style).setTextFormat(n.format)}})),e.registerNodeTransform(ih,(t=>{const r=t.getParent();if(ts(r)&&t.is(r.getFirstChild())){const n=t.getStyle(),s=t.getFormat();n===r.getTextStyle()&&s===r.getTextFormat()||r.setTextStyle(n).setTextFormat(s)}})))}function Que(e){const t=r=>{const n=r.getParent();if(wn(r.getFirstChild())||!wn(n))return;const s=d3(r,(a=>ts(a)&&wn(a.getParent())&&ts(a.getPreviousSibling())));if(s===null&&r.getIndent()>0)r.setIndent(0);else if(ts(s)){const a=s.getPreviousSibling();if(ts(a)){const i=(function(c){let u=c,d=u.getFirstChild();for(;wn(d);){const f=d.getLastChild();if(!ts(f))break;u=f,d=u.getFirstChild()}return u})(a),o=i.getParent();if(wn(o)){const c=KC(o);c+1<KC(n)&&r.setIndent(c)}}}};return e.registerNodeTransform(lh,(r=>{const n=[r];for(;n.length>0;){const s=n.shift();if(wn(s)){for(const a of s.getChildren())if(ts(a)){t(a);const i=a.getFirstChild();wn(i)&&n.push(i)}}}}))}var U5={exports:{}},WM;function Zue(){return WM||(WM=1,(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var r=(function(n){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function w(_){return _ instanceof c?new c(_.type,w(_.content),_.alias):Array.isArray(_)?_.map(w):_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(w){return Object.prototype.toString.call(w).slice(8,-1)},objId:function(w){return w.__id||Object.defineProperty(w,"__id",{value:++a}),w.__id},clone:function w(_,T){T=T||{};var E,A;switch(o.util.type(_)){case"Object":if(A=o.util.objId(_),T[A])return T[A];E={},T[A]=E;for(var F in _)_.hasOwnProperty(F)&&(E[F]=w(_[F],T));return E;case"Array":return A=o.util.objId(_),T[A]?T[A]:(E=[],T[A]=E,_.forEach(function(j,P){E[P]=w(j,T)}),E);default:return _}},getLanguage:function(w){for(;w;){var _=s.exec(w.className);if(_)return _[1].toLowerCase();w=w.parentElement}return"none"},setLanguage:function(w,_){w.className=w.className.replace(RegExp(s,"gi"),""),w.classList.add("language-"+_)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(E){var w=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(E.stack)||[])[1];if(w){var _=document.getElementsByTagName("script");for(var T in _)if(_[T].src==w)return _[T]}return null}},isActive:function(w,_,T){for(var E="no-"+_;w;){var A=w.classList;if(A.contains(_))return!0;if(A.contains(E))return!1;w=w.parentElement}return!!T}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(w,_){var T=o.util.clone(o.languages[w]);for(var E in _)T[E]=_[E];return T},insertBefore:function(w,_,T,E){E=E||o.languages;var A=E[w],F={};for(var j in A)if(A.hasOwnProperty(j)){if(j==_)for(var P in T)T.hasOwnProperty(P)&&(F[P]=T[P]);T.hasOwnProperty(j)||(F[j]=A[j])}var D=E[w];return E[w]=F,o.languages.DFS(o.languages,function(B,V){V===D&&B!=w&&(this[B]=F)}),F},DFS:function w(_,T,E,A){A=A||{};var F=o.util.objId;for(var j in _)if(_.hasOwnProperty(j)){T.call(_,j,_[j],E||j);var P=_[j],D=o.util.type(P);D==="Object"&&!A[F(P)]?(A[F(P)]=!0,w(P,T,null,A)):D==="Array"&&!A[F(P)]&&(A[F(P)]=!0,w(P,T,j,A))}}},plugins:{},highlightAll:function(w,_){o.highlightAllUnder(document,w,_)},highlightAllUnder:function(w,_,T){var E={callback:T,container:w,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",E),E.elements=Array.prototype.slice.apply(E.container.querySelectorAll(E.selector)),o.hooks.run("before-all-elements-highlight",E);for(var A=0,F;F=E.elements[A++];)o.highlightElement(F,_===!0,E.callback)},highlightElement:function(w,_,T){var E=o.util.getLanguage(w),A=o.languages[E];o.util.setLanguage(w,E);var F=w.parentElement;F&&F.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(F,E);var j=w.textContent,P={element:w,language:E,grammar:A,code:j};function D(V){P.highlightedCode=V,o.hooks.run("before-insert",P),P.element.innerHTML=P.highlightedCode,o.hooks.run("after-highlight",P),o.hooks.run("complete",P),T&&T.call(P.element)}if(o.hooks.run("before-sanity-check",P),F=P.element.parentElement,F&&F.nodeName.toLowerCase()==="pre"&&!F.hasAttribute("tabindex")&&F.setAttribute("tabindex","0"),!P.code){o.hooks.run("complete",P),T&&T.call(P.element);return}if(o.hooks.run("before-highlight",P),!P.grammar){D(o.util.encode(P.code));return}if(_&&n.Worker){var B=new Worker(o.filename);B.onmessage=function(V){D(V.data)},B.postMessage(JSON.stringify({language:P.language,code:P.code,immediateClose:!0}))}else D(o.highlight(P.code,P.grammar,P.language))},highlight:function(w,_,T){var E={code:w,grammar:_,language:T};if(o.hooks.run("before-tokenize",E),!E.grammar)throw new Error('The language "'+E.language+'" has no grammar.');return E.tokens=o.tokenize(E.code,E.grammar),o.hooks.run("after-tokenize",E),c.stringify(o.util.encode(E.tokens),E.language)},tokenize:function(w,_){var T=_.rest;if(T){for(var E in T)_[E]=T[E];delete _.rest}var A=new f;return h(A,A.head,w),d(w,A,_,A.head,0),p(A)},hooks:{all:{},add:function(w,_){var T=o.hooks.all;T[w]=T[w]||[],T[w].push(_)},run:function(w,_){var T=o.hooks.all[w];if(!(!T||!T.length))for(var E=0,A;A=T[E++];)A(_)}},Token:c};n.Prism=o;function c(w,_,T,E){this.type=w,this.content=_,this.alias=T,this.length=(E||"").length|0}c.stringify=function w(_,T){if(typeof _=="string")return _;if(Array.isArray(_)){var E="";return _.forEach(function(D){E+=w(D,T)}),E}var A={type:_.type,content:w(_.content,T),tag:"span",classes:["token",_.type],attributes:{},language:T},F=_.alias;F&&(Array.isArray(F)?Array.prototype.push.apply(A.classes,F):A.classes.push(F)),o.hooks.run("wrap",A);var j="";for(var P in A.attributes)j+=" "+P+'="'+(A.attributes[P]||"").replace(/"/g,"&quot;")+'"';return"<"+A.tag+' class="'+A.classes.join(" ")+'"'+j+">"+A.content+"</"+A.tag+">"};function u(w,_,T,E){w.lastIndex=_;var A=w.exec(T);if(A&&E&&A[1]){var F=A[1].length;A.index+=F,A[0]=A[0].slice(F)}return A}function d(w,_,T,E,A,F){for(var j in T)if(!(!T.hasOwnProperty(j)||!T[j])){var P=T[j];P=Array.isArray(P)?P:[P];for(var D=0;D<P.length;++D){if(F&&F.cause==j+","+D)return;var B=P[D],V=B.inside,Y=!!B.lookbehind,re=!!B.greedy,te=B.alias;if(re&&!B.pattern.global){var ee=B.pattern.toString().match(/[imsuy]*$/)[0];B.pattern=RegExp(B.pattern.source,ee+"g")}for(var L=B.pattern||B,Q=E.next,U=A;Q!==_.tail&&!(F&&U>=F.reach);U+=Q.value.length,Q=Q.next){var G=Q.value;if(_.length>w.length)return;if(!(G instanceof c)){var W=1,M;if(re){if(M=u(L,U,w,Y),!M||M.index>=w.length)break;var ne=M.index,I=M.index+M[0].length,z=U;for(z+=Q.value.length;ne>=z;)Q=Q.next,z+=Q.value.length;if(z-=Q.value.length,U=z,Q.value instanceof c)continue;for(var q=Q;q!==_.tail&&(z<I||typeof q.value=="string");q=q.next)W++,z+=q.value.length;W--,G=w.slice(U,z),M.index-=U}else if(M=u(L,0,G,Y),!M)continue;var ne=M.index,X=M[0],se=G.slice(0,ne),ce=G.slice(ne+X.length),pe=U+G.length;F&&pe>F.reach&&(F.reach=pe);var be=Q.prev;se&&(be=h(_,be,se),U+=se.length),g(_,be,W);var oe=new c(j,V?o.tokenize(X,V):X,te,X);if(Q=h(_,be,oe),ce&&h(_,Q,ce),W>1){var je={cause:j+","+D,reach:pe};d(w,_,T,Q.prev,U,je),F&&je.reach>F.reach&&(F.reach=je.reach)}}}}}}function f(){var w={value:null,prev:null,next:null},_={value:null,prev:w,next:null};w.next=_,this.head=w,this.tail=_,this.length=0}function h(w,_,T){var E=_.next,A={value:T,prev:_,next:E};return _.next=A,E.prev=A,w.length++,A}function g(w,_,T){for(var E=_.next,A=0;A<T&&E!==w.tail;A++)E=E.next;_.next=E,E.prev=_,w.length-=A}function p(w){for(var _=[],T=w.head.next;T!==w.tail;)_.push(T.value),T=T.next;return _}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(w){var _=JSON.parse(w.data),T=_.language,E=_.code,A=_.immediateClose;n.postMessage(o.highlight(E,o.languages[T],T)),A&&n.close()},!1)),o;var y=o.util.currentScript();y&&(o.filename=y.src,y.hasAttribute("data-manual")&&(o.manual=!0));function v(){o.manual||o.highlightAll()}if(!o.manual){var C=document.readyState;C==="loading"||C==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",v):window.requestAnimationFrame?window.requestAnimationFrame(v):window.setTimeout(v,16)}return o})(t);e.exports&&(e.exports=r),typeof l4<"u"&&(l4.Prism=r),r.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},r.languages.markup.tag.inside["attr-value"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside["internal-subset"].inside=r.languages.markup,r.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(r.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:r.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+a]={pattern:/[\s\S]+/,inside:r.languages[a]};var c={};c[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:o},r.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(r.languages.markup.tag,"addAttribute",{value:function(n,s){r.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:r.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),r.languages.html=r.languages.markup,r.languages.mathml=r.languages.markup,r.languages.svg=r.languages.markup,r.languages.xml=r.languages.extend("markup",{}),r.languages.ssml=r.languages.xml,r.languages.atom=r.languages.xml,r.languages.rss=r.languages.xml,(function(n){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var a=n.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))})(r),r.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},r.languages.javascript=r.languages.extend("clike",{"class-name":[r.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),r.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,r.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:r.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),r.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:r.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),r.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),r.languages.markup&&(r.languages.markup.tag.addInlined("script","javascript"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),r.languages.js=r.languages.javascript,(function(){if(typeof r>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",s=function(y,v){return" Error "+y+" while fetching file: "+v},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",c="loading",u="loaded",d="failed",f="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+c+'"])';function h(y,v,C){var w=new XMLHttpRequest;w.open("GET",y,!0),w.onreadystatechange=function(){w.readyState==4&&(w.status<400&&w.responseText?v(w.responseText):w.status>=400?C(s(w.status,w.statusText)):C(a))},w.send(null)}function g(y){var v=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(v){var C=Number(v[1]),w=v[2],_=v[3];return w?_?[C,Number(_)]:[C,void 0]:[C,C]}}r.hooks.add("before-highlightall",function(y){y.selector+=", "+f}),r.hooks.add("before-sanity-check",function(y){var v=y.element;if(v.matches(f)){y.code="",v.setAttribute(o,c);var C=v.appendChild(document.createElement("CODE"));C.textContent=n;var w=v.getAttribute("data-src"),_=y.language;if(_==="none"){var T=(/\.(\w+)$/.exec(w)||[,"none"])[1];_=i[T]||T}r.util.setLanguage(C,_),r.util.setLanguage(v,_);var E=r.plugins.autoloader;E&&E.loadLanguages(_),h(w,function(A){v.setAttribute(o,u);var F=g(v.getAttribute("data-range"));if(F){var j=A.split(/\r\n?|\n/g),P=F[0],D=F[1]==null?j.length:F[1];P<0&&(P+=j.length),P=Math.max(0,Math.min(P-1,j.length)),D<0&&(D+=j.length),D=Math.max(0,Math.min(D,j.length)),A=j.slice(P,D).join(`
`),v.hasAttribute("data-start")||v.setAttribute("data-start",String(P+1))}C.textContent=A,r.highlightElement(C)},function(A){v.setAttribute(o,d),C.textContent=A})}}),r.plugins.fileHighlight={highlight:function(v){for(var C=(v||document).querySelectorAll(f),w=0,_;_=C[w++];)r.highlightElement(_)}};var p=!1;r.fileHighlight=function(){p||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),p=!0),r.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(U5)),U5.exports}Zue();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,r){var n={};n["language-"+r]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[r]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};s["language-"+r]={pattern:/[\s\S]+/,inside:Prism.languages[r]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var n=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return n}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(f){d!==f&&(e.languages.markdown[d].inside.content.inside[f]=e.languages.markdown[f])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function f(h){if(!(!h||typeof h=="string"))for(var g=0,p=h.length;g<p;g++){var y=h[g];if(y.type!=="code"){f(y.content);continue}var v=y.content[1],C=y.content[3];if(v&&C&&v.type==="code-language"&&C.type==="code-block"&&typeof v.content=="string"){var w=v.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");w=(/[a-z][\w-]*/i.exec(w)||[""])[0].toLowerCase();var _="language-"+w;C.alias?typeof C.alias=="string"?C.alias=[C.alias,_]:C.alias.push(_):C.alias=[_]}}}f(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var f="",h=0,g=d.classes.length;h<g;h++){var p=d.classes[h],y=/language-(.+)/.exec(p);if(y){f=y[1];break}}var v=e.languages[f];if(v)d.content=e.highlight(u(d.content),v,f);else if(f&&f!=="none"&&e.plugins.autoloader){var C="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=C,e.plugins.autoloader.loadLanguages(f,function(){var w=document.getElementById(C);w&&(w.innerHTML=e.highlight(w.textContent,e.languages[f],f))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},c=String.fromCodePoint||String.fromCharCode;function u(d){var f=d.replace(i,"");return f=f.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(h,g){if(g=g.toLowerCase(),g[0]==="#"){var p;return g[1]==="x"?p=parseInt(g.slice(2),16):p=Number(g.slice(1)),c(p)}else{var y=o[g];return y||h}}),f}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var r=e.languages.markup;r&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var HM={},GM;function ede(){return GM||(GM=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),HM}ede();var VM={},qM;function tde(){return qM||(qM=1,(function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string})(Prism)),VM}tde();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var KM={},YM;function rde(){return YM||(YM=1,(function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript})(Prism)),KM}rde();var XM={},JM;function nde(){return JM||(JM=1,(function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(Prism)),XM}nde();var QM={},ZM;function sde(){return ZM||(ZM=1,(function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])})(Prism)),QM}sde();function iH(e,t){for(const r of e.childNodes){if(Is(r)&&r.tagName===t)return!0;iH(r,t)}return!1}const $y="data-language",Ny="data-highlight-language",xw="data-theme";class tg extends ko{static getType(){return"code"}static clone(t){return new tg(t.__language,t.__key)}constructor(t,r){super(r),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const r=document.createElement("code");ii(r,t.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute($y,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(Ny,n));const s=this.getTheme();s&&r.setAttribute(xw,s);const a=this.getStyle();return a&&r.setAttribute("style",a),r}updateDOM(t,r,n){const s=this.__language,a=t.__language;s?s!==a&&r.setAttribute($y,s):a&&r.removeAttribute($y);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&r.setAttribute(Ny,s):r.removeAttribute(Ny):i&&s&&r.setAttribute(Ny,s);const o=this.__theme,c=t.__theme;o?o!==c&&r.setAttribute(xw,o):c&&r.removeAttribute(xw);const u=this.__style,d=t.__style;return u?u!==d&&r.setAttribute("style",u):d&&r.removeAttribute("style"),!1}exportDOM(t){const r=document.createElement("pre");ii(r,t._config.theme.code),r.setAttribute("spellcheck","false");const n=this.getLanguage();n&&(r.setAttribute($y,n),this.getIsSyntaxHighlightSupported()&&r.setAttribute(Ny,n));const s=this.getTheme();s&&r.setAttribute(xw,s);const a=this.getStyle();return a&&r.setAttribute("style",a),{element:r}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||iH(t,"BR"))?{conversion:eO,priority:1}:null,div:()=>({conversion:ade,priority:1}),pre:()=>({conversion:eO,priority:0}),table:t=>z5(t)?{conversion:ide,priority:3}:null,td:t=>{const r=t,n=r.closest("table");return r.classList.contains("js-file-line")||n&&z5(n)?{conversion:tO,priority:3}:null},tr:t=>{const r=t.closest("table");return r&&z5(r)?{conversion:tO,priority:3}:null}}}static importJSON(t){return Zd().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,r=!0){const n=this.getChildren(),s=n.length;if(s>=2&&n[s-1].getTextContent()===`
`&&n[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){n[s-1].remove(),n[s-2].remove();const c=Rs();return this.insertAfter(c,r),c}const{anchor:a,focus:i}=t,o=(a.isBefore(i)?a:i).getNode();if(yr(o)){let c=lde(o);const u=[];for(;;)if(r3(c))u.push(w1()),c=c.getNextSibling();else{if(!cH(c))break;{let v=0;const C=c.getTextContent(),w=c.getTextContentSize();for(;v<w&&C[v]===" ";)v++;if(v!==0&&u.push(lH(" ".repeat(v))),v!==w)break;c=c.getNextSibling()}}const d=o.splitText(a.offset)[0],f=a.offset===0?0:1,h=d.getIndexWithinParent()+f,g=o.getParentOrThrow(),p=[nd(),...u];g.splice(h,0,p);const y=u[u.length-1];y?y.select():a.offset===0?d.selectPrevious():d.getNextSibling().selectNext(0,0)}if(rN(o)){const{offset:c}=t.anchor;o.splice(c,0,[nd()]),o.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){const t=Rs();return this.getChildren().forEach((r=>t.append(r))),this.replace(t),!0}setLanguage(t){const r=this.getWritable();return r.__language=t||void 0,r}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const r=this.getWritable();return r.__isSyntaxHighlightSupported=t,r}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const r=this.getWritable();return r.__theme=t||void 0,r}getTheme(){return this.getLatest().__theme}}function Zd(e,t){return Ece(tg).setLanguage(e).setTheme(t)}function rN(e){return e instanceof tg}function eO(e){return{node:Zd(e.getAttribute($y))}}function ade(e){const t=e,r=rO(t);return r||(function(n){let s=n.parentElement;for(;s!==null;){if(rO(s))return!0;s=s.parentElement}return!1})(t)?{node:r?Zd():null}:{node:null}}function ide(){return{node:Zd()}}function tO(){return{node:null}}function rO(e){return e.style.fontFamily.match("monospace")!==null}function z5(e){return e.classList.contains("js-file-line-container")}let f3=class oH extends ih{constructor(t="",r,n){super(t,n),this.__highlightType=r}static getType(){return"code-highlight"}static clone(t){return new oH(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const r=this.getWritable();return r.__highlightType=t||void 0,r}canHaveFormat(){return!1}createDOM(t){const r=super.createDOM(t),n=W5(t.theme,this.__highlightType);return ii(r,n),r}updateDOM(t,r,n){const s=super.updateDOM(t,r,n),a=W5(n.theme,t.__highlightType),i=W5(n.theme,this.__highlightType);return a!==i&&(a&&Uf(r,a),i&&ii(r,i)),s}static importJSON(t){return lH().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return Zd()}};function W5(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function lH(e="",t){return Qo(new f3(e,t))}function cH(e){return e instanceof f3}function ode(e,t){let r=e;for(let n=to(e,t);n&&(cH(n.origin)||r3(n.origin));n=Qce(n))r=n.origin;return r}function lde(e){return ode(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach((function(r){var n=t[r],s=[];/^\w+$/.test(r)||s.push(/\w+/.exec(r)[0]),r==="diff"&&s.push("bold"),e.languages.diff[r]={pattern:RegExp("^(?:["+n+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(r)[0]}}}})),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);const cde=new Set(["http:","https:","mailto:","sms:","tel:"]);class ch extends ko{static getType(){return"link"}static clone(t){return new ch(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",r={},n){super(n);const{target:s=null,rel:a=null,title:i=null}=r;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const r=document.createElement("a");return this.updateLinkDOM(null,r,t),ii(r,t.theme.link),r}updateLinkDOM(t,r,n){if(_W(r)){t&&t.__url===this.__url||(r.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?r[s]=i:r.removeAttribute(s))}}}updateDOM(t,r,n){return this.updateLinkDOM(t,r,n),!1}static importDOM(){return{a:t=>({conversion:ude,priority:1})}}static importJSON(t){return $4().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=sO(t);try{const r=new URL(sO(t));if(!cde.has(r.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const r=this.getWritable();return r.__url=t,r}getTarget(){return this.getLatest().__target}setTarget(t){const r=this.getWritable();return r.__target=t,r}getRel(){return this.getLatest().__rel}setRel(t){const r=this.getWritable();return r.__rel=t,r}getTitle(){return this.getLatest().__title}setTitle(t){const r=this.getWritable();return r.__title=t,r}insertNewAfter(t,r=!0){const n=$4(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(n,r),n}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,r,n){if(!Jt(r))return!1;const s=r.anchor.getNode(),a=r.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&r.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}}function ude(e){let t=null;if(_W(e)){const r=e.textContent;(r!==null&&r!==""||e.children.length>0)&&(t=$4(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function $4(e="",t){return Qo(new ch(e,t))}function dde(e){return e instanceof ch}class E1 extends ch{constructor(t="",r={},n){super(t,r,n),this.__isUnlinked=r.isUnlinked!==void 0&&r.isUnlinked!==null&&r.isUnlinked}static getType(){return"autolink"}static clone(t){return new E1(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const r=this.getWritable();return r.__isUnlinked=t,r}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,r,n){return super.updateDOM(t,r,n)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return nO().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,r=!0){const n=this.getParentOrThrow().insertNewAfter(t,r);if(Bt(n)){const s=nO(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return n.append(s),s}return null}}function nO(e="",t){return Qo(new E1(e,t))}function fde(e){return e instanceof E1}const hde=/^\+?[0-9\s()-]{5,}$/;function sO(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:hde.test(e)?`tel:${e}`:`https://${e}`}function XC(e,t){const r={};for(const n of e){const s=t(n);s&&(r[s]?r[s].push(n):r[s]=[n])}return r}function mde(e){const t=XC(e,(r=>r.type));return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const aO=/[!-/:-@[-`{-~\s]/;function gde(e){return yr(e)&&!e.hasFormat("code")}function pde(e,...t){const r=new URL("https://lexical.dev/docs/error"),n=new URLSearchParams;n.append("code",e);for(const s of t)n.append("v",s);throw r.search=n.toString(),Error(`Minified Lexical error #${e}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function iO(e,t,r){const n=r.length;for(let s=t;s>=n;s--){const a=s-n;if(uH(e,a,r,0,n)&&e[a+n]!==" ")return a}return-1}function uH(e,t,r,n,s){for(let a=0;a<s;a++)if(e[t+a]!==r[n+a])return!1;return!0}function xde(e,t=h3){const r=mde(t),n=XC(r.textFormat,(({tag:i})=>i[i.length-1])),s=XC(r.textMatch,(({trigger:i})=>i));for(const i of t){const o=i.type;if(o==="element"||o==="text-match"||o==="multiline-element"){const c=i.dependencies;for(const u of c)e.hasNode(u)||pde(173,u.getType())}}const a=(i,o,c)=>{(function(u,d,f,h){const g=u.getParent();if(!qo(g)||u.getFirstChild()!==d)return!1;const p=d.getTextContent();if(p[f-1]!==" ")return!1;for(const{regExp:y,replace:v}of h){const C=p.match(y);if(C&&C[0].length===(C[0].endsWith(" ")?f:f-1)){const w=d.getNextSiblings(),[_,T]=d.splitText(f);if(v(u,T?[T,...w]:w,C,!1)!==!1)return _.remove(),!0}}return!1})(i,o,c,r.element)||(function(u,d,f,h){const g=u.getParent();if(!qo(g)||u.getFirstChild()!==d)return!1;const p=d.getTextContent();if(p[f-1]!==" ")return!1;for(const{regExpStart:y,replace:v,regExpEnd:C}of h){if(C&&!("optional"in C)||C&&"optional"in C&&!C.optional)continue;const w=p.match(y);if(w&&w[0].length===(w[0].endsWith(" ")?f:f-1)){const _=d.getNextSiblings(),[T,E]=d.splitText(f);if(v(u,E?[E,..._]:_,w,null,null,!1)!==!1)return T.remove(),!0}}return!1})(i,o,c,r.multilineElement)||(function(u,d,f){let h=u.getTextContent();const g=f[h[d-1]];if(g==null)return!1;d<h.length&&(h=h.slice(0,d));for(const p of g){if(!p.replace||!p.regExp)continue;const y=h.match(p.regExp);if(y===null)continue;const v=y.index||0,C=v+y[0].length;let w;return v===0?[w]=u.splitText(C):[,w]=u.splitText(v,C),w.selectNext(0,0),p.replace(w,y),!0}return!1})(o,c,s)||(function(u,d,f){const h=u.getTextContent(),g=d-1,p=h[g],y=f[p];if(!y)return!1;for(const v of y){const{tag:C}=v,w=C.length,_=g-w+1;if(w>1&&!uH(h,_,C,0,w)||h[_-1]===" ")continue;const T=h[g+1];if(v.intraword===!1&&T&&!aO.test(T))continue;const E=u;let A=E,F=iO(h,_,C),j=A;for(;F<0&&(j=j.getPreviousSibling())&&!a0(j);)if(yr(j)){if(j.hasFormat("code"))continue;const L=j.getTextContent();A=j,F=iO(L,L.length,C)}if(F<0||A===E&&F+w===_)continue;const P=A.getTextContent();if(F>0&&P[F-1]===p)continue;const D=P[F-1];if(v.intraword===!1&&D&&!aO.test(D))continue;const B=E.getTextContent(),V=B.slice(0,_)+B.slice(g+1);E.setTextContent(V);const Y=A===E?V:P;A.setTextContent(Y.slice(0,F)+Y.slice(F+w));const re=xr(),te=s3();ro(te);const ee=g-w*(A===E?2:1)+1;te.anchor.set(A.__key,F,"text"),te.focus.set(E.__key,ee,"text");for(const L of v.format)te.hasFormat(L)||te.formatText(L);te.anchor.set(te.focus.key,te.focus.offset,te.focus.type);for(const L of v.format)te.hasFormat(L)&&te.toggleFormat(L);return Jt(re)&&(te.format=re.format),!0}})(o,c,n)};return e.registerUpdateListener((({tags:i,dirtyLeaves:o,editorState:c,prevEditorState:u})=>{if(i.has(cW)||i.has(O4)||e.isComposing())return;const d=c.read(xr),f=u.read(xr);if(!Jt(f)||!Jt(d)||!d.isCollapsed()||d.is(f))return;const h=d.anchor.key,g=d.anchor.offset,p=c._nodeMap.get(h);!yr(p)||!o.has(h)||g!==1&&g>f.anchor.offset+1||e.update((()=>{if(!gde(p))return;const y=p.getParent();y===null||rN(y)||a(y,p,d.anchor.offset)}))}))}const yde=/^(\s*)(\d{1,})\.\s/,vde=/^(\s*)[-*+]\s/,bde=/^(#{1,6})\s/,wde=/^>\s/,_de=/^[ \t]*```([\w-]+)?/,Sde=/[ \t]*```$/,dH=e=>(t,r,n,s)=>{const a=e(n);a.append(...r),t.replace(a),s||a.select(0,0)},fH=e=>(t,r,n,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),o=Hl(e==="check"?n[3]==="x":void 0);if(wn(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(o):i.append(o),t.remove()}else if(wn(a)&&a.getListType()===e)a.append(o),t.remove();else{const u=pl(e,e==="number"?Number(n[2]):void 0);u.append(o),t.replace(u)}o.append(...r),s||o.select(0,0);const c=(function(u){const d=u.match(/\t/g),f=u.match(/ /g);let h=0;return d&&(h+=d.length),f&&(h+=Math.floor(f.length/4)),h})(n[1]);c&&o.setIndent(c)},nN=(e,t,r)=>{const n=[],s=e.getChildren();let a=0;for(const i of s)if(ts(i)){if(i.getChildrenSize()===1){const d=i.getFirstChild();if(wn(d)){n.push(nN(d,t,r+1));continue}}const o=" ".repeat(4*r),c=e.getListType(),u=c==="number"?`${e.getStart()+a}. `:c==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";n.push(o+u+t(i)),a++}return n.join(`
`)},kde={dependencies:[k2],export:(e,t)=>{if(!bue(e))return null;const r=Number(e.getTag().slice(1));return"#".repeat(r)+" "+t(e)},regExp:bde,replace:dH((e=>{const t="h"+e[1].length;return Mf(t)})),type:"element"},Cde={dependencies:[_2],export:(e,t)=>{if(!TM(e))return null;const r=t(e).split(`
`),n=[];for(const s of r)n.push("> "+s);return n.join(`
`)},regExp:wde,replace:(e,t,r,n)=>{if(n){const a=e.getPreviousSibling();if(TM(a))return a.splice(a.getChildrenSize(),0,[nd(),...t]),void e.remove()}const s=S2();s.append(...t),e.replace(s),n||s.select(0,0)},type:"element"},Tde={dependencies:[tg],export:e=>{if(!rN(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:Sde},regExpStart:_de,replace:(e,t,r,n,s,a)=>{let i,o;if(!t&&s){if(s.length===1)n?(i=Zd(),o=r[1]+s[0]):(i=Zd(r[1]),o=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=Zd(r[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();o=s.join(`
`)}const c=pa(o);i.append(c),e.append(i)}else t&&dH((c=>Zd(c?c[1]:void 0)))(e,t,r,a)},type:"multiline-element"},Nde={dependencies:[lh,N0],export:(e,t)=>wn(e)?nN(e,t,0):null,regExp:vde,replace:fH("bullet"),type:"element"},Ede={dependencies:[lh,N0],export:(e,t)=>wn(e)?nN(e,t,0):null,regExp:yde,replace:fH("number"),type:"element"},Ade={format:["code"],tag:"`",type:"text-format"},jde={format:["highlight"],tag:"==",type:"text-format"},Pde={format:["bold","italic"],tag:"***",type:"text-format"},Fde={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},Mde={format:["bold"],tag:"**",type:"text-format"},Ode={format:["bold"],intraword:!1,tag:"__",type:"text-format"},Dde={format:["strikethrough"],tag:"~~",type:"text-format"},Rde={format:["italic"],tag:"*",type:"text-format"},Ide={format:["italic"],intraword:!1,tag:"_",type:"text-format"},Lde={dependencies:[ch],export:(e,t,r)=>{if(!dde(e)||fde(e))return null;const n=e.getTitle(),s=t(e);return n?`[${s}](${e.getURL()} "${n}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,r,n,s]=t,a=$4(n,{title:s}),i=r.split("[").length-1,o=r.split("]").length-1;let c=r,u="";if(i<o)return;if(i>o){const f=r.split("[");u="["+f[0],c=f.slice(1).join("[")}const d=pa(c);return d.setFormat(e.getFormat()),a.append(d),e.replace(a),u&&a.insertBefore(pa(u)),d},trigger:")",type:"text-match"},Bde=[kde,Cde,Nde,Ede],$de=[Tde],Ude=[Ade,Pde,Fde,Mde,Ode,jde,Rde,Ide,Dde],zde=[Lde],h3=[...Bde,...$de,...Ude,...zde];function oO(e,t){return e.getEditorState().read((()=>{const r=qa(t);return r!==null&&r.isSelected()}))}function Wde(e){const[t]=ud(),[r,n]=S.useState((()=>oO(t,e)));return S.useEffect((()=>{let s=!0;const a=t.registerUpdateListener((()=>{s&&n(oO(t,e))}));return()=>{s=!1,a()}}),[t,e]),[r,S.useCallback((s=>{t.update((()=>{let a=xr();ho(a)||(a=C7(),ro(a)),ho(a)&&(s?a.add(e):a.delete(e))}))}),[t,e]),S.useCallback((()=>{t.update((()=>{const s=xr();ho(s)&&s.clear()}))}),[t])]}function Hde({nodeKey:e}){const[t]=ud(),[r,n,s]=Wde(e);return S.useEffect((()=>eg(t.registerCommand(v7,(a=>{const i=t.getElementByKey(e);return a.target===i&&(a.shiftKey||s(),n(!r),!0)}),pp))),[s,t,r,e,n]),S.useEffect((()=>{const a=t.getElementByKey(e),i=t._config.theme.hrSelected??"selected";a!==null&&(r?ii(a,i):Uf(a,i))}),[t,r,e]),null}class T2 extends E7{static getType(){return"horizontalrule"}static clone(t){return new T2(t.__key)}static importJSON(t){return sN().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:Gde,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const r=document.createElement("hr");return ii(r,t.theme.hr),r}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}decorate(){return l.jsx(Hde,{nodeKey:this.__key})}}function Gde(){return{node:sN()}}function sN(){return Qo(new T2)}function Vde(e){return e instanceof T2}const qde=[{dependencies:[T2],export:e=>Vde(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,r,n)=>{const s=sN();n||e.getNextSibling()!=null?e.replace(s):e.insertBefore(s),s.selectNext()},type:"element"},...h3];function hH({transformers:e=qde}){const[t]=ud();return S.useEffect((()=>xde(t,e)),[t,e]),null}function mH({hasStrictIndent:e=!1}){const[t]=ud();return S.useEffect((()=>{if(!t.hasNodes([lh,N0]))throw new Error("ListPlugin: ListNode and/or ListItemNode not registered on editor")}),[t]),S.useEffect((()=>{if(e)return Que(t)}),[t,e]),(function(r){S.useEffect((()=>Jue(r)),[r])})(t),null}const Kde=({onChange:e})=>{const[t]=S.useContext(v1)||[];return S.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Ks().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},Yde=()=>{const[e]=S.useContext(v1)||[],t=S.useCallback(()=>{e&&e.dispatchCommand(wo,"bold")},[e]),r=S.useCallback(()=>{e&&e.dispatchCommand(wo,"italic")},[e]),n=S.useCallback(()=>{e&&e.dispatchCommand(wo,"underline")},[e]),s=S.useCallback(()=>{e&&e.dispatchCommand(wo,"strikethrough")},[e]),a=S.useCallback(g=>{e&&e.update(()=>{const p=xr();Jt(p)&&Rp(p,()=>Mf(g))})},[e]),i=S.useCallback(()=>{e&&e.update(()=>{const g=xr();Jt(g)&&Rp(g,()=>Rs())})},[e]);S.useCallback(()=>{e&&e.update(()=>{const g=xr();Jt(g)&&Rp(g,()=>S2())})},[e]);const o=S.useCallback(()=>{e&&e.dispatchCommand(Z7)},[e]),c=S.useCallback(()=>{e&&e.dispatchCommand(eN)},[e]),u=S.useCallback(()=>{e&&e.dispatchCommand(tN)},[e]),d=S.useCallback(g=>{e&&e.update(()=>{const p=xr();Jt(p)&&p.getNodes().forEach(y=>{yr(y)&&y.setStyle(`color: ${g}`)})})},[e]),f=S.useCallback(g=>{e&&e.update(()=>{const p=xr();Jt(p)&&p.getNodes().forEach(v=>{if(yr(v)){const C=v.getStyle(),w=C?C.replace(/font-size:\s*\d+px;?\s*/g,"").trim():"",_=w?`${w}; font-size: ${g}px;`:`font-size: ${g}px;`;v.setStyle(_)}})})},[e]),h=S.useCallback(g=>{e&&e.dispatchCommand(Uz,g)},[e]);return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:t,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),l.jsx("button",{type:"button",onClick:r,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),l.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),l.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:()=>a("h1"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),l.jsx("button",{type:"button",onClick:()=>a("h2"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),l.jsx("button",{type:"button",onClick:()=>a("h3"),className:"px-2 py-1 text-xs font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),l.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:o,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:" List"}),l.jsx("button",{type:"button",onClick:c,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1. List"}),l.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:"No List"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Color:"}),l.jsx("button",{type:"button",onClick:()=>d("#000000"),className:"w-6 h-6 bg-black border border-gray-300 rounded hover:bg-gray-800",title:"Black"}),l.jsx("button",{type:"button",onClick:()=>d("#ff0000"),className:"w-6 h-6 bg-red-500 border border-gray-300 rounded hover:bg-red-600",title:"Red"}),l.jsx("button",{type:"button",onClick:()=>d("#0000ff"),className:"w-6 h-6 bg-blue-500 border border-gray-300 rounded hover:bg-blue-600",title:"Blue"}),l.jsx("button",{type:"button",onClick:()=>d("#008000"),className:"w-6 h-6 bg-green-500 border border-gray-300 rounded hover:bg-green-600",title:"Green"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Size:"}),l.jsx("button",{type:"button",onClick:()=>f(12),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Small",children:"12px"}),l.jsx("button",{type:"button",onClick:()=>f(16),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Normal",children:"16px"}),l.jsx("button",{type:"button",onClick:()=>f(20),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Large",children:"20px"}),l.jsx("button",{type:"button",onClick:()=>f(24),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Extra Large",children:"24px"})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-xs text-gray-600",children:"Align:"}),l.jsx("button",{type:"button",onClick:()=>h("left"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Left",children:""}),l.jsx("button",{type:"button",onClick:()=>h("center"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Center",children:""}),l.jsx("button",{type:"button",onClick:()=>h("right"),className:"px-2 py-1 text-xs border border-gray-300 rounded hover:bg-gray-200",title:"Align Right",children:""})]})]})},Xde=({value:e,onChange:t,placeholder:r})=>{const n={namespace:"LexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[k2,lh,N0,_2,tg,f3,C2,T1,N1,E1,ch],onError:s=>{console.error("Lexical error:",s)},editorState:e?(()=>{try{const s=JSON.parse(e);return JSON.stringify(s)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return l.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:l.jsxs(EW,{initialConfig:n,children:[l.jsx(Yde,{}),l.jsx(Kde,{onChange:t}),l.jsxs("div",{className:"relative",children:[l.jsx(VW,{contentEditable:l.jsx(KW,{className:"p-4 min-h-32 focus:outline-none",placeholder:r}),placeholder:l.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:JW}),l.jsx(YW,{}),l.jsx(XW,{}),l.jsx(mH,{}),l.jsx(hH,{transformers:h3})]})]})})},Jde=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{user:i}=Fs(),{post:o}=ql(),{showNotification:c}=di(),[u,d]=S.useState({test_name:e,num_questions:1,passing_score:100,questions:[{id:1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048}]}),[f,h]=S.useState({isLoading:!1,error:null,showPreview:!0});S.useEffect(()=>{d(C=>({...C,test_name:e||""}))},[e]);const g=()=>{if(u.num_questions>=3){h(_=>({..._,error:"Maximum 3 questions allowed for performance reasons"}));return}const w={id:Math.max(...u.questions.map(_=>_.id))+1,question_json:"",canvas_width:600,canvas_height:800,max_canvas_width:1536,max_canvas_height:2048};d(_=>({..._,num_questions:_.num_questions+1,questions:[..._.questions,w]}))},p=C=>{u.questions.length<=1||d(w=>({...w,num_questions:w.num_questions-1,questions:w.questions.filter(_=>_.id!==C)}))},y=(C,w)=>{d(_=>({..._,questions:_.questions.map(T=>T.id===C?{...T,question_json:w}:T)}))},v=async()=>{if(!u.test_name.trim()){h(C=>({...C,error:"Test name is required"}));return}if(u.questions.some(C=>!C.question_json.trim())){h(C=>({...C,error:"All questions must have content"}));return}h(C=>({...C,isLoading:!0,error:null}));try{const C={test_name:u.test_name,num_questions:u.num_questions,passing_score:u.passing_score,questions:u.questions.map((w,_)=>({question_id:_+1,question_json:w.question_json,canvas_width:w.canvas_width,canvas_height:w.canvas_height,max_canvas_width:w.max_canvas_width,max_canvas_height:w.max_canvas_height}))};t&&t(C)}catch(C){console.error("Error preparing drawing test:",C),h(w=>({...w,error:"Failed to prepare drawing test. Please try again."})),c("Failed to prepare drawing test","error")}finally{h(C=>({...C,isLoading:!1}))}};return l.jsxs("div",{className:"drawing-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Drawing Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a test where students draw based on your instructions"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Drawing Questions (",u.num_questions,"/3)"]}),l.jsx("p",{className:"text-sm text-gray-500",children:"Maximum 3 questions for optimal performance"})]}),l.jsxs(ht,{onClick:g,disabled:u.num_questions>=3,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Question"]})]}),l.jsx("div",{className:"space-y-4",children:u.questions.map((C,w)=>l.jsxs(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"text-md font-medium text-gray-800",children:["Text ",w+1]}),u.questions.length>1&&l.jsx(ht,{onClick:()=>p(C.id),variant:"secondary",size:"sm",className:"text-red-600 hover:text-red-700",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Content *"}),l.jsx(Xde,{value:C.question_json,onChange:_=>y(C.id,_),placeholder:""})]})]},C.id))})]}),f.error&&l.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700",children:f.error}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx(ht,{onClick:r,variant:"secondary",disabled:f.isLoading,children:"Cancel"}),l.jsx(ht,{onClick:v,variant:"primary",disabled:f.isLoading||!u.test_name.trim(),className:"flex items-center gap-2",children:f.isLoading?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white"}),"Saving..."]}):"Save Test"})]})]})},Qde=({id:e,x:t,y:r,width:n,height:s,text:a,fontSize:i,color:o,isSelected:c,onSelect:u,onUpdate:d,onDelete:f})=>{const[h,g]=S.useState(!1),p=S.useRef(!1),y=S.useRef(null),v=S.useRef({x:0,y:0}),C=S.useRef(null),w=5,_=()=>{p.current=!0,g(!0)},T=()=>{if(p.current=!1,g(!1),C.current)try{C.current.draggable(!1)}catch{}},E=()=>{y.current&&(clearTimeout(y.current),y.current=null)};S.useEffect(()=>()=>{E()},[]),S.useEffect(()=>{if(C.current)try{C.current.draggable(p.current)}catch{}},[h]);const A=j=>{j.cancelBubble=!0,d(e,{isEditing:!0})},F=j=>{d(e,{x:j.target.x(),y:j.target.y()})};return l.jsxs(ou,{ref:C,x:t,y:r,draggable:h,dragBoundFunc:j=>p.current?j:{x:t,y:r},name:"textbox-group",onClick:j=>{j.cancelBubble=!0,u(e)},onTap:j=>{j.cancelBubble=!0,u(e),E()},onDblClick:A,onDblTap:A,onPointerDown:j=>{j.cancelBubble=!0;const P=j.evt||{};v.current={x:P.clientX??0,y:P.clientY??0},E(),y.current=setTimeout(()=>{_()},400)},onPointerMove:j=>{if(!y.current)return;const P=j.evt||{},D=Math.abs((P.clientX??0)-v.current.x),B=Math.abs((P.clientY??0)-v.current.y);(D>w||B>w)&&E()},onPointerUp:j=>{j.cancelBubble=!0,E(),T()},onPointerLeave:()=>{E(),T()},onDragEnd:j=>{F(j),T()},children:[l.jsx(Ei,{width:n,height:s,fill:c?"#fef3c7":"#ffffff",stroke:c?"#f59e0b":"#d1d5db",strokeWidth:c?2:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1},name:"textbox-rect",onTap:j=>{j.cancelBubble=!0,u(e),E()},onDblTap:j=>{j.cancelBubble=!0,A(j)}}),l.jsx(Vu,{text:a,width:n,height:s,padding:8,align:"left",verticalAlign:"top",fontSize:i,fill:o,wrap:"word",name:"textbox-text",onTap:j=>{j.cancelBubble=!0,u(e),E()},onDblTap:j=>{j.cancelBubble=!0,A(j)}})]})},Zde=({x:e,y:t,width:r,height:n,initialText:s,onSave:a,onCancel:i})=>{const o=S.useRef(null);S.useEffect(()=>{o.current&&(o.current.focus(),o.current.select())},[]);const c=u=>{u.key==="Enter"&&!u.shiftKey?(u.preventDefault(),a(o.current.value)):u.key==="Escape"&&i()};return l.jsx("textarea",{ref:o,defaultValue:s,style:{position:"absolute",top:t,left:e,width:r,height:n,fontSize:"14px",border:"2px solid #f59e0b",borderRadius:"6px",padding:"8px",background:"white",resize:"none",outline:"none",fontFamily:"inherit",lineHeight:"1.4",zIndex:1e3},onKeyDown:c,onBlur:()=>a(o.current.value)})},e0e=({width:e,height:t,lines:r,onDrawingChange:n,currentTool:s,currentColor:a,currentThickness:i,zoom:o,onZoomChange:c,isPanning:u,isFullscreen:d,constrainPanPosition:f,handleWheel:h,stageRef:g,setIsPanning:p,responsiveDimensions:y,canvasSize:v,question:C,textBoxes:w,setTextBoxes:_,selectedTextBox:T,setSelectedTextBox:E,handleTextBoxSelect:A,handleTextBoxUpdate:F,handleTextBoxDelete:j,isEditingText:P,editingTextBox:D,setIsEditingText:B,setEditingTextBox:V,setCurrentTool:Y})=>{const[re,te]=S.useState(!1),[ee,L]=S.useState([]),[Q,U]=S.useState(null),[G,W]=S.useState(null),M=S.useRef(null),[I,z]=S.useState(.25),[q,ne]=S.useState({x:0,y:0}),X=S.useRef(null),se=S.useRef(null),ce=S.useRef(!1),pe=6;S.useEffect(()=>{const Oe=()=>{const Ke=M.current;if(!Ke)return;const st=Ke.clientWidth||1,Vt=Ke.clientHeight||1,qt=Math.min(st/(v.width||1),Vt/(v.height||1));z(Math.min(qt,1))};return Oe(),window.addEventListener("resize",Oe),()=>window.removeEventListener("resize",Oe)},[v.width,v.height,d]);const be=Oe=>{const Ke=g.current,st=Ke.getPointerPosition();if(s==="pan"){if(Ce(Oe.target))try{Ke.draggable(!1),ce.current=!0}catch{}return}if(s==="text"){const qt={x:(st.x-Ke.x())/Ke.scaleX(),y:(st.y-Ke.y())/Ke.scaleY()};X.current={...qt},se.current={x:st.x,y:st.y};return}te(!0);const Vt={x:(st.x-Ke.x())/Ke.scaleX(),y:(st.y-Ke.y())/Ke.scaleY()};W(Vt),s==="pencil"?L([{x:Vt.x,y:Vt.y,color:a,thickness:i}]):s==="eraser"?L([{x:Vt.x,y:Vt.y,color:a,thickness:i,tool:"eraser"}]):["line","rectangle","circle"].includes(s)&&U({type:s,startX:Vt.x,startY:Vt.y,endX:Vt.x,endY:Vt.y,color:a,thickness:i})},oe=Oe=>{const Ke=g.current,st=Ke.getPointerPosition(),Vt={x:(st.x-Ke.x())/Ke.scaleX(),y:(st.y-Ke.y())/Ke.scaleY()};if(ne(Vt),s!=="pan"){if(s==="text"&&X.current&&se.current){const qt=Math.abs(st.x-se.current.x),gr=Math.abs(st.y-se.current.y);(qt>pe||gr>pe)&&(X.current=null)}if(re)if(s==="pencil"){const qt=[...ee,{x:Vt.x,y:Vt.y,color:a,thickness:i}];L(qt)}else if(s==="eraser"){const qt=[...ee,{x:Vt.x,y:Vt.y,color:a,thickness:i,tool:"eraser"}];L(qt)}else["line","rectangle","circle"].includes(s)&&Q&&U({...Q,endX:Vt.x,endY:Vt.y})}},je=Oe=>{const Ke=g.current;if(s==="pan"){if(ce.current){try{Ke.draggable(!0)}catch{}ce.current=!1}return}if(s==="text"&&X.current){const st=Oe&&Oe.target;if(st&&typeof st.name=="function"&&st.name()==="canvas-bg"){const qt={id:Date.now(),x:X.current.x,y:X.current.y,width:150,height:60,text:"Double-click to edit",fontSize:14,color:"#000000"};_(gr=>[...gr,qt]),E(qt.id)}X.current=null,se.current=null}if(re){if(s==="pencil"){const st=[...r,ee];n(st),L([])}else if(s==="eraser"){const st=[...r,ee];n(st),L([])}else if(["line","rectangle","circle"].includes(s)&&Q){const st=[...r,Q];n(st),U(null)}te(!1),W(null)}},[Re,Xe]=S.useState(null),[ft,Je]=S.useState(null),[Ht,Ve]=S.useState(!1),[at,gt]=S.useState(null),[Te,bt]=S.useState(!1),[Ct,Lt]=S.useState(!1),[Yt,it]=S.useState([]),[xt,Mt]=S.useState(null),[rt,Qe]=S.useState({totalGestures:0,zoomGestures:0,panGestures:0,combinedGestures:0,averageResponseTime:0});let It=null;const Rt=(window.devicePixelRatio||1)>1.5,cr={scaleDelta:Rt?.03:.04,centerDelta:Rt?4:6,minTouchDistance:8,gestureHysteresis:.02},hr=()=>{bt(!1),gt(null),Xe(null),Je(null),te(!1),W(null),Lt(!1),Mt(null),It&&(cancelAnimationFrame(It),It=null),g.current&&g.current.stop()},Cr=Oe=>{if(Oe.length<2)return 0;const Ke=Oe[0],st=Oe[1];return Math.sqrt(Math.pow(st.clientX-Ke.clientX,2)+Math.pow(st.clientY-Ke.clientY,2))},ur=Oe=>{if(Oe.length<2)return null;const Ke=Oe[0],st=Oe[1];return{x:(Ke.clientX+st.clientX)/2,y:(Ke.clientY+st.clientY)/2}},Sr=Oe=>{it(Ke=>[...Ke,{type:Oe,timestamp:Date.now()}].slice(-5))},we=()=>{const Oe=Date.now(),Ke=Yt.filter(qt=>Oe-qt.timestamp<500);if(Ke.length<2)return 0;const st=Ke[Ke.length-1],Vt=Ke[Ke.length-2];return st.type===Vt.type?cr.gestureHysteresis:0},Me=(Oe,Ke)=>{Qe(st=>({totalGestures:st.totalGestures+1,zoomGestures:Oe.includes("zoom")?st.zoomGestures+1:st.zoomGestures,panGestures:Oe.includes("pan")?st.panGestures+1:st.panGestures,combinedGestures:Oe==="zoom+pan"?st.combinedGestures+1:st.combinedGestures,averageResponseTime:(st.averageResponseTime+Ke)/2}))},Ie=(Oe,Ke,st,Vt)=>{const qt=g.current,gr=qt.scaleX(),Vr=qt.position();let Nr=gr,dn=Vr;if(Oe){const ve=st/Re,Ee=gr*ve,ue=C?.max_canvas_width||1536,he=C?.max_canvas_height||2048,Pe=ue/v.width,tt=he/v.height,Ge=Math.min(Pe,tt,1);Nr=Math.max(.25,Math.min(Ge,Ee));const Ye=Vt,ct={x:(Ye.x-qt.x())/gr,y:(Ye.y-qt.y())/gr};dn={x:Ye.x-ct.x*Nr,y:Ye.y-ct.y*Nr}}if(Ke){const ve=Vt.x-ft.x,Ee=Vt.y-ft.y;Oe?dn={x:dn.x+ve,y:dn.y+Ee}:dn={x:Vr.x+ve,y:Vr.y+Ee}}It||(It=requestAnimationFrame(()=>{qt.scale({x:Nr,y:Nr}),qt.position(dn),qt.batchDraw(),It=null})),Oe&&Ke?(gt("zoom+pan"),Lt(!0)):Oe?(gt("zoom"),Lt(!0)):Ke&&gt("pan");const Ne=Date.now()-(xt||Date.now());Me(Oe&&Ke?"zoom+pan":Oe?"zoom":"pan",Ne),console.log(" Combined gesture",{doZoom:Oe,doPan:Ke,scale:Nr.toFixed(2),pos:dn})},Ce=Oe=>{if(!Oe||typeof Oe.name!="function")return!1;if((Oe.name()||"").includes("textbox-"))return!0;const st=Oe.getParent&&Oe.getParent();return st&&typeof st.name=="function"&&(st.name()||"").includes("textbox-")},Ze=Oe=>{const Ke=Oe.evt.touches,st=Oe.target;if(Ce(st)){if(s==="pan"&&g.current)try{g.current.draggable(!1),ce.current=!0}catch{}return}Ke.length===2?(Oe.evt.preventDefault(),bt(!0),gt(null),Xe(Cr(Ke)),Je(ur(Ke)),te(!1),Mt(Date.now())):Ke.length===1&&(bt(!1),gt(null),be(Oe))},wt=Oe=>{const Ke=Oe.evt.touches,st=Oe.target;if(!Ce(st))if(Ke.length===2&&Te){Oe.evt.preventDefault();const Vt=g.current,qt=Cr(Ke),gr=ur(Ke);if(Re&&ft&&Vt&&qt>cr.minTouchDistance){const Vr=Math.abs(qt/Re-1),Nr=Math.sqrt(Math.pow(gr.x-ft.x,2)+Math.pow(gr.y-ft.y,2)),dn=we(),me=cr.scaleDelta-dn,Ne=cr.centerDelta-dn*10,ve=Vr>me,Ee=Nr>Ne;(ve||Ee)&&(Ie(ve,Ee,qt,gr),ve&&Ee?Sr("zoom+pan"):ve?Sr("zoom"):Ee&&Sr("pan")),console.log(" Gesture Debug",{scaleDelta:Vr.toFixed(3),centerDelta:Nr.toFixed(1),doZoom:ve,doPan:Ee,hysteresis:dn.toFixed(3),adjustedScaleDelta:me.toFixed(3),adjustedCenterDelta:Ne.toFixed(1),gestureHistory:Yt.slice(-3)})}Xe(qt),Je(gr)}else Ke.length===1&&!Te&&(Oe.evt.preventDefault(),oe())},Nt=Oe=>{const Ke=Oe.evt.touches,st=Oe.target;Ce(st)||(Ke.length===0?(je(Oe),hr(),Lt(!1)):Ke.length===1&&(bt(!1),gt(null),Xe(null),Je(null),Lt(!1)))};return l.jsx("div",{className:"relative w-full block sm:flex sm:justify-center",children:l.jsx("div",{className:"w-full max-w-full block sm:flex sm:justify-center",children:l.jsxs("div",{className:"relative",style:{border:d&&(y.width<window.innerWidth-40||y.height<window.innerHeight-40)?"2px solid #000000":"none",borderRadius:"8px",overflow:"hidden"},children:[l.jsx("div",{ref:M,className:"w-full h-full",style:{touchAction:"manipulation"},children:l.jsx(Nm,{ref:g,width:y.width,height:y.height,scaleX:d?y.zoom:o,scaleY:d?y.zoom:o,onMouseDown:be,onMousemove:oe,onMouseup:je,onTouchStart:Ze,onTouchMove:wt,onTouchEnd:Nt,onWheel:h||(()=>{}),onDragStart:()=>{console.log(" Drag started"),s==="pan"&&p(!0)},onDragEnd:()=>{if(console.log(" Drag ended"),s==="pan"&&(p(!1),f)){const Oe=g.current,Ke=M.current,st=Ke?.clientWidth||y.width,Vt=Ke?.clientHeight||y.height,qt=v.width*Oe.scaleX(),gr=v.height*Oe.scaleY(),Vr=Oe.x(),Nr=Oe.y();(Vr>st||Vr<-qt||Nr>Vt||Nr<-gr)&&f(Oe)}},draggable:s==="pan"&&o>.25,className:`border-0 rounded-none shadow-none sm:border sm:rounded-lg sm:shadow-sm ${s==="pan"?"cursor-grab":u?"cursor-grabbing":"cursor-crosshair"}`,style:{width:"100%",height:"auto"},onLoad:()=>{console.log(" DrawingTestStudent - Stage loaded with dimensions:",y.width,"x",y.height),console.log(" DrawingTestStudent - Canvas size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Current zoom level:",o),console.log(" DrawingTestStudent - Effective display size:",Math.round(v.width*o),"x",Math.round(v.height*o)),console.log(" DrawingTestStudent - Total pixels displayed:",Math.round(v.width*o*v.height*o))},children:l.jsxs(Tm,{children:[l.jsx(Ei,{x:0,y:0,width:v.width,height:v.height,fill:"white",name:"canvas-bg"}),r.map((Oe,Ke)=>{if(Array.isArray(Oe)){const st=Oe[0]?.tool==="eraser";return l.jsx(Ki,{points:Oe.flatMap(Vt=>[Vt.x,Vt.y]),stroke:st?"black":Oe[0]?.color||"#000000",strokeWidth:st?(Oe[0]?.thickness||2)*7:Oe[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:st?"destination-out":"source-over"},Ke)}else{if(Oe.type==="line")return l.jsx(Ki,{points:[Oe.startX,Oe.startY,Oe.endX,Oe.endY],stroke:Oe.color,strokeWidth:Oe.thickness,lineCap:"round"},Ke);if(Oe.type==="rectangle"){const st=Math.abs(Oe.endX-Oe.startX),Vt=Math.abs(Oe.endY-Oe.startY),qt=Math.min(Oe.startX,Oe.endX),gr=Math.min(Oe.startY,Oe.endY);return l.jsx(Ei,{x:qt,y:gr,width:st,height:Vt,stroke:Oe.color,strokeWidth:Oe.thickness,fill:"transparent"},Ke)}else if(Oe.type==="circle"){const st=Math.sqrt(Math.pow(Oe.endX-Oe.startX,2)+Math.pow(Oe.endY-Oe.startY,2))/2,Vt=(Oe.startX+Oe.endX)/2,qt=(Oe.startY+Oe.endY)/2;return l.jsx(Lf,{x:Vt,y:qt,radius:st,stroke:Oe.color,strokeWidth:Oe.thickness,fill:"transparent"},Ke)}}return null}),w.map(Oe=>l.jsx(Qde,{...Oe,isSelected:T===Oe.id,onSelect:A,onUpdate:F,onDelete:j},Oe.id)),s==="pencil"&&l.jsx(Ki,{points:ee.flatMap(Oe=>[Oe.x,Oe.y]),stroke:a,strokeWidth:i,tension:.5,lineCap:"round",lineJoin:"round"}),s==="eraser"&&l.jsx(Ki,{points:ee.flatMap(Oe=>[Oe.x,Oe.y]),stroke:"black",strokeWidth:i*7,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:"destination-out"}),Q&&Q.type==="line"&&l.jsx(Ki,{points:[Q.startX,Q.startY,Q.endX,Q.endY],stroke:Q.color,strokeWidth:Q.thickness,lineCap:"round"}),Q&&Q.type==="rectangle"&&l.jsx(Ei,{x:Math.min(Q.startX,Q.endX),y:Math.min(Q.startY,Q.endY),width:Math.abs(Q.endX-Q.startX),height:Math.abs(Q.endY-Q.startY),stroke:Q.color,strokeWidth:Q.thickness,fill:"transparent"}),Q&&Q.type==="circle"&&l.jsx(Lf,{x:(Q.startX+Q.endX)/2,y:(Q.startY+Q.endY)/2,radius:Math.sqrt(Math.pow(Q.endX-Q.startX,2)+Math.pow(Q.endY-Q.startY,2))/2,stroke:Q.color,strokeWidth:Q.thickness,fill:"transparent"}),s==="eraser"&&l.jsx(Lf,{x:q.x,y:q.y,radius:i*7/2,stroke:"#666666",strokeWidth:2,fill:"rgba(102, 102, 102, 0.2)",dash:[5,5],listening:!1}),s==="pencil"&&l.jsx(Ki,{points:[q.x-10,q.y,q.x+10,q.y,q.x,q.y-10,q.x,q.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="line"&&l.jsx(Ki,{points:[q.x-10,q.y,q.x+10,q.y,q.x,q.y-10,q.x,q.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="rectangle"&&l.jsx(Ki,{points:[q.x-10,q.y,q.x+10,q.y,q.x,q.y-10,q.x,q.y+10],stroke:"#666666",strokeWidth:1,listening:!1}),s==="circle"&&l.jsx(Ki,{points:[q.x-10,q.y,q.x+10,q.y,q.x,q.y-10,q.x,q.y+10],stroke:"#666666",strokeWidth:1,listening:!1})]})})}),P&&D&&l.jsx(Zde,{x:D.x,y:D.y,width:D.width,height:D.height,initialText:D.text,onSave:Oe=>{F(D.id,{text:Oe}),B(!1),V(null)},onCancel:()=>{B(!1),V(null)}}),l.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[l.jsx("button",{onClick:()=>{const Oe=g.current,Ke=Oe.scaleX(),st=C?.max_canvas_width||1536,Vt=C?.max_canvas_height||2048,qt=st/v.width,gr=Vt/v.height,Vr=Math.min(qt,gr,5),Nr=Math.min(Vr,Oe.scaleX()*1.2);Oe.scale({x:Nr,y:Nr}),Oe.batchDraw(),console.log(" DrawingTestStudent - Zoom In button:",Ke.toFixed(2),"->",Nr.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*Nr),"x",Math.round(v.height*Nr)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*Nr*v.height*Nr),"pixels"),c(Nr)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom In",children:"+"}),l.jsx("button",{onClick:()=>{const Oe=g.current,Ke=Oe.scaleX(),st=Math.max(.25,Oe.scaleX()*.8);Oe.scale({x:st,y:st}),Oe.batchDraw(),console.log(" DrawingTestStudent - Zoom Out button:",Ke.toFixed(2),"->",st.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(v.width*st),"x",Math.round(v.height*st)),console.log(" DrawingTestStudent - New resolution:",Math.round(v.width*st*v.height*st),"pixels"),c(st)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 font-bold",title:"Zoom Out",children:""}),l.jsx("button",{onClick:()=>{const Oe=g.current,Ke=Oe.scaleX();Oe.scale({x:1,y:1}),Oe.position({x:0,y:0}),Oe.batchDraw(),console.log(" DrawingTestStudent - Reset zoom:",Ke.toFixed(2),"-> 1.00"),console.log(" DrawingTestStudent - Reset effective size:",v.width,"x",v.height),console.log(" DrawingTestStudent - Reset resolution:",v.width*v.height,"pixels"),c(1)},className:"w-8 h-8 bg-white border border-gray-300 rounded shadow-sm hover:bg-gray-50 flex items-center justify-center text-gray-600 text-xs",title:"Reset Zoom",children:"1:1"})]}),l.jsxs("div",{className:"absolute bottom-2 left-2 bg-white border border-gray-300 rounded px-2 py-1 text-xs text-gray-600 shadow-sm",children:[Math.round(o*100),"%"]})]})})})},t0e=({content:e})=>{if(!e)return l.jsx("div",{className:"text-gray-500 italic",children:"No instructions provided"});const t=n=>{if(!n)return"";if(n.type==="text"){let s=n.text||"";if(n.format&&(n.format&1&&(s=`<strong>${s}</strong>`),n.format&2&&(s=`<em>${s}</em>`),n.format&8&&(s=`<u>${s}</u>`),n.format&16&&(s=`<s>${s}</s>`)),n.style){const a=n.style.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}if(n.textStyle){const a=n.textStyle.match(/color:\s*([^;]+)/);a&&(s=`<span style="color: ${a[1].trim()}">${s}</span>`)}return s}if(n.type==="paragraph"){const s=n.children?n.children.map(t).join(""):"";let a="text-left";return n.format&&(n.format==="center"?a="text-center":n.format==="right"?a="text-right":n.format==="left"&&(a="text-left")),`<p class="${a}">${s}</p>`}if(n.type==="heading"){const s=n.tag||"h1",a=n.children?n.children.map(t).join(""):"";return`<${s}>${a}</${s}>`}if(n.type==="list"){const s=n.listType==="bullet"?"ul":"ol",a=n.children?n.children.map(i=>{if(i.type==="listitem"){const o=i.children?i.children.map(t).join(""):"";let c="margin: 4px 0; display: list-item;";return i.format&&(i.format==="center"?c+=" text-align: center;":i.format==="right"?c+=" text-align: right;":i.format==="left"&&(c+=" text-align: left;")),`<li style="${c}">${o}</li>`}return""}).join(""):"";return`<${s} style="margin: 8px 0; padding-left: 20px; list-style-type: ${n.listType==="bullet"?"disc":"decimal"}; display: block;">${a}</${s}>`}return n.children?n.children.map(t).join(""):""};let r=e;if(typeof e=="string"&&e.startsWith("{"))try{const n=JSON.parse(e);n.text?r=n.text:n.content?r=n.content:n.root&&n.root.children&&(r=n.root.children.map(t).join(""))}catch(n){console.log("Failed to parse Lexical content:",n)}return l.jsx("div",{className:"max-w-none rich-text-content",style:{lineHeight:"1.6",fontSize:"14px"},dangerouslySetInnerHTML:{__html:r}})},r0e=({question:e,questionIndex:t,studentAnswer:r,onAnswerChange:n,mode:s,testId:a,testType:i})=>{di();const[o,c]=S.useState([]),[u,d]=S.useState(!0),[f,h]=S.useState("pencil"),[g,p]=S.useState("#000000"),[y,v]=S.useState(2),[C,w]=S.useState([]),[_,T]=S.useState(-1),[E,A]=S.useState({width:600,height:800}),[F,j]=S.useState(1),[P,D]=S.useState(!1),[B,V]=S.useState(!1),[Y,re]=S.useState(!1),[te,ee]=S.useState([]),[L,Q]=S.useState(null),[U,G]=S.useState(!1),[W,M]=S.useState(null),I=_>0,z=_<C.length-1,[q,ne]=S.useState(!1),X=S.useRef(null),se=S.useRef(null),[ce,pe]=S.useState({width:600,height:800}),be=S.useRef(!1),[oe,je]=S.useState(.25),Re=["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#FFA500","#800080","#008000","#808080","#FFC0CB","#A52A2A","#000080"];S.useEffect(()=>{const it=()=>{re(window.innerWidth>=1024)};return it(),window.addEventListener("resize",it),()=>window.removeEventListener("resize",it)},[]),S.useEffect(()=>{if(e){const it=e.max_canvas_width||1536,xt=e.max_canvas_height||2048,Mt=e.canvas_width||600,rt=e.canvas_height||800;if(A({width:it,height:xt}),be.current)console.log(" DrawingTestStudent - Preserving user zoom:",F.toFixed(2));else{j(1),be.current=!0;const It=(Mt-it*1)/2,Tt=(rt-xt*1)/2;if(!isNaN(It)&&!isNaN(Tt)&&X.current){const Rt={x:It,y:Tt};X.current.position(Rt),X.current.batchDraw()}console.log(" DrawingTestStudent - Canvas size set:",it,"x",xt),console.log(" DrawingTestStudent - Viewport size:",Mt,"x",rt),console.log(" DrawingTestStudent - Initial zoom:",1 .toFixed(2)),console.log(" DrawingTestStudent - Image resolution:",it*xt,"pixels"),console.log(" DrawingTestStudent - Aspect ratio:",(it/xt).toFixed(2))}if(r&&typeof r=="string")try{const Qe=JSON.parse(r);Qe.lines?c(Qe.lines):c(Qe),Qe.textBoxes&&ee(Qe.textBoxes)}catch{console.log("No valid drawing data found")}d(!1)}},[e,r]),S.useEffect(()=>{const it=()=>{const xt=se.current;if(!xt)return;const Mt=xt.clientWidth||1,rt=xt.clientHeight||1,Qe=Math.min(Mt/(E.width||1),rt/(E.height||1));je(Math.min(Qe,1))};return it(),window.addEventListener("resize",it),()=>window.removeEventListener("resize",it)},[E.width,E.height,q]);const Xe=it=>{c(it);const xt={lines:it,textBoxes:te};n(e.question_id,JSON.stringify(xt)),ft(it,te)},ft=(it,xt=te)=>{const Mt=C.slice(0,_+1);Mt.push({lines:[...it],textBoxes:[...xt]}),w(Mt),T(Mt.length-1)},Je=()=>{if(I){const it=_-1,xt=C[it];if(xt&&typeof xt=="object"&&xt.lines){c([...xt.lines]),ee([...xt.textBoxes]);const Mt={lines:xt.lines,textBoxes:xt.textBoxes};n(e.question_id,JSON.stringify(Mt))}else{const Mt=xt||[];c([...Mt]),n(e.question_id,JSON.stringify(Mt))}T(it)}},Ht=()=>{if(z){const it=_+1,xt=C[it];if(xt&&typeof xt=="object"&&xt.lines){c([...xt.lines]),ee([...xt.textBoxes]);const Mt={lines:xt.lines,textBoxes:xt.textBoxes};n(e.question_id,JSON.stringify(Mt))}else{const Mt=xt||[];c([...Mt]),n(e.question_id,JSON.stringify(Mt))}T(it)}},Ve=()=>{c([]),ee([]),Q(null),n(e.question_id,"")},at=it=>{Q(it)},gt=(it,xt)=>{const Mt=te.map(Qe=>Qe.id===it?{...Qe,...xt}:Qe);ee(Mt),ft(o,Mt);const rt={lines:o,textBoxes:Mt};if(n(e.question_id,JSON.stringify(rt)),xt.isEditing){const Qe=te.find(It=>It.id===it);M(Qe),G(!0)}},Te=it=>{const xt=te.filter(rt=>rt.id!==it);ee(xt),L===it&&Q(null),ft(o,xt);const Mt={lines:o,textBoxes:xt};n(e.question_id,JSON.stringify(Mt))},bt=()=>{if(q){const Mt=e?.canvas_width||600,rt=e?.canvas_height||800,Qe=window.innerWidth-40,It=window.innerHeight-40,Tt=Qe/Mt,Rt=It/rt,cr=Math.min(Tt,Rt,1);return{width:Mt,height:rt,zoom:cr}}const it=e?.canvas_width||600,xt=e?.canvas_height||800;return{width:it,height:xt,zoom:1}};S.useEffect(()=>{const it=()=>{pe(bt())};return it(),window.addEventListener("resize",it),()=>window.removeEventListener("resize",it)},[q,E]);const Ct=it=>{it.evt.preventDefault();const xt=X.current,Mt=xt.scaleX(),rt=xt.getPointerPosition(),Qe={x:(rt.x-xt.x())/Mt,y:(rt.y-xt.y())/Mt},It=it.evt.deltaY>0?Mt*.9:Mt*1.1,Tt=e?.max_canvas_width||1536,Rt=e?.max_canvas_height||2048,cr=Tt/E.width,hr=Rt/E.height,Cr=Math.min(cr,hr,1),ur=Math.max(oe,Math.min(Cr,It)),Sr={x:rt.x-Qe.x*ur,y:rt.y-Qe.y*ur};if(ur<=oe&&se.current){const we=se.current.clientWidth||1,Me=se.current.clientHeight||1;Sr.x=(we-E.width*ur)/2,Sr.y=(Me-E.height*ur)/2}xt.scale({x:ur,y:ur}),xt.position(Sr),xt.batchDraw(),console.log(" DrawingTestStudent - Wheel zoom:",Mt.toFixed(2),"->",ur.toFixed(2)),console.log(" DrawingTestStudent - New effective size:",Math.round(E.width*ur),"x",Math.round(E.height*ur)),console.log(" DrawingTestStudent - New resolution:",Math.round(E.width*ur*E.height*ur),"pixels"),j(ur),be.current=!0},Lt=it=>{const xt=it.scaleX(),Mt=se.current,rt=Mt?.clientWidth||ce.width,Qe=Mt?.clientHeight||ce.height,It=E.width*xt,Tt=E.height*xt;if(xt<=oe){const Ie=(rt-It)/2,Ce=(Qe-Tt)/2;it.position({x:Ie,y:Ce}),it.batchDraw();return}if(It<=rt&&Tt<=Qe){const Ie=(rt-It)/2,Ce=(Qe-Tt)/2;it.position({x:Ie,y:Ce}),it.batchDraw();return}const Rt=Math.max(0,It-rt),cr=Math.max(0,Tt-Qe),hr=-Rt,Cr=-cr,ur=it.x(),Sr=it.y(),we=Math.max(hr,Math.min(Rt,ur)),Me=Math.max(Cr,Math.min(cr,Sr));(we!==ur||Me!==Sr)&&(it.position({x:we,y:Me}),it.batchDraw())},Yt=()=>{if(q)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{const it=se.current;it&&(it.requestFullscreen?it.requestFullscreen():it.webkitRequestFullscreen?it.webkitRequestFullscreen():it.msRequestFullscreen&&it.msRequestFullscreen())}};return S.useEffect(()=>{const it=()=>{ne(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",it),document.addEventListener("webkitfullscreenchange",it),document.addEventListener("msfullscreenchange",it),()=>{document.removeEventListener("fullscreenchange",it),document.removeEventListener("webkitfullscreenchange",it),document.removeEventListener("msfullscreenchange",it)}},[]),S.useEffect(()=>()=>{X.current&&X.current.stop()},[]),u?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx(pn,{})}):e?l.jsxs("div",{className:`drawing-question w-full max-w-full mx-0 p-0 sm:p-2 ${q?"fixed inset-0 z-50 bg-white overflow-y-auto":""}`,children:[!q&&l.jsx("div",{className:"mb-4",children:l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Question ",t+1]})}),!q&&e.question_json&&e.question_json.trim()&&l.jsxs("div",{className:"mb-2 p-2 bg-gray-50 border border-gray-200 rounded-lg",children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Task:"}),l.jsx("div",{className:"text-gray-700",children:l.jsx(t0e,{content:e.question_json})})]}),!q&&l.jsx(Kt,{className:"p-1 sm:p-2 mb-2",children:l.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 flex-wrap",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"hidden sm:block text-sm text-gray-700",children:"Tool:"}),l.jsxs("div",{className:"flex flex-nowrap sm:flex-wrap gap-1 overflow-x-auto",children:[l.jsx("button",{onClick:()=>h("pencil"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pencil"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pencil (Freehand drawing)",children:""}),l.jsx("button",{onClick:()=>h("line"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="line"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Line",children:""}),l.jsx("button",{onClick:()=>h("rectangle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="rectangle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Rectangle",children:""}),l.jsx("button",{onClick:()=>h("circle"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="circle"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Circle",children:""}),l.jsx("button",{onClick:()=>h("eraser"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="eraser"?"bg-red-500 text-white border-red-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Eraser",children:""}),l.jsx("button",{onClick:()=>h("text"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="text"?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Text Box",children:""}),l.jsx("button",{onClick:()=>h("pan"),className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${f==="pan"?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,title:"Pan (Move canvas)",children:""})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-gray-700",children:"History:"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:Je,disabled:!I,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${I?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Undo (Ctrl+Z)",children:""}),l.jsx("button",{onClick:Ht,disabled:!z,className:`px-2 sm:px-3 py-1 sm:py-2 text-xs sm:text-sm border rounded-lg transition-colors ${z?"bg-white text-gray-700 border-gray-300 hover:bg-gray-50":"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed"}`,title:"Redo (Ctrl+Y)",children:""})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>D(!P),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-3 py-1 sm:py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[l.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:g}}),l.jsx("span",{className:"text-xs sm:text-sm text-gray-700",children:"Color"})]}),P&&l.jsx("div",{className:"absolute top-full left-0 mt-2 p-4 bg-white border border-gray-300 rounded-lg shadow-lg z-30 min-w-max",children:l.jsx("div",{className:"flex flex-wrap gap-2 max-w-xs",children:Re.map(it=>l.jsx("button",{onClick:()=>{p(it),D(!1)},className:`w-10 h-10 rounded border-2 hover:scale-110 transition-transform flex-shrink-0 ${g===it?"border-gray-800":"border-gray-300"}`,style:{backgroundColor:it},title:it},it))})})]}),l.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[l.jsx("label",{className:"text-xs sm:text-sm text-gray-700",children:"Thickness:"}),l.jsx("input",{type:"range",min:"1",max:"10",value:y,onChange:it=>v(parseInt(it.target.value)),className:"w-16 sm:w-20"}),l.jsxs("span",{className:"text-xs text-gray-500 w-6 sm:w-8",children:[y,"px"]})]}),l.jsx(ht,{onClick:Ve,variant:"secondary",size:"sm",children:"Clear"})]})}),l.jsx(Kt,{paddingClass:"p-0 sm:p-2",children:l.jsxs("div",{ref:se,className:"w-full drawing-canvas-container relative p-0 m-0",children:[l.jsx(e0e,{width:E.width,height:E.height,lines:o,onDrawingChange:Xe,currentTool:f,currentColor:g,currentThickness:y,zoom:F,onZoomChange:j,isPanning:B,isFullscreen:q,constrainPanPosition:Lt,handleWheel:Ct,stageRef:X,setIsPanning:V,responsiveDimensions:ce,canvasSize:E,question:e,textBoxes:te,setTextBoxes:ee,selectedTextBox:L,setSelectedTextBox:Q,handleTextBoxSelect:at,handleTextBoxUpdate:gt,handleTextBoxDelete:Te,isEditingText:U,editingTextBox:W,setIsEditingText:G,setEditingTextBox:M,setCurrentTool:h}),l.jsx("button",{onClick:Yt,className:"absolute top-2 left-2 bg-black bg-opacity-50 hover:bg-opacity-70 text-white p-2 rounded-lg transition-all duration-200 z-10",title:q?"Exit Fullscreen":"Enter Fullscreen",children:q?l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:l.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})]})})]}):l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-500",children:"No drawing question data available"})})})},H5={enhanceUserData(e,t){const r={id:e.id||e.student_id||e.teacher_id,username:e.username||e.student_id,name:e.name||e.first_name,surname:e.surname||e.last_name,nickname:e.nickname,role:t,is_active:e.is_active!==void 0?e.is_active:!0,created_at:e.created_at,updated_at:e.updated_at};switch(t){case"student":return{...r,student_id:e.student_id,grade:e.grade,class:e.class,number:e.number,subjects:e.subjects||[]};case"teacher":return{...r,teacher_id:e.teacher_id,first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,subjects:e.subjects||[]};case"admin":return{...r,admin_id:e.admin_id,permissions:e.permissions||["all"]};default:return r}},async studentLogin(e){console.log("Trying student login...");try{const t=await fetch("/.netlify/functions/student-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:e.username,password:e.password})}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.student,role:"student",response:t};throw new Error(r.message||"Student login failed")}catch(t){throw console.error("Student login error:",t),new Error(t.message||"Student login failed")}},async teacherLogin(e){console.log("Trying teacher login...");try{const t=await fetch("/.netlify/functions/teacher-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.teacher,role:"teacher",response:t};throw new Error(r.message||"Teacher login failed")}catch(t){throw console.error("Teacher login error:",t),new Error(t.message||"Teacher login failed")}},async adminLogin(e){console.log("Trying admin login...");try{const t=await fetch("/.netlify/functions/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(t.ok&&r.success)return{success:!0,token:r.accessToken,refreshToken:r.refreshToken,data:r.admin,role:"admin",response:t};throw new Error(r.message||"Admin login failed")}catch(t){throw console.error("Admin login error:",t),new Error(t.message||"Admin login failed")}},async login(e){const{username:t,password:r}=e;console.log("Attempting login with:",t,r);try{if(t==="admin"){const o=await this.adminLogin(e),c=await o.json();return await this.handleLoginResponse(o,"admin",c)}const n=await this.teacherLogin(e),s=await n.json();if(n.ok&&s.success)return await this.handleLoginResponse(n,"teacher",s);const a=await this.studentLogin(e),i=await a.json();return a.ok&&i.success?await this.handleLoginResponse(a,"student",i):(this.handleLoginFailure(),{success:!1,message:"Login failed. Please check your credentials and try again."})}catch(n){return console.error("Login error:",n),this.handleLoginFailure(),{success:!1,message:n.message||"Login failed"}}},async handleLoginResponse(e,t,r){if(e.ok&&r.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),this.handleLoginFailure(),{success:!1,message:"JWT system not available"};if(r.accessToken&&r.role)try{window.tokenManager.setTokens(r.accessToken,r.role),window.roleBasedLoader.setupAccessAfterLogin()}catch(n){return console.error("[ERROR] Failed to initialize JWT system:",n),this.handleLoginFailure(),{success:!1,message:"Failed to initialize JWT system"}}return this.resetLoginForm(),await this.handlePostLoginActions(r,t),{success:!0,data:r,role:t}}return{success:!1,message:"Login failed"}},async handlePostLoginActions(e,t){console.log(`Handling post-login actions for role: ${t}`);try{switch(t){case"student":e.student&&(this.populateStudentInfo(e.student),window.loadStudentData&&await window.loadStudentData());break;case"teacher":e.teacher&&(this.populateTeacherInfo(e.teacher),window.loadTeacherData&&await window.loadTeacherData());break;case"admin":e.admin&&window.loadAdminData&&await window.loadAdminData();break;default:console.warn(`Unknown role for post-login actions: ${t}`)}}catch(r){console.error("Error in post-login actions:",r)}},handleLoginFailure(){console.log("All login attempts failed"),this.resetLoginForm(),window.showNotification&&window.showNotification("Login failed. Please check your credentials and try again.","error")},resetLoginForm(){const e=document.getElementById("unifiedLoginForm");if(e){e.querySelectorAll("input").forEach(n=>{n.disabled=!1,n.style.opacity="1",n.style.cursor="text",n.removeAttribute("readonly"),n.style.pointerEvents="auto"});const r=e.querySelector('button[type="submit"]');r&&(r.disabled=!1,r.style.opacity="1",r.style.cursor="pointer",r.style.pointerEvents="auto",r.innerHTML="Login"),e.classList.remove("test-submitting","disabled"),e.style.pointerEvents="auto",console.log("Login form reset successfully - all inputs re-enabled")}},async logout(){console.log(" Logout initiated...");try{return window.tokenManager&&window.tokenManager.logout(),window.roleBasedLoader&&window.roleBasedLoader.reloadRoleAccess(),window.clearTestLocalStorage&&window.clearTestLocalStorage(),this.resetInterfaceAfterSessionClear(),console.log(" Logout completed - user session cleared, test data cleared, and interface reset"),{success:!0}}catch(e){return console.error("Logout error:",e),this.resetInterfaceAfterSessionClear(),{success:!0}}},resetInterfaceAfterSessionClear(){try{window.forceLogout=!0,window.preventAutoLogin=!0,window.isClearingSession=!0,window.forceLogoutComplete=!0,document.querySelectorAll(".section").forEach(s=>{s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0"}),document.querySelectorAll('[id$="-cabinet"], [id$="-container"], [id*="cabinet"], [id*="container"]').forEach(s=>{s.id&&s.id!=="login-section"&&(s.classList.remove("active"),s.style.display="none",s.style.visibility="hidden",s.style.opacity="0")}),document.body.classList.remove("student-logged-in","teacher-logged-in","admin-logged-in"),document.body.classList.add("force-logout");const r=document.getElementById("login-section");r&&(r.classList.add("active"),r.style.display="block",r.style.visibility="visible",r.style.opacity="1"),document.querySelectorAll("input, select, textarea").forEach(s=>{s.type!=="hidden"&&(s.value="",s.checked=!1)}),console.log(" Interface reset to login state")}catch(e){console.error("Error resetting interface:",e),localStorage.clear(),sessionStorage.clear(),window.location.reload()}},async changePassword(e){try{return{success:!0,message:(await da.post("/auth/change-password",{currentPassword:e.currentPassword,newPassword:e.newPassword,confirmPassword:e.confirmPassword})).data.message}}catch(t){throw new Error(t.response?.data?.message||"Password change failed")}},async verifyToken(e){try{const t=await da.get("/auth/verify",{headers:{Authorization:`Bearer ${e}`}});return{success:!0,valid:t.data.valid,user:t.data.user}}catch(t){return{success:!1,valid:!1,error:t.message}}},async refreshToken(e){try{const t=await da.post("/auth/refresh",{refreshToken:e});return{success:!0,token:t.data.token,refreshToken:t.data.refreshToken}}catch(t){throw new Error(t.response?.data?.message||"Token refresh failed")}},async getUserProfile(){try{return{success:!0,user:(await da.get("/auth/profile")).data.user}}catch(e){throw new Error(e.response?.data?.message||"Failed to get user profile")}},async updateUserProfile(e){try{return{success:!0,user:(await da.put("/auth/profile",e)).data.user}}catch(t){throw new Error(t.response?.data?.message||"Failed to update user profile")}},populateStudentInfo(e){console.log("=== populateStudentInfo called ==="),console.log("Student object:",e);const t=document.getElementById("studentName");if(t){const s=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=s,console.log("Set student name to:",s)}const r=document.getElementById("studentGrade");r&&(r.textContent=e?.grade||"",console.log("Set student grade to:",e?.grade));const n=document.getElementById("studentClass");n&&(n.textContent=e?.class||"",console.log("Set student class to:",e?.class)),console.log("Student info populated successfully")},populateTeacherInfo(e){console.log("=== populateTeacherInfo called ==="),console.log("Teacher object:",e);const t=document.getElementById("teacherName");if(t){const n=`${e?.name||""} ${e?.surname||""}`.trim();t.textContent=n,console.log("Set teacher name to:",n)}const r=document.getElementById("teacherUsername");r&&(r.textContent=e?.username||"",console.log("Set teacher username to:",e?.username)),console.log("Teacher info populated successfully")},getCurrentTeacherId(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.sub?e.role==="teacher"?(console.log(`[DEBUG] Found teacher ID from JWT: ${e.sub}`),e.sub):(console.warn(`[WARN] Unsupported role for teacher function: ${e.role}`),null):(console.warn("[WARN] No teacher ID found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher ID from JWT:",e),null}},getCurrentAdmin(){const e=window.tokenManager?.getToken();if(!e)return null;const t=window.tokenManager.decodeToken(e);if(!t||t.role!=="admin")throw new Error("getCurrentAdmin() called by non-admin user");return{id:t.sub,username:t.username,role:t.role}},getCurrentTeacherUsername(){try{if(!window.tokenManager||!window.tokenManager.isAuthenticated())return console.warn("[WARN] No valid JWT token found for teacher"),null;const e=window.tokenManager.decodeToken(window.tokenManager.getAccessToken());return e&&e.username?(console.log(`[DEBUG] Found teacher username from JWT: ${e.username}`),e.username):(console.warn("[WARN] No teacher username found in JWT token"),null)}catch(e){return console.error("[ERROR] Error getting current teacher username from JWT:",e),null}},isAdmin(){try{const e=window.tokenManager?.getToken();if(!e)return!1;const t=window.tokenManager.decodeToken(e);return t&&t.role==="admin"}catch(e){return console.error("[ERROR] Error checking admin status:",e),!1}},getCurrentAdminId(){try{const e=this.getCurrentAdmin();return e?e.id:null}catch(e){return console.error("[ERROR] Error getting admin ID:",e),null}}},n0e=()=>{const e=Xo(),{login:t,setUserData:r,isAuthenticated:n,user:s}=Fs(),[a,i]=S.useState({username:"",password:""}),[o,c]=S.useState(!1),[u,d]=S.useState(""),[f,h]=S.useState([]),[g,p]=S.useState(!1);S.useEffect(()=>{y()},[]);const y=S.useCallback(async()=>{console.log("Checking for existing JWT session...");try{(window.forceLogout||window.preventAutoLogin)&&(window.forceLogout=!1,window.preventAutoLogin=!1)}catch{}if(window.tokenManager)if(await window.tokenManager.isAuthenticated()){console.log("JWT session valid, checking user role...");try{const V=await window.tokenManager.getAccessToken(),Y=window.tokenManager.decodeToken(V);Y&&Y.role?console.log("User role from JWT:",Y.role):console.log("No valid role found in JWT, showing login")}catch(V){console.error("Error decoding JWT token:",V)}}else console.log("No valid JWT session found, showing login");else console.log("No tokenManager found, showing login")},[]),v=S.useCallback(async B=>{if(B.preventDefault(),window.forceLogout||window.preventAutoLogin){console.log(" Login blocked - force logout in progress"),j("Please wait for the logout process to complete.","warning");return}const{username:V,password:Y}=a;if(!V||!Y){d("Please enter both username and password");return}c(!0),d("");try{let re,te;V==="admin"?(re=await H5.adminLogin({username:V,password:Y}),te=zo.ADMIN):/^\d+$/.test(V)?(re=await H5.studentLogin({username:V,password:Y}),te=zo.STUDENT):(re=await H5.teacherLogin({username:V,password:Y}),te=zo.TEACHER);let ee,L;if(re.response?(ee=re,L=re.response):(ee=await re.json(),L=re),await C(L,te,ee)){j("Login successful!","success");try{if("credentials"in navigator&&window.PasswordCredential&&a?.username&&a?.password){const Q=new window.PasswordCredential({id:String(a.username),password:String(a.password)});await navigator.credentials.store(Q)}}catch{}try{window.forceLogout=!1,window.preventAutoLogin=!1}catch{}}}catch(re){console.error("Login error:",re),d("Invalid username or password")}finally{c(!1)}},[a]),C=S.useCallback(async(B,V,Y)=>{if(B.ok&&Y.success){if(!window.tokenManager||!window.roleBasedLoader)return console.error("[ERROR] JWT system not available during login response handling"),A(),!1;try{Y.token&&(window.tokenManager.setTokens(Y.token,V),Y.refreshToken&&window.tokenManager.setRefreshToken(Y.refreshToken),console.log("JWT token stored successfully"));const re={...Y.data,...Y,role:V};return r(re),await w(re),!0}catch(re){return console.error("Error handling login response:",re),A(re),!1}}else return console.error("Login failed:",Y.error||"Unknown error"),d(Y.error||"Login failed. Please check your credentials."),!1},[t]),w=S.useCallback(async B=>{if(console.log("Handling post-login actions for role:",B.role),g){console.log(" Post-login already handled, skipping");return}p(!0);try{switch(B.role){case zo.STUDENT:await _(B),e("/student");break;case zo.TEACHER:await T(B),e("/teacher");break;case zo.ADMIN:await E(B),e("/admin");break;default:console.error("Unknown user role:",B.role),A()}}catch(V){console.error("Error in post-login actions:",V),A(V)}},[e,g]);S.useEffect(()=>{n||p(!1)},[n]);const _=S.useCallback(async B=>{console.log("Populating student info:",B)},[]),T=S.useCallback(async B=>{console.log("Populating teacher info:",B)},[]),E=S.useCallback(async B=>{console.log("Populating admin info:",B)},[]),A=S.useCallback((B=null)=>{console.error("Login failure:",B),d("Login failed. Please check your credentials and try again."),F()},[]),F=S.useCallback(()=>{i({username:"",password:""}),d(""),c(!1)},[]),j=S.useCallback((B,V)=>{const Y={id:Date.now(),message:B,type:V,timestamp:new Date};h(re=>[...re,Y]),setTimeout(()=>{h(re=>re.filter(te=>te.id!==Y.id))},rg.NOTIFICATION_DURATION)},[]),P=S.useCallback(B=>{const{name:V,value:Y}=B.target;i(re=>({...re,[V]:Y})),u&&d("")},[u]),D=S.useCallback(B=>{B.key==="Enter"&&!o&&v(B)},[v,o]);return l.jsxs(vt.div,{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center p-4",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsxs(vt.div,{className:"w-full max-w-md",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsxs(vt.div,{className:"text-center mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsx(vt.div,{className:"flex justify-center mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring"},children:l.jsx("img",{src:"/pics/logo_mws.png",alt:"MWS Logo",className:"h-64 w-64 object-contain"})}),l.jsx(vt.h1,{className:"text-2xl font-bold mb-2 text-cyan-400 tracking-wider",style:{fontFamily:"monospace",textShadow:"0 0 10px rgba(0, 255, 255, 0.5), 0 0 20px rgba(0, 255, 255, 0.3), 2px 2px 0px #000, -2px -2px 0px #000, 2px -2px 0px #000, -2px 2px 0px #000, 0px 2px 0px #000, 0px -2px 0px #000, 2px 0px 0px #000, -2px 0px 0px #000"},initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.3},children:"TEST MANAGEMENT SYSTEM"}),l.jsx(vt.div,{className:"text-lg text-cyan-400 tracking-wider",style:{fontFamily:"monospace",textShadow:"0 0 5px rgba(0, 255, 255, 0.5)"},initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.3},children:l.jsx("div",{children:"FOR MATHAYOMWATSING SCHOOL STUDENTS"})})]}),l.jsxs(vt.div,{className:"bg-black rounded-xl shadow-2xl p-8 border-2 border-cyan-400",style:{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.7,duration:.5,type:"spring"},children:[l.jsx(vt.h2,{className:"text-2xl font-semibold text-center mb-6 text-yellow-400 tracking-wider",style:{fontFamily:"monospace",textShadow:"0 0 10px rgba(255, 215, 0, 0.5)"},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.3},children:"LOGIN"}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs(vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9,duration:.3},children:[l.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-2 text-cyan-400 tracking-wider",style:{fontFamily:"monospace"},children:"USERNAME"}),l.jsx(vt.input,{type:"text",id:"username",name:"username",value:a.username,onChange:P,onKeyDown:D,placeholder:"ENTER YOUR USERNAME",required:!0,autoComplete:"username",autoCapitalize:"none",spellCheck:!1,disabled:o,className:"w-full px-4 py-3 bg-gray-800 border-2 border-yellow-400 rounded-lg text-yellow-400 placeholder-purple-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-200 disabled:bg-gray-900 disabled:border-gray-600 disabled:cursor-not-allowed disabled:text-gray-500",style:{fontFamily:"monospace",boxShadow:"0 0 10px rgba(255, 215, 0, 0.2)",textShadow:"0 0 5px rgba(255, 215, 0, 0.3)"},"aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02,boxShadow:"0 0 15px rgba(0, 255, 255, 0.4)"},transition:{duration:.2}})]}),l.jsxs(vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:1,duration:.3},children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2 text-cyan-400 tracking-wider",style:{fontFamily:"monospace"},children:"PASSWORD"}),l.jsx(vt.input,{type:"password",id:"password",name:"password",value:a.password,onChange:P,onKeyDown:D,placeholder:"ENTER YOUR PASSWORD",required:!0,autoComplete:"current-password",disabled:o,className:"w-full px-4 py-3 bg-gray-800 border-2 border-yellow-400 rounded-lg text-yellow-400 placeholder-purple-400 focus:ring-2 focus:ring-cyan-400 focus:border-cyan-400 transition-all duration-200 disabled:bg-gray-900 disabled:border-gray-600 disabled:cursor-not-allowed disabled:text-gray-500",style:{fontFamily:"monospace",boxShadow:"0 0 10px rgba(255, 215, 0, 0.2)",textShadow:"0 0 5px rgba(255, 215, 0, 0.3)"},"aria-describedby":u?"error-message":void 0,whileFocus:{scale:1.02,boxShadow:"0 0 15px rgba(0, 255, 255, 0.4)"},transition:{duration:.2}})]}),l.jsx(Wo,{children:u&&l.jsx(vt.div,{id:"error-message",className:"bg-gray-800 border-2 border-red-500 rounded-lg p-3",style:{boxShadow:"0 0 15px rgba(239, 68, 68, 0.5), inset 0 0 10px rgba(239, 68, 68, 0.1)"},role:"alert","aria-live":"polite",initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},transition:{duration:.3},children:l.jsx("p",{className:"text-sm text-red-400 tracking-wider",style:{fontFamily:"monospace"},children:u.toUpperCase()})})}),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.1,duration:.3},children:l.jsx(vt.button,{type:"submit",disabled:o,className:"w-full px-6 py-4 bg-yellow-400 text-black font-bold rounded-lg border-2 border-cyan-400 tracking-wider disabled:opacity-50 disabled:cursor-not-allowed relative overflow-hidden",style:{fontFamily:"monospace",boxShadow:"0 0 20px rgba(255, 215, 0, 0.5), 0 0 40px rgba(0, 255, 255, 0.3)",textShadow:"0 0 5px rgba(0, 0, 0, 0.5)"},whileHover:{scale:1.05,boxShadow:"0 0 30px rgba(255, 215, 0, 0.7), 0 0 60px rgba(0, 255, 255, 0.5)"},whileTap:{scale:.95},transition:{duration:.2},children:o?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",className:"mr-2"}),"LOGGING IN..."]}):"LOG IN"})})]}),l.jsx(vt.div,{className:"mt-6 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.3},children:l.jsx(vB,{to:"/privacy",className:"text-xs text-purple-400 hover:text-cyan-400 underline tracking-wider transition-colors duration-200",style:{fontFamily:"monospace",textShadow:"0 0 5px rgba(147, 51, 234, 0.5)"},children:"PRIVACY POLICY"})})]})]}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:l.jsx(Wo,{children:f.map(B=>l.jsx(vt.div,{initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},transition:{duration:.3,type:"spring"},children:l.jsx(hu,{type:B.type,message:B.message,onClose:()=>h(V=>V.filter(Y=>Y.id!==B.id))})},B.id))})})]})},Hs={async getStudentData(){console.log("getStudentData called - loading student subjects");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-subjects")).json();if(t.success)return console.log("Student data loaded successfully:",t.subjects),t.subjects;throw new Error(t.error||"Failed to load student data")}catch(e){throw console.error("Error loading student data:",e),e}},getStudentSubjects(e){return console.log("getStudentSubjects called with subjects:",e),e.map(t=>({id:t.id||t.subject_id,name:t.subject,grade:t.grade,class:t.class,testResults:t.test_results||[]}))},async getTeacherData(){console.log("getTeacherData called - loading teacher subjects");try{const e=await this.getCurrentTeacherId();if(!e)throw new Error("No valid teacher session found");const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-subjects")).json();if(r.success)return console.log("Teacher data loaded successfully:",r.subjects),{teacher_id:e,subjects:r.subjects,hasSubjects:r.subjects.length>0};throw new Error(r.error||"Failed to load teacher data")}catch(e){throw console.error("Error loading teacher data:",e),e}},getTeacherSubjects(e){return console.log("getTeacherSubjects called with subjects:",e),e.map(t=>{let r=[];return t.classes&&Array.isArray(t.classes)&&(r=t.classes.map(n=>({grade:n.grade,class:n.class,className:n.class}))),{id:t.subject_id,name:t.subject,classes:r,assignments:t.assignments||[],description:t.description||""}})},getGradeButtons(){return console.log("getGradeButtons called"),["M1","M2","M3","M4","M5","M6"].map(t=>({id:t,name:t,classes:this.generateClassButtons(t)}))},generateClassButtons(e){const t=[];for(let r=1;r<=10;r++)t.push({id:`${e}_${r}`,name:`${e}/${r}`,grade:e,class:r});return t},async getAdminData(){console.log("getAdminData called - loading admin data");try{if(!await this.getCurrentAdminId())throw new Error("No valid admin session found");const[t,r,n]=await Promise.allSettled([this.getAllTeachers(),this.getAllSubjects(),this.getAllUsers()]);return{teachers:t.status==="fulfilled"?t.value:[],subjects:r.status==="fulfilled"?r.value:[],users:n.status==="fulfilled"?n.value:[],loadedAt:new Date().toISOString()}}catch(e){throw console.error("Error loading admin data:",e),e}},async saveTeacherSubjects(e){console.log("saveTeacherSubjects called with subjects:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-teacher-subjects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subjects:e})})).json();if(r.success)return console.log("Teacher subjects saved successfully"),r;throw new Error(r.error||"Failed to save teacher subjects")}catch(t){throw console.error("Error saving teacher subjects:",t),t}},async deleteTeacherSubject(e){console.log("deleteTeacherSubject called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/delete-teacher-subject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher subject assignment deleted successfully"),r;throw new Error(r.error||"Failed to delete teacher subject assignment")}catch(t){throw console.error("Error deleting teacher subject assignment:",t),t}},async getSubjectsDropdown(){console.log("getSubjectsDropdown called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("Subjects dropdown data loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,value:r.subject_name}));throw new Error(t.error||"Failed to load subjects dropdown")}catch(e){throw console.error("Error loading subjects dropdown:",e),e}},async getGradesAndClasses(){console.log("getGradesAndClasses called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-teacher-grades-classes")).json();if(t.success)return console.log("Grades and classes loaded successfully"),t.data;throw new Error(t.message||"Failed to load grades and classes")}catch(e){throw console.error("Error loading grades and classes:",e),e}},async saveSubjectClasses(e,t){console.log("saveSubjectClasses called with subjectId:",e,"classes:",t);try{const r=await this.getCurrentTeacherId();if(!r)throw new Error("No valid teacher session found");const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-subject-classes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({teacher_id:r,subject_id:e,classes:t})})).json();if(s.success)return console.log("Subject classes saved successfully"),s;throw new Error(s.error||"Failed to save subject classes")}catch(r){throw console.error("Error saving subject classes:",r),r}},async getAllSubjects(){console.log("getAllSubjects called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-subjects")).json();if(t.success)return console.log("All subjects loaded successfully"),t.subjects.map(r=>({id:r.id,name:r.subject_name,description:r.description||"",created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all subjects")}catch(e){throw console.error("Error loading all subjects:",e),e}},async getSubjectsForSelection(){console.log("getSubjectsForSelection called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-subjects")).json();if(t.success)return console.log("Subjects for selection loaded successfully"),t.subjects;throw new Error(t.message||"Failed to load subjects for selection")}catch(e){throw console.error("Error loading subjects for selection:",e),e}},async addAcademicYear(e){console.log("addAcademicYear called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/add-academic-year",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Academic year added successfully"),r;throw new Error(r.error||"Failed to add academic year")}catch(t){throw console.error("Error adding academic year:",t),t}},async getAllUsers(){console.log("getAllUsers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-users")).json();if(t.success)return console.log("All users loaded successfully"),t.users.map(r=>({id:r.id,student_id:r.student_id,grade:r.grade,class:r.class,number:r.number,name:r.name,surname:r.surname,nickname:r.nickname,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all users")}catch(e){throw console.error("Error loading all users:",e),e}},async getAllTeachers(){console.log("getAllTeachers called");try{const t=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-all-teachers")).json();if(t.success)return console.log("All teachers loaded successfully"),t.teachers.map(r=>({id:r.id,teacher_id:r.teacher_id,username:r.username,name:r.name,surname:r.surname,email:r.email,created_at:r.created_at,updated_at:r.updated_at}));throw new Error(t.error||"Failed to load all teachers")}catch(e){throw console.error("Error loading all teachers:",e),e}},async createUser(e){console.log("createUser called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("User created successfully"),r;throw new Error(r.error||"Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}},async updateUser(e,t){console.log("updateUser called with userId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-user/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("User updated successfully"),n;throw new Error(n.error||"Failed to update user")}catch(r){throw console.error("Error updating user:",r),r}},async createTeacher(e){console.log("createTeacher called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/create-teacher",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Teacher created successfully"),r;throw new Error(r.error||"Failed to create teacher")}catch(t){throw console.error("Error creating teacher:",t),t}},async updateTeacher(e,t){console.log("updateTeacher called with teacherId:",e,"data:",t);try{const n=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/update-teacher/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(n.success)return console.log("Teacher updated successfully"),n;throw new Error(n.error||"Failed to update teacher")}catch(r){throw console.error("Error updating teacher:",r),r}},async updateStudentInfo(e){console.log("updateStudentInfo called with data:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-student-info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(r.success)return console.log("Student info updated successfully"),r;throw new Error(r.error||"Failed to update student info")}catch(t){throw console.error("Error updating student info:",t),t}},async changePassword(e){console.log("changePassword called");let t;if(e.studentId)t="/.netlify/functions/change-student-password";else if(e.username)t="/.netlify/functions/change-teacher-password";else throw new Error("Invalid password data: missing studentId or username");try{const n=await(await window.tokenManager.makeAuthenticatedRequest(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();if(n.success)return console.log("Password changed successfully"),n;throw new Error(n.error||"Failed to change password")}catch(r){throw console.error("Error changing password:",r),r}},async getCurrentTeacherId(){try{const{SecureToken:e}=await ai(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>u4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.teacher_id||r.sub||null}catch(e){return console.error("Error getting current teacher ID:",e),null}},async getCurrentAdminId(){try{const{SecureToken:e}=await ai(async()=>{const{SecureToken:n}=await Promise.resolve().then(()=>u4);return{SecureToken:n}},void 0),t=await(window.tokenManager?.getToken()||e.get())||localStorage.getItem("accessToken");if(!t)return null;const r=JSON.parse(atob(t.split(".")[1]));return r.admin_id||r.sub||null}catch(e){return console.error("Error getting current admin ID:",e),null}}},gH=S.createContext(),pH=({children:e})=>{const[t,r]=S.useState(null),[n,s]=S.useState([]),[a,i]=S.useState([]),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState([]),[g,p]=S.useState([]),[y,v]=S.useState([]),[C,w]=S.useState(!1),[_,T]=S.useState(null),[E,A]=S.useState(!1),[F,j]=S.useState(!1),[P,D]=S.useState(!1),[B,V]=S.useState(null),[Y,re]=S.useState(null),[te,ee]=S.useState(null),L=S.useCallback(async()=>{try{w(!0),T(null);const Me=`student_subjects_${t?.student_id||t?.id||""}`;console.log(" UserContext: Checking cache for key:",Me);const Ie=js(Me);if(Ie){console.log(" UserContext: Cache HIT! Using cached student data"),s(Ie),Q(Ie);return}console.log(" UserContext: Cache MISS! Fetching from API");const Ce=await Hs.getStudentData();if(Ce)s(Ce),Q(Ce),console.log(" UserContext: Caching student data with key:",Me),ys(Me,Ce,ds.student_subjects);else throw new Error("No subjects data received")}catch(we){T(we.message||"Failed to load student data"),console.error("Error loading student data:",we)}finally{w(!1)}},[t?.student_id,t?.id]),Q=we=>{console.log("Displaying student subjects:",we),s(we)},U=S.useCallback(async()=>{try{if(w(!0),T(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid teacher session found in loadTeacherData, redirecting to login"),T("No valid teacher session found");return}const Me=`teacher_subjects_${t?.teacher_id||t?.id||""}`,Ie=js(Me);if(Ie){s(Ie),Ie.length===0?Rt():G(Ie);return}const Ce=await Hs.getTeacherSubjects();if(Ce.success)s(Ce.subjects),ys(Me,Ce.subjects,ds.teacher_subjects),Ce.subjects.length===0?Rt():G(Ce.subjects);else throw new Error(Ce.message||"Failed to load teacher data")}catch(we){T(we.message||"Failed to load teacher data"),console.error("Error loading teacher data:",we)}finally{w(!1)}},[t?.teacher_id,t?.id]),G=we=>{console.log("Showing main cabinet with subjects:",we),s(we)},W=we=>{console.log("Displaying grade buttons:",we),c(we)},M=async()=>{try{if(w(!0),T(null),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.error("No valid admin session found in loadAdminData, redirecting to login"),T("No valid admin session found");return}await Promise.all([je(),gt(),ne()])}catch(we){T(we.message||"Failed to load admin data"),console.error("Error loading admin data:",we)}finally{w(!1)}},I=we=>{console.log(" populateStudentInfoDirectly called with:",we);try{r(we),console.log(" Set student profile:",we)}catch(Me){console.error("Error populating student info:",Me)}},z=we=>{console.log("=== populateStudentInfo called ==="),r(we)},q=we=>{console.log("=== populateTeacherInfo called ==="),r(we)},ne=S.useCallback(async()=>{try{w(!0);const we="admin_users_",Me=js(we);if(Me){d(Me),X(Me);return}const Ie=await Hs.getAllUsers();if(Ie.success)d(Ie.users),X(Ie.users),ys(we,Ie.users,ds.admin_users);else throw new Error(Ie.message||"Failed to load users")}catch(we){T(we.message||"Failed to load users"),console.error("Error loading users:",we)}finally{w(!1)}},[]),X=we=>{console.log("Displaying all users:",we),d(we)},se=(we,Me)=>{console.log("Displaying users table:",we,Me),d(we)},ce=()=>{console.log("Toggling users content")},pe=()=>{console.log("Showing add user form"),A(!0)},be=()=>{console.log("Hiding add user form"),A(!1)},oe=we=>{console.log("Editing user row:",we);const Me=u.find(Ie=>Ie.id===we);V(Me)},je=S.useCallback(async()=>{try{const we="admin_teachers_",Me=js(we);if(Me){h(Me),Re(Me);return}const Ie=await Hs.getAllTeachers();if(Ie.success)h(Ie.teachers),Re(Ie.teachers),ys(we,Ie.teachers,ds.admin_teachers);else throw new Error(Ie.message||"Failed to load teachers")}catch(we){T(we.message||"Failed to load teachers"),console.error("Error loading teachers:",we)}},[]),Re=we=>{console.log("Displaying all teachers:",we),h(we)},Xe=(we,Me)=>{console.log("Displaying teachers table:",we,Me),h(we)},ft=()=>{console.log("Toggling teachers content")},Je=()=>{console.log("Showing add teacher form"),j(!0)},Ht=()=>{console.log("Hiding add teacher form"),j(!1)},Ve=we=>{console.log("Editing teacher:",we);const Me=f.find(Ie=>Ie.id===we);re(Me)},at=we=>{console.log("Editing teacher row:",we);const Me=f.find(Ie=>Ie.id===we);re(Me)},gt=S.useCallback(async()=>{try{const we="admin_subjects_",Me=js(we);if(Me){p(Me),Te(Me);return}const Ie=await Hs.getAllSubjects();if(Ie.success)p(Ie.subjects),Te(Ie.subjects),ys(we,Ie.subjects,ds.admin_subjects);else throw new Error(Ie.message||"Failed to load subjects")}catch(we){T(we.message||"Failed to load subjects"),console.error("Error loading subjects:",we)}},[]),Te=we=>{console.log("Displaying all subjects:",we),p(we)},bt=(we,Me)=>{console.log("Displaying subjects table:",we,Me),p(we)},Ct=()=>{console.log("Toggling subjects content")},Lt=()=>{console.log("Showing add subject form"),D(!0)},Yt=()=>{console.log("Hiding add subject form"),D(!1)},it=we=>{console.log("Editing subject row:",we);const Me=g.find(Ie=>Ie.id===we);ee(Me)},xt=we=>{console.log("Displaying academic year:",we),v(we)},Mt=()=>{console.log("Showing add academic year form")},rt=()=>{console.log("Hiding add academic year form")},Qe=we=>{console.log("Handling add academic year:",we)},It=()=>{console.log("Toggling academic year content")},Tt=()=>{console.log("Showing academic year editor")},Rt=()=>{console.log("Showing subject selection")},cr=()=>{console.log("Showing main cabinet")},hr=we=>{r(Me=>({...Me,...we}))},Cr=()=>{r(null),s([]),i([]),c([]),d([]),h([]),p([]),v([]),T(null)},ur=S.useCallback(we=>{Cr(),we&&nT(we)},[]),Sr={userProfile:t,userSubjects:n,userClasses:a,userGrades:o,allUsers:u,allTeachers:f,allSubjects:g,academicYears:y,isLoading:C,error:_,showUserForm:E,showTeacherForm:F,showSubjectForm:P,editingUser:B,editingTeacher:Y,editingSubject:te,loadStudentData:L,displayStudentSubjects:Q,populateStudentInfoDirectly:I,populateStudentInfo:z,loadTeacherData:U,showMainCabinetWithSubjects:G,displayGradeButtons:W,populateTeacherInfo:q,showSubjectSelection:Rt,showMainCabinet:cr,loadAdminData:M,getAllUsers:ne,displayAllUsers:X,displayUsersTable:se,toggleUsersContent:ce,showAddUserForm:pe,hideAddUserForm:be,editUserRow:oe,loadAllTeachers:je,displayAllTeachers:Re,displayTeachersTable:Xe,toggleTeachersContent:ft,showAddTeacherForm:Je,hideAddTeacherForm:Ht,editTeacher:Ve,editTeacherRow:at,loadAllSubjects:gt,displayAllSubjects:Te,displaySubjectsTable:bt,toggleSubjectsContent:Ct,showAddSubjectForm:Lt,hideAddSubjectForm:Yt,editSubjectRow:it,displayAcademicYear:xt,showAddAcademicYearForm:Mt,hideAddAcademicYearForm:rt,handleAddAcademicYear:Qe,toggleAcademicYearContent:It,showAcademicYearEditor:Tt,updateUserProfile:hr,clearUserData:Cr,clearUserDataWithCache:ur,setUserProfile:r,setUserSubjects:s,setUserClasses:i,setUserGrades:c,setAllUsers:d,setAllTeachers:h,setAllSubjects:p,setAcademicYears:v,setError:T};return l.jsx(gH.Provider,{value:Sr,children:e})},m3=()=>{const e=S.useContext(gH);if(!e)throw new Error("useUser must be used within a UserProvider");return e},Yd={STUDENT_LOGIN:"/.netlify/functions/student-login",TEACHER_LOGIN:"/.netlify/functions/teacher-login",ADMIN_LOGIN:"/.netlify/functions/admin-login",CHANGE_PASSWORD:"/.netlify/functions/change-password",GET_TEST_QUESTIONS:"/.netlify/functions/get-test-questions",SUBMIT_MULTIPLE_CHOICE_TEST:"/.netlify/functions/submit-multiple-choice-test",SUBMIT_TRUE_FALSE_TEST:"/.netlify/functions/submit-true-false-test",SUBMIT_INPUT_TEST:"/.netlify/functions/submit-input-test",SUBMIT_MATCHING_TEST:"/.netlify/functions/submit-matching-test",SUBMIT_DRAWING_TEST:"/.netlify/functions/submit-drawing-test",GET_STUDENT_SUBJECTS:"/.netlify/functions/get-student-subjects",GET_TEACHER_SUBJECTS:"/.netlify/functions/get-teacher-subjects",GET_ALL_USERS:"/.netlify/functions/get-all-users",GET_ALL_TEACHERS:"/.netlify/functions/get-all-teachers",GET_ALL_SUBJECTS:"/.netlify/functions/get-all-subjects",GET_ACADEMIC_YEAR:"/.netlify/functions/get-academic-year",SAVE_MULTIPLE_CHOICE_TEST:"/.netlify/functions/save-multiple-choice-test",SAVE_TRUE_FALSE_TEST:"/.netlify/functions/save-true-false-test",SAVE_INPUT_TEST:"/.netlify/functions/save-input-test",SAVE_MATCHING_TEST:"/.netlify/functions/save-matching-test",SAVE_DRAWING_TEST:"/.netlify/functions/save-drawing-test",UPDATE_DRAWING_TEST_SCORE:"/.netlify/functions/update-drawing-test-score",UPDATE_SPEAKING_TEST_SCORE:"/.netlify/functions/update-speaking-test-score",UPDATE_TEST_SCORE:"/.netlify/functions/update-test-score",ASSIGN_TEST_TO_CLASSES:"/.netlify/functions/assign-test-to-classes",GET_TEACHER_ACTIVE_TESTS:"/.netlify/functions/get-teacher-active-tests",GET_STUDENT_ACTIVE_TESTS:"/.netlify/functions/get-student-active-tests"},ls={MULTIPLE_CHOICE:"multiple_choice",TRUE_FALSE:"true_false",INPUT:"input",MATCHING:"matching_type",WORD_MATCHING:"word_matching",DRAWING:"drawing",FILL_BLANKS:"fill_blanks"},zo={STUDENT:"student",TEACHER:"teacher",ADMIN:"admin"};Array.from({length:10},(e,t)=>t+1);const rg={NOTIFICATION_DURATION:3e3},zf=(e,t,r)=>{if(!e||!Array.isArray(e)||e.length===0)return{score:0,total:0,percentage:0};let n=0;return e.forEach((s,a)=>{const i=Array.isArray(t)?t[a]:t[String(s.question_id||s.id||a)];i!=null&&Qp(s,i,r)&&n++}),{score:n,total:e.length,percentage:Math.round(n/e.length*100)}},Ov=(e,t)=>{console.log(" Getting correct answer for question:",e,"testType:",t);let r="";switch(t){case ls.TRUE_FALSE:r=e.correct_answer?"true":"false",console.log(" TRUE_FALSE correct_answer from question:",r,typeof r);break;case ls.MULTIPLE_CHOICE:const n=e.correct_answer.charCodeAt(0)-65,s=`option_${String.fromCharCode(97+n)}`,a=e[s];a?r=a:r=`Option ${e.correct_answer}`;break;case ls.INPUT:e.correct_answers&&Array.isArray(e.correct_answers)?r=e.correct_answers.join(", "):r=e.correct_answer||"Unknown";break;case ls.MATCHING:r=e.correct_answer||e.answer;break;case ls.WORD_MATCHING:r=e.correct_answer||e.answer;break;case ls.DRAWING:r="Drawing required";break;case ls.FILL_BLANKS:e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?r=e.correct_answers[0]:r=e.correct_answer||"Unknown";break;default:r="Unknown"}return console.log(" Correct answer:",r),r},Qp=(e,t,r)=>{if(console.log("[DEBUG] checkAnswerCorrectness called for question:",e,"studentAnswer:",t,"testType:",r),!t||t==="")return console.log("[DEBUG] No student answer provided"),!1;let n=!1;switch(r){case ls.TRUE_FALSE:n=t.toLowerCase()==="true"===e.correct_answer;break;case ls.MULTIPLE_CHOICE:let a="";if(typeof t=="string"){const o=t.trim();if(/^[a-z]$/i.test(o))a=o.toUpperCase();else if(/^\d+$/.test(o)){const c=parseInt(o,10),u=c>=0?c:NaN;Number.isNaN(u)||(a=String.fromCharCode(65+u))}}else if(typeof t=="number"){const o=t;Number.isNaN(o)||(a=String.fromCharCode(65+o))}n=a!==""&&a===String(e.correct_answer||"").toUpperCase();break;case ls.INPUT:if(e.correct_answers&&Array.isArray(e.correct_answers)){const o=t.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();n=e.correct_answers.some(c=>{const u=c.replace(/[.,/*';:!@#$%^&*()_+=\[\]{}|\\:";'<>?,.\s-]+/g,"").toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1})}else{const o=t.toLowerCase().trim(),c=e.correct_answer.toLowerCase().trim();o===c?n=!0:c&&o.includes(c)?c.length===1?n=o.startsWith(c)||o.endsWith(c):n=!0:n=!1}break;case ls.MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case ls.WORD_MATCHING:if(e.correct_answer&&typeof e.correct_answer=="object"){const o=typeof t=="string"?JSON.parse(t||"{}"):t;n=JSON.stringify(o)===JSON.stringify(e.correct_answer)}break;case ls.DRAWING:console.warn("Drawing tests should not be auto-scored!"),n=!1;break;case ls.FILL_BLANKS:const i=e.correct_answers&&Array.isArray(e.correct_answers)&&e.correct_answers.length>0?e.correct_answers[0]:e.correct_answer;if(i&&t){let o="";if(typeof t=="string"){const c=t.trim();if(/^[a-z]$/i.test(c))o=c.toUpperCase();else if(/^\d+$/.test(c)){const u=parseInt(c,10),d=u>=0?u:NaN;Number.isNaN(d)||(o=String.fromCharCode(65+d))}}else if(typeof t=="number"){const c=t;Number.isNaN(c)||(o=String.fromCharCode(65+c))}n=o!==""&&o===String(i||"").toUpperCase()}break;default:console.warn(`[WARN] Unknown test type for answer checking: ${r}`),n=!1}return console.log(`[DEBUG] Answer correctness: ${n}`),n};class s0e{constructor(){this.academicCalendar=null,this.loaded=!1}async loadAcademicCalendar(){if(this.loaded)return this.academicCalendar;try{const t=async n=>{const s=await fetch(n,{headers:{Accept:"application/json"},credentials:"include"}),a=s.headers&&s.headers.get&&s.headers.get("content-type")||"";if(!s.ok)throw new Error(`HTTP ${s.status}`);if(!a.includes("application/json"))throw new Error("Non-JSON response");return await s.json()};let r=null;if(r=await t("/academic_year.json"),!Array.isArray(r))throw new Error("Invalid academic calendar format");return this.academicCalendar=r,this.loaded=!0,console.log(" Academic calendar loaded:",this.academicCalendar.length,"terms"),this.academicCalendar}catch(t){return console.error(" Error loading academic calendar:",t),null}}getCurrentTerm(){if(!this.academicCalendar)return null;const t=new Date;return this.academicCalendar.find(n=>{const s=new Date(n.start_date),a=new Date(n.end_date);return t>=s&&t<=a})}getCurrentSemester(){const t=this.getCurrentTerm();if(!t)return null;const r=t.semester,n=this.academicCalendar.filter(s=>s.semester===r&&s.academic_year===t.academic_year);return{semester:r,currentTerm:t,allTerms:n}}getCurrentAcademicPeriodId(){return this.getCurrentTerm()?.id||null}getSemesterTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.semester===t):[]}getAcademicYearTerms(t){return this.academicCalendar?this.academicCalendar.filter(r=>r.academic_year===t):[]}getCurrentSemesterWithTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,allTerms:s,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getCurrentSemesterTerms(){const t=this.getCurrentSemester();if(!t)return null;const{semester:r,currentTerm:n,allTerms:s}=t;return{semester:r,currentTerm:n,terms:s.map(a=>({id:a.id,term:a.term,start_date:a.start_date,end_date:a.end_date,isCurrent:a.id===n.id,label:`Term ${a.term}${a.id===n.id?" (Current)":""}`}))}}getTermById(t){return this.academicCalendar?this.academicCalendar.find(r=>r.id===t):null}isCurrentTerm(t){return this.getCurrentTerm()?.id===t}getAcademicYears(){return this.academicCalendar?[...new Set(this.academicCalendar.map(r=>r.academic_year))].sort():[]}getAcademicYearSemesterTerms(t,r){return this.academicCalendar?this.academicCalendar.filter(n=>n.academic_year===t&&n.semester===r):[]}}const gu=new s0e,g3=Object.freeze(Object.defineProperty({__proto__:null,academicCalendarService:gu},Symbol.toStringTag,{value:"Module"})),Pn={async getTestInfo(e,t){console.log(`[DEBUG] getTestInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test info data received:",s),s.success)return console.log("[DEBUG] Test info retrieved successfully"),s.test_info;throw new Error(s.error||"Failed to get test info")}catch(r){throw console.error("[ERROR] Failed to get test info:",r),r}},async getTestQuestions(e,t){console.log(`[DEBUG] getTestQuestions called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions data received:",s),s.success)return console.log("[DEBUG] Test questions retrieved successfully"),s.questions;throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions:",r),r}},async getTestQuestionsWithInfo(e,t){console.log(`[DEBUG] getTestQuestionsWithInfo called with testType: ${e}, testId: ${t}`);try{const r=`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`;console.log("[DEBUG] Fetching test questions with info from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Test questions with info data received:",s),s.success)return console.log("[DEBUG] Test questions with info retrieved successfully"),{questions:s.questions,testInfo:s.test_info};throw new Error(s.error||"Failed to get test questions")}catch(r){throw console.error("[ERROR] Failed to get test questions with info:",r),r}},async getActiveTests(){console.log("getActiveTests called - extracting studentId from JWT token");try{const e="/.netlify/functions/get-student-active-tests";console.log("[DEBUG] Fetching active tests from:",e);const t=await window.tokenManager.makeAuthenticatedRequest(e);if(console.log("[DEBUG] Response status:",t.status),!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Active tests data received:",r),r.success)return console.log("[DEBUG] Active tests retrieved successfully"),r.tests;throw new Error(r.error||"Failed to get active tests")}catch(e){throw console.error("[ERROR] Failed to get active tests:",e),e}},async getTeacherTests(e=!1){console.log("getTeacherTests called - extracting teacherId from JWT token");try{const t="/.netlify/functions/get-teacher-active-tests",r=e?`${t}?ts=${Date.now()}`:t;console.log("[DEBUG] Fetching teacher tests from:",r);const n=await window.tokenManager.makeAuthenticatedRequest(r);if(console.log("[DEBUG] Response status:",n.status),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Teacher tests data received:",s),s.success)return console.log("[DEBUG] Teacher tests retrieved successfully"),s.tests;throw new Error(s.error||"Failed to get teacher tests")}catch(t){throw console.error("[ERROR] Failed to get teacher tests:",t),t}},async submitTest(e,t,r,n={},s=null){console.log("Submitting test:",{testType:e,testId:t});try{if(Object.keys(r).length===0)throw new Error("Please answer at least one question before submitting.");let a;try{const T=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-test-questions?test_type=${e}&test_id=${t}`)).json();if(T.success)a=T.test_info;else throw new Error("Failed to get test information")}catch(_){console.error("Error getting test info:",_);const T=await this.getTestQuestions(e,t);a={test_name:`Test ${t}`,num_questions:T.length}}const i=await this.getTestQuestions(e,t);let o,c;if(e==="drawing")o=null,c=null;else{const _=n?.answers_by_id?n.answers_by_id:r;o=zf(i,_,e).score,c=a.num_questions}const u=this.transformAnswersForSubmission(r,e),d=a.teacher_id||null,f=a.subject_id||null,h=s?.student_id||s?.id||(window.tokenManager?.getCurrentUser?window.tokenManager.getCurrentUser()?.student_id||window.tokenManager.getCurrentUser()?.id:null);await gu.loadAcademicCalendar();const p=gu.getCurrentTerm()?.id;if(!p)throw new Error("No current academic period found");const y={test_id:t,test_name:a.test_name,test_type:e,teacher_id:d,subject_id:f,student_id:h,academic_period_id:p,answers:u,score:o,maxScore:c,time_taken:n.time_taken||null,started_at:n.started_at||null,submitted_at:n.submitted_at||new Date().toISOString(),caught_cheating:n.caught_cheating||!1,visibility_change_times:n.visibility_change_times||0,answers_by_id:n.answers_by_id||null,question_order:n.question_order||null,retest_assignment_id:n.retest_assignment_id||null,parent_test_id:n.parent_test_id||t};console.log(" testService retest_assignment_id:",n.retest_assignment_id),console.log(" testService timingData:",n),console.log(" testService commonData.retest_assignment_id:",y.retest_assignment_id);let v;switch(e){case"multiple_choice":v="/.netlify/functions/submit-multiple-choice-test";break;case"true_false":v="/.netlify/functions/submit-true-false-test";break;case"input":v="/.netlify/functions/submit-input-test";break;case"matching_type":v="/.netlify/functions/submit-matching-type-test";break;case"word_matching":v="/.netlify/functions/submit-word-matching-test";break;case"drawing":v="/.netlify/functions/submit-drawing-test";break;case"fill_blanks":v="/.netlify/functions/submit-fill-blanks-test";break;default:throw new Error(`Unsupported test type: ${e}`)}console.log("Submitting to:",v),console.log("Submission data:",y),console.log("Submission data JSON:",JSON.stringify(y,null,2)),console.log(" Final submission retest_assignment_id:",y.retest_assignment_id);const C=await window.tokenManager.makeAuthenticatedRequest(v,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const w=await C.json();if(console.log("Test submission result:",w),w.success)return this.clearTestProgress(e,t),{success:!0,score:o,maxScore:c,result:w};throw new Error(w.error||"Failed to submit test")}catch(a){throw console.error("Error submitting test:",a),a}},async createTest(e){try{return(await da.post("/tests/create",e)).data}catch(t){throw new Error(t.message||"Failed to create test")}},async updateTest(e,t,r){try{return(await da.put(`/tests/${e}/${t}`,r)).data}catch(n){throw new Error(n.message||"Failed to update test")}},async deleteTest(e,t){try{return(await da.delete(`/tests/${e}/${t}`)).data}catch(r){throw new Error(r.message||"Failed to delete test")}},async duplicateTest(e,t){try{return(await da.post(`/tests/${e}/${t}/duplicate`)).data}catch(r){throw new Error(r.message||"Failed to duplicate test")}},async publishTest(e,t){try{return(await da.post(`/tests/${e}/${t}/publish`)).data}catch(r){throw new Error(r.message||"Failed to publish test")}},async unpublishTest(e,t){try{return(await da.post(`/tests/${e}/${t}/unpublish`)).data}catch(r){throw new Error(r.message||"Failed to unpublish test")}},async removeClassAssignment(e,t,r){try{return(await da.delete(`/tests/${e}/${t}/assignments/${r}`)).data}catch(n){throw new Error(n.message||"Failed to remove class assignment")}},async getTestStatistics(e,t){try{return(await da.get(`/tests/${e}/${t}/statistics`)).data}catch(r){throw new Error(r.message||"Failed to get test statistics")}},async exportTest(e,t,r="json"){try{return(await da.get(`/tests/${e}/${t}/export?format=${r}`)).data}catch(n){throw new Error(n.message||"Failed to export test")}},async importTest(e,t){try{return(await da.uploadFile(`/tests/import?type=${t}`,e)).data}catch(r){throw new Error(r.message||"Failed to import test")}},async getTestResults(e,t){try{return(await da.get(`/tests/${e}/${t}/results`)).data}catch(r){throw new Error(r.message||"Failed to get test results")}},async getStudentTestResults(){try{console.log("[DEBUG] Fetching student test results from: /.netlify/functions/get-student-test-results");const e=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/get-student-test-results");if(console.log("[DEBUG] Response status:",e.status),!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const t=await e.json();if(console.log("[DEBUG] Student test results data received:",t),t.success)return console.log("[DEBUG] Student test results retrieved successfully"),t;throw new Error(t.error||"Failed to get student test results")}catch(e){throw console.error("[ERROR] Failed to get student test results:",e),new Error(e.message||"Failed to get student test results")}},async getClassResults(e,t,r){try{return(await da.get(`/tests/class-results/${e}/${t}/${r}`)).data}catch(n){throw new Error(n.message||"Failed to get class results")}},async saveTestProgress(e,t,r){try{return(await da.post(`/tests/${e}/${t}/progress`,{progress:r})).data}catch(n){throw new Error(n.message||"Failed to save test progress")}},async getTestProgress(e,t){try{return(await da.get(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to get test progress")}},async clearTestProgress(e,t){try{return(await da.delete(`/tests/${e}/${t}/progress`)).data}catch(r){throw new Error(r.message||"Failed to clear test progress")}},async validateTestData(e){try{return(await da.post("/tests/validate",e)).data}catch(t){throw new Error(t.message||"Failed to validate test data")}},async getTestPreview(e,t){try{return(await da.get(`/tests/${e}/${t}/preview`)).data}catch(r){throw new Error(r.message||"Failed to get test preview")}},isAnswerCorrect(e,t,r,n){switch(n){case"multiple_choice":return String.fromCharCode(65+parseInt(t))===r.correct_answer;case"true_false":return t.toLowerCase()==="true"===r.correct_answer;case"input":const i=r.correct_answers||[],o=t.toLowerCase().trim();return i.some(c=>{const u=c.toLowerCase().trim();return o===u?!0:u&&o.includes(u)?u.length===1?o.startsWith(u)||o.endsWith(u):!0:!1});case"matching_type":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"word_matching":return JSON.stringify(t)===JSON.stringify(r.correct_answer);case"drawing":return t&&t!=="No answer";default:return!1}},transformAnswersForSubmission(e,t){switch(t){case"multiple_choice":return e;case"true_false":return e;case"input":return e;case"matching_type":return e;case"word_matching":return e;case"drawing":if(Array.isArray(e)&&e.length>0)try{const r=e[0];return typeof r=="string"&&r.startsWith("[")?JSON.parse(r):e}catch(r){return console.warn("Failed to parse drawing answers:",r),e}return e;default:return e}},async markAssignmentCompleted(e){try{console.log(`[DEBUG] markAssignmentCompleted called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/mark-test-completed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Mark assignment completed response:",r),r.success)return console.log(`Assignment ${e} marked as completed successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to mark assignment as completed")}catch(t){throw console.error("Error marking assignment completed:",t),t}},async activateAssignment(e){try{console.log(`[DEBUG] activateAssignment called with assignmentId: ${e}`);const t=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/activate-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({assignment_id:e})});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(console.log("[DEBUG] Activate assignment response:",r),r.success)return console.log(`Assignment ${e} activated successfully`),{success:!0,message:r.message};throw new Error(r.error||"Failed to activate assignment")}catch(t){throw console.error("Error activating assignment:",t),t}},clearTestProgress(e,t){try{const r=`test_progress_${e}_${t}`;localStorage.removeItem(r),console.log(`Test progress cleared for ${e}_${t}`)}catch(r){console.error("Error clearing test progress:",r)}},async saveMultipleChoiceTest(e){console.log("[DEBUG] saveMultipleChoiceTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-multiple-choice-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save multiple choice test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving multiple choice test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveTrueFalseTest(e){console.log("[DEBUG] saveTrueFalseTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-true-false-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save true/false test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving true/false test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveInputTest(e){console.log("[DEBUG] saveInputTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-input-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save input test response:",r),r.success?{success:!0,test_id:r.test_id,message:"Test saved successfully"}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving input test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveMatchingTest(e){console.log("[DEBUG] saveMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"matching_type",num_questions:e.num_blocks})})).json();return console.log("[DEBUG] Save matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveWordMatchingTest(e){console.log("[DEBUG] saveWordMatchingTest called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,test_type:"word_matching"})})).json();return console.log("[DEBUG] Save word matching test response:",r),r.success?{success:!0,test_id:r.test_id,message:r.message,assignments_count:r.assignments_count}:{success:!1,message:r.message||"Failed to save test"}}catch(t){return console.error("Error saving word matching test:",t),{success:!1,message:"Error saving test: "+t.message}}},async saveDrawingTest(e){console.log("[DEBUG] saveDrawingTest called with:",e);try{const t={...e,test_type:"drawing"},n=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();return console.log("[DEBUG] Save drawing test response:",n),n.success?{success:!0,data:{test_id:n.test_id}}:{success:!1,message:n.message||"Failed to save test"}}catch(t){return console.error("Error saving drawing test:",t),{success:!1,message:"Error saving test: "+t.message}}},async getDrawingTest(e){console.log("[DEBUG] getDrawingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-drawing-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get drawing test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting drawing test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitDrawingTest(e,t,r,n){console.log("[DEBUG] submitDrawingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-drawing-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit drawing test response:",a),a.success?{success:!0,data:a.data}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting drawing test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async updateDrawingTestScore(e,t,r){console.log("[DEBUG] updateDrawingTestScore called with:",{resultId:e,score:t,maxScore:r});try{const s=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-drawing-test-score",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({result_id:e,score:t,max_score:r})})).json();return console.log("[DEBUG] Update drawing test score response:",s),s.success?{success:!0,data:s.data}:{success:!1,message:s.message||"Failed to update score"}}catch(n){return console.error("Error updating drawing test score:",n),{success:!1,message:"Error updating score: "+n.message}}},async getWordMatchingTest(e){console.log("[DEBUG] getWordMatchingTest called with testId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-word-matching-test?test_id=${e}`,{method:"GET"})).json();return console.log("[DEBUG] Get word matching test response:",r),r.success?{success:!0,data:r.data}:{success:!1,message:r.message||"Failed to get test"}}catch(t){return console.error("Error getting word matching test:",t),{success:!1,message:"Error getting test: "+t.message}}},async submitWordMatchingTest(e,t,r,n){console.log("[DEBUG] submitWordMatchingTest called with:",{testId:e,answers:t,timeTaken:r,antiCheatingData:n});try{const a=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/submit-word-matching-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e,answers:t,time_taken:r,caught_cheating:n?.caught_cheating||!1,visibility_change_times:n?.visibility_change_times||0})})).json();return console.log("[DEBUG] Submit word matching test response:",a),a.success?{success:!0,result:a.result}:{success:!1,message:a.message||"Failed to submit test"}}catch(s){return console.error("Error submitting word matching test:",s),{success:!1,message:"Error submitting test: "+s.message}}},async assignTestToClasses(e){console.log("[DEBUG] assignTestToClasses called with:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();return console.log("[DEBUG] Save test with assignments response:",r),r.success?{success:!0,message:"Test assigned successfully"}:{success:!1,message:r.message||"Failed to assign test"}}catch(t){return console.error("Error assigning test to classes:",t),{success:!1,message:"Error assigning test: "+t.message}}},async removeClassAssignment(e){console.log("[DEBUG] removeClassAssignment called with assignmentId:",e);try{const r=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/remove-class-assignment?assignment_id=${e}`,{method:"DELETE"})).json();return console.log("[DEBUG] Remove class assignment response:",r),r.success?{success:!0,message:"Assignment removed successfully"}:{success:!1,message:r.message||"Failed to remove assignment"}}catch(t){return console.error("Error removing class assignment:",t),{success:!1,message:"Error removing assignment: "+t.message}}},async updateTestQuestions(e,t,r){try{console.log(`[DEBUG] updateTestQuestions called with testType: ${e}, testId: ${t}`);const n=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-test-questions",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t,questions:r})});if(!n.ok){let a=`HTTP error! status: ${n.status}`;try{const i=await n.json();a=i.details||i.error||a,console.error("[DEBUG] Update questions error response:",i)}catch{}throw new Error(a)}const s=await n.json();if(console.log("[DEBUG] Update questions response:",s),s.success)return console.log(`Questions for ${e}_${t} updated successfully`),{success:!0,message:s.message};{const a=s.error||s.details||"Failed to update questions";throw console.error("[DEBUG] Update questions error:",a,s),new Error(a)}}catch(n){throw console.error("Error updating questions:",n),n}},async updateTestSettings(e,t,r){try{console.log(`[DEBUG] updateTestSettings called with testType: ${e}, testId: ${t}`);const n=await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/update-test-settings",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_type:e,test_id:t,...r})});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const s=await n.json();if(console.log("[DEBUG] Update settings response:",s),s.success)return console.log(`Settings for ${e}_${t} updated successfully`),{success:!0,message:s.message};throw new Error(s.error||"Failed to update settings")}catch(n){throw console.error("Error updating settings:",n),n}}},xH=S.createContext(),yH=({children:e})=>{const[t,r]=S.useState(null),[n,s]=S.useState([]),[a,i]=S.useState({}),[o,c]=S.useState({}),[u,d]=S.useState(!1),[f,h]=S.useState(null),[g,p]=S.useState([]),[y,v]=S.useState(!1),[C,w]=S.useState(null),[_,T]=S.useState({isOpen:!1,testType:null,testId:null,testName:null,questions:[]}),[E,A]=S.useState(null),[F,j]=S.useState(0),{getItem:P,setItem:D,removeItem:B}=tU();S.useEffect(()=>{let we;return u&&E&&(we=setInterval(()=>{const Me=Math.floor((Date.now()-E)/1e3);j(Me)},1e3)),()=>{we&&clearInterval(we)}},[u,E]);const V=async(we,Me)=>{try{v(!0),w(null),console.log(`[DEBUG] loadTestForPage called with testType: ${we}, testId: ${Me}`);const Ie=await Pn.getTestInfo(we,Me);console.log("[DEBUG] Test info retrieved:",Ie);const Ce=await Pn.getTestQuestions(we,Me);console.log("[DEBUG] Test questions retrieved:",Ce),r({...Ie,testType:we,testId:Me}),s(Ce),d(!0),A(Date.now()),j(0),Y(we,Me),console.log("[DEBUG] Test loaded successfully")}catch(Ie){w(Ie.message||"Failed to load test"),console.error("Error loading test:",Ie)}finally{v(!1)}},Y=(we,Me)=>{try{const Ie=`test_progress_${we}_${Me}`,Ce=P(Ie);Ce&&(i(Ce.answers||{}),c(Ce.progress||{}))}catch(Ie){console.error("Error loading saved progress:",Ie)}},re=(we,Me,Ie,Ce)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot save progress: No valid JWT token");return}const wt=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${we}_${Me}`,Nt={...a,[Ie]:Ce},Oe={...o,[Ie]:{answered:!0,timestamp:Date.now()}};i(Nt),c(Oe),D(wt,{answers:Nt,progress:Oe,lastSaved:Date.now()}),console.log(`Saved progress for question ${Ie}:`,Ce)}catch(Ze){console.error("Error saving test progress:",Ze)}},te=(we,Me,Ie)=>{try{if(window.tokenManager&&!window.tokenManager.isAuthenticated())return console.warn("[WARN] Cannot get progress: No valid JWT token"),null;const Ze=`test_progress_${window.tokenManager?.getDecodedToken()?.sub||"unknown"}_${we}_${Me}`;return P(Ze)?.answers?.[Ie]||null}catch(Ce){return console.error("Error getting test progress:",Ce),null}},ee=(we,Me)=>{try{if(console.log(`[DEBUG] clearTestProgress called with testType: ${we}, testId: ${Me}`),window.tokenManager&&!window.tokenManager.isAuthenticated()){console.warn("[WARN] Cannot clear progress: No valid JWT token");return}const Ie=window.tokenManager?.getDecodedToken()?.sub||"unknown",Ce=`test_progress_${Ie}_${we}_${Me}`;console.log(`[DEBUG] Removing localStorage key: ${Ce}`);const Ze=P(Ce)!==null;B(Ce),i({}),c({});for(let wt=0;wt<localStorage.length;wt++){const Nt=localStorage.key(wt);Nt&&Nt.startsWith(`test_progress_${Ie}_${we}_${Me}_`)&&(localStorage.removeItem(Nt),console.log(`[DEBUG] Cleared individual question key: ${Nt}`))}console.log(Ze?`[DEBUG] Progress cleared for test ${we}_${Me}`:`[DEBUG] No progress found to clear for test ${we}_${Me}`)}catch(Ie){console.error("Error clearing test progress:",Ie)}},L=async(we,Me,Ie="")=>{try{v(!0),w(null),console.log("Submitting test:",{testType:we,testId:Me});const Ce=ne(we,Me);if(Object.keys(Ce).length===0){w("Please answer at least one question before submitting.");return}let Ze;try{Ze=await Pn.getTestInfo(we,Me)}catch(qt){console.error("Error getting test info:",qt);const gr=await Pn.getTestQuestions(we,Me);Ze={test_name:`Test ${Me}`,num_questions:gr.length}}const wt=await Pn.getTestQuestions(we,Me),Nt=zf(wt,Ce,we),Oe=Ze.num_questions,Ke=se(Ce,we),st={test_id:Me,test_name:Ze.test_name,score:Nt,maxScore:Oe,answers:Ke},Vt=await Pn.submitTest(we,Me,st);if(Vt.success){if(h(Vt.result),W(we,Me,Ie),ee(we,Me),Ie){const qt=`student_results_table_${Ie}`;we!=="drawing"?(console.log(" TestContext: Caching test results after submission with key:",qt),ys(qt,Vt.result,ds.student_results_table)):console.log(" TestContext: Skipping cache for drawing test submission (teacher-scored).")}return Ie&&f1(Ie,we,Me),d(!1),Vt.results}else throw new Error(Vt.message||"Test submission failed")}catch(Ce){throw w(Ce.message||"Failed to submit test"),Ce}finally{v(!1)}},Q=(we,Me,Ie)=>{h({testType:we,testId:Me,answers:Ie}),d(!1)},U=()=>{r(null),s([]),i({}),c({}),d(!1),h(null),w(null),A(null),j(0)},G=(we,Me,Ie="")=>{try{const Ce=`test_completed_${Ie}_${we}_${Me}`;return P(Ce)===!0}catch(Ce){return console.error("Error checking test completion:",Ce),!1}},W=(we,Me,Ie="")=>{try{const Ce=`test_completed_${Ie}_${we}_${Me}`;D(Ce,!0)}catch(Ce){console.error("Error marking test completed:",Ce)}},M=we=>Object.keys(a).length,I=()=>{const we=M(t?.testType),Me=n.length;return{canSubmit:we===Me,answeredCount:we,totalQuestions:Me}},z=()=>{t&&ee(t.testType,t.testId),U()},q=(we="")=>{try{const Me=`student_results_table_${we}`;console.log(" TestContext: Clearing test results cache:",Me),localStorage.removeItem(Me),console.log(" TestContext: Test results cache cleared")}catch(Me){console.error("Error clearing test results cache:",Me)}},ne=(we,Me)=>({...a}),X=(we,Me,Ie=null)=>{try{if(!we)return"No answer";switch(Me){case"true_false":return we?"True":"False";case"multiple_choice":if(Ie&&typeof we=="string"&&!isNaN(parseInt(we))){const Ce=parseInt(we),Ze=`option_${String.fromCharCode(97+Ce)}`,wt=Ie[Ze];if(wt)return wt}return String(we).toUpperCase();case"input":return String(we);case"matching_type":return typeof we=="object"?Object.entries(we).map(([Ce,Ze])=>`${Ce}  ${Ze}`).join(", "):String(we);case"word_matching":return typeof we=="object"?Object.entries(we).map(([Ce,Ze])=>`${Ce}  ${Ze}`).join(", "):String(we);case"drawing":return"Drawing submitted";default:return String(we)}}catch(Ce){return console.error("Error formatting student answer:",Ce),"Error displaying answer"}},se=(we,Me)=>{try{if(!we||typeof we!="object")return{};const Ie={};return Object.entries(we).forEach(([Ce,Ze])=>{if(Ze!=null)switch(Me){case"true_false":Ie[Ce]=!!Ze;break;case"multiple_choice":Ie[Ce]=String(Ze).toUpperCase();break;case"input":Ie[Ce]=String(Ze).trim();break;case"matching_type":typeof Ze=="object"?Ie[Ce]=Ze:Ie[Ce]=String(Ze);break;case"word_matching":typeof Ze=="object"?Ie[Ce]=Ze:Ie[Ce]=String(Ze);break;case"drawing":Ie[Ce]=Ze;break;default:Ie[Ce]=Ze}}),Ie}catch(Ie){return console.error("Error transforming answers for submission:",Ie),we||{}}},ce=S.useCallback(async(we="")=>{const Me=`student_active_tests_${we}`,Ie=rT(Me,{includeExpired:!0}),Ce=Ie?.data,Ze=Array.isArray(Ce)?!0:!!Ce,wt=ds.student_active_tests?ds.student_active_tests*.5:0,Nt=!Ze||Ie?.isExpired||wt>0&&Ie?.age>wt,Oe=!Ze||Ie?.isExpired===!0;if(Ze&&p(Ce),!Nt)return v(!1),Ce;if(!Oe&&Ze)return v(!1),(async()=>{try{const Ke=await Pn.getActiveTests();if(p(Ke),ys(Me,Ke,ds.student_active_tests),we)try{localStorage.setItem(`last_cabinet_refresh_${we}`,Date.now().toString())}catch(st){console.warn("Unable to persist last cabinet refresh timestamp:",st)}}catch(Ke){console.warn("Background refresh of active tests failed:",Ke)}})(),Ce;v(!0);try{const Ke=await Pn.getActiveTests();if(p(Ke),ys(Me,Ke,ds.student_active_tests),we)try{localStorage.setItem(`last_cabinet_refresh_${we}`,Date.now().toString())}catch(st){console.warn("Unable to persist last cabinet refresh timestamp:",st)}return Ke}catch(Ke){return w(Ke.message||"Failed to load active tests"),p([]),[]}finally{v(!1)}},[]),pe=async()=>{try{return v(!0),await Pn.getTeacherTests()}catch(we){return w(we.message||"Failed to load teacher tests"),[]}finally{v(!1)}},be=async we=>{try{return v(!0),await Pn.createTest(we)}catch(Me){throw w(Me.message||"Failed to create test"),Me}finally{v(!1)}},oe=async(we,Me)=>{try{return v(!0),await Pn.deleteTest(we,Me)}catch(Ie){throw w(Ie.message||"Failed to delete test"),Ie}finally{v(!1)}},je=async(we,Me)=>{try{return await Pn.getTestInfo(we,Me)}catch(Ie){throw console.error("Error getting test info:",Ie),Ie}},Re=async(we,Me)=>{try{return await Pn.getTestQuestions(we,Me)}catch(Ie){throw console.error("Error getting test questions:",Ie),Ie}},Xe=async(we,Me,Ie)=>{try{console.log("Showing test results:",{testType:we,testId:Me,studentAnswers:Ie});const Ce=await je(we,Me),Ze=await Re(we,Me);Ht(Ce,Ze,we,Ie),d(!1),console.log("Test results displayed successfully")}catch(Ce){console.error("Error showing test results:",Ce),w("Failed to display test results"),h({testType:we,testId:Me,answers:Ie,showResults:!0,error:"Could not load detailed results"}),d(!1)}},ft=async(we,Me,Ie)=>{try{v(!0);const Ce=await je(we,Me),Ze=await Re(we,Me);Ht(Ce,Ze,we,Ie)}catch(Ce){w(Ce.message||"Failed to load test results")}finally{v(!1)}},Je=S.useCallback(async(we="")=>{try{v(!0);const Me=`student_results_table_${we}`;console.log(" TestContext: Checking cache for key:",Me);const Ie=js(Me);if(Ie)return console.log(" TestContext: Cache HIT! Using cached test results"),h(Ie),Ie;console.log(" TestContext: Cache MISS! Fetching from API");const Ce=await Pn.getStudentTestResults();return console.log(" TestContext: Test results loaded:",Ce),console.log(" TestContext: Results data:",Ce?.results||Ce),console.log(" TestContext: Results length:",Ce?.results?.length||0),h(Ce),console.log(" TestContext: Caching test results with key:",Me),console.log(" TestContext: Results being cached:",Ce),console.log(" TestContext: Results.results being cached:",Ce.results),ys(Me,Ce,ds.student_results_table),Ce}catch(Me){throw console.error("Error loading test results:",Me),w(Me.message||"Failed to load test results"),Me}finally{v(!1)}},[]),Ht=(we,Me,Ie,Ce)=>{try{console.log("Displaying test results:",{testInfo:we,questions:Me,testType:Ie,studentAnswers:Ce});const Ze=zf(Me,Ce,Ie),wt=we?.num_questions||Me?.length||0,Nt=wt>0?Math.round(Ze/wt*100):0,Oe=Nt>=60,Ke=Me.map((st,Vt)=>{const qt=st.question_id||st.id,gr=Ce[qt],Vr=Qp(st,gr,Ie);return{questionNumber:Vt+1,question:st.question||st.question_text,userAnswer:X(gr,Ie),correctAnswer:Ov(st,Ie),isCorrect:Vr,questionType:Ie}});h({testInfo:we,questions:Me,testType:Ie,studentAnswers:Ce,showResults:!0,score:Ze,totalQuestions:wt,percentage:Nt,passed:Oe,questionAnalysis:Ke,timestamp:new Date().toISOString()}),c(st=>({...st,score:Ze,totalQuestions:wt,percentage:Nt,passed:Oe,lastUpdated:Date.now()})),Ve(),console.log(`Test results displayed: ${Ze}/${wt} (${Nt}%) - ${Oe?"PASSED":"FAILED"}`)}catch(Ze){console.error("Error displaying test results:",Ze),w("Failed to display test results")}},Ve=S.useCallback(()=>{try{console.log("Setting up test results page event listeners");const we=wt=>{if(wt.key==="Escape"&&z(),wt.ctrlKey&&wt.key==="p"&&(wt.preventDefault(),window.print()),wt.key==="Enter"&&f&&!f.passed){const Nt=document.getElementById("retake-test-button");Nt&&Nt.click()}},Me=()=>{window.print()},Ie=()=>{if(f){const wt=`Test: ${f.testInfo?.test_name||"Test"}
Score: ${f.score}/${f.totalQuestions} (${f.percentage}%)
Status: ${f.passed?"PASSED":"FAILED"}
Completed: ${new Date(f.timestamp).toLocaleString()}`;navigator.clipboard.writeText(wt).then(()=>{console.log("Results copied to clipboard")}).catch(Nt=>{console.error("Failed to copy results:",Nt)})}};document.addEventListener("keydown",we);const Ce=document.getElementById("print-results");Ce&&Ce.addEventListener("click",Me);const Ze=document.getElementById("copy-results");return Ze&&Ze.addEventListener("click",Ie),()=>{document.removeEventListener("keydown",we),Ce&&Ce.removeEventListener("click",Me),Ze&&Ze.removeEventListener("click",Ie)}}catch(we){console.error("Error setting up test results page event listeners:",we)}},[z,f]),at=async(we,Me,Ie)=>{try{v(!0),w(null),console.log("Viewing test details:",{testType:we,testId:Me,testName:Ie}),T({isOpen:!0,testType:we,testId:Me,testName:Ie,questions:[],isLoading:!0});const Ce=await Pn.getTestQuestions(we,Me);Ce&&Ce.length>0?(T({isOpen:!0,testType:we,testId:Me,testName:Ie,questions:Ce,isLoading:!1}),console.log(`Test details loaded: ${Ce.length} questions`)):(w("Could not load test questions. Please try again."),T({isOpen:!0,testType:we,testId:Me,testName:Ie,questions:[],isLoading:!1,error:"No questions available for this test"}))}catch(Ce){console.error("Error loading test details:",Ce),w("Error loading test details. Please try again."),T({isOpen:!0,testType:we,testId:Me,testName:Ie,questions:[],isLoading:!1,error:Ce.message||"Failed to load test details"})}finally{v(!1)}},gt=(we,Me,Ie,Ce)=>{try{console.log("Showing test details modal:",{testType:we,testId:Me,testName:Ie,questions:Ce}),T({isOpen:!0,testType:we,testId:Me,testName:Ie,questions:Ce||[],isLoading:!1,error:null})}catch(Ze){console.error("Error showing test details modal:",Ze),w("Failed to show test details modal")}},Te=()=>{try{console.log("Closing test details modal"),T({isOpen:!1,testType:null,testId:null,testName:null,questions:[],isLoading:!1,error:null})}catch(we){console.error("Error closing test details modal:",we)}},bt=(we,Me)=>{try{switch(Me){case"multiple_choice":return l.jsxs("div",{className:"answer-options",children:[l.jsx("p",{children:l.jsx("strong",{children:"Options:"})}),l.jsxs("p",{children:["A) ",we.option_a||"No text"]}),l.jsxs("p",{children:["B) ",we.option_b||"No text"]}),we.option_c&&l.jsxs("p",{children:["C) ",we.option_c]}),we.option_d&&l.jsxs("p",{children:["D) ",we.option_d]}),we.option_e&&l.jsxs("p",{children:["E) ",we.option_e]}),we.option_f&&l.jsxs("p",{children:["F) ",we.option_f]}),l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer||"Not specified"]})})]});case"true_false":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer?"True":"False"]})})});case"input":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer||"Not specified"]})})});case"matching_type":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer?JSON.stringify(we.correct_answer):"Not specified"]})})});case"word_matching":return l.jsx("div",{className:"answer-options",children:l.jsx("p",{className:"correct-answer",children:l.jsxs("strong",{children:["Correct Answer: ",we.correct_answer?JSON.stringify(we.correct_answer):"Not specified"]})})});default:return l.jsx("p",{children:"Unknown question type"})}}catch(Ie){return console.error("Error formatting question answer display:",Ie),l.jsx("p",{children:"Error displaying question"})}},Ct=(we,Me)=>{try{console.log("Navigating to test:",{testType:we,testId:Me}),r({testType:we,testId:Me}),d(!0),V(we,Me)}catch(Ie){console.error("Error navigating to test:",Ie),w("Failed to navigate to test")}},Lt=()=>{try{console.log("Hiding test sections"),r(null),s([]),i({}),c({}),d(!1),h(null),w(null)}catch(we){console.error("Error hiding test sections:",we)}},Yt=(we,Me,Ie,Ce)=>{try{console.log("Displaying test on page:",{testInfo:we,questions:Me,testType:Ie,testId:Ce}),r({...we,testType:Ie,testId:Ce}),s(Me),d(!0),Y(Ie,Ce),Tt(Ie,Ce),Qe(Ie,Ce)}catch(Ze){console.error("Error displaying test on page:",Ze),w("Failed to display test on page")}},it=(we,Me,Ie)=>{try{return console.log("Rendering questions for page:",{questions:we,testType:Me,testId:Ie}),!we||!Array.isArray(we)?(console.warn("Invalid questions array for rendering"),[]):we.map((Ce,Ze)=>{const wt=Nt=>{const Oe={...a,[Ce.question_id]:Nt};i(Oe),re(Me,Ie,Ce.question_id,Nt)};return{question:Ce,index:Ze,testType:Me,testId:Ie,studentAnswer:a[Ce.question_id]||"",onAnswerChange:wt}})}catch(Ce){return console.error("Error rendering questions for page:",Ce),[]}},xt=S.useCallback((we,Me)=>{try{if(!we||!Me){console.warn("Cannot save progress: missing testType or testId");return}const Ie=`test_progress_${we}_${Me}`,Ce={answers:a,progress:o,lastSaved:Date.now(),testType:we,testId:Me};D(Ie,Ce),console.log(`Progress saved for test ${we}_${Me}:`,Ce)}catch(Ie){console.error("Error saving progress for page:",Ie)}},[a,o,D]),Mt=S.useCallback(we=>{try{return!a||Object.keys(a).length===0?0:Object.values(a).filter(Ie=>Ie==null?!1:typeof Ie=="string"?Ie.trim()!=="":typeof Ie=="object"?Object.keys(Ie).length>0:!0).length}catch(Me){return console.error("Error getting answered questions count for page:",Me),0}},[a]),rt=S.useCallback((we,Me)=>{try{console.log("Updating progress display for page:",{testType:we,testId:Me});const Ie=Mt(we),Ce=n.length,Ze=Ce>0?Math.round(Ie/Ce*100):0,wt=Ie===Ce&&Ce>0;c(st=>({...st,answeredCount:Ie,totalQuestions:Ce,percentage:Ze,canSubmit:wt,remainingQuestions:Ce-Ie,lastUpdated:Date.now()}));const Nt=document.getElementById("progress-bar"),Oe=document.getElementById("progress-text"),Ke=document.getElementById("submit-test-button");return Nt&&(Nt.style.width=`${Ze}%`,Nt.className=Nt.className.replace(/bg-\w+-\d+/,""),Ze>=100?Nt.classList.add("bg-green-500"):Ze>=80?Nt.classList.add("bg-blue-500"):Ze>=60?Nt.classList.add("bg-yellow-500"):Ze>=40?Nt.classList.add("bg-orange-500"):Nt.classList.add("bg-red-500")),Oe&&(Oe.textContent=`${Ie}/${Ce} questions answered (${Ze}%)`),Ke&&(Ke.disabled=!wt,wt?(Ke.textContent=" Submit Test",Ke.classList.remove("bg-gray-400"),Ke.classList.add("bg-green-600","hover:bg-green-700")):(Ke.textContent=` Complete ${Ce-Ie} more question${Ce-Ie!==1?"s":""}`,Ke.classList.remove("bg-green-600","hover:bg-green-700"),Ke.classList.add("bg-gray-400"))),{answeredCount:Ie,totalQuestions:Ce,percentage:Ze,canSubmit:wt}}catch(Ie){return console.error("Error updating progress display for page:",Ie),{answeredCount:0,totalQuestions:0,percentage:0,canSubmit:!1}}},[n.length,Mt]),Qe=S.useCallback((we,Me)=>{try{console.log("Setting up test page event listeners:",{testType:we,testId:Me});const Ie=setInterval(()=>{Object.keys(a).length>0&&(xt(we,Me),console.log("Auto-saved progress for test:",we,Me))},3e4),Ce=setInterval(()=>{rt(we,Me)},2e3),Ze=st=>{st.key==="Escape"&&window.confirm("Are you sure you want to exit the test? Your progress will be saved.")&&z(),st.ctrlKey&&st.key==="s"&&(st.preventDefault(),xt(we,Me),console.log("Manual save triggered")),st.key},wt=st=>{Object.keys(a).length>0&&(st.preventDefault(),st.returnValue="Your test progress will be saved. Are you sure you want to leave?")},Nt=()=>{document.hidden&&(console.log("Tab became hidden - saving progress"),xt(we,Me))},Oe=()=>{console.log("Window focused - updating progress"),rt(we,Me)},Ke=()=>{console.log("Window blurred - saving progress"),xt(we,Me)};return document.addEventListener("keydown",Ze),window.addEventListener("beforeunload",wt),document.addEventListener("visibilitychange",Nt),window.addEventListener("focus",Oe),window.addEventListener("blur",Ke),window.testIntervals||(window.testIntervals={}),window.testIntervals[`autosave_${we}_${Me}`]=Ie,window.testIntervals[`progress_${we}_${Me}`]=Ce,()=>{clearInterval(Ie),clearInterval(Ce),document.removeEventListener("keydown",Ze),window.removeEventListener("beforeunload",wt),document.removeEventListener("visibilitychange",Nt),window.removeEventListener("focus",Oe),window.removeEventListener("blur",Ke),window.testIntervals&&(delete window.testIntervals[`autosave_${we}_${Me}`],delete window.testIntervals[`progress_${we}_${Me}`])}}catch(Ie){console.error("Error setting up test page event listeners:",Ie)}},[a,xt,rt,z]),It=S.useCallback(()=>{try{const we=Mt(t?.testType),Me=n.length,Ie=we===Me&&Me>0,Ce=document.getElementById("submit-test-button");return Ce&&(Ce.disabled=!Ie,Ce.textContent=Ie?"Submit Test":`Complete ${Me-we} more questions`),{canSubmit:Ie,answeredCount:we,totalQuestions:Me}}catch(we){return console.error("Error updating submit button state for page:",we),{canSubmit:!1,answeredCount:0,totalQuestions:0}}},[t,n.length,Mt]),Tt=S.useCallback((we,Me)=>{try{console.log("Setting up progress tracking for page:",{testType:we,testId:Me});const Ie=setInterval(()=>{rt(we,Me),It()},1e3),Ce=setInterval(()=>{Object.keys(a).length>0&&xt(we,Me)},3e4);return window.testIntervals||(window.testIntervals={}),window.testIntervals[`progress_${we}_${Me}`]=Ie,window.testIntervals[`autosave_${we}_${Me}`]=Ce,()=>{clearInterval(Ie),clearInterval(Ce),window.testIntervals&&(delete window.testIntervals[`progress_${we}_${Me}`],delete window.testIntervals[`autosave_${we}_${Me}`])}}catch(Ie){console.error("Error setting up progress tracking for page:",Ie)}},[a,rt,It,xt]),Rt=S.useCallback(async(we,Me)=>{const Ie=document.getElementById("submit-test-button");try{const Ce=Mt(we),Ze=n.length;if(Ce<Ze){w(`Please answer all ${Ze} questions before submitting.`);return}if(!window.confirm("Are you sure you want to submit your test? This action cannot be undone."))return;Ie&&(Ie.disabled=!0,Ie.innerHTML=`
          <div class="flex items-center justify-center space-x-2">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
            <span>Submitting...</span>
          </div>
        `),await L(we,Me)&&(ee(we,Me),Q(we,Me,a),console.log("Test submitted successfully!"))}catch(Ce){console.error("Error submitting test from page:",Ce),w("Failed to submit test. Please try again."),Ie&&(Ie.disabled=!1,Ie.textContent="Submit Test")}},[Mt,n.length,L,ee,Q,a]),cr=S.useCallback(()=>{try{if(!t)return null;const we=["true_false","multiple_choice","input","matching_type","word_matching"];return we.includes(t.testType)?t.testType:we.includes(t.test_type)?t.test_type:null}catch(we){return console.error("Error getting current test type:",we),null}},[t]),hr=S.useCallback((we,Me)=>{try{console.log("Clearing progress tracking interval:",{testType:we,testId:Me});const Ie=`progress_interval_${we}_${Me}`,Ce=`autosave_interval_${we}_${Me}`;window.testIntervals&&(window.testIntervals[Ie]&&(clearInterval(window.testIntervals[Ie]),delete window.testIntervals[Ie]),window.testIntervals[Ce]&&(clearInterval(window.testIntervals[Ce]),delete window.testIntervals[Ce])),console.log(`Cleared progress tracking intervals for test ${we}_${Me}`)}catch(Ie){console.error("Error clearing progress tracking interval:",Ie)}},[]),Sr={currentTest:t,testQuestions:n,studentAnswers:a,testProgress:o,isTestActive:u,testResults:f,activeTests:g,isLoading:y,error:C,testDetailsModal:_,testStartTime:E,timeElapsed:F,loadTestForPage:V,submitTest:L,navigateToTestResults:Q,navigateBackToCabinet:U,clearTestDataAndReturnToCabinet:z,saveTestProgress:re,getTestProgress:te,clearTestProgress:ee,loadSavedProgressForPage:Y,isTestCompleted:G,markTestCompleted:W,markTestCompletedInUI:(we,Me)=>{console.log("Marking test completed in UI:",{testType:we,testId:Me}),W(we,Me)},getAnsweredQuestionsCount:M,updateSubmitButtonState:I,updateSubmitButtonStateForPage:It,loadStudentActiveTests:ce,loadActiveTests:ce,loadTeacherActiveTests:pe,getTestInfo:je,getTestQuestions:Re,createTest:be,deleteTest:oe,showTestResults:Xe,loadTestResults:Je,loadTestResultsForPage:ft,displayTestResultsOnPage:Ht,setupTestResultsPageEventListeners:Ve,clearTestResultsCache:q,viewTestDetails:at,showTestDetailsModal:gt,closeTestDetailsModal:Te,getQuestionAnswerDisplay:bt,navigateToTest:Ct,hideTestSections:Lt,displayTestOnPage:Yt,renderQuestionsForPage:it,setupTestPageEventListeners:Qe,setupProgressTrackingForPage:Tt,updateProgressDisplayForPage:rt,submitTestFromPage:Rt,getAnsweredQuestionsCountForPage:Mt,getCurrentTestType:cr,saveProgressForPage:xt,clearProgressTrackingInterval:hr,collectTestAnswers:ne,calculateTestScore:zf,checkAnswerCorrectness:Qp,formatStudentAnswerForDisplay:X,getCorrectAnswer:Ov,transformAnswersForSubmission:se,clearAllTestData:()=>{try{console.log("Clearing old test data from localStorage (older than 15 days)...");const Me=Date.now()-360*60*60*1e3,Ie=[];for(let Ce=0;Ce<localStorage.length;Ce++){const Ze=localStorage.key(Ce);if(!(!Ze||!((Ze.startsWith("test_")||Ze.startsWith("student_")||Ze.startsWith("teacher_")||Ze.startsWith("admin_")||Ze.includes("progress")||Ze.includes("answers"))&&!Ze.includes("test_completed_"))))try{const Nt=localStorage.getItem(Ze);if(!Nt){Ie.push(Ze);continue}let Oe=null;if(Nt.startsWith("{")||Nt.startsWith("[")){const Ke=JSON.parse(Nt),st=Ke.timestamp||Ke.lastSaved||Ke.lastTickAt||Ke.createdAt||Ke.updatedAt||Ke.startedAt||Ke.started_at||Ke.created_at;st&&(Oe=new Date(st).getTime())}if(!Oe){const Ke=`${Ze}__ts`,st=localStorage.getItem(Ke);st&&(Oe=parseInt(st)||null)}if(!Oe)continue;Oe<Me&&Ie.push(Ze)}catch{continue}}return Ie.forEach(Ce=>{console.log(`Removing old localStorage key: ${Ce}`),B(Ce)}),console.log(`Cleared ${Ie.length} old test-related items from localStorage`),{success:!0,clearedCount:Ie.length}}catch(we){return console.error("Error clearing old test data:",we),{success:!1,error:we.message}}},setCurrentTest:r,setTestQuestions:s,setStudentAnswers:i,setTestProgress:c,setIsTestActive:d,setTestResults:h,setError:w};return l.jsx(xH.Provider,{value:Sr,children:e})},N2=()=>{const e=S.useContext(xH);if(!e)throw new Error("useTest must be used within a TestProvider");return e},a0e=()=>{const[e,t]=S.useState("en"),n={en:{title:"Privacy Policy",subtitle:"App: MWS Student App",website:"Website: mathayomwatsing.netlify.app",lastUpdated:"Last updated:",introduction:{title:"Introduction",text1:"The MWS Student App is an independent educational project created by Aleksandr Petrov to provide learning tools for students. This app is not officially affiliated with or endorsed by Mathayomwatsing School.",text2:"This Privacy Policy explains how we collect, use, store, and protect personal information. By using this app, you agree to this policy.",dataController:"Independent Developer:",dataControllerText:"Aleksandr Petrov is responsible for managing and protecting personal data collected through the MWS Student App and Website: mathayomwatsing.netlify.app",pdpaTitle:"PDPA Compliance",pdpaText:"This app complies with Thailand's Personal Data Protection Act, B.E. 2562 (PDPA). We are committed to protecting your personal data in accordance with PDPA requirements, including lawful collection, purpose limitation, data minimization, accuracy, security, and your rights as a data subject."},consent:{title:"User Consent",text1:"Users (or their parents/legal guardians if under 18) consent to data collection and usage as described in this policy.",text2:"If you do not agree, please do not use the app. Continued use after updates to this policy constitutes acceptance."},appPurpose:{title:"App Purpose",text:"The MWS Student App (Independent Project) enables students to:",items:["Take online tests and assessments","View test results and academic progress","Track learning achievements and performance","Access educational content and resources"]},childrenPrivacy:{title:"Children's Privacy",text1:"The MWS Student App is designed for students. We do not knowingly collect more data than necessary to provide educational functionality.",text2:"Parents or guardians may contact the app developer to review, delete, or request updates to a student's information. We comply with COPPA (Children's Online Privacy Protection Act), Thailand's PDPA (Personal Data Protection Act, B.E. 2562), and equivalent child-data protection laws applicable in your jurisdiction."},dataCollection:{title:"Data Collection",text:"We collect only the data necessary to provide educational functionality:",accountInfo:{title:"Account Information",text:"Student name, ID, grade, and class (for authentication and personalization)."},testData:{title:"Test Data",text:"Answers, scores, progress, and completion status."},usageData:{title:"Usage Data",text:"App interactions, feature usage, and error logs (to improve functionality and stability)."},important:"Important:",importantText:"This app does not use or share personal data for advertising or commercial purposes. All data collection is strictly for educational and assessment use. We comply with COPPA (Children's Online Privacy Protection Act), Thailand's PDPA (Personal Data Protection Act, B.E. 2562), and equivalent child-data protection laws. This app does not display advertisements or use tracking SDKs."},dataUsage:{title:"How We Use Your Data",text:"Your data is used exclusively for educational purposes:",items:["Deliver and maintain educational services","Track learning progress and achievements","Provide feedback on academic performance","Improve app functionality and user experience","Provide technical support"]},cookies:{title:"Cookies and Local Storage",text1:"This app uses cookies and local storage technologies to provide essential functionality and improve your experience.",essentialCookies:{title:"Essential Cookies and Storage",text:"We use essential cookies and local storage for:",items:["Authentication: Storing login tokens to keep you signed in securely","Session Management: Maintaining your active session during app usage","Test Progress: Saving your test progress locally to prevent data loss","User Preferences: Storing your theme preferences and settings"],note:"These essential cookies and storage are necessary for the app to function properly and cannot be disabled."},storageTypes:{title:"Types of Storage Used",text:"We use the following storage mechanisms:",httpCookies:{title:"HTTP Cookies",text:"Secure, HttpOnly cookies for authentication tokens. These cookies are essential for maintaining your login session and are automatically deleted when you log out."},localStorage:{title:"Local Storage",text:"Browser local storage for user data, test progress, and preferences. This data remains on your device until you clear your browser data or log out."},sessionStorage:{title:"Session Storage",text:"Temporary session storage used as a fallback when local storage is unavailable. This data is automatically cleared when you close your browser."}},cookieManagement:{title:"Managing Cookies and Storage",text:"You can manage cookies and local storage through your browser settings. However, disabling essential cookies or storage may prevent the app from functioning correctly. To clear stored data, you can:",items:["Log out of the app, which will clear authentication tokens","Clear your browser's cookies and local storage through browser settings","Contact us at aleksandr.p@mws.ac.th to request data deletion"]},thirdPartyCookies:{title:"Third-Party Cookies",text:"This app does not use third-party cookies for advertising or tracking purposes. We do not share cookie data with third parties."},consent:{title:"Cookie Consent",text:"By using this app, you consent to the use of essential cookies and local storage as described in this policy. These are necessary for the app's core functionality and security."}},dataStorage:{title:"Data Storage & Security",text1:"Data is stored securely, locally on devices, or on encrypted cloud servers (Supabase). All transmissions are encrypted.",text2:"Technical and organizational measures are applied to prevent unauthorized access, alteration, disclosure, or destruction."},dataHosting:{title:"Data Hosting",text1:"The app's data is securely stored using trusted cloud infrastructure (Supabase). These services comply with global security standards including GDPR and ISO 27001.",text2:"All data hosting providers are contractually obligated to maintain the same level of data protection and security as outlined in this Privacy Policy. Data is stored in secure, encrypted databases with regular backups and monitoring."},dataSharing:{title:"Data Sharing and Disclosure",text:"We do not sell, rent, or trade user data. Data may be shared only:",schoolAdmin:{title:"Parents/Guardians:",text:"With parents/guardians for their childs data review."},legal:{title:"Legal Requirements:",text:"For legal obligations, if required by law or in response to valid legal requests."},serviceProviders:{title:"Service Providers:",text:"With trusted service providers (bound by contracts to protect data and use it only for specified purposes)."}},academicIntegrity:{title:"Academic Integrity",text:"The app includes anti-cheating measures to ensure fair assessment. This includes monitoring app state changes, preventing unauthorized actions during tests, and detecting suspicious behavior. By using this app, you agree to maintain academic honesty and integrity."},userRights:{title:"Your Rights",text:"Users have the right to:",items:["Access, correct, or delete personal data","Object to processing of personal data","Request data portability"],contact:"To exercise these rights, please contact app developer at aleksandr.p@mws.ac.th",pdpaTitle:"Under Thailand's PDPA, you have the right to:",pdpaItems:["Access and obtain a copy of your personal data","Request correction of any incomplete or inaccurate information","Request deletion or suspension of use of your personal data","Withdraw consent at any time (where applicable)","Lodge a complaint with the Personal Data Protection Committee (PDPC) if you believe your data has been mishandled"]},dataRetention:{title:"Data Retention",text:"We retain personal data only as long as necessary to provide educational services and comply with legal obligations. Academic records may be retained according to educational data retention requirements."},changes:{title:"Changes to This Privacy Policy",text:'We may update this Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date. You are advised to review this Privacy Policy periodically for any changes.'},contact:{title:"Contact",text:"For privacy inquiries, contact:",school:"Aleksandr Petrov",email:"aleksandr.p@mws.ac.th"},backToLogin:" Back to Login"},th:{title:"",subtitle:": MWS Student App",website:": mathayomwatsing.netlify.app",lastUpdated:":",introduction:{title:"",text1:"MWS Student App  Aleksandr Petrov  ",text2:"    ",dataController:":",dataControllerText:"Aleksandr Petrov  MWS Student App : mathayomwatsing.netlify.app",pdpaTitle:" PDPA",pdpaText:" .. 2562 (PDPA)  PDPA      "},consent:{title:"",text1:" (/ 18 ) ",text2:"  "},appPurpose:{title:"",text:"MWS Student App () :",items:["","","",""]},childrenPrivacy:{title:"",text1:" ",text2:"    COPPA ()  .. 2562 (PDPA) "},dataCollection:{title:"",text:":",accountInfo:{title:"",text:"    ()"},testData:{title:"",text:"   "},usageData:{title:"",text:"   ()"},important:":",importantText:"   COPPA ()  .. 2562 (PDPA)   SDK "},dataUsage:{title:"",text:":",items:["","","","",""]},cookies:{title:"",text1:"",essentialCookies:{title:"",text:":",items:[": ",": ",": ",": "],note:""},storageTypes:{title:"",text:":",httpCookies:{title:" HTTP",text:" HttpOnly  "},localStorage:{title:"",text:"   "},sessionStorage:{title:"",text:" "}},cookieManagement:{title:"",text:"    :",items:[" ",""," aleksandr.p@mws.ac.th "]},thirdPartyCookies:{title:"",text:" "},consent:{title:"",text:"  "}},dataStorage:{title:"",text1:"  (Supabase) ",text2:"   "},dataHosting:{title:"",text1:" (Supabase)  GDPR  ISO 27001",text2:" "},dataSharing:{title:"",text:"   :",schoolAdmin:{title:"/:",text:"/"},legal:{title:":",text:" "},serviceProviders:{title:":",text:" ()"}},academicIntegrity:{title:"",text:"     "},userRights:{title:"",text:":",items:["  ","",""],contact:"  aleksandr.p@mws.ac.th",pdpaTitle:" .. 2562 (PDPA)  :",pdpaItems:["","",""," ()"," (PDPC) "]},dataRetention:{title:"",text:" "},changes:{title:"",text:'   "" '},contact:{title:"",text:" :",school:"Aleksandr Petrov",email:"aleksandr.p@mws.ac.th"},backToLogin:" "}}[e],s=new Date().toLocaleDateString(e==="th"?"th-TH":"en-US",{year:"numeric",month:"long",day:"numeric"});return l.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"max-w-4xl mx-auto",children:[l.jsx("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 mb-8",children:l.jsx("div",{className:"px-6 py-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:n.title}),l.jsx("p",{className:"text-sm text-gray-600",children:n.subtitle}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:n.website}),l.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[n.lastUpdated," ",s]})]}),l.jsxs("div",{className:"flex gap-2 ml-4",children:[l.jsx("button",{onClick:()=>t("en"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="en"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"English"}),l.jsx("button",{onClick:()=>t("th"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${e==="th"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:""})]})]})})}),l.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-6 sm:p-8 space-y-8",children:[l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.introduction.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.introduction.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.introduction.text2}),l.jsx("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm leading-6 text-gray-700",children:[l.jsx("span",{className:"font-semibold",children:n.introduction.dataController})," ",n.introduction.dataControllerText]})}),l.jsx("div",{className:"mt-4 bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm leading-6 text-blue-800",children:[l.jsxs("span",{className:"font-semibold",children:[n.introduction.pdpaTitle,":"]})," ",n.introduction.pdpaText]})})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.consent.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.consent.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.consent.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.appPurpose.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.appPurpose.text}),l.jsx("ul",{className:"list-disc list-inside mt-3 space-y-2 text-base leading-7 text-gray-700 ml-4",children:n.appPurpose.items.map((a,i)=>l.jsx("li",{children:a},i))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.childrenPrivacy.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.childrenPrivacy.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.childrenPrivacy.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataCollection.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.dataCollection.text}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.dataCollection.accountInfo.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.dataCollection.accountInfo.text})]}),l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.dataCollection.testData.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.dataCollection.testData.text})]}),l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.dataCollection.usageData.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.dataCollection.usageData.text})]})]}),l.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:l.jsxs("p",{className:"text-sm leading-6 text-yellow-800",children:[l.jsx("span",{className:"font-semibold",children:n.dataCollection.important})," ",n.dataCollection.importantText]})})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataUsage.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.dataUsage.text}),l.jsx("ul",{className:"list-disc list-inside space-y-2 text-base leading-7 text-gray-700 ml-4",children:n.dataUsage.items.map((a,i)=>l.jsx("li",{children:a},i))})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.cookies.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.cookies.text1}),l.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.cookies.essentialCookies.title}),l.jsx("p",{className:"text-sm text-gray-700 mb-2",children:n.cookies.essentialCookies.text}),l.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700 ml-4",children:n.cookies.essentialCookies.items.map((a,i)=>l.jsx("li",{children:a},i))}),l.jsx("p",{className:"text-sm text-gray-700 mt-2 italic",children:n.cookies.essentialCookies.note})]}),l.jsxs("div",{className:"space-y-4 mb-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900",children:n.cookies.storageTypes.title}),l.jsx("p",{className:"text-sm text-gray-700 mb-3",children:n.cookies.storageTypes.text}),l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:n.cookies.storageTypes.httpCookies.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.cookies.storageTypes.httpCookies.text})]}),l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:n.cookies.storageTypes.localStorage.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.cookies.storageTypes.localStorage.text})]}),l.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:n.cookies.storageTypes.sessionStorage.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.cookies.storageTypes.sessionStorage.text})]})]}),l.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.cookies.cookieManagement.title}),l.jsx("p",{className:"text-sm text-gray-700 mb-2",children:n.cookies.cookieManagement.text}),l.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-700 ml-4",children:n.cookies.cookieManagement.items.map((a,i)=>l.jsx("li",{children:a},i))})]}),l.jsxs("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.cookies.thirdPartyCookies.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.cookies.thirdPartyCookies.text})]}),l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:n.cookies.consent.title}),l.jsx("p",{className:"text-sm text-gray-700",children:n.cookies.consent.text})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataStorage.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataStorage.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.dataStorage.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataHosting.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataHosting.text1}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:n.dataHosting.text2})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataSharing.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataSharing.text}),l.jsxs("ul",{className:"list-disc list-inside space-y-2 text-base leading-7 text-gray-700 ml-4 mt-4",children:[l.jsxs("li",{children:[l.jsx("strong",{children:n.dataSharing.schoolAdmin.title})," ",n.dataSharing.schoolAdmin.text]}),l.jsxs("li",{children:[l.jsx("strong",{children:n.dataSharing.legal.title})," ",n.dataSharing.legal.text]}),l.jsxs("li",{children:[l.jsx("strong",{children:n.dataSharing.serviceProviders.title})," ",n.dataSharing.serviceProviders.text]})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.academicIntegrity.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.academicIntegrity.text})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.userRights.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mb-4",children:n.userRights.text}),l.jsx("ul",{className:"list-disc list-inside space-y-2 text-base leading-7 text-gray-700 ml-4",children:n.userRights.items.map((a,i)=>l.jsx("li",{children:a},i))}),l.jsx("p",{className:"text-base leading-7 text-gray-700 mt-4",children:e==="en"?l.jsxs(l.Fragment,{children:["To exercise these rights, please contact app developer at"," ",l.jsx("a",{href:"mailto:aleksandr.p@mws.ac.th",className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"aleksandr.p@mws.ac.th"})]}):l.jsxs(l.Fragment,{children:[" "," ",l.jsx("a",{href:"mailto:aleksandr.p@mws.ac.th",className:"text-blue-600 hover:text-blue-800 underline font-medium",children:"aleksandr.p@mws.ac.th"})]})}),l.jsxs("div",{className:"mt-6 bg-blue-50 border-l-4 border-blue-400 rounded-lg p-5",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:n.userRights.pdpaTitle}),l.jsx("ul",{className:"list-disc list-inside space-y-2 text-sm leading-6 text-gray-700 ml-2",children:n.userRights.pdpaItems.map((a,i)=>l.jsx("li",{children:a},i))})]})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.dataRetention.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.dataRetention.text})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.changes.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.changes.text})]}),l.jsxs("section",{children:[l.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-4",children:n.contact.title}),l.jsx("p",{className:"text-base leading-7 text-gray-700",children:n.contact.text}),l.jsxs("div",{className:"mt-4 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[l.jsx("p",{className:"text-base text-gray-700",children:l.jsx("strong",{children:n.contact.school})}),l.jsx("p",{className:"text-sm text-gray-600 mt-2",children:l.jsx("a",{href:`mailto:${n.contact.email}`,className:"text-blue-600 hover:text-blue-800 underline font-medium",children:n.contact.email})})]})]}),l.jsx("div",{className:"pt-6 border-t border-gray-200 mt-8",children:l.jsx(vB,{to:"/login",className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-medium",children:n.backToLogin})})]})]})})},i0e=({children:e,className:t="",asBackground:r=!1})=>{const{theme:n,isCyberpunk:s}=Ra(),a=s?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white",i=s?Da("cyberpunk").background:{},o=r?`${a} min-h-screen ${t}`:t;return l.jsx("div",{className:o,style:i,children:e})},Uy=window.location.hostname==="mathayomwatsing.netlify.app";Uy&&(console.log=()=>{},console.debug=()=>{},console.info=()=>{},console.warn=()=>{});const ye={debug:(e,...t)=>{Uy||console.log(e,...t)},warn:(e,...t)=>{Uy||console.warn(e,...t)},error:(e,...t)=>{console.error(e,...t)},info:(e,...t)=>{Uy||console.info(e,...t)},isEnabled:()=>!Uy},o0e=({visible:e,onClose:t})=>{const{theme:r,setTheme:n,isCyberpunk:s,isLight:a,isKpop:i,themeClasses:o}=Ra(),c=Da(r),u=d=>{d!==r&&n(d)};return e?l.jsx(Wo,{children:e&&l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[l.jsx(vt.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black bg-opacity-50"}),l.jsxs(vt.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:`relative w-full max-w-md mx-4 rounded-lg shadow-xl ${s?Gt(0).className:i?dr(0).className:"bg-white border border-gray-200"}`,style:s?{...Gt(0).style,...c.glow}:i?{...dr(0).style}:{},children:[l.jsx("div",{className:`px-6 py-4 border-b ${s?"border-cyan-400":i?"border-violet-500":"border-gray-200"}`,style:s?{borderColor:fe.cyan,borderBottomWidth:"2px"}:i?{borderColor:ze.primary,borderBottomWidth:"2px"}:{},children:l.jsx("h2",{className:`text-2xl font-bold ${s?`${o.headerText} tracking-wider`:i?"text-violet-600":"text-gray-900"}`,style:s||i?c.textShadow:{},children:s?"SETTINGS":"Settings"})}),l.jsx("div",{className:"px-6 py-6",children:l.jsxs("div",{children:[l.jsx("h3",{className:`text-lg font-semibold mb-4 ${s?o.text:i?"text-violet-700":"text-gray-900"}`,children:s?"THEME":"Theme"}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:()=>u("light"),className:`w-full p-4 rounded-lg border-2 transition-all ${a?s?"border-cyan-400":"bg-blue-50 border-blue-500":s?"border-gray-700 hover:border-cyan-400":"bg-white border-gray-300 hover:border-gray-400"}`,style:a&&s?{backgroundColor:fe.black,borderColor:fe.cyan,borderWidth:"2px"}:s?{backgroundColor:fe.black,borderColor:fe.cyan,borderWidth:"2px"}:{},children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-5 h-5 rounded-full border-2 ${a?s?"bg-cyan-400 border-cyan-400":"bg-blue-500 border-blue-500":s?"border-gray-600":"border-gray-400"}`,children:a&&l.jsx("div",{className:`w-full h-full rounded-full ${s?"bg-cyan-400":"bg-blue-500"}`})}),l.jsx("span",{className:`font-medium ${a?s?"text-cyan-400":"text-blue-600":s?"text-gray-400":"text-gray-600"}`,children:s?"LIGHT THEME":"Light Theme"})]}),a&&l.jsx("span",{className:`text-sm ${s?"text-cyan-400":"text-blue-600"}`,children:s?"ACTIVE":"Active"})]})}),l.jsx("button",{onClick:()=>u("cyberpunk"),className:`w-full p-4 rounded-lg border-2 transition-all ${s?"border-cyan-400":i?"bg-violet-50 border-violet-300 hover:border-violet-400":a?"bg-gray-50 border-gray-300 hover:border-gray-400":"bg-white border-gray-300 hover:border-gray-400"}`,style:s?{backgroundColor:fe.black,borderColor:fe.cyan,borderWidth:"2px",...c.glow}:{},children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-5 h-5 rounded-full border-2 ${s?"bg-cyan-400 border-cyan-400":"border-gray-400"}`,children:s&&l.jsx("div",{className:"w-full h-full rounded-full bg-cyan-400"})}),l.jsx("span",{className:`font-medium ${s?"text-cyan-400":i?"text-violet-600":"text-gray-600"}`,style:s?c.textShadow:{},children:s?"CYBERPUNK THEME":"Cyberpunk Theme"})]}),s&&l.jsx("span",{className:"text-sm text-cyan-400",children:"ACTIVE"})]})}),l.jsx("button",{onClick:()=>u("kpop"),className:`w-full p-4 rounded-lg border-2 transition-all ${i?"border-violet-500":s?"bg-black border-gray-700 hover:border-cyan-400":a?"bg-gray-50 border-gray-300 hover:border-gray-400":"bg-white border-gray-300 hover:border-gray-400"}`,style:i?{backgroundColor:ze.background,borderColor:ze.primary,borderWidth:"2px",...c.shadow}:s?{backgroundColor:fe.black,borderColor:fe.cyan,borderWidth:"2px"}:{},children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:`w-5 h-5 rounded-full border-2 ${i?"bg-violet-500 border-violet-500":"border-gray-400"}`,children:i&&l.jsx("div",{className:"w-full h-full rounded-full bg-violet-500"})}),l.jsx("span",{className:`font-medium ${i?"text-violet-600":s?"text-gray-400":"text-gray-600"}`,style:i?c.textShadow:{},children:i?"K-POP THEME":"K-Pop Theme"})]}),i&&l.jsx("span",{className:"text-sm text-violet-600",children:"Active"})]})})]})]})}),l.jsx("div",{className:`px-6 py-4 border-t ${s?"border-cyan-400":i?"border-violet-500":"border-gray-200"}`,style:s?{borderColor:fe.cyan,borderTopWidth:"2px"}:i?{borderColor:ze.primary,borderTopWidth:"2px"}:{},children:l.jsx("button",{onClick:t,className:`w-full py-2 px-4 rounded-lg font-medium transition-colors ${s?"bg-cyan-400 text-black hover:bg-cyan-300":i?"bg-violet-500 text-white hover:bg-violet-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:s?"CLOSE":"Close"})})]})]})}):null},E2=({testResults:e,onBackToCabinet:t,onRetakeTest:r,isLoading:n=!1,caught_cheating:s=!1,visibility_change_times:a=0,themeClasses:i,isCyberpunk:o})=>{const[c,u]=S.useState(!1),{theme:d,isKpop:f}=Ra(),h=Da(d),g=o!==void 0?o:d==="cyberpunk",p=()=>{u(!0),t&&t()};if(!e||!e.showResults)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-gray-500",children:"No test results to display"})})});const{testInfo:y,testType:v,score:C,totalQuestions:w,percentage:_,passed:T,questionAnalysis:E,timestamp:A}=e,F=D=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching"})[D]||D,j=D=>D>=80?"text-green-600 bg-green-50":D>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",P=D=>D?"text-green-600 bg-green-100 border-green-200":"text-red-600 bg-red-100 border-red-200";return n?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading test results..."})]})}):l.jsxs("div",{className:`${g||f?"bg-black":"bg-gray-50"} py-8 overflow-y-auto`,style:g?h.background:f?h.backgroundSecondary:{},children:[l.jsx(Fa,{isOpen:c,onClose:()=>{},title:"Navigating",size:"small",children:l.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[l.jsx(pn,{size:"lg",className:"mb-3"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Returning to cabinet..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait"})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs(vt.div,{className:`rounded-lg shadow-lg p-6 mb-6 border-2 ${g?Gt(0).className:f?dr(0).className:"bg-white"}`,style:g?{...Gt(0).style,...h.glowRed}:f?{...dr(0).style,borderColor:ze.primary,...h.glow}:{},initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(e?.caught_cheating||s)&&l.jsx("div",{className:`mb-6 border-2 rounded-lg ${g||f?"border":"border-red-500 bg-red-50"}`,style:g?{backgroundColor:fe.black,borderColor:fe.red,...h.glowRed}:f?{backgroundColor:ze.background,borderColor:ze.error,...h.glowRed}:{},children:l.jsxs("div",{className:"flex items-start space-x-3 p-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:`h-6 w-6 ${g||f?"":"text-red-600"}`,style:g?{color:fe.red}:f?{color:ze.error}:{},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:g||f?"":"text-red-700",style:g?{...h.textRed,fontFamily:"monospace"}:f?{color:ze.error,...h.textShadowRed}:{},children:"Suspicious activity was detected during this test. Your teacher has been notified."})})]})}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-3xl font-bold mb-2 ${g?"":"text-gray-900"}`,style:g?{...h.textCyan,fontFamily:"monospace"}:f?{...h.headerText}:{},children:g?"TEST RESULTS":"Test Results"}),l.jsx("h2",{className:`text-xl mb-1 ${g?"":"text-gray-700"}`,style:g?{...h.textYellow,fontFamily:"monospace"}:f?{...h.headerText}:{},children:y?.test_name||"Test"}),l.jsxs("p",{className:`text-sm ${g?"":"text-gray-500"}`,style:g?{color:fe.cyan,fontFamily:"monospace"}:{},children:[F(v),"  Completed on ",new Date(A).toLocaleDateString()]})]}),l.jsx("div",{className:"text-right",children:l.jsx("div",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium border ${g?"border":P(T)}`,style:g?{backgroundColor:fe.black,borderColor:T?fe.green:fe.red,color:T?fe.green:fe.red,fontFamily:"monospace",...T?h.textShadowGreen:h.textShadowRed}:{},children:T?" PASSED":" FAILED"})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:`text-center p-4 rounded-lg border ${g?Gt(1).className:f?dr(1).className:"bg-gray-50"}`,style:g?{...Gt(1).style,...h.glow}:f?{...dr(1).style,borderColor:ze.primary,...h.glow}:{},children:[l.jsx("div",{className:`text-3xl font-bold ${g?"":"text-gray-900"}`,style:g?{...h.textCyan,fontFamily:"monospace"}:{},children:C}),l.jsx("div",{className:`text-sm ${g?"":"text-gray-600"}`,style:g?{color:fe.yellow,fontFamily:"monospace"}:{},children:"Correct Answers"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border ${g?Gt(2).className:f?dr(2).className:"bg-gray-50"}`,style:g?{...Gt(2).style,...h.glow}:f?{...dr(2).style,borderColor:ze.primary,...h.glow}:{},children:[l.jsx("div",{className:`text-3xl font-bold ${g?"":"text-gray-900"}`,style:g?{...h.textCyan,fontFamily:"monospace"}:{},children:w}),l.jsx("div",{className:`text-sm ${g?"":"text-gray-600"}`,style:g?{color:fe.yellow,fontFamily:"monospace"}:{},children:"Total Questions"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border ${g?Gt(3).className:f?dr(0).className:"bg-gray-50"}`,style:g?{...Gt(3).style,...h.glow}:f?{...dr(0).style,borderColor:ze.primary,...h.glow}:{},children:[l.jsxs("div",{className:`text-3xl font-bold ${g?"":j(_).split(" ")[0]}`,style:g?{...h.textCyan,fontFamily:"monospace"}:{},children:[_,"%"]}),l.jsx("div",{className:`text-sm ${g?"":"text-gray-600"}`,style:g?{color:fe.yellow,fontFamily:"monospace"}:{},children:"Score"})]})]}),l.jsx("div",{className:`w-full rounded-full h-3 mb-6 border ${g?"bg-gray-800 border-cyan-400/50":f?"bg-black border-pink-500/50":"bg-gray-200"}`,style:g?h.glow:f?{...h.glow}:{},children:l.jsx(vt.div,{className:`h-3 rounded-full ${g||f?"":j(_).split(" ")[1]}`,style:g?{background:`linear-gradient(to right, ${fe.yellow}, ${fe.cyan})`,boxShadow:`0 0 10px ${fe.cyan}`}:f?{background:`linear-gradient(to right, ${ze.primary}, ${ze.secondary})`,boxShadow:`0 0 10px ${ze.primary}`}:{},initial:{width:0},animate:{width:`${_}%`},transition:{duration:1,ease:"easeOut"}})})]}),v!=="matching_type"&&v!=="word_matching"&&l.jsxs(vt.div,{className:`rounded-lg shadow-lg p-6 border-2 ${g?Gt(1).className:f?dr(1).className:"bg-white"}`,style:g?{...Gt(1).style,...h.glow}:f?{...dr(1).style,borderColor:ze.primary,...h.glow}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[l.jsx("h3",{className:`text-2xl font-bold mb-6 ${g?"":"text-gray-900"}`,style:g?{...h.textCyan,fontFamily:"monospace"}:f?{...h.headerText}:{},children:g?"QUESTION REVIEW":"Question Review"}),l.jsx("div",{className:"space-y-4",children:E.map((D,B)=>l.jsxs(vt.div,{className:`p-4 rounded-lg border-2 ${g||f?"border":D.isCorrect?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,style:g?{backgroundColor:fe.black,borderColor:D.isCorrect?fe.green:fe.red,boxShadow:D.isCorrect?h.glow.boxShadow:h.glowRed.boxShadow}:f?{backgroundColor:ze.background,borderColor:D.isCorrect?ze.success:ze.error,boxShadow:D.isCorrect?h.glow.boxShadow:h.glowRed.boxShadow}:{},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:B*.1},children:[l.jsxs("div",{className:"flex items-start justify-between mb-3",children:[l.jsxs("h4",{className:`text-lg font-semibold ${g?"":"text-gray-900"}`,style:g?{...h.textCyan,fontFamily:"monospace"}:{},children:["Question ",D.questionNumber]}),l.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium border ${g?"border":D.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,style:g?{backgroundColor:fe.black,borderColor:D.isCorrect?fe.green:fe.red,color:D.isCorrect?fe.green:fe.red,fontFamily:"monospace",...D.isCorrect?h.textShadowGreen:h.textShadowRed}:{},children:D.isCorrect?" Correct":" Incorrect"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:`font-medium mb-2 ${g?"":"text-gray-800"}`,style:g?{...h.textYellow,fontFamily:"monospace"}:{},children:"Question:"}),l.jsx("p",{className:`p-3 rounded border ${g?"border":"text-gray-700 bg-gray-100"}`,style:g?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...h.textShadow}:{},children:D.question})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("p",{className:`font-medium mb-2 ${g?"":"text-gray-800"}`,style:g?{...h.textYellow,fontFamily:"monospace"}:{},children:"Your Answer:"}),l.jsx("p",{className:`p-3 rounded border ${g?"border":D.isCorrect?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,style:g?{backgroundColor:fe.black,borderColor:D.isCorrect?fe.green:fe.red,color:D.isCorrect?fe.green:fe.red,fontFamily:"monospace",...D.isCorrect?h.textShadowGreen:h.textShadowRed}:{},children:D.userAnswer||"No answer provided"})]}),l.jsxs("div",{children:[l.jsx("p",{className:`font-medium mb-2 ${g?"":"text-gray-800"}`,style:g?{...h.textYellow,fontFamily:"monospace"}:{},children:"Correct Answer:"}),l.jsx("p",{className:`p-3 rounded border ${g?"border":"bg-blue-100 text-blue-800"}`,style:g?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...h.textShadow}:{},children:D.correctAnswer})]})]})]},B))})]}),l.jsxs(vt.div,{className:`rounded-lg shadow-lg p-6 mt-6 border-2 ${g?Gt(0).className:f?dr(0).className:"bg-white"}`,style:g?{...Gt(0).style,...h.glow}:f?{...dr(0).style,borderColor:ze.primary,...h.glow}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:[l.jsx("h3",{className:`text-2xl font-bold mb-4 ${g?"":"text-gray-900"}`,style:g?{color:fe.cyan,fontFamily:"monospace",...h.textShadow}:f?{...h.headerText}:{},children:g?"SUMMARY STATISTICS":"Summary Statistics"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:`text-center p-4 rounded-lg border-2 ${g?Gt(2).className:f?dr(1).className:"bg-blue-50"}`,style:g?{...Gt(2).style,...h.glow}:f?{...dr(1).style,borderColor:ze.primary,...h.glow}:{},children:[l.jsx("div",{className:`text-2xl font-bold ${g?"":"text-blue-600"}`,style:g?{color:fe.cyan,fontFamily:"monospace",...h.textShadow}:{},children:E.filter(D=>D.isCorrect).length}),l.jsx("div",{className:`text-sm ${g?"":"text-blue-600"}`,style:g?{color:fe.cyan,fontFamily:"monospace"}:{},children:g?"CORRECT":"Correct"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border-2 ${g?Gt(0).className:f?dr(2).className:"bg-red-50"}`,style:g?{...Gt(0).style,...h.glowRed}:f?{...dr(2).style,borderColor:ze.error,...h.glowRed}:{},children:[l.jsx("div",{className:`text-2xl font-bold ${g?"":"text-red-600"}`,style:g?{color:fe.red,fontFamily:"monospace",...h.textShadowRed}:{},children:E.filter(D=>!D.isCorrect).length}),l.jsx("div",{className:`text-sm ${g?"":"text-red-600"}`,style:g?{color:fe.red,fontFamily:"monospace"}:{},children:g?"INCORRECT":"Incorrect"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border-2 ${g?Gt(1).className:f?dr(0).className:"bg-gray-50"}`,style:g?{...Gt(1).style,...h.glow}:f?{...dr(0).style,borderColor:ze.primary,...h.glow}:{},children:[l.jsxs("div",{className:`text-2xl font-bold ${g?"":"text-gray-600"}`,style:g?{color:fe.cyan,fontFamily:"monospace",...h.textShadow}:{},children:[Math.round(E.filter(D=>D.isCorrect).length/w*100),"%"]}),l.jsx("div",{className:`text-sm ${g?"":"text-gray-600"}`,style:g?{color:fe.cyan,fontFamily:"monospace"}:{},children:g?"ACCURACY":"Accuracy"})]}),l.jsxs("div",{className:`text-center p-4 rounded-lg border-2 ${g?Gt(2).className:f?dr(1).className:"bg-purple-50"}`,style:g?{...Gt(2).style,...h.glow}:f?{...dr(1).style,borderColor:ze.secondary,...h.glowPurple}:{},children:[l.jsx("div",{className:`text-2xl font-bold ${g?"":"text-purple-600"}`,style:g?{color:fe.cyan,fontFamily:"monospace",...h.textShadow}:{},children:w}),l.jsx("div",{className:`text-sm ${g?"":"text-purple-600"}`,style:g?{color:fe.cyan,fontFamily:"monospace"}:{},children:g?"TOTAL":"Total"})]})]})]}),l.jsx(vt.div,{className:`rounded-lg shadow-lg p-6 mt-6 border-2 ${g?Gt(0).className:f?dr(0).className:"bg-white"}`,style:g?{...Gt(0).style,...h.glowRed}:f?{...dr(0).style,borderColor:ze.primary,...h.glow}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:l.jsx("div",{className:"flex justify-center",children:l.jsx(ht,{onClick:p,variant:"primary",className:"flex items-center gap-2",disabled:c,children:c?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white",className:"mr-2"}),"Navigating..."]}):" Back to Cabinet"})})})]})]})},l0e=["/login","/privacy","/privacy-policy"],c0e=["privacy","terms","legal"],u0e=e=>{const t=e.toLowerCase();return l0e.some(r=>t===r||t.startsWith(`${r}/`))?!0:c0e.some(r=>t.includes(r))};let d0e=class{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data"}getToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setToken(t){localStorage.setItem(this.tokenKey,t)}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){this.setToken(t),this.setUserData({role:r}),localStorage.setItem("accessToken",t)}isAuthenticated(){const t=this.getToken();if(!t)return!1;try{const r=JSON.parse(atob(t.split(".")[1])),n=Date.now()/1e3;return r.exp>n}catch(r){return console.error("Error decoding token:",r),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}clearAuth(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey)}logout(){this.clearAuth(),window.location.href="/login"}getAuthHeader(){const t=this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401){if(await this.refreshToken())return s.Authorization=`Bearer ${this.getToken()}`,fetch(t,{...r,headers:s});throw this.logout(),new Error("Authentication failed")}return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json();return this.setToken(n.accessToken),n.refreshToken&&this.setRefreshToken(n.refreshToken),!0}}catch(r){console.error("Error refreshing token:",r)}return!1}getAccessToken(){return this.getToken()}decodeToken(t){try{return JSON.parse(atob(t.split(".")[1]))}catch(r){return console.error("Error decoding token:",r),null}}init(){if(!this.isAuthenticated()){const t=window.location.pathname||"/",r=u0e(t);return console.info("[TokenManager:template] Unauthenticated visitor on path:",t,"public?",r),r||(window.location.href="/login"),!1}return this.setupTokenRefresh(),!0}setupTokenRefresh(){setInterval(async()=>{this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}};const Zp=new d0e;window.tokenManager=Zp;typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{Zp.init()}):Zp.init());const vH=async(e,t,r,n,s=!1)=>{try{console.log(" Fetching teacher student results:",{teacherId:e,grade:t,className:r,termId:n,forceRefresh:s});const a=s?`&_t=${Date.now()}`:"",o=await(await Zp.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-student-results?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}${a}`,{cache:s?"no-cache":"default",headers:s?{"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache"}:{}})).json();if(o.success)return console.log(" Teacher student results loaded:",o.results.length,"results"),console.log(" Students loaded:",o.students?.length||0,"students"),{success:!0,results:o.results,students:o.students||[],count:o.results.length,student_count:o.student_count||0};throw new Error(o.error||"Failed to load teacher student results")}catch(a){return console.error("Error fetching teacher student results:",a),{success:!1,error:a.message,results:[]}}},bH=async(e,t)=>{try{console.log(" Fetching student results view:",{studentId:e,academicPeriodId:t});const r=t?`&academic_period_id=${t}`:"",s=await(await Zp.makeAuthenticatedRequest(`/.netlify/functions/get-student-results-view?student_id=${e}${r}`)).json();if(s.success)return console.log(" Student results view loaded:",s.results.length,"results"),{success:!0,results:s.results,count:s.results.length};throw new Error(s.error||"Failed to load student results view")}catch(r){return console.error("Error fetching student results view:",r),{success:!1,error:r.message,results:[]}}},f0e=async(e,t,r,n)=>{try{console.log(" Fetching class summary:",{teacherId:e,grade:t,className:r,academicPeriodId:n});const a=await(await Zp.makeAuthenticatedRequest(`/.netlify/functions/get-class-summary?teacher_id=${e}&grade=${t}&class=${r}&academic_period_id=${n}`)).json();if(a.success)return console.log(" Class summary loaded:",a.summary),{success:!0,summary:a.summary,hasData:!!a.summary};throw new Error(a.error||"Failed to load class summary")}catch(s){return console.error("Error fetching class summary:",s),{success:!1,error:s.message,summary:null}}},h0e=async(e,t,r,n,s={})=>{try{const a=await vH(e,t,r,n);if(!a.success)return a;let i=a.results;return s.subject&&(i=i.filter(o=>o.subject&&o.subject.toLowerCase().includes(s.subject.toLowerCase()))),s.testType&&(i=i.filter(o=>o.test_type===s.testType)),s.minScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100>=s.minScore)),s.maxScore!==void 0&&(i=i.filter(o=>o.score/o.max_score*100<=s.maxScore)),s.passed!==void 0&&(i=i.filter(o=>o.score>=o.passing_score===s.passed)),{success:!0,results:i,count:i.length,originalCount:a.results.length}}catch(a){return console.error("Error filtering teacher student results:",a),{success:!1,error:a.message,results:[]}}},m0e=async(e,t,r={})=>{try{const n=await bH(e,t);if(!n.success)return n;let s=n.results;return r.subject&&(s=s.filter(a=>a.subject&&a.subject.toLowerCase().includes(r.subject.toLowerCase()))),r.testType&&(s=s.filter(a=>a.test_type===r.testType)),r.semester&&(s=s.filter(a=>a.semester===r.semester)),r.passed!==void 0&&(s=s.filter(a=>a.score>=a.passing_score===r.passed)),{success:!0,results:s,count:s.length,originalCount:n.results.length}}catch(n){return console.error("Error filtering student results view:",n),{success:!1,error:n.message,results:[]}}},g0e={getTeacherStudentResults:vH,getStudentResultsView:bH,getClassSummary:f0e,getTeacherStudentResultsFiltered:h0e,getStudentResultsViewFiltered:m0e},p0e=({testType:e,testId:t,isShuffled:r,allowedTime:n,onSave:s,onCancel:a,canEdit:i=!0})=>{const[o,c]=S.useState(!1),[u,d]=S.useState(r||!1),[f,h]=S.useState(!!n),[g,p]=S.useState(n?Math.floor(n/60):""),[y,v]=S.useState(!1);S.useEffect(()=>{d(r||!1)},[r]),S.useEffect(()=>{h(!!n),p(n?Math.floor(n/60):"")},[n]),S.useEffect(()=>{!i&&o&&c(!1)},[i,o]);const C=async()=>{v(!0);try{const _=f&&g?Math.floor(parseFloat(g)*60):null,T={};["input","true_false","multiple_choice"].includes(e)&&(T.is_shuffled=u),T.allowed_time=_,await s(T),c(!1)}catch(_){console.error("Error saving settings:",_),alert("Failed to save settings. Please try again.")}finally{v(!1)}},w=()=>{d(r||!1),h(!!n),p(n?Math.floor(n/60):""),c(!1)};return o?l.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[["input","true_false","multiple_choice"].includes(e)&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"is_shuffled",checked:u,onChange:_=>d(_.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("label",{htmlFor:"is_shuffled",className:"text-sm font-medium text-gray-700",children:"Shuffle questions"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",id:"enable_timer",checked:f,onChange:_=>{h(_.target.checked),_.target.checked||p("")},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("label",{htmlFor:"enable_timer",className:"text-sm font-medium text-gray-700",children:"Enable timer"})]}),f&&l.jsxs("div",{className:"ml-6 flex items-center space-x-2",children:[l.jsx("input",{type:"number",min:"1",step:"1",value:g,onChange:_=>p(_.target.value.replace(/[^0-9]/g,"")),placeholder:"Minutes",className:"w-24 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-gray-600",children:"minutes"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[l.jsx(ht,{onClick:C,variant:"primary",size:"sm",disabled:y||f&&!g,children:y?"Saving...":"Save"}),l.jsx(ht,{onClick:w,variant:"outline",size:"sm",children:"Cancel"})]})]}):l.jsxs("div",{className:"flex items-center space-x-4",children:[["input","true_false","multiple_choice"].includes(e)&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Shuffled:"}),l.jsx("span",{className:`text-sm font-semibold ${u?"text-green-600":"text-gray-400"}`,children:u?" Yes":" No"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Timer:"}),f&&g?l.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[" ",g," minutes"]}):l.jsx("span",{className:"text-sm font-semibold text-gray-400",children:" Not set"})]}),i&&l.jsx(ht,{onClick:()=>c(!0),variant:"outline",size:"sm",children:" Edit"})]})},aN=({isOpen:e,onClose:t,testType:r,testId:n,testName:s,questions:a=[],isLoading:i=!1,onSave:o,canEdit:c=!0,canEditSettings:u=!0,subject:d,createdAt:f,assignments:h=[],testInfo:g=null,onSettingsSave:p})=>{const[y,v]=S.useState(!1),[C,w]=S.useState([]),[_,T]=S.useState(!1),[E,A]=S.useState(!1),F=Array.isArray(a)?a:[],j=!!c,P=u!==void 0?!!u:!!c;if(S.useEffect(()=>{F.length>0?w(JSON.parse(JSON.stringify(F))):w([]),A(!1)},[F]),S.useEffect(()=>{e||(v(!1),A(!1),T(!1))},[e]),S.useEffect(()=>{!j&&y&&(v(!1),A(!1))},[j,y]),!e)return null;const D=M=>({multiple_choice:"Multiple Choice",true_false:"True/False",input:"Input",matching_type:"Matching",word_matching:"Word Matching",fill_blanks:"Fill in the Blanks"})[M]||M,B=(M,I)=>{switch(I){case"multiple_choice":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),l.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[M.option_a&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"A"}),l.jsx("span",{className:"text-gray-700",children:M.option_a})]}),M.option_b&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"B"}),l.jsx("span",{className:"text-gray-700",children:M.option_b})]}),M.option_c&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"C"}),l.jsx("span",{className:"text-gray-700",children:M.option_c})]}),M.option_d&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"D"}),l.jsx("span",{className:"text-gray-700",children:M.option_d})]}),M.option_e&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"E"}),l.jsx("span",{className:"text-gray-700",children:M.option_e})]}),M.option_f&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),l.jsx("span",{className:"text-gray-700",children:M.option_f})]})]})]});case"true_false":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Options:"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"T"}),l.jsx("span",{className:"text-gray-700",children:"True"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:"F"}),l.jsx("span",{className:"text-gray-700",children:"False"})]})]})]});case"input":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Answer Format:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("span",{className:"text-gray-600 italic",children:"Type your answer in the text input field"})})]});case"matching_type":return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Instructions:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("span",{className:"text-gray-600 italic",children:"Match the items by connecting them with lines or selecting pairs"})})]});default:return null}},V=(M,I)=>{if(!M.correct_answer&&!M.correct_answers)return null;let z="";switch(I){case"multiple_choice":z=M.correct_answer?.toUpperCase()||"";break;case"true_false":z=M.correct_answer?"True":"False";break;case"input":Array.isArray(M.correct_answers)?z=M.correct_answers.join(", "):z=M.correct_answer||M.correct_answers||"";break;case"matching_type":z=typeof M.correct_answer=="object"?JSON.stringify(M.correct_answer):M.correct_answer;break;default:z=String(M.correct_answer||M.correct_answers||"")}return l.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded",children:[l.jsx("p",{className:"font-medium text-green-800 mb-1",children:"Correct Answer:"}),l.jsx("p",{className:"text-green-700 font-mono",children:z})]})},Y=async()=>{if(!E){console.log("No changes to save");return}console.log("Saving questions...",{testType:r,testId:n,questionsCount:C.length}),T(!0);try{o?await o(r,n,C):await Pn.updateTestQuestions(r,n,C),A(!1),v(!1)}catch(M){console.error("Error saving questions:",M),alert("Failed to save questions. Please try again.")}finally{T(!1)}};S.useEffect(()=>{y&&console.log("Edit mode is ON",{hasChanges:E,questionsCount:C.length})},[y,E,C.length]);const re=(M,I)=>{if(!y)return l.jsxs(l.Fragment,{children:[B(M,"multiple_choice"),V(M,"multiple_choice")]});const z=`mc_question_${n}_${I}`,q=X=>{const se=[...C];se[I].question=X,w(se),A(!0)},ne=(X,se)=>{const ce=[...C];ce[I][X]=se,w(ce),A(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text:"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:z,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:3,value:C[I]?.question||"",onChange:X=>{q(X.target.value)}}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(z),onChange:X=>q(X.target.value)})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Options:"}),l.jsx("button",{type:"button",onClick:()=>{const X=[...C],se=X[I],ce=["A","B","C","D","E","F"];if(ce.filter(be=>{const oe=`option_${be.toLowerCase()}`;return se[oe]&&se[oe].trim()!==""}).length<6){const be=ce.find(oe=>{const je=`option_${oe.toLowerCase()}`;return!se[je]||se[je].trim()===""});if(be){const oe=`option_${be.toLowerCase()}`;se[oe]="",w(X),A(!0)}}},className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200",disabled:["A","B","C","D","E","F"].filter(X=>{const se=`option_${X.toLowerCase()}`;return C[I]?.[se]&&C[I][se].trim()!==""}).length>=6,children:"+ Add Option"})]}),["A","B","C","D","E","F"].map(X=>{const se=`option_${X.toLowerCase()}`,ce=C[I]?.[se],pe=ce??"",be=typeof ce=="string"&&ce.trim()!=="";return!be&&!(ce==="")&&X!=="A"&&X!=="B"?null:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded w-8 text-center",children:X}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",id:`mc_option_${n}_${I}_${X}`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:pe,onChange:je=>{ne(se,je.target.value)},placeholder:`Option ${X}`}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(`mc_option_${n}_${I}_${X}`),onChange:je=>ne(se,je.target.value)})]}),be&&l.jsx("button",{type:"button",onClick:()=>{const je=[...C];je[I][se]=null,w(je),A(!0)},className:"px-2 py-1 text-xs bg-red-100 text-red-700 rounded hover:bg-red-200",title:"Remove option",children:""})]},X)})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer:"}),l.jsxs("select",{className:"p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:C[I]?.correct_answer||"",onChange:X=>{const se=[...C];se[I].correct_answer=X.target.value,w(se),A(!0)},children:[l.jsx("option",{value:"",children:"Select correct answer"}),["A","B","C","D","E","F"].map(X=>{const se=`option_${X.toLowerCase()}`,ce=C[I]?.[se]||"";return!ce||ce.trim()===""?null:l.jsxs("option",{value:X.toLowerCase(),children:["Option ",X]},X)})]})]})]})},te=(M,I)=>{if(!y)return l.jsxs(l.Fragment,{children:[B(M,"true_false"),V(M,"true_false")]});const z=`tf_question_${n}_${I}`,q=ne=>{const X=[...C];X[I].question=ne,w(X),A(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text:"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:z,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",rows:3,value:C[I]?.question||"",onChange:ne=>{q(ne.target.value)}}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(z),onChange:ne=>q(ne.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer:"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",name:`correct_answer_${I}`,value:"true",checked:C[I]?.correct_answer===!0||C[I]?.correct_answer==="true",onChange:()=>{const ne=[...C];ne[I].correct_answer=!0,w(ne),A(!0)}}),l.jsx("span",{children:"True"})]}),l.jsxs("label",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"radio",name:`correct_answer_${I}`,value:"false",checked:C[I]?.correct_answer===!1||C[I]?.correct_answer==="false",onChange:()=>{const ne=[...C];ne[I].correct_answer=!1,w(ne),A(!0)}}),l.jsx("span",{children:"False"})]})]})]})]})},ee=(M,I)=>{if(!y)return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Question:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",dangerouslySetInnerHTML:{__html:ha(M.question||M.question_text||"")}}),l.jsx("p",{className:"font-medium text-gray-700 mb-2 mt-4",children:"Correct Answer(s):"}),l.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:Array.isArray(M.correct_answers)?l.jsx("ul",{className:"list-disc list-inside space-y-1",children:M.correct_answers.map((ce,pe)=>l.jsx("li",{dangerouslySetInnerHTML:{__html:ha(String(ce))}},pe))}):l.jsx("span",{dangerouslySetInnerHTML:{__html:ha(String(M.correct_answer||M.correct_answers||""))}})})]});const z=`input_question_${n}_${I}`,q=C[I]?.question??C[I]?.question_text??"",ne=ce=>{const pe=[...C];pe[I].question_text!==void 0?pe[I].question_text=ce:pe[I].question=ce,w(pe),A(!0)},X=(ce,pe)=>{const be=[...C];Array.isArray(be[I].correct_answers)||(be[I].correct_answers=[]),be[I].correct_answers[ce]=pe,w(be),A(!0)},se=ce=>{const pe=[...C];pe[I].correct_answers!==void 0&&!Array.isArray(pe[I].correct_answers)?pe[I].correct_answers=ce:(pe[I].correct_answer,pe[I].correct_answer=ce),w(pe),A(!0)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text (supports math: $...$ for inline, $$...$$ for display):"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{id:z,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:4,value:q,onChange:ce=>{ne(ce.target.value)},placeholder:"Enter question text. Use $x^2$ for math expressions."}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(z),onChange:ce=>ne(ce.target.value)})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s) (supports math: $...$ for inline, $$...$$ for display):"}),Array.isArray(C[I]?.correct_answers)?l.jsxs("div",{className:"space-y-2",children:[C[I].correct_answers.map((ce,pe)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",id:`input_answer_${n}_${I}_${pe}`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",value:String(ce),onChange:be=>{X(pe,be.target.value)},placeholder:"Enter answer (supports math: $x^2$)"}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(`input_answer_${n}_${I}_${pe}`),onChange:be=>X(pe,be.target.value)})]}),l.jsx("button",{type:"button",onClick:()=>{const be=[...C];be[I].correct_answers.splice(pe,1),w(be),A(!0)},className:"px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},pe)),l.jsx("button",{type:"button",onClick:()=>{const ce=[...C];ce[I].correct_answers||(ce[I].correct_answers=[]),ce[I].correct_answers.push(""),w(ce),A(!0)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",children:"+ Add Answer"})]}):l.jsx("div",{children:l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",id:`input_answer_${n}_${I}_single`,className:"w-full p-2 pr-20 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",value:String(C[I]?.correct_answer||C[I]?.correct_answers||""),onChange:ce=>{se(ce.target.value)},placeholder:"Enter answer (supports math: $x^2$)"}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(`input_answer_${n}_${I}_single`),onChange:ce=>se(ce.target.value)})]})})]})]})},L=Gs.useCallback(()=>{w(M=>{const I=M.map(q=>{const ne=q?.question_id??q?.id,X=Number(ne);return Number.isFinite(X)?X:null}).filter(q=>q!==null),z=I.length>0?Math.max(...I)+1:1;return[...M,{id:null,question_id:z,left_word:"",right_word:"",__isNew:!0}]}),A(!0)},[w,A]),Q=(M,I)=>{if(!y)return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Word Pair:"}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex-1 bg-gray-100 p-3 rounded",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Left:"})," ",M.left_word]}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsxs("div",{className:"flex-1 bg-gray-100 p-3 rounded",children:[l.jsx("span",{className:"font-semibold text-gray-700",children:"Right:"})," ",M.right_word]})]})]});const z=(X,se,ce)=>C.filter((be,oe)=>oe===ce?!1:se==="left"?be.left_word?.toLowerCase()===X?.toLowerCase():be.right_word?.toLowerCase()===X?.toLowerCase()).length>0,q=z(C[I]?.left_word,"left",I),ne=z(C[I]?.right_word,"right",I);return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Left Word:"}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${q?"border-red-300 bg-red-50":"border-gray-300"}`,value:C[I]?.left_word||"",onChange:X=>{const se=[...C];se[I].left_word=X.target.value,w(se),A(!0)},placeholder:"Enter left word"}),q&&l.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Duplicate left word detected"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Right Word:"}),l.jsx("input",{type:"text",className:`w-full p-2 border rounded-md focus:ring-2 focus:ring-blue-500 ${ne?"border-red-300 bg-red-50":"border-gray-300"}`,value:C[I]?.right_word||"",onChange:X=>{const se=[...C];se[I].right_word=X.target.value,w(se),A(!0)},placeholder:"Enter right word"}),ne&&l.jsx("p",{className:"text-xs text-red-600 mt-1",children:" Duplicate right word detected"})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("button",{type:"button",onClick:()=>{if(I>0){const X=[...C];[X[I-1],X[I]]=[X[I],X[I-1]],w(X),A(!0)}},disabled:I===0,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:" Move Up"}),l.jsx("button",{type:"button",onClick:()=>{if(I<C.length-1){const X=[...C];[X[I],X[I+1]]=[X[I+1],X[I]],w(X),A(!0)}},disabled:I===C.length-1,className:"px-3 py-1 bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:" Move Down"}),l.jsx("button",{type:"button",onClick:()=>{if(window.confirm("Are you sure you want to remove this word pair?")){const X=C.filter((se,ce)=>ce!==I);w(X),A(!0)}},className:"px-3 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 text-sm",children:"Remove"})]})]})},U=(M,I)=>{if(!y)return l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"font-medium text-gray-700 mb-2",children:"Question:"}),l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:JSON.stringify(M.question_json,null,2)})}),l.jsx("p",{className:"font-medium text-gray-700 mb-2 mt-4",children:"Correct Answers:"}),l.jsx("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:Array.isArray(M.correct_answers)?l.jsx("ul",{className:"list-disc list-inside space-y-1",children:M.correct_answers.map((ne,X)=>l.jsx("li",{children:String(ne)},X))}):l.jsx("span",{children:String(M.correct_answers)})})]});const z=JSON.stringify(M.question_json||{},null,2),q=Array.isArray(M.correct_answers)?M.correct_answers:[M.correct_answers||""];return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question JSON (structured text):"}),l.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 font-mono text-sm",rows:6,value:z,onChange:ne=>{try{const X=JSON.parse(ne.target.value),se=[...C];se[I].question_json=X,w(se),A(!0)}catch(X){console.error("Invalid JSON:",X)}},placeholder:'{"type": "paragraph", "children": [...]}'}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Edit the JSON structure for the question text"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s):"}),l.jsxs("div",{className:"space-y-2",children:[q.map((ne,X)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("input",{type:"text",className:"flex-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",value:String(ne),onChange:se=>{const ce=[...C];ce[I].correct_answers[X]=se.target.value,w(ce),A(!0)},placeholder:"Enter answer"}),l.jsx("button",{type:"button",onClick:()=>{const se=[...C];se[I].correct_answers.splice(X,1),w(se),A(!0)},className:"px-3 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Remove"})]},X)),l.jsx("button",{type:"button",onClick:()=>{const ne=[...C];ne[I].correct_answers||(ne[I].correct_answers=[]),ne[I].correct_answers.push(""),w(ne),A(!0)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 text-sm",children:"+ Add Answer"})]})]})]})},G=y?C:F,W=G.length;return l.jsx(Wo,{children:l.jsxs(vt.div,{className:"fixed inset-0 z-50 overflow-y-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[l.jsx(vt.div,{className:"fixed inset-0 bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),l.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:l.jsxs(vt.div,{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3},children:[l.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[l.jsx("div",{className:"flex items-center space-x-3",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s||"Test Details"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[D(r),"  ",W," Question",W!==1?"s":""]})]})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[j&&["input","multiple_choice","true_false","word_matching"].includes(r)&&l.jsx(ht,{onClick:()=>{y&&E?window.confirm("You have unsaved changes. Are you sure you want to cancel?")&&(v(!1),w(JSON.parse(JSON.stringify(a))),A(!1)):v(!y)},variant:y?"outline":"primary",size:"sm",className:"flex items-center space-x-1",children:y?" Cancel Edit":" Edit Questions"}),l.jsx(ht,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-1",children:" Close"})]})]}),l.jsx("div",{className:"p-6 overflow-y-auto flex-1 min-h-0",children:i?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading test details..."})]})}):l.jsxs("div",{className:"space-y-6",children:[!j&&l.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:"Editing is disabled because this test has an active assignment."}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Test Information"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Subject:"}),l.jsx("p",{className:"text-sm text-gray-900",children:d})]}),f&&l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Created:"}),l.jsx("p",{className:"text-sm text-gray-900",children:new Date(f).toLocaleDateString()})]})]}),h&&h.length>0&&l.jsxs("div",{className:"mt-4",children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:h.map((M,I)=>l.jsxs("span",{className:"bg-gray-100 text-gray-700 px-2 py-1 rounded text-xs font-medium",children:[M.grade,"/",M.class]},I))})]}),g&&p&&l.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200",children:l.jsx(p0e,{testType:r,testId:n,isShuffled:g?.is_shuffled,allowedTime:g?.allowed_time,onSave:p,canEdit:P})})]}),W===0?l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Questions Available"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"This test doesn't have any questions yet."}),y&&r==="word_matching"&&l.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 text-sm font-medium text-blue-600 border border-dashed border-blue-300 rounded hover:bg-blue-50",children:"+ Add Word Pair"})]}):l.jsxs("div",{className:"space-y-6",children:[G.map((M,I)=>l.jsxs(vt.div,{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:I*.1,duration:.3},children:[l.jsx("div",{className:"flex items-start justify-between mb-4",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsxs("span",{className:"bg-blue-100 text-blue-800 text-sm font-medium px-3 py-1 rounded-full",children:["Question ",I+1]}),l.jsx("span",{className:"text-gray-500 text-sm",children:D(r)})]})}),l.jsx("div",{className:"mb-4",children:y?l.jsxs("div",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:[r==="multiple_choice"&&re(M,I),r==="true_false"&&te(M,I),r==="input"&&ee(M,I),r==="word_matching"&&Q(M,I),r==="fill_blanks"&&U(M,I)]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-gray-800 font-medium text-lg leading-relaxed",children:r==="input"?l.jsx("span",{dangerouslySetInnerHTML:{__html:ha(M.question||M.question_text||"")}}):r==="word_matching"?l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("span",{className:"bg-blue-100 px-3 py-1 rounded",children:M.left_word}),l.jsx("span",{className:"text-gray-400",children:""}),l.jsx("span",{className:"bg-green-100 px-3 py-1 rounded",children:M.right_word})]}):r==="fill_blanks"?l.jsx("div",{className:"bg-gray-100 p-3 rounded",children:l.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:JSON.stringify(M.question_json,null,2)})}):M.question||M.question_text}),B(M,r),V(M,r)]})})]},M.id||M.question_id||I)),y&&r==="word_matching"&&l.jsx("div",{className:"flex justify-center pt-2",children:l.jsx("button",{type:"button",onClick:L,className:"px-4 py-2 text-sm font-medium text-blue-600 border border-dashed border-blue-300 rounded hover:bg-blue-50",children:"+ Add Word Pair"})})]})]})}),l.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 bg-gray-50 flex-shrink-0",children:[l.jsx("div",{className:"text-sm text-gray-600",children:W>0&&l.jsx("span",{children:y?E?l.jsx("span",{className:"text-orange-600 font-semibold",children:" Unsaved changes"}):l.jsxs("span",{children:["Showing ",W," question",W!==1?"s":""]}):l.jsxs("span",{children:["Showing ",W," question",W!==1?"s":""]})})}),l.jsxs("div",{className:"flex items-center space-x-3",children:[y&&l.jsx("button",{onClick:Y,disabled:_||!E,className:`px-4 py-2 rounded-md font-medium flex items-center space-x-2 min-w-[140px] justify-center transition-all ${_||!E?"bg-gray-400 text-gray-700 cursor-not-allowed opacity-60":"bg-blue-600 text-white hover:bg-blue-700 cursor-pointer"}`,children:_?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),l.jsx("span",{children:"Saving..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Save Changes"})]})}),l.jsx(ht,{onClick:t,variant:y?"outline":"primary",className:"flex items-center space-x-2",children:"Close"})]})]})]})})]})})},x0e=({onChange:e})=>{const[t]=S.useContext(v1)||[];return S.useEffect(()=>{if(e&&t)return t.registerUpdateListener(({editorState:r})=>{r.read(()=>{Ks().getTextContent();const s=r.toJSON();e(JSON.stringify(s))})})},[t,e]),null},y0e=({onAddBlank:e,blankCount:t})=>{const[r]=S.useContext(v1)||[],n=S.useCallback(()=>{r&&r.dispatchCommand(wo,"bold")},[r]),s=S.useCallback(()=>{r&&r.dispatchCommand(wo,"italic")},[r]),a=S.useCallback(()=>{r&&r.dispatchCommand(wo,"underline")},[r]),i=S.useCallback(()=>{r&&r.dispatchCommand(wo,"strikethrough")},[r]),o=S.useCallback(p=>{r&&r.update(()=>{const y=xr();Jt(y)&&Rp(y,()=>Mf(p))})},[r]),c=S.useCallback(()=>{r&&r.update(()=>{const p=xr();Jt(p)&&Rp(p,()=>Rs())})},[r]),u=S.useCallback(()=>{r&&r.update(()=>{const p=xr();Jt(p)&&Rp(p,()=>S2())})},[r]),d=S.useCallback(()=>{r&&r.dispatchCommand(Z7)},[r]),f=S.useCallback(()=>{r&&r.dispatchCommand(eN)},[r]),h=S.useCallback(()=>{r&&r.dispatchCommand(tN)},[r]),g=S.useCallback(()=>{!r||!e||(r.update(()=>{const p=xr();if(Jt(p)){const v=`${t+1}_________`,C=pa(v);C.setStyle("background-color: #f0f9ff; border: 1px dashed #3b82f6; padding: 2px 4px; border-radius: 4px; font-family: monospace;"),p.insertNodes([C])}}),e())},[r,e,t]);return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-300 bg-gray-50",children:[l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:n,className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Bold",children:"B"}),l.jsx("button",{type:"button",onClick:s,className:"px-2 py-1 text-sm italic border border-gray-300 rounded hover:bg-gray-200",title:"Italic",children:"I"}),l.jsx("button",{type:"button",onClick:a,className:"px-2 py-1 text-sm underline border border-gray-300 rounded hover:bg-gray-200",title:"Underline",children:"U"}),l.jsx("button",{type:"button",onClick:i,className:"px-2 py-1 text-sm line-through border border-gray-300 rounded hover:bg-gray-200",title:"Strikethrough",children:"S"})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:()=>o("h1"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 1",children:"H1"}),l.jsx("button",{type:"button",onClick:()=>o("h2"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 2",children:"H2"}),l.jsx("button",{type:"button",onClick:()=>o("h3"),className:"px-2 py-1 text-sm font-bold border border-gray-300 rounded hover:bg-gray-200",title:"Heading 3",children:"H3"}),l.jsx("button",{type:"button",onClick:c,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Paragraph",children:"P"}),l.jsx("button",{type:"button",onClick:u,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Quote",children:'"'})]}),l.jsxs("div",{className:"flex items-center gap-1 border-r border-gray-300 pr-2",children:[l.jsx("button",{type:"button",onClick:d,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Bullet List",children:""}),l.jsx("button",{type:"button",onClick:f,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Numbered List",children:"1."}),l.jsx("button",{type:"button",onClick:h,className:"px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-200",title:"Remove List",children:""})]}),e&&l.jsx("div",{className:"flex items-center gap-1 border-l border-gray-300 pl-2",children:l.jsxs("button",{type:"button",onClick:g,className:"px-3 py-1 text-sm font-medium bg-blue-500 text-white border border-blue-600 rounded hover:bg-blue-600 transition-colors",title:"Add Blank",children:[l.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"inline mr-1",children:l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add Blank"]})})]})},v0e=({value:e,onChange:t,placeholder:r,onAddBlank:n,blankCount:s=0})=>{const a={namespace:"FillBlanksLexicalEditor",theme:{root:"p-4 min-h-32 focus:outline-none",paragraph:"mb-2",heading:{h1:"text-3xl font-bold mb-4",h2:"text-2xl font-bold mb-3",h3:"text-xl font-bold mb-2"},quote:"border-l-4 border-gray-300 pl-4 italic text-gray-600 mb-2",list:{nested:{listitem:"list-none"},ol:"list-decimal list-inside mb-2",ul:"list-disc list-inside mb-2",listitem:"mb-1"},text:{bold:"font-bold",italic:"italic",underline:"underline",strikethrough:"line-through"}},nodes:[k2,lh,N0,_2,tg,f3,C2,T1,N1,E1,ch],onError:i=>{console.error("Lexical error:",i)},editorState:e?(()=>{try{const i=JSON.parse(e);return JSON.stringify(i)}catch{return JSON.stringify({root:{children:[{children:[{detail:0,format:0,mode:"normal",style:"",text:e,type:"text",version:1}],direction:"ltr",format:"",indent:0,type:"paragraph",version:1}],direction:"ltr",format:"",indent:0,type:"root",version:1}})}})():void 0};return l.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:l.jsxs(EW,{initialConfig:a,children:[l.jsx(y0e,{onAddBlank:n,blankCount:s}),l.jsx(x0e,{onChange:t}),l.jsxs("div",{className:"relative",children:[l.jsx(VW,{contentEditable:l.jsx(KW,{className:"p-4 min-h-32 focus:outline-none"}),placeholder:l.jsx("div",{className:"absolute top-4 left-4 text-gray-400 pointer-events-none",children:r}),ErrorBoundary:JW}),l.jsx(YW,{}),l.jsx(XW,{}),l.jsx(mH,{}),l.jsx(hH,{transformers:h3})]})]})})},b0e=({testName:e="",allowedTime:t=null,onTestSaved:r,onCancel:n,onBackToCabinet:s,isSaving:a=!1,validationErrors:i={}})=>{const{user:o}=Fs(),{post:c}=ql(),{showNotification:u}=di(),[d,f]=S.useState({test_name:e,test_text:"",num_questions:1,num_blanks:0,passing_score:100,separate_type:!0,allowed_time:t,blanks:[]}),[h,g]=S.useState({isLoading:!1,error:null,showPreview:!0});S.useEffect(()=>{f(F=>({...F,test_name:e||"",allowed_time:t}))},[e,t]);const p=F=>{f(j=>({...j,test_text:F}))},y=()=>{const j={id:d.blanks.length+1,position:0,question:"",options:["","","",""],correct_answer:""};f(P=>({...P,blanks:[...P.blanks,j],num_blanks:P.num_blanks+1}))},v=F=>{f(j=>({...j,blanks:j.blanks.filter(P=>P.id!==F),num_blanks:j.num_blanks-1}))},C=F=>{f(j=>({...j,blanks:j.blanks.map(P=>P.id===F?{...P,options:[...P.options,""]}:P)}))},w=(F,j)=>{f(P=>({...P,blanks:P.blanks.map(D=>D.id===F?{...D,options:D.options.filter((B,V)=>V!==j),correct_answer:D.correct_answer===String.fromCharCode(65+j)?"":D.correct_answer}:D)}))},_=(F,j,P)=>{f(D=>({...D,blanks:D.blanks.map(B=>B.id===F?{...B,options:B.options.map((V,Y)=>Y===j?P:V)}:B)}))},T=(F,j)=>{console.log(" [DEBUG] updateBlankQuestion called:",{blankId:F,question:j}),f(P=>({...P,blanks:P.blanks.map(D=>D.id===F?{...D,question:j}:D)})),console.log(" [DEBUG] updateBlankQuestion completed")},E=(F,j)=>{f(P=>({...P,blanks:P.blanks.map(D=>D.id===F?{...D,correct_answer:j}:D)}))},A=async()=>{if(!d.test_name.trim()){g(F=>({...F,error:"Test name is required"}));return}if(!d.test_text.trim()){g(F=>({...F,error:"Test text is required"}));return}if(d.blanks.length===0){g(F=>({...F,error:"At least one blank is required"}));return}if(console.log(" [DEBUG] Validating blanks:",d.blanks),d.blanks.forEach((F,j)=>{console.log(` [DEBUG] Blank ${j+1}:`,{question:F.question,questionTrimmed:F.question?.trim(),correct_answer:F.correct_answer,options:F.options})}),d.separate_type===!1){if(d.blanks.some(F=>!F.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing correct answer"),g(F=>({...F,error:"All blanks must have correct answers"}));return}}else if(d.blanks.some(F=>!F.question.trim()||!F.correct_answer)){console.log(" [DEBUG] Validation failed - some blanks missing question or correct answer"),g(F=>({...F,error:"All blanks must have question text and correct answer"}));return}console.log(" [DEBUG] Validation passed - all blanks have question and correct answer"),g(F=>({...F,isLoading:!0,error:null}));try{const F={test_name:d.test_name,test_text:d.test_text,num_questions:d.blanks.length,num_blanks:d.blanks.length,separate_type:d.separate_type,passing_score:d.passing_score,allowed_time:d.allowed_time,blanks:d.blanks.map((j,P)=>({question_id:P+1,question_json:j.question,question:j.question,options:j.options,correct_answer:j.correct_answer,blank_positions:{},blank_options:j.options||[],correct_answers:[j.correct_answer]}))};console.log(" [DEBUG] Calling onTestSaved with data:",F),r?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),r(F),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(F){console.error("Error preparing fill blanks test:",F),g(j=>({...j,error:"Failed to prepare fill blanks test. Please try again."})),u("Failed to prepare fill blanks test","error")}finally{g(F=>({...F,isLoading:!1}))}};return l.jsxs("div",{className:"fill-blanks-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Fill Blanks Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a test with text content and multiple choice blanks"}),h.error&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsx("p",{className:"text-red-600 text-sm",children:h.error})})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!0?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(F=>({...F,separate_type:!0})),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:d.separate_type===!0,onChange:()=>f(F=>({...F,separate_type:!0})),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Separate Mode"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Multiple choice questions below the text"})]}),l.jsxs("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${d.separate_type===!1?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>f(F=>({...F,separate_type:!1})),children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",checked:d.separate_type===!1,onChange:()=>f(F=>({...F,separate_type:!1})),className:"mr-3"}),l.jsx("h4",{className:"font-medium",children:"Inline Mode"})]}),l.jsx("p",{className:"text-sm text-gray-600",children:"Dropdown for option inside the text"})]})]}),l.jsx(v0e,{value:d.test_text,onChange:p,placeholder:"Type your text here. Use the 'Add Blank' button in the toolbar to insert blanks.",onAddBlank:y,blankCount:d.blanks.length})]}),d.separate_type===!0&&l.jsx("div",{className:"space-y-4",children:d.blanks.map((F,j)=>l.jsxs(Kt,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-md font-medium",children:["Blank ",F.id," Configuration"]}),l.jsx(ht,{variant:"danger",size:"small",onClick:()=>v(F.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Question Text for Blank ",F.id," *"]}),l.jsx("input",{type:"text",placeholder:"Enter question text for this blank",value:F.question,onChange:P=>T(F.id,P.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),F.options.map((P,D)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+D)}),l.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+D)}`,value:P||"",onChange:B=>_(F.id,D,B.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),F.options.length>2&&l.jsx(ht,{variant:"danger",size:"small",onClick:()=>w(F.id,D),className:"px-2 py-1 text-sm",children:""})]},D)),F.options.length<6&&l.jsx(ht,{variant:"secondary",size:"small",onClick:()=>C(F.id),className:"w-full",children:"+ Add Option"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{value:F.correct_answer||"",onChange:P=>E(F.id,P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),F.options.filter(P=>P.trim().length>0).map((P,D)=>l.jsxs("option",{value:String.fromCharCode(65+D),children:[String.fromCharCode(65+D),") ",P]},D))]})]})]},F.id))}),d.separate_type===!1&&l.jsx("div",{className:"space-y-4",children:d.blanks.map((F,j)=>l.jsxs(Kt,{className:"p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h4",{className:"text-md font-medium",children:["Blank ",F.id," Options"]}),l.jsx(ht,{variant:"danger",size:"small",onClick:()=>v(F.id),className:"px-2 py-1 text-sm",children:"Remove Blank"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h5",{className:"text-sm font-medium text-gray-700",children:"Answer Options:"}),F.options.map((P,D)=>l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-sm font-semibold text-gray-600",children:String.fromCharCode(65+D)}),l.jsx("input",{type:"text",placeholder:`Option ${String.fromCharCode(65+D)}`,value:P||"",onChange:B=>_(F.id,D,B.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200"}),F.options.length>2&&l.jsx(ht,{variant:"danger",size:"small",onClick:()=>w(F.id,D),className:"px-2 py-1 text-sm",children:""})]},D)),F.options.length<6&&l.jsx(ht,{variant:"secondary",size:"small",onClick:()=>C(F.id),className:"w-full",children:"+ Add Option"})]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Correct Answer *"}),l.jsxs("select",{value:F.correct_answer||"",onChange:P=>E(F.id,P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),F.options.filter(P=>P.trim().length>0).map((P,D)=>l.jsxs("option",{value:String.fromCharCode(65+D),children:[String.fromCharCode(65+D),") ",P]},D))]})]})]},F.id))}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx(ht,{onClick:n,variant:"secondary",disabled:a,children:"Cancel"}),l.jsx(ht,{onClick:A,variant:"primary",disabled:a||d.blanks.length===0,children:a?l.jsx(pn,{size:"sm"}):"Save Test"})]})]})},w0e=({testText:e,blanks:t,separateType:r=!0,testId:n,testName:s="Unknown Test",teacherId:a="Unknown Teacher",subjectId:i,onTestComplete:o,onAnswerChange:c})=>{console.log(" FillBlanksTestStudent Props Debug:"),console.log("- testText:",e),console.log("- blanks:",t),console.log("- separateType:",r),console.log("- testId:",n),console.log("- testName:",s),console.log("- teacherId:",a),console.log("- subjectId:",i);const{theme:u,isCyberpunk:d,isLight:f,isKpop:h,themeClasses:g}=Ra(),p=Da(u);if(!e||!t||!Array.isArray(t))return console.log(" FillBlanksTestStudent: Missing test data"),l.jsx("div",{className:`min-h-screen flex items-center justify-center ${d?"":h?"bg-black":"bg-gray-50"}`,style:d?{backgroundColor:fe.black}:h?{...p.background}:{},children:l.jsx(Kt,{className:`max-w-md w-full ${d?Gt(0).className:""}`,style:d?{...Gt(0).style,...p.glow}:{},children:l.jsxs(Kt.Body,{className:"text-center",children:[l.jsx("div",{className:`text-6xl mb-4 ${d?"":"text-gray-500"}`,style:d?{color:fe.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("h2",{className:`text-xl font-semibold mb-2 ${d?"":"text-gray-900"}`,style:d?{color:fe.cyan,fontFamily:"monospace",...p.textShadow}:{},children:d?"NO TEST DATA":"No Test Data"}),l.jsx("p",{className:`mb-4 ${d?"":"text-gray-600"}`,style:d?{color:fe.cyan,fontFamily:"monospace"}:{},children:d?"UNABLE TO LOAD FILL BLANKS TEST DATA":"Unable to load fill blanks test data"}),l.jsx(ht,{onClick:()=>window.history.back(),variant:"primary",children:"Back to Dashboard"})]})})});const[y,v]=S.useState({}),[C,w]=S.useState(!1),[_,T]=S.useState(null),[E,A]=S.useState(null),[F,j]=S.useState(!1),[P,D]=S.useState(null),{showNotification:B}=di(),{makeAuthenticatedRequest:V}=ql(),{user:Y}=Fs(),{startTracking:re,stopTracking:te,getCheatingData:ee,clearData:L}=y1("fill_blanks",n,Y?.student_id||Y?.id);z_();const Q=S.useCallback((M,I)=>{try{let z=M;if(typeof M=="string"&&M.startsWith("{"))try{const se=JSON.parse(M);se.root&&se.root.children&&(z=se.root.children.map(ce=>ce.children?ce.children.map(pe=>pe.style&&pe.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":pe.text||"").join(""):"").join(" "))}catch(se){console.error("Error parsing Lexical JSON:",se)}let q=z;I.forEach((se,ce)=>{const pe=`[${ce+1}_________]`;q=q.replace("[BLANK_PLACEHOLDER]",pe)});const X=q.split(/(\[\d+_________\])/).map((se,ce)=>se.match(/\[\d+_________\]/)?l.jsx("span",{className:`inline-block px-3 py-1 mx-1 border-2 rounded-lg font-mono font-bold shadow-sm ${d?"border":"bg-purple-100 text-purple-800 border-purple-400"}`,style:d?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...p.glow}:{},children:se},ce):l.jsx("span",{style:d?{color:fe.cyan,fontFamily:"monospace"}:h?{color:ze.text}:{},children:se},ce));return l.jsx("div",{className:"prose max-w-none mb-6",children:l.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap ",style:d?{color:fe.cyan,fontFamily:"monospace"}:h?{...p.textWhite}:{},children:X})})}catch(z){return console.error("Error rendering text with blanks:",z),l.jsx("div",{className:d||h?"":"text-red-500",style:d?{color:fe.red,fontFamily:"monospace",...p.textShadowRed}:h?{color:ze.error,textShadow:`0 0 8px ${ze.error}`}:{},children:d?"ERROR LOADING TEST CONTENT":"Error loading test content"})}},[d,p]),U=S.useCallback((M,I)=>{try{let z=M;if(typeof M=="string"&&M.startsWith("{"))try{const se=JSON.parse(M);se.root&&se.root.children&&(z=se.root.children.map(ce=>ce.children?ce.children.map(pe=>pe.style&&pe.style.includes("background-color: #f0f9ff")?"[BLANK_PLACEHOLDER]":pe.text||"").join(""):"").join(" "))}catch(se){console.error("Error parsing Lexical JSON:",se)}const q=[];I.forEach((se,ce)=>{const pe=y[se.id],be=pe?se.options[pe.charCodeAt(0)-65]:null,oe=be?l.jsx("span",{className:`inline-block px-3 py-2 rounded-lg border-2 cursor-pointer transition-all duration-200 font-bold shadow-sm ${d?"border":"bg-green-100 text-green-800 border-green-400 hover:bg-green-200 hover:border-green-500"}`,onClick:()=>A(se.id),style:d?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...p.glow}:{},children:be},ce):l.jsxs("span",{className:`inline-block px-3 py-2 rounded-lg border-2 cursor-pointer transition-all duration-200 font-bold shadow-sm ${d?"border":"bg-purple-100 text-purple-800 border-purple-400 hover:bg-purple-200 hover:border-purple-500"}`,onClick:()=>A(se.id),style:d?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...p.glow}:{},children:[ce+1,"_________"]},ce);q.push(oe),z=z.replace("[BLANK_PLACEHOLDER]",`__BLANK_${se.id}__`)});const ne=z.split(/__BLANK_\d+__/),X=[];for(let se=0;se<ne.length;se++)ne[se]&&X.push(l.jsx("span",{style:d?{color:fe.cyan,fontFamily:"monospace"}:h?{color:ze.text}:{},children:ne[se]},`text-${se}`)),se<q.length&&X.push(q[se]);return l.jsx("div",{className:"prose max-w-none mb-6",children:l.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap ",style:d?{color:fe.cyan,fontFamily:"monospace"}:h?{...p.textWhite}:{},children:X})})}catch(z){return console.error("Error rendering text with inline blanks:",z),l.jsx("div",{className:d?"":"text-red-500",style:d?{color:fe.red,fontFamily:"monospace",...p.textShadowRed}:{},children:d?"ERROR LOADING TEST CONTENT":"Error loading test content"})}},[y,d,p]),G=S.useCallback((M,I)=>{const z={...y,[M]:I};v(z),c&&c(M,I)},[y,c]),W=S.useCallback(M=>l.jsx("div",{className:"space-y-6",children:M.map((I,z)=>{const q=I.blank_options||I.options||[];I.correct_answers;const ne=I.question_json||I.question||`Blank ${z+1}`;return console.log(` Blank ${z+1} question text:`,ne),l.jsxs(Kt,{className:`p-4 ${d?Gt(z%4).className:""}`,style:d?{...Gt(z%4).style,...p.glow}:{},children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:`text-lg font-semibold mb-2 ${d?"":"text-gray-800"}`,style:d?{color:fe.cyan,fontFamily:"monospace",...p.textShadow}:{},children:d?`QUESTION ${z+1}`:`Question ${z+1}`}),l.jsx("p",{className:`mb-4 ${d?"":"text-gray-600"}`,style:d?{color:fe.cyan,fontFamily:"monospace"}:{},children:ne})]}),l.jsx("div",{className:"space-y-3",children:q.filter(X=>X&&X.trim().length>0).map((X,se)=>l.jsxs("label",{className:`flex items-center space-x-3 cursor-pointer p-2 rounded-lg transition-colors border-2 ${d?"border":"hover:bg-gray-50"}`,style:d?{backgroundColor:fe.black,borderColor:fe.cyan,...y[I.question_id||I.id||z]===String.fromCharCode(65+se)?p.glow:{}}:{},children:[l.jsx("input",{type:"radio",name:`blank_${I.question_id||I.id||z}`,value:String.fromCharCode(65+se),checked:y[I.question_id||I.id||z]===String.fromCharCode(65+se),onChange:ce=>G(I.question_id||I.id||z,ce.target.value),className:`w-4 h-4 ${d?"":"text-blue-600 border-gray-300 focus:ring-blue-500"}`,style:d?{accentColor:fe.cyan}:{}}),l.jsxs("span",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-sm font-semibold border-2 ${d?"border":"bg-gray-100 text-gray-600"}`,style:d?{backgroundColor:y[I.question_id||I.id||z]===String.fromCharCode(65+se)?fe.cyan:fe.black,borderColor:fe.cyan,color:y[I.question_id||I.id||z]===String.fromCharCode(65+se)?fe.black:fe.cyan,fontFamily:"monospace"}:{},children:String.fromCharCode(65+se)}),l.jsx("span",{className:d?"":"text-gray-700",style:d?{color:fe.cyan,fontFamily:"monospace"}:{},children:X})]})]},se))})]},I.question_id||I.id||z)})}),[y,G,d,p]);return S.useEffect(()=>{if(n&&Y?.student_id){T(new Date),re(),console.log(" Anti-cheating tracking started for fill blanks test");const I=`test_progress_${Y.student_id}_fill_blanks_${n}`,z=js(I);z&&(v(z.answers||{}),T(new Date(z.startTime)),console.log(" Fill blanks test progress restored:",z))}},[n,Y?.student_id,t,re]),S.useEffect(()=>{if(_&&Y?.student_id&&n){const M=setInterval(()=>{const I={answers:y,startTime:_.toISOString()},z=`test_progress_${Y.student_id}_fill_blanks_${n}`;ys(z,I,ds.test_progress),console.log(" Fill blanks progress auto-saved")},3e4);return()=>clearInterval(M)}},[_,y,Y?.student_id,n]),S.useEffect(()=>()=>{te(),L(),console.log(" Fill blanks test component unmounted - anti-cheating cleanup")},[te,L]),S.useCallback(async()=>{w(!0);try{const M=t.length;let I=0;t.forEach((Ve,at)=>{const gt=y[Ve.id];gt&&gt===Ve.correct_answer&&I++});const z=I,q=M;console.log(` Fill Blanks Score: ${z}/${q} (${Math.round(z/q*100)}%)`);const ne=new Date,X=_?Math.round((ne-_)/1e3):0,se=_?_.toISOString():ne.toISOString(),ce=ee();console.log(" Anti-cheating data for fill blanks submission:",ce);const pe=Y.student_id,be=`retest_assignment_id_${pe}_fill_blanks_${n}`,oe=localStorage.getItem(be),{academicCalendarService:je}=await ai(async()=>{const{academicCalendarService:Ve}=await Promise.resolve().then(()=>g3);return{academicCalendarService:Ve}},void 0);await je.loadAcademicCalendar();const Xe=je.getCurrentTerm()?.id;if(!Xe)throw new Error("No current academic period found");const ft={test_id:n,test_name:s,teacher_id:a||null,subject_id:i||null,student_id:pe,academic_period_id:Xe,parent_test_id:n,retest_assignment_id:oe?Number(oe):null,answers:y,score:z,maxScore:q,time_taken:X,started_at:se,submitted_at:ne.toISOString(),caught_cheating:ce.caught_cheating,visibility_change_times:ce.visibility_change_times};console.log(" Submitting fill blanks test:",ft);const Ht=await(await V("/.netlify/functions/submit-fill-blanks-test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ft)})).json();if(Ht.success){if(B("Test submitted successfully!","success"),te(),L(),console.log(" Anti-cheating tracking stopped and data cleared for fill blanks test"),Y?.student_id&&(f1(Y.student_id,"fill_blanks",n),console.log(" Fill blanks test data cleared from cache")),!!oe&&Y?.student_id){let at=3;try{const bt=localStorage.getItem(`student_active_tests_${Y.student_id}`);if(bt){const Lt=JSON.parse(bt)?.tests?.find(Yt=>Yt.test_id===n&&Yt.test_type==="fill_blanks");Lt&&(at=Lt.retest_attempts_left||Lt.max_attempts||3)}}catch(bt){console.error("Error checking active tests cache:",bt)}const Te=(z>0&&q>0?z/q*100:0)>=50;if(Te){const bt=`retest_attempt${at}_${Y.student_id}_fill_blanks_${n}`;localStorage.setItem(bt,"true"),console.log(" Passed retest, marking last-slot key:",bt);let Ct=0;for(let it=1;it<=10;it++){const xt=`retest_attempt${it}_${Y.student_id}_fill_blanks_${n}`;localStorage.getItem(xt)==="true"&&Ct++}const Lt=`test_completed_${Y.student_id}_fill_blanks_${n}`;localStorage.setItem(Lt,"true"),console.log(" Marked retest as completed (student passed):",Lt);const Yt=`retest_attempts_${Y.student_id}_fill_blanks_${n}`;localStorage.setItem(Yt,JSON.stringify({used:Ct,max:at})),console.log(" Set retest attempts metadata (student passed):",Yt,{used:Ct,max:at})}else{let bt=1;for(let xt=1;xt<=10;xt++){const Mt=`retest_attempt${xt}_${Y.student_id}_fill_blanks_${n}`;if(localStorage.getItem(Mt)!=="true"){bt=xt;break}}const Ct=`retest_attempt${bt}_${Y.student_id}_fill_blanks_${n}`;localStorage.setItem(Ct,"true"),console.log(" Marked retest attempt as completed:",Ct);let Lt=0;for(let xt=1;xt<=10;xt++){const Mt=`retest_attempt${xt}_${Y.student_id}_fill_blanks_${n}`;localStorage.getItem(Mt)==="true"&&Lt++}const Yt=at-Lt,it=Yt<=0||Te;if(console.log(" Retest completion check:",{usedAttempts:Lt,maxAttempts:at,attemptsLeft:Yt,passed:Te,shouldComplete:it}),it){const xt=`test_completed_${Y.student_id}_fill_blanks_${n}`;localStorage.setItem(xt,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",xt);const Mt=`retest_attempts_${Y.student_id}_fill_blanks_${n}`;localStorage.setItem(Mt,JSON.stringify({used:Lt,max:at})),console.log(" Set retest attempts metadata (attempts exhausted):",Mt,{used:Lt,max:at})}}}else if(Y?.student_id){const at=`test_completed_${Y.student_id}_fill_blanks_${n}`;localStorage.setItem(at,"true"),console.log(" Fill blanks test marked as completed in localStorage:",at)}if(Y?.student_id){const at=`retest1_${pe}_fill_blanks_${n}`;localStorage.removeItem(at),localStorage.removeItem(be)}if(Y?.student_id){const at=`student_results_table_${Y.student_id}`;ys(at,Ht,ds.student_results_table),console.log(" Fill blanks test results cached with key:",at)}setShowSubmitModal(!1),setTimeout(()=>{o&&o(z)},2e3)}else throw new Error(Ht.message||"Failed to submit test")}catch(M){console.error("Error submitting test:",M),B("Error submitting test. Please try again.","error")}finally{w(!1)}},[y,t,n,s,a,i,_,ee,te,L,V,B,o,Y]),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`space-y-4 ${d||h?"bg-black":""}`,style:d?{backgroundColor:fe.black}:h?{...p.background}:{},children:l.jsxs(Kt,{className:d?Gt(0).className:h?dr(0).className:"",style:d?{...Gt(0).style,...p.glow}:h?{...dr(0).style,...p.glow}:{},children:[C&&l.jsx(Kt.Header,{children:l.jsx("div",{className:"flex items-center justify-center",children:l.jsxs("div",{className:`flex items-center space-x-2 text-sm ${d?"":h?"text-violet-600":"text-gray-500"}`,style:d?{color:fe.cyan,fontFamily:"monospace"}:h?{color:ze.primary}:{},children:[l.jsx(pn,{size:"small"}),l.jsx("span",{children:d?"SUBMITTING...":"Submitting..."})]})})}),l.jsx(Kt.Body,{style:d?{backgroundColor:fe.black}:h?{backgroundColor:ze.background}:{},children:r===!0?l.jsxs(l.Fragment,{children:[Q(e,t),W(t)]}):l.jsx(l.Fragment,{children:U(e,t)})}),r===!1&&E&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:l.jsxs("div",{className:`rounded-lg p-6 max-w-md w-full mx-4 border-2 ${d?Gt(0).className:"bg-white"}`,style:d?{...Gt(0).style,...p.glow}:{},children:[l.jsx("h3",{className:"text-lg font-semibold mb-4 ",style:d?{color:fe.cyan,fontFamily:"monospace",...p.textShadow}:{},children:d?"SELECT ANSWER":"Select Answer"}),l.jsx("div",{className:"space-y-2",children:t.find(M=>M.id===E)?.options.filter(M=>M.trim().length>0).map((M,I)=>l.jsxs("button",{onClick:()=>{G(E,String.fromCharCode(65+I)),A(null)},className:`w-full text-left px-4 py-2 rounded-lg border-2 ${d?"border":"hover:bg-gray-100 border-gray-200"}`,style:d?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace"}:{},children:[l.jsxs("span",{className:`font-semibold mr-2 ${d?"":"text-blue-600"}`,style:d?{color:fe.cyan,fontFamily:"monospace"}:{},children:[String.fromCharCode(65+I),")"]}),M]},I))}),l.jsx("div",{className:"mt-4 flex justify-end",children:l.jsx(ht,{onClick:()=>A(null),variant:"secondary",size:"sm",children:"Cancel"})})]})}),l.jsx(Kt.Footer,{children:l.jsx("div",{className:"flex gap-3"})})]})})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S0e=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),lO=e=>{const t=S0e(e);return t.charAt(0).toUpperCase()+t.slice(1)},wH=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),k0e=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var C0e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0e=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:i,...o},c)=>S.createElement("svg",{ref:c,...C0e,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:wH("lucide",s),...!a&&!k0e(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>S.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=(e,t)=>{const r=S.forwardRef(({className:n,...s},a)=>S.createElement(T0e,{ref:a,iconNode:t,className:wH(`lucide-${_0e(lO(e))}`,`lucide-${e}`,n),...s}));return r.displayName=lO(e),r};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0e=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],E0e=A1("download",N0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0e=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],j0e=A1("maximize-2",A0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0e=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],F0e=A1("rotate-cw",P0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0e=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_H=A1("x",M0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],D0e=A1("zoom-in",O0e);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0e=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],I0e=A1("zoom-out",R0e),eu={WIDTH:1536,HEIGHT:2048,ASPECT_RATIO:1536/2048},SH={MIN:.25,MAX:1,INITIAL:.25,STEP:.1},Jh={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",ERASER:"eraser"},cO={CURSOR_COLOR:"#ff0000",CURSOR_OPACITY:.3},uO={ERASER_TO_THICKNESS_RATIO:2.5,THICKNESS_TO_ERASER_RATIO:.4},U4={MAX_ENTRIES:10,MAX_MEMORY_KB:500,COMPRESSION_THRESHOLD:200},kH=e=>{try{const t=JSON.stringify(e);return new Blob([t]).size/1024}catch(t){return console.warn("Error calculating memory usage:",t),0}},L0e=e=>Array.isArray(e)?e.map(t=>Array.isArray(t)?B0e(t):t):e,B0e=e=>{if(e.length<=2)return e;const t=[e[0]],r=2;for(let n=1;n<e.length-1;n++){const s=e[n-1],a=e[n];e[n+1],Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))>r&&t.push(a)}return t.push(e[e.length-1]),t},$0e=(e,t=Date.now())=>{const r=kH(e);return{data:[...e],timestamp:t,memoryUsage:r,compressed:r>U4.COMPRESSION_THRESHOLD}},dO=(e,t,r)=>{const n=$0e(t),s=kH(t),a=e.slice(0,r+1);a.push(n);let i=a;return s>U4.MAX_MEMORY_KB&&(i=U0e(a)),i.length>U4.MAX_ENTRIES&&(i=i.slice(-10)),{history:i,index:i.length-1}},U0e=e=>e.map(t=>t.memoryUsage>U4.COMPRESSION_THRESHOLD?{...t,data:L0e(t.data),compressed:!0}:t),fO=(e,t)=>{if(t<0||t>=e.length)return[];const r=e[t];return r?r.compressed?z0e(r.data):[...r.data]:[]},z0e=e=>[...e],hO=e=>e>0,mO=(e,t)=>e<t-1,W0e=()=>({history:[],index:-1}),H0e=()=>{const[e,t]=S.useState({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null}),[r,n]=S.useState([]),[s,a]=S.useState([]),i=S.useCallback(E=>{t(A=>({...A,...E}))},[]),o=S.useCallback(()=>{t({zoom:1,position:{x:0,y:0},rotation:0,currentTool:"pencil",currentColor:"#000000",currentThickness:2,eraserSize:10,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:[],historyIndex:-1,isFullscreen:!1,preFullscreenState:null})},[]),c=S.useCallback(E=>{const A={x:E.x,y:E.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(F=>({...F,isDrawing:!0,currentLine:[A]})):["line","rectangle","circle"].includes(e.currentTool)&&t(F=>({...F,isDrawing:!0,currentShape:{type:e.currentTool,startX:E.x,startY:E.y,endX:E.x,endY:E.y,color:e.currentColor,thickness:e.currentThickness}}))},[e.currentTool,e.currentColor,e.currentThickness]),u=S.useCallback(E=>{if(!e.isDrawing)return;const A={x:E.x,y:E.y,color:e.currentColor,thickness:e.currentThickness};e.currentTool==="pencil"?t(F=>({...F,currentLine:[...F.currentLine,A]})):e.currentShape&&t(F=>({...F,currentShape:{...F.currentShape,endX:E.x,endY:E.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape]),d=S.useCallback(()=>{if(!e.isDrawing)return;let E=r;if(e.currentTool==="pencil"&&e.currentLine.length>0?(E=[...r,e.currentLine],n(E)):e.currentShape&&(E=[...r,e.currentShape],n(E)),E!==r){const A=dO(e.drawingHistory,E,e.historyIndex);t(F=>({...F,isDrawing:!1,currentLine:[],currentShape:null,drawingHistory:A.history,historyIndex:A.index}))}else t(A=>({...A,isDrawing:!1,currentLine:[],currentShape:null}))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,r,e.drawingHistory,e.historyIndex]),f=S.useCallback(E=>Math.round(E*uO.ERASER_TO_THICKNESS_RATIO),[]),h=S.useCallback(E=>Math.round(E*uO.THICKNESS_TO_ERASER_RATIO),[]),g=S.useCallback(E=>{t(A=>({...A,currentThickness:E,eraserSize:f(E)}))},[f]),p=S.useCallback(E=>{t(A=>({...A,eraserSize:E,currentThickness:h(E)}))},[h]),y=S.useCallback(E=>{const A=dO(e.drawingHistory,E,e.historyIndex);t(F=>({...F,drawingHistory:A.history,historyIndex:A.index}))},[e.drawingHistory,e.historyIndex]),v=S.useCallback(()=>{if(hO(e.historyIndex)){const E=e.historyIndex-1,A=fO(e.drawingHistory,E);n([...A]),t(F=>({...F,historyIndex:E}))}},[e.historyIndex,e.drawingHistory]),C=S.useCallback(()=>{if(mO(e.historyIndex,e.drawingHistory.length)){const E=e.historyIndex+1,A=fO(e.drawingHistory,E);n([...A]),t(F=>({...F,historyIndex:E}))}},[e.historyIndex,e.drawingHistory]),w=S.useCallback(()=>{const E=W0e();t(A=>({...A,drawingHistory:E.history,historyIndex:E.index}))},[]),_=hO(e.historyIndex),T=mO(e.historyIndex,e.drawingHistory.length);return{drawingState:e,setDrawingState:t,drawingData:r,setDrawingData:n,textBoxes:s,setTextBoxes:a,updateDrawingState:i,resetDrawingState:o,startDrawing:c,continueDrawing:u,finishDrawing:d,handleThicknessChange:g,handleEraserSizeChange:p,saveToHistoryState:y,undo:v,redo:C,clearHistoryState:w,canUndoState:_,canRedoState:T}},gO={SCALE_DELTA:.05,CENTER_DELTA:20},Np=e=>{if(e.length<2)return 0;const t=e[0],r=e[1];return Math.sqrt(Math.pow(r.clientX-t.clientX,2)+Math.pow(r.clientY-t.clientY,2))},Tf=e=>{if(e.length<2)return null;const t=e[0],r=e[1];return{x:(t.clientX+r.clientX)/2,y:(t.clientY+r.clientY)/2}},G0e=(e,t)=>{if(e.length!==2||!t)return null;const r=Np(e),n=Np(t),s=Tf(e),a=Tf(t);if(n===0)return null;const i=Math.abs(r/n-1),o=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2));return i>gO.SCALE_DELTA?"zoom":o>gO.CENTER_DELTA?"pan":null},V0e=e=>{let t;return function(){const r=arguments,n=this;t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e.apply(n,r),t=null})}},xp=(e,t)=>{const r=t.getPointerPosition();return{x:(r.x-t.x())/t.scaleX(),y:(r.y-t.y())/t.scaleY()}},cc={PENCIL:"pencil",LINE:"line",RECTANGLE:"rectangle",CIRCLE:"circle",PAN:"pan"},z4={color:"#000000",thickness:2},pO=(e,t,r)=>({x:e.x,y:e.y,color:t||z4.color,thickness:r||z4.thickness}),q0e=(e,t,r,n,s)=>({type:e,startX:t.x,startY:t.y,endX:r.x,endY:r.y,color:n||z4.color,thickness:s||z4.thickness}),CH=(e,t,r,n,s,a)=>{const i=e-r,o=t-n,c=s-r,u=a-n,d=i*c+o*u,f=c*c+u*u;let h=-1;f!==0&&(h=d/f);let g,p;h<0?(g=r,p=n):h>1?(g=s,p=a):(g=r+h*c,p=n+h*u);const y=e-g,v=t-p;return Math.sqrt(y*y+v*v)},K0e=(e,t)=>{if(t.length===0)return[e];const r=t.sort((a,i)=>a.index-i.index),n=[];let s=0;for(const a of r)a.index>s&&n.push(e.slice(s,a.index+1)),s=a.index+1;return s<e.length&&n.push(e.slice(s)),n.filter(a=>a.length>0)},Y0e=(e,t,r,n)=>{const s=[],a=r/2;for(let i=0;i<n.length-1;i++){const o=n[i],c=n[i+1],u=CH(e,t,o.x,o.y,c.x,c.y);u<=a&&s.push({index:i,point:{x:o.x,y:o.y},distance:u})}return s},X0e=(e,t,r,n)=>{const s=Y0e(t,r,n,e);return s.length===0?[e]:K0e(e,s)},J0e=(e,t,r,n)=>{if(n.type==="rectangle"){const s=Math.min(n.startX,n.endX),a=Math.min(n.startY,n.endY),i=Math.abs(n.endX-n.startX),o=Math.abs(n.endY-n.startY);return e>=s&&e<=s+i&&t>=a&&t<=a+o}else if(n.type==="circle"){const s=(n.startX+n.endX)/2,a=(n.startY+n.endY)/2,i=Math.sqrt(Math.pow(n.endX-n.startX,2)+Math.pow(n.endY-n.startY,2))/2;return Math.sqrt(Math.pow(e-s,2)+Math.pow(t-a,2))<=i}return!1},xO=(e,t,r,n)=>{const s=[];for(const a of n)if(Array.isArray(a)){const i=X0e(a,e,t,r);s.push(...i)}else a.type==="line"?CH(e,t,a.startX,a.startY,a.endX,a.endY)>r/2&&s.push(a):(a.type==="rectangle"||a.type==="circle")&&(J0e(e,t,r,a)||s.push(a));return s},Q0e=(e,t,r,n,s,a,i,o,c)=>{const[u,d]=S.useState({isActive:!1,type:null,lastDistance:null,lastCenter:null}),f=S.useCallback(A=>{if(A.evt.preventDefault(),A.evt.stopPropagation(),e.currentTool===cc.PAN)return;const F=A.target.getStage(),j=xp(A,F),P=pO(j,e.currentColor,e.currentThickness);e.currentTool===cc.PENCIL?t(D=>({...D,isDrawing:!0,currentLine:[P]})):[cc.LINE,cc.RECTANGLE,cc.CIRCLE].includes(e.currentTool)&&t(D=>({...D,isDrawing:!0,currentShape:q0e(e.currentTool,j,j,e.currentColor,e.currentThickness)}))},[e.currentTool,e.currentColor,e.currentThickness,t]),h=S.useCallback(A=>{const F=xO(A.x,A.y,e.eraserSize,r);n(F),s(F)},[e.eraserSize,r,n,s]),g=S.useCallback(A=>{o&&(a(),y("Undo",A))},[o,a]),p=S.useCallback(A=>{c&&(i(),y("Redo",A))},[c,i]),y=S.useCallback((A,F)=>{const j=F.target.getStage(),P=xp(F,j),D=new Konva.Circle({x:P.x,y:P.y,radius:20,stroke:"#4CAF50",strokeWidth:3,opacity:.8,listening:!1});j.add(D),D.to({scaleX:2,scaleY:2,opacity:0,duration:.3,onFinish:()=>{D.destroy()}})},[]),v=S.useCallback(A=>{if(A.evt.preventDefault(),A.evt.stopPropagation(),!e.isDrawing)return;const F=A.target.getStage(),j=xp(A,F),P=pO(j,e.currentColor,e.currentThickness);e.currentTool===cc.PENCIL?t(D=>({...D,currentLine:[...D.currentLine,P]})):e.currentShape&&t(D=>({...D,currentShape:{...D.currentShape,endX:j.x,endY:j.y}}))},[e.isDrawing,e.currentTool,e.currentColor,e.currentThickness,e.currentShape,t]),C=S.useCallback(A=>{A&&A.evt&&(A.evt.preventDefault(),A.evt.stopPropagation()),e.isDrawing&&(e.currentTool===cc.PENCIL&&e.currentLine.length>0?n(F=>[...F,e.currentLine]):e.currentShape&&n(F=>[...F,e.currentShape]),t(F=>({...F,isDrawing:!1,currentLine:[],currentShape:null})))},[e.isDrawing,e.currentTool,e.currentLine,e.currentShape,n,t]),w=S.useCallback(A=>{A.evt.preventDefault(),A.evt.stopPropagation();const F=A.evt.touches;if(F.length===2)d({isActive:!0,type:"pan",lastDistance:Np(F),lastCenter:Tf(F)});else if(F.length===1)if(e.currentTool===cc.ERASER){const j=A.target.getStage(),P=xp(A,j);h(P)}else e.currentTool===cc.UNDO?g(A):e.currentTool===cc.REDO?p(A):f(A)},[Np,Tf,f,e.currentTool,h,g,p]),_=S.useCallback(V0e(A=>{A.evt.preventDefault(),A.evt.stopPropagation();const F=A.evt.touches;if(F.length===2&&u.isActive){const j=G0e(F,u);if(j==="zoom"){const P=Np(F),D=Tf(F),B=P/u.lastDistance,V=Math.max(.25,Math.min(1,e.zoom*B));t(Y=>({...Y,zoom:V,position:{x:D.x-(D.x-Y.position.x)*(V/Y.zoom),y:D.y-(D.y-Y.position.y)*(V/Y.zoom)}}))}else if(j==="pan"){const P=Tf(F),D=P.x-u.lastCenter.x,B=P.y-u.lastCenter.y;t(V=>({...V,position:{x:V.position.x+D,y:V.position.y+B}}))}d(P=>({...P,lastDistance:Np(F),lastCenter:Tf(F)}))}else if(F.length===1)if(e.currentTool===cc.ERASER){const j=A.target.getStage(),P=xp(A,j),D=xO(P.x,P.y,e.eraserSize,r);n(D)}else if(e.currentTool===cc.PAN){const j=Tf(F),P=j.x-u.lastCenter.x,D=j.y-u.lastCenter.y;t(B=>({...B,position:{x:B.position.x+P,y:B.position.y+D}})),d(B=>({...B,lastCenter:j}))}else v(A)}),[u,e.zoom,t,v]),T=S.useCallback(A=>{_(A)},[_]),E=S.useCallback(A=>{A.evt.preventDefault(),A.evt.stopPropagation();const F=A.evt.touches;F.length===0?(C(A),d({isActive:!1,type:null,lastDistance:null,lastCenter:null})):F.length===1&&d(j=>({...j,isActive:!1}))},[C]);return{handleTouchStart:w,handleTouchMove:T,handleTouchEnd:E,handleEraserStart:h,handleUndoTouch:g,handleRedoTouch:p,showTouchFeedback:y}},Z0e=(e,t)=>{const[r,n]=S.useState(e.MIN),[s,a]=S.useState({x:0,y:0}),i=S.useCallback((h,g,p)=>{const y=Math.max(e.MIN,Math.min(e.MAX,h));if(g){const v=y/r,C={x:g.x-(g.x-s.x)*v,y:g.y-(g.y-s.y)*v};return{zoom:y,position:C}}else{const v=t.width*y,C=t.height*y,w={x:(p.width-v)/2,y:(p.height-C)/2};return{zoom:y,position:w}}},[r,s,e,t]),o=S.useCallback(()=>{const h=Math.min(r*(1+e.STEP),e.MAX);n(h)},[r,e]),c=S.useCallback(()=>{const h=Math.max(r/(1+e.STEP),e.MIN);n(h)},[r,e]),u=S.useCallback((h,g,p)=>{const y=i(h,g,p);n(y.zoom),a(y.position)},[i]),d=S.useCallback((h,g)=>{a(p=>({x:p.x+h,y:p.y+g}))},[]),f=S.useCallback(()=>{n(e.INITIAL),a({x:0,y:0})},[e.INITIAL]);return{zoom:r,setZoom:n,position:s,setPosition:a,handleZoomIn:o,handleZoomOut:c,handleZoomToPoint:u,handlePan:d,resetZoom:f}},efe=e=>{const[t,r]=S.useState([]),[n,s]=S.useState(0),a=S.useCallback(f=>{if(console.log("parseDrawingData - input drawing:",f),console.log("parseDrawingData - drawing.answers:",f?.answers),!f?.answers)return console.log("parseDrawingData - no answers found, returning empty array"),[];try{if(typeof f.answers=="string"){console.log("parseDrawingData - parsing string answers");const h=JSON.parse(f.answers);return console.log("parseDrawingData - parsed string result:",h),h&&typeof h=="object"&&h.lines&&console.log("parseDrawingData - new format detected with lines and textBoxes"),h}if(f.answers&&typeof f.answers=="object"&&f.answers.lines)return console.log("parseDrawingData - answers is new format object"),f.answers;if(Array.isArray(f.answers)){if(console.log("parseDrawingData - answers is array"),f.answers.every(g=>typeof g=="string"))try{const g=f.answers.map(p=>{try{return JSON.parse(p)}catch{return p}});return console.log("parseDrawingData - parsed array elements"),g}catch{return console.log("parseDrawingData - failed to parse array elements, returning raw"),f.answers}return f.answers}return console.log("parseDrawingData - answers is neither string nor array, returning empty array"),[]}catch(h){return console.error("Error parsing drawing data:",h),[]}},[]),i=S.useCallback(f=>{if(console.log("processQuestions - input answers:",f),console.log("processQuestions - answers type:",typeof f),console.log("processQuestions - answers isArray:",Array.isArray(f)),f&&typeof f=="object"&&f.lines){console.log("processQuestions - new format detected with lines and textBoxes"),console.log("processQuestions - lines count:",f.lines?.length),console.log("processQuestions - textBoxes count:",f.textBoxes?.length);const g=o(f.lines);return console.log("processQuestions - canvas groups:",g),console.log("processQuestions - number of canvas groups:",g.length),g.map((p,y)=>(console.log(`processQuestions - canvas ${y} strokes:`,p),console.log(`processQuestions - canvas ${y} stroke count:`,p.length),{questionNumber:y+1,drawingData:p,textBoxes:f.textBoxes||[]}))}if(Array.isArray(f)&&f.every(g=>g&&typeof g=="object"&&g.lines))return console.log("processQuestions - array of {lines,textBoxes} detected"),f.map((g,p)=>({questionNumber:p+1,drawingData:g.lines||[],textBoxes:g.textBoxes||[]}));if(!Array.isArray(f))return console.log("processQuestions - answers is not array or object, returning empty array"),[];console.log("processQuestions - processing",f.length,"answers (old format)");const h=o(f);return console.log("processQuestions - canvas groups:",h),console.log("processQuestions - number of canvas groups:",h.length),h.map((g,p)=>(console.log(`processQuestions - canvas ${p} strokes:`,g),console.log(`processQuestions - canvas ${p} stroke count:`,g.length),{questionNumber:p+1,drawingData:g,textBoxes:[]}))},[]),o=S.useCallback(f=>{console.log("groupStrokesByCanvas - input answers:",f);const h=c(f);return console.log("groupStrokesByCanvas - using strategy:",h),h==="by_question_boundary"?u(f):h==="by_stroke_type"?d(f):[f]},[]),c=S.useCallback(f=>{console.log("determineGroupingStrategy - analyzing answers:",f);let h=0,g=0;return f.forEach(p=>{Array.isArray(p)?h++:typeof p=="object"&&g++}),console.log("determineGroupingStrategy - arrayCount:",h,"objectCount:",g),h>0&&g>0?"by_stroke_type":f.length>3?"by_question_boundary":"single_canvas"},[]),u=S.useCallback(f=>{console.log("groupByQuestionBoundary - grouping answers:",f);const h=[];let g=[];const p=Math.ceil(f.length/2);for(let y=0;y<f.length;y++)g.push(f[y]),(y+1)%p===0&&y<f.length-1&&(h.push([...g]),g=[]);return g.length>0&&h.push(g),console.log("groupByQuestionBoundary - result:",h),h},[]),d=S.useCallback(f=>{console.log("groupByStrokeType - grouping answers:",f);const h=[],g=[];f.forEach(y=>{Array.isArray(y)?h.push(y):typeof y=="object"&&g.push(y)});const p=[];return h.length>0&&p.push(h),g.length>0&&p.push(g),console.log("groupByStrokeType - result:",p),p},[]);return S.useEffect(()=>{if(e){console.log("useDataParsing - drawing object:",e),console.log("useDataParsing - drawing.answers:",e.answers),console.log("useDataParsing - drawing.answers type:",typeof e.answers),console.log("useDataParsing - drawing.answers length:",e.answers?.length);const f=a(e);console.log("useDataParsing - parsed answers:",f),console.log("useDataParsing - parsed answers type:",typeof f),console.log("useDataParsing - parsed answers length:",f?.length);const h=i(f);console.log("useDataParsing - processed questions:",h),console.log("useDataParsing - processed questions length:",h?.length),h.length>0&&(console.log("useDataParsing - first question drawingData:",h[0]?.drawingData),console.log("useDataParsing - first question drawingData length:",h[0]?.drawingData?.length)),r(h),s(0)}},[e,a,i]),{questionsData:t,setQuestionsData:r,currentQuestionIndex:n,setCurrentQuestionIndex:s,parseDrawingData:a,processQuestions:i}},yO={MIN:.25,INITIAL:1},tfe=(e,t)=>{const[r,n]=S.useState(!1),[s,a]=S.useState(null),i=S.useCallback(()=>{document.fullscreenElement||(a({zoom:e.zoom,position:{...e.position}}),document.documentElement.requestFullscreen().then(()=>{n(!0),t(c=>({...c,zoom:yO.MIN,position:{x:0,y:0},isFullscreen:!0}))}).catch(c=>{console.error("Error entering fullscreen:",c)}))},[e.zoom,e.position,t]),o=S.useCallback(()=>{document.fullscreenElement&&document.exitFullscreen().then(()=>{n(!1),s?(t(c=>({...c,zoom:s.zoom,position:s.position,isFullscreen:!1})),a(null)):t(c=>({...c,zoom:yO.INITIAL,position:{x:0,y:0},isFullscreen:!1}))}).catch(c=>{console.error("Error exiting fullscreen:",c)})},[s,t]);return{isFullscreen:r,enterFullscreen:i,exitFullscreen:o}},TH=S.forwardRef(({drawingData:e,textBoxes:t=[],drawingState:r,canvasSize:n,zoom:s,position:a,onTouchStart:i,onTouchMove:o,onTouchEnd:c,mousePosition:u,isMouseOverCanvas:d,isEraserDrawing:f},h)=>{const g=S.useRef(null),[p,y]=S.useState(.25),[v,C]=S.useState(null),[w,_]=S.useState({x:0,y:0}),[T,E]=S.useState(!1),A=S.useCallback(({x:G,y:W,size:M,visible:I,isDrawing:z})=>!I||!G||!W?null:l.jsx(Lf,{x:G,y:W,radius:M/2,stroke:cO.CURSOR_COLOR,strokeWidth:2,dash:[5,5],opacity:z?.8:cO.CURSOR_OPACITY,listening:!1,zIndex:1e3}),[]),F=S.useCallback(G=>{if(r.currentTool===Jh.ERASER){const W=G.target.getStage(),M=xp(G,W);_(M)}},[r.currentTool]),j=S.useCallback(()=>{r.currentTool===Jh.ERASER&&E(!0)},[r.currentTool]),P=S.useCallback(()=>{E(!1)},[]);S.useEffect(()=>{const G=h.current;if(G)return G.on("mousemove",F),G.on("mouseenter",j),G.on("mouseleave",P),()=>{G.off("mousemove",F),G.off("mouseenter",j),G.off("mouseleave",P)}},[F,j,P,h]),S.useEffect(()=>{const G=n.width??n.WIDTH,W=n.height??n.HEIGHT,M=()=>{const I=g.current;if(!I)return;const z=I.clientWidth||1,q=I.clientHeight||1,ne=Math.abs(r.rotation%180)===90,X=ne?W:G,se=ne?G:W,ce=Math.min(z/(X||1),q/(se||1));y(Math.min(ce,1))};return M(),window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[n.width,n.height,n.WIDTH,n.HEIGHT,r.rotation]);const D=S.useMemo(()=>{const G=g.current;if(!G||!v)return 0;const W=G.clientWidth||1,M=G.clientHeight||1,I=Math.min(W/Math.max(v.width,1),M/Math.max(v.height,1));return Math.min(I,SH.MAX)},[v]),B=S.useMemo(()=>Math.max(s,p||1),[s,p]),V=S.useMemo(()=>{const G=n.width??n.WIDTH,W=n.height??n.HEIGHT;if(!g.current)return{x:0,y:0};const M=g.current.clientWidth||1,I=g.current.clientHeight||1,z=(M-G*B)/2,q=(I-W*B)/2;return s<=p?{x:z,y:q}:{x:a.x!==void 0?a.x:z,y:a.y!==void 0?a.y:q}},[a,s,p,B,n.width,n.height,v,D]);S.useEffect(()=>{if(!Array.isArray(e)||e.length===0){C(null);return}let G=1/0,W=1/0,M=-1/0,I=-1/0;const z=(se,ce)=>{Number.isFinite(se)&&Number.isFinite(ce)&&(se<G&&(G=se),ce<W&&(W=ce),se>M&&(M=se),ce>I&&(I=ce))};if(e.forEach(se=>{if(Array.isArray(se))se.forEach(ce=>z(ce.x,ce.y));else if(se&&typeof se=="object"){if(se.type==="line")z(se.startX,se.startY),z(se.endX,se.endY);else if(se.type==="rectangle")z(se.startX,se.startY),z(se.endX,se.endY);else if(se.type==="circle"){const ce=Math.sqrt(Math.pow(se.endX-se.startX,2)+Math.pow(se.endY-se.startY,2))/2,pe=(se.startX+se.endX)/2,be=(se.startY+se.endY)/2;z(pe-ce,be-ce),z(pe+ce,be+ce)}}}),!Number.isFinite(G)||!Number.isFinite(W)||!Number.isFinite(M)||!Number.isFinite(I)){C(null);return}const q=16,ne=Math.max(1,M-G+q*2),X=Math.max(1,I-W+q*2);C({minX:G-q,minY:W-q,width:ne,height:X})},[e]),S.useEffect(()=>{console.log("CanvasViewer - drawingData:",e),console.log("CanvasViewer - drawingData length:",e?.length),console.log("CanvasViewer - textBoxes:",t),console.log("CanvasViewer - textBoxes length:",t?.length),e&&e.length>0&&console.log("CanvasViewer - first item:",e[0]),t&&t.length>0&&console.log("CanvasViewer - first textBox:",t[0])},[e,t]),S.useEffect(()=>{const G=n.width??n.WIDTH,W=n.height??n.HEIGHT;console.log("CanvasViewer - canvas dimensions:",{width:G,height:W}),console.log("CanvasViewer - zoom:",s,"fitZoom:",p,"displayScale:",B),console.log("CanvasViewer - stagePosition:",V)},[n,s,p,B,V]);const Y=(G,W)=>{if(console.log(`CanvasViewer - rendering element ${W}:`,G),Array.isArray(G))return console.log(`CanvasViewer - rendering line with ${G.length} points`),l.jsx(Ki,{points:G.flatMap(M=>[M.x,M.y]),stroke:G[0]?.color||"#000000",strokeWidth:G[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},W);if(G.type==="line")return l.jsx(Ki,{points:[G.startX,G.startY,G.endX,G.endY],stroke:G.color,strokeWidth:G.thickness,lineCap:"round"},W);if(G.type==="rectangle"){const M=Math.abs(G.endX-G.startX),I=Math.abs(G.endY-G.startY),z=Math.min(G.startX,G.endX),q=Math.min(G.startY,G.endY);return l.jsx(Ei,{x:z,y:q,width:M,height:I,stroke:G.color,strokeWidth:G.thickness,fill:"transparent"},W)}else if(G.type==="circle"){const M=Math.sqrt(Math.pow(G.endX-G.startX,2)+Math.pow(G.endY-G.startY,2))/2,I=(G.startX+G.endX)/2,z=(G.startY+G.endY)/2;return l.jsx(Lf,{x:I,y:z,radius:M,stroke:G.color,strokeWidth:G.thickness,fill:"transparent"},W)}return null},re=()=>{if(!r.isDrawing)return null;if(r.currentTool===Jh.PENCIL&&r.currentLine.length>0)return l.jsx(Ki,{points:r.currentLine.flatMap(G=>[G.x,G.y]),stroke:r.currentColor,strokeWidth:r.currentThickness,tension:.5,lineCap:"round",lineJoin:"round"});if(r.currentShape){const{type:G,startX:W,startY:M,endX:I,endY:z,color:q,thickness:ne}=r.currentShape;if(G===Jh.LINE)return l.jsx(Ki,{points:[W,M,I,z],stroke:q,strokeWidth:ne,lineCap:"round"});if(G===Jh.RECTANGLE){const X=Math.abs(I-W),se=Math.abs(z-M),ce=Math.min(W,I),pe=Math.min(M,z);return l.jsx(Ei,{x:ce,y:pe,width:X,height:se,stroke:q,strokeWidth:ne,fill:"transparent"})}else if(G===Jh.CIRCLE){const X=Math.sqrt(Math.pow(I-W,2)+Math.pow(z-M,2))/2,se=(W+I)/2,ce=(M+z)/2;return l.jsx(Lf,{x:se,y:ce,radius:X,stroke:q,strokeWidth:ne,fill:"transparent"})}}return null},te=r.isFullscreen?{position:"fixed",inset:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",zIndex:60}:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent"},ee={transform:`rotate(${r.rotation}deg)`,transformOrigin:"center center"},L=S.useCallback(G=>{G.preventDefault(),G.stopPropagation()},[]),Q=S.useCallback(G=>{G.preventDefault(),G.stopPropagation()},[]),U=S.useCallback(G=>{G.preventDefault(),G.stopPropagation()},[]);return l.jsx("div",{style:{...te,touchAction:"none",WebkitTouchCallout:"none"},ref:g,className:"select-none",onTouchStart:L,onTouchMove:Q,onTouchEnd:U,children:l.jsx("div",{style:{...ee,touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onTouchStart:L,onTouchMove:Q,onTouchEnd:U,children:l.jsx(Nm,{ref:h,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),scaleX:B,scaleY:B,x:V.x,y:V.y,onTouchStart:i,onTouchMove:o,onTouchEnd:c,children:l.jsxs(Tm,{children:[l.jsx(Ei,{x:0,y:0,width:Math.max((n.width??n.WIDTH)||0,1536),height:Math.max((n.height??n.HEIGHT)||0,2048),fill:"white"}),e.map((G,W)=>(console.log(`CanvasViewer - mapping item ${W}:`,G),Y(G,W))),t&&t.map((G,W)=>l.jsx(Ei,{x:G.x,y:G.y,width:G.width,height:G.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}},`textbox-${W}`)),t&&t.map((G,W)=>l.jsx(Vu,{x:G.x+8,y:G.y+8,width:G.width-16,height:G.height-16,text:G.text,fontSize:G.fontSize||14,fill:G.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"},`text-${W}`)),re(),r.currentTool===Jh.ERASER&&l.jsx(A,{x:w.x,y:w.y,size:r.eraserSize,visible:T,isDrawing:f})]})})})})});TH.displayName="CanvasViewer";function rfe({containerRef:e,canvasSize:t,rotation:r=0}){const[n,s]=S.useState(1),[a,i]=S.useState({x:0,y:0}),o=S.useRef({width:1,height:1}),c=S.useRef(.01),u=S.useRef(0),d=S.useRef(!1),f=S.useCallback(()=>{const T=t?.width??t?.WIDTH??0,E=t?.height??t?.HEIGHT??0,A=Math.abs(r%180)===90;return{width:A?E:T,height:A?T:E}},[t,r]),h=S.useCallback(()=>{const T=e?.current;if(!T)return{width:1,height:1};const E=T.clientWidth||1,A=T.clientHeight||1;return o.current={width:E,height:A},{width:E,height:A}},[e]),g=S.useCallback(()=>{const{width:T,height:E}=o.current,{width:A,height:F}=f(),j=T/Math.max(A,1),P=E/Math.max(F,1);return Math.min(j,P,1)*.98},[f]),p=S.useCallback(T=>{const{width:E,height:A}=o.current,{width:F,height:j}=f(),P=Math.max(c.current,Math.min(T,1.5));let D=(E-F*P)/2,B=(A-j*P)/2;const V=E-F*P,Y=A-j*P;D=Math.min(Math.max(0,D),Math.max(0,V)),B=Math.min(Math.max(0,B),Math.max(0,Y));try{console.log("[Camera] centerAtScale",{targetScale:T,clampedScale:P,container:{containerW:E,containerH:A},canvas:{canvasW:F,canvasH:j},translate:{x:D,y:B},rotation:r})}catch{}i({x:D,y:B}),s(P)},[f]),y=S.useCallback(()=>{const{width:T,height:E}=h(),{width:A,height:F}=f(),j=g();let P=(T-A*j)/2,D=(E-F*j)/2;const B=T-A*j,V=E-F*j;P=Math.min(Math.max(0,P),Math.max(0,B)),D=Math.min(Math.max(0,D),Math.max(0,V));try{console.log("[Camera] fitCanvas",{scale:j,container:{containerW:T,containerH:E},canvas:{canvasW:A,canvasH:F},translate:{x:P,y:D},rotation:r})}catch{}s(j),i({x:P,y:D}),c.current=j,d.current=!1},[f,h,g]),v=S.useCallback(()=>{const{width:T,height:E}=h(),{width:A,height:F}=f(),j=(T-A)/2,P=(E-F)/2;s(1),i({x:j,y:P})},[f,h]),C=S.useCallback((T,E)=>{const{width:A,height:F}=o.current,{width:j,height:P}=f(),D=Math.max(c.current,Math.min(T,1.5));if(E&&Number.isFinite(E.x)&&Number.isFinite(E.y)){const B={x:(E.x-a.x)/n,y:(E.y-a.y)/n},V=E.x-B.x*D,Y=E.y-B.y*D;try{console.log("[Camera] zoomTo(pointer) ->",{from:n,to:D})}catch{}s(D),i({x:V,y:Y}),u.current=Date.now()+400,d.current=!0}else{let B=(A-j*D)/2,V=(F-P*D)/2;const Y=A-j*D,re=F-P*D;B=Math.min(Math.max(0,B),Math.max(0,Y)),V=Math.min(Math.max(0,V),Math.max(0,re));try{console.log("[Camera] zoomTo(center) ->",{from:n,to:D})}catch{}s(D),i({x:B,y:V}),u.current=Date.now()+400,d.current=!0}},[f,n,a]),w=S.useCallback((T,E)=>{const A=n*T,{width:F,height:j}=o.current,P={x:F/2,y:j/2};C(A,E||P)},[n,C]),_=S.useCallback((T,E)=>{i(A=>({x:A.x+T,y:A.y+E})),u.current=Date.now()+200,d.current=!0},[]);return S.useEffect(()=>{const T=e?.current;if(!T)return;const E=new ResizeObserver(()=>{h();const A=g();if(c.current=A,!(Date.now()<u.current)&&!d.current){try{console.log("[Camera] resize centerAtScale",{scale:n})}catch{}p(n)}});return E.observe(T),h(),()=>E.disconnect()},[e,h,g,p,n]),S.useEffect(()=>{d.current=!1,c.current=g(),p(n)},[r,t?.width,t?.height,t?.WIDTH,t?.HEIGHT,g,p,n]),S.useMemo(()=>({scale:n,translate:a,setScale:s,setTranslate:i,centerAtScale:p,fitCanvas:y,oneToOne:v,zoomTo:C,zoomByFactor:w,panBy:_}),[n,a,p,y,v,C,w,_])}const Ey=new Map,NH=S.forwardRef(({drawingData:e,textBoxes:t=[],canvasSize:r,rotation:n=0,onScaleChange:s,persistKey:a="viewer",onTextBoxEdit:i},o)=>{const c=S.useRef(null),u=S.useRef(null),d=rfe({containerRef:c,canvasSize:r,rotation:n}),[f,h]=S.useState({width:1,height:1}),g=S.useRef(null),p=S.useRef(null),[y,v]=S.useState(null);S.useEffect(()=>{console.log("[ViewerCanvas] drawingData received:",e),console.log("[ViewerCanvas] drawingData length:",e?.length),e&&e.length>0&&console.log("[ViewerCanvas] First drawing element:",e[0]),console.log("[ViewerCanvas] textBoxes:",t),console.log("[ViewerCanvas] textBoxes length:",t?.length)},[e]),S.useEffect(()=>{typeof s=="function"&&s(d.scale);try{console.log("[ViewerCanvas] scale changed",{scale:d.scale})}catch{}if(a){const U=Ey.get(a)||{};Ey.set(a,{...U,scale:d.scale})}},[d.scale,s]),S.useEffect(()=>{if(a){const U=Ey.get(a)||{};Ey.set(a,{...U,translate:{x:d.translate.x,y:d.translate.y}})}},[a,d.translate.x,d.translate.y]),S.useImperativeHandle(o,()=>({zoomIn:U=>d.zoomByFactor(1.1,U),zoomOut:U=>d.zoomByFactor(1/1.1,U),fitCanvas:()=>d.fitCanvas(),oneToOne:()=>d.oneToOne(),getScale:()=>d.scale,getStage:()=>u.current,getPointerPosition:()=>u.current?.getPointerPosition?.(),exportPNGFullCanvas:()=>{const U=u.current;if(!U)return null;const G=r?.width??r?.WIDTH??1536,W=r?.height??r?.HEIGHT??2048,M={scaleX:U.scaleX(),scaleY:U.scaleY(),x:U.x(),y:U.y(),width:U.width(),height:U.height()},I=g.current,z=p.current,q=I?{x:I.x(),y:I.y(),scaleX:I.scaleX(),scaleY:I.scaleY()}:null,ne=z?{x:z.x(),y:z.y(),rotation:z.rotation()}:null;try{return U.scale({x:1,y:1}),U.position({x:0,y:0}),U.size({width:G,height:W}),I&&(I.position({x:0,y:0}),I.scale({x:1,y:1})),z&&(z.position({x:0,y:0}),z.rotation(0)),U.batchDraw(),U.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:G,height:W})}finally{z&&ne&&(z.position({x:ne.x,y:ne.y}),z.rotation(ne.rotation)),I&&q&&(I.position({x:q.x,y:q.y}),I.scale({x:q.scaleX,y:q.scaleY})),U.scale({x:M.scaleX,y:M.scaleY}),U.position({x:M.x,y:M.y}),U.size({width:M.width,height:M.height}),U.batchDraw()}}}),[d]),S.useEffect(()=>{const U=c.current;if(!U)return;const G=()=>{h({width:U.clientWidth||1,height:U.clientHeight||1})};G();const W=new ResizeObserver(G);return W.observe(U),()=>W.disconnect()},[]),S.useEffect(()=>{if(!Array.isArray(e)||e.length===0){v(null);return}let U=1/0,G=1/0,W=-1/0,M=-1/0;const I=(X,se)=>{Number.isFinite(X)&&Number.isFinite(se)&&(X<U&&(U=X),se<G&&(G=se),X>W&&(W=X),se>M&&(M=se))};if(e.forEach(X=>{if(Array.isArray(X))X.forEach(se=>I(se.x,se.y));else if(X&&typeof X=="object"){if(X.type==="line")I(X.startX,X.startY),I(X.endX,X.endY);else if(X.type==="rectangle")I(X.startX,X.startY),I(X.endX,X.endY);else if(X.type==="circle"){const se=Math.hypot(X.endX-X.startX,X.endY-X.startY)/2,ce=(X.startX+X.endX)/2,pe=(X.startY+X.endY)/2;I(ce-se,pe-se),I(ce+se,pe+se)}}}),!Number.isFinite(U)||!Number.isFinite(G)||!Number.isFinite(W)||!Number.isFinite(M)){v(null);return}const z=16,q=Math.max(1,W-U+z*2),ne=Math.max(1,M-G+z*2);v({minX:U-z,minY:G-z,width:q,height:ne,centerX:U-z+q/2,centerY:G-z+ne/2})},[e]);const C=S.useMemo(()=>{if(!y)return{scale:1,x:0,y:0};const U=r?.width??r?.WIDTH??1536,G=r?.height??r?.HEIGHT??2048,W=Math.min(U/Math.max(1,y.width),G/Math.max(1,y.height),1),M=y.width*W,I=y.height*W,z=(U-M)/2,q=(G-I)/2,ne=z-y.minX*W,X=q-y.minY*W;return{scale:W,x:ne,y:X}},[y,r?.width,r?.height,r?.WIDTH,r?.HEIGHT]),w=S.useRef(!1);S.useEffect(()=>{if(w.current)return;const U=a?Ey.get(a):null;U&&Number.isFinite(U.scale)&&U.translate&&Number.isFinite(U.translate.x)&&Number.isFinite(U.translate.y)?(d.setScale(U.scale),d.setTranslate(U.translate)):d.fitCanvas(),w.current=!0},[a,d]),S.useEffect(()=>{try{console.log("[ViewerCanvas] rotation changed",{rotation:n,scale:d.scale,translate:d.translate})}catch{}d.fitCanvas()},[n]),S.useEffect(()=>{d.centerAtScale(d.scale)},[n]);const _=U=>{U.evt.preventDefault();const G=u.current;if(!G)return;const W=G.getPointerPosition(),M=Math.pow(1.0015,-U.evt.deltaY);d.zoomByFactor(M,W)},T=S.useRef(!1),E=S.useRef({x:0,y:0}),A=()=>{const U=c.current;if(!U)return 1;const G=U.clientWidth||1,W=U.clientHeight||1,M=r?.width??r?.WIDTH??1,I=r?.height??r?.HEIGHT??1,z=Math.abs(n%180)===90,q=z?I:M,ne=z?M:I,X=Math.min(G/q,W/ne);return Math.min(X,1)},F=U=>{const G=A();d.scale<=G||(T.current=!0,E.current={x:U.evt.clientX,y:U.evt.clientY})},j=U=>{if(!T.current)return;const G=U.evt.clientX-E.current.x,W=U.evt.clientY-E.current.y;E.current={x:U.evt.clientX,y:U.evt.clientY},d.panBy(G,W)},P=()=>{T.current=!1},D=1536,B=2048,V=(U,G)=>{if(console.log(`[ViewerCanvas] Rendering drawing element ${G}:`,U),Array.isArray(U))return console.log(`[ViewerCanvas] Array item with ${U.length} points:`,U.slice(0,3)),l.jsx(Ki,{points:U.flatMap(W=>[W.x,W.y]),stroke:U[0]?.color||"#000000",strokeWidth:U[0]?.thickness||2,tension:.5,lineCap:"round",lineJoin:"round"},G);if(U?.type==="line")return l.jsx(Ki,{points:[U.startX,U.startY,U.endX,U.endY],stroke:U.color,strokeWidth:U.thickness,lineCap:"round"},G);if(U?.type==="rectangle"){const W=Math.abs(U.endX-U.startX),M=Math.abs(U.endY-U.startY),I=Math.min(U.startX,U.endX),z=Math.min(U.startY,U.endY);return l.jsx(Ei,{x:I,y:z,width:W,height:M,stroke:U.color,strokeWidth:U.thickness,fill:"transparent"},G)}else if(U?.type==="circle"){const W=Math.sqrt(Math.pow(U.endX-U.startX,2)+Math.pow(U.endY-U.startY,2))/2,M=(U.startX+U.endX)/2,I=(U.startY+U.endY)/2;return l.jsx(Lf,{x:M,y:I,radius:W,stroke:U.color,strokeWidth:U.thickness,fill:"transparent"},G)}return null},Y=S.useRef(new Map),re=S.useRef(null),te=S.useRef({x:0,y:0}),ee=S.useCallback(U=>{const G=c.current;G&&(G.setPointerCapture?.(U.pointerId),Y.current.set(U.pointerId,{x:U.clientX,y:U.clientY}),E.current={x:U.clientX,y:U.clientY})},[]),L=S.useCallback(U=>{const G=Y.current;if(G.has(U.pointerId)){if(G.set(U.pointerId,{x:U.clientX,y:U.clientY}),G.size===2){const W=Array.from(G.values()),M=W[1].x-W[0].x,I=W[1].y-W[0].y,z=Math.hypot(M,I),q={x:(W[0].x+W[1].x)/2,y:(W[0].y+W[1].y)/2},ne=u.current,X=ne&&ne.getPointerPosition()||q;if(re.current!=null){const se=z/Math.max(1,re.current);d.zoomByFactor(se,X)}re.current=z,te.current=X}else if(G.size===1){const W=A();if(d.scale<=W)return;const M=U.clientX-E.current.x,I=U.clientY-E.current.y;E.current={x:U.clientX,y:U.clientY},d.panBy(M,I)}}},[]),Q=S.useCallback(U=>{const G=c.current;G&&(G.releasePointerCapture?.(U.pointerId),Y.current.delete(U.pointerId),Y.current.size<2&&(re.current=null),T.current=!1)},[]);return l.jsx("div",{ref:c,style:{width:"100%",height:"100%",display:"block",backgroundColor:"transparent",touchAction:"none",WebkitTouchCallout:"none"},className:"select-none",onPointerDown:ee,onPointerMove:L,onPointerUp:Q,children:l.jsx(Nm,{ref:u,width:f.width,height:f.height,onWheel:_,onMouseDown:F,onMouseMove:j,onMouseUp:P,onMouseLeave:P,children:l.jsx(Tm,{children:l.jsx(ou,{ref:g,x:d.translate.x,y:d.translate.y,scaleX:d.scale,scaleY:d.scale,children:(()=>{const U=(n%360+360)%360;let G=0,W=0;U===90?G=B:U===180?(G=D,W=B):U===270&&(W=D);try{console.log("[ViewerCanvas] rotatedGroup offset",{rotation:n,norm:U,tx:G,ty:W,canvasW:D,canvasH:B})}catch{}return l.jsxs(ou,{ref:p,x:G,y:W,rotation:n,children:[l.jsx(Ei,{x:0,y:0,width:D,height:B,fill:"white"}),l.jsxs(ou,{x:C.x,y:C.y,scaleX:C.scale,scaleY:C.scale,children:[Array.isArray(e)?(console.log("[ViewerCanvas] Rendering",e.length,"drawing elements"),e.map((M,I)=>V(M,I))):null,Array.isArray(t)&&t.map((M,I)=>l.jsxs(ou,{x:M.x,y:M.y,children:[l.jsx(Ei,{width:M.width,height:M.height,fill:"#ffffff",stroke:"#d1d5db",strokeWidth:1,cornerRadius:6,shadowColor:"black",shadowBlur:2,shadowOffset:{x:1,y:1}}),l.jsx(Vu,{text:M.text,x:8,y:8,width:Math.max(0,(M.width||0)-16),height:Math.max(0,(M.height||0)-16),fontSize:M.fontSize||14,fill:M.color||"#000000",wrap:"word",align:"left",verticalAlign:"top"})]},`tb-${I}`))]})]})})()})})})})});NH.displayName="ViewerCanvas";const nfe=({zoom:e,onZoomIn:t,onZoomOut:r,onRotate:n,onDownload:s,onFullscreen:a,isFullscreen:i})=>l.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2 items-center justify-center",children:[l.jsx(ht,{onClick:t,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom In",children:l.jsx(D0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(ht,{onClick:r,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Zoom Out",children:l.jsx(I0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(ht,{onClick:n,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Rotate",children:l.jsx(F0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(ht,{onClick:s,variant:"secondary",size:"icon",className:"w-10 h-10",title:"Download",children:l.jsx(E0e,{className:"w-4 h-4 mx-auto my-auto"})}),l.jsx(ht,{onClick:a,variant:"secondary",size:"icon",className:"w-10 h-10",title:i?"Exit Fullscreen":"Enter Fullscreen",children:i?l.jsx(_H,{className:"w-4 h-4 mx-auto my-auto"}):l.jsx(j0e,{className:"w-4 h-4 mx-auto my-auto"})})]}),sfe=({currentQuestion:e,totalQuestions:t,onPrevious:r,onNext:n,drawingDataLength:s})=>t<=1?null:l.jsx("div",{className:"px-4 py-2 bg-gray-50 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(ht,{onClick:r,disabled:e===0,variant:"outline",size:"sm",children:"Previous"}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Question ",e+1," of ",t]}),l.jsx(ht,{onClick:n,disabled:e===t-1,variant:"outline",size:"sm",children:"Next"})]}),l.jsxs("div",{className:"text-sm text-gray-500",children:[s," lines"]})]})}),EH=({drawing:e,isOpen:t,onClose:r,onScoreChange:n,onMaxScoreChange:s,isTeacherView:a=!1,onSaveScore:i})=>{const{drawingState:o,setDrawingState:c,drawingData:u,setDrawingData:d,textBoxes:f,setTextBoxes:h,saveToHistoryState:g,undo:p,redo:y,canUndoState:v,canRedoState:C}=H0e(),{questionsData:w,currentQuestionIndex:_,setCurrentQuestionIndex:T}=efe(e),{zoom:E,position:A,handleZoomIn:F,handleZoomOut:j}=Z0e(SH,eu),{isFullscreen:P,enterFullscreen:D,exitFullscreen:B}=tfe(o,c),{handleTouchStart:V,handleTouchMove:Y,handleTouchEnd:re}=Q0e(o,c,u,d,g,p,y,v,C),te=S.useRef(null),ee=S.useRef(null),[L,Q]=S.useState(1),[U,G]=S.useState(""),[W,M]=S.useState("");S.useEffect(()=>{if(console.log("DrawingModal - questionsData:",w),console.log("DrawingModal - currentQuestionIndex:",_),w.length>0){const pe=w[_]?.drawingData||[],be=w[_]?.textBoxes||[];console.log("DrawingModal - setting drawingData:",pe),console.log("DrawingModal - setting textBoxes:",be),d(pe),h(be)}},[w,_,d,h]),S.useEffect(()=>{t&&e&&(G((Number.isFinite(e.score)?e.score:0).toString()),M("10"))},[t,e]);const I=()=>{_>0&&T(_-1)},z=()=>{_<w.length-1&&T(_+1)},q=()=>{v&&p()},ne=()=>{C&&y()};S.useEffect(()=>{const pe=be=>{(be.ctrlKey||be.metaKey)&&(be.key==="z"&&!be.shiftKey?(be.preventDefault(),q()):(be.key==="y"||be.key==="z"&&be.shiftKey)&&(be.preventDefault(),ne()))};return document.addEventListener("keydown",pe),()=>document.removeEventListener("keydown",pe)},[q,ne]);const X=()=>{c(pe=>({...pe,rotation:(pe.rotation+90)%360}))},se=()=>{if(a&&ee.current){const je=ee.current.exportPNGFullCanvas();if(!je)return;const Re=document.createElement("a");Re.href=je,Re.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(Re),Re.click(),document.body.removeChild(Re);return}const pe=te.current;if(!pe)return;const be=pe.toDataURL({mimeType:"image/png",quality:1,pixelRatio:1,x:0,y:0,width:eu.WIDTH,height:eu.HEIGHT}),oe=document.createElement("a");oe.href=be,oe.download=`drawing-${e?.name||"student"}-${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)},ce=async()=>{if(!a)return r();const pe=parseInt(U,10),be=10;Number.isFinite(pe)&&(typeof i=="function"?await i({resultId:e.id,score:Math.max(0,Math.min(10,pe)),maxScore:be}):(n&&n(e.id,pe),s&&s(e.id,be))),r()};return!t||!e?null:l.jsx(Wo,{children:l.jsx(vt.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,children:l.jsxs(vt.div,{className:"bg-white rounded-lg shadow-xl max-w-4xl h-[90vh] w-full mx-4 flex flex-col select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:pe=>pe.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Drawing Submission"}),l.jsxs("p",{className:"text-sm text-gray-600",children:[e.name," ",e.surname," - ",e.test_name]})]}),l.jsx(ht,{onClick:r,variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-600",children:l.jsx(_H,{className:"w-5 h-5"})})]}),w.length>1&&l.jsx(sfe,{currentQuestion:_,totalQuestions:w.length,onPrevious:I,onNext:z,drawingDataLength:w[_]?.drawingData?.length||0}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0",children:[l.jsxs("div",{className:"flex-1 min-h-0 relative overflow-hidden bg-gray-100 p-0 sm:p-4 select-none",style:{touchAction:"none",WebkitTouchCallout:"none"},children:[a?l.jsx(NH,{ref:ee,drawingData:u,textBoxes:f,canvasSize:{width:eu.WIDTH,height:eu.HEIGHT,WIDTH:eu.WIDTH,HEIGHT:eu.HEIGHT},rotation:o.rotation,onScaleChange:Q}):l.jsx(TH,{ref:te,drawingData:u,textBoxes:f,drawingState:o,canvasSize:{width:eu.WIDTH,height:eu.HEIGHT,WIDTH:eu.WIDTH,HEIGHT:eu.HEIGHT},zoom:E,position:A,onTouchStart:V,onTouchMove:Y,onTouchEnd:re,mousePosition:{x:0,y:0},isMouseOverCanvas:!1,isEraserDrawing:!1}),l.jsx(nfe,{zoom:a?L:E,onZoomIn:()=>{if(a&&ee.current){try{console.log("[ZoomButton] ZoomIn click (teacher)",{before:ee.current.getScale?.()})}catch{}ee.current.zoomIn(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomIn after",{after:ee.current.getScale?.()})}catch{}},0)}else F()},onZoomOut:()=>{if(a&&ee.current){try{console.log("[ZoomButton] ZoomOut click (teacher)",{before:ee.current.getScale?.()})}catch{}ee.current.zoomOut(void 0),setTimeout(()=>{try{console.log("[ZoomButton] ZoomOut after",{after:ee.current.getScale?.()})}catch{}},0)}else j()},onRotate:X,onDownload:se,onFullscreen:P?B:D,isFullscreen:P}),l.jsxs("div",{className:"absolute bottom-4 left-4 bg-gray-800 bg-opacity-70 text-white px-3 py-1 rounded-full text-sm",children:[Math.round((a?L:E)*100),"%"]})]}),a&&l.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Score:"}),l.jsx("input",{type:"number",min:"0",max:10,value:U,onChange:pe=>G(pe.target.value),className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Max:"}),l.jsx("input",{type:"number",value:10,disabled:!0,className:"w-20 px-3 py-1 text-sm border border-gray-300 rounded bg-gray-100"})]}),l.jsx(ht,{onClick:ce,variant:"primary",size:"sm",children:"Save"})]})})]})]})})})},AH=({testType:e,testId:t,studentAnswers:r,onBackToCabinet:n,compact:s=!1,showAll:a=!1,onToggleShowAll:i,maxInitial:o=3})=>{const c=Xo(),{user:u,isAuthenticated:d}=Fs(),{testResults:f,loadTestResults:h}=N2(),{theme:g,isCyberpunk:p,isLight:y,isKpop:v,themeClasses:C}=Ra(),w=Da(g);S.useEffect(()=>{},[g,p]);const[_,T]=S.useState(!0),[E,A]=S.useState(""),[F,j]=S.useState([]),[P,D]=S.useState([]),[B,V]=S.useState(null),[Y,re]=S.useState([]),[te,ee]=S.useState(0),[L,Q]=S.useState(0),[U,G]=S.useState(!1),[W,M]=S.useState(null),I=S.useCallback(je=>{const Re=je.best_retest_score||je.score,Xe=je.best_retest_max_score||je.max_score,ft=Math.round(Re/Xe*100);return{score:Re,maxScore:Xe,percentage:ft}},[]);S.useEffect(()=>{z()},[e,t]),S.useEffect(()=>{!e&&!t&&(f&&f.results?(ye.debug(" Using cached test results from TestContext"),D(f.results),T(!1)):ne())},[e,t,f]);const z=S.useCallback(async()=>{ye.debug(" Initializing Student Results...");try{if(T(!0),A(""),!d||!u){ye.debug(" User not authenticated"),A("User not authenticated");return}if(u.role!==zo.STUDENT){ye.error(" Invalid user role for student results:",u.role),A("Access denied. Student role required.");return}ye.debug(" Loading test results..."),await h(u?.student_id||u?.id||""),e&&t&&r&&(ye.debug(" Loading specific test results..."),await q(e,t,r)),ye.debug(" Student Results initialization complete!")}catch(je){ye.error(" Error initializing student results:",je),A("Failed to initialize student results")}finally{T(!1)}},[d,u,e,t,r,h]),q=S.useCallback(async(je,Re,Xe)=>{ye.debug(" Loading specific test results:",je,Re);try{const ft=await Pn.getTestInfo(je,Re);ye.debug(" Test info loaded:",ft),V(ft);const Je=await Pn.getTestQuestions(je,Re);ye.debug(" Test questions loaded:",Je),re(Je);const Ht=zf(Je,Xe,je).score,Ve=Je.length>0?Math.round(Ht/Je.length*100):0;ee(Ht),Q(Ve),ye.debug(" Test results calculated:",{score:Ht,percentage:Ve})}catch(ft){throw ye.error(" Error loading specific test results:",ft),ft}},[]),ne=S.useCallback(async(je=0)=>{ye.debug(" Loading all student results using existing test results API...",je>0?`(retry ${je})`:"");try{if(!(u?.student_id||u?.sub))throw new Error("Student ID not found");const Xe=await Pn.getStudentTestResults();if(Xe.success){ye.debug(" All student results loaded:",Xe.results.length,"results");const ft=Xe.results.map(Je=>({...Je,caught_cheating:Je.caught_cheating||!1,visibility_change_times:Je.visibility_change_times||0}));D(ft),M(new Date),Xe.results.length===0&&je===0&&(ye.debug(" No results found, retrying in 2 seconds..."),setTimeout(()=>{ne(1)},2e3))}else throw new Error(Xe.error||"Failed to load student results")}catch(Re){ye.error(" Error loading all student results:",Re),A(Re.message)}},[u]),X=S.useCallback(je=>({"Listening and Speaking":"L&S","Reading and Writing":"R&W","English for Career":"Eng for Career","Science Fundamental":"Science F","Science Supplementary":"Science S","Math Fundamental":"Math F","Math Supplementary":"Math S","English for Communication":"Eng for Comm"})[je]||je,[]),se=S.useCallback(je=>{if(!je||je.length===0)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:p?"":"text-gray-500",style:p?{...w.textCyan,fontFamily:"monospace"}:{},children:p?"NO RESULTS AVAILABLE":"No results available"})});const Re=a?je:je.slice(0,o);return l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:`w-full divide-y border-2 ${p?"divide-cyan-400 border-cyan-400":v?"divide-pink-500 border-pink-500":"divide-gray-200"}`,style:p?{backgroundColor:fe.black,borderColor:fe.cyan}:v?{backgroundColor:ze.background,borderColor:ze.primary,...w.glow}:{},children:[l.jsx("thead",{className:p||v?"":"bg-gray-50",style:p?{backgroundColor:fe.black,borderBottom:`2px solid ${fe.cyan}`}:v?{backgroundColor:ze.backgroundSecondary,borderBottom:`2px solid ${ze.primary}`,...w.glow}:{},children:l.jsxs("tr",{children:[l.jsx("th",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p||v?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textPink}:{},children:p?"SUBJECT":"Subject"}),l.jsx("th",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p||v?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textPink}:{},children:p?"TEACHER":"Teacher"}),l.jsx("th",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p||v?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textPink}:{},children:p?"TEST NAME":"Test Name"}),l.jsx("th",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p||v?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textPink}:{},children:p?"RESULT":"Result"}),l.jsx("th",{className:`hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-3 text-left text-xs font-medium uppercase tracking-wider ${p?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:{},children:p?"DATE":"Date"})]})}),l.jsx("tbody",{className:`divide-y ${p?"divide-cyan-400":v?"divide-pink-500":"bg-white divide-gray-200"}`,style:p?{backgroundColor:fe.black}:v?{backgroundColor:ze.background}:{},children:Re.map((Xe,ft)=>l.jsxs("tr",{className:p?"border-b border-cyan-400":v?"border-b border-pink-500/50 hover:bg-pink-500/10":"hover:bg-gray-50",style:p?{backgroundColor:fe.black,borderBottomColor:fe.cyan}:{},children:[l.jsx("td",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs font-medium ${p||v?"":"text-gray-900"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textWhite}:{},children:l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs border ${p?"border":v?"bg-pink-500/20 text-pink-400 border-pink-500":"bg-blue-100 text-blue-800"}`,style:p?{backgroundColor:fe.black,borderColor:fe.yellow,color:fe.yellow,fontFamily:"monospace",...w.textShadowYellow}:v?{backgroundColor:ze.backgroundSecondary,borderColor:ze.primary,color:ze.primary,...w.glow}:{},children:X(Xe.subject)})}),l.jsx("td",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs truncate max-w-12 sm:max-w-none ${p||v?"":"text-gray-500"}`,style:p?{color:fe.cyan,fontFamily:"monospace"}:v?{...w.textAccent}:{},children:Xe.teacher_name}),l.jsx("td",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs truncate max-w-16 sm:max-w-none ${p||v?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textWhite}:{},children:p?Xe.test_name.toUpperCase():Xe.test_name}),l.jsx("td",{className:`px-1 sm:px-4 lg:px-6 py-1 sm:py-4 whitespace-nowrap text-xs text-left ${p||v?"":"text-gray-500"}`,style:p?{color:fe.cyan,fontFamily:"monospace"}:v?{...w.textAccent}:{},children:l.jsx("div",{className:"flex flex-col items-start space-y-1",children:Xe.test_type==="drawing"?Xe.score!==null?l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":""}`,style:(()=>{const{score:Je,maxScore:Ht,percentage:Ve}=I(Xe);if(p){const at=Ve>=80?fe.green:Ve>=60?fe.yellow:fe.red;return{backgroundColor:fe.black,borderColor:at,color:at,fontFamily:"monospace",...Ve>=80?w.textShadowGreen:Ve>=60?w.textShadowYellow:w.textShadowRed}}if(v){const at=Ve>=80?ze.success:Ve>=60?ze.primary:ze.error;return{backgroundColor:ze.backgroundSecondary,borderColor:at,color:at,...w.glow,textShadow:`0 0 10px ${at}, 0 0 20px ${at}`}}return Ve>=80?{}:Ve>=60?{}:{}})(),children:(()=>{const{score:Je,maxScore:Ht,percentage:Ve}=I(Xe);return`${Je}/${Ht} (${Ve}%)`})()}):l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":v?"bg-pink-500/20 text-pink-400 border-pink-500":"bg-gray-100 text-gray-800"}`,style:p?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...w.textShadow}:v?{backgroundColor:ze.backgroundSecondary,borderColor:ze.primary,color:ze.primary,...w.glow}:{},children:p?"PENDING REVIEW":"Pending Review"}):Xe.test_type==="speaking"?Xe.score!==null?l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":""}`,style:(()=>{const{score:Je,maxScore:Ht,percentage:Ve}=I(Xe);if(p){const at=Ve>=80?fe.cyan:fe.red;return{backgroundColor:fe.black,borderColor:at,color:at,fontFamily:"monospace",...Ve>=80?w.textShadow:w.textShadowRed}}return{}})(),children:(()=>{const{score:Je,maxScore:Ht,percentage:Ve}=I(Xe);return`${Je}/${Ht} (${Ve}%)`})()}):l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":v?"bg-pink-500/20 text-pink-400 border-pink-500":"bg-gray-100 text-gray-800"}`,style:p?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...w.textShadow}:v?{backgroundColor:ze.backgroundSecondary,borderColor:ze.primary,color:ze.primary,...w.glow}:{},children:p?"PENDING REVIEW":"Pending Review"}):l.jsx("span",{className:`px-0.5 sm:px-2 py-0.5 rounded text-xs font-semibold border ${p?"border":""}`,style:(()=>{const{score:Je,maxScore:Ht,percentage:Ve}=I(Xe);if(p){const at=Ve>=80?fe.cyan:fe.red;return{backgroundColor:fe.black,borderColor:at,color:at,fontFamily:"monospace",...Ve>=80?w.textShadow:w.textShadowRed}}return Ve>=80?{}:Ve>=60?{}:{}})(),children:(()=>{const{score:Je,maxScore:Ht,percentage:Ve}=I(Xe);return`${Je}/${Ht} (${Ve}%)`})()})})}),l.jsx("td",{className:`hidden sm:table-cell px-2 sm:px-4 lg:px-6 py-2 sm:py-4 whitespace-nowrap text-xs sm:text-sm ${p||v?"":"text-gray-500"}`,style:p?{color:fe.cyan,fontFamily:"monospace"}:v?{...w.textAccent}:{},children:new Date(Xe.submitted_at).toLocaleDateString()})]},ft))})]}),je.length>o&&i&&l.jsx("div",{className:"text-center pt-4",children:l.jsx("button",{onClick:i,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:a?"Show Less":`Show ${je.length-o} More`})})]})},[X,a,o,i,p,w,g]),ce=S.useCallback((je,Re)=>{if(ye.debug(" formatAnswer called with:",{answer:je,testType:Re,answerType:typeof je}),!je)return"No answer";switch(Re){case"true_false":const Xe=typeof je=="boolean"?je:je==="true";return ye.debug(" Boolean answer processed:",Xe),Xe?"True":"False";case"multiple_choice":return je.toUpperCase();case"input":return je;case"word_matching":return typeof je=="object"?Object.entries(je).map(([ft,Je])=>`${ft}  ${Je}`).join(", "):je;case"drawing":return"Drawing submitted";default:return je}},[]),pe=S.useCallback(()=>!B||!Y||!r?null:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`rounded-lg shadow p-6 border ${p?Gt(0).className:"bg-white"}`,style:p?{...Gt(0).style,...w.glowRed}:v?{backgroundColor:ze.background,borderColor:ze.primary,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:[l.jsx("h2",{className:`text-2xl font-bold mb-4 ${p||v?"":"text-gray-900"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.headerText}:{},children:p?`TEST RESULTS: ${(B.test_name||B.title||"TEST").toUpperCase()}`:`Test Results: ${B.test_name||B.title||"Test"}`}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`text-3xl font-bold ${p?"text-cyan-400":"text-blue-600"}`,style:p?w.textShadow:{},children:te}),l.jsx("p",{className:`text-sm ${p?C.textSecondary:"text-gray-500"}`,children:"Correct Answers"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`text-3xl font-bold ${p?C.text:"text-gray-900"}`,style:p?w.textShadow:{},children:Y.length}),l.jsx("p",{className:`text-sm ${p?C.textSecondary:"text-gray-500"}`,children:"Total Questions"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:`text-3xl font-bold ${p?L>=80?"text-green-400":L>=60?"text-yellow-400":"text-red-400":L>=80?"text-green-600":L>=60?"text-yellow-600":"text-red-600"}`,style:p?w.textShadow:{},children:[L,"%"]}),l.jsx("p",{className:`text-sm ${p?C.textSecondary:"text-gray-500"}`,children:"Score"})]})]})]}),l.jsxs("div",{className:`rounded-lg shadow p-6 border ${p?Gt(1).className:"bg-white"}`,style:p?{...Gt(1).style,...w.glowYellow}:{},children:[l.jsx("h3",{className:`text-lg font-semibold mb-4 ${p?"":"text-gray-900"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:{},children:p?"QUESTIONS REVIEW":"Questions Review"}),l.jsx("div",{className:"space-y-4",children:Y.map((je,Re)=>{const Xe=r[Re],ft=Ov(je,e),Je=Qp(je,Xe,e);return l.jsxs("div",{className:`border rounded-lg p-4 ${p?"border":Je?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,style:p?{backgroundColor:fe.black,borderColor:Je?fe.green:fe.red,boxShadow:Je?w.glowGreen.boxShadow:w.glowRed.boxShadow}:{},children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsx("h4",{className:`font-medium ${p?"":"text-gray-900"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:{},children:p?`QUESTION ${Re+1}`:`Question ${Re+1}`}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${p?"border":""}`,style:p?{backgroundColor:fe.black,borderColor:Je?fe.green:fe.red,color:Je?fe.green:fe.red,fontFamily:"monospace",...Je?w.textShadowGreen:w.textShadowRed}:{},children:p?Je?"CORRECT":"INCORRECT":Je?"Correct":"Incorrect"})]}),l.jsx("p",{className:`mb-3 ${p?C.text:"text-gray-700"}`,children:je.question}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:`text-sm font-medium ${p?C.textSecondary:"text-gray-500"}`,children:p?"YOUR ANSWER:":"Your Answer:"}),l.jsx("p",{className:`text-sm ${p?C.text:"text-gray-900"}`,children:ce(Xe,e)})]}),l.jsxs("div",{children:[l.jsx("span",{className:`text-sm font-medium ${p?C.textSecondary:"text-gray-500"}`,children:p?"CORRECT ANSWER:":"Correct Answer:"}),l.jsx("p",{className:`text-sm ${p?C.text:"text-gray-900"}`,children:ce(ft,e)})]})]})]},Re)})})]})]}),[B,Y,r,e,te,L,Ov,Qp,ce]),be=S.useCallback(()=>{if(!P||P.length===0)return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:p?C.textSecondary:"text-gray-500",children:p?"NO TEST RESULTS AVAILABLE YET.":"No test results available yet."})});const je={};return P.forEach(Re=>{const Xe=Re.subject||"Unknown Subject";je[Xe]||(je[Xe]=[]),je[Xe].push(Re)}),l.jsx("div",{className:"space-y-6",children:Object.entries(je).map(([Re,Xe],ft)=>l.jsxs("div",{className:`rounded-lg shadow border ${p?Gt(ft).className:v?dr(ft).className:"bg-white"}`,style:p?{...Gt(ft).style,boxShadow:ft%4===0?w.glowRed.boxShadow:ft%4===1?w.glowYellow.boxShadow:ft%4===2?w.glowPurple.boxShadow:w.glow.boxShadow}:v?{...dr(ft).style,...ft%2===0?w.glow:w.glowPurple}:{},children:[l.jsx("div",{className:`px-6 py-4 border-b ${p?"border":v?"border-violet-300":"border-gray-200"}`,style:p?{borderBottomColor:fe.cyan}:v?{borderBottomColor:ze.border}:{},children:l.jsx("h3",{className:`text-lg font-semibold ${p?C.text:v?"":"text-gray-900"}`,style:p?w.textShadow:v?{...w.headerText}:{},children:p?Re.toUpperCase():Re})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:`min-w-full divide-y border-2 ${p?"divide-cyan-400 border-cyan-400":v?"divide-pink-500 border-pink-500":"divide-gray-200"}`,style:p?{backgroundColor:fe.black,borderColor:fe.cyan}:v?{backgroundColor:ze.background,borderColor:ze.primary,...w.glow}:{},children:[l.jsx("thead",{className:p||v?"":"bg-gray-50",style:p?{backgroundColor:fe.black,borderBottom:`2px solid ${fe.cyan}`}:v?{backgroundColor:ze.backgroundSecondary,borderBottom:`2px solid ${ze.primary}`,...w.glow}:{},children:l.jsxs("tr",{children:[l.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${p||v?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textPink}:{},children:p?"TEST NAME":"Test Name"}),l.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${p||v?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textPink}:{},children:p?"TEACHER":"Teacher"}),l.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${p||v?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textPink}:{},children:p?"SCORE":"Score"}),l.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${p||v?"":"text-gray-500"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textPink}:{},children:p?"DATE":"Date"})]})}),l.jsx("tbody",{className:`divide-y ${p?"divide-cyan-400":v?"divide-pink-500":"bg-white divide-gray-200"}`,style:p?{backgroundColor:fe.black}:v?{backgroundColor:ze.background}:{},children:Xe.map((Je,Ht)=>{const{score:Ve,maxScore:at,percentage:gt}=I(Je),Te=p?gt>=80?"text-green-400":gt>=60?"text-yellow-400":"text-red-400":gt>=80?"text-green-600":gt>=60?"text-yellow-600":"text-red-600";return l.jsxs("tr",{className:p?"border-b border-cyan-400":"hover:bg-gray-50",style:p?{backgroundColor:fe.black,borderBottomColor:fe.cyan}:{},children:[l.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-medium ${p||v?"":"text-gray-900"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.textWhite}:{},children:p?Je.test_name.toUpperCase():Je.test_name}),l.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p||v?"":"text-gray-500"}`,style:p?{color:fe.cyan,fontFamily:"monospace"}:v?{...w.textAccent}:{},children:Je.teacher_name||(p?"UNKNOWN":"Unknown")}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:p||v?"":Te,style:p?{color:gt>=80?fe.green:gt>=60?fe.yellow:fe.red,fontFamily:"monospace",...gt>=80?w.textShadowGreen:gt>=60?w.textShadowYellow:w.textShadowRed}:v?{color:gt>=80?ze.success:gt>=60?ze.primary:ze.error,textShadow:gt>=80?`0 0 10px ${ze.success}, 0 0 20px ${ze.success}`:gt>=60?`0 0 10px ${ze.primary}, 0 0 20px ${ze.primary}`:`0 0 10px ${ze.error}, 0 0 20px ${ze.error}`}:{},children:[Ve,"/",at," (",gt,"%)"]})}),l.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${p||v?"":"text-gray-500"}`,style:p?{color:fe.cyan,fontFamily:"monospace"}:v?{...w.textAccent}:{},children:new Date(Je.submitted_at).toLocaleDateString()})]},Ht)})})]})})]},Re))})},[P]);S.useCallback(()=>{ye.debug(" Clearing test data and returning to cabinet..."),V(null),re([]),setStudentAnswers(null),ee(0),Q(0),G(!1),n?n():c("/student")},[n,c]);const oe=S.useCallback(()=>{ye.debug(" Navigating back to cabinet..."),n?n():c("/student")},[n,c]);return S.useCallback((je,Re)=>{const Xe={id:Date.now(),message:je,type:Re,timestamp:new Date};j(ft=>[...ft,Xe]),setTimeout(()=>{j(ft=>ft.filter(Je=>Je.id!==Xe.id))},rg.NOTIFICATION_DURATION)},[]),_?l.jsx("div",{className:`min-h-screen flex items-center justify-center ${p?"":"bg-white"}`,style:p?w.background:{},children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:`mt-4 ${p?"":"text-gray-600"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:{},children:p?"LOADING STUDENT RESULTS...":"Loading Student Results..."})]})}):E?l.jsx("div",{className:`min-h-screen flex items-center justify-center ${p?"":"bg-white"}`,style:p?w.background:{},children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:`border-2 rounded-lg p-6 max-w-md ${p?"border":"bg-red-50 border-red-200"}`,style:p?{backgroundColor:fe.black,borderColor:fe.red,...w.glowRed}:{},children:[l.jsx("h2",{className:`text-lg font-semibold mb-2 ${p?"":"text-red-800"}`,style:p?{...w.textRed,fontFamily:"monospace"}:{},children:p?"RESULTS ERROR":"Results Error"}),l.jsx("p",{className:`mb-4 ${p?"":"text-red-600"}`,style:p?{color:fe.red,fontFamily:"monospace"}:{},children:E}),l.jsx(ht,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?l.jsxs("div",{children:[_?l.jsxs("div",{className:"text-center py-8",children:[l.jsx(pn,{size:"md"}),l.jsx("p",{className:`mt-2 ${p?"":"text-gray-600"}`,style:p?{...w.textCyan,fontFamily:"monospace"}:{},children:p?"LOADING RESULTS...":"Loading results..."})]}):E?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:`text-4xl mb-2 ${p?"":"text-red-500"}`,style:p?{color:fe.red}:{},children:""}),l.jsx("p",{className:p?"":"text-red-600",style:p?{color:fe.red,fontFamily:"monospace"}:{},children:E})]}):se(P),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:F.map(je=>l.jsx(hu,{type:je.type,message:je.message,onClose:()=>j(Re=>Re.filter(Xe=>Xe.id!==je.id))},je.id))})]}):l.jsxs("div",{className:`min-h-screen ${p?"bg-gradient-to-br from-black via-gray-900 to-purple-900":"bg-white"}`,style:p?w.background:{},children:[l.jsx("div",{className:`shadow-sm border-b ${p?"border":v?"":`${C.headerBg} ${C.headerBorder}`}`,style:p?{backgroundColor:fe.black,borderBottomColor:fe.cyan,borderBottomWidth:"2px"}:v?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:`text-2xl font-bold ${p||v?"":C.headerText}`,style:p?{...w.textCyan,fontFamily:"monospace"}:v?{...w.headerText}:{},children:p?"STUDENT RESULTS":"Student Results"}),l.jsxs("p",{className:`text-sm mt-1 ${p?"":C.textSecondary}`,style:p?{color:fe.cyan,fontFamily:"monospace"}:{},children:["Last updated: ",W?W.toLocaleString():"Never"]})]}),l.jsxs("div",{className:"flex space-x-3",children:[B&&l.jsx(ht,{variant:"outline",onClick:()=>G(!U),children:U?"Hide Details":"Show Details"}),l.jsx(ht,{variant:"outline",onClick:oe,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:U&&B?pe():be()}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:F.map(je=>l.jsx(hu,{type:je.type,message:je.message,onClose:()=>j(Re=>Re.filter(Xe=>Xe.id!==je.id))},je.id))}),selectedDrawing&&l.jsx(EH,{drawing:selectedDrawing,isOpen:isDrawingModalOpen,onClose:()=>setIsDrawingModalOpen(!1)})]})},afe=({isMenuOpen:e,onToggleMenu:t,onShowPasswordChange:r})=>{const n=Xo(),s=k0(),{user:a,isAuthenticated:i,logout:o}=Fs(),{studentData:c,loadStudentData:u}=m3(),{activeTests:d,testResults:f,loadActiveTests:h,loadTestResults:g,viewTestDetails:p,testDetailsModal:y,closeTestDetailsModal:v}=N2(),{theme:C,isCyberpunk:w,isLight:_,isKpop:T,themeClasses:E}=Ra(),A=Da(C);S.useEffect(()=>{ye.debug(" [DEBUG] StudentCabinet mounted/rendered, location:",s.pathname)},[s.pathname]);const[F,j]=S.useState(!0),[P,D]=S.useState(""),[B,V]=S.useState([]),[Y,re]=S.useState(null),[te,ee]=S.useState(!1),[L,Q]=S.useState(null),[U,G]=S.useState(null),[W,M]=S.useState(new Set),[I,z]=S.useState(!1),[q,ne]=S.useState(!1),[X,se]=S.useState(!1),[ce,pe]=S.useState(!1),[be,oe]=S.useState(!1);S.useEffect(()=>{je()},[]),S.useEffect(()=>()=>{se(!1)},[]),S.useEffect(()=>{if(X){const Te=setTimeout(()=>{se(!1)},1e3);return()=>clearTimeout(Te)}},[X]);const je=S.useCallback(async()=>{ye.debug(" Initializing Student Cabinet...");try{if(j(!0),D(""),!i||!a){ye.debug(" User not authenticated, redirecting to login"),n("/login");return}if(a.role!==zo.STUDENT){ye.error(" Invalid user role for student cabinet:",a.role),D("Access denied. Student role required.");return}ye.debug(" Loading active tests (single API call)...");const Te=a?.student_id||a?.id||"";if(Re(Te)){ye.debug(" Cache refresh triggered - clearing cache");try{const Ct=`student_active_tests_${Te}`,Lt=`student_results_table_${Te}`;localStorage.removeItem(Ct),localStorage.removeItem(Lt)}catch{}}else ye.debug(" Using cached active tests (background revalidation will keep data fresh)");await h(Te),ye.debug(" Student Cabinet initialization complete!")}catch(Te){ye.error(" Error initializing student cabinet:",Te),D("Failed to initialize student cabinet")}finally{j(!1)}},[i,a,n]),Re=S.useCallback(Te=>{if(window.studentCabinetRefreshRequested)return window.studentCabinetRefreshRequested=!1,ye.debug(" Manual refresh requested"),!0;if(window.recentTestCompleted)return window.recentTestCompleted=!1,ye.debug(" Test completed - cache refresh triggered"),!0;const bt=localStorage.getItem(`last_cabinet_refresh_${Te}`);if(bt&&Date.now()-parseInt(bt)>300*1e3)return ye.debug(" Time-based refresh triggered"),!0;try{for(let Ct=0;Ct<localStorage.length;Ct++){const Lt=localStorage.key(Ct);if(Lt&&Lt.startsWith(`retest_assignment_id_${Te}_`))return ye.debug(" Retest assignment key detected, forcing cache refresh:",Lt),!0}}catch{}return ye.debug(" No refresh triggers - using existing cache"),!1},[]);S.useCallback(async()=>{ye.debug(" Calculating average score...");try{if(f&&f.length>0){const Te=f.reduce((Ct,Lt)=>{const Yt=Lt.best_retest_score||Lt.score,it=Lt.best_retest_max_score||Lt.max_score;return typeof Yt=="number"&&typeof it=="number"&&it>0?Ct+Math.round(Yt/it*100):Ct},0),bt=Math.round(Te/f.length);G(bt),ye.debug(" Average score calculated:",bt)}}catch(Te){ye.error(" Error calculating average score:",Te)}},[f]),S.useEffect(()=>{if(X){ye.debug(" Skipping completed tests initialization during navigation");return}const Te=a?.student_id||a?.id;if(!Te){ye.debug(" Student ID not available yet, skipping localStorage initialization");return}const bt=new Set;for(let Ct=0;Ct<localStorage.length;Ct++){const Lt=localStorage.key(Ct);if(Lt&&Lt.startsWith(`test_completed_${Te}_`)&&localStorage.getItem(Lt)==="true"){const it=Lt.replace(`test_completed_${Te}_`,"").split("_");if(it.length>=2){const xt=it[0],Mt=it.slice(1).join("_"),rt=`${xt}_${Mt}`;bt.add(rt),ye.debug(" Found completed test in localStorage:",rt)}}}M(bt),pe(!0),ye.debug(" Initialized completed tests from localStorage:",Array.from(bt))},[a?.student_id,a?.id,X]),S.useEffect(()=>{ye.debug(" testResults structure:",f);const Te=f?.results||f;if(ye.debug(" resultsArray:",Te),Te&&Te.length>0){const bt=a?.student_id||a?.id||"",Ct=new Set;Te.forEach(Lt=>{const Yt=`${Lt.test_type}_${Lt.test_id}`;Ct.add(Yt),localStorage.setItem(`test_completed_${bt}_${Lt.test_type}_${Lt.test_id}`,"true")}),M(Lt=>{const Yt=new Set([...Lt,...Ct]);return ye.debug(" Updated completed tests (merged):",Array.from(Yt)),Yt})}},[f,a?.student_id,a?.id]);const Xe=S.useCallback(async(Te,bt,Ct=!1,Lt=null)=>{ye.debug(" Checking test completion:",Te,bt,"retestAvailable:",Ct);try{const Yt=a?.student_id||a?.id||"";if(Ct){ye.debug(" Retest available from backend, checking attempt limits.");const rt=`retest_attempts_${Yt}_${Te}_${bt}`;let Qe;try{const Sr=localStorage.getItem(rt);Qe=Sr?JSON.parse(Sr):void 0}catch(Sr){ye.warn(" Failed to parse attempts metadata:",Sr)}const It=[];for(let Sr=1;Sr<=10;Sr++){const we=`retest_attempt${Sr}_${Yt}_${Te}_${bt}`;localStorage.getItem(we)==="true"&&It.push(we)}const Tt=It.length,Rt=typeof Lt?.retest_attempts_left=="number"?Lt.retest_attempts_left:void 0,cr=typeof Lt?.retest_attempt_number=="number"?Lt.retest_attempt_number:void 0,hr=typeof Lt?.retest_max_attempts=="number"?Lt.retest_max_attempts:void 0;if(Rt===0)return ye.debug(" API reports no attempts left. Retest considered completed."),!0;const Cr=hr??(Rt!=null&&cr!=null?Rt+cr:Qe?.max??3),ur=Qe?.used??Tt;return ye.debug(" Retest check:",{attemptsMeta:Qe,attemptKeys:It,usedAttempts:ur,totalAttempts:Cr,attemptsLeftFromApi:Rt,retriesRemaining:Rt??Cr-ur}),ur>=Cr?(ye.debug(" Maximum retest attempts reached (meta/localStorage)."),!0):(ye.debug(" Retest attempts available, allowing start."),!1)}const it=`test_completed_${Yt}_${Te}_${bt}`,xt=localStorage.getItem(it);if(ye.debug(" localStorage key:",it),ye.debug(" localStorage value:",xt),Te==="word_matching"){ye.debug(" Debug: All localStorage keys for student",Yt);for(let rt=0;rt<localStorage.length;rt++){const Qe=localStorage.key(rt);Qe&&Qe.includes(Yt)&&Qe.includes("word_matching")&&ye.debug(" Found word_matching key:",Qe,"=",localStorage.getItem(Qe))}}if(xt==="true")return ye.debug(" Found completion status in local storage:",xt),!0;const Mt=f?.results||f;return Mt&&Mt.length>0&&(ye.debug(" Checking database results:",Mt.length,"results"),Mt.some(Qe=>(ye.debug(" Checking result:",Qe.test_type,Qe.test_id,"vs",Te,bt),Qe.test_type===Te&&Qe.test_id===bt)))?(ye.debug(" Found completion status in database results"),localStorage.setItem(it,"true"),!0):(ye.debug(" Test not completed according to local storage or database"),!1)}catch(Yt){return ye.error(" Error checking test completion:",Yt),!1}},[f,a?.student_id,a?.id]),ft=S.useCallback((Te,bt)=>{const Ct={id:Date.now(),message:Te,type:bt,timestamp:new Date};V(Lt=>[...Lt,Ct]),setTimeout(()=>{V(Lt=>Lt.filter(Yt=>Yt.id!==Ct.id))},rg.NOTIFICATION_DURATION)},[]),Je=S.useCallback(async Te=>{ye.debug(" Showing test details:",Te);try{await p(Te.test_type,Te.test_id,Te.test_name)}catch(bt){ye.error("Error loading test details:",bt),ft("Failed to load test details","error")}},[p,ft]),Ht=S.useCallback(Te=>{ye.debug(" Starting test:",Te);const bt=`${Te.test_type}_${Te.test_id}`;if(W.has(bt)&&!Te?.retest_available){ft("This test has already been completed","warning");return}if(ye.debug(" Checking retest conditions:"),ye.debug(" test.retest_available:",Te?.retest_available),ye.debug(" testKey:",bt),ye.debug(" completedTests.has(testKey):",W.has(bt)),ye.debug(" completedTests:",Array.from(W)),Te?.retest_available&&!Te?.retest_is_completed){const Ct=a?.student_id||a?.id||"",Lt=`retest1_${Ct}_${Te.test_type}_${Te.test_id}`;localStorage.setItem(Lt,"true"),ye.debug(" Set retest key:",Lt);const Yt=`retest_in_progress_${Ct}_${Te.test_type}_${Te.test_id}`;localStorage.setItem(Yt,"1"),ye.debug(" Set in-progress retest lock:",Yt);try{const it=`anti_cheating_${Ct}_${Te.test_type}_${Te.test_id}`;localStorage.removeItem(it);const xt=`speaking_test_data_${Ct}_${Te.test_id}`;localStorage.removeItem(xt);const Mt=`speaking_progress_${Te.test_id}`;localStorage.removeItem(Mt);const rt=`_${Ct}_${Te.test_type}_${Te.test_id}`,Qe=[];for(let Tt=0;Tt<localStorage.length;Tt++){const Rt=localStorage.key(Tt);Rt&&(Rt.startsWith("retest_attempt")||(Rt.endsWith(rt)||Rt.includes(`answers_${Ct}_${Te.test_type}_${Te.test_id}`)||Rt.includes(`progress_${Ct}_${Te.test_type}_${Te.test_id}`)||Rt.includes(`state_${Ct}_${Te.test_type}_${Te.test_id}`)||Rt.includes(`selected_${Ct}_${Te.test_type}_${Te.test_id}`))&&Qe.push(Rt))}Qe.forEach(Tt=>localStorage.removeItem(Tt)),ye.debug(" Cleared generic cached keys for retest start:",Qe);const It=`retest_attempts_${Ct}_${Te.test_type}_${Te.test_id}`;ye.debug(" Cleared per-test cached keys for retest start:",{antiCheatKey:it,speakingCacheKey:xt,speakingProgressKey:Mt})}catch{}if(ye.debug(" Test retest_assignment_id:",Te.retest_assignment_id),ye.debug(" Test retest_assignment_id type:",typeof Te.retest_assignment_id),Te?.retest_assignment_id){const it=`retest_assignment_id_${Ct}_${Te.test_type}_${Te.test_id}`;localStorage.setItem(it,String(Te.retest_assignment_id)),ye.debug(" Set retest assignment ID:",it,"=",Te.retest_assignment_id)}else ye.debug(" No retest assignment ID found in test data")}else ye.debug(" Retest assignment ID storage skipped - retest not available");if(se(!0),ye.debug(" Set isStartingTest to true for test:",Te.test_type),Te.test_type==="matching_type"){ye.debug(" Redirecting to matching test page for testId:",Te.test_id),n(`/student/matching-test/${Te.test_id}`);return}if(Te.test_type==="word_matching"){ye.debug(" Redirecting to word matching test page for testId:",Te.test_id),n(`/student/word-matching-test/${Te.test_id}`);return}if(Te.test_type==="speaking"){ye.debug(" Redirecting to speaking test page for testId:",Te.test_id),n(`/student/speaking-test/${Te.test_id}`);return}n(`/student/test/${Te.test_type}/${Te.test_id}`)},[n,W,ft,a?.student_id,a?.id]),Ve=S.useCallback(()=>{z(Te=>!Te)},[]),at=S.useCallback(()=>{ne(Te=>!Te)},[]),gt=S.useCallback(async Te=>{if(ye.debug(" Starting test:",Te),X){ye.debug(" Test already starting, ignoring click");return}try{if(await Xe(Te.test_type,Te.test_id,Te?.retest_available,Te)){ft("This test has already been completed","warning");return}Ht(Te)}catch(bt){ye.error(" Error starting test:",bt),ft("Failed to start test. Please try again.","error")}},[Xe,Ht,ft,X]);return S.useCallback(Te=>{ye.debug(" Viewing test details:",Te),Je(Te)},[Je]),F?l.jsx(vt.div,{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l.jsxs(vt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx(pn,{size:"lg"}),l.jsx(vt.p,{className:"mt-4 text-gray-600",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.3},children:"Loading Student Cabinet..."})]})}):P?l.jsx(vt.div,{className:"min-h-screen bg-gradient-to-br from-red-50 to-pink-100 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:l.jsx(vt.div,{className:"text-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},children:l.jsxs(vt.div,{className:"bg-white border border-red-200 rounded-xl p-8 max-w-md shadow-lg",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,duration:.3},children:[l.jsx(vt.div,{className:"text-4xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3,type:"spring"},children:""}),l.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Cabinet Error"}),l.jsx("p",{className:"text-red-600 mb-6",children:P}),l.jsx(ht,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):(ye.debug(" [DEBUG] StudentCabinet rendering, location:",s.pathname,"isLoading:",F),l.jsxs(vt.div,{className:`min-h-screen ${w?"bg-gradient-to-br from-black via-gray-900 to-purple-900":T?"bg-black":"bg-white"}`,style:w?A.background:T?A.backgroundSecondary:{},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(vt.div,{className:`${T?"":E.headerBg} border-b-2 ${T?"":E.headerBorder}`,style:w?{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"}:T?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-6",children:[l.jsxs(vt.div,{className:"flex items-center space-x-4",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(vt.div,{className:`h-12 w-12 rounded-full flex items-center justify-center border-2 ${w?"bg-cyan-400/20 border-cyan-400":T?"bg-pink-500/20 border-pink-500":"bg-white/20 border-white"}`,style:w?{boxShadow:"0 0 10px rgba(0, 255, 255, 0.5)"}:T?{boxShadow:"0 2px 4px rgba(139, 92, 246, 0.2)"}:{},initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:l.jsx("span",{className:`font-semibold text-xl ${w?"text-cyan-400 tracking-wider":T?"":"text-white"}`,style:w?{fontFamily:"monospace",textShadow:"0 0 5px rgba(0, 255, 255, 0.5)"}:{},children:a?.name?.charAt(0)||"S"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:`text-lg sm:text-xl md:text-2xl font-bold ${w?"tracking-wider":E.headerText}`,style:w?{...A.textCyan,fontFamily:"monospace"}:T?{...A.headerText}:{},children:w?`${a?.name?.toUpperCase()} ${a?.surname?.toUpperCase()}`:`${a?.name} ${a?.surname}`}),l.jsx("p",{className:`text-sm sm:text-base md:text-lg ${w?"tracking-wider":"text-white"}`,style:w?{...A.textYellow,fontFamily:"monospace"}:{},children:w?`GRADE ${a?.grade} - CLASS ${a?.class}`:`Grade ${a?.grade} - Class ${a?.class}`})]})]}),l.jsxs(vt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsxs("button",{onClick:t,className:`flex items-center space-x-1 sm:space-x-2 border-2 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm ${w?"bg-cyan-400/10 border-cyan-400 text-cyan-400 hover:bg-cyan-400/20 focus:ring-cyan-400 tracking-wider":T?"bg-pink-500/10 border-pink-400 text-pink-400 hover:bg-pink-500/20 focus:ring-pink-400":"bg-white/10 border-white text-white hover:bg-white/20 focus:ring-white"}`,style:w?{zIndex:1e3,fontFamily:"monospace",boxShadow:"0 0 10px rgba(0, 255, 255, 0.3)",textShadow:"0 0 5px rgba(0, 255, 255, 0.5)"}:{zIndex:1e3},children:[l.jsx("span",{className:"hidden sm:inline",children:"Menu"}),l.jsx(vt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:e?180:0},transition:{duration:.2},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),l.jsx(Wo,{children:e&&l.jsx(vt.div,{className:`absolute right-0 mt-2 w-48 rounded-xl shadow-lg z-50 overflow-hidden border-2 ${w?Gt(0).className:T?dr(0).className:"bg-white"}`,style:w?{...Gt(0).style,...A.glow}:T?{...dr(0).style}:{},initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:l.jsxs("div",{className:"py-2",children:[l.jsx(vt.button,{onClick:r,className:`block w-full text-left px-4 py-3 text-sm transition-colors ${w?"hover:bg-cyan-400/30":T?"text-pink-400 hover:bg-pink-500/20":"text-gray-700 hover:bg-blue-50"}`,style:w?{color:fe.cyan,fontFamily:"monospace",...A.textShadow}:T?{color:ze.primary}:{},whileHover:{x:4},transition:{duration:.2},children:w?"CHANGE PASSWORD":"Change Password"}),l.jsx(vt.button,{onClick:()=>{t(),oe(!0)},className:`block w-full text-left px-4 py-3 text-sm transition-colors ${w?"hover:bg-cyan-400/30":T?"text-pink-400 hover:bg-pink-500/20":"text-gray-700 hover:bg-gray-50"}`,style:w?{color:fe.cyan,fontFamily:"monospace",...A.textShadow}:T?{color:ze.primary}:{},whileHover:{x:4},transition:{duration:.2},children:w?"SETTINGS":"Settings"}),l.jsx(vt.button,{onClick:()=>{t(),o()},className:`block w-full text-left px-4 py-3 text-sm transition-colors ${w?"hover:bg-red-400/30":T?"text-red-600 hover:bg-red-50":"text-gray-700 hover:bg-red-50"}`,style:w?{color:fe.red,fontFamily:"monospace",...A.textShadowRed}:T?{color:ze.error}:{},whileHover:{x:4},transition:{duration:.2},children:w?"LOGOUT":"Logout"})]})})})]})]})})}),l.jsxs(vt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:l.jsx("div",{className:"lg:col-span-1 space-y-6",children:U!==null&&l.jsx(vt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7,duration:.5},children:l.jsxs(Kt,{children:[l.jsx(Kt.Header,{children:l.jsx(Kt.Title,{children:"Average Score"})}),l.jsx(Kt.Body,{children:l.jsxs(vt.div,{className:"text-center",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.8,duration:.3},children:[l.jsxs(vt.div,{className:"text-4xl font-bold text-blue-600 mb-2",initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.5,type:"spring"},children:[U,"%"]}),l.jsx("p",{className:`text-sm ${w||T?"":"text-gray-500"}`,style:w?{color:fe.yellow,fontFamily:"monospace"}:T?{...A.textAccent}:{},children:"Overall Performance"})]})})]})})})}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsxs(Kt,{className:w?Gt(0).className:T?dr(0).className:"",style:w?{...Gt(0).style,boxShadow:"0 0 20px rgba(255, 0, 60, 0.3), 0 0 40px rgba(255, 0, 60, 0.2)"}:T?{...dr(0).style,...A.glow}:{},children:[l.jsx(Kt.Header,{style:T?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,padding:"1.5rem",borderRadius:"0.5rem 0.5rem 0 0",boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:l.jsx(Kt.Title,{className:"text-center ",style:w?{...A.textCyan,fontFamily:"monospace",color:fe.cyan}:T?{...A.headerText}:{},children:w?"ACTIVE TESTS":"Active Tests"})}),l.jsx(Kt.Body,{children:d&&d.length>0?l.jsxs("div",{className:"relative",children:[ye.debug(" Rendering overlay, isStartingTest:",X),X&&l.jsx("div",{className:`absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50 rounded-lg border-2 ${w?"border-cyan-400":T?"border-pink-500":"border-blue-200"}`,style:w?{backgroundColor:fe.black+"E6",borderColor:fe.cyan}:T?{borderColor:ze.border}:{},children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-4 mx-auto mb-4 ${w?"border-cyan-400/30 border-t-cyan-400":T?"border-pink-500/30 border-t-pink-500":"border-blue-200 border-t-blue-600"}`,style:T?{...A.glow}:{}}),l.jsx("p",{className:`font-semibold text-lg ${w?"text-cyan-400":T?"":"text-blue-600"}`,style:w?{color:fe.cyan,fontFamily:"monospace"}:T?{...A.textPink}:{},children:"Starting test..."}),l.jsx("p",{className:`text-sm mt-1 ${w?"text-cyan-400":T?"":"text-gray-500"}`,style:w?{color:fe.cyan,fontFamily:"monospace"}:T?{...A.textAccent}:{},children:"Please wait..."})]})}),l.jsxs("div",{className:"space-y-4",children:[(I?d:d.slice(0,3)).map((Te,bt)=>l.jsx(vt.div,{className:`rounded-lg p-4 transition-shadow ${w?Gt(bt+1).className:T?dr(bt+1).className:"border border-gray-200 hover:shadow-md"}`,style:w?{...Gt(bt+1).style,boxShadow:(bt+1)%4===0?A.glowRed.boxShadow:(bt+1)%4===1?A.glowYellow.boxShadow:(bt+1)%4===2?A.glowPurple.boxShadow:A.glow.boxShadow}:T?{...dr(bt+1).style,...bt%2===0?A.glow:A.glowPurple}:{},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:I?0:.7+bt*.1,duration:.3},whileHover:{scale:1.02},children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"sm:hidden",children:[l.jsx("h3",{className:`text-sm font-medium mb-1 break-words leading-tight ${w||T?"":"text-gray-900"}`,style:w?{...A.textCyan,fontFamily:"monospace"}:T?{...A.textWhite}:{},children:w?Te.test_name.toUpperCase():Te.test_name}),l.jsxs("div",{className:`flex items-center space-x-2 text-xs ${w||T?"":"text-gray-500"}`,style:w?{color:fe.cyan,fontFamily:"monospace"}:T?{...A.textAccent}:{},children:[l.jsx("span",{children:Te.teacher_name}),l.jsx("span",{children:""}),l.jsx("span",{children:new Date(Te.assigned_at).toLocaleDateString("en-US",{year:"2-digit",month:"numeric",day:"numeric"})})]})]}),l.jsxs("div",{className:"hidden sm:flex items-center space-x-3 text-sm",children:[l.jsx("h3",{className:`text-lg font-medium break-words leading-tight ${w||T?"":"text-gray-900"}`,style:w?{...A.textCyan,fontFamily:"monospace"}:T?{...A.textWhite}:{},children:w?Te.test_name.toUpperCase():Te.test_name}),l.jsx("span",{className:`px-2 py-1 rounded text-xs ${w?"bg-yellow-400/20 text-yellow-400 border border-yellow-400/50":T?"bg-pink-500/20 text-pink-400 border border-pink-500":"bg-blue-100 text-blue-800"}`,style:T?{...A.glow}:{},children:Te.subject}),l.jsx("span",{className:w||T?"":"text-gray-500",style:w?{color:fe.cyan,fontFamily:"monospace"}:T?{...A.textAccent}:{},children:Te.teacher_name}),l.jsx("span",{className:w||T?"":"text-gray-500",style:w?{color:fe.cyan,fontFamily:"monospace"}:T?{...A.textAccent}:{},children:new Date(Te.assigned_at).toLocaleDateString()})]})]}),l.jsx("div",{className:"flex space-x-2 ml-4",children:(()=>{const Ct=`${Te.test_type}_${Te.test_id}`,Lt=W.has(Ct);let Yt=!1;if(typeof window<"u"&&Te?.retest_available){const it=a?.student_id||a?.id||"";if(it)try{const xt=`test_completed_${it}_${Te.test_type}_${Te.test_id}`,Mt=localStorage.getItem(xt)==="true",rt=`retest_attempts_${it}_${Te.test_type}_${Te.test_id}`;let Qe;const It=localStorage.getItem(rt);if(It)try{Qe=JSON.parse(It)}catch(Cr){ye.warn(" Failed to parse retest attempts metadata in render:",Cr)}let Tt=typeof Qe?.used=="number"?Qe.used:void 0;if(Tt==null){let Cr=0;for(let ur=1;ur<=10;ur++){const Sr=`retest_attempt${ur}_${it}_${Te.test_type}_${Te.test_id}`;localStorage.getItem(Sr)==="true"&&Cr++}Tt=Cr}const Rt=typeof Te?.retest_attempts_left=="number"?Te.retest_attempts_left:void 0,hr=(typeof Te?.retest_max_attempts=="number"?Te.retest_max_attempts:void 0)??(Qe?.max!=null?Qe.max:Rt!=null&&typeof Te?.retest_attempt_number=="number"?Rt+Te.retest_attempt_number:void 0);(Rt===0||hr!=null&&Tt!=null&&Tt>=hr||Mt&&Rt==null&&hr==null)&&(Yt=!0)}catch(xt){ye.warn(" Failed to evaluate local retest completion:",xt)}}return ce?Te?.retest_is_completed||Yt?l.jsx(ht,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):Te?.retest_available&&!Te?.retest_is_completed&&!Yt?(Te.retest_attempts_left||0)>0?l.jsx(ht,{variant:"primary",size:"sm",onClick:()=>gt(Te),disabled:X,className:w?"":T?"bg-pink-500 text-white hover:bg-pink-600":"",style:w?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",borderWidth:"2px",...A.glow}:T?{backgroundColor:ze.primary,color:ze.white}:{},children:w?"START RETEST":"Start Retest"}):l.jsx(ht,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):Lt?l.jsx(ht,{variant:"secondary",size:"xs",disabled:!0,className:"bg-green-100 text-green-800 border-green-200",children:" Completed"}):(ye.debug(" Button render, isStartingTest:",X,"test:",Te.test_type),l.jsx(ht,{variant:"primary",size:"sm",onClick:()=>gt(Te),disabled:X,className:w?"":T?"bg-pink-500 text-white hover:bg-pink-600":"",style:w?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",borderWidth:"2px",...A.glow}:T?{backgroundColor:ze.primary,color:ze.white,borderWidth:"0px"}:{},children:w?"START TEST":"Start Test"})):l.jsx(ht,{variant:"secondary",size:"sm",disabled:!0,className:w?"":T?"bg-pink-500/20 text-pink-400 border-pink-500/50":"bg-gray-100 text-gray-500 border-gray-200",style:w?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace"}:{},children:"Loading..."})})()})]})},`${Te.test_type}_${Te.test_id}`)),d.length>3&&l.jsx("div",{className:"text-center pt-2",children:l.jsx("button",{onClick:Ve,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:I?"Show Less":`Show ${d.length-3} More`})})]})]}):l.jsxs(vt.div,{className:"text-center py-12",initial:{opacity:0},animate:{opacity:1},transition:{delay:.7,duration:.3},children:[l.jsx(vt.img,{src:"/pics/no-tests.png",alt:"No active tests",className:"w-24 h-24 mx-auto mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.5,type:"spring"}}),l.jsx("h3",{className:`text-lg font-semibold mb-2 ${w||T?"":"text-gray-800"}`,style:w?{...A.textCyan,fontFamily:"monospace"}:T?{...A.textPink}:{},children:"No Active Tests"})]})})]})}),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:l.jsxs(Kt,{className:`${w?Gt(2).className:T?dr(2).className:""}`,paddingClass:"py-6 px-3 sm:p-6",style:w?{...Gt(2).style,...A.glowPurple}:T?{...dr(2).style,...A.glowPurple}:{},children:[l.jsx(Kt.Header,{style:T?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,padding:"1.5rem",borderRadius:"0.5rem 0.5rem 0 0",boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:l.jsx(Kt.Title,{className:" text-center",style:w?{...A.textCyan,fontFamily:"monospace"}:T?{...A.headerText}:{},children:w?"TEST RESULTS":"Test Results"})}),l.jsx(Kt.Body,{children:f&&f.showResults?l.jsx(E2,{testResults:f,onBackToCabinet:()=>{setTestResults(null)},onRetakeTest:(Te,bt)=>{h(),setTestResults(null)},isLoading:F}):l.jsx(AH,{compact:!0,showAll:q,onToggleShowAll:at,maxInitial:3})})]})})]})]}),l.jsx(aN,{isOpen:y.isOpen,onClose:v,testType:y.testType,testId:y.testId,testName:y.testName,questions:y.questions||[],isLoading:y.isLoading||!1}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:B.map(Te=>l.jsx(hu,{type:Te.type,message:Te.message,onClose:()=>V(bt=>bt.filter(Ct=>Ct.id!==Te.id))},Te.id))}),l.jsx(o0e,{visible:be,onClose:()=>oe(!1)})]},s.pathname))},ife=({testInfo:e,questions:t,testType:r,studentAnswers:n,onBackToCabinet:s,checkAnswerCorrectness:a,formatStudentAnswerForDisplay:i,getCorrectAnswer:o,caughtCheating:c=!1})=>{const{theme:u,isCyberpunk:d,isKpop:f}=Ra(),h=Da(u),[g,p]=S.useState(0),[y,v]=S.useState(0),[C,w]=S.useState(!0);if(S.useEffect(()=>{const E=()=>{try{const A=zf(t,n,r).score,F=e?.num_questions||t?.length||0,j=F>0?Math.round(A/F*100):0;p(A),v(j),w(!1)}catch(A){console.error("Error calculating test results:",A),p(0),v(0),w(!1)}};t&&t.length>0?E():w(!1)},[t,n,r,e,zf]),C)return l.jsx("div",{className:"flex justify-center items-center min-h-64",children:l.jsx("div",{className:"text-lg",children:"Calculating results..."})});const _=e?.num_questions||t?.length||0,T=e?.test_name||e?.title||"Test";return l.jsxs("div",{className:`test-results-page max-w-4xl mx-auto p-6 overflow-y-auto min-h-screen ${d||f?"bg-black":""}`,style:d?h.background:f?h.backgroundSecondary:{},children:[l.jsx(Kt,{className:`mb-6 border-2 ${d?Gt(0).className:f?dr(0).className:""}`,style:d?{...Gt(0).style,...h.glowRed}:f?{...dr(0).style,borderColor:ze.primary,...h.glow}:{},children:l.jsxs("div",{className:"results-header text-center",children:[l.jsx("h2",{className:`text-2xl font-bold mb-2 ${d?"":"text-gray-800"}`,style:d?{...h.textCyan,fontFamily:"monospace"}:f?{...h.headerText}:{},children:d?`TEST RESULTS: ${T.toUpperCase()}`:`Test Results: ${T}`}),l.jsx("p",{className:d?"":"text-gray-600",style:d?{color:fe.yellow,fontFamily:"monospace"}:{},children:r==="matching_type"?"Matching Test":r==="multiple_choice"?"Multiple Choice Test":r==="true_false"?"True/False Test":r==="input"?"Input Test":r==="drawing"?"Drawing Test":"Test"})]})}),c&&l.jsx(Kt,{className:`mb-6 border-2 ${d||f?"border":"border-red-500 bg-red-50"}`,style:d?{backgroundColor:fe.black,borderColor:fe.red,...h.glowRed}:f?{backgroundColor:ze.background,borderColor:ze.error,...h.glowRed}:{},children:l.jsxs("div",{className:"flex items-start space-x-3 p-4",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:`h-6 w-6 ${d||f?"":"text-red-600"}`,style:d?{color:fe.red}:f?{color:ze.error}:{},fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),l.jsx("div",{className:"flex-1",children:l.jsx("p",{className:d||f?"":"text-red-700",style:d?{...h.textRed,fontFamily:"monospace"}:f?{color:ze.error,...h.textShadowRed}:{},children:"Suspicious activity was detected during this test. Your teacher has been notified."})})]})}),l.jsx(Kt,{className:`mb-6 border-2 ${d?Gt(1).className:f?dr(1).className:""}`,style:d?{...Gt(1).style,...h.glow}:f?{...dr(1).style,borderColor:ze.primary,...h.glow}:{},children:l.jsxs("div",{className:"results-summary",children:[l.jsx("h3",{className:`text-xl font-semibold mb-4 text-center ${d?"":"text-gray-800"}`,style:d?{...h.textCyan,fontFamily:"monospace"}:f?{...h.headerText}:{},children:d?`YOUR SCORE: ${g} / ${_} (${y}%)`:`Your Score: ${g} / ${_} (${y}%)`}),l.jsx("div",{className:`w-full rounded-full h-4 mb-4 border ${d?"bg-gray-800 border-cyan-400/50":f?"bg-black border-pink-500/50":"bg-gray-200"}`,style:d?h.glow:f?{...h.glow}:{},children:l.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${d||f?"":y>=80?"bg-green-500":y>=60?"bg-yellow-500":"bg-red-500"}`,style:d?{background:`linear-gradient(to right, ${fe.yellow}, ${fe.cyan})`,boxShadow:`0 0 10px ${fe.cyan}`,width:`${y}%`}:f?{background:`linear-gradient(to right, ${ze.primary}, ${ze.secondary})`,boxShadow:`0 0 10px ${ze.primary}`,width:`${y}%`}:{width:`${y}%`}})}),l.jsx("div",{className:"text-center",children:l.jsx("p",{className:`text-lg font-medium ${d?"":y>=80?"text-green-600":y>=60?"text-yellow-600":"text-red-600"}`,style:d?{color:y>=80?fe.green:y>=60?fe.yellow:fe.red,fontFamily:"monospace",...y>=80?h.textShadowGreen:y>=60?h.textShadowYellow:h.textShadowRed}:{},children:y>=80?"Excellent!":y>=60?"Good job!":"Keep practicing!"})})]})}),t&&t.length>0&&l.jsx(Kt,{className:`mb-6 border-2 ${d?Gt(2).className:f?dr(1).className:""}`,style:d?{...Gt(2).style,...h.glow}:f?{...dr(1).style,borderColor:ze.primary,...h.glow}:{},children:l.jsxs("div",{className:"questions-review",children:[l.jsx("h3",{className:`text-xl font-semibold mb-4 ${d?"":"text-gray-800"}`,style:d?{...h.textCyan,fontFamily:"monospace"}:f?{...h.headerText}:{},children:d?"QUESTION REVIEW":"Question Review"}),l.jsx("div",{className:"space-y-4",children:t.map((E,A)=>{const F=n[String(E.question_id)]||"No answer",j=a(E,F,r);return l.jsxs("div",{className:`question-review p-4 rounded-lg border-2 ${d||f?"border":j?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,style:d?{backgroundColor:fe.black,borderColor:j?fe.green:fe.red,boxShadow:j?h.glow.boxShadow:h.glowRed.boxShadow}:f?{backgroundColor:ze.background,borderColor:j?ze.success:ze.error,boxShadow:j?h.glow.boxShadow:h.glowRed.boxShadow}:{},children:[l.jsxs("div",{className:"question-review-header flex justify-between items-start mb-3",children:[l.jsxs("h4",{className:`text-lg font-medium ${d?"":"text-gray-800"}`,style:d?{...h.textCyan,fontFamily:"monospace"}:{},children:["Question ",A+1]}),l.jsx("span",{className:`text-2xl font-bold ${d?"":j?"text-green-600":"text-red-600"}`,style:d?{color:j?fe.green:fe.red,fontFamily:"monospace",...j?h.textShadowGreen:h.textShadowRed}:{},children:j?"":""})]}),l.jsx("div",{className:"question-text mb-3",children:l.jsx("p",{className:`p-3 rounded border ${d?"border":"text-gray-700 bg-gray-100"}`,style:d?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...h.textShadow}:{},children:E.question})}),l.jsxs("div",{className:"answer-section space-y-2",children:[l.jsxs("p",{className:"student-answer",children:[l.jsx("strong",{className:d?"":"text-gray-600",style:d?{color:fe.yellow,fontFamily:"monospace"}:{},children:"Your Answer:"})," ",l.jsx("span",{className:`p-3 rounded border font-medium ${d?"border":j?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,style:d?{backgroundColor:fe.black,borderColor:j?fe.green:fe.red,color:j?fe.green:fe.red,fontFamily:"monospace",...j?h.textShadowGreen:h.textShadowRed}:{},children:i(F,r,E)})]}),!j&&l.jsxs("p",{className:"correct-answer",children:[l.jsx("strong",{className:d?"":"text-gray-600",style:d?{color:fe.yellow,fontFamily:"monospace"}:{},children:"Correct Answer:"})," ",l.jsx("span",{className:`p-3 rounded border font-medium ${d?"border":"bg-blue-100 text-blue-800"}`,style:d?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...h.textShadow}:{},children:r==="multiple_choice"?String(E.correct_answer||"").toUpperCase():i(o(E,r),r,E)})]})]})]},E.question_id||A)})})]})}),l.jsx(Kt,{className:`border-2 ${d?Gt(0).className:f?dr(0).className:""}`,style:d?{...Gt(0).style,...h.glowRed}:f?{...dr(0).style,borderColor:ze.primary,...h.glow}:{},children:l.jsx("div",{className:"results-actions text-center",children:l.jsx(ht,{onClick:s,className:`px-8 py-3 text-lg font-medium ${d?"":"bg-blue-600 hover:bg-blue-700 text-white"}`,style:d?{backgroundColor:fe.cyan,color:fe.black,fontFamily:"monospace",...h.glow}:{},children:d?"BACK TO CABINET":"Back to Cabinet"})})})]})};class ofe{constructor(){this.activeRequests=new Map,this.completedRequests=new Map,this.maxCacheSize=100,this.cacheTimeout=3e4}generateKey(t,r,n={}){const s=Object.keys(n).sort().reduce((a,i)=>(a[i]=n[i],a),{});return`${t}_${r}_${JSON.stringify(s)}`}isRequestInProgress(t){return this.activeRequests.has(t)}getCachedResult(t){const r=this.completedRequests.get(t);return r&&Date.now()-r.timestamp<this.cacheTimeout?r.result:null}startRequest(t,r){return this.activeRequests.set(t,r),r.finally(()=>{this.activeRequests.delete(t)}),r}cacheResult(t,r){if(this.completedRequests.size>=this.maxCacheSize){const n=this.completedRequests.keys().next().value;this.completedRequests.delete(n)}this.completedRequests.set(t,{result:r,timestamp:Date.now()})}async deduplicateApiCall(t,r,n,s){const a=this.generateKey(t,r,n);if(this.isRequestInProgress(a))return console.log(" API deduplication: Request already in progress, waiting...",a),this.activeRequests.get(a);const i=this.getCachedResult(a);if(i)return console.log(" API deduplication: Using cached result",a),i;console.log(" API deduplication: Making new request",a);const o=this.startRequest(a,s());try{const c=await o;return this.cacheResult(a,c),c}catch(c){throw c}}clearCache(){this.activeRequests.clear(),this.completedRequests.clear(),console.log(" API deduplication: Cache cleared")}}const vO=new ofe,lfe=(e,t)=>{let r;return(...n)=>{clearTimeout(r),r=setTimeout(()=>e.apply(null,n),t)}},cfe=({onBackToCabinet:e,currentTest:t})=>{const r=Xo(),n=k0(),{user:s,isAuthenticated:a}=Fs(),{activeTests:i,loadActiveTests:o}=N2(),{theme:c,isCyberpunk:u,isLight:d,isKpop:f,themeClasses:h}=Ra(),g=Da(c),p=S.useCallback(lfe((ue,he,Pe)=>{try{if(window.skipInitialProgressSave&&Pe.answers&&Pe.answers.length===0){ye.debug(" Skipping empty progress save during restoration"),window.skipInitialProgressSave=!1;return}const Ge=`test_progress_${s?.student_id||s?.id||"unknown"}_${ue}_${he}`,Ye=localStorage.getItem(Ge);if(Ye&&Pe.answers&&Pe.answers.length===0)try{const ct=JSON.parse(Ye);if(ct.answers&&ct.answers.length>0){ye.debug(" Skipping empty progress save - existing progress is better:",ct.answers);return}}catch{}localStorage.setItem(Ge,JSON.stringify(Pe)),ye.debug(`Saved test progress for ${ue}_${he}:`,Pe)}catch(tt){ye.error("Error saving test progress:",tt)}},1e3),[s?.student_id,s?.id]),y=S.useCallback((ue,he,Pe)=>{p(ue,he,Pe)},[p]),v=S.useCallback((ue,he)=>{try{const tt=`test_progress_${s?.student_id||s?.id||"unknown"}_${ue}_${he}`,Ge=localStorage.getItem(tt);return Ge?JSON.parse(Ge):null}catch(Pe){return ye.error("Error getting test progress:",Pe),null}},[s?.student_id,s?.id]),C=S.useCallback((ue,he)=>{try{const Pe=s?.student_id||s?.id||"unknown",tt=`test_progress_${Pe}_${ue}_${he}`;localStorage.removeItem(tt);for(let Ge=0;Ge<localStorage.length;Ge++){const Ye=localStorage.key(Ge);Ye&&Ye.startsWith(`test_progress_${Pe}_${ue}_${he}_`)&&(localStorage.removeItem(Ye),ye.debug(` Cleared individual question key: ${Ye}`))}ye.debug(`Cleared test progress for ${ue}_${he}`)}catch(Pe){ye.error("Error clearing test progress:",Pe)}},[s?.student_id,s?.id]),[w,_]=S.useState(!0),[T,E]=S.useState(!1),[A,F]=S.useState(""),[j,P]=S.useState(!1),[D,B]=S.useState(""),[V,Y]=S.useState([]),[re,te]=S.useState(t?"test":"list"),[ee,L]=S.useState(null),[Q,U]=S.useState(null),[G,W]=S.useState(null),[M,I]=S.useState([]),[z,q]=S.useState([]),[ne,X]=S.useState(0),[se,ce]=S.useState(0),[pe,be]=S.useState(null),oe=Gs.useRef(null),je=Gs.useRef(null),[Re,Xe]=S.useState(!1),[ft,Je]=S.useState(!1),[Ht,Ve]=S.useState(null),[at,gt]=S.useState(null),[Te,bt]=S.useState(!1),[Ct,Lt]=S.useState(!1),[Yt,it]=S.useState(!1),[xt,Mt]=S.useState(!1),rt=S.useRef(null);h2(xt,S.useCallback(({confirm:ue,cancel:he})=>{rt.current={confirm:ue,cancel:he},Lt(!0)},[])),S.useEffect(()=>{(re==="test"||re==="results")&&ee?Mt(!0):(Mt(!1),rt.current=null)},[re,ee]);const[Qe,It]=S.useState({isInitialized:!1,initializationId:null,lastTestId:null,initializationCount:0}),[Tt,Rt]=S.useState({isRestored:!1,restoredTestId:null,restorationCount:0}),{startTracking:cr,stopTracking:hr,getCheatingData:Cr,clearData:ur,isCheating:Sr,tabSwitches:we}=y1(ee?.test_type,ee?.test_id,s?.student_id||s?.id);S.useEffect(()=>{(()=>{const he=[];for(let Pe=0;Pe<localStorage.length;Pe++){const tt=localStorage.key(Pe);if(tt&&tt.startsWith("test_progress_")&&!tt.includes("_51712_")&&!tt.includes("_51736_")){const Ge=tt.split("_");Ge.length===4&&Ge[0]==="test"&&Ge[1]==="progress"&&he.push(tt)}}he.forEach(Pe=>{localStorage.removeItem(Pe),ye.debug(" Cleared old cache key:",Pe)})})()},[]);const Me=S.useCallback(()=>{const ue=ee?.test_id,he=s?.student_id||s?.id;if(!he||!ue)return ye.debug(" Skipping initialization - missing required data:",{studentId:he,currentTestId:ue}),!1;const Pe=`${he}_${ue}_${Date.now()}`;return Qe.isInitialized&&Qe.lastTestId===ue?(ye.debug(" Already initialized for this test - skipping"),!1):Qe.initializationId?(ye.debug(" Initialization in progress - skipping duplicate"),!1):(ye.debug(" Starting initialization:",Pe),It({isInitialized:!1,initializationId:Pe,lastTestId:ue}),!0)},[Qe,ee,s?.student_id,s?.id]),Ie=S.useCallback(()=>{It(ue=>({...ue,isInitialized:!0,initializationId:null})),ye.debug(" Initialization completed")},[]),Ce=S.useCallback(async()=>{ye.debug(" Initializing Student Tests...");try{if(_(!0),B(""),!a||!s){ye.debug(" User not authenticated"),B("User not authenticated");return}if(s.role!==zo.STUDENT){ye.error(" Invalid user role for student tests:",s.role),B("Access denied. Student role required.");return}ye.debug(" Loading active tests..."),await o(),Ie(),ye.debug(" Student Tests initialization complete!")}catch(ue){ye.error(" Error initializing student tests:",ue),B("Failed to initialize student tests")}finally{_(!1)}},[a,s,o,Ie]);S.useEffect(()=>{Me()&&Ce()},[Me,Ce]),S.useEffect(()=>{t&&(ye.debug(" Auto-starting test from prop:",t),P(!0),Nt(t))},[t]),S.useCallback(async()=>{ye.debug(" Loading student active tests...");try{const ue=await Pn.getActiveTests();ye.debug(" Active tests loaded:",ue);const he=ue.map(Pe=>({...Pe,subject_id:Pe.subject_id||Pe.subjectId,teacher_id:Pe.teacher_id||Pe.teacherId,is_active:Pe.is_active!==void 0?Pe.is_active:!0,created_at:Pe.created_at||Pe.createdAt,updated_at:Pe.updated_at||Pe.updatedAt}));return gt(new Date),he}catch(ue){throw ye.error(" Error loading active tests:",ue),ue}},[]),S.useCallback(async(ue,he)=>{ye.debug(" Checking test completion:",ue,he);try{const Pe=v(ue,he);return Pe&&Pe.completed}catch(Pe){return ye.error(" Error checking test completion:",Pe),!1}},[v]),S.useEffect(()=>{if(M.length>0&&ee?.test_id){const ue=setTimeout(()=>{let he=!1;const Pe=new Array(M.length).fill("");if(M.forEach((tt,Ge)=>{const ct=`test_progress_${s?.student_id||s?.id||"unknown"}_${Q}_${ee?.test_id}_${tt.question_id}`,de=localStorage.getItem(ct);if(de){const _e=de.replace(/^"(.*)"$/,"$1");Pe[Ge]=_e,he=!0}}),he){q(Pe);const tt=Pe.filter(Ye=>Ye&&typeof Ye=="string"&&Ye.trim()!=="").length,Ge=M.length>0?tt/M.length*100:0;X(Ge)}},100);return()=>clearTimeout(ue)}},[M,Q,ee?.test_id]);const Ze=S.useCallback(async(ue,he)=>{ye.debug(" Marking test as completed:",ue,he);try{const Pe=v(ue,he)||{};Pe.completed=!0,Pe.completedAt=new Date().toISOString(),y(ue,he,Pe);const Ge=`test_completed_${s?.student_id||s?.id||""}_${ue}_${he}`;localStorage.setItem(Ge,"true"),ye.debug(" Test completion marked in localStorage:",Ge),ye.debug(" localStorage value after setting:",localStorage.getItem(Ge)),Nr("Test marked as completed","success")}catch(Pe){ye.error(" Error marking test as completed:",Pe),Nr("Failed to mark test as completed","error")}},[v,y]),wt=S.useCallback(ue=>{ye.debug(" Showing test details:",ue),Ve(ue),Je(!0)},[]),Nt=S.useCallback(async ue=>{ye.debug(" Starting test:",ue);let he=Date.now(),Pe;try{F(""),E(!0),he=Date.now();const tt=()=>{const br=Date.now()-he,Xr=Math.max(0,250-br);setTimeout(()=>{_(!1),E(!1)},Xr)};let Ge=!1;Pe=setTimeout(()=>{Ge=!0,F("Loading is taking longer than expected...")},15e3);const ct=`test_completed_${s?.student_id||s?.id||""}_${ue.test_type}_${ue.test_id}`,de=localStorage.getItem(ct)==="true";if(de&&!ue?.retest_available){ye.debug(" Test already completed, redirecting to main cabinet"),Nr("This test has already been completed","info"),r("/student");return}if(de&&ue?.retest_available&&ye.debug(" Test completed but retest available, allowing retest"),ue.test_type===ls.MATCHING){ye.debug(" Redirecting to matching test page for testId:",ue.test_id),r(`/student/matching-test/${ue.test_id}`);return}if(ue.test_type===ls.WORD_MATCHING){ye.debug(" Redirecting to word matching test page for testId:",ue.test_id),r(`/student/word-matching-test/${ue.test_id}`);return}L(ue),U(ue.test_type),Rt({isRestored:!1,restoredTestId:null,restorationCount:0});const[_e,Fe]=await Promise.all([vO.deduplicateApiCall("GET",`test-info-${ue.test_type}-${ue.test_id}`,{testType:ue.test_type,testId:ue.test_id},()=>Pn.getTestInfo(ue.test_type,ue.test_id)),vO.deduplicateApiCall("GET",`test-questions-${ue.test_type}-${ue.test_id}`,{testType:ue.test_type,testId:ue.test_id},()=>Pn.getTestQuestions(ue.test_type,ue.test_id))]);W(_e);let De=Fe;try{if(!!_e?.is_shuffled){const fn=s?.student_id||s?.id||"unknown",Xr=`${fn}:${ue.test_type}:${ue.test_id}`,qn=Array.from(Xr).reduce((Pt,Mr)=>(Pt<<5)-Pt+Mr.charCodeAt(0),0)>>>0,An=`test_shuffle_order_${fn}_${ue.test_type}_${ue.test_id}`,ke=localStorage.getItem(An);if(ke){const Pt=JSON.parse(ke),Mr=new Map(Fe.map(qr=>[qr.question_id,qr]));De=Pt.map(qr=>Mr.get(qr)).filter(Boolean)}else{const Mr=function(Tn){return function(){var Jr=Tn+=1831565813;return Jr=Math.imul(Jr^Jr>>>15,Jr|1),Jr^=Jr+Math.imul(Jr^Jr>>>7,Jr|61),((Jr^Jr>>>14)>>>0)/4294967296}}(qn);De=[...Fe];for(let Tn=De.length-1;Tn>0;Tn--){const Jr=Math.floor(Mr()*(Tn+1));[De[Tn],De[Jr]]=[De[Jr],De[Tn]]}const qr=De.map(Tn=>Tn.question_id);localStorage.setItem(An,JSON.stringify(qr))}}}catch(br){ye.error("Shuffle error (ignored):",br)}I(De),tt();const qe=ue.test_id;if(Tt.isRestored&&Tt.restoredTestId===qe){ye.debug(" Progress already restored for this test - skipping");return}Rt(br=>({...br,restorationCount:br.restorationCount+1}));const zt=s?.student_id||s?.id||"unknown",_r=`test_progress_${zt}_${ue.test_type}_${ue.test_id}`,jr=localStorage.getItem(_r);let pt=new Array(Fe.length).fill("");if(jr)try{const br=JSON.parse(jr);br.answers&&Array.isArray(br.answers)&&(pt=br.answers)}catch(br){ye.error("Error parsing main progress:",br)}Fe.forEach((br,fn)=>{const Xr=`test_progress_${zt}_${ue.test_type}_${ue.test_id}_${br.question_id}`,qn=localStorage.getItem(Xr);if(qn){const An=qn.replace(/^"(.*)"$/,"$1");pt[fn]=An}});const or=pt.filter(br=>br&&typeof br=="string"&&br.trim()!=="").length;if(or>0){q(pt);const br=Fe.length>0?or/Fe.length*100:0;X(br)}else q(pt),X(0);Rt(br=>({...br,isRestored:!0,restoredTestId:qe})),or>0&&(ye.debug(" Existing progress found - preventing overwrite during initialization"),window.skipInitialProgressSave=!0);const Wr=Number(_e?.allowed_time||0),Fr=s?.student_id||s?.id||"unknown";if(oe.current=`test_timer_${Fr}_${ue.test_type}_${ue.test_id}`,Wr>0)try{const br=localStorage.getItem(oe.current),fn=Date.now();if(br){const Xr=JSON.parse(br),qn=Math.floor((fn-new Date(Xr.lastTickAt).getTime())/1e3),An=Math.max(0,Number(Xr.remainingSeconds||Wr)-Math.max(0,qn));ce(An),je.current=fn}else ce(Wr),je.current=fn,localStorage.setItem(oe.current,JSON.stringify({remainingSeconds:Wr,lastTickAt:new Date(fn).toISOString(),startedAt:new Date(fn).toISOString()}))}catch(br){ye.error("Timer cache init error:",br),ce(Wr)}else ce(0);const Tr=new Date;be(Tr),ye.debug(" Test timer started at:",Tr.toISOString());const Lr=`anti_cheating_${s?.student_id||s?.id||"unknown"}_${ue.test_type}_${ue.test_id}`,zn=js(Lr);zn?zn.isCheating&&(ye.debug(" WARNING: Student has been flagged for cheating in THIS test!"),ye.debug(" Tab switches detected in this test:",zn.tabSwitches),Nr(` Warning: Suspicious activity detected in this test (${zn.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning")):ye.debug(" No existing anti-cheating data found for this test - starting fresh"),cr(),ye.debug(" Anti-cheating tracking started"),te("test"),ye.debug(" Test started successfully")}catch(tt){ye.error(" Error starting test:",tt),Nr("Failed to start test","error"),F("Failed to load test data. Please try again.")}finally{const tt=Date.now()-he,Ye=Math.max(0,250-tt);setTimeout(()=>{_(!1),E(!1)},Ye),P(!1);try{Pe&&clearTimeout(Pe)}catch{}}},[v]),Oe=S.useCallback(async()=>{if(!ee||!G||!M||!z){Nr("No test data to submit","error");return}ye.debug(" Submitting test:",ee);try{Xe(!0);const ue=zf(M,z,ee.test_type),he=new Date,Pe=pe?Math.round((he-pe)/1e3):0,tt=pe?pe.toISOString():he.toISOString();ye.debug(" Test timing:",{startedAt:tt,endTime:he.toISOString(),timeTaken:`${Pe} seconds`});const Ge=Cr();ye.debug(" Anti-cheating data for submission:",Ge),it(Ge.caught_cheating||!1);const Ye={};M.forEach((de,_e)=>{Ye[de.question_id]=z[_e]??""}),ee.test_type==="drawing"&&(ye.debug(" Drawing test answers being submitted:",z),ye.debug(" Drawing test answers type:",typeof z[0]),ye.debug(" Drawing test answers content:",z[0]));const ct=await Pn.submitTest(ee.test_type,ee.test_id,z,{time_taken:(()=>{const de=Number(G?.allowed_time||0);return de>0?Math.min(Pe,de):Pe})(),started_at:tt,submitted_at:he.toISOString(),answers_by_id:Ye,question_order:M.map(de=>de.question_id),caught_cheating:Ge.caught_cheating,visibility_change_times:Ge.visibility_change_times,retest_assignment_id:(()=>{const _e=`retest_assignment_id_${s?.student_id||s?.id||""}_${ee.test_type}_${ee.test_id}`,Fe=localStorage.getItem(_e);return ye.debug(" Frontend retest key:",_e),ye.debug(" Frontend retest assignment ID from localStorage:",Fe),ye.debug(" Frontend retest assignment ID converted:",Fe?Number(Fe):null),ye.debug(" Frontend current test data:",ee),ye.debug(" Frontend current test retest_assignment_id:",ee.retest_assignment_id),Fe?Number(Fe):null})(),parent_test_id:ee.test_id},s);if(ye.debug(" Test submission result:",ct),ct.success){window.recentTestCompleted=!0,ye.debug(" Test completed - cache refresh triggered");const de=s?.student_id||s?.id||"",_e=`retest_assignment_id_${de}_${ee.test_type}_${ee.test_id}`,Fe=!!localStorage.getItem(_e);let De=!1;if(Fe){const pt=typeof ee?.retest_max_attempts=="number"?ee.retest_max_attempts:void 0,or=typeof ee?.retest_attempts_left=="number"?ee.retest_attempts_left:void 0,Wr=typeof ee?.retest_attempt_number=="number"?ee.retest_attempt_number:void 0,Fr=pt??(or!=null&&Wr!=null?or+Wr:1),Tr=(ct?.percentage_score??ct?.percentage??0)>=50;if(Tr){const Gr=`retest_attempt${Fr}_${de}_${ee.test_type}_${ee.test_id}`;localStorage.setItem(Gr,"true"),ye.debug(" Passed retest, marking last-slot key:",Gr);let Lr=0;for(let br=1;br<=10;br++){const fn=`retest_attempt${br}_${de}_${ee.test_type}_${ee.test_id}`;localStorage.getItem(fn)==="true"&&Lr++}if(de&&ee.test_type&&ee.test_id){const br=`test_completed_${de}_${ee.test_type}_${ee.test_id}`;localStorage.setItem(br,"true"),ye.debug(" Marked retest as completed (student passed):",br);const fn=`retest_attempts_${de}_${ee.test_type}_${ee.test_id}`;localStorage.setItem(fn,JSON.stringify({used:Lr,max:Fr})),ye.debug(" Set retest attempts metadata (student passed):",fn,{used:Lr,max:Fr})}const zn=`retest1_${de}_${ee.test_type}_${ee.test_id}`;localStorage.removeItem(zn),De=!0}else{let Gr=1;for(let Xr=1;Xr<=10;Xr++){const qn=`retest_attempt${Xr}_${de}_${ee.test_type}_${ee.test_id}`;if(localStorage.getItem(qn)!=="true"){Gr=Xr;break}}const Lr=`retest_attempt${Gr}_${de}_${ee.test_type}_${ee.test_id}`;localStorage.setItem(Lr,"true"),ye.debug(" Marked retest attempt as completed:",Lr);let zn=0;for(let Xr=1;Xr<=10;Xr++){const qn=`retest_attempt${Xr}_${de}_${ee.test_type}_${ee.test_id}`;localStorage.getItem(qn)==="true"&&zn++}const br=Fr>0&&zn>=Fr,fn=br||Tr;if(ye.debug(" Retest completion check:",{usedAttempts:zn,maxAttempts:Fr,attemptsExhausted:br,passed:Tr,shouldComplete:fn,studentId:!!de,test_type:!!ee?.test_type,test_id:!!ee?.test_id}),fn)if(!de||!ee?.test_type||!ee?.test_id)ye.error(" Cannot set completion key - missing required fields:",{studentId:de,test_type:ee?.test_type,test_id:ee?.test_id});else{const Xr=`test_completed_${de}_${ee.test_type}_${ee.test_id}`;localStorage.setItem(Xr,"true"),ye.debug(" Marked retest as completed (attempts exhausted or passed):",Xr),ye.debug(" Verification - completion key value:",localStorage.getItem(Xr));const qn=`retest_attempts_${de}_${ee.test_type}_${ee.test_id}`;localStorage.setItem(qn,JSON.stringify({used:zn,max:Fr})),ye.debug(" Set retest attempts metadata (attempts exhausted):",qn,{used:zn,max:Fr});const An=`retest1_${de}_${ee.test_type}_${ee.test_id}`;localStorage.removeItem(An),ye.debug(" Removed retest key after completion:",An),De=!0}else ye.debug(" Retest NOT completed - conditions not met:",{attemptsExhausted:br,passed:Tr,shouldComplete:fn})}}if(ye.debug(" Marking test as completed..."),await Ze(ee.test_type,ee.test_id),ee.test_type!=="drawing"){ye.debug(" Caching test results after submission...");const or=`student_results_table_${s?.student_id||s?.id||"unknown"}`,{setCachedData:Wr,CACHE_TTL:Fr}=await ai(async()=>{const{setCachedData:Tr,CACHE_TTL:Gr}=await Promise.resolve().then(()=>vp);return{setCachedData:Tr,CACHE_TTL:Gr}},void 0);Wr(or,ct,Fr.student_results_table),ye.debug(" Test results cached with key:",or)}else ye.debug(" Drawing test submitted - not caching results (will appear after teacher grades)");ye.debug(" Clearing test progress..."),C(ee.test_type,ee.test_id);try{const pt=s?.student_id||s?.id||"unknown",or=`test_timer_${pt}_${ee.test_type}_${ee.test_id}`;localStorage.removeItem(or);const Wr=`test_shuffle_order_${pt}_${ee.test_type}_${ee.test_id}`;localStorage.removeItem(Wr)}catch{}if(s?.student_id){const pt=`test_completed_${s.student_id}_${ee.test_type}_${ee.test_id}`;localStorage.setItem(pt,"true"),ye.debug(" Test marked as completed in localStorage:",pt)}try{const pt=s?.student_id||s?.id||"",or=`retest1_${pt}_${ee.test_type}_${ee.test_id}`,Wr=`retest_assignment_id_${pt}_${ee.test_type}_${ee.test_id}`;De?(localStorage.removeItem(or),localStorage.removeItem(Wr),ye.debug(" Cleared retest keys (completion):",or,Wr)):ye.debug(" Retest still pending - keeping keys:",or,Wr)}catch(pt){ye.warn(" Failed to manage retest keys:",pt)}ye.debug(" Clearing test progress and anti-cheating data for THIS test only...");const qe=s?.student_id||s?.id||"unknown",zt=[],_r=`test_progress_${qe}_${ee.test_type}_${ee.test_id}`,jr=`anti_cheating_${qe}_${ee.test_type}_${ee.test_id}`;for(let pt=0;pt<localStorage.length;pt++){const or=localStorage.key(pt);or&&(or===_r||or===jr)&&zt.push(or)}if(zt.forEach(pt=>{localStorage.removeItem(pt),ye.debug(` Cleared for THIS test only: ${pt}`)}),ye.debug(" Clearing anti-cheating data..."),hr(),ur(),ee.test_type!=="drawing")te("results");else{Mt(!1),rt.current=null;try{const pt=window.history.state;if(pt&&pt.__intercept){const or=pt.prevState??null;window.history.replaceState(or,document.title,window.location.href)}}catch(pt){ye.warn("Failed to restore history state for drawing test:",pt)}setTimeout(()=>{window.location.href="/student"},100)}Nr("Test submitted successfully!","success"),ye.debug(" Test submitted successfully")}else throw ye.error(" Test submission failed:",ct.error),new Error(ct.error||"Failed to submit test")}catch(ue){ye.error(" Error submitting test:",ue),Nr("Failed to submit test","error")}finally{Xe(!1)}},[ee,G,M,z,Ze,C]);S.useCallback(()=>(ye.debug(" Collecting test answers..."),z),[z]);const Ke=S.useCallback(()=>{if(!M||!z)return;const ue=z.filter(Pe=>Pe&&typeof Pe=="string"&&Pe.trim()!=="").length,he=M.length>0?ue/M.length*100:0;if(X(he),ye.debug(` Progress updated: ${ue}/${M.length} questions answered (${Math.round(he)}%)`),ee){const Pe={answers:z,progress:he,lastSaved:new Date().toISOString()};y(ee.test_type,ee.test_id,Pe)}},[M,z,ee,y]);S.useEffect(()=>{Ke()},[Ke]);const st=S.useCallback(()=>z?z.filter(he=>he&&typeof he=="string"&&he.trim()!=="").length:0,[z,M]),Vt=S.useCallback(()=>{if(ee&&s?.student_id){const he=`anti_cheating_${s?.student_id||s?.id||"unknown"}_${ee.test_type}_${ee.test_id}`,Ge=((js(he)||{tabSwitches:0}).tabSwitches||0)+1,Ye=Ge>=2;ys(he,{tabSwitches:Ge,isCheating:Ye},ds.anti_cheating)}Mt(!1),rt.current=null;try{const ue=window.history.state;if(ue&&ue.__intercept){const he=ue.prevState??null;window.history.replaceState(he,document.title,window.location.href)}}catch(ue){ye.warn("Failed to restore history state in goBack:",ue)}setTimeout(()=>{window.location.href="/student"},100)},[e,r,ee,s?.student_id,xt,n]),qt=S.useCallback(()=>{Lt(!1);const ue=rt.current;if(rt.current=null,Mt(!1),ue)try{const he=window.history.state;if(he&&he.__intercept){const Pe=he.prevState??null;window.history.replaceState(Pe,document.title,window.location.href)}}catch(he){ye.warn("Failed to restore history state:",he)}setTimeout(()=>{Vt()},10)},[Vt]),gr=S.useCallback(()=>{const ue=rt.current;rt.current=null,ue?.cancel&&ue.cancel(),Lt(!1)},[]);S.useCallback(()=>{ye.debug(" Showing test results..."),te("results")},[]);const Vr=S.useCallback((ue,he,Pe=null)=>{switch(ye.debug(" Formatting student answer for display:",ue,"testType:",he,"question:",Pe),he){case ls.MULTIPLE_CHOICE:if(ue.toString().startsWith("Option "))return ue;if(Pe&&typeof ue=="string"&&!isNaN(parseInt(ue))){const tt=parseInt(ue),Ge=`option_${String.fromCharCode(97+tt)}`,Ye=Pe[Ge];if(Ye)return ye.debug(" Converted",ue,"to option text:",Ye),Ye;{const ct=String.fromCharCode(65+tt);return ye.debug(" Converted",ue,"to",ct),ct}}else{if(typeof ue=="string"&&isNaN(parseInt(ue)))return ye.debug(" Already formatted text:",ue),ue;{const tt=String.fromCharCode(65+parseInt(ue));return ye.debug(" Converted",ue,"to",tt),tt}}case ls.TRUE_FALSE:return ue==="true"?"True":"False";case ls.INPUT:return ue;case ls.MATCHING:return typeof ue=="object"?JSON.stringify(ue):ue;case ls.WORD_MATCHING:return typeof ue=="object"?JSON.stringify(ue):ue;case ls.DRAWING:return ue&&ue.trim()!==""?"Drawing submitted":"No drawing";case ls.FILL_BLANKS:return ue;default:return ye.warn(" Unknown test type for answer formatting:",he),ue}},[]),Nr=S.useCallback((ue,he)=>{const Pe={id:Date.now(),message:ue,type:he,timestamp:new Date};Y(tt=>[...tt,Pe]),setTimeout(()=>{Y(tt=>tt.filter(Ge=>Ge.id!==Pe.id))},rg.NOTIFICATION_DURATION)},[]);S.useEffect(()=>{Ke()},[Ke]),S.useEffect(()=>{if(re!=="test")return;const ue=Number(G?.allowed_time||0);if(!ue)return;const he=setInterval(()=>{ce(Pe=>{const tt=Math.max(0,Pe-1);try{const Ge=Date.now();je.current||(je.current=Ge),oe.current&&localStorage.setItem(oe.current,JSON.stringify({remainingSeconds:tt,lastTickAt:new Date(Ge).toISOString(),startedAt:pe?pe.toISOString():new Date(Ge-(ue-tt)*1e3).toISOString()}))}catch{}return tt===0&&Oe(),tt})},1e3);return()=>clearInterval(he)},[re,G?.allowed_time,Oe,pe]);const dn=S.useCallback((ue,he)=>{if(!ue)return null;const Pe=(tt,Ge)=>{const Ye=[...z];Ye[he]=Ge,q(Ye),ye.debug(` Answer changed: question ${tt} = ${Ge}`),ye.debug(" Updated studentAnswers:",Ye)};switch(ee.test_type){case ls.TRUE_FALSE:return l.jsx(Aae,{question:ue,questionIndex:he,studentAnswer:z[he]||"",onAnswerChange:Pe,mode:"student",testId:ee?.test_id,testType:Q,displayNumber:he+1});case ls.MULTIPLE_CHOICE:return l.jsx(jae,{question:ue,questionIndex:he,studentAnswer:z[he]||"",onAnswerChange:Pe,mode:"student",testId:ee?.test_id,testType:Q,displayNumber:he+1});case ls.INPUT:return l.jsx(Pae,{question:ue,questionIndex:he,studentAnswer:z[he]||"",onAnswerChange:Pe,mode:"student",testId:ee?.test_id,testType:Q,displayNumber:he+1});case ls.MATCHING:return ye.error("Matching test reached renderQuestion - this should not happen"),l.jsxs("div",{className:"text-center p-8",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-600 mb-4",children:"Matching Test"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"Redirecting to matching test page..."}),l.jsx(ht,{onClick:()=>r("/student"),variant:"primary",children:"Back to Dashboard"})]});case ls.DRAWING:return l.jsx(r0e,{question:ue,questionIndex:he,studentAnswer:z[he]||"",onAnswerChange:Pe,mode:"student",testId:ee?.test_id,testType:Q});case ls.FILL_BLANKS:return he===0?l.jsx(w0e,{testText:G?.test_text,blanks:(M||[]).map((tt,Ge)=>({id:tt.question_id||Ge+1,options:tt.blank_options||[],correct_answer:tt.correct_answers?.[0]||tt.correct_answer,question:tt.question_json||""})),separateType:G?.separate_type,testId:ee?.test_id,testName:G?.test_name||ee?.test_name,teacherId:G?.teacher_id||ee?.teacher_id,subjectId:G?.subject_id||ee?.subject_id,onTestComplete:Oe,onAnswerChange:(tt,Ge)=>{const Ye=M.findIndex(ct=>ct.question_id===tt);if(Ye!==-1){const ct=[...z];ct[Ye]=Ge,q(ct),ye.debug(` Fill Blanks answer changed: question ${tt} = ${Ge}`)}}},`fill-blanks-${ee?.test_id}-${G?.test_name}`):null;default:return l.jsx("div",{children:"Unsupported question type"})}},[ee,z,Q]);function me(){return!ee||!G||!M?null:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`rounded-lg border-2 p-6 ${u?Gt(0).className:f?dr(0).className:`${h.cardBg} ${h.cardBorder}`}`,style:u?{...Gt(0).style,...g.glowRed,boxShadow:`${g.glowRed.boxShadow}, inset 0 0 20px ${rU(fe.red,.1)}`}:f?{...dr(0).style,borderColor:ze.primary,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:[l.jsx("div",{className:"flex justify-between items-center mb-4",children:l.jsx("h2",{className:`text-2xl font-bold ${u?"tracking-wider":h.text}`,style:u?{...g.textCyan,fontFamily:"monospace"}:f?{...g.headerText}:{},children:u?(G.test_name||G.title||"Test").toUpperCase():G.test_name||G.title||"Test"})}),l.jsx("div",{className:"mb-4",children:l.jsx(pz,{answeredCount:st(),totalQuestions:M.length,percentage:Math.round(ne),timeElapsed:Number(G?.allowed_time||0)>0?se:0,showDetails:!0,themeClasses:h,isCyberpunk:u})})]}),l.jsxs("div",{className:`rounded-lg shadow p-6 border ${u?Gt(1).className:f?dr(1).className:`${h.cardBg} ${h.cardBorder}`}`,style:u?{...Gt(1).style,...g.glow}:f?{...dr(1).style,...g.glowPurple}:{},children:[l.jsx("h3",{className:`text-lg font-semibold ${u?"":h.text} mb-6`,style:u?{...g.textCyan,fontFamily:"monospace"}:{},children:"Answer all questions below:"}),l.jsx("div",{className:"space-y-8",children:M.map((ue,he)=>l.jsx("div",{className:"question-container",children:dn(ue,he)},ue.question_id||he))})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx(ht,{variant:"primary",size:"lg",onClick:()=>bt(!0),disabled:Re||st()<M.length,loading:Re,className:"",style:u?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",borderWidth:"2px",...g.glow}:{},children:u?Re?"SUBMITTING...":`SUBMIT TEST (${st()}/${M.length})`:Re?"Submitting...":`Submit Test (${st()}/${M.length})`})})]})}if(w)return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:t?"Starting Test...":"Loading Student Tests..."})]})});if(D)return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Tests Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:D}),l.jsx(ht,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});const Ne=n.pathname.startsWith("/student/test/");if(ye.debug(" [DEBUG] StudentTests render check - isTestRoute:",Ne,"pathname:",n.pathname,"propCurrentTest:",!!t),!Ne&&t)return ye.debug(" [DEBUG] Not on test route anymore, hiding component. Current path:",n.pathname),null;return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${u?"bg-gradient-to-br from-black via-gray-900 to-purple-900":f?"bg-black":"bg-white"}`,style:u?{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"}:f?{...g.background}:{},children:[l.jsx(Fa,{isOpen:Ct,onClose:gr,title:"Exit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:gr,variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:qt,variant:"primary",children:"Go Back"})]})]})}),l.jsx(Fa,{isOpen:Te,onClose:()=>bt(!1),title:"Submit Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:()=>bt(!1),variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:()=>{bt(!1),Oe()},variant:"primary",className:"",style:u?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",borderWidth:"2px",...g.glow}:{},children:u?"SUBMIT":"Submit"})]})]})}),re!=="results"&&l.jsx("div",{className:`${f?"":h.headerBg} border-b-2 ${f?"":h.headerBorder}`,style:u?{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"}:f?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${h.headerText} ${u?"tracking-wider":""}`,style:u?g.textShadow:f?{...g.headerText}:{},children:u?"STUDENT TEST":"Student Test"})}),l.jsx(ht,{variant:"outline",onClick:()=>{rt.current=null,Lt(!0)},className:`border-2 ${h.buttonOutline} ${u?"tracking-wider":""}`,style:u?{fontFamily:"monospace",boxShadow:"0 0 10px rgba(0, 255, 255, 0.3)",textShadow:"0 0 5px rgba(0, 255, 255, 0.5)"}:{},children:u?"BACK TO CABINET":"Back to Cabinet"})]})})}),Sr&&re==="results"&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mx-4 sm:mx-6 lg:mx-8 mt-4",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm text-red-700",children:[l.jsx("strong",{children:"Academic Integrity Warning:"}),"This test has been flagged for suspicious behavior. You have switched tabs ",we," times during the test."]})})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 overflow-y-auto",children:[!t&&re==="list"&&ve(),re==="test"&&me(),re==="results"&&Ee()]}),re==="test"&&T&&l.jsxs("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-[1px] flex flex-col items-center justify-center z-50",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-3 text-gray-700",children:"Preparing your test"}),A&&l.jsx("div",{className:"mt-3 text-sm text-gray-500",children:A})]}),l.jsx(aN,{isOpen:ft,onClose:()=>Je(!1),testType:Ht?.test_type,testId:Ht?.test_id,testName:Ht?.test_name,questions:Ht?.questions,isLoading:w}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:V.map(ue=>l.jsx(hu,{type:ue.type,message:ue.message,onClose:()=>Y(he=>he.filter(Pe=>Pe.id!==ue.id))},ue.id))})]});function ve(){return!i||i.length===0?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:h.textSecondary,children:"No active tests available for your class."})}):l.jsx("div",{className:"space-y-6",children:i.map((ue,he)=>l.jsx("div",{className:`rounded-lg shadow p-6 border ${u?Gt(he).className:`${h.cardBg} ${h.cardBorder}`}`,style:u?{...Gt(he).style,boxShadow:he%2===0?g.glowRed.boxShadow:g.glow.boxShadow}:{},children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`text-lg font-semibold mb-2 ${u?"":h.text}`,style:u?{...g.textCyan,fontFamily:"monospace"}:f?{backgroundColor:ze.primary,color:ze.white,...g.glow}:{},children:u?ue.test_name.toUpperCase():ue.test_name}),l.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-3 gap-4 text-sm ${h.textSecondary}`,children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Subject:"})," ",ue.subject]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Teacher:"})," ",ue.teacher_name]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium",children:"Type:"})," ",ue.test_type]})]}),l.jsxs("div",{className:`mt-2 text-sm ${h.textSecondary}`,children:["Assigned: ",new Date(ue.assigned_at).toLocaleDateString()]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(ht,{variant:"outline",onClick:()=>wt(ue),disabled:j||w,children:"View Details"}),l.jsx(ht,{variant:"primary",onClick:()=>Nt(ue),disabled:j||w,children:j?"Starting...":"Start Test"})]})]})},he))})}function Ee(){if(!ee||!G||!M||!z)return null;const ue={};return z.forEach((he,Pe)=>{if(M[Pe]){const tt=M[Pe].question_id||M[Pe].id||Pe;ue[String(tt)]=he,ye.debug(" Converting answer:",{index:Pe,questionId:tt,answer:he,question:M[Pe]})}}),ye.debug(" Final answersObject:",ue),ye.debug(" Questions structure:",M.map(he=>({id:he.question_id,correct_answer:he.correct_answer}))),l.jsx(ife,{testInfo:G,questions:M,testType:ee.test_type,studentAnswers:ue,onBackToCabinet:Vt,checkAnswerCorrectness:Qp,formatStudentAnswerForDisplay:Vr,getCorrectAnswer:Ov,caughtCheating:Yt})}},ufe=()=>{const{testId:e}=I_(),t=Xo(),{user:r}=Fs(),{makeAuthenticatedRequest:n}=ql(),{showNotification:s}=di(),{theme:a,isCyberpunk:i,isLight:o,isKpop:c,themeClasses:u}=Ra(),d=Da(a),[f,h]=S.useState(null),[g,p]=S.useState(!0),[y,v]=S.useState(null),[C,w]=S.useState(null),[_,T]=S.useState(!1),[E,A]=S.useState(!1),F=S.useRef(null),[j,P]=S.useState(!1);y1("matching_type",f?.id);const D=S.useCallback(()=>{if(!r?.student_id||!e)return!1;const te=`test_completed_${r.student_id}_matching_type_${e}`,ee=localStorage.getItem(te)==="true",L=`retest1_${r.student_id}_matching_type_${e}`,Q=localStorage.getItem(L)==="true";return ee&&!Q?(ye.debug(" Test already completed, redirecting to cabinet"),s("This test has already been completed","info"),t("/student"),!0):!1},[r?.student_id,e,t,s]),B=S.useCallback(async()=>{if(!e){v("Test ID is required"),p(!1);return}if(!D())try{p(!0),v(null);const te=await n(`/.netlify/functions/get-matching-type-test?test_id=${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!te.ok)throw new Error("Failed to load test data");const ee=await te.json();if(!ee.success)throw new Error(ee.message||"Failed to load test");const L=ee.data;ye.debug(" Test data from get-matching-type-test:",L);const Q=await n(`/.netlify/functions/get-test-questions?test_id=${e}&test_type=matching_type`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!Q.ok)throw new Error("Failed to load test questions");const U=await Q.json();if(!U.success)throw new Error(U.message||"Failed to load test questions");ye.debug(" Questions data from get-test-questions:",U);const G={id:L.test_id,test_name:L.test_name,teacher_id:L.teacher_id,subject_id:L.subject_id,image_url:L.image_url,image:null,blocks:(()=>{if(Array.isArray(U.questions)&&U.questions.length>0){const W=U.questions[0];return Array.isArray(W.blocks)?W.blocks.map((M,I)=>{let z=M.block_coordinates||M.coordinates||(typeof M.x=="number"?{x:M.x,y:M.y,width:M.width,height:M.height}:null);if(typeof z=="string")try{z=JSON.parse(z)}catch{z=null}return(!z||typeof z!="object")&&(z={x:0,y:0,width:30,height:10}),z={x:(typeof z.x=="number"?z.x:Number(z.x))||0,y:(typeof z.y=="number"?z.y:Number(z.y))||0,width:(typeof z.width=="number"?z.width:Number(z.width))||30,height:(typeof z.height=="number"?z.height:Number(z.height))||10},{id:M.block_id||M.question_id||M.id||I+1,word:M.word||`Word ${I+1}`,coordinates:z,hasArrow:!!M.has_arrow,arrow:M.arrow||null}}):U.questions.map(M=>{ye.debug(" Processing question:",M);let I;try{I=typeof M.block_coordinates=="string"?JSON.parse(M.block_coordinates):M.block_coordinates}catch{I={x:0,y:0,width:100,height:100}}return(!I||typeof I!="object")&&(I={x:0,y:0,width:100,height:100}),I={x:(typeof I.x=="number"?I.x:Number(I.x))||0,y:(typeof I.y=="number"?I.y:Number(I.y))||0,width:(typeof I.width=="number"?I.width:Number(I.width))||100,height:(typeof I.height=="number"?I.height:Number(I.height))||100},{id:M.question_id,word:M.word,coordinates:I,hasArrow:M.has_arrow,arrow:M.arrow}})}return[]})(),words:(()=>{if(Array.isArray(U.questions)&&U.questions.length>0){const W=U.questions[0];if(Array.isArray(W.words)){const M=W.words,I=Array.isArray(W.blocks)?W.blocks:[];return typeof M[0]=="string"?M.map((q,ne)=>({id:`w_${I[ne]?.question_id||I[ne]?.block_id||U.questions[ne]?.question_id||ne+1}_${ne}`,word:String(q),blockId:null,isPlaced:!1,isCorrect:!1})):M.map((q,ne)=>({id:`w_${q.question_id||q.id||ne+1}_${ne}`,word:q.word||String(q.text||""),blockId:null,isPlaced:!1,isCorrect:!1}))}return U.questions.map(M=>({id:`w_${M.question_id}`,word:M.word,blockId:null,isPlaced:!1,isCorrect:!1}))}return[]})(),arrows:L.arrows?L.arrows.map(W=>(ye.debug(" Processing arrow:",W),{id:W.id,questionId:W.question_id,blockId:W.block_id||W.question_id,start:{x:Number(W.start_x)||0,y:Number(W.start_y)||0},end:{x:Number(W.end_x)||0,y:Number(W.end_y)||0},rel_start_x:W.rel_start_x!==null?Number(W.rel_start_x):null,rel_start_y:W.rel_start_y!==null?Number(W.rel_start_y):null,rel_end_x:W.rel_end_x!==null?Number(W.rel_end_x):null,rel_end_y:W.rel_end_y!==null?Number(W.rel_end_y):null,image_width:W.image_width?Number(W.image_width):null,image_height:W.image_height?Number(W.image_height):null,style:(typeof W.style=="string"?JSON.parse(W.style):W.style)||{color:"#dc3545",thickness:3}})):[]};if(L.image_url){const W=new Image;W.crossOrigin="anonymous",W.onload=()=>{G.image=W,h(G),p(!1)},W.onerror=()=>{ye.warn("Failed to load test image"),h(G),p(!1)},W.src=L.image_url}else h(G),p(!1)}catch(te){ye.error("Error loading test data:",te),v(te.message||"Failed to load test"),p(!1)}},[e,n]);S.useEffect(()=>{r?.student_id&&B()},[B,r?.student_id]);const V=S.useCallback(async te=>{ye.debug("Test completed:",te),s("Test completed successfully!","success");const ee=parseInt(te)||0,L=f?.blocks?.length||f?.words?.length||0,Q=L>0?Math.round(ee/L*100):0,U={showResults:!0,testInfo:{test_name:f?.test_name||"Test",id:f?.id,test_id:f?.id},testType:"matching_type",score:ee,totalQuestions:L,percentage:Q,passed:Q>=60,questionAnalysis:f?.questions?.map((G,W)=>({questionNumber:W+1,isCorrect:W<ee,userAnswer:W<ee?`Matched: ${G.word}`:"Not answered",correctAnswer:`Match: ${G.word}`}))||Array.from({length:L},(G,W)=>({questionNumber:W+1,isCorrect:W<ee,userAnswer:W<ee?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};ye.debug(" Using test results data:",U),w(U),T(!0)},[f,s]),Y=S.useCallback(()=>{A(!1),F.current=null,t("/student")},[t]);h2(E&&_,S.useCallback(({confirm:te,cancel:ee})=>{F.current={confirm:te,cancel:ee},P(!0)},[])),S.useEffect(()=>{_?A(!0):(A(!1),F.current=null)},[_]),S.useCallback(()=>{P(!1);const te=F.current;if(F.current=null,A(!1),te)try{const ee=window.history.state;if(ee&&ee.__intercept){const L=ee.prevState??null;window.history.replaceState(L,document.title,window.location.href)}}catch(ee){ye.warn("Failed to restore history state:",ee)}setTimeout(()=>{w(null),T(!1),t("/student")},10)},[t]),S.useCallback(()=>{const te=F.current;F.current=null,te?.cancel&&te.cancel(),P(!1)},[]);const re=S.useCallback(()=>{T(!1),w(null),B()},[B]);return g?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Kt,{className:"max-w-md w-full",children:l.jsxs(Kt.Body,{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading test..."})]})})}):y?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Kt,{className:"max-w-md w-full",children:l.jsxs(Kt.Body,{className:"text-center",children:[l.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-4",children:y}),l.jsx("button",{onClick:Y,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})}):f?_&&C?l.jsx("div",{className:`overflow-y-auto min-h-screen ${i?"bg-gradient-to-br from-black via-gray-900 to-purple-900":c?"bg-black":"bg-white"}`,style:i?{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"}:c?{backgroundColor:ze.backgroundSecondary,boxShadow:"0 0 30px rgba(236, 72, 153, 0.4), 0 0 60px rgba(236, 72, 153, 0.2)"}:{},children:l.jsx(E2,{testResults:C,onBackToCabinet:()=>{A(!1),F.current=null,w(null),T(!1),t("/student")},onRetakeTest:re,isLoading:!1})}):l.jsx("div",{className:`min-h-screen ${i?"bg-gradient-to-br from-black via-gray-900 to-purple-900":c?"bg-black":"bg-white"}`,style:i?d.background:c?{backgroundColor:ze.backgroundSecondary,boxShadow:"0 0 30px rgba(236, 72, 153, 0.4), 0 0 60px rgba(236, 72, 153, 0.2)"}:{},children:l.jsx(nle,{testData:f,onTestComplete:V,onBackToCabinet:Y})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900 flex items-center justify-center",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Kt,{className:"max-w-md w-full",children:l.jsxs(Kt.Body,{className:"text-center",children:[l.jsx("div",{className:"text-gray-500 text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Test Data"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to load test data"}),l.jsx("button",{onClick:Y,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Dashboard"})]})})})},dfe=()=>{const{testId:e}=I_(),t=Xo(),{user:r}=Fs(),{makeAuthenticatedRequest:n}=ql(),{showNotification:s}=di(),{theme:a,isCyberpunk:i,isLight:o,isKpop:c,themeClasses:u}=Ra(),d=Da(a),[f,h]=S.useState(null),[g,p]=S.useState(!0),[y,v]=S.useState(null),[C,w]=S.useState(null),[_,T]=S.useState(!1),E=S.useCallback(()=>{if(!r?.student_id||!e)return!1;const P=`test_completed_${r.student_id}_word_matching_${e}`,D=`retest1_${r.student_id}_word_matching_${e}`;return localStorage.getItem(D)==="true"?!1:localStorage.getItem(P)==="true"},[r?.student_id,e]),A=S.useCallback(async()=>{if(!e){v("Test ID is required"),p(!1);return}if(E()){s("This test has already been completed","warning"),t("/student");return}p(!0),v(null);try{const P=`word_matching_test_${e}`,D=js(P);if(D){if(ye.debug(" Word matching test loaded from cache:",D),D.id){let Y=D,re=Array.isArray(Y.correctPairs)?Y.correctPairs:Y.correctPairs&&typeof Y.correctPairs=="object"?Object.keys(Y.correctPairs).map(te=>[Number(te),Y.correctPairs[te]]).sort((te,ee)=>te[0]-ee[0]).map(([,te])=>te):null;if(Array.isArray(Y.leftWords)&&Array.isArray(Y.rightWords)&&Array.isArray(re)){const te=Y.rightWords.map((W,M)=>M),ee=Y.leftWords.map((W,M)=>M);for(let W=te.length-1;W>0;W--){const M=Math.floor(Math.random()*(W+1));[te[W],te[M]]=[te[M],te[W]]}for(let W=ee.length-1;W>0;W--){const M=Math.floor(Math.random()*(W+1));[ee[W],ee[M]]=[ee[M],ee[W]]}const L=te.map(W=>Y.rightWords[W]),Q=ee.map(W=>Y.leftWords[W]),U=new Map(te.map((W,M)=>[W,M])),G=ee.map(W=>{const M=re[W];return U.get(M)});Y={...Y,leftWords:Q,rightWords:L,correctPairs:G}}h(Y)}else{let re={id:D.test_id,test_id:D.test_id,test_name:D.test_name,teacher_id:D.teacher_id,subject_id:D.subject_id,num_questions:D.num_questions,interaction_type:D.interaction_type,passing_score:D.passing_score,allowed_time:D.allowed_time,created_at:D.created_at,updated_at:D.updated_at,leftWords:D.leftWords,rightWords:D.rightWords,correctPairs:D.correctPairs,originalPairs:D.originalPairs},te=Array.isArray(re.correctPairs)?re.correctPairs:re.correctPairs&&typeof re.correctPairs=="object"?Object.keys(re.correctPairs).map(ee=>[Number(ee),re.correctPairs[ee]]).sort((ee,L)=>ee[0]-L[0]).map(([,ee])=>ee):null;if(Array.isArray(re.leftWords)&&Array.isArray(re.rightWords)&&Array.isArray(te)){const ee=re.rightWords.map((M,I)=>I),L=re.leftWords.map((M,I)=>I);for(let M=ee.length-1;M>0;M--){const I=Math.floor(Math.random()*(M+1));[ee[M],ee[I]]=[ee[I],ee[M]]}for(let M=L.length-1;M>0;M--){const I=Math.floor(Math.random()*(M+1));[L[M],L[I]]=[L[I],L[M]]}const Q=ee.map(M=>re.rightWords[M]),U=L.map(M=>re.leftWords[M]),G=new Map(ee.map((M,I)=>[M,I])),W=L.map(M=>{const I=te[M];return G.get(I)});re={...re,leftWords:U,rightWords:Q,correctPairs:W}}h(re)}p(!1);return}const V=await(await n(`/.netlify/functions/get-word-matching-test?test_id=${e}`)).json();if(V.success){const Y={id:V.data.test_id,test_id:V.data.test_id,test_name:V.data.test_name,teacher_id:V.data.teacher_id,subject_id:V.data.subject_id,num_questions:V.data.num_questions,interaction_type:V.data.interaction_type,passing_score:V.data.passing_score,allowed_time:V.data.allowed_time,created_at:V.data.created_at,updated_at:V.data.updated_at,leftWords:V.data.leftWords,rightWords:V.data.rightWords,correctPairs:V.data.correctPairs,originalPairs:V.data.originalPairs};let re=Y,te=Array.isArray(re.correctPairs)?re.correctPairs:re.correctPairs&&typeof re.correctPairs=="object"?Object.keys(re.correctPairs).map(ee=>[Number(ee),re.correctPairs[ee]]).sort((ee,L)=>ee[0]-L[0]).map(([,ee])=>ee):null;if(Array.isArray(re.leftWords)&&Array.isArray(re.rightWords)&&Array.isArray(te)){const ee=re.rightWords.map((M,I)=>I),L=re.leftWords.map((M,I)=>I);for(let M=ee.length-1;M>0;M--){const I=Math.floor(Math.random()*(M+1));[ee[M],ee[I]]=[ee[I],ee[M]]}for(let M=L.length-1;M>0;M--){const I=Math.floor(Math.random()*(M+1));[L[M],L[I]]=[L[I],L[M]]}const Q=ee.map(M=>re.rightWords[M]),U=L.map(M=>re.leftWords[M]),G=new Map(ee.map((M,I)=>[M,I])),W=L.map(M=>{const I=te[M];return G.get(I)});re={...re,leftWords:U,rightWords:Q,correctPairs:W}}h(re),ys(P,re,ds.word_matching_test),ye.debug(" Word matching test loaded from API and cached:",Y)}else throw new Error(V.message||"Failed to load test")}catch(P){ye.error("Error loading word matching test:",P),v(P.message),s("Failed to load test: "+P.message,"error")}finally{p(!1)}},[e,E,n,s,t]),F=S.useCallback(async P=>{ye.debug("Test completed:",P),s("Test completed successfully!","success");const D=typeof P=="object"?parseInt(P.score)||0:parseInt(P)||0,B=typeof P=="object"&&P.caught_cheating||!1,V=typeof P=="object"&&P.visibility_change_times||0,Y=f?.num_questions||0,re=Y>0?Math.round(D/Y*100):0,te={showResults:!0,testInfo:{test_name:f?.test_name||"Test",id:f?.id,test_id:f?.id},testType:"word_matching",score:D,totalQuestions:Y,percentage:re,passed:re>=60,questionAnalysis:Array.isArray(f?.correctPairs)?f.correctPairs.map((ee,L)=>({questionNumber:L+1,isCorrect:L<D,userAnswer:L<D?`${ee.left}  ${ee.right}`:"Not answered",correctAnswer:`${ee.left}  ${ee.right}`})):Array.from({length:Y},(ee,L)=>({questionNumber:L+1,isCorrect:L<D,userAnswer:L<D?"Matched":"Not answered",correctAnswer:"Match required"})),timestamp:new Date().toISOString(),caught_cheating:B,visibility_change_times:V};ye.debug(" Using test results data:",te),w(te),T(!0)},[f,s]),j=S.useCallback(()=>{t("/student")},[t]);return S.useEffect(()=>{A()},[A]),g?l.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsxs(Kt,{className:"p-8 text-center",children:[l.jsx(pn,{size:"lg",className:"mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading word matching test..."})]})}):y?l.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Kt,{className:"p-8 text-center",children:l.jsxs("div",{className:"text-red-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Test"}),l.jsx("p",{className:"text-gray-600 mb-4",children:y}),l.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})}):f?_&&C?l.jsx("div",{className:`overflow-y-auto min-h-screen ${i?"bg-gradient-to-br from-black via-gray-900 to-purple-900":c?"bg-black":"bg-white"}`,style:i?{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"}:c?{backgroundColor:ze.backgroundSecondary,boxShadow:"0 0 30px rgba(236, 72, 153, 0.4), 0 0 60px rgba(236, 72, 153, 0.2)"}:{},children:l.jsx(E2,{testResults:C,onBackToCabinet:()=>{w(null),T(!1),t("/student")},onRetakeTest:(P,D)=>{w(null),T(!1),A()},isLoading:!1,caught_cheating:C.caught_cheating||!1,visibility_change_times:C.visibility_change_times||0})}):l.jsx(vt.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:`min-h-screen py-8 ${i?"bg-gradient-to-br from-black via-gray-900 to-purple-900":c?"bg-black":"bg-white"}`,style:i?d.background:c?{backgroundColor:ze.backgroundSecondary,boxShadow:"0 0 30px rgba(236, 72, 153, 0.4), 0 0 60px rgba(236, 72, 153, 0.2)"}:{},children:l.jsx(ile,{testData:f,onTestComplete:F,onBackToCabinet:j})}):l.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-black via-gray-900 to-purple-900",style:{backgroundImage:"radial-gradient(circle at 20% 50%, rgba(255, 215, 0, 0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%), radial-gradient(circle at 40% 20%, rgba(147, 51, 234, 0.1) 0%, transparent 50%)"},children:l.jsx(Kt,{className:"p-8 text-center",children:l.jsxs("div",{className:"text-gray-600 mb-4",children:[l.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Not Found"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"The requested test could not be found."}),l.jsx("button",{onClick:()=>t("/student"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Cabinet"})]})})})};async function ffe(e,t){if(!e)return e;const r=e.type||"";if(r==="audio/wav"||r==="audio/wave"||r==="audio/x-wav")return e;try{const n=await e.arrayBuffer(),s=await hfe(t),a=await mfe(s,n),i=gfe(a);return new Blob([i],{type:"audio/wav"})}catch(n){return console.warn("convertBlobToWav: failed to convert, returning original blob",n),e}}async function hfe(e){if(e&&e.state!=="closed")return e;const t=window.AudioContext||window.webkitAudioContext;if(!t)throw new Error("AudioContext is not supported in this browser");const r=new t;if(r.state==="suspended"&&r.resume)try{await r.resume()}catch{}return r}function mfe(e,t){return new Promise((r,n)=>{const s=t.slice(0),a=e.decodeAudioData(s,r,n);a&&typeof a.then=="function"&&a.then(r).catch(n)})}function gfe(e){const t=e.numberOfChannels||1,r=e.sampleRate||44100,n=e.length,s=2,a=t*s,i=r*a,o=n*a,c=44+o,u=new ArrayBuffer(c),d=new DataView(u);yw(d,0,"RIFF"),d.setUint32(4,36+o,!0),yw(d,8,"WAVE"),yw(d,12,"fmt "),d.setUint32(16,16,!0),d.setUint16(20,1,!0),d.setUint16(22,t,!0),d.setUint32(24,r,!0),d.setUint32(28,i,!0),d.setUint16(32,a,!0),d.setUint16(34,s*8,!0),yw(d,36,"data"),d.setUint32(40,o,!0);let f=44;const h=[];for(let g=0;g<t;g++)h.push(e.getChannelData(g));for(let g=0;g<n;g++)for(let p=0;p<t;p++){let y=h[p][g];y=Math.max(-1,Math.min(1,y)),d.setInt16(f,y<0?y*32768:y*32767,!0),f+=2}return u}function yw(e,t,r){for(let n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))}const pfe=S.forwardRef(({onRecordingComplete:e,minDuration:t=0,maxDuration:r=600,minWords:n=50,maxAttempts:s=3,currentAttempt:a=1},i)=>{const{theme:o,isCyberpunk:c,isKpop:u,themeClasses:d}=Ra(),f=Da(o),[h,g]=S.useState(!1),[p,y]=S.useState(!1),[v,C]=S.useState(0),[w,_]=S.useState(null),[T,E]=S.useState(null),[A,F]=S.useState("good"),j=S.useRef(null),P=S.useRef([]),D=S.useRef(null),B=S.useRef(null),V=S.useRef(null),Y=S.useRef(null),re=S.useRef(null);S.useImperativeHandle(i,()=>({startRecording:()=>te(),stopRecording:()=>ee(),pauseRecording:()=>L(),resumeRecording:()=>Q()}));const te=S.useCallback(async()=>{try{if(E(null),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");if(!window.isSecureContext&&!window.location.hostname.includes("localhost"))throw new Error("Microphone access requires HTTPS. Please use a secure connection.");const I=window.AudioContext||window.webkitAudioContext;V.current||(V.current=new I),V.current.state!=="running"&&await V.current.resume().catch(()=>{}),console.log(" Requesting microphone permission...");const z=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,channelCount:1}});console.log(" Microphone permission granted"),D.current=z;try{let ce=document.getElementById("ios-audio-sink");ce||(ce=document.createElement("audio"),ce.id="ios-audio-sink",ce.muted=!0,ce.playsInline=!0,ce.style.display="none",document.body.appendChild(ce)),ce.srcObject=z,await ce.play().catch(()=>{})}catch{}const q=V.current.createAnalyser();V.current.createMediaStreamSource(z).connect(q),q.fftSize=256,Y.current=q,U();let X="audio/webm;codecs=opus";typeof MediaRecorder<"u"&&MediaRecorder.isTypeSupported&&!MediaRecorder.isTypeSupported(X)&&(MediaRecorder.isTypeSupported("audio/mp4")?X="audio/mp4":MediaRecorder.isTypeSupported("audio/aac")?X="audio/aac":X="");const se=new MediaRecorder(z,X?{mimeType:X}:void 0);j.current=se,P.current=[],se.ondataavailable=ce=>{ce.data.size>0&&P.current.push(ce.data)},se.onstop=async()=>{const ce=X&&X.startsWith("audio/")?X:"audio/webm";let pe=new Blob(P.current,{type:ce});try{pe=await ffe(pe,V.current)}catch(be){console.warn("AudioRecorder: failed to convert audio to WAV, using original blob",be)}_(pe),e(pe,v),D.current&&D.current.getTracks().forEach(be=>be.stop()),re.current&&cancelAnimationFrame(re.current)},se.start(),g(!0),C(0),B.current=setInterval(()=>{C(ce=>{const pe=ce+1;return pe>=r&&ee(),pe})},1e3)}catch(I){console.error("Error starting recording:",I);const z=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;I.name==="NotAllowedError"?E(z?"Microphone access denied. Please go to Settings > Safari > Microphone and allow access, then refresh the page.":"Microphone access denied. Please allow microphone access in your browser settings and try again."):I.name==="NotFoundError"?E("No microphone found. Please connect a microphone and try again."):I.name==="NotSupportedError"?E("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox."):I.message.includes("HTTPS")?E("Microphone access requires HTTPS. Please use a secure connection."):E(`Failed to access microphone: ${I.message}`)}},[r]),ee=S.useCallback(()=>{if(j.current&&h&&(j.current.stop(),g(!1),y(!1),B.current&&clearInterval(B.current),v<t)){E(`Recording must be at least ${t} seconds long.`);return}},[h,v,t,w,e]),L=S.useCallback(()=>{j.current&&h&&!p&&(j.current.pause(),y(!0),B.current&&clearInterval(B.current))},[h,p]),Q=S.useCallback(()=>{j.current&&h&&p&&(j.current.resume(),y(!1),B.current=setInterval(()=>{C(I=>{const z=I+1;return z>=r&&ee(),z})},1e3))},[h,p,r,ee]),U=S.useCallback(()=>{if(!Y.current)return;const I=Y.current,z=new Uint8Array(I.frequencyBinCount),q=()=>{I.getByteFrequencyData(z);const ne=z.reduce((X,se)=>X+se,0)/z.length;ne<10?F("poor"):ne<30?F("fair"):F("good"),h&&(re.current=requestAnimationFrame(q))};q()},[h]),G=I=>{const z=Math.floor(I/60),q=I%60;return`${z}:${q.toString().padStart(2,"0")}`},W=()=>{switch(A){case"poor":return"text-red-600";case"fair":return"text-yellow-600";case"good":return"text-green-600";default:return"text-gray-600"}},M=()=>{switch(A){case"poor":return"Poor audio quality - speak closer to microphone";case"fair":return"Fair audio quality - good for recording";case"good":return"Excellent audio quality";default:return"Monitoring audio quality..."}};return l.jsxs("div",{className:`audio-recorder rounded-lg shadow-lg py-3 px-0 sm:p-6 ${c?Gt(1).className:u?dr(1).className:"bg-white"}`,style:c?{...Gt(1).style,...f.glow}:u?{...dr(1).style,borderColor:ze.primary}:{},children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("h3",{className:"text-xl font-semibold mb-2 ",style:c?{...f.textCyan,fontFamily:"monospace"}:u?{...f.headerText}:{},children:c?"RECORD YOUR RESPONSE":"Record Your Response"}),l.jsx("p",{className:c?"":"text-gray-600",style:c?{color:fe.cyan,fontFamily:"monospace"}:u?{...f.textAccent}:{},children:c?"SPEAK CLEARLY AND AT A NORMAL PACE. YOU CAN PAUSE AND RESUME IF NEEDED.":"Speak clearly and at a normal pace. You can pause and resume if needed."})]}),l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:`text-4xl font-bold mb-2 ${c||u?"":"text-blue-600"}`,style:c?{...f.textCyan,fontFamily:"monospace"}:u?{...f.textPink}:{},children:G(v)}),l.jsx("div",{className:`text-sm ${u?"":W()}`,style:c?{color:fe.cyan,fontFamily:"monospace"}:u?{color:A==="good"?ze.success:A==="fair"?ze.primary:ze.error,...f.textShadow}:{},children:M()}),p&&l.jsx("div",{className:`font-semibold mt-2 ${c||u?"":"text-yellow-600"}`,style:c?{color:fe.yellow,fontFamily:"monospace",...f.textShadowYellow}:u?{color:ze.primary,...f.textShadow}:{},children:c?" RECORDING PAUSED":" Recording Paused"})]}),h&&l.jsx("div",{className:"mb-6",children:l.jsx("div",{className:"flex justify-center items-center space-x-1 h-8",children:Array.from({length:20},(I,z)=>l.jsx("div",{className:"bg-blue-400 rounded-sm",style:{width:"4px",height:`${Math.random()*20+4}px`,animation:"pulse 0.5s ease-in-out infinite"}},z))})}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-center mb-6",children:h?l.jsxs(l.Fragment,{children:[p?l.jsxs("button",{onClick:Q,className:"w-full sm:w-auto bg-green-600 text-white px-6 py-4 rounded-full hover:bg-green-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Resume"})]}):l.jsxs("button",{onClick:L,className:"w-full sm:w-auto bg-yellow-600 text-white px-6 py-4 rounded-full hover:bg-yellow-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Pause"})]}),l.jsxs("button",{onClick:ee,className:"w-full sm:w-auto bg-gray-600 text-white px-6 py-4 rounded-full hover:bg-gray-700 flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Stop & Submit"})]})]}):l.jsxs("button",{onClick:te,className:`w-full sm:w-auto ${u?"bg-pink-500 hover:bg-pink-600":"bg-red-600 hover:bg-red-700"} text-white px-6 py-4 rounded-full flex items-center justify-center space-x-2 min-h-[48px] text-lg font-semibold`,children:[l.jsx("span",{className:"text-xl",children:""}),l.jsx("span",{children:"Start Recording"})]})}),T&&l.jsx("div",{className:`mt-4 py-3 px-0 sm:p-4 ${u?"bg-red-500/10 border border-red-500/50":"bg-red-50 border border-red-200"} rounded-lg`,style:u?{...f.glowRed}:{},children:l.jsx("p",{className:u?"text-red-400":"text-red-800",style:u?{color:ze.error,...f.textShadowRed}:{},children:T})}),l.jsxs("div",{className:`mt-4 text-center text-sm ${c||u?"":"text-gray-600"}`,style:c?{color:fe.cyan,fontFamily:"monospace"}:u?{...f.textAccent}:{},children:[c?`ATTEMPT ${a} OF ${s}`:`Attempt ${a} of ${s}`,a<s&&l.jsx("span",{className:`ml-2 ${c||u?"":"text-blue-600"}`,style:c?{color:fe.cyan,fontFamily:"monospace"}:u?{color:ze.primary,...f.textShadow}:{},children:c?"(YOU CAN RE-RECORD IF NEEDED)":"(You can re-record if needed)"})]})]})}),jH=({audioBlob:e,audioUrl:t,recordingTime:r,className:n=""})=>{const{theme:s,isCyberpunk:a,themeClasses:i}=Ra(),o=Da(s),c=typeof window<"u"&&window.location.pathname.includes("/student"),u=a&&c,[d,f]=S.useState(!1),[h,g]=S.useState(0),[p,y]=S.useState(0),[v,C]=S.useState(1),[w,_]=S.useState(1),[T,E]=S.useState(!0),[A,F]=S.useState(""),[j,P]=S.useState(!1),[D,B]=S.useState(null),[V,Y]=S.useState(!1),re=S.useRef(null),te=S.useRef(null),ee=S.useRef(!1);S.useEffect(()=>()=>{ee.current=!0},[]),S.useEffect(()=>{let q=!1;if(t)q||F(t);else if(e){if(!e||e.size===0){q||E(!1);return}if(!(e instanceof Blob)){console.error("audioBlob is not a Blob:",typeof e,e),q||E(!1);return}const ne=URL.createObjectURL(e);return q||F(ne),()=>{q=!0,URL.revokeObjectURL(ne)}}return()=>{q=!0}},[e,t]),S.useEffect(()=>{let q=!1;const ne=se=>{try{const ce=new URL(se);return/\/storage\/v1\/object\/public\//.test(ce.pathname)}catch{return!1}};async function X(se){if(!se||V||/\/object\/sign\//.test(se)||!ne(se))return se;try{const pe=new URL(se).pathname.replace(/^\/storage\/v1\/object\/public\//,""),be=pe.split("/")[0],oe=pe.substring(be.length+1),je=await fetch(`/.netlify/functions/get-speaking-test-new?action=sign-audio&bucket=${encodeURIComponent(be)}&file_path=${encodeURIComponent(oe)}`);if(je.ok){const{url:Re}=await je.json();if(!q&&!ee.current){Y(!0);try{await fetch(Re,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}F(Re)}return Re}}catch{}return se}return(async()=>{if(t){const se=await X(t);try{await fetch(se,{headers:{Range:"bytes=0-1"},mode:"cors"})}catch{}!q&&!ee.current&&!V&&F(se)}})(),()=>{q=!0}},[t,V]),S.useEffect(()=>{let q=!1;return A&&(q||(P(!1),B(null),E(!0))),()=>{q=!0}},[A]),S.useEffect(()=>{if(re.current&&A){const q=re.current;let ne=!1;try{q.src=A}catch{}q.load();const X=()=>{if(ne||ee.current)return;let Ht=q.duration;if(Ht===1/0)try{q.currentTime=1e101,q.ontimeupdate=()=>{if(ne||ee.current)return;q.ontimeupdate=null;const Ve=q.duration;ne||(y(isFinite(Ve)&&Ve>0?Ve:0),q.currentTime=0,E(!1))};return}catch(Ve){console.warn("Seek trick failed:",Ve)}if(isNaN(Ht)||!isFinite(Ht)||Ht<=0){const Ve=q.seekable&&q.seekable.length>0&&isFinite(q.seekable.end(0)),at=!Ve&&q.buffered&&q.buffered.length>0&&isFinite(q.buffered.end(q.buffered.length-1));Ve?Ht=q.seekable.end(0):at&&(Ht=q.buffered.end(q.buffered.length-1))}isNaN(Ht)||!isFinite(Ht)||Ht<=0?(console.warn("Invalid audio duration after fallbacks:",Ht),r&&r>0?ne||y(r):ne||y(0)):ne||y(Ht),ne||E(!1)},se=()=>{ne||ee.current||X()},ce=()=>{ne||ee.current||X()},pe=()=>{ne||ee.current||X()},be=()=>{ne||ee.current||X()},oe=()=>{ne||ee.current||g(q.currentTime)},je=()=>{ne||ee.current||(f(!1),g(0))},Re=()=>{ne||ee.current||f(!0)},Xe=()=>{ne||ee.current||f(!1)},ft=Ht=>{if(ne||ee.current)return;console.error("Audio loading error:",Ht),console.error("Audio error details:",{error:q.error,networkState:q.networkState,readyState:q.readyState,src:q.src,currentSrc:q.currentSrc});const Ve=q.error?.code;Ve===4&&P(!0),B(q.error||{code:Ve}),E(!1)},Je=setTimeout(()=>{ne||ee.current||q.readyState===0&&E(!1)},6e3);return q.addEventListener("loadedmetadata",se),q.addEventListener("durationchange",ce),q.addEventListener("canplay",pe),q.addEventListener("canplaythrough",be),q.addEventListener("timeupdate",oe),q.addEventListener("ended",je),q.addEventListener("play",Re),q.addEventListener("pause",Xe),q.addEventListener("error",ft),()=>{ne=!0,clearTimeout(Je),q.removeEventListener("loadedmetadata",se),q.removeEventListener("durationchange",ce),q.removeEventListener("canplay",pe),q.removeEventListener("canplaythrough",be),q.removeEventListener("timeupdate",oe),q.removeEventListener("ended",je),q.removeEventListener("play",Re),q.removeEventListener("pause",Xe),q.removeEventListener("error",ft),q.pause(),q.src="",q.load()}}},[A,r]),S.useEffect(()=>{let q=!1;return r&&r>0&&(isNaN(p)||!isFinite(p)||p<=0)&&(q||y(r)),()=>{q=!0}},[r,p]);const L=()=>{re.current&&(d?re.current.pause():re.current.play().catch(q=>{console.error("Play failed:",q)}))},Q=q=>{if(re.current&&te.current&&p>0){const ne=te.current.getBoundingClientRect(),X=q.clientX-ne.left,se=ne.width,ce=Math.max(0,Math.min(p,X/se*p));isFinite(ce)&&ce>=0&&(re.current.currentTime=ce,g(ce))}},U=q=>{const ne=parseFloat(q.target.value);C(ne),re.current&&(re.current.volume=ne)},G=q=>{const ne=parseFloat(q.target.value);_(ne),re.current&&(re.current.playbackRate=ne)},W=q=>{if(isNaN(q))return"0:00";const ne=Math.floor(q/60),X=Math.floor(q%60);return`${ne}:${X.toString().padStart(2,"0")}`};if(!e&&!t)return l.jsx("div",{className:`audio-player ${n} ${u?Gt(0).className:""}`,style:u?{...Gt(0).style,...o.glow}:{},children:l.jsx("div",{className:`text-center py-8 ${u?"":"text-gray-500"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},children:u?"NO AUDIO AVAILABLE":"No audio available"})});const I=(q=>{try{const X=(q||"").toLowerCase().split("?")[0].split("#")[0];return X.endsWith(".webm")?"audio/webm":X.endsWith(".mp3")?"audio/mpeg":X.endsWith(".m4a")?"audio/mp4":X.endsWith(".aac")?"audio/aac":X.endsWith(".wav")?"audio/wav":void 0}catch{return}})(A||t),z=Gs.useMemo(()=>typeof window>"u"?!0:document.createElement("audio").canPlayType("audio/webm")!=="",[]);return l.jsxs("div",{className:`audio-player rounded-lg p-4 ${n} ${u?Gt(0).className:"bg-gray-50"}`,style:u?{...Gt(0).style,...o.glow}:{},children:[l.jsx("audio",{ref:re,preload:"metadata",controls:!1,style:{display:"none"},crossOrigin:"anonymous",children:l.jsx("source",{src:A,type:I})}),T?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:`inline-block animate-spin rounded-full h-6 w-6 border-b-2 ${u?"":"border-blue-600"}`,style:u?{borderColor:fe.cyan}:{}}),l.jsx("p",{className:`text-sm mt-2 ${u?"":"text-gray-600"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},children:u?"LOADING AUDIO...":"Loading audio..."})]}):j?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("p",{className:`text-sm ${u?"":"text-red-600"}`,style:u?{color:fe.red,fontFamily:"monospace",...o.textShadowRed}:{},children:u?"THIS AUDIO FORMAT ISN'T SUPPORTED BY YOUR BROWSER.":"This audio format isn't supported by your browser."}),A?l.jsx("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:`underline text-sm ${u?"":"text-blue-600"}`,style:u?{color:fe.cyan,fontFamily:"monospace",...o.textShadow}:{},children:u?"OPEN IN NEW TAB":"Open in new tab"}):null,I?l.jsx("p",{className:`text-xs mt-1 ${u?"":"text-gray-500"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},children:u?`DETECTED TYPE: ${I}`:`Detected type: ${I}`}):null,l.jsx("p",{className:`text-xs mt-1 ${u?"":"text-gray-500"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},children:u?`BROWSER WEBM SUPPORT: ${z?"YES":"NO"}${z?"":" - TRY USING CHROME, FIREFOX, OR EDGE"}`:`Browser WebM support: ${z?"Yes":"No"}${z?"":" - Try using Chrome, Firefox, or Edge"}`}),l.jsx("p",{className:`text-xs mt-1 ${u?"":"text-gray-500"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},children:u?"PREFERRED FORMAT: WEBM":"Preferred format: WebM"})]}):D?l.jsxs("div",{className:"text-center py-4",children:[l.jsx("p",{className:`text-sm ${u?"":"text-red-600"}`,style:u?{color:fe.red,fontFamily:"monospace",...o.textShadowRed}:{},children:u?"PLAYBACK FAILED. PLEASE TRY OPENING THE AUDIO DIRECTLY.":"Playback failed. Please try opening the audio directly."}),A?l.jsx("a",{href:A,target:"_blank",rel:"noopener noreferrer",className:`underline text-sm ${u?"":"text-blue-600"}`,style:u?{color:fe.cyan,fontFamily:"monospace",...o.textShadow}:{},children:u?"OPEN IN NEW TAB":"Open in new tab"}):null,I?l.jsx("p",{className:`text-xs mt-1 ${u?"":"text-gray-500"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},children:u?`DETECTED TYPE: ${I}`:`Detected type: ${I}`}):null]}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{ref:te,className:`w-full rounded-full h-3 cursor-pointer hover:h-4 transition-all min-h-[24px] ${u?"bg-gray-800":"bg-gray-200"}`,onClick:Q,style:u?{...o.glow}:{},children:l.jsx("div",{className:`h-3 rounded-full transition-all ${u?"":"bg-blue-600"}`,style:u?{backgroundColor:fe.cyan,width:`${h/p*100}%`,boxShadow:`0 0 8px ${fe.cyan}`}:{width:`${h/p*100}%`}})}),l.jsxs("div",{className:`flex justify-between text-sm mt-2 font-medium ${u?"":"text-gray-600"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},children:[l.jsx("span",{children:W(h)}),l.jsx("span",{children:W(p)})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("button",{onClick:L,className:`p-3 rounded-full transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center border-2 ${u?"border":"bg-blue-600 text-white hover:bg-blue-700"}`,style:u?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...o.glow}:{},children:d?l.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}):l.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("svg",{className:`w-5 h-5 ${u?"":"text-gray-600"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.793L4.617 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.617l3.766-3.793a1 1 0 011.617.793zM14.657 2.929a1 1 0 011.414 0A9.972 9.972 0 0119 10a9.972 9.972 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7.971 7.971 0 0017 10c0-2.21-.894-4.208-2.343-5.657a1 1 0 010-1.414zm-2.829 2.828a1 1 0 011.415 0A5.983 5.983 0 0115 10a5.984 5.984 0 01-1.757 4.243 1 1 0 01-1.415-1.415A3.984 3.984 0 0013 10a3.983 3.983 0 00-1.172-2.828 1 1 0 010-1.415z",clipRule:"evenodd"})}),l.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:v,onChange:U,className:`w-24 h-3 rounded-lg appearance-none cursor-pointer min-h-[20px] ${u?"bg-gray-800":"bg-gray-200"}`,style:u?{accentColor:fe.cyan}:{}}),l.jsxs("span",{className:`text-sm w-10 font-medium ${u?"":"text-gray-600"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},children:[Math.round(v*100),"%"]})]})]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:`text-sm ${u?"":"text-gray-600"}`,style:u?{color:fe.cyan,fontFamily:"monospace"}:{},children:u?"SPEED:":"Speed:"}),l.jsxs("select",{value:w,onChange:G,className:`text-sm border rounded px-2 py-1 ${u?"border":"border-gray-300"}`,style:u?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace"}:{},children:[l.jsx("option",{value:"0.5",children:"0.5x"}),l.jsx("option",{value:"0.75",children:"0.75x"}),l.jsx("option",{value:"1",children:"1x"}),l.jsx("option",{value:"1.25",children:"1.25x"}),l.jsx("option",{value:"1.5",children:"1.5x"}),l.jsx("option",{value:"2",children:"2x"})]})]})]})]})]})},xfe=({transcript:e,scores:t,audioBlob:r,recordingTime:n,onReRecord:s,onFinalSubmit:a,canReRecord:i,attemptNumber:o,maxAttempts:c,isSubmitting:u=!1})=>{const{theme:d,isCyberpunk:f,isKpop:h,themeClasses:g}=Ra(),p=Da(d),[y,v]=S.useState(!1);console.log(" FeedbackDisplay received recordingTime:",n);const C=(A,F)=>{const j=A/F*100;return f?j>=80?fe.cyan:fe.red:j>=80?"text-green-600":j>=60?"text-yellow-600":"text-red-600"},w=(A,F)=>{if(f)return"";const j=A/F*100;return j>=80?"text-green-600":j>=60?"text-yellow-600":"text-red-600"},_=(A,F)=>{const j=A/F*100;return j>=90?"A+":j>=80?"A":j>=70?"B":j>=60?"C":j>=50?"D":"F"},T=()=>_(t?.overall_score||0,100),E=()=>C(t?.overall_score||0,100);return console.log(" FeedbackDisplay received scores:",t),console.log(" Individual score values:",{grammar_score:t?.grammar_score,vocabulary_score:t?.vocabulary_score,pronunciation_score:t?.pronunciation_score,fluency_score:t?.fluency_score,content_score:t?.content_score}),l.jsxs("div",{className:`feedback-display rounded-lg shadow-lg p-3 sm:p-6 ${f?Gt(0).className:"bg-white"}`,style:f?{...Gt(0).style,...p.glow}:h?{...dr(0).style,borderColor:ze.primary}:{},children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold mb-2 ",style:f?{...p.textCyan,fontFamily:"monospace"}:h?{...p.headerText}:{},children:f?"SPEAKING TEST RESULTS":"Speaking Test Results"}),l.jsx("p",{className:f?"":"text-gray-600",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"REVIEW YOUR PERFORMANCE AND DECIDE WHETHER TO SUBMIT OR RE-RECORD.":"Review your performance and decide whether to submit or re-record."})]}),l.jsx("div",{className:`p-3 sm:p-6 rounded-lg mb-6 border-2 ${f?Gt(1).className:h?dr(1).className:"bg-gradient-to-r from-blue-50 to-green-50"}`,style:f?{...Gt(1).style,...p.glow}:h?{...dr(1).style,borderColor:ze.primary}:{},children:l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:`text-4xl font-bold ${f?"":E()}`,style:f?{color:C(t?.overall_score||0,100),fontFamily:"monospace",...t?.overall_score>=80?p.textShadow:p.textShadowRed}:{},children:[t?.overall_score||0,"/100"]}),l.jsx("div",{className:`text-2xl font-semibold mt-2 ${f?"":E()}`,style:f?{color:C(t?.overall_score||0,100),fontFamily:"monospace",...t?.overall_score>=80?p.textShadow:p.textShadowRed}:{},children:f?`GRADE: ${T()}`:`Grade: ${T()}`}),l.jsx("div",{className:`mt-2 ${f?"":"text-gray-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:t?.overall_score>=80?f?"EXCELLENT WORK!":"Excellent work!":t?.overall_score>=60?f?"GOOD JOB!":"Good job!":t?.overall_score>=50?f?"NOT BAD, BUT COULD BE BETTER.":"Not bad, but could be better.":f?"KEEP PRACTICING!":"Keep practicing!"})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Gt(2).className:"bg-white"}`,style:f?{...Gt(2).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"GRAMMAR":"Grammar"}),l.jsxs("span",{className:`font-bold ${f?"":w(t?.grammar_score||0,25)}`,style:f?{color:C(t?.grammar_score||0,25),fontFamily:"monospace"}:{},children:[t?.grammar_score||0,"/25"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?`${t?.grammar_mistakes||0} MISTAKES FOUND`:`${t?.grammar_mistakes||0} mistakes found`}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-green-600"}`,style:f?{backgroundColor:C(t?.grammar_score||0,25),width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}:{width:`${Math.min((t?.grammar_score||0)/25*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Gt(0).className:"bg-white"}`,style:f?{...Gt(0).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"VOCABULARY":"Vocabulary"}),l.jsxs("span",{className:`font-bold ${f?"":w(t?.vocabulary_score||0,20)}`,style:f?{color:C(t?.vocabulary_score||0,20),fontFamily:"monospace"}:{},children:[t?.vocabulary_score||0,"/20"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?`${t?.vocabulary_mistakes||0} VOCABULARY ISSUES`:`${t?.vocabulary_mistakes||0} vocabulary issues`}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-purple-600"}`,style:f?{backgroundColor:C(t?.vocabulary_score||0,20),width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}:{width:`${Math.min((t?.vocabulary_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Gt(1).className:"bg-white"}`,style:f?{...Gt(1).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"PRONUNCIATION":"Pronunciation"}),l.jsxs("span",{className:`font-bold ${f?"":w(t?.pronunciation_score||0,15)}`,style:f?{color:C(t?.pronunciation_score||0,15),fontFamily:"monospace"}:{},children:[t?.pronunciation_score||0,"/15"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"CLARITY AND ACCURACY":"Clarity and accuracy"}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-orange-600"}`,style:f?{backgroundColor:C(t?.pronunciation_score||0,15),width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}:{width:`${Math.min((t?.pronunciation_score||0)/15*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Gt(2).className:"bg-white"}`,style:f?{...Gt(2).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"FLUENCY":"Fluency"}),l.jsxs("span",{className:`font-bold ${f?"":w(t?.fluency_score||0,20)}`,style:f?{color:C(t?.fluency_score||0,20),fontFamily:"monospace"}:{},children:[t?.fluency_score||0,"/20"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"PACE, PAUSES, AND FLOW":"Pace, pauses, and flow"}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-blue-600"}`,style:f?{backgroundColor:C(t?.fluency_score||0,20),width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}:{width:`${Math.min((t?.fluency_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Gt(0).className:"bg-white"}`,style:f?{...Gt(0).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"CONTENT":"Content"}),l.jsxs("span",{className:`font-bold ${f?"":w(t?.content_score||0,20)}`,style:f?{color:C(t?.content_score||0,20),fontFamily:"monospace"}:{},children:[t?.content_score||0,"/20"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"HOW WELL ADDRESSED THE PROMPT":"How well addressed the prompt"}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-indigo-600"}`,style:f?{backgroundColor:C(t?.content_score||0,20),width:`${Math.min((t?.content_score||0)/20*100,100)}%`}:{width:`${Math.min((t?.content_score||0)/20*100,100)}%`}})})]}),l.jsxs("div",{className:`border rounded-lg p-3 sm:p-4 ${f?Gt(1).className:"bg-white"}`,style:f?{...Gt(1).style}:{},children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("span",{className:`font-semibold ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"WORD COUNT":"Word Count"}),l.jsxs("span",{className:`font-bold ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:[t?.word_count||0," ",f?"WORDS":"words"]})]}),l.jsx("div",{className:`text-sm ${f?"":"text-gray-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"TOTAL WORDS SPOKEN":"Total words spoken"}),l.jsx("div",{className:`w-full rounded-full h-2 mt-2 ${f?"bg-gray-800":"bg-gray-200"}`,children:l.jsx("div",{className:`h-2 rounded-full ${f?"":"bg-gray-600"}`,style:f?{backgroundColor:fe.cyan,width:`${Math.min((t?.word_count||0)/100*100,100)}%`}:{width:`${Math.min((t?.word_count||0)/100*100,100)}%`}})})]})]}),r&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3 ",style:f?{...p.textCyan,fontFamily:"monospace"}:{},children:f?"YOUR RECORDING":"Your Recording"}),l.jsx(jH,{audioBlob:r,recordingTime:n})]}),t?.feedback&&l.jsx("div",{className:`mb-6 py-3 px-0 sm:p-6 rounded-lg border-2 ${f?Gt(2).className:h?dr(2).className:"bg-gradient-to-r from-green-50 to-blue-50 border-green-200"}`,style:f?{...Gt(2).style,...p.glow}:h?{...dr(2).style,borderColor:ze.primary}:{},children:l.jsxs("div",{className:"flex items-start space-x-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:`font-semibold mb-3 text-lg ${f?"":"text-green-800"}`,style:f?{...p.textCyan,fontFamily:"monospace"}:{},children:f?"AI FEEDBACK":"AI Feedback"}),l.jsx("p",{className:`leading-relaxed ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:t.feedback})]})]})}),t?.improved_transcript&&l.jsxs("div",{className:`mb-6 rounded-lg p-3 sm:p-4 border-2 ${f?Gt(0).className:h?dr(0).className:"bg-green-50 border-green-200"}`,style:f?{...Gt(0).style,...p.glow}:h?{...dr(0).style,borderColor:ze.primary}:{},children:[l.jsxs("div",{className:"flex items-start space-x-2 mb-3",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsxs("div",{children:[l.jsx("h4",{className:`font-semibold mb-2 ${f?"":"text-green-800"}`,style:f?{...p.textCyan,fontFamily:"monospace"}:{},children:f?"IMPROVED VERSION":"Improved Version"}),l.jsx("p",{className:`text-sm mb-3 ${f?"":"text-gray-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"HERE'S HOW YOUR RESPONSE COULD BE IMPROVED WITH BETTER GRAMMAR AND VOCABULARY:":"Here's how your response could be improved with better grammar and vocabulary:"})]})]}),l.jsx("div",{className:`border rounded p-3 ${f?"border-cyan-400":"bg-white border-green-200"}`,style:f?{backgroundColor:fe.black,borderColor:fe.cyan}:{},children:l.jsx("p",{className:`leading-relaxed ${f?"":"text-gray-800"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:t.improved_transcript})})]}),l.jsx("div",{className:"mb-6",children:l.jsx("button",{onClick:()=>v(!y),className:`text-sm ${f?"":"text-blue-600 hover:text-blue-800"}`,style:f?{color:fe.cyan,fontFamily:"monospace",...p.textShadow}:{},children:f?y?"HIDE DETAILS":"SHOW DETAILS":y?"Hide Details":"Show Details"})}),y&&l.jsxs("div",{className:`mb-6 p-3 sm:p-4 rounded-lg border-2 ${f?Gt(2).className:h?dr(2).className:"bg-blue-50"}`,style:f?{...Gt(2).style,...p.glow}:h?{...dr(2).style,borderColor:ze.primary}:{},children:[l.jsx("h4",{className:"font-semibold mb-3 ",style:f?{...p.textCyan,fontFamily:"monospace"}:{},children:f?"DETAILED ANALYSIS":"Detailed Analysis"}),l.jsxs("div",{className:"space-y-3 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"WORD COUNT ANALYSIS:":"Word Count Analysis:"}),l.jsx("span",{className:`ml-2 ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?`YOU SPOKE ${t?.word_count||0} WORDS. ${t?.word_count>=50?"GREAT JOB MEETING THE MINIMUM REQUIREMENT!":"CONSIDER SPEAKING MORE TO MEET THE MINIMUM WORD REQUIREMENT."}`:`You spoke ${t?.word_count||0} words. ${t?.word_count>=50?"Great job meeting the minimum requirement!":"Consider speaking more to meet the minimum word requirement."}`})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"GRAMMAR ANALYSIS:":"Grammar Analysis:"}),l.jsx("span",{className:`ml-2 ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:t?.grammar_mistakes===0?f?"PERFECT GRAMMAR!":"Perfect grammar!":f?`FOUND ${t?.grammar_mistakes||0} GRAMMAR ${t?.grammar_mistakes===1?"MISTAKE":"MISTAKES"}.`:`Found ${t?.grammar_mistakes||0} grammar ${t?.grammar_mistakes===1?"mistake":"mistakes"}.`}),t?.grammar_corrections&&t.grammar_corrections.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:t.grammar_corrections.map((A,F)=>l.jsx("div",{className:`border rounded p-2 sm:p-3 ${f?Gt(1).className:"bg-yellow-50 border-yellow-200"}`,style:f?{...Gt(1).style}:{},children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:`font-mono text-sm ${f?"":"text-red-600"}`,style:f?{color:fe.red,fontFamily:"monospace"}:{},children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:`font-medium ${f?"":"text-red-600"}`,style:f?{color:fe.red,fontFamily:"monospace"}:{},children:A.mistake}),l.jsx("span",{className:"mx-2 ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("span",{className:`font-medium ${f?"":"text-green-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:A.correction})]}),l.jsxs("div",{className:`text-xs mt-1 ${f?"":"text-blue-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:[l.jsx("strong",{children:f?"EXPLANATION:":"Explanation:"})," ",A.explanation]})]})]})},F))})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"VOCABULARY ANALYSIS:":"Vocabulary Analysis:"}),l.jsx("span",{className:`ml-2 ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:t?.vocabulary_mistakes===0?f?"EXCELLENT VOCABULARY USAGE!":"Excellent vocabulary usage!":f?`FOUND ${t?.vocabulary_mistakes||0} VOCABULARY ${t?.vocabulary_mistakes===1?"ISSUE":"ISSUES"}.`:`Found ${t?.vocabulary_mistakes||0} vocabulary ${t?.vocabulary_mistakes===1?"issue":"issues"}.`}),t?.vocabulary_corrections&&t.vocabulary_corrections.length>0&&l.jsx("div",{className:"mt-2 space-y-2",children:t.vocabulary_corrections.map((A,F)=>l.jsx("div",{className:`border rounded p-2 sm:p-3 ${f?Gt(0).className:"bg-purple-50 border-purple-200"}`,style:f?{...Gt(0).style}:{},children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:`font-mono text-sm ${f?"":"text-purple-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:`font-medium ${f?"":"text-purple-600"}`,style:f?{color:fe.red,fontFamily:"monospace"}:{},children:A.mistake}),l.jsx("span",{className:"mx-2 ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("span",{className:`font-medium ${f?"":"text-green-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:A.correction})]}),l.jsxs("div",{className:`text-xs mt-1 ${f?"":"text-blue-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:[l.jsx("strong",{children:f?"EXPLANATION:":"Explanation:"})," ",A.explanation]})]})]})},F))})]}),l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"PRONUNCIATION ANALYSIS:":"Pronunciation Analysis:"}),l.jsx("span",{className:`ml-2 ${f?"":"text-gray-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:t?.pronunciation_corrections&&t.pronunciation_corrections.length>0?f?`FOUND ${t.pronunciation_corrections.length} PRONUNCIATION ${t.pronunciation_corrections.length===1?"TIP":"TIPS"} TO HELP IMPROVE CLARITY.`:`Found ${t.pronunciation_corrections.length} pronunciation ${t.pronunciation_corrections.length===1?"tip":"tips"} to help improve clarity.`:f?"GREAT PRONUNCIATION! YOUR SPEECH WAS CLEAR AND EASY TO UNDERSTAND.":"Great pronunciation! Your speech was clear and easy to understand."})]}),t?.pronunciation_corrections&&t.pronunciation_corrections.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"PRONUNCIATION TIPS:":"Pronunciation Tips:"}),l.jsx("div",{className:"mt-2 space-y-2",children:t.pronunciation_corrections.map((A,F)=>l.jsx("div",{className:`border rounded p-2 sm:p-3 ${f?Gt(1).className:"bg-orange-50 border-orange-200"}`,style:f?{...Gt(1).style}:{},children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:`font-mono text-sm ${f?"":"text-orange-600"}`,style:f?{color:fe.yellow,fontFamily:"monospace"}:{},children:""}),l.jsx("div",{className:"flex-1",children:l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:`font-medium ${f?"":"text-orange-700"}`,style:f?{color:fe.red,fontFamily:"monospace"}:{},children:A.word}),l.jsx("span",{className:"mx-2 ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("span",{className:`font-medium ${f?"":"text-green-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:A.correction})]})})]})},F))})]}),t?.language_use_corrections&&t.language_use_corrections.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"font-medium ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?"LANGUAGE USE SUGGESTIONS:":"Language Use Suggestions:"}),l.jsx("div",{className:"mt-2 space-y-2",children:t.language_use_corrections.map((A,F)=>l.jsx("div",{className:`border rounded p-2 sm:p-3 ${f?Gt(2).className:"bg-blue-50 border-blue-200"}`,style:f?{...Gt(2).style}:{},children:l.jsxs("div",{className:"flex items-start space-x-2",children:[l.jsx("span",{className:`font-mono text-sm ${f?"":"text-blue-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:`font-medium ${f?"":"text-blue-700"}`,style:f?{color:fe.red,fontFamily:"monospace"}:{},children:A.mistake}),l.jsx("span",{className:"mx-2 ",style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:""}),l.jsx("span",{className:`font-medium ${f?"":"text-green-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:A.suggestion})]}),A.explanation&&l.jsxs("div",{className:`text-xs mt-1 ${f?"":"text-blue-700"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:[l.jsx("strong",{children:f?"WHY:":"Why:"})," ",A.explanation]})]})]})},F))})]})]})]}),l.jsx("div",{className:`text-sm mb-3 ${f?"":"text-gray-600"}`,style:f?{color:fe.cyan,fontFamily:"monospace"}:{},children:f?`ATTEMPT ${o} OF ${c}`:`Attempt ${o} of ${c}`}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center",children:[i&&l.jsxs("button",{onClick:s,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium border-2 ${f?"border":"bg-yellow-600 text-white hover:bg-yellow-700"}`,style:f?{backgroundColor:fe.black,borderColor:fe.yellow,color:fe.yellow,fontFamily:"monospace",...p.glowYellow}:{},children:[l.jsx("span",{children:""}),l.jsx("span",{children:f?"RE-RECORD":"Re-record"})]}),l.jsx("button",{onClick:a,disabled:u,className:`w-full sm:w-auto px-4 py-2.5 rounded-lg flex items-center justify-center space-x-2 min-h-[40px] text-base font-medium border-2 ${f?"border":u?"bg-gray-400 cursor-not-allowed text-white":"bg-green-600 hover:bg-green-700 text-white"}`,style:f?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",...h?{}:u?{}:p.glow}:{},children:u?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`w-4 h-4 border-2 border-t-transparent rounded-full animate-spin ${f?"":"border-white"}`,style:f?{borderColor:fe.cyan}:{}}),l.jsx("span",{children:f?"SUBMITTING...":"Submitting..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsx("span",{children:f?"SUBMIT FINAL":"Submit Final"})]})})]}),!i&&l.jsx("div",{className:`mt-4 p-2 sm:p-3 rounded-lg border-2 ${f?Gt(1).className:"bg-yellow-50 border-yellow-200"}`,style:f?{...Gt(1).style}:{},children:l.jsxs("p",{className:`text-sm ${f?"":"text-yellow-800"}`,style:f?{color:fe.yellow,fontFamily:"monospace",...p.textShadowYellow}:{},children:[l.jsx("strong",{children:f?"MAXIMUM ATTEMPTS REACHED.":"Maximum attempts reached."})," ",f?'THIS IS YOUR FINAL ATTEMPT. CLICK "SUBMIT FINAL" TO COMPLETE THE TEST.':'This is your final attempt. Click "Submit Final" to complete the test.']})})]})},yfe=({testData:e,onComplete:t,onExit:r,onTestComplete:n})=>{const[s,a]=S.useState("recording"),[i,o]=S.useState(null),[c,u]=S.useState(""),[d,f]=S.useState(null),[h,g]=S.useState(!1),[p,y]=S.useState(!1),[v,C]=S.useState(!1),[w,_]=S.useState(null),[T,E]=S.useState(1),[A]=S.useState(e.max_attempts||3),[F,j]=S.useState(!1),[P,D]=S.useState(0),[B,V]=S.useState(!1),[Y,re]=S.useState(!0),[te,ee]=S.useState("audio/webm"),L=S.useRef(null),{theme:Q,isCyberpunk:U,isKpop:G,themeClasses:W}=Ra(),M=Da(Q),[I,z]=S.useState(0),[q,ne]=S.useState(null),X=ql(),{user:se}=Fs(),{makeAuthenticatedRequest:ce}=X,pe=S.useRef(null);h2(Y,S.useCallback(({confirm:Te,cancel:bt})=>{console.log(" SpeakingTestStudent: Browser back button intercepted during test!"),console.log(" SpeakingTestStudent: isBackInterceptEnabled:",Y),console.log(" SpeakingTestStudent: Setting pending navigation and showing modal"),L.current={confirm:Te,cancel:bt},C(!0)},[Y])),S.useEffect(()=>{s!=="completed"?re(!0):(re(!1),L.current=null)},[s]),S.useEffect(()=>{if(e?.test_id&&se?.student_id){const Te=`speaking_attempts_${se.student_id}_${e.test_id}`,bt=localStorage.getItem(Te);if(bt){const Ct=parseInt(bt,10);Ct>0&&Ct<=A&&(E(Ct),console.log(" Loaded attempts from localStorage:",Ct))}}},[e,se,A]),S.useEffect(()=>{if(e&&!q){const Te=new Date;ne(Te),console.log(" Speaking test timer started at:",Te.toISOString())}},[e,q]),S.useEffect(()=>{let Te=0;s==="recording"?Te=25:s==="processing"?Te=50:s==="feedback"?Te=75:s==="completed"&&(Te=100),z(Te)},[s]),S.useEffect(()=>{(async()=>{try{if(!window.isSecureContext&&!window.location.hostname.includes("localhost")){_("Microphone access requires HTTPS. Please use a secure connection.");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){_("Microphone access is not supported in this browser. Please use a modern browser like Chrome, Safari, or Firefox.");return}if(navigator.permissions)try{(await navigator.permissions.query({name:"microphone"})).state==="granted"?(j(!0),console.log(" Microphone permission already granted")):console.log(" Microphone permission not yet granted - user will need to click record button")}catch(bt){console.log(" Could not check microphone permission status:",bt)}}catch(bt){console.error(" Error checking microphone permission:",bt)}})()},[]),S.useEffect(()=>{const Te=setInterval(()=>{i&&s==="recording"&&be()},3e4);return()=>clearInterval(Te)},[i,s]);const be=S.useCallback(async()=>{try{const Te={test_id:e.test_id,audio_blob:i?await oe(i):null,audio_mime_type:i&&i.type||"audio/webm",attempt_number:T,step:s,timestamp:new Date().toISOString()};localStorage.setItem(`speaking_progress_${e.test_id}`,JSON.stringify(Te))}catch(Te){console.error("Failed to save progress:",Te)}},[e.test_id,i,T,s]),oe=Te=>new Promise((bt,Ct)=>{const Lt=new FileReader;Lt.onloadend=()=>{const it=Lt.result.split(",")[1];bt(it)},Lt.onerror=Ct,Lt.readAsDataURL(Te)}),je=S.useCallback(Te=>{if(e?.test_id&&se?.student_id){const bt=`speaking_attempts_${se.student_id}_${e.test_id}`;localStorage.setItem(bt,Te.toString()),console.log(" Saved attempts to localStorage:",Te)}},[e,se]),Re=S.useCallback(async(Te,bt,Ct,Lt,Yt,it)=>{if(e?.test_id&&se?.student_id)try{const{setCachedData:xt,CACHE_TTL:Mt}=await ai(async()=>{const{setCachedData:Tt,CACHE_TTL:Rt}=await Promise.resolve().then(()=>vp);return{setCachedData:Tt,CACHE_TTL:Rt}},void 0),rt=`speaking_test_data_${se.student_id}_${e.test_id}`,It={audioBlob:Te?await oe(Te):null,audioMimeType:it||"audio/webm",transcript:bt,scores:Ct,recordingTime:Lt,currentStep:Yt,timestamp:Date.now()};xt(rt,It,Mt.speaking_test_data),console.log(" Saved speaking test data to cache:",rt)}catch(xt){console.error("Failed to save speaking test data to cache:",xt)}},[e,se]),Xe=S.useCallback(async()=>{if(e?.test_id&&se?.student_id)try{const{getCachedData:Te}=await ai(async()=>{const{getCachedData:Lt}=await Promise.resolve().then(()=>vp);return{getCachedData:Lt}},void 0),bt=`speaking_test_data_${se.student_id}_${e.test_id}`,Ct=Te(bt);if(Ct){if(console.log(" Loaded speaking test data from cache:",Ct),Ct.audioBlob){const Lt=Ct.audioMimeType||"audio/webm",Yt=new Blob([Uint8Array.from(atob(Ct.audioBlob),it=>it.charCodeAt(0))],{type:Lt});o(Yt),ee(Lt)}return Ct.transcript&&u(Ct.transcript),Ct.scores&&f(Ct.scores),Ct.recordingTime&&D(Ct.recordingTime),Ct.currentStep&&a(Ct.currentStep),Ct.audioMimeType&&ee(Ct.audioMimeType),!0}}catch(Te){console.error("Failed to load speaking test data from cache:",Te)}return!1},[e,se]);S.useEffect(()=>{if(e?.test_id&&se?.student_id){try{const Te=se.student_id,bt=`retest_assignment_id_${Te}_speaking_${e.test_id}`,Ct=`retest_in_progress_${Te}_speaking_${e.test_id}`;if(!!localStorage.getItem(bt)||!!localStorage.getItem(Ct)){const Yt=`speaking_test_data_${Te}_${e.test_id}`,it=`anti_cheating_${Te}_speaking_${e.test_id}`,xt=`speaking_progress_${e.test_id}`;localStorage.removeItem(Yt),localStorage.removeItem(it),localStorage.removeItem(xt),console.log(" Cleared speaking per-test cache for retest start:",{cacheKey:Yt,antiCheatKey:it,progressKey:xt})}}catch{}Xe()}},[e,se,Xe]),S.useEffect(()=>{e?.test_id&&se?.student_id&&(i||c||d)&&Re(i,c,d,P,s,te)},[i,c,d,P,s,e,se,Re,te]);const ft=S.useCallback(async(Te,bt)=>{if(B){console.log(" Already processing, skipping duplicate call");return}console.log(" Recording completed, duration:",bt),V(!0),o(Te),ee(Te?.type||"audio/webm"),D(bt),a("processing"),_(null);try{const Ct=await oe(Te),Lt=new Date,Yt=e.start_time?Math.round((Lt-e.start_time)/1e3):0,it=e.start_time?new Date(e.start_time).toISOString():Lt.toISOString(),xt=se.student_id,Mt=`retest_assignment_id_${xt}_speaking_${e.test_id}`,rt=localStorage.getItem(Mt),Qe={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:xt,question_id:e.question_id||1,audio_blob:Ct,audio_mime_type:Te?.type||"audio/webm",audio_duration:bt,time_taken:Yt,started_at:it,submitted_at:Lt.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:rt?Number(rt):null,parent_test_id:e.test_id};console.log(" Submitting speaking test:",Qe),console.log(" Processing audio with AI...");try{const Tt=await(await ce("/.netlify/functions/process-speaking-audio-ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_id:e.test_id,question_id:e.question_id||1,audio_blob:Ct,audio_mime_type:Te?.type||"audio/webm"})})).json();if(Tt.success){console.log(" AI Analysis Result:",Tt),u(Tt.transcript);const Rt=Tt.transcript?Tt.transcript.split(/\s+/).filter(Cr=>Cr.length>0).length:0;console.log(" Word Count Verification:",{aiCount:Tt.word_count,actualCount:Rt,transcript:Tt.transcript});const cr=Rt,hr={overall_score:Tt.overall_score,word_count:cr,grammar_score:Tt.grammar_score,vocabulary_score:Tt.vocabulary_score,pronunciation_score:Tt.pronunciation_score,fluency_score:Tt.fluency_score,content_score:Tt.content_score,grammar_mistakes:Tt.grammar_mistakes,vocabulary_mistakes:Tt.vocabulary_mistakes,feedback:Tt.feedback,improved_transcript:Tt.improved_transcript,grammar_corrections:Tt.grammar_corrections||[],vocabulary_corrections:Tt.vocabulary_corrections||[],language_use_corrections:Tt.language_use_corrections||[],pronunciation_corrections:Tt.pronunciation_corrections||[],ai_feedback:Tt.ai_feedback||null};console.log(" Mapped Scores:",hr),console.log(" Individual scores check:",{grammar_score:Tt.grammar_score,vocabulary_score:Tt.vocabulary_score,pronunciation_score:Tt.pronunciation_score,fluency_score:Tt.fluency_score,content_score:Tt.content_score}),f(hr),a("feedback")}else throw new Error(Tt.message||Tt.error||"Failed to process audio with AI");localStorage.removeItem(`speaking_progress_${e.test_id}`)}catch(It){console.error("Speaking test submission error:",It),It.message.includes("No valid authentication token found")?(_("Your session has expired. Please refresh the page and try again."),setTimeout(()=>{window.location.reload()},3e3)):_(It.message),a("recording")}}catch(Ct){console.error("Speaking test submission error:",Ct),_(Ct.message),a("recording")}finally{V(!1)}},[e,se,ce,T,je,B]);S.useEffect(()=>{s==="processing"&&!c&&!d&&(console.log(' Detected stuck "processing" state on reload. Attempting recovery...'),i?(console.log(" Resuming processing from cached audio blob..."),ft(i,P)):(console.log(" No cached audio blob found. Resetting to recording step."),a("recording")))},[s,c,d,i,P,ft]);const Je=S.useCallback(()=>{if(T<A){o(null),u(""),f(null),_(null),V(!1),ee("audio/webm");const Te=T+1;E(Te),je(Te),a("recording")}else _("Maximum attempts reached")},[T,A,je]),Ht=S.useCallback(async()=>{if(!(!c||!d)){g(!0);try{const Te=new Date,bt=e.start_time?Math.round((Te-e.start_time)/1e3):0,Ct=e.start_time?new Date(e.start_time).toISOString():Te.toISOString(),Lt=se.student_id,Yt=`retest_assignment_id_${Lt}_speaking_${e.test_id}`,it=localStorage.getItem(Yt),{academicCalendarService:xt}=await ai(async()=>{const{academicCalendarService:Rt}=await Promise.resolve().then(()=>g3);return{academicCalendarService:Rt}},void 0);await xt.loadAcademicCalendar();const rt=xt.getCurrentTerm()?.id;if(!rt)throw new Error("No current academic period found");const Qe={test_id:e.test_id,test_name:e.test_name,teacher_id:e.teacher_id||null,subject_id:e.subject_id||null,student_id:Lt,academic_period_id:rt,question_id:e.question_id||1,audio_blob:i?await oe(i):null,audio_duration:i?.duration||0,time_taken:bt,started_at:Ct,submitted_at:Te.toISOString(),caught_cheating:!1,visibility_change_times:0,is_completed:!0,retest_assignment_id:it?Number(it):null,parent_test_id:e.test_id,audio_mime_type:te,transcript:c,scores:d,final_submission:!0};console.log(" Final submission:",Qe),console.log(" Making final submission request...");const It=await ce("/.netlify/functions/submit-speaking-test-final",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Qe)});console.log(" Final submission response status:",It.status);const Tt=await It.json();if(console.log(" Final submission result:",Tt),Tt.success){if(se?.student_id){const Ce=`test_completed_${se.student_id}_speaking_${e.test_id}`;localStorage.setItem(Ce,"true"),console.log(" Speaking test marked as completed in localStorage:",Ce);const Ze=`retest_in_progress_${se.student_id}_speaking_${e.test_id}`;localStorage.removeItem(Ze),console.log(" Cleared in-progress retest lock:",Ze);const wt=`speaking_attempts_${se.student_id}_${e.test_id}`;localStorage.removeItem(wt),console.log(" Cleared attempts from localStorage upon submission");const{clearTestData:Nt}=await ai(async()=>{const{clearTestData:Oe}=await Promise.resolve().then(()=>vp);return{clearTestData:Oe}},void 0);Nt(se.student_id,"speaking_test_data",e.test_id),console.log(" Cleared speaking test data from cache upon submission");try{const Oe=`anti_cheating_${se.student_id}_speaking_${e.test_id}`;localStorage.removeItem(Oe),console.log(" Cleared anti-cheating key:",Oe)}catch{}}console.log(" Caching speaking test results after submission...");const cr=`student_results_table_${se?.student_id||se?.id||"unknown"}`,{setCachedData:hr,getCachedData:Cr,CACHE_TTL:ur,clearTestData:Sr}=await ai(async()=>{const{setCachedData:Ce,getCachedData:Ze,CACHE_TTL:wt,clearTestData:Nt}=await Promise.resolve().then(()=>vp);return{setCachedData:Ce,getCachedData:Ze,CACHE_TTL:wt,clearTestData:Nt}},void 0),we={id:Date.now(),test_id:e.test_id,test_type:"speaking",test_name:e.test_name,score:Math.round(d.overall_score/10),max_score:10,percentage:d.overall_score,caught_cheating:!1,visibility_change_times:0,is_completed:!0,submitted_at:new Date().toISOString(),subject:"Listening and Speaking",teacher_name:e.teacher_name||"Unknown"};let Me={success:!0,results:[],count:0};try{const Ce=Cr(cr);Ce&&Array.isArray(Ce.results)&&(Me.results=Ce.results.slice())}catch{}if(Me.results.unshift(we),Me.count=Me.results.length,hr(cr,Me,ur.student_results_table),console.log(" Speaking test results cached (merged) with key:",cr),se?.student_id&&Sr(se.student_id,"speaking",e.test_id),!!it&&se?.student_id){let Ce=3;try{const Nt=localStorage.getItem(`student_active_tests_${se.student_id}`);if(Nt){const Ke=JSON.parse(Nt)?.tests?.find(st=>st.test_id===e.test_id&&st.test_type==="speaking");Ke&&(Ce=Ke.retest_attempts_left||Ke.max_attempts||3)}}catch(Nt){console.error("Error checking active tests cache:",Nt)}const wt=(d?.overall_score??0)>=50;if(wt){const Nt=`retest_attempt${Ce}_${se.student_id}_speaking_${e.test_id}`;localStorage.setItem(Nt,"true"),console.log(" Passed retest, marking last-slot key:",Nt);let Oe=0;for(let Vt=1;Vt<=10;Vt++){const qt=`retest_attempt${Vt}_${se.student_id}_speaking_${e.test_id}`;localStorage.getItem(qt)==="true"&&Oe++}const Ke=`test_completed_${se.student_id}_speaking_${e.test_id}`;localStorage.setItem(Ke,"true"),console.log(" Marked retest as completed (student passed):",Ke);const st=`retest_attempts_${se.student_id}_speaking_${e.test_id}`;localStorage.setItem(st,JSON.stringify({used:Oe,max:Ce})),console.log(" Set retest attempts metadata (student passed):",st,{used:Oe,max:Ce})}else{let Nt=1;for(let qt=1;qt<=10;qt++){const gr=`retest_attempt${qt}_${se.student_id}_speaking_${e.test_id}`;if(localStorage.getItem(gr)!=="true"){Nt=qt;break}}const Oe=`retest_attempt${Nt}_${se.student_id}_speaking_${e.test_id}`;localStorage.setItem(Oe,"true"),console.log(" Marked retest attempt as completed:",Oe);let Ke=0;for(let qt=1;qt<=10;qt++){const gr=`retest_attempt${qt}_${se.student_id}_speaking_${e.test_id}`;localStorage.getItem(gr)==="true"&&Ke++}const st=Ce-Ke,Vt=st<=0||wt;if(console.log(" Retest completion check:",{usedAttempts:Ke,maxAttempts:Ce,attemptsLeft:st,passed:wt,shouldComplete:Vt}),Vt){const qt=`test_completed_${se.student_id}_speaking_${e.test_id}`;localStorage.setItem(qt,"true"),console.log(" Marked retest as completed (attempts exhausted or passed):",qt);const gr=`retest_attempts_${se.student_id}_speaking_${e.test_id}`;localStorage.setItem(gr,JSON.stringify({used:Ke,max:Ce})),console.log(" Set retest attempts metadata (attempts exhausted):",gr,{used:Ke,max:Ce})}}}if(se?.student_id){const Ce=`retest1_${se.student_id}_speaking_${e.test_id}`,Ze=`retest_assignment_id_${se.student_id}_speaking_${e.test_id}`;localStorage.removeItem(Ce),localStorage.removeItem(Ze)}try{n&&n(d.overall_score),typeof r=="function"&&r()}catch{}return}else throw new Error(Tt.message||"Failed to submit speaking test")}catch(Te){console.error("Speaking test submission error:",Te),_(Te.message)}finally{g(!1)}}},[e,se,ce,c,d,i,T,t]);S.useCallback(()=>{a("completed"),t({test_id:e.test_id,transcript:c,scores:d,attempt_number:T})},[e.test_id,c,d,T,t]);const Ve=S.useCallback(()=>{console.log(" SpeakingTestStudent: handleExitConfirm called"),console.log(" SpeakingTestStudent: Current location:",window.location.href),console.log(" SpeakingTestStudent: Current history state:",window.history.state),C(!1);const Te=L.current;if(console.log(" SpeakingTestStudent: Pending navigation:",Te),L.current=null,e?.test_id&&se?.student_id){const Ct=`anti_cheating_${se?.student_id||se?.id||"unknown"}_speaking_${e.test_id}`,Yt=(js(Ct)||{tabSwitches:0}).tabSwitches||0,it=Yt+1,xt=it>=2;console.log(" SpeakingTestStudent: Tab switch count:",Yt,"->",it),ys(Ct,{tabSwitches:it,isCheating:xt},ds.anti_cheating)}if(console.log(" SpeakingTestStudent: Disabling intercept"),re(!1),Te){console.log(" SpeakingTestStudent: Cleaning up intercept history state");try{const bt=window.history.state;if(console.log(" SpeakingTestStudent: Current history state before cleanup:",bt),bt&&bt.__intercept){const Ct=bt.prevState??null;console.log(" SpeakingTestStudent: Restoring previous state:",Ct),window.history.replaceState(Ct,document.title,window.location.href),console.log(" SpeakingTestStudent: History state after cleanup:",window.history.state)}}catch(bt){console.warn(" SpeakingTestStudent: Failed to restore history state:",bt)}}console.log(" SpeakingTestStudent: Scheduling navigation in 100ms"),setTimeout(()=>{console.log(" SpeakingTestStudent: Executing navigation to /student"),console.log(" SpeakingTestStudent: Current location before navigation:",window.location.href),window.location.href="/student",console.log(" SpeakingTestStudent: window.location.href set to /student")},100)},[r,e,se?.student_id,se?.id]),at=S.useCallback(()=>{const Te=L.current;L.current=null,Te?.cancel&&Te.cancel(),C(!1),s!=="completed"&&re(!0)},[s]),gt=()=>{switch(s){case"recording":return l.jsxs("div",{className:"speaking-test-recording",children:[l.jsx("h2",{className:`text-2xl font-bold mb-4 text-center ${W.text} ${U?"tracking-wider":""}`,style:U?{fontFamily:"monospace",textShadow:"0 0 10px rgba(0, 255, 255, 0.5), 0 0 20px rgba(0, 255, 255, 0.3)"}:G?{...M.headerText}:{},children:U?e.test_name.toUpperCase():e.test_name}),l.jsxs("div",{className:"mb-6 text-center",children:[l.jsx("h3",{className:`text-lg font-semibold mb-2 ${U?"":W.text}`,style:U?{...M.textCyan,fontFamily:"monospace"}:G?{...M.headerText}:{},children:U?"INSTRUCTIONS:":"Instructions:"}),l.jsx("p",{className:`mb-4 ${U?"":W.textSecondary}`,style:U?{color:fe.cyan,fontFamily:"monospace",...M.textShadow}:G?{...M.textAccent}:{},children:e.prompt}),l.jsx("div",{className:`${U?"bg-cyan-400/10 border border-cyan-400/30":G?"bg-pink-500/10 border border-pink-500/30":"bg-blue-50 border border-blue-200"} p-3 sm:p-4 rounded-lg`,children:l.jsxs("p",{className:`text-sm ${U?"text-cyan-300":G?"text-pink-400":"text-blue-800"}`,style:G?{...M.textAccent}:{},children:[l.jsx("strong",{children:"Requirements:"})," Minimum ",e.min_words||50," words, 0-",e.max_duration||600," seconds duration"]})})]}),l.jsx(pfe,{ref:pe,onRecordingComplete:ft,minDuration:0,maxDuration:e.max_duration||600,minWords:e.min_words||50,maxAttempts:A,currentAttempt:T}),w&&l.jsx("div",{className:`mt-4 p-3 sm:p-4 ${G?"bg-red-500/10 border border-red-500/50":"bg-red-50 border border-red-200"} rounded-lg`,style:G?{...M.glowRed}:{},children:l.jsx("p",{className:G?"text-red-400":"text-red-800",style:G?{color:ze.error,...M.textShadowRed}:{},children:w})})]});case"processing":return l.jsxs("div",{className:`transcription-status ${G?dr(0).className:W.cardBg} rounded-lg shadow-lg p-4 sm:p-8 text-center ${G?"":W.cardBorder} border`,style:G?{...dr(0).style,borderColor:ze.primary,...M.glow}:{},children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("div",{className:`text-6xl mb-4 ${W.textSecondary}`,children:""}),l.jsx("h3",{className:`text-2xl font-semibold mb-2 ${W.text}`,style:G?{...M.headerText}:{},children:"Processing Your Speech"}),l.jsx("p",{className:`text-lg ${U?"text-cyan-400":G?"text-pink-400":"text-blue-600"}`,style:G?{...M.textPink}:{},children:"Please wait while we process your audio..."})]}),l.jsxs("div",{className:"inline-flex space-x-1",children:[l.jsx("div",{className:`w-2 h-2 rounded-full animate-bounce ${U?"bg-cyan-400":G?"bg-pink-500":"bg-blue-600"}`,style:G?{boxShadow:`0 0 8px ${ze.primary}`}:{}}),l.jsx("div",{className:`w-2 h-2 rounded-full animate-bounce ${U?"bg-cyan-400":G?"bg-pink-500":"bg-blue-600"}`,style:G?{boxShadow:`0 0 8px ${ze.primary}`,animationDelay:"0.1s"}:{animationDelay:"0.1s"}}),l.jsx("div",{className:`w-2 h-2 rounded-full animate-bounce ${U?"bg-cyan-400":G?"bg-pink-500":"bg-blue-600"}`,style:G?{boxShadow:`0 0 8px ${ze.primary}`,animationDelay:"0.2s"}:{animationDelay:"0.2s"}})]})]});case"feedback":return console.log(" Rendering feedback step with Submit Final button"),l.jsx(xfe,{transcript:c,scores:d,audioBlob:i,recordingTime:P,onReRecord:Je,onFinalSubmit:()=>y(!0),canReRecord:T<A,attemptNumber:T,maxAttempts:A,isSubmitting:h});case"completed":const Te={showResults:!0,testInfo:{test_name:e?.test_name||"Speaking Test",id:e?.test_id,test_id:e?.test_id},testType:"speaking",score:d?.overall_score||0,totalQuestions:1,percentage:d?.overall_score||0,passed:(d?.overall_score||0)>=50,questionAnalysis:[{questionNumber:1,userAnswer:c,correctAnswer:"Speaking test completed",isCorrect:!0,score:d?.overall_score||0,maxScore:100,feedback:`Word Count: ${d?.word_count||0}, Grammar: ${d?.grammar_score||0}/40, Vocabulary: ${d?.vocab_score||0}/30`}],timestamp:new Date().toISOString(),caught_cheating:!1,visibility_change_times:0};return l.jsx("div",{className:"speaking-test-completed",children:l.jsx(E2,{testResults:Te,onBackToCabinet:()=>{L.current=null,C(!0)},onRetakeTest:()=>{a("recording"),u(""),f(null),o(null),ee("audio/webm"),E(1)},isLoading:!1})});default:return null}};return l.jsxs("div",{className:"max-w-4xl mx-auto py-6 px-0 sm:p-6",children:[l.jsx(Fa,{isOpen:p&&!h,onClose:()=>y(!1),title:"Submit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:`${W.textSecondary} mb-6`,children:"Are you sure you want to submit?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:()=>y(!1),variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:()=>{y(!1),Ht()},variant:"primary",className:U?"":G?"bg-pink-500 text-white hover:bg-pink-600":"",style:U?{backgroundColor:fe.black,borderColor:fe.cyan,color:fe.cyan,fontFamily:"monospace",borderWidth:"2px",...M.glow}:G?{backgroundColor:ze.primary,color:ze.white,...M.glow}:{},children:U?"SUBMIT":"Submit"})]})]})}),l.jsx(Fa,{isOpen:v,onClose:at,title:"Exit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:`${W.textSecondary} mb-6`,children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:at,variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:Te=>{console.log(" SpeakingTestStudent: Go Back button clicked in modal"),console.log(" SpeakingTestStudent: Button click event:",Te),Ve()},variant:"primary",children:"Go Back"})]})]})}),l.jsxs("div",{className:`${G?dr(0).className:W.cardBg} rounded-lg shadow-sm py-3 px-0 sm:p-6 ${G?"":W.cardBorder} border`,style:G?{...dr(0).style,borderColor:ze.primary}:{},children:[w&&l.jsx("div",{className:`mb-4 p-4 ${G?"bg-red-500/10 border border-red-500/50":"bg-red-50 border border-red-200"} rounded-lg`,style:G?{...M.glowRed}:{},children:l.jsx("p",{className:G?"text-red-400":"text-red-800",style:G?{color:ze.error,...M.textShadowRed}:{},children:w})}),gt()]})]})},vfe=e=>function(){var t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296},bfe=(e,t,r)=>{if(e.length===1)return e[0];const n=`${r}:speaking:${t}`,s=Array.from(n).reduce((o,c)=>(o<<5)-o+c.charCodeAt(0),0)>>>0,a=vfe(s),i=Math.floor(a()*e.length);return e[i]},wfe=()=>{const{testId:e}=I_(),t=Xo(),{user:r}=Fs(),n=ql(),{showNotification:s}=di(),[a,i]=S.useState(null),[o,c]=S.useState([]),[u,d]=S.useState(null),[f,h]=S.useState(!0),[g,p]=S.useState(null),[y,v]=S.useState(!1),[C,w]=S.useState(null),[_,T]=S.useState(!1),{startTracking:E,stopTracking:A}=y1("speaking",e,r?.student_id||r?.id);S.useEffect(()=>{F(),j()},[e]),S.useEffect(()=>{if(a&&!y){ye.debug(" Speaking test - initializing anti-cheating tracking");const L=r?.student_id||r?.id||"unknown",Q=`anti_cheating_${L}_speaking_${e}`,U=localStorage.getItem(Q);if(ye.debug(" Checking for anti-cheating data with key:",Q),ye.debug(" Key format: anti_cheating_{studentId}_{testType}_{testId}"),ye.debug(" Current test details:",{testType:"speaking",testId:e,studentId:L}),U)try{const G=JSON.parse(U);ye.debug(" Found existing anti-cheating data for THIS speaking test:",G),ye.debug(" Visibility change times for this test:",G.tabSwitches||0),ye.debug(" Cheating status for this test:",G.isCheating||!1),G.isCheating&&(ye.debug(" WARNING: Student has been flagged for cheating in THIS speaking test!"),ye.debug(" Tab switches detected in this test:",G.tabSwitches),s(` Warning: Suspicious activity detected in this speaking test (${G.tabSwitches} tab switches). Continued violations may result in test disqualification.`,"warning"))}catch(G){ye.error(" Error parsing existing anti-cheating data:",G)}else ye.debug(" No existing anti-cheating data found for this speaking test - starting fresh");E(),ye.debug(" Anti-cheating tracking started for speaking test")}return()=>{a&&(ye.debug(" Cleaning up anti-cheating tracking for speaking test"),A())}},[a,y,e,r?.student_id,r?.id,E,A,s]);const F=async()=>{try{h(!0);const L=await n.getSpeakingTest(e);if(L.success)i(L.test);else throw new Error(L.message||"Failed to load test");const Q=await n.getSpeakingTestQuestions(e);if(Q.success){const U=Q.questions;c(U);const G=r?.student_id||r?.id,W=bfe(U,e,G);d(W),ye.debug(" Selected question for student:",{studentId:G,testId:e,totalQuestions:U.length,selectedQuestion:W?.id,selectedPrompt:W?.prompt?.substring(0,50)+"..."})}}catch(L){ye.error("Error loading test data:",L),p(L.message)}finally{h(!1)}},j=()=>{const Q=`test_completed_${r?.student_id||r?.id}_speaking_${e}`;if(localStorage.getItem(Q)==="true"){v(!0);const G=localStorage.getItem(`speaking_test_result_${e}`);G&&w(JSON.parse(G))}},P=async L=>{try{v(!0),w(L),localStorage.setItem(`speaking_test_result_${e}`,JSON.stringify(L)),window.dispatchEvent(new CustomEvent("testCompleted",{detail:{testId:e,testType:"speaking"}})),setTimeout(()=>{t("/student")},2e3)}catch(Q){ye.error("Error handling test completion:",Q)}},D=()=>{if(ye.debug(" Navigating back to cabinet from speaking test..."),a&&r?.student_id){ye.debug(" Cabinet navigation detected - counting as cheating attempt");const Q=`anti_cheating_${r?.student_id||r?.id||"unknown"}_speaking_${e}`,U=localStorage.getItem(Q);let G=0,W=!1;if(U)try{const q=JSON.parse(U);G=q.tabSwitches||0,W=q.isCheating||!1}catch(q){ye.error(" Error parsing existing anti-cheating data:",q)}const M=G+1,I=M>=2;ye.debug(` Tab switch count: ${G}  ${M} (cheating: ${I})`);const z={tabSwitches:M,isCheating:I,lastUpdated:new Date().toISOString()};localStorage.setItem(Q,JSON.stringify(z)),ye.debug(" Anti-cheating data updated for cabinet navigation:",z)}t("/student")},{theme:B,isCyberpunk:V,isKpop:Y,themeClasses:re}=Ra(),te=Da(B);if(f)return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":Y?"bg-black":"bg-white"}`,style:V?te.background:Y?te.backgroundSecondary:{},children:[l.jsx("div",{className:`${Y?"":re.headerBg} shadow-sm border-b ${Y?"":re.headerBorder}`,style:V?{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"}:Y?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${re.headerText}`,style:Y?{...te.headerText}:{},children:"Speaking Test"})}),l.jsx(ht,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`inline-block animate-spin rounded-full h-8 w-8 border-b-2 ${V?"border-cyan-400":"border-blue-600"}`}),l.jsx("p",{className:`${re.textSecondary} mt-4`,children:"Loading speaking test..."})]})})})]});if(g)return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":Y?"bg-black":"bg-white"}`,style:V?te.background:Y?te.backgroundSecondary:{},children:[l.jsx("div",{className:`${Y?"":re.headerBg} shadow-sm border-b ${Y?"":re.headerBorder}`,style:V?{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"}:Y?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${re.headerText}`,style:Y?{...te.headerText}:{},children:"Speaking Test"})}),l.jsx(ht,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`text-6xl mb-4 ${V?"text-red-400":"text-red-600"}`,children:""}),l.jsx("h2",{className:`text-2xl font-bold ${re.text} mb-2`,children:"Error Loading Test"}),l.jsx("p",{className:`${re.textSecondary} mb-6`,children:g})]})})})]});if(y&&C)return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":Y?"bg-black":"bg-white"}`,style:V?te.background:Y?te.backgroundSecondary:{},children:[l.jsx("div",{className:`${Y?"":re.headerBg} shadow-sm border-b ${Y?"":re.headerBorder}`,style:V?{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"}:Y?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${re.headerText}`,style:Y?{...te.headerText}:{},children:"Speaking Test Results"})}),l.jsx(ht,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx(E2,{testType:"speaking",testData:a,result:C,onRetake:()=>{v(!1),w(null);const L=JSON.parse(localStorage.getItem("userData")||"{}").student_id;localStorage.removeItem(`test_completed_${L}_speaking_${e}`)}})})]});if(!a||o.length===0)return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":Y?"bg-black":"bg-white"}`,style:V?te.background:Y?te.backgroundSecondary:{},children:[l.jsx("div",{className:`${Y?"":re.headerBg} shadow-sm border-b ${Y?"":re.headerBorder}`,style:V?{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"}:Y?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${re.headerText}`,style:Y?{...te.headerText}:{},children:"Speaking Test"})}),l.jsx(ht,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:`text-6xl mb-4 ${re.textSecondary}`,children:""}),l.jsx("h2",{className:`text-2xl font-bold ${re.text} mb-2`,children:"No Test Data"}),l.jsx("p",{className:`${re.textSecondary} mb-6`,children:"Unable to load test information"})]})})})]});const ee=u;return l.jsxs("div",{className:`min-h-screen overflow-y-auto ${V?"bg-gradient-to-br from-black via-gray-900 to-purple-900":Y?"bg-black":"bg-gray-50"}`,style:V?te.background:Y?te.backgroundSecondary:{},children:[l.jsx(Fa,{isOpen:_,onClose:()=>T(!1),title:"Exit Speaking Test",size:"small",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to go back to cabinet?"}),l.jsxs("div",{className:"flex gap-3 justify-center",children:[l.jsx(ht,{onClick:()=>T(!1),variant:"secondary",children:"Cancel"}),l.jsx(ht,{onClick:()=>{T(!1),D()},variant:"primary",children:"Go Back"})]})]})}),l.jsx("div",{className:`${Y?"":re.headerBg} shadow-sm border-b ${Y?"":re.headerBorder}`,style:V?{boxShadow:"0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3), inset 0 0 20px rgba(0, 255, 255, 0.1)"}:Y?{backgroundColor:ze.background,borderBottom:`2px solid ${ze.primary}`,boxShadow:"0 0 30px rgba(236, 72, 153, 0.8), 0 0 60px rgba(236, 72, 153, 0.6), 0 0 90px rgba(236, 72, 153, 0.4), inset 0 0 40px rgba(236, 72, 153, 0.5), inset 0 0 80px rgba(236, 72, 153, 0.3), inset 0 0 120px rgba(236, 72, 153, 0.15)"}:{},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsx("div",{children:l.jsx("h1",{className:`text-2xl font-bold ${re.headerText}`,style:Y?{...te.headerText}:{},children:"Speaking Test"})}),l.jsx(ht,{variant:"outline",onClick:()=>T(!0),children:"Back to Cabinet"})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.length>1&&u&&l.jsx("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xs font-bold",children:"i"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Question Selection"}),l.jsx("div",{className:"mt-1 text-sm text-blue-700",children:l.jsxs("p",{children:["This test has ",o.length," questions. You have been assigned ",l.jsxs("strong",{children:["Question ",u.question_number]}),"."]})})]})]})}),l.jsx(yfe,{testData:{...a,test_id:parseInt(e),question_id:ee?.id,prompt:ee?.prompt,start_time:Date.now()},onComplete:P,onExit:D,onTestComplete:P})]})]})},_fe=()=>{const{testType:e,testId:t}=I_(),r=Xo(),{activeTests:n}=N2(),s=()=>{ye.debug(" [DEBUG] handleBackToCabinet called in TestPage"),ye.debug(" [DEBUG] Current location before navigate:",window.location.pathname),ye.debug(' [DEBUG] Calling navigate("/student")'),r("/student"),ye.debug(" [DEBUG] Navigate called, checking result..."),setTimeout(()=>{ye.debug(" [DEBUG] Location after navigate:",window.location.pathname),window.location.pathname!=="/student"&&(ye.debug(" [DEBUG] Navigation failed, forcing window.location.href"),window.location.href="/student")},50)},a=n.find(o=>o.test_type===e&&o.test_id===parseInt(t)),i=k0();return ye.debug(" [DEBUG] TestPage rendering, location:",i.pathname,"testType:",e,"testId:",t),l.jsx(cfe,{onBackToCabinet:s,currentTest:a||{test_type:e,test_id:parseInt(t)}},`test-${e}-${t}`)},Sfe=()=>{const e=Xo(),{user:t,isAuthenticated:r,isLoading:n}=Fs(),[s,a]=S.useState(!1),[i,o]=S.useState(!0),[c,u]=S.useState(""),[d,f]=S.useState([]),[h,g]=S.useState(!1),[p,y]=S.useState(!1),[v,C]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),w=S.useCallback(async()=>{ye.debug(" Initializing Student Application...");try{if(o(!0),u(""),!r||!t){ye.debug(" User not authenticated, redirecting to login"),e("/login");return}if(t.role!==zo.STUDENT){ye.error(" Invalid user role for student app:",t.role),u("Access denied. Student role required.");return}ye.debug(" Initializing event listeners..."),_(),ye.debug(" Setting up back to cabinet button listeners..."),T(),ye.debug(" Setting up password change form listener..."),E(),ye.debug(" Loading student data..."),await A(),ye.debug(" Exposing student functions globally..."),F(),ye.debug(" Populating student info from user data..."),Y(t),a(!0),ye.debug(" Student Application initialization complete!")}catch(ee){ye.error(" Error initializing student app:",ee),u("Failed to initialize student application")}finally{o(!1)}},[r,t,e]);S.useEffect(()=>{n||w()},[n,r,t,w]);const _=S.useCallback(()=>{ye.debug(" Setting up student event listeners...");const ee=Q=>{h&&!Q.target.closest(".student-menu")&&g(!1)},L=Q=>{Q.key==="Escape"&&h&&g(!1)};return document.addEventListener("click",ee),document.addEventListener("keydown",L),()=>{document.removeEventListener("click",ee),document.removeEventListener("keydown",L)}},[h]),T=S.useCallback(()=>{ye.debug(" Setting up back to cabinet listeners...")},[]),E=S.useCallback(()=>{ye.debug(" Setting up password change form...")},[]),A=S.useCallback(async()=>{ye.debug(" Loading student data...");try{ye.debug(" Student data loaded successfully")}catch(ee){throw ye.error(" Error loading student data:",ee),ee}},[]),F=S.useCallback(()=>{ye.debug(" Exposing student functions globally..."),window.toggleStudentMenu=j,window.showChangePasswordTab=P,window.hideChangePasswordTab=D,window.navigateBackToCabinet=V,window.handlePasswordChange=B,window.populateStudentInfoDirectly=Y,ye.debug(" All student functions exposed globally")},[]),j=S.useCallback(()=>{ye.debug(" toggleStudentMenu called"),g(ee=>{const L=!ee;return ye.debug(" Menu state changed from",ee,"to",L),L}),ye.debug(" Toggled dropdown menu")},[]),P=S.useCallback(()=>{ye.debug(" showChangePasswordTab called"),y(!0),g(!1)},[]),D=S.useCallback(()=>{ye.debug(" hideChangePasswordTab called"),y(!1),C({currentPassword:"",newPassword:"",confirmPassword:""})},[]),B=S.useCallback(async ee=>{ee.preventDefault(),ye.debug(" handlePasswordChange called");const{currentPassword:L,newPassword:Q,confirmPassword:U}=v;if(!L||!Q||!U){re("Please fill in all fields","error");return}if(Q!==U){re("New passwords do not match","error");return}if(Q.length<6){re("New password must be at least 6 characters long","error");return}const G=/[a-zA-Z]/.test(Q),W=/[0-9]/.test(Q);if(!G||!W){re("New password must contain both letters and numbers","error");return}if(!t||!t.student_id){re("Session expired. Please login again.","error");return}const M=t.student_id;if(window.confirm("Are you sure you want to change your password?"))try{o(!0);const I=await Hs.changePassword({studentId:M,currentPassword:L,newPassword:Q});I.success?(re("Password changed successfully!","success"),D()):re(I.message||"Failed to change password","error")}catch(I){ye.error("Password change error:",I),re("Failed to change password. Please try again.","error")}finally{o(!1)}},[v,t]),V=S.useCallback(()=>{if(ye.debug("[DEBUG] navigateBackToCabinet called"),!r||!t){ye.warn("[WARN] No valid user found, redirecting to login"),e("/login");return}t.role===zo.STUDENT?(ye.debug("[DEBUG] Navigating to student cabinet"),e("/student")):(ye.warn("[WARN] Unknown user role, redirecting to login"),e("/login"))},[r,t,e]),Y=S.useCallback(ee=>{ye.debug(" populateStudentInfoDirectly called with:",ee);try{ye.debug(" Student info populated successfully")}catch(L){ye.error(" Error populating student info:",L)}},[]),re=S.useCallback((ee,L)=>{const Q={id:Date.now(),message:ee,type:L,timestamp:new Date};f(U=>[...U,Q]),setTimeout(()=>{f(U=>U.filter(G=>G.id!==Q.id))},rg.NOTIFICATION_DURATION)},[]),te=S.useCallback(ee=>{const{name:L,value:Q}=ee.target;C(U=>({...U,[L]:Q}))},[]);return i?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Initializing Student Application..."})]})}):c?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Initialization Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:c}),l.jsx(ht,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):s?l.jsxs(i0e,{asBackground:!0,children:[l.jsxs(tT,{children:[l.jsx(ea,{path:"/",element:l.jsxs("div",{className:"student-app",children:[l.jsx(afe,{isMenuOpen:h,onToggleMenu:j,onShowPasswordChange:P}),p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Change Password"}),l.jsxs("form",{onSubmit:B,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),l.jsx("input",{type:"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:te,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),l.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:te,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),l.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:v.confirmPassword,onChange:te,required:!0,minLength:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx(ht,{type:"button",variant:"secondary",onClick:D,className:"flex-1",children:"Cancel"}),l.jsx(ht,{type:"submit",variant:"primary",disabled:i,className:"flex-1",children:i?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",className:"mr-2"}),"Changing..."]}):"Change Password"})]})]})]})})]})}),l.jsx(ea,{path:"/test/:testType/:testId",element:l.jsx(_fe,{})}),l.jsx(ea,{path:"matching-test/:testId",element:l.jsx(ufe,{})}),l.jsx(ea,{path:"word-matching-test/:testId",element:l.jsx(dfe,{})}),l.jsx(ea,{path:"speaking-test/:testId",element:l.jsx(wfe,{})}),l.jsx(ea,{path:"/results",element:l.jsx(AH,{})})]}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:d.map(ee=>l.jsx(hu,{type:ee.type,message:ee.message,onClose:()=>f(L=>L.filter(Q=>Q.id!==ee.id))},ee.id))})]}):l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Setting up Student Application..."})]})})},kfe=()=>l.jsx(_B,{children:l.jsx(yH,{children:l.jsx(pH,{children:l.jsx(Nne,{children:l.jsx(Sfe,{})})})})}),Cfe=({result:e,isOpen:t,onClose:r,initialTab:n="overview",editingSpeakingScore:s,tempSpeakingScore:a,isSavingSpeakingScore:i,onStartSpeakingScoreEdit:o,onSaveSpeakingScore:c,onCancelSpeakingScoreEdit:u,onTempSpeakingScoreChange:d})=>{const[f,h]=S.useState(n),g=S.useRef(!1);if(S.useEffect(()=>()=>{g.current=!0},[]),S.useEffect(()=>{t&&h(n)},[t,n]),!t||!e)return null;const p={test_id:e.test_id,test_name:e.test_name,subject_id:e.subject_id};let y=e?.__audioUrl||void 0;const v=y?void 0:e?.answers;typeof v=="string"?y=v:v&&typeof v=="object"&&(y=v.audio_url),S.useEffect(()=>{console.log("[SpeakingReview] Transcript sources",{fromResult:e?.transcript,fromAnswersObject:typeof v=="object"&&v?.transcript?v.transcript:void 0,hasAnswers:!!v,test_id:e?.test_id,student_id:e?.student_id})},[e?.test_id,e?.student_id]);const[C,w]=S.useState("");S.useEffect(()=>{const T=new AbortController;let E=!1;const A=e?.__studentId||e?.student_id;return!e?.transcript&&!(typeof v=="object"&&v?.transcript)&&e?.test_id&&A&&(async()=>{try{const F=`/.netlify/functions/get-speaking-test-new?action=transcript&test_id=${encodeURIComponent(e.test_id)}&student_id=${encodeURIComponent(A)}`;console.log("[SpeakingReview] Fetching transcript from API:",{url:F});const j=await(window.tokenManager?.getToken()||ma.get())||localStorage.getItem("accessToken")||localStorage.getItem("token"),P=await fetch(F,{headers:{Authorization:j?`Bearer ${j}`:""},signal:T.signal});console.log("[SpeakingReview] Transcript API response:",{ok:P.ok,status:P.status});const D=await P.json().catch(()=>({}));console.log("[SpeakingReview] Transcript API body:",D),!E&&!g.current&&(P.ok?w(D.transcript||""):console.warn("[SpeakingReview] Transcript API failed:",D?.error||"unknown error"))}catch(F){F.name!=="AbortError"&&!g.current&&console.error("[SpeakingReview] Transcript fetch error:",F)}})(),()=>{E=!0;try{T.abort()}catch{}}},[e]);const _={score:e.score,max_score:e.max_score,percentage:e.percentage,audio_url:y,transcript:e.transcript||C||(typeof v=="object"&&v?.transcript?v.transcript:void 0),time_taken:e.time_taken,started_at:e.started_at,submitted_at:e.submitted_at};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[l.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 flex justify-between items-center",children:[l.jsxs("h2",{className:"text-xl font-semibold",children:["Speaking Test Review - ",p.test_name]}),l.jsx("button",{onClick:r,className:"text-white hover:text-gray-200 text-2xl font-bold",children:""})]}),l.jsx("div",{className:"border-b border-gray-200",children:l.jsx("nav",{className:"flex space-x-8 px-6",children:[{id:"audio",label:"Audio"},{id:"transcript",label:"Transcript"},{id:"analysis",label:"AI Analysis"},{id:"scoring",label:"Scoring"}].map(T=>l.jsx("button",{onClick:()=>h(T.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${f===T.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:T.label},T.id))})}),l.jsxs("div",{className:"p-6 max-h-[60vh] overflow-y-auto",children:[f==="overview"&&l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Name"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:p.test_name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[_.score," / ",_.max_score]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time Taken"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.time_taken?`${Math.floor(_.time_taken/60)}:${(_.time_taken%60).toString().padStart(2,"0")}`:"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Submitted At"}),l.jsx("p",{className:"mt-1 text-sm text-gray-900",children:_.submitted_at?new Date(_.submitted_at).toLocaleString():"N/A"})]})]})}),f==="audio"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Audio Recording"}),_.audio_url?l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Click the play button to listen to the student's recording:"}),l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsx(jH,{audioUrl:_.audio_url,className:"w-full"})})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No audio recording available"})})]}),f==="transcript"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Transcript"}),_.transcript?l.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:l.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:_.transcript})}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No transcript available"})})]}),f==="analysis"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Analysis Results"}),(()=>{let T=e.ai_feedback;if(T&&typeof T=="string")try{T=JSON.parse(T)}catch{T=null}return T?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Overall Performance"}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-gray-800",children:T.overall_score||0}),l.jsx("div",{className:"text-sm text-gray-600",children:"Overall Score (0-100)"})]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-4",children:"Category Breakdown"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[T.grammar_score||0,"/25"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Grammar"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-green-600",children:[T.vocabulary_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Vocabulary"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-purple-600",children:[T.pronunciation_score||0,"/15"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Pronunciation"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-orange-600",children:[T.fluency_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Fluency"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-lg font-bold text-red-600",children:[T.content_score||0,"/20"]}),l.jsx("div",{className:"text-xs text-gray-600",children:"Content"})]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Performance Metrics"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Word Count:"}),l.jsx("span",{className:"text-sm font-medium",children:T.word_count||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Grammar Mistakes:"}),l.jsx("span",{className:"text-sm font-medium text-red-600",children:T.grammar_mistakes||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Vocabulary Issues:"}),l.jsx("span",{className:"text-sm font-medium text-red-600",children:T.vocabulary_mistakes||0})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"Difficulty Level:"}),l.jsx("span",{className:"text-sm font-medium",children:T.difficulty_level||"N/A"})]})]})]}),l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"AI Feedback"}),T.feedback?l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:l.jsx("p",{className:"text-sm text-gray-700",children:T.feedback})}):l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("p",{className:"text-sm",children:"No AI feedback available"})})]})]}),T.improved_transcript&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Improved Transcript"}),l.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:l.jsx("p",{className:"text-sm text-gray-700",children:T.improved_transcript})})]}),T.grammar_corrections&&T.grammar_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Grammar Corrections"}),l.jsx("div",{className:"space-y-3",children:T.grammar_corrections.map((E,A)=>l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-red-800",children:"Mistake:"})," ",E.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-green-800",children:"Correction:"})," ",E.correction]}),E.explanation&&l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[l.jsx("span",{className:"font-medium",children:"Explanation:"})," ",E.explanation]})]},A))})]}),T.vocabulary_corrections&&T.vocabulary_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Vocabulary Improvements"}),l.jsx("div",{className:"space-y-3",children:T.vocabulary_corrections.map((E,A)=>l.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-yellow-800",children:"Original:"})," ",E.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-green-800",children:"Better:"})," ",E.correction]}),E.explanation&&l.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[l.jsx("span",{className:"font-medium",children:"Explanation:"})," ",E.explanation]})]},A))})]}),T.language_use_corrections&&T.language_use_corrections.length>0&&l.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Language Use Suggestions"}),l.jsx("div",{className:"space-y-3",children:T.language_use_corrections.map((E,A)=>l.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"font-medium text-blue-800",children:"Original:"})," ",E.mistake]}),l.jsxs("div",{className:"text-sm mt-1",children:[l.jsx("span",{className:"font-medium text-blue-800",children:"Suggestion:"})," ",E.suggestion]}),E.explanation&&l.jsx("div",{className:"text-xs text-blue-700 mt-1",children:E.explanation})]},A))})]})]}):l.jsx("div",{className:"text-center py-8 text-gray-500",children:l.jsx("p",{children:"No AI analysis available for this result"})})})()]}),f==="scoring"&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900 text-center",children:"Score Details"}),s?l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 place-items-center",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Score"}),l.jsx("input",{type:"number",min:"0",max:_.max_score,value:a,onChange:T=>d(T.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Max Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[_.max_score," (Fixed)"]})]})]}),l.jsxs("div",{className:"flex justify-center space-x-3",children:[l.jsx("button",{onClick:c,disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:i?"Saving...":"Save Score"}),l.jsx("button",{onClick:u,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancel"})]})]}):l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("div",{className:"grid grid-cols-1 place-items-center gap-2",children:l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 text-center",children:"Current Score"}),l.jsxs("p",{className:"mt-1 text-sm text-gray-900 text-center",children:[_.score," / ",_.max_score]})]})}),l.jsx("button",{onClick:()=>o(e.id,_.score),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 mx-auto",children:"Edit Score"})]})]})]}),l.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:l.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"})})]})})},Tfe=({isOpen:e,onClose:t,testResult:r,questions:n,isLoadingQuestions:s,onScoreUpdate:a})=>{const[i,o]=S.useState(!1),[c,u]=S.useState(""),[d,f]=S.useState(!1),h=D=>{if(!D)return{};if(typeof D=="string")try{return JSON.parse(D)}catch{return{}}return D||{}},g=()=>{const D=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;u(D.toString()),o(!0)},p=()=>{o(!1),u("")},y=async D=>{D&&(D.preventDefault(),D.stopPropagation());const B=r?.id||r?.result_id;if(!B){console.error("TestAnswerModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("TestAnswerModal: Saving score",{resultId:B,score:c,testType:r.test_type}),f(!0);try{const V=r.test_type||r.testType,Y={resultId:B,score:parseInt(c)||0,testType:V};console.log("TestAnswerModal: Sending payload",Y);let re;if(window.tokenManager?.makeAuthenticatedRequest)re=await window.tokenManager.makeAuthenticatedRequest(Yd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});else{const{SecureToken:te}=await ai(async()=>{const{SecureToken:L}=await Promise.resolve().then(()=>u4);return{SecureToken:L}},void 0),ee=await(window.tokenManager?.getToken()||te.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");re=await fetch(Yd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:ee?`Bearer ${ee}`:""},body:JSON.stringify(Y)})}if(console.log("TestAnswerModal: Response status",re.status),re.ok){const te=await re.json();console.log("TestAnswerModal: Score updated successfully",te),a&&a(te),o(!1),u("")}else{const te=await re.json().catch(()=>({error:"Unknown error"}));console.error("TestAnswerModal: Error response",te),alert(te.error||`Failed to update score. Status: ${re.status}`)}}catch(V){console.error("TestAnswerModal: Exception updating score:",V),alert(`Failed to update score: ${V.message||V}`)}finally{f(!1)}},v=S.useMemo(()=>{const D=r?.answers;if(console.log(" [TestAnswerModal] Raw testResult.answers:",D),console.log(" [TestAnswerModal] Raw testResult.answers type:",typeof D),console.log(" [TestAnswerModal] testResult.retest_offered:",r?.retest_offered),D&&typeof D=="object"&&D.answers_by_id)return console.log(" [TestAnswerModal] Found answers_by_id format"),console.log(" [TestAnswerModal] answers_by_id:",D.answers_by_id),console.log(" [TestAnswerModal] question_order:",D.question_order),D.answers_by_id||{};const B=h(D);return console.log(" [TestAnswerModal] Parsed student answers:",B),console.log(" [TestAnswerModal] Full testResult:",r),B},[r?.answers]),C=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((D,B)=>{const V=D.question_id||D.id||B+1,Y=String(V),re=Number(V),te=v[Y]!==void 0?v[Y]:v[re]!==void 0?v[re]:v[V]!==void 0?v[V]:void 0,ee=D.correct_answer,L=te===ee,Q=U=>{if(D.options&&Array.isArray(D.options)){const W=U.charCodeAt(0)-65;return D.options[W]||U}const G=`option_${U.toLowerCase()}`;return D[G]||U};return l.jsxs("tr",{className:L?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:B+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ha(D.question)}}),l.jsx("td",{className:"px-4 py-3 text-sm",children:te?l.jsxs("span",{className:`font-medium ${L?"text-green-700":"text-red-700"}`,children:[te," - ",l.jsx("span",{dangerouslySetInnerHTML:{__html:ha(String(Q(te)))}})]}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[ee," - ",l.jsx("span",{dangerouslySetInnerHTML:{__html:ha(String(Q(ee)))}})]}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:L?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},Y)})})]})}),w=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((D,B)=>{const V=D.question_id||D.id||B+1,Y=String(V),re=Number(V),te=v[Y]!==void 0?v[Y]:v[re]!==void 0?v[re]:v[V]!==void 0?v[V]:void 0,ee=D.correct_answer;let L;typeof te=="boolean"?L=te:typeof te=="string"?L=te.toLowerCase().trim()==="true":te===1||te==="1"?L=!0:te===0||te==="0"?L=!1:L=!!te;let Q;typeof ee=="boolean"?Q=ee:typeof ee=="string"?Q=ee.toLowerCase().trim()==="true":Q=!!ee;const U=L===Q;B===0&&console.log(" [TestAnswerModal] True/False First Question Debug:",{questionIdStr:Y,studentAnswer:te,studentAnswerType:typeof te,normalizedStudentAnswer:L,correctAnswer:ee,correctAnswerType:typeof ee,normalizedCorrectAnswer:Q,isCorrect:U});const G=te!=null?L:null,W=Q;return l.jsxs("tr",{className:U?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:B+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ha(D.question)}}),l.jsx("td",{className:"px-4 py-3 text-sm",children:G!==null?l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${G?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:G?"True":"False"}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${W?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:W?"True":"False"})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:U?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},Y)})})]})}),_=()=>{if(!n||n.length===0)return l.jsx("p",{className:"text-gray-500",children:"No questions available"});const D=(B,V)=>{if(!B||!V||V.length===0)return!1;const Y=String(B).toLowerCase().trim();return V.some(re=>{const te=String(re).toLowerCase().trim();return Y===te||te.length>=2&&Y.includes(te)?!0:te.length===1?Y.startsWith(te)||Y.endsWith(te):!1})};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Answer(s)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((B,V)=>{const Y=B.question_id||B.id||V+1,re=String(Y),te=Number(Y),ee=v[re]!==void 0?v[re]:v[te]!==void 0?v[te]:v[Y]!==void 0?v[Y]:void 0,L=Array.isArray(B.correct_answers)?B.correct_answers:B.correct_answer?[B.correct_answer]:[],Q=D(ee,L);return V===0&&console.log(" [TestAnswerModal] First question debug:",{questionIdNum:Y,questionIdStr:re,questionIdNumKey:te,studentAnswer:ee,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:L,question:B}),l.jsxs("tr",{className:Q?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:V+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",dangerouslySetInnerHTML:{__html:ha(B.question)}}),l.jsx("td",{className:"px-4 py-3 text-sm",children:ee?l.jsx("span",{className:`font-medium ${Q?"text-green-700":"text-red-700"}`,dangerouslySetInnerHTML:{__html:(()=>{const U=String(ee);if(U.includes("$"))return ha(U);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(U))try{return hC(U)}catch{return ha(U)}return ha(U)})()}}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:L.length>0?l.jsx("div",{className:"space-y-1",children:L.map((U,G)=>{const W=String(U);return l.jsx("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",dangerouslySetInnerHTML:{__html:(()=>{if(W.includes("$"))return ha(W);if(/\\[a-zA-Z]+|[\^_]\{|\\times|\\div|\\sqrt|\\frac/.test(W))try{return hC(W)}catch{return ha(W)}return ha(W)})()}},G)})}):l.jsx("span",{className:"text-gray-400",children:"No correct answer defined"})}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Q?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},re)})})]})})},T=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Q#"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Left Word"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student Match"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Correct Match"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((D,B)=>{const V=D.question_id||D.id||B+1,Y=String(V),re=Number(V),te=v[Y]!==void 0?v[Y]:v[re]!==void 0?v[re]:v[V]!==void 0?v[V]:void 0,ee=D.left_word,L=D.right_word;let Q=null,U=!1;if(te){if(typeof te=="object")Q=te.definition||te.right||te.word,U=te.word===ee&&(te.definition||te.right)===L;else if(typeof te=="string")try{const G=JSON.parse(te);Q=G.definition||G.right||G.word,U=G.word===ee&&(G.definition||G.right)===L}catch{Q=te}}return l.jsxs("tr",{className:U?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:B+1}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:ee}),l.jsx("td",{className:"px-4 py-3 text-sm",children:Q?l.jsx("span",{className:U?"text-green-700 font-medium":"text-red-700 font-medium",children:Q}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:L}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:U?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:" Correct"}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:" Wrong"})})]},Y)})})]})}),E=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsx("div",{className:"space-y-6",children:n.map((D,B)=>{const V=D.question_id||D.id||B+1,Y=String(V),re=Number(V);B===0&&console.log(" [TestAnswerModal] Fill Blanks First Question Debug:",{questionIdNum:V,questionIdStr:Y,questionIdNumKey:re,question:D,studentAnswers:v,studentAnswersKeys:Object.keys(v),correctAnswers:D.correct_answers});const te=v[Y]!==void 0?v[Y]:v[re]!==void 0?v[re]:v[V]!==void 0?v[V]:void 0,ee=Array.isArray(D.correct_answers)?D.correct_answers:[];let L=[];return Array.isArray(te)?L=te:te!=null?L=[te]:L=[],l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:["Question ",B+1]}),l.jsxs("div",{className:"space-y-3",children:[D.question_json&&l.jsx("div",{className:"text-sm text-gray-700 mb-4",children:typeof D.question_json=="string"?D.question_json:D.question_json.text||D.question_json.question||"Question text not available"}),l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Blank #"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Answer"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Correct Answer"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase w-20",children:"Status"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ee.map((Q,U)=>{let G=L[U];const W=U+1,M=String(W),I=Number(W);(G==null||G==="")&&(G=v[M]!==void 0?v[M]:v[I]!==void 0?v[I]:G),B===0&&U===0&&console.log(" [TestAnswerModal] Fill Blanks First Blank Debug:",{blankIndex:U,potentialBlankId:W,potentialBlankIdStr:M,potentialBlankIdNum:I,studentAns:G,studentAnswersForQ:L,correctAns:Q,studentAnswersKeys:Object.keys(v)});const z=String(G||"").trim().toLowerCase()===String(Q||"").trim().toLowerCase();return l.jsxs("tr",{className:z?"bg-green-50":"bg-red-50",children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900",children:U+1}),l.jsx("td",{className:"px-4 py-2 text-sm",children:G?l.jsx("span",{className:z?"text-green-700 font-medium":"text-red-700 font-medium",children:String(G)}):l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})}),l.jsx("td",{className:"px-4 py-2 text-sm text-gray-700",children:String(Q)}),l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm",children:z?l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:""}):l.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:""})})]},U)})})]})]})]},Y)})}),A=()=>!n||n.length===0?l.jsx("p",{className:"text-gray-500",children:"No questions available"}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Matching type tests require visual comparison. Answers stored as connection pairs."}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Word"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Connection"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((D,B)=>{const V=D.question_id||D.id||B+1,Y=String(V),re=Number(V),te=v[Y]!==void 0?v[Y]:v[re]!==void 0?v[re]:v[V]!==void 0?v[V]:void 0;return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium",children:D.word}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:te?typeof te=="object"?JSON.stringify(te):te:l.jsx("span",{className:"text-gray-400 italic",children:"No answer"})})]},Y)})})]})})]}),F=()=>{if(!r)return null;const D=r.test_type||r.testType;if(s)return l.jsxs("div",{className:"flex items-center justify-center py-12",children:[l.jsx(pn,{size:"lg"}),l.jsx("span",{className:"ml-4 text-gray-600",children:"Loading questions..."})]});if(!n||n.length===0)return l.jsxs("div",{className:"text-center py-8",children:[l.jsx("p",{className:"text-gray-500",children:"Unable to load questions for this test."}),l.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Test ID: ",r.test_id,", Type: ",D]})]});switch(D){case"multiple_choice":return C();case"true_false":return w();case"input":return _();case"word_matching":return T();case"fill_blanks":return E();case"matching_type":return A();default:return l.jsxs("div",{className:"text-center py-8",children:[l.jsxs("p",{className:"text-gray-500",children:['Test type "',D,'" is not supported for answer viewing.']}),l.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Drawing and Speaking tests have their own dedicated modals."})]})}};if(!r)return null;r.test_type||r.testType;const j=`${r.name||""} ${r.surname||""}`.trim(),P=`${r.test_name||"Test"} - ${j||r.student_id}`;return l.jsxs(Fa,{isOpen:e,onClose:t,title:P,size:"large",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6 pb-4 border-b border-gray-200",children:[l.jsxs("div",{className:"flex space-x-6",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Score"}),(()=>{const D=r.test_type||r.testType,B=["multiple_choice","true_false","input"].includes(D),V=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0,Y=r.best_retest_max_score||r.max_score||0;return B&&i?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"0",max:Y,value:c,onChange:re=>u(re.target.value),className:"w-16 px-2 py-1 text-sm border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsxs("span",{className:"text-lg font-semibold text-gray-500",children:["/ ",Y]}),l.jsx("button",{type:"button",onClick:y,disabled:d,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:d?"Saving...":"Save"}),l.jsx("button",{type:"button",onClick:p,disabled:d,className:"px-2 py-1 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[V," / ",Y,r.best_retest_score!==null&&r.best_retest_score!==void 0&&l.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Retest Best)"})]}),B&&l.jsx("button",{onClick:g,className:"ml-2 px-2 py-1 text-xs text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded",title:"Click to edit score",children:"Edit"})]})})()]}),r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0&&r.best_retest_percentage>0||r.percentage&&r.percentage>0?l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Percentage"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r.best_retest_percentage!==null&&r.best_retest_percentage!==void 0?`${r.best_retest_percentage.toFixed(1)}%`:`${r.percentage?.toFixed(1)||"0.0"}%`})]}):null,r.subject&&r.subject!=="N/A"?l.jsxs("div",{children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Subject"}),l.jsx("div",{className:"text-sm font-medium text-gray-700",children:r.subject})]}):null]}),r.submitted_at&&l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-xs text-gray-500",children:"Submitted"}),l.jsx("div",{className:"text-sm text-gray-700",children:new Date(r.submitted_at).toLocaleString()})]})]}),l.jsx("div",{className:"max-h-[70vh] overflow-y-auto",children:F()}),r.caught_cheating&&l.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-sm text-red-800",children:[" This test was flagged for suspicious activity (visibility changes: ",r.visibility_change_times||0,")"]})})]})},Nfe=({isOpen:e,onClose:t,testResult:r,onScoreUpdate:n})=>{const[s,a]=S.useState(""),[i,o]=S.useState(!1);Gs.useEffect(()=>{if(console.log("EditScoreModal: useEffect triggered",{isOpen:e,testResult:r}),e&&r){const h=r.best_retest_score!==null&&r.best_retest_score!==void 0?r.best_retest_score:r.score||0;a(h.toString()),console.log("EditScoreModal: Initialized with score",h)}},[e,r]);const c=async h=>{h.preventDefault(),h.stopPropagation();const g=r?.id||r?.result_id;if(!g){console.error("EditScoreModal: No id/result_id found",r),alert("Error: Test result ID not found");return}console.log("EditScoreModal: Saving score",{resultId:g,score:s,testType:r.test_type}),o(!0);try{const p=r.test_type||r.testType,y={resultId:g,score:parseInt(s)||0,testType:p};console.log("EditScoreModal: Sending payload",y);let v;if(window.tokenManager?.makeAuthenticatedRequest)v=await window.tokenManager.makeAuthenticatedRequest(Yd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});else{const{SecureToken:C}=await ai(async()=>{const{SecureToken:_}=await Promise.resolve().then(()=>u4);return{SecureToken:_}},void 0),w=await(window.tokenManager?.getToken()||C.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");v=await fetch(Yd.UPDATE_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:w?`Bearer ${w}`:""},body:JSON.stringify(y)})}if(console.log("EditScoreModal: Response status",v.status),v.ok){const C=await v.json();console.log("EditScoreModal: Score updated successfully",C),n&&n(C),t()}else{const C=await v.json().catch(()=>({error:"Unknown error"}));console.error("EditScoreModal: Error response",C),alert(C.error||`Failed to update score. Status: ${v.status}`)}}catch(p){console.error("EditScoreModal: Exception updating score:",p),alert(`Failed to update score: ${p.message||p}`)}finally{o(!1)}};if(console.log("EditScoreModal: Rendering",{isOpen:e,testResult:r,hasTestResult:!!r}),!r)return console.log("EditScoreModal: No testResult, returning null"),null;const u=r.best_retest_max_score||r.max_score||0,d=`${r.name||""} ${r.surname||""}`.trim()||r.student_id,f=`Edit Score - ${r.test_name||"Test"} - ${d}`;return l.jsx(Fa,{isOpen:e,onClose:t,title:f,size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Score"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",min:"0",max:u,value:s,onChange:h=>a(h.target.value),className:"w-24 px-3 py-2 text-base border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsxs("span",{className:"text-lg font-semibold text-gray-600",children:["/ ",u]})]}),l.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Enter a score between 0 and ",u]})]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[l.jsx("button",{onClick:t,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Cancel"}),l.jsx("button",{type:"button",onClick:c,disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50",children:i?"Saving...":"Save"})]})]})})};class vw extends Gs.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){if(console.error("ErrorBoundary caught an error:",t,r),t.message&&t.message.includes("Minified React error #300")){console.warn("React error #300 caught and handled by ErrorBoundary");return}}render(){return this.state.hasError?l.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[l.jsx("h3",{className:"text-red-800 font-medium",children:"Something went wrong"}),l.jsx("p",{className:"text-red-600 text-sm mt-1",children:"An error occurred while rendering this component."})]}):this.props.children}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var W4={};W4.version="0.18.5";var PH=1252,Efe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],iN={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},oN=function(e){Efe.indexOf(e)!=-1&&(PH=iN[0]=e)};function Afe(){oN(1252)}var lu=function(e){oN(e)};function lN(){lu(1200),Afe()}function bO(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function jfe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function FH(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var zy=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?jfe(e.slice(2)):t==254&&r==255?FH(e.slice(2)):t==65279?e.slice(1):e},bw=function(t){return String.fromCharCode(t)},wO=function(t){return String.fromCharCode(t)},Dv,Df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Rv(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),a=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,s=e.charCodeAt(u++),o=(n&15)<<2|s>>6,c=s&63,isNaN(n)?o=c=64:isNaN(s)&&(c=64),t+=Df.charAt(a)+Df.charAt(i)+Df.charAt(o)+Df.charAt(c);return t}function Gl(e){var t="",r=0,n=0,s=0,a=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)a=Df.indexOf(e.charAt(u++)),i=Df.indexOf(e.charAt(u++)),r=a<<2|i>>4,t+=String.fromCharCode(r),o=Df.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Df.indexOf(e.charAt(u++)),s=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var Fn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),E0=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function Jf(e){return Fn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function _O(e){return Fn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Bl=function(t){return Fn?E0(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function p3(e){if(typeof ArrayBuffer>"u")return Bl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function uh(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Pfe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function cN(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return cN(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ni=Fn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:E0(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function Ffe(e){for(var t=[],r=0,n=e.length+250,s=Jf(e.length+255),a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Jf(65535),n=65530)}return t.push(s.slice(0,r)),Ni(t)}var Ko=/\u0000/g,Wy=/[\u0001-\u0006]/g;function Lp(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function cu(e,t){var r=""+e;return r.length>=t?r:xa("0",t-r.length)+r}function uN(e,t){var r=""+e;return r.length>=t?r:xa(" ",t-r.length)+r}function H4(e,t){var r=""+e;return r.length>=t?r:r+xa(" ",t-r.length)}function Mfe(e,t){var r=""+Math.round(e);return r.length>=t?r:xa("0",t-r.length)+r}function Ofe(e,t){var r=""+e;return r.length>=t?r:xa("0",t-r.length)+r}var SO=Math.pow(2,32);function lp(e,t){if(e>SO||e<-SO)return Mfe(e,t);var r=Math.round(e);return Ofe(r,t)}function G4(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var kO=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],G5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Dfe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var sn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},CO={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Rfe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function V4(e,t,r){for(var n=e<0?-1:1,s=e*n,a=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(s);u<t&&(f=Math.floor(s),o=f*i+a,d=f*u+c,!(s-f<5e-8));)s=1/(s-f),a=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=a):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function lm(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),a=0,i=[],o={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],a=c.getDay(),n<60&&(a=(a+6)%7),r&&(a=zfe(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var MH=new Date(1899,11,31,0,0,0),Ife=MH.getTime(),Lfe=new Date(1900,2,1,0,0,0);function OH(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Lfe&&(r+=1440*60*1e3),(r-(Ife+(e.getTimezoneOffset()-MH.getTimezoneOffset())*6e4))/(1440*60*1e3)}function dN(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Bfe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function $fe(e){var t=e<0?12:11,r=dN(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Ufe(e){var t=dN(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Iv(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=$fe(e):t===10?r=e.toFixed(10).substr(0,12):r=Ufe(e),dN(Bfe(r.toUpperCase()))}function $m(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Iv(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return jc(14,OH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function zfe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Wfe(e,t,r,n){var s="",a=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return G5[r.m-1][1];case 5:return G5[r.m-1][0];default:return G5[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return kO[r.q][0];default:return kO[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?cu(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),t==="s"?a===0?"0":""+a/i:(s=cu(a,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?cu(c,u):"";return d}function Rf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var DH=/%/g;function Hfe(e,t,r){var n=t.replace(DH,""),s=t.length-n.length;return i0(e,n,r*Math.pow(10,2*s))+xa("%",s)}function Gfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return i0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function RH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+RH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var IH=/# (\?+)( ?)\/( ?)(\d+)/;function Vfe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?xa(" ",e[1].length+1+e[4].length):uN(i,e[1].length)+e[2]+"/"+e[3]+cu(o,e[4].length))}function qfe(e,t,r){return r+(t===0?"":""+t)+xa(" ",e[1].length+2+e[4].length)}var LH=/^#*0*\.([0#]+)/,BH=/\).*[0#]/,$H=/\(###\) ###\\?-####/;function $o(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function TO(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function NO(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Kfe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Yfe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function dc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(BH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?dc("n",n,r):"("+dc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Gfe(e,t,r);if(t.indexOf("%")!==-1)return Hfe(e,t,r);if(t.indexOf("E")!==-1)return RH(t,r);if(t.charCodeAt(0)===36)return"$"+dc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+lp(c,t.length);if(t.match(/^[#?]+$/))return s=lp(r,0),s==="0"&&(s=""),s.length>t.length?s:$o(t.substr(0,t.length-s.length))+s;if(a=t.match(IH))return Vfe(a,c,u);if(t.match(/^#+0+$/))return u+lp(c,t.length-t.indexOf("0"));if(a=t.match(LH))return s=TO(r,a[1].length).replace(/^([^\.]+)$/,"$1."+$o(a[1])).replace(/\.$/,"."+$o(a[1])).replace(/\.(\d*)$/,function(p,y){return"."+y+xa("0",$o(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+TO(c,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Rf(lp(c,0));if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+dc(e,t,-r):Rf(""+(Math.floor(r)+Kfe(r,a[1].length)))+"."+cu(NO(r,a[1].length),a[1].length);if(a=t.match(/^#,#*,#0/))return dc(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Lp(dc(e,t.replace(/[\\-]/g,""),r)),i=0,Lp(Lp(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return i<s.length?s.charAt(i++):p==="0"?"0":""}));if(t.match($H))return s=dc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=V4(c,Math.pow(10,i)-1,!1),s=""+u,d=i0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=H4(o[2],i),d.length<a[4].length&&(d=$o(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=V4(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?uN(o[1],i)+a[2]+"/"+a[3]+H4(o[2],i):xa(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=lp(r,0),t.length<=s.length?s:$o(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return $o(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return i=NO(r,a[1].length),r<0?"-"+dc(e,t,-r):Rf(Yfe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?cu(0,3-p.length):"")+p})+"."+cu(i,a[1].length);switch(t){case"###,##0.00":return dc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Rf(lp(c,0));return g!=="0"?u+g:"";case"###,###.00":return dc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return dc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Xfe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return i0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Jfe(e,t,r){var n=t.replace(DH,""),s=t.length-n.length;return i0(e,n,r*Math.pow(10,2*s))+xa("%",s)}function UH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+UH(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var a=Math.floor(Math.log(t)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(t/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function $u(e,t,r){if(e.charCodeAt(0)===40&&!t.match(BH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?$u("n",n,r):"("+$u("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Xfe(e,t,r);if(t.indexOf("%")!==-1)return Jfe(e,t,r);if(t.indexOf("E")!==-1)return UH(t,r);if(t.charCodeAt(0)===36)return"$"+$u(e,t.substr(t.charAt(1)==" "?2:1),r);var s,a,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+cu(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:$o(t.substr(0,t.length-s.length))+s;if(a=t.match(IH))return qfe(a,c,u);if(t.match(/^#+0+$/))return u+cu(c,t.length-t.indexOf("0"));if(a=t.match(LH))return s=(""+r).replace(/^([^\.]+)$/,"$1."+$o(a[1])).replace(/\.$/,"."+$o(a[1])),s=s.replace(/\.(\d*)$/,function(p,y){return"."+y+xa("0",$o(a[1]).length-y.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),a=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=t.match(/^#{1,3},##0(\.?)$/))return u+Rf(""+c);if(a=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+$u(e,t,-r):Rf(""+r)+"."+xa("0",a[1].length);if(a=t.match(/^#,#*,#0/))return $u(e,t.replace(/^#,#*,/,""),r);if(a=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Lp($u(e,t.replace(/[\\-]/g,""),r)),i=0,Lp(Lp(t.replace(/\\/g,"")).replace(/[0#]/g,function(p){return i<s.length?s.charAt(i++):p==="0"?"0":""}));if(t.match($H))return s=$u(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=V4(c,Math.pow(10,i)-1,!1),s=""+u,d=i0("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=H4(o[2],i),d.length<a[4].length&&(d=$o(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=V4(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?uN(o[1],i)+a[2]+"/"+a[3]+H4(o[2],i):xa(" ",2*i+1+a[2].length+a[3].length));if(a=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:$o(t.substr(0,t.length-s.length))+s;if(a=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var f=t.indexOf(".")-i,h=t.length-s.length-f;return $o(t.substr(0,f)+s+t.substr(t.length-h))}if(a=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+$u(e,t,-r):Rf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(p){return"00,"+(p.length<3?cu(0,3-p.length):"")+p})+"."+cu(0,a[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=Rf(""+c);return g!=="0"?u+g:"";default:if(t.match(/\.[0#?]*$/))return $u(e,t.slice(0,t.lastIndexOf(".")),r)+$o(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function i0(e,t,r){return(r|0)===r?$u(e,t,r):dc(e,t,r)}function Qfe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var zH=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function j1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":G4(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(zH))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Zfe(e,t,r,n){for(var s=[],a="",i=0,o="",c="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!G4(e,i))throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(f=e.charCodeAt(++i))!==34&&i<e.length;)a+=String.fromCharCode(f);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=e.charAt(++i),p=g==="("||g===")"?g:"t";s[s.length]={t:p,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=lm(t,r,e.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=lm(t,r),u==null))return"";for(a=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),s[s.length]={t:o,v:a},c=o;break;case"A":case"a":case"":var y={t:o,v:o};if(u==null&&(u=lm(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(y.v=u.H>=12?"":""),y.t="T",i+=5,h="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,c=o;break;case"[":for(a=o;e.charAt(i++)!=="]"&&i<e.length;)a+=e.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(zH)){if(u==null&&(u=lm(t,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},c=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",j1(e)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<e.length&&(o=e.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;e.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)a+=e.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);s[s.length]={t:"t",v:o},++i;break}var v=0,C=0,w;for(i=s.length-1,c="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=h,c="h",v<1&&(v=1);break;case"s":(w=s[i].v.match(/\.0+$/))&&(C=Math.max(C,w[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":c=s[i].t;break;case"m":c==="s"&&(s[i].t="M",v<2&&(v=2));break;case"X":break;case"Z":v<1&&s[i].v.match(/[Hh]/)&&(v=1),v<2&&s[i].v.match(/[Mm]/)&&(v=2),v<3&&s[i].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var _="",T;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=Wfe(s[i].t.charCodeAt(0),s[i].v,u,C),s[i].t="t";break;case"n":case"?":for(T=i+1;s[T]!=null&&((o=s[T].t)==="?"||o==="D"||(o===" "||o==="t")&&s[T+1]!=null&&(s[T+1].t==="?"||s[T+1].t==="t"&&s[T+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[T].v==="/"||s[T].v===" "&&s[T+1]!=null&&s[T+1].t=="?"));)s[i].v+=s[T].v,s[T]={v:"",t:";"},++T;_+=s[i].v,i=T-1;break;case"G":s[i].t="t",s[i].v=$m(t,r);break}var E="",A,F;if(_.length>0){_.charCodeAt(0)==40?(A=t<0&&_.charCodeAt(0)===45?-t:t,F=i0("n",_,A)):(A=t<0&&n>1?-t:t,F=i0("n",_,A),A<0&&s[0]&&s[0].t=="t"&&(F=F.substr(1),s[0].v="-"+s[0].v)),T=F.length-1;var j=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){j=i;break}var P=s.length;if(j===s.length&&F.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(T>=s[i].v.length-1?(T-=s[i].v.length,s[i].v=F.substr(T+1,s[i].v.length)):T<0?s[i].v="":(s[i].v=F.substr(0,T+1),T=-1),s[i].t="t",P=i);T>=0&&P<s.length&&(s[P].v=F.substr(0,T+1)+s[P].v)}else if(j!==s.length&&F.indexOf("E")===-1){for(T=F.indexOf(".")-1,i=j;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")-1:s[i].v.length-1,E=s[i].v.substr(d+1);d>=0;--d)T>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(E=F.charAt(T--)+E);s[i].v=E,s[i].t="t",P=i}for(T>=0&&P<s.length&&(s[P].v=F.substr(0,T+1)+s[P].v),T=F.indexOf(".")+1,i=j;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==j)){for(d=s[i].v.indexOf(".")>-1&&i===j?s[i].v.indexOf(".")+1:0,E=s[i].v.substr(0,d);d<s[i].v.length;++d)T<F.length&&(E+=F.charAt(T++));s[i].v=E,s[i].t="t",P=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(A=n>1&&t<0&&i>0&&s[i-1].v==="-"?-t:t,s[i].v=i0(s[i].t,s[i].v,A),s[i].t="t");var D="";for(i=0;i!==s.length;++i)s[i]!=null&&(D+=s[i].v);return D}var EO=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function AO(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function ehe(e,t){var r=Qfe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(EO),o=r[1].match(EO);return AO(t,i)?[n,r[0]]:AO(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function jc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:sn)[e],n==null&&(n=r.table&&r.table[CO[e]]||sn[CO[e]]),n==null&&(n=Rfe[e]||"General");break}if(G4(n,0))return $m(t,r);t instanceof Date&&(t=OH(t,r.date1904));var s=ehe(n,t);if(G4(s[1]))return $m(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Zfe(s[1],t,r,s[0])}function o0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(sn[r]==null){t<0&&(t=r);continue}if(sn[r]==e){t=r;break}}t<0&&(t=391)}return sn[t]=e,t}function x3(e){for(var t=0;t!=392;++t)e[t]!==void 0&&o0(e[t],t)}function P1(){sn=Dfe()}var the={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},WH=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function rhe(e){var t=typeof e=="number"?sn[e]:e;return t=t.replace(WH,"(\\d+)"),new RegExp("^"+t+"$")}function nhe(e,t,r){var n=-1,s=-1,a=-1,i=-1,o=-1,c=-1;(t.match(WH)||[]).forEach(function(f,h){var g=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=g;break;case"d":a=g;break;case"h":i=g;break;case"s":c=g;break;case"m":i>=0?o=g:s=g;break}}),c>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var she=(function(){var e={};e.version="1.2.0";function t(){for(var F=0,j=new Array(256),P=0;P!=256;++P)F=P,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,F=F&1?-306674912^F>>>1:F>>>1,j[P]=F;return typeof Int32Array<"u"?new Int32Array(j):j}var r=t();function n(F){var j=0,P=0,D=0,B=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)B[D]=F[D];for(D=0;D!=256;++D)for(P=F[D],j=256+D;j<4096;j+=256)P=B[j]=P>>>8^F[P&255];var V=[];for(D=1;D!=16;++D)V[D-1]=typeof Int32Array<"u"?B.subarray(D*256,D*256+256):B.slice(D*256,D*256+256);return V}var s=n(r),a=s[0],i=s[1],o=s[2],c=s[3],u=s[4],d=s[5],f=s[6],h=s[7],g=s[8],p=s[9],y=s[10],v=s[11],C=s[12],w=s[13],_=s[14];function T(F,j){for(var P=j^-1,D=0,B=F.length;D<B;)P=P>>>8^r[(P^F.charCodeAt(D++))&255];return~P}function E(F,j){for(var P=j^-1,D=F.length-15,B=0;B<D;)P=_[F[B++]^P&255]^w[F[B++]^P>>8&255]^C[F[B++]^P>>16&255]^v[F[B++]^P>>>24]^y[F[B++]]^p[F[B++]]^g[F[B++]]^h[F[B++]]^f[F[B++]]^d[F[B++]]^u[F[B++]]^c[F[B++]]^o[F[B++]]^i[F[B++]]^a[F[B++]]^r[F[B++]];for(D+=15;B<D;)P=P>>>8^r[(P^F[B++])&255];return~P}function A(F,j){for(var P=j^-1,D=0,B=F.length,V=0,Y=0;D<B;)V=F.charCodeAt(D++),V<128?P=P>>>8^r[(P^V)&255]:V<2048?(P=P>>>8^r[(P^(192|V>>6&31))&255],P=P>>>8^r[(P^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,Y=F.charCodeAt(D++)&1023,P=P>>>8^r[(P^(240|V>>8&7))&255],P=P>>>8^r[(P^(128|V>>2&63))&255],P=P>>>8^r[(P^(128|Y>>6&15|(V&3)<<4))&255],P=P>>>8^r[(P^(128|Y&63))&255]):(P=P>>>8^r[(P^(224|V>>12&15))&255],P=P>>>8^r[(P^(128|V>>6&63))&255],P=P>>>8^r[(P^(128|V&63))&255]);return~P}return e.table=r,e.bstr=T,e.buf=E,e.str=A,e})(),Yr=(function(){var t={};t.version="1.2.1";function r(me,Ne){for(var ve=me.split("/"),Ee=Ne.split("/"),ue=0,he=0,Pe=Math.min(ve.length,Ee.length);ue<Pe;++ue){if(he=ve[ue].length-Ee[ue].length)return he;if(ve[ue]!=Ee[ue])return ve[ue]<Ee[ue]?-1:1}return ve.length-Ee.length}function n(me){if(me.charAt(me.length-1)=="/")return me.slice(0,-1).indexOf("/")===-1?me:n(me.slice(0,-1));var Ne=me.lastIndexOf("/");return Ne===-1?me:me.slice(0,Ne+1)}function s(me){if(me.charAt(me.length-1)=="/")return s(me.slice(0,-1));var Ne=me.lastIndexOf("/");return Ne===-1?me:me.slice(Ne+1)}function a(me,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var ve=Ne.getHours();ve=ve<<6|Ne.getMinutes(),ve=ve<<5|Ne.getSeconds()>>>1,me.write_shift(2,ve);var Ee=Ne.getFullYear()-1980;Ee=Ee<<4|Ne.getMonth()+1,Ee=Ee<<5|Ne.getDate(),me.write_shift(2,Ee)}function i(me){var Ne=me.read_shift(2)&65535,ve=me.read_shift(2)&65535,Ee=new Date,ue=ve&31;ve>>>=5;var he=ve&15;ve>>>=4,Ee.setMilliseconds(0),Ee.setFullYear(ve+1980),Ee.setMonth(he-1),Ee.setDate(ue);var Pe=Ne&31;Ne>>>=5;var tt=Ne&63;return Ne>>>=6,Ee.setHours(Ne),Ee.setMinutes(tt),Ee.setSeconds(Pe<<1),Ee}function o(me){Xi(me,0);for(var Ne={},ve=0;me.l<=me.length-4;){var Ee=me.read_shift(2),ue=me.read_shift(2),he=me.l+ue,Pe={};switch(Ee){case 21589:ve=me.read_shift(1),ve&1&&(Pe.mtime=me.read_shift(4)),ue>5&&(ve&2&&(Pe.atime=me.read_shift(4)),ve&4&&(Pe.ctime=me.read_shift(4))),Pe.mtime&&(Pe.mt=new Date(Pe.mtime*1e3));break}me.l=he,Ne[Ee]=Pe}return Ne}var c;function u(){return c||(c={})}function d(me,Ne){if(me[0]==80&&me[1]==75)return we(me,Ne);if((me[0]|32)==109&&(me[1]|32)==105)return st(me,Ne);if(me.length<512)throw new Error("CFB file size "+me.length+" < 512");var ve=3,Ee=512,ue=0,he=0,Pe=0,tt=0,Ge=0,Ye=[],ct=me.slice(0,512);Xi(ct,0);var de=f(ct);switch(ve=de[0],ve){case 3:Ee=512;break;case 4:Ee=4096;break;case 0:if(de[1]==0)return we(me,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+ve)}Ee!==512&&(ct=me.slice(0,Ee),Xi(ct,28));var _e=me.slice(0,Ee);h(ct,ve);var Fe=ct.read_shift(4,"i");if(ve===3&&Fe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Fe);ct.l+=4,Pe=ct.read_shift(4,"i"),ct.l+=4,ct.chk("00100000","Mini Stream Cutoff Size: "),tt=ct.read_shift(4,"i"),ue=ct.read_shift(4,"i"),Ge=ct.read_shift(4,"i"),he=ct.read_shift(4,"i");for(var De=-1,qe=0;qe<109&&(De=ct.read_shift(4,"i"),!(De<0));++qe)Ye[qe]=De;var zt=g(me,Ee);v(Ge,he,zt,Ee,Ye);var _r=w(zt,Pe,Ye,Ee);_r[Pe].name="!Directory",ue>0&&tt!==Y&&(_r[tt].name="!MiniFAT"),_r[Ye[0]].name="!FAT",_r.fat_addrs=Ye,_r.ssz=Ee;var jr={},pt=[],or=[],Wr=[];_(Pe,_r,zt,pt,ue,jr,or,tt),p(or,Wr,pt),pt.shift();var Fr={FileIndex:or,FullPaths:Wr};return Ne&&Ne.raw&&(Fr.raw={header:_e,sectors:zt}),Fr}function f(me){if(me[me.l]==80&&me[me.l+1]==75)return[0,0];me.chk(re,"Header Signature: "),me.l+=16;var Ne=me.read_shift(2,"u");return[me.read_shift(2,"u"),Ne]}function h(me,Ne){var ve=9;switch(me.l+=2,ve=me.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+ve);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+ve);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ve)}me.chk("0600","Mini Sector Shift: "),me.chk("000000000000","Reserved: ")}function g(me,Ne){for(var ve=Math.ceil(me.length/Ne)-1,Ee=[],ue=1;ue<ve;++ue)Ee[ue-1]=me.slice(ue*Ne,(ue+1)*Ne);return Ee[ve-1]=me.slice(ve*Ne),Ee}function p(me,Ne,ve){for(var Ee=0,ue=0,he=0,Pe=0,tt=0,Ge=ve.length,Ye=[],ct=[];Ee<Ge;++Ee)Ye[Ee]=ct[Ee]=Ee,Ne[Ee]=ve[Ee];for(;tt<ct.length;++tt)Ee=ct[tt],ue=me[Ee].L,he=me[Ee].R,Pe=me[Ee].C,Ye[Ee]===Ee&&(ue!==-1&&Ye[ue]!==ue&&(Ye[Ee]=Ye[ue]),he!==-1&&Ye[he]!==he&&(Ye[Ee]=Ye[he])),Pe!==-1&&(Ye[Pe]=Ee),ue!==-1&&Ee!=Ye[Ee]&&(Ye[ue]=Ye[Ee],ct.lastIndexOf(ue)<tt&&ct.push(ue)),he!==-1&&Ee!=Ye[Ee]&&(Ye[he]=Ye[Ee],ct.lastIndexOf(he)<tt&&ct.push(he));for(Ee=1;Ee<Ge;++Ee)Ye[Ee]===Ee&&(he!==-1&&Ye[he]!==he?Ye[Ee]=Ye[he]:ue!==-1&&Ye[ue]!==ue&&(Ye[Ee]=Ye[ue]));for(Ee=1;Ee<Ge;++Ee)if(me[Ee].type!==0){if(tt=Ee,tt!=Ye[tt])do tt=Ye[tt],Ne[Ee]=Ne[tt]+"/"+Ne[Ee];while(tt!==0&&Ye[tt]!==-1&&tt!=Ye[tt]);Ye[Ee]=-1}for(Ne[0]+="/",Ee=1;Ee<Ge;++Ee)me[Ee].type!==2&&(Ne[Ee]+="/")}function y(me,Ne,ve){for(var Ee=me.start,ue=me.size,he=[],Pe=Ee;ve&&ue>0&&Pe>=0;)he.push(Ne.slice(Pe*V,Pe*V+V)),ue-=V,Pe=sm(ve,Pe*4);return he.length===0?$t(0):Ni(he).slice(0,me.size)}function v(me,Ne,ve,Ee,ue){var he=Y;if(me===Y){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(me!==-1){var Pe=ve[me],tt=(Ee>>>2)-1;if(!Pe)return;for(var Ge=0;Ge<tt&&(he=sm(Pe,Ge*4))!==Y;++Ge)ue.push(he);v(sm(Pe,Ee-4),Ne-1,ve,Ee,ue)}}function C(me,Ne,ve,Ee,ue){var he=[],Pe=[];ue||(ue=[]);var tt=Ee-1,Ge=0,Ye=0;for(Ge=Ne;Ge>=0;){ue[Ge]=!0,he[he.length]=Ge,Pe.push(me[Ge]);var ct=ve[Math.floor(Ge*4/Ee)];if(Ye=Ge*4&tt,Ee<4+Ye)throw new Error("FAT boundary crossed: "+Ge+" 4 "+Ee);if(!me[ct])break;Ge=sm(me[ct],Ye)}return{nodes:he,data:UO([Pe])}}function w(me,Ne,ve,Ee){var ue=me.length,he=[],Pe=[],tt=[],Ge=[],Ye=Ee-1,ct=0,de=0,_e=0,Fe=0;for(ct=0;ct<ue;++ct)if(tt=[],_e=ct+Ne,_e>=ue&&(_e-=ue),!Pe[_e]){Ge=[];var De=[];for(de=_e;de>=0;){De[de]=!0,Pe[de]=!0,tt[tt.length]=de,Ge.push(me[de]);var qe=ve[Math.floor(de*4/Ee)];if(Fe=de*4&Ye,Ee<4+Fe)throw new Error("FAT boundary crossed: "+de+" 4 "+Ee);if(!me[qe]||(de=sm(me[qe],Fe),De[de]))break}he[_e]={nodes:tt,data:UO([Ge])}}return he}function _(me,Ne,ve,Ee,ue,he,Pe,tt){for(var Ge=0,Ye=Ee.length?2:0,ct=Ne[me].data,de=0,_e=0,Fe;de<ct.length;de+=128){var De=ct.slice(de,de+128);Xi(De,64),_e=De.read_shift(2),Fe=yN(De,0,_e-Ye),Ee.push(Fe);var qe={name:Fe,type:De.read_shift(1),color:De.read_shift(1),L:De.read_shift(4,"i"),R:De.read_shift(4,"i"),C:De.read_shift(4,"i"),clsid:De.read_shift(16),state:De.read_shift(4,"i"),start:0,size:0},zt=De.read_shift(2)+De.read_shift(2)+De.read_shift(2)+De.read_shift(2);zt!==0&&(qe.ct=T(De,De.l-8));var _r=De.read_shift(2)+De.read_shift(2)+De.read_shift(2)+De.read_shift(2);_r!==0&&(qe.mt=T(De,De.l-8)),qe.start=De.read_shift(4,"i"),qe.size=De.read_shift(4,"i"),qe.size<0&&qe.start<0&&(qe.size=qe.type=0,qe.start=Y,qe.name=""),qe.type===5?(Ge=qe.start,ue>0&&Ge!==Y&&(Ne[Ge].name="!StreamData")):qe.size>=4096?(qe.storage="fat",Ne[qe.start]===void 0&&(Ne[qe.start]=C(ve,qe.start,Ne.fat_addrs,Ne.ssz)),Ne[qe.start].name=qe.name,qe.content=Ne[qe.start].data.slice(0,qe.size)):(qe.storage="minifat",qe.size<0?qe.size=0:Ge!==Y&&qe.start!==Y&&Ne[Ge]&&(qe.content=y(qe,Ne[Ge].data,(Ne[tt]||{}).data))),qe.content&&Xi(qe.content,0),he[Fe]=qe,Pe.push(qe)}}function T(me,Ne){return new Date((Rl(me,Ne+4)/1e7*Math.pow(2,32)+Rl(me,Ne)/1e7-11644473600)*1e3)}function E(me,Ne){return u(),d(c.readFileSync(me),Ne)}function A(me,Ne){var ve=Ne&&Ne.type;switch(ve||Fn&&Buffer.isBuffer(me)&&(ve="buffer"),ve||"base64"){case"file":return E(me,Ne);case"base64":return d(Bl(Gl(me)),Ne);case"binary":return d(Bl(me),Ne)}return d(me,Ne)}function F(me,Ne){var ve=Ne||{},Ee=ve.root||"Root Entry";if(me.FullPaths||(me.FullPaths=[]),me.FileIndex||(me.FileIndex=[]),me.FullPaths.length!==me.FileIndex.length)throw new Error("inconsistent CFB structure");me.FullPaths.length===0&&(me.FullPaths[0]=Ee+"/",me.FileIndex[0]={name:Ee,type:5}),ve.CLSID&&(me.FileIndex[0].clsid=ve.CLSID),j(me)}function j(me){var Ne="Sh33tJ5";if(!Yr.find(me,"/"+Ne)){var ve=$t(4);ve[0]=55,ve[1]=ve[3]=50,ve[2]=54,me.FileIndex.push({name:Ne,type:2,content:ve,size:4,L:69,R:69,C:69}),me.FullPaths.push(me.FullPaths[0]+Ne),P(me)}}function P(me,Ne){F(me);for(var ve=!1,Ee=!1,ue=me.FullPaths.length-1;ue>=0;--ue){var he=me.FileIndex[ue];switch(he.type){case 0:Ee?ve=!0:(me.FileIndex.pop(),me.FullPaths.pop());break;case 1:case 2:case 5:Ee=!0,isNaN(he.R*he.L*he.C)&&(ve=!0),he.R>-1&&he.L>-1&&he.R==he.L&&(ve=!0);break;default:ve=!0;break}}if(!(!ve&&!Ne)){var Pe=new Date(1987,1,19),tt=0,Ge=Object.create?Object.create(null):{},Ye=[];for(ue=0;ue<me.FullPaths.length;++ue)Ge[me.FullPaths[ue]]=!0,me.FileIndex[ue].type!==0&&Ye.push([me.FullPaths[ue],me.FileIndex[ue]]);for(ue=0;ue<Ye.length;++ue){var ct=n(Ye[ue][0]);Ee=Ge[ct],Ee||(Ye.push([ct,{name:s(ct).replace("/",""),type:1,clsid:ee,ct:Pe,mt:Pe,content:null}]),Ge[ct]=!0)}for(Ye.sort(function(Fe,De){return r(Fe[0],De[0])}),me.FullPaths=[],me.FileIndex=[],ue=0;ue<Ye.length;++ue)me.FullPaths[ue]=Ye[ue][0],me.FileIndex[ue]=Ye[ue][1];for(ue=0;ue<Ye.length;++ue){var de=me.FileIndex[ue],_e=me.FullPaths[ue];if(de.name=s(_e).replace("/",""),de.L=de.R=de.C=-(de.color=1),de.size=de.content?de.content.length:0,de.start=0,de.clsid=de.clsid||ee,ue===0)de.C=Ye.length>1?1:-1,de.size=0,de.type=5;else if(_e.slice(-1)=="/"){for(tt=ue+1;tt<Ye.length&&n(me.FullPaths[tt])!=_e;++tt);for(de.C=tt>=Ye.length?-1:tt,tt=ue+1;tt<Ye.length&&n(me.FullPaths[tt])!=n(_e);++tt);de.R=tt>=Ye.length?-1:tt,de.type=1}else n(me.FullPaths[ue+1]||"")==n(_e)&&(de.R=ue+1),de.type=2}}}function D(me,Ne){var ve=Ne||{};if(ve.fileType=="mad")return Vt(me,ve);switch(P(me),ve.fileType){case"zip":return Ie(me,ve)}var Ee=(function(Fe){for(var De=0,qe=0,zt=0;zt<Fe.FileIndex.length;++zt){var _r=Fe.FileIndex[zt];if(_r.content){var jr=_r.content.length;jr>0&&(jr<4096?De+=jr+63>>6:qe+=jr+511>>9)}}for(var pt=Fe.FullPaths.length+3>>2,or=De+7>>3,Wr=De+127>>7,Fr=or+qe+pt+Wr,Tr=Fr+127>>7,Gr=Tr<=109?0:Math.ceil((Tr-109)/127);Fr+Tr+Gr+127>>7>Tr;)Gr=++Tr<=109?0:Math.ceil((Tr-109)/127);var Lr=[1,Gr,Tr,Wr,pt,qe,De,0];return Fe.FileIndex[0].size=De<<6,Lr[7]=(Fe.FileIndex[0].start=Lr[0]+Lr[1]+Lr[2]+Lr[3]+Lr[4]+Lr[5])+(Lr[6]+7>>3),Lr})(me),ue=$t(Ee[7]<<9),he=0,Pe=0;{for(he=0;he<8;++he)ue.write_shift(1,te[he]);for(he=0;he<8;++he)ue.write_shift(2,0);for(ue.write_shift(2,62),ue.write_shift(2,3),ue.write_shift(2,65534),ue.write_shift(2,9),ue.write_shift(2,6),he=0;he<3;++he)ue.write_shift(2,0);for(ue.write_shift(4,0),ue.write_shift(4,Ee[2]),ue.write_shift(4,Ee[0]+Ee[1]+Ee[2]+Ee[3]-1),ue.write_shift(4,0),ue.write_shift(4,4096),ue.write_shift(4,Ee[3]?Ee[0]+Ee[1]+Ee[2]-1:Y),ue.write_shift(4,Ee[3]),ue.write_shift(-4,Ee[1]?Ee[0]-1:Y),ue.write_shift(4,Ee[1]),he=0;he<109;++he)ue.write_shift(-4,he<Ee[2]?Ee[1]+he:-1)}if(Ee[1])for(Pe=0;Pe<Ee[1];++Pe){for(;he<236+Pe*127;++he)ue.write_shift(-4,he<Ee[2]?Ee[1]+he:-1);ue.write_shift(-4,Pe===Ee[1]-1?Y:Pe+1)}var tt=function(Fe){for(Pe+=Fe;he<Pe-1;++he)ue.write_shift(-4,he+1);Fe&&(++he,ue.write_shift(-4,Y))};for(Pe=he=0,Pe+=Ee[1];he<Pe;++he)ue.write_shift(-4,L.DIFSECT);for(Pe+=Ee[2];he<Pe;++he)ue.write_shift(-4,L.FATSECT);tt(Ee[3]),tt(Ee[4]);for(var Ge=0,Ye=0,ct=me.FileIndex[0];Ge<me.FileIndex.length;++Ge)ct=me.FileIndex[Ge],ct.content&&(Ye=ct.content.length,!(Ye<4096)&&(ct.start=Pe,tt(Ye+511>>9)));for(tt(Ee[6]+7>>3);ue.l&511;)ue.write_shift(-4,L.ENDOFCHAIN);for(Pe=he=0,Ge=0;Ge<me.FileIndex.length;++Ge)ct=me.FileIndex[Ge],ct.content&&(Ye=ct.content.length,!(!Ye||Ye>=4096)&&(ct.start=Pe,tt(Ye+63>>6)));for(;ue.l&511;)ue.write_shift(-4,L.ENDOFCHAIN);for(he=0;he<Ee[4]<<2;++he){var de=me.FullPaths[he];if(!de||de.length===0){for(Ge=0;Ge<17;++Ge)ue.write_shift(4,0);for(Ge=0;Ge<3;++Ge)ue.write_shift(4,-1);for(Ge=0;Ge<12;++Ge)ue.write_shift(4,0);continue}ct=me.FileIndex[he],he===0&&(ct.start=ct.size?ct.start-1:Y);var _e=he===0&&ve.root||ct.name;if(Ye=2*(_e.length+1),ue.write_shift(64,_e,"utf16le"),ue.write_shift(2,Ye),ue.write_shift(1,ct.type),ue.write_shift(1,ct.color),ue.write_shift(-4,ct.L),ue.write_shift(-4,ct.R),ue.write_shift(-4,ct.C),ct.clsid)ue.write_shift(16,ct.clsid,"hex");else for(Ge=0;Ge<4;++Ge)ue.write_shift(4,0);ue.write_shift(4,ct.state||0),ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(4,0),ue.write_shift(4,ct.start),ue.write_shift(4,ct.size),ue.write_shift(4,0)}for(he=1;he<me.FileIndex.length;++he)if(ct=me.FileIndex[he],ct.size>=4096)if(ue.l=ct.start+1<<9,Fn&&Buffer.isBuffer(ct.content))ct.content.copy(ue,ue.l,0,ct.size),ue.l+=ct.size+511&-512;else{for(Ge=0;Ge<ct.size;++Ge)ue.write_shift(1,ct.content[Ge]);for(;Ge&511;++Ge)ue.write_shift(1,0)}for(he=1;he<me.FileIndex.length;++he)if(ct=me.FileIndex[he],ct.size>0&&ct.size<4096)if(Fn&&Buffer.isBuffer(ct.content))ct.content.copy(ue,ue.l,0,ct.size),ue.l+=ct.size+63&-64;else{for(Ge=0;Ge<ct.size;++Ge)ue.write_shift(1,ct.content[Ge]);for(;Ge&63;++Ge)ue.write_shift(1,0)}if(Fn)ue.l=ue.length;else for(;ue.l<ue.length;)ue.write_shift(1,0);return ue}function B(me,Ne){var ve=me.FullPaths.map(function(Ge){return Ge.toUpperCase()}),Ee=ve.map(function(Ge){var Ye=Ge.split("/");return Ye[Ye.length-(Ge.slice(-1)=="/"?2:1)]}),ue=!1;Ne.charCodeAt(0)===47?(ue=!0,Ne=ve[0].slice(0,-1)+Ne):ue=Ne.indexOf("/")!==-1;var he=Ne.toUpperCase(),Pe=ue===!0?ve.indexOf(he):Ee.indexOf(he);if(Pe!==-1)return me.FileIndex[Pe];var tt=!he.match(Wy);for(he=he.replace(Ko,""),tt&&(he=he.replace(Wy,"!")),Pe=0;Pe<ve.length;++Pe)if((tt?ve[Pe].replace(Wy,"!"):ve[Pe]).replace(Ko,"")==he||(tt?Ee[Pe].replace(Wy,"!"):Ee[Pe]).replace(Ko,"")==he)return me.FileIndex[Pe];return null}var V=64,Y=-2,re="d0cf11e0a1b11ae1",te=[208,207,17,224,161,177,26,225],ee="00000000000000000000000000000000",L={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Y,FREESECT:-1,HEADER_SIGNATURE:re,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Q(me,Ne,ve){u();var Ee=D(me,ve);c.writeFileSync(Ne,Ee)}function U(me){for(var Ne=new Array(me.length),ve=0;ve<me.length;++ve)Ne[ve]=String.fromCharCode(me[ve]);return Ne.join("")}function G(me,Ne){var ve=D(me,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return u(),c.writeFileSync(Ne.filename,ve),ve;case"binary":return typeof ve=="string"?ve:U(ve);case"base64":return Rv(typeof ve=="string"?ve:U(ve));case"buffer":if(Fn)return Buffer.isBuffer(ve)?ve:E0(ve);case"array":return typeof ve=="string"?Bl(ve):ve}return ve}var W;function M(me){try{var Ne=me.InflateRaw,ve=new Ne;if(ve._processChunk(new Uint8Array([3,0]),ve._finishFlushFlag),ve.bytesRead)W=me;else throw new Error("zlib does not expose bytesRead")}catch(Ee){console.error("cannot use native zlib: "+(Ee.message||Ee))}}function I(me,Ne){if(!W)return ur(me,Ne);var ve=W.InflateRaw,Ee=new ve,ue=Ee._processChunk(me.slice(me.l),Ee._finishFlushFlag);return me.l+=Ee.bytesRead,ue}function z(me){return W?W.deflateRawSync(me):rt(me)}var q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ne=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],X=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function se(me){var Ne=(me<<1|me<<11)&139536|(me<<5|me<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var ce=typeof Uint8Array<"u",pe=ce?new Uint8Array(256):[],be=0;be<256;++be)pe[be]=se(be);function oe(me,Ne){var ve=pe[me&255];return Ne<=8?ve>>>8-Ne:(ve=ve<<8|pe[me>>8&255],Ne<=16?ve>>>16-Ne:(ve=ve<<8|pe[me>>16&255],ve>>>24-Ne))}function je(me,Ne){var ve=Ne&7,Ee=Ne>>>3;return(me[Ee]|(ve<=6?0:me[Ee+1]<<8))>>>ve&3}function Re(me,Ne){var ve=Ne&7,Ee=Ne>>>3;return(me[Ee]|(ve<=5?0:me[Ee+1]<<8))>>>ve&7}function Xe(me,Ne){var ve=Ne&7,Ee=Ne>>>3;return(me[Ee]|(ve<=4?0:me[Ee+1]<<8))>>>ve&15}function ft(me,Ne){var ve=Ne&7,Ee=Ne>>>3;return(me[Ee]|(ve<=3?0:me[Ee+1]<<8))>>>ve&31}function Je(me,Ne){var ve=Ne&7,Ee=Ne>>>3;return(me[Ee]|(ve<=1?0:me[Ee+1]<<8))>>>ve&127}function Ht(me,Ne,ve){var Ee=Ne&7,ue=Ne>>>3,he=(1<<ve)-1,Pe=me[ue]>>>Ee;return ve<8-Ee||(Pe|=me[ue+1]<<8-Ee,ve<16-Ee)||(Pe|=me[ue+2]<<16-Ee,ve<24-Ee)||(Pe|=me[ue+3]<<24-Ee),Pe&he}function Ve(me,Ne,ve){var Ee=Ne&7,ue=Ne>>>3;return Ee<=5?me[ue]|=(ve&7)<<Ee:(me[ue]|=ve<<Ee&255,me[ue+1]=(ve&7)>>8-Ee),Ne+3}function at(me,Ne,ve){var Ee=Ne&7,ue=Ne>>>3;return ve=(ve&1)<<Ee,me[ue]|=ve,Ne+1}function gt(me,Ne,ve){var Ee=Ne&7,ue=Ne>>>3;return ve<<=Ee,me[ue]|=ve&255,ve>>>=8,me[ue+1]=ve,Ne+8}function Te(me,Ne,ve){var Ee=Ne&7,ue=Ne>>>3;return ve<<=Ee,me[ue]|=ve&255,ve>>>=8,me[ue+1]=ve&255,me[ue+2]=ve>>>8,Ne+16}function bt(me,Ne){var ve=me.length,Ee=2*ve>Ne?2*ve:Ne+5,ue=0;if(ve>=Ne)return me;if(Fn){var he=_O(Ee);if(me.copy)me.copy(he);else for(;ue<me.length;++ue)he[ue]=me[ue];return he}else if(ce){var Pe=new Uint8Array(Ee);if(Pe.set)Pe.set(me);else for(;ue<ve;++ue)Pe[ue]=me[ue];return Pe}return me.length=Ee,me}function Ct(me){for(var Ne=new Array(me),ve=0;ve<me;++ve)Ne[ve]=0;return Ne}function Lt(me,Ne,ve){var Ee=1,ue=0,he=0,Pe=0,tt=0,Ge=me.length,Ye=ce?new Uint16Array(32):Ct(32);for(he=0;he<32;++he)Ye[he]=0;for(he=Ge;he<ve;++he)me[he]=0;Ge=me.length;var ct=ce?new Uint16Array(Ge):Ct(Ge);for(he=0;he<Ge;++he)Ye[ue=me[he]]++,Ee<ue&&(Ee=ue),ct[he]=0;for(Ye[0]=0,he=1;he<=Ee;++he)Ye[he+16]=tt=tt+Ye[he-1]<<1;for(he=0;he<Ge;++he)tt=me[he],tt!=0&&(ct[he]=Ye[tt+16]++);var de=0;for(he=0;he<Ge;++he)if(de=me[he],de!=0)for(tt=oe(ct[he],Ee)>>Ee-de,Pe=(1<<Ee+4-de)-1;Pe>=0;--Pe)Ne[tt|Pe<<de]=de&15|he<<4;return Ee}var Yt=ce?new Uint16Array(512):Ct(512),it=ce?new Uint16Array(32):Ct(32);if(!ce){for(var xt=0;xt<512;++xt)Yt[xt]=0;for(xt=0;xt<32;++xt)it[xt]=0}(function(){for(var me=[],Ne=0;Ne<32;Ne++)me.push(5);Lt(me,it,32);var ve=[];for(Ne=0;Ne<=143;Ne++)ve.push(8);for(;Ne<=255;Ne++)ve.push(9);for(;Ne<=279;Ne++)ve.push(7);for(;Ne<=287;Ne++)ve.push(8);Lt(ve,Yt,288)})();var Mt=(function(){for(var Ne=ce?new Uint8Array(32768):[],ve=0,Ee=0;ve<X.length-1;++ve)for(;Ee<X[ve+1];++Ee)Ne[Ee]=ve;for(;Ee<32768;++Ee)Ne[Ee]=29;var ue=ce?new Uint8Array(259):[];for(ve=0,Ee=0;ve<ne.length-1;++ve)for(;Ee<ne[ve+1];++Ee)ue[Ee]=ve;function he(tt,Ge){for(var Ye=0;Ye<tt.length;){var ct=Math.min(65535,tt.length-Ye),de=Ye+ct==tt.length;for(Ge.write_shift(1,+de),Ge.write_shift(2,ct),Ge.write_shift(2,~ct&65535);ct-- >0;)Ge[Ge.l++]=tt[Ye++]}return Ge.l}function Pe(tt,Ge){for(var Ye=0,ct=0,de=ce?new Uint16Array(32768):[];ct<tt.length;){var _e=Math.min(65535,tt.length-ct);if(_e<10){for(Ye=Ve(Ge,Ye,+(ct+_e==tt.length)),Ye&7&&(Ye+=8-(Ye&7)),Ge.l=Ye/8|0,Ge.write_shift(2,_e),Ge.write_shift(2,~_e&65535);_e-- >0;)Ge[Ge.l++]=tt[ct++];Ye=Ge.l*8;continue}Ye=Ve(Ge,Ye,+(ct+_e==tt.length)+2);for(var Fe=0;_e-- >0;){var De=tt[ct];Fe=(Fe<<5^De)&32767;var qe=-1,zt=0;if((qe=de[Fe])&&(qe|=ct&-32768,qe>ct&&(qe-=32768),qe<ct))for(;tt[qe+zt]==tt[ct+zt]&&zt<250;)++zt;if(zt>2){De=ue[zt],De<=22?Ye=gt(Ge,Ye,pe[De+1]>>1)-1:(gt(Ge,Ye,3),Ye+=5,gt(Ge,Ye,pe[De-23]>>5),Ye+=3);var _r=De<8?0:De-4>>2;_r>0&&(Te(Ge,Ye,zt-ne[De]),Ye+=_r),De=Ne[ct-qe],Ye=gt(Ge,Ye,pe[De]>>3),Ye-=3;var jr=De<4?0:De-2>>1;jr>0&&(Te(Ge,Ye,ct-qe-X[De]),Ye+=jr);for(var pt=0;pt<zt;++pt)de[Fe]=ct&32767,Fe=(Fe<<5^tt[ct])&32767,++ct;_e-=zt-1}else De<=143?De=De+48:Ye=at(Ge,Ye,1),Ye=gt(Ge,Ye,pe[De]),de[Fe]=ct&32767,++ct}Ye=gt(Ge,Ye,0)-1}return Ge.l=(Ye+7)/8|0,Ge.l}return function(Ge,Ye){return Ge.length<8?he(Ge,Ye):Pe(Ge,Ye)}})();function rt(me){var Ne=$t(50+Math.floor(me.length*1.1)),ve=Mt(me,Ne);return Ne.slice(0,ve)}var Qe=ce?new Uint16Array(32768):Ct(32768),It=ce?new Uint16Array(32768):Ct(32768),Tt=ce?new Uint16Array(128):Ct(128),Rt=1,cr=1;function hr(me,Ne){var ve=ft(me,Ne)+257;Ne+=5;var Ee=ft(me,Ne)+1;Ne+=5;var ue=Xe(me,Ne)+4;Ne+=4;for(var he=0,Pe=ce?new Uint8Array(19):Ct(19),tt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ge=1,Ye=ce?new Uint8Array(8):Ct(8),ct=ce?new Uint8Array(8):Ct(8),de=Pe.length,_e=0;_e<ue;++_e)Pe[q[_e]]=he=Re(me,Ne),Ge<he&&(Ge=he),Ye[he]++,Ne+=3;var Fe=0;for(Ye[0]=0,_e=1;_e<=Ge;++_e)ct[_e]=Fe=Fe+Ye[_e-1]<<1;for(_e=0;_e<de;++_e)(Fe=Pe[_e])!=0&&(tt[_e]=ct[Fe]++);var De=0;for(_e=0;_e<de;++_e)if(De=Pe[_e],De!=0){Fe=pe[tt[_e]]>>8-De;for(var qe=(1<<7-De)-1;qe>=0;--qe)Tt[Fe|qe<<De]=De&7|_e<<3}var zt=[];for(Ge=1;zt.length<ve+Ee;)switch(Fe=Tt[Je(me,Ne)],Ne+=Fe&7,Fe>>>=3){case 16:for(he=3+je(me,Ne),Ne+=2,Fe=zt[zt.length-1];he-- >0;)zt.push(Fe);break;case 17:for(he=3+Re(me,Ne),Ne+=3;he-- >0;)zt.push(0);break;case 18:for(he=11+Je(me,Ne),Ne+=7;he-- >0;)zt.push(0);break;default:zt.push(Fe),Ge<Fe&&(Ge=Fe);break}var _r=zt.slice(0,ve),jr=zt.slice(ve);for(_e=ve;_e<286;++_e)_r[_e]=0;for(_e=Ee;_e<30;++_e)jr[_e]=0;return Rt=Lt(_r,Qe,286),cr=Lt(jr,It,30),Ne}function Cr(me,Ne){if(me[0]==3&&!(me[1]&3))return[Jf(Ne),2];for(var ve=0,Ee=0,ue=_O(Ne||1<<18),he=0,Pe=ue.length>>>0,tt=0,Ge=0;(Ee&1)==0;){if(Ee=Re(me,ve),ve+=3,Ee>>>1)Ee>>1==1?(tt=9,Ge=5):(ve=hr(me,ve),tt=Rt,Ge=cr);else{ve&7&&(ve+=8-(ve&7));var Ye=me[ve>>>3]|me[(ve>>>3)+1]<<8;if(ve+=32,Ye>0)for(!Ne&&Pe<he+Ye&&(ue=bt(ue,he+Ye),Pe=ue.length);Ye-- >0;)ue[he++]=me[ve>>>3],ve+=8;continue}for(;;){!Ne&&Pe<he+32767&&(ue=bt(ue,he+32767),Pe=ue.length);var ct=Ht(me,ve,tt),de=Ee>>>1==1?Yt[ct]:Qe[ct];if(ve+=de&15,de>>>=4,(de>>>8&255)===0)ue[he++]=de;else{if(de==256)break;de-=257;var _e=de<8?0:de-4>>2;_e>5&&(_e=0);var Fe=he+ne[de];_e>0&&(Fe+=Ht(me,ve,_e),ve+=_e),ct=Ht(me,ve,Ge),de=Ee>>>1==1?it[ct]:It[ct],ve+=de&15,de>>>=4;var De=de<4?0:de-2>>1,qe=X[de];for(De>0&&(qe+=Ht(me,ve,De),ve+=De),!Ne&&Pe<Fe&&(ue=bt(ue,Fe+100),Pe=ue.length);he<Fe;)ue[he]=ue[he-qe],++he}}}return Ne?[ue,ve+7>>>3]:[ue.slice(0,he),ve+7>>>3]}function ur(me,Ne){var ve=me.slice(me.l||0),Ee=Cr(ve,Ne);return me.l+=Ee[1],Ee[0]}function Sr(me,Ne){if(me)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function we(me,Ne){var ve=me;Xi(ve,0);var Ee=[],ue=[],he={FileIndex:Ee,FullPaths:ue};F(he,{root:Ne.root});for(var Pe=ve.length-4;(ve[Pe]!=80||ve[Pe+1]!=75||ve[Pe+2]!=5||ve[Pe+3]!=6)&&Pe>=0;)--Pe;ve.l=Pe+4,ve.l+=4;var tt=ve.read_shift(2);ve.l+=6;var Ge=ve.read_shift(4);for(ve.l=Ge,Pe=0;Pe<tt;++Pe){ve.l+=20;var Ye=ve.read_shift(4),ct=ve.read_shift(4),de=ve.read_shift(2),_e=ve.read_shift(2),Fe=ve.read_shift(2);ve.l+=8;var De=ve.read_shift(4),qe=o(ve.slice(ve.l+de,ve.l+de+_e));ve.l+=de+_e+Fe;var zt=ve.l;ve.l=De+4,Me(ve,Ye,ct,he,qe),ve.l=zt}return he}function Me(me,Ne,ve,Ee,ue){me.l+=2;var he=me.read_shift(2),Pe=me.read_shift(2),tt=i(me);if(he&8257)throw new Error("Unsupported ZIP encryption");for(var Ge=me.read_shift(4),Ye=me.read_shift(4),ct=me.read_shift(4),de=me.read_shift(2),_e=me.read_shift(2),Fe="",De=0;De<de;++De)Fe+=String.fromCharCode(me[me.l++]);if(_e){var qe=o(me.slice(me.l,me.l+_e));(qe[21589]||{}).mt&&(tt=qe[21589].mt),((ue||{})[21589]||{}).mt&&(tt=ue[21589].mt)}me.l+=_e;var zt=me.slice(me.l,me.l+Ye);switch(Pe){case 8:zt=I(me,ct);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Pe)}var _r=!1;he&8&&(Ge=me.read_shift(4),Ge==134695760&&(Ge=me.read_shift(4),_r=!0),Ye=me.read_shift(4),ct=me.read_shift(4)),Ye!=Ne&&Sr(_r,"Bad compressed size: "+Ne+" != "+Ye),ct!=ve&&Sr(_r,"Bad uncompressed size: "+ve+" != "+ct),gr(Ee,Fe,zt,{unsafe:!0,mt:tt})}function Ie(me,Ne){var ve=Ne||{},Ee=[],ue=[],he=$t(1),Pe=ve.compression?8:0,tt=0,Ge=0,Ye=0,ct=0,de=0,_e=me.FullPaths[0],Fe=_e,De=me.FileIndex[0],qe=[],zt=0;for(Ge=1;Ge<me.FullPaths.length;++Ge)if(Fe=me.FullPaths[Ge].slice(_e.length),De=me.FileIndex[Ge],!(!De.size||!De.content||Fe=="Sh33tJ5")){var _r=ct,jr=$t(Fe.length);for(Ye=0;Ye<Fe.length;++Ye)jr.write_shift(1,Fe.charCodeAt(Ye)&127);jr=jr.slice(0,jr.l),qe[de]=she.buf(De.content,0);var pt=De.content;Pe==8&&(pt=z(pt)),he=$t(30),he.write_shift(4,67324752),he.write_shift(2,20),he.write_shift(2,tt),he.write_shift(2,Pe),De.mt?a(he,De.mt):he.write_shift(4,0),he.write_shift(-4,qe[de]),he.write_shift(4,pt.length),he.write_shift(4,De.content.length),he.write_shift(2,jr.length),he.write_shift(2,0),ct+=he.length,Ee.push(he),ct+=jr.length,Ee.push(jr),ct+=pt.length,Ee.push(pt),he=$t(46),he.write_shift(4,33639248),he.write_shift(2,0),he.write_shift(2,20),he.write_shift(2,tt),he.write_shift(2,Pe),he.write_shift(4,0),he.write_shift(-4,qe[de]),he.write_shift(4,pt.length),he.write_shift(4,De.content.length),he.write_shift(2,jr.length),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(4,0),he.write_shift(4,_r),zt+=he.l,ue.push(he),zt+=jr.length,ue.push(jr),++de}return he=$t(22),he.write_shift(4,101010256),he.write_shift(2,0),he.write_shift(2,0),he.write_shift(2,de),he.write_shift(2,de),he.write_shift(4,zt),he.write_shift(4,ct),he.write_shift(2,0),Ni([Ni(Ee),Ni(ue),he])}var Ce={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ze(me,Ne){if(me.ctype)return me.ctype;var ve=me.name||"",Ee=ve.match(/\.([^\.]+)$/);return Ee&&Ce[Ee[1]]||Ne&&(Ee=(ve=Ne).match(/[\.\\]([^\.\\])+$/),Ee&&Ce[Ee[1]])?Ce[Ee[1]]:"application/octet-stream"}function wt(me){for(var Ne=Rv(me),ve=[],Ee=0;Ee<Ne.length;Ee+=76)ve.push(Ne.slice(Ee,Ee+76));return ve.join(`\r
`)+`\r
`}function Nt(me){var Ne=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ye){var ct=Ye.charCodeAt(0).toString(16).toUpperCase();return"="+(ct.length==1?"0"+ct:ct)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ve=[],Ee=Ne.split(`\r
`),ue=0;ue<Ee.length;++ue){var he=Ee[ue];if(he.length==0){ve.push("");continue}for(var Pe=0;Pe<he.length;){var tt=76,Ge=he.slice(Pe,Pe+tt);Ge.charAt(tt-1)=="="?tt--:Ge.charAt(tt-2)=="="?tt-=2:Ge.charAt(tt-3)=="="&&(tt-=3),Ge=he.slice(Pe,Pe+tt),Pe+=tt,Pe<he.length&&(Ge+="="),ve.push(Ge)}}return ve.join(`\r
`)}function Oe(me){for(var Ne=[],ve=0;ve<me.length;++ve){for(var Ee=me[ve];ve<=me.length&&Ee.charAt(Ee.length-1)=="=";)Ee=Ee.slice(0,Ee.length-1)+me[++ve];Ne.push(Ee)}for(var ue=0;ue<Ne.length;++ue)Ne[ue]=Ne[ue].replace(/[=][0-9A-Fa-f]{2}/g,function(he){return String.fromCharCode(parseInt(he.slice(1),16))});return Bl(Ne.join(`\r
`))}function Ke(me,Ne,ve){for(var Ee="",ue="",he="",Pe,tt=0;tt<10;++tt){var Ge=Ne[tt];if(!Ge||Ge.match(/^\s*$/))break;var Ye=Ge.match(/^(.*?):\s*([^\s].*)$/);if(Ye)switch(Ye[1].toLowerCase()){case"content-location":Ee=Ye[2].trim();break;case"content-type":he=Ye[2].trim();break;case"content-transfer-encoding":ue=Ye[2].trim();break}}switch(++tt,ue.toLowerCase()){case"base64":Pe=Bl(Gl(Ne.slice(tt).join("")));break;case"quoted-printable":Pe=Oe(Ne.slice(tt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ue)}var ct=gr(me,Ee.slice(ve.length),Pe,{unsafe:!0});he&&(ct.ctype=he)}function st(me,Ne){if(U(me.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ve=Ne&&Ne.root||"",Ee=(Fn&&Buffer.isBuffer(me)?me.toString("binary"):U(me)).split(`\r
`),ue=0,he="";for(ue=0;ue<Ee.length;++ue)if(he=Ee[ue],!!/^Content-Location:/i.test(he)&&(he=he.slice(he.indexOf("file")),ve||(ve=he.slice(0,he.lastIndexOf("/")+1)),he.slice(0,ve.length)!=ve))for(;ve.length>0&&(ve=ve.slice(0,ve.length-1),ve=ve.slice(0,ve.lastIndexOf("/")+1),he.slice(0,ve.length)!=ve););var Pe=(Ee[1]||"").match(/boundary="(.*?)"/);if(!Pe)throw new Error("MAD cannot find boundary");var tt="--"+(Pe[1]||""),Ge=[],Ye=[],ct={FileIndex:Ge,FullPaths:Ye};F(ct);var de,_e=0;for(ue=0;ue<Ee.length;++ue){var Fe=Ee[ue];Fe!==tt&&Fe!==tt+"--"||(_e++&&Ke(ct,Ee.slice(de,ue),ve),de=ue)}return ct}function Vt(me,Ne){var ve=Ne||{},Ee=ve.boundary||"SheetJS";Ee="------="+Ee;for(var ue=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ee.slice(2)+'"',"","",""],he=me.FullPaths[0],Pe=he,tt=me.FileIndex[0],Ge=1;Ge<me.FullPaths.length;++Ge)if(Pe=me.FullPaths[Ge].slice(he.length),tt=me.FileIndex[Ge],!(!tt.size||!tt.content||Pe=="Sh33tJ5")){Pe=Pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(zt){return"_x"+zt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(zt){return"_u"+zt.charCodeAt(0).toString(16)+"_"});for(var Ye=tt.content,ct=Fn&&Buffer.isBuffer(Ye)?Ye.toString("binary"):U(Ye),de=0,_e=Math.min(1024,ct.length),Fe=0,De=0;De<=_e;++De)(Fe=ct.charCodeAt(De))>=32&&Fe<128&&++de;var qe=de>=_e*4/5;ue.push(Ee),ue.push("Content-Location: "+(ve.root||"file:///C:/SheetJS/")+Pe),ue.push("Content-Transfer-Encoding: "+(qe?"quoted-printable":"base64")),ue.push("Content-Type: "+Ze(tt,Pe)),ue.push(""),ue.push(qe?Nt(ct):wt(ct))}return ue.push(Ee+`--\r
`),ue.join(`\r
`)}function qt(me){var Ne={};return F(Ne,me),Ne}function gr(me,Ne,ve,Ee){var ue=Ee&&Ee.unsafe;ue||F(me);var he=!ue&&Yr.find(me,Ne);if(!he){var Pe=me.FullPaths[0];Ne.slice(0,Pe.length)==Pe?Pe=Ne:(Pe.slice(-1)!="/"&&(Pe+="/"),Pe=(Pe+Ne).replace("//","/")),he={name:s(Ne),type:2},me.FileIndex.push(he),me.FullPaths.push(Pe),ue||Yr.utils.cfb_gc(me)}return he.content=ve,he.size=ve?ve.length:0,Ee&&(Ee.CLSID&&(he.clsid=Ee.CLSID),Ee.mt&&(he.mt=Ee.mt),Ee.ct&&(he.ct=Ee.ct)),he}function Vr(me,Ne){F(me);var ve=Yr.find(me,Ne);if(ve){for(var Ee=0;Ee<me.FileIndex.length;++Ee)if(me.FileIndex[Ee]==ve)return me.FileIndex.splice(Ee,1),me.FullPaths.splice(Ee,1),!0}return!1}function Nr(me,Ne,ve){F(me);var Ee=Yr.find(me,Ne);if(Ee){for(var ue=0;ue<me.FileIndex.length;++ue)if(me.FileIndex[ue]==Ee)return me.FileIndex[ue].name=s(ve),me.FullPaths[ue]=ve,!0}return!1}function dn(me){P(me,!0)}return t.find=B,t.read=A,t.parse=d,t.write=G,t.writeFile=Q,t.utils={cfb_new:qt,cfb_add:gr,cfb_del:Vr,cfb_mov:Nr,cfb_gc:dn,ReadShift:sv,CheckField:dG,prep_blob:Xi,bconcat:Ni,use_zlib:M,_deflateRaw:rt,_inflateRaw:ur,consts:L},t})();function ahe(e){return typeof e=="string"?p3(e):Array.isArray(e)?Pfe(e):e}function A2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=p3(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Xu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([ahe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=uh(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function ihe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function va(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function jO(e,t){for(var r=[],n=va(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function y3(e){for(var t=[],r=va(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function v3(e){for(var t=[],r=va(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function ohe(e){for(var t=[],r=va(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var q4=new Date(1899,11,30,0,0,0);function ui(e,t){var r=e.getTime(),n=q4.getTime()+(e.getTimezoneOffset()-q4.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var HH=new Date,lhe=q4.getTime()+(HH.getTimezoneOffset()-q4.getTimezoneOffset())*6e4,PO=HH.getTimezoneOffset();function b3(e){var t=new Date;return t.setTime(e*24*60*60*1e3+lhe),t.getTimezoneOffset()!==PO&&t.setTime(t.getTime()+(t.getTimezoneOffset()-PO)*6e4),t}function che(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[a],10)}return t}var FO=new Date("2017-02-19T19:06:09.000Z"),GH=isNaN(FO.getFullYear())?new Date("2/19/17"):FO,uhe=GH.getFullYear()==2017;function Ls(e,t){var r=new Date(e);if(uhe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(GH.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Um(e,t){if(Fn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Xu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Xu(FH(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Xu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Xu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function Bs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Bs(e[r]));return t}function xa(e,t){for(var r="";r.length<t;)r+=e;return r}function du(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(t=Number(n)))?t/r:t}var dhe=["january","february","march","april","may","june","july","august","september","october","november","december"];function e1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),a=t.getDate();if(isNaN(a))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&dhe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var fhe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}})();function VH(e){return e?e.content&&e.type?Um(e.content,!0):e.data?zy(e.data):e.asNodeBuffer&&Fn?zy(e.asNodeBuffer().toString("binary")):e.asBinary?zy(e.asBinary()):e._data&&e._data.getContent?zy(Um(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function qH(e){if(!e)return null;if(e.data)return bO(e.data);if(e.asNodeBuffer&&Fn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?bO(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function hhe(e){return e&&e.name.slice(-4)===".bin"?qH(e):VH(e)}function pc(e,t){for(var r=e.FullPaths||va(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return e.files?e.files[r[a]]:e.FileIndex[a]}return null}function fN(e,t){var r=pc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ha(e,t,r){if(!r)return hhe(fN(e,t));if(!t)return null;try{return Ha(e,t)}catch{return null}}function $l(e,t,r){if(!r)return VH(fN(e,t));if(!t)return null;try{return $l(e,t)}catch{return null}}function mhe(e,t,r){return qH(fN(e,t))}function MO(e){for(var t=e.FullPaths||va(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Nn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Fn?n=E0(r):n=Ffe(r),Yr.utils.cfb_add(e,t,n)}Yr.utils.cfb_add(e,t,r)}else e.file(t,r)}function hN(){return Yr.utils.cfb_new()}function KH(e,t){switch(t.type){case"base64":return Yr.read(e,{type:"base64"});case"binary":return Yr.read(e,{type:"binary"});case"buffer":case"array":return Yr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Hy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var La=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ghe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,OO=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,phe=/<[^>]*>/g,To=La.match(OO)?OO:phe,xhe=/<\w*:/,yhe=/<(\/?)\w+:/;function un(e,t,r){for(var n={},s=0,a=0;s!==e.length&&!((a=e.charCodeAt(s))===32||a===10||a===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var i=e.match(ghe),o=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],a=0;a!=f.length&&f.charCodeAt(a)!==61;++a);for(d=f.slice(0,a).trim();f.charCodeAt(a+1)==32;)++a;for(h=(s=f.charCodeAt(a+1))==34||s==39?1:0,c=f.slice(a+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=c,n[g.toLowerCase()]=c}}return n}function dd(e){return e.replace(yhe,"<$1")}var YH={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},mN=y3(YH),Hn=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(e,function(o,c){return YH[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}})(),gN=/[&<>'"]/g,vhe=/[\u0000-\u0008\u000b-\u001f]/g;function fs(e){var t=e+"";return t.replace(gN,function(r){return mN[r]}).replace(vhe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function DO(e){return fs(e).replace(/ /g,"_x0020_")}var XH=/[\u0000-\u001f]/g;function pN(e){var t=e+"";return t.replace(gN,function(r){return mN[r]}).replace(/\n/g,"<br/>").replace(XH,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function bhe(e){var t=e+"";return t.replace(gN,function(r){return mN[r]}).replace(XH,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var RO=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function whe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ds(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function V5(e){for(var t="",r=0,n=0,s=0,a=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,t+=String.fromCharCode(i);continue}if(a=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function IO(e){var t=Jf(2*e.length),r,n,s=1,a=0,i=0,o;for(n=0;n<e.length;n+=s)s=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[a++]=i&255,t[a++]=i>>>8,i=0),t[a++]=r%256,t[a++]=r>>>8;return t.slice(0,a).toString("ucs2")}function LO(e){return E0(e,"binary").toString("utf8")}var ww="foo bar baz",vs=Fn&&(LO(ww)==V5(ww)&&LO||IO(ww)==V5(ww)&&IO)||V5,Xu=Fn?function(e){return E0(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Lv=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),JH=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),_he=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),She=/<\/?(?:vt:)?variant>/g,khe=/<(?:vt:)([^>]*)>([\s\S]*)</;function BO(e,t){var r=un(e),n=e.match(_he(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(She,"").match(khe);i&&s.push({v:vs(i[2]),t:i[1]})}),s}var QH=/(^\s|\s$|\n)/;function Zi(e,t){return"<"+e+(t.match(QH)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Bv(e){return va(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function fr(e,t,r){return"<"+e+(r!=null?Bv(r):"")+(t!=null?(t.match(QH)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function JC(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Che(e,t){switch(typeof e){case"string":var r=fr("vt:lpwstr",fs(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return fr((e|0)==e?"vt:i4":"vt:r8",fs(String(e)));case"boolean":return fr("vt:bool",e?"true":"false")}if(e instanceof Date)return fr("vt:filetime",JC(e));throw new Error("Unable to serialize "+e)}function xN(e){if(Fn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return vs(uh(cN(e)));throw new Error("Bad input format: expected Buffer or string")}var $v=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,oi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ng=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Dl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function The(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,a=5;a>=0;--a)s=s*256+e[t+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Nhe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,a=0,i=n?-t:t;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(t)?26985:0);for(var o=0;o<=5;++o,a/=256)e[r+o]=a&255;e[r+6]=(s&15)<<4|a&15,e[r+7]=s>>4|n}var $O=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,a=e[0][n].length;s<a;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},UO=Fn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:E0(t)})):$O(e)}:$O,zO=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(e0(e,s)));return n.join("").replace(Ko,"")},yN=Fn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Ko,""):zO(e,t,r)}:zO,WO=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},ZH=Fn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):WO(e,t,r)}:WO,HO=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(yp(e,s)));return n.join("")},j2=Fn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):HO(t,r,n)}:HO,eG=function(e,t){var r=Rl(e,t);return r>0?j2(e,t+4,t+4+r-1):""},tG=eG,rG=function(e,t){var r=Rl(e,t);return r>0?j2(e,t+4,t+4+r-1):""},nG=rG,sG=function(e,t){var r=2*Rl(e,t);return r>0?j2(e,t+4,t+4+r-1):""},aG=sG,iG=function(t,r){var n=Rl(t,r);return n>0?yN(t,r+4,r+4+n):""},oG=iG,lG=function(e,t){var r=Rl(e,t);return r>0?j2(e,t+4,t+4+r):""},cG=lG,uG=function(e,t){return The(e,t)},K4=uG,vN=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Fn&&(tG=function(t,r){if(!Buffer.isBuffer(t))return eG(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},nG=function(t,r){if(!Buffer.isBuffer(t))return rG(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},aG=function(t,r){if(!Buffer.isBuffer(t))return sG(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},oG=function(t,r){if(!Buffer.isBuffer(t))return iG(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},cG=function(t,r){if(!Buffer.isBuffer(t))return lG(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},K4=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):uG(t,r)},vN=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var yp=function(e,t){return e[t]},e0=function(e,t){return e[t+1]*256+e[t]},Ehe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Rl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},sm=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Ahe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function sv(e,t){var r="",n,s,a=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,Fn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(e0(this,u)),u+=2;e*=2;break;case"utf8":r=j2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=yN(this,this.l,this.l+e);break;case"wstr":return sv.call(this,e,"dbcs");case"lpstr-ansi":r=tG(this,this.l),e=4+Rl(this,this.l);break;case"lpstr-cp":r=nG(this,this.l),e=4+Rl(this,this.l);break;case"lpwstr":r=aG(this,this.l),e=4+2*Rl(this,this.l);break;case"lpp4":e=4+Rl(this,this.l),r=oG(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Rl(this,this.l),r=cG(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=yp(this,this.l+e++))!==0;)a.push(bw(i));r=a.join("");break;case"_wstr":for(e=0,r="";(i=e0(this,this.l+e))!==0;)a.push(bw(i)),e+=2;e+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=yp(this,u),this.l=u+1,o=sv.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(bw(e0(this,u))),u+=2}r=a.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=yp(this,u),this.l=u+1,o=sv.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(bw(yp(this,u))),u+=1}r=a.join("");break;default:switch(e){case 1:return n=yp(this,this.l),this.l++,n;case 2:return n=(t==="i"?Ehe:e0)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?sm:Ahe)(this,this.l),this.l+=4,n):(s=Rl(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=K4(this,this.l):s=K4([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=ZH(this,this.l,e);break}}return this.l+=e,r}var jhe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Phe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Fhe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Mhe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Fhe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var i=t.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,jhe(this,t,this.l);break;case 8:if(n=8,r==="f"){Nhe(this,t,this.l);break}case 16:break;case-4:n=4,Phe(this,t,this.l);break}return this.l+=n,this}function dG(e,t){var r=ZH(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Xi(e,t){e.l=t,e.read_shift=sv,e.chk=dG,e.write_shift=Mhe}function Co(e,t){e.l+=t}function $t(e){var t=Jf(e);return Xi(t,0),t}function A0(e,t,r){if(e){var n,s,a;Xi(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=Vv[o]||Vv[65535];for(n=e.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=e.read_shift(1))&127)<<7*s;c=e.l+a;var d=u.f&&u.f(e,a,r);if(e.l=c,t(d,u,o))return}}}function xl(){var e=[],t=Fn?256:2048,r=function(u){var d=$t(u);return Xi(d,0),d},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},i=function(){return s(),Ni(e)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(t)};return{next:a,push:o,end:i,_bufs:e}}function Xt(e,t,r,n){var s=+t,a;if(!isNaN(s)){n||(n=Vv[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=e.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&vN(r)&&e.push(r)}}function av(e,t,r){var n=Bs(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function GO(e,t,r){var n=Bs(e);return n.s=av(n.s,t.s,r),n.e=av(n.e,t.s,r),n}function iv(e,t){if(e.cRel&&e.c<0)for(e=Bs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Bs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=on(e);return!e.cRel&&e.cRel!=null&&(r=Rhe(r)),!e.rRel&&e.rRel!=null&&(r=Ohe(r)),r}function q5(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+na(e.s.c)+":"+(e.e.cRel?"":"$")+na(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Oa(e.s.r)+":"+(e.e.rRel?"":"$")+Oa(e.e.r):iv(e.s,t.biff)+":"+iv(e.e,t.biff)}function bN(e){return parseInt(Dhe(e),10)-1}function Oa(e){return""+(e+1)}function Ohe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Dhe(e){return e.replace(/\$(\d+)$/,"$1")}function wN(e){for(var t=Ihe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function na(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Rhe(e){return e.replace(/^([A-Z])/,"$$$1")}function Ihe(e){return e.replace(/^\$([A-Z])/,"$1")}function Lhe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function sa(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function on(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function yl(e){var t=e.indexOf(":");return t==-1?{s:sa(e),e:sa(e)}:{s:sa(e.slice(0,t)),e:sa(e.slice(t+1))}}function Cn(e,t){return typeof t>"u"||typeof t=="number"?Cn(e.s,e.e):(typeof e!="string"&&(e=on(e)),typeof t!="string"&&(t=on(t)),e==t?e:e+":"+t)}function Vn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=e.length;for(r=0;n<a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===a||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=a&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=a&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function VO(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=jc(e.z,r?ui(t):t)}catch{}try{return e.w=jc((e.XF||{}).numFmtId||(r?14:0),r?ui(t):t)}catch{return""+t}}function y0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?j0[e.v]||e.v:t==null?VO(e,e.v):VO(e,t))}function dh(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function fG(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,a=e||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?sa(n.origin):n.origin;i=c.r,o=c.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=Vn(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var g={v:t[f][h]},p=i+f,y=o+h;if(u.s.r>p&&(u.s.r=p),u.s.c>y&&(u.s.c=y),u.e.r<p&&(u.e.r=p),u.e.c<y&&(u.e.c=y),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))g=t[f][h];else if(Array.isArray(g.v)&&(g.f=t[f][h][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||sn[14],n.cellDates?(g.t="d",g.w=jc(g.z,ui(g.v))):(g.t="n",g.v=ui(g.v),g.w=jc(g.z,g.v))):g.t="s";if(s)a[p]||(a[p]=[]),a[p][y]&&a[p][y].z&&(g.z=a[p][y].z),a[p][y]=g;else{var v=on({c:y,r:p});a[v]&&a[v].z&&(g.z=a[v].z),a[v]=g}}}return u.s.c<1e7&&(a["!ref"]=Cn(u)),a}function F1(e,t){return fG(null,e,t)}function Bhe(e){return e.read_shift(4,"i")}function fu(e,t){return t||(t=$t(4)),t.write_shift(4,e),t}function So(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ai(e,t){var r=!1;return t==null&&(r=!0,t=$t(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function $he(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Uhe(e,t){return t||(t=$t(4)),t.write_shift(2,0),t.write_shift(2,0),t}function _N(e,t){var r=e.l,n=e.read_shift(1),s=So(e),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)a.push($he(e));i.r=a}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function zhe(e,t){var r=!1;return t==null&&(r=!0,t=$t(15+4*e.t.length)),t.write_shift(1,0),Ai(e.t,t),r?t.slice(0,t.l):t}var Whe=_N;function Hhe(e,t){var r=!1;return t==null&&(r=!0,t=$t(23+4*e.t.length)),t.write_shift(1,1),Ai(e.t,t),t.write_shift(4,1),Uhe({},t),r?t.slice(0,t.l):t}function Dc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function sg(e,t){return t==null&&(t=$t(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function ag(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function ig(e,t){return t==null&&(t=$t(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Ghe=So,hG=Ai;function SN(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Y4(e,t){var r=!1;return t==null&&(r=!0,t=$t(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Vhe=So,QC=SN,kN=Y4;function CN(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?K4([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):sm(t,0)>>2;return r?s/100:s}function mG(e,t){t==null&&(t=$t(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function gG(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function qhe(e,t){return t||(t=$t(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var og=gG,M1=qhe;function vo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function zm(e,t){return(t||$t(8)).write_shift(8,e,"f")}function Khe(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),a=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=ym[s];u&&(t.rgb=zv(u));break;case 2:t.rgb=zv([i,o,c]);break;case 3:t.theme=s;break}return a!=0&&(t.tint=a>0?a/32767:a/32768),t}function X4(e,t){if(t||(t=$t(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Yhe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Xhe(e,t){t||(t=$t(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function pG(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Jhe(e){return pG(e,1)}function Qhe(e){return pG(e,2)}var TN=2,ul=3,_w=11,qO=12,J4=19,Sw=64,Zhe=65,eme=71,tme=4108,rme=4126,Si=80,xG=81,nme=[Si,xG],ZC={1:{n:"CodePage",t:TN},2:{n:"Category",t:Si},3:{n:"PresentationFormat",t:Si},4:{n:"ByteCount",t:ul},5:{n:"LineCount",t:ul},6:{n:"ParagraphCount",t:ul},7:{n:"SlideCount",t:ul},8:{n:"NoteCount",t:ul},9:{n:"HiddenCount",t:ul},10:{n:"MultimediaClipCount",t:ul},11:{n:"ScaleCrop",t:_w},12:{n:"HeadingPairs",t:tme},13:{n:"TitlesOfParts",t:rme},14:{n:"Manager",t:Si},15:{n:"Company",t:Si},16:{n:"LinksUpToDate",t:_w},17:{n:"CharacterCount",t:ul},19:{n:"SharedDoc",t:_w},22:{n:"HyperlinksChanged",t:_w},23:{n:"AppVersion",t:ul,p:"version"},24:{n:"DigSig",t:Zhe},26:{n:"ContentType",t:Si},27:{n:"ContentStatus",t:Si},28:{n:"Language",t:Si},29:{n:"Version",t:Si},255:{},2147483648:{n:"Locale",t:J4},2147483651:{n:"Behavior",t:J4},1919054434:{}},e8={1:{n:"CodePage",t:TN},2:{n:"Title",t:Si},3:{n:"Subject",t:Si},4:{n:"Author",t:Si},5:{n:"Keywords",t:Si},6:{n:"Comments",t:Si},7:{n:"Template",t:Si},8:{n:"LastAuthor",t:Si},9:{n:"RevNumber",t:Si},10:{n:"EditTime",t:Sw},11:{n:"LastPrinted",t:Sw},12:{n:"CreatedDate",t:Sw},13:{n:"ModifiedDate",t:Sw},14:{n:"PageCount",t:ul},15:{n:"WordCount",t:ul},16:{n:"CharCount",t:ul},17:{n:"Thumbnail",t:eme},18:{n:"Application",t:Si},19:{n:"DocSecurity",t:ul},255:{},2147483648:{n:"Locale",t:J4},2147483651:{n:"Behavior",t:J4},1919054434:{}},KO={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},sme=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function ame(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var ime=ame([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ym=Bs(ime),j0={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},yG={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},t8={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},kw={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function NN(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function ome(e){var t=NN();if(!e||!e.match)return t;var r={};if((e.match(To)||[]).forEach(function(n){var s=un(n);switch(s[0].replace(xhe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[t8[s.ContentType]]!==void 0&&t[t8[s.ContentType]].push(s.PartName);break}}),t.xmlns!==oi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function vG(e,t){var r=ohe(t8),n=[],s;n[n.length]=La,n[n.length]=fr("Types",null,{xmlns:oi.CT,"xmlns:xsd":oi.xsd,"xmlns:xsi":oi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return fr("Default",null,{Extension:c[0],ContentType:c[1]})}));var a=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=fr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:kw[c][t.bookType]||kw[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=fr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:kw[c][t.bookType]||kw[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=fr("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Dn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Uv(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ov(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(To)||[]).forEach(function(s){var a=un(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Hy(a.Target,t);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function Bp(e){var t=[La,fr("Relationships",null,{xmlns:oi.RELS})];return va(e["!id"]).forEach(function(r){t[t.length]=fr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function cs(e,t,r,n,s,a){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[Dn.HLINK,Dn.XPATH,Dn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var lme="application/vnd.oasis.opendocument.spreadsheet";function cme(e,t){for(var r=xN(e),n,s;n=$v.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=un(n[0],!1),s.path=="/"&&s.type!==lme)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function ume(e){var t=[La];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function YO(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function dme(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function fme(e){var t=[La];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(YO(e[r][0],e[r][1])),t.push(dme("",e[r][0]));return t.push(YO("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function bG(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+W4.version+"</meta:generator></office:meta></office:document-meta>"}var Cc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],hme=(function(){for(var e=new Array(Cc.length),t=0;t<Cc.length;++t){var r=Cc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function wG(e){var t={};e=vs(e);for(var r=0;r<Cc.length;++r){var n=Cc[r],s=e.match(hme[r]);s!=null&&s.length>0&&(t[n[1]]=Hn(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ls(t[n[1]]))}return t}function K5(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=fs(t),n[n.length]=r?fr(e,t,r):Zi(e,t))}function _G(e,t){var r=t||{},n=[La,fr("cp:coreProperties",null,{"xmlns:cp":oi.CORE_PROPS,"xmlns:dc":oi.dc,"xmlns:dcterms":oi.dcterms,"xmlns:dcmitype":oi.dcmitype,"xmlns:xsi":oi.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&K5("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:JC(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&K5("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:JC(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=Cc.length;++a){var i=Cc[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&K5(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var vm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],SG=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function kG(e,t,r,n){var s=[];if(typeof e=="string")s=BO(e,n);else for(var a=0;a<e.length;++a)s=s.concat(e[a].map(function(d){return{v:d}}));var i=typeof t=="string"?BO(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function mme(e,t,r){var n={};return t||(t={}),e=vs(e),vm.forEach(function(s){var a=(e.match(Lv(s[0]))||[])[1];switch(s[2]){case"string":a&&(t[s[1]]=Hn(a));break;case"bool":t[s[1]]=a==="true";break;case"raw":var i=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&kG(n.HeadingPairs,n.TitlesOfParts,t,r),t}function CG(e){var t=[],r=fr;return e||(e={}),e.Application="SheetJS",t[t.length]=La,t[t.length]=fr("Properties",null,{xmlns:oi.EXT_PROPS,"xmlns:vt":oi.vt}),vm.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=fs(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+fs(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var gme=/<[^>]+>[^<]*/g;function pme(e,t){var r={},n="",s=e.match(gme);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=un(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Hn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Hn(d);break;case"bool":r[n]=Ds(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ls(d);break;case"cy":case"error":r[n]=Hn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function TG(e){var t=[La,fr("Properties",null,{xmlns:oi.CUST_PROPS,"xmlns:vt":oi.vt})];if(!e)return t.join("");var r=1;return va(e).forEach(function(s){++r,t[t.length]=fr("property",Che(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:fs(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var r8={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Y5;function xme(e,t,r){Y5||(Y5=y3(r8)),t=Y5[t]||t,e[t]=r}function yme(e,t){var r=[];return va(r8).map(function(n){for(var s=0;s<Cc.length;++s)if(Cc[s][1]==n)return Cc[s];for(s=0;s<vm.length;++s)if(vm[s][1]==n)return vm[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Zi(r8[n[1]]||n[1],s))}}),fr("DocumentProperties",r.join(""),{xmlns:Dl.o})}function vme(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&va(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)){for(var i=0;i<Cc.length;++i)if(a==Cc[i][1])return;for(i=0;i<vm.length;++i)if(a==vm[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=e[a],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),s.push(fr(DO(a),o,{"dt:dt":c}))}}),t&&va(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)&&!(e&&Object.prototype.hasOwnProperty.call(e,a))){var i=t[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(fr(DO(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Dl.o+'">'+s.join("")+"</"+n+">"}function EN(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function bme(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=$t(8);return i.write_shift(4,n),i.write_shift(4,s),i}function NG(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function EG(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function AG(e,t,r){return t===31?EG(e):NG(e,t,r)}function n8(e,t,r){return AG(e,t,r===!1?0:4)}function wme(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return AG(e,t,0)}function _me(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Ko,""),e.l-s&2&&(e.l+=2)}return r}function Sme(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Ko,"");return r}function kme(e){var t=e.l,r=Q4(e,xG);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Q4(e,ul);return[r,n]}function Cme(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(kme(e));return r}function XO(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var a=e.read_shift(4),i=e.read_shift(4);n[a]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(Ko,"").replace(Wy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function jG(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Tme(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Q4(e,t,r){var n=e.read_shift(2),s,a=r||{};if(e.l+=2,t!==qO&&n!==t&&nme.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===qO?n:t){case 2:return s=e.read_shift(2,"i"),a.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return NG(e,n,4).replace(Ko,"");case 31:return EG(e);case 64:return EN(e);case 65:return jG(e);case 71:return Tme(e);case 80:return n8(e,n,!a.raw).replace(Ko,"");case 81:return wme(e,n).replace(Ko,"");case 4108:return Cme(e);case 4126:case 4127:return n==4127?_me(e):Sme(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function JO(e,t){var r=$t(4),n=$t(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=$t(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=bme(t);break;case 31:case 80:for(n=$t(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ni([r,n])}function QO(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0,o=0,c=-1,u={};for(i=0;i!=s;++i){var d=e.read_shift(4),f=e.read_shift(4);a[i]=[d,f+r]}a.sort(function(w,_){return w[1]-_[1]});var h={};for(i=0;i!=s;++i){if(e.l!==a[i][1]){var g=!0;if(i>0&&t)switch(t[a[i-1][0]].t){case 2:e.l+2===a[i][1]&&(e.l+=2,g=!1);break;case 80:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break;case 4108:e.l<=a[i][1]&&(e.l=a[i][1],g=!1);break}if((!t||i==0)&&e.l<=a[i][1]&&(g=!1,e.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+e.l+" :"+i)}if(t){var p=t[a[i][0]];if(h[p.n]=Q4(e,p.t,{raw:!0}),p.p==="version"&&(h[p.n]=String(h[p.n]>>16)+"."+("0000"+String(h[p.n]&65535)).slice(-4)),p.n=="CodePage")switch(h[p.n]){case 0:h[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:lu(o=h[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[p.n])}}else if(a[i][0]===1){if(o=h.CodePage=Q4(e,TN),lu(o),c!==-1){var y=e.l;e.l=a[c][1],u=XO(e,o),e.l=y}}else if(a[i][0]===0){if(o===0){c=i,e.l=a[i+1][1];continue}u=XO(e,o)}else{var v=u[a[i][0]],C;switch(e[e.l]){case 65:e.l+=4,C=jG(e);break;case 30:e.l+=4,C=n8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,C=n8(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,C=e.read_shift(4,"i");break;case 19:e.l+=4,C=e.read_shift(4);break;case 5:e.l+=4,C=e.read_shift(8,"f");break;case 11:e.l+=4,C=Ea(e,4);break;case 64:e.l+=4,C=Ls(EN(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[v]=C}}return e.l=r+n,h}var PG=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Nme(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function ZO(e,t,r){var n=$t(8),s=[],a=[],i=8,o=0,c=$t(8),u=$t(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),a.push(c),s.push(u),i+=8+c.length,!t){u=$t(8),u.write_shift(4,0),s.unshift(u);var d=[$t(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=$t(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Ni(d),a.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(PG.indexOf(e[o][0])>-1||SG.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],g=0;if(t){g=+t[e[o][0]];var p=r[g];if(p.p=="version"&&typeof h=="string"){var y=h.split(".");h=(+y[0]<<16)+(+y[1]||0)}c=JO(p.t,h)}else{var v=Nme(h);v==-1&&(v=31,h=String(h)),c=JO(v,h)}a.push(c),u=$t(8),u.write_shift(4,t?g:2+o),s.push(u),i+=8+c.length}var C=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,C),C+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),Ni([n].concat(s).concat(a))}function eD(e,t,r){var n=e.content;if(!n)return{};Xi(n,0);var s,a,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Yr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=QO(n,t),h={SystemIdentifier:u};for(var g in f)h[g]=f[g];if(h.FMTID=a,s===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var p;try{p=QO(n,null)}catch{}for(g in p)h[g]=p[g];return h.FMTID=[a,i],h}function tD(e,t,r,n,s,a){var i=$t(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Yr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,s?68:48);var c=ZO(e,r,n);if(o.push(c),s){var u=ZO(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+c.length),o.push(u)}return Ni(o)}function kf(e,t){return e.read_shift(t),null}function Eme(e,t){t||(t=$t(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Ame(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Ea(e,t){return e.read_shift(t)===1}function Uo(e,t){return t||(t=$t(2)),t.write_shift(2,+!!e),t}function Ga(e){return e.read_shift(2,"u")}function xc(e,t){return t||(t=$t(2)),t.write_shift(2,e),t}function FG(e,t){return Ame(e,t,Ga)}function jme(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function MG(e,t,r){return r||(r=$t(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function P2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=e.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?e.read_shift(n,s):"";return i}function Pme(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,c={};s&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*i),n&&(e.l+=o),c.t=d,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Fme(e){var t=e.t||"",r=$t(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=$t(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return Ni(s)}function Wm(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function F2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Wm(e,n,r)}function lg(e,t,r){if(r.biff>5)return F2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function OG(e,t,r){return r||(r=$t(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Mme(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Ome(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Ko,"");return n&&(e.l+=24),s}function Dme(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(a>>1,"utf16le").replace(Ko,"");return r+i}function Rme(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Ome(e);case"0303000000000000c000000000000046":return Dme(e);default:throw new Error("Unsupported Moniker "+r)}}function Cw(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Ko,""):"";return r}function rD(e,t){t||(t=$t(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Ime(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var a,i,o,c,u="",d,f;s&16&&(a=Cw(e,r-e.l)),s&128&&(i=Cw(e,r-e.l)),(s&257)===257&&(o=Cw(e,r-e.l)),(s&257)===1&&(c=Rme(e,r-e.l)),s&8&&(u=Cw(e,r-e.l)),s&32&&(d=e.read_shift(16)),s&64&&(f=EN(e)),e.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),s&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var g={Target:h};return d&&(g.guid=d),f&&(g.time=f),a&&(g.Tooltip=a),g}function Lme(e){var t=$t(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}t.write_shift(4,2),t.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(a==28)n=n.slice(1),rD(n,t);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),a&8&&rD(s>-1?n.slice(s+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function DG(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function RG(e,t){var r=DG(e);return r[3]=0,r}function fd(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Hm(e,t,r,n){return n||(n=$t(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Bme(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function $me(e,t,r){return t===0?"":lg(e,t,r)}function Ume(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),a=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[s,a,i]}function IG(e){var t=e.read_shift(2),r=CN(e);return[t,r]}function zme(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=P2(e,t,r),a=e.read_shift(2);if(n-=e.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return e.l+=a,s}function w3(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function LG(e,t){return t||(t=$t(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function BG(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var Wme=BG;function $G(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Hme(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Gme(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function fo(e){e.l+=2,e.l+=e.read_shift(2)}var Vme={0:fo,4:fo,5:fo,6:fo,7:Gme,8:fo,9:fo,10:fo,11:fo,12:fo,13:Hme,14:fo,15:fo,16:fo,17:fo,18:fo,19:fo,20:fo,21:$G};function qme(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Vme[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function Tw(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function AN(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=$t(s);return a.write_shift(2,n),a.write_shift(2,t),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function Kme(e,t){return t===0||e.read_shift(2),1200}function Yme(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=lg(e,0,r);return e.read_shift(t+n-e.l),s}function Xme(e,t){var r=!t||t.biff==8,n=$t(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Jme(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Qme(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,a=e.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=P2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function Zme(e,t){var r=!t||t.biff>=8?2:1,n=$t(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function ege(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),a=[],i=0;i!=s&&e.l<r;++i)a.push(Pme(e));return a.Count=n,a.Unique=s,a}function tge(e,t){var r=$t(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=Fme(e[s]);var a=Ni([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function rge(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function nge(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function sge(e){var t=Bme(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function age(e){return e.read_shift(2),e.read_shift(4)}function nD(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function ige(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function oge(){var e=$t(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function lge(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function cge(e){var t=$t(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function uge(){}function dge(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=P2(e,0,r),n}function fge(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,a=$t(s);return a.write_shift(2,e.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function hge(e){var t=fd(e);return t.isst=e.read_shift(4),t}function mge(e,t,r,n){var s=$t(10);return Hm(e,t,n,s),s.write_shift(4,r),s}function gge(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=fd(e);r.biff==2&&e.l++;var a=F2(e,n-e.l,r);return s.val=a,s}function pge(e,t,r,n,s){var a=!s||s.biff==8,i=$t(8+ +a+(1+a)*r.length);return Hm(e,t,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function xge(e,t,r){var n=e.read_shift(2),s=lg(e,0,r);return[n,s]}function yge(e,t,r,n){var s=r&&r.biff==5;n||(n=$t(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var vge=lg;function sD(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,a=e.read_shift(s),i=e.read_shift(s),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:a,c:o},e:{r:i,c}}}function bge(e,t){var r=t.biff==8||!t.biff?4:2,n=$t(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function wge(e){var t=e.read_shift(2),r=e.read_shift(2),n=IG(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function _ge(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(IG(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function Sge(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),a=[];e.l<r;)a.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function kge(e,t,r,n){var s={},a=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return s.patternType=sme[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function Cge(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=kge(e,t,n.fStyle,r),n}function aD(e,t,r,n){var s=r&&r.biff==5;n||(n=$t(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var a=0;return e.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Tge(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function Nge(e){var t=$t(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function iD(e,t,r){var n=fd(e);(r.biff==2||t==9)&&++e.l;var s=jme(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function Ege(e,t,r,n,s,a){var i=$t(8);return Hm(e,t,n,i),MG(r,a,i),i}function Age(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=fd(e),s=vo(e);return n.val=s,n}function jge(e,t,r,n){var s=$t(14);return Hm(e,t,n,s),zm(r,s),s}var oD=$me;function Pge(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Wm(e,a),o=[];n>e.l;)o.push(F2(e));return[a,s,i,o]}function lD(e,t,r){var n=e.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=zme(e,t-2,r)),a.body=s||e.read_shift(t-2),typeof s=="string"&&(a.Name=s),a}var Fge=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function cD(e,t,r){var n=e.l+t,s=e.read_shift(2),a=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=Wm(e,i,r);s&32&&(u=Fge[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:qye(e,d,r,o);return{chKey:a,Name:u,itab:c,rgce:f}}function UG(e,t,r){if(r.biff<8)return Mge(e,t,r);for(var n=[],s=e.l+t,a=e.read_shift(r.biff>8?4:2);a--!==0;)n.push(Ume(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function Mge(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=P2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Oge(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),a=Wm(e,n,r),i=Wm(e,s,r);return[a,i]}function Dge(e,t,r){var n=BG(e);e.l++;var s=e.read_shift(1);return t-=8,[Kye(e,t,r),s,n]}function uD(e,t,r){var n=Wme(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Gye(e,t,r)]}function Rge(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Ige(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=lg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},o,i,a]}}function Lge(e,t,r){return Ige(e,t,r)}function Bge(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(w3(e));return r}function $ge(e){var t=$t(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)LG(e[r],t);return t}function Uge(e,t,r){if(r&&r.biff<8)return Wge(e,t,r);var n=$G(e),s=qme(e,t-22,n[1]);return{cmo:n,ft:s}}var zge={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Wge(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),a=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((zge[n]||Co)(e,t,r)),{cmo:[s,n,a],ft:i}}function Hge(e,t,r){var n=e.l,s="";try{e.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?e.l+=6:i=Mme(e,6,r);var o=e.read_shift(2);e.read_shift(2),Ga(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=Wm(e,e.lens[u+1]-e.lens[u]-1);if(s+=f,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Gge(e,t){var r=w3(e);e.l+=16;var n=Ime(e,t-24);return[r,n]}function Vge(e){var t=$t(24),r=sa(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return Ni([t,Lme(e[1])])}function qge(e,t){e.read_shift(2);var r=w3(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Ko,""),[r,n]}function Kge(e){var t=e[1].Tooltip,r=$t(10+2*(t.length+1));r.write_shift(2,2048);var n=sa(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Yge(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=KO[r]||r,r=e.read_shift(2),t[1]=KO[r]||r,t}function Xge(e){return e||(e=$t(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Jge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(RG(e));return r}function Qge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(RG(e));return r}function Zge(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function zG(e,t,r){if(!r.cellStyles)return Co(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:a,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function epe(e,t){var r=$t(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function tpe(e,t){var r={};return t<32||(e.l+=16,r.header=vo(e),r.footer=vo(e),e.l+=2),r}function rpe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function npe(e){for(var t=$t(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var spe=fd,ape=FG,ipe=F2;function ope(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function lpe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=fd(e);++e.l;var s=lg(e,t-7,r);return n.t="str",n.val=s,n}function cpe(e){var t=fd(e);++e.l;var r=vo(e);return t.t="n",t.val=r,t}function upe(e,t,r){var n=$t(15);return R2(n,e,t),n.write_shift(8,r,"f"),n}function dpe(e){var t=fd(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function fpe(e,t,r){var n=$t(9);return R2(n,e,t),n.write_shift(2,r),n}function hpe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function mpe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function gpe(e,t,r){var n=e.l+t,s=fd(e),a=e.read_shift(2),i=Wm(e,a,r);return e.l=n,s.t="str",s.val=i,s}var ppe=[2,3,48,49,131,139,140,245],s8=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=y3({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=Jf(1);switch(c.type){case"base64":d=Bl(Gl(o));break;case"binary":d=Bl(o);break;case"buffer":case"array":d=o;break}Xi(d,0);var f=d.read_shift(1),h=!!(f&136),g=!1,p=!1;switch(f){case 2:break;case 3:break;case 48:g=!0,h=!0;break;case 49:g=!0,h=!0;break;case 131:break;case 139:break;case 140:p=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var y=0,v=521;f==2&&(y=d.read_shift(2)),d.l+=3,f!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),f!=2&&(v=d.read_shift(2));var C=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),p&&(d.l+=36);for(var _=[],T={},E=Math.min(d.length,f==2?521:v-10-(g?264:0)),A=p?32:11;d.l<E&&d[d.l]!=13;)switch(T={},T.name=Dv.utils.decode(w,d.slice(d.l,d.l+A)).replace(/[\u0000\r\n].*$/g,""),d.l+=A,T.type=String.fromCharCode(d.read_shift(1)),f!=2&&!p&&(T.offset=d.read_shift(4)),T.len=d.read_shift(1),f==2&&(T.offset=d.read_shift(2)),T.dec=d.read_shift(1),T.name.length&&_.push(T),f!=2&&(d.l+=p?13:14),T.type){case"B":(!g||T.len!=8)&&c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(d[d.l]!==13&&(d.l=v-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=v;var F=0,j=0;for(u[0]=[],j=0;j!=_.length;++j)u[0][j]=_[j].name;for(;y-- >0;){if(d[d.l]===42){d.l+=C;continue}for(++d.l,u[++F]=[],j=0,j=0;j!=_.length;++j){var P=d.slice(d.l,d.l+_[j].len);d.l+=_[j].len,Xi(P,0);var D=Dv.utils.decode(w,P);switch(_[j].type){case"C":D.trim().length&&(u[F][j]=D.replace(/\s+$/,""));break;case"D":D.length===8?u[F][j]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):u[F][j]=D;break;case"F":u[F][j]=parseFloat(D.trim());break;case"+":case"I":u[F][j]=p?P.read_shift(-4,"i")^2147483648:P.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":u[F][j]=!0;break;case"N":case"F":u[F][j]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[F][j]="##MEMO##"+(p?parseInt(D.trim(),10):P.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(u[F][j]=+D||0);break;case"@":u[F][j]=new Date(P.read_shift(-8,"f")-621356832e5);break;case"T":u[F][j]=new Date((P.read_shift(4)-2440588)*864e5+P.read_shift(4));break;case"Y":u[F][j]=P.read_shift(4,"i")/1e4+P.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[F][j]=-P.read_shift(-8,"f");break;case"B":if(g&&_[j].len==8){u[F][j]=P.read_shift(8,"f");break}case"G":case"P":P.l+=_[j].len;break;case"0":if(_[j].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[j].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=_,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=F1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function s(o,c){try{return dh(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&lu(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=xl(),f=t_(o,{header:1,raw:!0,cellDates:!0}),h=f[0],g=f.slice(1),p=o["!cols"]||[],y=0,v=0,C=0,w=1;for(y=0;y<h.length;++y){if(((p[y]||{}).DBF||{}).name){h[y]=p[y].DBF.name,++C;continue}if(h[y]!=null){if(++C,typeof h[y]=="number"&&(h[y]=h[y].toString(10)),typeof h[y]!="string")throw new Error("DBF Invalid column name "+h[y]+" |"+typeof h[y]+"|");if(h.indexOf(h[y])!==y){for(v=0;v<1024;++v)if(h.indexOf(h[y]+"_"+v)==-1){h[y]+="_"+v;break}}}}var _=Vn(o["!ref"]),T=[],E=[],A=[];for(y=0;y<=_.e.c-_.s.c;++y){var F="",j="",P=0,D=[];for(v=0;v<g.length;++v)g[v][y]!=null&&D.push(g[v][y]);if(D.length==0||h[y]==null){T[y]="?";continue}for(v=0;v<D.length;++v){switch(typeof D[v]){case"number":j="B";break;case"string":j="C";break;case"boolean":j="L";break;case"object":j=D[v]instanceof Date?"D":"C";break;default:j="C"}P=Math.max(P,String(D[v]).length),F=F&&F!=j?"C":j}P>250&&(P=250),j=((p[y]||{}).DBF||{}).type,j=="C"&&p[y].DBF.len>P&&(P=p[y].DBF.len),F=="B"&&j=="N"&&(F="N",A[y]=p[y].DBF.dec,P=p[y].DBF.len),E[y]=F=="C"||j=="N"?P:a[F]||0,w+=E[y],T[y]=F}var B=d.next(32);for(B.write_shift(4,318902576),B.write_shift(4,g.length),B.write_shift(2,296+32*C),B.write_shift(2,w),y=0;y<4;++y)B.write_shift(4,0);for(B.write_shift(4,0|(+t[PH]||3)<<8),y=0,v=0;y<h.length;++y)if(h[y]!=null){var V=d.next(32),Y=(h[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);V.write_shift(1,Y,"sbcs"),V.write_shift(1,T[y]=="?"?"C":T[y],"sbcs"),V.write_shift(4,v),V.write_shift(1,E[y]||a[T[y]]||0),V.write_shift(1,A[y]||0),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(1,0),V.write_shift(4,0),V.write_shift(4,0),v+=E[y]||a[T[y]]||0}var re=d.next(264);for(re.write_shift(4,13),y=0;y<65;++y)re.write_shift(4,0);for(y=0;y<g.length;++y){var te=d.next(w);for(te.write_shift(1,0),v=0;v<h.length;++v)if(h[v]!=null)switch(T[v]){case"L":te.write_shift(1,g[y][v]==null?63:g[y][v]?84:70);break;case"B":te.write_shift(8,g[y][v]||0,"f");break;case"N":var ee="0";for(typeof g[y][v]=="number"&&(ee=g[y][v].toFixed(A[v]||0)),C=0;C<E[v]-ee.length;++C)te.write_shift(1,32);te.write_shift(1,ee,"sbcs");break;case"D":g[y][v]?(te.write_shift(4,("0000"+g[y][v].getFullYear()).slice(-4),"sbcs"),te.write_shift(2,("00"+(g[y][v].getMonth()+1)).slice(-2),"sbcs"),te.write_shift(2,("00"+g[y][v].getDate()).slice(-2),"sbcs")):te.write_shift(8,"00000000","sbcs");break;case"C":var L=String(g[y][v]!=null?g[y][v]:"").slice(0,E[v]);for(te.write_shift(1,L,"sbcs"),C=0;C<E[v]-L.length;++C)te.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}})(),WG=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+va(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,g){var p=e[g];return typeof p=="number"?wO(p):p},n=function(h,g,p){var y=g.charCodeAt(0)-32<<4|p.charCodeAt(0)-48;return y==59?h:wO(y)};e["|"]=254;function s(h,g){switch(g.type){case"base64":return a(Gl(h),g);case"binary":return a(h,g);case"buffer":return a(Fn&&Buffer.isBuffer(h)?h.toString("binary"):uh(h),g);case"array":return a(Um(h),g)}throw new Error("Unrecognized type "+g.type)}function a(h,g){var p=h.split(/[\n\r]+/),y=-1,v=-1,C=0,w=0,_=[],T=[],E=null,A={},F=[],j=[],P=[],D=0,B;for(+g.codepage>=0&&lu(+g.codepage);C!==p.length;++C){D=0;var V=p[C].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Y=V.replace(/;;/g,"\0").split(";").map(function(q){return q.replace(/\u0000/g,";")}),re=Y[0],te;if(V.length>0)switch(re){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Y[1].charAt(0)=="P"&&T.push(V.slice(3).replace(/;;/g,";"));break;case"C":var ee=!1,L=!1,Q=!1,U=!1,G=-1,W=-1;for(w=1;w<Y.length;++w)switch(Y[w].charAt(0)){case"A":break;case"X":v=parseInt(Y[w].slice(1))-1,L=!0;break;case"Y":for(y=parseInt(Y[w].slice(1))-1,L||(v=0),B=_.length;B<=y;++B)_[B]=[];break;case"K":te=Y[w].slice(1),te.charAt(0)==='"'?te=te.slice(1,te.length-1):te==="TRUE"?te=!0:te==="FALSE"?te=!1:isNaN(du(te))?isNaN(e1(te).getDate())||(te=Ls(te)):(te=du(te),E!==null&&j1(E)&&(te=b3(te))),ee=!0;break;case"E":U=!0;var M=$p(Y[w].slice(1),{r:y,c:v});_[y][v]=[_[y][v],M];break;case"S":Q=!0,_[y][v]=[_[y][v],"S5S"];break;case"G":break;case"R":G=parseInt(Y[w].slice(1))-1;break;case"C":W=parseInt(Y[w].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}if(ee&&(_[y][v]&&_[y][v].length==2?_[y][v][0]=te:_[y][v]=te,E=null),Q){if(U)throw new Error("SYLK shared formula cannot have own formula");var I=G>-1&&_[G][W];if(!I||!I[1])throw new Error("SYLK shared formula cannot find base");_[y][v][1]=oV(I[1],{r:y-G,c:v-W})}break;case"F":var z=0;for(w=1;w<Y.length;++w)switch(Y[w].charAt(0)){case"X":v=parseInt(Y[w].slice(1))-1,++z;break;case"Y":for(y=parseInt(Y[w].slice(1))-1,B=_.length;B<=y;++B)_[B]=[];break;case"M":D=parseInt(Y[w].slice(1))/20;break;case"F":break;case"G":break;case"P":E=T[parseInt(Y[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(P=Y[w].slice(1).split(" "),B=parseInt(P[0],10);B<=parseInt(P[1],10);++B)D=parseInt(P[2],10),j[B-1]=D===0?{hidden:!0}:{wch:D},Qf(j[B-1]);break;case"C":v=parseInt(Y[w].slice(1))-1,j[v]||(j[v]={});break;case"R":y=parseInt(Y[w].slice(1))-1,F[y]||(F[y]={}),D>0?(F[y].hpt=D,F[y].hpx=r1(D)):D===0&&(F[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}z<1&&(E=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+V)}}return F.length>0&&(A["!rows"]=F),j.length>0&&(A["!cols"]=j),g&&g.sheetRows&&(_=_.slice(0,g.sheetRows)),[_,A]}function i(h,g){var p=s(h,g),y=p[0],v=p[1],C=F1(y,g);return va(v).forEach(function(w){C[w]=v[w]}),C}function o(h,g){return dh(i(h,g),g)}function c(h,g,p,y){var v="C;Y"+(p+1)+";X"+(y+1)+";K";switch(h.t){case"n":v+=h.v||0,h.f&&!h.F&&(v+=";E"+DN(h.f,{r:p,c:y}));break;case"b":v+=h.v?"TRUE":"FALSE";break;case"e":v+=h.w||h.v;break;case"d":v+='"'+(h.w||h.v)+'"';break;case"s":v+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return v}function u(h,g){g.forEach(function(p,y){var v="F;W"+(y+1)+" "+(y+1)+" ";p.hidden?v+="0":(typeof p.width=="number"&&!p.wpx&&(p.wpx=Wv(p.width)),typeof p.wpx=="number"&&!p.wch&&(p.wch=Hv(p.wpx)),typeof p.wch=="number"&&(v+=Math.round(p.wch))),v.charAt(v.length-1)!=" "&&h.push(v)})}function d(h,g){g.forEach(function(p,y){var v="F;";p.hidden?v+="M0;":p.hpt?v+="M"+20*p.hpt+";":p.hpx&&(v+="M"+20*Gv(p.hpx)+";"),v.length>2&&h.push(v+"R"+(y+1))})}function f(h,g){var p=["ID;PWXL;N;E"],y=[],v=Vn(h["!ref"]),C,w=Array.isArray(h),_=`\r
`;p.push("P;PGeneral"),p.push("F;P0;DG0G8;M255"),h["!cols"]&&u(p,h["!cols"]),h["!rows"]&&d(p,h["!rows"]),p.push("B;Y"+(v.e.r-v.s.r+1)+";X"+(v.e.c-v.s.c+1)+";D"+[v.s.c,v.s.r,v.e.c,v.e.r].join(" "));for(var T=v.s.r;T<=v.e.r;++T)for(var E=v.s.c;E<=v.e.c;++E){var A=on({r:T,c:E});C=w?(h[T]||[])[E]:h[A],!(!C||C.v==null&&(!C.f||C.F))&&y.push(c(C,h,T,E))}return p.join(_)+_+y.join(_)+_+"E"+_}return{to_workbook:o,to_sheet:i,from_sheet:f}})(),HG=(function(){function e(a,i){switch(i.type){case"base64":return t(Gl(a),i);case"binary":return t(a,i);case"buffer":return t(Fn&&Buffer.isBuffer(a)?a.toString("binary"):uh(a),i);case"array":return t(Um(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){for(var o=a.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),g=h[0],p=h[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){f[++c]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?f[c][u]=!0:y==="FALSE"?f[c][u]=!1:isNaN(du(p))?isNaN(e1(p).getDate())?f[c][u]=p:f[c][u]=Ls(p):f[c][u]=du(p),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),f[c][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(a,i){return F1(e(a,i),i)}function n(a,i){return dh(r(a,i),i)}var s=(function(){var a=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Vn(c["!ref"]),f,h=Array.isArray(c);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var p=d.s.c;p<=d.e.c;++p){var y=on({r:g,c:p});if(f=h?(c[g]||[])[p]:c[y],!f){i(u,1,0,"");continue}switch(f.t){case"n":var v=f.w;!v&&f.v!=null&&(v=f.v),v==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,v,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=jc(f.z||sn[14],ui(Ls(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var C=`\r
`,w=u.join(C);return w}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),GG=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var g=f.split(`
`),p=-1,y=-1,v=0,C=[];v!==g.length;++v){var w=g[v].trim().split(":");if(w[0]==="cell"){var _=sa(w[1]);if(C.length<=_.r)for(p=C.length;p<=_.r;++p)C[p]||(C[p]=[]);switch(p=_.r,y=_.c,w[2]){case"t":C[p][y]=e(w[3]);break;case"v":C[p][y]=+w[3];break;case"vtf":var T=w[w.length-1];case"vtc":switch(w[3]){case"nl":C[p][y]=!!+w[4];break;default:C[p][y]=+w[4];break}w[2]=="vtf"&&(C[p][y]=[C[p][y],T])}}}return h&&h.sheetRows&&(C=C.slice(0,h.sheetRows)),C}function n(f,h){return F1(r(f,h),h)}function s(f,h){return dh(n(f,h),h)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],g=[],p,y="",v=yl(f["!ref"]),C=Array.isArray(f),w=v.s.r;w<=v.e.r;++w)for(var _=v.s.c;_<=v.e.c;++_)if(y=on({r:w,c:_}),p=C?(f[w]||[])[_]:f[y],!(!p||p.v==null||p.t==="z")){switch(g=["cell",y,"t"],p.t){case"s":case"str":g.push(t(p.v));break;case"n":p.f?(g[2]="vtf",g[3]="n",g[4]=p.v,g[5]=t(p.f)):(g[2]="v",g[3]=p.v);break;case"b":g[2]="vt"+(p.f?"f":"c"),g[3]="nl",g[4]=p.v?"1":"0",g[5]=t(p.f||(p.v?"TRUE":"FALSE"));break;case"d":var T=ui(Ls(p.v));g[2]="vtc",g[3]="nd",g[4]=""+T,g[5]=p.w||jc(p.z||sn[14],T);break;case"e":continue}h.push(g.join(":"))}return h.push("sheet:c:"+(v.e.c-v.s.c+1)+":r:"+(v.e.r-v.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[a,i,o,i,u(f),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}})(),t1=(function(){function e(d,f,h,g,p){p.raw?f[h][g]=d:d===""||(d==="TRUE"?f[h][g]=!0:d==="FALSE"?f[h][g]=!1:isNaN(du(d))?isNaN(e1(d).getDate())?f[h][g]=d:f[h][g]=Ls(d):f[h][g]=du(d))}function t(d,f){var h=f||{},g=[];if(!d||d.length===0)return g;for(var p=d.split(/[\r\n]/),y=p.length-1;y>=0&&p[y].length===0;)--y;for(var v=10,C=0,w=0;w<=y;++w)C=p[w].indexOf(" "),C==-1?C=p[w].length:C++,v=Math.max(v,C);for(w=0;w<=y;++w){g[w]=[];var _=0;for(e(p[w].slice(0,v).trim(),g,w,_,h),_=1;_<=(p[w].length-v)/10+1;++_)e(p[w].slice(v+(_-1)*10,v+_*10).trim(),g,w,_,h)}return h.sheetRows&&(g=g.slice(0,h.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var f={},h=!1,g=0,p=0;g<d.length;++g)(p=d.charCodeAt(g))==34?h=!h:!h&&p in r&&(f[p]=(f[p]||0)+1);p=[];for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&p.push([f[g],g]);if(!p.length){f=n;for(g in f)Object.prototype.hasOwnProperty.call(f,g)&&p.push([f[g],g])}return p.sort(function(y,v){return y[0]-v[0]||n[y[1]]-n[v[1]]}),r[p.pop()[1]]||44}function a(d,f){var h=f||{},g="",p=h.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):h&&h.FS?g=h.FS:g=s(d.slice(0,1024));var v=0,C=0,w=0,_=0,T=0,E=g.charCodeAt(0),A=!1,F=0,j=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var P=h.dateNF!=null?rhe(h.dateNF):null;function D(){var B=d.slice(_,T),V={};if(B.charAt(0)=='"'&&B.charAt(B.length-1)=='"'&&(B=B.slice(1,-1).replace(/""/g,'"')),B.length===0)V.t="z";else if(h.raw)V.t="s",V.v=B;else if(B.trim().length===0)V.t="s",V.v=B;else if(B.charCodeAt(0)==61)B.charCodeAt(1)==34&&B.charCodeAt(B.length-1)==34?(V.t="s",V.v=B.slice(2,-1).replace(/""/g,'"')):Pxe(B)?(V.t="n",V.f=B.slice(1)):(V.t="s",V.v=B);else if(B=="TRUE")V.t="b",V.v=!0;else if(B=="FALSE")V.t="b",V.v=!1;else if(!isNaN(w=du(B)))V.t="n",h.cellText!==!1&&(V.w=B),V.v=w;else if(!isNaN(e1(B).getDate())||P&&B.match(P)){V.z=h.dateNF||sn[14];var Y=0;P&&B.match(P)&&(B=nhe(B,h.dateNF,B.match(P)||[]),Y=1),h.cellDates?(V.t="d",V.v=Ls(B,Y)):(V.t="n",V.v=ui(Ls(B,Y))),h.cellText!==!1&&(V.w=jc(V.z,V.v instanceof Date?ui(V.v):V.v)),h.cellNF||delete V.z}else V.t="s",V.v=B;if(V.t=="z"||(h.dense?(p[v]||(p[v]=[]),p[v][C]=V):p[on({c:C,r:v})]=V),_=T+1,j=d.charCodeAt(_),y.e.c<C&&(y.e.c=C),y.e.r<v&&(y.e.r=v),F==E)++C;else if(C=0,++v,h.sheetRows&&h.sheetRows<=v)return!0}e:for(;T<d.length;++T)switch(F=d.charCodeAt(T)){case 34:j===34&&(A=!A);break;case E:case 10:case 13:if(!A&&D())break e;break}return T-_>0&&D(),p["!ref"]=Cn(y),p}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,f):F1(t(d,f),f)}function o(d,f){var h="",g=f.type=="string"?[0,0,0,0]:WN(d,f);switch(f.type){case"base64":h=Gl(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Dv<"u"||(h=Fn&&Buffer.isBuffer(d)?d.toString("binary"):uh(d));break;case"array":h=Um(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return g[0]==239&&g[1]==187&&g[2]==191?h=vs(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=vs(h):f.type=="binary"&&typeof Dv<"u",h.slice(0,19)=="socialcalc:version:"?GG.to_sheet(f.type=="string"?h:vs(h),f):i(h,f)}function c(d,f){return dh(o(d,f),f)}function u(d){for(var f=[],h=Vn(d["!ref"]),g,p=Array.isArray(d),y=h.s.r;y<=h.e.r;++y){for(var v=[],C=h.s.c;C<=h.e.c;++C){var w=on({r:y,c:C});if(g=p?(d[y]||[])[C]:d[w],!g||g.v==null){v.push("          ");continue}for(var _=(g.w||(y0(g),g.w)||"").slice(0,10);_.length<10;)_+=" ";v.push(_+(C===0?" ":""))}f.push(v.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}})();function xpe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=WG.to_workbook(e,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return t1.to_workbook(e,t)}}var bm=(function(){function e(M,I,z){if(M){Xi(M,M.l||0);for(var q=z.Enum||G;M.l<M.length;){var ne=M.read_shift(2),X=q[ne]||q[65535],se=M.read_shift(2),ce=M.l+se,pe=X.f&&X.f(M,se,z);if(M.l=ce,I(pe,X,ne))return}}}function t(M,I){switch(I.type){case"base64":return r(Bl(Gl(M)),I);case"binary":return r(Bl(M),I);case"buffer":case"array":return r(M,I)}throw"Unsupported type "+I.type}function r(M,I){if(!M)return M;var z=I||{},q=z.dense?[]:{},ne="Sheet1",X="",se=0,ce={},pe=[],be=[],oe={s:{r:0,c:0},e:{r:0,c:0}},je=z.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)z.Enum=G,e(M,function(Je,Ht,Ve){switch(Ve){case 0:z.vers=Je,Je>=4096&&(z.qpro=!0);break;case 6:oe=Je;break;case 204:Je&&(X=Je);break;case 222:X=Je;break;case 15:case 51:z.qpro||(Je[1].v=Je[1].v.slice(1));case 13:case 14:case 16:Ve==14&&(Je[2]&112)==112&&(Je[2]&15)>1&&(Je[2]&15)<15&&(Je[1].z=z.dateNF||sn[14],z.cellDates&&(Je[1].t="d",Je[1].v=b3(Je[1].v))),z.qpro&&Je[3]>se&&(q["!ref"]=Cn(oe),ce[ne]=q,pe.push(ne),q=z.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},se=Je[3],ne=X||"Sheet"+(se+1),X="");var at=z.dense?(q[Je[0].r]||[])[Je[0].c]:q[on(Je[0])];if(at){at.t=Je[1].t,at.v=Je[1].v,Je[1].z!=null&&(at.z=Je[1].z),Je[1].f!=null&&(at.f=Je[1].f);break}z.dense?(q[Je[0].r]||(q[Je[0].r]=[]),q[Je[0].r][Je[0].c]=Je[1]):q[on(Je[0])]=Je[1];break}},z);else if(M[2]==26||M[2]==14)z.Enum=W,M[2]==14&&(z.qpro=!0,M.l=0),e(M,function(Je,Ht,Ve){switch(Ve){case 204:ne=Je;break;case 22:Je[1].v=Je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Je[3]>se&&(q["!ref"]=Cn(oe),ce[ne]=q,pe.push(ne),q=z.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},se=Je[3],ne="Sheet"+(se+1)),je>0&&Je[0].r>=je)break;z.dense?(q[Je[0].r]||(q[Je[0].r]=[]),q[Je[0].r][Je[0].c]=Je[1]):q[on(Je[0])]=Je[1],oe.e.c<Je[0].c&&(oe.e.c=Je[0].c),oe.e.r<Je[0].r&&(oe.e.r=Je[0].r);break;case 27:Je[14e3]&&(be[Je[14e3][0]]=Je[14e3][1]);break;case 1537:be[Je[0]]=Je[1],Je[0]==se&&(ne=Je[1]);break}},z);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(q["!ref"]=Cn(oe),ce[X||ne]=q,pe.push(X||ne),!be.length)return{SheetNames:pe,Sheets:ce};for(var Re={},Xe=[],ft=0;ft<be.length;++ft)ce[pe[ft]]?(Xe.push(be[ft]||pe[ft]),Re[be[ft]]=ce[be[ft]]||ce[pe[ft]]):(Xe.push(be[ft]),Re[be[ft]]={"!ref":"A1"});return{SheetNames:Xe,Sheets:Re}}function n(M,I){var z=I||{};if(+z.codepage>=0&&lu(+z.codepage),z.type=="string")throw new Error("Cannot write WK1 to JS string");var q=xl(),ne=Vn(M["!ref"]),X=Array.isArray(M),se=[];mr(q,0,a(1030)),mr(q,6,c(ne));for(var ce=Math.min(ne.e.r,8191),pe=ne.s.r;pe<=ce;++pe)for(var be=Oa(pe),oe=ne.s.c;oe<=ne.e.c;++oe){pe===ne.s.r&&(se[oe]=na(oe));var je=se[oe]+be,Re=X?(M[pe]||[])[oe]:M[je];if(!(!Re||Re.t=="z"))if(Re.t=="n")(Re.v|0)==Re.v&&Re.v>=-32768&&Re.v<=32767?mr(q,13,g(pe,oe,Re.v)):mr(q,14,y(pe,oe,Re.v));else{var Xe=y0(Re);mr(q,15,f(pe,oe,Xe.slice(0,239)))}}return mr(q,1),q.end()}function s(M,I){var z=I||{};if(+z.codepage>=0&&lu(+z.codepage),z.type=="string")throw new Error("Cannot write WK3 to JS string");var q=xl();mr(q,0,i(M));for(var ne=0,X=0;ne<M.SheetNames.length;++ne)(M.Sheets[M.SheetNames[ne]]||{})["!ref"]&&mr(q,27,U(M.SheetNames[ne],X++));var se=0;for(ne=0;ne<M.SheetNames.length;++ne){var ce=M.Sheets[M.SheetNames[ne]];if(!(!ce||!ce["!ref"])){for(var pe=Vn(ce["!ref"]),be=Array.isArray(ce),oe=[],je=Math.min(pe.e.r,8191),Re=pe.s.r;Re<=je;++Re)for(var Xe=Oa(Re),ft=pe.s.c;ft<=pe.e.c;++ft){Re===pe.s.r&&(oe[ft]=na(ft));var Je=oe[ft]+Xe,Ht=be?(ce[Re]||[])[ft]:ce[Je];if(!(!Ht||Ht.t=="z"))if(Ht.t=="n")mr(q,23,D(Re,ft,se,Ht.v));else{var Ve=y0(Ht);mr(q,22,F(Re,ft,se,Ve.slice(0,239)))}}++se}}return mr(q,1),q.end()}function a(M){var I=$t(2);return I.write_shift(2,M),I}function i(M){var I=$t(26);I.write_shift(2,4096),I.write_shift(2,4),I.write_shift(4,0);for(var z=0,q=0,ne=0,X=0;X<M.SheetNames.length;++X){var se=M.SheetNames[X],ce=M.Sheets[se];if(!(!ce||!ce["!ref"])){++ne;var pe=yl(ce["!ref"]);z<pe.e.r&&(z=pe.e.r),q<pe.e.c&&(q=pe.e.c)}}return z>8191&&(z=8191),I.write_shift(2,z),I.write_shift(1,ne),I.write_shift(1,q),I.write_shift(2,0),I.write_shift(2,0),I.write_shift(1,1),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(4,0),I}function o(M,I,z){var q={s:{c:0,r:0},e:{c:0,r:0}};return I==8&&z.qpro?(q.s.c=M.read_shift(1),M.l++,q.s.r=M.read_shift(2),q.e.c=M.read_shift(1),M.l++,q.e.r=M.read_shift(2),q):(q.s.c=M.read_shift(2),q.s.r=M.read_shift(2),I==12&&z.qpro&&(M.l+=2),q.e.c=M.read_shift(2),q.e.r=M.read_shift(2),I==12&&z.qpro&&(M.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function c(M){var I=$t(8);return I.write_shift(2,M.s.c),I.write_shift(2,M.s.r),I.write_shift(2,M.e.c),I.write_shift(2,M.e.r),I}function u(M,I,z){var q=[{c:0,r:0},{t:"n",v:0},0,0];return z.qpro&&z.vers!=20768?(q[0].c=M.read_shift(1),q[3]=M.read_shift(1),q[0].r=M.read_shift(2),M.l+=2):(q[2]=M.read_shift(1),q[0].c=M.read_shift(2),q[0].r=M.read_shift(2)),q}function d(M,I,z){var q=M.l+I,ne=u(M,I,z);if(ne[1].t="s",z.vers==20768){M.l++;var X=M.read_shift(1);return ne[1].v=M.read_shift(X,"utf8"),ne}return z.qpro&&M.l++,ne[1].v=M.read_shift(q-M.l,"cstr"),ne}function f(M,I,z){var q=$t(7+z.length);q.write_shift(1,255),q.write_shift(2,I),q.write_shift(2,M),q.write_shift(1,39);for(var ne=0;ne<q.length;++ne){var X=z.charCodeAt(ne);q.write_shift(1,X>=128?95:X)}return q.write_shift(1,0),q}function h(M,I,z){var q=u(M,I,z);return q[1].v=M.read_shift(2,"i"),q}function g(M,I,z){var q=$t(7);return q.write_shift(1,255),q.write_shift(2,I),q.write_shift(2,M),q.write_shift(2,z,"i"),q}function p(M,I,z){var q=u(M,I,z);return q[1].v=M.read_shift(8,"f"),q}function y(M,I,z){var q=$t(13);return q.write_shift(1,255),q.write_shift(2,I),q.write_shift(2,M),q.write_shift(8,z,"f"),q}function v(M,I,z){var q=M.l+I,ne=u(M,I,z);if(ne[1].v=M.read_shift(8,"f"),z.qpro)M.l=q;else{var X=M.read_shift(2);T(M.slice(M.l,M.l+X),ne),M.l+=X}return ne}function C(M,I,z){var q=I&32768;return I&=-32769,I=(q?M:0)+(I>=8192?I-16384:I),(q?"":"$")+(z?na(I):Oa(I))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(M,I){Xi(M,0);for(var z=[],q=0,ne="",X="",se="",ce="";M.l<M.length;){var pe=M[M.l++];switch(pe){case 0:z.push(M.read_shift(8,"f"));break;case 1:X=C(I[0].c,M.read_shift(2),!0),ne=C(I[0].r,M.read_shift(2),!1),z.push(X+ne);break;case 2:{var be=C(I[0].c,M.read_shift(2),!0),oe=C(I[0].r,M.read_shift(2),!1);X=C(I[0].c,M.read_shift(2),!0),ne=C(I[0].r,M.read_shift(2),!1),z.push(be+oe+":"+X+ne)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:z.push("("+z.pop()+")");break;case 5:z.push(M.read_shift(2));break;case 6:{for(var je="";pe=M[M.l++];)je+=String.fromCharCode(pe);z.push('"'+je.replace(/"/g,'""')+'"')}break;case 8:z.push("-"+z.pop());break;case 23:z.push("+"+z.pop());break;case 22:z.push("NOT("+z.pop()+")");break;case 20:case 21:ce=z.pop(),se=z.pop(),z.push(["AND","OR"][pe-20]+"("+se+","+ce+")");break;default:if(pe<32&&_[pe])ce=z.pop(),se=z.pop(),z.push(se+_[pe]+ce);else if(w[pe]){if(q=w[pe][1],q==69&&(q=M[M.l++]),q>z.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+z.join("|")+"|");return}var Re=z.slice(-q);z.length-=q,z.push(w[pe][0]+"("+Re.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}z.length==1?I[1].f=""+z[0]:console.error("WK1 bad formula parse |"+z.join("|")+"|")}function E(M){var I=[{c:0,r:0},{t:"n",v:0},0];return I[0].r=M.read_shift(2),I[3]=M[M.l++],I[0].c=M[M.l++],I}function A(M,I){var z=E(M);return z[1].t="s",z[1].v=M.read_shift(I-4,"cstr"),z}function F(M,I,z,q){var ne=$t(6+q.length);ne.write_shift(2,M),ne.write_shift(1,z),ne.write_shift(1,I),ne.write_shift(1,39);for(var X=0;X<q.length;++X){var se=q.charCodeAt(X);ne.write_shift(1,se>=128?95:se)}return ne.write_shift(1,0),ne}function j(M,I){var z=E(M);z[1].v=M.read_shift(2);var q=z[1].v>>1;if(z[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return z[1].v=q,z}function P(M,I){var z=E(M),q=M.read_shift(4),ne=M.read_shift(4),X=M.read_shift(2);if(X==65535)return q===0&&ne===3221225472?(z[1].t="e",z[1].v=15):q===0&&ne===3489660928?(z[1].t="e",z[1].v=42):z[1].v=0,z;var se=X&32768;return X=(X&32767)-16446,z[1].v=(1-se*2)*(ne*Math.pow(2,X+32)+q*Math.pow(2,X)),z}function D(M,I,z,q){var ne=$t(14);if(ne.write_shift(2,M),ne.write_shift(1,z),ne.write_shift(1,I),q==0)return ne.write_shift(4,0),ne.write_shift(4,0),ne.write_shift(2,65535),ne;var X=0,se=0,ce=0,pe=0;return q<0&&(X=1,q=-q),se=Math.log2(q)|0,q/=Math.pow(2,se-31),pe=q>>>0,(pe&2147483648)==0&&(q/=2,++se,pe=q>>>0),q-=pe,pe|=2147483648,pe>>>=0,q*=Math.pow(2,32),ce=q>>>0,ne.write_shift(4,ce),ne.write_shift(4,pe),se+=16383+(X?32768:0),ne.write_shift(2,se),ne}function B(M,I){var z=P(M);return M.l+=I-14,z}function V(M,I){var z=E(M),q=M.read_shift(4);return z[1].v=q>>6,z}function Y(M,I){var z=E(M),q=M.read_shift(8,"f");return z[1].v=q,z}function re(M,I){var z=Y(M);return M.l+=I-10,z}function te(M,I){return M[M.l+I-1]==0?M.read_shift(I,"cstr"):""}function ee(M,I){var z=M[M.l++];z>I-1&&(z=I-1);for(var q="";q.length<z;)q+=String.fromCharCode(M[M.l++]);return q}function L(M,I,z){if(!(!z.qpro||I<21)){var q=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var ne=M.read_shift(I-21,"cstr");return[q,ne]}}function Q(M,I){for(var z={},q=M.l+I;M.l<q;){var ne=M.read_shift(2);if(ne==14e3){for(z[ne]=[0,""],z[ne][0]=M.read_shift(2);M[M.l];)z[ne][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return z}function U(M,I){var z=$t(5+M.length);z.write_shift(2,14e3),z.write_shift(2,I);for(var q=0;q<M.length;++q){var ne=M.charCodeAt(q);z[z.l++]=ne>127?95:ne}return z[z.l++]=0,z}var G={0:{n:"BOF",f:Ga},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:p},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:v},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:te},222:{n:"SHEETNAMELP",f:ee},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:A},23:{n:"NUMBER17",f:P},24:{n:"NUMBER18",f:j},25:{n:"FORMULA19",f:B},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:V},38:{n:"??"},39:{n:"NUMBER27",f:Y},40:{n:"FORMULA28",f:re},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:te},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:L},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function ype(e){var t={},r=e.match(To),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=un(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;t.cp=iN[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=a.val;break;case"<sz":t.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":a.rgb&&(t.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return t}var vpe=(function(){var e=Lv("t"),t=Lv("rPr");function r(a){var i=a.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Hn(i[1])},c=a.match(t);return c&&(o.s=ype(c[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}})(),bpe=(function(){var t=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(a.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(t,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}})(),wpe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,_pe=/<(?:\w+:)?r>/,Spe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function jN(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Hn(vs(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=vs(e),r&&(n.h=pN(n.t))):e.match(_pe)&&(n.r=vs(e),n.t=Hn(vs((e.replace(Spe,"").match(wpe)||[]).join("").replace(To,""))),r&&(n.h=bpe(vpe(n.r)))),n):{t:""}}var kpe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Cpe=/<(?:\w+:)?(?:si|sstItem)>/g,Tpe=/<\/(?:\w+:)?(?:si|sstItem)>/;function Npe(e,t){var r=[],n="";if(!e)return r;var s=e.match(kpe);if(s){n=s[2].replace(Cpe,"").split(Tpe);for(var a=0;a!=n.length;++a){var i=jN(n[a].trim(),t);i!=null&&(r[r.length]=i)}s=un(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Epe=/^\s|\s$|[\t\n\r]/;function VG(e,t){if(!t.bookSST)return"";var r=[La];r[r.length]=fr("sst",null,{xmlns:ng[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(Epe)&&(a+=' xml:space="preserve"'),a+=">"+fs(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Ape(e){return[e.read_shift(4),e.read_shift(4)]}function jpe(e,t){var r=[],n=!1;return A0(e,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Ppe(e,t){return t||(t=$t(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Fpe=zhe;function Mpe(e){var t=xl();Xt(t,159,Ppe(e));for(var r=0;r<e.length;++r)Xt(t,19,Fpe(e[r]));return Xt(t,160),t.end()}function qG(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function l0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Ope(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=l0(e,4),t.U=l0(e,4),t.W=l0(e,4),t}function Dpe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),a=[];s-- >0;)a.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=a,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function Rpe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Dpe(e));return t}function Ipe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Lpe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=l0(e,4),t.U=l0(e,4),t.W=l0(e,4),t}function Bpe(e){var t=Lpe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function KG(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function YG(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function $pe(e){var t=l0(e);switch(t.Minor){case 2:return[t.Minor,Upe(e)];case 3:return[t.Minor,zpe()];case 4:return[t.Minor,Wpe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Upe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=KG(e,r),s=YG(e,e.length-e.l);return{t:"Std",h:n,v:s}}function zpe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Wpe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(To,function(a){var i=un(a);switch(dd(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function Hpe(e,t){var r={},n=r.EncryptionVersionInfo=l0(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=KG(e,s),t-=s,r.EncryptionVerifier=YG(e,t),r}function Gpe(e){var t={},r=t.EncryptionVersionInfo=l0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function PN(e){var t=0,r,n=qG(e),s=n.length+1,a,i,o,c,u;for(r=Jf(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var XG=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=qG(i),c=a(o),u=o.length,d=Jf(16),f=0;f!=16;++f)d[f]=0;var h,g,p;for((u&1)===1&&(h=c>>8,d[u]=s(e[0],h),--u,h=c&255,g=o[o.length-1],d[u]=s(g,h));u>0;)--u,h=c>>8,d[u]=s(o[u],h),--u,h=c&255,d[u]=s(o[u],h);for(u=15,p=15-o.length;p>0;)h=c>>8,d[u]=s(e[p],h),--u,--p,h=c&255,d[u]=s(o[u],h),--u,--p;return d}})(),Vpe=function(e,t,r,n,s){s||(s=t),n||(n=XG(e));var a,i;for(a=0;a!=t.length;++a)i=t[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},qpe=function(e){var t=0,r=XG(e);return function(n){var s=Vpe("",n,t,r);return t=s[1],s[0]}};function Kpe(e,t,r,n){var s={key:Ga(e),verificationBytes:Ga(e)};return r.password&&(s.verifier=PN(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=qpe(r.password)),s}function Ype(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Gpe(e):n.Data=Hpe(e,t),n}function Xpe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Ype(e,t-2,n):Kpe(e,r.biff>=8?t:t-2,r,n),n}var JG=(function(){function e(s,a){switch(a.type){case"base64":return t(Gl(s),a);case"binary":return t(s,a);case"buffer":return t(Fn&&Buffer.isBuffer(s)?s.toString("binary"):uh(s),a);case"array":return t(Um(s),a)}throw new Error("Unrecognized type "+a.type)}function t(s,a){var i=a||{},o=i.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,g=0,p,y=-1;p=h.exec(d);){switch(p[0]){case"\\cell":var v=d.slice(g,h.lastIndex-p[0].length);if(v[0]==" "&&(v=v.slice(1)),++y,v.length){var C={v,t:"s"};Array.isArray(o)?o[f][y]=C:o[on({r:f,c:y})]=C}break}g=h.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=Cn(u),o}function r(s,a){return dh(e(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=Vn(s["!ref"]),o,c=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=on({r:u,c:d});o=c?(s[u]||[])[d]:s[f],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(y0(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function Jpe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function zv(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Qpe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),a=Math.min(t,r,n),i=s-a;if(i===0)return[0,0,t];var o=0,c=0,u=s+a;switch(c=i/(u>1?2-u:u),s){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function Zpe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=s*o,i[0]+=s,i[1]+=c;break;case 1:c=s*(2-o),i[0]+=c,i[1]+=s;break;case 2:c=s*(o-2),i[1]+=s,i[2]+=c;break;case 3:c=s*(4-o),i[1]+=c,i[2]+=s;break;case 4:c=s*(o-4),i[2]+=s,i[0]+=c;break;case 5:c=s*(6-o),i[2]+=c,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function Z4(e,t){if(t===0)return e;var r=Qpe(Jpe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),zv(Zpe(r))}var QG=6,e1e=15,t1e=1,xo=QG;function Wv(e){return Math.floor((e+Math.round(128/xo)/256)*xo)}function Hv(e){return Math.floor((e-5)/xo*100+.5)/100}function e_(e){return Math.round((e*xo+5)/xo*256)/256}function X5(e){return e_(Hv(Wv(e)))}function FN(e){var t=Math.abs(e-X5(e)),r=xo;if(t>.005)for(xo=t1e;xo<e1e;++xo)Math.abs(e-X5(e))<=t&&(t=Math.abs(e-X5(e)),r=xo);xo=r}function Qf(e){e.width?(e.wpx=Wv(e.width),e.wch=Hv(e.wpx),e.MDW=xo):e.wpx?(e.wch=Hv(e.wpx),e.width=e_(e.wch),e.MDW=xo):typeof e.wch=="number"&&(e.width=e_(e.wch),e.wpx=Wv(e.width),e.MDW=xo),e.customWidth&&delete e.customWidth}var r1e=96,ZG=r1e;function Gv(e){return e*96/ZG}function r1(e){return e*ZG/96}var n1e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function s1e(e,t,r,n){t.Borders=[];var s={},a=!1;(e[0].match(To)||[]).forEach(function(i){var o=un(i);switch(dd(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=Ds(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=Ds(o.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function a1e(e,t,r,n){t.Fills=[];var s={},a=!1;(e[0].match(To)||[]).forEach(function(i){var o=un(i);switch(dd(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function i1e(e,t,r,n){t.Fonts=[];var s={},a=!1;(e[0].match(To)||[]).forEach(function(i){var o=un(i);switch(dd(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=vs(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?Ds(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?Ds(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?Ds(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?Ds(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?Ds(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?Ds(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?Ds(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=iN[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=Ds(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var c=ym[s.color.index];s.color.index==81&&(c=ym[1]),c||(c=ym[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Z4(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function o1e(e,t,r){t.NumberFmt=[];for(var n=va(sn),s=0;s<n.length;++s)t.NumberFmt[n[s]]=sn[n[s]];var a=e[0].match(To);if(a)for(s=0;s<a.length;++s){var i=un(a[s]);switch(dd(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Hn(vs(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}o0(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function l1e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=fr("numFmt",null,{numFmtId:n,formatCode:fs(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=fr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Nw=["numFmtId","fillId","fontId","borderId","xfId"],Ew=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function c1e(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(To)||[]).forEach(function(a){var i=un(a),o=0;switch(dd(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<Nw.length;++o)n[Nw[o]]&&(n[Nw[o]]=parseInt(n[Nw[o]],10));for(o=0;o<Ew.length;++o)n[Ew[o]]&&(n[Ew[o]]=Ds(n[Ew[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ds(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function u1e(e){var t=[];return t[t.length]=fr("cellXfs",null),e.forEach(function(r){t[t.length]=fr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=fr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var d1e=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&o1e(f,d,u),(f=o.match(s))&&i1e(f,d,c,u),(f=o.match(n))&&a1e(f,d,c,u),(f=o.match(a))&&s1e(f,d,c,u),(f=o.match(r))&&c1e(f,d,u),d}})();function eV(e,t){var r=[La,fr("styleSheet",null,{xmlns:ng[0],"xmlns:vt":oi.vt})],n;return e.SSF&&(n=l1e(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=u1e(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function f1e(e,t){var r=e.read_shift(2),n=So(e);return[r,n]}function h1e(e,t,r){r||(r=$t(6+4*t.length)),r.write_shift(2,e),Ai(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function m1e(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=Yhe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=e.read_shift(2);switch(a===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=Khe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=So(e),n}function g1e(e,t){t||(t=$t(153)),t.write_shift(2,e.sz*20),Xhe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),X4(e.color,t);var n=0;return n=2,t.write_shift(1,n),Ai(e.name,t),t.length>t.l?t.slice(0,t.l):t}var p1e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],J5,x1e=Co;function dD(e,t){t||(t=$t(84)),J5||(J5=y3(p1e));var r=J5[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(X4({auto:1},t),X4({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function y1e(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function tV(e,t,r){r||(r=$t(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Ay(e,t){return t||(t=$t(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var v1e=Co;function b1e(e,t){return t||(t=$t(51)),t.write_shift(1,0),Ay(null,t),Ay(null,t),Ay(null,t),Ay(null,t),Ay(null,t),t.length>t.l?t.slice(0,t.l):t}function w1e(e,t){return t||(t=$t(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Y4(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function _1e(e,t,r){var n=$t(2052);return n.write_shift(4,e),Y4(t,n),Y4(r,n),n.length>n.l?n.slice(0,n.l):n}function S1e(e,t,r){var n={};n.NumberFmt=[];for(var s in sn)n.NumberFmt[s]=sn[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return A0(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],o0(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Z4(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function k1e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Xt(e,615,fu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Xt(e,44,h1e(s,t[s]))}),Xt(e,616))}}function C1e(e){var t=1;Xt(e,611,fu(t)),Xt(e,43,g1e({sz:12,color:{theme:1},name:"Calibri",family:2})),Xt(e,612)}function T1e(e){var t=2;Xt(e,603,fu(t)),Xt(e,45,dD({patternType:"none"})),Xt(e,45,dD({patternType:"gray125"})),Xt(e,604)}function N1e(e){var t=1;Xt(e,613,fu(t)),Xt(e,46,b1e()),Xt(e,614)}function E1e(e){var t=1;Xt(e,626,fu(t)),Xt(e,47,tV({numFmtId:0},65535)),Xt(e,627)}function A1e(e,t){Xt(e,617,fu(t.length)),t.forEach(function(r){Xt(e,47,tV(r,0))}),Xt(e,618)}function j1e(e){var t=1;Xt(e,619,fu(t)),Xt(e,48,w1e({xfId:0,name:"Normal"})),Xt(e,620)}function P1e(e){var t=0;Xt(e,505,fu(t)),Xt(e,506)}function F1e(e){var t=0;Xt(e,508,_1e(t,"TableStyleMedium9","PivotStyleMedium4")),Xt(e,509)}function M1e(e,t){var r=xl();return Xt(r,278),k1e(r,e.SSF),C1e(r),T1e(r),N1e(r),E1e(r),A1e(r,t.cellXfs),j1e(r),P1e(r),F1e(r),Xt(r,279),r.end()}var O1e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function D1e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(To)||[]).forEach(function(s){var a=un(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(t.themeElements.clrScheme[O1e.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function R1e(){}function I1e(){}var L1e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,B1e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,$1e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function U1e(e,t,r){t.themeElements={};var n;[["clrScheme",L1e,D1e],["fontScheme",B1e,R1e],["fmtScheme",$1e,I1e]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var z1e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function rV(e,t){(!e||e.length===0)&&(e=MN());var r,n={};if(!(r=e.match(z1e)))throw new Error("themeElements not found in theme");return U1e(r[0],n,t),n.raw=e,n}function MN(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[La];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function W1e(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var a=e.slice(e.l);e.l=n;var i;try{i=KH(a,{type:"array"})}catch{return}var o=$l(i,"theme/theme/theme1.xml",!0);if(o)return rV(o,r)}}function H1e(e){return e.read_shift(4)}function G1e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=V1e(e,4);break;case 2:t.xclrValue=DG(e);break;case 3:t.xclrValue=H1e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function V1e(e,t){return Co(e,t)}function q1e(e,t){return Co(e,t)}function K1e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=G1e(e);break;case 6:n[1]=q1e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Y1e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),a=[];s-- >0;)a.push(K1e(e,r-e.l));return{ixfe:n,ext:a}}function X1e(e,t){t.forEach(function(r){r[0]})}function J1e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:So(e)}}function Q1e(e){var t=$t(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ai(e.name,t),t.slice(0,t.l)}function Z1e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function exe(e){var t=$t(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function txe(e,t){var r=$t(8+2*t.length);return r.write_shift(4,e),Ai(t,r),r.slice(0,r.l)}function rxe(e){return e.l+=4,e.read_shift(4)!=0}function nxe(e,t){var r=$t(8);return r.write_shift(4,e),r.write_shift(4,1),r}function sxe(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return A0(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function axe(){var e=xl();return Xt(e,332),Xt(e,334,fu(1)),Xt(e,335,Q1e({name:"XLDAPR",version:12e4,flags:3496657072})),Xt(e,336),Xt(e,339,txe(1,"XLDAPR")),Xt(e,52),Xt(e,35,fu(514)),Xt(e,4096,fu(0)),Xt(e,4097,xc(1)),Xt(e,36),Xt(e,53),Xt(e,340),Xt(e,337,nxe(1)),Xt(e,51,exe([[1,0]])),Xt(e,338),Xt(e,333),e.end()}function ixe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,a=2,i;return e.replace(To,function(o){var c=un(o);switch(dd(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):a==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function nV(){var e=[La];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function oxe(e){var t=[];if(!e)return t;var r=1;return(e.match(To)||[]).forEach(function(n){var s=un(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function lxe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=on(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function cxe(e,t,r){var n=[];return A0(e,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function uxe(e,t,r,n){if(!e)return e;var s=n||{},a=!1;A0(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!c.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function dxe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Ep=1024;function sV(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[fr("xml",null,{"xmlns:v":Dl.v,"xmlns:o":Dl.o,"xmlns:x":Dl.x,"xmlns:mv":Dl.mv}).replace(/\/>/,">"),fr("o:shapelayout",fr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),fr("v:shapetype",[fr("v:stroke",null,{joinstyle:"miter"}),fr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Ep<e*1e3;)Ep+=1e3;return t.forEach(function(a){var i=sa(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?fr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=fr("v:fill",c,o),d={on:"t",obscured:"t"};++Ep,s=s.concat(["<v:shape"+Bv({id:"_x0000_s"+Ep,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,fr("v:shadow",null,d),fr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Zi("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),Zi("x:AutoFill","False"),Zi("x:Row",String(i.r)),Zi("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function fD(e,t,r,n){var s=Array.isArray(e),a;t.forEach(function(i){var o=sa(i.ref);if(s?(e[o.r]||(e[o.r]=[]),a=e[o.r][o.c]):a=e[i.ref],!a){a={t:"z"},s?e[o.r][o.c]=a:e[i.ref]=a;var c=Vn(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=Cn(c);u!==e["!ref"]&&(e["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=a.c.length-1;f>=0;--f){if(!r&&a.c[f].T)return;r&&!a.c[f].T&&a.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}a.c.push(d)})}function fxe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=un(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=sa(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&jN(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function aV(e){var t=[La,fr("comments",null,{xmlns:ng[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var a=fs(s.a);r.indexOf(a)==-1&&(r.push(a),t.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(fs(c.a))),a.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)t.push(Zi("t",fs(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;t.push(Zi("t",fs(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function hxe(e,t){var r=[],n=!1,s={},a=0;return e.replace(To,function(o,c){var u=un(o);switch(dd(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=c+o.length;break;case"</text>":s.t=e.slice(a,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function mxe(e,t,r){var n=[La,fr("ThreadedComments",null,{xmlns:oi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=c.id:c.parentId=a,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(fr("threadedComment",Zi("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function gxe(e,t){var r=[],n=!1;return e.replace(To,function(a){var i=un(a);switch(dd(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function pxe(e){var t=[La,fr("personList",null,{xmlns:oi.TCMNT,"xmlns:x":ng[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(fr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function xxe(e){var t={};t.iauthor=e.read_shift(4);var r=og(e);return t.rfx=r.s,t.ref=on(r.s),e.l+=16,t}function yxe(e,t){return t==null&&(t=$t(36)),t.write_shift(4,e[1].iauthor),M1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var vxe=So;function bxe(e){return Ai(e.slice(0,54))}function wxe(e,t){var r=[],n=[],s={},a=!1;return A0(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!a||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function _xe(e){var t=xl(),r=[];return Xt(t,628),Xt(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Xt(t,632,bxe(s.a)))})}),Xt(t,631),Xt(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:sa(n[0]),e:sa(n[0])};Xt(t,635,yxe([a,s])),s.t&&s.t.length>0&&Xt(t,637,Hhe(s)),Xt(t,636),delete s.iauthor})}),Xt(t,634),Xt(t,629),t.end()}var Sxe="application/vnd.ms-office.vbaProject";function kxe(e){var t=Yr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Yr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Yr.write(t)}function Cxe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Yr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var iV=["xlsb","xlsm","xlam","biff8","xla"];function Txe(){return{"!type":"dialog"}}function Nxe(){return{"!type":"dialog"}}function Exe(){return{"!type":"macro"}}function Axe(){return{"!type":"macro"}}var $p=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,a,i){var o=!1,c=!1;a.length==0?c=!0:a.charAt(0)=="["&&(c=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,s+(o?"":"$")+na(d)+(c?"":"$")+Oa(u)}return function(s,a){return t=a,s.replace(e,r)}})(),ON=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,DN=(function(){return function(t,r){return t.replace(ON,function(n,s,a,i,o,c){var u=wN(i)-(a?0:r.c),d=bN(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":a?u+1:"["+u+"]";return s+"R"+f+"C"+h})}})();function oV(e,t){return e.replace(ON,function(r,n,s,a,i,o){return n+(s=="$"?s+a:na(wN(a)+t.c))+(i=="$"?i+o:Oa(bN(o)+t.r))})}function jxe(e,t,r){var n=yl(t),s=n.s,a=sa(r),i={r:a.r-s.r,c:a.c-s.c};return oV(e,i)}function Pxe(e){return e.length!=1}function hD(e){return e.replace(/_xlfn\./g,"")}function Wa(e){e.l+=1}function Zf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function lV(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return cV(e);r.biff==12&&(n=4)}var s=e.read_shift(n),a=e.read_shift(n),i=Zf(e),o=Zf(e);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function cV(e){var t=Zf(e),r=Zf(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Fxe(e,t,r){if(r.biff<8)return cV(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),a=Zf(e),i=Zf(e);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function uV(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Mxe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Zf(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Mxe(e){var t=Zf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Oxe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Dxe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Rxe(e);var s=e.read_shift(n>=12?4:2),a=e.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function Rxe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function Ixe(e,t,r){var n=(e[e.l++]&96)>>5,s=lV(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Lxe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}var i=lV(e,a,r);return[n,s,i]}function Bxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function $xe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=8;if(r)switch(r.biff){case 5:e.l+=12,a=6;break;case 12:a=12;break}return e.l+=a,[n,s]}function Uxe(e,t,r){var n=(e[e.l++]&96)>>5,s=Fxe(e,t-1,r);return[n,s]}function zxe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function mD(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Wxe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Hxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Gxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Vxe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function qxe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function dV(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Kxe(e){return e.read_shift(2),dV(e)}function Yxe(e){return e.read_shift(2),dV(e)}function Xxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=uV(e,0,r);return[n,s]}function Jxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=Dxe(e,0,r);return[n,s]}function Qxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var a=uV(e,0,r);return[n,s,a]}function Zxe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[rve[s],mV[s],n]}function eye(e,t,r){var n=e[e.l++],s=e.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:tye(e);return[s,(a[0]===0?mV:tve)[a[1]]]}function tye(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function rye(e,t,r){e.l+=r&&r.biff==2?3:4}function nye(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function sye(e){return e.l++,j0[e.read_shift(1)]}function aye(e){return e.l++,e.read_shift(2)}function iye(e){return e.l++,e.read_shift(1)!==0}function oye(e){return e.l++,vo(e)}function lye(e,t,r){return e.l++,P2(e,t-1,r)}function cye(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ea(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=j0[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=vo(e);break;case 2:r[1]=lg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function uye(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?og:w3)(e));return s}function dye(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=cye(e,r.biff);return i}function fye(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,a]}function hye(e,t,r){if(r.biff==5)return mye(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),a=e.read_shift(4);return[n,s,a]}function mye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function gye(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function pye(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function xye(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function yye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return e.l+=a,[n,s]}var vye=Co,bye=Co,wye=Co;function M2(e,t,r){return e.l+=2,[Oxe(e)]}function RN(e){return e.l+=6,[]}var _ye=M2,Sye=RN,kye=RN,Cye=M2;function fV(e){return e.l+=2,[Ga(e),e.read_shift(2)&1]}var Tye=M2,Nye=fV,Eye=RN,Aye=M2,jye=M2,Pye=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function Fye(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),a=e.read_shift(2),i=Pye[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:s,C:a}}function Mye(e){return e.l+=2,[e.read_shift(4)]}function Oye(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Dye(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Rye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Iye(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Lye(e){return e.l+=4,[0,0]}var gD={1:{n:"PtgExp",f:nye},2:{n:"PtgTbl",f:wye},3:{n:"PtgAdd",f:Wa},4:{n:"PtgSub",f:Wa},5:{n:"PtgMul",f:Wa},6:{n:"PtgDiv",f:Wa},7:{n:"PtgPower",f:Wa},8:{n:"PtgConcat",f:Wa},9:{n:"PtgLt",f:Wa},10:{n:"PtgLe",f:Wa},11:{n:"PtgEq",f:Wa},12:{n:"PtgGe",f:Wa},13:{n:"PtgGt",f:Wa},14:{n:"PtgNe",f:Wa},15:{n:"PtgIsect",f:Wa},16:{n:"PtgUnion",f:Wa},17:{n:"PtgRange",f:Wa},18:{n:"PtgUplus",f:Wa},19:{n:"PtgUminus",f:Wa},20:{n:"PtgPercent",f:Wa},21:{n:"PtgParen",f:Wa},22:{n:"PtgMissArg",f:Wa},23:{n:"PtgStr",f:lye},26:{n:"PtgSheet",f:Oye},27:{n:"PtgEndSheet",f:Dye},28:{n:"PtgErr",f:sye},29:{n:"PtgBool",f:iye},30:{n:"PtgInt",f:aye},31:{n:"PtgNum",f:oye},32:{n:"PtgArray",f:zxe},33:{n:"PtgFunc",f:Zxe},34:{n:"PtgFuncVar",f:eye},35:{n:"PtgName",f:fye},36:{n:"PtgRef",f:Xxe},37:{n:"PtgArea",f:Ixe},38:{n:"PtgMemArea",f:gye},39:{n:"PtgMemErr",f:vye},40:{n:"PtgMemNoMem",f:bye},41:{n:"PtgMemFunc",f:pye},42:{n:"PtgRefErr",f:xye},43:{n:"PtgAreaErr",f:Bxe},44:{n:"PtgRefN",f:Jxe},45:{n:"PtgAreaN",f:Uxe},46:{n:"PtgMemAreaN",f:Rye},47:{n:"PtgMemNoMemN",f:Iye},57:{n:"PtgNameX",f:hye},58:{n:"PtgRef3d",f:Qxe},59:{n:"PtgArea3d",f:Lxe},60:{n:"PtgRefErr3d",f:yye},61:{n:"PtgAreaErr3d",f:$xe},255:{}},Bye={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},$ye={1:{n:"PtgElfLel",f:fV},2:{n:"PtgElfRw",f:Aye},3:{n:"PtgElfCol",f:_ye},6:{n:"PtgElfRwV",f:jye},7:{n:"PtgElfColV",f:Cye},10:{n:"PtgElfRadical",f:Tye},11:{n:"PtgElfRadicalS",f:Eye},13:{n:"PtgElfColS",f:Sye},15:{n:"PtgElfColSV",f:kye},16:{n:"PtgElfRadicalLel",f:Nye},25:{n:"PtgList",f:Fye},29:{n:"PtgSxName",f:Mye},255:{}},Uye={0:{n:"PtgAttrNoop",f:Lye},1:{n:"PtgAttrSemi",f:qxe},2:{n:"PtgAttrIf",f:Gxe},4:{n:"PtgAttrChoose",f:Wxe},8:{n:"PtgAttrGoto",f:Hxe},16:{n:"PtgAttrSum",f:rye},32:{n:"PtgAttrBaxcel",f:mD},33:{n:"PtgAttrBaxcel",f:mD},64:{n:"PtgAttrSpace",f:Kxe},65:{n:"PtgAttrSpaceSemi",f:Yxe},128:{n:"PtgAttrIfError",f:Vxe},255:{}};function O2(e,t,r,n){if(n.biff<8)return Co(e,t);for(var s=e.l+t,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=dye(e,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=uye(e,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=s-e.l,t!==0&&a.push(Co(e,t)),a}function D2(e,t,r){for(var n=e.l+t,s,a,i=[];n!=e.l;)t=n-e.l,a=e[e.l],s=gD[a]||gD[Bye[a]],(a===24||a===25)&&(s=(a===24?$ye:Uye)[e[e.l+1]]),!s||!s.f?Co(e,t):i.push([s.n,s.f(e,t,r)]);return i}function zye(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var Wye={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Hye(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function hV(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function pD(e,t,r){var n=hV(e,t,r);return n=="#REF"?n:Hye(n,r)}function po(e,t,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,g,p="";if(!e[0]||!e[0][0])return"";for(var y=-1,v="",C=0,w=e[0].length;C<w;++C){var _=e[0][C];switch(_[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),y>=0){switch(e[0][y][1][0]){case 0:v=xa(" ",e[0][y][1][1]);break;case 1:v=xa("\r",e[0][y][1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}u=u+v,y=-1}o.push(u+Wye[_[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=av(_[1][1],i,s),o.push(iv(d,a));break;case"PtgRefN":d=r?av(_[1][1],r,s):_[1][1],o.push(iv(d,a));break;case"PtgRef3d":f=_[1][1],d=av(_[1][2],i,s),p=pD(n,f,s),o.push(p+"!"+iv(d,a));break;case"PtgFunc":case"PtgFuncVar":var T=_[1][0],E=_[1][1];T||(T=0),T&=127;var A=T==0?[]:o.slice(-T);o.length-=T,E==="User"&&(E=A.shift()),o.push(E+"("+A.join(",")+")");break;case"PtgBool":o.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(_[1]);break;case"PtgNum":o.push(String(_[1]));break;case"PtgStr":o.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(_[1]);break;case"PtgAreaN":g=GO(_[1][1],r?{s:r}:i,s),o.push(q5(g,s));break;case"PtgArea":g=GO(_[1][1],i,s),o.push(q5(g,s));break;case"PtgArea3d":f=_[1][1],g=_[1][2],p=pD(n,f,s),o.push(p+"!"+q5(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var F=(n.names||[])[h-1]||(n[0]||[])[h],j=F?F.Name:"SH33TJSNAME"+String(h);j&&j.slice(0,6)=="_xlfn."&&!s.xlfn&&(j=j.slice(6)),o.push(j);break;case"PtgNameX":var P=_[1][1];h=_[1][2];var D;if(s.biff<=5)P<0&&(P=-P),n[P]&&(D=n[P][h]);else{var B="";if(((n[P]||[])[0]||[])[0]==14849||(((n[P]||[])[0]||[])[0]==1025?n[P][h]&&n[P][h].itab>0&&(B=n.SheetNames[n[P][h].itab-1]+"!"):B=n.SheetNames[h-1]+"!"),n[P]&&n[P][h])B+=n[P][h].Name;else if(n[0]&&n[0][h])B+=n[0][h].Name;else{var V=(hV(n,P,s)||"").split(";;");V[h-1]?B=V[h-1]:B+="SH33TJSERRX"}o.push(B);break}D||(D={Name:"SH33TJSERRY"}),o.push(D.Name);break;case"PtgParen":var Y="(",re=")";if(y>=0){switch(v="",e[0][y][1][0]){case 2:Y=xa(" ",e[0][y][1][1])+Y;break;case 3:Y=xa("\r",e[0][y][1][1])+Y;break;case 4:re=xa(" ",e[0][y][1][1])+re;break;case 5:re=xa("\r",e[0][y][1][1])+re;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}o.push(Y+o.pop()+re);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var te={c:r.c,r:r.r};if(n.sharedf[on(d)]){var ee=n.sharedf[on(d)];o.push(po(ee,i,te,n,s))}else{var L=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(po(u[1],i,te,n,s)),L=!0;break}L||o.push(_[1])}break;case"PtgArray":o.push("{"+zye(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=C;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var Q=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&Q.indexOf(e[0][C][0])==-1){_=e[0][y];var U=!0;switch(_[1][0]){case 4:U=!1;case 0:v=xa(" ",_[1][1]);break;case 5:U=!1;case 1:v=xa("\r",_[1][1]);break;default:if(v="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}o.push((U?v:"")+o.pop()+(U?"":v)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function Gye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],Co(e,t-2)];var o=D2(e,i,r);return t!==i+s&&(a=O2(e,t-i-s,o,r)),e.l=n,[o,a]}function Vye(e,t,r){var n=e.l+t,s=r.biff==2?1:2,a,i=e.read_shift(s);if(i==65535)return[[],Co(e,t-2)];var o=D2(e,i,r);return t!==i+s&&(a=O2(e,t-i-s,o,r)),e.l=n,[o,a]}function qye(e,t,r,n){var s=e.l+t,a=D2(e,n,r),i;return s!==e.l&&(i=O2(e,s-e.l,a,r)),[a,i]}function Kye(e,t,r){var n=e.l+t,s,a=e.read_shift(2),i=D2(e,a,r);return a==65535?[[],Co(e,t-2)]:(t!==a+2&&(s=O2(e,n-a-2,i,r)),[i,s])}function Yye(e){var t;if(e0(e,e.l+6)!==65535)return[vo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Xye(e){if(e==null){var t=$t(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return zm(e);return zm(0)}function Q5(e,t,r){var n=e.l+t,s=fd(e);r.biff==2&&++e.l;var a=Yye(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=Vye(e,n-e.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function Jye(e,t,r,n,s){var a=Hm(t,r,s),i=Xye(e.v),o=$t(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=$t(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Ni([a,i,o,u]);return f}function _3(e,t,r){var n=e.read_shift(4),s=D2(e,n,r),a=e.read_shift(4),i=a>0?O2(e,a,s,r):null;return[s,i]}var Qye=_3,S3=_3,Zye=_3,eve=_3,tve={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},mV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},rve={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function xD(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function nve(e){var t="of:="+e.replace(ON,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Z5(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function sve(e){return e.replace(/\./,"!")}var lv={},Up={},cv=typeof Map<"u";function IN(e,t,r){var n=0,s=e.length;if(r){if(cv?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var a=cv?r.get(t):r[t];n<a.length;++n)if(e[a[n]].t===t)return e.Count++,a[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(cv?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function k3(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(xo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Hv(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=e_(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function wm(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function fh(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,a=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){o0(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=a;++s)if(e[s].numFmtId===n)return s;return e[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function gV(e,t,r,n,s,a){try{n.cellNF&&(e.z=sn[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ls(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(sn[t]==null&&o0(the[t]||"General",t),e.t==="e")e.w=e.w||j0[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Iv(e.v);else if(e.t==="d"){var i=ui(e.v);(i|0)===i?e.w=i.toString(10):e.w=Iv(i)}else{if(e.v===void 0)return"";e.w=$m(e.v,Up)}else e.t==="d"?e.w=jc(t,ui(e.v),Up):e.w=jc(t,e.v,Up)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=a.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Z4(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Z4(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function ave(e,t,r){if(e&&e["!ref"]){var n=Vn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function ive(e,t){var r=Vn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Cn(r))}var ove=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,lve=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,cve=/<(?:\w:)?hyperlink [^>]*>/mg,uve=/"(\w*:\w*)"/,dve=/<(?:\w:)?col\b[^>]*[\/]?>/g,fve=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,hve=/<(?:\w:)?pageMargins[^>]*\/>/g,pV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,mve=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,gve=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function pve(e,t,r,n,s,a,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(lve);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(pV);h?LN(h[0],o,s,r):(h=u.match(mve))&&yve(h[0],h[1]||"",o,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var p=u.slice(g,g+50).match(uve);p&&ive(o,p[1])}var y=u.match(gve);y&&y[1]&&Pve(y[1],s);var v=[];if(t.cellStyles){var C=u.match(dve);C&&Tve(v,C)}f&&Ove(f[1],o,t,c,a,i);var w=d.match(fve);w&&(o["!autofilter"]=Eve(w[0]));var _=[],T=d.match(ove);if(T)for(g=0;g!=T.length;++g)_[g]=Vn(T[g].slice(T[g].indexOf('"')+1));var E=d.match(cve);E&&Sve(o,E,n);var A=d.match(hve);if(A&&(o["!margins"]=kve(un(A[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Cn(c)),t.sheetRows>0&&o["!ref"]){var F=Vn(o["!ref"]);t.sheetRows<=+F.e.r&&(F.e.r=t.sheetRows-1,F.e.r>c.e.r&&(F.e.r=c.e.r),F.e.r<F.s.r&&(F.s.r=F.e.r),F.e.c>c.e.c&&(F.e.c=c.e.c),F.e.c<F.s.c&&(F.s.c=F.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Cn(F))}return v.length>0&&(o["!cols"]=v),_.length>0&&(o["!merges"]=_),o}function xve(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Cn(e[r])+'"/>';return t+"</mergeCells>"}function LN(e,t,r,n){var s=un(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Hn(vs(s.codeName)))}function yve(e,t,r,n,s){LN(e.slice(0,e.indexOf(">")),r,n,s)}function vve(e,t,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}a=!0,i.codeName=Xu(fs(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+fr("outlinePr",null,u)}!a&&!o||(s[s.length]=fr("sheetPr",o,i))}var bve=["objects","scenarios","selectLockedCells","selectUnlockedCells"],wve=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function _ve(e){var t={sheet:1};return bve.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),wve.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=PN(e.password).toString(16).toUpperCase()),fr("sheetProtection",null,t)}function Sve(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var a=un(vs(t[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+Hn(a.location))):(a.Target="#"+Hn(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=Vn(a.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=on({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=a):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=a)}}}function kve(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Cve(e){return wm(e),fr("pageMargins",null,e)}function Tve(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=un(t[n],!0);s.hidden&&(s.hidden=Ds(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,FN(s.width)),Qf(s);a<=i;)e[a++]=Bs(s)}}function Nve(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=fr("col",null,k3(s,n)));return r[r.length]="</cols>",r.join("")}function Eve(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Ave(e,t,r,n){var s=typeof e.ref=="string"?e.ref:Cn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=yl(s);i.s.r==i.e.r&&(i.e.r=yl(t["!ref"]).e.r,s=Cn(i));for(var o=0;o<a.length;++o){var c=a[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),fr("autoFilter",null,{ref:s})}var jve=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Pve(e,t){t.Views||(t.Views=[{}]),(e.match(jve)||[]).forEach(function(r,n){var s=un(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Ds(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function Fve(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),fr("sheetViews",fr("sheetView",null,s),{})}function Mve(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",a=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=j0[e.v];break;case"d":n&&n.cellDates?s=Ls(e.v,-1).toISOString():(e=Bs(e),e.t="n",s=""+(e.v=ui(Ls(e.v)))),typeof e.z>"u"&&(e.z=sn[14]);break;default:s=e.v;break}var o=Zi("v",fs(s)),c={r:t},u=fh(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Zi("v",""+IN(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=a&&(e.t=a,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=fr("f",fs(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),fr("c",o,c)}var Ove=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Lv("v"),i=Lv("f");return function(c,u,d,f,h,g){for(var p=0,y="",v=[],C=[],w=0,_=0,T=0,E="",A,F,j=0,P=0,D,B,V=0,Y=0,re=Array.isArray(g.CellXf),te,ee=[],L=[],Q=Array.isArray(u),U=[],G={},W=!1,M=!!d.sheetStubs,I=c.split(t),z=0,q=I.length;z!=q;++z){y=I[z].trim();var ne=y.length;if(ne!==0){var X=0;e:for(p=0;p<ne;++p)switch(y[p]){case">":if(y[p-1]!="/"){++p;break e}if(d&&d.cellStyles){if(F=un(y.slice(X,p),!0),j=F.r!=null?parseInt(F.r,10):j+1,P=-1,d.sheetRows&&d.sheetRows<j)continue;G={},W=!1,F.ht&&(W=!0,G.hpt=parseFloat(F.ht),G.hpx=r1(G.hpt)),F.hidden=="1"&&(W=!0,G.hidden=!0),F.outlineLevel!=null&&(W=!0,G.level=+F.outlineLevel),W&&(U[j-1]=G)}break;case"<":X=p;break}if(X>=p)break;if(F=un(y.slice(X,p),!0),j=F.r!=null?parseInt(F.r,10):j+1,P=-1,!(d.sheetRows&&d.sheetRows<j)){f.s.r>j-1&&(f.s.r=j-1),f.e.r<j-1&&(f.e.r=j-1),d&&d.cellStyles&&(G={},W=!1,F.ht&&(W=!0,G.hpt=parseFloat(F.ht),G.hpx=r1(G.hpt)),F.hidden=="1"&&(W=!0,G.hidden=!0),F.outlineLevel!=null&&(W=!0,G.level=+F.outlineLevel),W&&(U[j-1]=G)),v=y.slice(p).split(e);for(var se=0;se!=v.length&&v[se].trim().charAt(0)=="<";++se);for(v=v.slice(se),p=0;p!=v.length;++p)if(y=v[p].trim(),y.length!==0){if(C=y.match(r),w=p,_=0,T=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,C!=null&&C.length===2){for(w=0,E=C[1],_=0;_!=E.length&&!((T=E.charCodeAt(_)-64)<1||T>26);++_)w=26*w+T;--w,P=w}else++P;for(_=0;_!=y.length&&y.charCodeAt(_)!==62;++_);if(++_,F=un(y.slice(0,_),!0),F.r||(F.r=on({r:j-1,c:P})),E=y.slice(_),A={t:""},(C=E.match(a))!=null&&C[1]!==""&&(A.v=Hn(C[1])),d.cellFormula){if((C=E.match(i))!=null&&C[1]!==""){if(A.f=Hn(vs(C[1])).replace(/\r\n/g,`
`),d.xlfn||(A.f=hD(A.f)),C[0].indexOf('t="array"')>-1)A.F=(E.match(s)||[])[1],A.F.indexOf(":")>-1&&ee.push([Vn(A.F),A.F]);else if(C[0].indexOf('t="shared"')>-1){B=un(C[0]);var ce=Hn(vs(C[1]));d.xlfn||(ce=hD(ce)),L[parseInt(B.si,10)]=[B,ce,F.r]}}else(C=E.match(/<f[^>]*\/>/))&&(B=un(C[0]),L[B.si]&&(A.f=jxe(L[B.si][1],L[B.si][2],F.r)));var pe=sa(F.r);for(_=0;_<ee.length;++_)pe.r>=ee[_][0].s.r&&pe.r<=ee[_][0].e.r&&pe.c>=ee[_][0].s.c&&pe.c<=ee[_][0].e.c&&(A.F=ee[_][1])}if(F.t==null&&A.v===void 0)if(A.f||A.F)A.v=0,A.t="n";else if(M)A.t="z";else continue;else A.t=F.t||"n";switch(f.s.c>P&&(f.s.c=P),f.e.c<P&&(f.e.c=P),A.t){case"n":if(A.v==""||A.v==null){if(!M)continue;A.t="z"}else A.v=parseFloat(A.v);break;case"s":if(typeof A.v>"u"){if(!M)continue;A.t="z"}else D=lv[parseInt(A.v,10)],A.v=D.t,A.r=D.r,d.cellHTML&&(A.h=D.h);break;case"str":A.t="s",A.v=A.v!=null?vs(A.v):"",d.cellHTML&&(A.h=pN(A.v));break;case"inlineStr":C=E.match(n),A.t="s",C!=null&&(D=jN(C[1]))?(A.v=D.t,d.cellHTML&&(A.h=D.h)):A.v="";break;case"b":A.v=Ds(A.v);break;case"d":d.cellDates?A.v=Ls(A.v,1):(A.v=ui(Ls(A.v,1)),A.t="n");break;case"e":(!d||d.cellText!==!1)&&(A.w=A.v),A.v=yG[A.v];break}if(V=Y=0,te=null,re&&F.s!==void 0&&(te=g.CellXf[F.s],te!=null&&(te.numFmtId!=null&&(V=te.numFmtId),d.cellStyles&&te.fillId!=null&&(Y=te.fillId))),gV(A,V,Y,d,h,g),d.cellDates&&re&&A.t=="n"&&j1(sn[V])&&(A.t="d",A.v=b3(A.v)),F.cm&&d.xlmeta){var be=(d.xlmeta.Cell||[])[+F.cm-1];be&&be.type=="XLDAPR"&&(A.D=!0)}if(Q){var oe=sa(F.r);u[oe.r]||(u[oe.r]=[]),u[oe.r][oe.c]=A}else u[F.r]=A}}}}U.length>0&&(u["!rows"]=U)}})();function Dve(e,t,r,n){var s=[],a=[],i=Vn(e["!ref"]),o="",c,u="",d=[],f=0,h=0,g=e["!rows"],p=Array.isArray(e),y={r:u},v,C=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=na(h);for(f=i.s.r;f<=i.e.r;++f){for(a=[],u=Oa(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var w=p?(e[f]||[])[h]:e[c];w!==void 0&&(o=Mve(w,c,e,t))!=null&&a.push(o)}(a.length>0||g&&g[f])&&(y={r:u},g&&g[f]&&(v=g[f],v.hidden&&(y.hidden=1),C=-1,v.hpx?C=Gv(v.hpx):v.hpt&&(C=v.hpt),C>-1&&(y.ht=C,y.customHeight=1),v.level&&(y.outlineLevel=v.level)),s[s.length]=fr("row",a.join(""),y))}if(g)for(;f<g.length;++f)g&&g[f]&&(y={r:f+1},v=g[f],v.hidden&&(y.hidden=1),C=-1,v.hpx?C=Gv(v.hpx):v.hpt&&(C=v.hpt),C>-1&&(y.ht=C,y.customHeight=1),v.level&&(y.outlineLevel=v.level),s[s.length]=fr("row","",y));return s.join("")}function xV(e,t,r,n){var s=[La,fr("worksheet",null,{xmlns:ng[0],"xmlns:r":oi.r})],a=r.SheetNames[e],i=0,o="",c=r.Sheets[a];c==null&&(c={});var u=c["!ref"]||"A1",d=Vn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Cn(d)}n||(n={}),c["!comments"]=[];var f=[];vve(c,r,e,t,s),s[s.length]=fr("dimension",null,{ref:u}),s[s.length]=Fve(c,t,e,r),t.sheetFormat&&(s[s.length]=fr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=Nve(c,c["!cols"])),s[i=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=Dve(c,t),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),c["!protect"]&&(s[s.length]=_ve(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Ave(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=xve(c["!merges"]));var h=-1,g,p=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(p=cs(n,-1,fs(y[1].Target).replace(/#.*$/,""),Dn.HLINK),g["r:id"]="rId"+p),(h=y[1].Target.indexOf("#"))>-1&&(g.location=fs(y[1].Target.slice(h+1))),y[1].Tooltip&&(g.tooltip=fs(y[1].Tooltip)),s[s.length]=fr("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=Cve(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Zi("ignoredErrors",fr("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(p=cs(n,-1,"../drawings/drawing"+(e+1)+".xml",Dn.DRAW),s[s.length]=fr("drawing",null,{"r:id":"rId"+p}),c["!drawing"]=f),c["!comments"].length>0&&(p=cs(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Dn.VML),s[s.length]=fr("legacyDrawing",null,{"r:id":"rId"+p}),c["!legacy"]=p),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Rve(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var a=e.read_shift(1);return e.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function Ive(e,t,r){var n=$t(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var a=320;s.hpx?a=Gv(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var p=Array.isArray(r)?(r[u.r]||[])[u.c]:r[on(u)];p&&(f<0&&(f=g),h=g)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var y=n.l;return n.l=c,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function Lve(e,t,r,n){var s=Ive(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Xt(e,0,s)}var Bve=og,$ve=M1;function Uve(){}function zve(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Ghe(e),r}function Wve(e,t,r){r==null&&(r=$t(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return X4({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),hG(e,r),r.slice(0,r.l)}function Hve(e){var t=Dc(e);return[t]}function Gve(e,t,r){return r==null&&(r=$t(8)),sg(t,r)}function Vve(e){var t=ag(e);return[t]}function qve(e,t,r){return r==null&&(r=$t(4)),ig(t,r)}function Kve(e){var t=Dc(e),r=e.read_shift(1);return[t,r,"b"]}function Yve(e,t,r){return r==null&&(r=$t(9)),sg(t,r),r.write_shift(1,e.v?1:0),r}function Xve(e){var t=ag(e),r=e.read_shift(1);return[t,r,"b"]}function Jve(e,t,r){return r==null&&(r=$t(5)),ig(t,r),r.write_shift(1,e.v?1:0),r}function Qve(e){var t=Dc(e),r=e.read_shift(1);return[t,r,"e"]}function Zve(e,t,r){return r==null&&(r=$t(9)),sg(t,r),r.write_shift(1,e.v),r}function e2e(e){var t=ag(e),r=e.read_shift(1);return[t,r,"e"]}function t2e(e,t,r){return r==null&&(r=$t(8)),ig(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function r2e(e){var t=Dc(e),r=e.read_shift(4);return[t,r,"s"]}function n2e(e,t,r){return r==null&&(r=$t(12)),sg(t,r),r.write_shift(4,t.v),r}function s2e(e){var t=ag(e),r=e.read_shift(4);return[t,r,"s"]}function a2e(e,t,r){return r==null&&(r=$t(8)),ig(t,r),r.write_shift(4,t.v),r}function i2e(e){var t=Dc(e),r=vo(e);return[t,r,"n"]}function o2e(e,t,r){return r==null&&(r=$t(16)),sg(t,r),zm(e.v,r),r}function yV(e){var t=ag(e),r=vo(e);return[t,r,"n"]}function l2e(e,t,r){return r==null&&(r=$t(12)),ig(t,r),zm(e.v,r),r}function c2e(e){var t=Dc(e),r=CN(e);return[t,r,"n"]}function u2e(e,t,r){return r==null&&(r=$t(12)),sg(t,r),mG(e.v,r),r}function d2e(e){var t=ag(e),r=CN(e);return[t,r,"n"]}function f2e(e,t,r){return r==null&&(r=$t(8)),ig(t,r),mG(e.v,r),r}function h2e(e){var t=Dc(e),r=_N(e);return[t,r,"is"]}function m2e(e){var t=Dc(e),r=So(e);return[t,r,"str"]}function g2e(e,t,r){return r==null&&(r=$t(12+4*e.v.length)),sg(t,r),Ai(e.v,r),r.length>r.l?r.slice(0,r.l):r}function p2e(e){var t=ag(e),r=So(e);return[t,r,"str"]}function x2e(e,t,r){return r==null&&(r=$t(8+4*e.v.length)),ig(t,r),Ai(e.v,r),r.length>r.l?r.slice(0,r.l):r}function y2e(e,t,r){var n=e.l+t,s=Dc(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"b"];if(r.cellFormula){e.l+=2;var o=S3(e,n-e.l,r);i[3]=po(o,null,s,r.supbooks,r)}else e.l=n;return i}function v2e(e,t,r){var n=e.l+t,s=Dc(e);s.r=r["!row"];var a=e.read_shift(1),i=[s,a,"e"];if(r.cellFormula){e.l+=2;var o=S3(e,n-e.l,r);i[3]=po(o,null,s,r.supbooks,r)}else e.l=n;return i}function b2e(e,t,r){var n=e.l+t,s=Dc(e);s.r=r["!row"];var a=vo(e),i=[s,a,"n"];if(r.cellFormula){e.l+=2;var o=S3(e,n-e.l,r);i[3]=po(o,null,s,r.supbooks,r)}else e.l=n;return i}function w2e(e,t,r){var n=e.l+t,s=Dc(e);s.r=r["!row"];var a=So(e),i=[s,a,"str"];if(r.cellFormula){e.l+=2;var o=S3(e,n-e.l,r);i[3]=po(o,null,s,r.supbooks,r)}else e.l=n;return i}var _2e=og,S2e=M1;function k2e(e,t){return t==null&&(t=$t(4)),t.write_shift(4,e),t}function C2e(e,t){var r=e.l+t,n=og(e),s=SN(e),a=So(e),i=So(e),o=So(e);e.l=r;var c={rfx:n,relId:s,loc:a,display:o};return i&&(c.Tooltip=i),c}function T2e(e,t){var r=$t(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));M1({s:sa(e[0]),e:sa(e[0])},r),kN("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return Ai(s||"",r),Ai(e[1].Tooltip||"",r),Ai("",r),r.slice(0,r.l)}function N2e(){}function E2e(e,t,r){var n=e.l+t,s=gG(e),a=e.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=Qye(e,n-e.l,r);i[1]=o}else e.l=n;return i}function A2e(e,t,r){var n=e.l+t,s=og(e),a=[s];if(r.cellFormula){var i=eve(e,n-e.l,r);a[1]=i,e.l=n}else e.l=n;return a}function j2e(e,t,r){r==null&&(r=$t(18));var n=k3(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var vV=["left","right","top","bottom","header","footer"];function P2e(e){var t={};return vV.forEach(function(r){t[r]=vo(e)}),t}function F2e(e,t){return t==null&&(t=$t(48)),wm(e),vV.forEach(function(r){zm(e[r],t)}),t}function M2e(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function O2e(e,t,r){r==null&&(r=$t(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function D2e(e){var t=$t(24);return t.write_shift(4,4),t.write_shift(4,1),M1(e,t),t}function R2e(e,t){return t==null&&(t=$t(66)),t.write_shift(2,e.password?PN(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function I2e(){}function L2e(){}function B2e(e,t,r,n,s,a,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,g,p,y,v,C,w,_,T,E,A=[];o.biff=12,o["!row"]=0;var F=0,j=!1,P=[],D={},B=o.supbooks||s.supbooks||[[]];if(B.sharedf=D,B.arrayf=P,B.SheetNames=s.SheetNames||s.Sheets.map(function(Q){return Q.name}),!o.supbooks&&(o.supbooks=B,s.Names))for(var V=0;V<s.Names.length;++V)B[0][V+1]=s.Names[V];var Y=[],re=[],te=!1;Vv[16]={n:"BrtShortReal",f:yV};var ee;if(A0(e,function(U,G,W){if(!h)switch(W){case 148:u=U;break;case 0:g=U,o.sheetRows&&o.sheetRows<=g.r&&(h=!0),T=Oa(v=g.r),o["!row"]=g.r,(U.hidden||U.hpt||U.level!=null)&&(U.hpt&&(U.hpx=r1(U.hpt)),re[U.r]=U);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(p={t:U[2]},U[2]){case"n":p.v=U[1];break;case"s":_=lv[U[1]],p.v=_.t,p.r=_.r;break;case"b":p.v=!!U[1];break;case"e":p.v=U[1],o.cellText!==!1&&(p.w=j0[p.v]);break;case"str":p.t="s",p.v=U[1];break;case"is":p.t="s",p.v=U[1].t;break}if((y=i.CellXf[U[0].iStyleRef])&&gV(p,y.numFmtId,null,o,a,i),C=U[0].c==-1?C+1:U[0].c,o.dense?(c[v]||(c[v]=[]),c[v][C]=p):c[na(C)+T]=p,o.cellFormula){for(j=!1,F=0;F<P.length;++F){var M=P[F];g.r>=M[0].s.r&&g.r<=M[0].e.r&&C>=M[0].s.c&&C<=M[0].e.c&&(p.F=Cn(M[0]),j=!0)}!j&&U.length>3&&(p.f=U[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>C&&(d.s.c=C),d.e.r<g.r&&(d.e.r=g.r),d.e.c<C&&(d.e.c=C),o.cellDates&&y&&p.t=="n"&&j1(sn[y.numFmtId])){var I=lm(p.v);I&&(p.t="d",p.v=new Date(I.y,I.m-1,I.d,I.H,I.M,I.S,I.u))}ee&&(ee.type=="XLDAPR"&&(p.D=!0),ee=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;p={t:"z",v:void 0},C=U[0].c==-1?C+1:U[0].c,o.dense?(c[v]||(c[v]=[]),c[v][C]=p):c[na(C)+T]=p,d.s.r>g.r&&(d.s.r=g.r),d.s.c>C&&(d.s.c=C),d.e.r<g.r&&(d.e.r=g.r),d.e.c<C&&(d.e.c=C),ee&&(ee.type=="XLDAPR"&&(p.D=!0),ee=void 0);break;case 176:A.push(U);break;case 49:ee=((o.xlmeta||{}).Cell||[])[U-1];break;case 494:var z=n["!id"][U.relId];for(z?(U.Target=z.Target,U.loc&&(U.Target+="#"+U.loc),U.Rel=z):U.relId==""&&(U.Target="#"+U.loc),v=U.rfx.s.r;v<=U.rfx.e.r;++v)for(C=U.rfx.s.c;C<=U.rfx.e.c;++C)o.dense?(c[v]||(c[v]=[]),c[v][C]||(c[v][C]={t:"z",v:void 0}),c[v][C].l=U):(w=on({c:C,r:v}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=U);break;case 426:if(!o.cellFormula)break;P.push(U),E=o.dense?c[v][C]:c[na(C)+T],E.f=po(U[1],d,{r:g.r,c:C},B,o),E.F=Cn(U[0]);break;case 427:if(!o.cellFormula)break;D[on(U[0].s)]=U[1],E=o.dense?c[v][C]:c[na(C)+T],E.f=po(U[1],d,{r:g.r,c:C},B,o);break;case 60:if(!o.cellStyles)break;for(;U.e>=U.s;)Y[U.e--]={width:U.w/256,hidden:!!(U.flags&1),level:U.level},te||(te=!0,FN(U.w/256)),Qf(Y[U.e+1]);break;case 161:c["!autofilter"]={ref:Cn(U)};break;case 476:c["!margins"]=U;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),U.name&&(s.Sheets[r].CodeName=U.name),(U.above||U.left)&&(c["!outline"]={above:U.above,left:U.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),U.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!G.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Cn(u||d)),o.sheetRows&&c["!ref"]){var L=Vn(c["!ref"]);o.sheetRows<=+L.e.r&&(L.e.r=o.sheetRows-1,L.e.r>d.e.r&&(L.e.r=d.e.r),L.e.r<L.s.r&&(L.s.r=L.e.r),L.e.c>d.e.c&&(L.e.c=d.e.c),L.e.c<L.s.c&&(L.s.c=L.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Cn(L))}return A.length>0&&(c["!merges"]=A),Y.length>0&&(c["!cols"]=Y),re.length>0&&(c["!rows"]=re),c}function $2e(e,t,r,n,s,a,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Bs(t),t.z=t.z||sn[14],t.v=ui(Ls(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=fh(s.cellXfs,t,s),t.l&&a["!links"].push([on(c),t.l]),t.c&&a["!comments"].push([on(c),t.c]),t.t){case"s":case"str":return s.bookSST?(o=IN(s.Strings,t.v,s.revStrings),c.t="s",c.v=o,i?Xt(e,18,a2e(t,c)):Xt(e,7,n2e(t,c))):(c.t="str",i?Xt(e,17,x2e(t,c)):Xt(e,6,g2e(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Xt(e,13,f2e(t,c)):Xt(e,2,u2e(t,c)):i?Xt(e,16,l2e(t,c)):Xt(e,5,o2e(t,c)),!0;case"b":return c.t="b",i?Xt(e,15,Jve(t,c)):Xt(e,4,Yve(t,c)),!0;case"e":return c.t="e",i?Xt(e,14,t2e(t,c)):Xt(e,3,Zve(t,c)),!0}return i?Xt(e,12,qve(t,c)):Xt(e,1,Gve(t,c)),!0}function U2e(e,t,r,n){var s=Vn(t["!ref"]||"A1"),a,i="",o=[];Xt(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=Oa(d),Lve(e,t,s,d);var f=!1;if(d<=s.e.r)for(var h=s.s.c;h<=s.e.c;++h){d===s.s.r&&(o[h]=na(h)),a=o[h]+i;var g=c?(t[d]||[])[h]:t[a];if(!g){f=!1;continue}f=$2e(e,g,d,h,n,t,f)}}Xt(e,146)}function z2e(e,t){!t||!t["!merges"]||(Xt(e,177,k2e(t["!merges"].length)),t["!merges"].forEach(function(r){Xt(e,176,S2e(r))}),Xt(e,178))}function W2e(e,t){!t||!t["!cols"]||(Xt(e,390),t["!cols"].forEach(function(r,n){r&&Xt(e,60,j2e(n,r))}),Xt(e,391))}function H2e(e,t){!t||!t["!ref"]||(Xt(e,648),Xt(e,649,D2e(Vn(t["!ref"]))),Xt(e,650))}function G2e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=cs(r,-1,n[1].Target.replace(/#.*$/,""),Dn.HLINK);Xt(e,494,T2e(n,s))}}),delete t["!links"]}function V2e(e,t,r,n){if(t["!comments"].length>0){var s=cs(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Dn.VML);Xt(e,551,kN("rId"+s)),t["!legacy"]=s}}function q2e(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],a=typeof s.ref=="string"?s.ref:Cn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=yl(a);o.s.r==o.e.r&&(o.e.r=yl(t["!ref"]).e.r,a=Cn(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Xt(e,161,M1(Vn(a))),Xt(e,162)}}function K2e(e,t,r){Xt(e,133),Xt(e,137,O2e(t,r)),Xt(e,138),Xt(e,134)}function Y2e(e,t){t["!protect"]&&Xt(e,535,R2e(t["!protect"]))}function X2e(e,t,r,n){var s=xl(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Vn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Xt(s,129),(r.vbaraw||i["!outline"])&&Xt(s,147,Wve(o,i["!outline"])),Xt(s,148,$ve(c)),K2e(s,i,r.Workbook),W2e(s,i),U2e(s,i,e,t),Y2e(s,i),q2e(s,i,r,e),z2e(s,i),G2e(s,i,n),i["!margins"]&&Xt(s,476,F2e(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&H2e(s,i),V2e(s,i,e,n),Xt(s,130),s.end()}function J2e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var s=Hn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[t,s,n]}function Q2e(e,t,r,n,s,a){var i=a||{"!type":"chart"};if(!e)return a;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=J2e(f);d.s.r=d.s.c=0,d.e.c=o,u=na(o),h[0].forEach(function(g,p){i[u+Oa(p)]={t:"n",v:g,z:h[1]},c=p}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=Cn(d)),i}function Z2e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(pV);return o&&LN(o[0],a,s,r),(i=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function ebe(e,t){e.l+=10;var r=So(e);return{name:r}}function tbe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return A0(e,function(c,u,d){switch(d){case 550:a["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var BN=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],rbe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],nbe=[],sbe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function yD(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var a=t[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=Ds(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function vD(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ds(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function bV(e){vD(e.WBProps,BN),vD(e.CalcPr,sbe),yD(e.WBView,rbe),yD(e.Sheets,nbe),Up.date1904=Ds(e.WBProps.date1904)}function abe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ds(e.Workbook.WBProps.date1904)?"true":"false"}var ibe="][*?/\\".split("");function wV(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return ibe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function obe(e,t,r){e.forEach(function(n,s){wV(n);for(var a=0;a<s;++a)if(n==e[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[s]&&t[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function lbe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];obe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)ave(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var cbe=/<\w+:workbook/;function ube(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(e.replace(To,function(c,u){var d=un(c);switch(dd(d[0])){case"<?xml":break;case"<workbook":c.match(cbe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":BN.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ds(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=vs(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Hn(vs(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=vs(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),Ds(d.hidden||"0")&&(a.Hidden=!0),i=u+c.length;break;case"</definedName>":a.Ref=Hn(vs(e.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),ng.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return bV(r),r}function _V(e){var t=[La];t[t.length]=fr("workbook",null,{xmlns:ng[0],"xmlns:r":oi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(BN.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=fr("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",a=0;a!=e.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==e.SheetNames.length&&(a=0),t[t.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",a=0;a!=e.SheetNames.length;++a){var i={name:fs(e.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=fr("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=fr("definedName",fs(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function dbe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=QC(e),r.name=So(e),r}function fbe(e,t){return t||(t=$t(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),kN(e.strRelID,t),Ai(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function hbe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?So(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function mbe(e,t){t||(t=$t(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),hG(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function gbe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function pbe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),a=Vhe(e),i=Zye(e,0,r),o=SN(e);e.l=n;var c={Name:a,Ptg:i};return s<268435455&&(c.Sheet=s),o&&(c.Comment=o),c}function xbe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Vv[16]={n:"BrtFRTArchID$",f:gbe},A0(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=po(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,a.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),bV(r),r.Names=a,r.supbooks=i,r}function ybe(e,t){Xt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Xt(e,156,fbe(s))}Xt(e,144)}function vbe(e,t){t||(t=$t(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ai("SheetJS",t),Ai(W4.version,t),Ai(W4.version,t),Ai("7262",t),t.length>t.l?t.slice(0,t.l):t}function bbe(e,t){t||(t=$t(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function wbe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(Xt(e,135),Xt(e,158,bbe(s)),Xt(e,136))}}function _be(e,t){var r=xl();return Xt(r,131),Xt(r,128,vbe()),Xt(r,153,mbe(e.Workbook&&e.Workbook.WBProps||null)),wbe(r,e),ybe(r,e),Xt(r,132),r.end()}function Sbe(e,t,r){return t.slice(-4)===".bin"?xbe(e,r):ube(e,r)}function kbe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?B2e(e,n,r,s,a,i,o):pve(e,n,r,s,a,i,o)}function Cbe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?tbe(e,n,r,s,a):Z2e(e,n,r,s,a)}function Tbe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?Exe():Axe()}function Nbe(e,t,r,n,s,a,i,o){return t.slice(-4)===".bin"?Txe():Nxe()}function Ebe(e,t,r,n){return t.slice(-4)===".bin"?S1e(e,r,n):d1e(e,r,n)}function Abe(e,t,r){return rV(e,r)}function jbe(e,t,r){return t.slice(-4)===".bin"?jpe(e,r):Npe(e,r)}function Pbe(e,t,r){return t.slice(-4)===".bin"?wxe(e,r):fxe(e,r)}function Fbe(e,t,r){return t.slice(-4)===".bin"?cxe(e):oxe(e)}function Mbe(e,t,r,n){return r.slice(-4)===".bin"?uxe(e,t,r,n):void 0}function Obe(e,t,r){return t.slice(-4)===".bin"?sxe(e,t,r):ixe(e,t,r)}function Dbe(e,t,r){return(t.slice(-4)===".bin"?_be:_V)(e)}function Rbe(e,t,r,n,s){return(t.slice(-4)===".bin"?X2e:xV)(e,r,n,s)}function Ibe(e,t,r){return(t.slice(-4)===".bin"?M1e:eV)(e,r)}function Lbe(e,t,r){return(t.slice(-4)===".bin"?Mpe:VG)(e,r)}function Bbe(e,t,r){return(t.slice(-4)===".bin"?_xe:aV)(e)}function $be(e){return(e.slice(-4)===".bin"?axe:nV)()}var SV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,kV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function tu(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(SV),a,i,o,c;if(s)for(c=0;c!=s.length;++c)a=s[c].match(kV),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function Ube(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(SV),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(kV),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var uv;function zbe(e,t){var r=uv[e]||Hn(e);return r==="General"?$m(t):jc(r,t)}function Wbe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Ds(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Ls(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Hn(t)]=s}function Hbe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||j0[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Iv(e.v):e.w=$m(e.v):e.w=zbe(t||"General",e.v)}catch(a){if(r.WTF)throw a}try{var n=uv[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&j1(n)){var s=lm(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function Gbe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=n1e[n.Pattern]||n.Pattern)}e[t.ID]=t}function Vbe(e,t,r,n,s,a,i,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var g=[],p=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);a[f]!==void 0&&(a[f].nf&&(d=a[f].nf),a[f].Interior&&g.push(a[f].Interior),!!a[f].Parent);)f=a[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ds(e);break;case"String":n.t="s",n.r=RO(Hn(e)),n.v=e.indexOf("<")>-1?Hn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ls(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Hn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=yG[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=RO(t||e));break}if(Hbe(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=Hn(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=$p(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=$p("RC:RC",s):n.ArrayRange&&(n.F=$p(n.ArrayRange,s),c.push([Vn(n.F),n.F]))}else for(p=0;p<c.length;++p)s.r>=c[p][0].s.r&&s.r<=c[p][0].e.r&&s.c>=c[p][0].s.c&&s.c<=c[p][0].e.c&&(n.F=c[p][1]);u.cellStyles&&(g.forEach(function(v){!h.patternType&&v.patternType&&(h.patternType=v.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function qbe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function e6(e,t){var r=t||{};P1();var n=zy(xN(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=vs(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=Bs(r);return i.type="string",t1.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ht){s.indexOf("<"+Ht)>=0&&(a=!0)}),a)return Fwe(n,r);uv={"General Number":"General","General Date":sn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":sn[15],"Short Date":sn[14],"Long Time":sn[19],"Medium Time":sn[18],"Short Time":sn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:sn[2],Standard:sn[4],Percent:sn[10],Scientific:sn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},g="",p={},y={},v=tu('<Data ss:Type="String">'),C=0,w=0,_=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},E={},A={},F="",j=0,P=[],D={},B={},V=0,Y=[],re=[],te={},ee=[],L,Q=!1,U=[],G=[],W={},M=0,I=0,z={Sheets:[],WBProps:{date1904:!1}},q={};$v.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ne="";o=$v.exec(n);)switch(o[3]=(ne=o[3]).toLowerCase()){case"data":if(ne=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?Vbe(n.slice(C,o.index),F,v,c[c.length-1][0]=="comment"?te:p,{c:w,r:_},E,ee[w],y,U,r):(F="",v=tu(o[0]),C=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(re.length>0&&(p.c=re),(!r.sheetRows||r.sheetRows>_)&&p.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][w]=p):h[na(w)+Oa(_)]=p),p.HRef&&(p.l={Target:Hn(p.HRef)},p.HRefScreenTip&&(p.l.Tooltip=p.HRefScreenTip),delete p.HRef,delete p.HRefScreenTip),(p.MergeAcross||p.MergeDown)&&(M=w+(parseInt(p.MergeAcross,10)|0),I=_+(parseInt(p.MergeDown,10)|0),P.push({s:{c:w,r:_},e:{c:M,r:I}})),!r.sheetStubs)p.MergeAcross?w=M+1:++w;else if(p.MergeAcross||p.MergeDown){for(var X=w;X<=M;++X)for(var se=_;se<=I;++se)(X>w||se>_)&&(r.dense?(h[se]||(h[se]=[]),h[se][X]={t:"z"}):h[na(X)+Oa(se)]={t:"z"});w=M+1}else++w;else p=Ube(o[0]),p.Index&&(w=+p.Index-1),w<T.s.c&&(T.s.c=w),w>T.e.c&&(T.e.c=w),o[0].slice(-2)==="/>"&&++w,re=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(_<T.s.r&&(T.s.r=_),_>T.e.r&&(T.e.r=_),o[0].slice(-2)==="/>"&&(y=tu(o[0]),y.Index&&(_=+y.Index-1)),w=0,++_):(y=tu(o[0]),y.Index&&(_=+y.Index-1),W={},(y.AutoFitHeight=="0"||y.Height)&&(W.hpx=parseInt(y.Height,10),W.hpt=Gv(W.hpx),G[_]=W),y.Hidden=="1"&&(W.hidden=!0,G[_]=W));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(g),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(h["!ref"]=Cn(T),r.sheetRows&&r.sheetRows<=T.e.r&&(h["!fullref"]=h["!ref"],T.e.r=r.sheetRows-1,h["!ref"]=Cn(T))),P.length&&(h["!merges"]=P),ee.length>0&&(h["!cols"]=ee),G.length>0&&(h["!rows"]=G),d[g]=h}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=w=0,c.push([o[3],!1]),u=tu(o[0]),g=Hn(u.Name),h=r.dense?[]:{},P=[],U=[],G=[],q={name:g,Hidden:0},z.Sheets.push(q);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),ee=[],Q=!1}break;case"style":o[1]==="/"?Gbe(E,A,r):A=tu(o[0]);break;case"numberformat":A.nf=Hn(tu(o[0]).Format||"General"),uv[A.nf]&&(A.nf=uv[A.nf]);for(var ce=0;ce!=392&&sn[ce]!=A.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(sn[ce]==null){o0(A.nf,ce);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(L=tu(o[0]),L.Hidden&&(L.hidden=!0,delete L.Hidden),L.Width&&(L.wpx=parseInt(L.Width,10)),!Q&&L.wpx>10){Q=!0,xo=QG;for(var pe=0;pe<ee.length;++pe)ee[pe]&&Qf(ee[pe])}Q&&Qf(L),ee[L.Index-1||ee.length]=L;for(var be=0;be<+L.Span;++be)ee[ee.length]=Bs(L);break;case"namedrange":if(o[1]==="/")break;z.Names||(z.Names=[]);var oe=un(o[0]),je={Name:oe.Name,Ref:$p(oe.RefersTo.slice(1),{r:0,c:0})};z.Sheets.length>0&&(je.Sheet=z.Sheets.length-1),z.Names.push(je);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?F+=n.slice(j,o.index):j=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;A.Interior=tu(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?xme(D,ne,n.slice(V,o.index)):V=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));qbe(te),re.push(te)}else c.push([o[3],!1]),u=tu(o[0]),te={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Re=tu(o[0]);h["!autofilter"]={ref:$p(Re.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return kD(n,r);var Xe=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Xe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Xe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":z.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Xe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Xe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(V,o.index)){case"SheetHidden":q.Hidden=1;break;case"SheetVeryHidden":q.Hidden=2;break}else V=o.index+o[0].length;break;case"header":h["!margins"]||wm(h["!margins"]={},"xlml"),isNaN(+un(o[0]).Margin)||(h["!margins"].header=+un(o[0]).Margin);break;case"footer":h["!margins"]||wm(h["!margins"]={},"xlml"),isNaN(+un(o[0]).Margin)||(h["!margins"].footer=+un(o[0]).Margin);break;case"pagemargins":var ft=un(o[0]);h["!margins"]||wm(h["!margins"]={},"xlml"),isNaN(+ft.Top)||(h["!margins"].top=+ft.Top),isNaN(+ft.Left)||(h["!margins"].left=+ft.Left),isNaN(+ft.Right)||(h["!margins"].right=+ft.Right),isNaN(+ft.Bottom)||(h["!margins"].bottom=+ft.Bottom);break;case"displayrighttoleft":z.Views||(z.Views=[]),z.Views[0]||(z.Views[0]={}),z.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Xe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Xe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Xe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Xe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Xe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Xe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Xe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Xe=!1}break;case"smarttags":break;default:Xe=!1;break}if(Xe||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Wbe(B,ne,Y,n.slice(V,o.index)):(Y=o,V=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Je={};return!r.bookSheets&&!r.bookProps&&(Je.Sheets=d),Je.SheetNames=f,Je.Workbook=z,Je.SSF=Bs(sn),Je.Props=D,Je.Custprops=B,Je}function a8(e,t){switch(UN(t=t||{}),t.type||"base64"){case"base64":return e6(Gl(e),t);case"binary":case"buffer":case"file":return e6(e,t);case"array":return e6(uh(e),t)}}function Kbe(e,t){var r=[];return e.Props&&r.push(yme(e.Props,t)),e.Custprops&&r.push(vme(e.Props,e.Custprops)),r.join("")}function Ybe(){return""}function Xbe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var a=[];a.push(fr("NumberFormat",null,{"ss:Format":fs(sn[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(fr("Style",a.join(""),i))}),fr("Styles",r.join(""))}function CV(e){return fr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+DN(e.Ref,{r:0,c:0})})}function Jbe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(CV(s)))}return fr("Names",r.join(""))}function Qbe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(CV(o)))}return a.join("")}function Zbe(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(fr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(fr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(fr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(fr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Zi("ProtectContents","True")),e["!protect"].objects&&s.push(Zi("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Zi("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Zi("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Zi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":fr("WorksheetOptions",s.join(""),{xmlns:Dl.x})}function ewe(e){return e.map(function(t){var r=whe(t.t||""),n=fr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return fr("Comment",n,{"ss:Author":t.a})}).join("")}function twe(e,t,r,n,s,a,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+fs(DN(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=sa(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=fs(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=fs(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=j0[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||sn[14]);break;case"s":f="String",h=bhe(e.v||"");break}var g=fh(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var p=e.v!=null?h:"",y=e.t=="z"?"":'<Data ss:Type="'+f+'">'+p+"</Data>";return(e.c||[]).length>0&&(y+=ewe(e.c)),fr("Cell",y,o)}function rwe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=r1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function nwe(e,t,r,n){if(!e["!ref"])return"";var s=Vn(e["!ref"]),a=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(v,C){Qf(v);var w=!!v.width,_=k3(C,v),T={"ss:Index":C+1};w&&(T["ss:Width"]=Wv(_.width)),v.hidden&&(T["ss:Hidden"]="1"),o.push(fr("Column",null,T))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var d=[rwe(u,(e["!rows"]||[])[u])],f=s.s.c;f<=s.e.c;++f){var h=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>f)&&!(a[i].s.r>u)&&!(a[i].e.c<f)&&!(a[i].e.r<u)){(a[i].s.c!=f||a[i].s.r!=u)&&(h=!0);break}if(!h){var g={r:u,c:f},p=on(g),y=c?(e[u]||[])[f]:e[p];d.push(twe(y,p,e,t,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function swe(e,t,r){var n=[],s=r.SheetNames[e],a=r.Sheets[s],i=a?Qbe(a,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?nwe(a,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(Zbe(a,t,e,r)),n.join("")}function awe(e,t){t||(t={}),e.SSF||(e.SSF=Bs(sn)),e.SSF&&(P1(),x3(e.SSF),t.revssf=v3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],fh(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Kbe(e,t)),r.push(Ybe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(fr("Worksheet",swe(n,t,e),{"ss:Name":fs(e.SheetNames[n])}));return r[2]=Xbe(e,t),r[3]=Jbe(e),La+fr("Workbook",r.join(""),{xmlns:Dl.ss,"xmlns:o":Dl.o,"xmlns:x":Dl.x,"xmlns:ss":Dl.ss,"xmlns:dt":Dl.dt,"xmlns:html":Dl.html})}function iwe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Jhe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Qhe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var owe=[60,1084,2066,2165,2175];function lwe(e,t,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var c=e0(r,r.l),u=i8[c],d=0;u!=null&&owe.indexOf(c)>-1;)a=e0(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=i8[c=e0(r,r.l)];var f=Ni(i);Xi(f,0);var h=0;f.lens=[];for(var g=0;g<i.length;++g)f.lens.push(h),h+=i[g].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,s)}function Bu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=sn[n])}catch(a){if(t.WTF)throw a}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||j0[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Iv(e.v):e.w=$m(e.v):e.w=jc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(a){if(t.WTF)throw a}if(t.cellDates&&n&&e.t=="n"&&j1(sn[n]||String(n))){var s=lm(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Aw(e,t,r){return{v:e,ixfe:t,t:r}}function cwe(e,t){var r={opts:{}},n={},s=t.dense?[]:{},a={},i={},o=null,c=[],u="",d={},f,h="",g,p,y,v,C={},w=[],_,T,E=[],A=[],F={Sheets:[],WBProps:{date1904:!1},Views:[{}]},j={},P=function(rt){return rt<8?ym[rt]:rt<64&&A[rt-8]||ym[rt]},D=function(rt,Qe,It){var Tt=Qe.XF.data;if(!(!Tt||!Tt.patternType||!It||!It.cellStyles)){Qe.s={},Qe.s.patternType=Tt.patternType;var Rt;(Rt=zv(P(Tt.icvFore)))&&(Qe.s.fgColor={rgb:Rt}),(Rt=zv(P(Tt.icvBack)))&&(Qe.s.bgColor={rgb:Rt})}},B=function(rt,Qe,It){if(!(W>1)&&!(It.sheetRows&&rt.r>=It.sheetRows)){if(It.cellStyles&&Qe.XF&&Qe.XF.data&&D(rt,Qe,It),delete Qe.ixfe,delete Qe.XF,f=rt,h=on(rt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),rt.r<i.s.r&&(i.s.r=rt.r),rt.c<i.s.c&&(i.s.c=rt.c),rt.r+1>i.e.r&&(i.e.r=rt.r+1),rt.c+1>i.e.c&&(i.e.c=rt.c+1),It.cellFormula&&Qe.f){for(var Tt=0;Tt<w.length;++Tt)if(!(w[Tt][0].s.c>rt.c||w[Tt][0].s.r>rt.r)&&!(w[Tt][0].e.c<rt.c||w[Tt][0].e.r<rt.r)){Qe.F=Cn(w[Tt][0]),(w[Tt][0].s.c!=rt.c||w[Tt][0].s.r!=rt.r)&&delete Qe.f,Qe.f&&(Qe.f=""+po(w[Tt][1],i,rt,U,V));break}}It.dense?(s[rt.r]||(s[rt.r]=[]),s[rt.r][rt.c]=Qe):s[h]=Qe}},V={enc:!1,sbcch:0,snames:[],sharedf:C,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(V.password=t.password);var Y,re=[],te=[],ee=[],L=[],Q=!1,U=[];U.SheetNames=V.snames,U.sharedf=V.sharedf,U.arrayf=V.arrayf,U.names=[],U.XTI=[];var G=0,W=0,M=0,I=[],z=[],q;V.codepage=1200,lu(1200);for(var ne=!1;e.l<e.length-1;){var X=e.l,se=e.read_shift(2);if(se===0&&G===10)break;var ce=e.l===e.length?0:e.read_shift(2),pe=i8[se];if(pe&&pe.f){if(t.bookSheets&&G===133&&se!==133)break;if(G=se,pe.r===2||pe.r==12){var be=e.read_shift(2);if(ce-=2,!V.enc&&be!==se&&((be&255)<<8|be>>8)!==se)throw new Error("rt mismatch: "+be+"!="+se);pe.r==12&&(e.l+=10,ce-=10)}var oe={};if(se===10?oe=pe.f(e,ce,V):oe=lwe(se,pe,e,ce,V),W==0&&[9,521,1033,2057].indexOf(G)===-1)continue;switch(se){case 34:r.opts.Date1904=F.WBProps.date1904=oe;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(V.enc||(e.l=0),V.enc=oe,!t.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:V.lastuser=oe;break;case 66:var je=Number(oe);switch(je){case 21010:je=1200;break;case 32768:je=1e4;break;case 32769:je=1252;break}lu(V.codepage=je),ne=!0;break;case 317:V.rrtabid=oe;break;case 25:V.winlocked=oe;break;case 439:r.opts.RefreshAll=oe;break;case 12:r.opts.CalcCount=oe;break;case 16:r.opts.CalcDelta=oe;break;case 17:r.opts.CalcIter=oe;break;case 13:r.opts.CalcMode=oe;break;case 14:r.opts.CalcPrecision=oe;break;case 95:r.opts.CalcSaveRecalc=oe;break;case 15:V.CalcRefMode=oe;break;case 2211:r.opts.FullCalc=oe;break;case 129:oe.fDialog&&(s["!type"]="dialog"),oe.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),oe.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:E.push(oe);break;case 430:U.push([oe]),U[U.length-1].XTI=[];break;case 35:case 547:U[U.length-1].push(oe);break;case 24:case 536:q={Name:oe.Name,Ref:po(oe.rgce,i,null,U,V)},oe.itab>0&&(q.Sheet=oe.itab-1),U.names.push(q),U[0]||(U[0]=[],U[0].XTI=[]),U[U.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(z[oe.itab-1]={ref:Cn(oe.rgce[0][0][1][2])});break;case 22:V.ExternCount=oe;break;case 23:U.length==0&&(U[0]=[],U[0].XTI=[]),U[U.length-1].XTI=U[U.length-1].XTI.concat(oe),U.XTI=U.XTI.concat(oe);break;case 2196:if(V.biff<8)break;q!=null&&(q.Comment=oe[1]);break;case 18:s["!protect"]=oe;break;case 19:oe!==0&&V.WTF&&console.error("Password verifier: "+oe);break;case 133:a[oe.pos]=oe,V.snames.push(oe.name);break;case 10:{if(--W)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=Cn(i),t.sheetRows&&t.sheetRows<=i.e.r){var Re=i.e.r;i.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Cn(i),i.e.r=Re}i.e.r++,i.e.c++}re.length>0&&(s["!merges"]=re),te.length>0&&(s["!objects"]=te),ee.length>0&&(s["!cols"]=ee),L.length>0&&(s["!rows"]=L),F.Sheets.push(j)}u===""?d=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(V.biff===8&&(V.biff={9:2,521:3,1033:4}[se]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),V.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(V.biff=5,ne=!0,lu(V.codepage=28591)),V.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(V.biff=2),W++)break;if(s=t.dense?[]:{},V.biff<8&&!ne&&(ne=!0,lu(V.codepage=t.codepage||1252)),V.biff<5||oe.BIFFVer==0&&oe.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Xe={pos:e.l-ce,name:u};a[Xe.pos]=Xe,V.snames.push(u)}else u=(a[X]||{name:""}).name;oe.dt==32&&(s["!type"]="chart"),oe.dt==64&&(s["!type"]="macro"),re=[],te=[],V.arrayf=w=[],ee=[],L=[],Q=!1,j={Hidden:(a[X]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[oe.r]||[])[oe.c]:s[on({c:oe.c,r:oe.r})])&&++oe.c,_={ixfe:oe.ixfe,XF:E[oe.ixfe]||{},v:oe.val,t:"n"},M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B({c:oe.c,r:oe.r},_,t);break;case 5:case 517:_={ixfe:oe.ixfe,XF:E[oe.ixfe],v:oe.val,t:oe.t},M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B({c:oe.c,r:oe.r},_,t);break;case 638:_={ixfe:oe.ixfe,XF:E[oe.ixfe],v:oe.rknum,t:"n"},M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B({c:oe.c,r:oe.r},_,t);break;case 189:for(var ft=oe.c;ft<=oe.C;++ft){var Je=oe.rkrec[ft-oe.c][0];_={ixfe:Je,XF:E[Je],v:oe.rkrec[ft-oe.c][1],t:"n"},M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B({c:ft,r:oe.r},_,t)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(_=Aw(oe.val,oe.cell.ixfe,oe.tt),_.XF=E[_.ixfe],t.cellFormula){var Ht=oe.formula;if(Ht&&Ht[0]&&Ht[0][0]&&Ht[0][0][0]=="PtgExp"){var Ve=Ht[0][0][1][0],at=Ht[0][0][1][1],gt=on({r:Ve,c:at});C[gt]?_.f=""+po(oe.formula,i,oe.cell,U,V):_.F=((t.dense?(s[Ve]||[])[at]:s[gt])||{}).F}else _.f=""+po(oe.formula,i,oe.cell,U,V)}M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B(oe.cell,_,t),o=oe}break;case 7:case 519:if(o)o.val=oe,_=Aw(oe,o.cell.ixfe,"s"),_.XF=E[_.ixfe],t.cellFormula&&(_.f=""+po(o.formula,i,o.cell,U,V)),M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B(o.cell,_,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(oe);var Te=on(oe[0].s);if(g=t.dense?(s[oe[0].s.r]||[])[oe[0].s.c]:s[Te],t.cellFormula&&g){if(!o||!Te||!g)break;g.f=""+po(oe[1],i,oe[0],U,V),g.F=Cn(oe[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;C[on(o.cell)]=oe[0],g=t.dense?(s[o.cell.r]||[])[o.cell.c]:s[on(o.cell)],(g||{}).f=""+po(oe[0],i,f,U,V)}}break;case 253:_=Aw(c[oe.isst].t,oe.ixfe,"s"),c[oe.isst].h&&(_.h=c[oe.isst].h),_.XF=E[_.ixfe],M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B({c:oe.c,r:oe.r},_,t);break;case 513:t.sheetStubs&&(_={ixfe:oe.ixfe,XF:E[oe.ixfe],t:"z"},M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B({c:oe.c,r:oe.r},_,t));break;case 190:if(t.sheetStubs)for(var bt=oe.c;bt<=oe.C;++bt){var Ct=oe.ixfe[bt-oe.c];_={ixfe:Ct,XF:E[Ct],t:"z"},M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B({c:bt,r:oe.r},_,t)}break;case 214:case 516:case 4:_=Aw(oe.val,oe.ixfe,"s"),_.XF=E[_.ixfe],M>0&&(_.z=I[_.ixfe>>8&63]),Bu(_,t,r.opts.Date1904),B({c:oe.c,r:oe.r},_,t);break;case 0:case 512:W===1&&(i=oe);break;case 252:c=oe;break;case 1054:if(V.biff==4){I[M++]=oe[1];for(var Lt=0;Lt<M+163&&sn[Lt]!=oe[1];++Lt);Lt>=163&&o0(oe[1],M+163)}else o0(oe[1],oe[0]);break;case 30:{I[M++]=oe;for(var Yt=0;Yt<M+163&&sn[Yt]!=oe;++Yt);Yt>=163&&o0(oe,M+163)}break;case 229:re=re.concat(oe);break;case 93:te[oe.cmo[0]]=V.lastobj=oe;break;case 438:V.lastobj.TxO=oe;break;case 127:V.lastobj.ImData=oe;break;case 440:for(v=oe[0].s.r;v<=oe[0].e.r;++v)for(y=oe[0].s.c;y<=oe[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[on({c:y,r:v})],g&&(g.l=oe[1]);break;case 2048:for(v=oe[0].s.r;v<=oe[0].e.r;++v)for(y=oe[0].s.c;y<=oe[0].e.c;++y)g=t.dense?(s[v]||[])[y]:s[on({c:y,r:v})],g&&g.l&&(g.l.Tooltip=oe[1]);break;case 28:{if(V.biff<=5&&V.biff>=2)break;g=t.dense?(s[oe[0].r]||[])[oe[0].c]:s[on(oe[0])];var it=te[oe[2]];g||(t.dense?(s[oe[0].r]||(s[oe[0].r]=[]),g=s[oe[0].r][oe[0].c]={t:"z"}):g=s[on(oe[0])]={t:"z"},i.e.r=Math.max(i.e.r,oe[0].r),i.s.r=Math.min(i.s.r,oe[0].r),i.e.c=Math.max(i.e.c,oe[0].c),i.s.c=Math.min(i.s.c,oe[0].c)),g.c||(g.c=[]),p={a:oe[1],t:it.TxO.t},g.c.push(p)}break;case 2173:X1e(E[oe.ixfe],oe.ext);break;case 125:{if(!V.cellStyles)break;for(;oe.e>=oe.s;)ee[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},Q||(Q=!0,FN(oe.w/256)),Qf(ee[oe.e+1])}break;case 520:{var xt={};oe.level!=null&&(L[oe.r]=xt,xt.level=oe.level),oe.hidden&&(L[oe.r]=xt,xt.hidden=!0),oe.hpt&&(L[oe.r]=xt,xt.hpt=oe.hpt,xt.hpx=r1(oe.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||wm(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[se]]=oe;break;case 161:s["!margins"]||wm(s["!margins"]={}),s["!margins"].header=oe.header,s["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(F.Views[0].RTL=!0);break;case 146:A=oe;break;case 2198:Y=oe;break;case 140:T=oe;break;case 442:u?j.CodeName=oe||j.name:F.WBProps.CodeName=oe||"ThisWorkbook";break}}else pe||console.error("Missing Info for XLS Record 0x"+se.toString(16)),e.l+=ce}return r.SheetNames=va(a).sort(function(Mt,rt){return Number(Mt)-Number(rt)}).map(function(Mt){return a[Mt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&z.forEach(function(Mt,rt){r.Sheets[r.SheetNames[rt]]["!autofilter"]=Mt}),r.Strings=c,r.SSF=Bs(sn),V.enc&&(r.Encryption=V.enc),Y&&(r.Themes=Y),r.Metadata={},T!==void 0&&(r.Metadata.Country=T),U.names.length>0&&(F.Names=U.names),r.Workbook=F,r}var dv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function uwe(e,t,r){var n=Yr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=eD(n,ZC,dv.DSI);for(var a in s)t[a]=s[a]}catch(u){if(r.WTF)throw u}var i=Yr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=eD(i,e8,dv.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(kG(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function dwe(e,t){var r=[],n=[],s=[],a=0,i,o=jO(ZC,"n"),c=jO(e8,"n");if(e.Props)for(i=va(e.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],e.Props[i[a]]]);if(e.Custprops)for(i=va(e.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(e.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(c,i[a])?n:s).push([i[a],e.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)PG.indexOf(s[a][0])>-1||SG.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&Yr.utils.cfb_add(t,"/SummaryInformation",tD(n,dv.SI,c,e8)),(r.length||u.length)&&Yr.utils.cfb_add(t,"/DocumentSummaryInformation",tD(r,dv.DSI,o,ZC,u.length?u:null,dv.UDI))}function TV(e,t){t||(t={}),UN(t),lN(),t.codepage&&oN(t.codepage);var r,n;if(e.FullPaths){if(Yr.find(e,"/encryption"))throw new Error("File is password-protected");r=Yr.find(e,"!CompObj"),n=Yr.find(e,"/Workbook")||Yr.find(e,"/Book")}else{switch(t.type){case"base64":e=Bl(Gl(e));break;case"binary":e=Bl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Xi(e,0),n={content:e}}var s,a;if(r&&iwe(r),t.bookProps&&!t.bookSheets)s={};else{var i=Fn?"buffer":"array";if(n&&n.content)s=cwe(n.content,t);else if((a=Yr.find(e,"PerfectOffice_MAIN"))&&a.content)s=bm.to_workbook(a.content,(t.type=i,t));else if((a=Yr.find(e,"NativeContent_MAIN"))&&a.content)s=bm.to_workbook(a.content,(t.type=i,t));else throw(a=Yr.find(e,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Yr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=kxe(e))}var o={};return e.FullPaths&&uwe(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}function fwe(e,t){var r=t||{},n=Yr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Yr.utils.cfb_add(n,s,NV(e,r)),r.biff==8&&(e.Props||e.Custprops)&&dwe(e,n),r.biff==8&&e.vbaraw&&Cxe(n,Yr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Vv={0:{f:Rve},1:{f:Hve},2:{f:c2e},3:{f:Qve},4:{f:Kve},5:{f:i2e},6:{f:m2e},7:{f:r2e},8:{f:w2e},9:{f:b2e},10:{f:y2e},11:{f:v2e},12:{f:Vve},13:{f:d2e},14:{f:e2e},15:{f:Xve},16:{f:yV},17:{f:p2e},18:{f:s2e},19:{f:_N},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:pbe},40:{},42:{},43:{f:m1e},44:{f:f1e},45:{f:x1e},46:{f:v1e},47:{f:y1e},48:{},49:{f:Bhe},50:{},51:{f:Z1e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:zG},62:{f:h2e},63:{f:lxe},64:{f:I2e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Co,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:M2e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:zve},148:{f:Bve,p:16},151:{f:N2e},152:{},153:{f:hbe},154:{},155:{},156:{f:dbe},157:{},158:{},159:{T:1,f:Ape},160:{T:-1},161:{T:1,f:og},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:_2e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:J1e},336:{T:-1},337:{f:rxe,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:QC},357:{},358:{},359:{},360:{T:1},361:{},362:{f:UG},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:E2e},427:{f:A2e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:P2e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Uve},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:C2e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:QC},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:vxe},633:{T:1},634:{T:-1},635:{T:1,f:xxe},636:{T:-1},637:{f:Whe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ebe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:L2e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},i8={6:{f:Q5},10:{f:kf},12:{f:Ga},13:{f:Ga},14:{f:Ea},15:{f:Ea},16:{f:vo},17:{f:Ea},18:{f:Ea},19:{f:Ga},20:{f:oD},21:{f:oD},23:{f:UG},24:{f:cD},25:{f:Ea},26:{},27:{},28:{f:Lge},29:{},34:{f:Ea},35:{f:lD},38:{f:vo},39:{f:vo},40:{f:vo},41:{f:vo},42:{f:Ea},43:{f:Ea},47:{f:Xpe},49:{f:dge},51:{f:Ga},60:{},61:{f:ige},64:{f:Ea},65:{f:uge},66:{f:Ga},77:{},80:{},81:{},82:{},85:{f:Ga},89:{},90:{},91:{},92:{f:Yme},93:{f:Uge},94:{},95:{f:Ea},96:{},97:{},99:{f:Ea},125:{f:zG},128:{f:Tge},129:{f:Jme},130:{f:Ga},131:{f:Ea},132:{f:Ea},133:{f:Qme},134:{},140:{f:Yge},141:{f:Ga},144:{},146:{f:Qge},151:{},152:{},153:{},154:{},155:{},156:{f:Ga},157:{},158:{},160:{f:ape},161:{f:tpe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:_ge},190:{f:Sge},193:{f:kf},197:{},198:{},199:{},200:{},201:{},202:{f:Ea},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ga},220:{},221:{f:Ea},222:{},224:{f:Cge},225:{f:Kme},226:{f:kf},227:{},229:{f:Bge},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:ege},253:{f:hge},255:{f:rge},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:FG},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ea},353:{f:kf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:Pge},431:{f:Ea},432:{},433:{},434:{},437:{},438:{f:Hge},439:{f:Ea},440:{f:Gge},441:{},442:{f:F2},443:{},444:{f:Ga},445:{},446:{},448:{f:kf},449:{f:age,r:2},450:{f:kf},512:{f:sD},513:{f:spe},515:{f:Age},516:{f:gge},517:{f:iD},519:{f:ipe},520:{f:nge},523:{},545:{f:uD},549:{f:nD},566:{},574:{f:lge},638:{f:wge},659:{},1048:{},1054:{f:xge},1084:{},1212:{f:Dge},2048:{f:qge},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Tw},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:kf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Zge,r:12},2173:{f:Y1e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ea,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Oge,r:12},2197:{},2198:{f:W1e,r:12},2199:{},2200:{},2201:{},2202:{f:Rge,r:12},2203:{f:kf},2204:{},2205:{},2206:{},2207:{},2211:{f:sge},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ga},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:rpe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Jge},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:sD},1:{},2:{f:dpe},3:{f:cpe},4:{f:lpe},5:{f:iD},7:{f:hpe},8:{},9:{f:Tw},11:{},22:{f:Ga},30:{f:vge},31:{},32:{},33:{f:uD},36:{},37:{f:nD},50:{f:mpe},62:{},52:{},67:{},68:{f:Ga},69:{},86:{},126:{},127:{f:ope},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:gpe},223:{},234:{},354:{},421:{},518:{f:Q5},521:{f:Tw},536:{f:cD},547:{f:lD},561:{},579:{},1030:{f:Q5},1033:{f:Tw},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function mr(e,t,r,n){var s=t;if(!isNaN(s)){var a=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&vN(r)&&e.push(r)}}function hwe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return mr(e,t,r,s);var a=t;if(!isNaN(a)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,a),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function R2(e,t,r){return e||(e=$t(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function mwe(e,t,r,n){var s=$t(9);return R2(s,e,t),MG(r,n||"b",s),s}function gwe(e,t,r){var n=$t(8+2*r.length);return R2(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function pwe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?ui(Ls(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?mr(e,2,fpe(r,n,s)):mr(e,3,upe(r,n,s));return;case"b":case"e":mr(e,5,mwe(r,n,t.v,t.t));return;case"s":case"str":mr(e,4,gwe(r,n,(t.v||"").slice(0,255)));return}mr(e,1,R2(null,r,n))}function xwe(e,t,r,n){var s=Array.isArray(t),a=Vn(t["!ref"]||"A1"),i,o="",c=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Cn(a)}for(var u=a.s.r;u<=a.e.r;++u){o=Oa(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(c[d]=na(d)),i=c[d]+o;var f=s?(t[u]||[])[d]:t[i];f&&pwe(e,f,u,d)}}}function ywe(e,t){for(var r=t||{},n=xl(),s=0,a=0;a<e.SheetNames.length;++a)e.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return mr(n,r.biff==4?1033:r.biff==3?521:9,AN(e,16,r)),xwe(n,e.Sheets[e.SheetNames[s]],s,r),mr(n,10),n.end()}function vwe(e,t,r){mr(e,49,fge({sz:12,name:"Arial"},r))}function bwe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&mr(e,1054,yge(s,t[s],r))})}function wwe(e,t){var r=$t(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),mr(e,2151,r),r=$t(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),LG(Vn(t["!ref"]||"A1"),r),r.write_shift(4,4),mr(e,2152,r)}function _we(e,t){for(var r=0;r<16;++r)mr(e,224,aD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){mr(e,224,aD(n,0,t))})}function Swe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];mr(e,440,Vge(n)),n[1].Tooltip&&mr(e,2048,Kge(n))}delete t["!links"]}function kwe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&mr(e,125,epe(k3(s,n),s))})}}function Cwe(e,t,r,n,s){var a=16+fh(s.cellXfs,t,s);if(t.v==null&&!t.bf){mr(e,513,Hm(r,n,a));return}if(t.bf)mr(e,6,Jye(t,r,n,s,a));else switch(t.t){case"d":case"n":var i=t.t=="d"?ui(Ls(t.v)):t.v;mr(e,515,jge(r,n,i,a));break;case"b":case"e":mr(e,517,Ege(r,n,t.v,a,s,t.t));break;case"s":case"str":if(s.bookSST){var o=IN(s.Strings,t.v,s.revStrings);mr(e,253,mge(r,n,o,a))}else mr(e,516,pge(r,n,(t.v||"").slice(0,255),a,s));break;default:mr(e,513,Hm(r,n,a))}}function Twe(e,t,r){var n=xl(),s=r.SheetNames[e],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(a),u=t.biff==8,d,f="",h=[],g=Vn(a["!ref"]||"A1"),p=u?65536:16384;if(g.e.c>255||g.e.r>=p){if(t.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,p-1)}mr(n,2057,AN(r,16,t)),mr(n,13,xc(1)),mr(n,12,xc(100)),mr(n,15,Uo(!0)),mr(n,17,Uo(!1)),mr(n,16,zm(.001)),mr(n,95,Uo(!0)),mr(n,42,Uo(!1)),mr(n,43,Uo(!1)),mr(n,130,xc(1)),mr(n,128,Nge()),mr(n,131,Uo(!1)),mr(n,132,Uo(!1)),u&&kwe(n,a["!cols"]),mr(n,512,bge(g,t)),u&&(a["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){f=Oa(y);for(var v=g.s.c;v<=g.e.c;++v){y===g.s.r&&(h[v]=na(v)),d=h[v]+f;var C=c?(a[y]||[])[v]:a[d];C&&(Cwe(n,C,y,v,t),u&&C.l&&a["!links"].push([d,C.l]))}}var w=o.CodeName||o.name||s;return u&&mr(n,574,cge((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&mr(n,229,$ge(a["!merges"])),u&&Swe(n,a),mr(n,442,OG(w)),u&&wwe(n,a),mr(n,10),n.end()}function Nwe(e,t,r){var n=xl(),s=(e||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,c=r.biff==5;if(mr(n,2057,AN(e,5,r)),r.bookType=="xla"&&mr(n,135),mr(n,225,o?xc(1200):null),mr(n,193,Eme(2)),c&&mr(n,191),c&&mr(n,192),mr(n,226),mr(n,92,Xme("SheetJS",r)),mr(n,66,xc(o?1200:1252)),o&&mr(n,353,xc(0)),o&&mr(n,448),mr(n,317,npe(e.SheetNames.length)),o&&e.vbaraw&&mr(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";mr(n,442,OG(u))}mr(n,156,xc(17)),mr(n,25,Uo(!1)),mr(n,18,Uo(!1)),mr(n,19,xc(0)),o&&mr(n,431,Uo(!1)),o&&mr(n,444,xc(0)),mr(n,61,oge()),mr(n,64,Uo(!1)),mr(n,141,xc(0)),mr(n,34,Uo(abe(e)=="true")),mr(n,14,Uo(!0)),o&&mr(n,439,Uo(!1)),mr(n,218,xc(0)),vwe(n,e,r),bwe(n,e.SSF,r),_we(n,r),o&&mr(n,352,Uo(!1));var d=n.end(),f=xl();o&&mr(f,140,Xge()),o&&r.Strings&&hwe(f,252,tge(r.Strings)),mr(f,10);var h=f.end(),g=xl(),p=0,y=0;for(y=0;y<e.SheetNames.length;++y)p+=(o?12:11)+(o?2:1)*e.SheetNames[y].length;var v=d.length+p+h.length;for(y=0;y<e.SheetNames.length;++y){var C=a[y]||{};mr(g,133,Zme({pos:v,hs:C.Hidden||0,dt:0,name:e.SheetNames[y]},r)),v+=t[y].length}var w=g.end();if(p!=w.length)throw new Error("BS8 "+p+" != "+w.length);var _=[];return d.length&&_.push(d),w.length&&_.push(w),h.length&&_.push(h),Ni(_)}function Ewe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Bs(sn)),e&&e.SSF&&(P1(),x3(e.SSF),r.revssf=v3(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,zN(r),r.cellXfs=[],fh(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=Twe(s,r,e);return n.unshift(Nwe(e,n,r)),Ni(n)}function NV(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=yl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=t||{};switch(a.biff||2){case 8:case 5:return Ewe(e,t);case 4:case 3:case 2:return ywe(e,t)}throw new Error("invalid type "+a.bookType+" for BIFF")}function bD(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=e.match(/<\/table/i),i=s.index,o=a&&a.index||e.length,c=fhe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(i=0;i<c.length;++i){var y=c[i].trim(),v=y.slice(0,3).toLowerCase();if(v=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(v!="<td"&&v!="<th")){var C=y.split(/<\/t[dh]>/i);for(o=0;o<C.length;++o){var w=C[o].trim();if(w.match(/<t[dh]/i)){for(var _=w,T=0;_.charAt(0)=="<"&&(T=_.indexOf(">"))>-1;)_=_.slice(T+1);for(var E=0;E<p.length;++E){var A=p[E];A.s.c==d&&A.s.r<u&&u<=A.e.r&&(d=A.e.c+1,E=-1)}var F=un(w.slice(0,w.indexOf(">")));h=F.colspan?+F.colspan:1,((f=+F.rowspan)>1||h>1)&&p.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var j=F.t||F["data-t"]||"";if(!_.length){d+=h;continue}if(_=JH(_),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!_.length){d+=h;continue}var P={t:"s",v:_};r.raw||!_.trim().length||j=="s"||(_==="TRUE"?P={t:"b",v:!0}:_==="FALSE"?P={t:"b",v:!1}:isNaN(du(_))?isNaN(e1(_).getDate())||(P={t:"d",v:Ls(_)},r.cellDates||(P={t:"n",v:ui(P.v)}),P.z=r.dateNF||sn[14]):P={t:"n",v:du(_)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=P):n[on({r:u,c:d})]=P,d+=h}}}}return n["!ref"]=Cn(g),p.length&&(n["!merges"]=p),n}function Awe(e,t,r,n){for(var s=e["!merges"]||[],a=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=on({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||pN(f.w||(y0(f),f.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(g["data-t"]=f&&f.t||"z",f.v!=null&&(g["data-v"]=f.v),f.z!=null&&(g["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),g.id=(n.id||"sjs")+"-"+d,a.push(fr("td",h,g))}}var p="<tr>";return p+a.join("")+"</tr>"}var jwe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',Pwe="</body></html>";function Fwe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return dh(bD(r[0],t),t);var n=GN();return r.forEach(function(s,a){VN(n,bD(s,t),"Sheet"+(a+1))}),n}function Mwe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function EV(e,t){var r=t||{},n=r.header!=null?r.header:jwe,s=r.footer!=null?r.footer:Pwe,a=[n],i=yl(e["!ref"]);r.dense=Array.isArray(e),a.push(Mwe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(Awe(e,i,o,r));return a.push("</table>"+s),a.join("")}function AV(e,t,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?sa(n.origin):n.origin;s=i.r,a=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(e["!ref"]){var d=yl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var f=[],h=0,g=e["!rows"]||(e["!rows"]=[]),p=0,y=0,v=0,C=0,w=0,_=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&y<c;++p){var T=o[p];if(wD(T)){if(n.display)continue;g[y]={hidden:!0}}var E=T.children;for(v=C=0;v<E.length;++v){var A=E[v];if(!(n.display&&wD(A))){var F=A.hasAttribute("data-v")?A.getAttribute("data-v"):A.hasAttribute("v")?A.getAttribute("v"):JH(A.innerHTML),j=A.getAttribute("data-z")||A.getAttribute("z");for(h=0;h<f.length;++h){var P=f[h];P.s.c==C+a&&P.s.r<y+s&&y+s<=P.e.r&&(C=P.e.c+1-a,h=-1)}_=+A.getAttribute("colspan")||1,((w=+A.getAttribute("rowspan")||1)>1||_>1)&&f.push({s:{r:y+s,c:C+a},e:{r:y+s+(w||1)-1,c:C+a+(_||1)-1}});var D={t:"s",v:F},B=A.getAttribute("data-t")||A.getAttribute("t")||"";F!=null&&(F.length==0?D.t=B||"z":n.raw||F.trim().length==0||B=="s"||(F==="TRUE"?D={t:"b",v:!0}:F==="FALSE"?D={t:"b",v:!1}:isNaN(du(F))?isNaN(e1(F).getDate())||(D={t:"d",v:Ls(F)},n.cellDates||(D={t:"n",v:ui(D.v)}),D.z=n.dateNF||sn[14]):D={t:"n",v:du(F)})),D.z===void 0&&j!=null&&(D.z=j);var V="",Y=A.getElementsByTagName("A");if(Y&&Y.length)for(var re=0;re<Y.length&&!(Y[re].hasAttribute("href")&&(V=Y[re].getAttribute("href"),V.charAt(0)!="#"));++re);V&&V.charAt(0)!="#"&&(D.l={Target:V}),n.dense?(e[y+s]||(e[y+s]=[]),e[y+s][C+a]=D):e[on({c:C+a,r:y+s})]=D,u.e.c<C+a&&(u.e.c=C+a),C+=_}}++y}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,y-1+s),e["!ref"]=Cn(u),y>=c&&(e["!fullref"]=Cn((u.e.r=o.length-p+y-1+s,u))),e}function jV(e,t){var r=t||{},n=r.dense?[]:{};return AV(n,e,t)}function Owe(e,t){return dh(jV(e,t),t)}function wD(e){var t="",r=Dwe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Dwe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Rwe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Hn(t.replace(/<[^>]*>/g,""));return[r]}var _D={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function PV(e,t){var r=t||{},n=xN(e),s=[],a,i,o={name:""},c="",u=0,d,f,h={},g=[],p=r.dense?[]:{},y,v,C={value:""},w="",_=0,T=[],E=-1,A=-1,F={s:{r:1e6,c:1e7},e:{r:0,c:0}},j=0,P={},D=[],B={},V=0,Y=0,re=[],te=1,ee=1,L=[],Q={Names:[]},U={},G=["",""],W=[],M={},I="",z=0,q=!1,ne=!1,X=0;for($v.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=$v.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(F.e.c>=F.s.c&&F.e.r>=F.s.r?p["!ref"]=Cn(F):p["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=F.e.r&&(p["!fullref"]=p["!ref"],F.e.r=r.sheetRows-1,p["!ref"]=Cn(F)),D.length&&(p["!merges"]=D),re.length&&(p["!rows"]=re),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),h[d.name]=p,ne=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=un(y[0],!1),E=A=-1,F.s.r=F.s.c=1e7,F.e.r=F.e.c=0,p=r.dense?[]:{},D=[],re=[],ne=!0);break;case"table-row-group":y[1]==="/"?--j:++j;break;case"table-row":case"":if(y[1]==="/"){E+=te,te=1;break}if(f=un(y[0],!1),f.?E=f.-1:E==-1&&(E=0),te=+f["number-rows-repeated"]||1,te<10)for(X=0;X<te;++X)j>0&&(re[E+X]={level:j});A=-1;break;case"covered-table-cell":y[1]!=="/"&&++A,r.sheetStubs&&(r.dense?(p[E]||(p[E]=[]),p[E][A]={t:"z"}):p[on({r:E,c:A})]={t:"z"}),w="",T=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++A,C=un(y[0],!1),ee=parseInt(C["number-columns-repeated"]||"1",10),v={t:"z",v:null},C.formula&&r.cellFormula!=!1&&(v.f=xD(Hn(C.formula))),(C.||C["value-type"])=="string"&&(v.t="s",v.v=Hn(C["string-value"]||""),r.dense?(p[E]||(p[E]=[]),p[E][A]=v):p[on({r:E,c:A})]=v),A+=ee-1;else if(y[1]!=="/"){++A,w="",_=0,T=[],ee=1;var se=te?E+te-1:E;if(A>F.e.c&&(F.e.c=A),A<F.s.c&&(F.s.c=A),E<F.s.r&&(F.s.r=E),se>F.e.r&&(F.e.r=se),C=un(y[0],!1),W=[],M={},v={t:C.||C["value-type"],v:null},r.cellFormula)if(C.formula&&(C.formula=Hn(C.formula)),C["number-matrix-columns-spanned"]&&C["number-matrix-rows-spanned"]&&(V=parseInt(C["number-matrix-rows-spanned"],10)||0,Y=parseInt(C["number-matrix-columns-spanned"],10)||0,B={s:{r:E,c:A},e:{r:E+V-1,c:A+Y-1}},v.F=Cn(B),L.push([B,v.F])),C.formula)v.f=xD(C.formula);else for(X=0;X<L.length;++X)E>=L[X][0].s.r&&E<=L[X][0].e.r&&A>=L[X][0].s.c&&A<=L[X][0].e.c&&(v.F=L[X][1]);switch((C["number-columns-spanned"]||C["number-rows-spanned"])&&(V=parseInt(C["number-rows-spanned"],10)||0,Y=parseInt(C["number-columns-spanned"],10)||0,B={s:{r:E,c:A},e:{r:E+V-1,c:A+Y-1}},D.push(B)),C["number-columns-repeated"]&&(ee=parseInt(C["number-columns-repeated"],10)),v.t){case"boolean":v.t="b",v.v=Ds(C["boolean-value"]);break;case"float":v.t="n",v.v=parseFloat(C.value);break;case"percentage":v.t="n",v.v=parseFloat(C.value);break;case"currency":v.t="n",v.v=parseFloat(C.value);break;case"date":v.t="d",v.v=Ls(C["date-value"]),r.cellDates||(v.t="n",v.v=ui(v.v)),v.z="m/d/yy";break;case"time":v.t="n",v.v=che(C["time-value"])/86400,r.cellDates&&(v.t="d",v.v=b3(v.v)),v.z="HH:MM:SS";break;case"number":v.t="n",v.v=parseFloat(C.);break;default:if(v.t==="string"||v.t==="text"||!v.t)v.t="s",C["string-value"]!=null&&(w=Hn(C["string-value"]),T=[]);else throw new Error("Unsupported value type "+v.t)}}else{if(q=!1,v.t==="s"&&(v.v=w||"",T.length&&(v.R=T),q=_==0),U.Target&&(v.l=U),W.length>0&&(v.c=W,W=[]),w&&r.cellText!==!1&&(v.w=w),q&&(v.t="z",delete v.v),(!q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=E))for(var ce=0;ce<te;++ce){if(ee=parseInt(C["number-columns-repeated"]||"1",10),r.dense)for(p[E+ce]||(p[E+ce]=[]),p[E+ce][A]=ce==0?v:Bs(v);--ee>0;)p[E+ce][A+ee]=Bs(v);else for(p[on({r:E+ce,c:A})]=v;--ee>0;)p[on({r:E+ce,c:A+ee})]=Bs(v);F.e.c<=A&&(F.e.c=A)}ee=parseInt(C["number-columns-repeated"]||"1",10),A+=ee-1,ee=0,v={},w="",T=[]}U={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;M.t=w,T.length&&(M.R=T),M.a=I,W.push(M)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);I="",z=0,w="",_=0,T=[];break;case"creator":y[1]==="/"?I=n.slice(z,y.index):z=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);w="",_=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(P[o.name]=c,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(c="",o=un(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=un(y[0],!1),c+=_D[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=un(y[0],!1),c+=_D[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=un(y[0],!1),G=Z5(i["cell-range-address"]);var pe={Name:i.name,Ref:G[0]+"!"+G[1]};ne&&(pe.Sheet=g.length),Q.Names.push(pe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!C||!C["string-value"])){var be=Rwe(n.slice(_,y.index));w=(w.length>0?w+`
`:"")+be[0]}else un(y[0],!1),_=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{G=Z5(un(y[0])["target-range-address"]),h[G[0]]["!autofilter"]={ref:G[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(U=un(y[0],!1),!U.href)break;U.Target=Hn(U.href),delete U.href,U.Target.charAt(0)=="#"&&U.Target.indexOf(".")>-1?(G=Z5(U.Target.slice(1)),U.Target="#"+G[0]+"!"+G[1]):U.Target.match(/^\.\.[\\\/]/)&&(U.Target=U.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var oe={Sheets:h,SheetNames:g,Workbook:Q};return r.bookSheets&&delete oe.Sheets,oe}function SD(e,t){t=t||{},pc(e,"META-INF/manifest.xml")&&cme(Ha(e,"META-INF/manifest.xml"),t);var r=$l(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=PV(vs(r),t);return pc(e,"meta.xml")&&(n.Props=wG(Ha(e,"meta.xml"))),n}function kD(e,t){return PV(e,t)}var Iwe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Bv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return La+t}})(),CD=(function(){var e=function(a){return fs(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var c=[];c.push('      <table:table table:name="'+fs(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=yl(a["!ref"]||"A1"),h=a["!merges"]||[],g=0,p=Array.isArray(a);if(a["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",v=a["!rows"]||[];for(u=0;u<f.s.r;++u)y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=f.e.r;++u){for(y=v[u]?' table:style-name="ro'+v[u].ods+'"':"",c.push("        <table:table-row"+y+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var C=!1,w={},_="";for(g=0;g!=h.length;++g)if(!(h[g].s.c>d)&&!(h[g].s.r>u)&&!(h[g].e.c<d)&&!(h[g].e.r<u)){(h[g].s.c!=d||h[g].s.r!=u)&&(C=!0),w["table:number-columns-spanned"]=h[g].e.c-h[g].s.c+1,w["table:number-rows-spanned"]=h[g].e.r-h[g].s.r+1;break}if(C){c.push(r);continue}var T=on({r:u,c:d}),E=p?(a[u]||[])[d]:a[T];if(E&&E.f&&(w["table:formula"]=fs(nve(E.f)),E.F&&E.F.slice(0,T.length)==T)){var A=yl(E.F);w["table:number-matrix-columns-spanned"]=A.e.c-A.s.c+1,w["table:number-matrix-rows-spanned"]=A.e.r-A.s.r+1}if(!E){c.push(t);continue}switch(E.t){case"b":_=E.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=E.v?"true":"false";break;case"n":_=E.w||String(E.v||0),w["office:value-type"]="float",w["office:value"]=E.v||0;break;case"s":case"str":_=E.v==null?"":E.v,w["office:value-type"]="string";break;case"d":_=E.w||Ls(E.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Ls(E.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var F=e(_);if(E.l&&E.l.Target){var j=E.l.Target;j=j.charAt(0)=="#"?"#"+sve(j.slice(1)):j,j.charAt(0)!="#"&&!j.match(/^\w+:/)&&(j="../"+j),F=fr("text:a",F,{"xlink:href":j.replace(/&/g,"&amp;")})}c.push("          "+fr("table:table-cell",fr("text:p",F,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;Qf(f),f.ods=o;var h=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),a.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),a.push(`  </style:style>
`),++c}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var c=[La],u=Bv({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Bv({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(bG().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function FV(e,t){if(t.bookType=="fods")return CD(e,t);var r=hN(),n="",s=[],a=[];return n="mimetype",Nn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Nn(r,n,CD(e,t)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",Nn(r,n,Iwe(e,t)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",Nn(r,n,La+bG()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",Nn(r,n,fme(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Nn(r,n,ume(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Gm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function o8(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):vs(uh(e))}function Lwe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Bl(Xu(e))}function Bwe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function eh(e){var t=e.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function TD(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function $we(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Uwe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)e[t+a]=s&255;e[t+15]|=r>=0?0:128}function qv(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function os(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ya(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Yn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=qv(e,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=qv(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function Gi(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(os(n*8+s.type)),s.type==2&&t.push(os(s.data.length)),t.push(s.data))})}),eh(t)}function $N(e,t){return e?.map(function(r){return t(r.data)})||[]}function fc(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=qv(e,n),a=Yn(e.slice(n[0],n[0]+s));n[0]+=s;var i={id:ya(a[1][0].data),messages:[]};a[2].forEach(function(o){var c=Yn(o.data),u=ya(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=a[3])!=null&&t[0]&&(i.merge=ya(a[3][0].data)>>>0>0),r.push(i)}return r}function cp(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:os(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:os(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:os(i.data.length)}],n[2].push({data:Gi(i.meta),type:2})});var a=Gi(n);t.push(os(a.length)),t.push(a),s.forEach(function(i){return t.push(i)})}),eh(t)}function zwe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=qv(t,r),s=[];r[0]<t.length;){var a=t[r[0]]&3;if(a==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(a==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,a==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[eh(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var d=eh(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function hc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(zwe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return eh(t)}function up(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var a=os(n),i=a.length;t.push(a),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return eh(t)}function Wwe(e,t,r,n){var s=Gm(e),a=s.getUint32(4,!0),i=(n>1?12:8)+TD(a&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=TD(a&(n>1?12288:4096))*4,a&16&&(c=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Hwe(e,t,r){var n=Gm(e),s=n.getUint32(8,!0),a=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(c=$we(e,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function t6(e,t){var r=new Uint8Array(32),n=Gm(r),s=12,a=0;switch(r[0]=5,e.t){case"n":r[1]=2,Uwe(r,s,e.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),a|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,a,!0),r.slice(0,s)}function r6(e,t){var r=new Uint8Array(32),n=Gm(r),s=12,a=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),a|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,a,!0),r.slice(0,s)}function Gwe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Wwe(e,t,r,e[0]);case 5:return Hwe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function go(e){var t=Yn(e);return qv(t[1][0].data)}function ND(e,t){var r=Yn(t.data),n=ya(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=Yn(i.data),c=ya(o[1][0].data)>>>0;switch(n){case 1:a[c]=o8(o[3][0].data);break;case 8:{var u=e[go(o[9][0].data)][0],d=Yn(u.data),f=e[go(d[1][0].data)][0],h=ya(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var g=Yn(f.data);a[c]=g[3].map(function(p){return o8(p.data)}).join("")}break}}),a}function Vwe(e,t){var r,n,s,a,i,o,c,u,d,f,h,g,p,y,v=Yn(e),C=ya(v[1][0].data)>>>0,w=ya(v[2][0].data)>>>0,_=((n=(r=v[8])==null?void 0:r[0])==null?void 0:n.data)&&ya(v[8][0].data)>0||!1,T,E;if((a=(s=v[7])==null?void 0:s[0])!=null&&a.data&&t!=0)T=(o=(i=v[7])==null?void 0:i[0])==null?void 0:o.data,E=(u=(c=v[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=v[4])==null?void 0:d[0])!=null&&f.data&&t!=1)T=(g=(h=v[4])==null?void 0:h[0])==null?void 0:g.data,E=(y=(p=v[3])==null?void 0:p[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var A=_?4:1,F=Gm(T),j=[],P=0;P<T.length/2;++P){var D=F.getUint16(P*2,!0);D<65535&&j.push([P,D])}if(j.length!=w)throw"Expected ".concat(w," cells, found ").concat(j.length);var B=[];for(P=0;P<j.length-1;++P)B[j[P][0]]=E.subarray(j[P][1]*A,j[P+1][1]*A);return j.length>=1&&(B[j[j.length-1][0]]=E.subarray(j[j.length-1][1]*A)),{R:C,cells:B}}function qwe(e,t){var r,n=Yn(t.data),s=(r=n?.[7])!=null&&r[0]?ya(n[7][0].data)>>>0>0?1:0:-1,a=$N(n[5],function(i){return Vwe(i,s)});return{nrows:ya(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function Kwe(e,t,r){var n,s=Yn(t.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(ya(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(ya(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Cn(a);var i=Yn(s[4][0].data),o=ND(e,e[go(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?ND(e,e[go(i[17][0].data)][0]):[],u=Yn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Yn(f.data),g=e[go(h[2][0].data)][0],p=ya(g.meta[1][0].data);if(p!=6002)throw new Error("6001 unexpected reference to ".concat(p));var y=qwe(e,g);y.data.forEach(function(v,C){v.forEach(function(w,_){var T=on({r:d+C,c:_}),E=Gwe(w,o,c);E&&(r[T]=E)})}),d+=y.nrows})}function Ywe(e,t){var r=Yn(t.data),n={"!ref":"A1"},s=e[go(r[2][0].data)],a=ya(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return Kwe(e,s[0],n),n}function Xwe(e,t){var r,n=Yn(t.data),s={name:(r=n[1])!=null&&r[0]?o8(n[1][0].data):"",sheets:[]},a=$N(n[2],go);return a.forEach(function(i){e[i].forEach(function(o){var c=ya(o.meta[1][0].data);c==6e3&&s.sheets.push(Ywe(e,o))})}),s}function Jwe(e,t){var r=GN(),n=Yn(t.data),s=$N(n[1],go);if(s.forEach(function(a){e[a].forEach(function(i){var o=ya(i.meta[1][0].data);if(o==2){var c=Xwe(e,i);c.sheets.forEach(function(u,d){VN(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function n6(e){var t,r,n,s,a={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=hc(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=fc(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){a[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(t=a?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&ya(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(c){a[c].forEach(function(u){var d=ya(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Jwe(a,o)}function Qwe(e,t,r){var n,s,a,i;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=e[8])==null?void 0:a[0])==null?void 0:i.data)&&ya(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=Gm(e[7][0].data),d=0,f=[],h=Gm(e[4][0].data),g=0,p=[],y=0;y<t.length;++y){if(t[y]==null){u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),h.setUint16(y*2,g,!0);var v,C;switch(typeof t[y]){case"string":v=t6({t:"s",v:t[y]},r),C=r6({t:"s",v:t[y]},r);break;case"number":v=t6({t:"n",v:t[y]},r),C=r6({t:"n",v:t[y]},r);break;case"boolean":v=t6({t:"b",v:t[y]},r),C=r6({t:"b",v:t[y]},r);break;default:throw new Error("Unsupported value "+t[y])}f.push(v),d+=v.length,p.push(C),g+=C.length,++c}for(e[2][0].data=os(c);y<e[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),h.setUint16(y*2,65535,!0);return e[6][0].data=eh(f),e[3][0].data=eh(p),c}function Zwe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=yl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Cn(n)));var a=t_(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(I){return I.forEach(function(z){typeof z=="string"&&i.push(z)})});var o={},c=[],u=Yr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(I,z){return[I,u.FullPaths[z]]}).forEach(function(I){var z=I[0],q=I[1];if(z.type==2&&z.name.match(/\.iwa/)){var ne=z.content,X=hc(ne),se=fc(X);se.forEach(function(ce){c.push(ce.id),o[ce.id]={deps:[],location:q,type:ya(ce.messages[0].meta[1][0].data)}})}}),c.sort(function(I,z){return I-z});var d=c.filter(function(I){return I>1}).map(function(I){return[I,os(I)]});u.FileIndex.map(function(I,z){return[I,u.FullPaths[z]]}).forEach(function(I){var z=I[0];if(I[1],!!z.name.match(/\.iwa/)){var q=fc(hc(z.content));q.forEach(function(ne){ne.messages.forEach(function(X){d.forEach(function(se){ne.messages.some(function(ce){return ya(ce.meta[1][0].data)!=11006&&Bwe(ce.data,se[1])})&&o[se[0]].deps.push(ne.id)})})})}});for(var f=Yr.find(u,o[1].location),h=fc(hc(f.content)),g,p=0;p<h.length;++p){var y=h[p];y.id==1&&(g=y)}var v=go(Yn(g.messages[0].data)[1][0].data);for(f=Yr.find(u,o[v].location),h=fc(hc(f.content)),p=0;p<h.length;++p)y=h[p],y.id==v&&(g=y);for(v=go(Yn(g.messages[0].data)[2][0].data),f=Yr.find(u,o[v].location),h=fc(hc(f.content)),p=0;p<h.length;++p)y=h[p],y.id==v&&(g=y);for(v=go(Yn(g.messages[0].data)[2][0].data),f=Yr.find(u,o[v].location),h=fc(hc(f.content)),p=0;p<h.length;++p)y=h[p],y.id==v&&(g=y);var C=Yn(g.messages[0].data);{C[6][0].data=os(n.e.r+1),C[7][0].data=os(n.e.c+1);var w=go(C[46][0].data),_=Yr.find(u,o[w].location),T=fc(hc(_.content));{for(var E=0;E<T.length&&T[E].id!=w;++E);if(T[E].id!=w)throw"Bad ColumnRowUIDMapArchive";var A=Yn(T[E].messages[0].data);A[1]=[],A[2]=[],A[3]=[];for(var F=0;F<=n.e.c;++F){var j=[];j[1]=j[2]=[{type:0,data:os(F+420690)}],A[1].push({type:2,data:Gi(j)}),A[2].push({type:0,data:os(F)}),A[3].push({type:0,data:os(F)})}A[4]=[],A[5]=[],A[6]=[];for(var P=0;P<=n.e.r;++P)j=[],j[1]=j[2]=[{type:0,data:os(P+726270)}],A[4].push({type:2,data:Gi(j)}),A[5].push({type:0,data:os(P)}),A[6].push({type:0,data:os(P)});T[E].messages[0].data=Gi(A)}_.content=up(cp(T)),_.size=_.content.length,delete C[46];var D=Yn(C[4][0].data);{D[7][0].data=os(n.e.r+1);var B=Yn(D[1][0].data),V=go(B[2][0].data);_=Yr.find(u,o[V].location),T=fc(hc(_.content));{if(T[0].id!=V)throw"Bad HeaderStorageBucket";var Y=Yn(T[0].messages[0].data);for(P=0;P<a.length;++P){var re=Yn(Y[2][0].data);re[1][0].data=os(P),re[4][0].data=os(a[P].length),Y[2][P]={type:Y[2][0].type,data:Gi(re)}}T[0].messages[0].data=Gi(Y)}_.content=up(cp(T)),_.size=_.content.length;var te=go(D[2][0].data);_=Yr.find(u,o[te].location),T=fc(hc(_.content));{if(T[0].id!=te)throw"Bad HeaderStorageBucket";for(Y=Yn(T[0].messages[0].data),F=0;F<=n.e.c;++F)re=Yn(Y[2][0].data),re[1][0].data=os(F),re[4][0].data=os(n.e.r+1),Y[2][F]={type:Y[2][0].type,data:Gi(re)};T[0].messages[0].data=Gi(Y)}_.content=up(cp(T)),_.size=_.content.length;var ee=go(D[4][0].data);(function(){for(var I=Yr.find(u,o[ee].location),z=fc(hc(I.content)),q,ne=0;ne<z.length;++ne){var X=z[ne];X.id==ee&&(q=X)}var se=Yn(q.messages[0].data);{se[3]=[];var ce=[];i.forEach(function(oe,je){ce[1]=[{type:0,data:os(je)}],ce[2]=[{type:0,data:os(1)}],ce[3]=[{type:2,data:Lwe(oe)}],se[3].push({type:2,data:Gi(ce)})})}q.messages[0].data=Gi(se);var pe=cp(z),be=up(pe);I.content=be,I.size=I.content.length})();var L=Yn(D[3][0].data);{var Q=L[1][0];delete L[2];var U=Yn(Q.data);{var G=go(U[2][0].data);(function(){for(var I=Yr.find(u,o[G].location),z=fc(hc(I.content)),q,ne=0;ne<z.length;++ne){var X=z[ne];X.id==G&&(q=X)}var se=Yn(q.messages[0].data);{delete se[6],delete L[7];var ce=new Uint8Array(se[5][0].data);se[5]=[];for(var pe=0,be=0;be<=n.e.r;++be){var oe=Yn(ce);pe+=Qwe(oe,a[be],i),oe[1][0].data=os(be),se[5].push({data:Gi(oe),type:2})}se[1]=[{type:0,data:os(n.e.c+1)}],se[2]=[{type:0,data:os(n.e.r+1)}],se[3]=[{type:0,data:os(pe)}],se[4]=[{type:0,data:os(n.e.r+1)}]}q.messages[0].data=Gi(se);var je=cp(z),Re=up(je);I.content=Re,I.size=I.content.length})()}Q.data=Gi(U)}D[3][0].data=Gi(L)}C[4][0].data=Gi(D)}g.messages[0].data=Gi(C);var W=cp(h),M=up(W);return f.content=M,f.size=f.content.length,u}function MV(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function UN(e){MV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function zN(e){MV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function e4e(e){return Dn.WS.indexOf(e)>-1?"sheet":e==Dn.CS?"chart":e==Dn.DS?"dialog":e==Dn.MS?"macro":e&&e.length?e:"sheet"}function t4e(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,e4e(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function r4e(e,t,r,n,s,a,i,o,c,u,d,f){try{a[n]=ov($l(e,r,!0),t);var h=Ha(e,t),g;switch(o){case"sheet":g=kbe(h,t,s,c,a[n],u,d,f);break;case"chart":if(g=Cbe(h,t,s,c,a[n],u,d,f),!g||!g["!drawel"])break;var p=Hy(g["!drawel"].Target,t),y=Uv(p),v=dxe($l(e,p,!0),ov($l(e,y,!0),p)),C=Hy(v,p),w=Uv(C);g=Q2e($l(e,C,!0),C,c,ov($l(e,w,!0),C),u,g);break;case"macro":g=Tbe(h,t,s,c,a[n],u,d,f);break;case"dialog":g=Nbe(h,t,s,c,a[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var _=[];a&&a[n]&&va(a[n]).forEach(function(T){var E="";if(a[n][T].Type==Dn.CMNT){E=Hy(a[n][T].Target,t);var A=Pbe(Ha(e,E,!0),E,c);if(!A||!A.length)return;fD(g,A,!1)}a[n][T].Type==Dn.TCMNT&&(E=Hy(a[n][T].Target,t),_=_.concat(hxe(Ha(e,E,!0),c)))}),_&&_.length&&fD(g,_,!0,c.people||[])}catch(T){if(c.WTF)throw T}}function uc(e){return e.charAt(0)=="/"?e.slice(1):e}function n4e(e,t){if(P1(),t=t||{},UN(t),pc(e,"META-INF/manifest.xml")||pc(e,"objectdata.xml"))return SD(e,t);if(pc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof n6<"u"){if(e.FileIndex)return n6(e);var r=Yr.utils.cfb_new();return MO(e).forEach(function(re){Nn(r,re,mhe(e,re))}),n6(r)}throw new Error("Unsupported NUMBERS file")}if(!pc(e,"[Content_Types].xml"))throw pc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):pc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=MO(e),s=ome($l(e,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",Ha(e,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!Ha(e,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(lv=[],s.sst)try{lv=jbe(Ha(e,uc(s.sst)),s.sst,t)}catch(re){if(t.WTF)throw re}t.cellStyles&&s.themes.length&&(c=Abe($l(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=Ebe(Ha(e,uc(s.style)),s.style,c,t))}s.links.map(function(re){try{var te=ov($l(e,Uv(uc(re))),re);return Mbe(Ha(e,uc(re)),te,re,t)}catch{}});var d=Sbe(Ha(e,uc(s.workbooks[0])),s.workbooks[0],t),f={},h="";s.coreprops.length&&(h=Ha(e,uc(s.coreprops[0]),!0),h&&(f=wG(h)),s.extprops.length!==0&&(h=Ha(e,uc(s.extprops[0]),!0),h&&mme(h,f,t)));var g={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(h=$l(e,uc(s.custprops[0]),!0),h&&(g=pme(h,t)));var p={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(te){return te.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(p.Props=f,p.Custprops=g),t.bookSheets&&typeof i<"u"&&(p.SheetNames=i),t.bookSheets?p.SheetNames:t.bookProps))return p;i={};var y={};t.bookDeps&&s.calcchain&&(y=Fbe(Ha(e,uc(s.calcchain)),s.calcchain));var v=0,C={},w,_;{var T=d.Sheets;f.Worksheets=T.length,f.SheetNames=[];for(var E=0;E!=T.length;++E)f.SheetNames[E]=T[E].name}var A=a?"bin":"xml",F=s.workbooks[0].lastIndexOf("/"),j=(s.workbooks[0].slice(0,F+1)+"_rels/"+s.workbooks[0].slice(F+1)+".rels").replace(/^\//,"");pc(e,j)||(j="xl/_rels/workbook."+A+".rels");var P=ov($l(e,j,!0),j.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Obe(Ha(e,uc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=gxe(Ha(e,uc(s.people[0])),t)),P&&(P=t4e(P,d.Sheets));var D=Ha(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=f.Worksheets;++v){var B="sheet";if(P&&P[v]?(w="xl/"+P[v][1].replace(/[\/]?xl\//,""),pc(e,w)||(w=P[v][1]),pc(e,w)||(w=j.replace(/_rels\/.*$/,"")+P[v][1]),B=P[v][2]):(w="xl/worksheets/sheet"+(v+1-D)+"."+A,w=w.replace(/sheet0\./,"sheet.")),_=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(f.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var V=!1,Y=0;Y!=t.sheets.length;++Y)typeof t.sheets[Y]=="number"&&t.sheets[Y]==v&&(V=1),typeof t.sheets[Y]=="string"&&t.sheets[Y].toLowerCase()==f.SheetNames[v].toLowerCase()&&(V=1);if(!V)continue e}}r4e(e,w,_,f.SheetNames[v],v,C,i,B,t,d,c,u)}return p={Directory:s,Workbook:d,Props:f,Custprops:g,Deps:y,Sheets:i,SheetNames:f.SheetNames,Strings:lv,Styles:u,Themes:c,SSF:Bs(sn)},t&&t.bookFiles&&(e.files?(p.keys=n,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach(function(re,te){re=re.replace(/^Root Entry[\/]/,""),p.keys.push(re),p.files[re]=e.FileIndex[te]}))),t&&t.bookVBA&&(s.vba.length>0?p.vbaraw=Ha(e,uc(s.vba[0]),!0):s.defaults&&s.defaults.bin===Sxe&&(p.vbaraw=Ha(e,"xl/vbaProject.bin",!0))),p}function s4e(e,t){var r=t||{},n="Workbook",s=Yr.find(e,n);try{if(n="/!DataSpaces/Version",s=Yr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Ope(s.content),n="/!DataSpaces/DataSpaceMap",s=Yr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=Rpe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Yr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=Ipe(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Yr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Bpe(s.content)}catch{}if(n="/EncryptionInfo",s=Yr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=$pe(s.content);if(n="/EncryptedPackage",s=Yr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function a4e(e,t){return t.bookType=="ods"?FV(e,t):t.bookType=="numbers"?Zwe(e,t):t.bookType=="xlsb"?i4e(e,t):o4e(e,t)}function i4e(e,t){Ep=1024,e&&!e.SSF&&(e.SSF=Bs(sn)),e&&e.SSF&&(P1(),x3(e.SSF),t.revssf=v3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cv?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=iV.indexOf(t.bookType)>-1,s=NN();zN(t=t||{});var a=hN(),i="",o=0;if(t.cellXfs=[],fh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",Nn(a,i,_G(e.Props,t)),s.coreprops.push(i),cs(t.rels,2,i,Dn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,Nn(a,i,CG(e.Props)),s.extprops.push(i),cs(t.rels,3,i,Dn.EXT_PROPS),e.Custprops!==e.Props&&va(e.Custprops||{}).length>0&&(i="docProps/custom.xml",Nn(a,i,TG(e.Custprops)),s.custprops.push(i),cs(t.rels,4,i,Dn.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Nn(a,i,Rbe(o-1,i,t,e,d)),s.sheets.push(i),cs(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Dn.WS[0])}if(f){var g=f["!comments"],p=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,Nn(a,y,Bbe(g,y)),s.comments.push(y),cs(d,-1,"../comments"+o+"."+r,Dn.CMNT),p=!0),f["!legacy"]&&p&&Nn(a,"xl/drawings/vmlDrawing"+o+".vml",sV(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&Nn(a,Uv(i),Bp(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,Nn(a,i,Lbe(t.Strings,i,t)),s.strs.push(i),cs(t.wbrels,-1,"sharedStrings."+r,Dn.SST)),i="xl/workbook."+r,Nn(a,i,Dbe(e,i)),s.workbooks.push(i),cs(t.rels,1,i,Dn.WB),i="xl/theme/theme1.xml",Nn(a,i,MN(e.Themes,t)),s.themes.push(i),cs(t.wbrels,-1,"theme/theme1.xml",Dn.THEME),i="xl/styles."+r,Nn(a,i,Ibe(e,i,t)),s.styles.push(i),cs(t.wbrels,-1,"styles."+r,Dn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",Nn(a,i,e.vbaraw),s.vba.push(i),cs(t.wbrels,-1,"vbaProject.bin",Dn.VBA)),i="xl/metadata."+r,Nn(a,i,$be(i)),s.metadata.push(i),cs(t.wbrels,-1,"metadata."+r,Dn.XLMETA),Nn(a,"[Content_Types].xml",vG(s,t)),Nn(a,"_rels/.rels",Bp(t.rels)),Nn(a,"xl/_rels/workbook."+r+".rels",Bp(t.wbrels)),delete t.revssf,delete t.ssf,a}function o4e(e,t){Ep=1024,e&&!e.SSF&&(e.SSF=Bs(sn)),e&&e.SSF&&(P1(),x3(e.SSF),t.revssf=v3(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cv?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=iV.indexOf(t.bookType)>-1,s=NN();zN(t=t||{});var a=hN(),i="",o=0;if(t.cellXfs=[],fh(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",Nn(a,i,_G(e.Props,t)),s.coreprops.push(i),cs(t.rels,2,i,Dn.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,Nn(a,i,CG(e.Props)),s.extprops.push(i),cs(t.rels,3,i,Dn.EXT_PROPS),e.Custprops!==e.Props&&va(e.Custprops||{}).length>0&&(i="docProps/custom.xml",Nn(a,i,TG(e.Custprops)),s.custprops.push(i),cs(t.rels,4,i,Dn.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],g=(h||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,Nn(a,i,xV(o-1,t,e,f)),s.sheets.push(i),cs(t.wbrels,-1,"worksheets/sheet"+o+"."+r,Dn.WS[0])}if(h){var p=h["!comments"],y=!1,v="";if(p&&p.length>0){var C=!1;p.forEach(function(w){w[1].forEach(function(_){_.T==!0&&(C=!0)})}),C&&(v="xl/threadedComments/threadedComment"+o+"."+r,Nn(a,v,mxe(p,d,t)),s.threadedcomments.push(v),cs(f,-1,"../threadedComments/threadedComment"+o+"."+r,Dn.TCMNT)),v="xl/comments"+o+"."+r,Nn(a,v,aV(p)),s.comments.push(v),cs(f,-1,"../comments"+o+"."+r,Dn.CMNT),y=!0}h["!legacy"]&&y&&Nn(a,"xl/drawings/vmlDrawing"+o+".vml",sV(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&Nn(a,Uv(i),Bp(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,Nn(a,i,VG(t.Strings,t)),s.strs.push(i),cs(t.wbrels,-1,"sharedStrings."+r,Dn.SST)),i="xl/workbook."+r,Nn(a,i,_V(e)),s.workbooks.push(i),cs(t.rels,1,i,Dn.WB),i="xl/theme/theme1.xml",Nn(a,i,MN(e.Themes,t)),s.themes.push(i),cs(t.wbrels,-1,"theme/theme1.xml",Dn.THEME),i="xl/styles."+r,Nn(a,i,eV(e,t)),s.styles.push(i),cs(t.wbrels,-1,"styles."+r,Dn.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",Nn(a,i,e.vbaraw),s.vba.push(i),cs(t.wbrels,-1,"vbaProject.bin",Dn.VBA)),i="xl/metadata."+r,Nn(a,i,nV()),s.metadata.push(i),cs(t.wbrels,-1,"metadata."+r,Dn.XLMETA),d.length>1&&(i="xl/persons/person.xml",Nn(a,i,pxe(d)),s.people.push(i),cs(t.wbrels,-1,"persons/person.xml",Dn.PEOPLE)),Nn(a,"[Content_Types].xml",vG(s,t)),Nn(a,"_rels/.rels",Bp(t.rels)),Nn(a,"xl/_rels/workbook."+r+".rels",Bp(t.wbrels)),delete t.revssf,delete t.ssf,a}function WN(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Gl(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function l4e(e,t){return Yr.find(e,"EncryptedPackage")?s4e(e,t):TV(e,t)}function c4e(e,t){var r,n=e,s=t||{};return s.type||(s.type=Fn&&Buffer.isBuffer(e)?"buffer":"base64"),r=KH(n,s),n4e(r,s)}function OV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return a8(e.slice(r),t);default:break e}return t1.to_workbook(e,t)}function u4e(e,t){var r="",n=WN(e,t);switch(t.type){case"base64":r=Gl(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Um(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=vs(r)),t.type="binary",OV(r,t)}function d4e(e,t){var r=e;return t.type=="base64"&&(r=Gl(r)),r=Dv.utils.decode(1200,r.slice(2),"str"),t.type="binary",OV(r,t)}function f4e(e){return e.match(/[^\x00-\x7F]/)?Xu(e):e}function s6(e,t,r,n){return n?(r.type="string",t1.to_workbook(e,r)):t1.to_workbook(t,r)}function l8(e,t){lN();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return l8(new Uint8Array(e),(r=Bs(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Up={},r.dateNF&&(Up.dateNF=r.dateNF),r.type||(r.type=Fn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Fn?"buffer":"binary",n=ihe(e),typeof Uint8Array<"u"&&!Fn&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=f4e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Bs(r),r.type="array",l8(cN(n),r)}switch((s=WN(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return l4e(Yr.read(n,r),r);break;case 9:if(s[1]<=8)return TV(n,r);break;case 60:return a8(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return xpe(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return HG.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?c4e(n,r):s6(e,n,r,a);case 239:return s[3]===60?a8(n,r):s6(e,n,r,a);case 255:if(s[1]===254)return d4e(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return bm.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return bm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return s8.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return JG.to_workbook(n,r);break;case 10:case 13:case 32:return u4e(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return ppe.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?s8.to_workbook(n,r):s6(e,n,r,a)}function DV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return A2(t.file,Yr.write(e,{type:Fn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Yr.write(e,t)}function h4e(e,t){var r=Bs(t||{}),n=a4e(e,r);return m4e(n,r)}function m4e(e,t){var r={},n=Fn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Yr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(p3(s))}return t.password&&typeof encrypt_agile<"u"?DV(encrypt_agile(s,t.password),t):t.type==="file"?A2(t.file,s):t.type=="string"?vs(s):s}function g4e(e,t){var r=t||{},n=fwe(e,r);return DV(n,r)}function Uu(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Rv(Xu(n));case"binary":return Xu(n);case"string":return e;case"file":return A2(t.file,n,"utf8");case"buffer":return Fn?E0(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Uu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function p4e(e,t){switch(t.type){case"base64":return Rv(e);case"binary":return e;case"string":return e;case"file":return A2(t.file,e,"binary");case"buffer":return Fn?E0(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function jw(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Rv(r):t.type=="string"?vs(r):r;case"file":return A2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function RV(e,t){lN(),lbe(e);var r=Bs(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=RV(e,r);return r.type="array",p3(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Uu(awe(e,r),r);case"slk":case"sylk":return Uu(WG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Uu(EV(e.Sheets[e.SheetNames[s]],r),r);case"txt":return p4e(IV(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Uu(HN(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Uu(HG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return jw(s8.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Uu(t1.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Uu(JG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Uu(GG.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Uu(FV(e,r),r);case"wk1":return jw(bm.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return jw(bm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),jw(NV(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),g4e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return h4e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function x4e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function y4e(e,t,r){var n={};return n.type="file",n.file=t,x4e(n),RV(e,n)}function v4e(e,t,r,n,s,a,i,o){var c=Oa(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var g=t.s.c;g<=t.e.c;++g){var p=i?e[r][g]:e[n[g]+c];if(p===void 0||p.t===void 0){if(u===void 0)continue;a[g]!=null&&(h[a[g]]=u);continue}var y=p.v;switch(p.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(a[g]!=null){if(y==null)if(p.t=="e"&&y===null)h[a[g]]=null;else if(u!==void 0)h[a[g]]=u;else if(d&&y===null)h[a[g]]=null;else continue;else h[a[g]]=d&&(p.t!=="n"||p.t==="n"&&o.rawNumbers!==!1)?y:y0(p,y,o);y!=null&&(f=!1)}}return{row:h,isempty:f}}function t_(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Vn(d);break;case"number":c=Vn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(s=0);var f=Oa(c.s.r),h=[],g=[],p=0,y=0,v=Array.isArray(e),C=c.s.r,w=0,_={};v&&!e[C]&&(e[C]=[]);var T=u.skipHidden&&e["!cols"]||[],E=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(T[w]||{}).hidden)switch(h[w]=na(w),r=v?e[C][w]:e[h[w]+f],n){case 1:a[w]=w-c.s.c;break;case 2:a[w]=h[w];break;case 3:a[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=y0(r,null,u),y=_[i]||0,!y)_[i]=1;else{do o=i+"_"+y++;while(_[o]);_[i]=y,_[o]=1}a[w]=o}for(C=c.s.r+s;C<=c.e.r;++C)if(!(E[C]||{}).hidden){var A=v4e(e,c,C,h,n,a,v,u);(A.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[p++]=A.row)}return g.length=p,g}var ED=/"/g;function b4e(e,t,r,n,s,a,i,o){for(var c=!0,u=[],d="",f=Oa(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var g=o.dense?(e[r]||[])[h]:e[n[h]+f];if(g==null)d="";else if(g.v!=null){c=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:y0(g,null,o));for(var p=0,y=0;p!==d.length;++p)if((y=d.charCodeAt(p))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(ED,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(c=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(ED,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function HN(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Vn(e["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],p=s.s.c;p<=s.e.c;++p)(h[p]||{}).hidden||(f[p]=na(p));for(var y=0,v=s.s.r;v<=s.e.r;++v)(g[v]||{}).hidden||(d=b4e(e,s,v,f,i,c,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function IV(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=HN(e,t);return r}function w4e(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Vn(e["!ref"]),a="",i=[],o,c=[],u=Array.isArray(e);for(o=s.s.c;o<=s.e.c;++o)i[o]=na(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=Oa(d),o=s.s.c;o<=s.e.c;++o)if(t=i[o]+a,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function LV(e,t,r){var n=r||{},s=+!n.skipHeader,a=e||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?sa(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+s}};if(a["!ref"]){var f=Vn(a["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+s)}else i==-1&&(i=0,d.e.r=t.length-1+s);var h=n.header||[],g=0;t.forEach(function(y,v){va(y).forEach(function(C){(g=h.indexOf(C))==-1&&(h[g=h.length]=C);var w=y[C],_="z",T="",E=on({c:o+g,r:i+v+s});u=Kv(a,E),w&&typeof w=="object"&&!(w instanceof Date)?a[E]=w:(typeof w=="number"?_="n":typeof w=="boolean"?_="b":typeof w=="string"?_="s":w instanceof Date?(_="d",n.cellDates||(_="n",w=ui(w)),T=n.dateNF||sn[14]):w===null&&n.nullError&&(_="e",w=0),u?(u.t=_,u.v=w,delete u.w,delete u.R,T&&(u.z=T)):a[E]=u={t:_,v:w},T&&(u.z=T))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var p=Oa(i);if(s)for(g=0;g<h.length;++g)a[na(g+o)+p]={t:"s",v:h[g]};return a["!ref"]=Cn(d),a}function _4e(e,t){return LV(null,e,t)}function Kv(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=sa(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Kv(e,on(t)):Kv(e,on({r:t,c:r||0}))}function S4e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function GN(){return{SheetNames:[],Sheets:{}}}function VN(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=i+s)!=-1;++s);}if(wV(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function k4e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=S4e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function C4e(e,t){return e.z=t,e}function BV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function T4e(e,t,r){return BV(e,"#"+t,r)}function N4e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function E4e(e,t,r,n){for(var s=typeof t!="string"?t:Vn(t),a=typeof t=="string"?t:Cn(t),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var c=Kv(e,i,o);c.t="n",c.F=a,delete c.v,i==s.s.r&&o==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var s4={encode_col:na,encode_row:Oa,encode_cell:on,encode_range:Cn,decode_col:wN,decode_row:bN,split_cell:Lhe,decode_cell:sa,decode_range:yl,format_cell:y0,sheet_add_aoa:fG,sheet_add_json:LV,sheet_add_dom:AV,aoa_to_sheet:F1,json_to_sheet:_4e,table_to_sheet:jV,table_to_book:Owe,sheet_to_csv:HN,sheet_to_txt:IV,sheet_to_json:t_,sheet_to_html:EV,sheet_to_formulae:w4e,sheet_to_row_object_array:t_,sheet_get_cell:Kv,book_new:GN,book_append_sheet:VN,book_set_sheet_visibility:k4e,cell_set_number_format:C4e,cell_set_hyperlink:BV,cell_set_internal_link:T4e,cell_add_comment:N4e,sheet_set_array_formula:E4e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const $V=({onBackToCabinet:e,selectedGrade:t,selectedClass:r,openRetestModal:n,forceRefreshOnMount:s=!1})=>{Xo(),k0();const{user:a,isAuthenticated:i}=Fs(),{showNotification:o}=di(),c=S.useCallback(Le=>{let nt=null;if(typeof Le?.percentage=="number"&&!Number.isNaN(Le.percentage))return nt=Math.round(Le.percentage),console.debug("[TeacherResults] Using provided percentage",{percentage:Le.percentage,rounded:nt,result:Le}),nt;const Wt=Le?.retest_best_score??Le?.score,kt=Le?.retest_best_max_score??Le?.max_score,wr=Number(Wt??0),Ft=Number(kt??0);return Ft>0&&(nt=Math.round(wr/Ft*100)),nt},[]);S.useCallback(Le=>{const nt=c(Le);return nt===null?"text-gray-600":nt<50?"text-red-600 font-semibold":nt<70?"text-yellow-600":"text-green-600"},[c]),S.useCallback(Le=>{const nt=c(Le);return nt!==null&&nt<50},[c]);const[u,d]=S.useState(null),[f,h]=S.useState(!0),[g,p]=S.useState(""),[y,v]=S.useState([]),[C,w]=S.useState(null),[_,T]=S.useState(!1),[E,A]=S.useState([]),[F,j]=S.useState([]),[P,D]=S.useState([1,2]),[B,V]=S.useState(null),[Y,re]=S.useState(null),[te,ee]=S.useState(null),[L,Q]=S.useState("main"),[U,G]=S.useState(null),[W,M]=S.useState(null),I=U||t,z=W||r,[q,ne]=S.useState(null),[X,se]=S.useState({}),[ce,pe]=S.useState(!1),[be,oe]=S.useState(new Set),[je,Re]=S.useState(!0),[Xe,ft]=S.useState(null),[Je,Ht]=S.useState(null),[Ve,at]=S.useState(!1),[gt,Te]=S.useState(!1),[bt,Ct]=S.useState(!1),Lt=S.useRef(null),[Yt,it]=S.useState(null),[xt,Mt]=S.useState(!1),[rt,Qe]=S.useState(null),[It,Tt]=S.useState(!1),[Rt,cr]=S.useState(null),[hr,Cr]=S.useState(""),[ur,Sr]=S.useState(""),[we,Me]=S.useState(!1),[Ie,Ce]=S.useState(!1),[Ze,wt]=S.useState(null),[Nt,Oe]=S.useState(""),[Ke,st]=S.useState(!1),[Vt,qt]=S.useState(new Set),[gr,Vr]=S.useState({}),[Nr,dn]=S.useState(!1),[me,Ne]=S.useState(null),[ve,Ee]=S.useState(""),[ue,he]=S.useState(!1),[Pe,tt]=S.useState(null),[Ge,Ye]=S.useState(null),[ct,de]=S.useState(!1),[_e,Fe]=S.useState(!1),[De,qe]=S.useState({isOpen:!1,testResult:null}),[zt,_r]=S.useState({}),jr=S.useRef(new Set),pt=S.useRef({}),or=S.useRef(null);S.useEffect(()=>{console.log(" editingColumns state changed:",Array.from(Vt)),jr.current=Vt},[Vt]),S.useEffect(()=>{console.log(" columnScores state changed:",gr),pt.current=gr},[gr]);const Wr=S.useCallback(Le=>{console.log(" Toggling test collapse for:",Le),oe(nt=>{const Wt=new Set(nt);return Wt.has(Le)?(Wt.delete(Le),console.log(" Expanding test:",Le)):(Wt.add(Le),console.log(" Collapsing test:",Le)),console.log(" New collapsed tests:",Array.from(Wt)),Wt})},[]),Fr=S.useCallback(()=>{if(Lt.current){const{scrollLeft:Le,scrollWidth:nt,clientWidth:Wt}=Lt.current;Te(Le>0),Ct(Le<nt-Wt-1)}},[]);S.useEffect(()=>{Gr()},[]),S.useEffect(()=>{if(B&&Lt.current){const Le=setTimeout(Fr,100);return()=>clearTimeout(Le)}},[B,Fr]),S.useEffect(()=>{console.log(" Current collapsed tests state:",Array.from(be))},[be]);const Tr=S.useCallback(async(Le,nt=!1)=>{try{pe(!0);const Wt=a?.teacher_id,kt=`${I}/${z}`,wr=await g0e.getTeacherStudentResults(Wt,I,kt,Le,nt);if(wr.success){console.log(" Results loaded for term:",Le,wr.results?.length||0,"results"),console.log(" Students loaded:",wr.students?.length||0,"students");const Ft=[],Qr=new Set,Ln=new Set;wr.results&&wr.results.length>0&&wr.results.forEach(ar=>{ar.test_name&&!Qr.has(ar.test_name)&&(Qr.add(ar.test_name),Ft.push({test_name:ar.test_name,test_type:ar.test_type,subject:ar.subject})),ar.subject&&Ln.add(ar.subject)});const He=(wr.students||[]).map(ar=>{const bs={};return(wr.results||[]).filter(hn=>hn.student_id===ar.student_id).forEach(hn=>{hn.test_name&&(bs[hn.test_name]={id:hn.id,test_type:hn.test_type,test_id:hn.test_id,subject_id:hn.subject_id,score:hn.score,max_score:hn.max_score,retest_offered:hn.retest_offered,caught_cheating:hn.caught_cheating,visibility_change_times:hn.visibility_change_times,answers:hn.answers,ai_feedback:hn.ai_feedback,name:hn.name,surname:hn.surname,test_name:hn.test_name})}),{...ar,...bs}}),pr={results:wr.results||[],students:He,class:He,unique_tests:Ft,subjects:Array.from(Ln),count:wr.count||0,student_count:wr.student_count||0};console.log(" Processed results data:",{uniqueTests:Ft.length,subjects:Array.from(Ln),resultsCount:wr.results?.length||0,studentsWithScores:He.length,sampleStudent:He[0]}),V(pr),se(pr),ee(new Date)}}catch(Wt){console.error(" Error loading results for term:",Wt),V(null),se(null)}finally{pe(!1)}},[a,I,z]);S.useEffect(()=>{(async()=>{try{at(!0),await gu.loadAcademicCalendar();const nt=gu.getCurrentSemesterTerms();Ht(nt),nt?.currentTerm&&(ft(nt.currentTerm.id),I&&z&&Tr(nt.currentTerm.id,s))}catch(nt){console.error(" Error initializing academic calendar:",nt)}finally{at(!1)}})()},[I,z,Tr,s]),S.useEffect(()=>{t&&r&&(console.log(" Props detected:",{grade:t,class:r}),Je?.currentTerm&&(ft(Je.currentTerm.id),Tr(Je.currentTerm.id,s)))},[t,r,Je,Tr,s]);const Gr=S.useCallback(async()=>{console.log(" Initializing teacher results...");try{if(h(!0),p(""),!i||!a){console.log(" User not authenticated"),p("User not authenticated");return}if(a.role!==zo.TEACHER){console.error(" Invalid user role for teacher results:",a.role),p("Access denied. Teacher role required.");return}console.log(" Loading teacher assignments..."),await Lr(),console.log(" TODO: Load academic calendar service"),console.log(" Teacher results initialization complete!")}catch(Le){console.error(" Error initializing teacher results:",Le),p("Failed to initialize teacher results")}finally{h(!1)}},[i,a]),Lr=S.useCallback(async()=>{console.log(" Loading teacher assignments...");try{const Le=`teacher_data_${a?.teacher_id||a?.id||""}`;let nt=js(Le);nt&&nt.subjects&&nt.subjects.length>0&&(nt.subjects.some(He=>He.subject&&He.classes&&He.classes.length>0)||(console.log(" Cached data has invalid subject structure, forcing refresh"),localStorage.removeItem(Le),nt=null)),nt?console.log(" Cache HIT! Using cached teacher data"):(console.log(" Cache MISS! Fetching teacher data from API"),nt=await Hs.getTeacherData(),console.log(" Teacher data loaded:",nt),ys(Le,nt,ds.teacher_subjects)),d(nt);const Wt=[];nt&&nt.subjects&&(console.log(" Teacher subjects structure:",nt.subjects),nt.subjects.forEach(Ln=>{console.log(" Processing subject:",Ln),Ln.classes&&Ln.classes.forEach(He=>{He.grade&&He.class&&Wt.push({grade:He.grade,class:He.class,subject:Ln.subject||Ln.name||"Unknown Subject"})})})),j(Wt),console.log(" Available classes from teacher data:",Wt);const kt=`teacher_tests_${a?.teacher_id||a?.id||""}`,wr=js(kt);wr&&wr.some(Ln=>Ln.test_type==="drawing")&&(console.log(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(kt));let Ft=js(kt);Ft?console.log(" Cache HIT! Using cached teacher tests"):(console.log(" Cache MISS! Fetching teacher tests from API"),Ft=await Pn.getTeacherTests(),console.log(" Teacher tests loaded:",Ft),ys(kt,Ft,ds.teacher_tests));const Qr=Ft.flatMap(Ln=>Ln.assignments||[]);v(Qr),console.log(" Raw assignments data:",Qr),console.log(" Teacher assignments loaded:",Qr.length)}catch(Le){console.error(" Error loading teacher assignments:",Le),o("Failed to load teacher assignments","error")}},[o]),zn=S.useCallback(async(Le,nt)=>{console.log(" Showing classes for grade:",Le,"class:",nt),G(Le),M(nt),w(null),V(null),Le&&nt&&console.log(" TODO: Implement academic calendar service for term selection")},[]);S.useCallback((Le,nt)=>{console.log(" Showing semesters for class:",Le,nt),w(null),V(null),console.log(" TODO: Implement academic calendar service for term selection")},[]),S.useCallback((Le,nt)=>{console.log(" Class clicked:",Le,nt),T(!0),console.log(" TODO: Implement academic calendar service for term selection")},[]);const br=S.useCallback(async(Le,nt=!1)=>{!I||!z||(console.log(" Loading results for semester:",Le,"forceRefresh:",nt),w(Le),Je?.currentTerm&&await Tr(Je.currentTerm.id,nt))},[I,z,Je,Tr]),fn=S.useCallback(()=>Je?l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Current Semester: ",Je?.semester===1?"Semester 1":"Semester 2"]}),l.jsx("div",{className:"flex space-x-4",children:Je?.terms.map(Le=>l.jsx(vt.button,{className:`px-6 py-3 rounded-lg font-semibold transition-all duration-300 ${Le.isCurrent?"bg-blue-600 text-white shadow-lg":Xe===Le.id?"bg-green-500 text-white shadow-lg":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,onClick:()=>{ft(Le.id),Tr(Le.id)},whileHover:{scale:1.05},whileTap:{scale:.95},children:Le.label},Le.id))})]}):l.jsx("div",{className:"flex space-x-4 mb-6",children:l.jsx("div",{className:"px-6 py-3 rounded-lg bg-gray-200 text-gray-500",children:"Loading terms..."})}),[Je,Xe,Tr]);S.useCallback(Le=>Le.reduce((nt,Wt)=>(nt[Wt.student_id]||(nt[Wt.student_id]=[]),nt[Wt.student_id].push(Wt),nt),{}),[]),S.useCallback(Le=>{if(Le.length===0)return 0;const nt=Le.reduce((Wt,kt)=>Wt+(kt.percentage||0),0);return Math.round(nt/Le.length)},[]),S.useCallback(Le=>{Le.score<Le.passing_score&&window.confirm("Give another try?")&&Xr(Le.student_id,Le.test_id)},[]);const Xr=S.useCallback(async(Le,nt)=>{try{(await fetch("/.netlify/functions/reset-test-attempt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({studentId:Le,testId:nt})})).ok&&(z&&br(C,!0),o("Test made accessible to student","success"))}catch(Wt){console.error("Error resetting test attempt:",Wt),o("Failed to reset test attempt","error")}},[z,C,br,o]),qn=S.useCallback((Le,nt)=>{if(Le===null||nt===null)return"";const Wt=Math.round(Le/nt*100);return Wt>=80?"text-green-600 bg-green-50":Wt>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50"},[]),An=S.useCallback(Le=>{it(Le),Mt(!0)},[]),ke=S.useCallback((Le,nt="overview",Wt)=>{try{const wr=!!Le?.ai_feedback,Ft=typeof Le?.ai_feedback;let Qr=[];if(wr)if(Ft==="string")try{Qr=Object.keys(JSON.parse(Le.ai_feedback))}catch{Qr=["<invalid json>"]}else Ft==="object"&&(Qr=Object.keys(Le.ai_feedback||{}));console.log("[AI DEBUG] Opening speaking result",{hasAi:wr,aiType:Ft,aiKeys:Qr})}catch{}const kt={...Le,__initialTab:nt};Wt&&(kt.__audioUrl=Wt),Qe(kt),Tt(!0)},[]),Pt=S.useCallback(async(Le,nt)=>{if(!Le||!nt)return console.error("fetchTestQuestions: Missing testType or testId",{testType:Le,testId:nt}),null;const Wt=`${Le}_${nt}`;if(zt[Wt])return console.log(" Using cached questions for",Wt),zt[Wt];Fe(!0);try{console.log(" Fetching questions for",{testType:Le,testId:nt});const kt=await Pn.getTestQuestions(Le,nt);return console.log(" Questions fetched:",kt?.length||0,"questions"),_r(wr=>({...wr,[Wt]:kt})),kt}catch(kt){return console.error(" Error fetching test questions:",kt),o("Failed to load test questions","error"),null}finally{Fe(!1)}},[zt,o]),Mr=S.useCallback(async(Le,nt)=>{if(console.log(" Opening answer modal for:",{testResult:Le,test:nt}),console.log(" [handleViewAnswers] testResult.answers:",Le?.answers),console.log(" [handleViewAnswers] testResult.answers type:",typeof Le?.answers),console.log(" [handleViewAnswers] testResult.retest_offered:",Le?.retest_offered),console.log(" [handleViewAnswers] Full testResult keys:",Le?Object.keys(Le):"null"),Le.test_type==="drawing"||nt?.test_type==="drawing"){An(Le);return}if(Le.test_type==="speaking"||nt?.test_type==="speaking"){ke(Le);return}const Wt=Le.test_type||nt?.test_type;if(Wt==="word_matching"||Wt==="matching_type"){o("Word matching and picture matching tests have separate view mechanisms","info");return}tt(Le),Ye(null),de(!0),Fe(!0);const kt=Le.test_id||nt?.test_id;if(!Wt||!kt){o("Unable to load test questions: Missing test type or ID","error"),Fe(!1);return}try{const wr=await Pt(Wt,kt);wr?Ye(wr):o("Failed to load test questions","error")}finally{Fe(!1)}},[Pt,An,ke,o]);S.useCallback((Le,nt,Wt)=>{cr({resultId:Le,score:nt,maxScore:Wt}),Cr(nt?.toString()||""),Sr(Wt?.toString()||""),Ce(!0)},[]),S.useCallback(Le=>{Cr(Le)},[]),S.useCallback(Le=>{Sr(Le)},[]),S.useCallback(async()=>{if(Rt){Me(!0);try{const Le={resultId:Rt.resultId,score:parseInt(hr)||0,maxScore:parseInt(ur)||1};(await fetch(Yd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Le)})).ok?(o("Score updated successfully","success"),z&&br(C,!0),cr(null),Cr(""),Sr(""),Ce(!1)):o("Failed to update score","error")}catch(Le){console.error("Error updating score:",Le),o("Failed to update score","error")}finally{Me(!1)}}},[Rt,hr,ur,z,C,br,o]),S.useCallback(()=>{cr(null),Cr(""),Sr(""),Ce(!1)},[]);const qr=S.useCallback((Le,nt)=>{wt({resultId:Le,score:nt}),Oe(nt.toString())},[]),Tn=S.useCallback(async()=>{if(Ze){st(!0);try{const Le={resultId:Ze.resultId,score:parseInt(Nt)||0},nt=await fetch(Yd.UPDATE_SPEAKING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Le)});if(nt.ok){const Wt=await nt.json();o("Speaking test score updated successfully","success"),rt&&Qe(kt=>({...kt,score:Wt.score,percentage:Wt.percentage})),z&&br(C,!0),wt(null),Oe("")}else{const Wt=await nt.json();o(Wt.error||"Failed to update speaking test score","error")}}catch(Le){console.error("Error updating speaking test score:",Le),o("Failed to update speaking test score","error")}finally{st(!1)}}},[Ze,Nt,z,C,br,o]),Jr=S.useCallback(()=>{wt(null),Oe("")},[]),hs=(Le,nt)=>{console.log(" Starting column editing for drawing test:",Le),console.log(" Current editingColumns before update:",Array.from(Vt)),console.log(" Results data passed to function:",nt),qt(Wt=>{const kt=new Set(Wt).add(Le);return console.log(" Updated editingColumns:",Array.from(kt)),kt}),console.log(" Initializing column scores for test:",Le),console.log(" Results data:",nt),console.log(" Results.class:","null"),console.log(" No results or class data available")},Xs=S.useCallback(Le=>{qt(nt=>{const Wt=new Set(nt);return Wt.delete(Le),Wt}),Vr(nt=>{const Wt={...nt};return delete Wt[Le],Wt})},[]),mi=S.useCallback((Le,nt,Wt,kt)=>{const wr=kt.toString();pt.current[Le]||(pt.current[Le]={}),pt.current[Le][nt]||(pt.current[Le][nt]={}),pt.current[Le][nt][Wt]=wr;const Ft=parseInt(kt)||0;Vr(Qr=>({...Qr,[Le]:{...Qr[Le],[nt]:{...Qr[Le]?.[nt],[Wt]:Ft}}}))},[]);S.useCallback(async Le=>{if(pt.current[Le]){dn(!0);try{const nt=Object.entries(pt.current[Le]).map(([Ft,Qr])=>({resultId:Qr.resultId,score:parseInt(Qr.score)||0,maxScore:parseInt(Qr.maxScore)||100}));console.log(" Saving column scores for",Le,":",nt);const Wt=nt.map(Ft=>(console.log(" Sending update:",Ft),fetch(Yd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Ft)})));(await Promise.all(Wt)).every(Ft=>Ft.ok)?(o(`Scores updated successfully for ${Le}`,"success"),z&&br(C,!0),Xs(Le)):o("Failed to update some scores","error")}catch(nt){console.error("Error updating column scores:",nt),o("Failed to update scores","error")}finally{dn(!1)}}},[gr,z,C,br,o,Xs]);const xn=S.useCallback((Le,nt,Wt)=>!nt||nt.length===0?l.jsx(vt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:l.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):l.jsx(vt.div,{className:"relative",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:l.jsxs(vt.div,{className:"bg-white rounded-lg shadow-lg overflow-hidden",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.1},children:[l.jsx("div",{className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:kt=>{Lt.current&&(Lt.current.scrollLeft=kt.target.scrollLeft)},children:l.jsx("div",{className:"min-w-full h-1",children:l.jsx("div",{className:"h-1",style:{width:`${(Wt.length+5)*120}px`}})})}),l.jsx("div",{ref:Lt,className:"overflow-x-auto -mx-4 px-4 sm:mx-0 sm:px-0",onScroll:kt=>{Fr(kt);const wr=kt.target.previousElementSibling;wr&&(wr.scrollLeft=kt.target.scrollLeft)},children:l.jsxs("table",{className:"min-w-full border-collapse text-sm min-w-max",children:[l.jsx("thead",{children:l.jsxs(vt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-20 text-center",children:"Student ID"}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 ${je?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[180px] bg-blue-50 cursor-pointer select-none"}`,onClick:kt=>{kt.preventDefault(),kt.stopPropagation(),Re(!je)},title:"Toggle student name columns",children:je?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),l.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 w-16 text-center",children:"No."}),l.jsx("th",{className:"border-b border-gray-200 px-4 py-4 text-left font-semibold text-gray-700 min-w-[100px]",children:"Nickname"}),Wt.map((kt,wr)=>{const Ft=be.has(kt.test_name),Qr=kt.test_type==="drawing",Ln=jr.current.has(kt.test_name);return console.log(` Rendering test ${kt.test_name}:`,{isDrawingTest:Qr,isEditingColumn:Ln,editingColumns:Array.from(jr.current),test_type:kt.test_type}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-4 text-left font-semibold text-gray-700 cursor-pointer hover:bg-blue-200 transition-colors select-none ${Ft?"w-8 min-w-[32px] max-w-[32px] bg-gray-100":"min-w-[100px] bg-blue-50"}`,onClick:He=>{He.preventDefault(),He.stopPropagation(),Wr(kt.test_name)},children:Ft?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:kt.test_name,children:kt.test_name.length>8?kt.test_name.substring(0,8)+"...":kt.test_name}),l.jsx("svg",{className:"w-4 h-4 ml-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})},wr)})]})}),l.jsx("tbody",{children:l.jsx(Wo,{children:nt.map((kt,wr)=>l.jsxs(vt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${wr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1+wr*.05,ease:"easeOut"},whileHover:{scale:1.01,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.99},children:[l.jsx(vt.td,{className:"border-b border-gray-100 px-4 py-4 text-center font-semibold text-gray-900",whileHover:{scale:1.05},transition:{duration:.2},children:kt.student_id}),je?l.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Ft=>{Ft.preventDefault(),Ft.stopPropagation(),Re(!1)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):l.jsxs(l.Fragment,{children:[l.jsx(vt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:kt.name}),l.jsx(vt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:kt.surname})]}),l.jsx(vt.td,{className:"border-b border-gray-100 px-4 py-4 text-center text-gray-900",whileHover:{scale:1.02},transition:{duration:.2},children:kt.number??wr+1}),l.jsx(vt.td,{className:"border-b border-gray-100 px-4 py-4 text-gray-600",whileHover:{scale:1.02},transition:{duration:.2},children:kt.nickname||"-"}),Wt.map((Ft,Qr)=>{const Ln=be.has(Ft.test_name),He=kt[Ft.test_name];return Ln?(console.log(" Rendering collapsed column for test:",Ft.test_name),l.jsx("td",{className:"border-b border-gray-100 px-1 py-4 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:pr=>{pr.preventDefault(),pr.stopPropagation(),console.log(" Clicked on collapsed arrow for:",Ft.test_name),Wr(Ft.test_name)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},Qr)):l.jsx(vt.td,{className:"border-b border-gray-100 px-2 py-4 text-sm min-w-[100px]",initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},transition:{duration:.3},whileHover:{scale:1.02},onClick:pr=>{console.debug("[TeacherResults] Main table TD clicked",{testResult:He,student:kt.student_id});const ar=He?.test_type||Ft?.test_type;if(ar==="drawing"||ar==="speaking")return;const bs=c(He),_n=bs!==null&&bs<50;if(He?.retest_offered===!0&&(ar==="multiple_choice"||ar==="true_false"||ar==="input")){Mr(He,Ft);return}if(ar==="fill_blanks"||ar==="matching_type"||ar==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked",{testType:ar,isRed:_n,testResult:He}),_n){if(He?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:kt.student_id,test:Ft}),n({failedStudentIds:[kt.student_id],test_type:Ft.test_type,original_test_id:He?.test_id||Ft.test_id,subject_id:He?.subject_id||Ft.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal",{testResult:He}),qe({isOpen:!0,testResult:He});else if(_n){if(He?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] Main table TD -> opening retest modal",{studentId:kt.student_id,test:Ft}),n({failedStudentIds:[kt.student_id],test_type:Ft.test_type,original_test_id:He?.test_id||Ft.test_id,subject_id:He?.subject_id||Ft.subject_id,grade:t,class:r})}else Mr(He,Ft)},children:He&&He.test_type==="drawing"?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[l.jsx("button",{onClick:()=>An(He),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"View Drawing"}),(()=>{const pr=`${Ft.test_name}|${kt.student_id}`,ar=me===pr,bs=Number.isFinite(He?.score)?He.score:0;if(!ar){const _n=c(He),hn=_n!==null&&_n<50,Sn=_n!==null&&_n>=50&&_n<70,jn=He?.retest_offered===!0,Xl=_n===null?"text-gray-600":hn?"text-red-600 font-semibold":Sn?"text-yellow-600":"text-green-600";return l.jsxs(vt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${Xl} cursor-pointer hover:opacity-90 ${jn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:hn?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:Oi=>{Oi.preventDefault(),Oi.stopPropagation(),hn&&!jn?n({failedStudentIds:[kt.student_id],test_type:Ft.test_type,original_test_id:He?.test_id||Ft.test_id,subject_id:He?.subject_id||Ft.subject_id,grade:t,class:r}):(Ne(pr),Ee(String(bs)))},title:jn?"Retest offered":hn?"Offer retest":"Double-click to edit score",children:[(()=>{const Oi=He.retest_best_score??He.score,xh=He.retest_best_max_score??He.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:hn?"text-red-700":"",children:Oi}),"/",l.jsx("span",{children:xh})]})})(),He.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})}return l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:10,value:ve,onChange:_n=>Ee(_n.target.value),onBlur:async()=>{const _n=Math.max(0,Math.min(10,parseFloat(ve||"0")));he(!0);try{const hn={resultId:He?.id,score:_n,maxScore:10},Sn=await(window.tokenManager?.getToken()||ma.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Yd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:Sn?`Bearer ${Sn}`:""},body:JSON.stringify(hn)})).ok)throw new Error("Failed to save")}catch{}finally{he(!1),Ne(null),br(C,!0)}},onKeyDown:async _n=>{_n.key==="Enter"?_n.currentTarget.blur():_n.key==="Escape"&&Ne(null)},className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",disabled:ue}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",value:10,className:"w-12 px-2 py-1 text-xs border border-gray-300 bg-gray-100 rounded",disabled:!0})]})})(),He.caught_cheating&&He.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",He.visibility_change_times,")"]})]}):He&&(He.test_type==="speaking"||Ft.test_type==="speaking")?l.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[(()=>{const pr=He?.answers;let ar;if(typeof pr=="string")if(/^https?:\/\//i.test(pr))ar=pr;else try{ar=JSON.parse(pr)?.audio_url}catch{}else pr&&typeof pr=="object"&&(ar=pr.audio_url);return!ar&&He?.audio_url&&(ar=He.audio_url),l.jsx(l.Fragment,{children:l.jsx("button",{onClick:()=>ke({...He,__studentId:kt.student_id},"audio",ar),className:"text-blue-600 hover:text-blue-800 underline text-sm font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Results"})})})(),(()=>{const pr=jr.current.has(Ft.test_name);return console.log(` Score cell for ${Ft.test_name}:`,{isEditing:pr,editingColumns:Array.from(jr.current),test_name:Ft.test_name}),pr})()?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:He.max_score||100,value:pt.current[Ft.test_name]?.[kt.student_id]?.score||He.score||"",onChange:pr=>mi(Ft.test_name,kt.student_id,"score",pr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",min:"1",value:pt.current[Ft.test_name]?.[kt.student_id]?.maxScore||He.max_score||100,onChange:pr=>mi(Ft.test_name,kt.student_id,"maxScore",pr.target.value),className:"w-16 px-2 py-1 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):l.jsxs("div",{className:"px-2 py-1 rounded-full text-xs font-medium",onDoubleClick:()=>{console.log(" Double-clicked on speaking test score:",Ft.test_name),console.log(" Results state at double-click:",B),console.log(" Test result:",He),console.log(" Student:",kt),console.log(" Test:",Ft),He&&He.id?(console.log(" Starting column editing for speaking test:",Ft.test_name),hs(Ft.test_name)):console.log(" No test result ID found, cannot edit")},title:"Double-click to edit scores",children:[(()=>{const pr=c(He),ar=pr!==null&&pr<50,bs=pr!==null&&pr>=50&&pr<70,_n=He.retest_offered,hn=pr===null?"text-gray-600":ar?"text-red-600 font-semibold":bs?"text-yellow-600":"text-green-600";return l.jsxs(vt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${hn} cursor-pointer hover:opacity-90 ${_n?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:ar?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:Sn=>{Sn.preventDefault(),Sn.stopPropagation(),ar&&!_n&&(console.log(" Offering retest for speaking test:",Ft.test_name),n({failedStudentIds:[kt.student_id],test_type:Ft.test_type,original_test_id:He?.test_id||Ft.test_id,subject_id:He?.subject_id||Ft.subject_id,grade:t,class:r}))},title:_n?"Retest offered":ar?"Offer retest":'Use "View Results" button to review',children:[(()=>{const Sn=He.retest_best_score??He.score,jn=He.retest_best_max_score??He.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:ar?"text-red-700":"",children:Sn}),"/",l.jsx("span",{children:jn})]})})(),He.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),He.caught_cheating&&He.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",He.visibility_change_times,")"]})]})]}):He&&He.score!==null&&He.score!==void 0?l.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[(()=>{const pr=c(He),ar=pr!==null&&pr<50,bs=pr!==null&&pr>=50&&pr<70,_n=pr===null?"text-gray-600":ar?"text-red-600 font-semibold":bs?"text-yellow-600":"text-green-600",hn=He?.retest_offered===!0;return l.jsxs(vt.div,{className:`px-2 py-1 rounded-full text-xs font-medium ${_n} cursor-pointer hover:opacity-90 ${hn?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:ar?{color:"#b91c1c"}:void 0,whileHover:{scale:1.1},transition:{duration:.2},onClick:Sn=>{Sn.preventDefault(),Sn.stopPropagation();const jn=He?.test_type||Ft?.test_type;if(!(jn==="drawing"||jn==="speaking")){if(He?.retest_offered===!0&&(jn==="multiple_choice"||jn==="true_false"||jn==="input")){Mr(He,Ft);return}if(jn==="fill_blanks"||jn==="matching_type"||jn==="word_matching"){if(console.debug("[TeacherResults] Score pill clicked (Fill Blanks/Matching/Word Matching)",{testType:jn,isRed:ar,testResult:He}),ar){if(He?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[kt.student_id],test_type:Ft.test_type,original_test_id:He?.test_id||Ft.test_id,subject_id:He?.subject_id||Ft.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal from score pill",{testResult:He}),qe({isOpen:!0,testResult:He});return}if(ar){if(He?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[kt.student_id],test_type:Ft.test_type,original_test_id:He?.test_id||Ft.test_id,subject_id:He?.subject_id||Ft.subject_id,grade:t,class:r})}else Mr(He,Ft)}},title:hn?"Click to view retest answers":ar?"Offer retest":"",children:[(()=>{const Sn=He.retest_best_score??He.score,jn=He.retest_best_max_score??He.max_score;return l.jsxs(l.Fragment,{children:[l.jsx("span",{className:ar?"text-red-700":"",children:Sn}),"/",l.jsx("span",{children:jn})]})})(),He.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),He.caught_cheating&&He.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",He.visibility_change_times,")"]})]}):l.jsx("span",{className:"text-gray-400",children:"-"})},Qr)})]},wr))})})]})})]})}),[qn,be,Wr,je]),wl=S.useCallback((Le,nt,Wt)=>!nt||nt.length===0?l.jsx(vt.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:l.jsx("p",{className:"text-gray-500",children:"No students found for this subject"})}):l.jsx(vt.div,{className:"w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},children:l.jsx(vt.div,{className:"overflow-x-auto -mx-4 px-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.1},children:l.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden min-w-max",children:l.jsxs("table",{className:"w-full border-collapse text-xs min-w-max",children:[l.jsx("thead",{children:l.jsxs(vt.tr,{className:"bg-gradient-to-r from-blue-50 to-indigo-50",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.2},children:[l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-16 text-center",children:"ID"}),l.jsx("th",{className:`border-b border-gray-200 px-2 py-3 text-left font-semibold text-gray-700 ${je?"w-8 min-w-[32px] max-w-[32px] bg-gray-100 cursor-pointer select-none":"min-w-[160px] bg-blue-50 cursor-pointer select-none"}`,onClick:kt=>{kt.preventDefault(),kt.stopPropagation(),Re(!je)},title:"Toggle student name columns",children:je?l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"truncate",title:"Student Name",children:"Student Name"}),l.jsx("svg",{className:"w-3 h-3 ml-1 flex-shrink-0 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 w-12 text-center",children:"No."}),l.jsx("th",{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[80px]",children:"Nickname"}),Wt.map((kt,wr)=>(kt.test_type,jr.current.has(kt.test_name),l.jsx(vt.th,{className:"border-b border-gray-200 px-3 py-3 text-left font-semibold text-gray-700 min-w-[100px]",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.3+wr*.05},children:l.jsx("div",{className:"flex flex-col space-y-1",children:l.jsx("span",{className:"text-xs",children:kt.test_name.length>10?kt.test_name.substring(0,10)+"...":kt.test_name})})},wr)))]})}),l.jsx("tbody",{children:l.jsx(Wo,{children:nt.map((kt,wr)=>l.jsxs(vt.tr,{className:`border-b border-gray-100 hover:bg-blue-50 transition-colors duration-200 ${wr%2===0?"bg-white":"bg-gray-50"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.1+wr*.03,ease:"easeOut"},whileHover:{scale:1.005,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.995},children:[l.jsx(vt.td,{className:"border-b border-gray-100 px-3 py-3 text-center font-semibold text-gray-900",whileHover:{scale:1.03},transition:{duration:.15},children:kt.student_id}),je?l.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-xs w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-3 h-3 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:Ft=>{Ft.preventDefault(),Ft.stopPropagation(),Re(!1)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})}):l.jsxs(l.Fragment,{children:[l.jsx(vt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:kt.name}),l.jsx(vt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:kt.surname})]}),l.jsx(vt.td,{className:"border-b border-gray-100 px-3 py-3 text-center text-gray-900 truncate",whileHover:{scale:1.01},transition:{duration:.15},children:kt.number??wr+1}),l.jsx(vt.td,{className:"border-b border-gray-100 px-3 py-3 text-gray-600 whitespace-normal break-words",whileHover:{scale:1.01},transition:{duration:.15},children:kt.nickname||"-"}),Wt.map((Ft,Qr)=>{const Ln=be.has(Ft.test_name),He=kt[Ft.test_name];return Ln?l.jsx("td",{className:"border-b border-gray-100 px-1 py-3 text-sm w-8 min-w-[32px] max-w-[32px]",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("svg",{className:"w-4 h-4 text-gray-400 cursor-pointer hover:text-gray-600 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",onClick:pr=>{pr.preventDefault(),pr.stopPropagation(),Wr(Ft.test_name)},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})},Qr):l.jsx(vt.td,{className:"border-b border-gray-100 px-3 py-3 text-sm",whileHover:{scale:1.01},transition:{duration:.15},onClick:pr=>{console.debug("[TeacherResults] TD clicked",{testResult:He,student:kt.student_id});const ar=He?.test_type||Ft?.test_type;if(ar==="drawing"||ar==="speaking")return;const bs=c(He),_n=bs!==null&&bs<50;if(He?.retest_offered===!0&&(ar==="multiple_choice"||ar==="true_false"||ar==="input")){Mr(He,Ft);return}if(ar==="fill_blanks"||ar==="matching_type"||ar==="word_matching")if(console.debug("[TeacherResults] Fill Blanks/Matching/Word Matching clicked (nested table)",{testType:ar,isRed:_n,testResult:He}),_n){if(He?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:kt.student_id}),n({failedStudentIds:[kt.student_id],test_type:He.test_type,original_test_id:He.test_id,subject_id:He.subject_id,grade:t,class:r})}else console.debug("[TeacherResults] Opening edit score modal (nested table)",{testResult:He}),qe({isOpen:!0,testResult:He});else if(_n){if(He?.retest_offered){o("Retest is already offered","info");return}console.debug("[TeacherResults] TD -> opening retest modal",{studentId:kt.student_id}),n({failedStudentIds:[kt.student_id],test_type:He.test_type,original_test_id:He.test_id,subject_id:He.subject_id,grade:t,class:r})}else Mr(He,Ft)},children:He&&(He.test_type==="drawing"||Ft.test_type==="drawing"||He.test_type==="speaking"||Ft.test_type==="speaking"||He.score!==null&&He.score!==void 0)?l.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[He.test_type==="drawing"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>An(He),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View"}),jr.current.has(Ft.test_name)?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:He.max_score||100,value:pt.current[Ft.test_name]?.[kt.student_id]?.score||He.score||"",onChange:pr=>mi(Ft.test_name,kt.student_id,"score",pr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("span",{className:"text-xs text-gray-500",children:"/"}),l.jsx("input",{type:"number",min:"1",value:pt.current[Ft.test_name]?.[kt.student_id]?.maxScore||He.max_score||100,onChange:pr=>mi(Ft.test_name,kt.student_id,"maxScore",pr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Max"})]}):(()=>{const pr=c(He),ar=pr!==null&&pr<50,bs=pr!==null&&pr>=50&&pr<70,_n=He.retest_offered,hn=pr===null?"text-gray-600":ar?"text-red-600 font-semibold":bs?"text-yellow-600":"text-green-600";return l.jsxs(vt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${hn} cursor-pointer hover:opacity-90 ${_n?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:ar?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>hs(Ft.test_name),onClick:Sn=>{Sn.preventDefault(),Sn.stopPropagation();const jn=He?.test_type||Ft?.test_type;if(!(jn==="drawing"||jn==="speaking")){if(He?.retest_offered===!0&&(jn==="multiple_choice"||jn==="true_false"||jn==="input")){Mr(He,Ft);return}if(ar){if(He?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[kt.student_id],test_type:Ft.test_type,original_test_id:He?.test_id||Ft.test_id,subject_id:He?.subject_id||Ft.subject_id,grade:t,class:r})}else Mr(He,Ft)}},title:_n?"Click to view retest answers":ar?"Offer retest":"Click to view answers",children:[l.jsx("span",{className:ar?"text-red-700":"",children:He.score}),"/",l.jsx("span",{children:He.max_score}),He.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})()]}):He.test_type==="speaking"||Ft.test_type==="speaking"?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>ke({...He,__studentId:kt.student_id},"audio"),className:"text-blue-600 hover:text-blue-800 underline text-xs font-medium px-1 py-0.5 rounded hover:bg-blue-50",children:"View Audio"}),Ze&&Ze.resultId===He.result_id?l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("input",{type:"number",min:"0",max:He.max_score||100,value:Nt,onChange:pr=>Oe(pr.target.value),className:"w-12 px-1 py-0.5 text-xs border border-blue-500 bg-blue-50 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",placeholder:"Score"}),l.jsx("button",{onClick:()=>Tn(),disabled:Ke,className:"px-1 py-0.5 bg-green-600 text-white text-xs rounded hover:bg-green-700 disabled:opacity-50",children:Ke?"Saving...":"Save"}),l.jsx("button",{onClick:()=>Jr(),disabled:Ke,className:"px-1 py-0.5 bg-gray-500 text-white text-xs rounded hover:bg-gray-600 disabled:opacity-50",children:"Cancel"})]}):(()=>{const pr=c(He),ar=pr!==null&&pr<50,bs=pr!==null&&pr>=50&&pr<70,_n=He.retest_offered,hn=pr===null?"text-gray-600":ar?"text-red-600 font-semibold":bs?"text-yellow-600":"text-green-600";return l.jsxs(vt.div,{className:`px-1 py-0.5 rounded text-xs font-medium ${hn} cursor-pointer hover:opacity-90 ${_n?"bg-blue-50 text-blue-700 border border-blue-200":""}`,style:ar?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onDoubleClick:()=>{wt({resultId:He.result_id,score:He.score}),Oe(He.score?.toString()||"")},onClick:Sn=>{Sn.preventDefault(),Sn.stopPropagation();const jn=He?.test_type||Ft?.test_type;if(!(jn==="drawing"||jn==="speaking")){if(He?.retest_offered===!0&&(jn==="multiple_choice"||jn==="true_false"||jn==="input")){Mr(He,Ft);return}if(ar){if(He?.retest_offered){o("Retest is already offered","info");return}n({failedStudentIds:[kt.student_id],test_type:Ft.test_type,original_test_id:He?.test_id||Ft.test_id,subject_id:He?.subject_id||Ft.subject_id,grade:t,class:r})}else Mr(He,Ft)}},title:_n?"Click to view retest answers":ar?"Offer retest":"Click to view answers, double-click to edit score",children:[l.jsx("span",{className:ar?"text-red-700":"",children:He.score||0}),"/",l.jsx("span",{children:He.max_score||100}),He.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})()]}):(()=>{const pr=c(He),ar=pr!==null&&pr<50,bs=pr!==null&&pr>=50&&pr<70,_n=pr!==null&&pr>=70,hn=He?.retest_offered===!0;console.debug("[TeacherResults] Render pill",{studentId:kt.student_id,pct:pr,isRed:ar,isYellow:bs,isGreen:_n,score:He.score,max:He.max_score,percentageField:He.percentage});const jn=`px-1 py-0.5 rounded text-xs font-medium ${pr===null?"text-gray-600":ar?"text-red-600 font-semibold":bs?"text-yellow-600":"text-green-600"} cursor-pointer hover:opacity-90 pointer-events-auto ${hn?"bg-blue-50 text-blue-700 border border-blue-200":""}`;return l.jsxs(vt.div,{className:jn,style:ar?{color:"#b91c1c"}:void 0,whileHover:{scale:1.05},transition:{duration:.15},onClick:Xl=>{Xl.preventDefault(),Xl.stopPropagation();const Oi=He?.test_type||Ft?.test_type;if(!(Oi==="drawing"||Oi==="speaking")){if(He?.retest_offered===!0&&(Oi==="multiple_choice"||Oi==="true_false"||Oi==="input")){Mr(He,Ft);return}if(ar){if(He?.retest_offered){o("Retest is already offered","info");return}const xh=window.getComputedStyle(Xl.currentTarget).color;console.debug("[TeacherResults] Red pill clicked -> opening retest modal",{studentId:kt.student_id,className:jn,computedColor:xh}),n({failedStudentIds:[kt.student_id],test_type:Ft.test_type,original_test_id:He?.test_id||Ft.test_id,subject_id:He?.subject_id||Ft.subject_id,grade:t,class:r})}else Mr(He,Ft)}},title:hn?"Click to view retest answers":ar?"Offer retest":"Click to view answers",children:[l.jsx("span",{className:ar?"text-red-700":"",children:He.score}),"/",l.jsx("span",{children:He.max_score}),He.caught_cheating&&l.jsx("span",{className:"ml-1",children:""})]})})(),He.caught_cheating&&He.visibility_change_times&&l.jsxs("span",{className:"text-xs text-red-600",children:["(",He.visibility_change_times,")"]})]}):l.jsx("span",{className:"text-gray-400",children:"-"})},Qr)})]},wr))})})]})})})}),[qn,be,Wr,je]),Ue=S.useCallback(()=>{if(!B)return null;console.log(" renderResults - results:",B),console.log(" renderResults - results.class:",B.class),console.log(" renderResults - results.unique_tests:",B.unique_tests);const Le=B.class&&Array.isArray(B.class)&&B.class.length>0;if(console.log(" renderResults - hasStudentData:",Le),!Le)return console.log(" renderResults - No student data, showing no students message"),l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-gray-500",children:"No students found for this class and semester."})});const nt=B.unique_tests||[];return console.log(" renderResults - uniqueTests:",nt),or.current=B,l.jsxs("div",{className:"space-y-6",children:[l.jsxs(vt.div,{className:"bg-gradient-to-r from-red-500 to-pink-500 rounded-lg p-6 text-white",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5,ease:"easeOut"},children:[l.jsxs(vt.h2,{className:"text-2xl font-bold mb-2",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1},children:["Test Results - Grade M",I,", Class ",I,"/",z,", Semester ",C]}),l.jsxs(vt.p,{className:"text-cyan-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.2},children:["Viewing results for ",B.subjects?.length||0," subject(s)"]}),l.jsxs(vt.div,{className:"mt-4 flex gap-2",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[l.jsx("button",{onClick:()=>{const Wt=B.unique_tests?.map(kt=>kt.test_name)||[];oe(new Set(Wt))},className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Collapse All Tests"}),l.jsx("button",{onClick:()=>oe(new Set),className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-sm font-medium transition-colors",children:"Expand All Tests"})]})]}),l.jsxs(vt.div,{className:"bg-white rounded-lg shadow p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:[l.jsx(vt.h3,{className:"text-lg font-semibold text-gray-900 mb-4",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.2},children:"Class Results"}),l.jsx("div",{className:"hidden md:block",children:xn("All Subjects",B.class,nt)}),l.jsx("div",{className:"md:hidden",children:wl("All Subjects",B.class,nt)})]})]})},[B,xn,I,z,C]),Ot=S.useCallback(()=>{if(!B||!B.class||!B.unique_tests)return;const Le=["Student ID","Name","Surname","No.","Nickname",...B.unique_tests.map(Qr=>Qr.test_name)],nt=B.class.map((Qr,Ln)=>{const He=[];return He.push(Qr.student_id),He.push(Qr.name),He.push(Qr.surname),He.push(Qr.number??Ln+1),He.push(Qr.nickname||"-"),B.unique_tests.forEach(pr=>{const ar=Qr[pr.test_name];ar&&ar.score!==null&&ar.score!==void 0?He.push(`${ar.score}/${ar.max_score}`):He.push("-")}),He}),Wt=s4.aoa_to_sheet([Le,...nt]),kt=s4.book_new(),wr=[{wch:10},{wch:15},{wch:15},{wch:6},{wch:12},...B.unique_tests.map(()=>({wch:15}))];Wt["!cols"]=wr,s4.book_append_sheet(kt,Wt,"Class Results");const Ft=`class-results-${I}-${z}-semester-${C}.xlsx`;y4e(kt,Ft),o("Excel file exported successfully!","success")},[B,I,z,C,o]);return f?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Results..."})]})}):g?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Results Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:g}),l.jsx(ht,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsx("div",{className:"flex justify-between items-center py-4",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Class Results"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",te?te.toLocaleString():"Never"]})]})})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Class"}),F.length>0?(()=>{const Le=F.reduce((nt,Wt)=>{const kt=Wt.subject||"Unknown Subject";return nt[kt]||(nt[kt]=[]),nt[kt].push(Wt),nt},{});return l.jsx("div",{className:"space-y-6",children:Object.entries(Le).map(([nt,Wt])=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h3",{className:"text-md font-semibold text-gray-800 mb-3 flex flex-col sm:flex-row sm:items-center items-center",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),nt]}),l.jsxs("span",{className:"ml-0 sm:ml-2 text-sm text-gray-500 mt-1 sm:mt-0",children:["(",Wt.length," classes)"]})]}),l.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Wt.map((kt,wr)=>l.jsxs(ht,{variant:I===kt.grade&&z===kt.class?"primary":"outline",onClick:()=>zn(kt.grade,kt.class),className:"px-3 py-1 text-xs font-medium min-w-[60px]",children:[kt.grade,"/",kt.class]},`${kt.grade}-${kt.class}-${wr}`))})]},nt))})})():l.jsx("p",{className:"text-gray-500",children:"No classes available"})]}),z&&fn(),z&&B&&l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:[I," ",z," - Test Results ",Xe?`(Term ${Je?.terms.find(Le=>Le.id===Xe)?.term})`:""]}),l.jsx("div",{className:"flex space-x-3",children:l.jsxs("button",{type:"button",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-2",onClick:Ot,children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-4 h-4 object-contain"}),l.jsx("span",{className:"font-medium text-sm",children:"Export Excel"})]})})]}),Ue()]}),z&&!B&&l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsx("div",{className:"flex items-center justify-center py-8",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-gray-200 border-t-blue-500"}),l.jsx("span",{className:"text-gray-600",children:"Loading results"})]})})})]})}),Yt&&xt&&l.jsx(vw,{children:l.jsx(EH,{drawing:Yt,isOpen:xt,onClose:()=>Mt(!1),isTeacherView:!0,onSaveScore:async({resultId:Le,score:nt,maxScore:Wt})=>{try{const kt=await(window.tokenManager?.getToken()||ma.get())||localStorage.getItem("accessToken")||localStorage.getItem("token");if(!(await fetch(Yd.UPDATE_DRAWING_TEST_SCORE,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:kt?`Bearer ${kt}`:""},body:JSON.stringify({resultId:Le,score:nt,maxScore:Wt})})).ok)throw new Error("Failed to save");await br(C,!0)}catch{o("Failed to save drawing score","error")}}})}),l.jsx(vw,{children:l.jsx(Tfe,{onScoreUpdate:Le=>{z&&br(C,!0),Pe&&tt(nt=>({...nt,score:Le.score,max_score:Le.maxScore,percentage:Le.percentage}))},isOpen:ct,onClose:()=>{de(!1),tt(null),Ye(null)},testResult:Pe,questions:Ge,isLoadingQuestions:_e})}),l.jsx(vw,{children:l.jsx(Nfe,{isOpen:De.isOpen,onClose:()=>qe({isOpen:!1,testResult:null}),testResult:De.testResult,onScoreUpdate:Le=>{z&&br(C,!0)}})}),rt&&It&&l.jsx(vw,{children:l.jsx(Cfe,{result:rt,isOpen:It,onClose:()=>Tt(!1),initialTab:rt.__initialTab||"overview",editingSpeakingScore:Ze,tempSpeakingScore:Nt,isSavingSpeakingScore:Ke,onStartSpeakingScoreEdit:qr,onSaveSpeakingScore:Tn,onCancelSpeakingScoreEdit:Jr,onTempSpeakingScoreChange:Oe})})]})},A4e={getTestPerformance:async(e,t=null)=>{try{await gu.loadAcademicCalendar();const n=gu.getCurrentTerm()?.id;if(!n)throw new Error("No current academic period found");console.log(` Fetching test performance for teacher ${e}, period ${n}, class: ${t||"all"}`);let s=`/.netlify/functions/get-test-performance?teacher_id=${e}&academic_period_id=${n}`;if(t){const[o,c]=t.split("/"),u=o.startsWith("M")?o:`M${o}`;s+=`&grade=${u}&class=${c}`}const a=await fetch(s,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const i=await a.json();if(!i.success)throw new Error(i.error||"Failed to fetch performance data");return console.log(` Performance data loaded: ${i.count} tests`),i.data}catch(r){throw console.error(" Error fetching test performance:",r),r}}};function UV(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=UV(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function $s(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=UV(e))&&(n&&(n+=" "),n+=t);return n}var a6={},i6={},AD;function j4e(){return AD||(AD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(i6)),i6}var o6={},jD;function zV(){return jD||(jD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(o6)),o6}var l6={},PD;function WV(){return PD||(PD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(l6)),l6}var c6={},FD;function qN(){return FD||(FD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let a=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),a++);a<s;){const u=r[a];o?u==="\\"&&a+1<s?(a++,i+=r[a]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,a++}return i&&n.push(i),n}e.toPath=t})(c6)),c6}var MD;function KN(){return MD||(MD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=j4e(),r=zV(),n=WV(),s=qN();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?a(o,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=a})(a6)),a6}var u6,OD;function P4e(){return OD||(OD=1,u6=KN().get),u6}var F4e=P4e();const C3=Oc(F4e);var d6={exports:{}},ns={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DD;function M4e(){if(DD)return ns;DD=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,g=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,y=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,C=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function _(E){if(typeof E=="object"&&E!==null){var A=E.$$typeof;switch(A){case t:switch(E=E.type,E){case c:case u:case n:case a:case s:case f:return E;default:switch(E=E&&E.$$typeof,E){case o:case d:case p:case g:case i:return E;default:return A}}case r:return A}}}function T(E){return _(E)===u}return ns.AsyncMode=c,ns.ConcurrentMode=u,ns.ContextConsumer=o,ns.ContextProvider=i,ns.Element=t,ns.ForwardRef=d,ns.Fragment=n,ns.Lazy=p,ns.Memo=g,ns.Portal=r,ns.Profiler=a,ns.StrictMode=s,ns.Suspense=f,ns.isAsyncMode=function(E){return T(E)||_(E)===c},ns.isConcurrentMode=T,ns.isContextConsumer=function(E){return _(E)===o},ns.isContextProvider=function(E){return _(E)===i},ns.isElement=function(E){return typeof E=="object"&&E!==null&&E.$$typeof===t},ns.isForwardRef=function(E){return _(E)===d},ns.isFragment=function(E){return _(E)===n},ns.isLazy=function(E){return _(E)===p},ns.isMemo=function(E){return _(E)===g},ns.isPortal=function(E){return _(E)===r},ns.isProfiler=function(E){return _(E)===a},ns.isStrictMode=function(E){return _(E)===s},ns.isSuspense=function(E){return _(E)===f},ns.isValidElementType=function(E){return typeof E=="string"||typeof E=="function"||E===n||E===u||E===a||E===s||E===f||E===h||typeof E=="object"&&E!==null&&(E.$$typeof===p||E.$$typeof===g||E.$$typeof===i||E.$$typeof===o||E.$$typeof===d||E.$$typeof===v||E.$$typeof===C||E.$$typeof===w||E.$$typeof===y)},ns.typeOf=_,ns}var RD;function O4e(){return RD||(RD=1,d6.exports=M4e()),d6.exports}O4e();var _c=e=>e===0?0:e>0?1:-1,Pc=e=>typeof e=="number"&&e!=+e,cm=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,gn=e=>(typeof e=="number"||e instanceof Number)&&!Pc(e),ad=e=>gn(e)||typeof e=="string",D4e=0,Yv=e=>{var t=++D4e;return"".concat(e||"").concat(t)},th=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!gn(t)&&typeof t!="string")return n;var a;if(cm(t)){if(r==null)return n;var i=t.indexOf("%");a=r*parseFloat(t.slice(0,i))/100}else a=+t;return Pc(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},HV=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Xd(e,t,r){return gn(e)&&gn(t)?e+r*(t-e):t}function GV(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):C3(n,t))===r)}var ji=e=>e===null||typeof e>"u",YN=e=>ji(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),R4e=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function XN(e){if(typeof e!="string")return!1;var t=R4e;return t.includes(e)}var I4e=["viewBox","children"],ID=["points","pathLength"],f6={svg:I4e,polygon:ID,polyline:ID},JN=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{XN(s)&&(n[s]=(a=>r[s](r,a)))}),n},L4e=(e,t,r)=>n=>(e(t,r,n),null),B4e=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];XN(s)&&typeof a=="function"&&(n||(n={}),n[s]=L4e(a,t,r))}),n},$4e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function VV(e){if(typeof e!="string")return!1;var t=$4e;return t.includes(e)}function cg(e){var t=Object.entries(e).filter(r=>{var[n]=r;return VV(n)});return Object.fromEntries(t)}var qV=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,U4e=(e,t,r,n)=>{var s;if(typeof t=="symbol"||typeof t=="number")return!0;var a=(s=n&&f6?.[n])!==null&&s!==void 0?s:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&a.includes(t)||VV(t)),c=!!r&&XN(t);return i||o||c},no=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(a=>{var i;U4e((i=n)===null||i===void 0?void 0:i[a],a,t,r)&&(s[a]=n[a])}),s},z4e=["children","width","height","viewBox","className","style","title","desc"];function c8(){return c8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c8.apply(null,arguments)}function W4e(e,t){if(e==null)return{};var r,n,s=H4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function H4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KV=S.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:i,style:o,title:c,desc:u}=e,d=W4e(e,z4e),f=a||{width:n,height:s,x:0,y:0},h=$s("recharts-surface",i);return S.createElement("svg",c8({},no(d,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),S.createElement("title",null,c),S.createElement("desc",null,u),r)}),G4e=["children","className"];function u8(){return u8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u8.apply(null,arguments)}function V4e(e,t){if(e==null)return{};var r,n,s=q4e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function q4e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var O1=S.forwardRef((e,t)=>{var{children:r,className:n}=e,s=V4e(e,G4e),a=$s("recharts-layer",n);return S.createElement("g",u8({className:a},no(s,!0),{ref:t}),r)}),K4e=S.createContext(null);function fa(e){return function(){return e}}const d8=Math.PI,f8=2*d8,em=1e-6,Y4e=f8-em;function YV(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function X4e(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return YV;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class J4e{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?YV:X4e(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,i){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,o=this._y1,c=n-t,u=s-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>em)if(!(Math.abs(f*c-u*d)>em)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-i,p=s-o,y=c*c+u*u,v=g*g+p*p,C=Math.sqrt(y),w=Math.sqrt(h),_=a*Math.tan((d8-Math.acos((y+h-v)/(2*C*w)))/2),T=_/w,E=_/C;Math.abs(T-1)>em&&this._append`L${t+T*d},${r+T*f}`,this._append`A${a},${a},0,0,${+(f*g>d*p)},${this._x1=t+E*c},${this._y1=r+E*u}`}}arc(t,r,n,s,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(s),c=n*Math.sin(s),u=t+o,d=r+c,f=1^i,h=i?s-a:a-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>em||Math.abs(this._y1-d)>em)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%f8+f8),h>Y4e?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>em&&this._append`A${n},${n},0,${+(h>=d8)},${f},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function XV(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new J4e(t)}function QN(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JV(e){this._context=e}JV.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function T3(e){return new JV(e)}function QV(e){return e[0]}function ZV(e){return e[1]}function eq(e,t){var r=fa(!0),n=null,s=T3,a=null,i=XV(o);e=typeof e=="function"?e:e===void 0?QV:fa(e),t=typeof t=="function"?t:t===void 0?ZV:fa(t);function o(c){var u,d=(c=QN(c)).length,f,h=!1,g;for(n==null&&(a=s(g=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(f,u,c),+t(f,u,c));if(g)return a=null,g+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:fa(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:fa(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:fa(!!c),o):r},o.curve=function(c){return arguments.length?(s=c,n!=null&&(a=s(n)),o):s},o.context=function(c){return arguments.length?(c==null?n=a=null:a=s(n=c),o):n},o}function Pw(e,t,r){var n=null,s=fa(!0),a=null,i=T3,o=null,c=XV(u);e=typeof e=="function"?e:e===void 0?QV:fa(+e),t=typeof t=="function"?t:fa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ZV:fa(+r);function u(f){var h,g,p,y=(f=QN(f)).length,v,C=!1,w,_=new Array(y),T=new Array(y);for(a==null&&(o=i(w=c())),h=0;h<=y;++h){if(!(h<y&&s(v=f[h],h,f))===C)if(C=!C)g=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),p=h-1;p>=g;--p)o.point(_[p],T[p]);o.lineEnd(),o.areaEnd()}C&&(_[h]=+e(v,h,f),T[h]=+t(v,h,f),o.point(n?+n(v,h,f):_[h],r?+r(v,h,f):T[h]))}if(w)return o=null,w+""||null}function d(){return eq().defined(s).curve(i).context(a)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:fa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:fa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:fa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:fa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:fa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:fa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:fa(!!f),u):s},u.curve=function(f){return arguments.length?(i=f,a!=null&&(o=i(a)),u):i},u.context=function(f){return arguments.length?(f==null?a=o=null:o=i(a=f),u):a},u}class tq{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Q4e(e){return new tq(e,!0)}function Z4e(e){return new tq(e,!1)}function r_(){}function n_(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function rq(e){this._context=e}rq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:n_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:n_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function e_e(e){return new rq(e)}function nq(e){this._context=e}nq.prototype={areaStart:r_,areaEnd:r_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:n_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function t_e(e){return new nq(e)}function sq(e){this._context=e}sq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:n_(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function r_e(e){return new sq(e)}function aq(e){this._context=e}aq.prototype={areaStart:r_,areaEnd:r_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function n_e(e){return new aq(e)}function LD(e){return e<0?-1:1}function BD(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),i=(r-e._y1)/(s||n<0&&-0),o=(a*s+i*n)/(n+s);return(LD(a)+LD(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(o))||0}function $D(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function h6(e,t,r){var n=e._x0,s=e._y0,a=e._x1,i=e._y1,o=(a-n)/3;e._context.bezierCurveTo(n+o,s+o*t,a-o,i-o*r,a,i)}function s_(e){this._context=e}s_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:h6(this,this._t0,$D(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,h6(this,$D(this,r=BD(this,e,t)),r);break;default:h6(this,this._t0,r=BD(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function iq(e){this._context=new oq(e)}(iq.prototype=Object.create(s_.prototype)).point=function(e,t){s_.prototype.point.call(this,t,e)};function oq(e){this._context=e}oq.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function s_e(e){return new s_(e)}function a_e(e){return new iq(e)}function lq(e){this._context=e}lq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=UD(e),s=UD(t),a=0,i=1;i<r;++a,++i)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function UD(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),i=new Array(r);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,i[t]-=n*i[t-1];for(s[r-1]=i[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function i_e(e){return new lq(e)}function N3(e,t){this._context=e,this._t=t}N3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function o_e(e){return new N3(e,.5)}function l_e(e){return new N3(e,0)}function c_e(e){return new N3(e,1)}function n1(e,t){if((i=e.length)>1)for(var r=1,n,s,a=e[t[0]],i,o=a.length;r<i;++r)for(s=a,a=e[t[r]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function h8(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function u_e(e,t){return e[t]}function d_e(e){const t=[];return t.key=e,t}function f_e(){var e=fa([]),t=h8,r=n1,n=u_e;function s(a){var i=Array.from(e.apply(this,arguments),d_e),o,c=i.length,u=-1,d;for(const f of a)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,a)]).data=f;for(o=0,d=QN(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:fa(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:fa(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?h8:typeof a=="function"?a:fa(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??n1,s):r},s}function h_e(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,i;s<a;++s){for(i=r=0;r<n;++r)i+=e[r][s][1]||0;if(i)for(r=0;r<n;++r)e[r][s][1]/=i}n1(e,t)}}function m_e(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var i=0,o=0;i<s;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}n1(e,t)}}function g_e(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,i;n<a;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,g=(f-h)/2,p=0;p<o;++p){var y=e[t[p]],v=y[n][1]||0,C=y[n-1][1]||0;g+=v-C}c+=f,u+=g*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,n1(e,t)}}var m6={},g6={},zD;function p_e(){return zD||(zD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const i=r[a],o=n(i);s.has(o)||s.set(o,i)}return Array.from(s.values())}e.uniqBy=t})(g6)),g6}var p6={},WD;function cq(){return WD||(WD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(p6)),p6}var x6={},y6={},v6={},HD;function x_e(){return HD||(HD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(v6)),v6}var GD;function ZN(){return GD||(GD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x_e();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(y6)),y6}var b6={},VD;function y_e(){return VD||(VD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(b6)),b6}var qD;function v_e(){return qD||(qD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZN(),r=y_e();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(x6)),x6}var w6={},_6={},KD;function b_e(){return KD||(KD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KN();function r(n){return function(s){return t.get(s,n)}}e.property=r})(_6)),_6}var S6={},k6={},C6={},T6={},YD;function uq(){return YD||(YD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(T6)),T6}var N6={},XD;function dq(){return XD||(XD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(N6)),N6}var E6={},JD;function fq(){return JD||(JD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(E6)),E6}var QD;function w_e(){return QD||(QD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eE(),r=uq(),n=dq(),s=fq();function a(f,h,g){return typeof g!="function"?t.isMatch(f,h):i(f,h,function p(y,v,C,w,_,T){const E=g(y,v,C,w,_,T);return E!==void 0?!!E:i(y,v,p,T)},new Map)}function i(f,h,g,p){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,g,p);case"function":return Object.keys(h).length>0?i(f,{...h},g,p):s.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:s.eq(f,h)}}function o(f,h,g,p){if(h==null)return!0;if(Array.isArray(h))return u(f,h,g,p);if(h instanceof Map)return c(f,h,g,p);if(h instanceof Set)return d(f,h,g,p);const y=Object.keys(h);if(f==null)return y.length===0;if(y.length===0)return!0;if(p&&p.has(h))return p.get(h)===f;p&&p.set(h,f);try{for(let v=0;v<y.length;v++){const C=y[v];if(!n.isPrimitive(f)&&!(C in f)||h[C]===void 0&&f[C]!==void 0||h[C]===null&&f[C]!==null||!g(f[C],h[C],C,f,h,p))return!1}return!0}finally{p&&p.delete(h)}}function c(f,h,g,p){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[y,v]of h.entries()){const C=f.get(y);if(g(C,v,y,f,h,p)===!1)return!1}return!0}function u(f,h,g,p){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const y=new Set;for(let v=0;v<h.length;v++){const C=h[v];let w=!1;for(let _=0;_<f.length;_++){if(y.has(_))continue;const T=f[_];let E=!1;if(g(T,C,v,f,h,p)&&(E=!0),E){y.add(_),w=!0;break}}if(!w)return!1}return!0}function d(f,h,g,p){return h.size===0?!0:f instanceof Set?u([...f],[...h],g,p):!1}e.isMatchWith=a,e.isSetMatch=d})(C6)),C6}var ZD;function eE(){return ZD||(ZD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w_e();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(k6)),k6}var A6={},j6={},P6={},eR;function __e(){return eR||(eR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(P6)),P6}var F6={},tR;function hq(){return tR||(tR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(F6)),F6}var M6={},rR;function mq(){return rR||(rR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",g="[object Object]",p="[object Error]",y="[object DataView]",v="[object Uint8Array]",C="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",T="[object BigUint64Array]",E="[object Int8Array]",A="[object Int16Array]",F="[object Int32Array]",j="[object BigInt64Array]",P="[object Float32Array]",D="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=j,e.bigUint64ArrayTag=T,e.booleanTag=s,e.dataViewTag=y,e.dateTag=o,e.errorTag=p,e.float32ArrayTag=P,e.float64ArrayTag=D,e.functionTag=f,e.int16ArrayTag=A,e.int32ArrayTag=F,e.int8ArrayTag=E,e.mapTag=c,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=v,e.uint8ClampedArrayTag=C})(M6)),M6}var O6={},nR;function S_e(){return nR||(nR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(O6)),O6}var sR;function gq(){return sR||(sR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=__e(),r=hq(),n=mq(),s=dq(),a=S_e();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,g=new Map,p=void 0){const y=p?.(d,f,h,g);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(g.has(d))return g.get(d);if(Array.isArray(d)){const v=new Array(d.length);g.set(d,v);for(let C=0;C<d.length;C++)v[C]=o(d[C],C,h,g,p);return Object.hasOwn(d,"index")&&(v.index=d.index),Object.hasOwn(d,"input")&&(v.input=d.input),v}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const v=new RegExp(d.source,d.flags);return v.lastIndex=d.lastIndex,v}if(d instanceof Map){const v=new Map;g.set(d,v);for(const[C,w]of d)v.set(C,o(w,C,h,g,p));return v}if(d instanceof Set){const v=new Set;g.set(d,v);for(const C of d)v.add(o(C,void 0,h,g,p));return v}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(a.isTypedArray(d)){const v=new(Object.getPrototypeOf(d)).constructor(d.length);g.set(d,v);for(let C=0;C<d.length;C++)v[C]=o(d[C],C,h,g,p);return v}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const v=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return g.set(d,v),c(v,d,h,g,p),v}if(typeof File<"u"&&d instanceof File){const v=new File([d],d.name,{type:d.type});return g.set(d,v),c(v,d,h,g,p),v}if(d instanceof Blob){const v=new Blob([d],{type:d.type});return g.set(d,v),c(v,d,h,g,p),v}if(d instanceof Error){const v=new d.constructor;return g.set(d,v),v.message=d.message,v.name=d.name,v.stack=d.stack,v.cause=d.cause,c(v,d,h,g,p),v}if(typeof d=="object"&&u(d)){const v=Object.create(Object.getPrototypeOf(d));return g.set(d,v),c(v,d,h,g,p),v}return d}function c(d,f,h=d,g,p){const y=[...Object.keys(f),...t.getSymbols(f)];for(let v=0;v<y.length;v++){const C=y[v],w=Object.getOwnPropertyDescriptor(d,C);(w==null||w.writable)&&(d[C]=o(f[C],C,h,g,p))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c})(j6)),j6}var aR;function k_e(){return aR||(aR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gq();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(A6)),A6}var iR;function C_e(){return iR||(iR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eE(),r=k_e();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(S6)),S6}var D6={},R6={},I6={},oR;function T_e(){return oR||(oR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gq(),r=mq();function n(s,a){return t.cloneDeepWith(s,(i,o,c,u)=>{const d=a?.(i,o,c,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new s.constructor(s?.valueOf());return t.copyProperties(f,s),f}case r.argumentsTag:{const f={};return t.copyProperties(f,s),f.length=s.length,f[Symbol.iterator]=s[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(I6)),I6}var lR;function N_e(){return lR||(lR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T_e();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(R6)),R6}var L6={},B6={},cR;function pq(){return cR||(cR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(B6)),B6}var $6={},uR;function E_e(){return uR||(uR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hq();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})($6)),$6}var dR;function A_e(){return dR||(dR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zV(),r=pq(),n=E_e(),s=qN();function a(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&i?.[o]==null?c=s.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=a})(L6)),L6}var fR;function j_e(){return fR||(fR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eE(),r=WV(),n=N_e(),s=KN(),a=A_e();function i(o,c){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,o);return d===void 0?a.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i})(D6)),D6}var hR;function P_e(){return hR||(hR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cq(),r=b_e(),n=C_e(),s=j_e();function a(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?s.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=a})(w6)),w6}var mR;function F_e(){return mR||(mR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=p_e(),r=cq(),n=v_e(),s=P_e();function a(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),s.iteratee(o)):[]}e.uniqBy=a})(m6)),m6}var U6,gR;function M_e(){return gR||(gR=1,U6=F_e().uniqBy),U6}var O_e=M_e();const pR=Oc(O_e);function D_e(e,t,r){return t===!0?pR(e,r):typeof t=="function"?pR(e,t):e}var z6={exports:{}},W6={},H6={exports:{}},G6={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xR;function R_e(){if(xR)return G6;xR=1;var e=Jm();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var g=h(),p=n({inst:{value:g,getSnapshot:h}}),y=p[0].inst,v=p[1];return a(function(){y.value=g,y.getSnapshot=h,c(y)&&v({inst:y})},[f,g,h]),s(function(){return c(y)&&v({inst:y}),f(function(){c(y)&&v({inst:y})})},[f]),i(g),g}function c(f){var h=f.getSnapshot;f=f.value;try{var g=h();return!r(f,g)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return G6.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,G6}var yR;function I_e(){return yR||(yR=1,H6.exports=R_e()),H6.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vR;function L_e(){if(vR)return W6;vR=1;var e=Jm(),t=I_e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return W6.useSyncExternalStoreWithSelector=function(u,d,f,h,g){var p=a(null);if(p.current===null){var y={hasValue:!1,value:null};p.current=y}else y=p.current;p=o(function(){function C(A){if(!w){if(w=!0,_=A,A=h(A),g!==void 0&&y.hasValue){var F=y.value;if(g(F,A))return T=F}return T=A}if(F=T,n(_,A))return F;var j=h(A);return g!==void 0&&g(F,j)?(_=A,F):(_=A,T=j)}var w=!1,_,T,E=f===void 0?null:f;return[function(){return C(d())},E===null?void 0:function(){return C(E())}]},[d,f,h,g]);var v=s(u,p[0],p[1]);return i(function(){y.hasValue=!0,y.value=v},[v]),c(v),v},W6}var bR;function B_e(){return bR||(bR=1,z6.exports=L_e()),z6.exports}var $_e=B_e(),tE=S.createContext(null),U_e=e=>e,Zo=()=>{var e=S.useContext(tE);return e?e.store.dispatch:U_e},a4=()=>{},z_e=()=>a4,W_e=(e,t)=>e===t;function nn(e){var t=S.useContext(tE);return $_e.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:z_e,t?t.store.getState:a4,t?t.store.getState:a4,t?e:a4,W_e)}function H_e(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function G_e(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function V_e(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var wR=e=>Array.isArray(e)?e:[e];function q_e(e){const t=Array.isArray(e[0])?e[0]:e;return V_e(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function K_e(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Y_e=class{constructor(e){this.value=e}deref(){return this.value}},X_e=typeof WeakRef<"u"?WeakRef:Y_e,J_e=0,_R=1;function Fw(){return{s:J_e,v:void 0,o:null,p:null}}function xq(e,t={}){let r=Fw();const{resultEqualityCheck:n}=t;let s,a=0;function i(){let o=r;const{length:c}=arguments;for(let f=0,h=c;f<h;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let p=o.o;p===null&&(o.o=p=new WeakMap);const y=p.get(g);y===void 0?(o=Fw(),p.set(g,o)):o=y}else{let p=o.p;p===null&&(o.p=p=new Map);const y=p.get(g);y===void 0?(o=Fw(),p.set(g,o)):o=y}}const u=o;let d;if(o.s===_R)d=o.v;else if(d=e.apply(null,arguments),a++,n){const f=s?.deref?.()??s;f!=null&&n(f,d)&&(d=f,a!==0&&a--),s=typeof d=="object"&&d!==null||typeof d=="function"?new X_e(d):d}return u.s=_R,u.v=d,d}return i.clearCache=()=>{r=Fw(),i.resetResultsCount()},i.resultsCount=()=>a,i.resetResultsCount=()=>{a=0},i}function Q_e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,i=0,o,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),H_e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:g=xq,argsMemoizeOptions:p=[]}=d,y=wR(h),v=wR(p),C=q_e(s),w=f(function(){return a++,u.apply(null,arguments)},...y),_=g(function(){i++;const E=K_e(C,arguments);return o=w.apply(null,E),o},...v);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:C,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:f,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var Ut=Q_e(xq),Z_e=Object.assign((e,t=Ut)=>{G_e(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>Z_e}),V6={},q6={},K6={},SR;function e3e(){return SR||(SR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const i=t(n),o=t(s);if(i===o&&i===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?o-i:i-o}return 0};e.compareValues=r})(K6)),K6}var Y6={},X6={},kR;function yq(){return kR||(kR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(X6)),X6}var CR;function t3e(){return CR||(CR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yq(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,i){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||i!=null&&Object.hasOwn(i,a)}e.isKey=s})(Y6)),Y6}var TR;function r3e(){return TR||(TR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e3e(),r=t3e(),n=qN();function s(a,i,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const u=(g,p)=>{let y=g;for(let v=0;v<p.length&&y!=null;++v)y=y[p[v]];return y},d=(g,p)=>p==null||g==null?p:typeof g=="object"&&"key"in g?Object.hasOwn(p,g.key)?p[g.key]:u(p,g.path):typeof g=="function"?g(p):Array.isArray(g)?u(p,g):typeof p=="object"?p[g]:p,f=i.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return a.map(g=>({original:g,criteria:f.map(p=>d(p,g))})).slice().sort((g,p)=>{for(let y=0;y<f.length;y++){const v=t.compareValues(g.criteria[y],p.criteria[y],o[y]);if(v!==0)return v}return 0}).map(g=>g.original)}e.orderBy=s})(q6)),q6}var J6={},NR;function n3e(){return NR||(NR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<a?i(d,c+1):s.push(d)}};return i(r,0),s}e.flatten=t})(J6)),J6}var Q6={},ER;function vq(){return ER||(ER=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pq(),r=ZN(),n=uq(),s=fq();function a(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?s.eq(c[o],i):!1}e.isIterateeCall=a})(Q6)),Q6}var AR;function s3e(){return AR||(AR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r3e(),r=n3e(),n=vq();function s(a,...i){const o=i.length;return o>1&&n.isIterateeCall(a,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(a,r.flatten(i),["asc"])}e.sortBy=s})(V6)),V6}var Z6,jR;function a3e(){return jR||(jR=1,Z6=s3e().sortBy),Z6}var i3e=a3e();const E3=Oc(i3e);var bq=e=>e.legend.settings,o3e=e=>e.legend.size,l3e=e=>e.legend.payload;Ut([l3e,bq],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?E3(n,r):n});var Mw=1;function c3e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=S.useState({height:0,left:0,top:0,width:0}),n=S.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),i={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(i.height-t.height)>Mw||Math.abs(i.left-t.left)>Mw||Math.abs(i.top-t.top)>Mw||Math.abs(i.width-t.width)>Mw)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Vi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var u3e=typeof Symbol=="function"&&Symbol.observable||"@@observable",PR=u3e,ek=()=>Math.random().toString(36).substring(7).split("").join("."),d3e={INIT:`@@redux/INIT${ek()}`,REPLACE:`@@redux/REPLACE${ek()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ek()}`},a_=d3e;function rE(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wq(e,t,r){if(typeof e!="function")throw new Error(Vi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Vi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Vi(1));return r(wq)(e,t)}let n=e,s=t,a=new Map,i=a,o=0,c=!1;function u(){i===a&&(i=new Map,a.forEach((v,C)=>{i.set(C,v)}))}function d(){if(c)throw new Error(Vi(3));return s}function f(v){if(typeof v!="function")throw new Error(Vi(4));if(c)throw new Error(Vi(5));let C=!0;u();const w=o++;return i.set(w,v),function(){if(C){if(c)throw new Error(Vi(6));C=!1,u(),i.delete(w),a=null}}}function h(v){if(!rE(v))throw new Error(Vi(7));if(typeof v.type>"u")throw new Error(Vi(8));if(typeof v.type!="string")throw new Error(Vi(17));if(c)throw new Error(Vi(9));try{c=!0,s=n(s,v)}finally{c=!1}return(a=i).forEach(w=>{w()}),v}function g(v){if(typeof v!="function")throw new Error(Vi(10));n=v,h({type:a_.REPLACE})}function p(){const v=f;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Vi(11));function w(){const T=C;T.next&&T.next(d())}return w(),{unsubscribe:v(w)}},[PR](){return this}}}return h({type:a_.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:g,[PR]:p}}function f3e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:a_.INIT})>"u")throw new Error(Vi(12));if(typeof r(void 0,{type:a_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Vi(13))})}function _q(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const i=t[a];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let s;try{f3e(r)}catch(a){s=a}return function(i={},o){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],g=i[f],p=h(g,o);if(typeof p>"u")throw o&&o.type,new Error(Vi(14));u[f]=p,c=c||p!==g}return c=c||n.length!==Object.keys(i).length,c?u:i}}function i_(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function h3e(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(Vi(15))};const i={getState:s.getState,dispatch:(c,...u)=>a(c,...u)},o=e.map(c=>c(i));return a=i_(...o)(s.dispatch),{...s,dispatch:a}}}function Sq(e){return rE(e)&&"type"in e&&typeof e.type=="string"}var kq=Symbol.for("immer-nothing"),FR=Symbol.for("immer-draftable"),Vl=Symbol.for("immer-state");function au(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var s1=Object.getPrototypeOf;function Vm(e){return!!e&&!!e[Vl]}function v0(e){return e?Cq(e)||Array.isArray(e)||!!e[FR]||!!e.constructor?.[FR]||I2(e)||j3(e):!1}var m3e=Object.prototype.constructor.toString();function Cq(e){if(!e||typeof e!="object")return!1;const t=s1(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===m3e}function o_(e,t){A3(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function A3(e){const t=e[Vl];return t?t.type_:Array.isArray(e)?1:I2(e)?2:j3(e)?3:0}function m8(e,t){return A3(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Tq(e,t,r){const n=A3(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function g3e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function I2(e){return e instanceof Map}function j3(e){return e instanceof Set}function tm(e){return e.copy_||e.base_}function g8(e,t){if(I2(e))return new Map(e);if(j3(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Cq(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Vl];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const i=s[a],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(s1(e),n)}else{const n=s1(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function nE(e,t=!1){return P3(e)||Vm(e)||!v0(e)||(A3(e)>1&&Object.defineProperties(e,{set:{value:Ow},add:{value:Ow},clear:{value:Ow},delete:{value:Ow}}),Object.freeze(e),t&&Object.values(e).forEach(r=>nE(r,!0))),e}function Ow(){au(2)}function P3(e){return Object.isFrozen(e)}var p3e={};function qm(e){const t=p3e[e];return t||au(0,e),t}var Xv;function Nq(){return Xv}function x3e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function MR(e,t){t&&(qm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function p8(e){x8(e),e.drafts_.forEach(y3e),e.drafts_=null}function x8(e){e===Xv&&(Xv=e.parent_)}function OR(e){return Xv=x3e(Xv,e)}function y3e(e){const t=e[Vl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function DR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Vl].modified_&&(p8(t),au(4)),v0(e)&&(e=l_(t,e),t.parent_||c_(t,e)),t.patches_&&qm("Patches").generateReplacementPatches_(r[Vl].base_,e,t.patches_,t.inversePatches_)):e=l_(t,r,[]),p8(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==kq?e:void 0}function l_(e,t,r){if(P3(t))return t;const n=t[Vl];if(!n)return o_(t,(s,a)=>RR(e,n,t,s,a,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return c_(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let a=s,i=!1;n.type_===3&&(a=new Set(s),s.clear(),i=!0),o_(a,(o,c)=>RR(e,n,s,o,c,r,i)),c_(e,s,!1),r&&e.patches_&&qm("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function RR(e,t,r,n,s,a,i){if(Vm(s)){const o=a&&t&&t.type_!==3&&!m8(t.assigned_,n)?a.concat(n):void 0,c=l_(e,s,o);if(Tq(r,n,c),Vm(c))e.canAutoFreeze_=!1;else return}else i&&r.add(s);if(v0(s)&&!P3(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;l_(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(I2(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&c_(e,s)}}function c_(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&nE(t,r)}function v3e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Nq(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=sE;r&&(s=[n],a=Jv);const{revoke:i,proxy:o}=Proxy.revocable(s,a);return n.draft_=o,n.revoke_=i,o}var sE={get(e,t){if(t===Vl)return e;const r=tm(e);if(!m8(r,t))return b3e(e,r,t);const n=r[t];return e.finalized_||!v0(n)?n:n===tk(e.base_,t)?(rk(e),e.copy_[t]=v8(n,e)):n},has(e,t){return t in tm(e)},ownKeys(e){return Reflect.ownKeys(tm(e))},set(e,t,r){const n=Eq(tm(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=tk(tm(e),t),a=s?.[Vl];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(g3e(r,s)&&(r!==void 0||m8(e.base_,t)))return!0;rk(e),y8(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return tk(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,rk(e),y8(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=tm(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){au(11)},getPrototypeOf(e){return s1(e.base_)},setPrototypeOf(){au(12)}},Jv={};o_(sE,(e,t)=>{Jv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Jv.deleteProperty=function(e,t){return Jv.set.call(this,e,t,void 0)};Jv.set=function(e,t,r){return sE.set.call(this,e[0],t,r,e[0])};function tk(e,t){const r=e[Vl];return(r?tm(r):e)[t]}function b3e(e,t,r){const n=Eq(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function Eq(e,t){if(!(t in e))return;let r=s1(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=s1(r)}}function y8(e){e.modified_||(e.modified_=!0,e.parent_&&y8(e.parent_))}function rk(e){e.copy_||(e.copy_=g8(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var w3e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const i=this;return function(c=a,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&au(6),n!==void 0&&typeof n!="function"&&au(7);let s;if(v0(t)){const a=OR(this),i=v8(t,void 0);let o=!0;try{s=r(i),o=!1}finally{o?p8(a):x8(a)}return MR(a,n),DR(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===kq&&(s=void 0),this.autoFreeze_&&nE(s,!0),n){const a=[],i=[];qm("Patches").generateReplacementPatches_(t,s,a,i),n(a,i)}return s}else au(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,s;return[this.produce(t,r,(i,o)=>{n=i,s=o}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){v0(e)||au(8),Vm(e)&&(e=c0(e));const t=OR(this),r=v8(e,void 0);return r[Vl].isManual_=!0,x8(t),r}finishDraft(e,t){const r=e&&e[Vl];(!r||!r.isManual_)&&au(9);const{scope_:n}=r;return MR(n,t),DR(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=qm("Patches").applyPatches_;return Vm(e)?n(e,t):this.produce(e,s=>n(s,t))}};function v8(e,t){const r=I2(e)?qm("MapSet").proxyMap_(e,t):j3(e)?qm("MapSet").proxySet_(e,t):v3e(e,t);return(t?t.scope_:Nq()).drafts_.push(r),r}function c0(e){return Vm(e)||au(10,e),Aq(e)}function Aq(e){if(!v0(e)||P3(e))return e;const t=e[Vl];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=g8(e,t.scope_.immer_.useStrictShallowCopy_)}else r=g8(e,!0);return o_(r,(n,s)=>{Tq(r,n,Aq(s))}),t&&(t.finalized_=!1),r}var _3e=new w3e,jq=_3e.produce;function Pq(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var S3e=Pq(),k3e=Pq,C3e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?i_:i_.apply(null,arguments)};function Fc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Wl(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Sq(n)&&n.type===e,r}var Fq=class Gy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Gy.prototype)}static get[Symbol.species](){return Gy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Gy(...t[0].concat(this)):new Gy(...t.concat(this))}};function IR(e){return v0(e)?jq(e,()=>{}):e}function Dw(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function T3e(e){return typeof e=="boolean"}var N3e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let i=new Fq;return r&&(T3e(r)?i.push(S3e):i.push(k3e(r.extraArgument))),i},E3e="RTK_autoBatch",LR=e=>t=>{setTimeout(t,e)},A3e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:LR(10):e.type==="callback"?e.queueNotification:LR(e.timeout),u=()=>{i=!1,a&&(a=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>s&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){try{return s=!d?.meta?.[E3e],a=!s,a&&(i||(i=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},j3e=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new Fq(e);return n&&s.push(A3e(typeof n=="object"?n:void 0)),s};function P3e(e){const t=N3e(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(rE(r))o=_q(r);else throw new Error(Wl(1));let c;typeof n=="function"?c=n(t):c=t();let u=i_;s&&(u=C3e({trace:!1,...typeof s=="object"&&s}));const d=h3e(...c),f=j3e(d);let h=typeof i=="function"?i(f):f();const g=u(...h);return wq(o,a,g)}function Mq(e){const t={},r=[];let n;const s={addCase(a,i){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Wl(28));if(o in t)throw new Error(Wl(29));return t[o]=i,s},addAsyncThunk(a,i){return i.pending&&(t[a.pending.type]=i.pending),i.rejected&&(t[a.rejected.type]=i.rejected),i.fulfilled&&(t[a.fulfilled.type]=i.fulfilled),i.settled&&r.push({matcher:a.settled,reducer:i.settled}),s},addMatcher(a,i){return r.push({matcher:a,reducer:i}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}function F3e(e){return typeof e=="function"}function M3e(e,t){let[r,n,s]=Mq(t),a;if(F3e(e))a=()=>IR(e());else{const o=IR(e);a=()=>o}function i(o=a(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,f)=>{if(f)if(Vm(d)){const g=f(d,c);return g===void 0?d:g}else{if(v0(d))return jq(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=a,i}var O3e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",D3e=(e=21)=>{let t="",r=e;for(;r--;)t+=O3e[Math.random()*64|0];return t},R3e=Symbol.for("rtk-slice-createasyncthunk");function I3e(e,t){return`${e}/${t}`}function L3e({creators:e}={}){const t=e?.asyncThunk?.[R3e];return function(n){const{name:s,reducerPath:a=s}=n;if(!s)throw new Error(Wl(11));const i=(typeof n.reducers=="function"?n.reducers($3e()):n.reducers)||{},o=Object.keys(i),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(_,T){const E=typeof _=="string"?_:_.type;if(!E)throw new Error(Wl(12));if(E in c.sliceCaseReducersByType)throw new Error(Wl(13));return c.sliceCaseReducersByType[E]=T,u},addMatcher(_,T){return c.sliceMatchers.push({matcher:_,reducer:T}),u},exposeAction(_,T){return c.actionCreators[_]=T,u},exposeCaseReducer(_,T){return c.sliceCaseReducersByName[_]=T,u}};o.forEach(_=>{const T=i[_],E={reducerName:_,type:I3e(s,_),createNotation:typeof n.reducers=="function"};z3e(T)?H3e(E,T,u,t):U3e(E,T,u)});function d(){const[_={},T=[],E=void 0]=typeof n.extraReducers=="function"?Mq(n.extraReducers):[n.extraReducers],A={..._,...c.sliceCaseReducersByType};return M3e(n.initialState,F=>{for(let j in A)F.addCase(j,A[j]);for(let j of c.sliceMatchers)F.addMatcher(j.matcher,j.reducer);for(let j of T)F.addMatcher(j.matcher,j.reducer);E&&F.addDefaultCase(E)})}const f=_=>_,h=new Map,g=new WeakMap;let p;function y(_,T){return p||(p=d()),p(_,T)}function v(){return p||(p=d()),p.getInitialState()}function C(_,T=!1){function E(F){let j=F[_];return typeof j>"u"&&T&&(j=Dw(g,E,v)),j}function A(F=f){const j=Dw(h,T,()=>new WeakMap);return Dw(j,F,()=>{const P={};for(const[D,B]of Object.entries(n.selectors??{}))P[D]=B3e(B,F,()=>Dw(g,F,v),T);return P})}return{reducerPath:_,getSelectors:A,get selectors(){return A(E)},selectSlice:E}}const w={name:s,reducer:y,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:v,...C(a),injectInto(_,{reducerPath:T,...E}={}){const A=T??a;return _.inject({reducerPath:A,reducer:y},E),{...w,...C(A,!0)}}};return w}}function B3e(e,t,r,n){function s(a,...i){let o=t(a);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return s.unwrapped=e,s}var Yl=L3e();function $3e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function U3e({type:e,reducerName:t,createNotation:r},n,s){let a,i;if("reducer"in n){if(r&&!W3e(n))throw new Error(Wl(17));a=n.reducer,i=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,i?Fc(e,i):Fc(e))}function z3e(e){return e._reducerDefinitionType==="asyncThunk"}function W3e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function H3e({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Wl(18));const{payloadCreator:a,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=s(e,a,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||Rw,pending:o||Rw,rejected:c||Rw,settled:u||Rw})}function Rw(){}var G3e="task",Oq="listener",Dq="completed",aE="cancelled",V3e=`task-${aE}`,q3e=`task-${Dq}`,b8=`${Oq}-${aE}`,K3e=`${Oq}-${Dq}`,F3=class{constructor(e){this.code=e,this.message=`${G3e} ${aE} (reason: ${e})`}name="TaskAbortError";message},iE=(e,t)=>{if(typeof e!="function")throw new TypeError(Wl(32))},u_=()=>{},Rq=(e,t=u_)=>(e.catch(t),e),Iq=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),_m=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Sm=e=>{if(e.aborted){const{reason:t}=e;throw new F3(t)}};function Lq(e,t){let r=u_;return new Promise((n,s)=>{const a=()=>s(new F3(e.reason));if(e.aborted){a();return}r=Iq(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=u_})}var Y3e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof F3?"cancelled":"rejected",error:r}}finally{t?.()}},d_=e=>t=>Rq(Lq(e,t).then(r=>(Sm(e),r))),Bq=e=>{const t=d_(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:zp}=Object,BR={},M3="listenerMiddleware",X3e=(e,t)=>{const r=n=>Iq(e,()=>_m(n,e.reason));return(n,s)=>{iE(n);const a=new AbortController;r(a);const i=Y3e(async()=>{Sm(e),Sm(a.signal);const o=await n({pause:d_(a.signal),delay:Bq(a.signal),signal:a.signal});return Sm(a.signal),o},()=>_m(a,q3e));return s?.autoJoin&&t.push(i.catch(u_)),{result:d_(e)(i),cancel(){_m(a,V3e)}}}},J3e=(e,t)=>{const r=async(n,s)=>{Sm(t);let a=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});a=()=>{d(),u()}})];s!=null&&o.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await Lq(t,Promise.race(o));return Sm(t),c}finally{a()}};return(n,s)=>Rq(r(n,s))},$q=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Fc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Wl(21));return iE(a),{predicate:s,type:t,effect:a}},Uq=zp(e=>{const{type:t,predicate:r,effect:n}=$q(e);return{id:D3e(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Wl(22))}}},{withTypes:()=>Uq}),$R=(e,t)=>{const{type:r,effect:n,predicate:s}=$q(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},w8=e=>{e.pending.forEach(t=>{_m(t,b8)})},Q3e=e=>()=>{e.forEach(w8),e.clear()},UR=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},zq=zp(Fc(`${M3}/add`),{withTypes:()=>zq}),Z3e=Fc(`${M3}/removeAll`),Wq=zp(Fc(`${M3}/remove`),{withTypes:()=>Wq}),eSe=(...e)=>{console.error(`${M3}/error`,...e)},L2=(e={})=>{const t=new Map,{extra:r,onError:n=eSe}=e;iE(n);const s=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f?.cancelActive&&w8(d)}),a=d=>{const f=$R(t,d)??Uq(d);return s(f)};zp(a,{withTypes:()=>a});const i=d=>{const f=$R(t,d);return f&&(f.unsubscribe(),d.cancelActive&&w8(f)),!!f};zp(i,{withTypes:()=>i});const o=async(d,f,h,g)=>{const p=new AbortController,y=J3e(a,p.signal),v=[];try{d.pending.add(p),await Promise.resolve(d.effect(f,zp({},h,{getOriginalState:g,condition:(C,w)=>y(C,w).then(Boolean),take:y,delay:Bq(p.signal),pause:d_(p.signal),extra:r,signal:p.signal,fork:X3e(p.signal,v),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((C,w,_)=>{C!==p&&(_m(C,b8),_.delete(C))})},cancel:()=>{_m(p,b8),d.pending.delete(p)},throwIfCancelled:()=>{Sm(p.signal)}})))}catch(C){C instanceof F3||UR(n,C,{raisedBy:"effect"})}finally{await Promise.all(v),_m(p,K3e),d.pending.delete(p)}},c=Q3e(t);return{middleware:d=>f=>h=>{if(!Sq(h))return f(h);if(zq.match(h))return a(h.payload);if(Z3e.match(h)){c();return}if(Wq.match(h))return i(h.payload);let g=d.getState();const p=()=>{if(g===BR)throw new Error(Wl(23));return g};let y;try{if(y=f(h),t.size>0){const v=d.getState(),C=Array.from(t.values());for(const w of C){let _=!1;try{_=w.predicate(h,v,g)}catch(T){_=!1,UR(n,T,{raisedBy:"predicate"})}_&&o(w,h,d,p)}}}finally{g=BR}return y},startListening:a,stopListening:i,clearListeners:c}};function Wl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var tSe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Hq=Yl({name:"chartLayout",initialState:tSe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:rSe,setLayout:nSe,setChartSize:sSe,setScale:aSe}=Hq.actions,iSe=Hq.reducer;function zR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(r),!0).forEach(function(n){oSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oSe(e,t,r){return(t=lSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lSe(e){var t=cSe(e,"string");return typeof t=="symbol"?t:t+""}function cSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f_=Math.PI/180,uSe=e=>e*180/Math.PI,eo=(e,t,r,n)=>({x:e+Math.cos(-f_*n)*r,y:t+Math.sin(-f_*n)*r}),dSe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},fSe=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},hSe=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,i=fSe({x:r,y:n},{x:s,y:a});if(i<=0)return{radius:i,angle:0};var o=(r-s)/i,c=Math.acos(o);return n>a&&(c=2*Math.PI-c),{radius:i,angle:uSe(c),angleInRadian:c}},mSe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},gSe=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),i=Math.min(s,a);return e+i*360},pSe=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:a}=hSe({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(s<i||s>o||s===0)return null;var{startAngle:c,endAngle:u}=mSe(t),d=a,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?WR(WR({},t),{},{radius:s,angle:gSe(d,t)}):null};function Gq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function HR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(r),!0).forEach(function(n){xSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xSe(e,t,r){return(t=ySe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ySe(e){var t=vSe(e,"string");return typeof t=="symbol"?t:t+""}function vSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yo(e,t,r){return ji(e)||ji(t)?r:ad(t)?C3(e,t,r):typeof t=="function"?t(e):r}var bSe=(e,t,r,n,s)=>{var a,i=-1,o=(a=t?.length)!==null&&a!==void 0?a:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(_c(d-u)!==_c(f-d)){var g=[];if(_c(f-d)===_c(s[1]-s[0])){h=f;var p=d+s[1]-s[0];g[0]=Math.min(p,(p+u)/2),g[1]=Math.max(p,(p+u)/2)}else{h=u;var y=f+s[1]-s[0];g[0]=Math.min(d,(y+d)/2),g[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>v[0]&&e<=v[1]||e>=g[0]&&e<=g[1]){({index:i}=r[c]);break}}else{var C=Math.min(u,f),w=Math.max(u,f);if(e>(C+d)/2&&e<=(w+d)/2){({index:i}=r[c]);break}}}else if(t){for(var _=0;_<o;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:i}=t[_]);break}}return i},wSe=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&a!=="center"&&gn(e[a]))return yc(yc({},e),{},{[a]:e[a]+(n||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&i!=="middle"&&gn(e[i]))return yc(yc({},e),{},{[i]:e[i]+(s||0)})}return e},hh=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Vq=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var s,a,i=e.map(o=>(o.coordinate===t&&(s=!0),o.coordinate===r&&(a=!0),o.coordinate));return s||i.push(t),a||i.push(r),i},qq=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:a,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:g}=e;if(!i)return null;var p=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,y=s==="category"&&i.bandwidth?i.bandwidth()/p:0;if(y=g==="angleAxis"&&a&&a.length>=2?_c(a[0]-a[1])*2*y:y,f||h){var v=(f||h||[]).map((C,w)=>{var _=n?n.indexOf(C):C;return{coordinate:i(_)+y,value:C,offset:y,index:w}});return v.filter(C=>!Pc(C.coordinate))}return c&&u?u.map((C,w)=>({coordinate:i(C)+y,value:C,index:w,offset:y})):i.ticks&&d!=null?i.ticks(d).map((C,w)=>({coordinate:i(C)+y,value:C,offset:y,index:w})):i.domain().map((C,w)=>({coordinate:i(C)+y,value:n?n[C]:C,index:w,offset:y}))},GR=1e-4,_Se=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-GR,a=Math.max(n[0],n[1])+GR,i=e(t[0]),o=e(t[r-1]);(i<s||i>a||o<s||o>a)&&e.domain([t[0],t[r-1]])}},SSe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,i=0;i<t;++i){var o=Pc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1])}},kSe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var i=Pc(e[a][r][1])?e[a][r][0]:e[a][r][1];i>=0?(e[a][r][0]=s,e[a][r][1]=s+i,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},CSe={sign:SSe,expand:h_e,none:n1,silhouette:m_e,wiggle:g_e,positive:kSe},TSe=(e,t,r)=>{var n=CSe[r],s=f_e().keys(t).value((a,i)=>+Yo(a,i,0)).order(h8).offset(n);return s(e)};function VR(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:a,dataKey:i}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ji(s[t.dataKey])){var o=GV(r,"value",s[t.dataKey]);if(o)return o.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=Yo(s,ji(i)?t.dataKey:i);return ji(c)?null:t.scale(c)}var NSe=e=>{var t=e.flat(2).filter(gn);return[Math.min(...t),Math.max(...t)]},ESe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],ASe=(e,t,r)=>{if(e!=null)return ESe(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:i}=a,o=i.reduce((c,u)=>{var d=Gq(u,t,r),f=NSe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},qR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,KR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_8=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=E3(t,d=>d.coordinate),a=1/0,i=1,o=s.length;i<o;i++){var c=s[i],u=s[i-1];a=Math.min((c.coordinate||0)-(u.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function YR(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return yc(yc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function Kq(e,t){if(e)return String(e);if(typeof t=="string")return t}function jSe(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var a=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return a?{x:e,y:t}:null}return n?pSe({x:e,y:t},n):null}var PSe=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,{radius:i}=n;return yc(yc(yc({},n),eo(n.cx,n.cy,i,a)),{},{angle:a,radius:i})}var o=s.coordinate,{angle:c}=n;return yc(yc(yc({},n),eo(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},FSe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,P0=e=>e.layout.width,F0=e=>e.layout.height,MSe=e=>e.layout.scale,Yq=e=>e.layout.margin,O3=Ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),D3=Ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),OSe="data-recharts-item-index",DSe="data-recharts-item-data-key",B2=60;function XR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Iw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XR(Object(r),!0).forEach(function(n){RSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RSe(e,t,r){return(t=ISe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ISe(e){var t=LSe(e,"string");return typeof t=="symbol"?t:t+""}function LSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BSe=e=>e.brush.height;function $Se(e){var t=D3(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:B2;return r+s}return r},0)}function USe(e){var t=D3(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:B2;return r+s}return r},0)}function zSe(e){var t=O3(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function WSe(e){var t=O3(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var so=Ut([P0,F0,Yq,BSe,$Se,USe,zSe,WSe,bq,o3e],(e,t,r,n,s,a,i,o,c,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+a},f={top:(r.top||0)+i,bottom:(r.bottom||0)+o},h=Iw(Iw({},f),d),g=h.bottom;h.bottom+=n,h=wSe(h,c,u);var p=e-h.left-h.right,y=t-h.top-h.bottom;return Iw(Iw({brushBottom:g},h),{},{width:Math.max(p,0),height:Math.max(y,0)})}),HSe=Ut(so,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Xq=Ut(P0,F0,(e,t)=>({x:0,y:0,width:e,height:t})),GSe=S.createContext(null),Rc=()=>S.useContext(GSe)!=null,R3=e=>e.brush,I3=Ut([R3,so,Yq],(e,t,r)=>({height:e.height,x:gn(e.x)?e.x:t.left,y:gn(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:gn(e.width)?e.width:t.width})),oE=()=>{var e,t=Rc(),r=nn(HSe),n=nn(I3),s=(e=nn(R3))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},VSe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Jq=()=>{var e;return(e=nn(so))!==null&&e!==void 0?e:VSe},Qq=()=>nn(P0),Zq=()=>nn(F0),Us=e=>e.layout.layoutType,lE=()=>nn(Us),qSe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},eK=Yl({name:"legend",initialState:qSe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=c0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:aPe,setLegendSettings:iPe,addLegendPayload:KSe,removeLegendPayload:YSe}=eK.actions,XSe=eK.reducer;function S8(){return S8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S8.apply(null,arguments)}function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(n){JSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JSe(e,t,r){return(t=QSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QSe(e){var t=ZSe(e,"string");return typeof t=="symbol"?t:t+""}function ZSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e5e(e){return Array.isArray(e)&&ad(e[0])&&ad(e[1])?e.join(" ~ "):e}var t5e=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,g=()=>{if(a&&a.length){var E={padding:0,margin:0},A=(o?E3(a,o):a).map((F,j)=>{if(F.type==="none")return null;var P=F.formatter||i||e5e,{value:D,name:B}=F,V=D,Y=B;if(P){var re=P(D,B,F,j,a);if(Array.isArray(re))[V,Y]=re;else if(re!=null)V=re;else return null}var te=nk({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},n);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:te},ad(Y)?S.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,ad(Y)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},V),S.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:E},A)}return null},p=nk({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=nk({margin:0},s),v=!ji(d),C=v?d:"",w=$s("recharts-default-tooltip",c),_=$s("recharts-tooltip-label",u);v&&f&&a!==void 0&&a!==null&&(C=f(d,a));var T=h?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",S8({className:w,style:p},T),S.createElement("p",{className:_,style:y},S.isValidElement(C)?C:"".concat(C)),g())},jy="recharts-tooltip-wrapper",r5e={visibility:"hidden"};function n5e(e){var{coordinate:t,translateX:r,translateY:n}=e;return $s(jy,{["".concat(jy,"-right")]:gn(r)&&t&&gn(t.x)&&r>=t.x,["".concat(jy,"-left")]:gn(r)&&t&&gn(t.x)&&r<t.x,["".concat(jy,"-bottom")]:gn(n)&&t&&gn(t.y)&&n>=t.y,["".concat(jy,"-top")]:gn(n)&&t&&gn(t.y)&&n<t.y})}function QR(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(a&&gn(a[n]))return a[n];var d=r[n]-o-(s>0?s:0),f=r[n]+s;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var g=d,p=h;return g<p?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var y=f+o,v=h+u;return y>v?Math.max(d,h):Math.max(f,h)}function s5e(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function a5e(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=QR({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=QR({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=s5e({translateX:d,translateY:f,useTranslate3d:o})):u=r5e,{cssProperties:u,cssClasses:n5e({translateX:d,translateY:f,coordinate:r})}}function ZR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZR(Object(r),!0).forEach(function(n){k8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k8(e,t,r){return(t=i5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i5e(e){var t=o5e(e,"string");return typeof t=="symbol"?t:t+""}function o5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class l5e extends S.PureComponent{constructor(){super(...arguments),k8(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),k8(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:g,wrapperStyle:p,lastBoundingBox:y,innerRef:v,hasPortalFromProps:C}=this.props,{cssClasses:w,cssProperties:_}=a5e({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:y.height,width:y.width},useTranslate3d:h,viewBox:g}),T=C?{}:Lw(Lw({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),E=Lw(Lw({},T),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},p);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:E,ref:v},a)}}var c5e=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),D1={devToolsEnabled:!1,isSsr:c5e()},tK=()=>nn(e=>e.rootProps.accessibilityLayer);function pu(e){return Number.isFinite(e)}function h_(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function C8(){return C8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C8.apply(null,arguments)}function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(n){u5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u5e(e,t,r){return(t=d5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d5e(e){var t=f5e(e,"string");return typeof t=="symbol"?t:t+""}function f5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rI={curveBasisClosed:t_e,curveBasisOpen:r_e,curveBasis:e_e,curveBumpX:Q4e,curveBumpY:Z4e,curveLinearClosed:n_e,curveLinear:T3,curveMonotoneX:s_e,curveMonotoneY:a_e,curveNatural:i_e,curveStep:o_e,curveStepAfter:c_e,curveStepBefore:l_e},Bw=e=>pu(e.x)&&pu(e.y),Py=e=>e.x,Fy=e=>e.y,h5e=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(YN(e));return(r==="curveMonotone"||r==="curveBump")&&t?rI["".concat(r).concat(t==="vertical"?"Y":"X")]:rI[r]||T3},m5e=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,i=h5e(t,s),o=a?r.filter(Bw):r,c;if(Array.isArray(n)){var u=a?n.filter(f=>Bw(f)):n,d=o.map((f,h)=>tI(tI({},f),{},{base:u[h]}));return s==="vertical"?c=Pw().y(Fy).x1(Py).x0(f=>f.base.x):c=Pw().x(Py).y1(Fy).y0(f=>f.base.y),c.defined(Bw).curve(i),c(d)}return s==="vertical"&&gn(n)?c=Pw().y(Fy).x1(Py).x0(n):gn(n)?c=Pw().x(Py).y1(Fy).y0(n):c=eq().x(Py).y(Fy),c.defined(Bw).curve(i),c(o)},rK=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?m5e(e):n;return S.createElement("path",C8({},cg(e),JN(e),{className:$s("recharts-curve",t),d:a===null?void 0:a,ref:s}))},g5e=["x","y","top","left","width","height","className"];function T8(){return T8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T8.apply(null,arguments)}function nI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function p5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nI(Object(r),!0).forEach(function(n){x5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x5e(e,t,r){return(t=y5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y5e(e){var t=v5e(e,"string");return typeof t=="symbol"?t:t+""}function v5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b5e(e,t){if(e==null)return{};var r,n,s=w5e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function w5e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _5e=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),S5e=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:i=0,className:o}=e,c=b5e(e,g5e),u=p5e({x:t,y:r,top:n,left:s,width:a,height:i},c);return!gn(t)||!gn(r)||!gn(a)||!gn(i)||!gn(n)||!gn(s)?null:S.createElement("path",T8({},no(u,!0),{className:$s("recharts-cross",o),d:_5e(t,r,a,i,n,s)}))};function k5e(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function sI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C5e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(r),!0).forEach(function(n){T5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T5e(e,t,r){return(t=N5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N5e(e){var t=E5e(e,"string");return typeof t=="symbol"?t:t+""}function E5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ic(e,t){var r=C5e({},e),n=t,s=Object.keys(t),a=s.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return a}function A5e(){}function aI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aI(Object(r),!0).forEach(function(n){j5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j5e(e,t,r){return(t=P5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P5e(e){var t=F5e(e,"string");return typeof t=="symbol"?t:t+""}function F5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M5e=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),O5e=(e,t,r)=>e.map(n=>"".concat(M5e(n)," ").concat(t,"ms ").concat(r)).join(","),D5e=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Qv=(e,t)=>Object.keys(t).reduce((r,n)=>iI(iI({},r),{},{[n]:e(n,t[n])}),{});function oI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oI(Object(r),!0).forEach(function(n){R5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R5e(e,t,r){return(t=I5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I5e(e){var t=L5e(e,"string");return typeof t=="symbol"?t:t+""}function L5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m_=(e,t,r)=>e+(t-e)*r,N8=e=>{var{from:t,to:r}=e;return t!==r},nK=(e,t,r)=>{var n=Qv((s,a)=>{if(N8(a)){var[i,o]=e(a.from,a.to,a.velocity);return Yi(Yi({},a),{},{from:i,velocity:o})}return a},t);return r<1?Qv((s,a)=>N8(a)?Yi(Yi({},a),{},{velocity:m_(a.velocity,n[s].velocity,r),from:m_(a.from,n[s].from,r)}):a,t):nK(e,n,r-1)};function B5e(e,t,r,n,s,a){var i,o=n.reduce((h,g)=>Yi(Yi({},h),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),c=()=>Qv((h,g)=>g.from,o),u=()=>!Object.values(o).filter(N8).length,d=null,f=h=>{i||(i=h);var g=h-i,p=g/r.dt;o=nK(r,o,p),s(Yi(Yi(Yi({},e),t),c())),i=h,u()||(d=a.setTimeout(f))};return()=>(d=a.setTimeout(f),()=>{d()})}function $5e(e,t,r,n,s,a,i){var o=null,c=s.reduce((f,h)=>Yi(Yi({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,g=Qv((y,v)=>m_(...v,r(h)),c);if(a(Yi(Yi(Yi({},e),t),g)),h<1)o=i.setTimeout(d);else{var p=Qv((y,v)=>m_(...v,r(1)),c);a(Yi(Yi(Yi({},e),t),p))}};return()=>(o=i.setTimeout(d),()=>{o()})}const U5e=(e,t,r,n,s,a)=>{var i=D5e(e,t);return r.isStepper===!0?B5e(e,t,r,i,s,a):$5e(e,t,r,n,i,s,a)};var g_=1e-4,sK=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],aK=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),lI=(e,t)=>r=>{var n=sK(e,t);return aK(n,r)},z5e=(e,t)=>r=>{var n=sK(e,t),s=[...n.map((a,i)=>a*i).slice(1),0];return aK(s,r)},cI=function(){for(var t,r,n,s,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(p=>parseFloat(p)))}}else i.length===4&&([t,n,r,s]=i);var u=lI(t,r),d=lI(n,s),f=z5e(t,r),h=p=>p>1?1:p<0?0:p,g=p=>{for(var y=p>1?1:p,v=y,C=0;C<8;++C){var w=u(v)-y,_=f(v);if(Math.abs(w-y)<g_||_<g_)return d(v);v=h(v-w/_)}return d(v)};return g.isStepper=!1,g},W5e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*s/1e3,h=c*s/1e3+i;return Math.abs(h-o)<g_&&Math.abs(f)<g_?[o,0]:[h,f]};return a.isStepper=!0,a.dt=s,a},H5e=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return cI(e);case"spring":return W5e();default:if(e.split("(")[0]==="cubic-bezier")return cI(e)}return typeof e=="function"?e:null};function G5e(e){var t,r=()=>null,n=!1,s=null,a=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){s=e.setTimeout(a.bind(null,u),c);return}a(c),s=e.setTimeout(a.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,s&&(s(),s=null),a(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class V5e{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{cancelAnimationFrame(s)}}}function q5e(){return G5e(new V5e)}var K5e=S.createContext(q5e);function Y5e(e,t){var r=S.useContext(K5e);return S.useMemo(()=>t??r(e),[e,t,r])}var X5e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},uI={t:0},sk={t:1};function iK(e){var t=Ic(e,X5e),{isActive:r,canBegin:n,duration:s,easing:a,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=Y5e(t.animationId,t.animationManager),[f,h]=S.useState(r?uI:sk),g=S.useRef(null);return S.useEffect(()=>{r||h(sk)},[r]),S.useEffect(()=>{if(!r||!n)return A5e;var p=U5e(uI,sk,H5e(a),s,h,d.getTimeoutController()),y=()=>{g.current=p()};return d.start([c,i,y,s,o]),()=>{d.stop(),g.current&&g.current(),o()}},[r,n,s,a,i,c,o,d]),u(f.t)}function oK(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=S.useRef(Yv(t)),n=S.useRef(e);return n.current!==e&&(r.current=Yv(t),n.current=e),r.current}function dI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dI(Object(r),!0).forEach(function(n){J5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J5e(e,t,r){return(t=Q5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q5e(e){var t=Z5e(e,"string");return typeof t=="symbol"?t:t+""}function Z5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p_(){return p_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p_.apply(null,arguments)}var hI=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=s[f]>a?a:s[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(a>0&&s===+s&&s>0){var g=Math.min(a,s);u="M ".concat(e,",").concat(t+i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+o*g,",").concat(t,`
            L `).concat(e+r-o*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*g,`
            L `).concat(e+r,",").concat(t+n-i*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r-o*g,",").concat(t+n,`
            L `).concat(e+o*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*g," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},e6e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},t6e=e=>{var t=Ic(e,e6e),r=S.useRef(null),[n,s]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var re=r.current.getTotalLength();re&&s(re)}catch{}},[]);var{x:a,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:g,isAnimationActive:p,isUpdateAnimationActive:y}=t,v=S.useRef(o),C=S.useRef(c),w=S.useRef(a),_=S.useRef(i),T=S.useMemo(()=>({x:a,y:i,width:o,height:c,radius:u}),[a,i,o,c,u]),E=oK(T,"rectangle-");if(a!==+a||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var A=$s("recharts-rectangle",d);if(!y)return S.createElement("path",p_({},no(t,!0),{className:A,d:hI(a,i,o,c,u)}));var F=v.current,j=C.current,P=w.current,D=_.current,B="0px ".concat(n===-1?1:n,"px"),V="".concat(n,"px 0px"),Y=O5e(["strokeDasharray"],h,typeof f=="string"?f:void 0);return S.createElement(iK,{animationId:E,key:E,canBegin:n>0,duration:h,easing:f,isActive:y,begin:g},re=>{var te=Xd(F,o,re),ee=Xd(j,c,re),L=Xd(P,a,re),Q=Xd(D,i,re);r.current&&(v.current=te,C.current=ee,w.current=L,_.current=Q);var U;return p?re>0?U={transition:Y,strokeDasharray:V}:U={strokeDasharray:B}:U={strokeDasharray:V},S.createElement("path",p_({},no(t,!0),{className:A,d:hI(L,Q,te,ee,u),ref:r,style:fI(fI({},U),t.style)}))})};function lK(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,i=eo(t,r,n,s),o=eo(t,r,n,a);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function E8(){return E8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E8.apply(null,arguments)}var r6e=(e,t)=>{var r=_c(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},$w=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/f_,f=c?s:s+a*d,h=eo(t,r,u,f),g=eo(t,r,n,f),p=c?s-a*d:s,y=eo(t,r,u*Math.cos(d*f_),p);return{center:h,circleTangency:g,lineTangency:y,theta:d}},cK=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:i}=e,o=r6e(a,i),c=a+o,u=eo(t,r,s,a),d=eo(t,r,s,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(a>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=eo(t,r,n,a),g=eo(t,r,n,c);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(a<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},n6e=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=_c(u-c),{circleTangency:f,lineTangency:h,theta:g}=$w({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:a,cornerIsExternal:o}),{circleTangency:p,lineTangency:y,theta:v}=$w({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(c-u):Math.abs(c-u)-g-v;if(C<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):cK({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(C>180),",").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:T,theta:E}=$w({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:A,lineTangency:F,theta:j}=$w({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),P=o?Math.abs(c-u):Math.abs(c-u)-E-j;if(P<0&&a===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(F.x,",").concat(F.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(P>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},s6e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},a6e=e=>{var t=Ic(e,s6e),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(a<s||u===d)return null;var h=$s("recharts-sector",f),g=a-s,p=th(i,g,0,!0),y;return p>0&&Math.abs(u-d)<360?y=n6e({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(p,g/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):y=cK({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:u,endAngle:d}),S.createElement("path",E8({},no(t,!0),{className:h,d:y}))};function i6e(e,t,r){var n,s,a,i;if(e==="horizontal")n=t.x,a=n,s=r.top,i=r.top+r.height;else if(e==="vertical")s=t.y,i=s,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=eo(o,c,u,f),g=eo(o,c,d,f);n=h.x,s=h.y,a=g.x,i=g.y}else return lK(t);return[{x:n,y:s},{x:a,y:i}]}var ak={},ik={},ok={},mI;function o6e(){return mI||(mI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yq();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(ok)),ok}var gI;function l6e(){return gI||(gI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o6e();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(ik)),ik}var pI;function c6e(){return pI||(pI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vq(),r=l6e();function n(s,a,i){i&&typeof i!="number"&&t.isIterateeCall(s,a,i)&&(a=i=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),i=i===void 0?s<a?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((a-s)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=s,s+=i;return c}e.range=n})(ak)),ak}var lk,xI;function u6e(){return xI||(xI=1,lk=c6e().range),lk}var d6e=u6e();const uK=Oc(d6e);function Wf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function f6e(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cE(e){let t,r,n;e.length!==2?(t=Wf,r=(o,c)=>Wf(e(o),c),n=(o,c)=>e(o)-c):(t=e===Wf||e===f6e?e:h6e,r=e,n=e);function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=s(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:s,center:i,right:a}}function h6e(){return 0}function dK(e){return e===null?NaN:+e}function*m6e(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const g6e=cE(Wf),$2=g6e.right;cE(dK).center;class yI extends Map{constructor(t,r=y6e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(vI(this,t))}has(t){return super.has(vI(this,t))}set(t,r){return super.set(p6e(this,t),r)}delete(t){return super.delete(x6e(this,t))}}function vI({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function p6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function x6e({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function y6e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function v6e(e=Wf){if(e===Wf)return fK;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function fK(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const b6e=Math.sqrt(50),w6e=Math.sqrt(10),_6e=Math.sqrt(2);function x_(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),i=a>=b6e?10:a>=w6e?5:a>=_6e?2:1;let o,c,u;return s<0?(u=Math.pow(10,-s)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?x_(e,t,r*2):[o,c,u]}function A8(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,i]=n?x_(t,e,r):x_(e,t,r);if(!(a>=s))return[];const o=a-s+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(a-u)/-i;else for(let u=0;u<o;++u)c[u]=(a-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(s+u)/-i;else for(let u=0;u<o;++u)c[u]=(s+u)*i;return c}function j8(e,t,r){return t=+t,e=+e,r=+r,x_(e,t,r)[2]}function P8(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?j8(t,e,r):j8(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function bI(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function wI(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function hK(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?fK:v6e(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),g=Math.max(r,Math.floor(t-u*f/c+h)),p=Math.min(n,Math.floor(t+(c-u)*f/c+h));hK(e,t,g,p,s)}const a=e[t];let i=r,o=n;for(My(e,r,t),s(e[n],a)>0&&My(e,r,n);i<o;){for(My(e,i,o),++i,--o;s(e[i],a)<0;)++i;for(;s(e[o],a)>0;)--o}s(e[r],a)===0?My(e,r,o):(++o,My(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function My(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function S6e(e,t,r){if(e=Float64Array.from(m6e(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return wI(e);if(t>=1)return bI(e);var n,s=(n-1)*t,a=Math.floor(s),i=bI(hK(e,a).subarray(0,a+1)),o=wI(e.subarray(a+1));return i+(o-i)*(s-a)}}function k6e(e,t,r=dK){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),i=+r(e[a],a,e),o=+r(e[a+1],a+1,e);return i+(o-i)*(s-a)}}function C6e(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Lc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function M0(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const F8=Symbol("implicit");function uE(){var e=new yI,t=[],r=[],n=F8;function s(a){let i=e.get(a);if(i===void 0){if(n!==F8)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new yI;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return uE(t,r).unknown(n)},Lc.apply(s,arguments),s}function dE(){var e=uE().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,g=s<n,p=g?s:n,y=g?n:s;a=(y-p)/Math.max(1,h-c+u*2),o&&(a=Math.floor(a)),p+=(y-p-a*(h-c))*d,i=a*(1-c),o&&(p=Math.round(p),i=Math.round(i));var v=C6e(h).map(function(C){return p+a*C});return r(g?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,s]=h,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(h){return[n,s]=h,n=+n,s=+s,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return dE(t(),[n,s]).round(o).paddingInner(c).paddingOuter(u).align(d)},Lc.apply(f(),arguments)}function mK(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return mK(t())},e}function T6e(){return mK(dE.apply(null,arguments).paddingInner(1))}function fE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function gK(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function U2(){}var Zv=.7,y_=1/Zv,Wp="\\s*([+-]?\\d+)\\s*",e2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",N6e=/^#([0-9a-f]{3,8})$/,E6e=new RegExp(`^rgb\\(${Wp},${Wp},${Wp}\\)$`),A6e=new RegExp(`^rgb\\(${rd},${rd},${rd}\\)$`),j6e=new RegExp(`^rgba\\(${Wp},${Wp},${Wp},${e2}\\)$`),P6e=new RegExp(`^rgba\\(${rd},${rd},${rd},${e2}\\)$`),F6e=new RegExp(`^hsl\\(${e2},${rd},${rd}\\)$`),M6e=new RegExp(`^hsla\\(${e2},${rd},${rd},${e2}\\)$`),_I={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fE(U2,t2,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:SI,formatHex:SI,formatHex8:O6e,formatHsl:D6e,formatRgb:kI,toString:kI});function SI(){return this.rgb().formatHex()}function O6e(){return this.rgb().formatHex8()}function D6e(){return pK(this).formatHsl()}function kI(){return this.rgb().formatRgb()}function t2(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=N6e.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?CI(t):r===3?new ml(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Uw(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Uw(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=E6e.exec(e))?new ml(t[1],t[2],t[3],1):(t=A6e.exec(e))?new ml(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=j6e.exec(e))?Uw(t[1],t[2],t[3],t[4]):(t=P6e.exec(e))?Uw(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=F6e.exec(e))?EI(t[1],t[2]/100,t[3]/100,1):(t=M6e.exec(e))?EI(t[1],t[2]/100,t[3]/100,t[4]):_I.hasOwnProperty(e)?CI(_I[e]):e==="transparent"?new ml(NaN,NaN,NaN,0):null}function CI(e){return new ml(e>>16&255,e>>8&255,e&255,1)}function Uw(e,t,r,n){return n<=0&&(e=t=r=NaN),new ml(e,t,r,n)}function R6e(e){return e instanceof U2||(e=t2(e)),e?(e=e.rgb(),new ml(e.r,e.g,e.b,e.opacity)):new ml}function M8(e,t,r,n){return arguments.length===1?R6e(e):new ml(e,t,r,n??1)}function ml(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}fE(ml,M8,gK(U2,{brighter(e){return e=e==null?y_:Math.pow(y_,e),new ml(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zv:Math.pow(Zv,e),new ml(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ml(km(this.r),km(this.g),km(this.b),v_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TI,formatHex:TI,formatHex8:I6e,formatRgb:NI,toString:NI}));function TI(){return`#${um(this.r)}${um(this.g)}${um(this.b)}`}function I6e(){return`#${um(this.r)}${um(this.g)}${um(this.b)}${um((isNaN(this.opacity)?1:this.opacity)*255)}`}function NI(){const e=v_(this.opacity);return`${e===1?"rgb(":"rgba("}${km(this.r)}, ${km(this.g)}, ${km(this.b)}${e===1?")":`, ${e})`}`}function v_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function km(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function um(e){return e=km(e),(e<16?"0":"")+e.toString(16)}function EI(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new iu(e,t,r,n)}function pK(e){if(e instanceof iu)return new iu(e.h,e.s,e.l,e.opacity);if(e instanceof U2||(e=t2(e)),!e)return new iu;if(e instanceof iu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,o=a-s,c=(a+s)/2;return o?(t===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?a+s:2-a-s,i*=60):o=c>0&&c<1?0:i,new iu(i,o,c,e.opacity)}function L6e(e,t,r,n){return arguments.length===1?pK(e):new iu(e,t,r,n??1)}function iu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}fE(iu,L6e,gK(U2,{brighter(e){return e=e==null?y_:Math.pow(y_,e),new iu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zv:Math.pow(Zv,e),new iu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new ml(ck(e>=240?e-240:e+120,s,n),ck(e,s,n),ck(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new iu(AI(this.h),zw(this.s),zw(this.l),v_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=v_(this.opacity);return`${e===1?"hsl(":"hsla("}${AI(this.h)}, ${zw(this.s)*100}%, ${zw(this.l)*100}%${e===1?")":`, ${e})`}`}}));function AI(e){return e=(e||0)%360,e<0?e+360:e}function zw(e){return Math.max(0,Math.min(1,e||0))}function ck(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const hE=e=>()=>e;function B6e(e,t){return function(r){return e+r*t}}function $6e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function U6e(e){return(e=+e)==1?xK:function(t,r){return r-t?$6e(t,r,e):hE(isNaN(t)?r:t)}}function xK(e,t){var r=t-e;return r?B6e(e,r):hE(isNaN(e)?t:e)}const jI=(function e(t){var r=U6e(t);function n(s,a){var i=r((s=M8(s)).r,(a=M8(a)).r),o=r(s.g,a.g),c=r(s.b,a.b),u=xK(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n})(1);function z6e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function W6e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function H6e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)s[i]=R1(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(o){for(i=0;i<n;++i)a[i]=s[i](o);return a}}function G6e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function b_(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function V6e(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=R1(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var O8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,uk=new RegExp(O8.source,"g");function q6e(e){return function(){return e}}function K6e(e){return function(t){return e(t)+""}}function Y6e(e,t){var r=O8.lastIndex=uk.lastIndex=0,n,s,a,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=O8.exec(e))&&(s=uk.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,c.push({i,x:b_(n,s)})),r=uk.lastIndex;return r<t.length&&(a=t.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?c[0]?K6e(c[0].x):q6e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function R1(e,t){var r=typeof t,n;return t==null||r==="boolean"?hE(t):(r==="number"?b_:r==="string"?(n=t2(t))?(t=n,jI):Y6e:t instanceof t2?jI:t instanceof Date?G6e:W6e(t)?z6e:Array.isArray(t)?H6e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?V6e:b_)(e,t)}function mE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function X6e(e,t){t===void 0&&(t=e,e=R1);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return a[o](i-o)}}function J6e(e){return function(){return e}}function w_(e){return+e}var PI=[0,1];function Vo(e){return e}function D8(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:J6e(isNaN(t)?NaN:.5)}function Q6e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Z6e(e,t,r){var n=e[0],s=e[1],a=t[0],i=t[1];return s<n?(n=D8(s,n),a=r(i,a)):(n=D8(n,s),a=r(a,i)),function(o){return a(n(o))}}function eke(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)s[i]=D8(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(o){var c=$2(e,o,1,n)-1;return a[c](s[c](o))}}function z2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function L3(){var e=PI,t=PI,r=R1,n,s,a,i=Vo,o,c,u;function d(){var h=Math.min(e.length,t.length);return i!==Vo&&(i=Q6e(e[0],e[h-1])),o=h>2?eke:Z6e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?a:(c||(c=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(s((u||(u=o(t,e.map(n),b_)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,w_),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=mE,d()},f.clamp=function(h){return arguments.length?(i=h?!0:Vo,d()):i!==Vo},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,g){return n=h,s=g,d()}}function gE(){return L3()(Vo,Vo)}function tke(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function __(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function a1(e){return e=__(Math.abs(e)),e?e[1]:NaN}function rke(e,t){return function(r,n){for(var s=r.length,a=[],i=0,o=e[0],c=0;s>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),a.push(r.substring(s-=o,s+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return a.reverse().join(t)}}function nke(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var ske=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r2(e){if(!(t=ske.exec(e)))throw new Error("invalid format: "+e);var t;return new pE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}r2.prototype=pE.prototype;function pE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ake(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var yK;function ike(e,t){var r=__(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(yK=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+__(e,Math.max(0,t+a-1))[0]}function FI(e,t){var r=__(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const MI={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:tke,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>FI(e*100,t),r:FI,s:ike,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function OI(e){return e}var DI=Array.prototype.map,RI=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function oke(e){var t=e.grouping===void 0||e.thousands===void 0?OI:rke(DI.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?OI:nke(DI.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=r2(f);var h=f.fill,g=f.align,p=f.sign,y=f.symbol,v=f.zero,C=f.width,w=f.comma,_=f.precision,T=f.trim,E=f.type;E==="n"?(w=!0,E="g"):MI[E]||(_===void 0&&(_=12),T=!0,E="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var A=y==="$"?r:y==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",F=y==="$"?n:/[%p]/.test(E)?i:"",j=MI[E],P=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function D(B){var V=A,Y=F,re,te,ee;if(E==="c")Y=j(B)+Y,B="";else{B=+B;var L=B<0||1/B<0;if(B=isNaN(B)?c:j(Math.abs(B),_),T&&(B=ake(B)),L&&+B==0&&p!=="+"&&(L=!1),V=(L?p==="("?p:o:p==="-"||p==="("?"":p)+V,Y=(E==="s"?RI[8+yK/3]:"")+Y+(L&&p==="("?")":""),P){for(re=-1,te=B.length;++re<te;)if(ee=B.charCodeAt(re),48>ee||ee>57){Y=(ee===46?s+B.slice(re+1):B.slice(re))+Y,B=B.slice(0,re);break}}}w&&!v&&(B=t(B,1/0));var Q=V.length+B.length+Y.length,U=Q<C?new Array(C-Q+1).join(h):"";switch(w&&v&&(B=t(U+B,U.length?C-Y.length:1/0),U=""),g){case"<":B=V+B+Y+U;break;case"=":B=V+U+B+Y;break;case"^":B=U.slice(0,Q=U.length>>1)+V+B+Y+U.slice(Q);break;default:B=U+V+B+Y;break}return a(B)}return D.toString=function(){return f+""},D}function d(f,h){var g=u((f=r2(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(a1(h)/3)))*3,y=Math.pow(10,-p),v=RI[8+p/3];return function(C){return g(y*C)+v}}return{format:u,formatPrefix:d}}var Ww,xE,vK;lke({thousands:",",grouping:[3],currency:["$",""]});function lke(e){return Ww=oke(e),xE=Ww.format,vK=Ww.formatPrefix,Ww}function cke(e){return Math.max(0,-a1(Math.abs(e)))}function uke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(a1(t)/3)))*3-a1(Math.abs(e)))}function dke(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,a1(t)-a1(e))+1}function bK(e,t,r,n){var s=P8(e,t,r),a;switch(n=r2(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=uke(s,i))&&(n.precision=a),vK(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=dke(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=cke(s))&&(n.precision=a-(n.type==="%")*2);break}}return xE(n)}function mh(e){var t=e.domain;return e.ticks=function(r){var n=t();return A8(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return bK(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,i=n[s],o=n[a],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=s,s=a,a=u);d-- >0;){if(u=j8(i,o,r),u===c)return n[s]=i,n[a]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function wK(){var e=gE();return e.copy=function(){return z2(e,wK())},Lc.apply(e,arguments),mh(e)}function _K(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,w_),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return _K(e).unknown(t)},e=arguments.length?Array.from(e,w_):[0,1],mh(r)}function SK(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],i;return a<s&&(i=r,r=n,n=i,i=s,s=a,a=i),e[r]=t.floor(s),e[n]=t.ceil(a),e}function II(e){return Math.log(e)}function LI(e){return Math.exp(e)}function fke(e){return-Math.log(-e)}function hke(e){return-Math.exp(-e)}function mke(e){return isFinite(e)?+("1e"+e):e<0?0:e}function gke(e){return e===10?mke:e===Math.E?Math.exp:t=>Math.pow(e,t)}function pke(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function BI(e){return(t,r)=>-e(-t,r)}function yE(e){const t=e(II,LI),r=t.domain;let n=10,s,a;function i(){return s=pke(n),a=gke(n),r()[0]<0?(s=BI(s),a=BI(a),e(fke,hke)):e(II,LI),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=s(u),g=s(d),p,y;const v=o==null?10:+o;let C=[];if(!(n%1)&&g-h<v){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(p=1;p<n;++p)if(y=h<0?p/a(-h):p*a(h),!(y<u)){if(y>d)break;C.push(y)}}else for(;h<=g;++h)for(p=n-1;p>=1;--p)if(y=h>0?p/a(-h):p*a(h),!(y<u)){if(y>d)break;C.push(y)}C.length*2<v&&(C=A8(u,d,v))}else C=A8(h,g,Math.min(g-h,v)).map(a);return f?C.reverse():C},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=r2(c)).precision==null&&(c.trim=!0),c=xE(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/a(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(SK(r(),{floor:o=>a(Math.floor(s(o))),ceil:o=>a(Math.ceil(s(o)))})),t}function kK(){const e=yE(L3()).domain([1,10]);return e.copy=()=>z2(e,kK()).base(e.base()),Lc.apply(e,arguments),e}function $I(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function UI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vE(e){var t=1,r=e($I(t),UI(t));return r.constant=function(n){return arguments.length?e($I(t=+n),UI(t)):t},mh(r)}function CK(){var e=vE(L3());return e.copy=function(){return z2(e,CK()).constant(e.constant())},Lc.apply(e,arguments)}function zI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function xke(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function yke(e){return e<0?-e*e:e*e}function bE(e){var t=e(Vo,Vo),r=1;function n(){return r===1?e(Vo,Vo):r===.5?e(xke,yke):e(zI(r),zI(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},mh(t)}function wE(){var e=bE(L3());return e.copy=function(){return z2(e,wE()).exponent(e.exponent())},Lc.apply(e,arguments),e}function vke(){return wE.apply(null,arguments).exponent(.5)}function WI(e){return Math.sign(e)*e*e}function bke(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function TK(){var e=gE(),t=[0,1],r=!1,n;function s(a){var i=bke(e(a));return isNaN(i)?n:r?Math.round(i):i}return s.invert=function(a){return e.invert(WI(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,w_)).map(WI)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return TK(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Lc.apply(s,arguments),mh(s)}function NK(){var e=[],t=[],r=[],n;function s(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=k6e(e,i/o);return a}function a(i){return i==null||isNaN(i=+i)?n:t[$2(r,i)]}return a.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Wf),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return NK().domain(e).range(t).unknown(n)},Lc.apply(a,arguments)}function EK(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function i(c){return c!=null&&c<=c?s[$2(n,c,0,r)]:a}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,o()):s.slice()},i.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return EK().domain([e,t]).range(s).unknown(a)},Lc.apply(mh(i),arguments)}function AK(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[$2(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return AK().domain(e).range(t).unknown(r)},Lc.apply(s,arguments)}const dk=new Date,fk=new Date;function fi(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),o=s.ceil(a);return a-i<o-a?i:o},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,o)=>{const c=[];if(a=s.ceil(a),o=o==null?1:Math.floor(o),!(a<i)||!(o>0))return c;let u;do c.push(u=new Date(+a)),t(a,o),e(a);while(u<a&&a<i);return c},s.filter=a=>fi(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!a(i););else for(;--o>=0;)for(;t(i,1),!a(i););}),r&&(s.count=(a,i)=>(dk.setTime(+a),fk.setTime(+i),e(dk),e(fk),Math.floor(r(dk,fk))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?i=>n(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const S_=fi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);S_.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):S_);S_.range;const t0=1e3,Sc=t0*60,r0=Sc*60,b0=r0*24,_E=b0*7,HI=b0*30,hk=b0*365,dm=fi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*t0)},(e,t)=>(t-e)/t0,e=>e.getUTCSeconds());dm.range;const SE=fi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*t0)},(e,t)=>{e.setTime(+e+t*Sc)},(e,t)=>(t-e)/Sc,e=>e.getMinutes());SE.range;const kE=fi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Sc)},(e,t)=>(t-e)/Sc,e=>e.getUTCMinutes());kE.range;const CE=fi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*t0-e.getMinutes()*Sc)},(e,t)=>{e.setTime(+e+t*r0)},(e,t)=>(t-e)/r0,e=>e.getHours());CE.range;const TE=fi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*r0)},(e,t)=>(t-e)/r0,e=>e.getUTCHours());TE.range;const W2=fi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Sc)/b0,e=>e.getDate()-1);W2.range;const B3=fi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/b0,e=>e.getUTCDate()-1);B3.range;const jK=fi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/b0,e=>Math.floor(e/b0));jK.range;function ug(e){return fi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Sc)/_E)}const $3=ug(0),k_=ug(1),wke=ug(2),_ke=ug(3),i1=ug(4),Ske=ug(5),kke=ug(6);$3.range;k_.range;wke.range;_ke.range;i1.range;Ske.range;kke.range;function dg(e){return fi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/_E)}const U3=dg(0),C_=dg(1),Cke=dg(2),Tke=dg(3),o1=dg(4),Nke=dg(5),Eke=dg(6);U3.range;C_.range;Cke.range;Tke.range;o1.range;Nke.range;Eke.range;const NE=fi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());NE.range;const EE=fi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());EE.range;const w0=fi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());w0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});w0.range;const _0=fi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});_0.range;function PK(e,t,r,n,s,a){const i=[[dm,1,t0],[dm,5,5*t0],[dm,15,15*t0],[dm,30,30*t0],[a,1,Sc],[a,5,5*Sc],[a,15,15*Sc],[a,30,30*Sc],[s,1,r0],[s,3,3*r0],[s,6,6*r0],[s,12,12*r0],[n,1,b0],[n,2,2*b0],[r,1,_E],[t,1,HI],[t,3,3*HI],[e,1,hk]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const g=f&&typeof f.range=="function"?f:c(u,d,f),p=g?g.range(u,+d+1):[];return h?p.reverse():p}function c(u,d,f){const h=Math.abs(d-u)/f,g=cE(([,,v])=>v).right(i,h);if(g===i.length)return e.every(P8(u/hk,d/hk,f));if(g===0)return S_.every(Math.max(P8(u,d,f),1));const[p,y]=i[h/i[g-1][2]<i[g][2]/h?g-1:g];return p.every(y)}return[o,c]}const[Ake,jke]=PK(_0,EE,U3,jK,TE,kE),[Pke,Fke]=PK(w0,NE,$3,W2,CE,SE);function mk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function gk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Oy(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Mke(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=Dy(s),d=Ry(s),f=Dy(a),h=Ry(a),g=Dy(i),p=Ry(i),y=Dy(o),v=Ry(o),C=Dy(c),w=Ry(c),_={a:L,A:Q,b:U,B:G,c:null,d:XI,e:XI,f:rCe,g:fCe,G:mCe,H:Zke,I:eCe,j:tCe,L:FK,m:nCe,M:sCe,p:W,q:M,Q:ZI,s:eL,S:aCe,u:iCe,U:oCe,V:lCe,w:cCe,W:uCe,x:null,X:null,y:dCe,Y:hCe,Z:gCe,"%":QI},T={a:I,A:z,b:q,B:ne,c:null,d:JI,e:JI,f:vCe,g:ACe,G:PCe,H:pCe,I:xCe,j:yCe,L:OK,m:bCe,M:wCe,p:X,q:se,Q:ZI,s:eL,S:_Ce,u:SCe,U:kCe,V:CCe,w:TCe,W:NCe,x:null,X:null,y:ECe,Y:jCe,Z:FCe,"%":QI},E={a:D,A:B,b:V,B:Y,c:re,d:KI,e:KI,f:Yke,g:qI,G:VI,H:YI,I:YI,j:Gke,L:Kke,m:Hke,M:Vke,p:P,q:Wke,Q:Jke,s:Qke,S:qke,u:Lke,U:Bke,V:$ke,w:Ike,W:Uke,x:te,X:ee,y:qI,Y:VI,Z:zke,"%":Xke};_.x=A(r,_),_.X=A(n,_),_.c=A(t,_),T.x=A(r,T),T.X=A(n,T),T.c=A(t,T);function A(ce,pe){return function(be){var oe=[],je=-1,Re=0,Xe=ce.length,ft,Je,Ht;for(be instanceof Date||(be=new Date(+be));++je<Xe;)ce.charCodeAt(je)===37&&(oe.push(ce.slice(Re,je)),(Je=GI[ft=ce.charAt(++je)])!=null?ft=ce.charAt(++je):Je=ft==="e"?" ":"0",(Ht=pe[ft])&&(ft=Ht(be,Je)),oe.push(ft),Re=je+1);return oe.push(ce.slice(Re,je)),oe.join("")}}function F(ce,pe){return function(be){var oe=Oy(1900,void 0,1),je=j(oe,ce,be+="",0),Re,Xe;if(je!=be.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(pe&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Re=gk(Oy(oe.y,0,1)),Xe=Re.getUTCDay(),Re=Xe>4||Xe===0?C_.ceil(Re):C_(Re),Re=B3.offset(Re,(oe.V-1)*7),oe.y=Re.getUTCFullYear(),oe.m=Re.getUTCMonth(),oe.d=Re.getUTCDate()+(oe.w+6)%7):(Re=mk(Oy(oe.y,0,1)),Xe=Re.getDay(),Re=Xe>4||Xe===0?k_.ceil(Re):k_(Re),Re=W2.offset(Re,(oe.V-1)*7),oe.y=Re.getFullYear(),oe.m=Re.getMonth(),oe.d=Re.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),Xe="Z"in oe?gk(Oy(oe.y,0,1)).getUTCDay():mk(Oy(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(Xe+5)%7:oe.w+oe.U*7-(Xe+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,gk(oe)):mk(oe)}}function j(ce,pe,be,oe){for(var je=0,Re=pe.length,Xe=be.length,ft,Je;je<Re;){if(oe>=Xe)return-1;if(ft=pe.charCodeAt(je++),ft===37){if(ft=pe.charAt(je++),Je=E[ft in GI?pe.charAt(je++):ft],!Je||(oe=Je(ce,be,oe))<0)return-1}else if(ft!=be.charCodeAt(oe++))return-1}return oe}function P(ce,pe,be){var oe=u.exec(pe.slice(be));return oe?(ce.p=d.get(oe[0].toLowerCase()),be+oe[0].length):-1}function D(ce,pe,be){var oe=g.exec(pe.slice(be));return oe?(ce.w=p.get(oe[0].toLowerCase()),be+oe[0].length):-1}function B(ce,pe,be){var oe=f.exec(pe.slice(be));return oe?(ce.w=h.get(oe[0].toLowerCase()),be+oe[0].length):-1}function V(ce,pe,be){var oe=C.exec(pe.slice(be));return oe?(ce.m=w.get(oe[0].toLowerCase()),be+oe[0].length):-1}function Y(ce,pe,be){var oe=y.exec(pe.slice(be));return oe?(ce.m=v.get(oe[0].toLowerCase()),be+oe[0].length):-1}function re(ce,pe,be){return j(ce,t,pe,be)}function te(ce,pe,be){return j(ce,r,pe,be)}function ee(ce,pe,be){return j(ce,n,pe,be)}function L(ce){return i[ce.getDay()]}function Q(ce){return a[ce.getDay()]}function U(ce){return c[ce.getMonth()]}function G(ce){return o[ce.getMonth()]}function W(ce){return s[+(ce.getHours()>=12)]}function M(ce){return 1+~~(ce.getMonth()/3)}function I(ce){return i[ce.getUTCDay()]}function z(ce){return a[ce.getUTCDay()]}function q(ce){return c[ce.getUTCMonth()]}function ne(ce){return o[ce.getUTCMonth()]}function X(ce){return s[+(ce.getUTCHours()>=12)]}function se(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var pe=A(ce+="",_);return pe.toString=function(){return ce},pe},parse:function(ce){var pe=F(ce+="",!1);return pe.toString=function(){return ce},pe},utcFormat:function(ce){var pe=A(ce+="",T);return pe.toString=function(){return ce},pe},utcParse:function(ce){var pe=F(ce+="",!0);return pe.toString=function(){return ce},pe}}}var GI={"-":"",_:" ",0:"0"},Fi=/^\s*\d+/,Oke=/^%/,Dke=/[\\^$*+?|[\]().{}]/g;function Qn(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function Rke(e){return e.replace(Dke,"\\$&")}function Dy(e){return new RegExp("^(?:"+e.map(Rke).join("|")+")","i")}function Ry(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Ike(e,t,r){var n=Fi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Lke(e,t,r){var n=Fi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Bke(e,t,r){var n=Fi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function $ke(e,t,r){var n=Fi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Uke(e,t,r){var n=Fi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function VI(e,t,r){var n=Fi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function qI(e,t,r){var n=Fi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function zke(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Wke(e,t,r){var n=Fi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Hke(e,t,r){var n=Fi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function KI(e,t,r){var n=Fi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Gke(e,t,r){var n=Fi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function YI(e,t,r){var n=Fi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Vke(e,t,r){var n=Fi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function qke(e,t,r){var n=Fi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Kke(e,t,r){var n=Fi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Yke(e,t,r){var n=Fi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Xke(e,t,r){var n=Oke.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Jke(e,t,r){var n=Fi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Qke(e,t,r){var n=Fi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function XI(e,t){return Qn(e.getDate(),t,2)}function Zke(e,t){return Qn(e.getHours(),t,2)}function eCe(e,t){return Qn(e.getHours()%12||12,t,2)}function tCe(e,t){return Qn(1+W2.count(w0(e),e),t,3)}function FK(e,t){return Qn(e.getMilliseconds(),t,3)}function rCe(e,t){return FK(e,t)+"000"}function nCe(e,t){return Qn(e.getMonth()+1,t,2)}function sCe(e,t){return Qn(e.getMinutes(),t,2)}function aCe(e,t){return Qn(e.getSeconds(),t,2)}function iCe(e){var t=e.getDay();return t===0?7:t}function oCe(e,t){return Qn($3.count(w0(e)-1,e),t,2)}function MK(e){var t=e.getDay();return t>=4||t===0?i1(e):i1.ceil(e)}function lCe(e,t){return e=MK(e),Qn(i1.count(w0(e),e)+(w0(e).getDay()===4),t,2)}function cCe(e){return e.getDay()}function uCe(e,t){return Qn(k_.count(w0(e)-1,e),t,2)}function dCe(e,t){return Qn(e.getFullYear()%100,t,2)}function fCe(e,t){return e=MK(e),Qn(e.getFullYear()%100,t,2)}function hCe(e,t){return Qn(e.getFullYear()%1e4,t,4)}function mCe(e,t){var r=e.getDay();return e=r>=4||r===0?i1(e):i1.ceil(e),Qn(e.getFullYear()%1e4,t,4)}function gCe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qn(t/60|0,"0",2)+Qn(t%60,"0",2)}function JI(e,t){return Qn(e.getUTCDate(),t,2)}function pCe(e,t){return Qn(e.getUTCHours(),t,2)}function xCe(e,t){return Qn(e.getUTCHours()%12||12,t,2)}function yCe(e,t){return Qn(1+B3.count(_0(e),e),t,3)}function OK(e,t){return Qn(e.getUTCMilliseconds(),t,3)}function vCe(e,t){return OK(e,t)+"000"}function bCe(e,t){return Qn(e.getUTCMonth()+1,t,2)}function wCe(e,t){return Qn(e.getUTCMinutes(),t,2)}function _Ce(e,t){return Qn(e.getUTCSeconds(),t,2)}function SCe(e){var t=e.getUTCDay();return t===0?7:t}function kCe(e,t){return Qn(U3.count(_0(e)-1,e),t,2)}function DK(e){var t=e.getUTCDay();return t>=4||t===0?o1(e):o1.ceil(e)}function CCe(e,t){return e=DK(e),Qn(o1.count(_0(e),e)+(_0(e).getUTCDay()===4),t,2)}function TCe(e){return e.getUTCDay()}function NCe(e,t){return Qn(C_.count(_0(e)-1,e),t,2)}function ECe(e,t){return Qn(e.getUTCFullYear()%100,t,2)}function ACe(e,t){return e=DK(e),Qn(e.getUTCFullYear()%100,t,2)}function jCe(e,t){return Qn(e.getUTCFullYear()%1e4,t,4)}function PCe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?o1(e):o1.ceil(e),Qn(e.getUTCFullYear()%1e4,t,4)}function FCe(){return"+0000"}function QI(){return"%"}function ZI(e){return+e}function eL(e){return Math.floor(+e/1e3)}var dp,RK,IK;MCe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function MCe(e){return dp=Mke(e),RK=dp.format,dp.parse,IK=dp.utcFormat,dp.utcParse,dp}function OCe(e){return new Date(e)}function DCe(e){return e instanceof Date?+e:+new Date(+e)}function AE(e,t,r,n,s,a,i,o,c,u){var d=gE(),f=d.invert,h=d.domain,g=u(".%L"),p=u(":%S"),y=u("%I:%M"),v=u("%I %p"),C=u("%a %d"),w=u("%b %d"),_=u("%B"),T=u("%Y");function E(A){return(c(A)<A?g:o(A)<A?p:i(A)<A?y:a(A)<A?v:n(A)<A?s(A)<A?C:w:r(A)<A?_:T)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?h(Array.from(A,DCe)):h().map(OCe)},d.ticks=function(A){var F=h();return e(F[0],F[F.length-1],A??10)},d.tickFormat=function(A,F){return F==null?E:u(F)},d.nice=function(A){var F=h();return(!A||typeof A.range!="function")&&(A=t(F[0],F[F.length-1],A??10)),A?h(SK(F,A)):d},d.copy=function(){return z2(d,AE(e,t,r,n,s,a,i,o,c,u))},d}function RCe(){return Lc.apply(AE(Pke,Fke,w0,NE,$3,W2,CE,SE,dm,RK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ICe(){return Lc.apply(AE(Ake,jke,_0,EE,U3,B3,TE,kE,dm,IK).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function z3(){var e=0,t=1,r,n,s,a,i=Vo,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(s===0?.5:(f=(a(f)-r)*s,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var g,p;return arguments.length?([g,p]=h,i=f(g,p),u):[i(0),i(1)]}}return u.range=d(R1),u.rangeRound=d(mE),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return a=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function gh(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function LK(){var e=mh(z3()(Vo));return e.copy=function(){return gh(e,LK())},M0.apply(e,arguments)}function BK(){var e=yE(z3()).domain([1,10]);return e.copy=function(){return gh(e,BK()).base(e.base())},M0.apply(e,arguments)}function $K(){var e=vE(z3());return e.copy=function(){return gh(e,$K()).constant(e.constant())},M0.apply(e,arguments)}function jE(){var e=bE(z3());return e.copy=function(){return gh(e,jE()).exponent(e.exponent())},M0.apply(e,arguments)}function LCe(){return jE.apply(null,arguments).exponent(.5)}function UK(){var e=[],t=Vo;function r(n){if(n!=null&&!isNaN(n=+n))return t(($2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Wf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>S6e(e,a/n))},r.copy=function(){return UK(t).domain(e)},M0.apply(r,arguments)}function W3(){var e=0,t=.5,r=1,n=1,s,a,i,o,c,u=Vo,d,f=!1,h;function g(y){return isNaN(y=+y)?h:(y=.5+((y=+d(y))-a)*(n*y<n*a?o:c),u(f?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),a=d(t=+t),i=d(r=+r),o=s===a?0:.5/(a-s),c=a===i?0:.5/(i-a),n=a<s?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(f=!!y,g):f},g.interpolator=function(y){return arguments.length?(u=y,g):u};function p(y){return function(v){var C,w,_;return arguments.length?([C,w,_]=v,u=X6e(y,[C,w,_]),g):[u(0),u(.5),u(1)]}}return g.range=p(R1),g.rangeRound=p(mE),g.unknown=function(y){return arguments.length?(h=y,g):h},function(y){return d=y,s=y(e),a=y(t),i=y(r),o=s===a?0:.5/(a-s),c=a===i?0:.5/(i-a),n=a<s?-1:1,g}}function zK(){var e=mh(W3()(Vo));return e.copy=function(){return gh(e,zK())},M0.apply(e,arguments)}function WK(){var e=yE(W3()).domain([.1,1,10]);return e.copy=function(){return gh(e,WK()).base(e.base())},M0.apply(e,arguments)}function HK(){var e=vE(W3());return e.copy=function(){return gh(e,HK()).constant(e.constant())},M0.apply(e,arguments)}function PE(){var e=bE(W3());return e.copy=function(){return gh(e,PE()).exponent(e.exponent())},M0.apply(e,arguments)}function BCe(){return PE.apply(null,arguments).exponent(.5)}const Vy=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dE,scaleDiverging:zK,scaleDivergingLog:WK,scaleDivergingPow:PE,scaleDivergingSqrt:BCe,scaleDivergingSymlog:HK,scaleIdentity:_K,scaleImplicit:F8,scaleLinear:wK,scaleLog:kK,scaleOrdinal:uE,scalePoint:T6e,scalePow:wE,scaleQuantile:NK,scaleQuantize:EK,scaleRadial:TK,scaleSequential:LK,scaleSequentialLog:BK,scaleSequentialPow:jE,scaleSequentialQuantile:UK,scaleSequentialSqrt:LCe,scaleSequentialSymlog:$K,scaleSqrt:vke,scaleSymlog:CK,scaleThreshold:AK,scaleTime:RCe,scaleUtc:ICe,tickFormat:bK},Symbol.toStringTag,{value:"Module"}));var ph=e=>e.chartData,$Ce=Ut([ph],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),FE=(e,t,r,n)=>n?$Ce(e):ph(e);function l1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(pu(t)&&pu(r))return!0}return!1}function tL(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function UCe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(pu(r))s=r;else if(typeof r=="function")return;if(pu(n))a=n;else if(typeof n=="function")return;var i=[s,a];if(l1(i))return i}}function zCe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(l1(n))return tL(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,i,o;if(s==="auto")t!=null&&(i=Math.min(...t));else if(gn(s))i=s;else if(typeof s=="function")try{t!=null&&(i=s(t?.[0]))}catch{}else if(typeof s=="string"&&qR.test(s)){var c=qR.exec(s);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t?.[0];if(a==="auto")t!=null&&(o=Math.max(...t));else if(gn(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[1]))}catch{}else if(typeof a=="string"&&KR.test(a)){var d=KR.exec(a);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t?.[1];var h=[i,o];if(l1(h))return t==null?h:tL(h,t,r)}}}var I1=1e9,WCe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},OE,qs=!0,Mc="[DecimalError] ",Cm=Mc+"Invalid argument: ",ME=Mc+"Exponent out of range: ",L1=Math.floor,rm=Math.pow,HCe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ul,ki=1e7,Os=7,GK=9007199254740991,T_=L1(GK/Os),$r={};$r.absoluteValue=$r.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$r.comparedTo=$r.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};$r.decimalPlaces=$r.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Os;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};$r.dividedBy=$r.div=function(e){return u0(this,new this.constructor(e))};$r.dividedToIntegerBy=$r.idiv=function(e){var t=this,r=t.constructor;return ks(u0(t,new r(e),0,1),r.precision)};$r.equals=$r.eq=function(e){return!this.cmp(e)};$r.exponent=function(){return Ka(this)};$r.greaterThan=$r.gt=function(e){return this.cmp(e)>0};$r.greaterThanOrEqualTo=$r.gte=function(e){return this.cmp(e)>=0};$r.isInteger=$r.isint=function(){return this.e>this.d.length-2};$r.isNegative=$r.isneg=function(){return this.s<0};$r.isPositive=$r.ispos=function(){return this.s>0};$r.isZero=function(){return this.s===0};$r.lessThan=$r.lt=function(e){return this.cmp(e)<0};$r.lessThanOrEqualTo=$r.lte=function(e){return this.cmp(e)<1};$r.logarithm=$r.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ul))throw Error(Mc+"NaN");if(r.s<1)throw Error(Mc+(r.s?"NaN":"-Infinity"));return r.eq(Ul)?new n(0):(qs=!1,t=u0(n2(r,a),n2(e,a),a),qs=!0,ks(t,s))};$r.minus=$r.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?KK(t,e):VK(t,(e.s=-e.s,e))};$r.modulo=$r.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Mc+"NaN");return r.s?(qs=!1,t=u0(r,e,0,1).times(e),qs=!0,r.minus(t)):ks(new n(r),s)};$r.naturalExponential=$r.exp=function(){return qK(this)};$r.naturalLogarithm=$r.ln=function(){return n2(this)};$r.negated=$r.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$r.plus=$r.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?VK(t,e):KK(t,(e.s=-e.s,e))};$r.precision=$r.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Cm+e);if(t=Ka(s)+1,n=s.d.length-1,r=n*Os+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};$r.squareRoot=$r.sqrt=function(){var e,t,r,n,s,a,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Mc+"NaN")}for(e=Ka(o),qs=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=Ju(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=L1((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=i=r+3;;)if(a=n,n=a.plus(u0(o,a,i+2)).times(.5),Ju(a.d).slice(0,i)===(t=Ju(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),s==i&&t=="4999"){if(ks(a,r+1,0),a.times(a).eq(o)){n=a;break}}else if(t!="9999")break;i+=4}return qs=!0,ks(n,r)};$r.times=$r.mul=function(e){var t,r,n,s,a,i,o,c,u,d=this,f=d.constructor,h=d.d,g=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=g.length,c<u&&(a=h,h=g,g=a,i=c,c=u,u=i),a=[],i=c+u,n=i;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)o=a[s]+g[n]*h[s-n-1]+t,a[s--]=o%ki|0,t=o/ki|0;a[s]=(a[s]+t)%ki|0}for(;!a[--i];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,qs?ks(e,f.precision):e};$r.toDecimalPlaces=$r.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(id(e,0,I1),t===void 0?t=n.rounding:id(t,0,8),ks(r,e+Ka(r)+1,t))};$r.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Km(n,!0):(id(e,0,I1),t===void 0?t=s.rounding:id(t,0,8),n=ks(new s(n),e+1,t),r=Km(n,!0,e+1)),r};$r.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?Km(s):(id(e,0,I1),t===void 0?t=a.rounding:id(t,0,8),n=ks(new a(s),e+Ka(s)+1,t),r=Km(n.abs(),!1,e+Ka(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};$r.toInteger=$r.toint=function(){var e=this,t=e.constructor;return ks(new t(e),Ka(e)+1,t.rounding)};$r.toNumber=function(){return+this};$r.toPower=$r.pow=function(e){var t,r,n,s,a,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Ul);if(o=new c(o),!o.s){if(e.s<1)throw Error(Mc+"Infinity");return o}if(o.eq(Ul))return o;if(n=c.precision,e.eq(Ul))return ks(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,a=o.s,i){if((r=d<0?-d:d)<=GK){for(s=new c(Ul),t=Math.ceil(n/Os+4),qs=!1;r%2&&(s=s.times(o),nL(s.d,t)),r=L1(r/2),r!==0;)o=o.times(o),nL(o.d,t);return qs=!0,e.s<0?new c(Ul).div(s):ks(s,n)}}else if(a<0)throw Error(Mc+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,qs=!1,s=e.times(n2(o,n+u)),qs=!0,s=qK(s),s.s=a,s};$r.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=Ka(s),n=Km(s,r<=a.toExpNeg||r>=a.toExpPos)):(id(e,1,I1),t===void 0?t=a.rounding:id(t,0,8),s=ks(new a(s),e,t),r=Ka(s),n=Km(s,e<=r||r<=a.toExpNeg,e)),n};$r.toSignificantDigits=$r.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(id(e,1,I1),t===void 0?t=n.rounding:id(t,0,8)),ks(new n(r),e,t)};$r.toString=$r.valueOf=$r.val=$r.toJSON=$r[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ka(e),r=e.constructor;return Km(e,t<=r.toExpNeg||t>=r.toExpPos)};function VK(e,t){var r,n,s,a,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),qs?ks(t,f):t;if(c=e.d,u=t.d,i=e.e,s=t.e,c=c.slice(),a=i-s,a){for(a<0?(n=c,a=-a,o=u.length):(n=u,s=i,o=c.length),i=Math.ceil(f/Os),o=i>o?i+1:o+1,a>o&&(a=o,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/ki|0,c[a]%=ki;for(r&&(c.unshift(r),++s),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=s,qs?ks(t,f):t}function id(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Cm+e)}function Ju(e){var t,r,n,s=e.length-1,a="",i=e[0];if(s>0){for(a+=i,t=1;t<s;t++)n=e[t]+"",r=Os-n.length,r&&(a+=Nf(r)),a+=n;i=e[t],n=i+"",r=Os-n.length,r&&(a+=Nf(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return a+i}var u0=(function(){function e(n,s){var a,i=0,o=n.length;for(n=n.slice();o--;)a=n[o]*s+i,n[o]=a%ki|0,i=a/ki|0;return i&&n.unshift(i),n}function t(n,s,a,i){var o,c;if(a!=i)c=a>i?1:-1;else for(o=c=0;o<a;o++)if(n[o]!=s[o]){c=n[o]>s[o]?1:-1;break}return c}function r(n,s,a){for(var i=0;a--;)n[a]-=i,i=n[a]<s[a]?1:0,n[a]=i*ki+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,i){var o,c,u,d,f,h,g,p,y,v,C,w,_,T,E,A,F,j,P=n.constructor,D=n.s==s.s?1:-1,B=n.d,V=s.d;if(!n.s)return new P(n);if(!s.s)throw Error(Mc+"Division by zero");for(c=n.e-s.e,F=V.length,E=B.length,g=new P(D),p=g.d=[],u=0;V[u]==(B[u]||0);)++u;if(V[u]>(B[u]||0)&&--c,a==null?w=a=P.precision:i?w=a+(Ka(n)-Ka(s))+1:w=a,w<0)return new P(0);if(w=w/Os+2|0,u=0,F==1)for(d=0,V=V[0],w++;(u<E||d)&&w--;u++)_=d*ki+(B[u]||0),p[u]=_/V|0,d=_%V|0;else{for(d=ki/(V[0]+1)|0,d>1&&(V=e(V,d),B=e(B,d),F=V.length,E=B.length),T=F,y=B.slice(0,F),v=y.length;v<F;)y[v++]=0;j=V.slice(),j.unshift(0),A=V[0],V[1]>=ki/2&&++A;do d=0,o=t(V,y,F,v),o<0?(C=y[0],F!=v&&(C=C*ki+(y[1]||0)),d=C/A|0,d>1?(d>=ki&&(d=ki-1),f=e(V,d),h=f.length,v=y.length,o=t(f,y,h,v),o==1&&(d--,r(f,F<h?j:V,h))):(d==0&&(o=d=1),f=V.slice()),h=f.length,h<v&&f.unshift(0),r(y,f,v),o==-1&&(v=y.length,o=t(V,y,F,v),o<1&&(d++,r(y,F<v?j:V,v))),v=y.length):o===0&&(d++,y=[0]),p[u++]=d,o&&y[0]?y[v++]=B[T]||0:(y=[B[T]],v=1);while((T++<E||y[0]!==void 0)&&w--)}return p[0]||p.shift(),g.e=c,ks(g,i?a+Ka(g)+1:a)}})();function qK(e,t){var r,n,s,a,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(Ka(e)>16)throw Error(ME+Ka(e));if(!e.s)return new d(Ul);for(qs=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(rm(2,u))/Math.LN10*2+5|0,o+=n,r=s=a=new d(Ul),d.precision=o;;){if(s=ks(s.times(e),o),r=r.times(++c),i=a.plus(u0(s,r,o)),Ju(i.d).slice(0,o)===Ju(a.d).slice(0,o)){for(;u--;)a=ks(a.times(a),o);return d.precision=f,t==null?(qs=!0,ks(a,f)):a}a=i}}function Ka(e){for(var t=e.e*Os,r=e.d[0];r>=10;r/=10)t++;return t}function pk(e,t,r){if(t>e.LN10.sd())throw qs=!0,r&&(e.precision=r),Error(Mc+"LN10 precision limit exceeded");return ks(new e(e.LN10),t)}function Nf(e){for(var t="";e--;)t+="0";return t}function n2(e,t){var r,n,s,a,i,o,c,u,d,f=1,h=10,g=e,p=g.d,y=g.constructor,v=y.precision;if(g.s<1)throw Error(Mc+(g.s?"NaN":"-Infinity"));if(g.eq(Ul))return new y(0);if(t==null?(qs=!1,u=v):u=t,g.eq(10))return t==null&&(qs=!0),pk(y,u);if(u+=h,y.precision=u,r=Ju(p),n=r.charAt(0),a=Ka(g),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Ju(g.d),n=r.charAt(0),f++;a=Ka(g),n>1?(g=new y("0."+r),a++):g=new y(n+"."+r.slice(1))}else return c=pk(y,u+2,v).times(a+""),g=n2(new y(n+"."+r.slice(1)),u-h).plus(c),y.precision=v,t==null?(qs=!0,ks(g,v)):g;for(o=i=g=u0(g.minus(Ul),g.plus(Ul),u),d=ks(g.times(g),u),s=3;;){if(i=ks(i.times(d),u),c=o.plus(u0(i,new y(s),u)),Ju(c.d).slice(0,u)===Ju(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(pk(y,u+2,v).times(a+""))),o=u0(o,new y(f),u),y.precision=v,t==null?(qs=!0,ks(o,v)):o;o=c,s+=2}}function rL(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=L1(r/Os),e.d=[],n=(r+1)%Os,r<0&&(n+=Os),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Os;n<s;)e.d.push(+t.slice(n,n+=Os));t=t.slice(n),n=Os-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),qs&&(e.e>T_||e.e<-T_))throw Error(ME+r)}else e.s=0,e.e=0,e.d=[0];return e}function ks(e,t,r){var n,s,a,i,o,c,u,d,f=e.d;for(i=1,a=f[0];a>=10;a/=10)i++;if(n=t-i,n<0)n+=Os,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Os),a=f.length,d>=a)return e;for(u=a=f[d],i=1;a>=10;a/=10)i++;n%=Os,s=n-Os+i}if(r!==void 0&&(a=rm(10,i-s-1),o=u/a%10|0,c=t<0||f[d+1]!==void 0||u%a,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?s>0?u/rm(10,i-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(a=Ka(e),f.length=1,t=t-a-1,f[0]=rm(10,(Os-t%Os)%Os),e.e=L1(-t/Os)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,a=1,d--):(f.length=d+1,a=rm(10,Os-n),f[d]=s>0?(u/rm(10,i-s)%rm(10,s)|0)*a:0),c)for(;;)if(d==0){(f[0]+=a)==ki&&(f[0]=1,++e.e);break}else{if(f[d]+=a,f[d]!=ki)break;f[d--]=0,a=1}for(n=f.length;f[--n]===0;)f.pop();if(qs&&(e.e>T_||e.e<-T_))throw Error(ME+Ka(e));return e}function KK(e,t){var r,n,s,a,i,o,c,u,d,f,h=e.constructor,g=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),qs?ks(t,g):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),s=Math.max(Math.ceil(g/Os),o)+2,i>s&&(i=s,r.length=1),r.reverse(),s=i;s--;)r.push(0);r.reverse()}else{for(s=c.length,o=f.length,d=s<o,d&&(o=s),s=0;s<o;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,s=f.length-o;s>0;--s)c[o++]=0;for(s=f.length;s>i;){if(c[--s]<f[s]){for(a=s;a&&c[--a]===0;)c[a]=ki-1;--c[a],c[s]+=ki}c[s]-=f[s]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,qs?ks(t,g):t):new h(0)}function Km(e,t,r){var n,s=Ka(e),a=Ju(e.d),i=a.length;return t?(r&&(n=r-i)>0?a=a.charAt(0)+"."+a.slice(1)+Nf(n):i>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Nf(-s-1)+a,r&&(n=r-i)>0&&(a+=Nf(n))):s>=i?(a+=Nf(s+1-i),r&&(n=r-s-1)>0&&(a=a+"."+Nf(n))):((n=s+1)<i&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-i)>0&&(s+1===i&&(a+="."),a+=Nf(n))),e.s<0?"-"+a:a}function nL(e,t){if(e.length>t)return e.length=t,!0}function YK(e){var t,r,n;function s(a){var i=this;if(!(i instanceof s))return new s(a);if(i.constructor=s,a instanceof s){i.s=a.s,i.e=a.e,i.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Cm+a);if(a>0)i.s=1;else if(a<0)a=-a,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(a===~~a&&a<1e7){i.e=0,i.d=[a];return}return rL(i,a.toString())}else if(typeof a!="string")throw Error(Cm+a);if(a.charCodeAt(0)===45?(a=a.slice(1),i.s=-1):i.s=1,HCe.test(a))rL(i,a);else throw Error(Cm+a)}if(s.prototype=$r,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=YK,s.config=s.set=GCe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function GCe(e){if(!e||typeof e!="object")throw Error(Mc+"Object expected");var t,r,n,s=["precision",1,I1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(L1(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Cm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Cm+r+": "+n);return this}var OE=YK(WCe);Ul=new OE(1);const us=OE;var VCe=e=>e,XK={},JK=e=>e===XK,sL=e=>function t(){return arguments.length===0||arguments.length===1&&JK(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},QK=(e,t)=>e===1?t:sL(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(i=>i!==XK).length;return a>=e?t(...n):QK(e-a,sL(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>JK(d)?o.shift():d);return t(...u,...o)}))}),H3=e=>QK(e.length,e),R8=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},qCe=H3((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),KCe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return VCe;var s=r.reverse(),a=s[0],i=s.slice(1);return function(){return i.reduce((o,c)=>c(o),a(...arguments))}},I8=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),ZK=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=s,r=e(...s)),r}};function eY(e){var t;return e===0?t=1:t=Math.floor(new us(e).abs().log(10).toNumber())+1,t}function tY(e,t,r){for(var n=new us(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}H3((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});H3((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});H3((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var rY=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},nY=(e,t,r)=>{if(e.lte(0))return new us(0);var n=eY(e.toNumber()),s=new us(10).pow(n),a=e.div(s),i=n!==1?.05:.1,o=new us(Math.ceil(a.div(i).toNumber())).add(r).mul(i),c=o.mul(s);return t?new us(c.toNumber()):new us(Math.ceil(c.toNumber()))},YCe=(e,t,r)=>{var n=new us(1),s=new us(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new us(10).pow(eY(e)-1),s=new us(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new us(Math.floor(e)))}else e===0?s=new us(Math.floor((t-1)/2)):r||(s=new us(Math.floor(e)));var i=Math.floor((t-1)/2),o=KCe(qCe(c=>s.add(new us(c-i).mul(n)).toNumber()),R8);return o(0,t)},sY=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new us(0),tickMin:new us(0),tickMax:new us(0)};var i=nY(new us(r).sub(t).div(n-1),s,a),o;t<=0&&r>=0?o=new us(0):(o=new us(t).add(r).div(2),o=o.sub(new us(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new us(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?sY(t,r,n,s,a+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new us(c).mul(i)),tickMax:o.add(new us(u).mul(i))})};function XCe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[i,o]=rY([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...R8(0,n-1).map(()=>1/0)]:[...R8(0,n-1).map(()=>-1/0),o];return t>r?I8(c):c}if(i===o)return YCe(i,n,s);var{step:u,tickMin:d,tickMax:f}=sY(i,o,a,s,0),h=tY(d,f.add(new us(.1).mul(u)),u);return t>r?I8(h):h}function JCe(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,i]=rY([r,n]);if(a===-1/0||i===1/0)return[r,n];if(a===i)return[a];var o=Math.max(t,2),c=nY(new us(i).sub(a).div(o-1),s,0),u=[...tY(new us(a),new us(i),c),i];return s===!1&&(u=u.map(d=>Math.round(d))),r>n?I8(u):u}var QCe=ZK(XCe),ZCe=ZK(JCe),e8e=e=>e.rootProps.barCategoryGap,G3=e=>e.rootProps.stackOffset,DE=e=>e.options.chartName,RE=e=>e.rootProps.syncId,aY=e=>e.rootProps.syncMethod,IE=e=>e.options.eventEmitter,Jd={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Fl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},V3=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},t8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Jd.angleAxisId,includeHidden:!1,name:void 0,reversed:Jd.reversed,scale:Jd.scale,tick:Jd.tick,tickCount:void 0,ticks:void 0,type:Jd.type,unit:void 0},r8e={allowDataOverflow:Fl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fl.scale,tick:Fl.tick,tickCount:Fl.tickCount,ticks:void 0,type:Fl.type,unit:void 0},n8e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Jd.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Jd.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Jd.scale,tick:Jd.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},s8e={allowDataOverflow:Fl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Fl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Fl.scale,tick:Fl.tick,tickCount:Fl.tickCount,ticks:void 0,type:"category",unit:void 0},LE=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?n8e:t8e,BE=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?s8e:r8e,q3=e=>e.polarOptions,$E=Ut([P0,F0,so],dSe),iY=Ut([q3,$E],(e,t)=>{if(e!=null)return th(e.innerRadius,t,0)}),oY=Ut([q3,$E],(e,t)=>{if(e!=null)return th(e.outerRadius,t,t*.8)}),a8e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},lY=Ut([q3],a8e);Ut([LE,lY],V3);var cY=Ut([$E,iY,oY],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Ut([BE,cY],V3);var uY=Ut([Us,q3,iY,oY,P0,F0],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:th(i,s,s/2),cy:th(o,a,a/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Xa=(e,t)=>t,K3=(e,t,r)=>r;function dY(e){return e?.id}var hi=e=>{var t=Us(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},B1=e=>e.tooltip.settings.axisId,Mi=e=>{var t=hi(e),r=B1(e);return H2(e,t,r)},fY=Ut([Mi],e=>e?.dataKey);function hY(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,i=new Map;return e.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=dY(o);u.forEach((f,h)=>{var g=a==null||s?h:String(Yo(f,a,null)),p=Yo(f,o.dataKey,0),y;i.has(g)?y=i.get(g):y={},Object.assign(y,{[d]:p}),i.set(g,y)})}}),Array.from(i.values())}function UE(e){return e.stackId!=null&&e.dataKey!=null}function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function N_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(n){i8e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i8e(e,t,r){return(t=o8e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o8e(e){var t=l8e(e,"string");return typeof t=="symbol"?t:t+""}function l8e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L8=[0,"auto"],jl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},mY=(e,t)=>e.cartesianAxis.xAxis[t],O0=(e,t)=>{var r=mY(e,t);return r??jl},Pl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:L8,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:B2},gY=(e,t)=>e.cartesianAxis.yAxis[t],D0=(e,t)=>{var r=gY(e,t);return r??Pl},c8e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},zE=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??c8e},bl=(e,t,r)=>{switch(t){case"xAxis":return O0(e,r);case"yAxis":return D0(e,r);case"zAxis":return zE(e,r);case"angleAxis":return LE(e,r);case"radiusAxis":return BE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},u8e=(e,t,r)=>{switch(t){case"xAxis":return O0(e,r);case"yAxis":return D0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},H2=(e,t,r)=>{switch(t){case"xAxis":return O0(e,r);case"yAxis":return D0(e,r);case"angleAxis":return LE(e,r);case"radiusAxis":return BE(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},pY=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function xY(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var yY=e=>e.graphicalItems.cartesianItems,d8e=Ut([Xa,K3],xY),vY=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),G2=Ut([yY,bl,d8e],vY),bY=Ut([G2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(UE)),wY=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),_Y=Ut([G2],wY),SY=e=>e.map(t=>t.data).filter(Boolean).flat(1),f8e=Ut([G2],SY),kY=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},WE=Ut([f8e,FE],kY),CY=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Yo(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Yo(s,n)}))):e.map(n=>({value:n})),Y3=Ut([WE,bl,G2],CY);function TY(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function fg(e){return e.filter(t=>ad(t)||t instanceof Date).map(Number).filter(t=>Pc(t)===!1)}function h8e(e,t,r){return!r||typeof t!="number"||Pc(t)?[]:r.length?fg(r.flatMap(n=>{var s=Yo(e,n.dataKey),a,i;if(Array.isArray(s)?[a,i]=s:a=i=s,!(!pu(a)||!pu(i)))return[t-a,t+i]})):[]}var m8e=Ut([bY,FE,Mi],hY),NY=(e,t,r)=>{var n={},s=t.reduce((a,i)=>(i.stackId==null||(a[i.stackId]==null&&(a[i.stackId]=[]),a[i.stackId].push(i)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[i,o]=a,c=o.map(dY);return[i,{stackedData:TSe(e,c,r),graphicalItems:o}]}))},g8e=Ut([m8e,bY,G3],NY),EY=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var a=ASe(e,n,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},p8e=Ut([g8e,ph,Xa],EY),AY=(e,t,r,n,s)=>r.length>0?e.flatMap(a=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>TY(s,f)),d=Yo(a,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:h8e(a,d,u)}})).filter(Boolean):t?.dataKey!=null?e.map(a=>({value:Yo(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})),X3=e=>e.errorBars,jY=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>TY(r,n));Ut([_Y,X3,Xa],jY);var x8e=Ut([WE,bl,_Y,X3,Xa],AY);function y8e(e){var{value:t}=e;if(ad(t)||t instanceof Date)return t}var iL=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=fg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},v8e=(e,t,r)=>{var n=e.map(y8e).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&HV(n))?uK(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},HE=e=>{var t;if(e==null||!("domain"in e))return L8;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=fg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:L8},E_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),i=Math.min(...a),o=Math.max(...a);return[i,o]}},PY=e=>e.referenceElements.dots,$1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),b8e=Ut([PY,Xa,K3],$1),FY=e=>e.referenceElements.areas,w8e=Ut([FY,Xa,K3],$1),MY=e=>e.referenceElements.lines,_8e=Ut([MY,Xa,K3],$1),OY=(e,t)=>{var r=fg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},S8e=Ut(b8e,Xa,OY),DY=(e,t)=>{var r=fg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},k8e=Ut([w8e,Xa],DY),RY=(e,t)=>{var r=fg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},C8e=Ut(_8e,Xa,RY),T8e=Ut(S8e,C8e,k8e,(e,t,r)=>E_(e,r,t)),N8e=Ut([bl],HE),IY=(e,t,r,n,s,a,i)=>{var o=UCe(t,e.allowDataOverflow);if(o!=null)return o;var c=a==="vertical"&&i==="xAxis"||a==="horizontal"&&i==="yAxis",u=c?E_(r,s,iL(n)):E_(s,iL(n));return zCe(t,u,e.allowDataOverflow)},E8e=Ut([bl,N8e,p8e,x8e,T8e,Us,Xa],IY),A8e=[0,1],LY=(e,t,r,n,s,a,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=hh(t,a);return u&&o==null?uK(0,r.length):c==="category"?v8e(n,e,u):s==="expand"?A8e:i}},GE=Ut([bl,Us,WE,Y3,G3,Xa,E8e],LY),BY=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:i}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(YN(a));return o in Vy?o:"point"}}},V2=Ut([bl,Us,pY,DE,Xa],BY);function j8e(e){if(e!=null){if(e in Vy)return Vy[e]();var t="scale".concat(YN(e));if(t in Vy)return Vy[t]()}}function VE(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=j8e(t);if(s!=null){var a=s.domain(r).range(n);return _Se(a),a}}}var $Y=(e,t,r)=>{var n=HE(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&l1(e))return QCe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&l1(e))return ZCe(e,t.tickCount,t.allowDecimals)}},qE=Ut([GE,H2,V2],$Y),UY=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&l1(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],i=t[1],o=r[r.length-1];return[Math.min(s,a),Math.max(i,o)]}return t},P8e=Ut([bl,GE,qE,Xa],UY),F8e=Ut(Y3,bl,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(fg(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var i=n[a+1]-n[a];r=Math.min(r,i)}return r/s}}),zY=Ut(F8e,Us,e8e,so,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!pu(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var i=th(r,e*a),o=e*a/2;return o-i-(o-i)/a*i}return 0}),M8e=(e,t)=>{var r=O0(e,t);return r==null||typeof r.padding!="string"?0:zY(e,"xAxis",t,r.padding)},O8e=(e,t)=>{var r=D0(e,t);return r==null||typeof r.padding!="string"?0:zY(e,"yAxis",t,r.padding)},D8e=Ut(O0,M8e,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),R8e=Ut(D0,O8e,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),I8e=Ut([so,D8e,I3,R3,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),L8e=Ut([so,Us,R8e,I3,R3,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:i}=s;return a?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),q2=(e,t,r,n)=>{var s;switch(t){case"xAxis":return I8e(e,r,n);case"yAxis":return L8e(e,r,n);case"zAxis":return(s=zE(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return lY(e);case"radiusAxis":return cY(e,r);default:return}},WY=Ut([bl,q2],V3),U1=Ut([bl,V2,P8e,WY],VE);Ut([G2,X3,Xa],jY);function HY(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var J3=(e,t)=>t,Q3=(e,t,r)=>r,B8e=Ut(O3,J3,Q3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(HY)),$8e=Ut(D3,J3,Q3,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(HY)),GY=(e,t)=>({width:e.width,height:t.height}),U8e=(e,t)=>{var r=typeof t.width=="number"?t.width:B2;return{width:r,height:e.height}},z8e=Ut(so,O0,GY),W8e=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},H8e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},G8e=Ut(F0,so,B8e,J3,Q3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var c=GY(t,o);i==null&&(i=W8e(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;a[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),a}),V8e=Ut(P0,so,$8e,J3,Q3,(e,t,r,n,s)=>{var a={},i;return r.forEach(o=>{var c=U8e(t,o);i==null&&(i=H8e(t,n,e));var u=n==="left"&&!s||n==="right"&&s;a[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),a}),q8e=(e,t)=>{var r=O0(e,t);if(r!=null)return G8e(e,r.orientation,r.mirror)},K8e=Ut([so,O0,q8e,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),Y8e=(e,t)=>{var r=D0(e,t);if(r!=null)return V8e(e,r.orientation,r.mirror)},X8e=Ut([so,D0,Y8e,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r?.[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),J8e=Ut(so,D0,(e,t)=>{var r=typeof t.width=="number"?t.width:B2;return{width:r,height:e.height}}),VY=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:i}=r,o=hh(e,n),c=t.map(u=>u.value);if(i&&o&&a==="category"&&s&&HV(c))return c}},KE=Ut([Us,Y3,bl,Xa],VY),qY=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,i=hh(e,n);if(i&&(s==="number"||a!=="auto"))return t.map(o=>o.value)}},YE=Ut([Us,Y3,H2,Xa],qY),oL=Ut([Us,u8e,V2,U1,KE,YE,q2,qE,Xa],(e,t,r,n,s,a,i,o,c)=>{if(t==null)return null;var u=hh(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:a,duplicateDomain:s,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),Q8e=(e,t,r,n,s,a,i,o,c)=>{if(!(t==null||n==null)){var u=hh(e,c),{type:d,ticks:f,tickCount:h}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/g:0;p=c==="angleAxis"&&a!=null&&a.length>=2?_c(a[0]-a[1])*2*p:p;var y=f||s;if(y){var v=y.map((C,w)=>{var _=i?i.indexOf(C):C;return{index:w,coordinate:n(_)+p,value:C,offset:p}});return v.filter(C=>!Pc(C.coordinate))}return u&&o?o.map((C,w)=>({coordinate:n(C)+p,value:C,index:w,offset:p})):n.ticks?n.ticks(h).map(C=>({coordinate:n(C)+p,value:C,offset:p})):n.domain().map((C,w)=>({coordinate:n(C)+p,value:i?i[C]:C,index:w,offset:p}))}},KY=Ut([Us,H2,V2,U1,qE,q2,KE,YE,Xa],Q8e),Z8e=(e,t,r,n,s,a,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=hh(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&n?.length>=2?_c(n[0]-n[1])*2*u:u,o&&a?a.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:s?s[d]:d,index:f,offset:u}))}},YY=Ut([Us,H2,U1,q2,KE,YE,Xa],Z8e),XY=Ut(bl,U1,(e,t)=>{if(!(e==null||t==null))return N_(N_({},e),{},{scale:t})}),eTe=Ut([bl,V2,GE,WY],VE);Ut((e,t,r)=>zE(e,r),eTe,(e,t)=>{if(!(e==null||t==null))return N_(N_({},e),{},{scale:t})});var tTe=Ut([Us,O3,D3],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),JY=e=>e.options.defaultTooltipEventType,QY=e=>e.options.validateTooltipEventTypes;function ZY(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function XE(e,t){var r=JY(e),n=QY(e);return ZY(t,r,n)}function rTe(e){return nn(t=>XE(t,e))}var eX=(e,t)=>{var r,n=Number(t);if(!(Pc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},nTe=e=>e.tooltip.settings,Af={active:!1,index:null,dataKey:void 0,coordinate:void 0},sTe={itemInteraction:{click:Af,hover:Af},axisInteraction:{click:Af,hover:Af},keyboardInteraction:Af,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tX=Yl({name:"tooltip",initialState:sTe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=c0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:aTe,removeTooltipEntrySettings:iTe,setTooltipSettingsState:oTe,setActiveMouseOverItemIndex:lTe,mouseLeaveItem:oPe,mouseLeaveChart:rX,setActiveClickItemIndex:lPe,setMouseOverAxisIndex:nX,setMouseClickAxisIndex:cTe,setSyncInteraction:B8,setKeyboardInteraction:$8}=tX.actions,uTe=tX.reducer;function lL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lL(Object(r),!0).forEach(function(n){dTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dTe(e,t,r){return(t=fTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fTe(e){var t=hTe(e,"string");return typeof t=="symbol"?t:t+""}function hTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mTe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function gTe(e){return e.index!=null}var sX=(e,t,r,n)=>{if(t==null)return Af;var s=mTe(e,t,r);if(s==null)return Af;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(gTe(s)){if(a)return Hw(Hw({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Hw(Hw({},Af),{},{coordinate:s.coordinate})},JE=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!pu(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},aX=(e,t,r,n,s,a,i,o)=>{if(!(a==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var d=s?.[Number(a)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},iX=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var i;return((i=a.settings)===null||i===void 0?void 0:i.dataKey)===s})},K2=e=>e.options.tooltipPayloadSearcher,z1=e=>e.tooltip;function cL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cL(Object(r),!0).forEach(function(n){pTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pTe(e,t,r){return(t=xTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xTe(e){var t=yTe(e,"string");return typeof t=="symbol"?t:t+""}function yTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vTe(e,t){return e??t}var oX=(e,t,r,n,s,a,i)=>{if(!(t==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,g)=>{var p,{dataDefinedOnItem:y,settings:v}=g,C=vTe(y,o),w=Array.isArray(C)?Gq(C,u,d):C,_=(p=v?.dataKey)!==null&&p!==void 0?p:n,T=v?.nameKey,E;if(n&&Array.isArray(w)&&!Array.isArray(w[0])&&i==="axis"?E=GV(w,n,s):E=a(w,t,c,T),Array.isArray(E))E.forEach(F=>{var j=uL(uL({},v),{},{name:F.name,unit:F.unit,color:void 0,fill:void 0});h.push(YR({tooltipEntrySettings:j,dataKey:F.dataKey,payload:F.payload,value:Yo(F.payload,F.dataKey),name:F.name}))});else{var A;h.push(YR({tooltipEntrySettings:v,dataKey:_,payload:E,value:Yo(E,_),name:(A=Yo(E,T))!==null&&A!==void 0?A:v?.name}))}return h},f)}},QE=Ut([Mi,Us,pY,DE,hi],BY),bTe=Ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),wTe=Ut([hi,B1],xY),Y2=Ut([bTe,Mi,wTe],vY),_Te=Ut([Y2],e=>e.filter(UE)),STe=Ut([Y2],SY),W1=Ut([STe,ph],kY),kTe=Ut([_Te,ph,Mi],hY),ZE=Ut([W1,Mi,Y2],CY),CTe=Ut([Mi],HE),TTe=Ut([Y2],e=>e.filter(UE)),NTe=Ut([kTe,TTe,G3],NY),ETe=Ut([NTe,ph,hi],EY),ATe=Ut([Y2],wY),jTe=Ut([W1,Mi,ATe,X3,hi],AY),PTe=Ut([PY,hi,B1],$1),FTe=Ut([PTe,hi],OY),MTe=Ut([FY,hi,B1],$1),OTe=Ut([MTe,hi],DY),DTe=Ut([MY,hi,B1],$1),RTe=Ut([DTe,hi],RY),ITe=Ut([FTe,RTe,OTe],E_),LTe=Ut([Mi,CTe,ETe,jTe,ITe,Us,hi],IY),lX=Ut([Mi,Us,W1,ZE,G3,hi,LTe],LY),BTe=Ut([lX,Mi,QE],$Y),$Te=Ut([Mi,lX,BTe,hi],UY),cX=e=>{var t=hi(e),r=B1(e),n=!1;return q2(e,t,r,n)},uX=Ut([Mi,cX],V3),dX=Ut([Mi,QE,$Te,uX],VE),UTe=Ut([Us,ZE,Mi,hi],VY),zTe=Ut([Us,ZE,Mi,hi],qY),WTe=(e,t,r,n,s,a,i,o)=>{if(t){var{type:c}=t,u=hh(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&s!=null&&s?.length>=2?_c(s[0]-s[1])*2*f:f,u&&i?i.map((h,g)=>({coordinate:n(h)+f,value:h,index:g,offset:f})):n.domain().map((h,g)=>({coordinate:n(h)+f,value:a?a[h]:h,index:g,offset:f}))}}},R0=Ut([Us,Mi,QE,dX,cX,UTe,zTe,hi],WTe),e9=Ut([JY,QY,nTe],(e,t,r)=>ZY(r.shared,e,t)),fX=e=>e.tooltip.settings.trigger,t9=e=>e.tooltip.settings.defaultIndex,Z3=Ut([z1,e9,fX,t9],sX),s2=Ut([Z3,W1],JE),hX=Ut([R0,s2],eX),HTe=Ut([Z3],e=>{if(e)return e.dataKey}),mX=Ut([z1,e9,fX,t9],iX),GTe=Ut([P0,F0,Us,so,R0,t9,mX,K2],aX),VTe=Ut([Z3,GTe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),qTe=Ut([Z3],e=>e.active),KTe=Ut([mX,s2,ph,fY,hX,K2,e9],oX),YTe=Ut([KTe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function dL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dL(Object(r),!0).forEach(function(n){XTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XTe(e,t,r){return(t=JTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JTe(e){var t=QTe(e,"string");return typeof t=="symbol"?t:t+""}function QTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZTe=()=>nn(Mi),e7e=()=>{var e=ZTe(),t=nn(R0),r=nn(dX);return _8(fL(fL({},e),{},{scale:r}),t)},t7e=()=>nn(DE),r9=(e,t)=>t,gX=(e,t,r)=>r,n9=(e,t,r,n)=>n,r7e=Ut(R0,e=>E3(e,t=>t.coordinate)),s9=Ut([z1,r9,gX,n9],sX),pX=Ut([s9,W1],JE),n7e=(e,t,r)=>{if(t!=null){var n=z1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},xX=Ut([z1,r9,gX,n9],iX),A_=Ut([P0,F0,Us,so,R0,n9,xX,K2],aX),s7e=Ut([s9,A_],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),yX=Ut(R0,pX,eX),a7e=Ut([xX,pX,ph,fY,yX,K2,r9],oX),i7e=Ut([s9],e=>({isActive:e.active,activeIndex:e.index})),o7e=(e,t,r,n,s,a,i,o)=>{if(!(!e||!t||!n||!s||!a)){var c=jSe(e.chartX,e.chartY,t,r,o);if(c){var u=FSe(c,t),d=bSe(u,i,a,n,s),f=PSe(t,a,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function U8(){return U8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U8.apply(null,arguments)}function hL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hL(Object(r),!0).forEach(function(n){l7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l7e(e,t,r){return(t=c7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c7e(e){var t=u7e(e,"string");return typeof t=="symbol"?t:t+""}function u7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d7e(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:a,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var g,p;if(u==="ScatterChart")g=d,p=S5e;else if(u==="BarChart")g=k5e(i,d,s,a),p=t6e;else if(i==="radial"){var{cx:y,cy:v,radius:C,startAngle:w,endAngle:_}=lK(d);g={cx:y,cy:v,startAngle:w,endAngle:_,innerRadius:C,outerRadius:C},p=a6e}else g={points:i6e(i,d,s)},p=rK;var T=typeof o=="object"&&"className"in o?o.className:void 0,E=Gw(Gw(Gw(Gw({stroke:"#ccc",pointerEvents:"none"},s),g),no(o,!1)),{},{payload:f,payloadIndex:h,className:$s("recharts-tooltip-cursor",T)});return S.isValidElement(o)?S.cloneElement(o,E):S.createElement(p,E)}function f7e(e){var t=e7e(),r=Jq(),n=lE(),s=t7e();return S.createElement(d7e,U8({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var vX=S.createContext(null),h7e=()=>S.useContext(vX),xk={exports:{}},mL;function m7e(){return mL||(mL=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new s(d,f||c,h),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],g]:c._events[p].push(g):(c._events[p]=g,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,g=f.length,p=new Array(g);h<g;h++)p[h]=f[h].fn;return p},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,g,p){var y=r?r+u:u;if(!this._events[y])return!1;var v=this._events[y],C=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),C){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,g),!0;case 6:return v.fn.call(v.context,d,f,h,g,p),!0}for(_=1,w=new Array(C-1);_<C;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var T=v.length,E;for(_=0;_<T;_++)switch(v[_].once&&this.removeListener(u,v[_].fn,void 0,!0),C){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,d);break;case 3:v[_].fn.call(v[_].context,d,f);break;case 4:v[_].fn.call(v[_].context,d,f,h);break;default:if(!w)for(E=1,w=new Array(C-1);E<C;E++)w[E-1]=arguments[E];v[_].fn.apply(v[_].context,w)}}return!0},o.prototype.on=function(u,d,f){return a(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return a(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var g=r?r+u:u;if(!this._events[g])return this;if(!d)return i(this,g),this;var p=this._events[g];if(p.fn)p.fn===d&&(!h||p.once)&&(!f||p.context===f)&&i(this,g);else{for(var y=0,v=[],C=p.length;y<C;y++)(p[y].fn!==d||h&&!p[y].once||f&&p[y].context!==f)&&v.push(p[y]);v.length?this._events[g]=v.length===1?v[0]:v:i(this,g)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(xk)),xk.exports}var g7e=m7e();const p7e=Oc(g7e);var a2=new p7e,z8="recharts.syncEvent.tooltip",gL="recharts.syncEvent.brush";function x7e(e,t){if(t){var r=Number.parseInt(t,10);if(!Pc(r))return e?.[r]}}var y7e={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},bX=Yl({name:"options",initialState:y7e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),v7e=bX.reducer,{createEventEmitter:b7e}=bX.actions;function w7e(e){return e.tooltip.syncInteraction}var _7e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},wX=Yl({name:"chartData",initialState:_7e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:pL,setDataStartEndIndexes:S7e,setComputedData:cPe}=wX.actions,k7e=wX.reducer,C7e=["x","y"];function xL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xL(Object(r),!0).forEach(function(n){T7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T7e(e,t,r){return(t=N7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N7e(e){var t=E7e(e,"string");return typeof t=="symbol"?t:t+""}function E7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A7e(e,t){if(e==null)return{};var r,n,s=j7e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function j7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _X=()=>{};function P7e(){var e=nn(RE),t=nn(IE),r=Zo(),n=nn(aY),s=nn(R0),a=lE(),i=oE(),o=nn(c=>c.rootProps.className);S.useEffect(()=>{if(e==null)return _X;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(i&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate){var g=d.payload.coordinate,{x:p,y}=g,v=A7e(g,C7e),C=Qh(Qh(Qh({},v),typeof p=="number"&&{x:Math.max(i.x,Math.min(p,i.x+i.width))}),typeof y=="number"&&{y:Math.max(i.y,Math.min(y,i.y+i.height))}),w=Qh(Qh({},d),{},{payload:Qh(Qh({},d.payload),{},{coordinate:C})});r(w)}else r(d);return}if(s!=null){var _;if(typeof n=="function"){var T={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},E=n(s,T);_=s[E]}else n==="value"&&(_=s.find(Y=>String(Y.value)===d.payload.label));var{coordinate:A}=d.payload;if(_==null||d.payload.active===!1||A==null||i==null){r(B8({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:F,y:j}=A,P=Math.min(F,i.x+i.width),D=Math.min(j,i.y+i.height),B={x:a==="horizontal"?_.coordinate:P,y:a==="horizontal"?D:_.coordinate},V=B8({active:d.payload.active,coordinate:B,dataKey:d.payload.dataKey,index:String(_.index),label:d.payload.label});r(V)}}};return a2.on(z8,c),()=>{a2.off(z8,c)}},[o,r,t,e,n,s,a,i])}function F7e(){var e=nn(RE),t=nn(IE),r=Zo();S.useEffect(()=>{if(e==null)return _X;var n=(s,a,i)=>{t!==i&&e===s&&r(S7e(a))};return a2.on(gL,n),()=>{a2.off(gL,n)}},[r,t,e])}function M7e(){var e=Zo();S.useEffect(()=>{e(b7e())},[e]),P7e(),F7e()}function O7e(e,t,r,n,s,a){var i=nn(h=>n7e(h,e,t)),o=nn(IE),c=nn(RE),u=nn(aY),d=nn(w7e),f=d?.active;S.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=B8({active:a,coordinate:r,dataKey:i,index:s,label:typeof n=="number"?String(n):n});a2.emit(z8,c,h,o)}},[f,r,i,s,n,o,c,u,a])}function yL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yL(Object(r),!0).forEach(function(n){D7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D7e(e,t,r){return(t=R7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R7e(e){var t=I7e(e,"string");return typeof t=="symbol"?t:t+""}function I7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L7e(e){return e.dataKey}function B7e(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(t5e,t)}var bL=[],$7e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!D1.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function U7e(e){var t=Ic(e,$7e),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:a,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:g,wrapperStyle:p,cursor:y,shared:v,trigger:C,defaultIndex:w,portal:_,axisId:T}=t,E=Zo(),A=typeof w=="number"?String(w):w;S.useEffect(()=>{E(oTe({shared:v,trigger:C,axisId:T,active:r,defaultIndex:A}))},[E,v,C,T,r,A]);var F=oE(),j=tK(),P=rTe(v),{activeIndex:D,isActive:B}=nn(q=>i7e(q,P,C,A)),V=nn(q=>a7e(q,P,C,A)),Y=nn(q=>yX(q,P,C,A)),re=nn(q=>s7e(q,P,C,A)),te=V,ee=h7e(),L=r??B,[Q,U]=c3e([te,L]),G=P==="axis"?Y:void 0;O7e(P,C,re,G,D,L);var W=_??ee;if(W==null)return null;var M=te??bL;L||(M=bL),o&&M.length&&(M=D_e(te.filter(q=>q.value!=null&&(q.hide!==!0||t.includeHidden)),d,L7e));var I=M.length>0,z=S.createElement(l5e,{allowEscapeViewBox:n,animationDuration:s,animationEasing:a,isAnimationActive:c,active:L,coordinate:re,hasPayload:I,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:F,wrapperStyle:p,lastBoundingBox:Q,innerRef:U,hasPortalFromProps:!!_},B7e(i,vL(vL({},t),{},{payload:M,label:G,active:L,coordinate:re,accessibilityLayer:j})));return S.createElement(S.Fragment,null,Fk.createPortal(z,W),L&&S.createElement(f7e,{cursor:y,tooltipEventType:P,coordinate:re,payload:te,index:D}))}var yk={},vk={},bk={},wL;function z7e(){return wL||(wL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let i,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),y()};let h=null;const g=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},p=()=>{h!==null&&(clearTimeout(h),h=null)},y=()=>{p(),i=void 0,o=null},v=()=>{d()},C=function(...w){if(s?.aborted)return;i=this,o=w;const _=h==null;g(),c&&_&&d()};return C.schedule=g,C.cancel=y,C.flush=v,s?.addEventListener("abort",y,{once:!0}),C}e.debounce=t})(bk)),bk}var _L;function W7e(){return _L||(_L=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z7e();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:i=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...y){d=n.apply(this,y),f=null},s,{edges:u}),g=function(...y){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,y),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,y),d)},p=()=>(h.flush(),d);return g.cancel=h.cancel,g.flush=p,g}e.debounce=r})(vk)),vk}var SL;function H7e(){return SL||(SL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W7e();function r(n,s=0,a={}){const{leading:i=!0,trailing:o=!0}=a;return t.debounce(n,s,{leading:i,maxWait:s,trailing:o})}e.throttle=r})(yk)),yk}var wk,kL;function G7e(){return kL||(kL=1,wk=H7e().throttle),wk}var V7e=G7e();const q7e=Oc(V7e);var fv=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]};function CL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _k(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CL(Object(r),!0).forEach(function(n){K7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K7e(e,t,r){return(t=Y7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y7e(e){var t=X7e(e,"string");return typeof t=="symbol"?t:t+""}function X7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J7e=S.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:a="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:g,style:p={}}=e,y=S.useRef(null),v=S.useRef();v.current=g,S.useImperativeHandle(t,()=>y.current);var[C,w]=S.useState({containerWidth:n.width,containerHeight:n.height}),_=S.useCallback((E,A)=>{w(F=>{var j=Math.round(E),P=Math.round(A);return F.containerWidth===j&&F.containerHeight===P?F:{containerWidth:j,containerHeight:P}})},[]);S.useEffect(()=>{var E=P=>{var D,{width:B,height:V}=P[0].contentRect;_(B,V),(D=v.current)===null||D===void 0||D.call(v,B,V)};d>0&&(E=q7e(E,d,{trailing:!0,leading:!1}));var A=new ResizeObserver(E),{width:F,height:j}=y.current.getBoundingClientRect();return _(F,j),A.observe(y.current),()=>{A.disconnect()}},[_,d]);var T=S.useMemo(()=>{var{containerWidth:E,containerHeight:A}=C;if(E<0||A<0)return null;fv(cm(s)||cm(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,a),fv(!r||r>0,"The aspect(%s) must be greater than zero.",r);var F=cm(s)?E:s,j=cm(a)?A:a;return r&&r>0&&(F?j=F/r:j&&(F=j*r),c&&j>c&&(j=c)),fv(F>0||j>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,F,j,s,a,i,o,r),S.Children.map(u,P=>S.cloneElement(P,{width:F,height:j,style:_k({width:F,height:j},P.props.style)}))},[r,u,a,c,o,i,C,s]);return S.createElement("div",{id:f?"".concat(f):void 0,className:$s("recharts-responsive-container",h),style:_k(_k({},p),{},{width:s,height:a,minWidth:i,minHeight:o,maxHeight:c}),ref:y},S.createElement("div",{style:{width:0,height:0,overflow:"visible"}},T))});function Q7e(e,t,r){return(t=Z7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z7e(e){var t=eNe(e,"string");return typeof t=="symbol"?t:t+""}function eNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tNe{constructor(t){Q7e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function TL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(r),!0).forEach(function(n){nNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nNe(e,t,r){return(t=sNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sNe(e){var t=aNe(e,"string");return typeof t=="symbol"?t:t+""}function aNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iNe={cacheSize:2e3,enableCache:!0},SX=rNe({},iNe),NL=new tNe(SX.cacheSize),oNe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},EL="recharts_measurement_span";function lNe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(i,"|").concat(o)}var AL=(e,t)=>{try{var r=document.getElementById(EL);r||(r=document.createElement("span"),r.setAttribute("id",EL),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,oNe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},hv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||D1.isSsr)return{width:0,height:0};if(!SX.enableCache)return AL(t,r);var n=lNe(t,r),s=NL.get(n);if(s)return s;var a=AL(t,r);return NL.set(n,a),a},jL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,PL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,cNe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,uNe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kX={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},dNe=Object.keys(kX),Ap="NaN";function fNe(e,t){return e*kX[t]}class dl{static parse(t){var r,[,n,s]=(r=uNe.exec(t))!==null&&r!==void 0?r:[];return new dl(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Pc(t)&&(this.unit=""),r!==""&&!cNe.test(r)&&(this.num=NaN,this.unit=""),dNe.includes(r)&&(this.num=fNe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new dl(NaN,""):new dl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new dl(NaN,""):new dl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new dl(NaN,""):new dl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new dl(NaN,""):new dl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Pc(this.num)}}function CX(e){if(e.includes(Ap))return Ap;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=jL.exec(t))!==null&&r!==void 0?r:[],i=dl.parse(n??""),o=dl.parse(a??""),c=s==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return Ap;t=t.replace(jL,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=PL.exec(t))!==null&&u!==void 0?u:[],g=dl.parse(d??""),p=dl.parse(h??""),y=f==="+"?g.add(p):g.subtract(p);if(y.isNaN())return Ap;t=t.replace(PL,y.toString())}return t}var FL=/\(([^()]*)\)/;function hNe(e){for(var t=e,r;(r=FL.exec(t))!=null;){var[,n]=r;t=t.replace(FL,CX(n))}return t}function mNe(e){var t=e.replace(/\s+/g,"");return t=hNe(t),t=CX(t),t}function gNe(e){try{return mNe(e)}catch{return Ap}}function Sk(e){var t=gNe(e.slice(5,-1));return t===Ap?"":t}var pNe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],xNe=["dx","dy","angle","className","breakAll"];function W8(){return W8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W8.apply(null,arguments)}function ML(e,t){if(e==null)return{};var r,n,s=yNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TX=/[ \f\n\r\t\v\u2028\u2029]+/,NX=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];ji(t)||(r?s=t.toString().split(""):s=t.toString().split(TX));var a=s.map(o=>({word:o,width:hv(o,n).width})),i=r?0:hv("",n).width;return{wordsWithComputedWidth:a,spaceWidth:i}}catch{return null}},vNe=(e,t,r,n,s)=>{var{maxLines:a,children:i,style:o,breakAll:c}=e,u=gn(a),d=i,f=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce((V,Y)=>{var{word:re,width:te}=Y,ee=V[V.length-1];if(ee&&(n==null||s||ee.width+te+r<Number(n)))ee.words.push(re),ee.width+=te+r;else{var L={words:[re],width:te};V.push(L)}return V},[])},h=f(t),g=D=>D.reduce((B,V)=>B.width>V.width?B:V);if(!u||s)return h;var p=h.length>a||g(h).width>Number(n);if(!p)return h;for(var y="",v=D=>{var B=d.slice(0,D),V=NX({breakAll:c,style:o,children:B+y}).wordsWithComputedWidth,Y=f(V),re=Y.length>a||g(Y).width>Number(n);return[re,Y]},C=0,w=d.length-1,_=0,T;C<=w&&_<=d.length-1;){var E=Math.floor((C+w)/2),A=E-1,[F,j]=v(A),[P]=v(E);if(!F&&!P&&(C=E+1),F&&P&&(w=E-1),!F&&P){T=j;break}_++}return T||h},OL=e=>{var t=ji(e)?[]:e.toString().split(TX);return[{words:t}]},bNe=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:i}=e;if((t||r)&&!D1.isSsr){var o,c,u=NX({breakAll:a,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return OL(n);return vNe({breakAll:a,children:n,maxLines:i,style:s},o,c,t,r)}return OL(n)},DL="#808080",a9=S.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:a="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=DL}=e,d=ML(e,pNe),f=S.useMemo(()=>bNe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:g,angle:p,className:y,breakAll:v}=d,C=ML(d,xNe);if(!ad(r)||!ad(n)||f.length===0)return null;var w=r+(gn(h)?h:0),_=n+(gn(g)?g:0),T;switch(c){case"start":T=Sk("calc(".concat(a,")"));break;case"middle":T=Sk("calc(".concat((f.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:T=Sk("calc(".concat(f.length-1," * -").concat(s,")"));break}var E=[];if(i){var A=f[0].width,{width:F}=d;E.push("scale(".concat(gn(F)?F/A:1,")"))}return p&&E.push("rotate(".concat(p,", ").concat(w,", ").concat(_,")")),E.length&&(C.transform=E.join(" ")),S.createElement("text",W8({},no(C,!0),{ref:t,x:w,y:_,className:$s("recharts-text",y),textAnchor:o,fill:u.includes("url")?DL:u}),f.map((j,P)=>{var D=j.words.join(v?"":" ");return S.createElement("tspan",{x:w,dy:P===0?T:s,key:"".concat(D,"-").concat(P)},D)}))});a9.displayName="Text";var wNe=["labelRef"];function _Ne(e,t){if(e==null)return{};var r,n,s=SNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function SNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Aa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RL(Object(r),!0).forEach(function(n){kNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kNe(e,t,r){return(t=CNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CNe(e){var t=TNe(e,"string");return typeof t=="symbol"?t:t+""}function TNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qd(){return Qd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qd.apply(null,arguments)}var EX=S.createContext(null),NNe=e=>{var{x:t,y:r,width:n,height:s,children:a}=e,i=S.useMemo(()=>({x:t,y:r,width:n,height:s}),[t,r,n,s]);return S.createElement(EX.Provider,{value:i},a)},AX=()=>{var e=S.useContext(EX),t=oE();return e||t},ENe=S.createContext(null),ANe=()=>{var e=S.useContext(ENe),t=nn(uY);return e||t},jNe=e=>{var{value:t,formatter:r}=e,n=ji(e.children)?t:e.children;return typeof r=="function"?r(n):n},i9=e=>e!=null&&typeof e=="function",PNe=(e,t)=>{var r=_c(t-e),n=Math.min(Math.abs(t-e),360);return r*n},FNe=(e,t,r,n,s)=>{var{offset:a,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:g}=s,p=(u+d)/2,y=PNe(f,h),v=y>=0?1:-1,C,w;switch(t){case"insideStart":C=f+v*a,w=g;break;case"insideEnd":C=h-v*a,w=!g;break;case"end":C=h+v*a,w=g;break;default:throw new Error("Unsupported position ".concat(t))}w=y<=0?w:!w;var _=eo(o,c,p,C),T=eo(o,c,p,C+(w?1:-1)*359),E="M".concat(_.x,",").concat(_.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(w?0:1,`,
    `).concat(T.x,",").concat(T.y),A=ji(e.id)?Yv("recharts-radial-line-"):e.id;return S.createElement("text",Qd({},n,{dominantBaseline:"central",className:$s("recharts-radial-bar-label",i)}),S.createElement("defs",null,S.createElement("path",{id:A,d:E})),S.createElement("textPath",{xlinkHref:"#".concat(A)},r))},MNe=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=eo(n,s,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var h=(a+i)/2,{x:g,y:p}=eo(n,s,h,u);return{x:g,y:p,textAnchor:"middle",verticalAnchor:"middle"}},jX=e=>"cx"in e&&gn(e.cx),ONe=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!jX(r)&&(a=r);var{x:i,y:o,width:c,height:u}=t,d=u>=0?1:-1,f=d*n,h=d>0?"end":"start",g=d>0?"start":"end",p=c>=0?1:-1,y=p*n,v=p>0?"end":"start",C=p>0?"start":"end";if(s==="top"){var w={x:i+c/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h};return Aa(Aa({},w),a?{height:Math.max(o-a.y,0),width:c}:{})}if(s==="bottom"){var _={x:i+c/2,y:o+u+f,textAnchor:"middle",verticalAnchor:g};return Aa(Aa({},_),a?{height:Math.max(a.y+a.height-(o+u),0),width:c}:{})}if(s==="left"){var T={x:i-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"};return Aa(Aa({},T),a?{width:Math.max(T.x-a.x,0),height:u}:{})}if(s==="right"){var E={x:i+c+y,y:o+u/2,textAnchor:C,verticalAnchor:"middle"};return Aa(Aa({},E),a?{width:Math.max(a.x+a.width-E.x,0),height:u}:{})}var A=a?{width:c,height:u}:{};return s==="insideLeft"?Aa({x:i+y,y:o+u/2,textAnchor:C,verticalAnchor:"middle"},A):s==="insideRight"?Aa({x:i+c-y,y:o+u/2,textAnchor:v,verticalAnchor:"middle"},A):s==="insideTop"?Aa({x:i+c/2,y:o+f,textAnchor:"middle",verticalAnchor:g},A):s==="insideBottom"?Aa({x:i+c/2,y:o+u-f,textAnchor:"middle",verticalAnchor:h},A):s==="insideTopLeft"?Aa({x:i+y,y:o+f,textAnchor:C,verticalAnchor:g},A):s==="insideTopRight"?Aa({x:i+c-y,y:o+f,textAnchor:v,verticalAnchor:g},A):s==="insideBottomLeft"?Aa({x:i+y,y:o+u-f,textAnchor:C,verticalAnchor:h},A):s==="insideBottomRight"?Aa({x:i+c-y,y:o+u-f,textAnchor:v,verticalAnchor:h},A):s&&typeof s=="object"&&(gn(s.x)||cm(s.x))&&(gn(s.y)||cm(s.y))?Aa({x:i+th(s.x,c),y:o+th(s.y,u),textAnchor:"end",verticalAnchor:"end"},A):Aa({x:i+c/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},DNe={offset:5};function Ef(e){var t=Ic(e,DNe),{viewBox:r,position:n,value:s,children:a,content:i,className:o="",textBreakAll:c,labelRef:u}=t,d=ANe(),f=AX(),h=n==="center"?f:d??f,g=r||h;if(!g||ji(s)&&ji(a)&&!S.isValidElement(i)&&typeof i!="function")return null;var p=Aa(Aa({},t),{},{viewBox:g});if(S.isValidElement(i)){var{labelRef:y}=p,v=_Ne(p,wNe);return S.cloneElement(i,v)}var C;if(typeof i=="function"){if(C=S.createElement(i,p),S.isValidElement(C))return C}else C=jNe(t);var w=jX(g),_=no(t,!0);if(w&&(n==="insideStart"||n==="insideEnd"||n==="end"))return FNe(t,n,C,_,g);var T=w?MNe(g,t.offset,t.position):ONe(t,g);return S.createElement(a9,Qd({ref:u,className:$s("recharts-label",o)},_,T,{breakAll:c}),C)}Ef.displayName="Label";var RNe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?S.createElement(Ef,Qd({key:"label-implicit"},n)):ad(e)?S.createElement(Ef,Qd({key:"label-implicit",value:e},n)):S.isValidElement(e)?e.type===Ef?S.cloneElement(e,Aa({key:"label-implicit"},n)):S.createElement(Ef,Qd({key:"label-implicit",content:e},n)):i9(e)?S.createElement(Ef,Qd({key:"label-implicit",content:e},n)):e&&typeof e=="object"?S.createElement(Ef,Qd({},e,{key:"label-implicit"},n)):null};function INe(e){var{label:t}=e,r=AX();return RNe(t,r)||null}var kk={},Ck={},IL;function LNe(){return IL||(IL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Ck)),Ck}var Tk={},LL;function BNe(){return LL||(LL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Tk)),Tk}var BL;function $Ne(){return BL||(BL=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LNe(),r=BNe(),n=ZN();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(kk)),kk}var Nk,$L;function UNe(){return $L||($L=1,Nk=$Ne().last),Nk}var zNe=UNe();const WNe=Oc(zNe);var HNe=["valueAccessor"],GNe=["dataKey","clockWise","id","textBreakAll"];function j_(){return j_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j_.apply(null,arguments)}function UL(e,t){if(e==null)return{};var r,n,s=VNe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qNe=e=>Array.isArray(e.value)?WNe(e.value):e.value,PX=S.createContext(void 0),KNe=PX.Provider,FX=S.createContext(void 0);FX.Provider;function YNe(){return S.useContext(PX)}function XNe(){return S.useContext(FX)}function i4(e){var{valueAccessor:t=qNe}=e,r=UL(e,HNe),{dataKey:n,clockWise:s,id:a,textBreakAll:i}=r,o=UL(r,GNe),c=YNe(),u=XNe(),d=c||u;return!d||!d.length?null:S.createElement(O1,{className:"recharts-label-list"},d.map((f,h)=>{var g,p=ji(n)?t(f,h):Yo(f&&f.payload,n),y=ji(a)?{}:{id:"".concat(a,"-").concat(h)};return S.createElement(Ef,j_({},no(f,!0),o,y,{fill:(g=r.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:p,textBreakAll:i,viewBox:f.viewBox,key:"label-".concat(h),index:h}))}))}i4.displayName="LabelList";function JNe(e){var{label:t}=e;return t?t===!0?S.createElement(i4,{key:"labelList-implicit"}):S.isValidElement(t)||i9(t)?S.createElement(i4,{key:"labelList-implicit",content:t}):typeof t=="object"?S.createElement(i4,j_({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function H8(){return H8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H8.apply(null,arguments)}var MX=e=>{var{cx:t,cy:r,r:n,className:s}=e,a=$s("recharts-dot",s);return t===+t&&r===+r&&n===+n?S.createElement("circle",H8({},cg(e),JN(e),{className:a,cx:t,cy:r,r:n})):null},QNe={radiusAxis:{},angleAxis:{}},OX=Yl({name:"polarAxis",initialState:QNe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:uPe,removeRadiusAxis:dPe,addAngleAxis:fPe,removeAngleAxis:hPe}=OX.actions,ZNe=OX.reducer;function eEe(e){var{fn:t,args:r}=e,n=Zo(),s=Rc();return S.useEffect(()=>{if(!s){var a=t(r);return n(aTe(a)),()=>{n(iTe(a))}}},[t,r,n,s]),null}var tEe=()=>{};function rEe(e){var{legendPayload:t}=e,r=Zo(),n=Rc();return S.useEffect(()=>n?tEe:(r(KSe(t)),()=>{r(YSe(t))}),[r,n,t]),null}var Ek,nEe=()=>{var[e]=S.useState(()=>Yv("uid-"));return e},sEe=(Ek=oB.useId)!==null&&Ek!==void 0?Ek:nEe;function aEe(e,t){var r=sEe();return t||(e?"".concat(e,"-").concat(r):r)}var iEe=S.createContext(void 0),oEe=e=>{var{id:t,type:r,children:n}=e,s=aEe("recharts-".concat(r),t);return S.createElement(iEe.Provider,{value:s},n(s))},lEe={cartesianItems:[],polarItems:[]},DX=Yl({name:"graphicalItems",initialState:lEe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=c0(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=c0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=c0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:cEe,replaceCartesianGraphicalItem:uEe,removeCartesianGraphicalItem:dEe,addPolarGraphicalItem:mPe,removePolarGraphicalItem:gPe}=DX.actions,fEe=DX.reducer;function hEe(e){var t=Zo(),r=S.useRef(null);return S.useEffect(()=>{r.current===null?t(cEe(e)):r.current!==e&&t(uEe({prev:r.current,next:e})),r.current=e},[t,e]),S.useEffect(()=>()=>{r.current&&(t(dEe(r.current)),r.current=null)},[t]),null}function zL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zL(Object(r),!0).forEach(function(n){mEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mEe(e,t,r){return(t=gEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gEe(e){var t=pEe(e,"string");return typeof t=="symbol"?t:t+""}function pEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xEe={xAxis:{},yAxis:{},zAxis:{}},RX=Yl({name:"cartesianAxis",initialState:xEe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=WL(WL({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:yEe,removeXAxis:vEe,addYAxis:bEe,removeYAxis:wEe,addZAxis:pPe,removeZAxis:xPe,updateYAxisWidth:_Ee}=RX.actions,SEe=RX.reducer,kEe=Ut([so],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),CEe=Ut([kEe,P0,F0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),o9=()=>nn(CEe),TEe=()=>nn(YTe);function HL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HL(Object(r),!0).forEach(function(n){NEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NEe(e,t,r){return(t=EEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EEe(e){var t=AEe(e,"string");return typeof t=="symbol"?t:t+""}function AEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jEe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:a}=e;if(s===!1||t.x==null||t.y==null)return null;var i=GL(GL({index:r,dataKey:a,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},no(s,!1)),JN(s)),o;return S.isValidElement(s)?o=S.cloneElement(s,i):typeof s=="function"?o=s(i):o=S.createElement(MX,i),S.createElement(O1,{className:"recharts-active-dot"},o)};function PEe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,a=nn(s2),i=TEe();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return ji(o)?null:jEe({point:o,childIndex:Number(a),mainColor:r,dataKey:s,activeDot:n})}var FEe={},IX=Yl({name:"errorBars",initialState:FEe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:yPe,replaceErrorBar:vPe,removeErrorBar:bPe}=IX.actions,MEe=IX.reducer,OEe=["children"];function DEe(e,t){if(e==null)return{};var r,n,s=REe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function REe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var IEe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},LEe=S.createContext(IEe);function BEe(e){var{children:t}=e,r=DEe(e,OEe);return S.createElement(LEe.Provider,{value:r},t)}function LX(e,t){var r,n,s=nn(u=>O0(u,e)),a=nn(u=>D0(u,t)),i=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:jl.allowDataOverflow,o=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:Pl.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function $Ee(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=o9(),{needClipX:a,needClipY:i,needClip:o}=LX(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=s;return S.createElement("clipPath",{id:"clipPath-".concat(n)},S.createElement("rect",{x:a?c:c-d/2,y:i?u:u-f/2,width:a?d:d*2,height:i?f:f*2}))}var UEe=e=>{var{chartData:t}=e,r=Zo(),n=Rc();return S.useEffect(()=>n?()=>{}:(r(pL(t)),()=>{r(pL(void 0))}),[t,r,n]),null},VL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},BX=Yl({name:"brush",initialState:VL,reducers:{setBrushSettings(e,t){return t.payload==null?VL:t.payload}}}),{setBrushSettings:wPe}=BX.actions,zEe=BX.reducer;function WEe(e,t,r){return(t=HEe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HEe(e){var t=GEe(e,"string");return typeof t=="symbol"?t:t+""}function GEe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class l9{static create(t){return new l9(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}WEe(l9,"EPS",1e-4);function VEe(e){return(e%180+180)%180}var qEe=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=VEe(s),i=a*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},KEe={dots:[],areas:[],lines:[]},$X=Yl({name:"referenceElements",initialState:KEe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=c0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=c0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=c0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:_Pe,removeDot:SPe,addArea:kPe,removeArea:CPe,addLine:TPe,removeLine:NPe}=$X.actions,YEe=$X.reducer,XEe=S.createContext(void 0),JEe=e=>{var{children:t}=e,[r]=S.useState("".concat(Yv("recharts"),"-clip")),n=o9();if(n==null)return null;var{x:s,y:a,width:i,height:o}=n;return S.createElement(XEe.Provider,{value:r},S.createElement("defs",null,S.createElement("clipPath",{id:r},S.createElement("rect",{x:s,y:a,height:o,width:i}))),t)};function c1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function UX(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function QEe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return qEe(n,r)}function ZEe(e,t,r){var n=r==="width",{x:s,y:a,width:i,height:o}=e;return t===1?{start:n?s:a,end:n?s+i:a+o}:{start:n?s+i:a+o,end:n?s:a}}function P_(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function e9e(e,t){return UX(e,t+1)}function t9e(e,t,r,n,s){for(var a=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var p=n?.[c];if(p===void 0)return{v:UX(n,u)};var y=c,v,C=()=>(v===void 0&&(v=r(p,y)),v),w=p.coordinate,_=c===0||P_(e,w,C,d,o);_||(c=0,d=i,u+=1),_&&(d=w+e*(C()/2+s),c+=u)},h;u<=a.length;)if(h=f(),h)return h.v;return[]}function qL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qL(Object(r),!0).forEach(function(n){r9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r9e(e,t,r){return(t=n9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n9e(e){var t=s9e(e,"string");return typeof t=="symbol"?t:t+""}function s9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a9e(e,t,r,n,s){for(var a=(n||[]).slice(),i=a.length,{start:o}=t,{end:c}=t,u=function(h){var g=a[h],p,y=()=>(p===void 0&&(p=r(g,h)),p);if(h===i-1){var v=e*(g.coordinate+e*y()/2-c);a[h]=g=mo(mo({},g),{},{tickCoord:v>0?g.coordinate-v*e:g.coordinate})}else a[h]=g=mo(mo({},g),{},{tickCoord:g.coordinate});var C=P_(e,g.tickCoord,y,o,c);C&&(c=g.tickCoord-e*(y()/2+s),a[h]=mo(mo({},g),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return a}function i9e(e,t,r,n,s,a){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(a){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=mo(mo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var g=P_(e,d.tickCoord,()=>f,c,u);g&&(u=d.tickCoord-e*(f/2+s),i[o-1]=mo(mo({},d),{},{isShow:!0}))}for(var p=a?o-1:o,y=function(w){var _=i[w],T,E=()=>(T===void 0&&(T=r(_,w)),T);if(w===0){var A=e*(_.coordinate-e*E()/2-c);i[w]=_=mo(mo({},_),{},{tickCoord:A<0?_.coordinate-A*e:_.coordinate})}else i[w]=_=mo(mo({},_),{},{tickCoord:_.coordinate});var F=P_(e,_.tickCoord,E,c,u);F&&(c=_.tickCoord+e*(E()/2+s),i[w]=mo(mo({},_),{},{isShow:!0}))},v=0;v<p;v++)y(v);return i}function c9(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!s||!s.length||!n)return[];if(gn(c)||D1.isSsr){var h;return(h=e9e(s,gn(c)?c:0))!==null&&h!==void 0?h:[]}var g=[],p=o==="top"||o==="bottom"?"width":"height",y=d&&p==="width"?hv(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=(_,T)=>{var E=typeof u=="function"?u(_.value,T):_.value;return p==="width"?QEe(hv(E,{fontSize:t,letterSpacing:r}),y,f):hv(E,{fontSize:t,letterSpacing:r})[p]},C=s.length>=2?_c(s[1].coordinate-s[0].coordinate):1,w=ZEe(a,C,p);return c==="equidistantPreserveStart"?t9e(C,w,v,s,i):(c==="preserveStart"||c==="preserveStartEnd"?g=i9e(C,w,v,s,i,c==="preserveStartEnd"):g=a9e(C,w,v,s,i),g.filter(_=>_.isShow))}var o9e=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=s+a,u=i+c+o+(r?n:0);return Math.round(u)}return 0},l9e=["axisLine","width","height","className","hide","ticks"],c9e=["viewBox"],u9e=["viewBox"];function G8(e,t){if(e==null)return{};var r,n,s=d9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function d9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ym.apply(null,arguments)}function KL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KL(Object(r),!0).forEach(function(n){f9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f9e(e,t,r){return(t=h9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h9e(e){var t=m9e(e,"string");return typeof t=="symbol"?t:t+""}function m9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u9={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function g9e(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:i,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var u=ni(ni(ni({},c),no(o,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var d=+(a==="top"&&!i||a==="bottom"&&i);u=ni(ni({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var f=+(a==="left"&&!i||a==="right"&&i);u=ni(ni({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+s})}return S.createElement("line",Ym({},u,{className:$s("recharts-cartesian-axis-line",C3(o,"className"))}))}function p9e(e,t,r,n,s,a,i,o,c){var u,d,f,h,g,p,y=o?-1:1,v=e.tickSize||i,C=gn(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=d=e.coordinate,h=r+ +!o*s,f=h-y*v,p=f-y*c,g=C;break;case"left":f=h=e.coordinate,d=t+ +!o*n,u=d-y*v,g=u-y*c,p=C;break;case"right":f=h=e.coordinate,d=t+ +o*n,u=d+y*v,g=u+y*c,p=C;break;default:u=d=e.coordinate,h=r+ +o*s,f=h+y*v,p=f+y*c,g=C;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:g,y:p}}}function x9e(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function y9e(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function v9e(e){var{option:t,tickProps:r,value:n}=e,s,a=$s(r.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))s=S.cloneElement(t,ni(ni({},r),{},{className:a}));else if(typeof t=="function")s=t(ni(ni({},r),{},{className:a}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=$s(i,t?.className)),s=S.createElement(a9,Ym({},r,{className:i}),n)}return s}function b9e(e){var{ticks:t=[],tick:r,tickLine:n,stroke:s,tickFormatter:a,unit:i,padding:o,tickTextProps:c,orientation:u,mirror:d,x:f,y:h,width:g,height:p,tickSize:y,tickMargin:v,fontSize:C,letterSpacing:w,getTicksConfig:_,events:T}=e,E=c9(ni(ni({},_),{},{ticks:t}),C,w),A=x9e(u,d),F=y9e(u,d),j=cg(_),P=no(r,!1),D=ni(ni({},j),{},{fill:"none"},no(n,!1)),B=E.map((V,Y)=>{var{line:re,tick:te}=p9e(V,f,h,g,p,u,y,d,v),ee=ni(ni(ni(ni({textAnchor:A,verticalAnchor:F},j),{},{stroke:"none",fill:s},P),te),{},{index:Y,payload:V,visibleTicksCount:E.length,tickFormatter:a,padding:o},c);return S.createElement(O1,Ym({className:"recharts-cartesian-axis-tick",key:"tick-".concat(V.value,"-").concat(V.coordinate,"-").concat(V.tickCoord)},B4e(T,V,Y)),n&&S.createElement("line",Ym({},D,re,{className:$s("recharts-cartesian-axis-tick-line",C3(n,"className"))})),r&&S.createElement(v9e,{option:r,tickProps:ee,value:"".concat(typeof a=="function"?a(V.value,Y):V.value).concat(i||"")}))});return B.length>0?S.createElement("g",{className:"recharts-cartesian-axis-ticks"},B):null}var w9e=S.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:i,ticks:o}=e,c=G8(e,l9e),[u,d]=S.useState(""),[f,h]=S.useState(""),g=S.useRef([]);S.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return o9e({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var p=S.useCallback(y=>{if(y){var v=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=Array.from(v);var C=v[0];if(C){var w=window.getComputedStyle(C),_=w.fontSize,T=w.letterSpacing;(_!==u||T!==f)&&(d(_),h(T))}}},[u,f]);return i||n!=null&&n<=0||s!=null&&s<=0?null:S.createElement(O1,{className:$s("recharts-cartesian-axis",a),ref:p},S.createElement(g9e,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:cg(e)}),S.createElement(b9e,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:u,letterSpacing:f,getTicksConfig:e,events:c}),S.createElement(NNe,{x:e.x,y:e.y,width:e.width,height:e.height},S.createElement(INe,{label:e.label}),e.children))}),_9e=S.memo(w9e,(e,t)=>{var{viewBox:r}=e,n=G8(e,c9e),{viewBox:s}=t,a=G8(t,u9e);return c1(r,s)&&c1(n,a)}),d9=S.forwardRef((e,t)=>{var r=Ic(e,u9);return S.createElement(_9e,Ym({},r,{ref:t}))});d9.displayName="CartesianAxis";var S9e=["x1","y1","x2","y2","key"],k9e=["offset"],C9e=["xAxisId","yAxisId"],T9e=["xAxisId","yAxisId"];function YL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YL(Object(r),!0).forEach(function(n){N9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N9e(e,t,r){return(t=E9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E9e(e){var t=A9e(e,"string");return typeof t=="symbol"?t:t+""}function A9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fm.apply(null,arguments)}function F_(e,t){if(e==null)return{};var r,n,s=j9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function j9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var P9e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:a,height:i,ry:o}=e;return S.createElement("rect",{x:n,y:s,ry:o,width:a,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function zX(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:a,y2:i,key:o}=t,c=F_(t,S9e),u=cg(c),{offset:d}=u,f=F_(u,k9e);r=S.createElement("line",fm({},f,{x1:n,y1:s,x2:a,y2:i,fill:"none",key:o}))}return r}function F9e(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=F_(e,C9e),c=s.map((u,d)=>{var f=yo(yo({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return zX(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function M9e(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:a,yAxisId:i}=e,o=F_(e,T9e),c=s.map((u,d)=>{var f=yo(yo({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return zX(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function O9e(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:a,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],p=g?s+i-f:u[h+1]-f;if(p<=0)return null;var y=h%t.length;return S.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:p,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function D9e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:a,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+s-s)).sort((f,h)=>f-h);s!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var g=!u[h+1],p=g?s+i-f:u[h+1]-f;if(p<=0)return null;var y=h%r.length;return S.createElement("rect",{key:"react-".concat(h),x:f,y:a,width:p,height:o,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var R9e=(e,t)=>{var{xAxis:r,width:n,height:s,offset:a}=e;return Vq(c9(yo(yo(yo({},u9),r),{},{ticks:qq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},I9e=(e,t)=>{var{yAxis:r,width:n,height:s,offset:a}=e;return Vq(c9(yo(yo(yo({},u9),r),{},{ticks:qq(r),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},L9e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function WX(e){var t=Qq(),r=Zq(),n=Jq(),s=yo(yo({},Ic(e,L9e)),{},{x:gn(e.x)?e.x:n.left,y:gn(e.y)?e.y:n.top,width:gn(e.width)?e.width:n.width,height:gn(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:g}=s,p=Rc(),y=nn(P=>oL(P,"xAxis",a,p)),v=nn(P=>oL(P,"yAxis",i,p));if(!gn(u)||u<=0||!gn(d)||d<=0||!gn(o)||o!==+o||!gn(c)||c!==+c)return null;var C=s.verticalCoordinatesGenerator||R9e,w=s.horizontalCoordinatesGenerator||I9e,{horizontalPoints:_,verticalPoints:T}=s;if((!_||!_.length)&&typeof w=="function"){var E=h&&h.length,A=w({yAxis:v?yo(yo({},v),{},{ticks:E?h:v.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);fv(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof A,"]")),Array.isArray(A)&&(_=A)}if((!T||!T.length)&&typeof C=="function"){var F=g&&g.length,j=C({xAxis:y?yo(yo({},y),{},{ticks:F?g:y.ticks}):void 0,width:t,height:r,offset:n},F?!0:f);fv(Array.isArray(j),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(T=j)}return S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(P9e,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),S.createElement(O9e,fm({},s,{horizontalPoints:_})),S.createElement(D9e,fm({},s,{verticalPoints:T})),S.createElement(F9e,fm({},s,{offset:n,horizontalPoints:_,xAxis:y,yAxis:v})),S.createElement(M9e,fm({},s,{offset:n,verticalPoints:T,xAxis:y,yAxis:v})))}WX.displayName="CartesianGrid";var HX=(e,t,r,n)=>XY(e,"xAxis",t,n),GX=(e,t,r,n)=>YY(e,"xAxis",t,n),VX=(e,t,r,n)=>XY(e,"yAxis",r,n),qX=(e,t,r,n)=>YY(e,"yAxis",r,n),B9e=Ut([Us,HX,VX,GX,qX],(e,t,r,n,s)=>hh(e,"xAxis")?_8(t,n,!1):_8(r,s,!1)),$9e=(e,t,r,n,s)=>s;function U9e(e){return e.type==="line"}var z9e=Ut([yY,$9e],(e,t)=>e.filter(U9e).find(r=>r.id===t)),W9e=Ut([Us,HX,VX,GX,qX,z9e,B9e,FE],(e,t,r,n,s,a,i,o)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=o;if(!(a==null||t==null||r==null||n==null||s==null||n.length===0||s.length===0||i==null)){var{dataKey:f,data:h}=a,g;if(h!=null&&h.length>0?g=h:g=c?.slice(u,d+1),g!=null)return dAe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:i,displayedData:g})}}),H9e=["id"],G9e=["type","layout","connectNulls","needClip"],V9e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function XL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Il(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XL(Object(r),!0).forEach(function(n){q9e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q9e(e,t,r){return(t=K9e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K9e(e){var t=Y9e(e,"string");return typeof t=="symbol"?t:t+""}function Y9e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f9(e,t){if(e==null)return{};var r,n,s=X9e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function X9e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Xm(){return Xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xm.apply(null,arguments)}var J9e=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:Kq(r,t),payload:e}]};function Q9e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:a,name:i,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:a,dataKey:t,nameKey:void 0,name:Kq(i,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var KX=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Z9e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}var eAe=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return KX(t,e);for(var s=Math.floor(e/n),a=e%n,i=t-e,o=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>a){o=[...r.slice(0,c),a-u];break}var d=o.length%2===0?[0,i]:[i];return[...Z9e(r,s),...o,...d].map(f=>"".concat(f,"px")).join(", ")};function tAe(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=$s("recharts-line-dot",typeof e!="boolean"?e.className:"");r=S.createElement(MX,Xm({},t,{className:n}))}return r}function rAe(e,t){return e==null?!1:t?!0:e.length===1}function nAe(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:a,needClip:i}=n;if(!rAe(r,s))return null;var{id:o}=n,c=f9(n,H9e),u=qV(s),d=cg(c),f=no(s,!0),h=r.map((p,y)=>{var v=Il(Il(Il({key:"dot-".concat(y),r:3},d),f),{},{index:y,cx:p.x,cy:p.y,dataKey:a,value:p.value,payload:p.payload,points:r});return tAe(s,v)}),g={clipPath:i?"url(#clipPath-".concat(u?"":"dots-").concat(t,")"):void 0};return S.createElement(O1,Xm({className:"recharts-line-dots",key:"dots"},g),h)}function sAe(e){var{showLabels:t,children:r,points:n}=e,s=S.useMemo(()=>n?.map(a=>{var i={x:a.x,y:a.y,width:0,height:0};return Il(Il({},i),{},{value:a.value,payload:a.payload,viewBox:i,parentViewBox:void 0,fill:void 0})}),[n]);return S.createElement(KNe,{value:t?s:null},r)}function JL(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:a}=e,{type:i,layout:o,connectNulls:c,needClip:u}=a,d=f9(a,G9e),f=Il(Il({},no(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:i,layout:o,connectNulls:c,strokeDasharray:s??a.strokeDasharray});return S.createElement(S.Fragment,null,n?.length>1&&S.createElement(rK,Xm({},f,{pathRef:r})),S.createElement(nAe,{points:n,clipPathId:t,props:a}))}function aAe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function iAe(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:a}=e,{points:i,strokeDasharray:o,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:g,height:p,onAnimationEnd:y,onAnimationStart:v}=r,C=s.current,w=oK(r,"recharts-line-"),[_,T]=S.useState(!1),E=!_,A=S.useCallback(()=>{typeof y=="function"&&y(),T(!1)},[y]),F=S.useCallback(()=>{typeof v=="function"&&v(),T(!0)},[v]),j=aAe(n.current),P=a.current;return S.createElement(sAe,{points:i,showLabels:E},r.children,S.createElement(iK,{animationId:w,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:A,onAnimationStart:F,key:w},D=>{var B=Xd(P,j+P,D),V=Math.min(B,j),Y;if(c)if(o){var re="".concat(o).split(/[,\s]+/gim).map(L=>parseFloat(L));Y=eAe(V,j,re)}else Y=KX(j,V);else Y=o==null?void 0:String(o);if(C){var te=C.length/i.length,ee=D===1?i:i.map((L,Q)=>{var U=Math.floor(Q*te);if(C[U]){var G=C[U];return Il(Il({},L),{},{x:Xd(G.x,L.x,D),y:Xd(G.y,L.y,D)})}return h?Il(Il({},L),{},{x:Xd(g*2,L.x,D),y:Xd(p/2,L.y,D)}):Il(Il({},L),{},{x:L.x,y:L.y})});return s.current=ee,S.createElement(JL,{props:r,points:ee,clipPathId:t,pathRef:n,strokeDasharray:Y})}return D>0&&j>0&&(s.current=i,a.current=V),S.createElement(JL,{props:r,points:i,clipPathId:t,pathRef:n,strokeDasharray:Y})}),S.createElement(JNe,{label:r.label}))}function oAe(e){var{clipPathId:t,props:r}=e,n=S.useRef(null),s=S.useRef(0),a=S.useRef(null);return S.createElement(iAe,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:a})}var lAe=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:Yo(e.payload,t)});class cAe extends S.Component{render(){var t,{hide:r,dot:n,points:s,className:a,xAxisId:i,yAxisId:o,top:c,left:u,width:d,height:f,id:h,needClip:g}=this.props;if(r)return null;var p=$s("recharts-line",a),y=h,{r:v=3,strokeWidth:C=2}=(t=no(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=qV(n),_=v*2+C;return S.createElement(S.Fragment,null,S.createElement(O1,{className:p},g&&S.createElement("defs",null,S.createElement($Ee,{clipPathId:y,xAxisId:i,yAxisId:o}),!w&&S.createElement("clipPath",{id:"clipPath-dots-".concat(y)},S.createElement("rect",{x:u-_/2,y:c-_/2,width:d+_,height:f+_}))),S.createElement(BEe,{xAxisId:i,yAxisId:o,data:s,dataPointFormatter:lAe,errorBarOffset:0},S.createElement(oAe,{props:this.props,clipPathId:y}))),S.createElement(PEe,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var YX={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!D1.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function uAe(e){var t=Ic(e,YX),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,connectNulls:o,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:g,yAxisId:p,id:y}=t,v=f9(t,V9e),{needClip:C}=LX(g,p),w=o9(),_=lE(),T=Rc(),E=nn(D=>W9e(D,g,p,T,y));if(_!=="horizontal"&&_!=="vertical"||E==null||w==null)return null;var{height:A,width:F,x:j,y:P}=w;return S.createElement(cAe,Xm({},v,{id:y,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:a,animationEasing:i,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:g,yAxisId:p,points:E,layout:_,height:A,width:F,left:j,top:P,needClip:C}))}function dAe(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataKey:i,bandSize:o,displayedData:c}=e;return c.map((u,d)=>{var f=Yo(u,i);if(t==="horizontal"){var h=VR({axis:r,ticks:s,bandSize:o,entry:u,index:d}),g=ji(f)?null:n.scale(f);return{x:h,y:g,value:f,payload:u}}var p=ji(f)?null:r.scale(f),y=VR({axis:n,ticks:a,bandSize:o,entry:u,index:d});return p==null||y==null?null:{x:p,y,value:f,payload:u}}).filter(Boolean)}function fAe(e){var t=Ic(e,YX),r=Rc();return S.createElement(oEe,{id:t.id,type:"line"},n=>S.createElement(S.Fragment,null,S.createElement(rEe,{legendPayload:J9e(t)}),S.createElement(eEe,{fn:Q9e,args:t}),S.createElement(hEe,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),S.createElement(uAe,Xm({},t,{id:n}))))}var XX=S.memo(fAe);XX.displayName="Line";var hAe=["dangerouslySetInnerHTML","ticks"],mAe=["id"],gAe=["domain"],pAe=["domain"];function V8(){return V8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V8.apply(null,arguments)}function M_(e,t){if(e==null)return{};var r,n,s=xAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yAe(e){var t=Zo();return S.useEffect(()=>(t(yEe(e)),()=>{t(vEe(e))}),[e,t]),null}var vAe=e=>{var{xAxisId:t,className:r}=e,n=nn(Xq),s=Rc(),a="xAxis",i=nn(v=>U1(v,a,t,s)),o=nn(v=>KY(v,a,t,s)),c=nn(v=>z8e(v,t)),u=nn(v=>K8e(v,t)),d=nn(v=>mY(v,t));if(c==null||u==null||d==null)return null;var{dangerouslySetInnerHTML:f,ticks:h}=e,g=M_(e,hAe),{id:p}=d,y=M_(d,mAe);return S.createElement(d9,V8({},g,y,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:$s("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o}))},bAe={allowDataOverflow:jl.allowDataOverflow,allowDecimals:jl.allowDecimals,allowDuplicatedCategory:jl.allowDuplicatedCategory,height:jl.height,hide:!1,mirror:jl.mirror,orientation:jl.orientation,padding:jl.padding,reversed:jl.reversed,scale:jl.scale,tickCount:jl.tickCount,type:jl.type,xAxisId:0},wAe=e=>{var t,r,n,s,a,i=Ic(e,bAe);return S.createElement(S.Fragment,null,S.createElement(yAe,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.xAxisId,scale:i.scale,type:i.type,padding:i.padding,allowDataOverflow:i.allowDataOverflow,domain:i.domain,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,height:i.height,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),S.createElement(vAe,i))},_Ae=(e,t)=>{var{domain:r}=e,n=M_(e,gAe),{domain:s}=t,a=M_(t,pAe);return c1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:c1({domain:r},{domain:s}):!1},JX=S.memo(wAe,_Ae);JX.displayName="XAxis";var SAe=["dangerouslySetInnerHTML","ticks"],kAe=["id"],CAe=["domain"],TAe=["domain"];function q8(){return q8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q8.apply(null,arguments)}function O_(e,t){if(e==null)return{};var r,n,s=NAe(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NAe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function EAe(e){var t=Zo();return S.useEffect(()=>(t(bEe(e)),()=>{t(wEe(e))}),[e,t]),null}var AAe=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=S.useRef(null),i=S.useRef(null),o=nn(Xq),c=Rc(),u=Zo(),d="yAxis",f=nn(E=>U1(E,d,t,c)),h=nn(E=>J8e(E,t)),g=nn(E=>X8e(E,t)),p=nn(E=>KY(E,d,t,c)),y=nn(E=>gY(E,t));if(S.useLayoutEffect(()=>{if(!(n!=="auto"||!h||i9(s)||S.isValidElement(s)||y==null)){var E=a.current;if(E){var A=E.getCalculatedWidth();Math.round(h.width)!==Math.round(A)&&u(_Ee({id:t,width:A}))}}},[p,h,u,s,t,n,y]),h==null||g==null||y==null)return null;var{dangerouslySetInnerHTML:v,ticks:C}=e,w=O_(e,SAe),{id:_}=y,T=O_(y,kAe);return S.createElement(d9,q8({},w,T,{ref:a,labelRef:i,scale:f,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:$s("recharts-".concat(d," ").concat(d),r),viewBox:o,ticks:p}))},jAe={allowDataOverflow:Pl.allowDataOverflow,allowDecimals:Pl.allowDecimals,allowDuplicatedCategory:Pl.allowDuplicatedCategory,hide:!1,mirror:Pl.mirror,orientation:Pl.orientation,padding:Pl.padding,reversed:Pl.reversed,scale:Pl.scale,tickCount:Pl.tickCount,type:Pl.type,width:Pl.width,yAxisId:0},PAe=e=>{var t,r,n,s,a,i=Ic(e,jAe);return S.createElement(S.Fragment,null,S.createElement(EAe,{interval:(t=i.interval)!==null&&t!==void 0?t:"preserveEnd",id:i.yAxisId,scale:i.scale,type:i.type,domain:i.domain,allowDataOverflow:i.allowDataOverflow,dataKey:i.dataKey,allowDuplicatedCategory:i.allowDuplicatedCategory,allowDecimals:i.allowDecimals,tickCount:i.tickCount,padding:i.padding,includeHidden:(r=i.includeHidden)!==null&&r!==void 0?r:!1,reversed:i.reversed,ticks:i.ticks,width:i.width,orientation:i.orientation,mirror:i.mirror,hide:i.hide,unit:i.unit,name:i.name,angle:(n=i.angle)!==null&&n!==void 0?n:0,minTickGap:(s=i.minTickGap)!==null&&s!==void 0?s:5,tick:(a=i.tick)!==null&&a!==void 0?a:!0,tickFormatter:i.tickFormatter}),S.createElement(AAe,i))},FAe=(e,t)=>{var{domain:r}=e,n=O_(e,CAe),{domain:s}=t,a=O_(t,TAe);return c1(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:c1({domain:r},{domain:s}):!1},QX=S.memo(PAe,FAe);QX.displayName="YAxis";var Ak={exports:{}},jk={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QL;function MAe(){if(QL)return jk;QL=1;var e=Jm();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return jk.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var g=s(null);if(g.current===null){var p={hasValue:!1,value:null};g.current=p}else p=g.current;g=i(function(){function v(E){if(!C){if(C=!0,w=E,E=f(E),h!==void 0&&p.hasValue){var A=p.value;if(h(A,E))return _=A}return _=E}if(A=_,r(w,E))return A;var F=f(E);return h!==void 0&&h(A,F)?(w=E,A):(w=E,_=F)}var C=!1,w,_,T=d===void 0?null:d;return[function(){return v(u())},T===null?void 0:function(){return v(T())}]},[u,d,f,h]);var y=n(c,g[0],g[1]);return a(function(){p.hasValue=!0,p.value=y},[y]),o(y),y},jk}var ZL;function OAe(){return ZL||(ZL=1,Ak.exports=MAe()),Ak.exports}OAe();function DAe(e){e()}function RAe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){DAe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var eB={notify(){},get:()=>[]};function IAe(e,t){let r,n=eB,s=0,a=!1;function i(y){d();const v=n.subscribe(y);let C=!1;return()=>{C||(C=!0,v(),f())}}function o(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return a}function d(){s++,r||(r=e.subscribe(c),n=RAe())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=eB)}function h(){a||(a=!0,d())}function g(){a&&(a=!1,f())}const p={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:g,getListeners:()=>n};return p}var LAe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BAe=LAe(),$Ae=()=>typeof navigator<"u"&&navigator.product==="ReactNative",UAe=$Ae(),zAe=()=>BAe||UAe?S.useLayoutEffect:S.useEffect,WAe=zAe(),HAe=Symbol.for("react-redux-context"),GAe=typeof globalThis<"u"?globalThis:{};function VAe(){if(!S.createContext)return{};const e=GAe[HAe]??=new Map;let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var qAe=VAe();function KAe(e){const{children:t,context:r,serverState:n,store:s}=e,a=S.useMemo(()=>{const c=IAe(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),i=S.useMemo(()=>s.getState(),[s]);WAe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,i]);const o=r||qAe;return S.createElement(o.Provider,{value:a},t)}var YAe=KAe,XAe=(e,t)=>t,h9=Ut([XAe,Us,uY,hi,uX,R0,r7e,so],o7e),m9=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},ZX=Fc("mouseClick"),eJ=L2();eJ.startListening({actionCreator:ZX,effect:(e,t)=>{var r=e.payload,n=h9(t.getState(),m9(r));n?.activeIndex!=null&&t.dispatch(cTe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var K8=Fc("mouseMove"),tJ=L2();tJ.startListening({actionCreator:K8,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=XE(n,n.tooltip.settings.shared),a=h9(n,m9(r));s==="axis"&&(a?.activeIndex!=null?t.dispatch(nX({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(rX()))}});var tB={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},rJ=Yl({name:"rootProps",initialState:tB,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:tB.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),JAe=rJ.reducer,{updateOptions:QAe}=rJ.actions,nJ=Yl({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:EPe}=nJ.actions,ZAe=nJ.reducer,sJ=Fc("keyDown"),aJ=Fc("focus"),g9=L2();g9.startListening({actionCreator:sJ,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var i=Number(JE(s,W1(r))),o=R0(r);if(a==="Enter"){var c=A_(r,"axis","hover",String(s.index));t.dispatch($8({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var u=tTe(r),d=u==="left-to-right"?1:-1,f=a==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var g=A_(r,"axis","hover",String(h));t.dispatch($8({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});g9.startListening({actionCreator:aJ,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",i=A_(r,"axis","hover",String(a));t.dispatch($8({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:i}))}}}});var mc=Fc("externalEvent"),iJ=L2();iJ.startListening({actionCreator:mc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:VTe(r),activeDataKey:HTe(r),activeIndex:s2(r),activeLabel:hX(r),activeTooltipIndex:s2(r),isTooltipActive:qTe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var eje=Ut([z1],e=>e.tooltipItemPayloads),tje=Ut([eje,K2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(o=>o.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var i=t(a,r);return i}}}),oJ=Fc("touchMove"),lJ=L2();lJ.startListening({actionCreator:oJ,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=XE(n,n.tooltip.settings.shared);if(s==="axis"){var a=h9(n,m9({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));a?.activeIndex!=null&&t.dispatch(nX({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(OSe),d=(i=c.getAttribute(DSe))!==null&&i!==void 0?i:void 0,f=tje(t.getState(),u,d);t.dispatch(lTe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var rje=_q({brush:zEe,cartesianAxis:SEe,chartData:k7e,errorBars:MEe,graphicalItems:fEe,layout:iSe,legend:XSe,options:v7e,polarAxis:ZNe,polarOptions:ZAe,referenceElements:YEe,rootProps:JAe,tooltip:uTe}),nje=function(t){return P3e({reducer:rje,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([eJ.middleware,tJ.middleware,g9.middleware,iJ.middleware,lJ.middleware]),devTools:D1.devToolsEnabled})};function sje(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Rc(),a=S.useRef(null);if(s)return r;a.current==null&&(a.current=nje(t));var i=tE;return S.createElement(YAe,{context:i,store:a.current},r)}function aje(e){var{layout:t,width:r,height:n,margin:s}=e,a=Zo(),i=Rc();return S.useEffect(()=>{i||(a(nSe(t)),a(sSe({width:r,height:n})),a(rSe(s)))},[a,i,t,r,n,s]),null}function ije(e){var t=Zo();return S.useEffect(()=>{t(QAe(e))},[t,e]),null}var oje=["children"];function lje(e,t){if(e==null)return{};var r,n,s=cje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function D_(){return D_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D_.apply(null,arguments)}var uje={width:"100%",height:"100%"},dje=S.forwardRef((e,t)=>{var r=Qq(),n=Zq(),s=tK();if(!h_(r)||!h_(n))return null;var{children:a,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=s?0:void 0,typeof i.role=="string"?d=i.role:d=s?"application":void 0,S.createElement(KV,D_({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:uje,ref:t}),a)}),fje=e=>{var{children:t}=e,r=nn(I3);if(!r)return null;var{width:n,height:s,y:a,x:i}=r;return S.createElement(KV,{width:n,height:s,x:i,y:a},t)},rB=S.forwardRef((e,t)=>{var{children:r}=e,n=lje(e,oje),s=Rc();return s?S.createElement(fje,null,r):S.createElement(dje,D_({ref:t},n),r)});function hje(){var e=Zo(),[t,r]=S.useState(null),n=nn(MSe);return S.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;pu(a)&&a!==n&&e(aSe(a))}},[t,e,n]),r}function nB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mje(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nB(Object(r),!0).forEach(function(n){gje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nB(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gje(e,t,r){return(t=pje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pje(e){var t=xje(e,"string");return typeof t=="symbol"?t:t+""}function xje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yje=S.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:g,onTouchMove:p,onTouchStart:y,style:v,width:C}=e,w=Zo(),[_,T]=S.useState(null),[E,A]=S.useState(null);M7e();var F=hje(),j=S.useCallback(M=>{F(M),typeof t=="function"&&t(M),T(M),A(M)},[F,t,T,A]),P=S.useCallback(M=>{w(ZX(M)),w(mc({handler:a,reactEvent:M}))},[w,a]),D=S.useCallback(M=>{w(K8(M)),w(mc({handler:u,reactEvent:M}))},[w,u]),B=S.useCallback(M=>{w(rX()),w(mc({handler:d,reactEvent:M}))},[w,d]),V=S.useCallback(M=>{w(K8(M)),w(mc({handler:f,reactEvent:M}))},[w,f]),Y=S.useCallback(()=>{w(aJ())},[w]),re=S.useCallback(M=>{w(sJ(M.key))},[w]),te=S.useCallback(M=>{w(mc({handler:i,reactEvent:M}))},[w,i]),ee=S.useCallback(M=>{w(mc({handler:o,reactEvent:M}))},[w,o]),L=S.useCallback(M=>{w(mc({handler:c,reactEvent:M}))},[w,c]),Q=S.useCallback(M=>{w(mc({handler:h,reactEvent:M}))},[w,h]),U=S.useCallback(M=>{w(mc({handler:y,reactEvent:M}))},[w,y]),G=S.useCallback(M=>{w(oJ(M)),w(mc({handler:p,reactEvent:M}))},[w,p]),W=S.useCallback(M=>{w(mc({handler:g,reactEvent:M}))},[w,g]);return S.createElement(vX.Provider,{value:_},S.createElement(K4e.Provider,{value:E},S.createElement("div",{className:$s("recharts-wrapper",n),style:mje({position:"relative",cursor:"default",width:C,height:s},v),onClick:P,onContextMenu:te,onDoubleClick:ee,onFocus:Y,onKeyDown:re,onMouseDown:L,onMouseEnter:D,onMouseLeave:B,onMouseMove:V,onMouseUp:Q,onTouchEnd:W,onTouchMove:G,onTouchStart:U,ref:j},r)))}),vje=["children","className","width","height","style","compact","title","desc"];function bje(e,t){if(e==null)return{};var r,n,s=wje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _je=S.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:a,style:i,compact:o,title:c,desc:u}=e,d=bje(e,vje),f=cg(d);return o?S.createElement(rB,{otherAttributes:f,title:c,desc:u},r):S.createElement(yje,{className:n,style:i,width:s,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement(rB,{otherAttributes:f,title:c,desc:u,ref:t},S.createElement(JEe,null,r)))}),Sje=["width","height"];function Y8(){return Y8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y8.apply(null,arguments)}function kje(e,t){if(e==null)return{};var r,n,s=Cje(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Cje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Tje={top:5,right:5,bottom:5,left:5},Nje={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Tje,reverseStackOrder:!1,syncMethod:"index"},Eje=S.forwardRef(function(t,r){var n,s=Ic(t.categoricalChartProps,Nje),{width:a,height:i}=s,o=kje(s,Sje);if(!h_(a)||!h_(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,g={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return S.createElement(sje,{preloadedState:{options:g},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},S.createElement(UEe,{chartData:h.data}),S.createElement(aje,{width:a,height:i,layout:s.layout,margin:s.margin}),S.createElement(ije,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),S.createElement(_je,Y8({},o,{width:a,height:i,ref:r})))}),Aje=["axis"],jje=S.forwardRef((e,t)=>S.createElement(Eje,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Aje,tooltipPayloadSearcher:x7e,categoricalChartProps:e,ref:t}));const Pje=({data:e=[],loading:t=!1,error:r=null})=>{if(t)return l.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:l.jsx("div",{className:"spinner-border text-primary",role:"status",children:l.jsx("span",{className:"visually-hidden",children:"Loading..."})})});if(r)return l.jsxs("div",{className:"alert alert-danger",role:"alert",children:[l.jsx("h5",{className:"alert-heading",children:"Error Loading Performance Data"}),l.jsx("p",{children:r})]});if(!e||e.length===0)return l.jsx("div",{className:"text-center text-muted",style:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{children:[l.jsx("h5",{children:"No Test Data Available"}),l.jsx("p",{children:"No tests have been completed yet for the current term."})]})});const n=e.map(s=>({testName:s.test_name,testDate:s.submitted_at,averageScore:parseFloat(s.average_score),totalStudents:s.total_students,testId:s.test_id}));return l.jsxs("div",{className:"test-performance-graph",children:[l.jsx("div",{style:{width:"100%",height:"400px"},children:l.jsx(J7e,{children:l.jsxs(jje,{data:n,margin:{top:20,right:30,left:20,bottom:20},children:[l.jsx(WX,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),l.jsx(JX,{dataKey:"testDate",tickFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}),stroke:"#666",fontSize:12}),l.jsx(QX,{domain:[0,100],tickFormatter:s=>`${s}%`,stroke:"#666",fontSize:12}),l.jsx(U7e,{formatter:(s,a)=>[`${parseFloat(s).toFixed(1)}%`,"Average Score"],labelFormatter:s=>{const a=n.find(i=>i.testDate===s);if(a){const i=new Date(s);return`${a.testName} (${i.toLocaleDateString("en-US",{month:"long",day:"numeric"})})`}return s},contentStyle:{backgroundColor:"#fff",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),l.jsx(XX,{type:"monotone",dataKey:"averageScore",stroke:"#007bff",strokeWidth:3,connectNulls:!0,dot:{r:6,fill:"#007bff",stroke:"#fff",strokeWidth:2},activeDot:{r:8,fill:"#ff6b35",stroke:"#fff",strokeWidth:2}})]})})}),l.jsx("div",{className:"mt-3",children:l.jsxs("div",{className:"row",children:[l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Total Tests: "}),l.jsx("strong",{children:n.length})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Average Score: "}),l.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(i=>i.averageScore!==null&&i.averageScore!==void 0&&!isNaN(i.averageScore));return s.length===0?"N/A":`${(s.reduce((i,o)=>i+o.averageScore,0)/s.length).toFixed(1)}%`})():"N/A"})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Best Test: "}),l.jsx("strong",{children:n.length>0?(()=>{const s=n.filter(a=>a.averageScore!==null&&a.averageScore!==void 0&&!isNaN(a.averageScore));return s.length===0?"N/A":s.reduce((a,i)=>i.averageScore>a.averageScore?i:a).testName})():"N/A"})]})}),l.jsx("div",{className:"col-md-3",children:l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"text-muted",children:"Latest Test: "}),l.jsx("strong",{children:n.length>0?n[n.length-1].testName:"N/A"})]})})]})})]})},sB=({onBackToLogin:e})=>{const t=Xo(),{user:r,isAuthenticated:n,logout:s,getCurrentTeacherUsername:a}=Fs(),{teacherData:i,loadTeacherData:o}=m3(),{activeTests:c,loadActiveTests:u}=N2(),{showNotification:d,notifications:f,removeNotification:h}=di(),[g,p]=S.useState(!0),[y,v]=S.useState(""),[C,w]=S.useState("main"),[_,T]=S.useState([]),[E,A]=S.useState([]),[F,j]=S.useState(null),[P,D]=S.useState(null),[B,V]=S.useState(null),[Y,re]=S.useState(!1),[te,ee]=S.useState(!1),[L,Q]=S.useState(null),[U,G]=S.useState([]),[W,M]=S.useState(null),[I,z]=S.useState(!1),[q,ne]=S.useState(!1),[X,se]=S.useState(null),[ce,pe]=S.useState(!1),[be,oe]=S.useState(null),[je,Re]=S.useState(null),[Xe,ft]=S.useState([]),[Je,Ht]=S.useState(!1),[Ve,at]=S.useState(null),[gt,Te]=S.useState([]),[bt,Ct]=S.useState(!1),[Lt,Yt]=S.useState(null),[it,xt]=S.useState(null),[Mt,rt]=S.useState(!1),[Qe,It]=S.useState(!1),[Tt,Rt]=S.useState(0),[cr,hr]=S.useState(!1),[Cr,ur]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[Sr,we]=S.useState([]),[Me,Ie]=S.useState([]),[Ce,Ze]=S.useState(!1),[wt,Nt]=S.useState(!1),[Oe,Ke]=S.useState(null),[st,Vt]=S.useState([]),[qt,gr]=S.useState(!1),[Vr,Nr]=S.useState("subject");S.useEffect(()=>{Pe()},[]),S.useEffect(()=>{const Ue=Ot=>{Mt&&!Ot.target.closest(".relative")&&rt(!1),Qe&&!Ot.target.closest(".relative")&&It(!1)};return document.addEventListener("mousedown",Ue),()=>{document.removeEventListener("mousedown",Ue)}},[Mt,Qe]);const dn=S.useCallback(()=>{ye.debug(" showChangePasswordTab called"),hr(!0),rt(!1),It(!1)},[]),me=S.useCallback(()=>{ye.debug(" hideChangePasswordTab called"),hr(!1),ur({currentPassword:"",newPassword:"",confirmPassword:""})},[]),Ne=S.useCallback(async()=>{if(!r)return;const{currentPassword:Ue,newPassword:Ot,confirmPassword:Le}=Cr;if(!Ue||!Ot||!Le){d("Please fill in all fields","error");return}if(Ot!==Le){d("New passwords do not match","error");return}if(Ot.length<6){d("New password must be at least 6 characters long","error");return}const nt=/[a-zA-Z]/.test(Ot),Wt=/[0-9]/.test(Ot);if(!nt||!Wt){d("New password must contain both letters and numbers","error");return}try{const kt=await Hs.changePassword({username:r.username,currentPassword:Ue,newPassword:Ot});kt.success?(d("Password changed successfully!","success"),me()):d(kt.message||"Failed to change password","error")}catch(kt){ye.error("Password change error:",kt),d("Failed to change password. Please try again.","error")}},[r,Cr,d]),ve=S.useCallback(Ue=>{const{name:Ot,value:Le}=Ue.target;ur(nt=>({...nt,[Ot]:Le}))},[]),Ee=S.useCallback(async()=>{ye.debug(" Loading teacher data...");try{const Ue=await Hs.getTeacherData();return ye.debug(" Teacher data loaded:",Ue),Re(new Date),Ue}catch(Ue){throw ye.error(" Error loading teacher data:",Ue),Ue}},[]),ue=S.useCallback(async(Ue=null)=>{ye.debug(" Loading teacher subjects...");try{if(!Ue){const nt=`teacher_subjects_${r?.teacher_id||r?.id||""}`,Wt=js(nt);if(Wt)return ye.debug(" Using cached teacher subjects"),T(Wt),Wt}let Ot=Ue,Le;if(Ue?(ye.debug(" Using passed teacher data for subjects"),Le=Hs.getTeacherSubjects(Ue.subjects)):(ye.debug(" No teacher data passed, fetching from API"),Ot=await Hs.getTeacherData(),ye.debug(" Raw teacher data:",Ot),Le=Hs.getTeacherSubjects(Ot.subjects)),ye.debug(" Teacher subjects loaded:",Le),T(Le),!Ue){const nt=`teacher_subjects_${r?.teacher_id||r?.id||""}`;ys(nt,Le,ds.teacher_subjects)}return ye.debug(" Available classes for performance chart:",Le[0]?.classes||[]),ye.debug(" Performance chart will load when user clicks on a class"),Le}catch(Ot){throw ye.error(" Error loading teacher subjects:",Ot),Ot}},[r?.teacher_id,r?.id]),he=S.useCallback(async()=>{ye.debug(" Loading teacher active tests...");try{const Ue=`teacher_tests_${r?.teacher_id||r?.id||""}`,Ot=js(Ue);Ot&&Ot.some(Wt=>Wt.test_type==="drawing")&&(ye.debug(" Drawing test detected - forcing cache refresh"),localStorage.removeItem(Ue));const Le=js(Ue);if(Le)return ye.debug(" Using cached teacher tests"),A(Le),Le;const nt=await Pn.getTeacherTests();return ye.debug(" Teacher tests loaded:",nt),A(nt),ys(Ue,nt,ds.teacher_tests),nt}catch(Ue){throw ye.error(" Error loading teacher tests:",Ue),Ue}},[r?.teacher_id,r?.id]),Pe=S.useCallback(async()=>{ye.debug(" Initializing Teacher Cabinet...");try{if(p(!0),v(""),!n||!r){ye.debug(" User not authenticated"),v("User not authenticated");return}if(r.role!==zo.TEACHER){ye.error(" Invalid user role for teacher cabinet:",r.role),v("Access denied. Teacher role required.");return}ye.debug(" Loading teacher data...");const Ue=await Ee();ye.debug(" Loading subjects and tests in parallel...");const[Ot,Le]=await Promise.allSettled([ue(Ue),he()]);let nt=!1;Ot.status==="rejected"&&(ye.warn(" Subjects loading failed:",Ot.reason),nt=!0),Le.status==="rejected"&&(ye.warn(" Tests loading failed:",Le.reason),nt=!0),nt&&d("Some data failed to load, but you can continue","warning"),ye.debug(" Teacher Cabinet initialization complete!")}catch(Ue){ye.error(" Error initializing teacher cabinet:",Ue),v("Failed to initialize teacher cabinet")}finally{p(!1)}},[n,r,Ee,ue,he,d]),tt=S.useCallback(()=>{ye.debug(" Showing subject selection prompt..."),re(!0),Ge(),Nr("subject")},[]),Ge=S.useCallback(async()=>{ye.debug(" Loading available subjects..."),Ze(!0);try{const Ue=await Hs.getSubjectsForSelection();we(Ue),ye.debug(" Available subjects loaded:",Ue)}catch(Ue){ye.error(" Error loading available subjects:",Ue),d("Failed to load subjects","error")}finally{Ze(!1)}},[]),Ye=S.useCallback(Ue=>{if(!Ue){Ke(null);return}const Ot=Sr.find(Le=>Le.subject_id==Ue);Ot&&(Ke(Ot),Vt([]),Nr("classes"))},[Sr]),ct=S.useCallback((Ue,Ot)=>{Vt(Le=>Le.some(nt=>nt.grade===Ue&&nt.class===Ot)?Le.filter(nt=>!(nt.grade===Ue&&nt.class===Ot)):[...Le,{grade:Ue,class:Ot}])},[]),de=S.useCallback(()=>{if(!Oe||st.length===0){d("Please select at least one class","warning");return}const Ue={subject_id:parseInt(Oe.subject_id),subject_name:Oe.subject,classes:st};Ie(Ot=>[...Ot,Ue]),Ke(null),Vt([]),Nr("subject"),d(`Added ${Oe.subject} with ${st.length} classes`,"success")},[Oe,st]),_e=S.useCallback(Ue=>{Ie(Ot=>Ot.filter((Le,nt)=>nt!==Ue))},[]),Fe=S.useCallback(async(Ue,Ot,Le)=>{ye.debug(" Deleting teacher subject:",{subjectId:Ue,grade:Ot,classNumber:Le});try{const nt={subjectId:Ue,grade:Ot,class:Le};ye.debug(" Sending delete request with data:",nt);const Wt=await Hs.deleteTeacherSubject(nt);if(Wt.success)d("Subject assignment deleted successfully!","success"),await ue();else throw new Error(Wt.error||"Failed to delete subject assignment")}catch(nt){ye.error(" Error deleting subject assignment:",nt),d("Error deleting subject assignment. Please try again.","error")}},[ue,d]),De=S.useCallback((Ue,Ot,Le,nt)=>{oe({subjectId:Ue,subjectName:Ot,grade:Le,classNumber:nt}),pe(!0)},[]),qe=S.useCallback(async()=>{be&&(await Fe(be.subjectId,be.grade,be.classNumber),pe(!1),oe(null))},[be,Fe]),zt=S.useCallback(()=>{pe(!1),oe(null)},[]),_r=S.useCallback(async()=>{if(Me.length===0){d("Please select at least one subject","warning");return}Nt(!0);try{const Ue=await Hs.saveTeacherSubjects(Me);if(Ue.success)d("Subjects saved successfully!","success"),re(!1),Ie([]),Nr("subject"),await ue();else throw new Error(Ue.error||"Failed to save subjects")}catch(Ue){ye.error(" Error saving teacher subjects:",Ue),d("Failed to save subjects","error")}finally{Nt(!1)}},[Me,ue]);S.useCallback(async Ue=>{ye.debug(" Saving teacher subjects:",Ue);try{const Ot=await Hs.saveTeacherSubjects(Ue);if(Ot.success)d("Subjects saved successfully!","success"),await ue(),re(!1);else throw new Error(Ot.error||"Failed to save subjects")}catch(Ot){ye.error(" Error saving teacher subjects:",Ot),d("Failed to save subjects","error")}},[ue]);const jr=S.useCallback(()=>{ye.debug(" Showing active tests..."),w("tests")},[]),pt=S.useCallback(async Ue=>{ye.debug(" Showing test details:",Ue);const Ot=E?.find(wr=>wr.test_type===Ue.test_type&&wr.test_id===Ue.test_id)||{},Le=Ot.assignments||Ue.assignments||[],nt=Le.some(wr=>wr.is_active),Wt=Ue.selectedAssignmentId||Ue.assignment_id||null,kt={...Ot,...Ue,assignments:Le,selectedAssignmentId:Wt,hasActiveAssignment:nt};Q(kt),ee(!0),G([]),M(null),z(!0);try{if(["input","true_false","multiple_choice","word_matching","fill_blanks"].includes(Ue.test_type)){const wr=await Pn.getTestQuestionsWithInfo(Ue.test_type,Ue.test_id);G(wr.questions||[]),M(wr.testInfo||null),ye.debug(" Test questions and info loaded:",{questionsCount:wr.questions?.length||0,testInfo:wr.testInfo})}}catch(wr){console.error("Error loading test questions:",wr),d("Error loading test questions. Please try again.","error")}finally{z(!1)}},[E,d]);S.useCallback(async(Ue,Ot,Le)=>{ye.debug(" Removing class assignment:",Ue,Ot,Le);try{const nt=await Pn.removeClassAssignment(Ue,Ot,Le);if(nt.success)d("Assignment removed successfully!","success"),await he();else throw new Error(nt.error||"Failed to remove assignment")}catch(nt){ye.error(" Error removing class assignment:",nt),d("Failed to remove assignment","error")}},[he]);const or=S.useCallback(async Ue=>{ye.debug(" Marking assignment as completed:",Ue),at(Ue);try{const Ot=await Pn.markAssignmentCompleted(Ue);if(Ot.success){A(nt=>nt.map(Wt=>({...Wt,assignments:Wt.assignments?.map(kt=>kt.assignment_id===Ue?{...kt,is_active:!1}:kt)||[]}))),d("Test assignment marked as completed!","success");const Le=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Le),ye.debug(" Cleared teacher tests cache"),he().catch(nt=>{ye.error(" Error refreshing tests after completion:",nt)})}else throw new Error(Ot.error||"Failed to mark assignment as completed")}catch(Ot){ye.error(" Error marking assignment as completed:",Ot),d("Failed to mark assignment as completed","error")}finally{at(null)}},[he,d,r?.teacher_id,r?.id]),Wr=S.useCallback(async()=>{ye.debug(" Refreshing active tests data...");try{const Ue=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(Ue),ye.debug(" Cache cleared, forcing fresh API call"),ye.debug(" Making direct API call to get-teacher-active-tests with noCache");const Ot=await Pn.getTeacherTests(!0);ye.debug(" Direct API call returned:",Ot),A(Ot),ye.debug(" activeTestsData state updated:",Ot),d(`Tests refreshed successfully! Found ${Ot?.length||0} tests.`,"success")}catch(Ue){ye.error(" Error refreshing tests:",Ue),d("Failed to refresh tests","error")}},[d,r?.teacher_id,r?.id]),[Fr,Tr]=S.useState(null),Gr=S.useCallback(async Ue=>{ye.debug(" Activating assignment:",Ue),Tr(Ue);try{const Ot=await Pn.activateAssignment(Ue);if(!Ot.success)throw new Error(Ot.error||"Failed to activate assignment");let Le=null;A(Wt=>{const kt=Wt.map(wr=>({...wr,assignments:wr.assignments?.map(Ft=>Ft.assignment_id===Ue?{...Ft,is_active:!0}:Ft)||[]}));return Le=kt,kt}),Le&&Q(Wt=>{if(!Wt)return Wt;const kt=Le.find(Qr=>Qr.test_id===Wt.test_id&&Qr.test_type===Wt.test_type);if(!kt)return Wt;const wr=kt.assignments||Wt.assignments||[],Ft=wr.some(Qr=>Qr.is_active);return{...Wt,...kt,assignments:wr,hasActiveAssignment:Ft}}),d("Test assignment activated! Students can now see this test.","success");const nt=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(nt),ye.debug(" Cleared teacher tests cache"),Wr().catch(Wt=>{ye.error(" Error performing hard refresh after activation:",Wt)})}catch(Ot){ye.error(" Error activating assignment:",Ot),d("Failed to activate assignment","error")}finally{Tr(null)}},[Wr,d,r?.teacher_id,r?.id]),Lr=S.useMemo(()=>!E||E.length===0?[]:E.flatMap(Ue=>{if(!Ue.assignments||Ue.assignments.length===0)return[];const Ot=Ue.assignments.some(Le=>Le.is_active);return Ue.assignments.map(Le=>({test_id:Ue.test_id,test_type:Ue.test_type,test_name:Ue.test_name,num_questions:Ue.num_questions,created_at:Ue.created_at,subject_id:Ue.subject_id,subject:Ue.subject,teacher_id:Ue.teacher_id,assignments:Ue.assignments,has_active_assignment:Ot,assignment_id:Le.assignment_id,grade:Le.grade,class:Le.class,is_active:Le.is_active,assigned_at:Le.assigned_at,days_remaining:Le.days_remaining}))}),[E]),zn=S.useCallback(async(Ue=null)=>{if(r?.teacher_id){Ct(!0),Yt(null);try{ye.debug(" Loading test performance data for class:",Ue);const Ot=await A4e.getTestPerformance(r.teacher_id,Ue);Te(Ot),ye.debug(" Test performance data loaded:",Ot.length,"tests")}catch(Ot){ye.error(" Error loading test performance data:",Ot),Yt(Ot.message)}finally{Ct(!1)}}},[r?.teacher_id]);S.useCallback((Ue,Ot)=>{ye.debug(" Showing class results:",Ue,Ot),ye.debug(" Class click - grade:",Ue,"className:",Ot),D(Ue),V(Ot),w("results");const Le=`${Ue}/${Ot}`;ye.debug(" Loading performance data for clicked class:",Le),xt(Le),zn(Le)},[zn]);const[br,fn]=S.useState([]),[Xr,qn]=S.useState([]),An=S.useCallback(async()=>{try{const Ot=await(await ai(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestAssignments(r.teacher_id);fn(Ot)}catch(Ue){ye.warn("Failed to load retests",Ue)}},[r]);S.useCallback(async Ue=>{try{const Le=await(await ai(()=>import("./retestService-C6b0YDiD.js"),[])).retestService.getRetestTargets(Ue);qn(Le)}catch(Ot){ye.warn("Failed to load retest targets",Ot)}},[]);const[ke,Pt]=S.useState(!1),[Mr,qr]=S.useState(!1);S.useEffect(()=>{ye.debug("[TeacherCabinet] showRetestModal state changed:",ke)},[ke]);const[Tn,Jr]=S.useState({test_type:"",original_test_id:"",subject_id:"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:[]}),hs=S.useCallback(async Ue=>{ye.debug("[TeacherCabinet] openRetestModal called with:",Ue);const{test_type:Ot,original_test_id:Le,subject_id:nt,failedStudentIds:Wt=[],grade:kt,class:wr}=Ue||{};Jr({test_type:Ot||"multiple_choice",original_test_id:Le||"",subject_id:nt||"",passing_threshold:50,scoring_policy:"BEST",max_attempts:1,window_days:2,student_ids:Wt}),kt!==void 0&&D(kt),wr!==void 0&&V(wr),ye.debug("[TeacherCabinet] Setting showRetestModal to true"),Pt(!0)},[]),Xs=S.useCallback(async()=>{qr(!0);try{const Ue=await ai(()=>import("./retestService-C6b0YDiD.js"),[]),Ot=new Date,Le=new Date(Ot.getTime()+Tn.window_days*24*60*60*1e3),nt={...Tn,teacher_id:r.teacher_id,grade:P,class:B,window_start:Ot.toISOString(),window_end:Le.toISOString()};ye.debug("[Retest][TeacherCabinet] Prepared payload:",JSON.stringify(nt)),ye.debug("[Retest][TeacherCabinet] Selected students count:",(nt.student_ids||[]).length,"IDs:",nt.student_ids),await Ue.retestService.createRetestAssignment(nt),d("Retest created","success"),Pt(!1),An(),Rt(Wt=>Wt+1)}catch(Ue){ye.error("Create retest error",Ue),d(Ue.message||"Failed to create retest","error")}finally{qr(!1)}},[Tn,P,B,An]);if(g)return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Cabinet..."})]}),l.jsx("div",{className:"flex flex-wrap gap-2"})]});if(y)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Cabinet Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:y}),l.jsx(ht,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})});return l.jsxs(vt.div,{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(vt.div,{className:"bg-gradient-to-r from-sky-400 to-sky-600 text-white shadow-lg",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-6",children:[l.jsxs(vt.div,{className:"flex-1 text-center",initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("h1",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-white mb-2",children:"Teacher Cabinet"}),l.jsxs("p",{className:"text-sky-100 text-sm sm:text-base md:text-lg",children:["Welcome, Teacher ",a()||""]})]}),l.jsxs(vt.div,{className:"relative",initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsx("div",{className:"hidden md:block",children:l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>rt(!Mt),className:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border border-white/20 text-white hover:bg-white/20 px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:[l.jsx("span",{className:"hidden sm:inline text-xs sm:text-sm font-medium",children:"Menu"}),l.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 transition-transform duration-200",style:{transform:Mt?"rotate(180deg)":"rotate(0deg)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),Mt&&l.jsxs(vt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[l.jsxs("button",{onClick:()=>{rt(!1),dn()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),l.jsx("span",{children:"Change Password"})]}),l.jsxs("button",{onClick:()=>{rt(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),l.jsx("span",{children:"Logout"})]})]})]})}),l.jsxs("div",{className:"md:hidden",children:[l.jsx("button",{onClick:()=>It(!Qe),className:"flex items-center justify-center w-10 h-10 bg-white/10 border border-white/20 text-white hover:bg-white/20 rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),Qe&&l.jsxs(vt.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[l.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[l.jsx("p",{className:"text-sm font-medium text-gray-900",children:a()||"Teacher"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Teacher Account"})]}),l.jsxs("button",{onClick:()=>{It(!1),dn()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),l.jsx("span",{children:"Change Password"})]}),l.jsxs("button",{onClick:()=>{It(!1),e?e():s()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200 flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),l.jsx("span",{children:"Logout"})]})]})]})]})]})})}),l.jsx(vt.div,{className:"bg-white border-b shadow-sm",initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4,duration:.5},children:l.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:l.jsx("nav",{className:"flex space-x-1 sm:space-x-8 overflow-x-auto",children:[{key:"main",label:"Main Dashboard",shortLabel:"Dashboard"},{key:"tests",label:"Test Management",shortLabel:"Tests"},{key:"results",label:"Class Results",shortLabel:"Results"},{key:"subjects",label:"Subject Management",shortLabel:"Subjects"}].map((Ue,Ot)=>l.jsxs(vt.button,{onClick:()=>Ue.key==="tests"?jr():w(Ue.key),className:`py-2 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-xs sm:text-sm transition-colors duration-200 whitespace-nowrap flex-shrink-0 flex-1 sm:flex-none ${C===Ue.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,initial:{y:-10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5+Ot*.1,duration:.3},whileHover:{scale:1.05},whileTap:{scale:.95},children:[l.jsx("span",{className:"sm:hidden",children:Ue.shortLabel}),l.jsx("span",{className:"hidden sm:inline",children:Ue.label})]},Ue.key))})})}),l.jsx(vt.div,{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:l.jsxs(Wo,{mode:"wait",children:[C==="main"&&l.jsx(vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:mi()},"main"),C==="subjects"&&l.jsx(vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:xn()},"subjects"),C==="tests"&&l.jsx(vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:wl()},"tests"),C==="results"&&l.jsx(vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:l.jsx($V,{selectedGrade:P,selectedClass:B,onBackToCabinet:()=>w("main"),openRetestModal:hs,forceRefreshOnMount:Tt>0},Tt)},"results")]})}),Y&&l.jsx(Fa,{isOpen:Y,onClose:()=>{re(!1),Nr("subject"),Ie([]),Ke(null),Vt([])},title:"Select Subjects and Classes",size:"large",children:l.jsxs("div",{className:"space-y-6 px-4 max-h-[80vh] overflow-y-auto",children:[Vr==="subject"&&l.jsxs(vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Step 1: Select Subject"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the subject you want to teach:"}),Ce?l.jsxs("div",{className:"flex items-center justify-center py-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),l.jsx("span",{className:"ml-2 text-gray-600",children:"Loading subjects..."})]}):l.jsxs("select",{value:Oe?.subject_id||"",onChange:Ue=>Ye(Ue.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"Select a subject"}),Sr.map(Ue=>l.jsx("option",{value:Ue.subject_id,children:Ue.subject},Ue.subject_id))]})]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx(ht,{variant:"outline",onClick:()=>re(!1),children:"Cancel"}),l.jsx(ht,{variant:"primary",onClick:()=>Nr("classes"),disabled:!Oe,children:"Next: Select Classes"})]})]}),Vr==="classes"&&Oe&&l.jsxs(vt.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:["Step 2: Select Classes for ",Oe.subject]}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Choose the classes you teach for this subject:"}),l.jsx("div",{className:"max-h-80 overflow-y-auto border border-gray-200 rounded-lg p-4",children:l.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3,4,5,6,7].map(Ue=>{let Ot;return Ue===1||Ue===2||Ue===3?Ot=[15,16]:Ue===4||Ue===5||Ue===6?Ot=[13,14]:Ue===7?Ot=[69,70]:Ot=[],l.jsxs("div",{className:"space-y-2",children:[l.jsxs("h4",{className:"font-medium text-gray-700 text-sm",children:["Grade ",Ue]}),l.jsx("div",{className:"space-y-1",children:Ot.map(Le=>l.jsxs("label",{className:"flex items-center space-x-2 py-1",children:[l.jsx("input",{type:"checkbox",checked:st.some(nt=>nt.grade===Ue.toString()&&nt.class===Le.toString()),onChange:()=>ct(Ue.toString(),Le.toString()),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),l.jsxs("span",{className:"text-xs text-gray-700",children:["Class ",Le]})]},Le))})]},Ue)})})})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(ht,{variant:"outline",onClick:()=>Nr("subject"),children:"Back to Subjects"}),l.jsxs("div",{className:"space-x-3",children:[l.jsx(ht,{variant:"outline",onClick:()=>re(!1),children:"Cancel"}),l.jsx(ht,{variant:"primary",onClick:de,disabled:st.length===0,children:"Add Subject"})]})]})]}),Me.length>0&&l.jsxs(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Selected Subjects"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Review your selected subjects and classes:"}),l.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:Me.map((Ue,Ot)=>l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-medium text-gray-900",children:Ue.subject_name}),l.jsxs("p",{className:"text-sm text-gray-600",children:["Classes: ",Ue.classes.map(Le=>`Grade ${Le.grade} Class ${Le.class}`).join(", ")]})]}),l.jsx("button",{onClick:()=>_e(Ot),className:"text-red-600 hover:text-red-800 p-1",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Ot))})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx(ht,{variant:"outline",onClick:()=>Nr("subject"),children:"Add More Subjects"}),l.jsxs("div",{className:"space-x-3",children:[l.jsx(ht,{variant:"outline",onClick:()=>re(!1),children:"Cancel"}),l.jsx(ht,{variant:"primary",onClick:_r,disabled:wt,className:"relative",children:wt?l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save All Subjects"})]})]})]})]})}),ke&&l.jsxs(Fa,{isOpen:ke,onClose:()=>Pt(!1),title:"Create Retest",size:"medium",children:[l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retest Window"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Tn.window_days,onChange:Ue=>Jr(Ot=>({...Ot,window_days:Number(Ue.target.value)})),children:[l.jsx("option",{value:1,children:"1 day"}),l.jsx("option",{value:2,children:"2 days"}),l.jsx("option",{value:3,children:"3 days"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Attempts"}),l.jsxs("select",{className:"w-full border rounded px-3 py-2 text-sm",value:Tn.max_attempts,onChange:Ue=>Jr(Ot=>({...Ot,max_attempts:Number(Ue.target.value)})),children:[l.jsx("option",{value:1,children:"1 attempt"}),l.jsx("option",{value:2,children:"2 attempts"}),l.jsx("option",{value:3,children:"3 attempts"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Students can retry immediately if they fail"})]})]})}),l.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[l.jsx("button",{onClick:()=>Pt(!1),disabled:Mr,className:"px-4 py-2 text-sm rounded border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),l.jsx("button",{onClick:Xs,disabled:Mr,className:"px-4 py-2 text-sm rounded bg-indigo-600 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Mr?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm"}),"Creating Retest..."]}):"Create Retest"})]})]}),te&&L&&l.jsx(aN,{isOpen:te,onClose:()=>ee(!1),testType:L.test_type,testId:L.test_id,testName:L.test_name,questions:U,isLoading:I,canEdit:!L.hasActiveAssignment,canEditSettings:!L.hasActiveAssignment,subject:L.subject,createdAt:L.created_at,assignments:L.assignments||[],testInfo:W,onSave:async(Ue,Ot,Le)=>{try{await Pn.updateTestQuestions(Ue,Ot,Le),d("Questions updated successfully!","success");const nt=`teacher_tests_${r?.teacher_id||r?.id||""}`;localStorage.removeItem(nt),await pt(L)}catch(nt){throw console.error("Error saving questions:",nt),d("Failed to update questions","error"),nt}},onSettingsSave:async Ue=>{try{await Pn.updateTestSettings(L.test_type,L.test_id,Ue),d("Settings updated successfully!","success"),await pt(L)}catch(Ot){throw d("Failed to update settings","error"),Ot}}}),ce&&be&&l.jsx(Fa,{isOpen:ce,onClose:zt,title:"Delete Subject Assignment",size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:l.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Delete Subject Assignment"}),l.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Are you sure you want to delete the assignment for"," ",l.jsx("span",{className:"font-semibold text-gray-900",children:be.subjectName})," ","in Grade ",be.grade,", Class ",be.classNumber,"?"]}),l.jsx("p",{className:"text-xs text-red-600",children:"This action cannot be undone."})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx(ht,{variant:"outline",onClick:zt,children:"Cancel"}),l.jsx(ht,{variant:"danger",onClick:qe,children:"Delete Assignment"})]})]})}),l.jsx(vt.div,{className:"fixed top-4 right-4 space-y-2 z-50",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8,duration:.5},children:f.map(Ue=>l.jsx(vt.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.9},transition:{duration:.3},children:l.jsx("div",{className:`p-4 rounded-lg shadow-lg ${Ue.type==="success"?"bg-green-600 text-white":Ue.type==="error"?"bg-red-600 text-white":Ue.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{children:Ue.message}),l.jsx("button",{onClick:()=>h(Ue.id),className:"ml-4 text-white hover:text-gray-200",children:""})]})})},Ue.id))}),cr&&l.jsx(Fa,{isOpen:cr,onClose:me,title:"Change Password",size:"small",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),l.jsx("input",{type:"password",name:"currentPassword",value:Cr.currentPassword,onChange:ve,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter current password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),l.jsx("input",{type:"password",name:"newPassword",value:Cr.newPassword,onChange:ve,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Enter new password"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),l.jsx("input",{type:"password",name:"confirmPassword",value:Cr.confirmPassword,onChange:ve,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-sky-500 focus:border-transparent",placeholder:"Confirm new password"})]}),l.jsxs("div",{className:"flex space-x-3 pt-4",children:[l.jsx(ht,{type:"button",variant:"secondary",onClick:me,className:"flex-1",children:"Cancel"}),l.jsx(ht,{type:"button",onClick:Ne,className:"flex-1",children:"Change Password"})]})]})})]});function mi(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsxs(Kt,{children:[l.jsx(Kt.Header,{children:l.jsx(Kt.Title,{children:"My Subjects & Classes"})}),l.jsx(Kt.Body,{children:_.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned"}),l.jsx("p",{className:"text-gray-500 mb-4",children:"You don't have any subjects assigned yet."}),l.jsx(ht,{variant:"outline",onClick:()=>w("subjects"),children:"Manage Subjects"})]}):l.jsx("div",{className:"space-y-6",children:_.map((Ue,Ot)=>l.jsxs(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+Ot*.1,duration:.3},className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Ue.name}),l.jsxs("span",{className:"text-sm text-gray-500",children:[Ue.classes?.length||0," classes"]})]}),Ue.classes&&Ue.classes.length>0?l.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Ue.classes.map((Le,nt)=>l.jsx(vt.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3+Ot*.1+nt*.05,duration:.2},whileHover:{scale:1.05},whileTap:{scale:.95},children:l.jsxs(ht,{variant:"outline",size:"sm",onClick:()=>{D(Le.grade),V(Le.class),w("results")},className:"font-medium",children:[Le.grade,"/",Le.class]})},nt))}):l.jsx("div",{className:"text-center py-4 text-gray-500",children:l.jsx("span",{className:"text-sm",children:"No classes assigned to this subject"})})]},Ue.id))})})]})}),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},children:l.jsxs(Kt,{children:[l.jsxs(Kt.Header,{children:[l.jsx(Kt.Title,{children:"Test Performance Overview"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Test performance over time with average scores"})]}),l.jsx(Kt.Body,{children:_.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"mb-2",children:l.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),l.jsx("p",{className:"text-gray-500",children:"No subjects assigned - no performance data available"})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"flex flex-wrap gap-2 border-b border-gray-200",children:(()=>{const Ue=[];return _.forEach(Ot=>{Ot.classes&&Ot.classes.forEach(Le=>{const nt=`${Le.grade}/${Le.class}`;Ue.find(Wt=>Wt.key===nt)||Ue.push({key:nt,grade:Le.grade,class:Le.class,subject:Ot.name})})}),Ue})().map((Ue,Ot)=>l.jsxs("button",{onClick:()=>{ye.debug(" Class button clicked:",Ue.key),xt(Ue.key),zn(Ue.key)},className:`px-4 py-2 text-sm font-medium rounded-t-lg transition-colors ${it===Ue.key?"bg-blue-100 text-blue-700 border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[Ue.grade,"/",Ue.class]},Ue.key))}),it?l.jsx("div",{className:"mt-4",children:l.jsx(Pje,{data:gt,loading:bt,error:Lt})}):l.jsxs("div",{className:"mt-4 text-center text-muted py-4",children:[l.jsx("div",{className:"mb-2",children:l.jsx("img",{src:"/pics/Graph.png",alt:"Performance Graph",className:"w-16 h-16 object-contain mx-auto"})}),l.jsx("p",{className:"text-gray-500",children:"Select a class above to view test performance data"})]})]})})]})})]})}function xn(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsx(Kt,{children:l.jsx(Kt.Header,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Kt.Title,{children:"Subject Management"}),l.jsx(ht,{variant:"primary",onClick:tt,children:"Add Subject"})]})})})}),_.length===0?l.jsx(vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:l.jsx(Kt,{children:l.jsx(Kt.Body,{children:l.jsxs("div",{className:"text-center p-12",children:[l.jsx(vt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No subjects assigned yet"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Add your first subject to get started with creating tests and managing classes."}),l.jsx(ht,{variant:"primary",onClick:tt,size:"lg",children:"Add Your First Subject"})]})})})}):l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:l.jsxs(Kt,{children:[l.jsx(Kt.Header,{children:l.jsx(Kt.Title,{children:"Your Subjects"})}),l.jsx(Kt.Body,{children:l.jsx("div",{className:"space-y-4",children:_.map((Ue,Ot)=>l.jsx(vt.div,{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-green-500",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+Ot*.1,duration:.3},whileHover:{scale:1.02,backgroundColor:"#f9fafb"},children:l.jsx("div",{className:"flex justify-between items-start",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:Ue.name}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Ue.classes?.map((Le,nt)=>l.jsxs(vt.div,{className:"inline-flex items-center gap-2 bg-blue-100 text-blue-800 text-xs rounded-full px-3 py-1",initial:{scale:0},animate:{scale:1},transition:{delay:.4+Ot*.1+nt*.05,duration:.2},whileHover:{scale:1.1},children:[l.jsxs("span",{children:[Le.grade," - ",Le.className]}),l.jsx("button",{onClick:()=>De(Ue.id,Ue.name,Le.grade,Le.class),className:"ml-1 text-red-600 hover:text-red-800 transition-colors",title:"Delete this subject assignment",children:l.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},nt))||l.jsx("span",{className:"text-gray-500 text-sm",children:"No classes assigned"})})]})})},Ot))})})]})})]})}function wl(){return l.jsxs("div",{className:"space-y-8",children:[l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5},children:l.jsx(Kt,{children:l.jsx(Kt.Header,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(Kt.Title,{children:"Active Tests"}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(ht,{variant:"outline",onClick:Wr,children:"Refresh"}),l.jsx(ht,{variant:"primary",onClick:()=>t("/teacher/tests/create"),children:"Create New Test"})]})]})})})}),Lr.length===0?l.jsx(vt.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:l.jsx(Kt,{children:l.jsx(Kt.Body,{children:l.jsxs("div",{className:"text-center p-12",children:[l.jsx(vt.div,{className:"text-6xl mb-4",initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.5,type:"spring"},children:""}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No active tests found"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first test to get started with assessments."}),l.jsx(ht,{variant:"primary",onClick:()=>t("/teacher/tests/create"),size:"lg",children:"Create Your First Test"})]})})})}):l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},className:"space-y-4",children:Lr.map((Ue,Ot)=>l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+Ot*.1,duration:.3},whileHover:{scale:1.01},children:l.jsx(Kt,{children:l.jsxs(Kt.Body,{children:[l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[l.jsxs("div",{className:"flex-1 flex flex-col sm:flex-row sm:items-center sm:space-x-4 gap-2",children:[l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 min-w-0 flex-shrink-0 max-w-xs truncate",title:Ue.test_name,children:Ue.test_name}),l.jsx("span",{className:"hidden sm:inline-block bg-green-100 text-green-800 px-2 py-1 rounded text-xs font-medium flex-shrink-0",children:Ue.test_type}),l.jsxs("span",{className:"hidden sm:inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold flex-shrink-0",children:[Ue.grade,"/",Ue.class]})]}),l.jsxs("div",{className:"hidden sm:flex items-center space-x-4",children:[l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ue.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:Ue.is_active?"Active":"Inactive"}),l.jsx("div",{className:"text-sm text-gray-500 flex-shrink-0",children:new Date(Ue.created_at).toLocaleDateString()})]})]}),l.jsxs("div",{className:"hidden sm:flex gap-2 ml-4 flex-shrink-0",children:[l.jsx(ht,{variant:"outline",onClick:()=>pt({...Ue,selectedAssignmentId:Ue.assignment_id,assignments:Ue.assignments}),size:"sm",children:"Details"}),!Ue.is_active&&l.jsx(ht,{variant:"primary",onClick:()=>Gr(Ue.assignment_id),size:"sm",disabled:Fr===Ue.assignment_id,children:Fr===Ue.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating..."]}):"Activate"}),l.jsx(ht,{variant:"success",onClick:()=>or(Ue.assignment_id),size:"sm",disabled:Ve===Ue.assignment_id,children:Ve===Ue.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 sm:hidden",children:[l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded text-sm font-semibold",children:[Ue.grade,"/",Ue.class]}),l.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${Ue.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:Ue.is_active?"Active":"Inactive"}),l.jsx("span",{className:"text-xs text-gray-500",children:new Date(Ue.created_at).toLocaleDateString()})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsx(ht,{variant:"outline",onClick:()=>pt({...Ue,assignments:[{assignment_id:Ue.assignment_id,grade:Ue.grade,class:Ue.class,is_active:Ue.is_active}]}),size:"sm",className:"text-xs",children:"Details"}),!Ue.is_active&&l.jsx(ht,{variant:"primary",onClick:()=>Gr(Ue.assignment_id),size:"sm",disabled:Fr===Ue.assignment_id,children:Fr===Ue.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Activating..."]}):"Activate"}),l.jsx(ht,{variant:"success",onClick:()=>or(Ue.assignment_id),size:"sm",disabled:Ve===Ue.assignment_id,children:Ve===Ue.assignment_id?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing..."]}):"Complete"})]})]})]})})},`${Ue.test_id}-${Ue.assignment_id}-${Ot}`))})]})}},Fje=[{value:"A1",label:"A1 (Beginner)",description:"Basic vocabulary, simple sentences"},{value:"A2",label:"A2 (Elementary)",description:"Everyday vocabulary, present/past tenses"},{value:"B1",label:"B1 (Intermediate)",description:"Varied vocabulary, complex sentences"},{value:"B2",label:"B2 (Upper-Intermediate)",description:"Advanced vocabulary, sophisticated structures"},{value:"C1",label:"C1 (Advanced)",description:"Nuanced vocabulary, complex discourse"},{value:"C2",label:"C2 (Proficiency)",description:"Native-like fluency and accuracy"}],Mje=({testName:e="",onTestSaved:t,onCancel:r,onBackToCabinet:n,isSaving:s=!1,validationErrors:a={}})=>{const{showNotification:i}=di(),[o,c]=S.useState({min_words:50,questions:[{question_id:1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}),[u,d]=S.useState(!1),f=S.useCallback((C,w)=>{c(_=>({..._,[C]:w}))},[]),h=S.useCallback((C,w,_)=>{c(T=>({...T,questions:T.questions.map((E,A)=>A===C?{...E,[w]:_}:E)}))},[]),g=S.useCallback(()=>{c(C=>({...C,questions:[...C.questions,{question_id:C.questions.length+1,prompt:"",expected_duration:null,difficulty_level:"B1"}]}))},[]),p=S.useCallback(C=>{o.questions.length>1&&c(w=>({...w,questions:w.questions.filter((_,T)=>T!==C)}))},[o.questions.length]),y=S.useCallback(()=>{const C={};return o.min_words<10&&(C.min_words="Minimum word count must be at least 10 words"),o.questions.forEach((w,_)=>{w.prompt.trim()||(C[`question_${_}_prompt`]="Question prompt is required")}),C},[o]),v=S.useCallback(async C=>{C.preventDefault();const w=y();if(Object.keys(w).length>0){i("Please fix the validation errors","error");return}d(!0);try{const _={test_name:e,time_limit:300,min_duration:30,max_duration:600,max_attempts:3,min_words:o.min_words,passing_score:50,allowed_time:null,questions:o.questions.map((T,E)=>({question_id:E+1,prompt:T.prompt,expected_duration:T.expected_duration,difficulty_level:T.difficulty_level}))};console.log(" [DEBUG] Calling onTestSaved with data:",_),t?(console.log(" [DEBUG] onTestSaved function exists, calling it..."),t(_),console.log(" [DEBUG] onTestSaved called successfully")):console.log(" [DEBUG] onTestSaved function is null/undefined")}catch(_){console.error("Error preparing speaking test:",_),i("Failed to prepare speaking test","error")}finally{d(!1)}},[o,y,i,t,e]);return u||s?l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx(pn,{}),l.jsx("span",{className:"ml-2",children:"Creating speaking test..."})]}):l.jsxs("div",{className:"speaking-test-creator max-w-4xl mx-auto",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Create Speaking Test"}),l.jsx("p",{className:"text-gray-600",children:"Create a speaking test where students record audio responses with AI-powered feedback"})]}),l.jsxs("form",{onSubmit:v,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Scoring Settings"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Word Count *"}),l.jsx("input",{type:"number",min:"10",max:"1000",value:o.min_words,onChange:C=>f("min_words",parseInt(C.target.value)),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.min_words&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:a.min_words})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Questions"}),l.jsx(ht,{type:"button",variant:"outline",onClick:g,children:"Add Question"})]}),o.questions.length>1&&l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Multiple Questions Detected"}),l.jsx("div",{className:"mt-1 text-sm text-blue-700",children:l.jsxs("p",{children:["You have ",o.questions.length," questions in this test.",l.jsx("strong",{children:" Only one question will be randomly selected"})," and shown to each student. This ensures fair distribution across your question pool."]})})]})]})}),o.questions.map((C,w)=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-medium",children:["Question ",w+1]}),o.questions.length>1&&l.jsx(ht,{type:"button",variant:"outline",size:"sm",onClick:()=>p(w),className:"text-red-600 hover:text-red-700",children:"Remove"})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Prompt *"}),l.jsx("textarea",{value:C.prompt,onChange:_=>h(w,"prompt",_.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter the question prompt for students"}),a[`question_${w}_prompt`]&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:a[`question_${w}_prompt`]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Duration (seconds)"}),l.jsx("input",{type:"number",min:"10",max:"600",value:C.expected_duration||"",onChange:_=>h(w,"expected_duration",_.target.value?parseInt(_.target.value):null),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Optional"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEFR Level"}),l.jsx("select",{value:C.difficulty_level,onChange:_=>h(w,"difficulty_level",_.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:Fje.map(_=>l.jsxs("option",{value:_.value,children:[_.label," - ",_.description]},_.value))}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select the appropriate CEFR level for this question. This will be used by AI to evaluate students appropriately."})]})]})]})]},w))]}),l.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200",children:[l.jsx(ht,{type:"button",variant:"secondary",onClick:r,children:"Cancel"}),l.jsx(ht,{type:"submit",variant:"primary",disabled:u||s,children:u||s?"Creating...":"Create Speaking Test"})]})]})]})},Oje={multipleChoice:"multiple_choice",trueFalse:"true_false",input:"input",matching:"matching_type",wordMatching:"word_matching",drawing:"drawing",fillBlanks:"fill_blanks",speaking:"speaking"},aB=()=>{const{user:e}=Fs();ale();const{notifications:t,showNotification:r,removeNotification:n}=di(),[s,a]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState("typeSelection"),[d,f]=S.useState(!1),[h,g]=S.useState(null),[p,y]=S.useState([]),[v,C]=S.useState(!1),[w,_]=S.useState(!1),[T,E]=S.useState(!1),[A,F]=S.useState(!1),[j,P]=S.useState({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:"",isShuffled:!1}),[D,B]=S.useState([]),[V,Y]=S.useState(null);S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null),S.useRef(null);const re=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in initializeTestCreation, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" Setting up test creation event listeners..."),W(),console.log(" Test creation initialization complete")},[e,r]),te=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestTypeSelection, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}console.log(" showTestTypeSelection called - starting new test creation"),o(!1),console.log(" Reset testAssignmentCompleted flag to false"),a(!0),console.log(" Set isInTestCreation flag to true"),ee(),u("typeSelection"),Q("testTypeSelection")},[e,r]),ee=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in disableNavigationButtons, redirecting to login");return}console.log(" Disabling navigation buttons..."),f(!0)},[e]),L=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in enableNavigationButtons, redirecting to login");return}console.log(" Enabling navigation buttons..."),f(!1)},[e]),Q=S.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveTestCreationState, redirecting to login");return}console.log("  saveTestCreationState called with step:",de),console.log("  Call stack:",new Error().stack);const _e={multipleChoice:{buttonVisible:!0,hintVisible:!1},trueFalse:{buttonVisible:!0,hintVisible:!1},input:{buttonVisible:!0,hintVisible:!1}},Fe={isInTestCreation:!0,currentStep:de,timestamp:Date.now(),excelState:_e};localStorage.setItem("test_creation_state",JSON.stringify(Fe)),console.log(" Saved test creation state:",Fe);const De={};switch(de){case"testTypeSelection":break;case"multipleChoiceForm":De.testName=j.testName||"",De.numQuestions=j.numQuestions||"",De.numOptions=j.numOptions||"",De.questions=j.questions||{};break;case"trueFalseForm":De.testName=j.testName||"",De.numQuestions=j.numQuestions||"",De.questions=j.questions||{};break;case"inputForm":De.testName=j.testName||"",De.numQuestions=j.numQuestions||"",De.questions=j.questions||{};break;case"formCreation":De.testName=j.testName||"",De.numQuestions=j.numQuestions||"",De.numOptions=j.numOptions||"",De.questions=j.questions||{},De.enableTimer=!!j.enableTimer,De.timerMinutes=j.timerMinutes||"",De.isShuffled=!!j.isShuffled;break;case"assignment":case"testAssignment":De.testName=j.testName||"",De.numQuestions=j.numQuestions||"",De.numOptions=j.numOptions||"",De.questions=j.questions||{};break;default:console.log(" Unknown step in saveTestCreationState:",de);break}Object.keys(De).length>0&&(localStorage.setItem(`form_data_${de}`,JSON.stringify(De)),console.log(" Saved form data for step:",de,De))},[e,j]),U=S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearTestCreationState, redirecting to login");return}localStorage.removeItem("test_creation_state"),localStorage.removeItem("test_creation_form_data");const de=[];for(let _e=0;_e<localStorage.length;_e++){const Fe=localStorage.key(_e);Fe&&(Fe.includes("test")||Fe.includes("form")||Fe.includes("question"))&&de.push(Fe)}de.forEach(_e=>{localStorage.removeItem(_e),console.log(" Removed localStorage key:",_e)}),console.log(" Cleared test creation state from localStorage")},[e]);S.useCallback(async()=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in clearAllTestFields, redirecting to login");return}console.log(" Clearing all test form fields..."),P({testName:"",numQuestions:0,numOptions:0,questions:{}}),g(null),B([]),Y(null),console.log(" Cleared all test form fields")},[e]);const G=S.useCallback(()=>{console.log(" Resetting Excel upload state..."),Qe({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),["multiple-choice","true-false","input","word-matching"].forEach(_e=>{const Fe=document.querySelector(`.excel-upload-btn[data-test-type="${_e}"]`);Fe&&(Fe.style.display="none",console.log(" Excel button hidden for:",_e));const De=document.querySelector(`.excel-hint[data-test-type="${_e}"]`);De&&(De.style.display="none",console.log(" Excel hint hidden for:",_e));const qe=document.querySelector(`.excel-file-input[data-test-type="${_e}"]`);qe&&(qe.value="",console.log(" File input cleared for:",_e))}),console.log(" Excel upload state reset complete")},[]),W=S.useCallback(()=>{console.log(" Setting up auto-save listeners for initial form fields..."),["testName","numQuestions","numOptions","enableTimer","timerMinutes","isShuffled"].forEach(_e=>{const Fe=document.getElementById(_e);Fe&&Fe.addEventListener("input",()=>{console.log(` Auto-save triggered for field: ${_e}`)})}),console.log(" Form auto-save setup complete")},[]);S.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in saveFormDataForStep, redirecting to login");return}console.log("  saveFormDataForStep called with step:",de),console.log("  Call stack:",new Error().stack);const _e={};switch(de){case"testTypeSelection":break;case"multipleChoiceForm":_e.testName=j.testName||"",_e.numQuestions=j.numQuestions||"",_e.numOptions=j.numOptions||"",_e.questions=j.questions||{};break;case"trueFalseForm":_e.testName=j.testName||"",_e.numQuestions=j.numQuestions||"",_e.questions=j.questions||{};break;case"inputForm":_e.testName=j.testName||"",_e.numQuestions=j.numQuestions||"",_e.questions=j.questions||{};break;case"formCreation":_e.testName=j.testName||"",_e.numQuestions=j.numQuestions||"",_e.numOptions=j.numOptions||"",_e.questions=j.questions||{};break;default:console.log(" Unknown step for form data save:",de);return}localStorage.setItem("test_creation_form_data",JSON.stringify({step:de,data:_e,timestamp:Date.now()})),console.log(" Saved form data for step:",de,_e)},[e,j]);const M=S.useCallback(async de=>{console.log(" Restoring form data for step:",de);try{const _e=localStorage.getItem(`form_data_${de}`);if(_e){const Fe=JSON.parse(_e);console.log(" Restored form data:",Fe),P(De=>{const qe={...De,...Fe};return console.log(" Updated formData with restored data:",qe),console.log(" Matching test data in restored data:",qe.matchingTestData),qe}),Object.keys(Fe).forEach(De=>{const qe=document.getElementById(De);qe&&Fe[De]!==void 0&&(qe.value=Fe[De])}),console.log(" Form data restored for step:",de)}else console.log(" No saved data found for step:",de)}catch(_e){console.error(" Error restoring form data:",_e)}},[e]),I=S.useCallback(()=>{console.log(" Setting up multiple choice form auto-save..."),["mcNumOptions"].forEach(Fe=>{const De=document.getElementById(Fe);De&&De.addEventListener("input",()=>{console.log(` Auto-save triggered for MC field: ${Fe}`)})}),document.querySelectorAll("#mcQuestionsContainer input, #mcQuestionsContainer textarea, #mcQuestionsContainer select").forEach(Fe=>{Fe.addEventListener("input",()=>{console.log(" Auto-save triggered for MC question field")})}),console.log(" Multiple choice form auto-save setup complete")},[]),z=S.useCallback(()=>{console.log(" Setting up true/false form auto-save..."),document.querySelectorAll("#tfQuestionsContainer input, #tfQuestionsContainer textarea, #tfQuestionsContainer select").forEach(_e=>{_e.addEventListener("input",()=>{console.log(" Auto-save triggered for TF question field")})}),console.log(" True/false form auto-save setup complete")},[]),q=S.useCallback(()=>{console.log(" Setting up input form auto-save..."),document.querySelectorAll("#inputQuestionsContainer input, #inputQuestionsContainer textarea, #inputQuestionsContainer select").forEach(_e=>{_e.addEventListener("input",()=>{console.log(" Auto-save triggered for Input question field")})}),console.log(" Input form auto-save setup complete")},[]),ne=S.useCallback(de=>{console.log(" showExcelUploadButton called with testType:",de);const _e=de==="multiple-choice"?"multipleChoice":de==="true-false"?"trueFalse":de==="input"?"input":de;Qe(Fe=>({...Fe,[_e]:{...Fe[_e],buttonVisible:!0}}))},[]),X=S.useCallback(de=>{console.log(" showExcelHint called with testType:",de);const _e=de==="multiple-choice"?"multipleChoice":de==="true-false"?"trueFalse":de==="input"?"input":de;Qe(Fe=>({...Fe,[_e]:{...Fe[_e],hintVisible:!0}}))},[]),se=S.useCallback(async(de,_e,Fe)=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTestAssignmentOptions, redirecting to login");return}console.log("displayTestAssignmentOptions called with:",{classes:de,testType:_e,testId:Fe}),y(de),console.log(" Test assignment options displayed for:",{testType:_e,testId:Fe,classesCount:de.length})},[e]),ce=S.useCallback(async(de,_e)=>{try{if(console.log("Loading teacher grades and classes for test assignment"),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}console.log("Teacher ID:",e.teacher_id);const De=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log("Teacher subjects response:",De),De.success&&De.subjects&&De.subjects.length>0?(console.log("Teacher subjects loaded:",De.subjects),y(De.subjects),se(De.subjects,de,_e)):(console.log("No teacher subjects found"),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(Fe){console.error("Error loading teacher grades and classes:",Fe),r("Error loading teacher grades and classes","error")}},[e,r,se]),pe=S.useCallback(async()=>{if(console.log(" Loading available classes..."),!e||!e.teacher_id){console.error("No valid teacher session found, redirecting to login");return}try{const _e=await(await window.tokenManager.makeAuthenticatedRequest(`/.netlify/functions/get-teacher-subjects?teacher_id=${e.teacher_id}`)).json();console.log(" Teacher subjects response:",_e),_e.success&&_e.subjects&&_e.subjects.length>0?(console.log(" Teacher subjects loaded:",_e.subjects),y(_e.subjects)):(console.log("No teacher subjects found"),y([]),r("No subjects found. Please assign subjects to grades and classes first.","warning"))}catch(de){console.error(" Error loading available classes:",de),r("Failed to load available classes","error")}},[e,r]);S.useCallback(async(de,_e)=>{if(i){o(!1);return}if(!e||!e.teacher_id){console.error("No valid teacher session found in showTestAssignment, redirecting to login");return}ee(),Q("testAssignment"),Y(_e),g(de),u("testAssignment"),ce(de,_e),console.log(" Test assignment interface shown for:",{testType:de,testId:_e})},[i,e,ee,Q,ce]);const be=S.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayTeacherActiveTests, redirecting to login");return}if(console.log(" Displaying teacher active tests:",de),de.length===0){Je([]);return}Je(de),console.log(" Active tests displayed:",de.length,"tests")},[e]);S.useCallback(async(de,_e)=>{try{console.log(" Loading test questions for:",{testType:de,testId:_e});const Fe=await Pn.getTestQuestions(_e,de);return console.log(" Test questions loaded:",Fe),Fe}catch(Fe){throw console.error("Error loading test questions:",Fe),Fe}},[]),S.useCallback((de,_e,Fe,De)=>{console.log(" Showing teacher test details modal:",{testType:de,testId:_e,testName:Fe,questionsCount:De.length}),console.log("Test Details:",{testType:de,testId:_e,testName:Fe,questions:De.map(qe=>({id:qe.question_id,question:qe.question,correctAnswer:qe.correct_answer}))}),r(`Test details for "${Fe}" loaded successfully.`,"success")},[r]);const oe=S.useCallback(async()=>{console.log(" DEBUG: loadTeacherActiveTests called");try{console.log(" DEBUG: Fetching teacher active tests using JWT authentication...");const de=await Pn.getTeacherTests();console.log(" DEBUG: Tests loaded:",de),de&&de.length>0?(console.log(" DEBUG: Success! Displaying",de.length,"tests"),be(de)):(console.log(" DEBUG: No tests found"),Je([]))}catch(de){console.error(" DEBUG: Error loading active tests:",de),r("Error loading active tests.","error")}},[r,be]),je=S.useCallback(()=>{console.log("showTestCreationSuccessMessage called"),r("Test created and assigned successfully!","success"),u("typeSelection"),P({testName:"",numQuestions:0,numOptions:0,questions:{}}),B([]),o(!1),a(!1),U()},[r,U]),Re=S.useCallback(async(de,_e)=>{if(console.log(" === ASSIGN TEST TO CLASSES DEBUG START ==="),console.log(" Test Type:",de),console.log(" Test ID:",_e),console.log(" Current formData:",j),console.log(" Selected Classes:",D),console.log(" User:",e),!e||!e.teacher_id){console.error(" No valid teacher session found in assignTestToClasses, redirecting to login"),r("Missing teacher session. Please sign in again.","error");return}if(console.log(" Teacher ID:",e.teacher_id),D.length===0){console.warn(" No classes selected"),r("Please select at least one class.","warning");return}try{console.log(" Preparing test + assignment request..."),await gu.loadAcademicCalendar();const De=gu.getCurrentTerm()?.id;if(!De)throw new Error("No current academic period found");const qe=D.map(pt=>{const or={grade:parseInt(pt.grade),class:parseInt(pt.class),subject_id:parseInt(pt.subject_id),academic_period_id:De,due_date:null};return console.log(" Created assignment:",or),or});if(console.log(" Final assignments array:",qe),de==="matching"){console.log(" Processing matching test..."),console.log(" Setting isAssigningTest to true for matching test..."),F(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Tr=>setTimeout(Tr,100));const pt=j.matchingTestData;if(console.log(" Matching test data from formData:",pt),!pt){console.error(" Matching test data not found in formData"),r("Matching test data not found. Please recreate the test.","error");return}console.log(" Matching test data found, processing...");let or;pt.processedQuestions?(console.log(" Using pre-processed questions from MatchingTestCreator"),or=pt.processedQuestions):(console.log(" Converting blocks to questions (fallback)..."),console.log(" Blocks:",pt.blocks),console.log(" Words:",pt.words),console.log(" Arrows:",pt.arrows),or=pt.blocks.map((Tr,Gr)=>{const Lr=pt.words.find(Xr=>Xr.blockId===Tr.id)?.word||`Word ${Gr+1}`,zn=pt.arrows.some(Xr=>Xr.startBlock===Tr.id),br=pt.arrows.find(Xr=>Xr.startBlock===Tr.id)||null,fn={question_id:Gr+1,word:Lr,block_coordinates:{x:Tr.x,y:Tr.y,width:Tr.width,height:Tr.height},has_arrow:zn,arrow:br?{startX:br.startX,startY:br.startY,endX:br.endX,endY:br.endY,style:br.style||{}}:null};return console.log(` Question ${Gr+1}:`,fn),fn})),console.log(" Final questions array:",or);const Wr={teacher_id:e.teacher_id,test_name:j.testName,image_url:pt.imageUrl,num_blocks:pt.blocks.length,questions:or,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:qe};console.log(" Final matching test data payload:",Wr),console.log(" Calling testService.saveMatchingTest...");const Fr=await Pn.saveMatchingTest(Wr);console.log(" API Response:",Fr),Fr.success?(console.log(" Matching test created and assigned successfully!"),r("Matching test created and assigned successfully!","success"),console.log("Matching test created and assigned successfully"),o(!0),Xe()):(console.error(" Failed to create matching test:",Fr.message),r("Error creating and assigning matching test: "+Fr.message,"error")),F(!1);return}if(de==="wordMatching"){console.log(" Processing word matching test..."),console.log(" Setting isAssigningTest to true for word matching test..."),F(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Tr=>setTimeout(Tr,100));const pt=j.wordMatchingData;if(console.log(" Word matching test data from formData:",pt),!pt){console.error(" Word matching test data not found in formData"),r("Word matching test data not found. Please recreate the test.","error");return}console.log(" Word matching test data found, processing...");const or=pt.wordPairs.map((Tr,Gr)=>({question_id:Gr+1,left_word:Tr.leftWord,right_word:Tr.rightWord}));console.log(" Final word matching questions array:",or);const Wr={teacher_id:e.teacher_id,test_type:"word_matching",test_name:j.testName,num_questions:pt.wordPairs.length,interaction_type:pt.interactionType||"drag",questions:or,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:qe};console.log(" Final word matching test data payload:",Wr),console.log(" Calling testService.assignTestToClasses for word matching...");const Fr=await Pn.assignTestToClasses(Wr);console.log(" API Response:",Fr),Fr.success?(console.log(" Word matching test created and assigned successfully!"),r("Word matching test created and assigned successfully!","success"),console.log("Word matching test created and assigned successfully"),o(!0),Xe()):(console.error(" Failed to create word matching test:",Fr.message),r("Error creating and assigning word matching test: "+Fr.message,"error")),F(!1);return}if(de==="drawing"){console.log(" Processing drawing test..."),console.log(" Setting isAssigningTest to true for drawing test..."),F(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Tr=>setTimeout(Tr,100));const pt=j.drawingData;if(console.log(" Drawing test data from formData:",pt),!pt){console.error(" Drawing test data not found in formData"),r("Drawing test data not found. Please recreate the test.","error");return}console.log(" Drawing test data found, processing...");const or=pt.questions||[];console.log(" Drawing questions array:",or);const Wr={teacher_id:e.teacher_id,test_type:"drawing",test_name:j.testName,num_questions:pt.num_questions,passing_score:pt.passing_score,questions:or,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,assignments:qe};console.log(" Final drawing test data payload:",Wr),console.log(" Calling testService.assignTestToClasses...");const Fr=await Pn.assignTestToClasses(Wr);console.log(" API Response:",Fr),Fr.success?(console.log(" Drawing test created and assigned successfully!"),r("Drawing test created and assigned successfully!","success"),o(!0),Xe()):(console.error(" Failed to create drawing test:",Fr.message),r("Error creating and assigning drawing test: "+Fr.message,"error")),F(!1);return}if(de==="fillBlanks"){console.log(" Processing fill blanks test..."),console.log(" Setting isAssigningTest to true for fill blanks test..."),F(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Tr=>setTimeout(Tr,100));const pt=j.fillBlanksData;if(console.log(" Fill blanks test data from formData:",pt),!pt){console.error(" Fill blanks test data not found in formData"),r("Fill blanks test data not found. Please recreate the test.","error");return}console.log(" Fill blanks test data found, processing...");const or=pt.blanks||[];console.log(" Fill blanks questions array:",or);const Wr={teacher_id:e.teacher_id,test_type:"fill_blanks",test_name:j.testName,test_text:pt.test_text,num_questions:pt.num_questions,num_blanks:pt.num_blanks,separate_type:pt.separate_type,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:or,assignments:qe};console.log(" Final fill blanks test data payload:",Wr),console.log(" Calling testService.assignTestToClasses...");const Fr=await Pn.assignTestToClasses(Wr);console.log(" API Response:",Fr),Fr.success?(console.log(" Fill blanks test created and assigned successfully!"),r("Fill blanks test created and assigned successfully!","success"),o(!0),Xe()):(console.error(" Failed to create fill blanks test:",Fr.message),r("Error creating and assigning fill blanks test: "+Fr.message,"error")),F(!1);return}if(de==="speaking"){console.log(" Processing speaking test..."),console.log(" Setting isAssigningTest to true for speaking test..."),F(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(Tr=>setTimeout(Tr,100));const pt=j.speakingData;if(console.log(" Speaking test data from formData:",pt),!pt){console.error(" Speaking test data not found in formData"),r("Speaking test data not found. Please recreate the test.","error");return}console.log(" Speaking test data found, processing...");const or={teacher_id:e.teacher_id,test_type:"speaking",test_name:j.testName,time_limit:pt.time_limit,min_duration:pt.min_duration,max_duration:pt.max_duration,max_attempts:pt.max_attempts,min_words:pt.min_words,passing_score:pt.passing_score,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,questions:pt.questions,assignments:qe};console.log(" Final speaking test data payload:",or),console.log(" Calling save-speaking-test-with-assignments for speaking test...");const Fr=await(await window.tokenManager.makeAuthenticatedRequest("/.netlify/functions/save-speaking-test-with-assignments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(or)})).json();console.log(" API Response:",Fr),Fr.success?(console.log(" Speaking test created and assigned successfully!"),r("Speaking test created and assigned successfully!","success"),o(!0),Xe()):(console.error(" Failed to create speaking test:",Fr.message),r("Error creating and assigning speaking test: "+Fr.message,"error")),F(!1);return}console.log(" Processing non-matching test..."),console.log(" Form data questions:",j.questions);const zt=Object.keys(j.questions).map(pt=>{const or=j.questions[pt];console.log(` Processing question ${pt}:`,or);let Wr;if(de==="input")Wr={correct_answers:or.correct_answers||[or.correctAnswer||""]};else if(de==="trueFalse"){const Tr=or.correct_answer||or.correctAnswer||or.correct_answers?.[0]||"";Wr={correct_answer:Tr==="true"}}else Wr={correct_answer:or.correctAnswer||or.correct_answer||or.correct_answers?.[0]||""};const Fr={question_id:parseInt(pt),question:or.question,...Wr,options:or.options||[]};return console.log(` Question ${pt} correct_answers:`,or.correct_answers),console.log(` Question ${pt} correctAnswer:`,or.correctAnswer),console.log(` Converted question ${pt}:`,Fr),Fr});console.log(" Final questions array:",zt);const _r={teacher_id:e.teacher_id,test_type:Oje[de],test_name:j.testName,num_questions:j.numQuestions,num_options:j.numOptions,questions:zt,allowed_time:j.enableTimer?Math.max(0,Math.floor(Number(j.timerMinutes||0)*60)):null,is_shuffled:!!j.isShuffled,assignments:qe};console.log(" Final test data payload:",_r),console.log(" Setting isAssigningTest to true..."),F(!0),console.log(" isAssigningTest set to true, overlay should show"),await new Promise(pt=>setTimeout(pt,100)),console.log(" Calling testService.assignTestToClasses...");const jr=await Pn.assignTestToClasses(_r);console.log(" API Response:",jr),jr.success?(console.log(" Test created and assigned successfully!"),r("Test created and assigned successfully!","success"),console.log("Test created and assigned successfully"),o(!0),Xe()):(console.error(" Failed to create and assign test:",jr.message),r("Error creating and assigning test: "+jr.message,"error"))}catch(Fe){console.error(" Exception in assignTestToClasses:",Fe),console.error("Error creating and assigning test:",Fe),r("Error creating and assigning test. Please try again.","error")}finally{F(!1)}console.log(" === ASSIGN TEST TO CLASSES DEBUG END ===")},[e,D,j,r,je]),Xe=S.useCallback(async()=>{console.log("returnToMainCabinet called - restoring main cabinet view");try{a(!1),o(!1),u("typeSelection"),g(null),Y(null),B([]),L(),U(),je(),console.log(" Returned to main cabinet")}catch(de){console.error("Error returning to main cabinet:",de)}},[L,U,je]),[ft,Je]=S.useState([]),[Ht,Ve]=S.useState(!1);S.useCallback(async()=>{console.log(" Refreshing active tests data...");try{await oe(),r("Active tests data refreshed.","success")}catch(de){console.error("Error refreshing active tests data:",de),r("Error refreshing data.","error")}},[oe,r]);const[at,gt]=S.useState([]),[Te,bt]=S.useState([]),[Ct,Lt]=S.useState(!1),[Yt,it]=S.useState(!1),xt=S.useCallback(async de=>{if(!e||!e.teacher_id){console.error("No valid teacher session found in displayExistingSubjectsInSelection, redirecting to login");return}console.log("Displaying existing subjects in selection interface:",de),gt(de),console.log(" Existing subjects displayed in selection:",de.length,"subjects")},[e]);S.useCallback(async()=>{try{console.log("Loading existing subjects...");const de=await Hs.getTeacherSubjects();console.log("Existing subjects loaded:",de),de&&de.length>0?xt(de):(console.log("No existing subjects found"),gt([]))}catch(de){console.error("Error loading existing subjects:",de),r("Error loading subjects.","error")}},[r,xt]);const Mt=S.useCallback(de=>{console.log("Checking for outside click...");const _e=document.getElementById("dropdownMenu"),Fe=document.querySelector("[data-menu-button]");_e&&!_e.contains(de.target)&&!Fe?.contains(de.target)&&(console.log("Outside click detected, closing menu"),_e.classList.remove("show"),document.removeEventListener("click",Mt))},[]),[rt,Qe]=S.useState({multipleChoice:{buttonVisible:!1,hintVisible:!1},trueFalse:{buttonVisible:!1,hintVisible:!1},input:{buttonVisible:!1,hintVisible:!1}}),It=S.useCallback((de,_e)=>{const Fe=de.target.files[0];if(!Fe)return;if(!Fe.name.match(/\.(xlsx|xls)$/i)){r("Please select a valid Excel file (.xlsx or .xls)","error"),de.target.value="";return}if(Fe.size>5*1024*1024){r("File is too large. Please select a file smaller than 5MB.","error"),de.target.value="";return}E(!0);const De=new FileReader;De.onload=function(qe){try{console.log(" File loaded, processing data...");const zt=new Uint8Array(qe.target.result),_r=l8(zt,{type:"array"}),jr=_r.SheetNames[0],pt=_r.Sheets[jr],or=s4.sheet_to_json(pt,{header:1});console.log(" Parsed Excel data:",or),Rt(or,_e),E(!1)}catch(zt){console.error("Error processing Excel file:",zt),r("Error reading Excel file: "+zt.message,"error"),de.target.value="",E(!1)}},De.onerror=function(){r("Failed to read file","error"),de.target.value="",E(!1)},De.readAsArrayBuffer(Fe)},[r]),Tt=S.useCallback(()=>{console.log(" Initializing Excel upload for all test types...");const de=document.querySelectorAll(".excel-upload-btn");console.log(` Found ${de.length} Excel upload buttons`),de.forEach((_e,Fe)=>{const De=_e.dataset.testType,qe=document.querySelector(`.excel-file-input[data-test-type="${De}"]`);console.log(` Processing button ${Fe+1}: testType=${De}, fileInput=${qe?"found":"not found"}`),qe?(_e._excelClickHandler&&_e.removeEventListener("click",_e._excelClickHandler),qe._excelChangeHandler&&qe.removeEventListener("change",qe._excelChangeHandler),_e._excelClickHandler=()=>{console.log(` Excel upload button clicked for test type: ${De}`),qe.click()},qe._excelChangeHandler=zt=>{console.log(` File input changed for test type: ${De}`),It(zt,De)},_e.addEventListener("click",_e._excelClickHandler),qe.addEventListener("change",qe._excelChangeHandler),console.log(` Excel upload initialized for test type: ${De}`)):console.warn(` File input not found for test type: ${De}`)}),console.log(" Excel upload initialization complete")},[It]),Rt=S.useCallback((de,_e)=>{const Fe=de.filter(pt=>Array.isArray(pt)&&pt.length>0&&pt.some(or=>or&&or.toString().trim()!==""));console.log(" Original Excel data rows:",de.length),console.log(" Filtered Excel data rows:",Fe.length);const qe=cr(Fe,_e).dataRows;if(qe.length===0){const pt="No data rows found after header processing. Please check your Excel file.";r(pt,"error"),alert(pt),Ie(_e);return}console.log(` Processing Excel data for test type: ${_e}`),console.log(" Data rows after header processing:",qe);const zt=ur(qe,_e);if(console.log(" Recognition result:",zt),!zt.recognized){console.log(` Excel data recognition failed for test type: ${_e}`);const pt="Excel data recognition failed. Please check your file format.";r(pt,"error"),alert(pt),Ie(_e);return}console.log(` Excel data recognition successful for test type: ${_e}`);const _r=qe.length,jr=Me(_e);if(jr===0)console.log(` No question count specified, using CSV count: ${_r}`),P(pt=>({...pt,numQuestions:_r}));else if(_r!==jr){const pt=`Your CSV file has ${_r} data rows, but you specified ${jr} questions.

Please either:
1. Change your question count to ${_r}, or
2. Fix your CSV file to have exactly ${jr} data rows

Then try uploading again.`;r(pt,"error"),Ie(_e);return}Ce(qe,_e)},[r]),cr=S.useCallback((de,_e)=>{if(de.length===0)return{hasHeaders:!1,headerRow:null,dataRows:de};const Fe=de[0],De=hr(_e);if(Cr(Fe,De).isLikelyHeader){const zt=`The first row of your Excel file looks like it contains headers:

"${Fe.join(" | ")}"

Does the first row contain column headers?

Click "OK" if YES (headers will be removed)
Click "Cancel" if NO (first row will be treated as data)`;if(window.confirm(zt))return{hasHeaders:!0,headerRow:Fe,dataRows:de.slice(1)}}return{hasHeaders:!1,headerRow:null,dataRows:de}},[]),hr=S.useCallback(de=>{switch(de){case"multipleChoice":return{keywords:["question","answer","correct","option","a","b","c","d","e","f"],expectedColumns:4};case"trueFalse":return{keywords:["question","answer","correct","true","false"],expectedColumns:2};case"input":return{keywords:["question","answer","correct"],expectedColumns:2};default:return{keywords:[],expectedColumns:0}}},[]),Cr=S.useCallback((de,_e)=>{if(!de||de.length===0)return{isLikelyHeader:!1};if(de.length<_e.expectedColumns)return{isLikelyHeader:!1};const Fe=de.join(" ").toLowerCase(),De=_e.keywords.filter(zt=>Fe.includes(zt.toLowerCase()));return{isLikelyHeader:De.length>_e.keywords.length/2,keywordMatches:De}},[]),ur=S.useCallback((de,_e)=>{if(de.length===0)return r("No data rows found. Please check your Excel file.","error"),{recognized:!1,data:[]};console.log(` Checking data pattern for test type: ${_e}`),console.log(" Excel data to validate:",de);const Fe=Sr(de,_e);if(console.log(" Recognition result:",Fe),!Fe.matches){const De=`Your Excel file doesn't match the expected format.

Required format:
${we(_e)}

Please review your Excel file and make sure it follows this format exactly.

Then try uploading again.`;return console.log(" Data pattern validation failed:",De),console.log(" Calling showNotification with message:",De),r(De,"error"),console.log(" showNotification called"),alert(De),{recognized:!1,data:[]}}return console.log(` Data pattern validation passed for test type: ${_e}`),{recognized:!0,data:de}},[r]),Sr=S.useCallback((de,_e)=>{if(_e==="multipleChoice")for(let Fe=0;Fe<de.length;Fe++){const De=de[Fe];if(De.length<4)return{matches:!1,issue:`Row ${Fe+1} has ${De.length} columns but needs at least 4`};if(!De[0]||De[0].toString().trim()==="")return{matches:!1,issue:`Row ${Fe+1} has no question in column 1`};if(!De[1]||De[1].toString().trim()==="")return{matches:!1,issue:`Row ${Fe+1} has no correct answer in column 2`}}else if(_e==="trueFalse")for(let Fe=0;Fe<de.length;Fe++){const De=de[Fe];if(De.length<2)return{matches:!1,issue:`Row ${Fe+1} has ${De.length} columns but needs at least 2`};if(!De[0]||De[0].toString().trim()==="")return{matches:!1,issue:`Row ${Fe+1} has no question in column 1`};const qe=De[1]?.toString().trim().toLowerCase();if(!qe||!["true","false","t","f"].includes(qe))return{matches:!1,issue:`Row ${Fe+1} has invalid correct answer in column 2 (must be True/False)`}}else if(_e==="input")for(let Fe=0;Fe<de.length;Fe++){const De=de[Fe];if(De.length<2)return{matches:!1,issue:`Row ${Fe+1} has ${De.length} columns but needs at least 2`};if(!De[0]||De[0].toString().trim()==="")return{matches:!1,issue:`Row ${Fe+1} has no question in column 1`};if(!De[1]||De[1].toString().trim()==="")return{matches:!1,issue:`Row ${Fe+1} has no correct answer in column 2`}}return{matches:!0}},[]),we=S.useCallback(de=>{switch(de){case"multipleChoice":return`Column 1: Question
Column 2: Correct Answer (A, B, C, D, E, or F)
Column 3: Option A
Column 4: Option B
Column 5: Option C (optional)
Column 6: Option D (optional)
Column 7: Option E (optional)
Column 8: Option F (optional)`;case"trueFalse":return`Column 1: Question
Column 2: Correct Answer (True or False)`;case"input":return`Column 1: Question
Column 2: Correct Answer`;default:return"Unknown test type"}},[]),Me=S.useCallback(de=>j.numQuestions||0,[j.numQuestions]),Ie=S.useCallback(de=>{console.log(` Clearing file input for test type: ${de}`)},[]),Ce=S.useCallback((de,_e)=>{switch(console.log(` populateFromExcelForTestType called with testType: ${_e}`),_e){case"multipleChoice":case"multiple-choice":Ze(de);break;case"trueFalse":case"true-false":wt(de);break;case"input":Nt(de);break;default:console.log(` Unknown test type: ${_e}`)}},[]),Ze=S.useCallback(de=>{console.log(" populateMultipleChoiceFromExcel called with:",de);const _e=Math.max(...de.map(qe=>qe.length-2)),Fe=Math.min(_e,6);console.log(` Excel data has ${_e} option columns, using ${Fe} options`),P(qe=>({...qe,numOptions:Fe}));const De={};de.forEach((qe,zt)=>{const _r=zt+1;console.log(` Row ${zt+1} data:`,qe);const jr={question:(qe[0]||"").toString().trim(),options:[],correctAnswer:(qe[1]||"").toString().trim().toUpperCase()};console.log(` Question ${_r} correctAnswer:`,jr.correctAnswer),["A","B","C","D","E","F"].slice(0,Fe).forEach((Wr,Fr)=>{const Tr=(qe[Fr+2]||"").toString().trim();console.log(` Option ${Fr} (${Wr}):`,Tr),jr.options.push(Tr)}),De[_r]=jr}),P(qe=>{const zt={...qe,questions:De};return console.log(" Updating form data with:",zt),zt}),console.log(" Populated multiple choice questions from Excel:",De),r(`Successfully loaded ${de.length} questions from CSV file!`,"success"),I(),Oe("multiple-choice")},[j.numOptions,I,r]),wt=S.useCallback(de=>{console.log(" populateTrueFalseFromExcel called with:",de);const _e={};de.forEach((Fe,De)=>{const qe=De+1,zt={question:(Fe[0]||"").toString().trim(),correctAnswer:Fe[1]?.toString().trim().toLowerCase()==="true"?"true":"false"};_e[qe]=zt}),P(Fe=>({...Fe,questions:_e})),console.log(" Populated true/false questions from Excel:",_e),r(`Successfully loaded ${de.length} questions from CSV file!`,"success"),z(),Oe("true-false")},[z,r]),Nt=S.useCallback(de=>{console.log(" populateInputFromExcel called with:",de);const _e={};de.forEach((Fe,De)=>{const qe=De+1,zt=[];for(let jr=1;jr<Fe.length;jr++){const pt=(Fe[jr]||"").toString().trim();pt&&zt.push(pt)}const _r={question:(Fe[0]||"").toString().trim(),correctAnswer:zt[0]||"",correct_answers:zt};console.log(` Excel question ${qe} data:`,_r),_e[qe]=_r}),P(Fe=>({...Fe,questions:_e})),console.log(" Populated input questions from Excel:",_e),r(`Successfully loaded ${de.length} questions from Excel file!`,"success"),q(),Oe("input")},[q,r]),Oe=S.useCallback(de=>{switch(console.log(` Reattaching form event listeners for test type: ${de}`),document.querySelectorAll('[data-listener-attached="true"]').forEach(Fe=>{Fe.removeEventListener("input",()=>{}),Fe.removeAttribute("data-listener-attached")}),de){case"multiple-choice":I();break;case"true-false":z();break;case"input":q();break;default:console.warn("Unknown test type for event listener reattachment:",de)}console.log(` Form event listeners reattached for test type: ${de}`)},[I,z,q]),Ke=S.useCallback(()=>{const de=localStorage.getItem("test_creation_state");if(!de)return console.log(" No test creation state found in localStorage"),!1;try{const _e=JSON.parse(de);console.log(" Found test creation state:",_e);const Fe=Date.now()-_e.timestamp,De=1800*1e3;if(Fe>De)return console.log(" Test creation state is too old, clearing it"),U(),!1;switch(a(!0),console.log(" Restored isInTestCreation flag to true"),ee(),_e.excelState&&G(),_e.currentStep){case"testTypeSelection":console.log(" Restoring test type selection step"),u("typeSelection");break;case"multipleChoiceForm":console.log(" Restoring multiple choice form step"),g("multipleChoice"),u("formCreation");break;case"trueFalseForm":console.log(" Restoring true/false form step"),g("trueFalse"),u("formCreation");break;case"inputForm":console.log(" Restoring input form step"),g("input"),u("formCreation");break;case"testAssignment":case"assignment":console.log(" Restoring test assignment step"),console.log(" Cannot restore test assignment step without test data, going back to type selection"),u("typeSelection");break;default:console.log(" Unknown step in state, defaulting to type selection"),u("typeSelection")}return M(_e.currentStep),!0}catch(_e){return console.error(" Error restoring test creation state:",_e),U(),!1}},[U,ee,G,M]);S.useEffect(()=>{console.log(" Initializing Teacher Tests..."),re(),Ke(),pe(),Tt()},[re,Ke,pe,Tt]),S.useEffect(()=>{j.numQuestions>0&&h&&h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&(console.log(" Excel upload buttons rendered, initializing event listeners..."),setTimeout(()=>{Tt()},100))},[j.numQuestions,h,Tt]);const st=de=>{console.log(" Test type selected:",de),console.log(" Setting testType to:",de),g(de),u("formCreation"),P({testName:"",numQuestions:0,numOptions:0,questions:{},enableTimer:!1,timerMinutes:""}),Q("formCreation"),setTimeout(()=>{Tt()},100)},Vt=(de,_e)=>{P(Fe=>({...Fe,[de]:_e}))},qt=(de,_e,Fe)=>{P(De=>({...De,questions:{...De.questions,[de]:{...De.questions[de],[_e]:Fe}}}))},gr=S.useCallback((de,_e)=>{P(Fe=>{const qe=[...Fe.questions[de]?.options||[]];qe[_e]=null;const zt=String.fromCharCode(65+_e),_r=Fe.questions[de]?.correctAnswer||"",jr=_r===zt?"":_r;return{...Fe,questions:{...Fe.questions,[de]:{...Fe.questions[de],options:qe,correctAnswer:jr}}}})},[]),Vr=S.useCallback(de=>{P(_e=>{const Fe=_e.questions[de]?.options||[];if(Fe.filter(pt=>pt!=null).length>=6)return _e;let qe=[...Fe];const zt=qe.findIndex(pt=>pt===null);zt!==-1?qe[zt]="":qe.push("");const _r=qe.filter(pt=>pt!=null).length,jr=Math.max(_e.numOptions||0,_r);return{..._e,numOptions:jr,questions:{..._e.questions,[de]:{..._e.questions[de],options:qe}}}})},[]),Nr=(de,_e,Fe,De=0)=>{const qe={};for(let zt=1;zt<=Fe;zt++)de==="multipleChoice"?qe[zt]={question:"",options:Array.from({length:De},()=>""),correctAnswer:""}:de==="trueFalse"?qe[zt]={question:"",correctAnswer:""}:de==="input"&&(qe[zt]={question:"",correct_answers:[""]});P(zt=>({...zt,questions:qe})),de==="multipleChoice"?(ne("multiple-choice"),X("multiple-choice")):de==="trueFalse"?(ne("true-false"),X("true-false")):de==="input"&&(ne("input"),X("input"))},dn=async()=>{if(!h||!j.testName||!j.numQuestions){r("Please fill in all required fields","error");return}console.log(" Test form completed, proceeding to assignment step"),Q("testAssignment",j),u("testAssignment"),r("Test form completed! Now select classes and subjects.","success")},me=(de,_e,Fe,De,qe)=>{B(Fe?zt=>[...zt,{grade:de,class:_e,subject_id:De,subject:qe}]:zt=>zt.filter(_r=>!(_r.grade===de&&_r.class===_e&&_r.subject_id===De)))},Ne=S.useCallback(async de=>{console.log(" [DEBUG] handleMatchingTestSave called"),console.log(" [DEBUG] Received testData:",de),console.log(" [DEBUG] Current formData:",j),console.log(" [DEBUG] Current testType:",h),console.log(" [DEBUG] Current user:",e),console.log(" [DEBUG] Current currentStep:",c),_(!0);try{const _e=de.blocks.map((qe,zt)=>{const _r=de.words.find(or=>or.blockId===qe.id)?.word||`Word ${zt+1}`,jr=de.arrows.some(or=>or.startBlock===qe.id),pt=de.arrows.find(or=>or.startBlock===qe.id)||null;return{question_id:zt+1,word:_r,block_coordinates:{x:qe.x,y:qe.y,width:qe.width,height:qe.height},has_arrow:jr,arrow:pt?{startX:pt.startX,startY:pt.startY,endX:pt.endX,endY:pt.endY,style:pt.style||{}}:null}}),Fe={teacher_id:e.teacher_id,test_name:j.testName||`Matching Test - ${new Date().toLocaleString()}`,image_url:de.imageUrl,num_blocks:de.blocks.length,questions:_e,assignments:[]};console.log(" Sending matching test payload:",Fe);const De={...j,testName:Fe.test_name,numQuestions:Fe.num_blocks,numOptions:0,questions:_e.reduce((qe,zt,_r)=>(qe[_r+1]={question:zt.word,correctAnswer:zt.word,options:[]},qe),{}),matchingTestData:de};console.log(" Assignment form data:",De),P(De),Q("testAssignment",De),console.log(" Setting current step to testAssignment"),u("testAssignment"),r("Matching test data saved! Now select classes and subjects.","success")}catch(_e){console.error(" Error saving matching test:",_e),r("Failed to save matching test: "+_e.message,"error")}finally{_(!1)}},[e,j,h,r,Q]),ve=S.useCallback(()=>{console.log(" Cancelling matching test creation"),u("typeSelection"),P({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ee=S.useCallback(async de=>{console.log(" [DEBUG] handleWordMatchingTestSave called"),console.log(" [DEBUG] Received testData:",de),_(!0);try{P(_e=>({..._e,wordMatchingData:de,numQuestions:de.numQuestions||de.wordPairs?.length||0})),u("testAssignment"),r("Word matching test created! Now assign it to classes.","success")}catch(_e){console.error("Error saving word matching test:",_e),r("Failed to save word matching test: "+_e.message,"error")}finally{_(!1)}},[r]),ue=S.useCallback(()=>{console.log(" Cancelling word matching test creation"),u("typeSelection"),P({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),he=S.useCallback(async de=>{console.log(" [DEBUG] handleDrawingTestSave called"),console.log(" [DEBUG] Received testData:",de),_(!0);try{P(_e=>({..._e,drawingData:de,numQuestions:de.num_questions||de.questions?.length||0})),u("testAssignment"),r("Drawing test created! Now assign it to classes.","success")}catch(_e){console.error(" Error saving drawing test:",_e),r("Error saving drawing test","error")}finally{_(!1)}},[r]),Pe=S.useCallback(()=>{console.log(" Cancelling drawing test creation"),u("typeSelection"),P({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),tt=S.useCallback(()=>{console.log(" Cancelling fill blanks test creation"),u("typeSelection"),P({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),Ge=S.useCallback(async de=>{console.log(" [DEBUG] handleFillBlanksTestSave called"),console.log(" [DEBUG] Received testData:",de),_(!0);try{P(_e=>({..._e,fillBlanksData:de,numQuestions:de.num_questions||de.blanks?.length||0})),u("testAssignment"),r("Fill blanks test created! Now assign it to classes.","success")}catch(_e){console.error(" Error saving fill blanks test:",_e),r("Error saving fill blanks test","error")}finally{_(!1)}},[r]),Ye=S.useCallback(()=>{console.log(" Cancelling speaking test creation"),u("typeSelection"),P({testName:"",numQuestions:0,numOptions:0,questions:{}})},[]),ct=S.useCallback(async de=>{console.log(" [DEBUG] handleSpeakingTestSave called"),console.log(" [DEBUG] Received testData:",de),_(!0);try{P(_e=>({..._e,speakingData:de,numQuestions:de.questions?.length||0})),u("testAssignment"),r("Speaking test created! Now assign it to classes.","success")}catch(_e){console.error(" Error saving speaking test:",_e),r("Error saving speaking test","error")}finally{_(!1)}},[r]);return l.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[l.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs(Wo,{mode:"wait",children:[c==="typeSelection"&&l.jsxs(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs(ht,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),l.jsx("span",{children:"Back to Main"})]}),l.jsx("div",{className:"flex-1"})]}),l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create New Test"}),l.jsx("p",{className:"text-gray-600",children:"Choose the type of test you want to create"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"multipleChoice",title:"Multiple Choice",description:"Questions with multiple answer options",icon:"/pics/multiple-choice.png"},{type:"trueFalse",title:"True/False",description:"Questions with true or false answers",icon:"/pics/true-false.png"},{type:"input",title:"Input",description:"Questions requiring text input",icon:"/pics/input.png"},{type:"matching",title:"Picture Matching",description:"Labeling pictures",icon:"/pics/matching.png"},{type:"wordMatching",title:"Word Matching",description:"Matching word pairs by dragging or drawing arrows",icon:"/pics/matching-words.png"},{type:"drawing",title:"Drawing Test",description:"Interactive drawing tests with canvas for students",icon:"/pics/drawing.png"},{type:"fillBlanks",title:"Fill Blanks",description:"Text with multiple choice blanks",icon:"/pics/fill-blanks.png"},{type:"speaking",title:"Speaking Test",description:"Audio recording with AI-powered feedback",icon:"/pics/speaking.png"}].map(({type:de,title:_e,description:Fe,icon:De})=>l.jsx(vt.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer",onClick:()=>st(de),children:l.jsxs(Kt,{className:"h-full text-center hover:shadow-lg transition-shadow",children:[l.jsx("div",{className:"mb-3 flex justify-center",children:l.jsx("img",{src:De,alt:_e,className:"w-12 h-12 object-contain"})}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:_e}),l.jsx("p",{className:"text-sm text-gray-600",children:Fe})]})},de))})]}),c==="formCreation"&&l.jsxs(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx("div",{className:"flex space-x-2",children:l.jsx(ht,{variant:"outline",onClick:te,children:" Back to Test Types"})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Create ",h==="multipleChoice"?"Multiple Choice":h==="trueFalse"?"True/False":h==="input"?"Input":h==="drawing"?"Drawing":h==="fillBlanks"?"Fill Blanks":h==="wordMatching"?"Word Matching":h==="speaking"?"Speaking":"Picture Matching"," Test"]}),l.jsx("p",{className:"text-gray-600",children:"Fill in the test details and questions"})]})]})}),l.jsx(Kt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Information"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name"}),l.jsx("input",{type:"text",value:j.testName,onChange:de=>Vt("testName",de.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter test name"})]}),h!=="matching"&&h!=="wordMatching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Questions"}),l.jsx("input",{type:"number",min:"1",max:"50",value:j.numQuestions,onChange:de=>{const _e=parseInt(de.target.value)||0;Vt("numQuestions",_e),_e>0&&Nr(h,j.testName,_e,j.numOptions)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of questions"})]}),h==="multipleChoice"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Options per Question"}),l.jsx("input",{type:"number",min:"2",max:"6",value:j.numOptions,onChange:de=>{const _e=parseInt(de.target.value)||0;Vt("numOptions",_e),_e>0&&_e<2&&r("Multiple choice tests require at least 2 options per question. Please enter 2 or more.","warning"),j.numQuestions>0&&Nr(h,j.testName,j.numQuestions,_e)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter number of options (2-6)"})]}),h!=="speaking"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:!!j.enableTimer,onChange:de=>Vt("enableTimer",de.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Enable timer for this test"})]}),j.enableTimer&&l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm text-gray-700",children:"Time (minutes):"}),l.jsx("input",{type:"number",min:"1",max:"1440",value:j.timerMinutes,onChange:de=>Vt("timerMinutes",de.target.value.replace(/[^0-9]/g,"")),className:"w-28 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g. 30"})]})]}),h!=="drawing"&&h!=="matching"&&h!=="wordMatching"&&h!=="fillBlanks"&&h!=="speaking"&&l.jsx("div",{className:"flex items-center space-x-2",children:l.jsxs("label",{className:"inline-flex items-center space-x-2",children:[l.jsx("input",{type:"checkbox",checked:!!j.isShuffled,onChange:de=>Vt("isShuffled",de.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"}),l.jsx("span",{className:"text-sm text-gray-700",children:"Shuffle questions during test"})]})})]})]})}),h==="matching"&&l.jsx(Kt,{children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Picture Matching Test"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Upload an image and create interactive matching blocks with words."}),l.jsx(ele,{testName:j.testName,onTestSaved:Ne,onCancel:ve,onBackToCabinet:Xe,isSaving:w,validationErrors:{}})]})}),h==="wordMatching"&&l.jsx(Kt,{children:l.jsxs("div",{className:"space-y-4 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create Word Matching Test"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Create word pairs for students to match by dragging or drawing arrows."}),l.jsx(sle,{testName:j.testName,onTestSaved:Ee,onCancel:ue,onBackToCabinet:Xe,isSaving:w,validationErrors:{}})]})}),h==="drawing"&&l.jsxs(Kt,{children:[console.log(" Rendering DrawingTestCreator, testType:",h),l.jsx(Jde,{testName:j.testName,onTestSaved:he,onCancel:Pe,onBackToCabinet:Xe,isSaving:w,validationErrors:{}})]}),h==="fillBlanks"&&l.jsxs(Kt,{children:[console.log(" Rendering FillBlanksTestCreator, testType:",h),l.jsx(b0e,{testName:j.testName,allowedTime:j.enableTimer&&parseInt(j.timerMinutes)||null,onTestSaved:Ge,onCancel:tt,onBackToCabinet:Xe,isSaving:w,validationErrors:{}})]}),h==="speaking"&&l.jsxs(Kt,{children:[console.log(" Rendering SpeakingTestCreator, testType:",h),l.jsx(Mje,{testName:j.testName,onTestSaved:ct,onCancel:Ye,onBackToCabinet:Xe,isSaving:w,validationErrors:{}})]}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&h!=="speaking"&&j.numQuestions>0&&l.jsx(Kt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Excel Upload"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Upload an Excel file to automatically populate questions, or fill them in manually below."}),l.jsxs("div",{className:"space-y-6",children:[h==="multipleChoice"&&rt.multipleChoice?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"multiple-choice",disabled:T,children:T?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"multiple-choice"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Multiple Choice Format:"}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[l.jsx("div",{children:"Column 1: Question"}),l.jsx("div",{children:"Column 2: Correct Answer (A-F)"}),l.jsx("div",{children:"Column 3: Option A text"}),l.jsx("div",{children:"Column 4: Option B text"}),l.jsx("div",{children:"Column 5: Option C text"}),l.jsx("div",{children:"Column 6: Option D text"})]})]})})})]}),h==="trueFalse"&&rt.trueFalse?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"true-false",disabled:T,children:T?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"true-false"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-xs text-blue-800",children:[l.jsxs("div",{children:[l.jsx("strong",{children:"Format:"})," Question | Answer (true/false)"]}),l.jsxs("div",{className:"mt-1",children:[l.jsx("strong",{children:"Example:"})," The Earth is round | true"]}),l.jsxs("div",{className:"mt-1",children:[l.jsx("strong",{children:"Note:"})," Headers are optional"]})]})})})]}),h==="input"&&rt.input?.buttonVisible&&l.jsxs("div",{className:"flex items-start space-x-4",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("button",{type:"button",className:"excel-upload-btn px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 shadow-md hover:shadow-lg transition-all duration-200 flex items-center space-x-3 min-h-[60px] disabled:opacity-50 disabled:cursor-not-allowed","data-test-type":"input",disabled:T,children:T?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white"}),l.jsx("span",{className:"font-medium",children:"Processing..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:"/pics/excel.png",alt:"Excel",className:"w-6 h-6 object-contain"}),l.jsx("span",{className:"font-medium",children:"Upload Excel"})]})}),l.jsx("input",{type:"file",accept:".xlsx,.xls",className:"excel-file-input hidden","data-test-type":"input"})]}),l.jsx("div",{className:"w-fit",children:l.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md min-h-[60px] flex items-start",children:l.jsxs("div",{className:"text-sm text-blue-800",children:[l.jsx("strong",{children:"Input Test Format:"}),l.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-x-4 gap-y-1 text-xs",children:[l.jsx("div",{children:"Column 1: Question"}),l.jsx("div",{children:"Column 2: Answer 1"}),l.jsx("div",{children:"Column 3: Answer 2 (optional)"})]})]})})})]})]})]})}),h!=="matching"&&h!=="drawing"&&h!=="fillBlanks"&&j.numQuestions>0&&l.jsx(Kt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Manual Question Entry"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Fill in the questions manually using the form below."})]})}),j.numQuestions>0&&l.jsx(Kt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),l.jsx("div",{className:"space-y-6",children:Object.keys(j.questions).map(de=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsxs("h4",{className:"font-medium text-gray-900 mb-3",children:["Question ",de]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Text"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{value:j.questions[de]?.question||"",onChange:_e=>qt(de,"question",_e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Enter the question text",id:`question_${de}`}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(`question_${de}`),onChange:_e=>qt(de,"question",_e.target.value)})]})]}),h==="multipleChoice"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options"}),l.jsx("div",{className:"space-y-2",children:j.questions[de]?.options?.map((_e,Fe)=>{const De=Fe<2;return _e===null&&!De?null:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("span",{className:"w-6 text-sm font-medium text-gray-700",children:[String.fromCharCode(65+Fe),":"]}),l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:_e||"",onChange:zt=>{const _r=[...j.questions[de].options];_r[Fe]=zt.target.value,qt(de,"options",_r)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Option ${String.fromCharCode(65+Fe)}`,id:`option_${de}_${Fe}`}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(`option_${de}_${Fe}`),onChange:zt=>{const _r=[...j.questions[de].options];_r[Fe]=zt.target.value,qt(de,"options",_r)}})]}),!De&&l.jsx("button",{type:"button",onClick:()=>gr(de,Fe),style:{background:"#dc3545",border:"1px solid #dc3545",borderRadius:"4px",cursor:"pointer",fontSize:"18px",fontWeight:"bold",color:"#ffffff",padding:"4px 10px",lineHeight:"1",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"32px",height:"32px",transition:"all 0.2s",flexShrink:0},onMouseEnter:zt=>{zt.target.style.background="#c82333",zt.target.style.borderColor="#c82333"},onMouseLeave:zt=>{zt.target.style.background="#dc3545",zt.target.style.borderColor="#dc3545"},title:"Delete this option",children:""})]},Fe)})}),(j.questions[de]?.options||[]).filter(qe=>qe!=null).length<6?l.jsx("button",{type:"button",onClick:()=>Vr(de),className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm font-medium transition-colors",children:"+ Add Option"}):null]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer"}),h==="multipleChoice"?l.jsx("div",{children:l.jsxs("select",{value:j.questions[de]?.correctAnswer||"",onChange:_e=>qt(de,"correctAnswer",_e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),j.questions[de]?.options?.map((_e,Fe)=>({option:_e,index:Fe})).filter(({option:_e})=>_e!==null&&_e!==""&&_e!==void 0).map(({index:_e})=>l.jsx("option",{value:String.fromCharCode(65+_e),children:String.fromCharCode(65+_e)},_e))]})}):h==="trueFalse"?l.jsxs("select",{value:j.questions[de]?.correctAnswer||"",onChange:_e=>qt(de,"correctAnswer",_e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[l.jsx("option",{value:"",children:"Select correct answer"}),l.jsx("option",{value:"true",children:"True"}),l.jsx("option",{value:"false",children:"False"})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Correct Answer(s)"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:j.questions[de]?.correct_answers?.[0]||"",onChange:_e=>{const De=[...j.questions[de]?.correct_answers||[""]];De[0]=_e.target.value,qt(de,"correct_answers",De)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter the primary correct answer",id:`answer_${de}_0`}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${de}_0`),onChange:_e=>{const De=[...j.questions[de]?.correct_answers||[""]];De[0]=_e.target.value,qt(de,"correct_answers",De)}})]}),j.questions[de]?.correct_answers?.slice(1).map((_e,Fe)=>l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsxs("div",{className:"relative flex-1",children:[l.jsx("input",{type:"text",value:_e,onChange:De=>{const qe=[...j.questions[de]?.correct_answers||[]];qe[Fe+1]=De.target.value,qt(de,"correct_answers",qe)},className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:`Alternative answer ${Fe+2}`,id:`answer_${de}_${Fe+1}`}),l.jsx(Ml,{showPreview:!0,inputRef:()=>document.getElementById(`answer_${de}_${Fe+1}`),onChange:De=>{const qe=[...j.questions[de]?.correct_answers||[]];qe[Fe+1]=De.target.value,qt(de,"correct_answers",qe)}})]}),l.jsx("button",{type:"button",onClick:()=>{const De=[...j.questions[de]?.correct_answers||[]];De.splice(Fe+1,1),qt(de,"correct_answers",De)},className:"px-2 py-1 text-red-600 hover:text-red-800 text-sm",children:"Remove"})]},Fe))||[],l.jsx("button",{type:"button",onClick:()=>{const Fe=[...j.questions[de]?.correct_answers||[""],""];qt(de,"correct_answers",Fe)},className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm border border-blue-300 rounded-md hover:bg-blue-50",children:"+ Add Alternative Answer"})]}),l.jsx("p",{className:"text-xs text-gray-500",children:"You can add multiple correct answers for the same question. Students will get credit for any of them."})]})]})]})]},de))})]})}),j.testName&&j.numQuestions>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx(ht,{onClick:dn,disabled:w,className:"px-8",children:w?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white",className:"mr-2"}),"Saving Test..."]}):"Save Test & Continue to Assignment"})})]}),c==="testAssignment"&&l.jsxs(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs(ht,{variant:"outline",onClick:()=>window.history.back(),className:"flex items-center space-x-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),l.jsx("span",{children:"Back to Main"})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Assign Test to Classes"}),l.jsx("p",{className:"text-gray-600",children:"Select which classes should take this test"})]})]}),l.jsx(ht,{variant:"outline",onClick:()=>u("formCreation"),children:" Back to Test Form"})]}),l.jsx(Kt,{children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Available Classes"}),p.length===0?l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("p",{className:"text-gray-500 text-lg",children:"No subjects available for assignment."}),l.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"You need to assign subjects to grades and classes first."}),l.jsx("div",{className:"mt-4",children:l.jsx(ht,{onClick:()=>window.location.href="/teacher/subjects",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Go to Subjects Page"})})]}):l.jsx("div",{className:"space-y-6",children:p.map(de=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:de.subject}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2",children:de.classes.map(_e=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:D.some(Fe=>Fe.grade===_e.grade&&Fe.class===_e.class&&Fe.subject_id===de.subject_id),onChange:Fe=>me(_e.grade,_e.class,Fe.target.checked,de.subject_id,de.subject),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsxs("span",{className:"text-sm text-gray-700",children:[_e.grade,"/",_e.class]})]},`${_e.grade}-${_e.class}-${de.subject_id}`))})]},de.subject_id))})]})}),D.length>0&&l.jsx("div",{className:"flex justify-end",children:l.jsx(ht,{onClick:()=>Re(h,null),disabled:v,className:"px-8",children:v?l.jsxs(l.Fragment,{children:[l.jsx(pn,{size:"sm",color:"white",className:"mr-2"}),"Assigning Test..."]}):`Assign Test to ${D.length} Class${D.length>1?"es":""}`})})]})]})}),console.log(" Checking isAssigningTest:",A),A&&l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Assigning test to classes..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we process your assignment"})]})}),w&&l.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-200 border-t-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-blue-600 font-semibold text-lg",children:"Saving test..."}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please wait while we save your test"})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:t.map(de=>l.jsx(hu,{type:de.type,message:de.message,duration:de.duration,onClose:()=>n(de.id)},de.id))})]})},Dje=({onDataLoaded:e,onError:t})=>{const r=Xo(),{user:n,isAuthenticated:s}=Fs(),{teacherData:a,loadTeacherData:i}=m3(),[o,c]=S.useState(!0),[u,d]=S.useState(""),[f,h]=S.useState([]),[g,p]=S.useState(null),[y,v]=S.useState([]),[C,w]=S.useState([]),[_,T]=S.useState([]),[E,A]=S.useState(null),[F,j]=S.useState(0);S.useEffect(()=>{re()},[]),S.useCallback(async ee=>{console.log(" Teacher login attempt...");try{const L=await Hs.teacherLogin(ee);if(L.success)return Y("Login successful!","success"),await P(),L;throw new Error(L.error||"Login failed")}catch(L){throw console.error(" Teacher login error:",L),Y("Login failed. Please check your credentials.","error"),L}},[]);const P=S.useCallback(async()=>{console.log(" Loading teacher data...");try{if(c(!0),d(""),!s||!n){console.log(" User not authenticated"),d("User not authenticated");return}if(n.role!==zo.TEACHER){console.error(" Invalid user role for teacher data:",n.role),d("Access denied. Teacher role required.");return}console.log(" Fetching teacher data from service...");const ee=await Hs.getTeacherData();if(ee&&ee.success)console.log(" Teacher data loaded successfully:",ee),p(ee.teacher||n),ee.subjects&&(v(ee.subjects),console.log(" Teacher subjects loaded:",ee.subjects.length)),ee.grades&&w(ee.grades),ee.classes&&T(ee.classes),A(new Date),j(L=>L+1),e&&e(ee),Y("Teacher data loaded successfully!","success");else throw new Error(ee?.error||"Failed to load teacher data")}catch(ee){console.error(" Error loading teacher data:",ee);const L=ee.message||"Failed to load teacher data";d(L),t&&t(ee),Y(L,"error")}finally{c(!1)}},[s,n,e,t]),D=S.useCallback(()=>{console.log(" Returning to main cabinet..."),r("/teacher/cabinet")},[r]);S.useCallback(ee=>{console.log(" Showing main cabinet with subjects:",ee),ee&&v(ee),r("/teacher/cabinet")},[r]);const B=S.useCallback(()=>(console.log(" Rendering grade buttons..."),["M1","M2","M3","M4","M5","M6"].map(L=>({id:L,name:`Grade ${L}`,classes:V(L)}))),[]),V=S.useCallback(ee=>Array.from({length:10},(Q,U)=>U+1).map(Q=>({id:`${ee}-${Q}`,name:`Class ${Q}`,grade:ee,classNumber:Q})),[]),Y=S.useCallback((ee,L)=>{const Q={id:Date.now(),message:ee,type:L,timestamp:new Date};h(U=>[...U,Q]),setTimeout(()=>{h(U=>U.filter(G=>G.id!==Q.id))},rg.NOTIFICATION_DURATION)},[]),re=S.useCallback(async()=>{console.log(" Initializing teacher data..."),await P()},[P]),te=S.useCallback(async()=>{console.log(" Refreshing teacher data..."),await P()},[P]);return S.useCallback(async ee=>{console.log(" Updating teacher profile:",ee);try{const L=await Hs.updateUserProfile(ee);if(L.success)return p(Q=>({...Q,...ee})),Y("Profile updated successfully!","success"),L;throw new Error(L.error||"Failed to update profile")}catch(L){throw console.error(" Error updating teacher profile:",L),Y("Failed to update profile","error"),L}},[]),S.useCallback(async ee=>{console.log(" Changing teacher password...");try{const L=await Hs.changePassword(ee);if(L.success)return Y("Password changed successfully!","success"),L;throw new Error(L.error||"Failed to change password")}catch(L){throw console.error(" Error changing teacher password:",L),Y("Failed to change password","error"),L}},[]),o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Data..."})]})}):u?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Data Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:u}),l.jsxs("div",{className:"flex space-x-3 justify-center",children:[l.jsx(ht,{variant:"primary",onClick:te,children:"Retry"}),l.jsx(ht,{variant:"outline",onClick:D,children:"Go Back"})]})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teacher Data"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",E?E.toLocaleString():"Never"," | Version: ",F]})]}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx(ht,{variant:"outline",onClick:te,children:"Refresh Data"}),l.jsx(ht,{variant:"outline",onClick:D,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Teacher Information"}),g?l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Name:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.name||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Username:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.username||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Email:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.email||"N/A"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Role:"}),l.jsx("p",{className:"text-sm text-gray-900",children:g.role||"N/A"})]})]}):l.jsx("p",{className:"text-gray-500",children:"No teacher information available"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Subjects (",y.length,")"]}),y.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map((ee,L)=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-gray-900",children:ee.name}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ee.description||"No description"}),ee.classes&&ee.classes.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:ee.classes.map((Q,U)=>l.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:[Q.grade," - ",Q.className]},U))})]})]},L))}):l.jsx("p",{className:"text-gray-500",children:"No subjects assigned"})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Grade Levels"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B().map(ee=>l.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[l.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:ee.name}),l.jsx("div",{className:"grid grid-cols-5 gap-1",children:ee.classes.map(L=>l.jsx("button",{className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",onClick:()=>console.log("Class clicked:",L),children:L.classNumber},L.id))})]},ee.id))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Data Statistics"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-blue-600",children:y.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Subjects"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-green-600",children:C.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Grades"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-yellow-600",children:_.length}),l.jsx("p",{className:"text-sm text-gray-500",children:"Classes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-2xl font-semibold text-purple-600",children:F}),l.jsx("p",{className:"text-sm text-gray-500",children:"Data Version"})]})]})]})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:f.map(ee=>l.jsx(hu,{type:ee.type,message:ee.message,onClose:()=>h(L=>L.filter(Q=>Q.id!==ee.id))},ee.id))})]})},Rje=({onBackToCabinet:e})=>{const t=Xo(),{user:r,isAuthenticated:n}=Fs(),{teacherData:s}=m3(),[a,i]=S.useState(!0),[o,c]=S.useState(""),[u,d]=S.useState([]),[f,h]=S.useState([]),[g,p]=S.useState([]),[y,v]=S.useState([]),[C,w]=S.useState(null),[_,T]=S.useState([]),[E,A]=S.useState(!1),[F,j]=S.useState(!1),[P,D]=S.useState(!1),[B,V]=S.useState(!1),[Y,re]=S.useState(null),[te,ee]=S.useState(!0),[L,Q]=S.useState(null);S.useEffect(()=>{Je()},[]),S.useCallback(Ve=>{console.log(" Rendering existing subjects:",Ve),h(Ve)},[]);const U=S.useCallback(()=>{console.log(" Showing subject selection prompt..."),A(!0),ee(!1),G()},[]),G=S.useCallback(async()=>{console.log(" Loading existing subjects...");try{const Ve=await Hs.getTeacherSubjects();Ve.success&&Ve.subjects&&Ve.subjects.length>0?(console.log(" Existing subjects found:",Ve.subjects),W(Ve.subjects)):(console.log(" No existing subjects found"),v([]))}catch(Ve){console.error(" Error loading existing subjects:",Ve),ft("Failed to load existing subjects","error")}},[]),W=S.useCallback(Ve=>{console.log(" Rendering subject selection:",Ve);const at=[];Ve.forEach(gt=>{gt.classes&&Array.isArray(gt.classes)&&gt.classes.forEach(Te=>{at.push({id:`${gt.subject_id}-${Te.grade}-${Te.class}`,subjectId:gt.subject_id,subjectName:gt.subject,grade:Te.grade,class:Te.class,displayText:`${gt.subject} - ${Te.grade}/${Te.class}`})})}),v(at),console.log(" Processed subjects for selection:",at)},[]),M=S.useCallback(async Ve=>{if(console.log(" Saving teacher subjects:",Ve),!Ve||Ve.length===0){ft("Please select at least one subject and class combination.","warning");return}try{const at=Ve.reduce((Te,bt)=>{const Ct=Te.find(Lt=>Lt.subject_id===bt.subjectId);return Ct?Ct.classes.push({grade:bt.grade,class:bt.class}):Te.push({subject_id:bt.subjectId,classes:[{grade:bt.grade,class:bt.class}]}),Te},[]);console.log(" Transformed data for backend:",at);const gt=await Hs.saveTeacherSubjects(at);if(gt.success)ft("Subjects saved successfully!","success"),A(!1),ee(!0),Q(new Date),await G();else throw new Error(gt.error||"Failed to save subjects")}catch(at){console.error(" Error saving subjects:",at),ft("Error saving subjects. Please try again.","error")}},[]),I=S.useCallback(()=>{console.log(" Toggling subject dropdown..."),j(Ve=>!Ve),D(!1)},[]),z=S.useCallback(async()=>{console.log(" Loading subjects for dropdown...");try{const Ve=await Hs.getAllSubjects();if(Ve.success)p(Ve.subjects||[]),console.log(" Available subjects loaded:",Ve.subjects?.length||0);else throw new Error(Ve.error||"Failed to load subjects")}catch(Ve){console.error(" Error loading subjects for dropdown:",Ve),ft("Failed to load subjects","error")}},[]),q=S.useCallback(Ve=>{console.log(" Subject selected:",Ve);const at=g.find(gt=>gt.subject_id===parseInt(Ve));at&&(w(at),D(!0),j(!1),ne())},[g]),ne=S.useCallback(()=>{console.log(" Loading grades and classes...")},[]),X=S.useCallback((Ve,at)=>{console.log(" Saving classes for subject:",Ve,at);const gt={id:`${Ve.subject_id}-${Date.now()}`,subjectId:Ve.subject_id,subjectName:Ve.subject,grade:at.grade,class:at.class,displayText:`${Ve.subject} - ${at.grade}/${at.class}`};v(Te=>[...Te,gt]),w(null),T([]),D(!1),ce(`Added ${Ve.subject} for ${at.grade}/${at.class}`)},[]),se=S.useCallback(()=>{console.log(" Resetting subject selection..."),w(null),T([]),j(!1),D(!1)},[]),ce=S.useCallback(Ve=>{console.log(" Showing message:",Ve),ft(Ve,"success")},[]),pe=S.useCallback(Ve=>{console.log(" Showing confirmation modal:",Ve),re(Ve),V(!0)},[]),be=S.useCallback(()=>{console.log(" Hiding confirmation modal..."),V(!1),re(null)},[]),oe=S.useCallback(()=>{console.log(" Confirming save subjects..."),be(),M(y)},[y,M,be]),je=S.useCallback(()=>{console.log(" Cancelling save subjects..."),be()},[be]),Re=S.useCallback(Ve=>{console.log(" Removing subject:",Ve),v(at=>at.filter(gt=>gt.id!==Ve)),ft("Subject removed","info")},[]);S.useCallback(()=>{console.log(" Showing edit subjects button..."),ee(!0)},[]),S.useCallback(()=>{console.log(" Hiding edit subjects button..."),ee(!1)},[]);const Xe=S.useCallback(Ve=>{console.log(" Generating class buttons for grade:",Ve);let at;return Ve===1||Ve===2?at=["15","16"]:Ve===3?at=["15","16"]:Ve===4?at=["13","14"]:Ve===5||Ve===6?at=["13","14"]:at=[],at.map(gt=>({id:`${Ve}-${gt}`,grade:Ve,class:gt,displayText:`${Ve}/${gt}`}))},[]);S.useCallback((Ve,at)=>{console.log(" Showing class results:",Ve,at),t("/teacher/results")},[t]);const ft=S.useCallback((Ve,at)=>{const gt={id:Date.now(),message:Ve,type:at,timestamp:new Date};d(Te=>[...Te,gt]),setTimeout(()=>{d(Te=>Te.filter(bt=>bt.id!==gt.id))},rg.NOTIFICATION_DURATION)},[]),Je=S.useCallback(async()=>{console.log(" Initializing teacher subjects...");try{if(i(!0),c(""),!n||!r){console.log(" User not authenticated"),c("User not authenticated");return}if(r.role!==zo.TEACHER){console.error(" Invalid user role for teacher subjects:",r.role),c("Access denied. Teacher role required.");return}await G(),await z(),console.log(" Teacher subjects initialization complete!")}catch(Ve){console.error(" Error initializing teacher subjects:",Ve),c("Failed to initialize teacher subjects")}finally{i(!1)}},[n,r,G,z]),Ht=S.useCallback(()=>{e?e():t("/teacher/cabinet")},[e,t]);return a?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx(pn,{size:"lg"}),l.jsx("p",{className:"mt-4 text-gray-600",children:"Loading Teacher Subjects..."})]})}):o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[l.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"Subjects Error"}),l.jsx("p",{className:"text-red-600 mb-4",children:o}),l.jsx(ht,{variant:"primary",onClick:()=>window.location.reload(),children:"Retry"})]})})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm border-b",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center py-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subject Management"}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",L?L.toLocaleString():"Never"]})]}),l.jsxs("div",{className:"flex space-x-3",children:[te&&l.jsx(ht,{variant:"primary",onClick:U,children:"Edit Subjects"}),l.jsx(ht,{variant:"outline",onClick:Ht,children:"Back to Cabinet"})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"space-y-6",children:[!E&&l.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Assigned Subjects"}),l.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your teaching subjects and class assignments"})]}),l.jsx("div",{className:"flex space-x-3",children:l.jsxs(ht,{variant:"primary",onClick:U,className:"px-6 py-2",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Subjects"]})})]}),f.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map((Ve,at)=>l.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:Ve.subject}),Ve.classes&&Ve.classes.length>0&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Assigned Classes:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:Ve.classes.map((gt,Te)=>l.jsxs("span",{className:"px-3 py-1 bg-blue-500 text-white text-sm font-medium rounded-full",children:["Grade ",gt.grade," - Class ",gt.class]},Te))})]})]}),l.jsx("div",{className:"ml-4",children:l.jsx(ht,{variant:"outline",size:"sm",onClick:()=>Re(Ve.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]})},at))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:l.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No subjects assigned yet"}),l.jsx("p",{className:"text-gray-500 mb-6",children:"Get started by adding your teaching subjects and class assignments"}),l.jsxs(ht,{variant:"primary",onClick:U,className:"px-6 py-3",children:[l.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Your First Subject"]})]})]}),E&&l.jsxs("div",{className:`\r
              bg-white rounded-xl shadow-md border border-gray-200 p-6\r
              hover:shadow-lg hover:-translate-y-1 transition-all duration-200\r
            `,children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Select Subjects and Classes"}),l.jsx("p",{className:"text-gray-600",children:"Choose the subjects you want to teach and assign them to specific classes"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:"1"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-lg font-semibold text-gray-900",children:"Select Subject"}),l.jsx("p",{className:"text-gray-600",children:"Choose the subject you want to teach"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs(ht,{variant:"outline",onClick:I,className:"w-full justify-between p-4 h-auto text-left border-2 border-gray-200 hover:border-blue-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white rounded-xl shadow-sm",children:[l.jsx("span",{className:"text-gray-900 font-medium",children:C?C.subject:"Select a subject"}),l.jsx("svg",{className:"w-5 h-5 ml-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),F&&l.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-gray-200 rounded-xl shadow-xl max-h-60 overflow-y-auto",children:g.map(Ve=>l.jsx("button",{onClick:()=>q(Ve.subject_id),className:"w-full px-4 py-4 text-left hover:bg-blue-50 focus:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:l.jsx("span",{className:"text-gray-900 font-medium",children:Ve.subject})},Ve.subject_id))})]})]}),P&&C&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-6",children:[l.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"2"})}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Select Classes for ",C.subject]}),l.jsx("p",{className:"text-gray-600",children:"Choose which classes you want to teach this subject to"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(Ve=>l.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-6 hover:shadow-md transition-shadow duration-200",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2",children:l.jsx("span",{className:"text-white font-bold text-xs",children:Ve})}),l.jsxs("h4",{className:"font-semibold text-gray-900",children:["Grade ",Ve]})]}),l.jsx("div",{className:"space-y-3",children:Xe(Ve).map(at=>l.jsx(ht,{variant:"outline",size:"sm",onClick:()=>X(C,at),className:"w-full text-sm py-2 px-4 border-green-300 hover:border-green-400 hover:bg-green-100 focus:ring-2 focus:ring-green-500 rounded-lg font-medium",children:at.displayText},at.id))})]},Ve))})]}),y.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3",children:l.jsx("span",{className:"text-purple-600 font-semibold text-sm",children:"3"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Selected Subjects"}),l.jsx("p",{className:"text-gray-600",children:"Review your subject and class selections"})]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(Ve=>l.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-200 rounded-xl p-4 hover:shadow-md transition-shadow duration-200",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("div",{className:"flex-1",children:l.jsx("span",{className:"text-sm font-semibold text-purple-900",children:Ve.displayText})}),l.jsx(ht,{variant:"outline",size:"sm",onClick:()=>Re(Ve.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-300 focus:ring-2 focus:ring-red-500 rounded-lg",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Ve.id))})]}),l.jsxs("div",{className:"flex justify-between items-center pt-6 border-t-2 border-gray-100",children:[l.jsx("div",{className:"text-sm text-gray-500",children:y.length>0?`${y.length} subject${y.length>1?"s":""} selected`:"No subjects selected"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs(ht,{variant:"outline",onClick:()=>{A(!1),ee(!0),se()},className:"px-6 py-3 text-sm font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-500 rounded-xl",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Cancel"]}),l.jsxs(ht,{variant:"primary",onClick:()=>pe({type:"save",data:y}),disabled:y.length===0,className:"px-8 py-3 text-sm font-medium text-white bg-gradient-to-r from-blue-600 to-indigo-600 border border-transparent rounded-xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:[l.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),P?"Next: Select Classes":"Save Subjects"]})]})]})]})]})]})}),B&&l.jsx(Fa,{isOpen:B,onClose:be,title:"Confirm Save",variant:"confirmation",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("p",{className:"text-gray-600",children:["Are you sure you want to save ",Y?.data?.length||0," subject assignments?"]}),l.jsxs("div",{className:"flex justify-end space-x-3",children:[l.jsx(ht,{variant:"outline",onClick:je,children:"Cancel"}),l.jsx(ht,{variant:"primary",onClick:oe,children:"Save"})]})]})}),l.jsx("div",{className:"fixed top-4 right-4 space-y-2 z-50",children:u.map(Ve=>l.jsx(hu,{type:Ve.type,message:Ve.message,onClose:()=>d(at=>at.filter(gt=>gt.id!==Ve.id))},Ve.id))})]})},Ije=()=>{const{user:e,role:t,isAuthenticated:r,isLoading:n}=Fs(),[s,a]=S.useState("cabinet");return!r||t!=="teacher"?l.jsx(Hp,{to:"/login",replace:!0}):n?l.jsxs("div",{className:"teacher-app-loading",children:[l.jsx(pn,{}),l.jsx("p",{children:"Loading teacher interface..."})]}):l.jsx("div",{className:"teacher-app",children:l.jsxs(tT,{children:[l.jsx(ea,{path:"/",element:l.jsx(sB,{})}),l.jsx(ea,{path:"/cabinet",element:l.jsx(sB,{})}),l.jsx(ea,{path:"/tests",element:l.jsx(aB,{})}),l.jsx(ea,{path:"/tests/create",element:l.jsx(aB,{})}),l.jsx(ea,{path:"/data",element:l.jsx(Dje,{})}),l.jsx(ea,{path:"/subjects",element:l.jsx(Rje,{})}),l.jsx(ea,{path:"/results",element:l.jsx($V,{})}),l.jsx(ea,{path:"*",element:l.jsx(Hp,{to:"/teacher",replace:!0})})]})})},lt={container:"min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100",mainContainer:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",header:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg",headerContent:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",headerFlex:"flex justify-between items-center",adminInfo:"flex items-center space-x-4",adminAvatar:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",adminText:"text-lg sm:text-xl md:text-2xl font-bold text-white",adminSubtext:"text-purple-100 text-sm sm:text-base md:text-lg",menuContainer:"relative admin-menu",menuButton:"flex items-center space-x-1 sm:space-x-2 bg-white/10 border-white/20 text-white hover:bg-white/20 font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-2 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm border-2",menuDropdown:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg z-50 overflow-hidden",menuItem:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-purple-50 transition-colors",menuItemLogout:"block w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-red-50 transition-colors",cardContainer:"bg-white rounded-xl shadow-lg border border-gray-200 hover:shadow-xl transition-shadow duration-300",cardHeader:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",cardTitle:"text-xl font-bold text-gray-800",cardBody:"p-6",buttonGroup:"flex flex-wrap gap-3 mb-6",buttonPrimary:"bg-purple-600 hover:bg-purple-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200",buttonSecondary:"bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium px-4 py-2 rounded-lg transition-colors duration-200",formContainer:"bg-gray-50 rounded-lg p-6 border border-gray-200",formGrid:"grid grid-cols-1 md:grid-cols-2 gap-4",formGroup:"space-y-2",formLabel:"block text-sm font-medium text-gray-700",formInput:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors duration-200",formCheckbox:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",formActions:"flex space-x-3 pt-4",table:"min-w-full divide-y divide-gray-200",tableHeader:"bg-gray-50",tableHeaderCell:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",tableBody:"bg-white divide-y divide-gray-200",tableRow:"hover:bg-gray-50 transition-colors duration-150",tableCell:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",statusActive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",statusInactive:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",modalOverlay:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",modalContent:"bg-white rounded-lg p-6 w-full max-w-md mx-4 shadow-xl",modalTitle:"text-xl font-semibold text-gray-900 mb-4",modalActions:"flex space-x-3 pt-4"},Lje=()=>{const{user:e,isAdmin:t,logout:r}=Fs(),{get:n,post:s,delete:a}=ql(),i=S.useCallback(async()=>{try{h({type:"info",message:"Checking for overdue assignments..."});const ke=await s("/.netlify/functions/check-overdue-assignments",{});if(ke&&ke.success){const Pt=ke.overdue_count||0;Pt>0?h({type:"success",message:`Found and marked ${Pt} overdue assignments as inactive.`}):h({type:"info",message:"No overdue assignments found."})}else h({type:"error",message:ke?.error||"Failed to check assignments"})}catch(ke){h({type:"error",message:"Failed to check assignments"}),console.error("Check overdue assignments error:",ke)}},[s]),[o,c]=S.useState(!1),[u,d]=S.useState(null),[f,h]=S.useState(null),[g,p]=S.useState(!1),[y,v]=S.useState(!1),[C,w]=S.useState(!1),[_,T]=S.useState(!1),[E,A]=S.useState(""),[F,j]=S.useState(null),[P,D]=S.useState({}),[B,V]=S.useState(null),[Y,re]=S.useState({}),[te,ee]=S.useState(null),[L,Q]=S.useState({}),[U,G]=S.useState([]),[W,M]=S.useState(""),[I,z]=S.useState(""),[q,ne]=S.useState(""),[X,se]=S.useState("all"),[ce,pe]=S.useState(!0),[be,oe]=S.useState(!1),[je,Re]=S.useState([]),[Xe,ft]=S.useState(""),[Je,Ht]=S.useState(""),[Ve,at]=S.useState(""),[gt,Te]=S.useState(new Set),[bt,Ct]=S.useState(!1),[Lt,Yt]=S.useState(!1),[it,xt]=S.useState([]),[Mt,rt]=S.useState([]),[Qe,It]=S.useState([]),[Tt,Rt]=S.useState([]),[cr,hr]=S.useState(!1),[Cr,ur]=S.useState(!1),[Sr,we]=S.useState(!1),[Me,Ie]=S.useState(!1),[Ce,Ze]=S.useState({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),[wt,Nt]=S.useState({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),[Oe,Ke]=S.useState({subject_id:"",subject:"",description:"",is_active:!0}),[st,Vt]=S.useState({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""});S.useEffect(()=>{console.log(" AdminCabinet component mounted - initializing..."),qt()},[]),S.useEffect(()=>{const ke=Pt=>{bt&&!Pt.target.closest(".admin-menu")&&Ct(!1)};return document.addEventListener("mousedown",ke),()=>{document.removeEventListener("mousedown",ke)}},[bt]);const qt=S.useCallback(async()=>{try{c(!0),await dn(),console.log("Admin app initialized")}catch(ke){d("Failed to initialize admin app"),console.error("Admin app initialization error:",ke)}finally{c(!1)}},[]),gr=S.useCallback(()=>{Ct(ke=>!ke)},[]),Vr=S.useCallback(()=>{Yt(!0),Ct(!1)},[]),Nr=S.useCallback(()=>{Yt(!1)},[]),dn=S.useCallback(async()=>{try{await Promise.all([me(),Ne(),ve(),Ee()])}catch(ke){console.error("Error loading admin data:",ke),d("Failed to load admin data")}},[]),me=S.useCallback(async()=>{try{const ke="admin_users_",Pt=js(ke);if(Pt){console.log(" Using cached users data"),xt(Pt);return}const Mr=await n("/.netlify/functions/get-all-users");console.log(" Users response:",Mr);const qr=Mr.users||[];xt(qr),ys(ke,qr,ds.admin_users),console.log(" Users set to state:",qr)}catch(ke){console.error("Error loading users:",ke)}},[n]),Ne=S.useCallback(async()=>{try{const ke="admin_teachers_",Pt=js(ke);if(Pt){console.log(" Using cached teachers data"),rt(Pt);return}const Mr=await n("/.netlify/functions/get-all-teachers");console.log(" Teachers response:",Mr);const qr=Mr.teachers||[];rt(qr),ys(ke,qr,ds.admin_teachers),console.log(" Teachers set to state:",qr)}catch(ke){console.error("Error loading teachers:",ke)}},[n]),ve=S.useCallback(async()=>{try{const ke="admin_subjects_",Pt=js(ke);if(Pt){console.log(" Using cached subjects data"),It(Pt);return}const Mr=await n("/.netlify/functions/get-all-subjects");console.log(" Subjects response:",Mr);const qr=Mr.subjects||[];It(qr),ys(ke,qr,ds.admin_subjects),console.log(" Subjects set to state:",qr)}catch(ke){console.error("Error loading subjects:",ke)}},[n]),Ee=S.useCallback(async()=>{try{const ke="admin_academic_years_",Pt=js(ke);if(Pt){console.log(" Using cached academic years data"),Rt(Pt);return}const Mr=await gu.loadAcademicCalendar();Mr&&Array.isArray(Mr)?(Rt(Mr),ys(ke,Mr,ds.admin_academic_years)):console.error("Failed to load academic calendar")}catch(ke){console.error("Error loading academic year:",ke)}},[]),ue=S.useCallback(async()=>{try{if(T(!_),!_){const ke=Date.now(),[Pt,Mr]=await Promise.all([n(`/.netlify/functions/get-all-tests?t=${ke}`),n(`/.netlify/functions/get-test-assignments?t=${ke}`)]);console.log(" Active tests response:",Pt),console.log(" Assignments response:",Mr);const qr=Pt.tests||[],Jr=(Mr.assignments||[]).reduce((Xs,mi)=>{const xn=`${mi.test_type}-${mi.test_id}`;return Xs[xn]||(Xs[xn]=[]),Xs[xn].push(mi),Xs},{}),hs=qr.map(Xs=>{const mi=`${Xs.test_type}-${Xs.test_id}`,xn=Jr[mi]||[],wl=xn.some(Ue=>Ue.is_active);return{...Xs,is_active:wl,assignments:xn}});G(hs),console.log(" All tests with status set to state:",hs)}}catch(ke){console.error("Error loading tests:",ke),h({type:"error",message:"Failed to load tests"})}},[n,_]),he=S.useCallback((ke,Pt)=>{Ze(Mr=>({...Mr,[ke]:Pt}))},[]),Pe=S.useCallback((ke,Pt)=>{Nt(Mr=>({...Mr,[ke]:Pt}))},[]),tt=S.useCallback((ke,Pt)=>{Ke(Mr=>({...Mr,[ke]:Pt}))},[]);S.useCallback(()=>{console.log(" Testing local storage...");try{const ke={test:"data",timestamp:Date.now()};localStorage.setItem("test",JSON.stringify(ke));const Pt=JSON.parse(localStorage.getItem("test"));console.log(" Local storage test successful:",Pt),h({type:"success",message:"Local storage test successful"})}catch(ke){console.error(" Local storage test failed:",ke),h({type:"error",message:"Local storage test failed"})}},[]),S.useCallback(()=>{console.log(" Clearing local storage...");try{localStorage.clear(),console.log(" Local storage cleared"),h({type:"success",message:"Local storage cleared"})}catch(ke){console.error(" Error clearing local storage:",ke),h({type:"error",message:"Error clearing local storage"})}},[]),S.useCallback(async()=>{console.log(" Checking teacher subjects...");try{const Pt=(await n("/.netlify/functions/get-all-teachers")).data||[];console.log(" Teachers data:",Pt),h({type:"success",message:`Found ${Pt.length} teachers`})}catch(ke){console.error(" Error checking teacher subjects:",ke),h({type:"error",message:"Error checking teacher subjects"})}},[n]);const Ge=S.useCallback(async ke=>{ke.preventDefault();try{console.log(" Submitting user:",Ce);const Pt=await s("/.netlify/functions/add-user",Ce);Pt.success?(h({type:"success",message:"User added successfully"}),hr(!1),Ze({grade:"",class:"",number:"",student_id:"",name:"",surname:"",nickname:"",password:"",is_active:!0}),me()):h({type:"error",message:Pt.message||"Failed to add user"})}catch(Pt){console.error(" Error adding user:",Pt),h({type:"error",message:"Error adding user"})}},[Ce,s,me]),Ye=S.useCallback(async ke=>{ke.preventDefault();try{console.log(" Submitting teacher:",wt);const Pt=await s("/.netlify/functions/add-teacher",wt);Pt.success?(h({type:"success",message:"Teacher added successfully"}),ur(!1),Nt({teacher_id:"",username:"",password:"",first_name:"",last_name:"",is_active:!0}),Ne()):h({type:"error",message:Pt.message||"Failed to add teacher"})}catch(Pt){console.error(" Error adding teacher:",Pt),h({type:"error",message:"Error adding teacher"})}},[wt,s,Ne]),ct=S.useCallback(async ke=>{ke.preventDefault();try{console.log(" Submitting subject:",Oe);const Pt=await s("/.netlify/functions/add-subject",Oe);Pt.success?(h({type:"success",message:"Subject added successfully"}),we(!1),Ke({subject_id:"",subject:"",description:"",is_active:!0}),ve()):h({type:"error",message:Pt.message||"Failed to add subject"})}catch(Pt){console.error(" Error adding subject:",Pt),h({type:"error",message:"Error adding subject"})}},[Oe,s,ve]),de=S.useCallback(ke=>{j(ke),D({name:ke.name||"",surname:ke.surname||"",grade:ke.grade||"",class:ke.class||"",student_id:ke.student_id||"",nickname:ke.nickname||"",password:ke.password||"",is_active:ke.is_active!==void 0?ke.is_active:!0})},[]),_e=S.useCallback(async()=>{try{const ke=[];Object.keys(P).forEach(Pt=>{Pt!=="student_id"&&P[Pt]!==F[Pt]&&ke.push({fieldName:Pt,newValue:P[Pt]})});for(const Pt of ke)await s("/.netlify/functions/update-user",{userId:F.student_id,fieldName:Pt.fieldName,newValue:Pt.newValue});h({type:"success",message:"User updated successfully!"}),j(null),D({}),me()}catch{h({type:"error",message:"Failed to update user"})}},[P,F,s,me]),Fe=S.useCallback(async ke=>{if(window.confirm("Are you sure you want to delete this user?"))try{(await s("/.netlify/functions/delete-user",{userId:ke})).success&&(h({type:"success",message:"User deleted successfully!"}),me())}catch{h({type:"error",message:"Failed to delete user"})}},[s,me]),De=S.useCallback(ke=>{V(ke),re({teacher_id:ke.teacher_id||"",username:ke.username||"",password:ke.password||"",first_name:ke.first_name||"",last_name:ke.last_name||"",is_active:ke.is_active!==void 0?ke.is_active:!0})},[]),qe=S.useCallback(async()=>{try{const ke=[];Object.keys(Y).forEach(Pt=>{Pt!=="teacher_id"&&Y[Pt]!==B[Pt]&&ke.push({fieldName:Pt,newValue:Y[Pt]})});for(const Pt of ke)await s("/.netlify/functions/update-teacher",{teacherId:B.teacher_id,fieldName:Pt.fieldName,newValue:Pt.newValue});h({type:"success",message:"Teacher updated successfully!"}),V(null),re({}),Ne()}catch{h({type:"error",message:"Failed to update teacher"})}},[Y,B,s,Ne]),zt=S.useCallback(async ke=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{(await s("/.netlify/functions/delete-teacher",{teacherId:ke})).success&&(h({type:"success",message:"Teacher deleted successfully!"}),Ne())}catch{h({type:"error",message:"Failed to delete teacher"})}},[s,Ne]),_r=S.useCallback(ke=>{ee(ke),Q({subject_id:ke.subject_id||"",subject:ke.subject||""})},[]),jr=S.useCallback(async()=>{try{const ke=[];Object.keys(L).forEach(Pt=>{Pt!=="subject_id"&&L[Pt]!==te[Pt]&&ke.push({fieldName:Pt,newValue:L[Pt]})});for(const Pt of ke)await s("/.netlify/functions/update-subject",{subjectId:te.subject_id,fieldName:Pt.fieldName,newValue:Pt.newValue});h({type:"success",message:"Subject updated successfully!"}),ee(null),Q({}),ve()}catch{h({type:"error",message:"Failed to update subject"})}},[L,te,s,ve]),pt=S.useCallback(async ke=>{if(window.confirm("Are you sure you want to delete this subject?"))try{const Pt=await s("/.netlify/functions/delete-subject",{subjectId:ke});Pt.success?(h({type:"success",message:"Subject deleted successfully!"}),ve()):h({type:"error",message:Pt.message||"Failed to delete subject"})}catch{h({type:"error",message:"Failed to delete subject"})}},[s,ve]),or=S.useCallback((ke,Pt)=>{Vt(Mr=>({...Mr,[ke]:Pt}))},[]),Wr=S.useCallback(async ke=>{if(ke.preventDefault(),!st.startDate||!st.endDate||!st.teacherId){h({type:"error",message:"Please fill in all required fields (Start Date, End Date, Teacher ID)"});return}if(window.confirm("Are you sure you want to delete all test data for the selected criteria? This action cannot be undone."))try{const Pt=await s("/.netlify/functions/delete-test-data",st);Pt.success?(h({type:"success",message:`Successfully deleted ${Pt.deletedCount} test records!`}),Ie(!1),Vt({startDate:"",endDate:"",teacherId:"",grades:[],classes:[],subjectId:""})):h({type:"error",message:Pt.message||"Failed to delete test data"})}catch{h({type:"error",message:"Failed to delete test data"})}},[st,s]),Fr=S.useCallback(async(ke,Pt,Mr)=>{try{const qr=Date.now(),Tn=await n(`/.netlify/functions/get-test-assignments?t=${qr}`);if(Tn.success&&Tn.assignments){const Jr=Tn.assignments.filter(hs=>hs.test_id===parseInt(ke)&&hs.test_type===Pt);if(Jr.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const hs of Jr){const Xs=await s("/.netlify/functions/remove-assignment",{teacher_id:Mr,assignment_id:hs.assignment_id,test_type:Pt,test_id:ke});if(!Xs.success){h({type:"error",message:`Failed to complete test: ${Xs.message}`});return}}h({type:"success",message:"Test marked as complete successfully!"}),await ue()}else h({type:"error",message:"Failed to get test assignments"})}catch(qr){console.error("Error completing test:",qr),h({type:"error",message:"Failed to complete test"})}},[s,n,ue]),Tr=S.useCallback(async(ke,Pt,Mr)=>{try{const qr=Date.now(),Tn=await n(`/.netlify/functions/get-test-assignments?t=${qr}`);if(Tn.success&&Tn.assignments){const Jr=Tn.assignments.filter(hs=>hs.test_id===parseInt(ke)&&hs.test_type===Pt);if(Jr.length===0){h({type:"error",message:"No assignments found for this test"});return}for(const hs of Jr){const Xs=await s("/.netlify/functions/remove-assignment",{teacher_id:Mr,assignment_id:hs.assignment_id,test_type:Pt,test_id:ke,mark_active:!0});if(!Xs.success){h({type:"error",message:`Failed to reactivate test: ${Xs.message}`});return}}h({type:"success",message:"Test marked as active successfully!"}),await ue()}else h({type:"error",message:"Failed to get test assignments"})}catch(qr){console.error("Error reactivating test:",qr),h({type:"error",message:"Failed to reactivate test"})}},[s,n,ue]),Gr=S.useCallback(async(ke=!1)=>{try{const Pt=Date.now(),Mr=await n(`/.netlify/functions/get-all-tests?t=${Pt}`);console.log(" Actual tests response:",Mr),Re(Mr.tests||[]),console.log(" Actual tests set to state:",Mr.tests||[])}catch(Pt){console.error("Error loading actual tests:",Pt),h({type:"error",message:"Failed to load tests"})}},[n]),Lr=S.useCallback(async(ke,Pt,Mr)=>{try{const qr=await s("/.netlify/functions/delete-test",{test_id:ke,test_type:Pt,teacher_id:Mr});if(qr.success){h({type:"success",message:"Test deleted successfully!"});const Tn=`${Pt}-${ke}-${Mr}`;Te(Jr=>{const hs=new Set(Jr);return hs.delete(Tn),hs}),await Gr(!0)}else h({type:"error",message:`Failed to delete test: ${qr.message}`})}catch(qr){console.error("Error deleting test:",qr),h({type:"error",message:"Failed to delete test"})}},[s,Gr]),zn=S.useCallback((ke,Pt,Mr)=>{const qr=`${Pt}-${ke}-${Mr}`;Te(Tn=>{const Jr=new Set(Tn);return Jr.has(qr)?Jr.delete(qr):Jr.add(qr),Jr})},[]),br=E?it.filter(ke=>ke.grade.toString()===E):it,fn=U.filter(ke=>{const Pt=X==="all"?!0:X==="active"?ke.is_active:!ke.is_active,Mr=!W||ke.teacher_id===W,qr=!I||new Date(ke.created_at)>=new Date(I),Tn=!q||new Date(ke.created_at)<=new Date(q+"T23:59:59");return Pt&&Mr&&qr&&Tn}),Xr=je.filter(ke=>{const Pt=!Xe||ke.teacher_id===Xe,Mr=!Je||new Date(ke.created_at)>=new Date(Je),qr=!Ve||new Date(ke.created_at)<=new Date(Ve+"T23:59:59");return Pt&&Mr&&qr}),qn=S.useCallback(()=>{if(gt.size===Xr.length&&Xr.length>0)Te(new Set);else{const ke=Xr.map(Pt=>`${Pt.test_type}-${Pt.test_id}-${Pt.teacher_id}`);Te(new Set(ke))}},[gt.size,Xr]),An=S.useCallback(async()=>{if(gt.size!==0&&window.confirm(`Are you sure you want to delete ${gt.size} test(s)?`))try{const ke=Array.from(gt).map(Pt=>{const[Mr,qr,Tn]=Pt.split("-");return s("/.netlify/functions/delete-test",{test_id:parseInt(qr),test_type:Mr,teacher_id:Tn})});await Promise.all(ke),h({type:"success",message:`Successfully deleted ${gt.size} test(s)!`}),Te(new Set),await Gr(!0)}catch(ke){console.error("Error deleting marked tests:",ke),h({type:"error",message:"Failed to delete some tests. Please try again."})}},[gt,s,Gr]);return l.jsxs(vt.div,{id:"admin-cabinet-main",className:lt.container,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[l.jsx(vt.div,{className:lt.header,initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1,duration:.5},children:l.jsx("div",{className:lt.headerContent,children:l.jsxs("div",{className:lt.headerFlex,children:[l.jsxs(vt.div,{className:lt.adminInfo,initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.2,duration:.5},children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx(vt.div,{className:lt.adminAvatar,initial:{scale:0},animate:{scale:1},transition:{delay:.3,duration:.3,type:"spring"},whileHover:{scale:1.1},children:l.jsx("span",{className:"text-white font-semibold text-xl",children:e?.username?.charAt(0)||"A"})})}),l.jsxs("div",{children:[l.jsx("h1",{className:lt.adminText,children:e?.username||"Administrator"}),l.jsx("p",{className:lt.adminSubtext,children:"Administrator Dashboard"})]})]}),l.jsxs(vt.div,{className:lt.menuContainer,initial:{x:20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3,duration:.5},children:[l.jsxs("button",{onClick:gr,className:lt.menuButton,style:{zIndex:1e3},children:[l.jsx("span",{className:"hidden sm:inline",children:"Menu"}),l.jsx(vt.svg,{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:bt?180:0},transition:{duration:.2},children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})]}),l.jsx(Wo,{children:bt&&l.jsx(vt.div,{className:lt.menuDropdown,initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:l.jsxs("div",{className:"py-2",children:[l.jsx(vt.button,{onClick:Vr,className:lt.menuItem,whileHover:{x:4},transition:{duration:.2},children:"Change Password"}),l.jsx(vt.button,{onClick:()=>{gr(),r()},className:lt.menuItemLogout,whileHover:{x:4},transition:{duration:.2},children:"Logout"})]})})})]})]})})}),o&&l.jsx(pn,{text:"Loading..."}),u&&l.jsx(hu,{type:"error",message:u,onClose:()=>d(null)}),f&&l.jsx(hu,{type:f.type,message:f.message,onClose:()=>h(null)}),Lt&&l.jsx("div",{className:lt.modalOverlay,children:l.jsxs("div",{className:lt.modalContent,children:[l.jsx("h2",{className:lt.modalTitle,children:"Change Password"}),l.jsxs("form",{className:"space-y-4",children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{htmlFor:"currentPassword",className:lt.formLabel,children:"Current Password"}),l.jsx("input",{type:"password",id:"currentPassword",className:lt.formInput})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{htmlFor:"newPassword",className:lt.formLabel,children:"New Password"}),l.jsx("input",{type:"password",id:"newPassword",className:lt.formInput})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{htmlFor:"confirmPassword",className:lt.formLabel,children:"Confirm New Password"}),l.jsx("input",{type:"password",id:"confirmPassword",className:lt.formInput})]}),l.jsxs("div",{className:lt.modalActions,children:[l.jsx(ht,{type:"button",variant:"secondary",onClick:Nr,className:"flex-1",children:"Cancel"}),l.jsx(ht,{type:"submit",variant:"primary",className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Change Password"})]})]})]})}),l.jsx(vt.div,{className:lt.mainContainer,initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:l.jsxs("div",{className:"space-y-6",children:[l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},children:l.jsxs(Kt,{className:lt.cardContainer,children:[l.jsx(Kt.Header,{className:lt.cardHeader,children:l.jsx(Kt.Title,{className:lt.cardTitle,children:"User Management"})}),l.jsxs(Kt.Body,{className:lt.cardBody,children:[l.jsxs("div",{className:lt.buttonGroup,children:[l.jsx(ht,{variant:"primary",onClick:()=>hr(!0),className:lt.buttonPrimary,children:"Add User"}),l.jsx(ht,{variant:"secondary",onClick:()=>{me(),p(!g)},className:lt.buttonSecondary,children:g?"Hide Users Table":"Get All Users "})]}),l.jsx(Wo,{children:cr&&l.jsxs(vt.div,{className:lt.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New User"}),l.jsxs("form",{onSubmit:Ge,className:"space-y-4",children:[l.jsxs("div",{className:lt.formGrid,children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Grade"}),l.jsx("input",{type:"text",value:Ce.grade,onChange:ke=>he("grade",ke.target.value),className:lt.formInput,placeholder:"Enter grade"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Class"}),l.jsx("input",{type:"text",value:Ce.class,onChange:ke=>he("class",ke.target.value),className:lt.formInput,placeholder:"Enter class"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Number"}),l.jsx("input",{type:"text",value:Ce.number,onChange:ke=>he("number",ke.target.value),className:lt.formInput,placeholder:"Enter number"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Student ID"}),l.jsx("input",{type:"text",value:Ce.student_id,onChange:ke=>he("student_id",ke.target.value),className:lt.formInput,placeholder:"Enter student ID"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Name"}),l.jsx("input",{type:"text",value:Ce.name,onChange:ke=>he("name",ke.target.value),className:lt.formInput,placeholder:"Enter name"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Surname"}),l.jsx("input",{type:"text",value:Ce.surname,onChange:ke=>he("surname",ke.target.value),className:lt.formInput,placeholder:"Enter surname"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Nickname"}),l.jsx("input",{type:"text",value:Ce.nickname,onChange:ke=>he("nickname",ke.target.value),className:lt.formInput,placeholder:"Enter nickname"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Password"}),l.jsx("input",{type:"password",value:Ce.password,onChange:ke=>he("password",ke.target.value),className:lt.formInput,placeholder:"Enter password"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"userActive",checked:Ce.is_active,onChange:ke=>he("is_active",ke.target.checked),className:lt.formCheckbox}),l.jsx("label",{htmlFor:"userActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),l.jsxs("div",{className:lt.formActions,children:[l.jsx(ht,{type:"button",variant:"secondary",onClick:()=>hr(!1),className:lt.buttonSecondary,children:"Cancel"}),l.jsx(ht,{type:"submit",variant:"primary",className:lt.buttonPrimary,children:"Add User"})]})]})]})}),g&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Users (",br.length," of ",it.length,")"]}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Filter by Grade:"}),l.jsxs("select",{value:E,onChange:ke=>A(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Grades"}),[...new Set(it.map(ke=>ke.grade))].sort().map(ke=>l.jsxs("option",{value:ke,children:["Grade ",ke]},ke))]})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-[600px]",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:lt.tableHeaderCell,children:"Name"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Grade"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Class"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Student ID"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Number"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Nickname"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:br.map((ke,Pt)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsxs("td",{className:lt.tableCell,children:[ke.name," ",ke.surname]}),l.jsx("td",{className:lt.tableCell,children:ke.grade}),l.jsx("td",{className:lt.tableCell,children:ke.class}),l.jsx("td",{className:lt.tableCell,children:ke.student_id}),l.jsx("td",{className:lt.tableCell,children:ke.number}),l.jsx("td",{className:lt.tableCell,children:ke.nickname}),l.jsx("td",{className:lt.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>de(ke),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>Fe(ke.student_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},ke.id||Pt))})]})})})]})]})]})}),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},children:l.jsxs(Kt,{className:lt.cardContainer,children:[l.jsxs(Kt.Header,{className:lt.cardHeader,children:[l.jsx(Kt.Title,{className:lt.cardTitle,children:"Teacher Management"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("button",{onClick:i,className:"px-3 py-1.5 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors text-xs whitespace-nowrap",title:"Check and mark overdue assignments (7+ days old) as inactive",children:"Check Overdue Assignments"}),l.jsx(ht,{variant:"primary",onClick:()=>ur(!0),className:"text-xs whitespace-nowrap",children:"Add Teacher"}),l.jsx(ht,{variant:"secondary",onClick:()=>{Ne(),v(!y)},className:"text-xs whitespace-nowrap",children:y?"Hide Teachers Table":"Get All Teachers "})]})]}),l.jsxs(Kt.Body,{className:lt.cardBody,children:[l.jsx(Wo,{children:Cr&&l.jsxs(vt.div,{className:lt.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Teacher"}),l.jsxs("form",{onSubmit:Ye,className:"space-y-4",children:[l.jsxs("div",{className:lt.formGrid,children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Teacher ID"}),l.jsx("input",{type:"text",value:wt.teacher_id,onChange:ke=>Pe("teacher_id",ke.target.value),className:lt.formInput,placeholder:"Enter teacher ID"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Username"}),l.jsx("input",{type:"text",value:wt.username,onChange:ke=>Pe("username",ke.target.value),className:lt.formInput,placeholder:"Enter username"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Password"}),l.jsx("input",{type:"password",value:wt.password,onChange:ke=>Pe("password",ke.target.value),className:lt.formInput,placeholder:"Enter password"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"First Name"}),l.jsx("input",{type:"text",value:wt.first_name,onChange:ke=>Pe("first_name",ke.target.value),className:lt.formInput,placeholder:"Enter first name"})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Last Name"}),l.jsx("input",{type:"text",value:wt.last_name,onChange:ke=>Pe("last_name",ke.target.value),className:lt.formInput,placeholder:"Enter last name"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"teacherActive",checked:wt.is_active,onChange:ke=>Pe("is_active",ke.target.checked),className:lt.formCheckbox}),l.jsx("label",{htmlFor:"teacherActive",className:"ml-2 text-sm text-gray-700",children:"Active"})]}),l.jsxs("div",{className:lt.formActions,children:[l.jsx(ht,{type:"button",variant:"secondary",onClick:()=>ur(!1),className:lt.buttonSecondary,children:"Cancel"}),l.jsx(ht,{type:"submit",variant:"primary",className:lt.buttonPrimary,children:"Add Teacher"})]})]})]})}),F&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit User"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("input",{type:"text",value:P.name,onChange:ke=>D({...P,name:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Surname"}),l.jsx("input",{type:"text",value:P.surname,onChange:ke=>D({...P,surname:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),l.jsx("input",{type:"number",value:P.grade,onChange:ke=>D({...P,grade:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),l.jsx("input",{type:"number",value:P.class,onChange:ke=>D({...P,class:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Student ID"}),l.jsx("input",{type:"text",value:P.student_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Student ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),l.jsx("input",{type:"text",value:P.nickname,onChange:ke=>D({...P,nickname:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),l.jsx("input",{type:"text",value:P.password,onChange:ke=>D({...P,password:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"is_active",checked:P.is_active,onChange:ke=>D({...P,is_active:ke.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),l.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>{j(null),D({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:_e,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update User"})]})]})}),y&&l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Teachers (",Mt.length,")"]})}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:lt.tableHeaderCell,children:"Teacher ID"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Name"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Username"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Password"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Status"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Created"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:Mt.map((ke,Pt)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsx("td",{className:lt.tableCell,children:ke.teacher_id}),l.jsxs("td",{className:lt.tableCell,children:[ke.first_name," ",ke.last_name]}),l.jsx("td",{className:lt.tableCell,children:ke.username}),l.jsx("td",{className:lt.tableCell,children:ke.password}),l.jsx("td",{className:lt.tableCell,children:l.jsx("span",{className:ke.is_active?lt.statusActive:lt.statusInactive,children:ke.is_active?"Active":"Inactive"})}),l.jsx("td",{className:lt.tableCell,children:new Date(ke.created_at).toLocaleDateString()}),l.jsx("td",{className:lt.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>De(ke),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>zt(ke.teacher_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},ke.teacher_id||Pt))})]})})})]})]})]})}),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},children:l.jsxs(Kt,{className:lt.cardContainer,children:[l.jsx(Kt.Header,{className:lt.cardHeader,children:l.jsx(Kt.Title,{className:lt.cardTitle,children:"Subject Management"})}),l.jsxs(Kt.Body,{className:lt.cardBody,children:[l.jsxs("div",{className:lt.buttonGroup,children:[l.jsx(ht,{variant:"primary",onClick:()=>we(!0),className:lt.buttonPrimary,children:"Add Subject"}),l.jsx(ht,{variant:"secondary",onClick:()=>{ve(),w(!C)},className:lt.buttonSecondary,children:C?"Hide Subjects Table":"Get All Subjects "})]}),l.jsx(Wo,{children:Sr&&l.jsxs(vt.div,{className:lt.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Add New Subject"}),l.jsxs("form",{onSubmit:ct,className:"space-y-4",children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Subject Name"}),l.jsx("input",{type:"text",value:Oe.subject,onChange:ke=>tt("subject",ke.target.value),className:lt.formInput,placeholder:"Enter subject name",required:!0}),l.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Subject ID will be automatically generated"})]}),l.jsxs("div",{className:lt.formActions,children:[l.jsx(ht,{type:"button",variant:"secondary",onClick:()=>we(!1),className:lt.buttonSecondary,children:"Cancel"}),l.jsx(ht,{type:"submit",variant:"primary",className:lt.buttonPrimary,children:"Add Subject"})]})]})]})}),B&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Teacher"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher ID"}),l.jsx("input",{type:"text",value:Y.teacher_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Teacher ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),l.jsx("input",{type:"text",value:Y.username,onChange:ke=>re({...Y,username:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),l.jsx("input",{type:"text",value:Y.password,onChange:ke=>re({...Y,password:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),l.jsx("input",{type:"text",value:Y.first_name,onChange:ke=>re({...Y,first_name:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),l.jsx("input",{type:"text",value:Y.last_name,onChange:ke=>re({...Y,last_name:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"teacher_is_active",checked:Y.is_active,onChange:ke=>re({...Y,is_active:ke.target.checked}),className:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),l.jsx("label",{htmlFor:"teacher_is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Active"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>{V(null),re({})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300",children:"Cancel"}),l.jsx("button",{onClick:qe,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Update Teacher"})]})]})}),te&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Subject"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject ID"}),l.jsx("input",{type:"text",value:L.subject_id,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Subject ID cannot be changed"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject Name"}),l.jsx("input",{type:"text",value:L.subject,onChange:ke=>Q({...L,subject:ke.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[l.jsx("button",{onClick:()=>ee(null),className:"px-4 py-2 text-gray-600 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),l.jsx("button",{onClick:jr,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"Update Subject"})]})]})}),C&&l.jsxs("div",{className:"mt-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Subjects (",Qe.length,")"]})}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:lt.tableHeaderCell,children:"Subject ID"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Subject Name"}),l.jsx("th",{className:lt.tableHeaderCell,children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:Qe.map((ke,Pt)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsx("td",{className:lt.tableCell,children:ke.subject_id}),l.jsx("td",{className:lt.tableCell,children:ke.subject}),l.jsx("td",{className:lt.tableCell,children:l.jsxs("div",{className:"flex space-x-2",children:[l.jsx("button",{onClick:()=>_r(ke),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Edit"}),l.jsx("button",{onClick:()=>pt(ke.subject_id),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Delete"})]})})]},ke.subject_id||Pt))})]})})})]})]})]})}),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},children:l.jsxs(Kt,{className:lt.cardContainer,children:[l.jsx(Kt.Header,{className:lt.cardHeader,children:l.jsx(Kt.Title,{className:lt.cardTitle,children:"Test Data Deletion"})}),l.jsxs(Kt.Body,{className:lt.cardBody,children:[l.jsx("div",{className:lt.buttonGroup,children:l.jsx(ht,{variant:"danger",onClick:()=>Ie(!0),className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})}),l.jsx(Wo,{children:Me&&l.jsxs(vt.div,{className:lt.formContainer,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Delete Test Data by Date Range"}),l.jsxs("form",{onSubmit:Wr,className:"space-y-4",children:[l.jsxs("div",{className:lt.formGrid,children:[l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Start Date *"}),l.jsx("input",{type:"date",value:st.startDate,onChange:ke=>or("startDate",ke.target.value),className:lt.formInput,required:!0})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"End Date *"}),l.jsx("input",{type:"date",value:st.endDate,onChange:ke=>or("endDate",ke.target.value),className:lt.formInput,required:!0})]})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Teacher ID *"}),l.jsxs("select",{value:st.teacherId,onChange:ke=>or("teacherId",ke.target.value),className:lt.formInput,required:!0,children:[l.jsx("option",{value:"",children:"Select a teacher"}),Mt.map(ke=>l.jsxs("option",{value:ke.teacher_id,children:[ke.teacher_id," - ",ke.first_name," ",ke.last_name]},ke.teacher_id))]})]}),l.jsxs("div",{className:lt.formGroup,children:[l.jsx("label",{className:lt.formLabel,children:"Subject (Optional)"}),l.jsxs("select",{value:st.subjectId,onChange:ke=>or("subjectId",ke.target.value),className:lt.formInput,children:[l.jsx("option",{value:"",children:"All subjects"}),Qe.map(ke=>l.jsx("option",{value:ke.subject_id,children:ke.subject},ke.subject_id))]})]}),l.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action cannot be undone"}),l.jsxs("div",{className:"mt-2 text-sm text-yellow-700",children:[l.jsx("p",{children:"This will permanently delete:"}),l.jsxs("ul",{className:"list-disc list-inside mt-1",children:[l.jsx("li",{children:"All test records within the date range"}),l.jsx("li",{children:"All test questions and answers"}),l.jsx("li",{children:"All test results and submissions"}),l.jsx("li",{children:"All test assignments"}),l.jsx("li",{children:"Associated Cloudinary images (for matching tests)"})]})]})]})]})}),l.jsxs("div",{className:lt.formActions,children:[l.jsx(ht,{type:"button",variant:"secondary",onClick:()=>Ie(!1),className:lt.buttonSecondary,children:"Cancel"}),l.jsx(ht,{type:"submit",variant:"danger",className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 shadow-md",children:"Delete Test Data"})]})]})]})})]})]})}),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.85,duration:.5},children:l.jsxs(Kt,{className:lt.cardContainer,children:[l.jsx(Kt.Header,{className:lt.cardHeader,children:l.jsx(Kt.Title,{className:lt.cardTitle,children:"Assignments Management"})}),l.jsxs(Kt.Body,{className:lt.cardBody,children:[l.jsx("div",{className:"mb-4",children:l.jsx(ht,{variant:"primary",onClick:ue,className:lt.buttonPrimary,children:_?"Hide Assignments Table":"Get All Assignments "})}),_&&l.jsx("div",{className:"mb-4",children:l.jsx("p",{className:"text-sm text-gray-600",children:"Showing all tests (Active and Completed)"})}),_&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Assignments (",fn.length," of ",U.length,")"]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("select",{value:X,onChange:ke=>se(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"all",children:"All"}),l.jsx("option",{value:"active",children:"Active"}),l.jsx("option",{value:"completed",children:"Completed"})]}),l.jsxs("select",{value:W,onChange:ke=>M(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Teachers"}),Mt.map(ke=>l.jsxs("option",{value:ke.teacher_id,children:[ke.first_name," ",ke.last_name]},ke.teacher_id))]}),l.jsx("input",{type:"date",value:I,onChange:ke=>z(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),l.jsx("input",{type:"date",value:q,onChange:ke=>ne(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:fn.map((ke,Pt)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:ke.test_name,children:ke.test_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:ke.test_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:ke.teacher_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:ke.num_questions}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(ke.created_at).toLocaleDateString()}),l.jsx("td",{className:"px-4 py-3 text-xs",children:l.jsx("div",{className:"flex space-x-2",children:ke.is_active?l.jsx("button",{onClick:()=>Fr(ke.test_id,ke.test_type,ke.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-orange-100 text-orange-700 hover:bg-orange-200",children:"Mark Complete"}):l.jsx("button",{onClick:()=>Tr(ke.test_id,ke.test_type,ke.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Mark Active"})})})]},`${ke.test_type}-${ke.test_id}-${Pt}`))})]})})})]})]})]})}),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:l.jsxs(Kt,{className:lt.cardContainer,children:[l.jsx(Kt.Header,{className:lt.cardHeader,children:l.jsx(Kt.Title,{className:lt.cardTitle,children:"Test Management"})}),l.jsxs(Kt.Body,{className:lt.cardBody,children:[l.jsx("div",{className:"mb-4",children:l.jsx(ht,{variant:"primary",onClick:()=>{be||Gr(),oe(!be)},className:lt.buttonPrimary,children:be?"Hide Tests Table":"Get All Tests "})}),be&&l.jsxs("div",{className:"mt-6",children:[l.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("h4",{className:"text-lg font-semibold text-gray-700",children:["All Tests (",Xr.length," of ",je.length,")"]}),gt.size>0&&l.jsxs(ht,{variant:"danger",onClick:An,className:"text-sm px-4 py-2",children:["Delete Marked (",gt.size,")"]})]}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("select",{value:Xe,onChange:ke=>ft(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[l.jsx("option",{value:"",children:"All Teachers"}),Mt.map(ke=>l.jsxs("option",{value:ke.teacher_id,children:[ke.first_name," ",ke.last_name]},ke.teacher_id))]}),l.jsx("input",{type:"date",value:Je,onChange:ke=>Ht(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Start Date"}),l.jsx("input",{type:"date",value:Ve,onChange:ke=>at(ke.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"End Date"})]})]}),l.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:lt.table,children:[l.jsx("thead",{className:lt.tableHeader,children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:l.jsx("input",{type:"checkbox",checked:gt.size===Xr.length&&Xr.length>0,onChange:qn,className:"cursor-pointer"})}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Test Name"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Teacher"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider text-center",children:"Questions"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),l.jsx("th",{className:"px-4 py-3 text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:lt.tableBody,children:Xr.map((ke,Pt)=>l.jsxs("tr",{className:lt.tableRow,children:[l.jsx("td",{className:lt.tableCell,children:l.jsx("input",{type:"checkbox",checked:gt.has(`${ke.test_type}-${ke.test_id}-${ke.teacher_id}`),onChange:()=>zn(ke.test_id,ke.test_type,ke.teacher_id),className:"cursor-pointer"})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 max-w-xs truncate",title:ke.test_name,children:ke.test_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:l.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:ke.test_type.replace("_"," ").toUpperCase()})}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:ke.teacher_name}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900 text-center",children:ke.num_questions}),l.jsx("td",{className:"px-4 py-3 text-xs text-gray-900",children:new Date(ke.created_at).toLocaleDateString()}),l.jsx("td",{className:"px-4 py-3 text-xs",children:l.jsx("div",{className:"flex space-x-2",children:l.jsx("button",{onClick:()=>Lr(ke.test_id,ke.test_type,ke.teacher_id),className:"text-xs font-medium px-2 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200",children:"Delete"})})})]},`${ke.test_type}-${ke.test_id}-${Pt}`))})]})})})]})]})]})}),l.jsx(vt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9,duration:.5},children:l.jsxs(Kt,{className:lt.cardContainer,children:[l.jsx(Kt.Header,{className:lt.cardHeader,children:l.jsx(Kt.Title,{className:lt.cardTitle,children:"Debug & Testing"})}),l.jsx(Kt.Body,{className:lt.cardBody})]})})]})})]})},Bje=()=>{const{isAdmin:e,getCurrentAdminId:t,logout:r}=Fs(),{get:n}=ql(),{showNotification:s}=di();S.useEffect(()=>{a()},[]);const a=S.useCallback(async()=>{if(console.log(" Initializing Admin Application..."),!e()){console.error(" User is not an admin, redirecting to login"),s("Access Denied: You are not an administrator.","error"),r();return}try{i(),await o(),c(),u(),console.log(" Admin Application initialized successfully"),s("Admin dashboard loaded successfully","success")}catch(d){console.error(" Error initializing admin app:",d),s("Failed to initialize admin dashboard","error")}},[e,t,r,s,n]),i=S.useCallback(()=>{console.log(" Initializing global event listeners...");const d=f=>{f.ctrlKey&&f.key==="k"&&(f.preventDefault(),console.log("Admin search shortcut triggered"))};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),o=S.useCallback(async()=>{try{console.log(" Loading admin data...");const[d,f,h,g]=await Promise.allSettled([n("/.netlify/functions/get-all-users"),n("/.netlify/functions/get-all-teachers"),n("/.netlify/functions/get-all-subjects"),gu.loadAcademicCalendar()]);d.status==="fulfilled"&&d.value?.success&&console.log(" Users loaded:",d.value.users?.length||0),f.status==="fulfilled"&&f.value?.success&&console.log(" Teachers loaded:",f.value.teachers?.length||0),h.status==="fulfilled"&&h.value?.success&&console.log(" Subjects loaded:",h.value.subjects?.length||0),g.status==="fulfilled"&&Array.isArray(g.value)&&console.log(" Academic years loaded:",g.value.length||0),console.log(" Admin data loading completed")}catch(d){throw console.error(" Error loading admin data:",d),d}},[n]),c=S.useCallback(()=>{console.log(" Initializing test deletion functionality..."),console.log(" Test deletion functionality initialized")},[]),u=S.useCallback(()=>{console.log(" Exposing admin functions globally..."),window.toggleSubjectsContent=()=>{const f=document.getElementById("allSubjectsContainer"),h=document.querySelector('button[onclick="toggleSubjectsContent()"]');if(!f){console.error(" allSubjectsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Subjects":"Hide Subjects"},window.showAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm");f&&(f.style.display="block")},window.hideAddSubjectForm=()=>{const f=document.getElementById("addSubjectForm"),h=document.getElementById("newSubjectForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm");f&&(f.style.display="block")},window.hideAddAcademicYearForm=()=>{const f=document.getElementById("addAcademicYearForm"),h=document.getElementById("newAcademicYearForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleUsersContent=()=>{const f=document.getElementById("allUsersContainer"),h=document.querySelector('button[onclick="toggleUsersContent()"]');if(!f){console.error(" allUsersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Users":"Hide Users"},window.showAddUserForm=()=>{const f=document.getElementById("addUserForm");f&&(f.style.display="block")},window.hideAddUserForm=()=>{const f=document.getElementById("addUserForm"),h=document.getElementById("newUserForm");f&&(f.style.display="none"),h&&h.reset()},window.showAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm");f&&(f.style.display="block")},window.hideAddTeacherForm=()=>{const f=document.getElementById("addTeacherForm"),h=document.getElementById("newTeacherForm");f&&(f.style.display="none"),h&&h.reset()},window.toggleTeachersContent=()=>{const f=document.getElementById("allTeachersContainer"),h=document.querySelector('button[onclick="toggleTeachersContent()"]');if(!f){console.error(" allTeachersContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Teachers":"Hide Teachers"},window.toggleTestsContent=()=>{const f=document.getElementById("allTestsContainer"),h=document.querySelector('button[onclick="toggleTestsContent()"]');if(!f){console.error(" allTestsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Tests":"Hide Tests"},window.toggleAssignmentsContent=()=>{const f=document.getElementById("allAssignmentsContainer"),h=document.querySelector('button[onclick="toggleAssignmentsContent()"]');if(!f){console.error(" allAssignmentsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Assignments":"Hide Assignments"},window.toggleResultsContent=()=>{const f=document.getElementById("allResultsContainer"),h=document.querySelector('button[onclick="toggleResultsContent()"]');if(!f){console.error(" allResultsContainer not found");return}if(!h){console.error(" Button not found");return}const g=f.style.display!=="none";f.style.display=g?"none":"block",h.textContent=g?"Show Results":"Hide Results"};const d={};window.toggleSection=f=>{console.log(` toggleSection called with sectionId: ${f}`);const h=Date.now();if(d[f]&&h-d[f]<300){console.log(` Ignoring rapid successive call for ${f}`);return}d[f]=h;const g=document.getElementById(f);if(!g){console.error(` Section with id '${f}' not found!`);return}const p=g.style.display!=="none";g.style.display=p?"none":"block";const y=document.querySelector(`button[onclick="toggleSection('${f}')"]`);y&&(y.textContent=p?"Show":"Hide")},window.addClickListeners=()=>{console.log(" Adding click listeners to section headers...");const f=document.querySelectorAll(".section-header");console.log(` Found ${f.length} section headers`),f.forEach((h,g)=>{const p=h.textContent.trim();if(console.log(` Processing header ${g+1}:`,p),h.dataset.listenerAdded==="true"){console.log(` Skipping header ${p} - listener already added`);return}h.addEventListener("click",()=>{const y=h.dataset.sectionId;y&&window.toggleSection(y)}),h.dataset.listenerAdded="true",console.log(` Added click listener to header: ${p}`)})},window.makeFieldEditable=f=>{const h=f.textContent;f.dataset.field;const g=document.createElement("input");g.type="text",g.value=h,g.className="editable-input";const p=document.createElement("button");p.textContent="Save",p.className="btn-save",p.onclick=()=>window.saveField(f,g,p,y);const y=document.createElement("button");y.textContent="Cancel",y.className="btn-cancel",y.onclick=()=>{f.textContent=h,f.style.display="block",g.remove(),p.remove(),y.remove()},f.style.display="none",f.parentNode.insertBefore(g,f),f.parentNode.insertBefore(p,f),f.parentNode.insertBefore(y,f)},window.saveField=(f,h,g,p)=>{const y=h.value.trim(),v=f.dataset.field,C=f.dataset.recordId;if(!y){alert("Field cannot be empty");return}console.log(`Saving field ${v} for record ${C} with value: ${y}`),f.textContent=y,f.style.display="block",h.remove(),g.remove(),p.remove()},window.showTestDataDeletion=()=>console.log("showTestDataDeletion called"),window.hideTestDataDeletionForm=()=>console.log("hideTestDataDeletionForm called"),window.loadTeacherGradesClasses=()=>console.log("loadTeacherGradesClasses called"),window.checkTeacherSubjects=()=>console.log("checkTeacherSubjects called"),window.initializeTestDeletion=()=>console.log("initializeTestDeletion called"),window.handleAssignmentDeletion=()=>console.log("handleAssignmentDeletion called"),window.handleTestDataDeletion=()=>console.log("handleTestDataDeletion called"),window.getSelectedGradesClasses=()=>console.log("getSelectedGradesClasses called"),window.hideAssignmentDeletionForm=()=>console.log("hideAssignmentDeletionForm called"),window.addKeyboardAccessibility=()=>console.log("addKeyboardAccessibility called"),window.testToggleSection=()=>console.log("testToggleSection called"),window.testAllToggles=()=>console.log("testAllToggles called"),window.manualToggleTest=()=>console.log("manualToggleTest called"),window.addEditableFieldListeners=()=>console.log("addEditableFieldListeners called"),window.deleteTest=()=>console.log("deleteTest called"),window.testLocalStorage=()=>{console.log("Testing localStorage...");try{localStorage.setItem("test","value");const f=localStorage.getItem("test");return localStorage.removeItem("test"),console.log(" localStorage is working"),!0}catch(f){return console.error(" localStorage error:",f),!1}},window.clearAllLocalStorage=()=>{console.log("Clearing all localStorage..."),localStorage.clear(),console.log(" localStorage cleared")},window.exportLocalStorage=()=>{console.log("Exporting localStorage...");const f={};for(let y=0;y<localStorage.length;y++){const v=localStorage.key(y);f[v]=localStorage.getItem(v)}const h=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),g=URL.createObjectURL(h),p=document.createElement("a");p.href=g,p.download="localStorage-backup.json",p.click(),URL.revokeObjectURL(g)},console.log(" Admin functions exposed globally")},[]);return e()?l.jsx(Lje,{}):l.jsxs("div",{className:"admin-error",children:[l.jsx("h2",{children:"Access Denied"}),l.jsx("p",{children:"You don't have permission to access the admin dashboard."}),l.jsx("button",{onClick:r,children:"Return to Login"})]})},$je=()=>{const[e,t]=S.useState(!1),[r,n]=S.useState("en");S.useEffect(()=>{localStorage.getItem("cookie_consent")||setTimeout(()=>{t(!0)},500);const c=localStorage.getItem("app_language")||(navigator.language.startsWith("th")?"th":"en");n(c)},[]);const s=()=>{localStorage.setItem("cookie_consent","informed"),localStorage.setItem("cookie_consent_date",new Date().toISOString()),t(!1)};if(!e)return null;const i={en:{title:"Cookie Information",message:"This app uses only essential cookies and local storage to manage authentication, sessions, and test progress. These functions are necessary for the app to operate correctly and do not require user consent under GDPR or Thailand's PDPA. No tracking or advertising cookies are used.",acknowledge:"I Understand",learnMore:"Learn More",privacyLink:"/privacy"},th:{title:"",message:"    GDPR  PDPA  ",acknowledge:"",learnMore:"",privacyLink:"/privacy"}}[r];return l.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-3 sm:p-6",children:l.jsx("div",{className:"max-w-4xl mx-auto rounded-lg shadow-2xl border-2 bg-white",children:l.jsx("div",{className:"p-3 sm:p-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900",children:i.title}),l.jsx("p",{className:"text-sm text-gray-700",children:i.message}),l.jsx("a",{href:i.privacyLink,className:"text-sm mt-2 inline-block underline text-blue-600 hover:text-blue-800",children:i.learnMore})]}),l.jsx("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 w-auto sm:w-auto",children:l.jsx("button",{onClick:s,className:"font-medium rounded-lg transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 cursor-pointer px-4 py-2 text-sm sm:px-3 sm:py-1.5 sm:text-sm bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500 whitespace-nowrap",children:i.acknowledge})})]})})})})},Pk=({children:e,allowedRoles:t})=>{const{isAuthenticated:r,role:n,isLoading:s}=Fs();return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):r?t&&!t.includes(n)?l.jsx(Hp,{to:"/unauthorized",replace:!0}):e:l.jsx(Hp,{to:"/login",replace:!0})},Uje=()=>l.jsxs("div",{className:"unauthorized-page",children:[l.jsx("h1",{children:"Access Denied"}),l.jsx("p",{children:"You don't have permission to access this page."})]}),zje=()=>l.jsx(_B,{children:l.jsx(yH,{children:l.jsx(pH,{children:l.jsx(LQ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:l.jsxs("div",{className:"app",children:[l.jsxs(tT,{children:[l.jsx(ea,{path:"/privacy",element:l.jsx(a0e,{})}),l.jsx(ea,{path:"/login",element:l.jsx(n0e,{})}),l.jsx(ea,{path:"/unauthorized",element:l.jsx(Uje,{})}),l.jsx(ea,{path:"/student/*",element:l.jsx(Pk,{allowedRoles:["student"],children:l.jsx(kfe,{})})}),l.jsx(ea,{path:"/teacher/*",element:l.jsx(Pk,{allowedRoles:["teacher"],children:l.jsx(Ije,{})})}),l.jsx(ea,{path:"/admin/*",element:l.jsx(Pk,{allowedRoles:["admin"],children:l.jsx(Bje,{})})}),l.jsx(ea,{path:"/",element:l.jsx(Hp,{to:"/login",replace:!0})}),l.jsx(ea,{path:"*",element:l.jsx(Hp,{to:"/login",replace:!0})})]}),l.jsx(Wje,{})]})})})})}),Wje=()=>{const{isAuthenticated:e}=Fs();return e?l.jsx($je,{}):null},Hje=["/login","/privacy","/privacy-policy"],Gje=["privacy","terms","legal"],Vje=e=>{const t=e.toLowerCase();return Hje.some(r=>t===r||t.startsWith(`${r}/`))?!0:Gje.some(r=>t.includes(r))};class qje{constructor(){this.tokenKey="auth_token",this.refreshTokenKey="refresh_token",this.userKey="user_data",this.startIntegrityMonitoring()}startIntegrityMonitoring(){setInterval(()=>{this.performIntegrityCheck().catch(t=>{console.error("Integrity check failed:",t)})},3e4)}async performIntegrityCheck(){try{const t=await ma.get();t&&!this.validateTokenFormat(t)&&(console.warn("Integrity check failed - corrupted token detected"),await this.restoreFromBackup()||(console.warn("No valid backup available - clearing authentication"),await this.clearAuth()))}catch(t){console.error("Error during integrity check:",t)}}async getToken(){const t=await ma.get();return t&&!this.validateTokenFormat(t)?(console.warn("Corrupted token detected in storage - clearing it"),this.clearAuth(),null):t}getTokenSync(){return null}getRefreshToken(){return localStorage.getItem(this.refreshTokenKey)}getUserData(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}async setToken(t){if(!this.validateTokenFormat(t))return console.error("Invalid token format - refusing to store corrupted token"),!1;try{this.decodeToken(t);const r=await ma.get();if(r)try{localStorage.setItem(`${this.tokenKey}_backup`,r)}catch{}const n=await ma.set(t);return n?console.log("Token stored successfully with secure storage (hash verification, retry, write verification)"):console.error("Failed to store token - secure storage failed"),n}catch(r){return console.error("Failed to store token - token is corrupted:",r),!1}}async restoreFromBackup(){try{const t=localStorage.getItem(`${this.tokenKey}_backup`);if(t&&this.validateTokenFormat(t))return console.log("Restoring token from backup"),await ma.set(t)}catch(t){console.warn("Failed to restore from backup",t)}return!1}validateTokenFormat(t){if(!t||typeof t!="string")return console.warn("Token validation failed: not a string"),!1;if(!t.includes("."))return console.warn("Token validation failed: not a JWT format"),!1;const r=t.split(".");if(r.length!==3)return console.warn("Token validation failed: not 3 parts"),!1;for(let n=0;n<r.length;n++)try{atob(r[n].replace(/-/g,"+").replace(/_/g,"/"))}catch{return console.warn(`Token validation failed: part ${n} is not valid base64`),!1}return!0}setRefreshToken(t){localStorage.setItem(this.refreshTokenKey,t)}setUserData(t){localStorage.setItem(this.userKey,JSON.stringify(t))}setTokens(t,r){return this.setToken(t)?(this.setUserData({role:r}),localStorage.setItem("accessToken",t),!0):(console.error("Failed to set token - token validation failed"),!1)}async isAuthenticated(){const t=await this.getToken();if(!t)return!1;try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),!1;const r=t.split(".");if(r.length!==3)return console.warn("Invalid token format - not 3 parts"),this.clearAuth(),!1;const n=JSON.parse(atob(r[1])),s=Date.now()/1e3;return n.exp>s}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),!1}}getUserRole(){const t=this.getUserData();return t?t.role:null}isAdmin(){return this.getUserRole()==="admin"}isTeacher(){return this.getUserRole()==="teacher"}isStudent(){return this.getUserRole()==="student"}async clearAuth(){try{await ma.clear(),localStorage.removeItem(this.refreshTokenKey),localStorage.removeItem(this.userKey),localStorage.removeItem(`${this.tokenKey}_backup`)}catch(t){console.error("Failed to clear localStorage - possible corruption:",t),this.forceClearAllAuthData()}}forceClearAllAuthData(){["auth_token","accessToken","userRole","userData","refresh_token","auth_token_backup"].forEach(r=>{try{localStorage.removeItem(r)}catch(n){console.warn(`Failed to remove ${r}:`,n)}})}logout(){this.clearAuth(),window.location.href="/login"}async getAuthHeader(){const t=await this.getToken();return t?`Bearer ${t}`:null}async makeAuthenticatedRequest(t,r={}){const n=await this.getToken();if(!n)throw new Error("No authentication token found");const s={"Content-Type":"application/json",Authorization:`Bearer ${n}`,...r.headers},a=await fetch(t,{...r,headers:s});if(a.status===401)if(await this.refreshToken()){const o=await this.getToken();return s.Authorization=`Bearer ${o}`,fetch(t,{...r,headers:s})}else throw this.logout(),new Error("Authentication failed");return a}async refreshToken(){const t=this.getRefreshToken();if(!t)return!1;try{const r=await fetch("/.netlify/functions/refresh-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:t})});if(r.ok){const n=await r.json(),s=n.accessToken||n.token;return s?await this.setToken(s)?(n.refreshToken&&this.setRefreshToken(n.refreshToken),!0):(console.error("Failed to store refreshed token"),!1):(console.error("Refresh token response missing accessToken"),!1)}else{const n=await r.json().catch(()=>({}));return console.error("Token refresh failed:",r.status,n.message||"Unknown error"),!1}}catch(r){console.error("Error refreshing token:",r)}return!1}async getAccessToken(){return await this.getToken()}decodeToken(t){try{if(typeof t!="string"||!t.includes("."))return console.warn("Invalid token format - not a JWT"),this.clearAuth(),null;const r=t.split(".");return r.length!==3?(console.warn("Invalid token format - not 3 parts"),this.clearAuth(),null):JSON.parse(atob(r[1]))}catch(r){return console.error("Error decoding token:",r),console.warn("Token appears to be corrupted - clearing authentication"),this.clearAuth(),null}}async init(){if(!await this.isAuthenticated()){const r=window.location.pathname||"/",n=Vje(r);return console.info("[TokenManager] Unauthenticated visitor on path:",r,"public?",n),n||(window.location.href="/login"),!1}return this.setupTokenRefresh(),!0}setupTokenRefresh(){setInterval(async()=>{await this.isAuthenticated()&&await this.refreshToken()},3e3*1e3)}}const cJ=new qje;window.tokenManager=cJ;if(typeof document<"u"){const e=async()=>{await cJ.init()};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}class uJ{constructor(){this.currentRole=null,this.loadedFunctions=new Set,this.blockedFunctions=new Set,this.initialized=!1,this.retryCount=0,this.maxRetries=20}initialize(){if(this.initialized){console.log("[DEBUG] Role-based loader already initialized, skipping...");return}if(this.retryCount>=this.maxRetries){console.warn("[DEBUG] Max retries reached, stopping role-based loader initialization");return}if(this.retryCount++,(this.retryCount%5===1||this.retryCount===this.maxRetries)&&console.log(`[DEBUG] Role-based loader initializing... (attempt ${this.retryCount}/${this.maxRetries})`),console.log("[DEBUG] Token manager available:",!!window.tokenManager),window.tokenManager&&window.tokenManager.isAuthenticated()){const t=window.tokenManager.getUserRole();console.log("[DEBUG] Role from token manager:",t),console.log("[DEBUG] Access token exists:",!!window.tokenManager.getAccessToken()),t?(this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess()):(console.log("[DEBUG] No role found, waiting for role to be set..."),setTimeout(()=>this.initialize(),500))}else console.log("[DEBUG] Token manager not available or not authenticated, waiting..."),setTimeout(()=>this.initialize(),500)}setupRoleBasedAccess(){this.currentRole||(console.warn("No role detected, defaulting to student access"),this.currentRole="student");let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check:",r),t=!1}console.log(`Role-based loader initialized for: ${this.currentRole}${t?" (admin)":""}`),this.loadRoleSpecificFunctions(),this.setupRoleBasedUI(),this.replaceBlockedFunctions()}loadRoleSpecificFunctions(){this.currentRole==="teacher"?this.loadTeacherFunctions():this.currentRole==="student"&&this.loadStudentFunctions()}loadTeacherFunctions(){console.log("Teacher functions already available in main script")}loadStudentFunctions(){console.log("Student functions already available in main script")}loadFunction(t,r){console.log(`Function ${t} already available in main script for ${r}`),this.loadedFunctions.add(t)}setupRoleBasedUI(){let t=!1;try{const r=window.tokenManager.getAccessToken();r&&(t=window.tokenManager.decodeToken(r).role==="admin")}catch(r){console.warn("Could not decode token for admin check in UI:",r),t=!1}this.currentRole==="student"&&this.hideTeacherElements(),this.currentRole==="teacher"&&!t&&this.hideStudentElements()}hideTeacherElements(){[".teacher-cabinet",".test-creation-panel",".grade-management-panel",".class-management-panel",'[data-role="teacher"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}hideStudentElements(){[".student-cabinet",".test-taking-panel",".results-viewing-panel",'[data-role="student"]'].forEach(r=>{document.querySelectorAll(r).forEach(s=>{s.style.display="none",s.classList.add("role-hidden")})})}replaceBlockedFunctions(){this.currentRole==="student"?this.blockTeacherFunctions():this.currentRole==="teacher"&&this.blockStudentFunctions()}blockTeacherFunctions(){Object.entries({createTest:()=>this.showAccessDenied("teacher"),assignTest:()=>this.showAccessDenied("teacher"),gradeTest:()=>this.showAccessDenied("teacher"),manageClasses:()=>this.showAccessDenied("teacher"),viewAllResults:()=>this.showAccessDenied("teacher")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}blockStudentFunctions(){Object.entries({takeTest:()=>this.showAccessDenied("student"),submitTest:()=>this.showAccessDenied("student"),viewMyResults:()=>this.showAccessDenied("student")}).forEach(([r,n])=>{window[r]&&(this.blockedFunctions.add(r),window[r]=n)})}showAccessDenied(t){const r=`Access denied. This function requires ${t} role.`;console.warn(r),typeof showNotification=="function"?showNotification(r,"warning"):alert(r)}isFunctionBlocked(t){return this.blockedFunctions.has(t)}isFunctionLoaded(t){return this.loadedFunctions.has(t)}getCurrentRole(){return this.currentRole}hasRole(t){return this.currentRole===t}reloadRoleAccess(){this.initialize()}setupAccessAfterLogin(){if(console.log("[DEBUG] Setting up role-based access after login..."),console.log("[DEBUG] Role-based loader will now initialize (no more retry loop before login)"),!window.tokenManager)return console.error("[ERROR] Token manager not available during setupAccessAfterLogin"),!1;if(!window.tokenManager.isAuthenticated())return console.error("[ERROR] User not authenticated during setupAccessAfterLogin"),!1;const t=window.tokenManager.getUserRole();return t?(console.log("[DEBUG] Setting role after login:",t),this.currentRole=t,this.initialized=!0,this.retryCount=0,this.setupRoleBasedAccess(),console.log("[DEBUG] Role-based access setup completed successfully for role:",t),!0):(console.error("[ERROR] No role found in token during setupAccessAfterLogin"),!1)}}window.roleBasedLoader=new uJ;typeof o4<"u"&&o4.exports&&(o4.exports=uJ);const Kje=()=>{const e={schemaVersion:"2.0",enhancedFeatures:!0,newUserStructure:!0,newTestStructure:!0};localStorage.setItem("app_init_data",JSON.stringify(e))},Yje=()=>{Kje(),UJ.createRoot(document.getElementById("root")).render(l.jsx(Gs.StrictMode,{children:l.jsx(zje,{})}))};Yje()});export default Xje();
